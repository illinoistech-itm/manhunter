From java-user-return-34722-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 01 00:51:51 2008
Return-Path: <java-user-return-34722-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85709 invoked from network); 1 Jul 2008 00:51:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Jul 2008 00:51:51 -0000
Received: (qmail 51088 invoked by uid 500); 1 Jul 2008 00:51:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50331 invoked by uid 500); 1 Jul 2008 00:51:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50320 invoked by uid 99); 1 Jul 2008 00:51:46 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Jun 2008 17:51:46 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of SRS0=IyH2dP=XN=lucasmail.org=paul@yourhostingaccount.com designates 65.254.253.90 as permitted sender)
Received: from [65.254.253.90] (HELO mailout11.yourhostingaccount.com) (65.254.253.90)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Jul 2008 00:50:55 +0000
Received: from mailscan20.yourhostingaccount.com ([10.1.15.20] helo=mailscan20.yourhostingaccount.com)
	by mailout11.yourhostingaccount.com with esmtp (Exim)
	id 1KDU2P-0007jN-VG
	for java-user@lucene.apache.org; Mon, 30 Jun 2008 20:48:06 -0400
Received: from impout02.yourhostingaccount.com ([10.1.55.2] helo=impout02.yourhostingaccount.com)
	by mailscan20.yourhostingaccount.com with esmtp (Exim)
	id 1KDU2P-0005iS-U2
	for java-user@lucene.apache.org; Mon, 30 Jun 2008 20:48:05 -0400
Received: from authsmtp03.yourhostingaccount.com ([10.1.18.3])
	by impout02.yourhostingaccount.com with NO UCE
	id kQo51Z00303yUm20000000; Mon, 30 Jun 2008 20:48:05 -0400
X-EN-OrigOutIP: 10.1.18.3
X-EN-IMPSID: kQo51Z00303yUm20000000
Received: from adsl-76-201-168-3.dsl.pltn13.sbcglobal.net ([76.201.168.3] helo=[10.0.1.203])
	by authsmtp03.yourhostingaccount.com with esmtpsa (TLSv1:AES128-SHA:128)
	(Exim)
	id 1KDU2P-0001CU-5z
	for java-user@lucene.apache.org; Mon, 30 Jun 2008 20:48:05 -0400
Message-Id: <0A50D663-8810-48AC-8480-7ADAB513664B@lucasmail.org>
From: "Paul J. Lucas" <paul@lucasmail.org>
To: java-user@lucene.apache.org
In-Reply-To: <EA6F5635-68E8-4213-89CB-C68CCAB326CB@mikemccandless.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v924)
Subject: Re: FileNotFoundException in ConcurrentMergeScheduler
Date: Mon, 30 Jun 2008 17:48:01 -0700
References: <EEBD1ADA-C2E8-41D1-B8AE-E90DFDC090B4@mac.com> <483F47CD.1050709@gmail.com> <F0D9682E-BCFE-4F1E-9A8F-94E206BCCFBB@mac.com> <483F50F5.3050804@gmail.com> <483F549D.3040405@gmail.com> <28785928-1CE6-40B4-867B-114526A1F838@mikemccandless.com> <CAC3FF9B-FBCA-424D-97DA-C022DE0B01F7@mac.com> <EA6F5635-68E8-4213-89CB-C68CCAB326CB@mikemccandless.com>
X-Mailer: Apple Mail (2.924)
X-EN-UserInfo: 19b3ee6e8bc35660ab25150f3ce1009e:104eb4694f5dc54e252b420fd863a3b6
X-EN-AuthUser: paul@pauljlucas.org
Sender:  "Paul J. Lucas" <paul@lucasmail.org>
X-EN-OrigIP: 76.201.168.3
X-EN-OrigHost: adsl-76-201-168-3.dsl.pltn13.sbcglobal.net
X-Virus-Checked: Checked by ClamAV on apache.org

Sorry for the radio silence.  I changed my code around so that a  
single IndexReader and IndexSearcher are shared.  Since doing that,  
I've not seen the problem.  That being the case, I didn't pursue the  
issue.

I still think there's a bug because the code I had previously, IMHO,  
should have worked just fine.

- Paul


On May 30, 2008, at 2:59 AM, Michael McCandless wrote:

> Paul J. Lucas wrote:
>
>> On May 29, 2008, at 6:35 PM, Michael McCandless wrote:
>>
>>> Can you use lsof (or something similar) to see how many files you  
>>> have?
>>
>> FYI: I personally can't reproduce this; only a coworker can and  
>> even then it's sporadic, so it could take a little while.
>
> If possible, could you call IndexWriter.setInfoStream(...) and  
> capture the log produced leading up to the exception?  It could help  
> see if there is a bug here, by showing whether IndexWriter actually  
> deleted that file or not.
>
>>> Merging, especially several running at once, can greatly increase  
>>> open file count, and especially if mergeFactor is increased.
>>
>> That raises a few questions:
>>
>> 1. Should I lower my mergeFactor?
>
> What is your mergeFactor set to now?
>
> You can lower mergeFactor, but, if file exhaustion is the cause  
> here, it simply may not be enough.
>
>> 2. Is there any way to insist that only one merger runs?
>
> Yes, you can do this:
>
> ConcurrentMergeScheduler cms = (ConcurrentMergeScheduler)  
> writer.getMergeScheduler();
> cms.setMaxThreadCount(1)
>
> This way only one BG merge may run.  The next one that wants to kick  
> off will stall until the first one is done.
>
>>
>> 3. Is there any way to insist that all merges happen synchronously,  
>> i.e., on IndexWriter.close() only and not to use a separate merge  
>> thread?
>
> You can fallback to SerialMergeScheduler, which matches the behavior  
> pre-2.3.  In this case a merge kicks off, synchronously, in an add/ 
> updateDocument call after flushing a segment.
>
> Doing so only at close() is trickier.  Maybe, you could 1) use  
> SerialMergeScheduler, 2) set mergeFactor to something immense (to  
> prevent merging on a normal basis), 3) when you want to merge, set  
> mergeFactor to something normal (eg the default, 10) and then call  
> writer.maybeMerge().  Then call close().
>
> Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34723-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 01 00:59:30 2008
Return-Path: <java-user-return-34723-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88689 invoked from network); 1 Jul 2008 00:59:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Jul 2008 00:59:29 -0000
Received: (qmail 54914 invoked by uid 500); 1 Jul 2008 00:59:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54877 invoked by uid 500); 1 Jul 2008 00:59:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54866 invoked by uid 99); 1 Jul 2008 00:59:24 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Jun 2008 17:59:24 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of SRS0=IyH2dP=XN=lucasmail.org=paul@yourhostingaccount.com designates 65.254.253.28 as permitted sender)
Received: from [65.254.253.28] (HELO mailout03.yourhostingaccount.com) (65.254.253.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Jul 2008 00:58:33 +0000
Received: from mailscan21.yourhostingaccount.com ([10.1.15.21] helo=mailscan21.yourhostingaccount.com)
	by mailout03.yourhostingaccount.com with esmtp (Exim)
	id 1KDU9o-0004rH-SV
	for java-user@lucene.apache.org; Mon, 30 Jun 2008 20:55:44 -0400
Received: from impout03.yourhostingaccount.com ([10.1.55.3] helo=impout03.yourhostingaccount.com)
	by mailscan21.yourhostingaccount.com with esmtp (Exim)
	id 1KDU9o-0003Q7-Oi
	for java-user@lucene.apache.org; Mon, 30 Jun 2008 20:55:44 -0400
Received: from authsmtp02.yourhostingaccount.com ([10.1.18.2])
	by impout03.yourhostingaccount.com with NO UCE
	id kQvk1Z00102goRm0000000; Mon, 30 Jun 2008 20:55:44 -0400
X-EN-OrigOutIP: 10.1.18.2
X-EN-IMPSID: kQvk1Z00102goRm0000000
Received: from adsl-76-201-168-3.dsl.pltn13.sbcglobal.net ([76.201.168.3] helo=[10.0.1.203])
	by authsmtp02.yourhostingaccount.com with esmtpsa (TLSv1:AES128-SHA:128)
	(Exim)
	id 1KDU9o-0000e0-8n
	for java-user@lucene.apache.org; Mon, 30 Jun 2008 20:55:44 -0400
Message-Id: <EB8A44A6-A9FF-4C0E-ACA8-9E0E21C5AD6F@lucasmail.org>
From: "Paul J. Lucas" <paul@lucasmail.org>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v924)
Subject: Sorting case-insensitively
Date: Mon, 30 Jun 2008 17:55:39 -0700
X-Mailer: Apple Mail (2.924)
X-EN-UserInfo: 19b3ee6e8bc35660ab25150f3ce1009e:104eb4694f5dc54e252b420fd863a3b6
X-EN-AuthUser: paul@pauljlucas.org
Sender:  "Paul J. Lucas" <paul@lucasmail.org>
X-EN-OrigIP: 76.201.168.3
X-EN-OrigHost: adsl-76-201-168-3.dsl.pltn13.sbcglobal.net
X-Virus-Checked: Checked by ClamAV on apache.org

If I have a SortField with a type of STRING, is there any way to sort  
in a case-insensitive manner?

- Paul

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34724-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 01 02:01:37 2008
Return-Path: <java-user-return-34724-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26240 invoked from network); 1 Jul 2008 02:01:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Jul 2008 02:01:37 -0000
Received: (qmail 88870 invoked by uid 500); 1 Jul 2008 02:01:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88840 invoked by uid 500); 1 Jul 2008 02:01:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88829 invoked by uid 99); 1 Jul 2008 02:01:28 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Jun 2008 19:01:28 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Jul 2008 02:00:37 +0000
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 652CF30EFC19; Mon, 30 Jun 2008 20:00:26 -0600 (MDT)
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on javelina
X-Spam-Level: 
Received: from [10.0.1.2] (va-69-68-189-180.dyn.embarqhsd.net [69.68.189.180])
	by ehatchersolutions.com (Postfix) with ESMTP id 8EB2530EFC17
	for <java-user@lucene.apache.org>; Mon, 30 Jun 2008 20:00:21 -0600 (MDT)
Message-Id: <E91CC8FF-2D02-42C2-8CEA-6D5B61E4C253@ehatchersolutions.com>
From: Erik Hatcher <erik@ehatchersolutions.com>
To: java-user@lucene.apache.org
In-Reply-To: <EB8A44A6-A9FF-4C0E-ACA8-9E0E21C5AD6F@lucasmail.org>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v924)
Subject: Re: Sorting case-insensitively
Date: Mon, 30 Jun 2008 22:00:20 -0400
References: <EB8A44A6-A9FF-4C0E-ACA8-9E0E21C5AD6F@lucasmail.org>
X-Mailer: Apple Mail (2.924)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-0.6 required=5.0 tests=BAYES_00,RCVD_IN_SORBS_DUL 
	autolearn=no version=3.1.1


On Jun 30, 2008, at 8:55 PM, Paul J. Lucas wrote:
> If I have a SortField with a type of STRING, is there any way to  
> sort in a case-insensitive manner?

Only if you unify the case (lower case everything) on the client side  
that you send to Solr, but in general no.

You can use a text field type that uses a KeywordTokenizer(Factory)  
and lowercase on the Solr-side though.  The Solr example schema has  
one such "alphaOnlySort" field type.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34725-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 01 02:52:41 2008
Return-Path: <java-user-return-34725-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47336 invoked from network); 1 Jul 2008 02:52:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Jul 2008 02:52:41 -0000
Received: (qmail 9980 invoked by uid 500); 1 Jul 2008 02:52:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9946 invoked by uid 500); 1 Jul 2008 02:52:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9935 invoked by uid 99); 1 Jul 2008 02:52:36 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Jun 2008 19:52:36 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of wsnet@live.cn designates 65.54.246.224 as permitted sender)
Received: from [65.54.246.224] (HELO bay0-omc3-s24.bay0.hotmail.com) (65.54.246.224)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Jul 2008 02:51:42 +0000
Received: from BAY119-W25 ([207.46.9.60]) by bay0-omc3-s24.bay0.hotmail.com with Microsoft SMTPSVC(6.0.3790.3959);
	 Mon, 30 Jun 2008 19:51:41 -0700
Message-ID: <BAY119-W25A15DEAC2B42BCC94389EB49E0@phx.gbl>
Content-Type: multipart/alternative;
	boundary="_4a474a30-5fda-42a3-a62e-83e8871032ff_"
X-Originating-IP: [222.66.20.82]
From: lutan <wsnet@live.cn>
To: <java-user@lucene.apache.org>
Subject: RE: how to statistics categories amount
Date: Tue, 1 Jul 2008 10:51:40 +0800
Importance: Normal
In-Reply-To: <A0375914-6EDE-4A0C-BB74-2483060E54A3@ehatchersolutions.com>
References: <BAY119-W440204702F26CC85BB2799B49D0@phx.gbl>
 <A0375914-6EDE-4A0C-BB74-2483060E54A3@ehatchersolutions.com>
MIME-Version: 1.0
X-OriginalArrivalTime: 01 Jul 2008 02:51:41.0970 (UTC) FILETIME=[64191F20:01C8DB25]
X-Virus-Checked: Checked by ClamAV on apache.org

--_4a474a30-5fda-42a3-a62e-83e8871032ff_
Content-Type: text/plain; charset="gb2312"
Content-Transfer-Encoding: 8bit


Thanks for reply,but I  am not know Solr well.
Does Solr base on lucene core or hack lucene core
to achieve the (categories amount)'s function ?
Can I achieve the similar function using 
lucene core ?
> From: erik@ehatchersolutions.com> To: java-user@lucene.apache.org> Subject: Re: how to statistics categories amount> Date: Sat, 28 Jun 2008 05:36:12 -0400> > > On Jun 28, 2008, at 3:57 AM, lutan wrote:> > if I search a keyword likes 'computer' in a shopping website.> > the result may contains.> > total:> > (1000) products .> > categories:> > pc (500) products .> > notebook (300) products .> > server (200) products .> >> > so how do get each categories 'amount.> > I try to search many times on onec user search,> > but it is so slow> > This is a case where you are probably better off starting with Solr, > which supports faceting natively.> > The main trick to making this fast is coming up with cached sets of > each of the categories and intersecting each of those sets with the > main result set and using the cardinality of the intersected sets for > the counts. Again, Solr is what I'd recommend as a starting point for > you.> > Erik> > > --------------------------------------
 -------------------------------> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org> For additional commands, e-mail: java-user-help@lucene.apache.org> 
_________________________________________________________________
多个邮箱同步管理，live mail客户端万人抢用中
http://get.live.cn/product/mail.html
--_4a474a30-5fda-42a3-a62e-83e8871032ff_--

From java-user-return-34726-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 01 03:09:06 2008
Return-Path: <java-user-return-34726-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54065 invoked from network); 1 Jul 2008 03:09:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Jul 2008 03:09:06 -0000
Received: (qmail 17376 invoked by uid 500); 1 Jul 2008 03:09:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17346 invoked by uid 500); 1 Jul 2008 03:09:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17335 invoked by uid 99); 1 Jul 2008 03:09:01 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Jun 2008 20:09:01 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of SRS0=IyH2dP=XN=lucasmail.org=paul@yourhostingaccount.com designates 65.254.253.41 as permitted sender)
Received: from [65.254.253.41] (HELO mailout05.yourhostingaccount.com) (65.254.253.41)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Jul 2008 03:08:10 +0000
Received: from mailscan01.yourhostingaccount.com ([10.1.15.1] helo=mailscan01.yourhostingaccount.com)
	by mailout05.yourhostingaccount.com with esmtp (Exim)
	id 1KDWEI-0007Gw-0A
	for java-user@lucene.apache.org; Mon, 30 Jun 2008 23:08:30 -0400
Received: from impout02.yourhostingaccount.com ([10.1.55.2] helo=impout02.yourhostingaccount.com)
	by mailscan01.yourhostingaccount.com with esmtp (Exim)
	id 1KDWEH-0006Ez-R8
	for java-user@lucene.apache.org; Mon, 30 Jun 2008 23:08:29 -0400
Received: from authsmtp03.yourhostingaccount.com ([10.1.18.3])
	by impout02.yourhostingaccount.com with NO UCE
	id kT8V1Z00403yUm20000000; Mon, 30 Jun 2008 23:08:29 -0400
X-EN-OrigOutIP: 10.1.18.3
X-EN-IMPSID: kT8V1Z00403yUm20000000
Received: from c-98-210-152-178.hsd1.ca.comcast.net ([98.210.152.178] helo=[192.168.1.202])
	by authsmtp03.yourhostingaccount.com with esmtpsa (TLSv1:AES128-SHA:128)
	(Exim)
	id 1KDWEH-00020q-AC
	for java-user@lucene.apache.org; Mon, 30 Jun 2008 23:08:29 -0400
Message-Id: <3F71F1AB-3905-4097-8C86-E66916BDF521@lucasmail.org>
From: "Paul J. Lucas" <paul@lucasmail.org>
To: java-user@lucene.apache.org
In-Reply-To: <E91CC8FF-2D02-42C2-8CEA-6D5B61E4C253@ehatchersolutions.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v924)
Subject: Re: Sorting case-insensitively
Date: Mon, 30 Jun 2008 20:08:26 -0700
References: <EB8A44A6-A9FF-4C0E-ACA8-9E0E21C5AD6F@lucasmail.org> <E91CC8FF-2D02-42C2-8CEA-6D5B61E4C253@ehatchersolutions.com>
X-Mailer: Apple Mail (2.924)
X-EN-UserInfo: 19b3ee6e8bc35660ab25150f3ce1009e:104eb4694f5dc54e252b420fd863a3b6
X-EN-AuthUser: paul@pauljlucas.org
Sender:  "Paul J. Lucas" <paul@lucasmail.org>
X-EN-OrigIP: 98.210.152.178
X-EN-OrigHost: c-98-210-152-178.hsd1.ca.comcast.net
X-Virus-Checked: Checked by ClamAV on apache.org

On Jun 30, 2008, at 7:00 PM, Erik Hatcher wrote:

> On Jun 30, 2008, at 8:55 PM, Paul J. Lucas wrote:
>> If I have a SortField with a type of STRING, is there any way to  
>> sort in a case-insensitive manner?
>
> Only if you unify the case (lower case everything) on the client  
> side that you send to Solr, but in general no.
>
> You can use a text field type that uses a KeywordTokenizer(Factory)  
> and lowercase on the Solr-side though.  The Solr example schema has  
> one such "alphaOnlySort" field type.

Couldn't I also use a custom SortComparator?

- Paul

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34727-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 01 06:34:12 2008
Return-Path: <java-user-return-34727-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8640 invoked from network); 1 Jul 2008 06:34:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Jul 2008 06:34:11 -0000
Received: (qmail 33904 invoked by uid 500); 1 Jul 2008 06:34:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33880 invoked by uid 500); 1 Jul 2008 06:34:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33869 invoked by uid 99); 1 Jul 2008 06:34:06 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Jun 2008 23:34:06 -0700
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of wsnet@live.cn designates 65.54.246.227 as permitted sender)
Received: from [65.54.246.227] (HELO bay0-omc3-s27.bay0.hotmail.com) (65.54.246.227)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Jul 2008 06:33:13 +0000
Received: from BAY119-W52 ([207.46.9.87]) by bay0-omc3-s27.bay0.hotmail.com with Microsoft SMTPSVC(6.0.3790.3959);
	 Mon, 30 Jun 2008 23:33:33 -0700
Message-ID: <BAY119-W5268B508C3A9250F025338B49E0@phx.gbl>
Content-Type: multipart/alternative;
	boundary="_b55400f0-34c2-4716-b682-7500024f0f16_"
X-Originating-IP: [222.66.20.82]
From: lutan <wsnet@live.cn>
To: <java-user@lucene.apache.org>
Subject: RE: How Lucene Search
Date: Tue, 1 Jul 2008 14:33:32 +0800
Importance: Normal
In-Reply-To: <18127970.post@talk.nabble.com>
References: <18127970.post@talk.nabble.com>
MIME-Version: 1.0
X-OriginalArrivalTime: 01 Jul 2008 06:33:33.0236 (UTC) FILETIME=[623B1F40:01C8DB44]
X-Virus-Checked: Checked by ClamAV on apache.org

--_b55400f0-34c2-4716-b682-7500024f0f16_
Content-Type: text/plain; charset="gb2312"
Content-Transfer-Encoding: 8bit


I have same questions puzzled me. 
Could anyone explain which class been called in  the searching  steps ?
Thanks!
> Date: Thu, 26 Jun 2008 00:24:08 -0700> From: blazingwolf7@gmail.com> To: java-user@lucene.apache.org> Subject: How Lucene Search> > > hi, > > I am fairly new to Lucene and is currently going over its source code. I had> read through the code for a few times, mapping it and all but I seems to be> facing a problem. I could go all the way to the calculation of score for> each result obtain, but strangely I did not managed to locate the part where> Lucene open the index and check for the matching term.> > What I mean is that, I want to check on how Lucene actually open the index> and perform the search. I went through all the methods in IndexReader,> IndexSearcher and some other related class but still fail to locate the> method responsible.> > Could anyone help me with this? Thanks > -- > View this message in context: http://www.nabble.com/How-Lucene-Search-tp18127970p18127970.html> Sent from the Lucene - Java Users mailing list archive at Nabble.com.> > > --------------------
 -------------------------------------------------> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org> For additional commands, e-mail: java-user-help@lucene.apache.org> 
_________________________________________________________________
多个邮箱同步管理，live mail客户端万人抢用中
http://get.live.cn/product/mail.html
--_b55400f0-34c2-4716-b682-7500024f0f16_--

From java-user-return-34728-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 01 08:38:21 2008
Return-Path: <java-user-return-34728-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42620 invoked from network); 1 Jul 2008 08:38:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Jul 2008 08:38:20 -0000
Received: (qmail 93702 invoked by uid 500); 1 Jul 2008 08:38:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93666 invoked by uid 500); 1 Jul 2008 08:38:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93655 invoked by uid 99); 1 Jul 2008 08:38:14 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Jul 2008 01:38:14 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.132.248] (HELO an-out-0708.google.com) (209.85.132.248)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Jul 2008 08:37:23 +0000
Received: by an-out-0708.google.com with SMTP id c37so352802anc.49
        for <java-user@lucene.apache.org>; Tue, 01 Jul 2008 01:37:43 -0700 (PDT)
Received: by 10.100.14.2 with SMTP id 2mr5279911ann.67.1214901462931;
        Tue, 01 Jul 2008 01:37:42 -0700 (PDT)
Received: from ?10.17.4.4? ( [72.93.214.93])
        by mx.google.com with ESMTPS id 7sm8043075ywo.7.2008.07.01.01.37.42
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Tue, 01 Jul 2008 01:37:42 -0700 (PDT)
Message-Id: <61F38802-526D-476E-8190-A65CA1601360@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <0A50D663-8810-48AC-8480-7ADAB513664B@lucasmail.org>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v924)
Subject: Re: FileNotFoundException in ConcurrentMergeScheduler
Date: Tue, 1 Jul 2008 04:37:41 -0400
References: <EEBD1ADA-C2E8-41D1-B8AE-E90DFDC090B4@mac.com> <483F47CD.1050709@gmail.com> <F0D9682E-BCFE-4F1E-9A8F-94E206BCCFBB@mac.com> <483F50F5.3050804@gmail.com> <483F549D.3040405@gmail.com> <28785928-1CE6-40B4-867B-114526A1F838@mikemccandless.com> <CAC3FF9B-FBCA-424D-97DA-C022DE0B01F7@mac.com> <EA6F5635-68E8-4213-89CB-C68CCAB326CB@mikemccandless.com> <0A50D663-8810-48AC-8480-7ADAB513664B@lucasmail.org>
X-Mailer: Apple Mail (2.924)
X-Virus-Checked: Checked by ClamAV on apache.org


Hmmm then it sounds possible you were in fact running out of file  
descriptors.

What was your mergeFactor set to?

Mike

Paul J. Lucas wrote:

> Sorry for the radio silence.  I changed my code around so that a  
> single IndexReader and IndexSearcher are shared.  Since doing that,  
> I've not seen the problem.  That being the case, I didn't pursue the  
> issue.
>
> I still think there's a bug because the code I had previously, IMHO,  
> should have worked just fine.
>
> - Paul
>
>
> On May 30, 2008, at 2:59 AM, Michael McCandless wrote:
>
>> Paul J. Lucas wrote:
>>
>>> On May 29, 2008, at 6:35 PM, Michael McCandless wrote:
>>>
>>>> Can you use lsof (or something similar) to see how many files you  
>>>> have?
>>>
>>> FYI: I personally can't reproduce this; only a coworker can and  
>>> even then it's sporadic, so it could take a little while.
>>
>> If possible, could you call IndexWriter.setInfoStream(...) and  
>> capture the log produced leading up to the exception?  It could  
>> help see if there is a bug here, by showing whether IndexWriter  
>> actually deleted that file or not.
>>
>>>> Merging, especially several running at once, can greatly increase  
>>>> open file count, and especially if mergeFactor is increased.
>>>
>>> That raises a few questions:
>>>
>>> 1. Should I lower my mergeFactor?
>>
>> What is your mergeFactor set to now?
>>
>> You can lower mergeFactor, but, if file exhaustion is the cause  
>> here, it simply may not be enough.
>>
>>> 2. Is there any way to insist that only one merger runs?
>>
>> Yes, you can do this:
>>
>> ConcurrentMergeScheduler cms = (ConcurrentMergeScheduler)  
>> writer.getMergeScheduler();
>> cms.setMaxThreadCount(1)
>>
>> This way only one BG merge may run.  The next one that wants to  
>> kick off will stall until the first one is done.
>>
>>>
>>> 3. Is there any way to insist that all merges happen  
>>> synchronously, i.e., on IndexWriter.close() only and not to use a  
>>> separate merge thread?
>>
>> You can fallback to SerialMergeScheduler, which matches the  
>> behavior pre-2.3.  In this case a merge kicks off, synchronously,  
>> in an add/updateDocument call after flushing a segment.
>>
>> Doing so only at close() is trickier.  Maybe, you could 1) use  
>> SerialMergeScheduler, 2) set mergeFactor to something immense (to  
>> prevent merging on a normal basis), 3) when you want to merge, set  
>> mergeFactor to something normal (eg the default, 10) and then call  
>> writer.maybeMerge().  Then call close().
>>
>> Mike
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34729-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 01 08:48:56 2008
Return-Path: <java-user-return-34729-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47192 invoked from network); 1 Jul 2008 08:48:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Jul 2008 08:48:56 -0000
Received: (qmail 6099 invoked by uid 500); 1 Jul 2008 08:48:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6062 invoked by uid 500); 1 Jul 2008 08:48:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6051 invoked by uid 99); 1 Jul 2008 08:48:50 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Jul 2008 01:48:50 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.132.249] (HELO an-out-0708.google.com) (209.85.132.249)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Jul 2008 08:47:59 +0000
Received: by an-out-0708.google.com with SMTP id c37so353441anc.49
        for <java-user@lucene.apache.org>; Tue, 01 Jul 2008 01:48:18 -0700 (PDT)
Received: by 10.100.154.9 with SMTP id b9mr5294437ane.78.1214902095940;
        Tue, 01 Jul 2008 01:48:15 -0700 (PDT)
Received: from ?10.17.4.4? ( [72.93.214.93])
        by mx.google.com with ESMTPS id 8sm8091094ywg.6.2008.07.01.01.48.15
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Tue, 01 Jul 2008 01:48:15 -0700 (PDT)
Cc: Sascha Fahl <sascha.fahl@googlemail.com>
Message-Id: <E6B207D1-40B0-4E93-BB1C-4FAAA4462E07@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <58714705-0625-41B0-A296-57B92E2C045F@gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v924)
Subject: Re: Problems with reopening IndexReader while pushing documents to the index
Date: Tue, 1 Jul 2008 04:48:14 -0400
References: <88F3F6A4-FBFB-43DF-890D-DB5F0D9A2461@gmail.com> <11EDA512-DB42-49EB-A2E1-8857C00D2A53@mikemccandless.com> <58714705-0625-41B0-A296-57B92E2C045F@gmail.com>
X-Mailer: Apple Mail (2.924)
X-Virus-Checked: Checked by ClamAV on apache.org


OK thanks for the answers below.

One thing to realize is, with this specific corruption, you will only  
hit the exception if the one term that has the corruption is queried  
on.  Ie, only a certain term in a query will hit the corruption.

That's great news that it's easily reproduced -- can you post the code  
you're using that hits it?  It's easily reproduced when starting from  
a newly created index, right?

Mike

Sascha Fahl wrote:

> It is easyily reproduced. The strange thing is that when I check the  
> IndexReader for currentness some IndexReader seem to get the  
> corrupted version of the index and some not (the IndexReader gets  
> reopened around 10 times while adding the documents to the index and  
> sending 10.000 requests to the index). So maybe something goes wrong  
> when the IndexReader fetches the index while IndexWriter flushes  
> data to the index ( I did not change the default MergePolicy)?
> I will do the CheckIndex thing asap.
> I do not change any of the indexwriter settings. That is how I  
> initialize a new IndexWriter: this.indexWriter = new  
> IndexWriter(index_dir, new LiveAnalyzer(), false);
> I am working with a singleton (so only one thread adds documents to  
> the index).
> This is what java -version says: java version "1.5.0_13"
> Java(TM) 2 Runtime Environment, Standard Edition (build 1.5.0_13- 
> b05-237)
> Java HotSpot(TM) Client VM (build 1.5.0_13-119, mixed mode, sharing)
> Currently I am developing on MacOS X Leopard, but the production  
> system shall run on gentoo linux.
> New indeces only are created when there was no previous index in the  
> index directory.
>
> Sascha
>
> Am 30.06.2008 um 18:34 schrieb Michael McCandless:
>
>>
>> This is spooky: that exception means you have some sort of index  
>> corruption.  The TermScorer thinks it found a doc ID 37389, which  
>> is out of bounds.
>>
>> Reopening IndexReader while IndexWriter is writing should be  
>> completely fine.
>>
>> Is this easily reproduced?  If so, if you could narrow it down to  
>> sequence of added documents, that'd be awesome.
>>
>> It's very strange that you see the corruption go away.  Can you run  
>> CheckIndex (java org.apache.lucene.index.CheckIndex <indexDir>) to  
>> see if it detects any corruption.  In fact, if you could run  
>> CheckIndex after each session of IndexWriter to isolate which batch  
>> of added documents causes the corruption, that could help us narrow  
>> it down.
>>
>> Are you changing any of the settings in IndexWriter?  Are you using  
>> multiple threads?  Which exact JRE version and OS are you using?   
>> Are you creating a new index at the start of each run?
>>
>> Mike
>>
>> Sascha Fahl wrote:
>>
>>> Hi,
>>>
>>> I see some strange behavoiur of lucene. The following scenario.
>>> While adding documents to my index (every doc is pretty small, doc- 
>>> count is about 12000) I have implemented a custom behaviour of  
>>> flushing and committing documents to the index. Before adding  
>>> documents to the index I check if wether der ramDocCount has  
>>> reached a certain number of if the last commit is a while ago. If  
>>> so i flush the buffered documents and reopen the IndexWriter. So  
>>> far, so good. Indexing works very well. The problem is that if I  
>>> send requests with die IndexReader while writing documents with  
>>> the IndexWriter (I send around 10.000 requests to lucene) I reopen  
>>> the IndexReader every 100 requests (only for testing) if the  
>>> IndexReader is not current. The first around 4000 requests work  
>>> very well, but afterwards I always get the following exception:
>>>
>>> java.lang.ArrayIndexOutOfBoundsException: 37389
>>> 	at org.apache.lucene.search.TermScorer.score(TermScorer.java:126)
>>> 	at  
>>> org.apache.lucene.util.ScorerDocQueue.topScore(ScorerDocQueue.java: 
>>> 112)
>>> 	at  
>>> org 
>>> .apache 
>>> .lucene 
>>> .search 
>>> .DisjunctionSumScorer 
>>> .advanceAfterCurrent(DisjunctionSumScorer.java:172)
>>> 	at  
>>> org 
>>> .apache 
>>> .lucene.search.DisjunctionSumScorer.next(DisjunctionSumScorer.java: 
>>> 146)
>>> 	at  
>>> org.apache.lucene.search.BooleanScorer2.score(BooleanScorer2.java: 
>>> 319)
>>> 	at  
>>> org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java: 
>>> 146)
>>> 	at  
>>> org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java: 
>>> 113)
>>> 	at org.apache.lucene.search.Hits.getMoreDocs(Hits.java:100)
>>> 	at org.apache.lucene.search.Hits.<init>(Hits.java:67)
>>> 	at org.apache.lucene.search.Searcher.search(Searcher.java:46)
>>> 	at org.apache.lucene.search.Searcher.search(Searcher.java:38)
>>>
>>> This seems to be a temporarily problem because opening a new  
>>> IndexReader after all documents were added everything is ok again  
>>> and the 10.000 requests are all right.
>>>
>>> So what could be the problem here?
>>>
>>> reg,
>>> sascha
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34730-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 01 08:53:36 2008
Return-Path: <java-user-return-34730-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 50509 invoked from network); 1 Jul 2008 08:53:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Jul 2008 08:53:35 -0000
Received: (qmail 14635 invoked by uid 500); 1 Jul 2008 08:53:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14563 invoked by uid 500); 1 Jul 2008 08:53:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 14552 invoked by uid 99); 1 Jul 2008 08:53:29 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Jul 2008 01:53:29 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.132.244] (HELO an-out-0708.google.com) (209.85.132.244)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Jul 2008 08:52:38 +0000
Received: by an-out-0708.google.com with SMTP id c37so353726anc.49
        for <java-user@lucene.apache.org>; Tue, 01 Jul 2008 01:52:56 -0700 (PDT)
Received: by 10.100.208.11 with SMTP id f11mr2063949ang.89.1214902375737;
        Tue, 01 Jul 2008 01:52:55 -0700 (PDT)
Received: from ?10.17.4.4? ( [72.93.214.93])
        by mx.google.com with ESMTPS id 6sm8069034ywn.0.2008.07.01.01.52.54
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Tue, 01 Jul 2008 01:52:55 -0700 (PDT)
Cc: Sascha Fahl <sascha.fahl@googlemail.com>
Message-Id: <57B9F4B5-E76D-4991-837B-1723E9A47674@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <1B9E2FCB-D146-4493-A45C-42A1A2123618@gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v924)
Subject: Re: Problems with reopening IndexReader while pushing documents to the index
Date: Tue, 1 Jul 2008 04:52:53 -0400
References: <88F3F6A4-FBFB-43DF-890D-DB5F0D9A2461@gmail.com> <11EDA512-DB42-49EB-A2E1-8857C00D2A53@mikemccandless.com> <1B9E2FCB-D146-4493-A45C-42A1A2123618@gmail.com>
X-Mailer: Apple Mail (2.924)
X-Virus-Checked: Checked by ClamAV on apache.org


By "does not help" do you mean CheckIndex never detects this  
corruption, yet you then hit that exception when searching?

By "reopening fails" what do you mean?  I thought reopen works fine,  
but then it's only the search that fails?

Mike

Sascha Fahl wrote:

> Checking the index after adding documents and befor reopening the  
> IndexReader does not help. After adding documents nothing bad  
> happens and CheckIndex says the index is all right. But when I check  
> the index before reopen it
> CheckIndex does not detect any corruption and says the index is ok  
> and reopening fails.
>
> Sascha
>
> Am 30.06.2008 um 18:34 schrieb Michael McCandless:
>
>>
>> This is spooky: that exception means you have some sort of index  
>> corruption.  The TermScorer thinks it found a doc ID 37389, which  
>> is out of bounds.
>>
>> Reopening IndexReader while IndexWriter is writing should be  
>> completely fine.
>>
>> Is this easily reproduced?  If so, if you could narrow it down to  
>> sequence of added documents, that'd be awesome.
>>
>> It's very strange that you see the corruption go away.  Can you run  
>> CheckIndex (java org.apache.lucene.index.CheckIndex <indexDir>) to  
>> see if it detects any corruption.  In fact, if you could run  
>> CheckIndex after each session of IndexWriter to isolate which batch  
>> of added documents causes the corruption, that could help us narrow  
>> it down.
>>
>> Are you changing any of the settings in IndexWriter?  Are you using  
>> multiple threads?  Which exact JRE version and OS are you using?   
>> Are you creating a new index at the start of each run?
>>
>> Mike
>>
>> Sascha Fahl wrote:
>>
>>> Hi,
>>>
>>> I see some strange behavoiur of lucene. The following scenario.
>>> While adding documents to my index (every doc is pretty small, doc- 
>>> count is about 12000) I have implemented a custom behaviour of  
>>> flushing and committing documents to the index. Before adding  
>>> documents to the index I check if wether der ramDocCount has  
>>> reached a certain number of if the last commit is a while ago. If  
>>> so i flush the buffered documents and reopen the IndexWriter. So  
>>> far, so good. Indexing works very well. The problem is that if I  
>>> send requests with die IndexReader while writing documents with  
>>> the IndexWriter (I send around 10.000 requests to lucene) I reopen  
>>> the IndexReader every 100 requests (only for testing) if the  
>>> IndexReader is not current. The first around 4000 requests work  
>>> very well, but afterwards I always get the following exception:
>>>
>>> java.lang.ArrayIndexOutOfBoundsException: 37389
>>> 	at org.apache.lucene.search.TermScorer.score(TermScorer.java:126)
>>> 	at  
>>> org.apache.lucene.util.ScorerDocQueue.topScore(ScorerDocQueue.java: 
>>> 112)
>>> 	at  
>>> org 
>>> .apache 
>>> .lucene 
>>> .search 
>>> .DisjunctionSumScorer 
>>> .advanceAfterCurrent(DisjunctionSumScorer.java:172)
>>> 	at  
>>> org 
>>> .apache 
>>> .lucene.search.DisjunctionSumScorer.next(DisjunctionSumScorer.java: 
>>> 146)
>>> 	at  
>>> org.apache.lucene.search.BooleanScorer2.score(BooleanScorer2.java: 
>>> 319)
>>> 	at  
>>> org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java: 
>>> 146)
>>> 	at  
>>> org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java: 
>>> 113)
>>> 	at org.apache.lucene.search.Hits.getMoreDocs(Hits.java:100)
>>> 	at org.apache.lucene.search.Hits.<init>(Hits.java:67)
>>> 	at org.apache.lucene.search.Searcher.search(Searcher.java:46)
>>> 	at org.apache.lucene.search.Searcher.search(Searcher.java:38)
>>>
>>> This seems to be a temporarily problem because opening a new  
>>> IndexReader after all documents were added everything is ok again  
>>> and the 10.000 requests are all right.
>>>
>>> So what could be the problem here?
>>>
>>> reg,
>>> sascha
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34731-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 01 09:15:25 2008
Return-Path: <java-user-return-34731-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59560 invoked from network); 1 Jul 2008 09:15:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Jul 2008 09:15:24 -0000
Received: (qmail 50342 invoked by uid 500); 1 Jul 2008 09:15:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50308 invoked by uid 500); 1 Jul 2008 09:15:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50296 invoked by uid 99); 1 Jul 2008 09:15:19 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Jul 2008 02:15:19 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [194.125.145.37] (HELO mercury.propylon.com) (194.125.145.37)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Jul 2008 09:14:27 +0000
Received: from propylon-sdsl.sdsl.esat.net ([193.120.101.26] helo=[192.168.213.119])
	by mercury.propylon.com with esmtp (Exim 4.50)
	id 1KDbsJ-0006xp-KZ
	for java-user@lucene.apache.org; Tue, 01 Jul 2008 10:10:12 +0100
Message-ID: <4869F581.9020300@propylon.com>
Date: Tue, 01 Jul 2008 10:14:41 +0100
From: John Byrne <john.byrne@propylon.com>
User-Agent: Thunderbird 2.0.0.14 (Windows/20080421)
MIME-Version: 1.0
To: java-user@lucene.apache.org
References: <16f8407d0806301415xd3b869bs6a3d93c814e4f499@mail.gmail.com>
In-Reply-To: <16f8407d0806301415xd3b869bs6a3d93c814e4f499@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-SA-Exim-Connect-IP: 193.120.101.26
X-SA-Exim-Mail-From: john.byrne@propylon.com
Subject: Re: Nested Proximity searches
X-Spam-Checker-Version: SpamAssassin 3.0.3 (2005-04-27) on 
	mercury.propylon.com
X-Spam-Level: 
X-SA-Exim-Version: 4.2 (built Thu, 03 Mar 2005 10:44:12 +0100)
X-SA-Exim-Scanned: Yes (on mercury.propylon.com)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-3.9 required=5.0 tests=ALL_TRUSTED,AWL,BAYES_00 
	autolearn=ham version=3.0.3

The QueryParser syntax does not support what you're trying to do. 
However, it is possible to do with the API. If you can construct your 
Query programatically, you can use the SpanQuery API to do what you need.

Proximity searching is achieved using the SpanNearQuery; the constructor 
of this object takes an array of generic SpanQuerys - so you can nest 
SpanQuerys within other SpanQuerys.

Regards,
-John

David Lee wrote:
> Is it possible to do nested proximity searches with lucene?
>
> i.e. can I say I want a to be within 1 word of b and then that group to be
> within 4 words of c? The syntax ""a b"~1" c"~4 doesn't seem to work (since
> it treats the first two quotes as a pair and the later 2 as another pair).
>
>   
> ------------------------------------------------------------------------
>
> No virus found in this incoming message.
> Checked by AVG. 
> Version: 7.5.524 / Virus Database: 270.4.3/1527 - Release Date: 30/06/2008 18:07
>   


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34732-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 01 09:28:56 2008
Return-Path: <java-user-return-34732-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63325 invoked from network); 1 Jul 2008 09:28:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Jul 2008 09:28:56 -0000
Received: (qmail 66802 invoked by uid 500); 1 Jul 2008 09:28:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66759 invoked by uid 500); 1 Jul 2008 09:28:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66748 invoked by uid 99); 1 Jul 2008 09:28:51 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Jul 2008 02:28:51 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Jul 2008 09:28:00 +0000
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 6372230EFC19; Tue,  1 Jul 2008 03:27:48 -0600 (MDT)
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on javelina
X-Spam-Level: 
Received: from [10.0.1.2] (va-69-68-189-180.dyn.embarqhsd.net [69.68.189.180])
	by ehatchersolutions.com (Postfix) with ESMTP id 3C2B430EFC17
	for <java-user@lucene.apache.org>; Tue,  1 Jul 2008 03:27:38 -0600 (MDT)
Message-Id: <66EE498B-8989-4D17-B794-53BE9ED1754A@ehatchersolutions.com>
From: Erik Hatcher <erik@ehatchersolutions.com>
To: java-user@lucene.apache.org
In-Reply-To: <3F71F1AB-3905-4097-8C86-E66916BDF521@lucasmail.org>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v924)
Subject: Re: Sorting case-insensitively
Date: Tue, 1 Jul 2008 05:27:34 -0400
References: <EB8A44A6-A9FF-4C0E-ACA8-9E0E21C5AD6F@lucasmail.org> <E91CC8FF-2D02-42C2-8CEA-6D5B61E4C253@ehatchersolutions.com> <3F71F1AB-3905-4097-8C86-E66916BDF521@lucasmail.org>
X-Mailer: Apple Mail (2.924)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-0.6 required=5.0 tests=BAYES_00,RCVD_IN_SORBS_DUL 
	autolearn=no version=3.1.1


On Jun 30, 2008, at 11:08 PM, Paul J. Lucas wrote:

> On Jun 30, 2008, at 7:00 PM, Erik Hatcher wrote:
>
>> On Jun 30, 2008, at 8:55 PM, Paul J. Lucas wrote:
>>> If I have a SortField with a type of STRING, is there any way to  
>>> sort in a case-insensitive manner?
>>
>> Only if you unify the case (lower case everything) on the client  
>> side that you send to Solr, but in general no.
>>
>> You can use a text field type that uses a KeywordTokenizer(Factory)  
>> and lowercase on the Solr-side though.  The Solr example schema has  
>> one such "alphaOnlySort" field type.
>
> Couldn't I also use a custom SortComparator?

Oops, sorry, my reply was off-base for java-user.  I replied as if,  
obviously, it was solr-user.

And yes, you could use a custom SortComparator for this case.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34733-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 01 10:15:30 2008
Return-Path: <java-user-return-34733-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75683 invoked from network); 1 Jul 2008 10:15:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Jul 2008 10:15:30 -0000
Received: (qmail 19977 invoked by uid 500); 1 Jul 2008 10:15:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19949 invoked by uid 500); 1 Jul 2008 10:15:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19938 invoked by uid 99); 1 Jul 2008 10:15:23 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Jul 2008 03:15:23 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.132.246] (HELO an-out-0708.google.com) (209.85.132.246)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Jul 2008 10:14:31 +0000
Received: by an-out-0708.google.com with SMTP id c37so359960anc.49
        for <java-user@lucene.apache.org>; Tue, 01 Jul 2008 03:14:50 -0700 (PDT)
Received: by 10.100.251.18 with SMTP id y18mr5420338anh.111.1214907290053;
        Tue, 01 Jul 2008 03:14:50 -0700 (PDT)
Received: from ?10.17.4.4? ( [72.93.214.93])
        by mx.google.com with ESMTPS id 4sm835457yxd.2.2008.07.01.03.14.49
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Tue, 01 Jul 2008 03:14:49 -0700 (PDT)
Cc: java-user@lucene.apache.org
Message-Id: <926E7E42-26C5-489C-BE94-BB6E1F35735D@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: Sascha Fahl <sascha.fahl@googlemail.com>
In-Reply-To: <1BBE0E5C-3830-475E-A5E8-DBC1F3513795@gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v924)
Subject: Re: Problems with reopening IndexReader while pushing documents to the index
Date: Tue, 1 Jul 2008 06:14:48 -0400
References: <88F3F6A4-FBFB-43DF-890D-DB5F0D9A2461@gmail.com> <11EDA512-DB42-49EB-A2E1-8857C00D2A53@mikemccandless.com> <1B9E2FCB-D146-4493-A45C-42A1A2123618@gmail.com> <57B9F4B5-E76D-4991-837B-1723E9A47674@mikemccandless.com> <1BBE0E5C-3830-475E-A5E8-DBC1F3513795@gmail.com>
X-Mailer: Apple Mail (2.924)
X-Virus-Checked: Checked by ClamAV on apache.org


That's interesting.  So you are using IndexReader.reopen() to get a  
new reader?  Are you closing the previous reader?

The exception goes away if you create a new IndexSearcher on the  
reopened IndexReader?

I don't yet see how that could explain the exception, though.  If you  
reopen() the underling IndexReader in an IndexSearcher, the original  
IndexReader should still be intact and still searching the point-in- 
time snapshot that it had been opened on.  IndexSearcher itself  
doens't hold any "state" about the index (I think); it relies on  
IndexReader for that.

Mike

Sascha Fahl wrote:

> I think I could solve the "problem". It was no Lucene specific  
> problem. What I did was reopen the IndexReader but not creating a  
> new IndexSearcher object. But of course as Java always passes  
> parameters by value (no matter what parameter) the old IndexSearcher  
> object did not see the updated IndexReader object, because  
> IndexSearcher is working with its own instance of IndexReader and  
> not with the reference to the original IndexReader. So what caused
> the problem was the requests always were sent to the same instance  
> of IndexSearcher. But when the IndexSearcher had to access the index  
> physically (the harddisk) of course changes made by the IndexWriter  
> were just visible to the IndexReader but not to the IndexSearcher.
> Is that the explaination Mike?
>
> Sascha
>
> Am 01.07.2008 um 10:52 schrieb Michael McCandless:
>
>>
>> By "does not help" do you mean CheckIndex never detects this  
>> corruption, yet you then hit that exception when searching?
>>
>> By "reopening fails" what do you mean?  I thought reopen works  
>> fine, but then it's only the search that fails?
>>
>> Mike
>>
>> Sascha Fahl wrote:
>>
>>> Checking the index after adding documents and befor reopening the  
>>> IndexReader does not help. After adding documents nothing bad  
>>> happens and CheckIndex says the index is all right. But when I  
>>> check the index before reopen it
>>> CheckIndex does not detect any corruption and says the index is ok  
>>> and reopening fails.
>>>
>>> Sascha
>>>
>>> Am 30.06.2008 um 18:34 schrieb Michael McCandless:
>>>
>>>>
>>>> This is spooky: that exception means you have some sort of index  
>>>> corruption.  The TermScorer thinks it found a doc ID 37389, which  
>>>> is out of bounds.
>>>>
>>>> Reopening IndexReader while IndexWriter is writing should be  
>>>> completely fine.
>>>>
>>>> Is this easily reproduced?  If so, if you could narrow it down to  
>>>> sequence of added documents, that'd be awesome.
>>>>
>>>> It's very strange that you see the corruption go away.  Can you  
>>>> run CheckIndex (java org.apache.lucene.index.CheckIndex  
>>>> <indexDir>) to see if it detects any corruption.  In fact, if you  
>>>> could run CheckIndex after each session of IndexWriter to isolate  
>>>> which batch of added documents causes the corruption, that could  
>>>> help us narrow it down.
>>>>
>>>> Are you changing any of the settings in IndexWriter?  Are you  
>>>> using multiple threads?  Which exact JRE version and OS are you  
>>>> using?  Are you creating a new index at the start of each run?
>>>>
>>>> Mike
>>>>
>>>> Sascha Fahl wrote:
>>>>
>>>>> Hi,
>>>>>
>>>>> I see some strange behavoiur of lucene. The following scenario.
>>>>> While adding documents to my index (every doc is pretty small,  
>>>>> doc-count is about 12000) I have implemented a custom behaviour  
>>>>> of flushing and committing documents to the index. Before adding  
>>>>> documents to the index I check if wether der ramDocCount has  
>>>>> reached a certain number of if the last commit is a while ago.  
>>>>> If so i flush the buffered documents and reopen the IndexWriter.  
>>>>> So far, so good. Indexing works very well. The problem is that  
>>>>> if I send requests with die IndexReader while writing documents  
>>>>> with the IndexWriter (I send around 10.000 requests to lucene) I  
>>>>> reopen the IndexReader every 100 requests (only for testing) if  
>>>>> the IndexReader is not current. The first around 4000 requests  
>>>>> work very well, but afterwards I always get the following  
>>>>> exception:
>>>>>
>>>>> java.lang.ArrayIndexOutOfBoundsException: 37389
>>>>> 	at org.apache.lucene.search.TermScorer.score(TermScorer.java:126)
>>>>> 	at  
>>>>> org 
>>>>> .apache.lucene.util.ScorerDocQueue.topScore(ScorerDocQueue.java: 
>>>>> 112)
>>>>> 	at  
>>>>> org 
>>>>> .apache 
>>>>> .lucene 
>>>>> .search 
>>>>> .DisjunctionSumScorer 
>>>>> .advanceAfterCurrent(DisjunctionSumScorer.java:172)
>>>>> 	at  
>>>>> org 
>>>>> .apache 
>>>>> .lucene 
>>>>> .search.DisjunctionSumScorer.next(DisjunctionSumScorer.java:146)
>>>>> 	at  
>>>>> org 
>>>>> .apache.lucene.search.BooleanScorer2.score(BooleanScorer2.java: 
>>>>> 319)
>>>>> 	at  
>>>>> org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java: 
>>>>> 146)
>>>>> 	at  
>>>>> org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java: 
>>>>> 113)
>>>>> 	at org.apache.lucene.search.Hits.getMoreDocs(Hits.java:100)
>>>>> 	at org.apache.lucene.search.Hits.<init>(Hits.java:67)
>>>>> 	at org.apache.lucene.search.Searcher.search(Searcher.java:46)
>>>>> 	at org.apache.lucene.search.Searcher.search(Searcher.java:38)
>>>>>
>>>>> This seems to be a temporarily problem because opening a new  
>>>>> IndexReader after all documents were added everything is ok  
>>>>> again and the 10.000 requests are all right.
>>>>>
>>>>> So what could be the problem here?
>>>>>
>>>>> reg,
>>>>> sascha
>>>>>
>>>>> ---------------------------------------------------------------------
>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>
>>>>
>>>
>>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34734-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 01 10:23:15 2008
Return-Path: <java-user-return-34734-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77607 invoked from network); 1 Jul 2008 10:23:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Jul 2008 10:23:15 -0000
Received: (qmail 36131 invoked by uid 500); 1 Jul 2008 10:23:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 35771 invoked by uid 500); 1 Jul 2008 10:23:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 35760 invoked by uid 99); 1 Jul 2008 10:23:09 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Jul 2008 03:23:09 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [89.107.64.151] (HELO server1.primetide.net) (89.107.64.151)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Jul 2008 10:22:18 +0000
Received: from [192.168.69.152] (p54AE7CB9.dip.t-dialin.net [84.174.124.185])
	(authenticated bits=0)
	by server1.primetide.net (8.14.0/8.14.0) with ESMTP id m61ALXNp014302
	(version=TLSv1/SSLv3 cipher=AES128-SHA bits=128 verify=NO)
	for <java-user@lucene.apache.org>; Tue, 1 Jul 2008 12:21:33 +0200
Message-Id: <D27B5FC2-A8F2-4235-8FF6-286520E8B330@evenity.net>
From: Sascha Fahl <sascha@evenity.net>
To: java-user@lucene.apache.org
In-Reply-To: <926E7E42-26C5-489C-BE94-BB6E1F35735D@mikemccandless.com>
Content-Type: multipart/alternative; boundary=Apple-Mail-3-377288953
Mime-Version: 1.0 (Apple Message framework v924)
Subject: Re: Problems with reopening IndexReader while pushing documents to the index
Date: Tue, 1 Jul 2008 12:21:30 +0200
References: <88F3F6A4-FBFB-43DF-890D-DB5F0D9A2461@gmail.com> <11EDA512-DB42-49EB-A2E1-8857C00D2A53@mikemccandless.com> <1B9E2FCB-D146-4493-A45C-42A1A2123618@gmail.com> <57B9F4B5-E76D-4991-837B-1723E9A47674@mikemccandless.com> <1BBE0E5C-3830-475E-A5E8-DBC1F3513795@gmail.com> <926E7E42-26C5-489C-BE94-BB6E1F35735D@mikemccandless.com>
X-Mailer: Apple Mail (2.924)
X-Virus-Checked: Checked by ClamAV on apache.org

--Apple-Mail-3-377288953
Content-Type: text/plain;
	charset=ISO-8859-1;
	format=flowed;
	delsp=yes
Content-Transfer-Encoding: quoted-printable

Yes I am using IndexReader.reopen(). Here is my code doing this:
	public void refreshIndeces() throws CorruptIndexException, =20
IOException {
		if ((System.currentTimeMillis() - this.lastRefresh) > =20=

this.REFRESH_PERIOD) {
			this.lastRefresh =3D System.currentTimeMillis();
			boolean refreshFlag =3D false;
			for (int i =3D 0; i < this.indeces.length; i++){
				IndexReader newIR =3D =
this.indeces[i].reopen();
				if (newIR !=3D this.indeces[i]){
					this.indeces[i].close();
					refreshFlag =3D true;
				}
				this.indeces[i] =3D newIR;
			}
			if(refreshFlag){
				this.multiReader =3D new =
MultiReader(this.indeces);
				this.multiSearcher =3D new =
IndexSearcher(this.multiReader);
			}
		}
	}
As you see I am using a MultiReader. With creating a new MultiReader + =20=

new IndexSearcher the exception goes away. I tested it with updating =20
the index with 50000 Documents and sent 60000 requests and nothing bad =20=

happened.

Sascha


Am 01.07.2008 um 12:14 schrieb Michael McCandless:

>
> That's interesting.  So you are using IndexReader.reopen() to get a =20=

> new reader?  Are you closing the previous reader?
>
> The exception goes away if you create a new IndexSearcher on the =20
> reopened IndexReader?
>
> I don't yet see how that could explain the exception, though.  If =20
> you reopen() the underling IndexReader in an IndexSearcher, the =20
> original IndexReader should still be intact and still searching the =20=

> point-in-time snapshot that it had been opened on.  IndexSearcher =20
> itself doens't hold any "state" about the index (I think); it relies =20=

> on IndexReader for that.
>
> Mike
>
> Sascha Fahl wrote:
>
>> I think I could solve the "problem". It was no Lucene specific =20
>> problem. What I did was reopen the IndexReader but not creating a =20
>> new IndexSearcher object. But of course as Java always passes =20
>> parameters by value (no matter what parameter) the old =20
>> IndexSearcher object did not see the updated IndexReader object, =20
>> because IndexSearcher is working with its own instance of =20
>> IndexReader and not with the reference to the original IndexReader. =20=

>> So what caused
>> the problem was the requests always were sent to the same instance =20=

>> of IndexSearcher. But when the IndexSearcher had to access the =20
>> index physically (the harddisk) of course changes made by the =20
>> IndexWriter were just visible to the IndexReader but not to the =20
>> IndexSearcher.
>> Is that the explaination Mike?
>>
>> Sascha
>>
>> Am 01.07.2008 um 10:52 schrieb Michael McCandless:
>>
>>>
>>> By "does not help" do you mean CheckIndex never detects this =20
>>> corruption, yet you then hit that exception when searching?
>>>
>>> By "reopening fails" what do you mean?  I thought reopen works =20
>>> fine, but then it's only the search that fails?
>>>
>>> Mike
>>>
>>> Sascha Fahl wrote:
>>>
>>>> Checking the index after adding documents and befor reopening the =20=

>>>> IndexReader does not help. After adding documents nothing bad =20
>>>> happens and CheckIndex says the index is all right. But when I =20
>>>> check the index before reopen it
>>>> CheckIndex does not detect any corruption and says the index is =20
>>>> ok and reopening fails.
>>>>
>>>> Sascha
>>>>
>>>> Am 30.06.2008 um 18:34 schrieb Michael McCandless:
>>>>
>>>>>
>>>>> This is spooky: that exception means you have some sort of index =20=

>>>>> corruption.  The TermScorer thinks it found a doc ID 37389, =20
>>>>> which is out of bounds.
>>>>>
>>>>> Reopening IndexReader while IndexWriter is writing should be =20
>>>>> completely fine.
>>>>>
>>>>> Is this easily reproduced?  If so, if you could narrow it down =20
>>>>> to sequence of added documents, that'd be awesome.
>>>>>
>>>>> It's very strange that you see the corruption go away.  Can you =20=

>>>>> run CheckIndex (java org.apache.lucene.index.CheckIndex =20
>>>>> <indexDir>) to see if it detects any corruption.  In fact, if =20
>>>>> you could run CheckIndex after each session of IndexWriter to =20
>>>>> isolate which batch of added documents causes the corruption, =20
>>>>> that could help us narrow it down.
>>>>>
>>>>> Are you changing any of the settings in IndexWriter?  Are you =20
>>>>> using multiple threads?  Which exact JRE version and OS are you =20=

>>>>> using?  Are you creating a new index at the start of each run?
>>>>>
>>>>> Mike
>>>>>
>>>>> Sascha Fahl wrote:
>>>>>
>>>>>> Hi,
>>>>>>
>>>>>> I see some strange behavoiur of lucene. The following scenario.
>>>>>> While adding documents to my index (every doc is pretty small, =20=

>>>>>> doc-count is about 12000) I have implemented a custom behaviour =20=

>>>>>> of flushing and committing documents to the index. Before =20
>>>>>> adding documents to the index I check if wether der ramDocCount =20=

>>>>>> has reached a certain number of if the last commit is a while =20
>>>>>> ago. If so i flush the buffered documents and reopen the =20
>>>>>> IndexWriter. So far, so good. Indexing works very well. The =20
>>>>>> problem is that if I send requests with die IndexReader while =20
>>>>>> writing documents with the IndexWriter (I send around 10.000 =20
>>>>>> requests to lucene) I reopen the IndexReader every 100 requests =20=

>>>>>> (only for testing) if the IndexReader is not current. The first =20=

>>>>>> around 4000 requests work very well, but afterwards I always =20
>>>>>> get the following exception:
>>>>>>
>>>>>> java.lang.ArrayIndexOutOfBoundsException: 37389
>>>>>> 	at org.apache.lucene.search.TermScorer.score(TermScorer.java:=20
>>>>>> 126)
>>>>>> 	at =20
>>>>>> org=20
>>>>>> .apache.lucene.util.ScorerDocQueue.topScore(ScorerDocQueue.java:=20=

>>>>>> 112)
>>>>>> 	at =20
>>>>>> org=20
>>>>>> .apache=20
>>>>>> .lucene=20
>>>>>> .search=20
>>>>>> .DisjunctionSumScorer=20
>>>>>> .advanceAfterCurrent(DisjunctionSumScorer.java:172)
>>>>>> 	at =20
>>>>>> org=20
>>>>>> .apache=20
>>>>>> .lucene=20
>>>>>> .search.DisjunctionSumScorer.next(DisjunctionSumScorer.java:146)
>>>>>> 	at =20
>>>>>> org=20
>>>>>> .apache.lucene.search.BooleanScorer2.score(BooleanScorer2.java:=20=

>>>>>> 319)
>>>>>> 	at =20
>>>>>> org=20
>>>>>> .apache.lucene.search.IndexSearcher.search(IndexSearcher.java:=20
>>>>>> 146)
>>>>>> 	at =20
>>>>>> org=20
>>>>>> .apache.lucene.search.IndexSearcher.search(IndexSearcher.java:=20
>>>>>> 113)
>>>>>> 	at org.apache.lucene.search.Hits.getMoreDocs(Hits.java:100)
>>>>>> 	at org.apache.lucene.search.Hits.<init>(Hits.java:67)
>>>>>> 	at org.apache.lucene.search.Searcher.search(Searcher.java:46)
>>>>>> 	at org.apache.lucene.search.Searcher.search(Searcher.java:38)
>>>>>>
>>>>>> This seems to be a temporarily problem because opening a new =20
>>>>>> IndexReader after all documents were added everything is ok =20
>>>>>> again and the 10.000 requests are all right.
>>>>>>
>>>>>> So what could be the problem here?
>>>>>>
>>>>>> reg,
>>>>>> sascha
>>>>>>
>>>>>> =
---------------------------------------------------------------------
>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>
>>>>>
>>>>
>>>
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org

Sascha Fahl
Softwareenticklung

evenity GmbH
Zu den M=FChlen 19
D-35390 Gie=DFen

Mail: sascha@evenity.net






--Apple-Mail-3-377288953--

From java-user-return-34735-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 01 10:48:03 2008
Return-Path: <java-user-return-34735-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82850 invoked from network); 1 Jul 2008 10:48:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Jul 2008 10:48:03 -0000
Received: (qmail 66245 invoked by uid 500); 1 Jul 2008 10:47:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65755 invoked by uid 500); 1 Jul 2008 10:47:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65744 invoked by uid 99); 1 Jul 2008 10:47:57 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Jul 2008 03:47:57 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of shalinmangar@gmail.com designates 209.85.198.232 as permitted sender)
Received: from [209.85.198.232] (HELO rv-out-0506.google.com) (209.85.198.232)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Jul 2008 10:47:07 +0000
Received: by rv-out-0506.google.com with SMTP id f6so1909846rvb.5
        for <java-user@lucene.apache.org>; Tue, 01 Jul 2008 03:47:27 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type:content-transfer-encoding
         :content-disposition;
        bh=giJNvBrHMPI2tKyDd7BTxgxcZr88hUAS91CoMU4OIYU=;
        b=dViYq8XdHkDDLAhPqtzMqPibNRXzRlZCB7syGl9Of35XNbOsRqFjkAEmdivEg/d8f/
         w/LDxwcp29WgsjQGXO3Yk9IwVRdA9d3zN7hICJXio5OIRkulyjBNvOzOGnhSv3MhPBDO
         IjE7hSpm6oO02aiiBC2GadfLYVZwPEEnbQDfk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type
         :content-transfer-encoding:content-disposition;
        b=KIDUSIV20L+dfmV4h8fMz/hMdpTpPKjMY7ZHcFpvGBTs+R4r+SYreTB5sdbQE5GPK6
         pczebXcSKFHxiiiKoqROGHTz+KFreIoUit7XP56gugzY3YoNLE3+uqRK9GmBAoSWnhlq
         fhWxauqloH2+YJgaeKmcOf7pBtK9E52bPCT0g=
Received: by 10.141.205.10 with SMTP id h10mr3397612rvq.54.1214909247848;
        Tue, 01 Jul 2008 03:47:27 -0700 (PDT)
Received: by 10.140.178.17 with HTTP; Tue, 1 Jul 2008 03:47:27 -0700 (PDT)
Message-ID: <69de18140807010347s6269fea5r12c3212e0ec0a12a@mail.gmail.com>
Date: Tue, 1 Jul 2008 16:17:27 +0530
From: "Shalin Shekhar Mangar" <shalinmangar@gmail.com>
To: java-user@lucene.apache.org
Subject: IndexDeletionPolicy and optimized indices
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

I'm implementing a custom IndexDeletionPolicy. An IndexCommit object
does not have any information whether it's index is optimized or not.
How can a IndexDeletionPolicy know which IndexCommit instances
corresponded to optimized indices?

-- 
Regards,
Shalin Shekhar Mangar.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34736-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 01 12:15:02 2008
Return-Path: <java-user-return-34736-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8393 invoked from network); 1 Jul 2008 12:15:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Jul 2008 12:15:02 -0000
Received: (qmail 64477 invoked by uid 500); 1 Jul 2008 12:14:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64437 invoked by uid 500); 1 Jul 2008 12:14:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64426 invoked by uid 99); 1 Jul 2008 12:14:57 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Jul 2008 05:14:57 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [64.233.166.181] (HELO py-out-1112.google.com) (64.233.166.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Jul 2008 12:14:06 +0000
Received: by py-out-1112.google.com with SMTP id z74so533696pyg.9
        for <java-user@lucene.apache.org>; Tue, 01 Jul 2008 05:14:26 -0700 (PDT)
Received: by 10.114.208.20 with SMTP id f20mr5401652wag.144.1214914465611;
        Tue, 01 Jul 2008 05:14:25 -0700 (PDT)
Received: from ?10.17.4.4? ( [72.93.214.93])
        by mx.google.com with ESMTPS id 4sm1937138yxj.7.2008.07.01.05.14.24
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Tue, 01 Jul 2008 05:14:25 -0700 (PDT)
Message-Id: <F21AB543-C901-4043-8569-2976EAEEB903@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <69de18140807010347s6269fea5r12c3212e0ec0a12a@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v924)
Subject: Re: IndexDeletionPolicy and optimized indices
Date: Tue, 1 Jul 2008 08:14:24 -0400
References: <69de18140807010347s6269fea5r12c3212e0ec0a12a@mail.gmail.com>
X-Mailer: Apple Mail (2.924)
X-Virus-Checked: Checked by ClamAV on apache.org


You're right IndexCommit doesn't know that it represents an optimized  
index.

Likewise, IndexCommit doesn't know other "semantic" things about the  
index, eg, you've just called expungeDeletes, or, you just finished  
adding batch X of documents to the index, etc.

Also, realize that with autoCommit=false (to be the only choice in  
3.0), no commit will be done after an optimize.  Ie you have to call  
commit() or close() explicitly to make it a commit.

I think the simplest general approach to "know" which commit points  
represent "interesting" times to the application would be to call  
IW.optimize() then IW.commit() (if you are using trunk) or just  
IW.close(), then look at the last IndexCommit passed to your deletion  
policy's onCommit() and record yourself that this commit was the  
result of an optimize.

Mike

Shalin Shekhar Mangar wrote:

> Hi,
>
> I'm implementing a custom IndexDeletionPolicy. An IndexCommit object
> does not have any information whether it's index is optimized or not.
> How can a IndexDeletionPolicy know which IndexCommit instances
> corresponded to optimized indices?
>
> -- 
> Regards,
> Shalin Shekhar Mangar.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34737-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 01 12:29:43 2008
Return-Path: <java-user-return-34737-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 18287 invoked from network); 1 Jul 2008 12:29:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Jul 2008 12:29:43 -0000
Received: (qmail 89142 invoked by uid 500); 1 Jul 2008 12:29:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88970 invoked by uid 500); 1 Jul 2008 12:29:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88959 invoked by uid 99); 1 Jul 2008 12:29:37 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Jul 2008 05:29:37 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [64.233.166.177] (HELO py-out-1112.google.com) (64.233.166.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Jul 2008 12:28:46 +0000
Received: by py-out-1112.google.com with SMTP id z74so537902pyg.9
        for <java-user@lucene.apache.org>; Tue, 01 Jul 2008 05:29:05 -0700 (PDT)
Received: by 10.115.108.1 with SMTP id k1mr5441979wam.109.1214915344790;
        Tue, 01 Jul 2008 05:29:04 -0700 (PDT)
Received: from ?10.17.4.4? ( [72.93.214.93])
        by mx.google.com with ESMTPS id 5sm1596439ywd.2.2008.07.01.05.29.03
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Tue, 01 Jul 2008 05:29:04 -0700 (PDT)
Cc: Sascha Fahl <sascha.fahl@googlemail.com>
Message-Id: <D64D7D22-B97E-4A02-B661-6C1E910AB3DC@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <D27B5FC2-A8F2-4235-8FF6-286520E8B330@evenity.net>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed; delsp=yes
Content-Transfer-Encoding: quoted-printable
Mime-Version: 1.0 (Apple Message framework v924)
Subject: Re: Problems with reopening IndexReader while pushing documents to the index
Date: Tue, 1 Jul 2008 08:29:02 -0400
References: <88F3F6A4-FBFB-43DF-890D-DB5F0D9A2461@gmail.com> <11EDA512-DB42-49EB-A2E1-8857C00D2A53@mikemccandless.com> <1B9E2FCB-D146-4493-A45C-42A1A2123618@gmail.com> <57B9F4B5-E76D-4991-837B-1723E9A47674@mikemccandless.com> <1BBE0E5C-3830-475E-A5E8-DBC1F3513795@gmail.com> <926E7E42-26C5-489C-BE94-BB6E1F35735D@mikemccandless.com> <D27B5FC2-A8F2-4235-8FF6-286520E8B330@evenity.net>
X-Mailer: Apple Mail (2.924)
X-Virus-Checked: Checked by ClamAV on apache.org


Aha!  OK now I see how that led to your exception.

When you create a MultiReader, passing in the array of IndexReaders, =20
MultiReader simply holds onto your array.  It also computes & caches =20
norms() the first time its called, based on the total # docs it sees =20
in all the readers in that array.

But then when you re-opened single readers in that array, without then =20=

creating a new MultiReader, this makes the norms array "stale" and =20
thus it's easily possible to encounter a docID that's out of bounds.

I think a good fix for this sort of trap would be for MultiReader to =20
make a private copy of the array that's passed in.  I'll open an issue.

Mike

Sascha Fahl wrote:

> Yes I am using IndexReader.reopen(). Here is my code doing this:
> 	public void refreshIndeces() throws CorruptIndexException, =20
> IOException {
> 		if ((System.currentTimeMillis() - this.lastRefresh) > =20=

> this.REFRESH_PERIOD) {
> 			this.lastRefresh =3D System.currentTimeMillis();
> 			boolean refreshFlag =3D false;
> 			for (int i =3D 0; i < this.indeces.length; i++){
> 				IndexReader newIR =3D =
this.indeces[i].reopen();
> 				if (newIR !=3D this.indeces[i]){
> 					this.indeces[i].close();
> 					refreshFlag =3D true;
> 				}
> 				this.indeces[i] =3D newIR;
> 			}
> 			if(refreshFlag){
> 				this.multiReader =3D new =
MultiReader(this.indeces);
> 				this.multiSearcher =3D new =
IndexSearcher(this.multiReader);
> 			}
> 		}
> 	}
> As you see I am using a MultiReader. With creating a new MultiReader =20=

> + new IndexSearcher the exception goes away. I tested it with =20
> updating the index with 50000 Documents and sent 60000 requests and =20=

> nothing bad happened.
>
> Sascha
>
>
> Am 01.07.2008 um 12:14 schrieb Michael McCandless:
>
>>
>> That's interesting.  So you are using IndexReader.reopen() to get a =20=

>> new reader?  Are you closing the previous reader?
>>
>> The exception goes away if you create a new IndexSearcher on the =20
>> reopened IndexReader?
>>
>> I don't yet see how that could explain the exception, though.  If =20
>> you reopen() the underling IndexReader in an IndexSearcher, the =20
>> original IndexReader should still be intact and still searching the =20=

>> point-in-time snapshot that it had been opened on.  IndexSearcher =20
>> itself doens't hold any "state" about the index (I think); it =20
>> relies on IndexReader for that.
>>
>> Mike
>>
>> Sascha Fahl wrote:
>>
>>> I think I could solve the "problem". It was no Lucene specific =20
>>> problem. What I did was reopen the IndexReader but not creating a =20=

>>> new IndexSearcher object. But of course as Java always passes =20
>>> parameters by value (no matter what parameter) the old =20
>>> IndexSearcher object did not see the updated IndexReader object, =20
>>> because IndexSearcher is working with its own instance of =20
>>> IndexReader and not with the reference to the original =20
>>> IndexReader. So what caused
>>> the problem was the requests always were sent to the same instance =20=

>>> of IndexSearcher. But when the IndexSearcher had to access the =20
>>> index physically (the harddisk) of course changes made by the =20
>>> IndexWriter were just visible to the IndexReader but not to the =20
>>> IndexSearcher.
>>> Is that the explaination Mike?
>>>
>>> Sascha
>>>
>>> Am 01.07.2008 um 10:52 schrieb Michael McCandless:
>>>
>>>>
>>>> By "does not help" do you mean CheckIndex never detects this =20
>>>> corruption, yet you then hit that exception when searching?
>>>>
>>>> By "reopening fails" what do you mean?  I thought reopen works =20
>>>> fine, but then it's only the search that fails?
>>>>
>>>> Mike
>>>>
>>>> Sascha Fahl wrote:
>>>>
>>>>> Checking the index after adding documents and befor reopening =20
>>>>> the IndexReader does not help. After adding documents nothing =20
>>>>> bad happens and CheckIndex says the index is all right. But when =20=

>>>>> I check the index before reopen it
>>>>> CheckIndex does not detect any corruption and says the index is =20=

>>>>> ok and reopening fails.
>>>>>
>>>>> Sascha
>>>>>
>>>>> Am 30.06.2008 um 18:34 schrieb Michael McCandless:
>>>>>
>>>>>>
>>>>>> This is spooky: that exception means you have some sort of =20
>>>>>> index corruption.  The TermScorer thinks it found a doc ID =20
>>>>>> 37389, which is out of bounds.
>>>>>>
>>>>>> Reopening IndexReader while IndexWriter is writing should be =20
>>>>>> completely fine.
>>>>>>
>>>>>> Is this easily reproduced?  If so, if you could narrow it down =20=

>>>>>> to sequence of added documents, that'd be awesome.
>>>>>>
>>>>>> It's very strange that you see the corruption go away.  Can you =20=

>>>>>> run CheckIndex (java org.apache.lucene.index.CheckIndex =20
>>>>>> <indexDir>) to see if it detects any corruption.  In fact, if =20
>>>>>> you could run CheckIndex after each session of IndexWriter to =20
>>>>>> isolate which batch of added documents causes the corruption, =20
>>>>>> that could help us narrow it down.
>>>>>>
>>>>>> Are you changing any of the settings in IndexWriter?  Are you =20
>>>>>> using multiple threads?  Which exact JRE version and OS are you =20=

>>>>>> using?  Are you creating a new index at the start of each run?
>>>>>>
>>>>>> Mike
>>>>>>
>>>>>> Sascha Fahl wrote:
>>>>>>
>>>>>>> Hi,
>>>>>>>
>>>>>>> I see some strange behavoiur of lucene. The following scenario.
>>>>>>> While adding documents to my index (every doc is pretty small, =20=

>>>>>>> doc-count is about 12000) I have implemented a custom =20
>>>>>>> behaviour of flushing and committing documents to the index. =20
>>>>>>> Before adding documents to the index I check if wether der =20
>>>>>>> ramDocCount has reached a certain number of if the last commit =20=

>>>>>>> is a while ago. If so i flush the buffered documents and =20
>>>>>>> reopen the IndexWriter. So far, so good. Indexing works very =20
>>>>>>> well. The problem is that if I send requests with die =20
>>>>>>> IndexReader while writing documents with the IndexWriter (I =20
>>>>>>> send around 10.000 requests to lucene) I reopen the =20
>>>>>>> IndexReader every 100 requests (only for testing) if the =20
>>>>>>> IndexReader is not current. The first around 4000 requests =20
>>>>>>> work very well, but afterwards I always get the following =20
>>>>>>> exception:
>>>>>>>
>>>>>>> java.lang.ArrayIndexOutOfBoundsException: 37389
>>>>>>> 	at =
org.apache.lucene.search.TermScorer.score(TermScorer.java:=20
>>>>>>> 126)
>>>>>>> 	at =20
>>>>>>> org=20
>>>>>>> .apache=20
>>>>>>> .lucene.util.ScorerDocQueue.topScore(ScorerDocQueue.java:112)
>>>>>>> 	at =20
>>>>>>> org=20
>>>>>>> .apache=20
>>>>>>> .lucene=20
>>>>>>> .search=20
>>>>>>> .DisjunctionSumScorer=20
>>>>>>> .advanceAfterCurrent(DisjunctionSumScorer.java:172)
>>>>>>> 	at =20
>>>>>>> org=20
>>>>>>> .apache=20
>>>>>>> .lucene=20
>>>>>>> .search.DisjunctionSumScorer.next(DisjunctionSumScorer.java:146)
>>>>>>> 	at =20
>>>>>>> org=20
>>>>>>> .apache.lucene.search.BooleanScorer2.score(BooleanScorer2.java:=20=

>>>>>>> 319)
>>>>>>> 	at =20
>>>>>>> org=20
>>>>>>> .apache.lucene.search.IndexSearcher.search(IndexSearcher.java:=20=

>>>>>>> 146)
>>>>>>> 	at =20
>>>>>>> org=20
>>>>>>> .apache.lucene.search.IndexSearcher.search(IndexSearcher.java:=20=

>>>>>>> 113)
>>>>>>> 	at =
org.apache.lucene.search.Hits.getMoreDocs(Hits.java:100)
>>>>>>> 	at org.apache.lucene.search.Hits.<init>(Hits.java:67)
>>>>>>> 	at =
org.apache.lucene.search.Searcher.search(Searcher.java:46)
>>>>>>> 	at =
org.apache.lucene.search.Searcher.search(Searcher.java:38)
>>>>>>>
>>>>>>> This seems to be a temporarily problem because opening a new =20
>>>>>>> IndexReader after all documents were added everything is ok =20
>>>>>>> again and the 10.000 requests are all right.
>>>>>>>
>>>>>>> So what could be the problem here?
>>>>>>>
>>>>>>> reg,
>>>>>>> sascha
>>>>>>>
>>>>>>> =
---------------------------------------------------------------------
>>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>>> For additional commands, e-mail: java-user-=20
>>>>>>> help@lucene.apache.org
>>>>>>>
>>>>>>
>>>>>
>>>>
>>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>
> Sascha Fahl
> Softwareenticklung
>
> evenity GmbH
> Zu den M=FChlen 19
> D-35390 Gie=DFen
>
> Mail: sascha@evenity.net
>
>
>
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34738-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 01 12:37:17 2008
Return-Path: <java-user-return-34738-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21165 invoked from network); 1 Jul 2008 12:37:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Jul 2008 12:37:15 -0000
Received: (qmail 746 invoked by uid 500); 1 Jul 2008 12:37:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 289 invoked by uid 500); 1 Jul 2008 12:37:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 277 invoked by uid 99); 1 Jul 2008 12:37:09 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Jul 2008 05:37:09 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.132.249] (HELO an-out-0708.google.com) (209.85.132.249)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Jul 2008 12:36:17 +0000
Received: by an-out-0708.google.com with SMTP id c37so371411anc.49
        for <java-user@lucene.apache.org>; Tue, 01 Jul 2008 05:36:37 -0700 (PDT)
Received: by 10.100.110.16 with SMTP id i16mr5684733anc.101.1214915797052;
        Tue, 01 Jul 2008 05:36:37 -0700 (PDT)
Received: from ?10.17.4.4? ( [72.93.214.93])
        by mx.google.com with ESMTPS id 6sm1770429ywp.3.2008.07.01.05.36.36
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Tue, 01 Jul 2008 05:36:36 -0700 (PDT)
Cc: java-user@lucene.apache.org,
 Sascha Fahl <sascha.fahl@googlemail.com>
Message-Id: <42DDF7B2-ED4A-442E-8DD2-0085403584D3@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: Michael McCandless <lucene@mikemccandless.com>
In-Reply-To: <D64D7D22-B97E-4A02-B661-6C1E910AB3DC@mikemccandless.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed; delsp=yes
Content-Transfer-Encoding: quoted-printable
Mime-Version: 1.0 (Apple Message framework v924)
Subject: Re: Problems with reopening IndexReader while pushing documents to the index
Date: Tue, 1 Jul 2008 08:36:35 -0400
References: <88F3F6A4-FBFB-43DF-890D-DB5F0D9A2461@gmail.com> <11EDA512-DB42-49EB-A2E1-8857C00D2A53@mikemccandless.com> <1B9E2FCB-D146-4493-A45C-42A1A2123618@gmail.com> <57B9F4B5-E76D-4991-837B-1723E9A47674@mikemccandless.com> <1BBE0E5C-3830-475E-A5E8-DBC1F3513795@gmail.com> <926E7E42-26C5-489C-BE94-BB6E1F35735D@mikemccandless.com> <D27B5FC2-A8F2-4235-8FF6-286520E8B330@evenity.net> <D64D7D22-B97E-4A02-B661-6C1E910AB3DC@mikemccandless.com>
X-Mailer: Apple Mail (2.924)
X-Virus-Checked: Checked by ClamAV on apache.org


OK I've opened:

     https://issues.apache.org/jira/browse/LUCENE-1323

I'll commit the fix (to trunk, to be included in 2.4) soon.

Mike

Michael McCandless wrote:

>
> Aha!  OK now I see how that led to your exception.
>
> When you create a MultiReader, passing in the array of IndexReaders, =20=

> MultiReader simply holds onto your array.  It also computes & caches =20=

> norms() the first time its called, based on the total # docs it sees =20=

> in all the readers in that array.
>
> But then when you re-opened single readers in that array, without =20
> then creating a new MultiReader, this makes the norms array "stale" =20=

> and thus it's easily possible to encounter a docID that's out of =20
> bounds.
>
> I think a good fix for this sort of trap would be for MultiReader to =20=

> make a private copy of the array that's passed in.  I'll open an =20
> issue.
>
> Mike
>
> Sascha Fahl wrote:
>
>> Yes I am using IndexReader.reopen(). Here is my code doing this:
>> 	public void refreshIndeces() throws CorruptIndexException, =20
>> IOException {
>> 		if ((System.currentTimeMillis() - this.lastRefresh) > =20=

>> this.REFRESH_PERIOD) {
>> 			this.lastRefresh =3D System.currentTimeMillis();
>> 			boolean refreshFlag =3D false;
>> 			for (int i =3D 0; i < this.indeces.length; i++){
>> 				IndexReader newIR =3D =
this.indeces[i].reopen();
>> 				if (newIR !=3D this.indeces[i]){
>> 					this.indeces[i].close();
>> 					refreshFlag =3D true;
>> 				}
>> 				this.indeces[i] =3D newIR;
>> 			}
>> 			if(refreshFlag){
>> 				this.multiReader =3D new =
MultiReader(this.indeces);
>> 				this.multiSearcher =3D new =
IndexSearcher(this.multiReader);
>> 			}
>> 		}
>> 	}
>> As you see I am using a MultiReader. With creating a new =20
>> MultiReader + new IndexSearcher the exception goes away. I tested =20
>> it with updating the index with 50000 Documents and sent 60000 =20
>> requests and nothing bad happened.
>>
>> Sascha
>>
>>
>> Am 01.07.2008 um 12:14 schrieb Michael McCandless:
>>
>>>
>>> That's interesting.  So you are using IndexReader.reopen() to get =20=

>>> a new reader?  Are you closing the previous reader?
>>>
>>> The exception goes away if you create a new IndexSearcher on the =20
>>> reopened IndexReader?
>>>
>>> I don't yet see how that could explain the exception, though.  If =20=

>>> you reopen() the underling IndexReader in an IndexSearcher, the =20
>>> original IndexReader should still be intact and still searching =20
>>> the point-in-time snapshot that it had been opened on.  =20
>>> IndexSearcher itself doens't hold any "state" about the index (I =20
>>> think); it relies on IndexReader for that.
>>>
>>> Mike
>>>
>>> Sascha Fahl wrote:
>>>
>>>> I think I could solve the "problem". It was no Lucene specific =20
>>>> problem. What I did was reopen the IndexReader but not creating a =20=

>>>> new IndexSearcher object. But of course as Java always passes =20
>>>> parameters by value (no matter what parameter) the old =20
>>>> IndexSearcher object did not see the updated IndexReader object, =20=

>>>> because IndexSearcher is working with its own instance of =20
>>>> IndexReader and not with the reference to the original =20
>>>> IndexReader. So what caused
>>>> the problem was the requests always were sent to the same =20
>>>> instance of IndexSearcher. But when the IndexSearcher had to =20
>>>> access the index physically (the harddisk) of course changes made =20=

>>>> by the IndexWriter were just visible to the IndexReader but not =20
>>>> to the IndexSearcher.
>>>> Is that the explaination Mike?
>>>>
>>>> Sascha
>>>>
>>>> Am 01.07.2008 um 10:52 schrieb Michael McCandless:
>>>>
>>>>>
>>>>> By "does not help" do you mean CheckIndex never detects this =20
>>>>> corruption, yet you then hit that exception when searching?
>>>>>
>>>>> By "reopening fails" what do you mean?  I thought reopen works =20
>>>>> fine, but then it's only the search that fails?
>>>>>
>>>>> Mike
>>>>>
>>>>> Sascha Fahl wrote:
>>>>>
>>>>>> Checking the index after adding documents and befor reopening =20
>>>>>> the IndexReader does not help. After adding documents nothing =20
>>>>>> bad happens and CheckIndex says the index is all right. But =20
>>>>>> when I check the index before reopen it
>>>>>> CheckIndex does not detect any corruption and says the index is =20=

>>>>>> ok and reopening fails.
>>>>>>
>>>>>> Sascha
>>>>>>
>>>>>> Am 30.06.2008 um 18:34 schrieb Michael McCandless:
>>>>>>
>>>>>>>
>>>>>>> This is spooky: that exception means you have some sort of =20
>>>>>>> index corruption.  The TermScorer thinks it found a doc ID =20
>>>>>>> 37389, which is out of bounds.
>>>>>>>
>>>>>>> Reopening IndexReader while IndexWriter is writing should be =20
>>>>>>> completely fine.
>>>>>>>
>>>>>>> Is this easily reproduced?  If so, if you could narrow it down =20=

>>>>>>> to sequence of added documents, that'd be awesome.
>>>>>>>
>>>>>>> It's very strange that you see the corruption go away.  Can =20
>>>>>>> you run CheckIndex (java org.apache.lucene.index.CheckIndex =20
>>>>>>> <indexDir>) to see if it detects any corruption.  In fact, if =20=

>>>>>>> you could run CheckIndex after each session of IndexWriter to =20=

>>>>>>> isolate which batch of added documents causes the corruption, =20=

>>>>>>> that could help us narrow it down.
>>>>>>>
>>>>>>> Are you changing any of the settings in IndexWriter?  Are you =20=

>>>>>>> using multiple threads?  Which exact JRE version and OS are =20
>>>>>>> you using?  Are you creating a new index at the start of each =20=

>>>>>>> run?
>>>>>>>
>>>>>>> Mike
>>>>>>>
>>>>>>> Sascha Fahl wrote:
>>>>>>>
>>>>>>>> Hi,
>>>>>>>>
>>>>>>>> I see some strange behavoiur of lucene. The following scenario.
>>>>>>>> While adding documents to my index (every doc is pretty =20
>>>>>>>> small, doc-count is about 12000) I have implemented a custom =20=

>>>>>>>> behaviour of flushing and committing documents to the index. =20=

>>>>>>>> Before adding documents to the index I check if wether der =20
>>>>>>>> ramDocCount has reached a certain number of if the last =20
>>>>>>>> commit is a while ago. If so i flush the buffered documents =20
>>>>>>>> and reopen the IndexWriter. So far, so good. Indexing works =20
>>>>>>>> very well. The problem is that if I send requests with die =20
>>>>>>>> IndexReader while writing documents with the IndexWriter (I =20
>>>>>>>> send around 10.000 requests to lucene) I reopen the =20
>>>>>>>> IndexReader every 100 requests (only for testing) if the =20
>>>>>>>> IndexReader is not current. The first around 4000 requests =20
>>>>>>>> work very well, but afterwards I always get the following =20
>>>>>>>> exception:
>>>>>>>>
>>>>>>>> java.lang.ArrayIndexOutOfBoundsException: 37389
>>>>>>>> 	at =
org.apache.lucene.search.TermScorer.score(TermScorer.java:=20
>>>>>>>> 126)
>>>>>>>> 	at =20
>>>>>>>> org=20
>>>>>>>> .apache=20
>>>>>>>> .lucene.util.ScorerDocQueue.topScore(ScorerDocQueue.java:112)
>>>>>>>> 	at =20
>>>>>>>> org=20
>>>>>>>> .apache=20
>>>>>>>> .lucene=20
>>>>>>>> .search=20
>>>>>>>> .DisjunctionSumScorer=20
>>>>>>>> .advanceAfterCurrent(DisjunctionSumScorer.java:172)
>>>>>>>> 	at =20
>>>>>>>> org=20
>>>>>>>> .apache=20
>>>>>>>> .lucene=20
>>>>>>>> .search.DisjunctionSumScorer.next(DisjunctionSumScorer.java:=20
>>>>>>>> 146)
>>>>>>>> 	at =20
>>>>>>>> org=20
>>>>>>>> .apache=20
>>>>>>>> .lucene.search.BooleanScorer2.score(BooleanScorer2.java:319)
>>>>>>>> 	at =20
>>>>>>>> org=20
>>>>>>>> .apache.lucene.search.IndexSearcher.search(IndexSearcher.java:=20=

>>>>>>>> 146)
>>>>>>>> 	at =20
>>>>>>>> org=20
>>>>>>>> .apache.lucene.search.IndexSearcher.search(IndexSearcher.java:=20=

>>>>>>>> 113)
>>>>>>>> 	at =
org.apache.lucene.search.Hits.getMoreDocs(Hits.java:100)
>>>>>>>> 	at org.apache.lucene.search.Hits.<init>(Hits.java:67)
>>>>>>>> 	at =
org.apache.lucene.search.Searcher.search(Searcher.java:46)
>>>>>>>> 	at =
org.apache.lucene.search.Searcher.search(Searcher.java:38)
>>>>>>>>
>>>>>>>> This seems to be a temporarily problem because opening a new =20=

>>>>>>>> IndexReader after all documents were added everything is ok =20
>>>>>>>> again and the 10.000 requests are all right.
>>>>>>>>
>>>>>>>> So what could be the problem here?
>>>>>>>>
>>>>>>>> reg,
>>>>>>>> sascha
>>>>>>>>
>>>>>>>> =
---------------------------------------------------------------------
>>>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>>>> For additional commands, e-mail: =
java-user-help@lucene.apache.org
>>>>>>>>
>>>>>>>
>>>>>>
>>>>>
>>>>
>>>
>>>
>>> =
---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>> Sascha Fahl
>> Softwareenticklung
>>
>> evenity GmbH
>> Zu den M=FChlen 19
>> D-35390 Gie=DFen
>>
>> Mail: sascha@evenity.net
>>
>>
>>
>>
>>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34739-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 01 15:44:47 2008
Return-Path: <java-user-return-34739-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 16390 invoked from network); 1 Jul 2008 15:44:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Jul 2008 15:44:47 -0000
Received: (qmail 1287 invoked by uid 500); 1 Jul 2008 15:44:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 1261 invoked by uid 500); 1 Jul 2008 15:44:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 1250 invoked by uid 99); 1 Jul 2008 15:44:42 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Jul 2008 08:44:42 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of SRS0=IyH2dP=XN=lucasmail.org=paul@yourhostingaccount.com designates 65.254.254.80 as permitted sender)
Received: from [65.254.254.80] (HELO mailout06.yourhostingaccount.com) (65.254.254.80)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Jul 2008 15:43:50 +0000
Received: from mailscan11.yourhostingaccount.com ([10.1.15.11] helo=mailscan11.yourhostingaccount.com)
	by mailout06.yourhostingaccount.com with esmtp (Exim)
	id 1KDi1a-0003DV-5E
	for java-user@lucene.apache.org; Tue, 01 Jul 2008 11:44:10 -0400
Received: from impout03.yourhostingaccount.com ([10.1.55.3] helo=impout03.yourhostingaccount.com)
	by mailscan11.yourhostingaccount.com with esmtp (Exim)
	id 1KDi1Z-0003ak-EG
	for java-user@lucene.apache.org; Tue, 01 Jul 2008 11:44:09 -0400
Received: from authsmtp01.yourhostingaccount.com ([10.1.18.1])
	by impout03.yourhostingaccount.com with NO UCE
	id kfk91Z00301P85W0000000; Tue, 01 Jul 2008 11:44:09 -0400
X-EN-OrigOutIP: 10.1.18.1
X-EN-IMPSID: kfk91Z00301P85W0000000
Received: from adsl-76-201-168-3.dsl.pltn13.sbcglobal.net ([76.201.168.3] helo=[10.0.1.203])
	by authsmtp01.yourhostingaccount.com with esmtpsa (TLSv1:AES128-SHA:128)
	(Exim)
	id 1KDi1Y-0006HM-Pe
	for java-user@lucene.apache.org; Tue, 01 Jul 2008 11:44:09 -0400
Message-Id: <9FC90358-53CF-4464-BA85-12B9EA7F75E4@lucasmail.org>
From: "Paul J. Lucas" <paul@lucasmail.org>
To: java-user@lucene.apache.org
In-Reply-To: <61F38802-526D-476E-8190-A65CA1601360@mikemccandless.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v924)
Subject: Re: FileNotFoundException in ConcurrentMergeScheduler
Date: Tue, 1 Jul 2008 08:44:04 -0700
References: <EEBD1ADA-C2E8-41D1-B8AE-E90DFDC090B4@mac.com> <483F47CD.1050709@gmail.com> <F0D9682E-BCFE-4F1E-9A8F-94E206BCCFBB@mac.com> <483F50F5.3050804@gmail.com> <483F549D.3040405@gmail.com> <28785928-1CE6-40B4-867B-114526A1F838@mikemccandless.com> <CAC3FF9B-FBCA-424D-97DA-C022DE0B01F7@mac.com> <EA6F5635-68E8-4213-89CB-C68CCAB326CB@mikemccandless.com> <0A50D663-8810-48AC-8480-7ADAB513664B@lucasmail.org> <61F38802-526D-476E-8190-A65CA1601360@mikemccandless.com>
X-Mailer: Apple Mail (2.924)
X-EN-UserInfo: 19b3ee6e8bc35660ab25150f3ce1009e:104eb4694f5dc54e252b420fd863a3b6
X-EN-AuthUser: paul@pauljlucas.org
Sender:  "Paul J. Lucas" <paul@lucasmail.org>
X-EN-OrigIP: 76.201.168.3
X-EN-OrigHost: adsl-76-201-168-3.dsl.pltn13.sbcglobal.net
X-Virus-Checked: Checked by ClamAV on apache.org

That really can't be it.  I have *one* client connecting to my  
server.  And there isn't a descriptor leak.

My mergeFactor is 10.

- Paul


On Jul 1, 2008, at 1:37 AM, Michael McCandless wrote:

> Hmmm then it sounds possible you were in fact running out of file  
> descriptors.
>
> What was your mergeFactor set to?
>
> Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34740-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 01 17:28:39 2008
Return-Path: <java-user-return-34740-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 46934 invoked from network); 1 Jul 2008 17:28:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Jul 2008 17:28:39 -0000
Received: (qmail 69393 invoked by uid 500); 1 Jul 2008 17:28:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69365 invoked by uid 500); 1 Jul 2008 17:28:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69354 invoked by uid 99); 1 Jul 2008 17:28:33 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Jul 2008 10:28:33 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of markrmiller@gmail.com designates 64.233.178.251 as permitted sender)
Received: from [64.233.178.251] (HELO hs-out-0708.google.com) (64.233.178.251)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Jul 2008 17:27:41 +0000
Received: by hs-out-0708.google.com with SMTP id 4so401768hsl.5
        for <java-user@lucene.apache.org>; Tue, 01 Jul 2008 10:26:12 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from
         :user-agent:mime-version:to:subject:references:in-reply-to
         :content-type:content-transfer-encoding;
        bh=rr81B4Q7hoMw8BZJ+uM8sdqE40G7OuJAEdUBgb1138c=;
        b=dFlh3BimHasFHM2CxCp8XmXDmKwX3dFp78Spkb+WiFXNkGwY88bHnVuRZoq43Tt0Wf
         YOL7YP3K+D/ZEhByLY7O/KKdeB8J2hGlAD+qsPp1x8tEhu9AbQjMwPFgESxZW+1VnKfb
         TOushsoBwc6P6aQhl0oU71VdBCQukzwWYTqp0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references
         :in-reply-to:content-type:content-transfer-encoding;
        b=xoXLKNLM5m7YPj4GhgOjOQVeJAz7MZQtDyDEdc6VImnuKeAXO5o7f1OTls/s41xnsK
         Vr3bs7xad5qWLqulB/W2nrZDXCuztBnfaZwOQo6B3a3amxY3Rus+Y6xBZQHa9Qo0m9+6
         5wXvdpfLXnuz/exUymNuq5We4UbTaXufKHuQM=
Received: by 10.100.105.15 with SMTP id d15mr6175859anc.137.1214933172062;
        Tue, 01 Jul 2008 10:26:12 -0700 (PDT)
Received: from ?192.168.1.106? ( [69.124.234.149])
        by mx.google.com with ESMTPS id p6sm5540799qbp.17.2008.07.01.10.26.10
        (version=SSLv3 cipher=RC4-MD5);
        Tue, 01 Jul 2008 10:26:11 -0700 (PDT)
Message-ID: <486A68B2.6010302@gmail.com>
Date: Tue, 01 Jul 2008 13:26:10 -0400
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.14 (X11/20080505)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: FileNotFoundException in ConcurrentMergeScheduler
References: <EEBD1ADA-C2E8-41D1-B8AE-E90DFDC090B4@mac.com> <483F47CD.1050709@gmail.com> <F0D9682E-BCFE-4F1E-9A8F-94E206BCCFBB@mac.com> <483F50F5.3050804@gmail.com> <483F549D.3040405@gmail.com> <28785928-1CE6-40B4-867B-114526A1F838@mikemccandless.com> <CAC3FF9B-FBCA-424D-97DA-C022DE0B01F7@mac.com> <EA6F5635-68E8-4213-89CB-C68CCAB326CB@mikemccandless.com> <0A50D663-8810-48AC-8480-7ADAB513664B@lucasmail.org>
In-Reply-To: <0A50D663-8810-48AC-8480-7ADAB513664B@lucasmail.org>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Paul J. Lucas wrote:
> Sorry for the radio silence.  I changed my code around so that a 
> single IndexReader and IndexSearcher are shared.  Since doing that, 
> I've not seen the problem.  That being the case, I didn't pursue the 
> issue.
>
> I still think there's a bug because the code I had previously, IMHO, 
> should have worked just fine.
>
> - Paul
>
Hey Paul, when I told you that you should be sharing 
IndexSearcher/Reader's across threads and I thought it was wrong not to, 
I made the obviously wrong assumption that you either had lots of 
clients or were not in control of the number of searches that could 
could come in at once (a webpp on the internet type thing).

In your simple case, you are certainly right and it should have worked 
just fine. I was concerned you were generating an unknown number of 
Readers for every search (which we now know is not an issue). Please 
disregard all notions that I may have introduced in regards to this 
being wrong. It is only  in the case of many clients/searches 
simultaneously that I would consider what I said to be accurate: and 
even then not everyone is sure to agree with me.

Again, I apologize for leading you a bit off track. You did double check 
your Writer handling though? I still don't think anyone has seen your 
error without using two Writer's simultaneously.

- Mark

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34741-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 01 17:30:50 2008
Return-Path: <java-user-return-34741-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47746 invoked from network); 1 Jul 2008 17:30:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Jul 2008 17:30:50 -0000
Received: (qmail 76330 invoked by uid 500); 1 Jul 2008 17:30:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76299 invoked by uid 500); 1 Jul 2008 17:30:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76288 invoked by uid 99); 1 Jul 2008 17:30:45 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Jul 2008 10:30:45 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of markrmiller@gmail.com designates 209.85.132.245 as permitted sender)
Received: from [209.85.132.245] (HELO an-out-0708.google.com) (209.85.132.245)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Jul 2008 17:29:53 +0000
Received: by an-out-0708.google.com with SMTP id c37so397915anc.49
        for <java-user@lucene.apache.org>; Tue, 01 Jul 2008 10:29:36 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from
         :user-agent:mime-version:to:subject:references:in-reply-to
         :content-type:content-transfer-encoding;
        bh=L4Moe4aymO9yua6juPLnsKiOh8UyZAeB0O+mPX7SJaM=;
        b=nqiINMzoIpBbVh4d5gi0iU7P4c5iiehbmD/CKk/3TvK3NVL2rRFm0M+rIAwkWOB0nF
         j83A4WjcJp1WUCoEDV4JxoghYTKvYYqCl5Umg9zHSeMCLfkq93OYP13K6ha027+l19Fv
         0hmv4yxT3Mf8QtSykAzj5444571qSUjtOSWfA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references
         :in-reply-to:content-type:content-transfer-encoding;
        b=Kxm6zkoeM4j9xrn6sD8aOhEqv9r5BsGNRePLgPucYTHOggQu9hvoXo57rTnCUiyOOT
         ZbQnAQoRamash9aRiUlDkZi+kPLnAmYVNm23yJloL2RS7uxQFJYfXRq4c53oAzyc5QfR
         acXl/63kjQ5HtP7aOOFu/5z8DoIJIbn3HM6YM=
Received: by 10.100.251.5 with SMTP id y5mr6174389anh.125.1214933375952;
        Tue, 01 Jul 2008 10:29:35 -0700 (PDT)
Received: from ?192.168.1.106? ( [69.124.234.149])
        by mx.google.com with ESMTPS id p27sm9482658qbp.15.2008.07.01.10.29.34
        (version=SSLv3 cipher=RC4-MD5);
        Tue, 01 Jul 2008 10:29:34 -0700 (PDT)
Message-ID: <486A697D.4010902@gmail.com>
Date: Tue, 01 Jul 2008 13:29:33 -0400
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.14 (X11/20080505)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: FileNotFoundException in ConcurrentMergeScheduler
References: <EEBD1ADA-C2E8-41D1-B8AE-E90DFDC090B4@mac.com> <483F47CD.1050709@gmail.com> <F0D9682E-BCFE-4F1E-9A8F-94E206BCCFBB@mac.com> <483F50F5.3050804@gmail.com> <483F549D.3040405@gmail.com> <28785928-1CE6-40B4-867B-114526A1F838@mikemccandless.com> <CAC3FF9B-FBCA-424D-97DA-C022DE0B01F7@mac.com> <EA6F5635-68E8-4213-89CB-C68CCAB326CB@mikemccandless.com> <0A50D663-8810-48AC-8480-7ADAB513664B@lucasmail.org> <486A68B2.6010302@gmail.com>
In-Reply-To: <486A68B2.6010302@gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Mark Miller wrote:
> Paul J. Lucas wrote:
>> Sorry for the radio silence.  I changed my code around so that a 
>> single IndexReader and IndexSearcher are shared.  Since doing that, 
>> I've not seen the problem.  That being the case, I didn't pursue the 
>> issue.
>>
>> I still think there's a bug because the code I had previously, IMHO, 
>> should have worked just fine.
>>
>> - Paul
>>
> Hey Paul, when I told you that you should be sharing 
> IndexSearcher/Reader's across threads and I thought it was wrong not 
> to, I made the obviously wrong assumption that you either had lots of 
> clients or were not in control of the number of searches that could 
> could come in at once (a webpp on the internet type thing).
>
> In your simple case, you are certainly right and it should have worked 
> just fine. I was concerned you were generating an unknown number of 
> Readers for every search (which we now know is not an issue). Please 
> disregard all notions that I may have introduced in regards to this 
> being wrong. It is only  in the case of many clients/searches 
> simultaneously that I would consider what I said to be accurate: and 
> even then not everyone is sure to agree with me.
>
> Again, I apologize for leading you a bit off track. You did double 
> check your Writer handling though? I still don't think anyone has seen 
> your error without using two Writer's simultaneously.
>
> - Mark
P.S.

Dont switch back to not sharing! Even your one client must enjoy not 
having to wait for that new Searcher to load up on every search :) 
Especially if you have any sort caches.

- Mark

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34742-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 01 20:02:06 2008
Return-Path: <java-user-return-34742-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21608 invoked from network); 1 Jul 2008 20:02:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Jul 2008 20:02:05 -0000
Received: (qmail 79274 invoked by uid 500); 1 Jul 2008 20:02:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79239 invoked by uid 500); 1 Jul 2008 20:02:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79228 invoked by uid 99); 1 Jul 2008 20:02:00 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Jul 2008 13:02:00 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Jul 2008 20:01:09 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KDm2a-0007fu-UZ
	for java-user@lucene.apache.org; Tue, 01 Jul 2008 13:01:28 -0700
Message-ID: <18224180.post@talk.nabble.com>
Date: Tue, 1 Jul 2008 13:01:28 -0700 (PDT)
From: dan at gmail <danqinsitu@gmail.com>
To: java-user@lucene.apache.org
Subject: LUCENE-1282
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: danqinsitu@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hello,

I don't have a good understanding of what options for avoid this corrupted
index problem described in LUCENE-1282.  It seems to me that I either
downgrade JRE from 1.6.0_06 to 1.6.0_03, or wait for an official release of
Lucene 2.4.0 which includes a workaround for this JRE bug.

http://issues.apache.org/jira/browse/LUCENE-1282

Do I have any other options?

Thanks,
Dan
-- 
View this message in context: http://www.nabble.com/LUCENE-1282-tp18224180p18224180.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34743-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 01 20:25:53 2008
Return-Path: <java-user-return-34743-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 28633 invoked from network); 1 Jul 2008 20:25:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Jul 2008 20:25:53 -0000
Received: (qmail 2976 invoked by uid 500); 1 Jul 2008 20:25:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2946 invoked by uid 500); 1 Jul 2008 20:25:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2929 invoked by uid 99); 1 Jul 2008 20:25:47 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Jul 2008 13:25:47 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=SPF_NEUTRAL,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [64.233.184.231] (HELO wr-out-0506.google.com) (64.233.184.231)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Jul 2008 20:24:54 +0000
Received: by wr-out-0506.google.com with SMTP id c30so51884wra.21
        for <java-user@lucene.apache.org>; Tue, 01 Jul 2008 13:25:12 -0700 (PDT)
Received: by 10.90.73.17 with SMTP id v17mr7260630aga.87.1214943912257;
        Tue, 01 Jul 2008 13:25:12 -0700 (PDT)
Received: from ?10.17.4.4? ( [72.93.214.93])
        by mx.google.com with ESMTPS id 38sm5466826aga.13.2008.07.01.13.25.11
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Tue, 01 Jul 2008 13:25:11 -0700 (PDT)
Message-Id: <C5AF0715-16B9-4F48-825C-1AC42E5C441D@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <18224180.post@talk.nabble.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v924)
Subject: Re: LUCENE-1282
Date: Tue, 1 Jul 2008 16:25:10 -0400
References: <18224180.post@talk.nabble.com>
X-Mailer: Apple Mail (2.924)
X-Virus-Checked: Checked by ClamAV on apache.org


Yes, downgrading is really the only option now, unfortunately.

That, and voting for this bug at Sun (note you can vote for the same  
bug 3 times), which seems to be the root cause of the corruption:

     http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6707044

It's been open for 6 weeks now and besides being accepted by Sun  
there's been no other response.  It's marked (surprisingly) as low  
priority.

While we've worked around it in Lucene, as best I can tell, you really  
can't be sure so downgrading is the safest course of action.

Mike

dan at gmail wrote:

>
> Hello,
>
> I don't have a good understanding of what options for avoid this  
> corrupted
> index problem described in LUCENE-1282.  It seems to me that I either
> downgrade JRE from 1.6.0_06 to 1.6.0_03, or wait for an official  
> release of
> Lucene 2.4.0 which includes a workaround for this JRE bug.
>
> http://issues.apache.org/jira/browse/LUCENE-1282
>
> Do I have any other options?
>
> Thanks,
> Dan
> -- 
> View this message in context: http://www.nabble.com/LUCENE-1282-tp18224180p18224180.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34744-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 01 20:57:27 2008
Return-Path: <java-user-return-34744-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37452 invoked from network); 1 Jul 2008 20:57:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Jul 2008 20:57:27 -0000
Received: (qmail 43214 invoked by uid 500); 1 Jul 2008 20:57:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43190 invoked by uid 500); 1 Jul 2008 20:57:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43179 invoked by uid 99); 1 Jul 2008 20:57:21 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Jul 2008 13:57:21 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Jul 2008 20:56:30 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KDmu9-0001UH-Tq
	for java-user@lucene.apache.org; Tue, 01 Jul 2008 13:56:49 -0700
Message-ID: <18225153.post@talk.nabble.com>
Date: Tue, 1 Jul 2008 13:56:49 -0700 (PDT)
From: dan at gmail <danqinsitu@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: LUCENE-1282
In-Reply-To: <C5AF0715-16B9-4F48-825C-1AC42E5C441D@mikemccandless.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: danqinsitu@gmail.com
References: <18224180.post@talk.nabble.com> <C5AF0715-16B9-4F48-825C-1AC42E5C441D@mikemccandless.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Thanks Mike.


Michael McCandless-2 wrote:
> 
> 
> Yes, downgrading is really the only option now, unfortunately.
> 
> That, and voting for this bug at Sun (note you can vote for the same  
> bug 3 times), which seems to be the root cause of the corruption:
> 
>      http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6707044
> 
> It's been open for 6 weeks now and besides being accepted by Sun  
> there's been no other response.  It's marked (surprisingly) as low  
> priority.
> 
> While we've worked around it in Lucene, as best I can tell, you really  
> can't be sure so downgrading is the safest course of action.
> 
> Mike
> 
> dan at gmail wrote:
> 
>>
>> Hello,
>>
>> I don't have a good understanding of what options for avoid this  
>> corrupted
>> index problem described in LUCENE-1282.  It seems to me that I either
>> downgrade JRE from 1.6.0_06 to 1.6.0_03, or wait for an official  
>> release of
>> Lucene 2.4.0 which includes a workaround for this JRE bug.
>>
>> http://issues.apache.org/jira/browse/LUCENE-1282
>>
>> Do I have any other options?
>>
>> Thanks,
>> Dan
>> -- 
>> View this message in context:
>> http://www.nabble.com/LUCENE-1282-tp18224180p18224180.html
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/LUCENE-1282-tp18224180p18225153.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34745-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 02 01:11:24 2008
Return-Path: <java-user-return-34745-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38222 invoked from network); 2 Jul 2008 01:11:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Jul 2008 01:11:24 -0000
Received: (qmail 42002 invoked by uid 500); 2 Jul 2008 01:11:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41967 invoked by uid 500); 2 Jul 2008 01:11:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41956 invoked by uid 99); 2 Jul 2008 01:11:19 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Jul 2008 18:11:19 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Jul 2008 01:10:28 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KDqrw-0001fQ-0X
	for java-user@lucene.apache.org; Tue, 01 Jul 2008 18:10:48 -0700
Message-ID: <18228381.post@talk.nabble.com>
Date: Tue, 1 Jul 2008 18:10:47 -0700 (PDT)
From: dan at gmail <danqinsitu@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: LUCENE-1282
In-Reply-To: <C5AF0715-16B9-4F48-825C-1AC42E5C441D@mikemccandless.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: danqinsitu@gmail.com
References: <18224180.post@talk.nabble.com> <C5AF0715-16B9-4F48-825C-1AC42E5C441D@mikemccandless.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Mike,

I have one more question.

I have another set of index data which were built with Lucene 2.3.2 and JRE
1.6.0_06 and this set index  has not been corrupted yet.  If I downgrade to
JRE 1.6.0_03, do I need to rebuild this index with JRE 1.6.0_03 or I can
continue to use this index with 1.6.0_03?

Thanks,
Dan 


Michael McCandless-2 wrote:
> 
> 
> Yes, downgrading is really the only option now, unfortunately.
> 
> That, and voting for this bug at Sun (note you can vote for the same  
> bug 3 times), which seems to be the root cause of the corruption:
> 
>      http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6707044
> 
> It's been open for 6 weeks now and besides being accepted by Sun  
> there's been no other response.  It's marked (surprisingly) as low  
> priority.
> 
> While we've worked around it in Lucene, as best I can tell, you really  
> can't be sure so downgrading is the safest course of action.
> 
> Mike
> 
> dan at gmail wrote:
> 
>>
>> Hello,
>>
>> I don't have a good understanding of what options for avoid this  
>> corrupted
>> index problem described in LUCENE-1282.  It seems to me that I either
>> downgrade JRE from 1.6.0_06 to 1.6.0_03, or wait for an official  
>> release of
>> Lucene 2.4.0 which includes a workaround for this JRE bug.
>>
>> http://issues.apache.org/jira/browse/LUCENE-1282
>>
>> Do I have any other options?
>>
>> Thanks,
>> Dan
>> -- 
>> View this message in context:
>> http://www.nabble.com/LUCENE-1282-tp18224180p18224180.html
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/LUCENE-1282-tp18224180p18228381.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34746-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 02 01:23:46 2008
Return-Path: <java-user-return-34746-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47097 invoked from network); 2 Jul 2008 01:23:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Jul 2008 01:23:46 -0000
Received: (qmail 49241 invoked by uid 500); 2 Jul 2008 01:23:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49197 invoked by uid 500); 2 Jul 2008 01:23:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49186 invoked by uid 99); 2 Jul 2008 01:23:40 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 01 Jul 2008 18:23:40 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=SPF_NEUTRAL,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [74.125.46.30] (HELO yw-out-2324.google.com) (74.125.46.30)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Jul 2008 01:22:47 +0000
Received: by yw-out-2324.google.com with SMTP id 3so65344ywj.5
        for <java-user@lucene.apache.org>; Tue, 01 Jul 2008 18:23:06 -0700 (PDT)
Received: by 10.151.114.6 with SMTP id r6mr2501079ybm.181.1214961786444;
        Tue, 01 Jul 2008 18:23:06 -0700 (PDT)
Received: from ?10.17.4.4? ( [72.93.214.93])
        by mx.google.com with ESMTPS id 5sm9183750ywl.4.2008.07.01.18.23.05
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Tue, 01 Jul 2008 18:23:05 -0700 (PDT)
Message-Id: <CB9AC254-226B-415B-A1C2-FD68ABEF057C@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <18228381.post@talk.nabble.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v924)
Subject: Re: LUCENE-1282
Date: Tue, 1 Jul 2008 21:23:04 -0400
References: <18224180.post@talk.nabble.com> <C5AF0715-16B9-4F48-825C-1AC42E5C441D@mikemccandless.com> <18228381.post@talk.nabble.com>
X-Mailer: Apple Mail (2.924)
X-Virus-Checked: Checked by ClamAV on apache.org


As long as you are really sure it's not corrupt (by running  
CheckIndex) then you do not need to rebuild it.

Mike

dan at gmail wrote:

>
> Mike,
>
> I have one more question.
>
> I have another set of index data which were built with Lucene 2.3.2  
> and JRE
> 1.6.0_06 and this set index  has not been corrupted yet.  If I  
> downgrade to
> JRE 1.6.0_03, do I need to rebuild this index with JRE 1.6.0_03 or I  
> can
> continue to use this index with 1.6.0_03?
>
> Thanks,
> Dan
>
>
> Michael McCandless-2 wrote:
>>
>>
>> Yes, downgrading is really the only option now, unfortunately.
>>
>> That, and voting for this bug at Sun (note you can vote for the same
>> bug 3 times), which seems to be the root cause of the corruption:
>>
>>     http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6707044
>>
>> It's been open for 6 weeks now and besides being accepted by Sun
>> there's been no other response.  It's marked (surprisingly) as low
>> priority.
>>
>> While we've worked around it in Lucene, as best I can tell, you  
>> really
>> can't be sure so downgrading is the safest course of action.
>>
>> Mike
>>
>> dan at gmail wrote:
>>
>>>
>>> Hello,
>>>
>>> I don't have a good understanding of what options for avoid this
>>> corrupted
>>> index problem described in LUCENE-1282.  It seems to me that I  
>>> either
>>> downgrade JRE from 1.6.0_06 to 1.6.0_03, or wait for an official
>>> release of
>>> Lucene 2.4.0 which includes a workaround for this JRE bug.
>>>
>>> http://issues.apache.org/jira/browse/LUCENE-1282
>>>
>>> Do I have any other options?
>>>
>>> Thanks,
>>> Dan
>>> -- 
>>> View this message in context:
>>> http://www.nabble.com/LUCENE-1282-tp18224180p18224180.html
>>> Sent from the Lucene - Java Users mailing list archive at  
>>> Nabble.com.
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>
> -- 
> View this message in context: http://www.nabble.com/LUCENE-1282-tp18224180p18228381.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34747-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 02 09:18:01 2008
Return-Path: <java-user-return-34747-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77653 invoked from network); 2 Jul 2008 09:18:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Jul 2008 09:18:01 -0000
Received: (qmail 18245 invoked by uid 500); 2 Jul 2008 09:17:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18218 invoked by uid 500); 2 Jul 2008 09:17:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18207 invoked by uid 99); 2 Jul 2008 09:17:55 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Jul 2008 02:17:55 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of shalinmangar@gmail.com designates 209.85.198.227 as permitted sender)
Received: from [209.85.198.227] (HELO rv-out-0506.google.com) (209.85.198.227)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Jul 2008 09:17:04 +0000
Received: by rv-out-0506.google.com with SMTP id f6so352155rvb.5
        for <java-user@lucene.apache.org>; Wed, 02 Jul 2008 02:17:25 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references;
        bh=jwuoSfV4F/GPJI4J4WF/LzjkCPynF1/YEBtb4Pj1bps=;
        b=gS/D2jA3iXAZhpT5yiKj7L7x3+fIadR6xc294SCCq2ca6XYf/gYKgZTdhIv+MFx0M6
         lRR25ti/VXSoRUf87W5fJ3TJPc+UJ/VFi6aiGuYMxOpD0XR40I+HOGgc9mNGLTdZaRD0
         IO/ZSkjitkREcihpNpSezBzRQku4GYFpax7Jo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references;
        b=KHcNaN1pgFO2JiBzqxzZd8c+E5y4qxs9GcCffRrZBK+JxaNxgBPM3rnfBvLcBqvhnA
         LcDMMLbU+IyyXNPftXQ3JOZUCrUGzENDgximTq/Fw2Tizdu3LzgzipW7OnjPnRydfUrl
         OljxlYvP6WDXxW0FT0YJZCSZECwHRKvr2ooZQ=
Received: by 10.141.176.4 with SMTP id d4mr4294030rvp.14.1214990244966;
        Wed, 02 Jul 2008 02:17:24 -0700 (PDT)
Received: by 10.140.178.17 with HTTP; Wed, 2 Jul 2008 02:17:24 -0700 (PDT)
Message-ID: <69de18140807020217q2ab1c3c3se1cb33a4099f3a6c@mail.gmail.com>
Date: Wed, 2 Jul 2008 14:47:24 +0530
From: "Shalin Shekhar Mangar" <shalinmangar@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: IndexDeletionPolicy and optimized indices
In-Reply-To: <F21AB543-C901-4043-8569-2976EAEEB903@mikemccandless.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <69de18140807010347s6269fea5r12c3212e0ec0a12a@mail.gmail.com>
	 <F21AB543-C901-4043-8569-2976EAEEB903@mikemccandless.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Michael,

Thanks for the response.

Looking at the general way the filenames are organized:

IndexCommit.getFileNames() without optimize (after IW.close())
[segments_4, _0.cfs, _1.cfs, _2.cfs]
IndexCommit.getFileNames() after optimize+close [segments_5, _4.cfs]

We can compare the latest commit point's files with the previous
commit point's files and if the number of .cfs files have decreased
(or equal) (with a +1 in generation number), can we reliably say if an
optimize has happened?

On Tue, Jul 1, 2008 at 5:44 PM, Michael McCandless
<lucene@mikemccandless.com> wrote:
>
> You're right IndexCommit doesn't know that it represents an optimized index.
>
> Likewise, IndexCommit doesn't know other "semantic" things about the index, eg, you've just called expungeDeletes, or, you just finished adding batch X of documents to the index, etc.
>
> Also, realize that with autoCommit=false (to be the only choice in 3.0), no commit will be done after an optimize.  Ie you have to call commit() or close() explicitly to make it a commit.
>
> I think the simplest general approach to "know" which commit points represent "interesting" times to the application would be to call IW.optimize() then IW.commit() (if you are using trunk) or just IW.close(), then look at the last IndexCommit passed to your deletion policy's onCommit() and record yourself that this commit was the result of an optimize.
>
> Mike
>
> Shalin Shekhar Mangar wrote:
>
>> Hi,
>>
>> I'm implementing a custom IndexDeletionPolicy. An IndexCommit object
>> does not have any information whether it's index is optimized or not.
>> How can a IndexDeletionPolicy know which IndexCommit instances
>> corresponded to optimized indices?
>>
>> --
>> Regards,
>> Shalin Shekhar Mangar.
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>



--
Regards,
Shalin Shekhar Mangar.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34748-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 02 09:30:35 2008
Return-Path: <java-user-return-34748-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80997 invoked from network); 2 Jul 2008 09:30:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Jul 2008 09:30:35 -0000
Received: (qmail 34850 invoked by uid 500); 2 Jul 2008 09:30:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34812 invoked by uid 500); 2 Jul 2008 09:30:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34801 invoked by uid 99); 2 Jul 2008 09:30:30 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Jul 2008 02:30:30 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [74.125.44.30] (HELO yx-out-2324.google.com) (74.125.44.30)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Jul 2008 09:29:38 +0000
Received: by yx-out-2324.google.com with SMTP id 3so49737yxj.5
        for <java-user@lucene.apache.org>; Wed, 02 Jul 2008 02:29:57 -0700 (PDT)
Received: by 10.150.205.13 with SMTP id c13mr12438768ybg.239.1214990997298;
        Wed, 02 Jul 2008 02:29:57 -0700 (PDT)
Received: from ?10.17.4.4? ( [72.93.214.93])
        by mx.google.com with ESMTPS id 7sm3702690ywo.7.2008.07.02.02.29.56
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Wed, 02 Jul 2008 02:29:56 -0700 (PDT)
Message-Id: <8F3A492D-E7AC-4638-896C-9FEF63047A15@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <69de18140807020217q2ab1c3c3se1cb33a4099f3a6c@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v924)
Subject: Re: IndexDeletionPolicy and optimized indices
Date: Wed, 2 Jul 2008 05:29:55 -0400
References: <69de18140807010347s6269fea5r12c3212e0ec0a12a@mail.gmail.com> <F21AB543-C901-4043-8569-2976EAEEB903@mikemccandless.com> <69de18140807020217q2ab1c3c3se1cb33a4099f3a6c@mail.gmail.com>
X-Mailer: Apple Mail (2.924)
X-Virus-Checked: Checked by ClamAV on apache.org


Well ... that heuristic is not quite general enough, because the  
completion of a merge would also decrease the # files and +1 the  
generation number (if a commit had occurred).

You could check for *.cfs and if there is only one, declare the index  
optimized?  This still isn't always correct because if there is a  
_X_N.del file (pending deletes against the segment) then the index is  
not optimized.

But in general, Lucene's file format can change from release to  
release (it's not an API), so if something changes in the future you  
may have to revisit this heuristic.

Mike

Shalin Shekhar Mangar wrote:

> Hi Michael,
>
> Thanks for the response.
>
> Looking at the general way the filenames are organized:
>
> IndexCommit.getFileNames() without optimize (after IW.close())
> [segments_4, _0.cfs, _1.cfs, _2.cfs]
> IndexCommit.getFileNames() after optimize+close [segments_5, _4.cfs]
>
> We can compare the latest commit point's files with the previous
> commit point's files and if the number of .cfs files have decreased
> (or equal) (with a +1 in generation number), can we reliably say if an
> optimize has happened?
>
> On Tue, Jul 1, 2008 at 5:44 PM, Michael McCandless
> <lucene@mikemccandless.com> wrote:
>>
>> You're right IndexCommit doesn't know that it represents an  
>> optimized index.
>>
>> Likewise, IndexCommit doesn't know other "semantic" things about  
>> the index, eg, you've just called expungeDeletes, or, you just  
>> finished adding batch X of documents to the index, etc.
>>
>> Also, realize that with autoCommit=false (to be the only choice in  
>> 3.0), no commit will be done after an optimize.  Ie you have to  
>> call commit() or close() explicitly to make it a commit.
>>
>> I think the simplest general approach to "know" which commit points  
>> represent "interesting" times to the application would be to call  
>> IW.optimize() then IW.commit() (if you are using trunk) or just  
>> IW.close(), then look at the last IndexCommit passed to your  
>> deletion policy's onCommit() and record yourself that this commit  
>> was the result of an optimize.
>>
>> Mike
>>
>> Shalin Shekhar Mangar wrote:
>>
>>> Hi,
>>>
>>> I'm implementing a custom IndexDeletionPolicy. An IndexCommit object
>>> does not have any information whether it's index is optimized or  
>>> not.
>>> How can a IndexDeletionPolicy know which IndexCommit instances
>>> corresponded to optimized indices?
>>>
>>> --
>>> Regards,
>>> Shalin Shekhar Mangar.
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
>
>
> --
> Regards,
> Shalin Shekhar Mangar.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34749-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 02 09:42:12 2008
Return-Path: <java-user-return-34749-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86250 invoked from network); 2 Jul 2008 09:42:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Jul 2008 09:42:12 -0000
Received: (qmail 55496 invoked by uid 500); 2 Jul 2008 09:42:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54519 invoked by uid 500); 2 Jul 2008 09:42:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54508 invoked by uid 99); 2 Jul 2008 09:42:06 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Jul 2008 02:42:06 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of shalinmangar@gmail.com designates 209.85.198.235 as permitted sender)
Received: from [209.85.198.235] (HELO rv-out-0506.google.com) (209.85.198.235)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Jul 2008 09:41:16 +0000
Received: by rv-out-0506.google.com with SMTP id f6so361141rvb.5
        for <java-user@lucene.apache.org>; Wed, 02 Jul 2008 02:41:19 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references;
        bh=9sL24IwbCLUMM90ImDkNkxHLZRMLYiyJPZSUzJed6h4=;
        b=S2qy6TmAMFlzSPHdiT2L13+nEL/Jwei+h9ew7yRQ/rSbY69FNxgM+W7YE0H84d/OIO
         t1jwMmgd1jvrgFdU80LtTwtwX8F24tHax86IyCceX3zXtBZoFsUZ2qeKbAolUxVKDHdw
         3C68nfvJoVwIFz8ngz/plT19loJesDEAf2HyA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references;
        b=CrSNPS3Y9PmxX0fRMbADq8XwEwtQqBwjwVyHa78S+zGRWjGszgsQVJnpsrJRMwZINy
         ikNh9xgKskaI1oaqby77Rgb1OhPtfm5S2OfRpmn9v8apVYzJiNS4yiXSVYawrJhw3Z/J
         RzfgAACXAURcmIWcJe5JluLv5ikajxqB/IANk=
Received: by 10.141.75.6 with SMTP id c6mr4234882rvl.286.1214991679703;
        Wed, 02 Jul 2008 02:41:19 -0700 (PDT)
Received: by 10.140.178.17 with HTTP; Wed, 2 Jul 2008 02:41:19 -0700 (PDT)
Message-ID: <69de18140807020241l13eb1652g603d4bc48d1bf1ce@mail.gmail.com>
Date: Wed, 2 Jul 2008 15:11:19 +0530
From: "Shalin Shekhar Mangar" <shalinmangar@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: IndexDeletionPolicy and optimized indices
In-Reply-To: <8F3A492D-E7AC-4638-896C-9FEF63047A15@mikemccandless.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <69de18140807010347s6269fea5r12c3212e0ec0a12a@mail.gmail.com>
	 <F21AB543-C901-4043-8569-2976EAEEB903@mikemccandless.com>
	 <69de18140807020217q2ab1c3c3se1cb33a4099f3a6c@mail.gmail.com>
	 <8F3A492D-E7AC-4638-896C-9FEF63047A15@mikemccandless.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Ok, so there is no reliable way which can work across releases.
Actually, we are implementing replication feature for Solr (SOLR-561)
and we'd like the user to configure a replication/snapshoot on commit
or only on optimize. We want to rely on IndexDeletionPolicy to avoid
copying index as snapshot and replicate directly from main index.
Therefore, we want a long term and reliable solution.

Can we think of having an API to support this?

On Wed, Jul 2, 2008 at 2:59 PM, Michael McCandless
<lucene@mikemccandless.com> wrote:
>
> Well ... that heuristic is not quite general enough, because the completion
> of a merge would also decrease the # files and +1 the generation number (if
> a commit had occurred).
>
> You could check for *.cfs and if there is only one, declare the index
> optimized?  This still isn't always correct because if there is a _X_N.del
> file (pending deletes against the segment) then the index is not optimized.
>
> But in general, Lucene's file format can change from release to release
> (it's not an API), so if something changes in the future you may have to
> revisit this heuristic.
>
> Mike
>
> Shalin Shekhar Mangar wrote:
>
>> Hi Michael,
>>
>> Thanks for the response.
>>
>> Looking at the general way the filenames are organized:
>>
>> IndexCommit.getFileNames() without optimize (after IW.close())
>> [segments_4, _0.cfs, _1.cfs, _2.cfs]
>> IndexCommit.getFileNames() after optimize+close [segments_5, _4.cfs]
>>
>> We can compare the latest commit point's files with the previous
>> commit point's files and if the number of .cfs files have decreased
>> (or equal) (with a +1 in generation number), can we reliably say if an
>> optimize has happened?
>>
>> On Tue, Jul 1, 2008 at 5:44 PM, Michael McCandless
>> <lucene@mikemccandless.com> wrote:
>>>
>>> You're right IndexCommit doesn't know that it represents an optimized
>>> index.
>>>
>>> Likewise, IndexCommit doesn't know other "semantic" things about the
>>> index, eg, you've just called expungeDeletes, or, you just finished adding
>>> batch X of documents to the index, etc.
>>>
>>> Also, realize that with autoCommit=false (to be the only choice in 3.0),
>>> no commit will be done after an optimize.  Ie you have to call commit() or
>>> close() explicitly to make it a commit.
>>>
>>> I think the simplest general approach to "know" which commit points
>>> represent "interesting" times to the application would be to call
>>> IW.optimize() then IW.commit() (if you are using trunk) or just IW.close(),
>>> then look at the last IndexCommit passed to your deletion policy's
>>> onCommit() and record yourself that this commit was the result of an
>>> optimize.
>>>
>>> Mike
>>>
>>> Shalin Shekhar Mangar wrote:
>>>
>>>> Hi,
>>>>
>>>> I'm implementing a custom IndexDeletionPolicy. An IndexCommit object
>>>> does not have any information whether it's index is optimized or not.
>>>> How can a IndexDeletionPolicy know which IndexCommit instances
>>>> corresponded to optimized indices?
>>>>
>>>> --
>>>> Regards,
>>>> Shalin Shekhar Mangar.
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>
>>
>>
>> --
>> Regards,
>> Shalin Shekhar Mangar.
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>



-- 
Regards,
Shalin Shekhar Mangar.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34750-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 02 12:33:29 2008
Return-Path: <java-user-return-34750-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44654 invoked from network); 2 Jul 2008 12:33:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Jul 2008 12:33:29 -0000
Received: (qmail 68250 invoked by uid 500); 2 Jul 2008 12:33:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68220 invoked by uid 500); 2 Jul 2008 12:33:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68208 invoked by uid 99); 2 Jul 2008 12:33:24 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Jul 2008 05:33:24 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=SPF_NEUTRAL,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [66.249.82.224] (HELO wx-out-0506.google.com) (66.249.82.224)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Jul 2008 12:32:30 +0000
Received: by wx-out-0506.google.com with SMTP id h29so129771wxd.20
        for <java-user@lucene.apache.org>; Wed, 02 Jul 2008 05:32:49 -0700 (PDT)
Received: by 10.70.92.18 with SMTP id p18mr9338842wxb.87.1215001968903;
        Wed, 02 Jul 2008 05:32:48 -0700 (PDT)
Received: from ?10.17.4.4? ( [72.93.214.93])
        by mx.google.com with ESMTPS id 39sm4868859hse.15.2008.07.02.05.32.48
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Wed, 02 Jul 2008 05:32:48 -0700 (PDT)
Message-Id: <C144AC4C-7D57-481B-B385-EB9EDA4FA7D8@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <18206216.post@talk.nabble.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v924)
Subject: Re: Incorrect Token Offset when using multiple fieldable instance
Date: Wed, 2 Jul 2008 08:32:47 -0400
References: <47CD8F40.9010307@deri.org> <2F4D60AC-6EB3-48E6-912F-C4F101EE08B4@mikemccandless.com> <47CE6D5E.8060702@deri.org> <03C5EA23-DA43-4C67-B068-5F7CDD073ECF@mikemccandless.com> <18206216.post@talk.nabble.com>
X-Mailer: Apple Mail (2.924)
X-Virus-Checked: Checked by ClamAV on apache.org


This would actually be a fairly large change: it's a change to the  
index format and all APIs that handle offsets during indexing &  
searching/retrieving.

We could alternatively extend TokenStream so you could query it for  
the final offset, then fix indexing to use that value instead of the  
endOffset of the last token that it saw.

Mike

Toph wrote:

>
> Interesting discussion... glad I'm not the only one with this  
> challenge.
>
>
> Michael McCandless-2 wrote:
>>
>> EG, if you use Highlighter on a
>> multi-valued field indexed with stored field & term vectors and say
>> the first field ended with a stop word that was filtered out, then
>> your offsets will be off and the wrong parts will be highlighted
>>
>
> I found this post by attempting just this exact thing, and I can  
> confirm,
> that yes, the offsets are incorrect for all but the first instance  
> of the
> field in the document, so they are useless for highlighting.  I tried
> concatenating all instances of the fields, but of course if an  
> instance of
> the field ended with punctuation or a stop word, those characters  
> were not
> added to the offset.  I'll try the suggested workaround re adding a  
> false
> term at the end of each field, but a better API would be if "offset"  
> became
> a pair of ints, first being the index of the Field for  
> getFields(name) and
> the second being the offset in that instance of the field.
>
> Christopher
> -- 
> View this message in context: http://www.nabble.com/Incorrect-Token-Offset-when-using-multiple-fieldable-instance-tp15833468p18206216.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34751-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 02 12:34:54 2008
Return-Path: <java-user-return-34751-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45011 invoked from network); 2 Jul 2008 12:34:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Jul 2008 12:34:54 -0000
Received: (qmail 71678 invoked by uid 500); 2 Jul 2008 12:34:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70725 invoked by uid 500); 2 Jul 2008 12:34:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70714 invoked by uid 99); 2 Jul 2008 12:34:49 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Jul 2008 05:34:49 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [66.249.82.232] (HELO wx-out-0506.google.com) (66.249.82.232)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Jul 2008 12:33:57 +0000
Received: by wx-out-0506.google.com with SMTP id h29so130264wxd.20
        for <java-user@lucene.apache.org>; Wed, 02 Jul 2008 05:34:17 -0700 (PDT)
Received: by 10.70.9.4 with SMTP id 4mr9378620wxi.46.1215002057248;
        Wed, 02 Jul 2008 05:34:17 -0700 (PDT)
Received: from ?10.17.4.4? ( [72.93.214.93])
        by mx.google.com with ESMTPS id g3sm3359637wra.2.2008.07.02.05.34.16
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Wed, 02 Jul 2008 05:34:17 -0700 (PDT)
Message-Id: <4EE86F12-D743-467D-983D-AF5FC8E9A894@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <69de18140807020241l13eb1652g603d4bc48d1bf1ce@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v924)
Subject: Re: IndexDeletionPolicy and optimized indices
Date: Wed, 2 Jul 2008 08:34:15 -0400
References: <69de18140807010347s6269fea5r12c3212e0ec0a12a@mail.gmail.com> <F21AB543-C901-4043-8569-2976EAEEB903@mikemccandless.com> <69de18140807020217q2ab1c3c3se1cb33a4099f3a6c@mail.gmail.com> <8F3A492D-E7AC-4638-896C-9FEF63047A15@mikemccandless.com> <69de18140807020241l13eb1652g603d4bc48d1bf1ce@mail.gmail.com>
X-Mailer: Apple Mail (2.924)
X-Virus-Checked: Checked by ClamAV on apache.org


OK I think that makes sense.  I'll take it.  I'll add an isOptimized()  
to IndexCommit.

Mike

Shalin Shekhar Mangar wrote:

> Ok, so there is no reliable way which can work across releases.
> Actually, we are implementing replication feature for Solr (SOLR-561)
> and we'd like the user to configure a replication/snapshoot on commit
> or only on optimize. We want to rely on IndexDeletionPolicy to avoid
> copying index as snapshot and replicate directly from main index.
> Therefore, we want a long term and reliable solution.
>
> Can we think of having an API to support this?
>
> On Wed, Jul 2, 2008 at 2:59 PM, Michael McCandless
> <lucene@mikemccandless.com> wrote:
>>
>> Well ... that heuristic is not quite general enough, because the  
>> completion
>> of a merge would also decrease the # files and +1 the generation  
>> number (if
>> a commit had occurred).
>>
>> You could check for *.cfs and if there is only one, declare the index
>> optimized?  This still isn't always correct because if there is a  
>> _X_N.del
>> file (pending deletes against the segment) then the index is not  
>> optimized.
>>
>> But in general, Lucene's file format can change from release to  
>> release
>> (it's not an API), so if something changes in the future you may  
>> have to
>> revisit this heuristic.
>>
>> Mike
>>
>> Shalin Shekhar Mangar wrote:
>>
>>> Hi Michael,
>>>
>>> Thanks for the response.
>>>
>>> Looking at the general way the filenames are organized:
>>>
>>> IndexCommit.getFileNames() without optimize (after IW.close())
>>> [segments_4, _0.cfs, _1.cfs, _2.cfs]
>>> IndexCommit.getFileNames() after optimize+close [segments_5, _4.cfs]
>>>
>>> We can compare the latest commit point's files with the previous
>>> commit point's files and if the number of .cfs files have decreased
>>> (or equal) (with a +1 in generation number), can we reliably say  
>>> if an
>>> optimize has happened?
>>>
>>> On Tue, Jul 1, 2008 at 5:44 PM, Michael McCandless
>>> <lucene@mikemccandless.com> wrote:
>>>>
>>>> You're right IndexCommit doesn't know that it represents an  
>>>> optimized
>>>> index.
>>>>
>>>> Likewise, IndexCommit doesn't know other "semantic" things about  
>>>> the
>>>> index, eg, you've just called expungeDeletes, or, you just  
>>>> finished adding
>>>> batch X of documents to the index, etc.
>>>>
>>>> Also, realize that with autoCommit=false (to be the only choice  
>>>> in 3.0),
>>>> no commit will be done after an optimize.  Ie you have to call  
>>>> commit() or
>>>> close() explicitly to make it a commit.
>>>>
>>>> I think the simplest general approach to "know" which commit points
>>>> represent "interesting" times to the application would be to call
>>>> IW.optimize() then IW.commit() (if you are using trunk) or just  
>>>> IW.close(),
>>>> then look at the last IndexCommit passed to your deletion policy's
>>>> onCommit() and record yourself that this commit was the result of  
>>>> an
>>>> optimize.
>>>>
>>>> Mike
>>>>
>>>> Shalin Shekhar Mangar wrote:
>>>>
>>>>> Hi,
>>>>>
>>>>> I'm implementing a custom IndexDeletionPolicy. An IndexCommit  
>>>>> object
>>>>> does not have any information whether it's index is optimized or  
>>>>> not.
>>>>> How can a IndexDeletionPolicy know which IndexCommit instances
>>>>> corresponded to optimized indices?
>>>>>
>>>>> --
>>>>> Regards,
>>>>> Shalin Shekhar Mangar.
>>>>>
>>>>> ---------------------------------------------------------------------
>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>
>>>>
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>
>>>
>>>
>>> --
>>> Regards,
>>> Shalin Shekhar Mangar.
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
>
>
> -- 
> Regards,
> Shalin Shekhar Mangar.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34752-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 02 14:20:33 2008
Return-Path: <java-user-return-34752-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86417 invoked from network); 2 Jul 2008 14:20:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Jul 2008 14:20:33 -0000
Received: (qmail 43477 invoked by uid 500); 2 Jul 2008 14:20:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43452 invoked by uid 500); 2 Jul 2008 14:20:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43440 invoked by uid 99); 2 Jul 2008 14:20:27 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Jul 2008 07:20:27 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Jul 2008 14:19:34 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KE3Ba-0002CV-K5
	for java-user@lucene.apache.org; Wed, 02 Jul 2008 07:19:54 -0700
Message-ID: <18238566.post@talk.nabble.com>
Date: Wed, 2 Jul 2008 07:19:54 -0700 (PDT)
From: Toph <christopher.m.collins@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Incorrect Token Offset when using multiple fieldable instance
In-Reply-To: <C144AC4C-7D57-481B-B385-EB9EDA4FA7D8@mikemccandless.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: christopher.m.collins@gmail.com
References: <47CD8F40.9010307@deri.org> <2F4D60AC-6EB3-48E6-912F-C4F101EE08B4@mikemccandless.com> <47CE6D5E.8060702@deri.org> <03C5EA23-DA43-4C67-B068-5F7CDD073ECF@mikemccandless.com> <18206216.post@talk.nabble.com> <C144AC4C-7D57-481B-B385-EB9EDA4FA7D8@mikemccandless.com>
X-Virus-Checked: Checked by ClamAV on apache.org



Michael McCandless-2 wrote:
> 
> 
> This would actually be a fairly large change: it's a change to the  
> index format and all APIs that handle offsets during indexing &  
> searching/retrieving.
> 
> 

For now I just changed the offset calculation in DocumentWriter as specified
here by the OP:



> replace DocumentWriter$FieldData#invertField offset = offsetEnd+1; by
> offset = stringValue.length(); 
> 

It has side effects as previously mentioned on this list, e.g. if the
tokenstream is not backed by a stringValue or the Analyzer does not
calculate offsets in the normal way.  But for my purposes it works.

This issue was also discussed previously 
http://lucene.markmail.org/search/?q=offset%20documentwriter#query:offset%20documentwriter+page:1+mid:l6jbfmfisyg5zyre+state:results
here .


Michael McCandless-2 wrote:
> 
> 
> We could alternatively extend TokenStream so you could query it for  
> the final offset, then fix indexing to use that value instead of the  
> endOffset of the last token that it saw.
> 
> 

Querying the tokenstream for the final offset would good, but then would the
change be put into the DocumentWriter directly or available as an option?

Chris
-- 
View this message in context: http://www.nabble.com/Incorrect-Token-Offset-when-using-multiple-fieldable-instance-tp15833468p18238566.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34753-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 02 16:17:19 2008
Return-Path: <java-user-return-34753-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 11353 invoked from network); 2 Jul 2008 16:17:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Jul 2008 16:17:19 -0000
Received: (qmail 40703 invoked by uid 500); 2 Jul 2008 16:17:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40677 invoked by uid 500); 2 Jul 2008 16:17:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40666 invoked by uid 99); 2 Jul 2008 16:17:13 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Jul 2008 09:17:13 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of shalinmangar@gmail.com designates 209.85.198.227 as permitted sender)
Received: from [209.85.198.227] (HELO rv-out-0506.google.com) (209.85.198.227)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Jul 2008 16:16:22 +0000
Received: by rv-out-0506.google.com with SMTP id f6so521141rvb.5
        for <java-user@lucene.apache.org>; Wed, 02 Jul 2008 09:16:43 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references;
        bh=AYbsh0be0PlvpRjhXshXSnFJoieigb2zdB1Uhu43Ws0=;
        b=Bk7zFNLH2EYk9ZqwQPhH1SsCGfeRUQNoUoJGiiTYBRBsXA3wypZkymfmpjgjv4Y42H
         ZDSFwmTggZ4NqLjgbypHxWXKZhlbkb0r+B+in2gZ1m26ZB2TwRSws/3IWAuUB5Aqo7RC
         +G+NzL/sGtnpIAClqFDuSMwA3sQ231O+errMs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references;
        b=VYwl4LXQZiWZ1efnQCWO9tkaqKE3EccIiTGwNW38pvRYzeAjwbFCD+q08fKn9J0u20
         JJKVKUDnCpg4Ng6bzx0ceX/CfjAKHrIrVjSQxOqVqaiOnGmyJFNh0tMtdCU2iCqci9s8
         0zU0dz37DqdM9QbGbDRbMRw/r1IbBZEDdsLP8=
Received: by 10.140.126.14 with SMTP id y14mr3506742rvc.160.1215015402827;
        Wed, 02 Jul 2008 09:16:42 -0700 (PDT)
Received: by 10.140.178.17 with HTTP; Wed, 2 Jul 2008 09:16:42 -0700 (PDT)
Message-ID: <69de18140807020916x61e509b7t1d559be7ed7bb677@mail.gmail.com>
Date: Wed, 2 Jul 2008 21:46:42 +0530
From: "Shalin Shekhar Mangar" <shalinmangar@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: IndexDeletionPolicy and optimized indices
In-Reply-To: <4EE86F12-D743-467D-983D-AF5FC8E9A894@mikemccandless.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <69de18140807010347s6269fea5r12c3212e0ec0a12a@mail.gmail.com>
	 <F21AB543-C901-4043-8569-2976EAEEB903@mikemccandless.com>
	 <69de18140807020217q2ab1c3c3se1cb33a4099f3a6c@mail.gmail.com>
	 <8F3A492D-E7AC-4638-896C-9FEF63047A15@mikemccandless.com>
	 <69de18140807020241l13eb1652g603d4bc48d1bf1ce@mail.gmail.com>
	 <4EE86F12-D743-467D-983D-AF5FC8E9A894@mikemccandless.com>
X-Virus-Checked: Checked by ClamAV on apache.org

That's great. Thanks!

On Wed, Jul 2, 2008 at 6:04 PM, Michael McCandless
<lucene@mikemccandless.com> wrote:
>
> OK I think that makes sense.  I'll take it.  I'll add an isOptimized() to
> IndexCommit.
>
> Mike
>
> Shalin Shekhar Mangar wrote:
>
>> Ok, so there is no reliable way which can work across releases.
>> Actually, we are implementing replication feature for Solr (SOLR-561)
>> and we'd like the user to configure a replication/snapshoot on commit
>> or only on optimize. We want to rely on IndexDeletionPolicy to avoid
>> copying index as snapshot and replicate directly from main index.
>> Therefore, we want a long term and reliable solution.
>>
>> Can we think of having an API to support this?
>>
>> On Wed, Jul 2, 2008 at 2:59 PM, Michael McCandless
>> <lucene@mikemccandless.com> wrote:
>>>
>>> Well ... that heuristic is not quite general enough, because the
>>> completion
>>> of a merge would also decrease the # files and +1 the generation number
>>> (if
>>> a commit had occurred).
>>>
>>> You could check for *.cfs and if there is only one, declare the index
>>> optimized?  This still isn't always correct because if there is a
>>> _X_N.del
>>> file (pending deletes against the segment) then the index is not
>>> optimized.
>>>
>>> But in general, Lucene's file format can change from release to release
>>> (it's not an API), so if something changes in the future you may have to
>>> revisit this heuristic.
>>>
>>> Mike
>>>
>>> Shalin Shekhar Mangar wrote:
>>>
>>>> Hi Michael,
>>>>
>>>> Thanks for the response.
>>>>
>>>> Looking at the general way the filenames are organized:
>>>>
>>>> IndexCommit.getFileNames() without optimize (after IW.close())
>>>> [segments_4, _0.cfs, _1.cfs, _2.cfs]
>>>> IndexCommit.getFileNames() after optimize+close [segments_5, _4.cfs]
>>>>
>>>> We can compare the latest commit point's files with the previous
>>>> commit point's files and if the number of .cfs files have decreased
>>>> (or equal) (with a +1 in generation number), can we reliably say if an
>>>> optimize has happened?
>>>>
>>>> On Tue, Jul 1, 2008 at 5:44 PM, Michael McCandless
>>>> <lucene@mikemccandless.com> wrote:
>>>>>
>>>>> You're right IndexCommit doesn't know that it represents an optimized
>>>>> index.
>>>>>
>>>>> Likewise, IndexCommit doesn't know other "semantic" things about the
>>>>> index, eg, you've just called expungeDeletes, or, you just finished
>>>>> adding
>>>>> batch X of documents to the index, etc.
>>>>>
>>>>> Also, realize that with autoCommit=false (to be the only choice in
>>>>> 3.0),
>>>>> no commit will be done after an optimize.  Ie you have to call commit()
>>>>> or
>>>>> close() explicitly to make it a commit.
>>>>>
>>>>> I think the simplest general approach to "know" which commit points
>>>>> represent "interesting" times to the application would be to call
>>>>> IW.optimize() then IW.commit() (if you are using trunk) or just
>>>>> IW.close(),
>>>>> then look at the last IndexCommit passed to your deletion policy's
>>>>> onCommit() and record yourself that this commit was the result of an
>>>>> optimize.
>>>>>
>>>>> Mike
>>>>>
>>>>> Shalin Shekhar Mangar wrote:
>>>>>
>>>>>> Hi,
>>>>>>
>>>>>> I'm implementing a custom IndexDeletionPolicy. An IndexCommit object
>>>>>> does not have any information whether it's index is optimized or not.
>>>>>> How can a IndexDeletionPolicy know which IndexCommit instances
>>>>>> corresponded to optimized indices?
>>>>>>
>>>>>> --
>>>>>> Regards,
>>>>>> Shalin Shekhar Mangar.
>>>>>>
>>>>>> ---------------------------------------------------------------------
>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>
>>>>>
>>>>>
>>>>> ---------------------------------------------------------------------
>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>
>>>>
>>>>
>>>>
>>>> --
>>>> Regards,
>>>> Shalin Shekhar Mangar.
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>
>>
>>
>> --
>> Regards,
>> Shalin Shekhar Mangar.
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>



-- 
Regards,
Shalin Shekhar Mangar.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34754-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 02 17:22:51 2008
Return-Path: <java-user-return-34754-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 28328 invoked from network); 2 Jul 2008 17:22:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Jul 2008 17:22:51 -0000
Received: (qmail 34287 invoked by uid 500); 2 Jul 2008 17:22:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34252 invoked by uid 500); 2 Jul 2008 17:22:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34241 invoked by uid 99); 2 Jul 2008 17:22:45 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Jul 2008 10:22:45 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [64.233.184.234] (HELO wr-out-0506.google.com) (64.233.184.234)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Jul 2008 17:21:53 +0000
Received: by wr-out-0506.google.com with SMTP id c30so407015wra.21
        for <java-user@lucene.apache.org>; Wed, 02 Jul 2008 10:22:13 -0700 (PDT)
Received: by 10.90.73.17 with SMTP id v17mr9152567aga.7.1215019333169;
        Wed, 02 Jul 2008 10:22:13 -0700 (PDT)
Received: from ?10.17.4.4? ( [72.93.214.93])
        by mx.google.com with ESMTPS id m6sm2868779wrm.35.2008.07.02.10.22.12
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Wed, 02 Jul 2008 10:22:12 -0700 (PDT)
Message-Id: <041DAC30-1194-4F87-91DA-D1B424BF4D76@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <18238566.post@talk.nabble.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v924)
Subject: Re: Incorrect Token Offset when using multiple fieldable instance
Date: Wed, 2 Jul 2008 13:22:11 -0400
References: <47CD8F40.9010307@deri.org> <2F4D60AC-6EB3-48E6-912F-C4F101EE08B4@mikemccandless.com> <47CE6D5E.8060702@deri.org> <03C5EA23-DA43-4C67-B068-5F7CDD073ECF@mikemccandless.com> <18206216.post@talk.nabble.com> <C144AC4C-7D57-481B-B385-EB9EDA4FA7D8@mikemccandless.com> <18238566.post@talk.nabble.com>
X-Mailer: Apple Mail (2.924)
X-Virus-Checked: Checked by ClamAV on apache.org


Toph wrote:

> Michael McCandless-2 wrote:
>>
>>
>> We could alternatively extend TokenStream so you could query it for
>> the final offset, then fix indexing to use that value instead of the
>> endOffset of the last token that it saw.
>>
>>
>
> Querying the tokenstream for the final offset would good, but then  
> would the
> change be put into the DocumentWriter directly or available as an  
> option?

I would put the change into DocumentsWriter directly (ie running by  
default) with an option to enable the old (buggy) behavior for those  
apps that have workarounds and want to get back to the back-compatible  
behavior.

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34755-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 02 17:39:09 2008
Return-Path: <java-user-return-34755-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31613 invoked from network); 2 Jul 2008 17:39:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Jul 2008 17:39:09 -0000
Received: (qmail 51551 invoked by uid 500); 2 Jul 2008 17:39:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 51525 invoked by uid 500); 2 Jul 2008 17:39:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 51514 invoked by uid 99); 2 Jul 2008 17:39:03 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Jul 2008 10:39:03 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [64.233.178.249] (HELO hs-out-0708.google.com) (64.233.178.249)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Jul 2008 17:38:11 +0000
Received: by hs-out-0708.google.com with SMTP id 4so129909hsl.5
        for <java-user@lucene.apache.org>; Wed, 02 Jul 2008 10:38:30 -0700 (PDT)
Received: by 10.100.172.16 with SMTP id u16mr7598882ane.9.1215020310111;
        Wed, 02 Jul 2008 10:38:30 -0700 (PDT)
Received: from ?10.17.4.4? ( [72.93.214.93])
        by mx.google.com with ESMTPS id b29sm10747079ana.22.2008.07.02.10.38.29
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Wed, 02 Jul 2008 10:38:29 -0700 (PDT)
Message-Id: <8AD658A0-2194-42F4-A1BF-B8B58547435C@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <69de18140807020916x61e509b7t1d559be7ed7bb677@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v924)
Subject: Re: IndexDeletionPolicy and optimized indices
Date: Wed, 2 Jul 2008 13:38:28 -0400
References: <69de18140807010347s6269fea5r12c3212e0ec0a12a@mail.gmail.com> <F21AB543-C901-4043-8569-2976EAEEB903@mikemccandless.com> <69de18140807020217q2ab1c3c3se1cb33a4099f3a6c@mail.gmail.com> <8F3A492D-E7AC-4638-896C-9FEF63047A15@mikemccandless.com> <69de18140807020241l13eb1652g603d4bc48d1bf1ce@mail.gmail.com> <4EE86F12-D743-467D-983D-AF5FC8E9A894@mikemccandless.com> <69de18140807020916x61e509b7t1d559be7ed7bb677@mail.gmail.com>
X-Mailer: Apple Mail (2.924)
X-Virus-Checked: Checked by ClamAV on apache.org


OK I opened this one:

     https://issues.apache.org/jira/browse/LUCENE-1325

Mike

Shalin Shekhar Mangar wrote:

> That's great. Thanks!
>
> On Wed, Jul 2, 2008 at 6:04 PM, Michael McCandless
> <lucene@mikemccandless.com> wrote:
>>
>> OK I think that makes sense.  I'll take it.  I'll add an  
>> isOptimized() to
>> IndexCommit.
>>
>> Mike
>>
>> Shalin Shekhar Mangar wrote:
>>
>>> Ok, so there is no reliable way which can work across releases.
>>> Actually, we are implementing replication feature for Solr  
>>> (SOLR-561)
>>> and we'd like the user to configure a replication/snapshoot on  
>>> commit
>>> or only on optimize. We want to rely on IndexDeletionPolicy to avoid
>>> copying index as snapshot and replicate directly from main index.
>>> Therefore, we want a long term and reliable solution.
>>>
>>> Can we think of having an API to support this?
>>>
>>> On Wed, Jul 2, 2008 at 2:59 PM, Michael McCandless
>>> <lucene@mikemccandless.com> wrote:
>>>>
>>>> Well ... that heuristic is not quite general enough, because the
>>>> completion
>>>> of a merge would also decrease the # files and +1 the generation  
>>>> number
>>>> (if
>>>> a commit had occurred).
>>>>
>>>> You could check for *.cfs and if there is only one, declare the  
>>>> index
>>>> optimized?  This still isn't always correct because if there is a
>>>> _X_N.del
>>>> file (pending deletes against the segment) then the index is not
>>>> optimized.
>>>>
>>>> But in general, Lucene's file format can change from release to  
>>>> release
>>>> (it's not an API), so if something changes in the future you may  
>>>> have to
>>>> revisit this heuristic.
>>>>
>>>> Mike
>>>>
>>>> Shalin Shekhar Mangar wrote:
>>>>
>>>>> Hi Michael,
>>>>>
>>>>> Thanks for the response.
>>>>>
>>>>> Looking at the general way the filenames are organized:
>>>>>
>>>>> IndexCommit.getFileNames() without optimize (after IW.close())
>>>>> [segments_4, _0.cfs, _1.cfs, _2.cfs]
>>>>> IndexCommit.getFileNames() after optimize+close [segments_5,  
>>>>> _4.cfs]
>>>>>
>>>>> We can compare the latest commit point's files with the previous
>>>>> commit point's files and if the number of .cfs files have  
>>>>> decreased
>>>>> (or equal) (with a +1 in generation number), can we reliably say  
>>>>> if an
>>>>> optimize has happened?
>>>>>
>>>>> On Tue, Jul 1, 2008 at 5:44 PM, Michael McCandless
>>>>> <lucene@mikemccandless.com> wrote:
>>>>>>
>>>>>> You're right IndexCommit doesn't know that it represents an  
>>>>>> optimized
>>>>>> index.
>>>>>>
>>>>>> Likewise, IndexCommit doesn't know other "semantic" things  
>>>>>> about the
>>>>>> index, eg, you've just called expungeDeletes, or, you just  
>>>>>> finished
>>>>>> adding
>>>>>> batch X of documents to the index, etc.
>>>>>>
>>>>>> Also, realize that with autoCommit=false (to be the only choice  
>>>>>> in
>>>>>> 3.0),
>>>>>> no commit will be done after an optimize.  Ie you have to call  
>>>>>> commit()
>>>>>> or
>>>>>> close() explicitly to make it a commit.
>>>>>>
>>>>>> I think the simplest general approach to "know" which commit  
>>>>>> points
>>>>>> represent "interesting" times to the application would be to call
>>>>>> IW.optimize() then IW.commit() (if you are using trunk) or just
>>>>>> IW.close(),
>>>>>> then look at the last IndexCommit passed to your deletion  
>>>>>> policy's
>>>>>> onCommit() and record yourself that this commit was the result  
>>>>>> of an
>>>>>> optimize.
>>>>>>
>>>>>> Mike
>>>>>>
>>>>>> Shalin Shekhar Mangar wrote:
>>>>>>
>>>>>>> Hi,
>>>>>>>
>>>>>>> I'm implementing a custom IndexDeletionPolicy. An IndexCommit  
>>>>>>> object
>>>>>>> does not have any information whether it's index is optimized  
>>>>>>> or not.
>>>>>>> How can a IndexDeletionPolicy know which IndexCommit instances
>>>>>>> corresponded to optimized indices?
>>>>>>>
>>>>>>> --
>>>>>>> Regards,
>>>>>>> Shalin Shekhar Mangar.
>>>>>>>
>>>>>>> ---------------------------------------------------------------------
>>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>>> For additional commands, e-mail: java-user- 
>>>>>>> help@lucene.apache.org
>>>>>>>
>>>>>>
>>>>>>
>>>>>> ---------------------------------------------------------------------
>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>
>>>>>
>>>>>
>>>>>
>>>>> --
>>>>> Regards,
>>>>> Shalin Shekhar Mangar.
>>>>>
>>>>> ---------------------------------------------------------------------
>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>
>>>>
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>
>>>
>>>
>>> --
>>> Regards,
>>> Shalin Shekhar Mangar.
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
>
>
> -- 
> Regards,
> Shalin Shekhar Mangar.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34756-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 02 18:00:43 2008
Return-Path: <java-user-return-34756-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36881 invoked from network); 2 Jul 2008 18:00:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Jul 2008 18:00:42 -0000
Received: (qmail 83362 invoked by uid 500); 2 Jul 2008 18:00:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83193 invoked by uid 500); 2 Jul 2008 18:00:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83181 invoked by uid 99); 2 Jul 2008 18:00:37 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Jul 2008 11:00:37 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of davidtlee@gmail.com designates 74.125.46.29 as permitted sender)
Received: from [74.125.46.29] (HELO yw-out-2324.google.com) (74.125.46.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Jul 2008 17:59:46 +0000
Received: by yw-out-2324.google.com with SMTP id 3so193663ywj.5
        for <java-user@lucene.apache.org>; Wed, 02 Jul 2008 11:00:00 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type;
        bh=p6iZnpDX/VYVSO3RVd+fi2nVMQCToxjcj5uyTUHbt0Q=;
        b=HqppwKhDfTTGClr3x1NXVPRn4nDlBl5xcPp0lCMGJL8SNgMgyrAdH0dtwatd4oqJuM
         zJpUeGhcK9wWDeR8JZBWcCRf8fhjxg/oL04QDbN6NII4vHdQoGfRl71knaDG19NAhI5y
         d4/2Ztt80HRDJMz3OedhxVj3Nugm7GltrRikg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=OJK23I9wgGIFDre38hwfmJfgUhuVJAowvTG2edySz082piHuO/yjQXrFwZil/lOefK
         jH5CELvMeiFTT1ihB7PMIwrRR5QepABDh2UfghVKAmjxQw2Pixp6VViucda1U6uAwyF5
         5GxTj7Yo/e2lOnzkMH3OmaTAKr0dpDvF6QiB0=
Received: by 10.114.151.13 with SMTP id y13mr7279555wad.134.1215021599564;
        Wed, 02 Jul 2008 10:59:59 -0700 (PDT)
Received: by 10.114.171.7 with HTTP; Wed, 2 Jul 2008 10:59:59 -0700 (PDT)
Message-ID: <16f8407d0807021059o4acb7cedg1277b7676aa2f53a@mail.gmail.com>
Date: Wed, 2 Jul 2008 10:59:59 -0700
From: "David Lee" <davidtlee@gmail.com>
To: java-user@lucene.apache.org
Subject: Do Lucene Deletes delete the physical file? If yes, is there a way not to?
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_3043_309692.1215021599569"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_3043_309692.1215021599569
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Is it possible to delete a document from the index, but not the physical
file. And also I'm wondering what the functions are that will alter the
physical files being indexed.

On a side note: what is the best way to look up information like this so I
don't have to bug the java-user mailing list for simple questions like this?
I tried googling, but didn't seem to get the information I wanted. Thanks!

David Lee

------=_Part_3043_309692.1215021599569--

From java-user-return-34757-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 02 20:34:37 2008
Return-Path: <java-user-return-34757-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 15244 invoked from network); 2 Jul 2008 20:34:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Jul 2008 20:34:37 -0000
Received: (qmail 13938 invoked by uid 500); 2 Jul 2008 20:34:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13905 invoked by uid 500); 2 Jul 2008 20:34:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13894 invoked by uid 99); 2 Jul 2008 20:34:32 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Jul 2008 13:34:32 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: 194.109.24.27 is neither permitted nor denied by domain of karl.wettin@gmail.com)
Received: from [194.109.24.27] (HELO smtp-vbr7.xs4all.nl) (194.109.24.27)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Jul 2008 20:33:40 +0000
Received: from [10.0.2.2] (memnon.xs4all.nl [82.93.70.124])
	by smtp-vbr7.xs4all.nl (8.13.8/8.13.8) with ESMTP id m62KXL33059193
	for <java-user@lucene.apache.org>; Wed, 2 Jul 2008 22:33:29 +0200 (CEST)
	(envelope-from karl.wettin@gmail.com)
Message-Id: <A5E9550D-6B70-46D1-BC7F-B3D72E3B4861@gmail.com>
From: Karl Wettin <karl.wettin@gmail.com>
To: java-user@lucene.apache.org
In-Reply-To: <16f8407d0807021059o4acb7cedg1277b7676aa2f53a@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v924)
Subject: Re: Do Lucene Deletes delete the physical file? If yes, is there a way not to?
Date: Wed, 2 Jul 2008 22:33:20 +0200
References: <16f8407d0807021059o4acb7cedg1277b7676aa2f53a@mail.gmail.com>
X-Mailer: Apple Mail (2.924)
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org


2 jul 2008 kl. 19.59 skrev David Lee:

> Is it possible to delete a document from the index, but not the  
> physical
> file. And also I'm wondering what the functions are that will alter  
> the
> physical files being indexed.

Documents are not deleted until you optimize the index. Perhaps they  
are deleted at merge time too? Until that point documents deleted are  
marked in a seperate file.

Is there a specific problem behind your question? There might be  
alternative solutions.

> On a side note: what is the best way to look up information like  
> this so I
> don't have to bug the java-user mailing list for simple questions  
> like this?
> I tried googling, but didn't seem to get the information I wanted.  
> Thanks!

Generally I'd suggest getting the source code and follow it to see  
what happends. If you need documentation then there are some links here:

http://lucene.apache.org/java/2_3_2/


        karl



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34758-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 02 21:26:11 2008
Return-Path: <java-user-return-34758-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36776 invoked from network); 2 Jul 2008 21:26:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Jul 2008 21:26:11 -0000
Received: (qmail 76962 invoked by uid 500); 2 Jul 2008 21:26:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76928 invoked by uid 500); 2 Jul 2008 21:26:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76917 invoked by uid 99); 2 Jul 2008 21:26:05 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Jul 2008 14:26:05 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of patrek@gmail.com designates 64.233.184.224 as permitted sender)
Received: from [64.233.184.224] (HELO wr-out-0506.google.com) (64.233.184.224)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Jul 2008 21:25:14 +0000
Received: by wr-out-0506.google.com with SMTP id c30so497873wra.21
        for <java-user@lucene.apache.org>; Wed, 02 Jul 2008 14:25:28 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from
         :user-agent:mime-version:to:subject:content-type
         :content-transfer-encoding;
        bh=9SEHsZmtEbuDlOXyQXac3cx6HYTye1YJ5I/P2iT6kt8=;
        b=geHVMYJV2XV+5k8fiphPKnioSg3zXN+Ch2i4xxAfIpf2HXgPts8FzfDblyBiQi+20O
         ENw7xerfL0GssGk16jJi1mZ7yvONO+wl/HIcFK277lrVJ5fn5QFQPurfDlYMkC+PVakl
         k4RRKsXd31MdjNAkGJPLjwPnVa0CkzWyhNY8I=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject
         :content-type:content-transfer-encoding;
        b=bDDSuV/feO0vvMnJM3RzzblX97VrgKVla8ZByTcN510DCj3EGoMkArsdONdhOzMjgi
         EjaYvvr8ftST+ixsbateCWYTJbSFXwURBEKJn8ZF4iAc4bSDlqJDq15vfsNQ7B7r/ynO
         jfdQCPQ60wuBYJwbztrTHRY6+3oZqkqBxLSfM=
Received: by 10.90.71.15 with SMTP id t15mr9546364aga.109.1215033928548;
        Wed, 02 Jul 2008 14:25:28 -0700 (PDT)
Received: from ?192.168.1.61? ( [132.210.142.98])
        by mx.google.com with ESMTPS id 34sm4811681yxm.0.2008.07.02.14.25.26
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Wed, 02 Jul 2008 14:25:27 -0700 (PDT)
Message-ID: <486BF243.1020000@gmail.com>
Date: Wed, 02 Jul 2008 17:25:23 -0400
From: Patrick <patrek@gmail.com>
User-Agent: Thunderbird 2.0.0.14 (Windows/20080421)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Match all documents with non empty field
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

Can't seem to wrap my head around how to go about it.

I want to retrieve all documents where a certain field in not empty.

What would be the best way to do it?

Should I search with a MatchAllDocQuery and a Filter?

Should I go through all terms in the field and create a TermQuery with it?

Many thanks.

Patrick

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34759-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 02 21:50:20 2008
Return-Path: <java-user-return-34759-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 50786 invoked from network); 2 Jul 2008 21:50:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Jul 2008 21:50:20 -0000
Received: (qmail 1527 invoked by uid 500); 2 Jul 2008 21:50:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 1490 invoked by uid 500); 2 Jul 2008 21:50:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 1479 invoked by uid 99); 2 Jul 2008 21:50:14 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Jul 2008 14:50:14 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 74.125.46.30 as permitted sender)
Received: from [74.125.46.30] (HELO yw-out-2324.google.com) (74.125.46.30)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Jul 2008 21:49:24 +0000
Received: by yw-out-2324.google.com with SMTP id 3so220313ywj.5
        for <java-user@lucene.apache.org>; Wed, 02 Jul 2008 14:47:29 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=avPyuKtYTn4r6aV9OItCzs6ZlUlvu9xBKXN/lGyll40=;
        b=iPtvdWuMMUl8wwKr0BmcI6hiPOTH8zDYE3GX5+UlBYMyhib1CZhWTs8SPXT0+FocTd
         6KYxgWFiDOJewaZREoDy5wXhefZEpXC0BhuHuio0z8IpiGMin15CT+EH2vKm0ohopMpM
         MrisEOYTSlb5poWu3+TCy2Ve6EqzVxCpe5p4w=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=XE1JzwEm8izcmohQM8yshSDst55gEsqueA3bB2cwoGSHRz2bA27hJE/ZB3wd7xWUpK
         zQXyd70brrc9IMbNSSVjIu8nj9P80JhplkISj7ohUrU1cjXkkTyr77FS6wWViSDKJebZ
         b9NPD5k+Ggc/PjefI6w0BWxP4AhRWQ+27znc4=
Received: by 10.150.84.17 with SMTP id h17mr14025593ybb.201.1215035249071;
        Wed, 02 Jul 2008 14:47:29 -0700 (PDT)
Received: by 10.150.201.6 with HTTP; Wed, 2 Jul 2008 14:47:29 -0700 (PDT)
Message-ID: <359a92830807021447ndd92914o34d08f2c04f6c75@mail.gmail.com>
Date: Wed, 2 Jul 2008 17:47:29 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Match all documents with non empty field
In-Reply-To: <486BF243.1020000@gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_9124_9697348.1215035249047"
References: <486BF243.1020000@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_9124_9697348.1215035249047
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

You can certainly use a filter and MatchAllDocs. You can also
index a special value for the field in question (nothere) and
combine MatchAllDocs with a NOT field:nothere or some such.

Best
Erick

On Wed, Jul 2, 2008 at 5:25 PM, Patrick <patrek@gmail.com> wrote:

> Hi,
>
> Can't seem to wrap my head around how to go about it.
>
> I want to retrieve all documents where a certain field in not empty.
>
> What would be the best way to do it?
>
> Should I search with a MatchAllDocQuery and a Filter?
>
> Should I go through all terms in the field and create a TermQuery with it?
>
> Many thanks.
>
> Patrick
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_9124_9697348.1215035249047--

From java-user-return-34760-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 03 02:48:03 2008
Return-Path: <java-user-return-34760-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5394 invoked from network); 3 Jul 2008 02:48:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Jul 2008 02:48:03 -0000
Received: (qmail 8447 invoked by uid 500); 3 Jul 2008 02:47:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8417 invoked by uid 500); 3 Jul 2008 02:47:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8404 invoked by uid 99); 3 Jul 2008 02:47:58 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Jul 2008 19:47:58 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [203.217.22.128] (HELO web1.nuix.com.au) (203.217.22.128)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Jul 2008 02:47:07 +0000
Received: from [192.168.222.60] (unknown [192.168.222.60])
	by web1.nuix.com.au (Postfix) with ESMTP id C92C84ED88E
	for <java-user@lucene.apache.org>; Thu,  3 Jul 2008 12:46:53 +1000 (EST)
Message-ID: <486C3DC4.5000605@nuix.com>
Date: Thu, 03 Jul 2008 12:47:32 +1000
From: Daniel Noll <daniel@nuix.com>
Organization: NUIX Pty Limited
User-Agent: Thunderbird 2.0.0.14 (Windows/20080421)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Match all documents with non empty field
References: <486BF243.1020000@gmail.com>
In-Reply-To: <486BF243.1020000@gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Patrick wrote:
> Hi,
> 
> Can't seem to wrap my head around how to go about it.
> 
> I want to retrieve all documents where a certain field in not empty.
> 
> What would be the best way to do it?

The most trivial way would be to use a PrefixQuery with an empty string.

It won't be efficient unless you wrap it in a QueryFilter to cache the 
result, but I found it to be "fast enough" even for relatively large 
document sets.

Daniel


-- 
Daniel Noll

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34761-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 03 03:01:31 2008
Return-Path: <java-user-return-34761-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10567 invoked from network); 3 Jul 2008 03:01:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Jul 2008 03:01:29 -0000
Received: (qmail 17011 invoked by uid 500); 3 Jul 2008 03:01:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16030 invoked by uid 500); 3 Jul 2008 03:01:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16019 invoked by uid 99); 3 Jul 2008 03:01:24 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Jul 2008 20:01:24 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of markrmiller@gmail.com designates 74.125.46.30 as permitted sender)
Received: from [74.125.46.30] (HELO yw-out-2324.google.com) (74.125.46.30)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Jul 2008 03:00:32 +0000
Received: by yw-out-2324.google.com with SMTP id 3so270236ywj.5
        for <java-user@lucene.apache.org>; Wed, 02 Jul 2008 20:00:50 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from
         :user-agent:mime-version:to:subject:references:in-reply-to
         :content-type:content-transfer-encoding;
        bh=MoaA1Uz7zW8ACX8tteKlCcWw4+r1w9kfZAsPoD6M8Kw=;
        b=NC9+NwE0i1eTsfHN6+Q79oex8FAIVeAo7tEBoThc8Tm2GlRLCY9lsG89NRQBMnf8qN
         DNUALqGnSCMnuNX5xLAqBmuK+AhgU9OZw0raYJI7KzDOVwUmD6GdqxHbxZpG4S0tX1aL
         rfOD+a1D9TWiWGr7VzxDRa909iarwMgYpbnb0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references
         :in-reply-to:content-type:content-transfer-encoding;
        b=dpFVwBzpblfDHo4mrBJYt35Dw4J+PxrGbHMTYkfCmjIfTYg/MfPMdVQqYmp+IhRA8k
         ShkDzV18G1LtKAbQg0tAwvA0CkFpmwrZLCf/UkJKFRaCk6lfgXh6eBXlYgMoZTYuWSCe
         vQ7vyyfgfoqRHrVs4InUs0MqxozQ5fw+9GqSY=
Received: by 10.151.141.8 with SMTP id t8mr14451033ybn.192.1215054050682;
        Wed, 02 Jul 2008 20:00:50 -0700 (PDT)
Received: from ?192.168.1.106? ( [69.124.234.149])
        by mx.google.com with ESMTPS id 6sm5273302ywp.3.2008.07.02.20.00.49
        (version=SSLv3 cipher=RC4-MD5);
        Wed, 02 Jul 2008 20:00:49 -0700 (PDT)
Message-ID: <486C40E1.5050003@gmail.com>
Date: Wed, 02 Jul 2008 23:00:49 -0400
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.14 (X11/20080505)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Match all documents with non empty field
References: <486BF243.1020000@gmail.com> <486C3DC4.5000605@nuix.com>
In-Reply-To: <486C3DC4.5000605@nuix.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Daniel Noll wrote:
> Patrick wrote:
>> Hi,
>>
>> Can't seem to wrap my head around how to go about it.
>>
>> I want to retrieve all documents where a certain field in not empty.
>>
>> What would be the best way to do it?
>
> The most trivial way would be to use a PrefixQuery with an empty string.
>
> It won't be efficient unless you wrap it in a QueryFilter to cache the 
> result, but I found it to be "fast enough" even for relatively large 
> document sets.
>
> Daniel
>
>
Also, search the archive...I think there is something you can do like 
*:* NOT [* TO *]

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34762-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 03 04:42:31 2008
Return-Path: <java-user-return-34762-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36438 invoked from network); 3 Jul 2008 04:42:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Jul 2008 04:42:31 -0000
Received: (qmail 80337 invoked by uid 500); 3 Jul 2008 04:42:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80313 invoked by uid 500); 3 Jul 2008 04:42:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80302 invoked by uid 99); 3 Jul 2008 04:42:11 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Jul 2008 21:42:11 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Jul 2008 04:41:18 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KEGdV-0006q7-T8
	for java-user@lucene.apache.org; Wed, 02 Jul 2008 21:41:37 -0700
Message-ID: <18251744.post@talk.nabble.com>
Date: Wed, 2 Jul 2008 21:41:37 -0700 (PDT)
From: yugana <yugandhar.adem@wipro.com>
To: java-user@lucene.apache.org
Subject: Lucene Error : java.io.FileNotFoundException
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: yugandhar.adem@wipro.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hi,

I am indexing content and searching using lucene. It is working fine when I
use the simple servlet and jsp mechanism. I am able to search on the indexed
content. I tried to implement the same using JBoss Portal. When I try to run
the search, I get the below error: Please help me to resolve the error. I am
using Lucene 2.3.2

09:43:42,671 ERROR [STDERR] java.io.FileNotFoundException:
D:\indexDir\segments (The system cannot find the file specified)
09:43:42,671 ERROR [STDERR]     at java.io.RandomAccessFile.open(Native
Method)
09:43:42,671 ERROR [STDERR]     at
java.io.RandomAccessFile.<init>(RandomAccessFile.java:212)
09:43:42,671 ERROR [STDERR]     at
org.apache.lucene.store.FSInputStream$Descriptor.<init>(FSDirectory.java:376)
09:43:42,671 ERROR [STDERR]     at
org.apache.lucene.store.FSInputStream.<init>(FSDirectory.java:405)
09:43:42,671 ERROR [STDERR]     at
org.apache.lucene.store.FSDirectory.openFile(FSDirectory.java:268)
09:43:42,671 ERROR [STDERR]     at
org.apache.lucene.index.SegmentInfos.read(SegmentInfos.java:40)
09:43:42,671 ERROR [STDERR]     at
org.apache.lucene.index.IndexReader$1.doBody(IndexReader.java:116)
09:43:42,671 ERROR [STDERR]     at
org.apache.lucene.store.Lock$With.run(Lock.java:109)
09:43:42,671 ERROR [STDERR]     at
org.apache.lucene.index.IndexReader.open(IndexReader.java:111)
09:43:42,671 ERROR [STDERR]     at
org.apache.lucene.index.IndexReader.open(IndexReader.java:95)
09:43:42,671 ERROR [STDERR]     at
org.apache.lucene.search.IndexSearcher.<init>(IndexSearcher.java:38)
09:43:42,671 ERROR [STDERR]     at
com.xerox.mywebboard.search.SearchManager.search(SearchManager.java:53)
09:43:42,671 ERROR [STDERR]     at
com.xerox.mywebboard.xeroxArticleSearchPortlet.search(xeroxArticleSearchPortlet.java:45)
09:43:42,671 ERROR [STDERR]     at
com.xerox.mywebboard.xeroxArticleSearchPortlet.processAction(xeroxArticleSearchPortlet.java:27)
09:43:42,671 ERROR [STDERR]     at
org.jboss.portal.portlet.impl.jsr168.PortletContainerImpl.invokeAction(PortletContainerImpl.java
09:43:42,687 ERROR [STDERR]     at
org.jboss.portal.portlet.impl.jsr168.PortletContainerImpl.dispatch(PortletContainerImpl.java:401
09:43:42,687 ERROR [STDERR]     at
org.jboss.portal.portlet.container.PortletContainerInvoker$1.invoke(PortletContainerInvoker.java
09:43:42,687 ERROR [STDERR]     at
org.jboss.portal.common.invocation.Invocation.invokeNext(Invocation.java:131)
09:43:42,687 ERROR [STDERR]     at
org.jboss.portal.core.aspects.portlet.TransactionInterceptor.org$jboss$portal$core$aspects$portl
09:43:42,687 ERROR [STDERR]     at
org.jboss.portal.core.aspects.portlet.TransactionInterceptor$invokeNotSupported_N454727078796479
09:43:42,687 ERROR [STDERR]     at
org.jboss.aspects.tx.TxPolicy.invokeInNoTx(TxPolicy.java:66)
09:43:42,687 ERROR [STDERR]     at
org.jboss.aspects.tx.TxInterceptor$NotSupported.invoke(TxInterceptor.java:112)
09:43:42,687 ERROR [STDERR]     at
org.jboss.portal.core.aspects.portlet.TransactionInterceptor$invokeNotSupported_N454727078796479
09:43:42,687 ERROR [STDERR]     at
org.jboss.aspects.tx.TxPolicy.invokeInNoTx(TxPolicy.java:66)
09:43:42,687 ERROR [STDERR]     at
org.jboss.aspects.tx.TxInterceptor$NotSupported.invoke(TxInterceptor.java:102)
09:43:42,687 ERROR [STDERR]     at
org.jboss.portal.core.aspects.portlet.TransactionInterceptor$invokeNotSupported_N454727078796479
09:43:42,687 ERROR [STDERR]     at
org.jboss.portal.core.aspects.portlet.TransactionInterceptor.invokeNotSupported(TransactionInter
09:43:42,687 ERROR [STDERR]     at
org.jboss.portal.core.aspects.portlet.TransactionInterceptor.invoke(TransactionInterceptor.java:
09:43:42,687 ERROR [STDERR]     at
org.jboss.portal.portlet.invocation.PortletInterceptor.invoke(PortletInterceptor.java:38)
09:43:42,687 ERROR [STDERR]     at
org.jboss.portal.common.invocation.Invocation.invokeNext(Invocation.java:115)
09:43:42,687 ERROR [STDERR]     at
org.jboss.portal.core.aspects.portlet.HeaderInterceptor.invoke(HeaderInterceptor.java:50)
09:43:42,687 ERROR [STDERR]     at
org.jboss.portal.portlet.invocation.PortletInterceptor.invoke(PortletInterceptor.java:38)
09:43:42,687 ERROR [STDERR]     at
org.jboss.portal.common.invocation.Invocation.invokeNext(Invocation.java:115)
09:43:42,687 ERROR [STDERR]     at
org.jboss.portal.portlet.aspects.portlet.ProducerCacheInterceptor.invoke(ProducerCacheIntercepto
09:43:42,687 ERROR [STDERR]     at
org.jboss.portal.portlet.invocation.PortletInterceptor.invoke(PortletInterceptor.java:38)
09:43:42,687 ERROR [STDERR]     at
org.jboss.portal.common.invocation.Invocation.invokeNext(Invocation.java:115)
09:43:42,687 ERROR [STDERR]     at
org.jboss.portal.core.aspects.portlet.AjaxInterceptor.invoke(AjaxInterceptor.java:51)
09:43:42,687 ERROR [STDERR]     at
org.jboss.portal.portlet.invocation.PortletInterceptor.invoke(PortletInterceptor.java:38)
09:43:42,687 ERROR [STDERR]     at
org.jboss.portal.common.invocation.Invocation.invokeNext(Invocation.java:115)
09:43:42,687 ERROR [STDERR]     at
org.jboss.portal.portlet.aspects.portlet.ModesInterceptor.invoke(ModesInterceptor.java:62)
09:43:42,687 ERROR [STDERR]     at
org.jboss.portal.portlet.invocation.PortletInterceptor.invoke(PortletInterceptor.java:38)
09:43:42,687 ERROR [STDERR]     at
org.jboss.portal.common.invocation.Invocation.invokeNext(Invocation.java:115)
09:43:42,687 ERROR [STDERR]     at
org.jboss.portal.portlet.bridge.BridgeInterceptor.invoke(BridgeInterceptor.java:47)
09:43:42,687 ERROR [STDERR]     at
org.jboss.portal.portlet.invocation.PortletInterceptor.invoke(PortletInterceptor.java:38)
09:43:42,687 ERROR [STDERR]     at
org.jboss.portal.common.invocation.Invocation.invokeNext(Invocation.java:115)

-- 
View this message in context: http://www.nabble.com/Lucene-Error-%3A-java.io.FileNotFoundException-tp18251744p18251744.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34763-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 03 05:34:22 2008
Return-Path: <java-user-return-34763-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 49844 invoked from network); 3 Jul 2008 05:34:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Jul 2008 05:34:20 -0000
Received: (qmail 13989 invoked by uid 500); 3 Jul 2008 05:34:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13408 invoked by uid 500); 3 Jul 2008 05:34:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13396 invoked by uid 99); 3 Jul 2008 05:34:15 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Jul 2008 22:34:15 -0700
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of pvsaikrishna@gmail.com designates 209.85.198.238 as permitted sender)
Received: from [209.85.198.238] (HELO rv-out-0506.google.com) (209.85.198.238)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Jul 2008 05:33:24 +0000
Received: by rv-out-0506.google.com with SMTP id f6so813069rvb.5
        for <java-user@lucene.apache.org>; Wed, 02 Jul 2008 22:33:28 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=PY2a0Zm67lq+gntY5G/27G7OcAisCC2bEdmCduildng=;
        b=onXrqDMIFpnyDrqAGnP4NJE9HsrIq13wB4S89PXT0RntFQXNmCYBhzl8QXHaEoMAKh
         amCBSpMvWx6ZxS+Uag5tWQnPcGptgapIlkkG7ifYXn/NxW80JBQGd0/o7ZMN+s/XzzEo
         aIZPtA8afU4hyO40PTZNrYhhouMGuLrlQQawU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=rSSv4Ule+O2f9IHpZI4msqI5c0lC08rlh7H0I4O8WoQfAFBqcPuFHsO23sEsG5SEfq
         m8+hLwdnmmpoj25s5IH4FX75y3eu1n9rXEj8HXb5JQPykXXXdWFbecRoisYZQsDM0HZ6
         bCE6FCfLF0BCJNl5XNKgpPh9779kdQIWIcxSA=
Received: by 10.141.71.8 with SMTP id y8mr4887638rvk.32.1215063207419;
        Wed, 02 Jul 2008 22:33:27 -0700 (PDT)
Received: by 10.140.191.16 with HTTP; Wed, 2 Jul 2008 22:33:27 -0700 (PDT)
Message-ID: <171dbfa60807022233x2bec5404v4f446e609a5b3b8a@mail.gmail.com>
Date: Thu, 3 Jul 2008 11:03:27 +0530
From: "saikrishna venkata pendyala" <pvsaikrishna@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene Error : java.io.FileNotFoundException
In-Reply-To: <18251744.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_7630_18752076.1215063207164"
References: <18251744.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_7630_18752076.1215063207164
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Please check the path set for lucene-index in configuration file.

On Thu, Jul 3, 2008 at 10:11 AM, yugana <yugandhar.adem@wipro.com> wrote:

>
> Hi,
>
> I am indexing content and searching using lucene. It is working fine when I
> use the simple servlet and jsp mechanism. I am able to search on the
> indexed
> content. I tried to implement the same using JBoss Portal. When I try to
> run
> the search, I get the below error: Please help me to resolve the error. I
> am
> using Lucene 2.3.2
>
> 09:43:42,671 ERROR [STDERR] java.io.FileNotFoundException:
> D:\indexDir\segments (The system cannot find the file specified)
> 09:43:42,671 ERROR [STDERR]     at java.io.RandomAccessFile.open(Native
> Method)
> 09:43:42,671 ERROR [STDERR]     at
> java.io.RandomAccessFile.<init>(RandomAccessFile.java:212)
> 09:43:42,671 ERROR [STDERR]     at
>
> org.apache.lucene.store.FSInputStream$Descriptor.<init>(FSDirectory.java:376)
> 09:43:42,671 ERROR [STDERR]     at
> org.apache.lucene.store.FSInputStream.<init>(FSDirectory.java:405)
> 09:43:42,671 ERROR [STDERR]     at
> org.apache.lucene.store.FSDirectory.openFile(FSDirectory.java:268)
> 09:43:42,671 ERROR [STDERR]     at
> org.apache.lucene.index.SegmentInfos.read(SegmentInfos.java:40)
> 09:43:42,671 ERROR [STDERR]     at
> org.apache.lucene.index.IndexReader$1.doBody(IndexReader.java:116)
> 09:43:42,671 ERROR [STDERR]     at
> org.apache.lucene.store.Lock$With.run(Lock.java:109)
> 09:43:42,671 ERROR [STDERR]     at
> org.apache.lucene.index.IndexReader.open(IndexReader.java:111)
> 09:43:42,671 ERROR [STDERR]     at
> org.apache.lucene.index.IndexReader.open(IndexReader.java:95)
> 09:43:42,671 ERROR [STDERR]     at
> org.apache.lucene.search.IndexSearcher.<init>(IndexSearcher.java:38)
> 09:43:42,671 ERROR [STDERR]     at
> com.xerox.mywebboard.search.SearchManager.search(SearchManager.java:53)
> 09:43:42,671 ERROR [STDERR]     at
>
> com.xerox.mywebboard.xeroxArticleSearchPortlet.search(xeroxArticleSearchPortlet.java:45)
> 09:43:42,671 ERROR [STDERR]     at
>
> com.xerox.mywebboard.xeroxArticleSearchPortlet.processAction(xeroxArticleSearchPortlet.java:27)
> 09:43:42,671 ERROR [STDERR]     at
>
> org.jboss.portal.portlet.impl.jsr168.PortletContainerImpl.invokeAction(PortletContainerImpl.java
> 09:43:42,687 ERROR [STDERR]     at
>
> org.jboss.portal.portlet.impl.jsr168.PortletContainerImpl.dispatch(PortletContainerImpl.java:401
> 09:43:42,687 ERROR [STDERR]     at
>
> org.jboss.portal.portlet.container.PortletContainerInvoker$1.invoke(PortletContainerInvoker.java
> 09:43:42,687 ERROR [STDERR]     at
>
> org.jboss.portal.common.invocation.Invocation.invokeNext(Invocation.java:131)
> 09:43:42,687 ERROR [STDERR]     at
> org.jboss.portal.core.aspects.portlet.TransactionInterceptor.org
> $jboss$portal$core$aspects$portl
> 09:43:42,687 ERROR [STDERR]     at
>
> org.jboss.portal.core.aspects.portlet.TransactionInterceptor$invokeNotSupported_N454727078796479
> 09:43:42,687 ERROR [STDERR]     at
> org.jboss.aspects.tx.TxPolicy.invokeInNoTx(TxPolicy.java:66)
> 09:43:42,687 ERROR [STDERR]     at
>
> org.jboss.aspects.tx.TxInterceptor$NotSupported.invoke(TxInterceptor.java:112)
> 09:43:42,687 ERROR [STDERR]     at
>
> org.jboss.portal.core.aspects.portlet.TransactionInterceptor$invokeNotSupported_N454727078796479
> 09:43:42,687 ERROR [STDERR]     at
> org.jboss.aspects.tx.TxPolicy.invokeInNoTx(TxPolicy.java:66)
> 09:43:42,687 ERROR [STDERR]     at
>
> org.jboss.aspects.tx.TxInterceptor$NotSupported.invoke(TxInterceptor.java:102)
> 09:43:42,687 ERROR [STDERR]     at
>
> org.jboss.portal.core.aspects.portlet.TransactionInterceptor$invokeNotSupported_N454727078796479
> 09:43:42,687 ERROR [STDERR]     at
>
> org.jboss.portal.core.aspects.portlet.TransactionInterceptor.invokeNotSupported(TransactionInter
> 09:43:42,687 ERROR [STDERR]     at
>
> org.jboss.portal.core.aspects.portlet.TransactionInterceptor.invoke(TransactionInterceptor.java:
> 09:43:42,687 ERROR [STDERR]     at
>
> org.jboss.portal.portlet.invocation.PortletInterceptor.invoke(PortletInterceptor.java:38)
> 09:43:42,687 ERROR [STDERR]     at
>
> org.jboss.portal.common.invocation.Invocation.invokeNext(Invocation.java:115)
> 09:43:42,687 ERROR [STDERR]     at
>
> org.jboss.portal.core.aspects.portlet.HeaderInterceptor.invoke(HeaderInterceptor.java:50)
> 09:43:42,687 ERROR [STDERR]     at
>
> org.jboss.portal.portlet.invocation.PortletInterceptor.invoke(PortletInterceptor.java:38)
> 09:43:42,687 ERROR [STDERR]     at
>
> org.jboss.portal.common.invocation.Invocation.invokeNext(Invocation.java:115)
> 09:43:42,687 ERROR [STDERR]     at
>
> org.jboss.portal.portlet.aspects.portlet.ProducerCacheInterceptor.invoke(ProducerCacheIntercepto
> 09:43:42,687 ERROR [STDERR]     at
>
> org.jboss.portal.portlet.invocation.PortletInterceptor.invoke(PortletInterceptor.java:38)
> 09:43:42,687 ERROR [STDERR]     at
>
> org.jboss.portal.common.invocation.Invocation.invokeNext(Invocation.java:115)
> 09:43:42,687 ERROR [STDERR]     at
>
> org.jboss.portal.core.aspects.portlet.AjaxInterceptor.invoke(AjaxInterceptor.java:51)
> 09:43:42,687 ERROR [STDERR]     at
>
> org.jboss.portal.portlet.invocation.PortletInterceptor.invoke(PortletInterceptor.java:38)
> 09:43:42,687 ERROR [STDERR]     at
>
> org.jboss.portal.common.invocation.Invocation.invokeNext(Invocation.java:115)
> 09:43:42,687 ERROR [STDERR]     at
>
> org.jboss.portal.portlet.aspects.portlet.ModesInterceptor.invoke(ModesInterceptor.java:62)
> 09:43:42,687 ERROR [STDERR]     at
>
> org.jboss.portal.portlet.invocation.PortletInterceptor.invoke(PortletInterceptor.java:38)
> 09:43:42,687 ERROR [STDERR]     at
>
> org.jboss.portal.common.invocation.Invocation.invokeNext(Invocation.java:115)
> 09:43:42,687 ERROR [STDERR]     at
>
> org.jboss.portal.portlet.bridge.BridgeInterceptor.invoke(BridgeInterceptor.java:47)
> 09:43:42,687 ERROR [STDERR]     at
>
> org.jboss.portal.portlet.invocation.PortletInterceptor.invoke(PortletInterceptor.java:38)
> 09:43:42,687 ERROR [STDERR]     at
>
> org.jboss.portal.common.invocation.Invocation.invokeNext(Invocation.java:115)
>
> --
> View this message in context:
> http://www.nabble.com/Lucene-Error-%3A-java.io.FileNotFoundException-tp18251744p18251744.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_7630_18752076.1215063207164--

From java-user-return-34764-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 03 05:51:14 2008
Return-Path: <java-user-return-34764-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53664 invoked from network); 3 Jul 2008 05:51:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Jul 2008 05:51:14 -0000
Received: (qmail 30976 invoked by uid 500); 3 Jul 2008 05:51:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30944 invoked by uid 500); 3 Jul 2008 05:51:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30933 invoked by uid 99); 3 Jul 2008 05:51:08 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Jul 2008 22:51:08 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Jul 2008 05:50:17 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KEHiH-0000MU-JY
	for java-user@lucene.apache.org; Wed, 02 Jul 2008 22:50:37 -0700
Message-ID: <18252269.post@talk.nabble.com>
Date: Wed, 2 Jul 2008 22:50:37 -0700 (PDT)
From: yugana <yugandhar.adem@wipro.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene Error : java.io.FileNotFoundException
In-Reply-To: <171dbfa60807022233x2bec5404v4f446e609a5b3b8a@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: yugandhar.adem@wipro.com
References: <18251744.post@talk.nabble.com> <171dbfa60807022233x2bec5404v4f446e609a5b3b8a@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


I haven't set the path in the configuration file. I have hardcoded the
locations.

//the directory that stores html files
    private final String dataDir  = "d:\\dataDir";
    
    //the directory that is used to store lucene index
    private final String indexDir = "d:\\indexDir";


saikrishna venkata pendyala wrote:
> 
> Please check the path set for lucene-index in configuration file.
> 
> On Thu, Jul 3, 2008 at 10:11 AM, yugana <yugandhar.adem@wipro.com> wrote:
> 
>>
>> Hi,
>>
>> I am indexing content and searching using lucene. It is working fine when
>> I
>> use the simple servlet and jsp mechanism. I am able to search on the
>> indexed
>> content. I tried to implement the same using JBoss Portal. When I try to
>> run
>> the search, I get the below error: Please help me to resolve the error. I
>> am
>> using Lucene 2.3.2
>>
>> 09:43:42,671 ERROR [STDERR] java.io.FileNotFoundException:
>> D:\indexDir\segments (The system cannot find the file specified)
>> 09:43:42,671 ERROR [STDERR]     at java.io.RandomAccessFile.open(Native
>> Method)
>> 09:43:42,671 ERROR [STDERR]     at
>> java.io.RandomAccessFile.<init>(RandomAccessFile.java:212)
>> 09:43:42,671 ERROR [STDERR]     at
>>
>> org.apache.lucene.store.FSInputStream$Descriptor.<init>(FSDirectory.java:376)
>> 09:43:42,671 ERROR [STDERR]     at
>> org.apache.lucene.store.FSInputStream.<init>(FSDirectory.java:405)
>> 09:43:42,671 ERROR [STDERR]     at
>> org.apache.lucene.store.FSDirectory.openFile(FSDirectory.java:268)
>> 09:43:42,671 ERROR [STDERR]     at
>> org.apache.lucene.index.SegmentInfos.read(SegmentInfos.java:40)
>> 09:43:42,671 ERROR [STDERR]     at
>> org.apache.lucene.index.IndexReader$1.doBody(IndexReader.java:116)
>> 09:43:42,671 ERROR [STDERR]     at
>> org.apache.lucene.store.Lock$With.run(Lock.java:109)
>> 09:43:42,671 ERROR [STDERR]     at
>> org.apache.lucene.index.IndexReader.open(IndexReader.java:111)
>> 09:43:42,671 ERROR [STDERR]     at
>> org.apache.lucene.index.IndexReader.open(IndexReader.java:95)
>> 09:43:42,671 ERROR [STDERR]     at
>> org.apache.lucene.search.IndexSearcher.<init>(IndexSearcher.java:38)
>> 09:43:42,671 ERROR [STDERR]     at
>> com.xerox.mywebboard.search.SearchManager.search(SearchManager.java:53)
>> 09:43:42,671 ERROR [STDERR]     at
>>
>> com.xerox.mywebboard.xeroxArticleSearchPortlet.search(xeroxArticleSearchPortlet.java:45)
>> 09:43:42,671 ERROR [STDERR]     at
>>
>> com.xerox.mywebboard.xeroxArticleSearchPortlet.processAction(xeroxArticleSearchPortlet.java:27)
>> 09:43:42,671 ERROR [STDERR]     at
>>
>> org.jboss.portal.portlet.impl.jsr168.PortletContainerImpl.invokeAction(PortletContainerImpl.java
>> 09:43:42,687 ERROR [STDERR]     at
>>
>> org.jboss.portal.portlet.impl.jsr168.PortletContainerImpl.dispatch(PortletContainerImpl.java:401
>> 09:43:42,687 ERROR [STDERR]     at
>>
>> org.jboss.portal.portlet.container.PortletContainerInvoker$1.invoke(PortletContainerInvoker.java
>> 09:43:42,687 ERROR [STDERR]     at
>>
>> org.jboss.portal.common.invocation.Invocation.invokeNext(Invocation.java:131)
>> 09:43:42,687 ERROR [STDERR]     at
>> org.jboss.portal.core.aspects.portlet.TransactionInterceptor.org
>> $jboss$portal$core$aspects$portl
>> 09:43:42,687 ERROR [STDERR]     at
>>
>> org.jboss.portal.core.aspects.portlet.TransactionInterceptor$invokeNotSupported_N454727078796479
>> 09:43:42,687 ERROR [STDERR]     at
>> org.jboss.aspects.tx.TxPolicy.invokeInNoTx(TxPolicy.java:66)
>> 09:43:42,687 ERROR [STDERR]     at
>>
>> org.jboss.aspects.tx.TxInterceptor$NotSupported.invoke(TxInterceptor.java:112)
>> 09:43:42,687 ERROR [STDERR]     at
>>
>> org.jboss.portal.core.aspects.portlet.TransactionInterceptor$invokeNotSupported_N454727078796479
>> 09:43:42,687 ERROR [STDERR]     at
>> org.jboss.aspects.tx.TxPolicy.invokeInNoTx(TxPolicy.java:66)
>> 09:43:42,687 ERROR [STDERR]     at
>>
>> org.jboss.aspects.tx.TxInterceptor$NotSupported.invoke(TxInterceptor.java:102)
>> 09:43:42,687 ERROR [STDERR]     at
>>
>> org.jboss.portal.core.aspects.portlet.TransactionInterceptor$invokeNotSupported_N454727078796479
>> 09:43:42,687 ERROR [STDERR]     at
>>
>> org.jboss.portal.core.aspects.portlet.TransactionInterceptor.invokeNotSupported(TransactionInter
>> 09:43:42,687 ERROR [STDERR]     at
>>
>> org.jboss.portal.core.aspects.portlet.TransactionInterceptor.invoke(TransactionInterceptor.java:
>> 09:43:42,687 ERROR [STDERR]     at
>>
>> org.jboss.portal.portlet.invocation.PortletInterceptor.invoke(PortletInterceptor.java:38)
>> 09:43:42,687 ERROR [STDERR]     at
>>
>> org.jboss.portal.common.invocation.Invocation.invokeNext(Invocation.java:115)
>> 09:43:42,687 ERROR [STDERR]     at
>>
>> org.jboss.portal.core.aspects.portlet.HeaderInterceptor.invoke(HeaderInterceptor.java:50)
>> 09:43:42,687 ERROR [STDERR]     at
>>
>> org.jboss.portal.portlet.invocation.PortletInterceptor.invoke(PortletInterceptor.java:38)
>> 09:43:42,687 ERROR [STDERR]     at
>>
>> org.jboss.portal.common.invocation.Invocation.invokeNext(Invocation.java:115)
>> 09:43:42,687 ERROR [STDERR]     at
>>
>> org.jboss.portal.portlet.aspects.portlet.ProducerCacheInterceptor.invoke(ProducerCacheIntercepto
>> 09:43:42,687 ERROR [STDERR]     at
>>
>> org.jboss.portal.portlet.invocation.PortletInterceptor.invoke(PortletInterceptor.java:38)
>> 09:43:42,687 ERROR [STDERR]     at
>>
>> org.jboss.portal.common.invocation.Invocation.invokeNext(Invocation.java:115)
>> 09:43:42,687 ERROR [STDERR]     at
>>
>> org.jboss.portal.core.aspects.portlet.AjaxInterceptor.invoke(AjaxInterceptor.java:51)
>> 09:43:42,687 ERROR [STDERR]     at
>>
>> org.jboss.portal.portlet.invocation.PortletInterceptor.invoke(PortletInterceptor.java:38)
>> 09:43:42,687 ERROR [STDERR]     at
>>
>> org.jboss.portal.common.invocation.Invocation.invokeNext(Invocation.java:115)
>> 09:43:42,687 ERROR [STDERR]     at
>>
>> org.jboss.portal.portlet.aspects.portlet.ModesInterceptor.invoke(ModesInterceptor.java:62)
>> 09:43:42,687 ERROR [STDERR]     at
>>
>> org.jboss.portal.portlet.invocation.PortletInterceptor.invoke(PortletInterceptor.java:38)
>> 09:43:42,687 ERROR [STDERR]     at
>>
>> org.jboss.portal.common.invocation.Invocation.invokeNext(Invocation.java:115)
>> 09:43:42,687 ERROR [STDERR]     at
>>
>> org.jboss.portal.portlet.bridge.BridgeInterceptor.invoke(BridgeInterceptor.java:47)
>> 09:43:42,687 ERROR [STDERR]     at
>>
>> org.jboss.portal.portlet.invocation.PortletInterceptor.invoke(PortletInterceptor.java:38)
>> 09:43:42,687 ERROR [STDERR]     at
>>
>> org.jboss.portal.common.invocation.Invocation.invokeNext(Invocation.java:115)
>>
>> --
>> View this message in context:
>> http://www.nabble.com/Lucene-Error-%3A-java.io.FileNotFoundException-tp18251744p18251744.html
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
> 
> 

-- 
View this message in context: http://www.nabble.com/Lucene-Error-%3A-java.io.FileNotFoundException-tp18251744p18252269.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34765-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 03 06:05:47 2008
Return-Path: <java-user-return-34765-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 57590 invoked from network); 3 Jul 2008 06:05:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Jul 2008 06:05:46 -0000
Received: (qmail 38897 invoked by uid 500); 3 Jul 2008 06:05:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38858 invoked by uid 500); 3 Jul 2008 06:05:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38844 invoked by uid 99); 3 Jul 2008 06:05:42 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 02 Jul 2008 23:05:42 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of wsnet@live.cn designates 65.54.246.211 as permitted sender)
Received: from [65.54.246.211] (HELO bay0-omc3-s11.bay0.hotmail.com) (65.54.246.211)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Jul 2008 06:04:48 +0000
Received: from BAY119-W36 ([207.46.9.71]) by bay0-omc3-s11.bay0.hotmail.com with Microsoft SMTPSVC(6.0.3790.3959);
	 Wed, 2 Jul 2008 23:05:08 -0700
Message-ID: <BAY119-W36A6F1B87270D9DFEC6DA6B4980@phx.gbl>
Content-Type: multipart/alternative;
	boundary="_c70548fb-734c-404b-90bf-5bedce09eda0_"
X-Originating-IP: [222.66.20.82]
From: lutan <wsnet@live.cn>
To: <java-user@lucene.apache.org>
Subject: RE: how to statistics categories amount
Date: Thu, 3 Jul 2008 14:05:08 +0800
Importance: Normal
In-Reply-To: <A0375914-6EDE-4A0C-BB74-2483060E54A3@ehatchersolutions.com>
References: <BAY119-W440204702F26CC85BB2799B49D0@phx.gbl>
 <A0375914-6EDE-4A0C-BB74-2483060E54A3@ehatchersolutions.com>
MIME-Version: 1.0
X-OriginalArrivalTime: 03 Jul 2008 06:05:08.0433 (UTC) FILETIME=[BEEA5410:01C8DCD2]
X-Virus-Checked: Checked by ClamAV on apache.org

--_c70548fb-734c-404b-90bf-5bedce09eda0_
Content-Type: text/plain; charset="gb2312"
Content-Transfer-Encoding: 8bit


Anyone  explain  solr's function  of  facet  ,thanks!
 How to using lucene to achieve. > From: erik@ehatchersolutions.com> To: java-user@lucene.apache.org> Subject: Re: how to statistics categories amount> Date: Sat, 28 Jun 2008 05:36:12 -0400> > > On Jun 28, 2008, at 3:57 AM, lutan wrote:> > if I search a keyword likes 'computer' in a shopping website.> > the result may contains.> > total:> > (1000) products .> > categories:> > pc (500) products .> > notebook (300) products .> > server (200) products .> >> > so how do get each categories 'amount.> > I try to search many times on onec user search,> > but it is so slow> > This is a case where you are probably better off starting with Solr, > which supports faceting natively.> > The main trick to making this fast is coming up with cached sets of > each of the categories and intersecting each of those sets with the > main result set and using the cardinality of the intersected sets for > the counts. Again, Solr is what I'd recommend as a starting point for > you.> > Erik> > > -----
 ----------------------------------------------------------------> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org> For additional commands, e-mail: java-user-help@lucene.apache.org> 
_________________________________________________________________
用手机MSN聊天写邮件看空间，无限沟通，分享精彩！
http://mobile.msn.com.cn/
--_c70548fb-734c-404b-90bf-5bedce09eda0_--

From java-user-return-34766-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 03 09:26:09 2008
Return-Path: <java-user-return-34766-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26894 invoked from network); 3 Jul 2008 09:26:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Jul 2008 09:26:07 -0000
Received: (qmail 14711 invoked by uid 500); 3 Jul 2008 09:25:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14675 invoked by uid 500); 3 Jul 2008 09:25:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 14664 invoked by uid 99); 3 Jul 2008 09:25:59 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Jul 2008 02:25:59 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=SPF_NEUTRAL,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [74.125.46.28] (HELO yw-out-2324.google.com) (74.125.46.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Jul 2008 09:25:06 +0000
Received: by yw-out-2324.google.com with SMTP id 3so323059ywj.5
        for <java-user@lucene.apache.org>; Thu, 03 Jul 2008 02:25:16 -0700 (PDT)
Received: by 10.150.92.12 with SMTP id p12mr15149024ybb.236.1215077115938;
        Thu, 03 Jul 2008 02:25:15 -0700 (PDT)
Received: from ?10.17.4.4? ( [72.93.214.93])
        by mx.google.com with ESMTPS id 5sm11269094ywl.4.2008.07.03.02.25.15
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Thu, 03 Jul 2008 02:25:15 -0700 (PDT)
Message-Id: <A823585C-9B07-4A29-87A8-31435AB1B44D@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <18251744.post@talk.nabble.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v924)
Subject: Re: Lucene Error : java.io.FileNotFoundException
Date: Thu, 3 Jul 2008 05:25:14 -0400
References: <18251744.post@talk.nabble.com>
X-Mailer: Apple Mail (2.924)
X-Virus-Checked: Checked by ClamAV on apache.org


It looks like under JBoss you are accidentally using Lucene 1.4, not  
2.3.2.

Mike

yugana wrote:

>
> Hi,
>
> I am indexing content and searching using lucene. It is working fine  
> when I
> use the simple servlet and jsp mechanism. I am able to search on the  
> indexed
> content. I tried to implement the same using JBoss Portal. When I  
> try to run
> the search, I get the below error: Please help me to resolve the  
> error. I am
> using Lucene 2.3.2
>
> 09:43:42,671 ERROR [STDERR] java.io.FileNotFoundException:
> D:\indexDir\segments (The system cannot find the file specified)
> 09:43:42,671 ERROR [STDERR]     at  
> java.io.RandomAccessFile.open(Native
> Method)
> 09:43:42,671 ERROR [STDERR]     at
> java.io.RandomAccessFile.<init>(RandomAccessFile.java:212)
> 09:43:42,671 ERROR [STDERR]     at
> org.apache.lucene.store.FSInputStream 
> $Descriptor.<init>(FSDirectory.java:376)
> 09:43:42,671 ERROR [STDERR]     at
> org.apache.lucene.store.FSInputStream.<init>(FSDirectory.java:405)
> 09:43:42,671 ERROR [STDERR]     at
> org.apache.lucene.store.FSDirectory.openFile(FSDirectory.java:268)
> 09:43:42,671 ERROR [STDERR]     at
> org.apache.lucene.index.SegmentInfos.read(SegmentInfos.java:40)
> 09:43:42,671 ERROR [STDERR]     at
> org.apache.lucene.index.IndexReader$1.doBody(IndexReader.java:116)
> 09:43:42,671 ERROR [STDERR]     at
> org.apache.lucene.store.Lock$With.run(Lock.java:109)
> 09:43:42,671 ERROR [STDERR]     at
> org.apache.lucene.index.IndexReader.open(IndexReader.java:111)
> 09:43:42,671 ERROR [STDERR]     at
> org.apache.lucene.index.IndexReader.open(IndexReader.java:95)
> 09:43:42,671 ERROR [STDERR]     at
> org.apache.lucene.search.IndexSearcher.<init>(IndexSearcher.java:38)
> 09:43:42,671 ERROR [STDERR]     at
> com.xerox.mywebboard.search.SearchManager.search(SearchManager.java: 
> 53)
> 09:43:42,671 ERROR [STDERR]     at
> com 
> .xerox 
> .mywebboard 
> .xeroxArticleSearchPortlet.search(xeroxArticleSearchPortlet.java:45)
> 09:43:42,671 ERROR [STDERR]     at
> com 
> .xerox 
> .mywebboard 
> .xeroxArticleSearchPortlet 
> .processAction(xeroxArticleSearchPortlet.java:27)
> 09:43:42,671 ERROR [STDERR]     at
> org 
> .jboss 
> .portal 
> .portlet 
> .impl 
> .jsr168.PortletContainerImpl.invokeAction(PortletContainerImpl.java
> 09:43:42,687 ERROR [STDERR]     at
> org 
> .jboss 
> .portal 
> .portlet 
> .impl.jsr168.PortletContainerImpl.dispatch(PortletContainerImpl.java: 
> 401
> 09:43:42,687 ERROR [STDERR]     at
> org.jboss.portal.portlet.container.PortletContainerInvoker 
> $1.invoke(PortletContainerInvoker.java
> 09:43:42,687 ERROR [STDERR]     at
> org 
> .jboss 
> .portal.common.invocation.Invocation.invokeNext(Invocation.java:131)
> 09:43:42,687 ERROR [STDERR]     at
> org.jboss.portal.core.aspects.portlet.TransactionInterceptor.org 
> $jboss$portal$core$aspects$portl
> 09:43:42,687 ERROR [STDERR]     at
> org.jboss.portal.core.aspects.portlet.TransactionInterceptor 
> $invokeNotSupported_N454727078796479
> 09:43:42,687 ERROR [STDERR]     at
> org.jboss.aspects.tx.TxPolicy.invokeInNoTx(TxPolicy.java:66)
> 09:43:42,687 ERROR [STDERR]     at
> org.jboss.aspects.tx.TxInterceptor 
> $NotSupported.invoke(TxInterceptor.java:112)
> 09:43:42,687 ERROR [STDERR]     at
> org.jboss.portal.core.aspects.portlet.TransactionInterceptor 
> $invokeNotSupported_N454727078796479
> 09:43:42,687 ERROR [STDERR]     at
> org.jboss.aspects.tx.TxPolicy.invokeInNoTx(TxPolicy.java:66)
> 09:43:42,687 ERROR [STDERR]     at
> org.jboss.aspects.tx.TxInterceptor 
> $NotSupported.invoke(TxInterceptor.java:102)
> 09:43:42,687 ERROR [STDERR]     at
> org.jboss.portal.core.aspects.portlet.TransactionInterceptor 
> $invokeNotSupported_N454727078796479
> 09:43:42,687 ERROR [STDERR]     at
> org 
> .jboss 
> .portal 
> .core 
> .aspects 
> .portlet.TransactionInterceptor.invokeNotSupported(TransactionInter
> 09:43:42,687 ERROR [STDERR]     at
> org 
> .jboss 
> .portal 
> .core 
> .aspects 
> .portlet.TransactionInterceptor.invoke(TransactionInterceptor.java:
> 09:43:42,687 ERROR [STDERR]     at
> org 
> .jboss 
> .portal 
> .portlet 
> .invocation.PortletInterceptor.invoke(PortletInterceptor.java:38)
> 09:43:42,687 ERROR [STDERR]     at
> org 
> .jboss 
> .portal.common.invocation.Invocation.invokeNext(Invocation.java:115)
> 09:43:42,687 ERROR [STDERR]     at
> org 
> .jboss 
> .portal 
> .core 
> .aspects.portlet.HeaderInterceptor.invoke(HeaderInterceptor.java:50)
> 09:43:42,687 ERROR [STDERR]     at
> org 
> .jboss 
> .portal 
> .portlet 
> .invocation.PortletInterceptor.invoke(PortletInterceptor.java:38)
> 09:43:42,687 ERROR [STDERR]     at
> org 
> .jboss 
> .portal.common.invocation.Invocation.invokeNext(Invocation.java:115)
> 09:43:42,687 ERROR [STDERR]     at
> org 
> .jboss 
> .portal 
> .portlet 
> .aspects 
> .portlet.ProducerCacheInterceptor.invoke(ProducerCacheIntercepto
> 09:43:42,687 ERROR [STDERR]     at
> org 
> .jboss 
> .portal 
> .portlet 
> .invocation.PortletInterceptor.invoke(PortletInterceptor.java:38)
> 09:43:42,687 ERROR [STDERR]     at
> org 
> .jboss 
> .portal.common.invocation.Invocation.invokeNext(Invocation.java:115)
> 09:43:42,687 ERROR [STDERR]     at
> org 
> .jboss 
> .portal 
> .core.aspects.portlet.AjaxInterceptor.invoke(AjaxInterceptor.java:51)
> 09:43:42,687 ERROR [STDERR]     at
> org 
> .jboss 
> .portal 
> .portlet 
> .invocation.PortletInterceptor.invoke(PortletInterceptor.java:38)
> 09:43:42,687 ERROR [STDERR]     at
> org 
> .jboss 
> .portal.common.invocation.Invocation.invokeNext(Invocation.java:115)
> 09:43:42,687 ERROR [STDERR]     at
> org 
> .jboss 
> .portal 
> .portlet 
> .aspects.portlet.ModesInterceptor.invoke(ModesInterceptor.java:62)
> 09:43:42,687 ERROR [STDERR]     at
> org 
> .jboss 
> .portal 
> .portlet 
> .invocation.PortletInterceptor.invoke(PortletInterceptor.java:38)
> 09:43:42,687 ERROR [STDERR]     at
> org 
> .jboss 
> .portal.common.invocation.Invocation.invokeNext(Invocation.java:115)
> 09:43:42,687 ERROR [STDERR]     at
> org 
> .jboss 
> .portal 
> .portlet.bridge.BridgeInterceptor.invoke(BridgeInterceptor.java:47)
> 09:43:42,687 ERROR [STDERR]     at
> org 
> .jboss 
> .portal 
> .portlet 
> .invocation.PortletInterceptor.invoke(PortletInterceptor.java:38)
> 09:43:42,687 ERROR [STDERR]     at
> org 
> .jboss 
> .portal.common.invocation.Invocation.invokeNext(Invocation.java:115)
>
> -- 
> View this message in context: http://www.nabble.com/Lucene-Error-%3A-java.io.FileNotFoundException-tp18251744p18251744.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34767-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 03 11:31:44 2008
Return-Path: <java-user-return-34767-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61875 invoked from network); 3 Jul 2008 11:31:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Jul 2008 11:31:44 -0000
Received: (qmail 74113 invoked by uid 500); 3 Jul 2008 11:31:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74080 invoked by uid 500); 3 Jul 2008 11:31:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74069 invoked by uid 99); 3 Jul 2008 11:31:38 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Jul 2008 04:31:38 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Jul 2008 11:30:47 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KEN1n-0003S2-8p
	for java-user@lucene.apache.org; Thu, 03 Jul 2008 04:31:07 -0700
Message-ID: <18257247.post@talk.nabble.com>
Date: Thu, 3 Jul 2008 04:31:07 -0700 (PDT)
From: miztaken <justjunktome@gmail.com>
To: java-user@lucene.apache.org
Subject: Store/Index Email Address in Lucene
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: justjunktome@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hi there,
I want to index email address in such a way that i can do WildCard, Phrase
and Simple search on those items.

for each document i will have email addresses string just like in the case
of CC and TO in mails.
for eg "abc@abc.com; dcd@cbd.com; john hopkings; anything@anything.com"

Now what is the best way to store them so that i can do various type of
search on them.

Do i need the split the email address first and further split the single
email address as well and store them in multiple fields?

What is the best way to deal such case?

Your help is highly anticipated

Thank You
miztaken
-- 
View this message in context: http://www.nabble.com/Store-Index-Email-Address-in-Lucene-tp18257247p18257247.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34768-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 03 13:39:43 2008
Return-Path: <java-user-return-34768-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19062 invoked from network); 3 Jul 2008 13:39:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Jul 2008 13:39:43 -0000
Received: (qmail 90743 invoked by uid 500); 3 Jul 2008 13:39:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89958 invoked by uid 500); 3 Jul 2008 13:39:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89947 invoked by uid 99); 3 Jul 2008 13:39:30 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Jul 2008 06:39:30 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [82.111.253.243] (HELO mail.uk.scalix.com) (82.111.253.243)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Jul 2008 13:38:40 +0000
Received: from mail.uk.scalix.com (localhost.localdomain [127.0.0.1])
	by mail.uk.scalix.com (8.13.8/8.13.8) with ESMTP id m63Dcvuj008239
	for <java-user@lucene.apache.org>; Thu, 3 Jul 2008 14:38:57 +0100
Received: from [10.11.108.233] (mail.uk.scalix.com [10.11.108.216])
    by mail.uk.scalix.com (Scalix SMTP Relay 11.4.1.11825)
    via ESMTP; Thu, 03 Jul 2008 14:38:57 +0100 (BST)
Date: Thu, 3 Jul 2008 14:38:57 +0100
From: Chris Bamford <chris.bamford@scalix.com>
To: java-user@lucene.apache.org
Message-ID: <486CD671.7070301@scalix.com>
Subject: Search question (newbie)
x-scalix-Hops: 1
User-Agent: Thunderbird 2.0.0.14 (X11/20080505)
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="------------060904010704060602030204"
X-Spam-Checker-Version: SpamAssassin 3.2.4 (2008-01-01) on mail.uk.scalix.com
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.1 required=5.0 tests=AWL,BAYES_00,HTML_MESSAGE
	autolearn=ham version=3.2.4

--------------060904010704060602030204
Content-Type: text/plain;
	charset="US-ASCII";
	format="flowed"
Content-Disposition: inline

Hi,

Can someone point me in the right direction please?
How can I trap this situation correctly?  I receive user queries like 
this (quotes included):

    /from:"fred flintston*"/

Which produces a query string of

    /+from:fred  body:flintston/       (where /body/ is the default field)

What I want is:

/    +from:fred +from:flintston*/

In other words, I want quoted expressions to be treated as single units..
Thanks for any pointers,

- Chris


--------------060904010704060602030204--

From java-user-return-34769-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 03 14:00:23 2008
Return-Path: <java-user-return-34769-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 28569 invoked from network); 3 Jul 2008 14:00:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Jul 2008 14:00:22 -0000
Received: (qmail 38777 invoked by uid 500); 3 Jul 2008 14:00:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38750 invoked by uid 500); 3 Jul 2008 14:00:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 21440 invoked by uid 99); 3 Jul 2008 13:53:33 -0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Date: Thu, 3 Jul 2008 15:52:21 +0200
From: =?iso-8859-1?Q?Asbj=F8rn_A=2E?= Fellinghaug <asbjorn@fellinghaug.com>
To: java-user@lucene.apache.org
Subject: Enhancing phrase searching in Lucene
Message-ID: <20080703135221.GA17164@stud.ntnu.no>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Disposition: inline
Content-Transfer-Encoding: 8bit
User-Agent: Mutt/1.5.11
X-Virus-Scanned: Debian amavisd-new at bene1.itea.ntnu.no
X-Virus-Checked: Checked by ClamAV on apache.org

Hi.

I've just finished my master thesis regarding how to enhance overall
phrase searching in search engines nowadays. The focus in the thesis is
to experiment with a new approach, whereas I've focused on pair of
words (bigrams). The thesis can be freely downloaded here [1].

What I've specifically experimented with is bigrams based on stopwords
and their characteristics. In this experiment there is created an
Analyzer which create bigram Tokens compounded of pair of words. First
we have a predefined list of stopwords, and then we analyze each token
in the Analyze. Given that a stopword token is identified, then we
create two new bigram tokens:
    1) previouse token + stopword token
    2) stopword token + next token

The identified stopword token is discarded, as it pose a huge posting
list in the inverted index. 

The overall main goal is to drastically reduce the posting lists
lengths, and thereby save I/O and processing made by Apache Lucene.
Based on the experiments performed, this new phrase searching approach
in Lucene introduce some performance gains.

The code which was created in the experiment will be made available
shortly. I just need to make some Javadoc, and prettify some. There is
nothing revolutionary in the code, as I've noticed by this maillist that
others have also been into this subject.

Hope someone finds some of the aspects discussed in my master thesis
useful. I've also, into some extend, tried to describe Apache Lucene and
how it works.

[1] http://asbjorn.fellinghaug.com/filer/master/Master_thesis.pdf

-- 
Asbjrn A. Fellinghaug
asbjorn@fellinghaug.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34770-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 03 16:23:55 2008
Return-Path: <java-user-return-34770-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45598 invoked from network); 3 Jul 2008 16:23:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Jul 2008 16:23:55 -0000
Received: (qmail 97797 invoked by uid 500); 3 Jul 2008 16:23:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97774 invoked by uid 500); 3 Jul 2008 16:23:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97763 invoked by uid 99); 3 Jul 2008 16:23:32 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Jul 2008 09:23:32 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [209.222.209.11] (HELO mirkwood.informatics.jax.org) (209.222.209.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Jul 2008 16:22:40 +0000
Received: from [127.0.0.1] (corona [209.222.209.245])
	by mirkwood.informatics.jax.org (8.13.8/8.13.8) with ESMTP id m63GMwGj019200
	for <java-user@lucene.apache.org>; Thu, 3 Jul 2008 12:22:59 -0400 (EDT)
	(envelope-from mhall@informatics.jax.org)
Message-ID: <486CFC47.7070501@informatics.jax.org>
Date: Thu, 03 Jul 2008 12:20:23 -0400
From: Matthew Hall <mhall@informatics.jax.org>
User-Agent: Thunderbird 2.0.0.14 (Windows/20080421)
MIME-Version: 1.0
To: lucene <java-user@lucene.apache.org>
Subject: Term Frequency for more complex terms
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-PMX-Version: 5.4.2.338381, Antispam-Engine: 2.6.0.325393, Antispam-Data: 2008.7.3.160455
X-PerlMx-Spam: Gauge=IIIIIII, Probability=7%, Report='BODY_SIZE_1000_LESS 0, BODY_SIZE_400_499 0, BODY_SIZE_5000_LESS 0, __C230066_P5 0, __CT 0, __CTE 0, __CT_TEXT_PLAIN 0, __HAS_MSGID 0, __MIME_TEXT_ONLY 0, __MIME_VERSION 0, __SANE_MSGID 0, __USER_AGENT 0'
X-Virus-Checked: Checked by ClamAV on apache.org

I have a quick question, could someone point me towards where in the API 
I'll have to investigate in order to figure out the term frequencies of 
more complex terms?

For example I want to know the tf of "kit ligand" treated as a phrase.  
I see that luke has access to this information in its explain method, 
but the api call is currently eluding me.

Thanks,

Matt

-- 
Matthew Hall
Software Engineer
Mouse Genome Informatics
mhall@informatics.jax.org
(207) 288-6012



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34771-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 03 21:27:03 2008
Return-Path: <java-user-return-34771-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81804 invoked from network); 3 Jul 2008 21:27:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Jul 2008 21:27:03 -0000
Received: (qmail 19935 invoked by uid 500); 3 Jul 2008 21:26:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19909 invoked by uid 500); 3 Jul 2008 21:26:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19898 invoked by uid 99); 3 Jul 2008 21:26:56 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Jul 2008 14:26:56 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of keithmatthewwatson@gmail.com designates 209.85.198.232 as permitted sender)
Received: from [209.85.198.232] (HELO rv-out-0506.google.com) (209.85.198.232)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Jul 2008 21:26:04 +0000
Received: by rv-out-0506.google.com with SMTP id f6so1167081rvb.5
        for <java-user@lucene.apache.org>; Thu, 03 Jul 2008 14:26:25 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:from:to
         :content-type:content-transfer-encoding:mime-version:subject:date
         :x-mailer;
        bh=6+z8baiqMCUO7ld8iGpJJiKl2Hxk8UVVPG/U/slnV+I=;
        b=lwCb2xOLLI825ri16fALVosi+U4FjbTxAmCwfX/+izSQdNw+tNz6DbarJ4ZH9OUf1X
         782xm3jO+E050gEgWfQKAG8xPa/PPei70iYUGx+GgXqRNTs4amvECKNiH0h9vZEeCYWT
         7K0z5SqbAuw41r+uPFsL7Ntauytb7yRC8Fpj0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:from:to:content-type:content-transfer-encoding
         :mime-version:subject:date:x-mailer;
        b=TMUzO+KQ6jd4gsX8c55MCPaf8X+HI49xwcoRI6Y5cbIzhP3k5BSS6wsMCaMTC84gZM
         hycudTn47tIIWrpofcPZP5lOQUR/rnia7Fv67S8pP6eC7/BAB67/WZxm+8SFFDgk1Gwh
         sKdkGp8kykXzruIADi1wY0V9P4U1/oBdM9mmQ=
Received: by 10.114.184.9 with SMTP id h9mr1631541waf.151.1215120384652;
        Thu, 03 Jul 2008 14:26:24 -0700 (PDT)
Received: from ?192.168.0.2? ( [87.81.46.146])
        by mx.google.com with ESMTPS id t12sm1205131gvd.10.2008.07.03.14.25.52
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Thu, 03 Jul 2008 14:26:23 -0700 (PDT)
Message-Id: <3DFF5FF4-5D23-4470-894A-7667F9883B66@gmail.com>
From: Keith Watson <keithmatthewwatson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Memory Usage
Date: Thu, 3 Jul 2008 22:25:51 +0100
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org

Hello All,

I have something that's not exactly causing me a major problem, but I  
would appreciate help in understanding the behaviour here:

I have an internet message board, and I soon hope to revamp the code  
to be using Lucene for searching the threads and posts, as it's far  
better than the database's fulltext capability. However, one of the  
sort of things I want to be able to do is for a user to be able to  
request a list of posts, written by user x, ordered by the newest  
first (and it's this sorting of the items by date that is the issue  
here).

To do this, I have a timestamp in the index, along with each post,  
user etc.

I find that if I use the Java SimpleDateFormat class to encode the  
timestamp like this: yyMMdd (let's not worry about the year 2100  
problem for now!), then I can measure the index cache (which is fully  
loaded, since I need to sort the results) as taking somewhere in the  
region of 30M of memory.

Now, I noticed that obviously if I index like the above, I won't get  
the correct sort order for several posts having been posted on the  
same day, so I changed it to index yyMMddHHmmss to index down to the  
second, rather than just the day. I didn't pay much attention to  
memory usage until I started getting out of heap space errors... When  
I looked into the usage I found:

(there are around 6,000,000 posts on the message board database)

Date encoded as yyMMdd: appears to be using around 30M
Date encoded as yyMMddHHmmss:  appears to be using more than 400M!

I guess I would have understood if I was seeing the usage double for  
sure, or even a little more; no idea how you guys encode the indexes,  
if at all, but it's gone up over tenfold, which I can't explain.

For now, I have just moved it back to do it on a per day basis, as  
it's not a huge deal, but can anyone help with this? Is there  
something I might be doing wrong? That's all I changed between the two  
runs, and it certainly seems to be repeatable. I tried upgrading from  
the previous version of Lucene to the latest one, but no difference.

Many thanks,

Keith.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34772-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 03 21:44:36 2008
Return-Path: <java-user-return-34772-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92531 invoked from network); 3 Jul 2008 21:44:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Jul 2008 21:44:35 -0000
Received: (qmail 46201 invoked by uid 500); 3 Jul 2008 21:44:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46166 invoked by uid 500); 3 Jul 2008 21:44:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46153 invoked by uid 99); 3 Jul 2008 21:44:28 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Jul 2008 14:44:28 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [65.89.232.7] (HELO thebluezone.net) (65.89.232.7)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Jul 2008 21:43:36 +0000
Received: from localhost (localhost [127.0.0.1])
	by thebluezone.net (Postfix) with ESMTP id 54B57286C0A
	for <java-user@lucene.apache.org>; Thu,  3 Jul 2008 15:43:26 -0600 (MDT)
Received: from thebluezone.net ([127.0.0.1])
	by localhost (mail1 [127.0.0.1]) (amavisd-new, port 10024) with ESMTP
	id 21947-07 for <java-user@lucene.apache.org>;
	Thu, 3 Jul 2008 15:43:24 -0600 (MDT)
Received: from desktop (unknown [65.89.233.61])
	by thebluezone.net (Postfix) with ESMTP id 824B1286C7A
	for <java-user@lucene.apache.org>; Thu,  3 Jul 2008 15:43:24 -0600 (MDT)
From: "John Griffin" <jgriffin@thebluezone.net>
To: <java-user@lucene.apache.org>
References: <486CD671.7070301@scalix.com>
Subject: RE: Search question (newbie)
Date: Thu, 3 Jul 2008 15:43:19 -0600
Message-ID: <FE1AD9DDC2844278B19EA6C9D7DD90E9@desktop>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
In-Reply-To: <486CD671.7070301@scalix.com>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.5512
Thread-Index: AcjdEkgrgki5RJt4TM+cUCh5C0gzBAAQo1KQ
X-Virus-Scanned: by thebluezone.net
X-Virus-Checked: Checked by ClamAV on apache.org

Chris,

I've had similar requirements in the past. First strip the quotes then
create a BooleanQuery consisting of two separate queries.

1. TermQuery for the first term - Fred
2. PrefixQuery for the second term - Flintstone

When you add each individual query to the BooleanQuery make sure the
BooleanClause.Occur parameter is set to MUST (look at the BooleanQuery API
docs). 

Use the toString() method on the BooleanQuery after it's created to make
sure you did it correctly.

John G.

-----Original Message-----
From: Chris Bamford [mailto:chris.bamford@scalix.com] 
Sent: Thursday, July 03, 2008 7:39 AM
To: java-user@lucene.apache.org
Subject: Search question (newbie)

Hi,

Can someone point me in the right direction please?
How can I trap this situation correctly?  I receive user queries like 
this (quotes included):

    /from:"fred flintston*"/

Which produces a query string of

    /+from:fred  body:flintston/       (where /body/ is the default field)

What I want is:

/    +from:fred +from:flintston*/

In other words, I want quoted expressions to be treated as single units..
Thanks for any pointers,

- Chris



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34773-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 03 21:52:56 2008
Return-Path: <java-user-return-34773-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97166 invoked from network); 3 Jul 2008 21:52:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Jul 2008 21:52:56 -0000
Received: (qmail 59408 invoked by uid 500); 3 Jul 2008 21:52:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59379 invoked by uid 500); 3 Jul 2008 21:52:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59368 invoked by uid 99); 3 Jul 2008 21:52:46 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Jul 2008 14:52:46 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [65.89.232.7] (HELO thebluezone.net) (65.89.232.7)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Jul 2008 21:51:55 +0000
Received: from localhost (localhost [127.0.0.1])
	by thebluezone.net (Postfix) with ESMTP id AAAE7286BD2
	for <java-user@lucene.apache.org>; Thu,  3 Jul 2008 15:51:45 -0600 (MDT)
Received: from thebluezone.net ([127.0.0.1])
	by localhost (mail1 [127.0.0.1]) (amavisd-new, port 10024) with ESMTP
	id 23883-03 for <java-user@lucene.apache.org>;
	Thu, 3 Jul 2008 15:51:43 -0600 (MDT)
Received: from desktop (unknown [65.89.233.61])
	by thebluezone.net (Postfix) with ESMTP id 94674286C0A
	for <java-user@lucene.apache.org>; Thu,  3 Jul 2008 15:51:43 -0600 (MDT)
From: "John Griffin" <jgriffin@thebluezone.net>
To: <java-user@lucene.apache.org>
References: <486CFC47.7070501@informatics.jax.org>
Subject: RE: Term Frequency for more complex terms
Date: Thu, 3 Jul 2008 15:51:33 -0600
Message-ID: <99B3B4730731411DB6677AF66A61B6D7@desktop>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
In-Reply-To: <486CFC47.7070501@informatics.jax.org>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.5512
Thread-Index: AcjdKTtmaTt+kMfMQL6Kr7hfeVVUggALL6FA
X-Virus-Scanned: by thebluezone.net
X-Virus-Checked: Checked by ClamAV on apache.org

Matthew,

I not totally sure what you are asking but if it's 'where do I call the
explain method from?' it looks like you want to call it from the
IndexSearcher class. Look at the API docs for Searcher (the IndexSearcher's
superclass).

John G.

P.S.
If that's not it, look for explain in the API docs by clicking on Index at
the top of the docs. They're all there.


-----Original Message-----
From: Matthew Hall [mailto:mhall@informatics.jax.org] 
Sent: Thursday, July 03, 2008 10:20 AM
To: lucene
Subject: Term Frequency for more complex terms

I have a quick question, could someone point me towards where in the API 
I'll have to investigate in order to figure out the term frequencies of 
more complex terms?

For example I want to know the tf of "kit ligand" treated as a phrase.  
I see that luke has access to this information in its explain method, 
but the api call is currently eluding me.

Thanks,

Matt

-- 
Matthew Hall
Software Engineer
Mouse Genome Informatics
mhall@informatics.jax.org
(207) 288-6012



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34774-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 03 22:03:09 2008
Return-Path: <java-user-return-34774-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 6122 invoked from network); 3 Jul 2008 22:03:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Jul 2008 22:03:08 -0000
Received: (qmail 77256 invoked by uid 500); 3 Jul 2008 22:02:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77231 invoked by uid 500); 3 Jul 2008 22:02:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77218 invoked by uid 99); 3 Jul 2008 22:02:30 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Jul 2008 15:02:30 -0700
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [65.89.232.7] (HELO thebluezone.net) (65.89.232.7)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Jul 2008 22:01:37 +0000
Received: from localhost (localhost [127.0.0.1])
	by thebluezone.net (Postfix) with ESMTP id 4043C286BE7
	for <java-user@lucene.apache.org>; Thu,  3 Jul 2008 16:01:58 -0600 (MDT)
Received: from thebluezone.net ([127.0.0.1])
	by localhost (mail1 [127.0.0.1]) (amavisd-new, port 10024) with ESMTP
	id 25274-06 for <java-user@lucene.apache.org>;
	Thu, 3 Jul 2008 16:01:56 -0600 (MDT)
Received: from desktop (unknown [65.89.233.61])
	by thebluezone.net (Postfix) with ESMTP id 443F2286BC5
	for <java-user@lucene.apache.org>; Thu,  3 Jul 2008 16:01:56 -0600 (MDT)
From: "John Griffin" <jgriffin@thebluezone.net>
To: <java-user@lucene.apache.org>
References: <18257247.post@talk.nabble.com>
Subject: RE: Store/Index Email Address in Lucene
Date: Thu, 3 Jul 2008 16:01:51 -0600
Message-ID: <1CF712F2C803440C8F9584F8A51783C3@desktop>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
In-Reply-To: <18257247.post@talk.nabble.com>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.5512
Thread-Index: AcjdAGx+09X0Woe+Qgm0cC8Wa4HdRAAV2hsg
X-Virus-Scanned: by thebluezone.net
X-Virus-Checked: Checked by ClamAV on apache.org

Miz,

The StandardAnalyzer recognizes email addresses as is. That is, it pays
attention to the '@' symbol. Just store an email address in a field and
search them normally.

This assumes you are going to store the different emails in separate fields.
There is an alternative strategy if you need it. Create a string consisting
of all the emails separated by whitespace. Make sure the field is tokenized
and then you only have to search one field for any of the emails.

Your call.

John G.

-----Original Message-----
From: miztaken [mailto:justjunktome@gmail.com] 
Sent: Thursday, July 03, 2008 5:31 AM
To: java-user@lucene.apache.org
Subject: Store/Index Email Address in Lucene


Hi there,
I want to index email address in such a way that i can do WildCard, Phrase
and Simple search on those items.

for each document i will have email addresses string just like in the case
of CC and TO in mails.
for eg "abc@abc.com; dcd@cbd.com; john hopkings; anything@anything.com"

Now what is the best way to store them so that i can do various type of
search on them.

Do i need the split the email address first and further split the single
email address as well and store them in multiple fields?

What is the best way to deal such case?

Your help is highly anticipated

Thank You
miztaken
-- 
View this message in context:
http://www.nabble.com/Store-Index-Email-Address-in-Lucene-tp18257247p1825724
7.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34775-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 03 23:03:36 2008
Return-Path: <java-user-return-34775-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 43117 invoked from network); 3 Jul 2008 23:03:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Jul 2008 23:03:35 -0000
Received: (qmail 45106 invoked by uid 500); 3 Jul 2008 23:03:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45077 invoked by uid 500); 3 Jul 2008 23:03:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45066 invoked by uid 99); 3 Jul 2008 23:03:28 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Jul 2008 16:03:28 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [203.89.192.138] (HELO postoffice2.aconex.com) (203.89.192.138)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Jul 2008 23:02:36 +0000
X-ASG-Debug-ID: 1215126160-76e100210000-H1Y1KX
X-Barracuda-URL: http://postoffice2.aconex.com:8000/cgi-bin/mark.cgi
Received: from postoffice.aconex.com (localhost [127.0.0.1])
	by postoffice2.aconex.com (Spam Firewall) with ESMTP id E0EE52EA9A9
	for <java-user@lucene.apache.org>; Fri,  4 Jul 2008 09:02:40 +1000 (EST)
Received: from postoffice.aconex.com (postoffice.yarra.acx [192.168.3.1]) by postoffice2.aconex.com with ESMTP id loAN7FzoC9GwjnaA for <java-user@lucene.apache.org>; Fri, 04 Jul 2008 09:02:40 +1000 (EST)
Received: from [192.168.5.130] (unknown [203.89.192.141])
	by postoffice.aconex.com (Postfix) with ESMTP id C2DFB92C313
	for <java-user@lucene.apache.org>; Fri,  4 Jul 2008 09:02:40 +1000 (EST)
Message-Id: <5E7150F9-A1F9-4F42-8A98-4CC7C128F1A1@aconex.com>
From: Paul Smith <psmith@aconex.com>
To: java-user@lucene.apache.org
In-Reply-To: <3DFF5FF4-5D23-4470-894A-7667F9883B66@gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
X-ASG-Orig-Subj: Re: Memory Usage
Subject: Re: Memory Usage
Date: Fri, 4 Jul 2008 09:02:40 +1000
References: <3DFF5FF4-5D23-4470-894A-7667F9883B66@gmail.com>
X-Mailer: Apple Mail (2.926)
X-Barracuda-Connect: postoffice.yarra.acx[192.168.3.1]
X-Barracuda-Start-Time: 1215126160
X-Barracuda-Virus-Scanned: by Aconex Staff Email Spam Firewall at aconex.com
X-Virus-Checked: Checked by ClamAV on apache.org

>
>
> (there are around 6,000,000 posts on the message board database)
>
> Date encoded as yyMMdd: appears to be using around 30M
> Date encoded as yyMMddHHmmss:  appears to be using more than 400M!
>
> I guess I would have understood if I was seeing the usage double for  
> sure, or even a little more; no idea how you guys encode the  
> indexes, if at all, but it's gone up over tenfold, which I can't  
> explain.

Sort memory cost is based on the total # of unique terms for the given  
field (multiplied by the number of locale's involved if you have to do  
that too! but in temporal sorting you don't).

This is easier than you think, just use 2 fields (date, time) and sort  
by both.  This means the Date field's unique term count grows only 1  
term per day.  The Time field can be set to minutes (if you can get  
away with that) meaning that you only have fairly insignificant total  
term count for the time field.  We use this at Aconex,  and have  
indexes with millions of records (weekly 'work' searcher refreshed  
every 5 seconds, archive searcher is held in memory, with a  
Multisearcher done over the 2) and it works a treat.  We regularly  
need to return million+ results from a search (don't ask) using this  
sort of sorting and the overall search time is only a few seconds.

On a related note, work hard not to need to use Locale sensitive  
sorting if you can for any other fields, for large results the CPU  
penalty is horrific (even once you get past the synchronization  
bottleneck in the CollationKey stuff).

cheers,

Paul Smith

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34776-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 04 04:07:09 2008
Return-Path: <java-user-return-34776-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72629 invoked from network); 4 Jul 2008 04:07:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Jul 2008 04:07:09 -0000
Received: (qmail 59924 invoked by uid 500); 4 Jul 2008 04:07:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59896 invoked by uid 500); 4 Jul 2008 04:07:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59874 invoked by uid 99); 4 Jul 2008 04:07:00 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Jul 2008 21:07:00 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 Jul 2008 04:06:09 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KEcZ3-0003on-QA
	for java-user@lucene.apache.org; Thu, 03 Jul 2008 21:06:29 -0700
Message-ID: <18272463.post@talk.nabble.com>
Date: Thu, 3 Jul 2008 21:06:29 -0700 (PDT)
From: yugana <yugandhar.adem@wipro.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene Error : java.io.FileNotFoundException
In-Reply-To: <A823585C-9B07-4A29-87A8-31435AB1B44D@mikemccandless.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: yugandhar.adem@wipro.com
References: <18251744.post@talk.nabble.com> <A823585C-9B07-4A29-87A8-31435AB1B44D@mikemccandless.com>
X-Virus-Checked: Checked by ClamAV on apache.org


I have checked all the jars and tried replacing with the same versions. Still
I get the same error. Please let me know what else to check.

yug


Michael McCandless-2 wrote:
> 
> 
> It looks like under JBoss you are accidentally using Lucene 1.4, not  
> 2.3.2.
> 
> Mike
> 
> yugana wrote:
> 
>>
>> Hi,
>>
>> I am indexing content and searching using lucene. It is working fine  
>> when I
>> use the simple servlet and jsp mechanism. I am able to search on the  
>> indexed
>> content. I tried to implement the same using JBoss Portal. When I  
>> try to run
>> the search, I get the below error: Please help me to resolve the  
>> error. I am
>> using Lucene 2.3.2
>>
>> 09:43:42,671 ERROR [STDERR] java.io.FileNotFoundException:
>> D:\indexDir\segments (The system cannot find the file specified)
>> 09:43:42,671 ERROR [STDERR]     at  
>> java.io.RandomAccessFile.open(Native
>> Method)
>> 09:43:42,671 ERROR [STDERR]     at
>> java.io.RandomAccessFile.<init>(RandomAccessFile.java:212)
>> 09:43:42,671 ERROR [STDERR]     at
>> org.apache.lucene.store.FSInputStream 
>> $Descriptor.<init>(FSDirectory.java:376)
>> 09:43:42,671 ERROR [STDERR]     at
>> org.apache.lucene.store.FSInputStream.<init>(FSDirectory.java:405)
>> 09:43:42,671 ERROR [STDERR]     at
>> org.apache.lucene.store.FSDirectory.openFile(FSDirectory.java:268)
>> 09:43:42,671 ERROR [STDERR]     at
>> org.apache.lucene.index.SegmentInfos.read(SegmentInfos.java:40)
>> 09:43:42,671 ERROR [STDERR]     at
>> org.apache.lucene.index.IndexReader$1.doBody(IndexReader.java:116)
>> 09:43:42,671 ERROR [STDERR]     at
>> org.apache.lucene.store.Lock$With.run(Lock.java:109)
>> 09:43:42,671 ERROR [STDERR]     at
>> org.apache.lucene.index.IndexReader.open(IndexReader.java:111)
>> 09:43:42,671 ERROR [STDERR]     at
>> org.apache.lucene.index.IndexReader.open(IndexReader.java:95)
>> 09:43:42,671 ERROR [STDERR]     at
>> org.apache.lucene.search.IndexSearcher.<init>(IndexSearcher.java:38)
>> 09:43:42,671 ERROR [STDERR]     at
>> com.xerox.mywebboard.search.SearchManager.search(SearchManager.java: 
>> 53)
>> 09:43:42,671 ERROR [STDERR]     at
>> com 
>> .xerox 
>> .mywebboard 
>> .xeroxArticleSearchPortlet.search(xeroxArticleSearchPortlet.java:45)
>> 09:43:42,671 ERROR [STDERR]     at
>> com 
>> .xerox 
>> .mywebboard 
>> .xeroxArticleSearchPortlet 
>> .processAction(xeroxArticleSearchPortlet.java:27)
>> 09:43:42,671 ERROR [STDERR]     at
>> org 
>> .jboss 
>> .portal 
>> .portlet 
>> .impl 
>> .jsr168.PortletContainerImpl.invokeAction(PortletContainerImpl.java
>> 09:43:42,687 ERROR [STDERR]     at
>> org 
>> .jboss 
>> .portal 
>> .portlet 
>> .impl.jsr168.PortletContainerImpl.dispatch(PortletContainerImpl.java: 
>> 401
>> 09:43:42,687 ERROR [STDERR]     at
>> org.jboss.portal.portlet.container.PortletContainerInvoker 
>> $1.invoke(PortletContainerInvoker.java
>> 09:43:42,687 ERROR [STDERR]     at
>> org 
>> .jboss 
>> .portal.common.invocation.Invocation.invokeNext(Invocation.java:131)
>> 09:43:42,687 ERROR [STDERR]     at
>> org.jboss.portal.core.aspects.portlet.TransactionInterceptor.org 
>> $jboss$portal$core$aspects$portl
>> 09:43:42,687 ERROR [STDERR]     at
>> org.jboss.portal.core.aspects.portlet.TransactionInterceptor 
>> $invokeNotSupported_N454727078796479
>> 09:43:42,687 ERROR [STDERR]     at
>> org.jboss.aspects.tx.TxPolicy.invokeInNoTx(TxPolicy.java:66)
>> 09:43:42,687 ERROR [STDERR]     at
>> org.jboss.aspects.tx.TxInterceptor 
>> $NotSupported.invoke(TxInterceptor.java:112)
>> 09:43:42,687 ERROR [STDERR]     at
>> org.jboss.portal.core.aspects.portlet.TransactionInterceptor 
>> $invokeNotSupported_N454727078796479
>> 09:43:42,687 ERROR [STDERR]     at
>> org.jboss.aspects.tx.TxPolicy.invokeInNoTx(TxPolicy.java:66)
>> 09:43:42,687 ERROR [STDERR]     at
>> org.jboss.aspects.tx.TxInterceptor 
>> $NotSupported.invoke(TxInterceptor.java:102)
>> 09:43:42,687 ERROR [STDERR]     at
>> org.jboss.portal.core.aspects.portlet.TransactionInterceptor 
>> $invokeNotSupported_N454727078796479
>> 09:43:42,687 ERROR [STDERR]     at
>> org 
>> .jboss 
>> .portal 
>> .core 
>> .aspects 
>> .portlet.TransactionInterceptor.invokeNotSupported(TransactionInter
>> 09:43:42,687 ERROR [STDERR]     at
>> org 
>> .jboss 
>> .portal 
>> .core 
>> .aspects 
>> .portlet.TransactionInterceptor.invoke(TransactionInterceptor.java:
>> 09:43:42,687 ERROR [STDERR]     at
>> org 
>> .jboss 
>> .portal 
>> .portlet 
>> .invocation.PortletInterceptor.invoke(PortletInterceptor.java:38)
>> 09:43:42,687 ERROR [STDERR]     at
>> org 
>> .jboss 
>> .portal.common.invocation.Invocation.invokeNext(Invocation.java:115)
>> 09:43:42,687 ERROR [STDERR]     at
>> org 
>> .jboss 
>> .portal 
>> .core 
>> .aspects.portlet.HeaderInterceptor.invoke(HeaderInterceptor.java:50)
>> 09:43:42,687 ERROR [STDERR]     at
>> org 
>> .jboss 
>> .portal 
>> .portlet 
>> .invocation.PortletInterceptor.invoke(PortletInterceptor.java:38)
>> 09:43:42,687 ERROR [STDERR]     at
>> org 
>> .jboss 
>> .portal.common.invocation.Invocation.invokeNext(Invocation.java:115)
>> 09:43:42,687 ERROR [STDERR]     at
>> org 
>> .jboss 
>> .portal 
>> .portlet 
>> .aspects 
>> .portlet.ProducerCacheInterceptor.invoke(ProducerCacheIntercepto
>> 09:43:42,687 ERROR [STDERR]     at
>> org 
>> .jboss 
>> .portal 
>> .portlet 
>> .invocation.PortletInterceptor.invoke(PortletInterceptor.java:38)
>> 09:43:42,687 ERROR [STDERR]     at
>> org 
>> .jboss 
>> .portal.common.invocation.Invocation.invokeNext(Invocation.java:115)
>> 09:43:42,687 ERROR [STDERR]     at
>> org 
>> .jboss 
>> .portal 
>> .core.aspects.portlet.AjaxInterceptor.invoke(AjaxInterceptor.java:51)
>> 09:43:42,687 ERROR [STDERR]     at
>> org 
>> .jboss 
>> .portal 
>> .portlet 
>> .invocation.PortletInterceptor.invoke(PortletInterceptor.java:38)
>> 09:43:42,687 ERROR [STDERR]     at
>> org 
>> .jboss 
>> .portal.common.invocation.Invocation.invokeNext(Invocation.java:115)
>> 09:43:42,687 ERROR [STDERR]     at
>> org 
>> .jboss 
>> .portal 
>> .portlet 
>> .aspects.portlet.ModesInterceptor.invoke(ModesInterceptor.java:62)
>> 09:43:42,687 ERROR [STDERR]     at
>> org 
>> .jboss 
>> .portal 
>> .portlet 
>> .invocation.PortletInterceptor.invoke(PortletInterceptor.java:38)
>> 09:43:42,687 ERROR [STDERR]     at
>> org 
>> .jboss 
>> .portal.common.invocation.Invocation.invokeNext(Invocation.java:115)
>> 09:43:42,687 ERROR [STDERR]     at
>> org 
>> .jboss 
>> .portal 
>> .portlet.bridge.BridgeInterceptor.invoke(BridgeInterceptor.java:47)
>> 09:43:42,687 ERROR [STDERR]     at
>> org 
>> .jboss 
>> .portal 
>> .portlet 
>> .invocation.PortletInterceptor.invoke(PortletInterceptor.java:38)
>> 09:43:42,687 ERROR [STDERR]     at
>> org 
>> .jboss 
>> .portal.common.invocation.Invocation.invokeNext(Invocation.java:115)
>>
>> -- 
>> View this message in context:
>> http://www.nabble.com/Lucene-Error-%3A-java.io.FileNotFoundException-tp18251744p18251744.html
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/Lucene-Error-%3A-java.io.FileNotFoundException-tp18251744p18272463.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34777-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 04 04:15:38 2008
Return-Path: <java-user-return-34777-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73618 invoked from network); 4 Jul 2008 04:15:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Jul 2008 04:15:38 -0000
Received: (qmail 63866 invoked by uid 500); 4 Jul 2008 04:15:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63839 invoked by uid 500); 4 Jul 2008 04:15:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63827 invoked by uid 99); 4 Jul 2008 04:15:31 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Jul 2008 21:15:31 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [196.25.240.78] (HELO ctb-mesg8.saix.net) (196.25.240.78)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 Jul 2008 04:14:39 +0000
Received: from [192.168.0.10] (dsl-243-239-144.telkomadsl.co.za [41.243.239.144])
	by ctb-mesg8.saix.net (Postfix) with ESMTP id 48D494103
	for <java-user@lucene.apache.org>; Fri,  4 Jul 2008 06:14:56 +0200 (SAST)
Message-ID: <486DA3BE.7060802@stimulussoft.com>
Date: Fri, 04 Jul 2008 06:14:54 +0200
From: Jamie <jamie@stimulussoft.com>
User-Agent: Thunderbird 2.0.0.14 (Windows/20080421)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Store/Index Email Address in Lucene
References: <18257247.post@talk.nabble.com> <1CF712F2C803440C8F9584F8A51783C3@desktop>
In-Reply-To: <1CF712F2C803440C8F9584F8A51783C3@desktop>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi miztaken

Check out:

http://openmailarchiva.svn.sourceforge.net/viewvc/openmailarchiva/Server/trunk/src/com/stimulus/archiva/search/EmailFilter.java?view=markup

I think its what you want.
> I want to index email address in such a way that i can do WildCard, Phrase
> and Simple search on those items.
>
> for each document i will have email addresses string just like in the case
> of CC and TO in mails.
> for eg "abc@abc.com; dcd@cbd.com; john hopkings; anything@anything.com"
>
> Now what is the best way to store them so that i can do various type of
> search on them.
>
> Do i need the split the email address first and further split the single
> email address as well and store them in multiple fields?
>
> What is the best way to deal such case?
>   

Regards,

Jamie

-- 
Stimulus Software - MailArchiva
Email Archiving And Compliance



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34778-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 04 06:24:03 2008
Return-Path: <java-user-return-34778-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25443 invoked from network); 4 Jul 2008 06:24:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Jul 2008 06:24:03 -0000
Received: (qmail 81485 invoked by uid 500); 4 Jul 2008 06:23:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81448 invoked by uid 500); 4 Jul 2008 06:23:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81437 invoked by uid 99); 4 Jul 2008 06:23:56 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Jul 2008 23:23:56 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 Jul 2008 06:23:04 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KEehY-0007lS-Lf
	for java-user@lucene.apache.org; Thu, 03 Jul 2008 23:23:24 -0700
Message-ID: <18273569.post@talk.nabble.com>
Date: Thu, 3 Jul 2008 23:23:24 -0700 (PDT)
From: Gaurav Sharma <gaurav.gash@gmail.com>
To: java-user@lucene.apache.org
Subject: too many clauses exception
In-Reply-To: <17983491.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: gaurav.gash@gmail.com
References: <17983491.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org



Hi,

I am stuck with one more exception.
When i am using a wild card such as a* i am getting too many clauses
exception. It saying maximum clause count is set to 1024. Is there any way
to increase this count.
Can u please help me out in overcoming this.

Thanks in advance.
-Gaurav



-----
-Gaurav
-- 
View this message in context: http://www.nabble.com/indexing-unsupported-mime-types-using-Lucene-tp17983491p18273569.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34779-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 04 06:26:08 2008
Return-Path: <java-user-return-34779-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25989 invoked from network); 4 Jul 2008 06:26:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Jul 2008 06:26:07 -0000
Received: (qmail 83879 invoked by uid 500); 4 Jul 2008 06:25:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83840 invoked by uid 500); 4 Jul 2008 06:25:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83829 invoked by uid 99); 4 Jul 2008 06:25:58 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Jul 2008 23:25:58 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 Jul 2008 06:25:06 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KEejW-0007oY-KY
	for java-user@lucene.apache.org; Thu, 03 Jul 2008 23:25:26 -0700
Message-ID: <18273582.post@talk.nabble.com>
Date: Thu, 3 Jul 2008 23:25:26 -0700 (PDT)
From: Gaurav Sharma <gaurav.gash@gmail.com>
To: java-user@lucene.apache.org
Subject: too many clauses exception
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: gaurav.gash@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hi,

I am stuck with an exception in lucene (too many clauses).
When i am using a wild card such as a* i am getting too many clauses
exception. It saying maximum clause count is set to 1024. Is there any way
to increase this count.
Can u please help me out in overcoming this.

Thanks in advance.
-Gaurav

-----
-Gaurav
-- 
View this message in context: http://www.nabble.com/too-many-clauses-exception-tp18273582p18273582.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34780-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 04 06:28:28 2008
Return-Path: <java-user-return-34780-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26616 invoked from network); 4 Jul 2008 06:28:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Jul 2008 06:28:28 -0000
Received: (qmail 86931 invoked by uid 500); 4 Jul 2008 06:28:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86898 invoked by uid 500); 4 Jul 2008 06:28:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86887 invoked by uid 99); 4 Jul 2008 06:28:21 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Jul 2008 23:28:21 -0700
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of chris.lu@gmail.com designates 209.85.132.243 as permitted sender)
Received: from [209.85.132.243] (HELO an-out-0708.google.com) (209.85.132.243)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 Jul 2008 06:27:27 +0000
Received: by an-out-0708.google.com with SMTP id c37so223679anc.49
        for <java-user@lucene.apache.org>; Thu, 03 Jul 2008 23:27:48 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=sEc/z06ailbTUeK9qllyi5hTiB4ew7Q1Vmynty4LiLE=;
        b=VyIu2pMeAbiD0sDbgr2+iZFC/jqKnwJ+kft+06ujUlpkkLVvYU53HFyhRz4mhAK9Tm
         Qk3Ip4PpIti2gK1P1cyQMVa7Rl34nqaHB47ylp9AbPDA6qkXislQWcb1bjIdLDRgYgtS
         o7Z/c/WwcohUQtQ6K95pXSuXUrduVUHsfU2No=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=aLb0EdRConPGrKm7DDopf/ebbs5wIMPPc5zX2vnDUmB52iyQylMVW6cyO0GCNBIfYN
         QyHQsge88PoXzlgKx2399+2/RN1ceMiRqRN/OwV8rxinB5K8K/zzyGEPV6+SQ2u5of/v
         dnhNAIF9oUNTNd6q3Ohr2h+AzDb4Fh/EJOkDs=
Received: by 10.100.122.12 with SMTP id u12mr162693anc.109.1215152867426;
        Thu, 03 Jul 2008 23:27:47 -0700 (PDT)
Received: by 10.100.140.20 with HTTP; Thu, 3 Jul 2008 23:27:47 -0700 (PDT)
Message-ID: <6e3ae6310807032327jcfb5fdge623034984730bfb@mail.gmail.com>
Date: Thu, 3 Jul 2008 23:27:47 -0700
From: "Chris Lu" <chris.lu@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: too many clauses exception
In-Reply-To: <18273569.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_10643_19729118.1215152867406"
References: <17983491.post@talk.nabble.com> <18273569.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_10643_19729118.1215152867406
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

This is easy, use:
        BooleanQuery.setMaxClauseCount(4096);

-- 
Chris Lu
-------------------------
Instant Scalable Full-Text Search On Any Database/Application
site: http://www.dbsight.net
demo: http://search.dbsight.com
Lucene Database Search in 3 minutes:
http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_minutes
DBSight customer, a shopping comparison site, (anonymous per request) got
2.6 Million Euro funding!

On Thu, Jul 3, 2008 at 11:23 PM, Gaurav Sharma <gaurav.gash@gmail.com>
wrote:

>
>
> Hi,
>
> I am stuck with one more exception.
> When i am using a wild card such as a* i am getting too many clauses
> exception. It saying maximum clause count is set to 1024. Is there any way
> to increase this count.
> Can u please help me out in overcoming this.
>
> Thanks in advance.
> -Gaurav
>
>
>
> -----
> -Gaurav
> --
> View this message in context:
> http://www.nabble.com/indexing-unsupported-mime-types-using-Lucene-tp17983491p18273569.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_10643_19729118.1215152867406--

From java-user-return-34781-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 04 06:31:16 2008
Return-Path: <java-user-return-34781-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 28791 invoked from network); 4 Jul 2008 06:31:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Jul 2008 06:31:16 -0000
Received: (qmail 93807 invoked by uid 500); 4 Jul 2008 06:31:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93768 invoked by uid 500); 4 Jul 2008 06:31:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93757 invoked by uid 99); 4 Jul 2008 06:31:10 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Jul 2008 23:31:10 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 Jul 2008 06:30:18 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KEeoZ-0007x7-4U
	for java-user@lucene.apache.org; Thu, 03 Jul 2008 23:30:39 -0700
Message-ID: <18273644.post@talk.nabble.com>
Date: Thu, 3 Jul 2008 23:30:39 -0700 (PDT)
From: RanjithStar <ranjith2211@gmail.com>
To: java-user@lucene.apache.org
Subject: Multifield Search with OR and AND on different doc Fields
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: ranjith2211@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


My requirement is to search on SEVEN Fields say F1,F2,F3,F4,F5,F6,F7 having
F1,F2,F3,F4 on one doc index
and F5,F6,F7 on a different doc index


I need to perform a search with ((F1=9 AND F2=4) AND (F3=keyword OR
F4=keyword)) OR (F5=9 AND F6=4 AND F7=keyword)

For normal search I was doing like this:
String[] sFields = { ID1, ID2, TITLE, CONTENT };
String[] sQuery = { id1, id2, sKeyword, sKeyword };
Occur[] flag = { BooleanClause.Occur.MUST, BooleanClause.Occur.MUST,
BooleanClause.Occur.MUST, BooleanClause.Occur.MUST }; 
				
Query oQuery = oMultiParser.parse(sQuery, sFields, flag, oAnalyzer) ;
Hits hits = indexSearcher.search(oQuery);


How can I modify the above query in such a way that it has to search on
different doc Indexes?
-- 
View this message in context: http://www.nabble.com/Multifield-Search-with-OR-and-AND-on-different-doc-Fields-tp18273644p18273644.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34782-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 04 06:44:20 2008
Return-Path: <java-user-return-34782-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33132 invoked from network); 4 Jul 2008 06:44:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Jul 2008 06:44:20 -0000
Received: (qmail 9719 invoked by uid 500); 4 Jul 2008 06:43:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9687 invoked by uid 500); 4 Jul 2008 06:43:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9675 invoked by uid 99); 4 Jul 2008 06:43:25 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Jul 2008 23:43:25 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 Jul 2008 06:42:33 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KEf0Q-0008IZ-1j
	for java-user@lucene.apache.org; Thu, 03 Jul 2008 23:42:54 -0700
Message-ID: <18273786.post@talk.nabble.com>
Date: Thu, 3 Jul 2008 23:42:54 -0700 (PDT)
From: miztaken <justjunktome@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Store/Index Email Address in Lucene
In-Reply-To: <486DA3BE.7060802@stimulussoft.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: justjunktome@gmail.com
References: <18257247.post@talk.nabble.com> <1CF712F2C803440C8F9584F8A51783C3@desktop> <486DA3BE.7060802@stimulussoft.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Hi there,
Thanks for the comment.
So basically it will be lame to add new field for each email address, wont
it?

How about getting unique tokens from string of email addresses using
EmailFilter.java class and storing it in as a single field ?




Jamie-52 wrote:
> 
> Hi miztaken
> 
> Check out:
> 
> http://openmailarchiva.svn.sourceforge.net/viewvc/openmailarchiva/Server/trunk/src/com/stimulus/archiva/search/EmailFilter.java?view=markup
> 
> I think its what you want.
>> I want to index email address in such a way that i can do WildCard,
>> Phrase
>> and Simple search on those items.
>>
>> for each document i will have email addresses string just like in the
>> case
>> of CC and TO in mails.
>> for eg "abc@abc.com; dcd@cbd.com; john hopkings; anything@anything.com"
>>
>> Now what is the best way to store them so that i can do various type of
>> search on them.
>>
>> Do i need the split the email address first and further split the single
>> email address as well and store them in multiple fields?
>>
>> What is the best way to deal such case?
>>   
> 
> Regards,
> 
> Jamie
> 
> -- 
> Stimulus Software - MailArchiva
> Email Archiving And Compliance
> 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/Store-Index-Email-Address-in-Lucene-tp18257247p18273786.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34783-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 04 06:47:03 2008
Return-Path: <java-user-return-34783-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 34159 invoked from network); 4 Jul 2008 06:47:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Jul 2008 06:47:02 -0000
Received: (qmail 14838 invoked by uid 500); 4 Jul 2008 06:46:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14803 invoked by uid 500); 4 Jul 2008 06:46:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 14792 invoked by uid 99); 4 Jul 2008 06:46:52 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 03 Jul 2008 23:46:52 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of keithmatthewwatson@gmail.com designates 209.85.146.177 as permitted sender)
Received: from [209.85.146.177] (HELO wa-out-1112.google.com) (209.85.146.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 Jul 2008 06:46:01 +0000
Received: by wa-out-1112.google.com with SMTP id l24so753421waf.11
        for <java-user@lucene.apache.org>; Thu, 03 Jul 2008 23:46:22 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:from:to
         :in-reply-to:content-type:content-transfer-encoding:mime-version
         :subject:date:references:x-mailer;
        bh=heJnwt/b3OyS3yzHfVApyvwpSGQ2vmRKgf3wYKEctoE=;
        b=BFH3UMR8pug5gauSOQAF8SpHfpIQTI4OocFePz0xvSjgcMSdq6uH7MPcSQEjiuORVt
         lzpDnGRnNxP4VDwkkqPz3IIbyEIS5k1NaPjShNb96Fo5AsYXrwTOu42s5beFEuOVOXg0
         KkcPC7jM7sPrV0Tgdpb9Tlu75CmGaaxzQteUY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:from:to:in-reply-to:content-type
         :content-transfer-encoding:mime-version:subject:date:references
         :x-mailer;
        b=L0a4TqC1m3d0wmTnYg4t+u1gech97Nn1TbCVl9Re8mqhlLe1LT9Ak03Iu4hVU8vC9A
         gV4biNgRcWO5CufO1un2bXlG7bvGd6p3/s0COHLg9muJpiBN7k3ViKVkOvQiKZhcTioP
         wp/u9J4PbB/rNxXGehBXGRCTZFle16zImy0B0=
Received: by 10.114.109.1 with SMTP id h1mr2889323wac.35.1215153981865;
        Thu, 03 Jul 2008 23:46:21 -0700 (PDT)
Received: from ?192.168.0.2? ( [87.81.46.146])
        by mx.google.com with ESMTPS id q9sm2037218gve.5.2008.07.03.23.45.49
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Thu, 03 Jul 2008 23:46:20 -0700 (PDT)
Message-Id: <064CBD0B-0512-47E7-8788-3AF9FCB39E44@gmail.com>
From: Keith Watson <keithmatthewwatson@gmail.com>
To: java-user@lucene.apache.org
In-Reply-To: <5E7150F9-A1F9-4F42-8A98-4CC7C128F1A1@aconex.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: Memory Usage
Date: Fri, 4 Jul 2008 07:45:46 +0100
References: <3DFF5FF4-5D23-4470-894A-7667F9883B66@gmail.com> <5E7150F9-A1F9-4F42-8A98-4CC7C128F1A1@aconex.com>
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org


Thanks very much for this; I'll give it a shot.

Keith.


On 4 Jul 2008, at 00:02, Paul Smith wrote:

>>
>>
>> (there are around 6,000,000 posts on the message board database)
>>
>> Date encoded as yyMMdd: appears to be using around 30M
>> Date encoded as yyMMddHHmmss:  appears to be using more than 400M!
>>
>> I guess I would have understood if I was seeing the usage double  
>> for sure, or even a little more; no idea how you guys encode the  
>> indexes, if at all, but it's gone up over tenfold, which I can't  
>> explain.
>
> Sort memory cost is based on the total # of unique terms for the  
> given field (multiplied by the number of locale's involved if you  
> have to do that too! but in temporal sorting you don't).
>
> This is easier than you think, just use 2 fields (date, time) and  
> sort by both.  This means the Date field's unique term count grows  
> only 1 term per day.  The Time field can be set to minutes (if you  
> can get away with that) meaning that you only have fairly  
> insignificant total term count for the time field.  We use this at  
> Aconex,  and have indexes with millions of records (weekly 'work'  
> searcher refreshed every 5 seconds, archive searcher is held in  
> memory, with a Multisearcher done over the 2) and it works a treat.   
> We regularly need to return million+ results from a search (don't  
> ask) using this sort of sorting and the overall search time is only  
> a few seconds.
>
> On a related note, work hard not to need to use Locale sensitive  
> sorting if you can for any other fields, for large results the CPU  
> penalty is horrific (even once you get past the synchronization  
> bottleneck in the CollationKey stuff).
>
> cheers,
>
> Paul Smith
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34784-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 04 08:58:29 2008
Return-Path: <java-user-return-34784-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79889 invoked from network); 4 Jul 2008 08:58:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Jul 2008 08:58:29 -0000
Received: (qmail 84969 invoked by uid 500); 4 Jul 2008 08:58:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84923 invoked by uid 500); 4 Jul 2008 08:58:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 84881 invoked by uid 99); 4 Jul 2008 08:58:21 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 Jul 2008 01:58:21 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=SPF_NEUTRAL,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.132.245] (HELO an-out-0708.google.com) (209.85.132.245)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 Jul 2008 08:57:28 +0000
Received: by an-out-0708.google.com with SMTP id c37so231360anc.49
        for <java-user@lucene.apache.org>; Fri, 04 Jul 2008 01:57:48 -0700 (PDT)
Received: by 10.100.41.4 with SMTP id o4mr252733ano.34.1215161864324;
        Fri, 04 Jul 2008 01:57:44 -0700 (PDT)
Received: from ?10.17.4.4? ( [72.93.214.93])
        by mx.google.com with ESMTPS id 6sm68660ywi.1.2008.07.04.01.57.43
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Fri, 04 Jul 2008 01:57:43 -0700 (PDT)
Message-Id: <B9D9C439-08E0-4816-98F2-933EA6088B97@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <18272463.post@talk.nabble.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v924)
Subject: Re: Lucene Error : java.io.FileNotFoundException
Date: Fri, 4 Jul 2008 04:57:42 -0400
References: <18251744.post@talk.nabble.com> <A823585C-9B07-4A29-87A8-31435AB1B44D@mikemccandless.com> <18272463.post@talk.nabble.com>
X-Mailer: Apple Mail (2.924)
X-Virus-Checked: Checked by ClamAV on apache.org


Are you getting exactly the same error (same source files and exact  
same line numbers)?  If so, somehow a Lucene 1.4 JAR is still sneaking  
in.

Lucene 1.4 won't be able to read an index created by Lucene 2.3.   
You'll see exactly that FileNotFoundException because newer versions  
of Lucene write to a segments_N file, while 1.4 tries to open just the  
file "segments".

Mike

yugana wrote:

>
> I have checked all the jars and tried replacing with the same  
> versions. Still
> I get the same error. Please let me know what else to check.
>
> yug
>
>
> Michael McCandless-2 wrote:
>>
>>
>> It looks like under JBoss you are accidentally using Lucene 1.4, not
>> 2.3.2.
>>
>> Mike
>>
>> yugana wrote:
>>
>>>
>>> Hi,
>>>
>>> I am indexing content and searching using lucene. It is working fine
>>> when I
>>> use the simple servlet and jsp mechanism. I am able to search on the
>>> indexed
>>> content. I tried to implement the same using JBoss Portal. When I
>>> try to run
>>> the search, I get the below error: Please help me to resolve the
>>> error. I am
>>> using Lucene 2.3.2
>>>
>>> 09:43:42,671 ERROR [STDERR] java.io.FileNotFoundException:
>>> D:\indexDir\segments (The system cannot find the file specified)
>>> 09:43:42,671 ERROR [STDERR]     at
>>> java.io.RandomAccessFile.open(Native
>>> Method)
>>> 09:43:42,671 ERROR [STDERR]     at
>>> java.io.RandomAccessFile.<init>(RandomAccessFile.java:212)
>>> 09:43:42,671 ERROR [STDERR]     at
>>> org.apache.lucene.store.FSInputStream
>>> $Descriptor.<init>(FSDirectory.java:376)
>>> 09:43:42,671 ERROR [STDERR]     at
>>> org.apache.lucene.store.FSInputStream.<init>(FSDirectory.java:405)
>>> 09:43:42,671 ERROR [STDERR]     at
>>> org.apache.lucene.store.FSDirectory.openFile(FSDirectory.java:268)
>>> 09:43:42,671 ERROR [STDERR]     at
>>> org.apache.lucene.index.SegmentInfos.read(SegmentInfos.java:40)
>>> 09:43:42,671 ERROR [STDERR]     at
>>> org.apache.lucene.index.IndexReader$1.doBody(IndexReader.java:116)
>>> 09:43:42,671 ERROR [STDERR]     at
>>> org.apache.lucene.store.Lock$With.run(Lock.java:109)
>>> 09:43:42,671 ERROR [STDERR]     at
>>> org.apache.lucene.index.IndexReader.open(IndexReader.java:111)
>>> 09:43:42,671 ERROR [STDERR]     at
>>> org.apache.lucene.index.IndexReader.open(IndexReader.java:95)
>>> 09:43:42,671 ERROR [STDERR]     at
>>> org.apache.lucene.search.IndexSearcher.<init>(IndexSearcher.java:38)
>>> 09:43:42,671 ERROR [STDERR]     at
>>> com.xerox.mywebboard.search.SearchManager.search(SearchManager.java:
>>> 53)
>>> 09:43:42,671 ERROR [STDERR]     at
>>> com
>>> .xerox
>>> .mywebboard
>>> .xeroxArticleSearchPortlet.search(xeroxArticleSearchPortlet.java:45)
>>> 09:43:42,671 ERROR [STDERR]     at
>>> com
>>> .xerox
>>> .mywebboard
>>> .xeroxArticleSearchPortlet
>>> .processAction(xeroxArticleSearchPortlet.java:27)
>>> 09:43:42,671 ERROR [STDERR]     at
>>> org
>>> .jboss
>>> .portal
>>> .portlet
>>> .impl
>>> .jsr168.PortletContainerImpl.invokeAction(PortletContainerImpl.java
>>> 09:43:42,687 ERROR [STDERR]     at
>>> org
>>> .jboss
>>> .portal
>>> .portlet
>>> .impl 
>>> .jsr168.PortletContainerImpl.dispatch(PortletContainerImpl.java:
>>> 401
>>> 09:43:42,687 ERROR [STDERR]     at
>>> org.jboss.portal.portlet.container.PortletContainerInvoker
>>> $1.invoke(PortletContainerInvoker.java
>>> 09:43:42,687 ERROR [STDERR]     at
>>> org
>>> .jboss
>>> .portal.common.invocation.Invocation.invokeNext(Invocation.java:131)
>>> 09:43:42,687 ERROR [STDERR]     at
>>> org.jboss.portal.core.aspects.portlet.TransactionInterceptor.org
>>> $jboss$portal$core$aspects$portl
>>> 09:43:42,687 ERROR [STDERR]     at
>>> org.jboss.portal.core.aspects.portlet.TransactionInterceptor
>>> $invokeNotSupported_N454727078796479
>>> 09:43:42,687 ERROR [STDERR]     at
>>> org.jboss.aspects.tx.TxPolicy.invokeInNoTx(TxPolicy.java:66)
>>> 09:43:42,687 ERROR [STDERR]     at
>>> org.jboss.aspects.tx.TxInterceptor
>>> $NotSupported.invoke(TxInterceptor.java:112)
>>> 09:43:42,687 ERROR [STDERR]     at
>>> org.jboss.portal.core.aspects.portlet.TransactionInterceptor
>>> $invokeNotSupported_N454727078796479
>>> 09:43:42,687 ERROR [STDERR]     at
>>> org.jboss.aspects.tx.TxPolicy.invokeInNoTx(TxPolicy.java:66)
>>> 09:43:42,687 ERROR [STDERR]     at
>>> org.jboss.aspects.tx.TxInterceptor
>>> $NotSupported.invoke(TxInterceptor.java:102)
>>> 09:43:42,687 ERROR [STDERR]     at
>>> org.jboss.portal.core.aspects.portlet.TransactionInterceptor
>>> $invokeNotSupported_N454727078796479
>>> 09:43:42,687 ERROR [STDERR]     at
>>> org
>>> .jboss
>>> .portal
>>> .core
>>> .aspects
>>> .portlet.TransactionInterceptor.invokeNotSupported(TransactionInter
>>> 09:43:42,687 ERROR [STDERR]     at
>>> org
>>> .jboss
>>> .portal
>>> .core
>>> .aspects
>>> .portlet.TransactionInterceptor.invoke(TransactionInterceptor.java:
>>> 09:43:42,687 ERROR [STDERR]     at
>>> org
>>> .jboss
>>> .portal
>>> .portlet
>>> .invocation.PortletInterceptor.invoke(PortletInterceptor.java:38)
>>> 09:43:42,687 ERROR [STDERR]     at
>>> org
>>> .jboss
>>> .portal.common.invocation.Invocation.invokeNext(Invocation.java:115)
>>> 09:43:42,687 ERROR [STDERR]     at
>>> org
>>> .jboss
>>> .portal
>>> .core
>>> .aspects.portlet.HeaderInterceptor.invoke(HeaderInterceptor.java:50)
>>> 09:43:42,687 ERROR [STDERR]     at
>>> org
>>> .jboss
>>> .portal
>>> .portlet
>>> .invocation.PortletInterceptor.invoke(PortletInterceptor.java:38)
>>> 09:43:42,687 ERROR [STDERR]     at
>>> org
>>> .jboss
>>> .portal.common.invocation.Invocation.invokeNext(Invocation.java:115)
>>> 09:43:42,687 ERROR [STDERR]     at
>>> org
>>> .jboss
>>> .portal
>>> .portlet
>>> .aspects
>>> .portlet.ProducerCacheInterceptor.invoke(ProducerCacheIntercepto
>>> 09:43:42,687 ERROR [STDERR]     at
>>> org
>>> .jboss
>>> .portal
>>> .portlet
>>> .invocation.PortletInterceptor.invoke(PortletInterceptor.java:38)
>>> 09:43:42,687 ERROR [STDERR]     at
>>> org
>>> .jboss
>>> .portal.common.invocation.Invocation.invokeNext(Invocation.java:115)
>>> 09:43:42,687 ERROR [STDERR]     at
>>> org
>>> .jboss
>>> .portal
>>> .core.aspects.portlet.AjaxInterceptor.invoke(AjaxInterceptor.java: 
>>> 51)
>>> 09:43:42,687 ERROR [STDERR]     at
>>> org
>>> .jboss
>>> .portal
>>> .portlet
>>> .invocation.PortletInterceptor.invoke(PortletInterceptor.java:38)
>>> 09:43:42,687 ERROR [STDERR]     at
>>> org
>>> .jboss
>>> .portal.common.invocation.Invocation.invokeNext(Invocation.java:115)
>>> 09:43:42,687 ERROR [STDERR]     at
>>> org
>>> .jboss
>>> .portal
>>> .portlet
>>> .aspects.portlet.ModesInterceptor.invoke(ModesInterceptor.java:62)
>>> 09:43:42,687 ERROR [STDERR]     at
>>> org
>>> .jboss
>>> .portal
>>> .portlet
>>> .invocation.PortletInterceptor.invoke(PortletInterceptor.java:38)
>>> 09:43:42,687 ERROR [STDERR]     at
>>> org
>>> .jboss
>>> .portal.common.invocation.Invocation.invokeNext(Invocation.java:115)
>>> 09:43:42,687 ERROR [STDERR]     at
>>> org
>>> .jboss
>>> .portal
>>> .portlet.bridge.BridgeInterceptor.invoke(BridgeInterceptor.java:47)
>>> 09:43:42,687 ERROR [STDERR]     at
>>> org
>>> .jboss
>>> .portal
>>> .portlet
>>> .invocation.PortletInterceptor.invoke(PortletInterceptor.java:38)
>>> 09:43:42,687 ERROR [STDERR]     at
>>> org
>>> .jboss
>>> .portal.common.invocation.Invocation.invokeNext(Invocation.java:115)
>>>
>>> -- 
>>> View this message in context:
>>> http://www.nabble.com/Lucene-Error-%3A-java.io.FileNotFoundException-tp18251744p18251744.html
>>> Sent from the Lucene - Java Users mailing list archive at  
>>> Nabble.com.
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>
> -- 
> View this message in context: http://www.nabble.com/Lucene-Error-%3A-java.io.FileNotFoundException-tp18251744p18272463.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34785-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 04 09:48:22 2008
Return-Path: <java-user-return-34785-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96302 invoked from network); 4 Jul 2008 09:48:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Jul 2008 09:48:22 -0000
Received: (qmail 45186 invoked by uid 500); 4 Jul 2008 09:48:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45163 invoked by uid 500); 4 Jul 2008 09:48:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 20463 invoked by uid 99); 3 Jul 2008 22:26:36 -0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of SRS0=5QM9po=XP=lucasmail.org=paul@yourhostingaccount.com designates 65.254.253.123 as permitted sender)
X-EN-OrigOutIP: 10.1.18.6
X-EN-IMPSID: laS41Z00207rVmq0000000
Message-Id: <868CA8F2-4F97-4CC1-98DB-C34E4A88A2F8@lucasmail.org>
From: Paul J. Lucas <paul@lucasmail.org>
To: java-user@lucene.apache.org
In-Reply-To: <3F71F1AB-3905-4097-8C86-E66916BDF521@lucasmail.org>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: Sorting case-insensitively
Date: Thu, 3 Jul 2008 15:25:59 -0700
References: <EB8A44A6-A9FF-4C0E-ACA8-9E0E21C5AD6F@lucasmail.org> <E91CC8FF-2D02-42C2-8CEA-6D5B61E4C253@ehatchersolutions.com> <3F71F1AB-3905-4097-8C86-E66916BDF521@lucasmail.org>
X-Mailer: Apple Mail (2.926)
X-EN-UserInfo: 19b3ee6e8bc35660ab25150f3ce1009e:104eb4694f5dc54e252b420fd863a3b6
X-EN-AuthUser: paul@pauljlucas.org
Sender:  Paul J. Lucas <paul@lucasmail.org>
X-EN-OrigIP: 76.201.168.3
X-EN-OrigHost: adsl-76-201-168-3.dsl.pltn13.sbcglobal.net
X-Virus-Checked: Checked by ClamAV on apache.org

On Jun 30, 2008, at 8:08 PM, Paul J. Lucas wrote:

> On Jun 30, 2008, at 8:55 PM, Paul J. Lucas wrote:
>> If I have a SortField with a type of STRING, is there any way to  
>> sort in a case-insensitive manner?
>
> Couldn't I also use a custom SortComparator?

OK, so I tried that by doing:

	SortField sortField = new SortField(
	    sortFieldName,
	    new CaseInsensitiveStringSortComparator(), descending
	);

where CaseInsensitiveStringSortComparator is:

	class CaseInsensitiveStringSortComparator extends SortComparator {
	    public Comparable getComparable( String termText ) {
	        return new CaseInsensitiveStringComparable( termText );
	    }
	}

and CaseInsensitiveStringComparable is:

	public class CaseInsensitiveStringComparable implements Comparable {
	
	    public CaseInsensitiveStringComparable( String s ) {
	        m_string = s.toLowerCase();
	    }
	
	    public int compareTo( Object o ) {
	        final String s;
	        if ( o instanceof CaseInsensitiveStringComparable )
	            s = ((CaseInsensitiveStringComparable)o).m_string;
	        else if ( o instanceof String )
	            s = ((String)o).toLowerCase();
	        else
	            throw new ClassCastException();
	        return m_string.compareTo( s );
	    }
	
	    public boolean equals( Object o ) {
	        if ( !(o instanceof CaseInsensitiveStringComparable ) )
	            return false;
	        final CaseInsensitiveStringComparable c =
	            (CaseInsensitiveStringComparable)o;
	        return m_string.equals( c.m_string );
	    }
	
	    public int hashCode() {
	        return m_string.hashCode();
	    }
	
	    private final String m_string;
	}

But when my code runs, I get a NullPointerException in Lucene's  
SortComparator,
line 54 which reads:

	return cachedValues[i.doc].compareTo (cachedValues[j.doc]);

because cachedCalues[i.doc] is null.  But why is it null?

- Paul

P.S.: Im using Lucene 2.3.2.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34786-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 04 10:12:54 2008
Return-Path: <java-user-return-34786-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3138 invoked from network); 4 Jul 2008 10:12:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Jul 2008 10:12:54 -0000
Received: (qmail 81915 invoked by uid 500); 4 Jul 2008 10:12:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81866 invoked by uid 500); 4 Jul 2008 10:12:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81855 invoked by uid 99); 4 Jul 2008 10:12:45 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 Jul 2008 03:12:45 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 Jul 2008 10:11:54 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KEiH0-0007Fq-6X
	for java-user@lucene.apache.org; Fri, 04 Jul 2008 03:12:14 -0700
Message-ID: <18276669.post@talk.nabble.com>
Date: Fri, 4 Jul 2008 03:12:14 -0700 (PDT)
From: yugana <yugandhar.adem@wipro.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene Error : java.io.FileNotFoundException
In-Reply-To: <B9D9C439-08E0-4816-98F2-933EA6088B97@mikemccandless.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: yugandhar.adem@wipro.com
References: <18251744.post@talk.nabble.com> <A823585C-9B07-4A29-87A8-31435AB1B44D@mikemccandless.com> <18272463.post@talk.nabble.com> <B9D9C439-08E0-4816-98F2-933EA6088B97@mikemccandless.com>
X-Virus-Checked: Checked by ClamAV on apache.org


I see a JAR file at
D:\jboss-portal-2.6.5.GA\server\default\deploy\jboss-portal.sar\portal-cms.sar\lib
. when I tried to replace this JAR with the new JAR file, I get the
following errors while restarting the JBoss server.

11:50:10,046 ERROR [URLDeploymentScanner] Incomplete Deployment listing:

--- MBeans waiting for other MBeans ---
ObjectName: portal:service=CMS
  State: FAILED
  Reason: java.lang.AbstractMethodError:
org.apache.lucene.store.Directory.openInput(Ljava/lang/String;)Lorg/apache/lucene/store/IndexInput;
  I Depend On:
    jboss.jca:service=DataSourceBinding,name=PortalDS
    portal:service=JAASLoginModule
    portal:service=Hibernate,type=CMS
    cms.pm.cache:service=TreeCache
    portal:service=AuthorizationManager,type=cms
    portal:service=InterceptorStackFactory,type=Cms
  Depends On Me:
    portal:commandFactory=CMSObject

--- MBEANS THAT ARE THE ROOT CAUSE OF THE PROBLEM ---
ObjectName: portal:service=CMS
  State: FAILED
  Reason: java.lang.AbstractMethodError:
org.apache.lucene.store.Directory.openInput(Ljava/lang/String;)Lorg/apache/lucene/store/IndexInput;
  I Depend On:
    jboss.jca:service=DataSourceBinding,name=PortalDS
    portal:service=JAASLoginModule
    portal:service=Hibernate,type=CMS
    cms.pm.cache:service=TreeCache
    portal:service=AuthorizationManager,type=cms
    portal:service=InterceptorStackFactory,type=Cms
  Depends On Me:
    portal:commandFactory=CMSObject




Michael McCandless-2 wrote:
> 
> 
> Are you getting exactly the same error (same source files and exact  
> same line numbers)?  If so, somehow a Lucene 1.4 JAR is still sneaking  
> in.
> 
> Lucene 1.4 won't be able to read an index created by Lucene 2.3.   
> You'll see exactly that FileNotFoundException because newer versions  
> of Lucene write to a segments_N file, while 1.4 tries to open just the  
> file "segments".
> 
> Mike
> 
> yugana wrote:
> 
>>
>> I have checked all the jars and tried replacing with the same  
>> versions. Still
>> I get the same error. Please let me know what else to check.
>>
>> yug
>>
>>
>> Michael McCandless-2 wrote:
>>>
>>>
>>> It looks like under JBoss you are accidentally using Lucene 1.4, not
>>> 2.3.2.
>>>
>>> Mike
>>>
>>> yugana wrote:
>>>
>>>>
>>>> Hi,
>>>>
>>>> I am indexing content and searching using lucene. It is working fine
>>>> when I
>>>> use the simple servlet and jsp mechanism. I am able to search on the
>>>> indexed
>>>> content. I tried to implement the same using JBoss Portal. When I
>>>> try to run
>>>> the search, I get the below error: Please help me to resolve the
>>>> error. I am
>>>> using Lucene 2.3.2
>>>>
>>>> 09:43:42,671 ERROR [STDERR] java.io.FileNotFoundException:
>>>> D:\indexDir\segments (The system cannot find the file specified)
>>>> 09:43:42,671 ERROR [STDERR]     at
>>>> java.io.RandomAccessFile.open(Native
>>>> Method)
>>>> 09:43:42,671 ERROR [STDERR]     at
>>>> java.io.RandomAccessFile.<init>(RandomAccessFile.java:212)
>>>> 09:43:42,671 ERROR [STDERR]     at
>>>> org.apache.lucene.store.FSInputStream
>>>> $Descriptor.<init>(FSDirectory.java:376)
>>>> 09:43:42,671 ERROR [STDERR]     at
>>>> org.apache.lucene.store.FSInputStream.<init>(FSDirectory.java:405)
>>>> 09:43:42,671 ERROR [STDERR]     at
>>>> org.apache.lucene.store.FSDirectory.openFile(FSDirectory.java:268)
>>>> 09:43:42,671 ERROR [STDERR]     at
>>>> org.apache.lucene.index.SegmentInfos.read(SegmentInfos.java:40)
>>>> 09:43:42,671 ERROR [STDERR]     at
>>>> org.apache.lucene.index.IndexReader$1.doBody(IndexReader.java:116)
>>>> 09:43:42,671 ERROR [STDERR]     at
>>>> org.apache.lucene.store.Lock$With.run(Lock.java:109)
>>>> 09:43:42,671 ERROR [STDERR]     at
>>>> org.apache.lucene.index.IndexReader.open(IndexReader.java:111)
>>>> 09:43:42,671 ERROR [STDERR]     at
>>>> org.apache.lucene.index.IndexReader.open(IndexReader.java:95)
>>>> 09:43:42,671 ERROR [STDERR]     at
>>>> org.apache.lucene.search.IndexSearcher.<init>(IndexSearcher.java:38)
>>>> 09:43:42,671 ERROR [STDERR]     at
>>>> com.xerox.mywebboard.search.SearchManager.search(SearchManager.java:
>>>> 53)
>>>> 09:43:42,671 ERROR [STDERR]     at
>>>> com
>>>> .xerox
>>>> .mywebboard
>>>> .xeroxArticleSearchPortlet.search(xeroxArticleSearchPortlet.java:45)
>>>> 09:43:42,671 ERROR [STDERR]     at
>>>> com
>>>> .xerox
>>>> .mywebboard
>>>> .xeroxArticleSearchPortlet
>>>> .processAction(xeroxArticleSearchPortlet.java:27)
>>>> 09:43:42,671 ERROR [STDERR]     at
>>>> org
>>>> .jboss
>>>> .portal
>>>> .portlet
>>>> .impl
>>>> .jsr168.PortletContainerImpl.invokeAction(PortletContainerImpl.java
>>>> 09:43:42,687 ERROR [STDERR]     at
>>>> org
>>>> .jboss
>>>> .portal
>>>> .portlet
>>>> .impl 
>>>> .jsr168.PortletContainerImpl.dispatch(PortletContainerImpl.java:
>>>> 401
>>>> 09:43:42,687 ERROR [STDERR]     at
>>>> org.jboss.portal.portlet.container.PortletContainerInvoker
>>>> $1.invoke(PortletContainerInvoker.java
>>>> 09:43:42,687 ERROR [STDERR]     at
>>>> org
>>>> .jboss
>>>> .portal.common.invocation.Invocation.invokeNext(Invocation.java:131)
>>>> 09:43:42,687 ERROR [STDERR]     at
>>>> org.jboss.portal.core.aspects.portlet.TransactionInterceptor.org
>>>> $jboss$portal$core$aspects$portl
>>>> 09:43:42,687 ERROR [STDERR]     at
>>>> org.jboss.portal.core.aspects.portlet.TransactionInterceptor
>>>> $invokeNotSupported_N454727078796479
>>>> 09:43:42,687 ERROR [STDERR]     at
>>>> org.jboss.aspects.tx.TxPolicy.invokeInNoTx(TxPolicy.java:66)
>>>> 09:43:42,687 ERROR [STDERR]     at
>>>> org.jboss.aspects.tx.TxInterceptor
>>>> $NotSupported.invoke(TxInterceptor.java:112)
>>>> 09:43:42,687 ERROR [STDERR]     at
>>>> org.jboss.portal.core.aspects.portlet.TransactionInterceptor
>>>> $invokeNotSupported_N454727078796479
>>>> 09:43:42,687 ERROR [STDERR]     at
>>>> org.jboss.aspects.tx.TxPolicy.invokeInNoTx(TxPolicy.java:66)
>>>> 09:43:42,687 ERROR [STDERR]     at
>>>> org.jboss.aspects.tx.TxInterceptor
>>>> $NotSupported.invoke(TxInterceptor.java:102)
>>>> 09:43:42,687 ERROR [STDERR]     at
>>>> org.jboss.portal.core.aspects.portlet.TransactionInterceptor
>>>> $invokeNotSupported_N454727078796479
>>>> 09:43:42,687 ERROR [STDERR]     at
>>>> org
>>>> .jboss
>>>> .portal
>>>> .core
>>>> .aspects
>>>> .portlet.TransactionInterceptor.invokeNotSupported(TransactionInter
>>>> 09:43:42,687 ERROR [STDERR]     at
>>>> org
>>>> .jboss
>>>> .portal
>>>> .core
>>>> .aspects
>>>> .portlet.TransactionInterceptor.invoke(TransactionInterceptor.java:
>>>> 09:43:42,687 ERROR [STDERR]     at
>>>> org
>>>> .jboss
>>>> .portal
>>>> .portlet
>>>> .invocation.PortletInterceptor.invoke(PortletInterceptor.java:38)
>>>> 09:43:42,687 ERROR [STDERR]     at
>>>> org
>>>> .jboss
>>>> .portal.common.invocation.Invocation.invokeNext(Invocation.java:115)
>>>> 09:43:42,687 ERROR [STDERR]     at
>>>> org
>>>> .jboss
>>>> .portal
>>>> .core
>>>> .aspects.portlet.HeaderInterceptor.invoke(HeaderInterceptor.java:50)
>>>> 09:43:42,687 ERROR [STDERR]     at
>>>> org
>>>> .jboss
>>>> .portal
>>>> .portlet
>>>> .invocation.PortletInterceptor.invoke(PortletInterceptor.java:38)
>>>> 09:43:42,687 ERROR [STDERR]     at
>>>> org
>>>> .jboss
>>>> .portal.common.invocation.Invocation.invokeNext(Invocation.java:115)
>>>> 09:43:42,687 ERROR [STDERR]     at
>>>> org
>>>> .jboss
>>>> .portal
>>>> .portlet
>>>> .aspects
>>>> .portlet.ProducerCacheInterceptor.invoke(ProducerCacheIntercepto
>>>> 09:43:42,687 ERROR [STDERR]     at
>>>> org
>>>> .jboss
>>>> .portal
>>>> .portlet
>>>> .invocation.PortletInterceptor.invoke(PortletInterceptor.java:38)
>>>> 09:43:42,687 ERROR [STDERR]     at
>>>> org
>>>> .jboss
>>>> .portal.common.invocation.Invocation.invokeNext(Invocation.java:115)
>>>> 09:43:42,687 ERROR [STDERR]     at
>>>> org
>>>> .jboss
>>>> .portal
>>>> .core.aspects.portlet.AjaxInterceptor.invoke(AjaxInterceptor.java: 
>>>> 51)
>>>> 09:43:42,687 ERROR [STDERR]     at
>>>> org
>>>> .jboss
>>>> .portal
>>>> .portlet
>>>> .invocation.PortletInterceptor.invoke(PortletInterceptor.java:38)
>>>> 09:43:42,687 ERROR [STDERR]     at
>>>> org
>>>> .jboss
>>>> .portal.common.invocation.Invocation.invokeNext(Invocation.java:115)
>>>> 09:43:42,687 ERROR [STDERR]     at
>>>> org
>>>> .jboss
>>>> .portal
>>>> .portlet
>>>> .aspects.portlet.ModesInterceptor.invoke(ModesInterceptor.java:62)
>>>> 09:43:42,687 ERROR [STDERR]     at
>>>> org
>>>> .jboss
>>>> .portal
>>>> .portlet
>>>> .invocation.PortletInterceptor.invoke(PortletInterceptor.java:38)
>>>> 09:43:42,687 ERROR [STDERR]     at
>>>> org
>>>> .jboss
>>>> .portal.common.invocation.Invocation.invokeNext(Invocation.java:115)
>>>> 09:43:42,687 ERROR [STDERR]     at
>>>> org
>>>> .jboss
>>>> .portal
>>>> .portlet.bridge.BridgeInterceptor.invoke(BridgeInterceptor.java:47)
>>>> 09:43:42,687 ERROR [STDERR]     at
>>>> org
>>>> .jboss
>>>> .portal
>>>> .portlet
>>>> .invocation.PortletInterceptor.invoke(PortletInterceptor.java:38)
>>>> 09:43:42,687 ERROR [STDERR]     at
>>>> org
>>>> .jboss
>>>> .portal.common.invocation.Invocation.invokeNext(Invocation.java:115)
>>>>
>>>> -- 
>>>> View this message in context:
>>>> http://www.nabble.com/Lucene-Error-%3A-java.io.FileNotFoundException-tp18251744p18251744.html
>>>> Sent from the Lucene - Java Users mailing list archive at  
>>>> Nabble.com.
>>>>
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>>
>>
>> -- 
>> View this message in context:
>> http://www.nabble.com/Lucene-Error-%3A-java.io.FileNotFoundException-tp18251744p18272463.html
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/Lucene-Error-%3A-java.io.FileNotFoundException-tp18251744p18276669.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34787-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 04 10:21:34 2008
Return-Path: <java-user-return-34787-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5270 invoked from network); 4 Jul 2008 10:21:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Jul 2008 10:21:34 -0000
Received: (qmail 704 invoked by uid 500); 4 Jul 2008 10:21:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 671 invoked by uid 500); 4 Jul 2008 10:21:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 659 invoked by uid 99); 4 Jul 2008 10:21:26 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 Jul 2008 03:21:26 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=SPF_NEUTRAL,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.132.247] (HELO an-out-0708.google.com) (209.85.132.247)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 Jul 2008 10:20:34 +0000
Received: by an-out-0708.google.com with SMTP id c37so237492anc.49
        for <java-user@lucene.apache.org>; Fri, 04 Jul 2008 03:20:52 -0700 (PDT)
Received: by 10.100.8.4 with SMTP id 4mr403315anh.38.1215166852558;
        Fri, 04 Jul 2008 03:20:52 -0700 (PDT)
Received: from ?10.17.4.4? ( [72.93.214.93])
        by mx.google.com with ESMTPS id 5sm212511ywd.2.2008.07.04.03.20.51
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Fri, 04 Jul 2008 03:20:52 -0700 (PDT)
Message-Id: <53811D23-8436-4B47-9327-55B0A7A7A0C3@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <18276669.post@talk.nabble.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v924)
Subject: Re: Lucene Error : java.io.FileNotFoundException
Date: Fri, 4 Jul 2008 06:20:50 -0400
References: <18251744.post@talk.nabble.com> <A823585C-9B07-4A29-87A8-31435AB1B44D@mikemccandless.com> <18272463.post@talk.nabble.com> <B9D9C439-08E0-4816-98F2-933EA6088B97@mikemccandless.com> <18276669.post@talk.nabble.com>
X-Mailer: Apple Mail (2.924)
X-Virus-Checked: Checked by ClamAV on apache.org


I'm not familiar with JBoss' error output, but, maybe this is telling  
you your version of HIbernate is also old (ie depends on Lucene 1.4)?

Mike

yugana wrote:

>
> I see a JAR file at
> D:\jboss-portal-2.6.5.GA\server\default\deploy\jboss-portal.sar 
> \portal-cms.sar\lib
> . when I tried to replace this JAR with the new JAR file, I get the
> following errors while restarting the JBoss server.
>
> 11:50:10,046 ERROR [URLDeploymentScanner] Incomplete Deployment  
> listing:
>
> --- MBeans waiting for other MBeans ---
> ObjectName: portal:service=CMS
>  State: FAILED
>  Reason: java.lang.AbstractMethodError:
> org.apache.lucene.store.Directory.openInput(Ljava/lang/String;)Lorg/ 
> apache/lucene/store/IndexInput;
>  I Depend On:
>    jboss.jca:service=DataSourceBinding,name=PortalDS
>    portal:service=JAASLoginModule
>    portal:service=Hibernate,type=CMS
>    cms.pm.cache:service=TreeCache
>    portal:service=AuthorizationManager,type=cms
>    portal:service=InterceptorStackFactory,type=Cms
>  Depends On Me:
>    portal:commandFactory=CMSObject
>
> --- MBEANS THAT ARE THE ROOT CAUSE OF THE PROBLEM ---
> ObjectName: portal:service=CMS
>  State: FAILED
>  Reason: java.lang.AbstractMethodError:
> org.apache.lucene.store.Directory.openInput(Ljava/lang/String;)Lorg/ 
> apache/lucene/store/IndexInput;
>  I Depend On:
>    jboss.jca:service=DataSourceBinding,name=PortalDS
>    portal:service=JAASLoginModule
>    portal:service=Hibernate,type=CMS
>    cms.pm.cache:service=TreeCache
>    portal:service=AuthorizationManager,type=cms
>    portal:service=InterceptorStackFactory,type=Cms
>  Depends On Me:
>    portal:commandFactory=CMSObject
>
>
>
>
> Michael McCandless-2 wrote:
>>
>>
>> Are you getting exactly the same error (same source files and exact
>> same line numbers)?  If so, somehow a Lucene 1.4 JAR is still  
>> sneaking
>> in.
>>
>> Lucene 1.4 won't be able to read an index created by Lucene 2.3.
>> You'll see exactly that FileNotFoundException because newer versions
>> of Lucene write to a segments_N file, while 1.4 tries to open just  
>> the
>> file "segments".
>>
>> Mike
>>
>> yugana wrote:
>>
>>>
>>> I have checked all the jars and tried replacing with the same
>>> versions. Still
>>> I get the same error. Please let me know what else to check.
>>>
>>> yug
>>>
>>>
>>> Michael McCandless-2 wrote:
>>>>
>>>>
>>>> It looks like under JBoss you are accidentally using Lucene 1.4,  
>>>> not
>>>> 2.3.2.
>>>>
>>>> Mike
>>>>
>>>> yugana wrote:
>>>>
>>>>>
>>>>> Hi,
>>>>>
>>>>> I am indexing content and searching using lucene. It is working  
>>>>> fine
>>>>> when I
>>>>> use the simple servlet and jsp mechanism. I am able to search on  
>>>>> the
>>>>> indexed
>>>>> content. I tried to implement the same using JBoss Portal. When I
>>>>> try to run
>>>>> the search, I get the below error: Please help me to resolve the
>>>>> error. I am
>>>>> using Lucene 2.3.2
>>>>>
>>>>> 09:43:42,671 ERROR [STDERR] java.io.FileNotFoundException:
>>>>> D:\indexDir\segments (The system cannot find the file specified)
>>>>> 09:43:42,671 ERROR [STDERR]     at
>>>>> java.io.RandomAccessFile.open(Native
>>>>> Method)
>>>>> 09:43:42,671 ERROR [STDERR]     at
>>>>> java.io.RandomAccessFile.<init>(RandomAccessFile.java:212)
>>>>> 09:43:42,671 ERROR [STDERR]     at
>>>>> org.apache.lucene.store.FSInputStream
>>>>> $Descriptor.<init>(FSDirectory.java:376)
>>>>> 09:43:42,671 ERROR [STDERR]     at
>>>>> org.apache.lucene.store.FSInputStream.<init>(FSDirectory.java:405)
>>>>> 09:43:42,671 ERROR [STDERR]     at
>>>>> org.apache.lucene.store.FSDirectory.openFile(FSDirectory.java:268)
>>>>> 09:43:42,671 ERROR [STDERR]     at
>>>>> org.apache.lucene.index.SegmentInfos.read(SegmentInfos.java:40)
>>>>> 09:43:42,671 ERROR [STDERR]     at
>>>>> org.apache.lucene.index.IndexReader$1.doBody(IndexReader.java:116)
>>>>> 09:43:42,671 ERROR [STDERR]     at
>>>>> org.apache.lucene.store.Lock$With.run(Lock.java:109)
>>>>> 09:43:42,671 ERROR [STDERR]     at
>>>>> org.apache.lucene.index.IndexReader.open(IndexReader.java:111)
>>>>> 09:43:42,671 ERROR [STDERR]     at
>>>>> org.apache.lucene.index.IndexReader.open(IndexReader.java:95)
>>>>> 09:43:42,671 ERROR [STDERR]     at
>>>>> org.apache.lucene.search.IndexSearcher.<init>(IndexSearcher.java: 
>>>>> 38)
>>>>> 09:43:42,671 ERROR [STDERR]     at
>>>>> com 
>>>>> .xerox.mywebboard.search.SearchManager.search(SearchManager.java:
>>>>> 53)
>>>>> 09:43:42,671 ERROR [STDERR]     at
>>>>> com
>>>>> .xerox
>>>>> .mywebboard
>>>>> .xeroxArticleSearchPortlet.search(xeroxArticleSearchPortlet.java: 
>>>>> 45)
>>>>> 09:43:42,671 ERROR [STDERR]     at
>>>>> com
>>>>> .xerox
>>>>> .mywebboard
>>>>> .xeroxArticleSearchPortlet
>>>>> .processAction(xeroxArticleSearchPortlet.java:27)
>>>>> 09:43:42,671 ERROR [STDERR]     at
>>>>> org
>>>>> .jboss
>>>>> .portal
>>>>> .portlet
>>>>> .impl
>>>>> .jsr168 
>>>>> .PortletContainerImpl.invokeAction(PortletContainerImpl.java
>>>>> 09:43:42,687 ERROR [STDERR]     at
>>>>> org
>>>>> .jboss
>>>>> .portal
>>>>> .portlet
>>>>> .impl
>>>>> .jsr168.PortletContainerImpl.dispatch(PortletContainerImpl.java:
>>>>> 401
>>>>> 09:43:42,687 ERROR [STDERR]     at
>>>>> org.jboss.portal.portlet.container.PortletContainerInvoker
>>>>> $1.invoke(PortletContainerInvoker.java
>>>>> 09:43:42,687 ERROR [STDERR]     at
>>>>> org
>>>>> .jboss
>>>>> .portal.common.invocation.Invocation.invokeNext(Invocation.java: 
>>>>> 131)
>>>>> 09:43:42,687 ERROR [STDERR]     at
>>>>> org.jboss.portal.core.aspects.portlet.TransactionInterceptor.org
>>>>> $jboss$portal$core$aspects$portl
>>>>> 09:43:42,687 ERROR [STDERR]     at
>>>>> org.jboss.portal.core.aspects.portlet.TransactionInterceptor
>>>>> $invokeNotSupported_N454727078796479
>>>>> 09:43:42,687 ERROR [STDERR]     at
>>>>> org.jboss.aspects.tx.TxPolicy.invokeInNoTx(TxPolicy.java:66)
>>>>> 09:43:42,687 ERROR [STDERR]     at
>>>>> org.jboss.aspects.tx.TxInterceptor
>>>>> $NotSupported.invoke(TxInterceptor.java:112)
>>>>> 09:43:42,687 ERROR [STDERR]     at
>>>>> org.jboss.portal.core.aspects.portlet.TransactionInterceptor
>>>>> $invokeNotSupported_N454727078796479
>>>>> 09:43:42,687 ERROR [STDERR]     at
>>>>> org.jboss.aspects.tx.TxPolicy.invokeInNoTx(TxPolicy.java:66)
>>>>> 09:43:42,687 ERROR [STDERR]     at
>>>>> org.jboss.aspects.tx.TxInterceptor
>>>>> $NotSupported.invoke(TxInterceptor.java:102)
>>>>> 09:43:42,687 ERROR [STDERR]     at
>>>>> org.jboss.portal.core.aspects.portlet.TransactionInterceptor
>>>>> $invokeNotSupported_N454727078796479
>>>>> 09:43:42,687 ERROR [STDERR]     at
>>>>> org
>>>>> .jboss
>>>>> .portal
>>>>> .core
>>>>> .aspects
>>>>> .portlet 
>>>>> .TransactionInterceptor.invokeNotSupported(TransactionInter
>>>>> 09:43:42,687 ERROR [STDERR]     at
>>>>> org
>>>>> .jboss
>>>>> .portal
>>>>> .core
>>>>> .aspects
>>>>> .portlet 
>>>>> .TransactionInterceptor.invoke(TransactionInterceptor.java:
>>>>> 09:43:42,687 ERROR [STDERR]     at
>>>>> org
>>>>> .jboss
>>>>> .portal
>>>>> .portlet
>>>>> .invocation.PortletInterceptor.invoke(PortletInterceptor.java:38)
>>>>> 09:43:42,687 ERROR [STDERR]     at
>>>>> org
>>>>> .jboss
>>>>> .portal.common.invocation.Invocation.invokeNext(Invocation.java: 
>>>>> 115)
>>>>> 09:43:42,687 ERROR [STDERR]     at
>>>>> org
>>>>> .jboss
>>>>> .portal
>>>>> .core
>>>>> .aspects.portlet.HeaderInterceptor.invoke(HeaderInterceptor.java: 
>>>>> 50)
>>>>> 09:43:42,687 ERROR [STDERR]     at
>>>>> org
>>>>> .jboss
>>>>> .portal
>>>>> .portlet
>>>>> .invocation.PortletInterceptor.invoke(PortletInterceptor.java:38)
>>>>> 09:43:42,687 ERROR [STDERR]     at
>>>>> org
>>>>> .jboss
>>>>> .portal.common.invocation.Invocation.invokeNext(Invocation.java: 
>>>>> 115)
>>>>> 09:43:42,687 ERROR [STDERR]     at
>>>>> org
>>>>> .jboss
>>>>> .portal
>>>>> .portlet
>>>>> .aspects
>>>>> .portlet.ProducerCacheInterceptor.invoke(ProducerCacheIntercepto
>>>>> 09:43:42,687 ERROR [STDERR]     at
>>>>> org
>>>>> .jboss
>>>>> .portal
>>>>> .portlet
>>>>> .invocation.PortletInterceptor.invoke(PortletInterceptor.java:38)
>>>>> 09:43:42,687 ERROR [STDERR]     at
>>>>> org
>>>>> .jboss
>>>>> .portal.common.invocation.Invocation.invokeNext(Invocation.java: 
>>>>> 115)
>>>>> 09:43:42,687 ERROR [STDERR]     at
>>>>> org
>>>>> .jboss
>>>>> .portal
>>>>> .core.aspects.portlet.AjaxInterceptor.invoke(AjaxInterceptor.java:
>>>>> 51)
>>>>> 09:43:42,687 ERROR [STDERR]     at
>>>>> org
>>>>> .jboss
>>>>> .portal
>>>>> .portlet
>>>>> .invocation.PortletInterceptor.invoke(PortletInterceptor.java:38)
>>>>> 09:43:42,687 ERROR [STDERR]     at
>>>>> org
>>>>> .jboss
>>>>> .portal.common.invocation.Invocation.invokeNext(Invocation.java: 
>>>>> 115)
>>>>> 09:43:42,687 ERROR [STDERR]     at
>>>>> org
>>>>> .jboss
>>>>> .portal
>>>>> .portlet
>>>>> .aspects.portlet.ModesInterceptor.invoke(ModesInterceptor.java:62)
>>>>> 09:43:42,687 ERROR [STDERR]     at
>>>>> org
>>>>> .jboss
>>>>> .portal
>>>>> .portlet
>>>>> .invocation.PortletInterceptor.invoke(PortletInterceptor.java:38)
>>>>> 09:43:42,687 ERROR [STDERR]     at
>>>>> org
>>>>> .jboss
>>>>> .portal.common.invocation.Invocation.invokeNext(Invocation.java: 
>>>>> 115)
>>>>> 09:43:42,687 ERROR [STDERR]     at
>>>>> org
>>>>> .jboss
>>>>> .portal
>>>>> .portlet.bridge.BridgeInterceptor.invoke(BridgeInterceptor.java: 
>>>>> 47)
>>>>> 09:43:42,687 ERROR [STDERR]     at
>>>>> org
>>>>> .jboss
>>>>> .portal
>>>>> .portlet
>>>>> .invocation.PortletInterceptor.invoke(PortletInterceptor.java:38)
>>>>> 09:43:42,687 ERROR [STDERR]     at
>>>>> org
>>>>> .jboss
>>>>> .portal.common.invocation.Invocation.invokeNext(Invocation.java: 
>>>>> 115)
>>>>>
>>>>> -- 
>>>>> View this message in context:
>>>>> http://www.nabble.com/Lucene-Error-%3A-java.io.FileNotFoundException-tp18251744p18251744.html
>>>>> Sent from the Lucene - Java Users mailing list archive at
>>>>> Nabble.com.
>>>>>
>>>>>
>>>>> ---------------------------------------------------------------------
>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>
>>>>
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>>
>>>
>>> -- 
>>> View this message in context:
>>> http://www.nabble.com/Lucene-Error-%3A-java.io.FileNotFoundException-tp18251744p18272463.html
>>> Sent from the Lucene - Java Users mailing list archive at  
>>> Nabble.com.
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>
> -- 
> View this message in context: http://www.nabble.com/Lucene-Error-%3A-java.io.FileNotFoundException-tp18251744p18276669.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34788-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 04 12:10:19 2008
Return-Path: <java-user-return-34788-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36823 invoked from network); 4 Jul 2008 12:10:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Jul 2008 12:10:19 -0000
Received: (qmail 29656 invoked by uid 500); 4 Jul 2008 12:10:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29614 invoked by uid 500); 4 Jul 2008 12:10:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29603 invoked by uid 99); 4 Jul 2008 12:10:13 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 Jul 2008 05:10:13 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [82.111.253.243] (HELO mail.uk.scalix.com) (82.111.253.243)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 Jul 2008 12:09:19 +0000
Received: from mail.uk.scalix.com (localhost.localdomain [127.0.0.1])
	by mail.uk.scalix.com (8.13.8/8.13.8) with ESMTP id m64C9bJl019053
	for <java-user@lucene.apache.org>; Fri, 4 Jul 2008 13:09:37 +0100
Received: from [10.11.108.233] (mail.uk.scalix.com [10.11.108.216])
    by mail.uk.scalix.com (Scalix SMTP Relay 11.4.1.11825)
    via ESMTP; Fri, 04 Jul 2008 13:09:37 +0100 (BST)
Date: Fri, 4 Jul 2008 13:09:37 +0100
From: Chris Bamford <chris.bamford@scalix.com>
To: java-user@lucene.apache.org
Message-ID: <486E1301.9070405@scalix.com>
In-Reply-To: <FE1AD9DDC2844278B19EA6C9D7DD90E9@desktop>
References: <486CD671.7070301@scalix.com>
References: <FE1AD9DDC2844278B19EA6C9D7DD90E9@desktop>
Subject: Re: Search question (newbie)
x-scalix-Hops: 1
User-Agent: Thunderbird 2.0.0.14 (X11/20080505)
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII";
	format="flowed"
Content-Disposition: inline
X-Spam-Checker-Version: SpamAssassin 3.2.4 (2008-01-01) on mail.uk.scalix.com
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.2 required=5.0 tests=AWL,BAYES_00 autolearn=ham
	version=3.2.4

John,

Thanks, I think I'm getting this now....  So you created your own 
BooleanQuery and parsed the string yourself, adding strings as  
TermQuerys etc., rather than using a QueryParser ?

Cheers,

- Chris

John Griffin wrote:
> Chris,
>
> I've had similar requirements in the past. First strip the quotes then
> create a BooleanQuery consisting of two separate queries.
>
> 1. TermQuery for the first term - Fred
> 2. PrefixQuery for the second term - Flintstone
>
> When you add each individual query to the BooleanQuery make sure the
> BooleanClause.Occur parameter is set to MUST (look at the BooleanQuery API
> docs). 
>
> Use the toString() method on the BooleanQuery after it's created to make
> sure you did it correctly.
>
> John G.
>
> -----Original Message-----
> From: Chris Bamford [mailto:chris.bamford@scalix.com] 
> Sent: Thursday, July 03, 2008 7:39 AM
> To: java-user@lucene.apache.org
> Subject: Search question (newbie)
>
> Hi,
>
> Can someone point me in the right direction please?
> How can I trap this situation correctly?  I receive user queries like 
> this (quotes included):
>
>     /from:"fred flintston*"/
>
> Which produces a query string of
>
>     /+from:fred  body:flintston/       (where /body/ is the default field)
>
> What I want is:
>
> /    +from:fred +from:flintston*/
>
> In other words, I want quoted expressions to be treated as single units..
> Thanks for any pointers,
>
> - Chris
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>   


-- 
------------------------------------------------------------------------
*Chris Bamford*
Senior Development Engineer 	<http://www.scalix.com>
------------------------------------------------------------------------
/Email / MSN/ 	chris.bamford@scalix.com
/Tel/ 	+44 (0)1344 381814 	  	/Skype/ 	c.bamford


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34789-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 04 13:13:50 2008
Return-Path: <java-user-return-34789-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59264 invoked from network); 4 Jul 2008 13:13:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Jul 2008 13:13:50 -0000
Received: (qmail 87248 invoked by uid 500); 4 Jul 2008 13:13:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86220 invoked by uid 500); 4 Jul 2008 13:13:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86209 invoked by uid 99); 4 Jul 2008 13:13:43 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 Jul 2008 06:13:43 -0700
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of yseeley@gmail.com designates 74.125.46.30 as permitted sender)
Received: from [74.125.46.30] (HELO yw-out-2324.google.com) (74.125.46.30)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 Jul 2008 13:12:51 +0000
Received: by yw-out-2324.google.com with SMTP id 3so489271ywj.5
        for <java-user@lucene.apache.org>; Fri, 04 Jul 2008 06:13:10 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:sender
         :to:subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references
         :x-google-sender-auth;
        bh=vSyvEZiuMug7/pTZ7rxjiF+k1bcoQGVY6lpE+S+xzhU=;
        b=XrbBCNLpAftsnA+pWTXX1NH6YkrwHhnET2BGwBSMyMiK/X+1/RfjmGK7IL/WAtZ7c/
         4H0kqzkhUh0ZsJcaQNESamyk7I3HU5kR/Yn6lPEstNhxif6pfnSlObAusYmSoBSdiwG3
         AtR/DLi7Gkchz/FLdrTTuKCDiKMo+o9eN9rms=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:sender:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references:x-google-sender-auth;
        b=dAW0BaqEr5LEs6ghzDv0vMuR4rrFb/3Wsnist7bWJCezm74nmO5zAbcxYNJM2QC91V
         mDvZxYglZ5KaMWq/ooHa64nJUHZuI43AYbd2iAEmLelbefzvhpRiZp9SemJwkZKRKzG4
         tAOHcCyV3RHjSHoxmCVxVEK5y3NM8J2r0NYJE=
Received: by 10.151.110.9 with SMTP id n9mr1894489ybm.161.1215177190090;
        Fri, 04 Jul 2008 06:13:10 -0700 (PDT)
Received: by 10.150.227.18 with HTTP; Fri, 4 Jul 2008 06:13:10 -0700 (PDT)
Message-ID: <c68e39170807040613m39155da7tf5066d9ebaf62cda@mail.gmail.com>
Date: Fri, 4 Jul 2008 09:13:10 -0400
From: "Yonik Seeley" <yonik@apache.org>
Sender: yseeley@gmail.com
To: java-user@lucene.apache.org
Subject: Re: Class in Lucene that Perform Search
In-Reply-To: <18271691.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <18250664.post@talk.nabble.com>
	 <c68e39170807022002y4b2f98edi6c129bc172cea4f4@mail.gmail.com>
	 <18253813.post@talk.nabble.com>
	 <c68e39170807030905q213102e9m4ad56963b038a44e@mail.gmail.com>
	 <18271691.post@talk.nabble.com>
X-Google-Sender-Auth: 0cdc84c4a42938fd
X-Virus-Checked: Checked by ClamAV on apache.org

Moving to java-user.

Index the field and use the FieldCache.
You don't want to modify core lucene classes for this common use-case.

-Yonik

On Thu, Jul 3, 2008 at 10:37 PM, blazingwolf7 <blazingwolf7@gmail.com> wrote:
> I am trying to retrieve the contentLength and the URL of each document from
> the index without  continuously using IndexReader, eg:
> reader.document.get("ur");
>
> I am trying to find a way to retrieve all this value and stored it into an
> array by using the IndexReader only once or twice. I thought maybe I can
> store some extra value into the .frq file then I will have no need to
> continuously use the reader. Anyone can provide other suggestion? Thanks
>
>
> Yonik Seeley wrote:
>>
>> On Thu, Jul 3, 2008 at 4:03 AM, blazingwolf7 <blazingwolf7@gmail.com>
>> wrote:
>>> Ah, thanks! I am clear now. Have to change tactics to achieve what I
>>> need.
>>> Which class during indexing time will create the .frq file?
>>
>> DocumentsWriter (called from IndexWriter).
>>
>>> If possible, I want to add an extra value into it so that I can retrieve
>>> the
>>> information during the searching process. Thank
>>
>> Look at payloads first.
>> What problem are you trying to solve?  Someone may have an easier
>> approach for you if payloads doesn't work.
>>
>> -Yonik
>>
>>
>>
>>>
>>> Yonik Seeley wrote:
>>>>
>>>> On Wed, Jul 2, 2008 at 10:30 PM, blazingwolf7 <blazingwolf7@gmail.com>
>>>> wrote:
>>>>> What I am missing is that I fail to locate the class that perform the
>>>>> actual
>>>>> comparison to determine if a query match any term in a document.
>>>>
>>>> You need to understand the inverted index format.  Documents that
>>>> match a term is determined at index time, not at query time.  The .frq
>>>> file lists all documents that match each term.
>>>>
>>>> TermDocs iterates over all documents that match the term by reading
>>>> the .frq file.
>>>>
>>>> -Yonik
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-dev-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-dev-help@lucene.apache.org
>>>>
>>>>
>>>>
>>>
>>> --
>>> View this message in context:
>>> http://www.nabble.com/Class-in-Lucene-that-Perform-Search-tp18250664p18253813.html
>>> Sent from the Lucene - Java Developer mailing list archive at Nabble.com.
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-dev-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-dev-help@lucene.apache.org
>>>
>>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-dev-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-dev-help@lucene.apache.org
>>
>>
>>
>
> --
> View this message in context: http://www.nabble.com/Class-in-Lucene-that-Perform-Search-tp18250664p18271691.html
> Sent from the Lucene - Java Developer mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-dev-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-dev-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34790-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 04 15:48:32 2008
Return-Path: <java-user-return-34790-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53770 invoked from network); 4 Jul 2008 15:48:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Jul 2008 15:48:31 -0000
Received: (qmail 49105 invoked by uid 500); 4 Jul 2008 15:48:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49073 invoked by uid 500); 4 Jul 2008 15:48:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49062 invoked by uid 99); 4 Jul 2008 15:48:26 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 Jul 2008 08:48:26 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [65.89.232.7] (HELO thebluezone.net) (65.89.232.7)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 Jul 2008 15:47:32 +0000
Received: from localhost (localhost [127.0.0.1])
	by thebluezone.net (Postfix) with ESMTP id 361A2286C2D
	for <java-user@lucene.apache.org>; Fri,  4 Jul 2008 09:47:52 -0600 (MDT)
Received: from thebluezone.net ([127.0.0.1])
	by localhost (mail1 [127.0.0.1]) (amavisd-new, port 10024) with ESMTP
	id 25705-07 for <java-user@lucene.apache.org>;
	Fri, 4 Jul 2008 09:47:49 -0600 (MDT)
Received: from desktop (unknown [65.89.233.61])
	by thebluezone.net (Postfix) with ESMTP id B5B30286C69
	for <java-user@lucene.apache.org>; Fri,  4 Jul 2008 09:47:49 -0600 (MDT)
From: "John Griffin" <jgriffin@thebluezone.net>
To: <java-user@lucene.apache.org>
References: <486CD671.7070301@scalix.com> <486E1301.9070405@scalix.com>
Subject: RE: Search question (newbie)
Date: Fri, 4 Jul 2008 09:47:45 -0600
Message-ID: <6CE478D621EC4132A2A91B3FCC2BD39D@desktop>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
In-Reply-To: <486E1301.9070405@scalix.com>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.5512
Thread-Index: AcjdzvvxIBuL3RvJTD6LIht47dpv2gAHQ84g
X-Virus-Scanned: by thebluezone.net
X-Virus-Checked: Checked by ClamAV on apache.org

Chris,

Yes, when there are multiple types of queries involved (Term & Wildcard in
this case) that's how I handle it. A disadvantage of this is that the user
input must be somewhat restricted since you need to know what's coming.

An important thing to remember is that Wildcard, Prefix and one other I
can't remember at the moment (sorry :>() are not passed through an analyzer.
So, the QueryParser's analyzer has no effect on them.

John G.


-----Original Message-----
From: Chris Bamford [mailto:chris.bamford@scalix.com] 
Sent: Friday, July 04, 2008 6:10 AM
To: java-user@lucene.apache.org
Subject: Re: Search question (newbie)

John,

Thanks, I think I'm getting this now....  So you created your own 
BooleanQuery and parsed the string yourself, adding strings as  
TermQuerys etc., rather than using a QueryParser ?

Cheers,

- Chris

John Griffin wrote:
> Chris,
>
> I've had similar requirements in the past. First strip the quotes then
> create a BooleanQuery consisting of two separate queries.
>
> 1. TermQuery for the first term - Fred
> 2. PrefixQuery for the second term - Flintstone
>
> When you add each individual query to the BooleanQuery make sure the
> BooleanClause.Occur parameter is set to MUST (look at the BooleanQuery API
> docs). 
>
> Use the toString() method on the BooleanQuery after it's created to make
> sure you did it correctly.
>
> John G.
>
> -----Original Message-----
> From: Chris Bamford [mailto:chris.bamford@scalix.com] 
> Sent: Thursday, July 03, 2008 7:39 AM
> To: java-user@lucene.apache.org
> Subject: Search question (newbie)
>
> Hi,
>
> Can someone point me in the right direction please?
> How can I trap this situation correctly?  I receive user queries like 
> this (quotes included):
>
>     /from:"fred flintston*"/
>
> Which produces a query string of
>
>     /+from:fred  body:flintston/       (where /body/ is the default field)
>
> What I want is:
>
> /    +from:fred +from:flintston*/
>
> In other words, I want quoted expressions to be treated as single units..
> Thanks for any pointers,
>
> - Chris
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>   


-- 
------------------------------------------------------------------------
*Chris Bamford*
Senior Development Engineer 	<http://www.scalix.com>
------------------------------------------------------------------------
/Email / MSN/ 	chris.bamford@scalix.com
/Tel/ 	+44 (0)1344 381814 	  	/Skype/ 	c.bamford


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34791-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 04 15:54:13 2008
Return-Path: <java-user-return-34791-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54957 invoked from network); 4 Jul 2008 15:54:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Jul 2008 15:54:13 -0000
Received: (qmail 60426 invoked by uid 500); 4 Jul 2008 15:54:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60397 invoked by uid 500); 4 Jul 2008 15:54:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60386 invoked by uid 99); 4 Jul 2008 15:54:07 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 Jul 2008 08:54:07 -0700
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [65.89.232.7] (HELO thebluezone.net) (65.89.232.7)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 Jul 2008 15:53:15 +0000
Received: from localhost (localhost [127.0.0.1])
	by thebluezone.net (Postfix) with ESMTP id 0A9DD286C0C
	for <java-user@lucene.apache.org>; Fri,  4 Jul 2008 09:53:06 -0600 (MDT)
Received: from thebluezone.net ([127.0.0.1])
	by localhost (mail1 [127.0.0.1]) (amavisd-new, port 10024) with ESMTP
	id 26719-08 for <java-user@lucene.apache.org>;
	Fri, 4 Jul 2008 09:53:03 -0600 (MDT)
Received: from desktop (unknown [65.89.233.61])
	by thebluezone.net (Postfix) with ESMTP id 64371286C2D
	for <java-user@lucene.apache.org>; Fri,  4 Jul 2008 09:53:03 -0600 (MDT)
From: "John Griffin" <jgriffin@thebluezone.net>
To: <java-user@lucene.apache.org>
References: <18251744.post@talk.nabble.com> <A823585C-9B07-4A29-87A8-31435AB1B44D@mikemccandless.com> <18272463.post@talk.nabble.com> <B9D9C439-08E0-4816-98F2-933EA6088B97@mikemccandless.com> <18276669.post@talk.nabble.com>
Subject: RE: Lucene Error : java.io.FileNotFoundException
Date: Fri, 4 Jul 2008 09:52:59 -0600
Message-ID: <7CD2DE3A386244F9A016264A24D18480@desktop>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
In-Reply-To: <18276669.post@talk.nabble.com>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.5512
Thread-Index: AcjdvpJphm+vqTqjTJm7SpvY/A4prQALuqcg
X-Virus-Scanned: by thebluezone.net
X-Virus-Checked: Checked by ClamAV on apache.org

Yug,

In the root directory of your JBoss install there is a file that lists all
the jar files your version of JBoss is guaranteed to work with
(jar-versions.xml). It looks like the jar you're trying to add has a
dependency on another jar that doesn't have what it's looking for.

Get on the JBoss forum and with luck someone will know what else you need to
replace.

John G.

-----Original Message-----
From: yugana [mailto:yugandhar.adem@wipro.com] 
Sent: Friday, July 04, 2008 4:12 AM
To: java-user@lucene.apache.org
Subject: Re: Lucene Error : java.io.FileNotFoundException


I see a JAR file at
D:\jboss-portal-2.6.5.GA\server\default\deploy\jboss-portal.sar\portal-cms.s
ar\lib
. when I tried to replace this JAR with the new JAR file, I get the
following errors while restarting the JBoss server.

11:50:10,046 ERROR [URLDeploymentScanner] Incomplete Deployment listing:

--- MBeans waiting for other MBeans ---
ObjectName: portal:service=CMS
  State: FAILED
  Reason: java.lang.AbstractMethodError:
org.apache.lucene.store.Directory.openInput(Ljava/lang/String;)Lorg/apache/l
ucene/store/IndexInput;
  I Depend On:
    jboss.jca:service=DataSourceBinding,name=PortalDS
    portal:service=JAASLoginModule
    portal:service=Hibernate,type=CMS
    cms.pm.cache:service=TreeCache
    portal:service=AuthorizationManager,type=cms
    portal:service=InterceptorStackFactory,type=Cms
  Depends On Me:
    portal:commandFactory=CMSObject

--- MBEANS THAT ARE THE ROOT CAUSE OF THE PROBLEM ---
ObjectName: portal:service=CMS
  State: FAILED
  Reason: java.lang.AbstractMethodError:
org.apache.lucene.store.Directory.openInput(Ljava/lang/String;)Lorg/apache/l
ucene/store/IndexInput;
  I Depend On:
    jboss.jca:service=DataSourceBinding,name=PortalDS
    portal:service=JAASLoginModule
    portal:service=Hibernate,type=CMS
    cms.pm.cache:service=TreeCache
    portal:service=AuthorizationManager,type=cms
    portal:service=InterceptorStackFactory,type=Cms
  Depends On Me:
    portal:commandFactory=CMSObject




Michael McCandless-2 wrote:
> 
> 
> Are you getting exactly the same error (same source files and exact  
> same line numbers)?  If so, somehow a Lucene 1.4 JAR is still sneaking  
> in.
> 
> Lucene 1.4 won't be able to read an index created by Lucene 2.3.   
> You'll see exactly that FileNotFoundException because newer versions  
> of Lucene write to a segments_N file, while 1.4 tries to open just the  
> file "segments".
> 
> Mike
> 
> yugana wrote:
> 
>>
>> I have checked all the jars and tried replacing with the same  
>> versions. Still
>> I get the same error. Please let me know what else to check.
>>
>> yug
>>
>>
>> Michael McCandless-2 wrote:
>>>
>>>
>>> It looks like under JBoss you are accidentally using Lucene 1.4, not
>>> 2.3.2.
>>>
>>> Mike
>>>
>>> yugana wrote:
>>>
>>>>
>>>> Hi,
>>>>
>>>> I am indexing content and searching using lucene. It is working fine
>>>> when I
>>>> use the simple servlet and jsp mechanism. I am able to search on the
>>>> indexed
>>>> content. I tried to implement the same using JBoss Portal. When I
>>>> try to run
>>>> the search, I get the below error: Please help me to resolve the
>>>> error. I am
>>>> using Lucene 2.3.2
>>>>
>>>> 09:43:42,671 ERROR [STDERR] java.io.FileNotFoundException:
>>>> D:\indexDir\segments (The system cannot find the file specified)
>>>> 09:43:42,671 ERROR [STDERR]     at
>>>> java.io.RandomAccessFile.open(Native
>>>> Method)
>>>> 09:43:42,671 ERROR [STDERR]     at
>>>> java.io.RandomAccessFile.<init>(RandomAccessFile.java:212)
>>>> 09:43:42,671 ERROR [STDERR]     at
>>>> org.apache.lucene.store.FSInputStream
>>>> $Descriptor.<init>(FSDirectory.java:376)
>>>> 09:43:42,671 ERROR [STDERR]     at
>>>> org.apache.lucene.store.FSInputStream.<init>(FSDirectory.java:405)
>>>> 09:43:42,671 ERROR [STDERR]     at
>>>> org.apache.lucene.store.FSDirectory.openFile(FSDirectory.java:268)
>>>> 09:43:42,671 ERROR [STDERR]     at
>>>> org.apache.lucene.index.SegmentInfos.read(SegmentInfos.java:40)
>>>> 09:43:42,671 ERROR [STDERR]     at
>>>> org.apache.lucene.index.IndexReader$1.doBody(IndexReader.java:116)
>>>> 09:43:42,671 ERROR [STDERR]     at
>>>> org.apache.lucene.store.Lock$With.run(Lock.java:109)
>>>> 09:43:42,671 ERROR [STDERR]     at
>>>> org.apache.lucene.index.IndexReader.open(IndexReader.java:111)
>>>> 09:43:42,671 ERROR [STDERR]     at
>>>> org.apache.lucene.index.IndexReader.open(IndexReader.java:95)
>>>> 09:43:42,671 ERROR [STDERR]     at
>>>> org.apache.lucene.search.IndexSearcher.<init>(IndexSearcher.java:38)
>>>> 09:43:42,671 ERROR [STDERR]     at
>>>> com.xerox.mywebboard.search.SearchManager.search(SearchManager.java:
>>>> 53)
>>>> 09:43:42,671 ERROR [STDERR]     at
>>>> com
>>>> .xerox
>>>> .mywebboard
>>>> .xeroxArticleSearchPortlet.search(xeroxArticleSearchPortlet.java:45)
>>>> 09:43:42,671 ERROR [STDERR]     at
>>>> com
>>>> .xerox
>>>> .mywebboard
>>>> .xeroxArticleSearchPortlet
>>>> .processAction(xeroxArticleSearchPortlet.java:27)
>>>> 09:43:42,671 ERROR [STDERR]     at
>>>> org
>>>> .jboss
>>>> .portal
>>>> .portlet
>>>> .impl
>>>> .jsr168.PortletContainerImpl.invokeAction(PortletContainerImpl.java
>>>> 09:43:42,687 ERROR [STDERR]     at
>>>> org
>>>> .jboss
>>>> .portal
>>>> .portlet
>>>> .impl 
>>>> .jsr168.PortletContainerImpl.dispatch(PortletContainerImpl.java:
>>>> 401
>>>> 09:43:42,687 ERROR [STDERR]     at
>>>> org.jboss.portal.portlet.container.PortletContainerInvoker
>>>> $1.invoke(PortletContainerInvoker.java
>>>> 09:43:42,687 ERROR [STDERR]     at
>>>> org
>>>> .jboss
>>>> .portal.common.invocation.Invocation.invokeNext(Invocation.java:131)
>>>> 09:43:42,687 ERROR [STDERR]     at
>>>> org.jboss.portal.core.aspects.portlet.TransactionInterceptor.org
>>>> $jboss$portal$core$aspects$portl
>>>> 09:43:42,687 ERROR [STDERR]     at
>>>> org.jboss.portal.core.aspects.portlet.TransactionInterceptor
>>>> $invokeNotSupported_N454727078796479
>>>> 09:43:42,687 ERROR [STDERR]     at
>>>> org.jboss.aspects.tx.TxPolicy.invokeInNoTx(TxPolicy.java:66)
>>>> 09:43:42,687 ERROR [STDERR]     at
>>>> org.jboss.aspects.tx.TxInterceptor
>>>> $NotSupported.invoke(TxInterceptor.java:112)
>>>> 09:43:42,687 ERROR [STDERR]     at
>>>> org.jboss.portal.core.aspects.portlet.TransactionInterceptor
>>>> $invokeNotSupported_N454727078796479
>>>> 09:43:42,687 ERROR [STDERR]     at
>>>> org.jboss.aspects.tx.TxPolicy.invokeInNoTx(TxPolicy.java:66)
>>>> 09:43:42,687 ERROR [STDERR]     at
>>>> org.jboss.aspects.tx.TxInterceptor
>>>> $NotSupported.invoke(TxInterceptor.java:102)
>>>> 09:43:42,687 ERROR [STDERR]     at
>>>> org.jboss.portal.core.aspects.portlet.TransactionInterceptor
>>>> $invokeNotSupported_N454727078796479
>>>> 09:43:42,687 ERROR [STDERR]     at
>>>> org
>>>> .jboss
>>>> .portal
>>>> .core
>>>> .aspects
>>>> .portlet.TransactionInterceptor.invokeNotSupported(TransactionInter
>>>> 09:43:42,687 ERROR [STDERR]     at
>>>> org
>>>> .jboss
>>>> .portal
>>>> .core
>>>> .aspects
>>>> .portlet.TransactionInterceptor.invoke(TransactionInterceptor.java:
>>>> 09:43:42,687 ERROR [STDERR]     at
>>>> org
>>>> .jboss
>>>> .portal
>>>> .portlet
>>>> .invocation.PortletInterceptor.invoke(PortletInterceptor.java:38)
>>>> 09:43:42,687 ERROR [STDERR]     at
>>>> org
>>>> .jboss
>>>> .portal.common.invocation.Invocation.invokeNext(Invocation.java:115)
>>>> 09:43:42,687 ERROR [STDERR]     at
>>>> org
>>>> .jboss
>>>> .portal
>>>> .core
>>>> .aspects.portlet.HeaderInterceptor.invoke(HeaderInterceptor.java:50)
>>>> 09:43:42,687 ERROR [STDERR]     at
>>>> org
>>>> .jboss
>>>> .portal
>>>> .portlet
>>>> .invocation.PortletInterceptor.invoke(PortletInterceptor.java:38)
>>>> 09:43:42,687 ERROR [STDERR]     at
>>>> org
>>>> .jboss
>>>> .portal.common.invocation.Invocation.invokeNext(Invocation.java:115)
>>>> 09:43:42,687 ERROR [STDERR]     at
>>>> org
>>>> .jboss
>>>> .portal
>>>> .portlet
>>>> .aspects
>>>> .portlet.ProducerCacheInterceptor.invoke(ProducerCacheIntercepto
>>>> 09:43:42,687 ERROR [STDERR]     at
>>>> org
>>>> .jboss
>>>> .portal
>>>> .portlet
>>>> .invocation.PortletInterceptor.invoke(PortletInterceptor.java:38)
>>>> 09:43:42,687 ERROR [STDERR]     at
>>>> org
>>>> .jboss
>>>> .portal.common.invocation.Invocation.invokeNext(Invocation.java:115)
>>>> 09:43:42,687 ERROR [STDERR]     at
>>>> org
>>>> .jboss
>>>> .portal
>>>> .core.aspects.portlet.AjaxInterceptor.invoke(AjaxInterceptor.java: 
>>>> 51)
>>>> 09:43:42,687 ERROR [STDERR]     at
>>>> org
>>>> .jboss
>>>> .portal
>>>> .portlet
>>>> .invocation.PortletInterceptor.invoke(PortletInterceptor.java:38)
>>>> 09:43:42,687 ERROR [STDERR]     at
>>>> org
>>>> .jboss
>>>> .portal.common.invocation.Invocation.invokeNext(Invocation.java:115)
>>>> 09:43:42,687 ERROR [STDERR]     at
>>>> org
>>>> .jboss
>>>> .portal
>>>> .portlet
>>>> .aspects.portlet.ModesInterceptor.invoke(ModesInterceptor.java:62)
>>>> 09:43:42,687 ERROR [STDERR]     at
>>>> org
>>>> .jboss
>>>> .portal
>>>> .portlet
>>>> .invocation.PortletInterceptor.invoke(PortletInterceptor.java:38)
>>>> 09:43:42,687 ERROR [STDERR]     at
>>>> org
>>>> .jboss
>>>> .portal.common.invocation.Invocation.invokeNext(Invocation.java:115)
>>>> 09:43:42,687 ERROR [STDERR]     at
>>>> org
>>>> .jboss
>>>> .portal
>>>> .portlet.bridge.BridgeInterceptor.invoke(BridgeInterceptor.java:47)
>>>> 09:43:42,687 ERROR [STDERR]     at
>>>> org
>>>> .jboss
>>>> .portal
>>>> .portlet
>>>> .invocation.PortletInterceptor.invoke(PortletInterceptor.java:38)
>>>> 09:43:42,687 ERROR [STDERR]     at
>>>> org
>>>> .jboss
>>>> .portal.common.invocation.Invocation.invokeNext(Invocation.java:115)
>>>>
>>>> -- 
>>>> View this message in context:
>>>>
http://www.nabble.com/Lucene-Error-%3A-java.io.FileNotFoundException-tp18251
744p18251744.html
>>>> Sent from the Lucene - Java Users mailing list archive at  
>>>> Nabble.com.
>>>>
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>>
>>
>> -- 
>> View this message in context:
>>
http://www.nabble.com/Lucene-Error-%3A-java.io.FileNotFoundException-tp18251
744p18272463.html
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context:
http://www.nabble.com/Lucene-Error-%3A-java.io.FileNotFoundException-tp18251
744p18276669.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34792-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 04 16:19:38 2008
Return-Path: <java-user-return-34792-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64334 invoked from network); 4 Jul 2008 16:19:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Jul 2008 16:19:38 -0000
Received: (qmail 96460 invoked by uid 500); 4 Jul 2008 16:19:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96433 invoked by uid 500); 4 Jul 2008 16:19:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96422 invoked by uid 99); 4 Jul 2008 16:19:32 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 Jul 2008 09:19:32 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 Jul 2008 16:18:41 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id A93C171C3FF; Fri,  4 Jul 2008 09:18:32 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id A511871C3F2
	for <java-user@lucene.apache.org>; Fri,  4 Jul 2008 09:18:32 -0700 (PDT)
Date: Fri, 4 Jul 2008 09:18:32 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Search question (newbie)
In-Reply-To: <486CD671.7070301@scalix.com>
Message-ID: <Pine.LNX.4.62.0807040906570.4822@radix.cryptio.net>
References: <486CD671.7070301@scalix.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: How can I trap this situation correctly?  I receive user queries like this
: (quotes included):
: 
:    /from:"fred flintston*"/
: 
: Which produces a query string of
: 
:    /+from:fred  body:flintston/       (where /body/ is the default field)

either you've left something out, or some aspect of your situation is 
broken ... passing the string you describe -- including the quotes -- to 
QueryParser will not create an optional clause for body:flinston ... it 
will create a PhraseQuery consisting of whatever Terms are produced by 
your analyzer for the (unquoted) string...
	 fred flinston*

...note that the "*" is included in the input passed to your analyzer, 
because it has no special meaning inside quotes.

: What I want is:
: 
: /    +from:fred +from:flintston*/

that would require both fred, and something starting with flinston, but it 
wouldn't require them to be close together -- you can achieve that by 
overriding QueryParser.getFieldQuery(String,String).  inspect the 
termText, if it contains something that looks prefix/wildcardish, then 
split the input to get what you want, and delegate to 
QueryParser.getPrefixQuery or getWildCardQuery and then combine up your 
parts into a BooleanQuery.

Or... if you want to take it one step further and require that the clauses 
are near eachother, you can construct a MultiPhraseQuery -- but you'll 
need to have access to an IndexReader in your QueryParser so you can 
expand the prefix/wildcard into it's Terms.


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34793-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 04 17:53:31 2008
Return-Path: <java-user-return-34793-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81052 invoked from network); 4 Jul 2008 17:53:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Jul 2008 17:53:31 -0000
Received: (qmail 81245 invoked by uid 500); 4 Jul 2008 17:53:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81218 invoked by uid 500); 4 Jul 2008 17:53:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81207 invoked by uid 99); 4 Jul 2008 17:53:26 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 Jul 2008 10:53:26 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lucenelist2007@danielnaber.de designates 80.67.29.24 as permitted sender)
Received: from [80.67.29.24] (HELO smtprelay10.ispgateway.de) (80.67.29.24)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 Jul 2008 17:52:32 +0000
Received: from [91.37.206.137] (helo=p5b25ce89.dip.t-dialin.net)
	by smtprelay10.ispgateway.de with esmtpsa (TLSv1:AES256-SHA:256)
	(Exim 4.68)
	(envelope-from <lucenelist2007@danielnaber.de>)
	id 1KEpSH-0001Kq-Qi
	for java-user@lucene.apache.org; Fri, 04 Jul 2008 19:52:21 +0200
From: Daniel Naber <lucenelist2007@danielnaber.de>
To: java-user@lucene.apache.org
Subject: Re: too many clauses exception
Date: Fri, 4 Jul 2008 19:53:27 +0200
User-Agent: KMail/1.9.6 (enterprise 20070904.708012)
References: <18273582.post@talk.nabble.com>
In-Reply-To: <18273582.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="us-ascii"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200807041953.27997@danielnaber.de>
X-Df-Sender: 695637
X-Virus-Checked: Checked by ClamAV on apache.org

On Freitag, 4. Juli 2008, Gaurav Sharma wrote:

> I am stuck with an exception in lucene (too many clauses).
> When i am using a wild card such as a* i am getting too many clauses
> exception. It saying maximum clause count is set to 1024. Is there any
> way to increase this count.

Please see
http://wiki.apache.org/lucene-java/LuceneFAQ#head-06fafb5d19e786a50fb3dfb8821a6af9f37aa831

-- 
http://www.danielnaber.de

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34794-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 04 18:31:00 2008
Return-Path: <java-user-return-34794-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99103 invoked from network); 4 Jul 2008 18:31:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Jul 2008 18:31:00 -0000
Received: (qmail 5325 invoked by uid 500); 4 Jul 2008 18:30:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5295 invoked by uid 500); 4 Jul 2008 18:30:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5283 invoked by uid 99); 4 Jul 2008 18:30:54 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 Jul 2008 11:30:54 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=SPF_NEUTRAL,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: 194.109.24.30 is neither permitted nor denied by domain of karl.wettin@gmail.com)
Received: from [194.109.24.30] (HELO smtp-vbr10.xs4all.nl) (194.109.24.30)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 Jul 2008 18:30:00 +0000
Received: from [10.0.2.2] (memnon.xs4all.nl [82.93.70.124])
	by smtp-vbr10.xs4all.nl (8.13.8/8.13.8) with ESMTP id m64IUCGq006261
	for <java-user@lucene.apache.org>; Fri, 4 Jul 2008 20:30:20 +0200 (CEST)
	(envelope-from karl.wettin@gmail.com)
Message-Id: <D46DAC96-76E5-420E-B514-DE54D80AB211@gmail.com>
From: Karl Wettin <karl.wettin@gmail.com>
To: java-user@lucene.apache.org
In-Reply-To: <18257247.post@talk.nabble.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v924)
Subject: Re: Store/Index Email Address in Lucene
Date: Fri, 4 Jul 2008 20:30:12 +0200
References: <18257247.post@talk.nabble.com>
X-Mailer: Apple Mail (2.924)
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org

Please show us a couple of examples from the "various type of search"  
you want to be able to handle. The information you supply says nothing  
about your use cases.

In what way do you want to use phrase queries on email addresses? Do  
you want to tokenize parts of a single email address? Or do you want  
to place phrase queries on fields that contains multiple indexed  
single token email addresses? Perhaps a combination? Something else?


          karl

3 jul 2008 kl. 13.31 skrev miztaken:

>
> Hi there,
> I want to index email address in such a way that i can do WildCard,  
> Phrase
> and Simple search on those items.
>
> for each document i will have email addresses string just like in  
> the case
> of CC and TO in mails.
> for eg "abc@abc.com; dcd@cbd.com; john hopkings;  
> anything@anything.com"
>
> Now what is the best way to store them so that i can do various type  
> of
> search on them.
>
> Do i need the split the email address first and further split the  
> single
> email address as well and store them in multiple fields?
>
> What is the best way to deal such case?
>
> Your help is highly anticipated
>
> Thank You
> miztaken
> -- 
> View this message in context: http://www.nabble.com/Store-Index-Email-Address-in-Lucene-tp18257247p18257247.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34795-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 04 18:41:13 2008
Return-Path: <java-user-return-34795-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 2977 invoked from network); 4 Jul 2008 18:41:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Jul 2008 18:41:13 -0000
Received: (qmail 12415 invoked by uid 500); 4 Jul 2008 18:41:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12376 invoked by uid 500); 4 Jul 2008 18:41:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12365 invoked by uid 99); 4 Jul 2008 18:41:08 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 Jul 2008 11:41:08 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: 194.109.24.23 is neither permitted nor denied by domain of karl.wettin@gmail.com)
Received: from [194.109.24.23] (HELO smtp-vbr3.xs4all.nl) (194.109.24.23)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 Jul 2008 18:40:15 +0000
Received: from [10.0.2.2] (memnon.xs4all.nl [82.93.70.124])
	by smtp-vbr3.xs4all.nl (8.13.8/8.13.8) with ESMTP id m64IeQGN049898
	for <java-user@lucene.apache.org>; Fri, 4 Jul 2008 20:40:34 +0200 (CEST)
	(envelope-from karl.wettin@gmail.com)
Message-Id: <92A47836-6821-475B-930E-EC5968684EDC@gmail.com>
From: Karl Wettin <karl.wettin@gmail.com>
To: java-user@lucene.apache.org
In-Reply-To: <18273644.post@talk.nabble.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v924)
Subject: Re: Multifield Search with OR and AND on different doc Fields
Date: Fri, 4 Jul 2008 20:40:26 +0200
References: <18273644.post@talk.nabble.com>
X-Mailer: Apple Mail (2.924)
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org

4 jul 2008 kl. 08.30 skrev RanjithStar:


>
> My requirement is to search on SEVEN Fields say F1,F2,F3,F4,F5,F6,F7  
> having
> F1,F2,F3,F4 on one doc index
> and F5,F6,F7 on a different doc index
>
>
> I need to perform a search with ((F1=9 AND F2=4) AND (F3=keyword OR
> F4=keyword)) OR (F5=9 AND F6=4 AND F7=keyword)
>
>
> For normal search I was doing like this:
> String[] sFields = { ID1, ID2, TITLE, CONTENT };
> String[] sQuery = { id1, id2, sKeyword, sKeyword };
> Occur[] flag = { BooleanClause.Occur.MUST, BooleanClause.Occur.MUST,
> BooleanClause.Occur.MUST, BooleanClause.Occur.MUST };
> 				
> Query oQuery = oMultiParser.parse(sQuery, sFields, flag, oAnalyzer) ;
> Hits hits = indexSearcher.search(oQuery);
>

Do you hav some sort of problem with executing the code above? What  
did you expect it to do and what was the results?


>
> How can I modify the above query in such a way that it has to search  
> on
> different doc Indexes?


I'm sorry, but I don't understand your question.

You want to know how to search in another directory than the one  
associated with your indexSearcher object?



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34796-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jul 05 01:29:38 2008
Return-Path: <java-user-return-34796-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42322 invoked from network); 5 Jul 2008 01:29:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Jul 2008 01:29:38 -0000
Received: (qmail 91100 invoked by uid 500); 5 Jul 2008 01:29:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91064 invoked by uid 500); 5 Jul 2008 01:29:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 91052 invoked by uid 99); 5 Jul 2008 01:29:33 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 04 Jul 2008 18:29:32 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 05 Jul 2008 01:28:39 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KEwaC-0002hY-4O
	for java-user@lucene.apache.org; Fri, 04 Jul 2008 18:29:00 -0700
Message-ID: <18288188.post@talk.nabble.com>
Date: Fri, 4 Jul 2008 18:29:00 -0700 (PDT)
From: miztaken <justjunktome@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Store/Index Email Address in Lucene
In-Reply-To: <D46DAC96-76E5-420E-B514-DE54D80AB211@gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: justjunktome@gmail.com
References: <18257247.post@talk.nabble.com> <D46DAC96-76E5-420E-B514-DE54D80AB211@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Hi there,

for email addresses string such as "john@wherever.com; jack smith"

I might do wild card search like john* or jack* or john@* for *wherever.com
for phrase search i can do "jack smith"
for general search i might do "john@whereever.com"

I tokenized the string and indexed it into single Field using the Java File,
as mentioned in my earlier post and did searching.
Its working fine.

I want to know what can be the pitfalls of doing like this:
One i know is.. for each string, i should maintain two fields.. one to store
the original string and one that holds tokenized string.

What else ?

Thank You
miztaken


-- 
View this message in context: http://www.nabble.com/Store-Index-Email-Address-in-Lucene-tp18257247p18288188.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34797-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jul 05 18:15:25 2008
Return-Path: <java-user-return-34797-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89558 invoked from network); 5 Jul 2008 18:15:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Jul 2008 18:15:25 -0000
Received: (qmail 32071 invoked by uid 500); 5 Jul 2008 18:15:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32038 invoked by uid 500); 5 Jul 2008 18:15:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32027 invoked by uid 99); 5 Jul 2008 18:15:19 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 05 Jul 2008 11:15:19 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: 194.109.24.31 is neither permitted nor denied by domain of karl.wettin@gmail.com)
Received: from [194.109.24.31] (HELO smtp-vbr11.xs4all.nl) (194.109.24.31)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 05 Jul 2008 18:14:25 +0000
Received: from kodapan.lan (memnon.xs4all.nl [82.93.70.124])
	by smtp-vbr11.xs4all.nl (8.13.8/8.13.8) with ESMTP id m65IEET6087208
	for <java-user@lucene.apache.org>; Sat, 5 Jul 2008 20:14:15 +0200 (CEST)
	(envelope-from karl.wettin@gmail.com)
Message-Id: <506282E7-75E1-4746-9905-71DFFF38AD4B@gmail.com>
From: Karl Wettin <karl.wettin@gmail.com>
To: java-user@lucene.apache.org
In-Reply-To: <18288188.post@talk.nabble.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v924)
Subject: Re: Store/Index Email Address in Lucene
Date: Sat, 5 Jul 2008 20:14:14 +0200
References: <18257247.post@talk.nabble.com> <D46DAC96-76E5-420E-B514-DE54D80AB211@gmail.com> <18288188.post@talk.nabble.com>
X-Mailer: Apple Mail (2.924)
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org


5 jul 2008 kl. 03.29 skrev miztaken:

>
> Hi there,
>
> for email addresses string such as "john@wherever.com; jack smith"

Can there be multiple addresses in a single document?
Do you add any other data to the document that you mean to query for?

> I might do wild card search like john* or jack* or john@* for  
> *wherever.com
> for phrase search i can do "jack smith"
> for general search i might do "john@whereever.com"
>
> I tokenized the string and indexed it into single Field using the  
> Java File,

Can you tell us how you tokenized it?

> as mentioned in my earlier post and did searching.
> Its working fine.
>
> I want to know what can be the pitfalls of doing like this:
> One i know is.. for each string, i should maintain two fields.. one  
> to store
> the original string and one that holds tokenized string.

Why do you have to store the original string?

> What else ?


I'm sorry, but you still told us very little about what it is you try  
to achieve with this and nothing about your requirements.

The only general hints I can give you is to read the wiki pages  
regarding performance: http://wiki.apache.org/lucene-java/BasicsOfPerformance



        karl

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34798-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jul 05 18:42:03 2008
Return-Path: <java-user-return-34798-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5774 invoked from network); 5 Jul 2008 18:42:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Jul 2008 18:42:02 -0000
Received: (qmail 41225 invoked by uid 500); 5 Jul 2008 18:41:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41195 invoked by uid 500); 5 Jul 2008 18:41:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41184 invoked by uid 99); 5 Jul 2008 18:41:57 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 05 Jul 2008 11:41:57 -0700
X-ASF-Spam-Status: No, hits=4.0 required=10.0
	tests=DNS_FROM_OPENWHOIS,FORGED_YAHOO_RCVD,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 05 Jul 2008 18:41:04 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KFChI-0005Jk-Ic
	for java-user@lucene.apache.org; Sat, 05 Jul 2008 11:41:24 -0700
Message-ID: <18295066.post@talk.nabble.com>
Date: Sat, 5 Jul 2008 11:41:24 -0700 (PDT)
From: starz10de <farag_ahmed@yahoo.com>
To: java-user@lucene.apache.org
Subject: Index different files in different folders in lucene
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: farag_ahmed@yahoo.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hi all,
I am new to lucene , is it possible to Index different files in different
folders in lucene

for examples , i have two folderes a and b , each contain several files.

in lucene args i wrote :  c:\a\ , c:\b\   but it does index only the first
files in folder A  and it doesnt index any files in folder b.  
is there any way to do that or i must put all files in one folder which is
not nice way to do as i have different types of files and need them to be
seperated.
thanks in advance
-- 
View this message in context: http://www.nabble.com/Index-different-files-in-different-folders-in-lucene-tp18295066p18295066.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34799-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jul 06 04:58:54 2008
Return-Path: <java-user-return-34799-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 813 invoked from network); 6 Jul 2008 04:58:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Jul 2008 04:58:54 -0000
Received: (qmail 72860 invoked by uid 500); 6 Jul 2008 04:58:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72825 invoked by uid 500); 6 Jul 2008 04:58:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72814 invoked by uid 99); 6 Jul 2008 04:58:49 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 05 Jul 2008 21:58:49 -0700
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [65.89.232.7] (HELO thebluezone.net) (65.89.232.7)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 06 Jul 2008 04:57:56 +0000
Received: from localhost (localhost [127.0.0.1])
	by thebluezone.net (Postfix) with ESMTP id 86724286BE9
	for <java-user@lucene.apache.org>; Sat,  5 Jul 2008 22:58:16 -0600 (MDT)
Received: from thebluezone.net ([127.0.0.1])
	by localhost (mail1 [127.0.0.1]) (amavisd-new, port 10024) with ESMTP
	id 15138-07 for <java-user@lucene.apache.org>;
	Sat, 5 Jul 2008 22:58:14 -0600 (MDT)
Received: from desktop (unknown [65.89.233.61])
	by thebluezone.net (Postfix) with ESMTP id 9924E286BDA
	for <java-user@lucene.apache.org>; Sat,  5 Jul 2008 22:58:14 -0600 (MDT)
From: "John Griffin" <jgriffin@thebluezone.net>
To: <java-user@lucene.apache.org>
References: <18295066.post@talk.nabble.com>
Subject: RE: Index different files in different folders in lucene
Date: Sat, 5 Jul 2008 22:58:09 -0600
Message-ID: <BEDB94B7C89C4F0B93F52ACE3B82A1F1@desktop>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
In-Reply-To: <18295066.post@talk.nabble.com>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.5512
Thread-Index: Acjezt88ichTNlQQRImwQ/9GLt42twAVdSLA
X-Virus-Scanned: by thebluezone.net
X-Virus-Checked: Checked by ClamAV on apache.org

Starz,

How about your code so we can see what you are doing? We're flying blind
here.

John G.

-----Original Message-----
From: starz10de [mailto:farag_ahmed@yahoo.com] 
Sent: Saturday, July 05, 2008 12:41 PM
To: java-user@lucene.apache.org
Subject: Index different files in different folders in lucene


Hi all,
I am new to lucene , is it possible to Index different files in different
folders in lucene

for examples , i have two folderes a and b , each contain several files.

in lucene args i wrote :  c:\a\ , c:\b\   but it does index only the first
files in folder A  and it doesnt index any files in folder b.  
is there any way to do that or i must put all files in one folder which is
not nice way to do as i have different types of files and need them to be
seperated.
thanks in advance
-- 
View this message in context:
http://www.nabble.com/Index-different-files-in-different-folders-in-lucene-t
p18295066p18295066.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34800-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jul 06 10:37:43 2008
Return-Path: <java-user-return-34800-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48165 invoked from network); 6 Jul 2008 10:37:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Jul 2008 10:37:41 -0000
Received: (qmail 76581 invoked by uid 500); 6 Jul 2008 10:37:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76542 invoked by uid 500); 6 Jul 2008 10:37:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76530 invoked by uid 99); 6 Jul 2008 10:37:35 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 06 Jul 2008 03:37:35 -0700
X-ASF-Spam-Status: No, hits=4.0 required=10.0
	tests=DNS_FROM_OPENWHOIS,FORGED_YAHOO_RCVD,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 06 Jul 2008 10:36:43 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KFRZ4-0005WF-Bd
	for java-user@lucene.apache.org; Sun, 06 Jul 2008 03:33:54 -0700
Message-ID: <18300833.post@talk.nabble.com>
Date: Sun, 6 Jul 2008 03:33:54 -0700 (PDT)
From: starz10de <farag_ahmed@yahoo.com>
To: java-user@lucene.apache.org
Subject: RE: Index different files in different folders in lucene
In-Reply-To: <BEDB94B7C89C4F0B93F52ACE3B82A1F1@desktop>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: farag_ahmed@yahoo.com
References: <18295066.post@talk.nabble.com> <BEDB94B7C89C4F0B93F52ACE3B82A1F1@desktop>
X-Virus-Checked: Checked by ClamAV on apache.org


hi  John ,

Is important to know my code ? I though it is general question! I use lucene
to index some files in one folder, but in my case I have different files
(text files) in two different folderes and I though may be lucene could
index both in same time. I am just lucene at it is and I dont have any
special code. just indexing , I need this because i have an arabic and
english files and i dont want to index them in one index as it make no sense
as they are not related , so when you like to look for english string you
dont need to look for it in arabic and so on. My question is it possible for
lucene to index multiple folderes in  same time and put them in several
indexes?
thanks

John Griffin-3 wrote:
> 
> Starz,
> 
> How about your code so we can see what you are doing? We're flying blind
> here.
> 
> John G.
> 
> -----Original Message-----
> From: starz10de [mailto:farag_ahmed@yahoo.com] 
> Sent: Saturday, July 05, 2008 12:41 PM
> To: java-user@lucene.apache.org
> Subject: Index different files in different folders in lucene
> 
> 
> Hi all,
> I am new to lucene , is it possible to Index different files in different
> folders in lucene
> 
> for examples , i have two folderes a and b , each contain several files.
> 
> in lucene args i wrote :  c:\a\ , c:\b\   but it does index only the first
> files in folder A  and it doesnt index any files in folder b.  
> is there any way to do that or i must put all files in one folder which is
> not nice way to do as i have different types of files and need them to be
> seperated.
> thanks in advance
> -- 
> View this message in context:
> http://www.nabble.com/Index-different-files-in-different-folders-in-lucene-t
> p18295066p18295066.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/Index-different-files-in-different-folders-in-lucene-tp18295066p18300833.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34801-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jul 06 10:40:17 2008
Return-Path: <java-user-return-34801-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48409 invoked from network); 6 Jul 2008 10:40:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Jul 2008 10:40:17 -0000
Received: (qmail 80387 invoked by uid 500); 6 Jul 2008 10:40:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80360 invoked by uid 500); 6 Jul 2008 10:40:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80349 invoked by uid 99); 6 Jul 2008 10:40:11 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 06 Jul 2008 03:40:11 -0700
X-ASF-Spam-Status: No, hits=4.0 required=10.0
	tests=DNS_FROM_OPENWHOIS,FORGED_YAHOO_RCVD,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 06 Jul 2008 10:39:19 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KFRbb-0005Zg-Aj
	for java-user@lucene.apache.org; Sun, 06 Jul 2008 03:36:31 -0700
Message-ID: <18300833.post@talk.nabble.com>
Date: Sun, 6 Jul 2008 03:36:31 -0700 (PDT)
From: starz10de <farag_ahmed@yahoo.com>
To: java-user@lucene.apache.org
Subject: RE: Index different files in different folders in lucene
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: farag_ahmed@yahoo.com
X-Virus-Checked: Checked by ClamAV on apache.org


hi  John ,

Is important to know my code ? I though it is general question! I use lucene
to index some files in one folder, but in my case I have different files
(text files) in two different folderes and I though may be lucene could
index both in same time. I am just using lucene as it is and I dont have any
special code. just indexing , I need this because i have an arabic and
english files and i dont want to index them in one index as it make no sense
becuase they are not related only through an alignment files, so when you
like to look for english string you dont need to look for it in arabic index
and so on. My question is it possible for lucene to index multiple folderes
in  same time and put them in several indexes ?
thanks

John Griffin-3 wrote:
> 
> Starz,
> 
> How about your code so we can see what you are doing? We're flying blind
> here.
> 
> John G.
> 
> -----Original Message-----
> From: starz10de [mailto:farag_ahmed@yahoo.com] 
> Sent: Saturday, July 05, 2008 12:41 PM
> To: java-user@lucene.apache.org
> Subject: Index different files in different folders in lucene
> 
> 
> Hi all,
> I am new to lucene , is it possible to Index different files in different
> folders in lucene
> 
> for examples , i have two folderes a and b , each contain several files.
> 
> in lucene args i wrote :  c:\a\ , c:\b\   but it does index only the first
> files in folder A  and it doesnt index any files in folder b.  
> is there any way to do that or i must put all files in one folder which is
> not nice way to do as i have different types of files and need them to be
> seperated.
> thanks in advance
> -- 
> View this message in context:
> http://www.nabble.com/Index-different-files-in-different-folders-in-lucene-t
> p18295066p18295066.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/Index-different-files-in-different-folders-in-lucene-tp18295066p18300833.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34802-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jul 06 14:00:16 2008
Return-Path: <java-user-return-34802-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 87056 invoked from network); 6 Jul 2008 14:00:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Jul 2008 14:00:15 -0000
Received: (qmail 44040 invoked by uid 500); 6 Jul 2008 14:00:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44011 invoked by uid 500); 6 Jul 2008 14:00:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44000 invoked by uid 99); 6 Jul 2008 14:00:10 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 06 Jul 2008 07:00:10 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of pvsaikrishna@gmail.com designates 209.85.198.230 as permitted sender)
Received: from [209.85.198.230] (HELO rv-out-0506.google.com) (209.85.198.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 06 Jul 2008 13:59:19 +0000
Received: by rv-out-0506.google.com with SMTP id f6so2197729rvb.5
        for <java-user@lucene.apache.org>; Sun, 06 Jul 2008 06:59:40 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type;
        bh=1kcatZhgnTlStXS6a66vkIeAxXrLduBXVVDF/u2Bt2s=;
        b=IlJU4etNC9jlia7Kc8X76rIuUgdErfwTbUAyBFmrU9qxohIT+R1TA/sDAha39L1ao6
         jbnsfUheg8ex+t/UYrY7iRNlJwySVIex/pRyB/LHLL5+xwhFzLbPsA6CazU2Sf44qKnl
         u1voT+4btJ2DPAqzVIKg/JIMCrPJQL9TvmSCU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=VSuc0onkczwUituAMvWEgSK2D2tV3oz6gpdLNObG5aaf0fJJyaEGP2Q/JcEyNXkzEq
         gMgjNcnewsGW2C9LZW+AeXOy1SObAWCTmgSL2+IUh7FAFnB127RJKjNsT60IGgxgSZin
         sg0A/UR1oAQIqV69DUWnItoEmmtaKzMZN6av4=
Received: by 10.141.68.12 with SMTP id v12mr1623066rvk.111.1215352780721;
        Sun, 06 Jul 2008 06:59:40 -0700 (PDT)
Received: by 10.140.191.16 with HTTP; Sun, 6 Jul 2008 06:59:40 -0700 (PDT)
Message-ID: <171dbfa60807060659i3b9ddd62v204ef1bdc77356c2@mail.gmail.com>
Date: Sun, 6 Jul 2008 19:29:40 +0530
From: "saikrishna venkata pendyala" <pvsaikrishna@gmail.com>
To: java-user@lucene.apache.org
Subject: Reg : lucene RemoteSearchable Object
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_14895_31784551.1215352780709"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_14895_31784551.1215352780709
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi all,

I am currently developing a distributed search engine using Lucene.

I am able to search the multiple machines quite successfully. Each machine
using MultiSearcher to search the local indexes and  I  am creating
RemoteSearchable object with it.

The master machines searches these RemoteSearchable using
ParallelMultiSearchable.

Every thing is going fine except that, master is not able to keep track of
*dynamic* remote index.

These is what I did,

1. Made a index remotely available.
2. Searching the remote index continuously(with a loop) -- worked  fine
3. deleted the index from disk which was made remotly available.
4. Surprisingly, search is still working :(( (loop in step 2 continues)

With few other experiments I had to come to an conclusion that somewhere in
step 1 or step 2 index is being cached .

I am right ??

how can I slove this problem ?

regards,
Sai Krishna.

------=_Part_14895_31784551.1215352780709--

From java-user-return-34803-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jul 06 18:56:53 2008
Return-Path: <java-user-return-34803-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98947 invoked from network); 6 Jul 2008 18:56:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Jul 2008 18:56:53 -0000
Received: (qmail 88572 invoked by uid 500); 6 Jul 2008 18:56:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88529 invoked by uid 500); 6 Jul 2008 18:56:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88518 invoked by uid 99); 6 Jul 2008 18:56:46 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 06 Jul 2008 11:56:46 -0700
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [65.89.232.7] (HELO thebluezone.net) (65.89.232.7)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 06 Jul 2008 18:55:53 +0000
Received: from localhost (localhost [127.0.0.1])
	by thebluezone.net (Postfix) with ESMTP id EC3D0286BDC
	for <java-user@lucene.apache.org>; Sun,  6 Jul 2008 12:55:43 -0600 (MDT)
Received: from thebluezone.net ([127.0.0.1])
	by localhost (mail1 [127.0.0.1]) (amavisd-new, port 10024) with ESMTP
	id 02917-04 for <java-user@lucene.apache.org>;
	Sun, 6 Jul 2008 12:55:41 -0600 (MDT)
Received: from desktop (unknown [65.89.233.61])
	by thebluezone.net (Postfix) with ESMTP id B5B2D286C95
	for <java-user@lucene.apache.org>; Sun,  6 Jul 2008 12:55:41 -0600 (MDT)
From: "John Griffin" <jgriffin@thebluezone.net>
To: <java-user@lucene.apache.org>
References: <18295066.post@talk.nabble.com> <BEDB94B7C89C4F0B93F52ACE3B82A1F1@desktop> <18300833.post@talk.nabble.com>
Subject: RE: Index different files in different folders in lucene
Date: Sun, 6 Jul 2008 12:55:36 -0600
Message-ID: <AE7D345F65DF433D934BAEE221BFD308@desktop>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
In-Reply-To: <18300833.post@talk.nabble.com>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.5512
Thread-Index: AcjfVF/xmz5IUwztS/CT9vax8bWpkQARIpgg
X-Virus-Scanned: by thebluezone.net
X-Virus-Checked: Checked by ClamAV on apache.org

Starz,

If you are using the LuceneDemo jar to index your docs its default behavior
is to recursively index all files to an 'index' directory from a
'root-directory' you specify. So what you are trying to do won't work unless
you modify the source to do what you want. It would not be that difficult to
do.

JohnG.

-----Original Message-----
From: starz10de [mailto:farag_ahmed@yahoo.com] 
Sent: Sunday, July 06, 2008 4:34 AM
To: java-user@lucene.apache.org
Subject: RE: Index different files in different folders in lucene


hi  John ,

Is important to know my code ? I though it is general question! I use lucene
to index some files in one folder, but in my case I have different files
(text files) in two different folderes and I though may be lucene could
index both in same time. I am just lucene at it is and I dont have any
special code. just indexing , I need this because i have an arabic and
english files and i dont want to index them in one index as it make no sense
as they are not related , so when you like to look for english string you
dont need to look for it in arabic and so on. My question is it possible for
lucene to index multiple folderes in  same time and put them in several
indexes?
thanks

John Griffin-3 wrote:
> 
> Starz,
> 
> How about your code so we can see what you are doing? We're flying blind
> here.
> 
> John G.
> 
> -----Original Message-----
> From: starz10de [mailto:farag_ahmed@yahoo.com] 
> Sent: Saturday, July 05, 2008 12:41 PM
> To: java-user@lucene.apache.org
> Subject: Index different files in different folders in lucene
> 
> 
> Hi all,
> I am new to lucene , is it possible to Index different files in different
> folders in lucene
> 
> for examples , i have two folderes a and b , each contain several files.
> 
> in lucene args i wrote :  c:\a\ , c:\b\   but it does index only the first
> files in folder A  and it doesnt index any files in folder b.  
> is there any way to do that or i must put all files in one folder which is
> not nice way to do as i have different types of files and need them to be
> seperated.
> thanks in advance
> -- 
> View this message in context:
>
http://www.nabble.com/Index-different-files-in-different-folders-in-lucene-t
> p18295066p18295066.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context:
http://www.nabble.com/Index-different-files-in-different-folders-in-lucene-t
p18295066p18300833.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34804-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jul 06 18:59:23 2008
Return-Path: <java-user-return-34804-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99335 invoked from network); 6 Jul 2008 18:59:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Jul 2008 18:59:23 -0000
Received: (qmail 90310 invoked by uid 500); 6 Jul 2008 18:59:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90270 invoked by uid 500); 6 Jul 2008 18:59:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90259 invoked by uid 99); 6 Jul 2008 18:59:18 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 06 Jul 2008 11:59:18 -0700
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [65.89.232.7] (HELO thebluezone.net) (65.89.232.7)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 06 Jul 2008 18:58:25 +0000
Received: from localhost (localhost [127.0.0.1])
	by thebluezone.net (Postfix) with ESMTP id F1FEE286C9E
	for <java-user@lucene.apache.org>; Sun,  6 Jul 2008 12:58:15 -0600 (MDT)
Received: from thebluezone.net ([127.0.0.1])
	by localhost (mail1 [127.0.0.1]) (amavisd-new, port 10024) with ESMTP
	id 03121-06 for <java-user@lucene.apache.org>;
	Sun, 6 Jul 2008 12:58:14 -0600 (MDT)
Received: from desktop (unknown [65.89.233.61])
	by thebluezone.net (Postfix) with ESMTP id 01602286C98
	for <java-user@lucene.apache.org>; Sun,  6 Jul 2008 12:58:13 -0600 (MDT)
From: "John Griffin" <jgriffin@thebluezone.net>
To: <java-user@lucene.apache.org>
References: <18295066.post@talk.nabble.com> <BEDB94B7C89C4F0B93F52ACE3B82A1F1@desktop> <18300833.post@talk.nabble.com>
Subject: RE: Index different files in different folders in lucene
Date: Sun, 6 Jul 2008 12:58:08 -0600
Message-ID: <D6A43839A40F490C9A9417A2990732B8@desktop>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
In-Reply-To: <18300833.post@talk.nabble.com>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.5512
Thread-Index: AcjfVF/xmz5IUwztS/CT9vax8bWpkQARYyQg
X-Virus-Scanned: by thebluezone.net
X-Virus-Checked: Checked by ClamAV on apache.org

Starz,

P.S.

Even if you ran the program twice it still would not work. The program will
tell you to delete the 'index' directory before indexing. 

Bottom line is 'refactor the code to so what you want'.

John G.

-----Original Message-----
From: starz10de [mailto:farag_ahmed@yahoo.com] 
Sent: Sunday, July 06, 2008 4:34 AM
To: java-user@lucene.apache.org
Subject: RE: Index different files in different folders in lucene


hi  John ,

Is important to know my code ? I though it is general question! I use lucene
to index some files in one folder, but in my case I have different files
(text files) in two different folderes and I though may be lucene could
index both in same time. I am just lucene at it is and I dont have any
special code. just indexing , I need this because i have an arabic and
english files and i dont want to index them in one index as it make no sense
as they are not related , so when you like to look for english string you
dont need to look for it in arabic and so on. My question is it possible for
lucene to index multiple folderes in  same time and put them in several
indexes?
thanks

John Griffin-3 wrote:
> 
> Starz,
> 
> How about your code so we can see what you are doing? We're flying blind
> here.
> 
> John G.
> 
> -----Original Message-----
> From: starz10de [mailto:farag_ahmed@yahoo.com] 
> Sent: Saturday, July 05, 2008 12:41 PM
> To: java-user@lucene.apache.org
> Subject: Index different files in different folders in lucene
> 
> 
> Hi all,
> I am new to lucene , is it possible to Index different files in different
> folders in lucene
> 
> for examples , i have two folderes a and b , each contain several files.
> 
> in lucene args i wrote :  c:\a\ , c:\b\   but it does index only the first
> files in folder A  and it doesnt index any files in folder b.  
> is there any way to do that or i must put all files in one folder which is
> not nice way to do as i have different types of files and need them to be
> seperated.
> thanks in advance
> -- 
> View this message in context:
>
http://www.nabble.com/Index-different-files-in-different-folders-in-lucene-t
> p18295066p18295066.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context:
http://www.nabble.com/Index-different-files-in-different-folders-in-lucene-t
p18295066p18300833.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34805-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jul 06 19:35:28 2008
Return-Path: <java-user-return-34805-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8982 invoked from network); 6 Jul 2008 19:35:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Jul 2008 19:35:28 -0000
Received: (qmail 12209 invoked by uid 500); 6 Jul 2008 19:35:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11584 invoked by uid 500); 6 Jul 2008 19:35:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11573 invoked by uid 99); 6 Jul 2008 19:35:22 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 06 Jul 2008 12:35:22 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 06 Jul 2008 19:34:29 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KFa0Y-00035m-3q
	for java-user@lucene.apache.org; Sun, 06 Jul 2008 12:34:50 -0700
Message-ID: <18304948.post@talk.nabble.com>
Date: Sun, 6 Jul 2008 12:34:50 -0700 (PDT)
From: Yajun <yliuaaa@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: FileNotFoundException in ConcurrentMergeScheduler
In-Reply-To: <486A697D.4010902@gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: yliuaaa@gmail.com
References: <EEBD1ADA-C2E8-41D1-B8AE-E90DFDC090B4@mac.com> <483F47CD.1050709@gmail.com> <F0D9682E-BCFE-4F1E-9A8F-94E206BCCFBB@mac.com> <483F50F5.3050804@gmail.com> <483F549D.3040405@gmail.com> <28785928-1CE6-40B4-867B-114526A1F838@mikemccandless.com> <CAC3FF9B-FBCA-424D-97DA-C022DE0B01F7@mac.com> <EA6F5635-68E8-4213-89CB-C68CCAB326CB@mikemccandless.com> <0A50D663-8810-48AC-8480-7ADAB513664B@lucasmail.org> <486A68B2.6010302@gmail.com> <486A697D.4010902@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


I saw the same problem for a while. here is how I used lucene index:

1) I don't use compound file.

2) I have a single process and a single thread to update index as index
updater. The index is really small, the mergefactor is 10.
After index is updated, the same thread copies the index to a tmp directory,
validate the index in the tmp directory by:
 
IndexReader reader = IndexReader.open(tmp_directory);
reader.close();

then rename the tmp directory to a snapshot_timestamp;

3) the snapshot_timestamp is rsyn to search nodes which DO NOT update index.

4) We automatically stop and start index updater and search nodes every
midnight. (don't ask me why)

5) We use Linux version 2.6.9-67.0.1.ELsmp
(brewbuilder@ls20-bc1-14.build.redhat.com) (gcc version 3.4.6 20060404 (Red
Hat 3.4.6-9)) #1 SMP Fri Nov 30 11:57:43 EST 2007

6) We use solr 1.2 and the lucene is 2.1.( I don't think this problem has
anything to do with solr.)

Here is what I observed:

1) Not always, sometimes when index updater is started during our automatic
recycle, we got

ava.io.FileNotFoundException: /var/tmp/index/_gw.fnm (No such file or
directory)
	at java.io.RandomAccessFile.open(Native Method)
	at java.io.RandomAccessFile.<init>(RandomAccessFile.java:212)
	at
org.apache.lucene.store.FSDirectory$FSIndexInput$Descriptor.<init>(FSDirectory.java:501)
	at
org.apache.lucene.store.FSDirectory$FSIndexInput.<init>(FSDirectory.java:526)
	at org.apache.lucene.store.FSDirectory.openInput(FSDirectory.java:440)
	at org.apache.lucene.index.FieldInfos.<init>(FieldInfos.java:57)
	at org.apache.lucene.index.SegmentReader.initialize(SegmentReader.java:176)
	at org.apache.lucene.index.SegmentReader.get(SegmentReader.java:157)
	at org.apache.lucene.index.SegmentReader.get(SegmentReader.java:130)
	at org.apache.lucene.index.IndexReader$1.doBody(IndexReader.java:205)
	at
org.apache.lucene.index.SegmentInfos$FindSegmentsFile.run(SegmentInfos.java:610)
	at org.apache.lucene.index.IndexReader.open(IndexReader.java:184)
	at org.apache.lucene.index.IndexReader.open(IndexReader.java:157)

Note each time, the missing file is different. When this happen, the program
automatically tried to reopen the most recent THREE snapshots and we got the
same exception for each snapshot. Remember, each of the snapshot was
validated before it was copied.

2) The similar things happened on the search node: the same index which was
opened OK during last night nodes recycle could not be opened due to the
same exception. The search node does not update index.

3) In my case, the index was "validated" before, and it became invalidate in
a later time. It seems it happened only when we restart the application.
When the exception happen, the file did not exist in the index. 

--Yajun



markrmiller wrote:
> 
> Mark Miller wrote:
>> Paul J. Lucas wrote:
>>> Sorry for the radio silence.  I changed my code around so that a 
>>> single IndexReader and IndexSearcher are shared.  Since doing that, 
>>> I've not seen the problem.  That being the case, I didn't pursue the 
>>> issue.
>>>
>>> I still think there's a bug because the code I had previously, IMHO, 
>>> should have worked just fine.
>>>
>>> - Paul
>>>
>> Hey Paul, when I told you that you should be sharing 
>> IndexSearcher/Reader's across threads and I thought it was wrong not 
>> to, I made the obviously wrong assumption that you either had lots of 
>> clients or were not in control of the number of searches that could 
>> could come in at once (a webpp on the internet type thing).
>>
>> In your simple case, you are certainly right and it should have worked 
>> just fine. I was concerned you were generating an unknown number of 
>> Readers for every search (which we now know is not an issue). Please 
>> disregard all notions that I may have introduced in regards to this 
>> being wrong. It is only  in the case of many clients/searches 
>> simultaneously that I would consider what I said to be accurate: and 
>> even then not everyone is sure to agree with me.
>>
>> Again, I apologize for leading you a bit off track. You did double 
>> check your Writer handling though? I still don't think anyone has seen 
>> your error without using two Writer's simultaneously.
>>
>> - Mark
> P.S.
> 
> Dont switch back to not sharing! Even your one client must enjoy not 
> having to wait for that new Searcher to load up on every search :) 
> Especially if you have any sort caches.
> 
> - Mark
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/FileNotFoundException-in-ConcurrentMergeScheduler-tp17548777p18304948.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34806-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jul 06 19:46:45 2008
Return-Path: <java-user-return-34806-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 13369 invoked from network); 6 Jul 2008 19:46:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Jul 2008 19:46:45 -0000
Received: (qmail 16052 invoked by uid 500); 6 Jul 2008 19:46:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16007 invoked by uid 500); 6 Jul 2008 19:46:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15996 invoked by uid 99); 6 Jul 2008 19:46:40 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 06 Jul 2008 12:46:40 -0700
X-ASF-Spam-Status: No, hits=4.0 required=10.0
	tests=DNS_FROM_OPENWHOIS,FORGED_YAHOO_RCVD,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 06 Jul 2008 19:45:48 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KFaBV-0003Lo-32
	for java-user@lucene.apache.org; Sun, 06 Jul 2008 12:46:09 -0700
Message-ID: <18305778.post@talk.nabble.com>
Date: Sun, 6 Jul 2008 12:46:09 -0700 (PDT)
From: starz10de <farag_ahmed@yahoo.com>
To: java-user@lucene.apache.org
Subject: RE: Index different files in different folders in lucene
In-Reply-To: <AE7D345F65DF433D934BAEE221BFD308@desktop>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: farag_ahmed@yahoo.com
References: <18295066.post@talk.nabble.com> <BEDB94B7C89C4F0B93F52ACE3B82A1F1@desktop> <18300833.post@talk.nabble.com> <AE7D345F65DF433D934BAEE221BFD308@desktop>
X-Virus-Checked: Checked by ClamAV on apache.org


John,
 Thanks for your kind help. I will try to modify the source code.


John Griffin-3 wrote:
> 
> Starz,
> 
> If you are using the LuceneDemo jar to index your docs its default
> behavior
> is to recursively index all files to an 'index' directory from a
> 'root-directory' you specify. So what you are trying to do won't work
> unless
> you modify the source to do what you want. It would not be that difficult
> to
> do.
> 
> JohnG.
> 
> -----Original Message-----
> From: starz10de [mailto:farag_ahmed@yahoo.com] 
> Sent: Sunday, July 06, 2008 4:34 AM
> To: java-user@lucene.apache.org
> Subject: RE: Index different files in different folders in lucene
> 
> 
> hi  John ,
> 
> Is important to know my code ? I though it is general question! I use
> lucene
> to index some files in one folder, but in my case I have different files
> (text files) in two different folderes and I though may be lucene could
> index both in same time. I am just lucene at it is and I dont have any
> special code. just indexing , I need this because i have an arabic and
> english files and i dont want to index them in one index as it make no
> sense
> as they are not related , so when you like to look for english string you
> dont need to look for it in arabic and so on. My question is it possible
> for
> lucene to index multiple folderes in  same time and put them in several
> indexes?
> thanks
> 
> John Griffin-3 wrote:
>> 
>> Starz,
>> 
>> How about your code so we can see what you are doing? We're flying blind
>> here.
>> 
>> John G.
>> 
>> -----Original Message-----
>> From: starz10de [mailto:farag_ahmed@yahoo.com] 
>> Sent: Saturday, July 05, 2008 12:41 PM
>> To: java-user@lucene.apache.org
>> Subject: Index different files in different folders in lucene
>> 
>> 
>> Hi all,
>> I am new to lucene , is it possible to Index different files in different
>> folders in lucene
>> 
>> for examples , i have two folderes a and b , each contain several files.
>> 
>> in lucene args i wrote :  c:\a\ , c:\b\   but it does index only the
>> first
>> files in folder A  and it doesnt index any files in folder b.  
>> is there any way to do that or i must put all files in one folder which
>> is
>> not nice way to do as i have different types of files and need them to be
>> seperated.
>> thanks in advance
>> -- 
>> View this message in context:
>>
> http://www.nabble.com/Index-different-files-in-different-folders-in-lucene-t
>> p18295066p18295066.html
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>> 
>> 
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>> 
>> 
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>> 
>> 
>> 
> 
> -- 
> View this message in context:
> http://www.nabble.com/Index-different-files-in-different-folders-in-lucene-t
> p18295066p18300833.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/Index-different-files-in-different-folders-in-lucene-tp18295066p18305778.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34807-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jul 06 20:33:42 2008
Return-Path: <java-user-return-34807-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 27302 invoked from network); 6 Jul 2008 20:33:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Jul 2008 20:33:42 -0000
Received: (qmail 35676 invoked by uid 500); 6 Jul 2008 20:33:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 35644 invoked by uid 500); 6 Jul 2008 20:33:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 35633 invoked by uid 99); 6 Jul 2008 20:33:36 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 06 Jul 2008 13:33:36 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 06 Jul 2008 20:32:44 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KFauu-0005F9-Uu
	for java-user@lucene.apache.org; Sun, 06 Jul 2008 13:33:04 -0700
Message-ID: <18306230.post@talk.nabble.com>
Date: Sun, 6 Jul 2008 13:33:04 -0700 (PDT)
From: Roman Puchkovskiy <roman.puchkovskiy@blandware.com>
To: java-user@lucene.apache.org
Subject: ThreadLocal in SegmentReader
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: roman.puchkovskiy@blandware.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hi.

There's a ThreadLocal field in SegmentReader (it's called termVectorsLocal).
Some value is put to it, but it's never cleared.
Is it ok? It looks like sometimes this behavior may lead to leaks.

This is the same in lucene-2.2.0 and lucene-2.3.2.

Thanks in advance.
-- 
View this message in context: http://www.nabble.com/ThreadLocal-in-SegmentReader-tp18306230p18306230.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34808-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 07 05:23:34 2008
Return-Path: <java-user-return-34808-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5299 invoked from network); 7 Jul 2008 05:23:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Jul 2008 05:23:34 -0000
Received: (qmail 21703 invoked by uid 500); 7 Jul 2008 05:23:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21673 invoked by uid 500); 7 Jul 2008 05:23:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21662 invoked by uid 99); 7 Jul 2008 05:23:27 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 06 Jul 2008 22:23:27 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Jul 2008 05:22:35 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KFjBg-0003y4-EM
	for java-user@lucene.apache.org; Sun, 06 Jul 2008 22:22:56 -0700
Message-ID: <18310225.post@talk.nabble.com>
Date: Sun, 6 Jul 2008 22:22:56 -0700 (PDT)
From: miztaken <justjunktome@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Store/Index Email Address in Lucene
In-Reply-To: <506282E7-75E1-4746-9905-71DFFF38AD4B@gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: justjunktome@gmail.com
References: <18257247.post@talk.nabble.com> <D46DAC96-76E5-420E-B514-DE54D80AB211@gmail.com> <18288188.post@talk.nabble.com> <506282E7-75E1-4746-9905-71DFFF38AD4B@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Hi there,
sorry for the delay

>Q. Can there be multiple addresses in a single document?
  A. Yes there can be multiple addresses in a single document in single
field.

>Q. Do you add any other data to the document that you mean to query for?
  A. Yes there can be other fields as well, if this is what you were asking.

>Q. Can you tell us how you tokenized it?
  A. I used the class EmailFilter.java from following link
http://openmailarchiva.svn.sourceforge.net/viewvc/openmailarchiva/Server/trunk/src/com/stimulus/archiva/search/EmailFilter.java?view=markup
 as provided by Jamie-52. After tokenizing i stored each token as space
separated and indexed it.

>Q. Why do you have to store the original string?
  A. To display the original string to user. I have to search and display as
well. I cant display those tokenized strings.

>I'm sorry, but you still told us very little about what it is you try  
>to achieve with this and nothing about your requirements.
>The only general hints I can give you is to read the wiki pages  
>regarding performance:
http://wiki.apache.org/lucene-java/BasicsOfPerformance

Thanks for the link.


I think you are clear now.


Thank You
miztaken



-- 
View this message in context: http://www.nabble.com/Store-Index-Email-Address-in-Lucene-tp18257247p18310225.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34809-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 07 10:50:59 2008
Return-Path: <java-user-return-34809-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88232 invoked from network); 7 Jul 2008 10:50:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Jul 2008 10:50:58 -0000
Received: (qmail 24635 invoked by uid 500); 7 Jul 2008 10:50:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24604 invoked by uid 500); 7 Jul 2008 10:50:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24574 invoked by uid 99); 7 Jul 2008 10:50:53 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Jul 2008 03:50:53 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=SPF_NEUTRAL,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.132.242] (HELO an-out-0708.google.com) (209.85.132.242)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Jul 2008 10:49:59 +0000
Received: by an-out-0708.google.com with SMTP id c37so415290anc.49
        for <java-user@lucene.apache.org>; Mon, 07 Jul 2008 03:50:19 -0700 (PDT)
Received: by 10.100.48.8 with SMTP id v8mr635160anv.50.1215427819502;
        Mon, 07 Jul 2008 03:50:19 -0700 (PDT)
Received: from ?10.17.4.4? ( [72.93.214.93])
        by mx.google.com with ESMTPS id 7sm5228826ywo.7.2008.07.07.03.50.18
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Mon, 07 Jul 2008 03:50:19 -0700 (PDT)
Message-Id: <FEF4B2B0-2AD6-4537-AF0C-0E8574BDD930@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <18306230.post@talk.nabble.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: ThreadLocal in SegmentReader
Date: Mon, 7 Jul 2008 06:50:17 -0400
References: <18306230.post@talk.nabble.com>
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org


Well ... if the thread dies, the value in its ThreadLocal should be  
GC'd.

If the thread does not die (eg thread pool in an app server) then the  
ThreadLocal value remains, but that value is a shallow clone of the  
original TermVectorsReader and should not be consuming that much RAM  
per thread.

So I think it's OK?

Mike

Roman Puchkovskiy wrote:

>
> Hi.
>
> There's a ThreadLocal field in SegmentReader (it's called  
> termVectorsLocal).
> Some value is put to it, but it's never cleared.
> Is it ok? It looks like sometimes this behavior may lead to leaks.
>
> This is the same in lucene-2.2.0 and lucene-2.3.2.
>
> Thanks in advance.
> -- 
> View this message in context: http://www.nabble.com/ThreadLocal-in-SegmentReader-tp18306230p18306230.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34810-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 07 11:07:57 2008
Return-Path: <java-user-return-34810-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93662 invoked from network); 7 Jul 2008 11:07:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Jul 2008 11:07:57 -0000
Received: (qmail 45015 invoked by uid 500); 7 Jul 2008 11:07:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44983 invoked by uid 500); 7 Jul 2008 11:07:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44972 invoked by uid 99); 7 Jul 2008 11:07:52 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Jul 2008 04:07:52 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Jul 2008 11:07:00 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KFoYz-00086X-9A
	for java-user@lucene.apache.org; Mon, 07 Jul 2008 04:07:21 -0700
Message-ID: <18314310.post@talk.nabble.com>
Date: Mon, 7 Jul 2008 04:07:21 -0700 (PDT)
From: Roman Puchkovskiy <roman.puchkovskiy@blandware.com>
To: java-user@lucene.apache.org
Subject: Re: ThreadLocal in SegmentReader
In-Reply-To: <FEF4B2B0-2AD6-4537-AF0C-0E8574BDD930@mikemccandless.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: roman.puchkovskiy@blandware.com
References: <18306230.post@talk.nabble.com> <FEF4B2B0-2AD6-4537-AF0C-0E8574BDD930@mikemccandless.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Unfortunately, it's not ok sometimes. For instance, when Lucene is loaded by
a web-application from its WEB-INF/lib and SegmentReader is initialized
during the application start-up (i.e. it's initialized in the thread which
will never die), this causes problems with unloading of a classloader of the
web-application. When web-application is undeployed, there's still a
ThreadLocal in a thread which is external to webapp classloader, and this
ThreadLocal contains an object which references its class, and this class
was loaded through web-app classloader and hence references it... so we have
a chain of hard links from an alive thread to our classloader. In the
result, the classloader cannot be unloaded together will all its classes, so
memory waste is considerable.

I've found a way to work this around by creating a new thread during webapp
start-up and executing code which eventually initializes Lucene indices from
this thread, so all spawned ThreadLocals go to this short-lived thread and
get garbage-collected shortly after the webapp start-up is finished. But
this does not seem to be a pretty solution. Besides, one has to guess that
ThreadLocals are the problem to invent such a work-around :)


Michael McCandless-2 wrote:
> 
> 
> Well ... if the thread dies, the value in its ThreadLocal should be  
> GC'd.
> 
> If the thread does not die (eg thread pool in an app server) then the  
> ThreadLocal value remains, but that value is a shallow clone of the  
> original TermVectorsReader and should not be consuming that much RAM  
> per thread.
> 
> So I think it's OK?
> 
> Mike
> 
> Roman Puchkovskiy wrote:
> 
>>
>> Hi.
>>
>> There's a ThreadLocal field in SegmentReader (it's called  
>> termVectorsLocal).
>> Some value is put to it, but it's never cleared.
>> Is it ok? It looks like sometimes this behavior may lead to leaks.
>>
>> This is the same in lucene-2.2.0 and lucene-2.3.2.
>>
>> Thanks in advance.
>> -- 
>> View this message in context:
>> http://www.nabble.com/ThreadLocal-in-SegmentReader-tp18306230p18306230.html
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/ThreadLocal-in-SegmentReader-tp18306230p18314310.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34811-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 07 11:34:53 2008
Return-Path: <java-user-return-34811-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1179 invoked from network); 7 Jul 2008 11:34:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Jul 2008 11:34:53 -0000
Received: (qmail 73549 invoked by uid 500); 7 Jul 2008 11:34:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73270 invoked by uid 500); 7 Jul 2008 11:34:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73259 invoked by uid 99); 7 Jul 2008 11:34:47 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Jul 2008 04:34:47 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=SPF_NEUTRAL,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [64.233.184.236] (HELO wr-out-0506.google.com) (64.233.184.236)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Jul 2008 11:33:54 +0000
Received: by wr-out-0506.google.com with SMTP id c30so1912531wra.21
        for <java-user@lucene.apache.org>; Mon, 07 Jul 2008 04:34:13 -0700 (PDT)
Received: by 10.100.240.17 with SMTP id n17mr2967528anh.49.1215430452755;
        Mon, 07 Jul 2008 04:34:12 -0700 (PDT)
Received: from ?10.17.4.4? ( [72.93.214.93])
        by mx.google.com with ESMTPS id 6sm7272298ywp.3.2008.07.07.04.34.12
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Mon, 07 Jul 2008 04:34:12 -0700 (PDT)
Message-Id: <3526647C-1D0E-41A2-94D6-5D8A2B445640@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <18314310.post@talk.nabble.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: ThreadLocal in SegmentReader
Date: Mon, 7 Jul 2008 07:34:11 -0400
References: <18306230.post@talk.nabble.com> <FEF4B2B0-2AD6-4537-AF0C-0E8574BDD930@mikemccandless.com> <18314310.post@talk.nabble.com>
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org


Hmmm, I see... you're right.  ThreadLocal is dangerous.

So how would you recommend fixing it?

One thing we can do, in SegmentReader.close, is to call  
termVectorsLocal.set(null).  We do this eg in FieldsReader.close,  
which uses a ThreadLocal to hold thread-private clones of the  
fieldsStream

However, that only works if the very same thread that had opened the  
reader also calls close... which likely often is the case but in  
general is not guaranteed and we should not expect/require.

How about if we set termVectorsLocal itself to null?  Will GC then "do  
the right thing", ie, recognize (eventually) that this ThreadLocal  
instance is no longer referenced, and clear all Objects for all  
threads that were held in it?

Mike

Roman Puchkovskiy wrote:

>
> Unfortunately, it's not ok sometimes. For instance, when Lucene is  
> loaded by
> a web-application from its WEB-INF/lib and SegmentReader is  
> initialized
> during the application start-up (i.e. it's initialized in the thread  
> which
> will never die), this causes problems with unloading of a  
> classloader of the
> web-application. When web-application is undeployed, there's still a
> ThreadLocal in a thread which is external to webapp classloader, and  
> this
> ThreadLocal contains an object which references its class, and this  
> class
> was loaded through web-app classloader and hence references it... so  
> we have
> a chain of hard links from an alive thread to our classloader. In the
> result, the classloader cannot be unloaded together will all its  
> classes, so
> memory waste is considerable.
>
> I've found a way to work this around by creating a new thread during  
> webapp
> start-up and executing code which eventually initializes Lucene  
> indices from
> this thread, so all spawned ThreadLocals go to this short-lived  
> thread and
> get garbage-collected shortly after the webapp start-up is finished.  
> But
> this does not seem to be a pretty solution. Besides, one has to  
> guess that
> ThreadLocals are the problem to invent such a work-around :)
>
>
> Michael McCandless-2 wrote:
>>
>>
>> Well ... if the thread dies, the value in its ThreadLocal should be
>> GC'd.
>>
>> If the thread does not die (eg thread pool in an app server) then the
>> ThreadLocal value remains, but that value is a shallow clone of the
>> original TermVectorsReader and should not be consuming that much RAM
>> per thread.
>>
>> So I think it's OK?
>>
>> Mike
>>
>> Roman Puchkovskiy wrote:
>>
>>>
>>> Hi.
>>>
>>> There's a ThreadLocal field in SegmentReader (it's called
>>> termVectorsLocal).
>>> Some value is put to it, but it's never cleared.
>>> Is it ok? It looks like sometimes this behavior may lead to leaks.
>>>
>>> This is the same in lucene-2.2.0 and lucene-2.3.2.
>>>
>>> Thanks in advance.
>>> -- 
>>> View this message in context:
>>> http://www.nabble.com/ThreadLocal-in-SegmentReader-tp18306230p18306230.html
>>> Sent from the Lucene - Java Users mailing list archive at  
>>> Nabble.com.
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>
> -- 
> View this message in context: http://www.nabble.com/ThreadLocal-in-SegmentReader-tp18306230p18314310.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34812-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 07 11:50:36 2008
Return-Path: <java-user-return-34812-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4763 invoked from network); 7 Jul 2008 11:50:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Jul 2008 11:50:36 -0000
Received: (qmail 86662 invoked by uid 500); 7 Jul 2008 11:50:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86640 invoked by uid 500); 7 Jul 2008 11:50:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86618 invoked by uid 99); 7 Jul 2008 11:50:26 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Jul 2008 04:50:26 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Jul 2008 11:49:31 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KFpE8-00013X-Cp
	for java-user@lucene.apache.org; Mon, 07 Jul 2008 04:49:52 -0700
Message-ID: <18314959.post@talk.nabble.com>
Date: Mon, 7 Jul 2008 04:49:52 -0700 (PDT)
From: Roman Puchkovskiy <roman.puchkovskiy@blandware.com>
To: java-user@lucene.apache.org
Subject: Re: ThreadLocal in SegmentReader
In-Reply-To: <3526647C-1D0E-41A2-94D6-5D8A2B445640@mikemccandless.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: roman.puchkovskiy@blandware.com
References: <18306230.post@talk.nabble.com> <FEF4B2B0-2AD6-4537-AF0C-0E8574BDD930@mikemccandless.com> <18314310.post@talk.nabble.com> <3526647C-1D0E-41A2-94D6-5D8A2B445640@mikemccandless.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Yes, calling set(null) does not seem a good fix. As for setting a reference
to termVectorsLocal to null, not sure could this help or not, as this
ThreadLocal will still be referenced by the thread (or threads).
Anyway, I will try to test this approach and post the results here.


Michael McCandless-2 wrote:
> 
> 
> Hmmm, I see... you're right.  ThreadLocal is dangerous.
> 
> So how would you recommend fixing it?
> 
> One thing we can do, in SegmentReader.close, is to call  
> termVectorsLocal.set(null).  We do this eg in FieldsReader.close,  
> which uses a ThreadLocal to hold thread-private clones of the  
> fieldsStream
> 
> However, that only works if the very same thread that had opened the  
> reader also calls close... which likely often is the case but in  
> general is not guaranteed and we should not expect/require.
> 
> How about if we set termVectorsLocal itself to null?  Will GC then "do  
> the right thing", ie, recognize (eventually) that this ThreadLocal  
> instance is no longer referenced, and clear all Objects for all  
> threads that were held in it?
> 
> Mike
> 
> Roman Puchkovskiy wrote:
> 
>>
>> Unfortunately, it's not ok sometimes. For instance, when Lucene is  
>> loaded by
>> a web-application from its WEB-INF/lib and SegmentReader is  
>> initialized
>> during the application start-up (i.e. it's initialized in the thread  
>> which
>> will never die), this causes problems with unloading of a  
>> classloader of the
>> web-application. When web-application is undeployed, there's still a
>> ThreadLocal in a thread which is external to webapp classloader, and  
>> this
>> ThreadLocal contains an object which references its class, and this  
>> class
>> was loaded through web-app classloader and hence references it... so  
>> we have
>> a chain of hard links from an alive thread to our classloader. In the
>> result, the classloader cannot be unloaded together will all its  
>> classes, so
>> memory waste is considerable.
>>
>> I've found a way to work this around by creating a new thread during  
>> webapp
>> start-up and executing code which eventually initializes Lucene  
>> indices from
>> this thread, so all spawned ThreadLocals go to this short-lived  
>> thread and
>> get garbage-collected shortly after the webapp start-up is finished.  
>> But
>> this does not seem to be a pretty solution. Besides, one has to  
>> guess that
>> ThreadLocals are the problem to invent such a work-around :)
>>
>>
>> Michael McCandless-2 wrote:
>>>
>>>
>>> Well ... if the thread dies, the value in its ThreadLocal should be
>>> GC'd.
>>>
>>> If the thread does not die (eg thread pool in an app server) then the
>>> ThreadLocal value remains, but that value is a shallow clone of the
>>> original TermVectorsReader and should not be consuming that much RAM
>>> per thread.
>>>
>>> So I think it's OK?
>>>
>>> Mike
>>>
>>> Roman Puchkovskiy wrote:
>>>
>>>>
>>>> Hi.
>>>>
>>>> There's a ThreadLocal field in SegmentReader (it's called
>>>> termVectorsLocal).
>>>> Some value is put to it, but it's never cleared.
>>>> Is it ok? It looks like sometimes this behavior may lead to leaks.
>>>>
>>>> This is the same in lucene-2.2.0 and lucene-2.3.2.
>>>>
>>>> Thanks in advance.
>>>> -- 
>>>> View this message in context:
>>>> http://www.nabble.com/ThreadLocal-in-SegmentReader-tp18306230p18306230.html
>>>> Sent from the Lucene - Java Users mailing list archive at  
>>>> Nabble.com.
>>>>
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>>
>>
>> -- 
>> View this message in context:
>> http://www.nabble.com/ThreadLocal-in-SegmentReader-tp18306230p18314310.html
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/ThreadLocal-in-SegmentReader-tp18306230p18314959.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34813-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 07 13:01:33 2008
Return-Path: <java-user-return-34813-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33415 invoked from network); 7 Jul 2008 13:01:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Jul 2008 13:01:33 -0000
Received: (qmail 74415 invoked by uid 500); 7 Jul 2008 13:01:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74386 invoked by uid 500); 7 Jul 2008 13:01:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74375 invoked by uid 99); 7 Jul 2008 13:01:27 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Jul 2008 06:01:27 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of yseeley@gmail.com designates 64.233.170.187 as permitted sender)
Received: from [64.233.170.187] (HELO rn-out-0910.google.com) (64.233.170.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Jul 2008 13:00:36 +0000
Received: by rn-out-0910.google.com with SMTP id j71so318924rne.4
        for <java-user@lucene.apache.org>; Mon, 07 Jul 2008 06:00:57 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:sender
         :to:subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references
         :x-google-sender-auth;
        bh=xCb7pOs8FmhVB5rse7QPYk4Rxo1f9Xl6NkRlZvXNPjg=;
        b=UZgW1PtY7/qIWB8qD5DnYpcQ0kLWKrKR+P9955oCzBwJ81BU4ag0Vx5mYj+FlA4/VJ
         xLSnVyvpYb4/0ja7YR9VtqUklwykVZs+SItRldiAdDuiJptjw2+oRX+e2WvtH5fK5ZLt
         95AGylhTHBsrrF6rKobf4B3n1r/BN70qFOcGg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:sender:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references:x-google-sender-auth;
        b=jn/VkWPT9r6RcASY9T5pwHfPjZ/b4DUOJfUXecWkv7AopLYnfgiSzw9/ReRm8s7UJ8
         ZJIsiQdB2NJr0E4GvsQnnm2TGoVbD4UpUUhlU4CheRjZRjAqwug5ILDGnjZjSLbdIOXQ
         Zcsr5JXt04t3p/bpzdVH4KkF3rGxSEEBKSpOM=
Received: by 10.151.106.7 with SMTP id i7mr8150512ybm.176.1215435657176;
        Mon, 07 Jul 2008 06:00:57 -0700 (PDT)
Received: by 10.150.227.18 with HTTP; Mon, 7 Jul 2008 06:00:57 -0700 (PDT)
Message-ID: <c68e39170807070600w67925fb4ybffea182855c20d5@mail.gmail.com>
Date: Mon, 7 Jul 2008 09:00:57 -0400
From: "Yonik Seeley" <yonik@apache.org>
Sender: yseeley@gmail.com
To: java-user@lucene.apache.org
Subject: Re: Reg : lucene RemoteSearchable Object
In-Reply-To: <171dbfa60807060659i3b9ddd62v204ef1bdc77356c2@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <171dbfa60807060659i3b9ddd62v204ef1bdc77356c2@mail.gmail.com>
X-Google-Sender-Auth: 743dd1f3653a1494
X-Virus-Checked: Checked by ClamAV on apache.org

The files are still open by the process (deletion doesn't change this)
and hence the local IndexReader can still read the index.

-Yonik

On Sun, Jul 6, 2008 at 9:59 AM, saikrishna venkata pendyala
<pvsaikrishna@gmail.com> wrote:
> Hi all,
>
> I am currently developing a distributed search engine using Lucene.
>
> I am able to search the multiple machines quite successfully. Each machine
> using MultiSearcher to search the local indexes and  I  am creating
> RemoteSearchable object with it.
>
> The master machines searches these RemoteSearchable using
> ParallelMultiSearchable.
>
> Every thing is going fine except that, master is not able to keep track of
> *dynamic* remote index.
>
> These is what I did,
>
> 1. Made a index remotely available.
> 2. Searching the remote index continuously(with a loop) -- worked  fine
> 3. deleted the index from disk which was made remotly available.
> 4. Surprisingly, search is still working :(( (loop in step 2 continues)
>
> With few other experiments I had to come to an conclusion that somewhere in
> step 1 or step 2 index is being cached .
>
> I am right ??
>
> how can I slove this problem ?
>
> regards,
> Sai Krishna.
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34814-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 07 14:21:13 2008
Return-Path: <java-user-return-34814-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 57357 invoked from network); 7 Jul 2008 14:21:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Jul 2008 14:21:13 -0000
Received: (qmail 6631 invoked by uid 500); 7 Jul 2008 14:21:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6426 invoked by uid 500); 7 Jul 2008 14:21:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6415 invoked by uid 99); 7 Jul 2008 14:21:07 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Jul 2008 07:21:07 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Jul 2008 14:20:14 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KFrZz-00078f-H2
	for java-user@lucene.apache.org; Mon, 07 Jul 2008 07:20:35 -0700
Message-ID: <18317640.post@talk.nabble.com>
Date: Mon, 7 Jul 2008 07:20:35 -0700 (PDT)
From: Roman Puchkovskiy <roman.puchkovskiy@blandware.com>
To: java-user@lucene.apache.org
Subject: Re: ThreadLocal in SegmentReader
In-Reply-To: <3526647C-1D0E-41A2-94D6-5D8A2B445640@mikemccandless.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: roman.puchkovskiy@blandware.com
References: <18306230.post@talk.nabble.com> <FEF4B2B0-2AD6-4537-AF0C-0E8574BDD930@mikemccandless.com> <18314310.post@talk.nabble.com> <3526647C-1D0E-41A2-94D6-5D8A2B445640@mikemccandless.com>
X-Virus-Checked: Checked by ClamAV on apache.org


I've tested a little, and it seems that assigning a null is not sufficient.
As expected...
I don't see other ways how to fix this, but I'm not the Lucene developer :)
Fortunately, there's the work-around with temporary thread.


Michael McCandless-2 wrote:
> 
> 
> Hmmm, I see... you're right.  ThreadLocal is dangerous.
> 
> So how would you recommend fixing it?
> 
> One thing we can do, in SegmentReader.close, is to call  
> termVectorsLocal.set(null).  We do this eg in FieldsReader.close,  
> which uses a ThreadLocal to hold thread-private clones of the  
> fieldsStream
> 
> However, that only works if the very same thread that had opened the  
> reader also calls close... which likely often is the case but in  
> general is not guaranteed and we should not expect/require.
> 
> How about if we set termVectorsLocal itself to null?  Will GC then "do  
> the right thing", ie, recognize (eventually) that this ThreadLocal  
> instance is no longer referenced, and clear all Objects for all  
> threads that were held in it?
> 
> Mike
> 
> Roman Puchkovskiy wrote:
> 
>>
>> Unfortunately, it's not ok sometimes. For instance, when Lucene is  
>> loaded by
>> a web-application from its WEB-INF/lib and SegmentReader is  
>> initialized
>> during the application start-up (i.e. it's initialized in the thread  
>> which
>> will never die), this causes problems with unloading of a  
>> classloader of the
>> web-application. When web-application is undeployed, there's still a
>> ThreadLocal in a thread which is external to webapp classloader, and  
>> this
>> ThreadLocal contains an object which references its class, and this  
>> class
>> was loaded through web-app classloader and hence references it... so  
>> we have
>> a chain of hard links from an alive thread to our classloader. In the
>> result, the classloader cannot be unloaded together will all its  
>> classes, so
>> memory waste is considerable.
>>
>> I've found a way to work this around by creating a new thread during  
>> webapp
>> start-up and executing code which eventually initializes Lucene  
>> indices from
>> this thread, so all spawned ThreadLocals go to this short-lived  
>> thread and
>> get garbage-collected shortly after the webapp start-up is finished.  
>> But
>> this does not seem to be a pretty solution. Besides, one has to  
>> guess that
>> ThreadLocals are the problem to invent such a work-around :)
>>
>>
>> Michael McCandless-2 wrote:
>>>
>>>
>>> Well ... if the thread dies, the value in its ThreadLocal should be
>>> GC'd.
>>>
>>> If the thread does not die (eg thread pool in an app server) then the
>>> ThreadLocal value remains, but that value is a shallow clone of the
>>> original TermVectorsReader and should not be consuming that much RAM
>>> per thread.
>>>
>>> So I think it's OK?
>>>
>>> Mike
>>>
>>> Roman Puchkovskiy wrote:
>>>
>>>>
>>>> Hi.
>>>>
>>>> There's a ThreadLocal field in SegmentReader (it's called
>>>> termVectorsLocal).
>>>> Some value is put to it, but it's never cleared.
>>>> Is it ok? It looks like sometimes this behavior may lead to leaks.
>>>>
>>>> This is the same in lucene-2.2.0 and lucene-2.3.2.
>>>>
>>>> Thanks in advance.
>>>> -- 
>>>> View this message in context:
>>>> http://www.nabble.com/ThreadLocal-in-SegmentReader-tp18306230p18306230.html
>>>> Sent from the Lucene - Java Users mailing list archive at  
>>>> Nabble.com.
>>>>
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>>
>>
>> -- 
>> View this message in context:
>> http://www.nabble.com/ThreadLocal-in-SegmentReader-tp18306230p18314310.html
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/ThreadLocal-in-SegmentReader-tp18306230p18317640.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34815-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 07 16:05:11 2008
Return-Path: <java-user-return-34815-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33340 invoked from network); 7 Jul 2008 16:05:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Jul 2008 16:05:11 -0000
Received: (qmail 99900 invoked by uid 500); 7 Jul 2008 16:05:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 99745 invoked by uid 500); 7 Jul 2008 16:05:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 99734 invoked by uid 99); 7 Jul 2008 16:05:05 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Jul 2008 09:05:05 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lstitchvu@gmail.com designates 66.249.92.175 as permitted sender)
Received: from [66.249.92.175] (HELO ug-out-1314.google.com) (66.249.92.175)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Jul 2008 16:04:13 +0000
Received: by ug-out-1314.google.com with SMTP id h3so1028741ugf.29
        for <java-user@lucene.apache.org>; Mon, 07 Jul 2008 09:04:34 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:mime-version
         :content-transfer-encoding:message-id:content-type:to:from:subject
         :date:x-mailer;
        bh=ry5B/TUk1pBQPdjvjKVIx3/8lFGi55BnO2BhbvT30+g=;
        b=GZ8OZw7Xlo71g2wu6mGJtm50QthqXcpDiktlksmmrRuKI7PQtj5rb3f4b1+q6aSqhr
         1WQr0LeupbzgPHTB41Zi/qTiHfLtX2w7KgQMIzJbkZ2zbMHTqlzRu/fa9VwYpc/+LlqS
         0Cvzkga1g7YZ7nykkrcZp5szSWp1Qr78dtZDo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:content-transfer-encoding:message-id:content-type:to
         :from:subject:date:x-mailer;
        b=nwrKnuU/avwvyVD/hQNiuz2G7IeyGHSsJtjTJhuNO9nyMTo3Doouu3xjILMqADhsgG
         bk0T769DX59jCJje9rjvR5X3XgWqbgs/ba3x6zo2dr3Z+5uR2f6Yckcc7QKXgm70rmje
         IVE7Z1IQqWFvxOlStEqbkihGaQ6Q36XSrX9l4=
Received: by 10.67.100.12 with SMTP id c12mr4598234ugm.4.1215446674334;
        Mon, 07 Jul 2008 09:04:34 -0700 (PDT)
Received: from ?10.0.0.6? ( [212.123.163.26])
        by mx.google.com with ESMTPS id 30sm7725723ugf.63.2008.07.07.09.04.33
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Mon, 07 Jul 2008 09:04:34 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v753.1)
Content-Transfer-Encoding: 7bit
Message-Id: <0833DC23-F7DB-412F-885E-E99FEE3C87CB@gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
To: java-user@lucene.apache.org
From: Balthasar Schopman <lstitchvu@gmail.com>
Subject: disable boolean operators ?
Date: Mon, 7 Jul 2008 18:04:45 +0200
X-Mailer: Apple Mail (2.753.1)
X-Virus-Checked: Checked by ClamAV on apache.org

Hiya,

Is there a way to disable boolean operators in the Lucene engine?

The reason for this question is the mystical / unexpected exception I  
encounter when parsing a query containing many words. I query on a  
single field with a query containing 2243 words (14.742 characters).  
I haven't had this issue with smaller queries. I remove the Lucene  
special characters (+, -, &&, ||, !, (, ), {, }, [, ], ^, \, ~,  
*, ?, :, \) and boolean operators (AND, OR, NOT) from string before  
including them in a query. Then I construct the query as follows:
Query q = new QueryParser("alldata", analyser).parse(queryString);
and call
Hits hits = searcher.search(q);

An exception with the following message is thrown:
Cannot parse '<big string>': too many boolean clauses

Kind regards,
Balthasar Schopman


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34816-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 07 16:12:24 2008
Return-Path: <java-user-return-34816-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35457 invoked from network); 7 Jul 2008 16:12:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Jul 2008 16:12:23 -0000
Received: (qmail 10271 invoked by uid 500); 7 Jul 2008 16:12:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10238 invoked by uid 500); 7 Jul 2008 16:12:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10227 invoked by uid 99); 7 Jul 2008 16:12:17 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Jul 2008 09:12:17 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lstitchvu@gmail.com designates 66.249.92.170 as permitted sender)
Received: from [66.249.92.170] (HELO ug-out-1314.google.com) (66.249.92.170)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Jul 2008 16:11:25 +0000
Received: by ug-out-1314.google.com with SMTP id h3so1029551ugf.29
        for <java-user@lucene.apache.org>; Mon, 07 Jul 2008 09:11:45 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:mime-version
         :content-transfer-encoding:message-id:content-type:to:from:subject
         :date:x-mailer;
        bh=ry5B/TUk1pBQPdjvjKVIx3/8lFGi55BnO2BhbvT30+g=;
        b=VuDktOTzybwYb1bPllKWkDkdEBQ6Q8lJH5Z0eRlAzSdyDK9XeneY9aCQI7uGm/fc5/
         NTaiZ4nP/5Fzyll1qupjG4e8C1vKH44wgo7M5CF8Pr+W+6ZDsBzYGz3JSp9EBSG/8JKY
         IJpfQzOlQOPknxkysdyrOeT5Jdy0lEAW7ZI/8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:content-transfer-encoding:message-id:content-type:to
         :from:subject:date:x-mailer;
        b=bkEKWGu00QPTi1kP2VW07VzcgZMa9+yCun4lAs/h6TGSTgIw0Hnb+RMB8+CCv+mVWP
         MDwOzW2ft0HCbb+ewKz+RxreGu9zWA1+3zrWbaDJvkOsAY/RE8wawvCY+qMkHt1WBN7w
         UKDVn7Sy6Ymg2dmRvBXXjhOKqSsmmTaFZilL4=
Received: by 10.210.91.7 with SMTP id o7mr3263244ebb.197.1215447105377;
        Mon, 07 Jul 2008 09:11:45 -0700 (PDT)
Received: from ?10.0.0.6? ( [212.123.163.26])
        by mx.google.com with ESMTPS id z34sm6934330ikz.9.2008.07.07.09.11.44
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Mon, 07 Jul 2008 09:11:45 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v753.1)
Content-Transfer-Encoding: 7bit
Message-Id: <19252E5E-0509-4D2E-9294-613CB1E2240C@gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
To: java-user@lucene.apache.org
From: Balthasar Schopman <lstitchvu@gmail.com>
Subject: can the boolean operators be disabeled ?
Date: Mon, 7 Jul 2008 18:11:55 +0200
X-Mailer: Apple Mail (2.753.1)
X-Virus-Checked: Checked by ClamAV on apache.org

Hiya,

Is there a way to disable boolean operators in the Lucene engine?

The reason for this question is the mystical / unexpected exception I  
encounter when parsing a query containing many words. I query on a  
single field with a query containing 2243 words (14.742 characters).  
I haven't had this issue with smaller queries. I remove the Lucene  
special characters (+, -, &&, ||, !, (, ), {, }, [, ], ^, \, ~,  
*, ?, :, \) and boolean operators (AND, OR, NOT) from string before  
including them in a query. Then I construct the query as follows:
Query q = new QueryParser("alldata", analyser).parse(queryString);
and call
Hits hits = searcher.search(q);

An exception with the following message is thrown:
Cannot parse '<big string>': too many boolean clauses

Kind regards,
Balthasar Schopman


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34817-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 07 16:20:36 2008
Return-Path: <java-user-return-34817-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37943 invoked from network); 7 Jul 2008 16:20:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Jul 2008 16:20:36 -0000
Received: (qmail 26979 invoked by uid 500); 7 Jul 2008 16:20:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26952 invoked by uid 500); 7 Jul 2008 16:20:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26941 invoked by uid 99); 7 Jul 2008 16:20:30 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Jul 2008 09:20:30 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.142.184 as permitted sender)
Received: from [209.85.142.184] (HELO ti-out-0910.google.com) (209.85.142.184)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Jul 2008 16:19:38 +0000
Received: by ti-out-0910.google.com with SMTP id b8so572020tic.11
        for <java-user@lucene.apache.org>; Mon, 07 Jul 2008 09:19:59 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=xsg4PCib77XiKztex1JETj0DPPw27Vut5tT3Vc1KfAk=;
        b=JZllLG8WX1u3IgRqvn5rbBBBUqtnC2NNT8g3XgUMS1Y1Zp84lINkUv/AQm4cpi79I6
         tIWTS+msMGr/LLCyF4rxtECNRNAROm9ZRVAv3T6qyi2RsZCjxC1/Fzk9KD8fxL4r+1d/
         Xx81/eFP+6X9Hfar5akMzBHi1aN4fNoO4WQbg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=meTLbD5BhULgHF3wxlz2fosvtj0FxYaj0YYOx3uCDHsIwa2anUFP6xUF+Q7rVwX+Q+
         oF5sXuTJdcix32uUXfbLmNFBE3L7B7+5tELJz2pWRYnsz2ZdIr/+y6eCPLKYYXBZdtls
         UP3qOQwNLwFLm6yEvT3/VY+YAXcihyaGZcZHo=
Received: by 10.151.153.19 with SMTP id f19mr8465731ybo.116.1215447598208;
        Mon, 07 Jul 2008 09:19:58 -0700 (PDT)
Received: by 10.151.40.4 with HTTP; Mon, 7 Jul 2008 09:19:58 -0700 (PDT)
Message-ID: <359a92830807070919y550b73d9wef38df149a9535e5@mail.gmail.com>
Date: Mon, 7 Jul 2008 12:19:58 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: disable boolean operators ?
In-Reply-To: <0833DC23-F7DB-412F-885E-E99FEE3C87CB@gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_19000_6087377.1215447598197"
References: <0833DC23-F7DB-412F-885E-E99FEE3C87CB@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_19000_6087377.1215447598197
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I think you're off base a little. Lucene defaults to 1,024 boolean clauses
as the maximum number allowed. There is an implied boolean between
each term no matter what. Removing OR, AND, NOT doesn't change
that in the least. That is,
term1 term2 term3
is equivalent to
term1 OR term2 OR term3

So removing the booleans is having no effect on the error. The fact
that you have over 2,000 terms is the issue.

But you can change the number by BooleanQuery.setMaxClauseCount

Best
Erick

On Mon, Jul 7, 2008 at 12:04 PM, Balthasar Schopman <lstitchvu@gmail.com>
wrote:

> Hiya,
>
> Is there a way to disable boolean operators in the Lucene engine?
>
> The reason for this question is the mystical / unexpected exception I
> encounter when parsing a query containing many words. I query on a single
> field with a query containing 2243 words (14.742 characters). I haven't had
> this issue with smaller queries. I remove the Lucene special characters (+,
> -, &&, ||, !, (, ), {, }, [, ], ^, \, ~, *, ?, :, \) and boolean operators
> (AND, OR, NOT) from string before including them in a query. Then I
> construct the query as follows:
> Query q = new QueryParser("alldata", analyser).parse(queryString);
> and call
> Hits hits = searcher.search(q);
>
> An exception with the following message is thrown:
> Cannot parse '<big string>': too many boolean clauses
>
> Kind regards,
> Balthasar Schopman
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_19000_6087377.1215447598197--

From java-user-return-34818-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 07 16:46:02 2008
Return-Path: <java-user-return-34818-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 43885 invoked from network); 7 Jul 2008 16:46:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Jul 2008 16:46:02 -0000
Received: (qmail 57778 invoked by uid 500); 7 Jul 2008 16:45:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57747 invoked by uid 500); 7 Jul 2008 16:45:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57715 invoked by uid 99); 7 Jul 2008 16:45:55 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Jul 2008 09:45:55 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lstitchvu@gmail.com designates 72.14.204.239 as permitted sender)
Received: from [72.14.204.239] (HELO qb-out-0506.google.com) (72.14.204.239)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Jul 2008 16:45:02 +0000
Received: by qb-out-0506.google.com with SMTP id c7so214554qbc.9
        for <java-user@lucene.apache.org>; Mon, 07 Jul 2008 09:45:24 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:mime-version:in-reply-to
         :references:content-type:message-id:content-transfer-encoding:from
         :subject:date:to:x-mailer;
        bh=UWj6AP/TM073Wvuyr5VhKMplMQxEoqG37XQPy4e31wM=;
        b=qa2sryRoSHTycl9rasBNT+8m5ZZ8yYWZc4RwAL0wL4qORneVvBmPUlb4moy+Pi4ifS
         QuYTmjasvoWuTWwGoAzeaMo/5tA41j/1+p8dEUusZkWuIQgJ23JCvLrZjvgZsiM52uaA
         t4jQCaqfP6QsDCEBSMjQ2h3gVtOI40z3qQMBo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:content-type:message-id
         :content-transfer-encoding:from:subject:date:to:x-mailer;
        b=J32dn2AJsdxILhmNKBbulkq88RZPYd42RU9HKzsDdxny18s7X+ltMsqtFOMHV7DHDF
         LxwQJfTM7d3EeZK8UNS0yy0JDECyQgBbC43blg/6s4ewSMd3NsRNyxdqS4SS+1sLzPKs
         KpPbSZKqVweW6iq4a7V0qWQ44BnX9Hy9LZnwU=
Received: by 10.67.119.8 with SMTP id w8mr4614978ugm.20.1215449123177;
        Mon, 07 Jul 2008 09:45:23 -0700 (PDT)
Received: from ?10.0.0.6? ( [212.123.163.26])
        by mx.google.com with ESMTPS id 18sm7802748ugk.80.2008.07.07.09.45.22
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Mon, 07 Jul 2008 09:45:22 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v753.1)
In-Reply-To: <359a92830807070919y550b73d9wef38df149a9535e5@mail.gmail.com>
References: <0833DC23-F7DB-412F-885E-E99FEE3C87CB@gmail.com> <359a92830807070919y550b73d9wef38df149a9535e5@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <CDD74B11-2B5D-4B71-A856-934098333411@gmail.com>
Content-Transfer-Encoding: 7bit
From: Balthasar Schopman <lstitchvu@gmail.com>
Subject: Re: disable boolean operators ?
Date: Mon, 7 Jul 2008 18:45:34 +0200
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.753.1)
X-Virus-Checked: Checked by ClamAV on apache.org

That expains. Thanks a lot!


On Jul 7, 2008, at 6:19 PM, Erick Erickson wrote:
> I think you're off base a little. Lucene defaults to 1,024 boolean  
> clauses
> as the maximum number allowed. There is an implied boolean between
> each term no matter what. Removing OR, AND, NOT doesn't change
> that in the least. That is,
> term1 term2 term3
> is equivalent to
> term1 OR term2 OR term3
>
> So removing the booleans is having no effect on the error. The fact
> that you have over 2,000 terms is the issue.
>
> But you can change the number by BooleanQuery.setMaxClauseCount
>
> Best
> Erick
>
> On Mon, Jul 7, 2008 at 12:04 PM, Balthasar Schopman  
> <lstitchvu@gmail.com>
> wrote:
>
>> Hiya,
>>
>> Is there a way to disable boolean operators in the Lucene engine?
>>
>> The reason for this question is the mystical / unexpected exception I
>> encounter when parsing a query containing many words. I query on a  
>> single
>> field with a query containing 2243 words (14.742 characters). I  
>> haven't had
>> this issue with smaller queries. I remove the Lucene special  
>> characters (+,
>> -, &&, ||, !, (, ), {, }, [, ], ^, \, ~, *, ?, :, \) and boolean  
>> operators
>> (AND, OR, NOT) from string before including them in a query. Then I
>> construct the query as follows:
>> Query q = new QueryParser("alldata", analyser).parse(queryString);
>> and call
>> Hits hits = searcher.search(q);
>>
>> An exception with the following message is thrown:
>> Cannot parse '<big string>': too many boolean clauses
>>
>> Kind regards,
>> Balthasar Schopman
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34819-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 07 16:57:30 2008
Return-Path: <java-user-return-34819-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47626 invoked from network); 7 Jul 2008 16:57:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Jul 2008 16:57:30 -0000
Received: (qmail 77639 invoked by uid 500); 7 Jul 2008 16:57:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77603 invoked by uid 500); 7 Jul 2008 16:57:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77592 invoked by uid 99); 7 Jul 2008 16:57:24 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Jul 2008 09:57:24 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of pvsaikrishna@gmail.com designates 64.233.166.177 as permitted sender)
Received: from [64.233.166.177] (HELO py-out-1112.google.com) (64.233.166.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Jul 2008 16:56:32 +0000
Received: by py-out-1112.google.com with SMTP id z74so963535pyg.9
        for <java-user@lucene.apache.org>; Mon, 07 Jul 2008 09:56:54 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=r1QEboo7UgHKTnzdANfhd5pWR48qt1+FWi6JEM6PA8U=;
        b=Be0Eb/P/gZ8X2TMOF6e7+cZtO2HVXRKk1DKuKvfj1GN9lQkt/GG10+18GHIMyDAw24
         4UJpj6aJzrTIK2c1FPjvZuETFMBOaW9WmrEOyG5xMcacEQqX/MuP36XqWttnfvfULRqr
         SCEZ2/PjSlDsKiGZxfcVUHEkg5DrMVjHGu3uI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=D4aUWmWAuRAwOLroJ86lb+U5yDveAkrhU9Fje1Lyohvfrm//iLCq1fJN5zrb2G/2mi
         yZeT2U98IOI5iMoMDbxW0UOGlBtpMfSqQUw0dvVbjVWcswUEwoaisNvHfMtF/moQnqCA
         E8UhSn2cTMjS+sy4LfLkdxe5QBayeZY7x0qp0=
Received: by 10.141.1.2 with SMTP id d2mr2524952rvi.129.1215449813523;
        Mon, 07 Jul 2008 09:56:53 -0700 (PDT)
Received: by 10.140.191.16 with HTTP; Mon, 7 Jul 2008 09:56:48 -0700 (PDT)
Message-ID: <171dbfa60807070956o60b5cd7cgf30e47945fd850de@mail.gmail.com>
Date: Mon, 7 Jul 2008 22:26:48 +0530
From: "saikrishna venkata pendyala" <pvsaikrishna@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Reg : lucene RemoteSearchable Object
In-Reply-To: <c68e39170807070600w67925fb4ybffea182855c20d5@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_19029_29018029.1215449813510"
References: <171dbfa60807060659i3b9ddd62v204ef1bdc77356c2@mail.gmail.com>
	 <c68e39170807070600w67925fb4ybffea182855c20d5@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_19029_29018029.1215449813510
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Yes, I didn't reopen the index.
It's working fine now :)

On Mon, Jul 7, 2008 at 6:30 PM, Yonik Seeley <yonik@apache.org> wrote:

> The files are still open by the process (deletion doesn't change this)
> and hence the local IndexReader can still read the index.
>
> -Yonik
>
> On Sun, Jul 6, 2008 at 9:59 AM, saikrishna venkata pendyala
> <pvsaikrishna@gmail.com> wrote:
> > Hi all,
> >
> > I am currently developing a distributed search engine using Lucene.
> >
> > I am able to search the multiple machines quite successfully. Each
> machine
> > using MultiSearcher to search the local indexes and  I  am creating
> > RemoteSearchable object with it.
> >
> > The master machines searches these RemoteSearchable using
> > ParallelMultiSearchable.
> >
> > Every thing is going fine except that, master is not able to keep track
> of
> > *dynamic* remote index.
> >
> > These is what I did,
> >
> > 1. Made a index remotely available.
> > 2. Searching the remote index continuously(with a loop) -- worked  fine
> > 3. deleted the index from disk which was made remotly available.
> > 4. Surprisingly, search is still working :(( (loop in step 2 continues)
> >
> > With few other experiments I had to come to an conclusion that somewhere
> in
> > step 1 or step 2 index is being cached .
> >
> > I am right ??
> >
> > how can I slove this problem ?
> >
> > regards,
> > Sai Krishna.
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_19029_29018029.1215449813510--

From java-user-return-34820-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 07 18:43:45 2008
Return-Path: <java-user-return-34820-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95015 invoked from network); 7 Jul 2008 18:43:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Jul 2008 18:43:45 -0000
Received: (qmail 61946 invoked by uid 500); 7 Jul 2008 18:43:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61920 invoked by uid 500); 7 Jul 2008 18:43:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61909 invoked by uid 99); 7 Jul 2008 18:43:39 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Jul 2008 11:43:39 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=SPF_NEUTRAL,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.198.235] (HELO rv-out-0506.google.com) (209.85.198.235)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Jul 2008 18:42:44 +0000
Received: by rv-out-0506.google.com with SMTP id f6so2713977rvb.5
        for <java-user@lucene.apache.org>; Mon, 07 Jul 2008 11:43:05 -0700 (PDT)
Received: by 10.141.19.9 with SMTP id w9mr2656388rvi.204.1215456185496;
        Mon, 07 Jul 2008 11:43:05 -0700 (PDT)
Received: from ?10.17.4.4? ( [72.93.214.93])
        by mx.google.com with ESMTPS id 34sm5712069yxm.0.2008.07.07.11.43.04
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Mon, 07 Jul 2008 11:43:04 -0700 (PDT)
Message-Id: <9517C390-8EA0-4EE6-BE4F-E84A948DBCE5@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <18317640.post@talk.nabble.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: ThreadLocal in SegmentReader
Date: Mon, 7 Jul 2008 14:43:03 -0400
References: <18306230.post@talk.nabble.com> <FEF4B2B0-2AD6-4537-AF0C-0E8574BDD930@mikemccandless.com> <18314310.post@talk.nabble.com> <3526647C-1D0E-41A2-94D6-5D8A2B445640@mikemccandless.com> <18317640.post@talk.nabble.com>
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org


So now I'm confused: the SegmentReader itself should no longer be  
reachable, assuming you are not holding any references to your  
IndexReader.

Which means the ThreadLocal instance should no longer be reachable.

Which means it should be GC'd and everything it's holding should be  
GC'd as well, even if some threads under it are still alive.

I think?

So it seems like what we currently do should be working fine, yet it's  
apparently not.  Are you certain you don't keep a reference to your  
IndexReader somewhere?  Also, are you sure that you waited long enough  
for GC to reclaim these objects?

Mike

Roman Puchkovskiy wrote:

>
> I've tested a little, and it seems that assigning a null is not  
> sufficient.
> As expected...
> I don't see other ways how to fix this, but I'm not the Lucene  
> developer :)
> Fortunately, there's the work-around with temporary thread.
>
>
> Michael McCandless-2 wrote:
>>
>>
>> Hmmm, I see... you're right.  ThreadLocal is dangerous.
>>
>> So how would you recommend fixing it?
>>
>> One thing we can do, in SegmentReader.close, is to call
>> termVectorsLocal.set(null).  We do this eg in FieldsReader.close,
>> which uses a ThreadLocal to hold thread-private clones of the
>> fieldsStream
>>
>> However, that only works if the very same thread that had opened the
>> reader also calls close... which likely often is the case but in
>> general is not guaranteed and we should not expect/require.
>>
>> How about if we set termVectorsLocal itself to null?  Will GC then  
>> "do
>> the right thing", ie, recognize (eventually) that this ThreadLocal
>> instance is no longer referenced, and clear all Objects for all
>> threads that were held in it?
>>
>> Mike
>>
>> Roman Puchkovskiy wrote:
>>
>>>
>>> Unfortunately, it's not ok sometimes. For instance, when Lucene is
>>> loaded by
>>> a web-application from its WEB-INF/lib and SegmentReader is
>>> initialized
>>> during the application start-up (i.e. it's initialized in the thread
>>> which
>>> will never die), this causes problems with unloading of a
>>> classloader of the
>>> web-application. When web-application is undeployed, there's still a
>>> ThreadLocal in a thread which is external to webapp classloader, and
>>> this
>>> ThreadLocal contains an object which references its class, and this
>>> class
>>> was loaded through web-app classloader and hence references it... so
>>> we have
>>> a chain of hard links from an alive thread to our classloader. In  
>>> the
>>> result, the classloader cannot be unloaded together will all its
>>> classes, so
>>> memory waste is considerable.
>>>
>>> I've found a way to work this around by creating a new thread during
>>> webapp
>>> start-up and executing code which eventually initializes Lucene
>>> indices from
>>> this thread, so all spawned ThreadLocals go to this short-lived
>>> thread and
>>> get garbage-collected shortly after the webapp start-up is finished.
>>> But
>>> this does not seem to be a pretty solution. Besides, one has to
>>> guess that
>>> ThreadLocals are the problem to invent such a work-around :)
>>>
>>>
>>> Michael McCandless-2 wrote:
>>>>
>>>>
>>>> Well ... if the thread dies, the value in its ThreadLocal should be
>>>> GC'd.
>>>>
>>>> If the thread does not die (eg thread pool in an app server) then  
>>>> the
>>>> ThreadLocal value remains, but that value is a shallow clone of the
>>>> original TermVectorsReader and should not be consuming that much  
>>>> RAM
>>>> per thread.
>>>>
>>>> So I think it's OK?
>>>>
>>>> Mike
>>>>
>>>> Roman Puchkovskiy wrote:
>>>>
>>>>>
>>>>> Hi.
>>>>>
>>>>> There's a ThreadLocal field in SegmentReader (it's called
>>>>> termVectorsLocal).
>>>>> Some value is put to it, but it's never cleared.
>>>>> Is it ok? It looks like sometimes this behavior may lead to leaks.
>>>>>
>>>>> This is the same in lucene-2.2.0 and lucene-2.3.2.
>>>>>
>>>>> Thanks in advance.
>>>>> -- 
>>>>> View this message in context:
>>>>> http://www.nabble.com/ThreadLocal-in-SegmentReader-tp18306230p18306230.html
>>>>> Sent from the Lucene - Java Users mailing list archive at
>>>>> Nabble.com.
>>>>>
>>>>>
>>>>> ---------------------------------------------------------------------
>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>
>>>>
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>>
>>>
>>> -- 
>>> View this message in context:
>>> http://www.nabble.com/ThreadLocal-in-SegmentReader-tp18306230p18314310.html
>>> Sent from the Lucene - Java Users mailing list archive at  
>>> Nabble.com.
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>
> -- 
> View this message in context: http://www.nabble.com/ThreadLocal-in-SegmentReader-tp18306230p18317640.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34821-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 07 19:31:06 2008
Return-Path: <java-user-return-34821-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 15022 invoked from network); 7 Jul 2008 19:31:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Jul 2008 19:31:06 -0000
Received: (qmail 24107 invoked by uid 500); 7 Jul 2008 19:31:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24062 invoked by uid 500); 7 Jul 2008 19:30:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24051 invoked by uid 99); 7 Jul 2008 19:30:59 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Jul 2008 12:30:59 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of yseeley@gmail.com designates 209.85.142.184 as permitted sender)
Received: from [209.85.142.184] (HELO ti-out-0910.google.com) (209.85.142.184)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Jul 2008 19:30:08 +0000
Received: by ti-out-0910.google.com with SMTP id b8so633575tic.11
        for <java-user@lucene.apache.org>; Mon, 07 Jul 2008 12:30:29 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:sender
         :to:subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references
         :x-google-sender-auth;
        bh=cLs0PhG7v7MwdXZYm06aysY3HdWJkpW8nXPk9MnB7Zo=;
        b=DVQVGxvexsymQZgY1II7iyAASPAP8fq4rpBykktY9Se7KRTgSyM6AS0BZmv+fOBi4u
         MR0zrvgepcbKh1cTkYMHRcj3uy7gJwb9sIE+u54rAJCAq8JRyJQWyAXjnQNyrLOEa52p
         g3PtGNJAc2rkaXpTXiqTWctZFI9VCHI8HkalI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:sender:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references:x-google-sender-auth;
        b=npuSeeJrZEvDsXWvWysJbT0OS5pWe9V1beYjD/TiYXwZuVswhlx73kaPnm8zhpSTtR
         67DQ2dylDwHGh6ds29F/QzsAeEtamEyMWsVOClNbhGDFC0SqeaRhtG7OO2v/I7qoVigi
         eAyDgdO5Wp4yrp3acGRCXryNwwEZB2vvv8igI=
Received: by 10.150.123.16 with SMTP id v16mr8761484ybc.109.1215459028067;
        Mon, 07 Jul 2008 12:30:28 -0700 (PDT)
Received: by 10.150.227.18 with HTTP; Mon, 7 Jul 2008 12:30:28 -0700 (PDT)
Message-ID: <c68e39170807071230q2ac803e5x12a732d3e5f835f3@mail.gmail.com>
Date: Mon, 7 Jul 2008 15:30:28 -0400
From: "Yonik Seeley" <yonik@apache.org>
Sender: yseeley@gmail.com
To: java-user@lucene.apache.org
Subject: Re: ThreadLocal in SegmentReader
In-Reply-To: <9517C390-8EA0-4EE6-BE4F-E84A948DBCE5@mikemccandless.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <18306230.post@talk.nabble.com>
	 <FEF4B2B0-2AD6-4537-AF0C-0E8574BDD930@mikemccandless.com>
	 <18314310.post@talk.nabble.com>
	 <3526647C-1D0E-41A2-94D6-5D8A2B445640@mikemccandless.com>
	 <18317640.post@talk.nabble.com>
	 <9517C390-8EA0-4EE6-BE4F-E84A948DBCE5@mikemccandless.com>
X-Google-Sender-Auth: 93733ca4335574ee
X-Virus-Checked: Checked by ClamAV on apache.org

On Mon, Jul 7, 2008 at 2:43 PM, Michael McCandless
<lucene@mikemccandless.com> wrote:
> So now I'm confused: the SegmentReader itself should no longer be reachable,
> assuming you are not holding any references to your IndexReader.
>
> Which means the ThreadLocal instance should no longer be reachable.

It will still be referenced from the Thread(s) ThreadLocalMap
The key (the ThreadLocal) will be weakly referenced, but the values
(now stale) are strongly referenced and won't be actually removed
until the table is resized (under the Java6 impl at least).
Nice huh?

-Yonik

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34822-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 07 20:56:39 2008
Return-Path: <java-user-return-34822-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 57716 invoked from network); 7 Jul 2008 20:56:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Jul 2008 20:56:39 -0000
Received: (qmail 33102 invoked by uid 500); 7 Jul 2008 20:56:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33066 invoked by uid 500); 7 Jul 2008 20:56:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33055 invoked by uid 99); 7 Jul 2008 20:56:32 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Jul 2008 13:56:32 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.132.242] (HELO an-out-0708.google.com) (209.85.132.242)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Jul 2008 20:55:40 +0000
Received: by an-out-0708.google.com with SMTP id c37so464953anc.49
        for <java-user@lucene.apache.org>; Mon, 07 Jul 2008 13:56:01 -0700 (PDT)
Received: by 10.100.47.13 with SMTP id u13mr4001612anu.56.1215464161360;
        Mon, 07 Jul 2008 13:56:01 -0700 (PDT)
Received: from ?10.17.4.4? ( [72.93.214.93])
        by mx.google.com with ESMTPS id b3sm3330800ana.7.2008.07.07.13.56.00
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Mon, 07 Jul 2008 13:56:01 -0700 (PDT)
Message-Id: <E554D44F-63D1-461F-96E3-F41C4AA7BB54@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <c68e39170807071230q2ac803e5x12a732d3e5f835f3@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: ThreadLocal in SegmentReader
Date: Mon, 7 Jul 2008 16:56:00 -0400
References: <18306230.post@talk.nabble.com> <FEF4B2B0-2AD6-4537-AF0C-0E8574BDD930@mikemccandless.com> <18314310.post@talk.nabble.com> <3526647C-1D0E-41A2-94D6-5D8A2B445640@mikemccandless.com> <18317640.post@talk.nabble.com> <9517C390-8EA0-4EE6-BE4F-E84A948DBCE5@mikemccandless.com> <c68e39170807071230q2ac803e5x12a732d3e5f835f3@mail.gmail.com>
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org


Ugh!  I'll move this to java-dev to brainstorm fixes...

Mike

Yonik Seeley wrote:

> On Mon, Jul 7, 2008 at 2:43 PM, Michael McCandless
> <lucene@mikemccandless.com> wrote:
>> So now I'm confused: the SegmentReader itself should no longer be  
>> reachable,
>> assuming you are not holding any references to your IndexReader.
>>
>> Which means the ThreadLocal instance should no longer be reachable.
>
> It will still be referenced from the Thread(s) ThreadLocalMap
> The key (the ThreadLocal) will be weakly referenced, but the values
> (now stale) are strongly referenced and won't be actually removed
> until the table is resized (under the Java6 impl at least).
> Nice huh?
>
> -Yonik
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34823-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 08 00:54:06 2008
Return-Path: <java-user-return-34823-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 46804 invoked from network); 8 Jul 2008 00:54:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Jul 2008 00:54:06 -0000
Received: (qmail 59665 invoked by uid 500); 8 Jul 2008 00:54:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58653 invoked by uid 500); 8 Jul 2008 00:54:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58642 invoked by uid 99); 8 Jul 2008 00:54:00 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Jul 2008 17:54:00 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of isaacrc82@gmail.com designates 209.85.198.224 as permitted sender)
Received: from [209.85.198.224] (HELO rv-out-0506.google.com) (209.85.198.224)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Jul 2008 00:53:09 +0000
Received: by rv-out-0506.google.com with SMTP id f6so2823571rvb.5
        for <java-user@lucene.apache.org>; Mon, 07 Jul 2008 17:53:31 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type;
        bh=5C9AhnJfIlyKEpVpM80EzLT0xskYT9nuoVH7UhQS8IM=;
        b=aJPfghFi1OXcvTqc9nitn82uFST1yxykXY+XstUt0few+mC7Mat9pqNgnO2Trb6gN2
         dvxawQUijWyWUBSHDvZoDeC/9zyW3E+dJPISdxTC1oemu+TM8cJ6tmyMR8h8CNJPQ39p
         +hX70N6W/Ct6otVEYm05zZ+a21nc8ClF8NzeA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=mUXoEfuGgCNIF8cZ+4I5UhTV1peR8MQ84HlxEdvLJZJ26mIPEYo01zpiAgOybJ7kwZ
         PZSGLyBa1ZLy77BiWcFsKmAnsvqDQW75nV2NwiMm7BwnrR+gYPjI8gN2zyN8kWBp2C1p
         KRfC7rw2qNAHiK+X3Qx0p6IJLEsLu2pgNDjZ4=
Received: by 10.140.171.18 with SMTP id t18mr2830191rve.249.1215478410712;
        Mon, 07 Jul 2008 17:53:30 -0700 (PDT)
Received: by 10.141.78.1 with HTTP; Mon, 7 Jul 2008 17:53:30 -0700 (PDT)
Message-ID: <bf1404350807071753r7ffa93e4y3b2d60d646a341dc@mail.gmail.com>
Date: Mon, 7 Jul 2008 20:53:30 -0400
From: Ariel <isaacrc82@gmail.com>
To: java-user@lucene.apache.org
Subject: How to make documents clustering and topic classification with lucene
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_7659_17853556.1215478410703"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_7659_17853556.1215478410703
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi everybody:
Do you have Idea how to make how to make documents clustering and topic
classification using lucene ??? Is there anyway to do this.
Please I need help.
Thanks everybody.
Ariel

------=_Part_7659_17853556.1215478410703--

From java-user-return-34824-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 08 00:57:32 2008
Return-Path: <java-user-return-34824-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47877 invoked from network); 8 Jul 2008 00:57:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Jul 2008 00:57:32 -0000
Received: (qmail 61259 invoked by uid 500); 8 Jul 2008 00:57:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61226 invoked by uid 500); 8 Jul 2008 00:57:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61215 invoked by uid 99); 8 Jul 2008 00:57:24 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 07 Jul 2008 17:57:24 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of isaacrc82@gmail.com designates 209.85.198.238 as permitted sender)
Received: from [209.85.198.238] (HELO rv-out-0506.google.com) (209.85.198.238)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Jul 2008 00:56:32 +0000
Received: by rv-out-0506.google.com with SMTP id f6so2824383rvb.5
        for <java-user@lucene.apache.org>; Mon, 07 Jul 2008 17:56:37 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=tKgezT6jQK9x0lgBl+yE4lQF8w2Lf7vKMrvCdvzYuGI=;
        b=ucZuzC5H6/TA9PRijJ9VXHOCzAb7rkF56si4+rREozpcAGCeD+2oaUyIwR3Jqcu8QA
         HiJQ7D+jvmP0dqL7046315EUo+uuknx7anxGSbmBLuNGx+CmP/E3aFMK6zM6oRU1RCjJ
         P7IPZcpucwFg8x3v0GgYWRrAT961FYKkD9Rek=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=aoL2iQ4Nrl1Ud3j8sSbtMS35LC3h7C9NeRxfUR90iQgkhFXZ8wtvSw6PTo0IAXn/wO
         NSoxL/saKki/Mk2vWJsm95qcUKQBGQUT142YpjAG4GkHx4lzT66fzUUBYJvBcodNsDRA
         GY5grXshLQfPp03yCjr8nCd6bjHmue0ytQAmg=
Received: by 10.141.84.17 with SMTP id m17mr2834146rvl.48.1215478596991;
        Mon, 07 Jul 2008 17:56:36 -0700 (PDT)
Received: by 10.141.78.1 with HTTP; Mon, 7 Jul 2008 17:56:36 -0700 (PDT)
Message-ID: <bf1404350807071756n60d90a8bu5e2b02f273502afb@mail.gmail.com>
Date: Mon, 7 Jul 2008 20:56:36 -0400
From: Ariel <isaacrc82@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: How to make documents clustering and topic classification with lucene
In-Reply-To: <bf1404350807071753r7ffa93e4y3b2d60d646a341dc@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_7663_18760173.1215478596991"
References: <bf1404350807071753r7ffa93e4y3b2d60d646a341dc@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_7663_18760173.1215478596991
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi everybody:
Do you have Idea how to make how to make documents clustering and topic
classification using lucene ??? Is there anyway to do this.
Please I need help.
Thanks everybody.
Ariel

------=_Part_7663_18760173.1215478596991--

From java-user-return-34825-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 08 08:04:49 2008
Return-Path: <java-user-return-34825-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76561 invoked from network); 8 Jul 2008 08:04:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Jul 2008 08:04:49 -0000
Received: (qmail 41504 invoked by uid 500); 8 Jul 2008 08:04:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41477 invoked by uid 500); 8 Jul 2008 08:04:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41449 invoked by uid 99); 8 Jul 2008 08:04:42 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Jul 2008 01:04:42 -0700
X-ASF-Spam-Status: No, hits=1.0 required=10.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS,URIBL_BLACK
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of paul_t100@fastmail.fm designates 66.111.4.28 as permitted sender)
Received: from [66.111.4.28] (HELO out4.smtp.messagingengine.com) (66.111.4.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Jul 2008 08:03:49 +0000
Received: from compute1.internal (compute1.internal [10.202.2.41])
	by out1.messagingengine.com (Postfix) with ESMTP id B5F941386D3
	for <java-user@lucene.apache.org>; Tue,  8 Jul 2008 04:01:01 -0400 (EDT)
Received: from heartbeat1.messagingengine.com ([10.202.2.160])
  by compute1.internal (MEProxy); Tue, 08 Jul 2008 04:01:01 -0400
X-Sasl-enc: Rq+iArL5aFvAf2riCSBjjx2i8vDkJe+rJciCkfDO+y9q 1215504061
Received: from [192.168.2.36] (cpc2-leed4-0-0-cust808.leed.cable.ntl.com [81.105.111.41])
	by mail.messagingengine.com (Postfix) with ESMTPA id 3775C248FF
	for <java-user@lucene.apache.org>; Tue,  8 Jul 2008 04:01:01 -0400 (EDT)
Message-ID: <48731EC4.5050404@fastmail.fm>
Date: Tue, 08 Jul 2008 09:01:08 +0100
From: Paul Taylor <paul_t100@fastmail.fm>
Reply-To: paul_t100@fastmail.fm
User-Agent: Thunderbird 2.0.0.14 (Windows/20080421)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Move from RAMDirectory to FSDirectory causing problem sometimes
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi, I have been using a RAMDirectory for indexing without any problem, 
but I then moved to a file based directory to reduce memory usage. this 
has been working fine on Windows and OSX and my version of linux 
(redhat) but is failing on a version of linux (archlinux) with 'Too many 
files opened' , but they are only indexing 32 documents , I can index 
thousands without a problem. It mentions this error in the Lucene FAQ 
but I am not dealing directly with the filesystem myself, this is my 
code for creating an index is it okay or is there some kind of close 
that I am missing

thanks for any help Paul

public synchronized void reindex()
    {
        MainWindow.logger.info("Reindex start:" + new Date());
        TableModel tableModel = table.getModel();
        try
        {
            //Recreate the RAMDirectory uses too much memory
            //directory = new RAMDirectory();
            directory = 
FSDirectory.getDirectory(Platform.getPlatformLicenseFolder()+ "/" + 
TAG_BROWSER_INDEX);
            IndexWriter writer = new IndexWriter(directory, analyzer, true);

            //Iterate through all rows
            for (int row = 0; row < tableModel.getRowCount(); row++)
            {
                //for each row make a new document
                Document document = createDocument(row);
                writer.addDocument(document);

            }
            writer.optimize();
            writer.close();
        }
        catch (Exception e)
        {
            throw new RuntimeException("Problem indexing Data:" + 
e.getMessage());
        }
}

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34826-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 08 08:41:08 2008
Return-Path: <java-user-return-34826-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84368 invoked from network); 8 Jul 2008 08:41:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Jul 2008 08:41:08 -0000
Received: (qmail 75927 invoked by uid 500); 8 Jul 2008 08:41:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75890 invoked by uid 500); 8 Jul 2008 08:41:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75879 invoked by uid 99); 8 Jul 2008 08:41:02 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Jul 2008 01:41:02 -0700
X-ASF-Spam-Status: No, hits=0.8 required=10.0
	tests=HTML_MESSAGE,MIME_BASE64_BLANKS,MIME_BASE64_TEXT,RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of daizhoul@cn.ibm.com designates 202.81.18.152 as permitted sender)
Received: from [202.81.18.152] (HELO ausmtp04.au.ibm.com) (202.81.18.152)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Jul 2008 08:40:08 +0000
Received: from sd0109e.au.ibm.com (d23rh905.au.ibm.com [202.81.18.225])
	by ausmtp04.au.ibm.com (8.13.8/8.13.8) with ESMTP id m688gW2Y098902
	for <java-user@lucene.apache.org>; Tue, 8 Jul 2008 18:42:32 +1000
Received: from d23av01.au.ibm.com (d23av01.au.ibm.com [9.190.234.96])
	by sd0109e.au.ibm.com (8.13.8/8.13.8/NCO v9.0) with ESMTP id m688VhlS122312
	for <java-user@lucene.apache.org>; Tue, 8 Jul 2008 18:31:43 +1000
Received: from d23av01.au.ibm.com (loopback [127.0.0.1])
	by d23av01.au.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id m688VgF7011998
	for <java-user@lucene.apache.org>; Tue, 8 Jul 2008 18:31:42 +1000
Received: from d23m0016.cn.ibm.com (d23m0016.cn.ibm.com [9.181.32.76])
	by d23av01.au.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id m688VO56011526
	for <java-user@lucene.apache.org>; Tue, 8 Jul 2008 18:31:42 +1000
Subject: 'deletable' indexing files are not deleted on RHEL5
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Build V80_M5_05202007 May 20, 2007
Message-ID: <OF457421BB.38CBD1D5-ON48257480.002E9683-48257480.002EB2BC@cn.ibm.com>
From: Zhou Lin Dai <daizhoul@cn.ibm.com>
Date: Tue, 8 Jul 2008 16:30:04 +0800
X-MIMETrack: Serialize by Router on d23m0016/23/M/IBM(Release 7.0.2FP2HF178 | August 10, 2007) at
 08/07/2008 16:28:34
MIME-Version: 1.0
Content-type: multipart/alternative; 
	Boundary="0__=C7BBFE13DFBD10138f9e8a93df938690918cC7BBFE13DFBD1013"
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org

--0__=C7BBFE13DFBD10138f9e8a93df938690918cC7BBFE13DFBD1013
Content-type: text/plain; charset=GB2312
Content-transfer-encoding: base64


DQpIaQ0KDQpJJ20gdXNpbmcgTHVjZW5lIG9uIGEgUkhFTDUgYm94LiBUaGUgaW5kZXhpbmcgZm9s
ZGVyIGlzIGdyb3dpbmcgZXh0cmVtZWx5DQpsYXJnZSwgbW9yZSB0aGFuIDIwIEdCLCB3aXRoIGEg
bG90ICdkZWxldGFibGUnIGluZGV4aW5nIGZpbGVzLiBJdCBydW5zIG91dA0Kb2YgdGhlIGRpc2su
IEkgaGF2ZSB0byBjbGVhciB0aGUgZW50aXJlIGZvbGRlciBhbmQgc3RhcnQgaW5kZXhpbmcgZnJv
bQ0KYmxhbmsuIFRoZSBjb2RlIHJhbiBmaW5lIGJlZm9yZSBJIG1vdmVkIGl0IG9udG8gUkhFTDUu
IERvZXMgdGhhdCBtYXR0ZXI/DQpDYW4gYW55b25lIGdpdmUgc29tZSBzdWdnZXN0aW9ucyBvbiBo
b3cgdG8gc29sdmUgdGhpcyBpc3N1ZT8NCg0KVGhhbmtzIGluIGFkdmFuY2UuDQoNCkJlc3QgUmVn
YXJkcywNCg0KRnJhbmsgRGFpIChEYWkgWmhvdWxpbiC099bcwdYpDQpMb3R1cyBDb25uZWN0aW9u
cyAtIERvZ2VhciBEZXZlbG9wbWVudCwgV1BMQw0KQ2hpbmEgRGV2ZWxvcG1lbnQgTGFiLCBJQk0g
U2hhbmdoYWkNClRFTDooODYtMjEpNjA5MjgxODkNCkludGVybmV0IElEOiBkYWl6aG91bEBjbi5p
Ym0uY29tDQpBZGRyOiA0RiwgTm8gNzgsIExhbmUgODg3LCBadSBDaG9uZyBaaGkgUm9hZCwgWmhh
bmcgSmlhbmcgSGlnaCBUZWNoIFBhcmssDQoyMDEyMDMsIFNoYW5naGFpLCBDaGluYQ0KTXkgQmxv
ZzogaHR0cDovL3d3dy5kYWl6aG91bGluLmNvbS93b3JkcHJlc3M=

--0__=C7BBFE13DFBD10138f9e8a93df938690918cC7BBFE13DFBD1013--


From java-user-return-34827-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 08 09:53:48 2008
Return-Path: <java-user-return-34827-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7462 invoked from network); 8 Jul 2008 09:53:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Jul 2008 09:53:48 -0000
Received: (qmail 64268 invoked by uid 500); 8 Jul 2008 09:53:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63888 invoked by uid 500); 8 Jul 2008 09:53:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63877 invoked by uid 99); 8 Jul 2008 09:53:43 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Jul 2008 02:53:43 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.132.250] (HELO an-out-0708.google.com) (209.85.132.250)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Jul 2008 09:52:49 +0000
Received: by an-out-0708.google.com with SMTP id c37so513756anc.49
        for <java-user@lucene.apache.org>; Tue, 08 Jul 2008 02:53:10 -0700 (PDT)
Received: by 10.100.228.13 with SMTP id a13mr4592711anh.70.1215510789280;
        Tue, 08 Jul 2008 02:53:09 -0700 (PDT)
Received: from ?10.17.4.4? ( [72.93.214.93])
        by mx.google.com with ESMTPS id 6sm9572284ywp.3.2008.07.08.02.53.08
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Tue, 08 Jul 2008 02:53:08 -0700 (PDT)
Message-Id: <C793B91F-C8BD-4563-9A3B-91B3934D29D1@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <OF457421BB.38CBD1D5-ON48257480.002E9683-48257480.002EB2BC@cn.ibm.com>
Content-Type: text/plain; charset=GB2312; format=flowed; delsp=yes
Content-Transfer-Encoding: quoted-printable
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: 'deletable' indexing files are not deleted on RHEL5
Date: Tue, 8 Jul 2008 05:53:07 -0400
References: <OF457421BB.38CBD1D5-ON48257480.002E9683-48257480.002EB2BC@cn.ibm.com>
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org


What do you mean by "deletable" indexing files?

Moving to RHEL5 should have no effect (vs other platforms) on how much =20=

disk space is used.

However, Lucene's disk usage can be surprising.  While merging =20
segments it will temporarily require free space equal to the size of =20
the resulting merged segment.  For a large merge this can be a sizable =20=

percentage of your total index size.

Mike

Zhou Lin Dai wrote:

>
> Hi
>
> I'm using Lucene on a RHEL5 box. The indexing folder is growing =20
> extremely
> large, more than 20 GB, with a lot 'deletable' indexing files. It =20
> runs out
> of the disk. I have to clear the entire folder and start indexing from
> blank. The code ran fine before I moved it onto RHEL5. Does that =20
> matter?
> Can anyone give some suggestions on how to solve this issue?
>
> Thanks in advance.
>
> Best Regards,
>
> Frank Dai (Dai Zhoulin =B4=F7=D6=DC=C1=D6)
> Lotus Connections - Dogear Development, WPLC
> China Development Lab, IBM Shanghai
> TEL:(86-21)60928189
> Internet ID: daizhoul@cn.ibm.com
> Addr: 4F, No 78, Lane 887, Zu Chong Zhi Road, Zhang Jiang High Tech =20=

> Park,
> 201203, Shanghai, China
> My Blog: http://www.daizhoulin.com/wordpress


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34828-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 08 09:57:31 2008
Return-Path: <java-user-return-34828-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8405 invoked from network); 8 Jul 2008 09:57:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Jul 2008 09:57:31 -0000
Received: (qmail 69218 invoked by uid 500); 8 Jul 2008 09:57:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69191 invoked by uid 500); 8 Jul 2008 09:57:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69179 invoked by uid 99); 8 Jul 2008 09:57:26 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Jul 2008 02:57:26 -0700
X-ASF-Spam-Status: No, hits=3.2 required=10.0
	tests=SPF_NEUTRAL,URIBL_BLACK
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [74.125.46.30] (HELO yw-out-2324.google.com) (74.125.46.30)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Jul 2008 09:56:32 +0000
Received: by yw-out-2324.google.com with SMTP id 3so1043169ywj.5
        for <java-user@lucene.apache.org>; Tue, 08 Jul 2008 02:56:46 -0700 (PDT)
Received: by 10.151.155.9 with SMTP id h9mr10015383ybo.130.1215511006515;
        Tue, 08 Jul 2008 02:56:46 -0700 (PDT)
Received: from ?10.17.4.4? ( [72.93.214.93])
        by mx.google.com with ESMTPS id 5sm974838ywd.8.2008.07.08.02.56.45
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Tue, 08 Jul 2008 02:56:46 -0700 (PDT)
Message-Id: <EFD6051F-BE72-4184-90FC-648053E7401B@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <48731EC4.5050404@fastmail.fm>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: Move from RAMDirectory to FSDirectory causing problem sometimes
Date: Tue, 8 Jul 2008 05:56:44 -0400
References: <48731EC4.5050404@fastmail.fm>
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org


Technically you should call directory.close() as well, but missing  
that will not lead to too many open files.

How often is that RuntimeException being thrown?  EG if a single  
document is frequently hitting an exception during analysis, your code  
doesn't close the IndexWriter in that situation.  It's better to use a  
try/finally and close the IndexWriter in the finally clause, to cover  
that case.

Are you sure nothing else is using up file descriptors?  EG the  
createDocument call does not open any files?

Mike

Paul Taylor wrote:

> Hi, I have been using a RAMDirectory for indexing without any  
> problem, but I then moved to a file based directory to reduce memory  
> usage. this has been working fine on Windows and OSX and my version  
> of linux (redhat) but is failing on a version of linux (archlinux)  
> with 'Too many files opened' , but they are only indexing 32  
> documents , I can index thousands without a problem. It mentions  
> this error in the Lucene FAQ but I am not dealing directly with the  
> filesystem myself, this is my code for creating an index is it okay  
> or is there some kind of close that I am missing
>
> thanks for any help Paul
>
> public synchronized void reindex()
>   {
>       MainWindow.logger.info("Reindex start:" + new Date());
>       TableModel tableModel = table.getModel();
>       try
>       {
>           //Recreate the RAMDirectory uses too much memory
>           //directory = new RAMDirectory();
>           directory =  
> FSDirectory.getDirectory(Platform.getPlatformLicenseFolder()+ "/" +  
> TAG_BROWSER_INDEX);
>           IndexWriter writer = new IndexWriter(directory, analyzer,  
> true);
>
>           //Iterate through all rows
>           for (int row = 0; row < tableModel.getRowCount(); row++)
>           {
>               //for each row make a new document
>               Document document = createDocument(row);
>               writer.addDocument(document);
>
>           }
>           writer.optimize();
>           writer.close();
>       }
>       catch (Exception e)
>       {
>           throw new RuntimeException("Problem indexing Data:" +  
> e.getMessage());
>       }
> }
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34829-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 08 10:04:13 2008
Return-Path: <java-user-return-34829-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10091 invoked from network); 8 Jul 2008 10:04:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Jul 2008 10:04:13 -0000
Received: (qmail 79349 invoked by uid 500); 8 Jul 2008 10:04:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79308 invoked by uid 500); 8 Jul 2008 10:04:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79297 invoked by uid 99); 8 Jul 2008 10:04:05 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Jul 2008 03:04:05 -0700
X-ASF-Spam-Status: No, hits=1.0 required=10.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS,URIBL_BLACK
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of paul_t100@fastmail.fm designates 66.111.4.28 as permitted sender)
Received: from [66.111.4.28] (HELO out4.smtp.messagingengine.com) (66.111.4.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Jul 2008 10:03:11 +0000
Received: from compute1.internal (compute1.internal [10.202.2.41])
	by out1.messagingengine.com (Postfix) with ESMTP id F0618138BE8
	for <java-user@lucene.apache.org>; Tue,  8 Jul 2008 06:03:31 -0400 (EDT)
Received: from heartbeat1.messagingengine.com ([10.202.2.160])
  by compute1.internal (MEProxy); Tue, 08 Jul 2008 06:03:31 -0400
X-Sasl-enc: FPNcCgxbq/9bGZZ/ITh+6uy2P+SVcNbwOzFKZAMjdj2S 1215511411
Received: from [192.168.2.36] (cpc2-leed4-0-0-cust808.leed.cable.ntl.com [81.105.111.41])
	by mail.messagingengine.com (Postfix) with ESMTPA id 53F8211235
	for <java-user@lucene.apache.org>; Tue,  8 Jul 2008 06:03:31 -0400 (EDT)
Message-ID: <48733B7B.3020302@fastmail.fm>
Date: Tue, 08 Jul 2008 11:03:39 +0100
From: Paul Taylor <paul_t100@fastmail.fm>
Reply-To: paul_t100@fastmail.fm
User-Agent: Thunderbird 2.0.0.14 (Windows/20080421)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Move from RAMDirectory to FSDirectory causing problem sometimes
References: <48731EC4.5050404@fastmail.fm> <EFD6051F-BE72-4184-90FC-648053E7401B@mikemccandless.com>
In-Reply-To: <EFD6051F-BE72-4184-90FC-648053E7401B@mikemccandless.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Michael McCandless wrote:
>
> Technically you should call directory.close() as well, but missing 
> that will not lead to too many open files.
>
> How often is that RuntimeException being thrown?  EG if a single 
> document is frequently hitting an exception during analysis, your code 
> doesn't close the IndexWriter in that situation.  It's better to use a 
> try/finally and close the IndexWriter in the finally clause, to cover 
> that case.
>
> Are you sure nothing else is using up file descriptors?  EG the 
> createDocument call does not open any files?
>
> Mike
>
The runtimeException is occurring all the time, Im waiting for some more 
information from the user. Since the post I've since added 
directory.close() too, I thought this would cause a problem when I call 
IndexSearcher with it as a parameter but it seems to still work - the 
documentation is not very clear on this point. I see your poibnt about 
the try/finally I'll make that chnage.

There are many other parts of the code that use filedescriptors, but the 
problem has never occurred before moving to a FSDirectory

thanks paul

heres an example of my search code, is this ok ?

public boolean recNoColumnMatchesSearch(Integer columnId, Integer recNo, 
String search)
 {  
        try
        {
            IndexSearcher is = new IndexSearcher(directory);

            //Build a query based on the fields, searchString and 
standard analyzer
            QueryParser parser = new 
QueryParser(String.valueOf(columnId) + INDEXED, analyzer);
            Query query = parser.parse(search);
            MainWindow.logger.finer("Parsed Search Query Is" + 
query.toString() + "of type:" + query.getClass());

            //Create a filter,to restrict search to one row
            Filter filter = new QueryFilter(new TermQuery(new 
Term(ROW_NUMBER, String.valueOf(recNo))));

            //run the search
            Hits hits = is.search(query, filter);
            Iterator i = hits.iterator();
            if (i.hasNext())
            {
                return true;
            }
        }
        catch (ParseException pe)
        {
            //Problem with syntax rather than throwing exception and 
causing everything to stop we just
            //log and return false
            MainWindow.logger.warning("Search Query invalid:" + 
pe.getMessage());
            return false;
        }
        catch (IOException e)
        {
            MainWindow.logger.warning("DataIndexer.Unable to do perform 
reno match search:" + search + ":" + e);
        }
        return false;

> Paul Taylor wrote:
>
>> Hi, I have been using a RAMDirectory for indexing without any 
>> problem, but I then moved to a file based directory to reduce memory 
>> usage. this has been working fine on Windows and OSX and my version 
>> of linux (redhat) but is failing on a version of linux (archlinux) 
>> with 'Too many files opened' , but they are only indexing 32 
>> documents , I can index thousands without a problem. It mentions this 
>> error in the Lucene FAQ but I am not dealing directly with the 
>> filesystem myself, this is my code for creating an index is it okay 
>> or is there some kind of close that I am missing
>>
>> thanks for any help Paul
>>
>> public synchronized void reindex()
>>   {
>>       MainWindow.logger.info("Reindex start:" + new Date());
>>       TableModel tableModel = table.getModel();
>>       try
>>       {
>>           //Recreate the RAMDirectory uses too much memory
>>           //directory = new RAMDirectory();
>>           directory = 
>> FSDirectory.getDirectory(Platform.getPlatformLicenseFolder()+ "/" + 
>> TAG_BROWSER_INDEX);
>>           IndexWriter writer = new IndexWriter(directory, analyzer, 
>> true);
>>
>>           //Iterate through all rows
>>           for (int row = 0; row < tableModel.getRowCount(); row++)
>>           {
>>               //for each row make a new document
>>               Document document = createDocument(row);
>>               writer.addDocument(document);
>>
>>           }
>>           writer.optimize();
>>           writer.close();
>>       }
>>       catch (Exception e)
>>       {
>>           throw new RuntimeException("Problem indexing Data:" + 
>> e.getMessage());
>>       }
>> }
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34830-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 08 10:15:13 2008
Return-Path: <java-user-return-34830-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 13476 invoked from network); 8 Jul 2008 10:15:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Jul 2008 10:15:13 -0000
Received: (qmail 89382 invoked by uid 500); 8 Jul 2008 10:15:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89340 invoked by uid 500); 8 Jul 2008 10:15:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89329 invoked by uid 99); 8 Jul 2008 10:15:05 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Jul 2008 03:15:05 -0700
X-ASF-Spam-Status: No, hits=3.2 required=10.0
	tests=SPF_NEUTRAL,URIBL_BLACK
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [74.125.44.29] (HELO yx-out-2324.google.com) (74.125.44.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Jul 2008 10:14:11 +0000
Received: by yx-out-2324.google.com with SMTP id 3so471038yxj.5
        for <java-user@lucene.apache.org>; Tue, 08 Jul 2008 03:14:32 -0700 (PDT)
Received: by 10.151.78.11 with SMTP id f11mr10068906ybl.100.1215512071202;
        Tue, 08 Jul 2008 03:14:31 -0700 (PDT)
Received: from ?10.17.4.4? ( [72.93.214.93])
        by mx.google.com with ESMTPS id 5sm1000708ywd.8.2008.07.08.03.14.30
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Tue, 08 Jul 2008 03:14:30 -0700 (PDT)
Message-Id: <1AC217F3-619D-4B77-8F70-F3DB5DA7806F@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <48733B7B.3020302@fastmail.fm>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: Move from RAMDirectory to FSDirectory causing problem sometimes
Date: Tue, 8 Jul 2008 06:14:29 -0400
References: <48731EC4.5050404@fastmail.fm> <EFD6051F-BE72-4184-90FC-648053E7401B@mikemccandless.com> <48733B7B.3020302@fastmail.fm>
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org


Hmmm, you should not close the directory if you are then going to use  
it to instantiate a searcher.

Your code below never closes the searcher?  I think that is most  
likely the source of your file descriptor leaks.

Mike

Paul Taylor wrote:

> Michael McCandless wrote:
>>
>> Technically you should call directory.close() as well, but missing  
>> that will not lead to too many open files.
>>
>> How often is that RuntimeException being thrown?  EG if a single  
>> document is frequently hitting an exception during analysis, your  
>> code doesn't close the IndexWriter in that situation.  It's better  
>> to use a try/finally and close the IndexWriter in the finally  
>> clause, to cover that case.
>>
>> Are you sure nothing else is using up file descriptors?  EG the  
>> createDocument call does not open any files?
>>
>> Mike
>>
> The runtimeException is occurring all the time, Im waiting for some  
> more information from the user. Since the post I've since added  
> directory.close() too, I thought this would cause a problem when I  
> call IndexSearcher with it as a parameter but it seems to still work  
> - the documentation is not very clear on this point. I see your  
> poibnt about the try/finally I'll make that chnage.
>
> There are many other parts of the code that use filedescriptors, but  
> the problem has never occurred before moving to a FSDirectory
>
> thanks paul
>
> heres an example of my search code, is this ok ?
>
> public boolean recNoColumnMatchesSearch(Integer columnId, Integer  
> recNo, String search)
> {         try
>       {
>           IndexSearcher is = new IndexSearcher(directory);
>
>           //Build a query based on the fields, searchString and  
> standard analyzer
>           QueryParser parser = new  
> QueryParser(String.valueOf(columnId) + INDEXED, analyzer);
>           Query query = parser.parse(search);
>           MainWindow.logger.finer("Parsed Search Query Is" +  
> query.toString() + "of type:" + query.getClass());
>
>           //Create a filter,to restrict search to one row
>           Filter filter = new QueryFilter(new TermQuery(new  
> Term(ROW_NUMBER, String.valueOf(recNo))));
>
>           //run the search
>           Hits hits = is.search(query, filter);
>           Iterator i = hits.iterator();
>           if (i.hasNext())
>           {
>               return true;
>           }
>       }
>       catch (ParseException pe)
>       {
>           //Problem with syntax rather than throwing exception and  
> causing everything to stop we just
>           //log and return false
>           MainWindow.logger.warning("Search Query invalid:" +  
> pe.getMessage());
>           return false;
>       }
>       catch (IOException e)
>       {
>           MainWindow.logger.warning("DataIndexer.Unable to do  
> perform reno match search:" + search + ":" + e);
>       }
>       return false;
>
>> Paul Taylor wrote:
>>
>>> Hi, I have been using a RAMDirectory for indexing without any  
>>> problem, but I then moved to a file based directory to reduce  
>>> memory usage. this has been working fine on Windows and OSX and my  
>>> version of linux (redhat) but is failing on a version of linux  
>>> (archlinux) with 'Too many files opened' , but they are only  
>>> indexing 32 documents , I can index thousands without a problem.  
>>> It mentions this error in the Lucene FAQ but I am not dealing  
>>> directly with the filesystem myself, this is my code for creating  
>>> an index is it okay or is there some kind of close that I am missing
>>>
>>> thanks for any help Paul
>>>
>>> public synchronized void reindex()
>>>  {
>>>      MainWindow.logger.info("Reindex start:" + new Date());
>>>      TableModel tableModel = table.getModel();
>>>      try
>>>      {
>>>          //Recreate the RAMDirectory uses too much memory
>>>          //directory = new RAMDirectory();
>>>          directory =  
>>> FSDirectory.getDirectory(Platform.getPlatformLicenseFolder()+ "/"  
>>> + TAG_BROWSER_INDEX);
>>>          IndexWriter writer = new IndexWriter(directory, analyzer,  
>>> true);
>>>
>>>          //Iterate through all rows
>>>          for (int row = 0; row < tableModel.getRowCount(); row++)
>>>          {
>>>              //for each row make a new document
>>>              Document document = createDocument(row);
>>>              writer.addDocument(document);
>>>
>>>          }
>>>          writer.optimize();
>>>          writer.close();
>>>      }
>>>      catch (Exception e)
>>>      {
>>>          throw new RuntimeException("Problem indexing Data:" +  
>>> e.getMessage());
>>>      }
>>> }
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34831-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 08 10:16:32 2008
Return-Path: <java-user-return-34831-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 13845 invoked from network); 8 Jul 2008 10:16:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Jul 2008 10:16:32 -0000
Received: (qmail 93112 invoked by uid 500); 8 Jul 2008 10:16:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93078 invoked by uid 500); 8 Jul 2008 10:16:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93067 invoked by uid 99); 8 Jul 2008 10:16:24 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Jul 2008 03:16:24 -0700
X-ASF-Spam-Status: No, hits=3.2 required=10.0
	tests=SPF_NEUTRAL,URIBL_BLACK
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.132.249] (HELO an-out-0708.google.com) (209.85.132.249)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Jul 2008 10:15:31 +0000
Received: by an-out-0708.google.com with SMTP id c37so515271anc.49
        for <java-user@lucene.apache.org>; Tue, 08 Jul 2008 03:15:35 -0700 (PDT)
Received: by 10.100.225.19 with SMTP id x19mr4621005ang.151.1215512134881;
        Tue, 08 Jul 2008 03:15:34 -0700 (PDT)
Received: from ?10.17.4.4? ( [72.93.214.93])
        by mx.google.com with ESMTPS id 9sm9552882yws.5.2008.07.08.03.15.33
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Tue, 08 Jul 2008 03:15:34 -0700 (PDT)
Message-Id: <72FC6741-7BFD-45B9-9EFC-86D1E59F9CC6@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <48733B7B.3020302@fastmail.fm>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: Move from RAMDirectory to FSDirectory causing problem sometimes
Date: Tue, 8 Jul 2008 06:15:33 -0400
References: <48731EC4.5050404@fastmail.fm> <EFD6051F-BE72-4184-90FC-648053E7401B@mikemccandless.com> <48733B7B.3020302@fastmail.fm>
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org


Also, if possible, you should share the IndexSearcher across multiple  
searches (ie, don't open/close a new one per search).  Opening an  
IndexSearcher can be a resource intensive operation, so you'll see  
better throughput if you share.  (Though in your particular situation  
it may not matter).

Mike

Paul Taylor wrote:

> Michael McCandless wrote:
>>
>> Technically you should call directory.close() as well, but missing  
>> that will not lead to too many open files.
>>
>> How often is that RuntimeException being thrown?  EG if a single  
>> document is frequently hitting an exception during analysis, your  
>> code doesn't close the IndexWriter in that situation.  It's better  
>> to use a try/finally and close the IndexWriter in the finally  
>> clause, to cover that case.
>>
>> Are you sure nothing else is using up file descriptors?  EG the  
>> createDocument call does not open any files?
>>
>> Mike
>>
> The runtimeException is occurring all the time, Im waiting for some  
> more information from the user. Since the post I've since added  
> directory.close() too, I thought this would cause a problem when I  
> call IndexSearcher with it as a parameter but it seems to still work  
> - the documentation is not very clear on this point. I see your  
> poibnt about the try/finally I'll make that chnage.
>
> There are many other parts of the code that use filedescriptors, but  
> the problem has never occurred before moving to a FSDirectory
>
> thanks paul
>
> heres an example of my search code, is this ok ?
>
> public boolean recNoColumnMatchesSearch(Integer columnId, Integer  
> recNo, String search)
> {         try
>       {
>           IndexSearcher is = new IndexSearcher(directory);
>
>           //Build a query based on the fields, searchString and  
> standard analyzer
>           QueryParser parser = new  
> QueryParser(String.valueOf(columnId) + INDEXED, analyzer);
>           Query query = parser.parse(search);
>           MainWindow.logger.finer("Parsed Search Query Is" +  
> query.toString() + "of type:" + query.getClass());
>
>           //Create a filter,to restrict search to one row
>           Filter filter = new QueryFilter(new TermQuery(new  
> Term(ROW_NUMBER, String.valueOf(recNo))));
>
>           //run the search
>           Hits hits = is.search(query, filter);
>           Iterator i = hits.iterator();
>           if (i.hasNext())
>           {
>               return true;
>           }
>       }
>       catch (ParseException pe)
>       {
>           //Problem with syntax rather than throwing exception and  
> causing everything to stop we just
>           //log and return false
>           MainWindow.logger.warning("Search Query invalid:" +  
> pe.getMessage());
>           return false;
>       }
>       catch (IOException e)
>       {
>           MainWindow.logger.warning("DataIndexer.Unable to do  
> perform reno match search:" + search + ":" + e);
>       }
>       return false;
>
>> Paul Taylor wrote:
>>
>>> Hi, I have been using a RAMDirectory for indexing without any  
>>> problem, but I then moved to a file based directory to reduce  
>>> memory usage. this has been working fine on Windows and OSX and my  
>>> version of linux (redhat) but is failing on a version of linux  
>>> (archlinux) with 'Too many files opened' , but they are only  
>>> indexing 32 documents , I can index thousands without a problem.  
>>> It mentions this error in the Lucene FAQ but I am not dealing  
>>> directly with the filesystem myself, this is my code for creating  
>>> an index is it okay or is there some kind of close that I am missing
>>>
>>> thanks for any help Paul
>>>
>>> public synchronized void reindex()
>>>  {
>>>      MainWindow.logger.info("Reindex start:" + new Date());
>>>      TableModel tableModel = table.getModel();
>>>      try
>>>      {
>>>          //Recreate the RAMDirectory uses too much memory
>>>          //directory = new RAMDirectory();
>>>          directory =  
>>> FSDirectory.getDirectory(Platform.getPlatformLicenseFolder()+ "/"  
>>> + TAG_BROWSER_INDEX);
>>>          IndexWriter writer = new IndexWriter(directory, analyzer,  
>>> true);
>>>
>>>          //Iterate through all rows
>>>          for (int row = 0; row < tableModel.getRowCount(); row++)
>>>          {
>>>              //for each row make a new document
>>>              Document document = createDocument(row);
>>>              writer.addDocument(document);
>>>
>>>          }
>>>          writer.optimize();
>>>          writer.close();
>>>      }
>>>      catch (Exception e)
>>>      {
>>>          throw new RuntimeException("Problem indexing Data:" +  
>>> e.getMessage());
>>>      }
>>> }
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34832-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 08 10:39:16 2008
Return-Path: <java-user-return-34832-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19218 invoked from network); 8 Jul 2008 10:39:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Jul 2008 10:39:16 -0000
Received: (qmail 22080 invoked by uid 500); 8 Jul 2008 10:39:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22052 invoked by uid 500); 8 Jul 2008 10:39:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 22039 invoked by uid 99); 8 Jul 2008 10:39:09 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Jul 2008 03:39:09 -0700
X-ASF-Spam-Status: No, hits=-1.0 required=10.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of paul_t100@fastmail.fm designates 66.111.4.28 as permitted sender)
Received: from [66.111.4.28] (HELO out4.smtp.messagingengine.com) (66.111.4.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Jul 2008 10:38:16 +0000
Received: from compute2.internal (compute2.internal [10.202.2.42])
	by out1.messagingengine.com (Postfix) with ESMTP id 15D3F106E41
	for <java-user@lucene.apache.org>; Tue,  8 Jul 2008 06:38:38 -0400 (EDT)
Received: from heartbeat1.messagingengine.com ([10.202.2.160])
  by compute2.internal (MEProxy); Tue, 08 Jul 2008 06:38:38 -0400
X-Sasl-enc: 2iqIZELcc7vMIaAsb3L9Mv5Q0BfysC4YMD9F2t18ngY0 1215513517
Received: from [192.168.2.36] (cpc2-leed4-0-0-cust808.leed.cable.ntl.com [81.105.111.41])
	by mail.messagingengine.com (Postfix) with ESMTPA id 976A91ECC1
	for <java-user@lucene.apache.org>; Tue,  8 Jul 2008 06:38:37 -0400 (EDT)
Message-ID: <487343B5.9060203@fastmail.fm>
Date: Tue, 08 Jul 2008 11:38:45 +0100
From: Paul Taylor <paul_t100@fastmail.fm>
Reply-To: paul_t100@fastmail.fm
User-Agent: Thunderbird 2.0.0.14 (Windows/20080421)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Move from RAMDirectory to FSDirectory causing problem sometimes
References: <48731EC4.5050404@fastmail.fm> <EFD6051F-BE72-4184-90FC-648053E7401B@mikemccandless.com> <48733B7B.3020302@fastmail.fm> <1AC217F3-619D-4B77-8F70-F3DB5DA7806F@mikemccandless.com>
In-Reply-To: <1AC217F3-619D-4B77-8F70-F3DB5DA7806F@mikemccandless.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Michael McCandless wrote:
>
> Hmmm, you should not close the directory if you are then going to use 
> it to instantiate a searcher.
how come it works ?
>
> Your code below never closes the searcher?  I think that is most 
> likely the source of your file descriptor leaks.
Ok fixed

paul

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34833-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 08 13:03:28 2008
Return-Path: <java-user-return-34833-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72051 invoked from network); 8 Jul 2008 13:03:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Jul 2008 13:03:28 -0000
Received: (qmail 22860 invoked by uid 500); 8 Jul 2008 13:03:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22830 invoked by uid 500); 8 Jul 2008 13:03:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 22819 invoked by uid 99); 8 Jul 2008 13:03:20 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Jul 2008 06:03:20 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 64.233.170.185 as permitted sender)
Received: from [64.233.170.185] (HELO rn-out-0910.google.com) (64.233.170.185)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Jul 2008 13:02:28 +0000
Received: by rn-out-0910.google.com with SMTP id j71so538219rne.4
        for <java-user@lucene.apache.org>; Tue, 08 Jul 2008 06:02:49 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=TDIjfrB7rzYuXVB3gdk0IWUZVDDvywmj9xw/oW4Jh1U=;
        b=bbpIwXD6V3raklLi/XAmGY3pqbvx+3daHl+C5tj0nUGb+g09Rdf0xOI8zZLtKgf/5o
         k9L+zFnglPkxf4Wt0Kn+g3P/tZDHQhbKtztIxH/p+OCF5Cd2vlctc2FeFx+tgI9/nIcr
         GgSvMOjiFYVH9I0fFT9/ZNzPTMmkIIsqpT7Ns=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=Qjs/TXHIwX5K1AJvxFOQkWc590lzwyzbYjwJOlbA6jwWzVSpYJZQYBHPMegC5f7aWa
         dcUIJCJ8r8PSlvsUyQyARvcF7SBqA9PHvYGEBJCuQzRPC82TCEXFy8jQawp6yKEyuC8j
         AHhqYxBu+VcMILUIGRMAClb16UctY1FZI8ppE=
Received: by 10.150.137.9 with SMTP id k9mr10304978ybd.103.1215522169433;
        Tue, 08 Jul 2008 06:02:49 -0700 (PDT)
Received: by 10.151.40.4 with HTTP; Tue, 8 Jul 2008 06:02:49 -0700 (PDT)
Message-ID: <359a92830807080602p2ec7a6e8s40b2aaf744065b6d@mail.gmail.com>
Date: Tue, 8 Jul 2008 09:02:49 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: 'deletable' indexing files are not deleted on RHEL5
In-Reply-To: <OF457421BB.38CBD1D5-ON48257480.002E9683-48257480.002EB2BC@cn.ibm.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_22140_975988.1215522169422"
References: <OF457421BB.38CBD1D5-ON48257480.002E9683-48257480.002EB2BC@cn.ibm.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_22140_975988.1215522169422
Content-Type: text/plain; charset=GB2312
Content-Transfer-Encoding: base64
Content-Disposition: inline

QXNzdW1pbmcgeW91ciBpbmRleGluZyBjb21wbGV0ZXMsIGFmdGVyIHRoZSB3aG9sZSB0aGluZyBp
cwpkb25lIGFuZCB0aGUgcHJvY2VzcyB0ZXJtaW5hdGVzLCB3aGF0IGlzIHRoZSBzaXplIG9mCnlv
dXIgaW5kZXg/CgpJcyBpdCBwb3NzaWJsZSB0aGF0IHlvdXIgb2xkIGJveCBoYWQgbG90cyBtb3Jl
IGRpc2sgc3BhY2UKYW5kIHlvdSBqdXN0IG5ldmVyIG5vdGljZWQgdGhlIChwZXJoYXBzIHRlbXBv
cmFyeSkgZGlzawpzcGFjZSB1c2FnZT8KCkJlc3QKRXJpY2sKCjIwMDgvNy84IFpob3UgTGluIERh
aSA8ZGFpemhvdWxAY24uaWJtLmNvbT46Cgo+Cj4gSGkKPgo+IEknbSB1c2luZyBMdWNlbmUgb24g
YSBSSEVMNSBib3guIFRoZSBpbmRleGluZyBmb2xkZXIgaXMgZ3Jvd2luZyBleHRyZW1lbHkKPiBs
YXJnZSwgbW9yZSB0aGFuIDIwIEdCLCB3aXRoIGEgbG90ICdkZWxldGFibGUnIGluZGV4aW5nIGZp
bGVzLiBJdCBydW5zIG91dAo+IG9mIHRoZSBkaXNrLiBJIGhhdmUgdG8gY2xlYXIgdGhlIGVudGly
ZSBmb2xkZXIgYW5kIHN0YXJ0IGluZGV4aW5nIGZyb20KPiBibGFuay4gVGhlIGNvZGUgcmFuIGZp
bmUgYmVmb3JlIEkgbW92ZWQgaXQgb250byBSSEVMNS4gRG9lcyB0aGF0IG1hdHRlcj8KPiBDYW4g
YW55b25lIGdpdmUgc29tZSBzdWdnZXN0aW9ucyBvbiBob3cgdG8gc29sdmUgdGhpcyBpc3N1ZT8K
Pgo+IFRoYW5rcyBpbiBhZHZhbmNlLgo+Cj4gQmVzdCBSZWdhcmRzLAo+Cj4gRnJhbmsgRGFpIChE
YWkgWmhvdWxpbiC099bcwdYpCj4gTG90dXMgQ29ubmVjdGlvbnMgLSBEb2dlYXIgRGV2ZWxvcG1l
bnQsIFdQTEMKPiBDaGluYSBEZXZlbG9wbWVudCBMYWIsIElCTSBTaGFuZ2hhaQo+IFRFTDooODYt
MjEpNjA5MjgxODkKPiBJbnRlcm5ldCBJRDogZGFpemhvdWxAY24uaWJtLmNvbQo+IEFkZHI6IDRG
LCBObyA3OCwgTGFuZSA4ODcsIFp1IENob25nIFpoaSBSb2FkLCBaaGFuZyBKaWFuZyBIaWdoIFRl
Y2ggUGFyaywKPiAyMDEyMDMsIFNoYW5naGFpLCBDaGluYQo+IE15IEJsb2c6IGh0dHA6Ly93d3cu
ZGFpemhvdWxpbi5jb20vd29yZHByZXNzCg==
------=_Part_22140_975988.1215522169422--

From java-user-return-34834-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 08 13:32:30 2008
Return-Path: <java-user-return-34834-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82767 invoked from network); 8 Jul 2008 13:32:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Jul 2008 13:32:30 -0000
Received: (qmail 86485 invoked by uid 500); 8 Jul 2008 13:32:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86453 invoked by uid 500); 8 Jul 2008 13:32:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86082 invoked by uid 99); 8 Jul 2008 13:32:13 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Jul 2008 06:32:12 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of glen.newton@gmail.com designates 209.85.198.224 as permitted sender)
Received: from [209.85.198.224] (HELO rv-out-0506.google.com) (209.85.198.224)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Jul 2008 13:31:18 +0000
Received: by rv-out-0506.google.com with SMTP id f6so3039609rvb.5
        for <java-user@lucene.apache.org>; Tue, 08 Jul 2008 06:31:40 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references;
        bh=Sx/QSA8yuvy0w1HO+xPQcZFC7uxi2IsOVUMn6z5w5mc=;
        b=onAUwqwB41Ss8IUL8HLr0gZSY82uhoOv1KliFKawE5J+tmtMjyXzpH5AHvn9oReWkX
         mBFUWN1JLyQa7Xiwiq4bU9HDt8LGxmPcwLZ3Jyn3buZcgvCW8LUuylTYCWljwDxrpfFy
         CKF8ViQJ8foIPUoGHeJkLFjTvBTXm5qrrsaNo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references;
        b=JwAEnbasC0fmJ8DmmHiZr9Trqi6IxY/900nNsEimAXHgAUk2WdXSpgyBkvy3OiovXk
         GN3EybDbNKE9MiLljz9tPPoXXa6yYPlrKCtyOgBFHoGpqbdIBDMEjQWWxtvoGj6Le/lz
         9ZE75vtrjibpUN7DsJOKoYSnBQ+Pd1i2KmKik=
Received: by 10.140.162.21 with SMTP id k21mr3170427rve.110.1215523899764;
        Tue, 08 Jul 2008 06:31:39 -0700 (PDT)
Received: by 10.141.27.13 with HTTP; Tue, 8 Jul 2008 06:31:39 -0700 (PDT)
Message-ID: <5e76f3840807080631t6755ece3s11951efaac86143f@mail.gmail.com>
Date: Tue, 8 Jul 2008 09:31:39 -0400
From: "Glen Newton" <glen.newton@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: How to make documents clustering and topic classification with lucene
In-Reply-To: <bf1404350807071753r7ffa93e4y3b2d60d646a341dc@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <bf1404350807071753r7ffa93e4y3b2d60d646a341dc@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Use Carrot2:
 http://project.carrot2.org/

For Lucene + Carrot2:
 http://project.carrot2.org/faq.html#lucene-integration

-glen

2008/7/7 Ariel <isaacrc82@gmail.com>:
> Hi everybody:
> Do you have Idea how to make how to make documents clustering and topic
> classification using lucene ??? Is there anyway to do this.
> Please I need help.
> Thanks everybody.
> Ariel
>



-- 

-

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34835-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 08 15:40:04 2008
Return-Path: <java-user-return-34835-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65495 invoked from network); 8 Jul 2008 15:40:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Jul 2008 15:40:03 -0000
Received: (qmail 43910 invoked by uid 500); 8 Jul 2008 15:39:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43880 invoked by uid 500); 8 Jul 2008 15:39:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43869 invoked by uid 99); 8 Jul 2008 15:39:57 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Jul 2008 08:39:57 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=RCVD_IN_BL_SPAMCOP_NET,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.190.49.37] (HELO web53007.mail.re2.yahoo.com) (206.190.49.37)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 08 Jul 2008 15:39:04 +0000
Received: (qmail 38791 invoked by uid 60001); 8 Jul 2008 15:39:25 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=Od2bEIm0lhTG2unimkA70BTUNqaMnkaGvWCFMCqNGwI6QOjY7p5hJW/rb8c8Pqw1IzMIIBWyTREgjJNpkuBqYZmQe9eMuCrsmqOKQ1zONhgWoFSy1yBp1kwPS7jWPw9nebIyD/L8O9VxWOjy78aS6JQ4jwjfLLtFSNesTtxBQNo=;
Received: from [190.42.27.211] by web53007.mail.re2.yahoo.com via HTTP; Tue, 08 Jul 2008 08:39:25 PDT
X-Mailer: YahooMailWebService/0.7.199
Date: Tue, 8 Jul 2008 08:39:25 -0700 (PDT)
From: Eric Diaz <ediaz666@yahoo.com>
Subject: Readers synchronization
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Message-ID: <914595.31562.qm@web53007.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

According to SVN history on the next version this will be available:

LUCENE-1044: IndexWriter with autoCommit=true now commits (such
    that a reader can see the changes) far less often than it used to.
    Previously, every flush was also a commit.  You can always force a
    commit by calling IndexWriter.commit().  Furthermore, in 3.0,
    autoCommit will be hardwired to false (IndexWriter constructors
    that take an autoCommit argument have been deprecated) (Mike
    McCandless)

Does this mean that I won't need to reopen all the readers in order to see the index changes?

Thanks


      

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34836-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 08 15:40:12 2008
Return-Path: <java-user-return-34836-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65549 invoked from network); 8 Jul 2008 15:40:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Jul 2008 15:40:12 -0000
Received: (qmail 45496 invoked by uid 500); 8 Jul 2008 15:40:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45466 invoked by uid 500); 8 Jul 2008 15:40:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45455 invoked by uid 99); 8 Jul 2008 15:40:05 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Jul 2008 08:40:05 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [74.125.46.31] (HELO yw-out-2324.google.com) (74.125.46.31)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Jul 2008 15:39:13 +0000
Received: by yw-out-2324.google.com with SMTP id 3so1079831ywj.5
        for <java-user@lucene.apache.org>; Tue, 08 Jul 2008 08:39:19 -0700 (PDT)
Received: by 10.115.76.1 with SMTP id d1mr7889286wal.196.1215531558854;
        Tue, 08 Jul 2008 08:39:18 -0700 (PDT)
Received: from ?10.17.4.4? ( [72.93.214.93])
        by mx.google.com with ESMTPS id 6sm10152305ywp.3.2008.07.08.08.39.17
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Tue, 08 Jul 2008 08:39:18 -0700 (PDT)
Message-Id: <84BD274C-9CA3-4111-9289-3677E5ED8667@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <487343B5.9060203@fastmail.fm>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: Move from RAMDirectory to FSDirectory causing problem sometimes
Date: Tue, 8 Jul 2008 11:39:17 -0400
References: <48731EC4.5050404@fastmail.fm> <EFD6051F-BE72-4184-90FC-648053E7401B@mikemccandless.com> <48733B7B.3020302@fastmail.fm> <1AC217F3-619D-4B77-8F70-F3DB5DA7806F@mikemccandless.com> <487343B5.9060203@fastmail.fm>
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org


It works because Lucene doesn't currently check for it, and, because  
closing an FSDirectory does not actually make it unusable.  In fact it  
also doesn't catch a double-close call.

But it may cause subtle problems, because FSDirectory has this  
invariant: only a single instance of FSDirectory exists per canonical  
directory in the filesystem.  This allows code to synchronized on that  
instance and sure no other code in the same JVM is also working in  
that canonical directory.

When you close an FSDirectory but keep using it you can get yourself  
to a point where this invariant is broken.  That said, besides  
IndexModifier (which is now deprecated), I can't find anything that  
would actually break when this invariant is broken.

Still I think we should put protection in to catch double-closing and  
prevent using a closed directory.  I'll open an issue.

Mike

Paul Taylor wrote:

> Michael McCandless wrote:
>>
>> Hmmm, you should not close the directory if you are then going to  
>> use it to instantiate a searcher.
> how come it works ?
>>
>> Your code below never closes the searcher?  I think that is most  
>> likely the source of your file descriptor leaks.
> Ok fixed
>
> paul
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34837-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 08 16:13:25 2008
Return-Path: <java-user-return-34837-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79502 invoked from network); 8 Jul 2008 16:13:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Jul 2008 16:13:24 -0000
Received: (qmail 5828 invoked by uid 500); 8 Jul 2008 16:13:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5804 invoked by uid 500); 8 Jul 2008 16:13:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5791 invoked by uid 99); 8 Jul 2008 16:13:16 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Jul 2008 09:13:16 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [74.125.44.29] (HELO yx-out-2324.google.com) (74.125.44.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Jul 2008 16:12:23 +0000
Received: by yx-out-2324.google.com with SMTP id 3so528609yxj.5
        for <java-user@lucene.apache.org>; Tue, 08 Jul 2008 09:12:43 -0700 (PDT)
Received: by 10.115.54.7 with SMTP id g7mr7947490wak.212.1215533562959;
        Tue, 08 Jul 2008 09:12:42 -0700 (PDT)
Received: from ?10.17.4.4? ( [72.93.214.93])
        by mx.google.com with ESMTPS id 6sm10210504ywi.1.2008.07.08.09.12.42
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Tue, 08 Jul 2008 09:12:42 -0700 (PDT)
Message-Id: <200C3559-0182-41FB-B9E1-9B0FEA239A92@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <914595.31562.qm@web53007.mail.re2.yahoo.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: Readers synchronization
Date: Tue, 8 Jul 2008 12:12:41 -0400
References: <914595.31562.qm@web53007.mail.re2.yahoo.com>
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org


No, that's not changed.  You must still reopen an IndexReader to see  
changes to the index.  An IndexReader always searches a point-in-time  
snapshot of the index.

LUCENE-1044 does mean that you should call IndexWriter.commit() (or,  
close the writer) to ensure all changes you've made become visible to  
the reader.

Mike

Eric Diaz wrote:

> According to SVN history on the next version this will be available:
>
> LUCENE-1044: IndexWriter with autoCommit=true now commits (such
>    that a reader can see the changes) far less often than it used to.
>    Previously, every flush was also a commit.  You can always force a
>    commit by calling IndexWriter.commit().  Furthermore, in 3.0,
>    autoCommit will be hardwired to false (IndexWriter constructors
>    that take an autoCommit argument have been deprecated) (Mike
>    McCandless)
>
> Does this mean that I won't need to reopen all the readers in order  
> to see the index changes?
>
> Thanks
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34838-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 08 16:15:01 2008
Return-Path: <java-user-return-34838-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80499 invoked from network); 8 Jul 2008 16:15:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Jul 2008 16:15:01 -0000
Received: (qmail 9925 invoked by uid 500); 8 Jul 2008 16:14:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9738 invoked by uid 500); 8 Jul 2008 16:14:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9727 invoked by uid 99); 8 Jul 2008 16:14:55 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Jul 2008 09:14:55 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [74.125.44.29] (HELO yx-out-2324.google.com) (74.125.44.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Jul 2008 16:14:02 +0000
Received: by yx-out-2324.google.com with SMTP id 3so528953yxj.5
        for <java-user@lucene.apache.org>; Tue, 08 Jul 2008 09:14:24 -0700 (PDT)
Received: by 10.114.193.1 with SMTP id q1mr7981717waf.70.1215533662863;
        Tue, 08 Jul 2008 09:14:22 -0700 (PDT)
Received: from ?10.17.4.4? ( [72.93.214.93])
        by mx.google.com with ESMTPS id 9sm2535069yws.5.2008.07.08.09.14.22
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Tue, 08 Jul 2008 09:14:22 -0700 (PDT)
Message-Id: <510663E3-835A-4902-AF69-23523DB1E6CE@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <487343B5.9060203@fastmail.fm>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: Move from RAMDirectory to FSDirectory causing problem sometimes
Date: Tue, 8 Jul 2008 12:14:21 -0400
References: <48731EC4.5050404@fastmail.fm> <EFD6051F-BE72-4184-90FC-648053E7401B@mikemccandless.com> <48733B7B.3020302@fastmail.fm> <1AC217F3-619D-4B77-8F70-F3DB5DA7806F@mikemccandless.com> <487343B5.9060203@fastmail.fm>
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org


OK I opened:

     https://issues.apache.org/jira/browse/LUCENE-1331

Mike

Paul Taylor wrote:

> Michael McCandless wrote:
>>
>> Hmmm, you should not close the directory if you are then going to  
>> use it to instantiate a searcher.
> how come it works ?
>>
>> Your code below never closes the searcher?  I think that is most  
>> likely the source of your file descriptor leaks.
> Ok fixed
>
> paul
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34839-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 08 16:40:49 2008
Return-Path: <java-user-return-34839-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93106 invoked from network); 8 Jul 2008 16:40:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Jul 2008 16:40:48 -0000
Received: (qmail 52232 invoked by uid 500); 8 Jul 2008 16:40:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52099 invoked by uid 500); 8 Jul 2008 16:40:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52088 invoked by uid 99); 8 Jul 2008 16:40:41 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Jul 2008 09:40:41 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=RCVD_IN_BL_SPAMCOP_NET,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.190.49.40] (HELO web53010.mail.re2.yahoo.com) (206.190.49.40)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 08 Jul 2008 16:39:49 +0000
Received: (qmail 73242 invoked by uid 60001); 8 Jul 2008 16:40:10 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Received:X-Mailer:Date:From:Reply-To:Subject:To:In-Reply-To:MIME-Version:Content-Type:Message-ID;
  b=y33x1jH//JDTRTas8bK4B72bt7r4bgdaDluJYK1JzRH/pL7EFI3J2laTvJ78FqSwwFPLs8lHSBxK6chBvbRjtb5zt9bM5QygJPUyRM0ZB4n59eF+5p5/7sABxrq9m/NLdoyPnGzNZ+oGIwDtJYXQwqkeCse8TbSk6r+K/8gE0ZQ=;
Received: from [190.42.27.211] by web53010.mail.re2.yahoo.com via HTTP; Tue, 08 Jul 2008 09:40:10 PDT
X-Mailer: YahooMailWebService/0.7.199
Date: Tue, 8 Jul 2008 09:40:10 -0700 (PDT)
From: Eric Diaz <ediaz666@yahoo.com>
Reply-To: ediaz666@yahoo.com
Subject: Re: Readers synchronization
To: java-user@lucene.apache.org
In-Reply-To: <200C3559-0182-41FB-B9E1-9B0FEA239A92@mikemccandless.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Message-ID: <673573.73003.qm@web53010.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Besides the warm up that the faq section suggests (used on solr), is there another technique or solution to have an IndexReader/Search with an updated view of an index under a concurrent scenario (web app)?

Thanks

--- On Tue, 7/8/08, Michael McCandless <lucene@mikemccandless.com> wrote:

> From: Michael McCandless <lucene@mikemccandless.com>
> Subject: Re: Readers synchronization
> To: java-user@lucene.apache.org
> Date: Tuesday, July 8, 2008, 11:12 AM
> No, that's not changed.  You must still reopen an
> IndexReader to see  
> changes to the index.  An IndexReader always searches a
> point-in-time  
> snapshot of the index.
> 
> LUCENE-1044 does mean that you should call
> IndexWriter.commit() (or,  
> close the writer) to ensure all changes you've made
> become visible to  
> the reader.
> 
> Mike
> 
> Eric Diaz wrote:
> 
> > According to SVN history on the next version this will
> be available:
> >
> > LUCENE-1044: IndexWriter with autoCommit=true now
> commits (such
> >    that a reader can see the changes) far less often
> than it used to.
> >    Previously, every flush was also a commit.  You can
> always force a
> >    commit by calling IndexWriter.commit(). 
> Furthermore, in 3.0,
> >    autoCommit will be hardwired to false (IndexWriter
> constructors
> >    that take an autoCommit argument have been
> deprecated) (Mike
> >    McCandless)
> >
> > Does this mean that I won't need to reopen all the
> readers in order  
> > to see the index changes?
> >
> > Thanks
> >
> >
> >
> >
> >
> ---------------------------------------------------------------------
> > To unsubscribe, e-mail:
> java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail:
> java-user-help@lucene.apache.org
> >
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail:
> java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail:
> java-user-help@lucene.apache.org


      

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34840-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 08 16:59:17 2008
Return-Path: <java-user-return-34840-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5012 invoked from network); 8 Jul 2008 16:59:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Jul 2008 16:59:17 -0000
Received: (qmail 90064 invoked by uid 500); 8 Jul 2008 16:59:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89700 invoked by uid 500); 8 Jul 2008 16:59:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89689 invoked by uid 99); 8 Jul 2008 16:59:10 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Jul 2008 09:59:10 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [66.249.82.236] (HELO wx-out-0506.google.com) (66.249.82.236)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Jul 2008 16:58:18 +0000
Received: by wx-out-0506.google.com with SMTP id h29so1043887wxd.20
        for <java-user@lucene.apache.org>; Tue, 08 Jul 2008 09:58:38 -0700 (PDT)
Received: by 10.114.73.1 with SMTP id v1mr1888409waa.166.1215536317490;
        Tue, 08 Jul 2008 09:58:37 -0700 (PDT)
Received: from ?10.17.4.4? ( [72.93.214.93])
        by mx.google.com with ESMTPS id 5sm1694828ywd.8.2008.07.08.09.58.35
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Tue, 08 Jul 2008 09:58:36 -0700 (PDT)
Message-Id: <74529D51-2A8D-4BA7-96E3-BB557E6A4F2A@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org,
 ediaz666@yahoo.com
In-Reply-To: <673573.73003.qm@web53010.mail.re2.yahoo.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: Readers synchronization
Date: Tue, 8 Jul 2008 12:58:32 -0400
References: <673573.73003.qm@web53010.mail.re2.yahoo.com>
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org


No other techniques that I know of...

But there is ongoing discussions/work towards making reopening a  
reader much less costly.  EG repopulating the field cache after reopen  
is a costly operation now, but this issue:

     https://issues.apache.org/jira/browse/LUCENE-1231

would make that cost be proportional to the number & size of the  
changed segments since you last reopened.

There has also been discussions on creating an IndexReader  
implementation that can directly search the RAM buffer in IndexWriter,  
which should give very fast turnaround in searching just-indexed  
documents, but that is quite a ways off...

Mike

Eric Diaz wrote:

> Besides the warm up that the faq section suggests (used on solr), is  
> there another technique or solution to have an IndexReader/Search  
> with an updated view of an index under a concurrent scenario (web  
> app)?
>
> Thanks
>
> --- On Tue, 7/8/08, Michael McCandless <lucene@mikemccandless.com>  
> wrote:
>
>> From: Michael McCandless <lucene@mikemccandless.com>
>> Subject: Re: Readers synchronization
>> To: java-user@lucene.apache.org
>> Date: Tuesday, July 8, 2008, 11:12 AM
>> No, that's not changed.  You must still reopen an
>> IndexReader to see
>> changes to the index.  An IndexReader always searches a
>> point-in-time
>> snapshot of the index.
>>
>> LUCENE-1044 does mean that you should call
>> IndexWriter.commit() (or,
>> close the writer) to ensure all changes you've made
>> become visible to
>> the reader.
>>
>> Mike
>>
>> Eric Diaz wrote:
>>
>>> According to SVN history on the next version this will
>> be available:
>>>
>>> LUCENE-1044: IndexWriter with autoCommit=true now
>> commits (such
>>>   that a reader can see the changes) far less often
>> than it used to.
>>>   Previously, every flush was also a commit.  You can
>> always force a
>>>   commit by calling IndexWriter.commit().
>> Furthermore, in 3.0,
>>>   autoCommit will be hardwired to false (IndexWriter
>> constructors
>>>   that take an autoCommit argument have been
>> deprecated) (Mike
>>>   McCandless)
>>>
>>> Does this mean that I won't need to reopen all the
>> readers in order
>>> to see the index changes?
>>>
>>> Thanks
>>>
>>>
>>>
>>>
>>>
>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail:
>> java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail:
>> java-user-help@lucene.apache.org
>>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail:
>> java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail:
>> java-user-help@lucene.apache.org
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34841-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 08 17:40:39 2008
Return-Path: <java-user-return-34841-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 28992 invoked from network); 8 Jul 2008 17:40:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Jul 2008 17:40:38 -0000
Received: (qmail 51903 invoked by uid 500); 8 Jul 2008 17:40:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 51873 invoked by uid 500); 8 Jul 2008 17:40:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 51862 invoked by uid 99); 8 Jul 2008 17:40:31 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Jul 2008 10:40:31 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=RCVD_IN_BL_SPAMCOP_NET,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.190.49.35] (HELO web53005.mail.re2.yahoo.com) (206.190.49.35)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 08 Jul 2008 17:39:38 +0000
Received: (qmail 80001 invoked by uid 60001); 8 Jul 2008 17:38:59 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Received:X-Mailer:Date:From:Reply-To:Subject:To:In-Reply-To:MIME-Version:Content-Type:Message-ID;
  b=seE/n3usiXu+7gq5MV5V1a1T/2kSJrilJIfc4vt980iWGex98XQbZXTVyIvRObanPTsfFXOzcQSOUOvDUtm46bblNNGbdPbb1RSaAwBeh876CB79eAGaCiqMWqa++qrgDvMLYBzHsnCJGx8ogfzqE79wvwueEcl0dVKCkajVxw0=;
Received: from [190.42.27.211] by web53005.mail.re2.yahoo.com via HTTP; Tue, 08 Jul 2008 10:38:59 PDT
X-Mailer: YahooMailWebService/0.7.199
Date: Tue, 8 Jul 2008 10:38:59 -0700 (PDT)
From: Eric Diaz <ediaz666@yahoo.com>
Reply-To: ediaz666@yahoo.com
Subject: Re: Readers synchronization
To: java-user@lucene.apache.org
In-Reply-To: <74529D51-2A8D-4BA7-96E3-BB557E6A4F2A@mikemccandless.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Message-ID: <357284.79975.qm@web53005.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Is there any plan to change this behavior? meaning that by default a reader will see the current index?

Thanks in advance

--- On Tue, 7/8/08, Michael McCandless <lucene@mikemccandless.com> wrote:

> From: Michael McCandless <lucene@mikemccandless.com>
> Subject: Re: Readers synchronization
> To: java-user@lucene.apache.org, ediaz666@yahoo.com
> Date: Tuesday, July 8, 2008, 11:58 AM
> No other techniques that I know of...
> 
> But there is ongoing discussions/work towards making
> reopening a  
> reader much less costly.  EG repopulating the field cache
> after reopen  
> is a costly operation now, but this issue:
> 
>      https://issues.apache.org/jira/browse/LUCENE-1231
> 
> would make that cost be proportional to the number &
> size of the  
> changed segments since you last reopened.
> 
> There has also been discussions on creating an IndexReader 
> 
> implementation that can directly search the RAM buffer in
> IndexWriter,  
> which should give very fast turnaround in searching
> just-indexed  
> documents, but that is quite a ways off...
> 
> Mike
> 
> Eric Diaz wrote:
> 
> > Besides the warm up that the faq section suggests
> (used on solr), is  
> > there another technique or solution to have an
> IndexReader/Search  
> > with an updated view of an index under a concurrent
> scenario (web  
> > app)?
> >
> > Thanks
> >
> > --- On Tue, 7/8/08, Michael McCandless
> <lucene@mikemccandless.com>  
> > wrote:
> >
> >> From: Michael McCandless
> <lucene@mikemccandless.com>
> >> Subject: Re: Readers synchronization
> >> To: java-user@lucene.apache.org
> >> Date: Tuesday, July 8, 2008, 11:12 AM
> >> No, that's not changed.  You must still reopen
> an
> >> IndexReader to see
> >> changes to the index.  An IndexReader always
> searches a
> >> point-in-time
> >> snapshot of the index.
> >>
> >> LUCENE-1044 does mean that you should call
> >> IndexWriter.commit() (or,
> >> close the writer) to ensure all changes you've
> made
> >> become visible to
> >> the reader.
> >>
> >> Mike
> >>
> >> Eric Diaz wrote:
> >>
> >>> According to SVN history on the next version
> this will
> >> be available:
> >>>
> >>> LUCENE-1044: IndexWriter with autoCommit=true
> now
> >> commits (such
> >>>   that a reader can see the changes) far less
> often
> >> than it used to.
> >>>   Previously, every flush was also a commit. 
> You can
> >> always force a
> >>>   commit by calling IndexWriter.commit().
> >> Furthermore, in 3.0,
> >>>   autoCommit will be hardwired to false
> (IndexWriter
> >> constructors
> >>>   that take an autoCommit argument have been
> >> deprecated) (Mike
> >>>   McCandless)
> >>>
> >>> Does this mean that I won't need to reopen
> all the
> >> readers in order
> >>> to see the index changes?
> >>>
> >>> Thanks
> >>>
> >>>
> >>>
> >>>
> >>>
> >>
> ---------------------------------------------------------------------
> >>> To unsubscribe, e-mail:
> >> java-user-unsubscribe@lucene.apache.org
> >>> For additional commands, e-mail:
> >> java-user-help@lucene.apache.org
> >>>
> >>
> >>
> >>
> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail:
> >> java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail:
> >> java-user-help@lucene.apache.org
> >
> >
> >
> >
> >
> ---------------------------------------------------------------------
> > To unsubscribe, e-mail:
> java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail:
> java-user-help@lucene.apache.org
> >
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail:
> java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail:
> java-user-help@lucene.apache.org


      

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34842-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 08 17:42:25 2008
Return-Path: <java-user-return-34842-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 29930 invoked from network); 8 Jul 2008 17:42:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Jul 2008 17:42:25 -0000
Received: (qmail 54730 invoked by uid 500); 8 Jul 2008 17:42:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54700 invoked by uid 500); 8 Jul 2008 17:42:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54689 invoked by uid 99); 8 Jul 2008 17:42:19 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Jul 2008 10:42:19 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [74.125.44.30] (HELO yx-out-2324.google.com) (74.125.44.30)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Jul 2008 17:41:25 +0000
Received: by yx-out-2324.google.com with SMTP id 3so545228yxj.5
        for <java-user@lucene.apache.org>; Tue, 08 Jul 2008 10:41:45 -0700 (PDT)
Received: by 10.114.174.2 with SMTP id w2mr8233363wae.17.1215538905194;
        Tue, 08 Jul 2008 10:41:45 -0700 (PDT)
Received: from ?10.17.4.4? ( [72.93.214.93])
        by mx.google.com with ESMTPS id 9sm10317858yws.5.2008.07.08.10.41.43
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Tue, 08 Jul 2008 10:41:44 -0700 (PDT)
Message-Id: <EC19D53A-0C9A-4427-B9EA-38A93D080AAD@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <357284.79975.qm@web53005.mail.re2.yahoo.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: Readers synchronization
Date: Tue, 8 Jul 2008 13:41:42 -0400
References: <357284.79975.qm@web53005.mail.re2.yahoo.com>
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org


Not that I know of.

Mike

Eric Diaz wrote:

> Is there any plan to change this behavior? meaning that by default a  
> reader will see the current index?
>
> Thanks in advance
>
> --- On Tue, 7/8/08, Michael McCandless <lucene@mikemccandless.com>  
> wrote:
>
>> From: Michael McCandless <lucene@mikemccandless.com>
>> Subject: Re: Readers synchronization
>> To: java-user@lucene.apache.org, ediaz666@yahoo.com
>> Date: Tuesday, July 8, 2008, 11:58 AM
>> No other techniques that I know of...
>>
>> But there is ongoing discussions/work towards making
>> reopening a
>> reader much less costly.  EG repopulating the field cache
>> after reopen
>> is a costly operation now, but this issue:
>>
>>     https://issues.apache.org/jira/browse/LUCENE-1231
>>
>> would make that cost be proportional to the number &
>> size of the
>> changed segments since you last reopened.
>>
>> There has also been discussions on creating an IndexReader
>>
>> implementation that can directly search the RAM buffer in
>> IndexWriter,
>> which should give very fast turnaround in searching
>> just-indexed
>> documents, but that is quite a ways off...
>>
>> Mike
>>
>> Eric Diaz wrote:
>>
>>> Besides the warm up that the faq section suggests
>> (used on solr), is
>>> there another technique or solution to have an
>> IndexReader/Search
>>> with an updated view of an index under a concurrent
>> scenario (web
>>> app)?
>>>
>>> Thanks
>>>
>>> --- On Tue, 7/8/08, Michael McCandless
>> <lucene@mikemccandless.com>
>>> wrote:
>>>
>>>> From: Michael McCandless
>> <lucene@mikemccandless.com>
>>>> Subject: Re: Readers synchronization
>>>> To: java-user@lucene.apache.org
>>>> Date: Tuesday, July 8, 2008, 11:12 AM
>>>> No, that's not changed.  You must still reopen
>> an
>>>> IndexReader to see
>>>> changes to the index.  An IndexReader always
>> searches a
>>>> point-in-time
>>>> snapshot of the index.
>>>>
>>>> LUCENE-1044 does mean that you should call
>>>> IndexWriter.commit() (or,
>>>> close the writer) to ensure all changes you've
>> made
>>>> become visible to
>>>> the reader.
>>>>
>>>> Mike
>>>>
>>>> Eric Diaz wrote:
>>>>
>>>>> According to SVN history on the next version
>> this will
>>>> be available:
>>>>>
>>>>> LUCENE-1044: IndexWriter with autoCommit=true
>> now
>>>> commits (such
>>>>>  that a reader can see the changes) far less
>> often
>>>> than it used to.
>>>>>  Previously, every flush was also a commit.
>> You can
>>>> always force a
>>>>>  commit by calling IndexWriter.commit().
>>>> Furthermore, in 3.0,
>>>>>  autoCommit will be hardwired to false
>> (IndexWriter
>>>> constructors
>>>>>  that take an autoCommit argument have been
>>>> deprecated) (Mike
>>>>>  McCandless)
>>>>>
>>>>> Does this mean that I won't need to reopen
>> all the
>>>> readers in order
>>>>> to see the index changes?
>>>>>
>>>>> Thanks
>>>>>
>>>>>
>>>>>
>>>>>
>>>>>
>>>>
>> ---------------------------------------------------------------------
>>>>> To unsubscribe, e-mail:
>>>> java-user-unsubscribe@lucene.apache.org
>>>>> For additional commands, e-mail:
>>>> java-user-help@lucene.apache.org
>>>>>
>>>>
>>>>
>>>>
>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail:
>>>> java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail:
>>>> java-user-help@lucene.apache.org
>>>
>>>
>>>
>>>
>>>
>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail:
>> java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail:
>> java-user-help@lucene.apache.org
>>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail:
>> java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail:
>> java-user-help@lucene.apache.org
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34843-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 08 19:34:04 2008
Return-Path: <java-user-return-34843-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81908 invoked from network); 8 Jul 2008 19:34:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Jul 2008 19:34:03 -0000
Received: (qmail 13656 invoked by uid 500); 8 Jul 2008 19:33:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13623 invoked by uid 500); 8 Jul 2008 19:33:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13612 invoked by uid 99); 8 Jul 2008 19:33:57 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Jul 2008 12:33:57 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Jul 2008 19:33:05 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KGIwG-0006T1-S9
	for java-user@lucene.apache.org; Tue, 08 Jul 2008 12:33:26 -0700
Message-ID: <18347238.post@talk.nabble.com>
Date: Tue, 8 Jul 2008 12:33:24 -0700 (PDT)
From: miztaken <justjunktome@gmail.com>
To: java-user@lucene.apache.org
Subject: How to handle frequent updates.
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: justjunktome@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hi there,
I know lucene is for indexing and not for frequent updates and delete.
But i have been using lucene to store my matrix as a document.
Since with my algorithm the value of matrix can change so i am updating the
value.
But for this i have to close and reopen indexReader and in additional to
that the reader is not able to read the documents hold in the RAM directory
or buffer in indexWriter... i.e. documents that are hold in memory by
indexwriter due to other parameters set for indexwriter so eventually i have
to optimize or flush the writer and reopen the reader to get accurate
results.

Is there some work around for this type of job?
Can any one suggest me any other open source API ?

Thank You
miztaken
-- 
View this message in context: http://www.nabble.com/How-to-handle-frequent-updates.-tp18347238p18347238.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34844-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 09 05:38:07 2008
Return-Path: <java-user-return-34844-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47045 invoked from network); 9 Jul 2008 05:38:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Jul 2008 05:38:07 -0000
Received: (qmail 2524 invoked by uid 500); 9 Jul 2008 05:38:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2499 invoked by uid 500); 9 Jul 2008 05:38:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2488 invoked by uid 99); 9 Jul 2008 05:38:01 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 08 Jul 2008 22:38:01 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of cambazz@gmail.com designates 64.233.166.179 as permitted sender)
Received: from [64.233.166.179] (HELO py-out-1112.google.com) (64.233.166.179)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Jul 2008 05:37:10 +0000
Received: by py-out-1112.google.com with SMTP id z74so1420462pyg.9
        for <java-user@lucene.apache.org>; Tue, 08 Jul 2008 22:37:32 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type;
        bh=uqyYHq1f7/rgj8zB45YBqjVAHM3F51LzjtUZUILMVjM=;
        b=cIXDU6sAFn0ccGyxacR55bI4myQnejIM788zop6OY4+GOHvTpgHCEh1xHyobBDpZqr
         6boMQpTvbkfAIT0R5mqyqlR4DEDGwnilSQMrErnPwkiLssCNbqHhgh9rWyowfFRpHRNe
         mH2jP7JWkTm5o2soABjbEkKcVBruBVQbGa9vU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=RpHgWf+ekzQcMd821xjmhgiOmy2SJHV7GKu+3RQGzCgjwVz3foDYAJlJ3kzXbu5p58
         1OxSPuNt19cfSZhfSH7GjfCf0f33LGT0H/ugRpEw/6OuA9ZWo1yG+7P7EhG2DuQ/NEjq
         CWVyMG/MeNi26jeOo+nZx/p85E0m/w95TYdCQ=
Received: by 10.141.18.14 with SMTP id v14mr3713103rvi.125.1215581852018;
        Tue, 08 Jul 2008 22:37:32 -0700 (PDT)
Received: by 10.141.168.3 with HTTP; Tue, 8 Jul 2008 22:37:32 -0700 (PDT)
Message-ID: <1bcb7c7f0807082237r6119e20dxe1ecfa7fe67db98b@mail.gmail.com>
Date: Wed, 9 Jul 2008 08:37:32 +0300
From: "Cam Bazz" <cambazz@gmail.com>
To: java-user@lucene.apache.org
Subject: boolean query or
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_42761_32359080.1215581852035"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_42761_32359080.1215581852035
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hello,

Is it possible to make a boolean query where a word is equal to fieldA or
fieldB?

in other words, I like to search a word in two fields, if word passes in
fieldA or fieldB, then it is a hit.

Best,
-C.B.

------=_Part_42761_32359080.1215581852035--

From java-user-return-34845-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 09 08:01:51 2008
Return-Path: <java-user-return-34845-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3959 invoked from network); 9 Jul 2008 08:01:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Jul 2008 08:01:51 -0000
Received: (qmail 41173 invoked by uid 500); 9 Jul 2008 08:01:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41147 invoked by uid 500); 9 Jul 2008 08:01:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41136 invoked by uid 99); 9 Jul 2008 08:01:45 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Jul 2008 01:01:45 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: 194.109.24.22 is neither permitted nor denied by domain of karl.wettin@gmail.com)
Received: from [194.109.24.22] (HELO smtp-vbr2.xs4all.nl) (194.109.24.22)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Jul 2008 08:00:52 +0000
Received: from kodapan.lan (memnon.xs4all.nl [82.93.70.124])
	by smtp-vbr2.xs4all.nl (8.13.8/8.13.8) with ESMTP id m6981Bcm091468
	for <java-user@lucene.apache.org>; Wed, 9 Jul 2008 10:01:12 +0200 (CEST)
	(envelope-from karl.wettin@gmail.com)
Message-Id: <F73FF830-7DEF-4628-96D0-329AA3C9B587@gmail.com>
From: Karl Wettin <karl.wettin@gmail.com>
To: java-user@lucene.apache.org
In-Reply-To: <1bcb7c7f0807082237r6119e20dxe1ecfa7fe67db98b@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v924)
Subject: Re: boolean query or
Date: Wed, 9 Jul 2008 10:01:10 +0200
References: <1bcb7c7f0807082237r6119e20dxe1ecfa7fe67db98b@mail.gmail.com>
X-Mailer: Apple Mail (2.924)
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org


9 jul 2008 kl. 07.37 skrev Cam Bazz:

> Hello,
>
> Is it possible to make a boolean query where a word is equal to  
> fieldA or
> fieldB?
>
> in other words, I like to search a word in two fields, if word  
> passes in
> fieldA or fieldB, then it is a hit.

XOR?

+(A B) -(+A +B)


        karl

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34846-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 09 08:18:48 2008
Return-Path: <java-user-return-34846-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 9686 invoked from network); 9 Jul 2008 08:18:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Jul 2008 08:18:48 -0000
Received: (qmail 68500 invoked by uid 500); 9 Jul 2008 08:18:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68469 invoked by uid 500); 9 Jul 2008 08:18:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68458 invoked by uid 99); 9 Jul 2008 08:18:42 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Jul 2008 01:18:42 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of wsnet@live.cn designates 65.54.246.241 as permitted sender)
Received: from [65.54.246.241] (HELO bay0-omc3-s41.bay0.hotmail.com) (65.54.246.241)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Jul 2008 08:17:48 +0000
Received: from BAY119-W38 ([207.46.9.73]) by bay0-omc3-s41.bay0.hotmail.com with Microsoft SMTPSVC(6.0.3790.3959);
	 Wed, 9 Jul 2008 01:17:49 -0700
Message-ID: <BAY119-W38004D6DA75243BB55A93EB4960@phx.gbl>
Content-Type: multipart/alternative;
	boundary="_f9eeb1bd-3f47-4d33-81b6-5f337691ba55_"
X-Originating-IP: [222.66.20.82]
From: lutan <wsnet@live.cn>
To: <java-user@lucene.apache.org>
Subject: how to get IndexReader Remote?
Date: Wed, 9 Jul 2008 16:17:48 +0800
Importance: Normal
In-Reply-To: <EC19D53A-0C9A-4427-B9EA-38A93D080AAD@mikemccandless.com>
References: <357284.79975.qm@web53005.mail.re2.yahoo.com>
 <EC19D53A-0C9A-4427-B9EA-38A93D080AAD@mikemccandless.com>
MIME-Version: 1.0
X-OriginalArrivalTime: 09 Jul 2008 08:17:49.0505 (UTC) FILETIME=[46900310:01C8E19C]
X-Virus-Checked: Checked by ClamAV on apache.org

--_f9eeb1bd-3f47-4d33-81b6-5f337691ba55_
Content-Type: text/plain; charset="gb2312"
Content-Transfer-Encoding: 8bit


I have a MultiSearcher from remote using by 
Naming.bind("rmi://"+IP+":"+PORT+"/"+NAME, RemoteSearchable)
,but MultiSearcher  doesn't has getIndexReader() .
How to get IndexReader?
_________________________________________________________________
MSN 中文网，最新时尚生活资讯，白领聚集门户。
http://cn.msn.com
--_f9eeb1bd-3f47-4d33-81b6-5f337691ba55_--

From java-user-return-34847-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 09 08:31:42 2008
Return-Path: <java-user-return-34847-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 13023 invoked from network); 9 Jul 2008 08:31:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Jul 2008 08:31:42 -0000
Received: (qmail 81274 invoked by uid 500); 9 Jul 2008 08:31:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81238 invoked by uid 500); 9 Jul 2008 08:31:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81227 invoked by uid 99); 9 Jul 2008 08:31:37 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Jul 2008 01:31:36 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: 194.109.24.28 is neither permitted nor denied by domain of karl.wettin@gmail.com)
Received: from [194.109.24.28] (HELO smtp-vbr8.xs4all.nl) (194.109.24.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Jul 2008 08:30:44 +0000
Received: from kodapan.lan (memnon.xs4all.nl [82.93.70.124])
	by smtp-vbr8.xs4all.nl (8.13.8/8.13.8) with ESMTP id m698V1Eh075069
	for <java-user@lucene.apache.org>; Wed, 9 Jul 2008 10:31:02 +0200 (CEST)
	(envelope-from karl.wettin@gmail.com)
Message-Id: <21A2566B-E422-435A-A9EC-E72A1A8FCEE5@gmail.com>
From: Karl Wettin <karl.wettin@gmail.com>
To: java-user@lucene.apache.org
In-Reply-To: <18347238.post@talk.nabble.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v924)
Subject: Re: How to handle frequent updates.
Date: Wed, 9 Jul 2008 10:31:00 +0200
References: <18347238.post@talk.nabble.com>
X-Mailer: Apple Mail (2.924)
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org


8 jul 2008 kl. 21.33 skrev miztaken:

>
> Hi there,
> I know lucene is for indexing and not for frequent updates and delete.
> But i have been using lucene to store my matrix as a document.
> Since with my algorithm the value of matrix can change so i am  
> updating the
> value.
> But for this i have to close and reopen indexReader and in  
> additional to
> that the reader is not able to read the documents hold in the RAM  
> directory
> or buffer in indexWriter... i.e. documents that are hold in memory by
> indexwriter due to other parameters set for indexwriter so  
> eventually i have
> to optimize or flush the writer and reopen the reader to get accurate
> results.
>
> Is there some work around for this type of job?

You want updates that show up in the reader/searcher without latency?  
I believe LUCENE-1313 is an attempt at that.

> Can any one suggest me any other open source API ?


What sort of operations do you use the matrix for? How large can it  
grow? Can you give an example of what the matrix might contain?

What was the reason to solve your problem using Lucene? Is there some  
specific feature that made something easier or faster than the  
solutions you discarded?


               karl

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34848-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 09 12:45:33 2008
Return-Path: <java-user-return-34848-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89778 invoked from network); 9 Jul 2008 12:45:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Jul 2008 12:45:33 -0000
Received: (qmail 38979 invoked by uid 500); 9 Jul 2008 12:45:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38941 invoked by uid 500); 9 Jul 2008 12:45:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38930 invoked by uid 99); 9 Jul 2008 12:45:27 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Jul 2008 05:45:27 -0700
X-ASF-Spam-Status: No, hits=4.0 required=10.0
	tests=DNS_FROM_OPENWHOIS,FORGED_YAHOO_RCVD,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Jul 2008 12:44:34 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KGZ2W-0007Va-4s
	for java-user@lucene.apache.org; Wed, 09 Jul 2008 05:44:56 -0700
Message-ID: <18360568.post@talk.nabble.com>
Date: Wed, 9 Jul 2008 05:44:56 -0700 (PDT)
From: starz10de <farag_ahmed@yahoo.com>
To: java-user@lucene.apache.org
Subject: My own nalyzer in lucene
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: farag_ahmed@yahoo.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hi All,
I am new in lucene!
 I am trying to do my own nalyzer (myAnalyzer) in lucene. I worte it and I
compile it, then i add myAnlayzer.class to the folder 
  \org\apache\lucene\analysis  and then i create new jar files which
contains myAnalyzer and the other files, then  i imported  myanalyzer in
IndexFile.java successfully:

 import org.apache.lucene.analysis.myAnalyzer;

after that i modified this command in IndexFile.java

  IndexWriter writer = new IndexWriter("index", myAnalyzer(), true);
Unfortunately there is some error here which I couldn't recognize, I feel I
didn't missed any step, also myanalyzer.java was compiled without any error.

Thanks in advance
Farag
-- 
View this message in context: http://www.nabble.com/My-own-nalyzer-in-lucene-tp18360568p18360568.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34849-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 09 13:01:26 2008
Return-Path: <java-user-return-34849-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98365 invoked from network); 9 Jul 2008 13:01:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Jul 2008 13:01:26 -0000
Received: (qmail 69031 invoked by uid 500); 9 Jul 2008 13:01:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68534 invoked by uid 500); 9 Jul 2008 13:01:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68523 invoked by uid 99); 9 Jul 2008 13:01:19 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Jul 2008 06:01:19 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of marcelo.schneider@digitro.com.br designates 189.85.128.24 as permitted sender)
Received: from [189.85.128.24] (HELO mail.digitro.com.br) (189.85.128.24)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Jul 2008 13:00:27 +0000
Received: from serverdgt.daf.digitro.com.br (firewall [189.85.128.10])
	by mail.digitro.com.br (Postfix) with ESMTP id 5FF9F1F90A84
	for <java-user@lucene.apache.org>; Wed,  9 Jul 2008 09:59:14 -0300 (BRT)
Received: from [192.168.170.153] (dinamico153.dti.digitro.com.br [192.168.170.153])
	by serverdgt.daf.digitro.com.br (Postfix) with ESMTP id 284613C45E3
	for <java-user@lucene.apache.org>; Wed,  9 Jul 2008 10:00:40 -0300 (BRT)
Message-ID: <4874B678.9080501@digitro.com.br>
Date: Wed, 09 Jul 2008 10:00:40 -0300
From: Marcelo Schneider <marcelo.schneider@digitro.com.br>
User-Agent: Thunderbird 2.0.0.0 (Windows/20070326)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: My own nalyzer in lucene
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 8bit
X-Digitro-MailScanner-Information: Please contact the ISP for more information
X-MailScanner-ID: 5FF9F1F90A84.DE154
X-Digitro-MailScanner: Found to be clean
X-Digitro-MailScanner-From: marcelo.schneider@digitro.com.br
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No

starz10de escreveu:
> Hi All,
> I am new in lucene!
>  I am trying to do my own nalyzer (myAnalyzer) in lucene. I worte it and I
> compile it, then i add myAnlayzer.class to the folder 
>   \org\apache\lucene\analysis  and then i create new jar files which
> contains myAnalyzer and the other files, then  i imported  myanalyzer in
> IndexFile.java successfully:
>
>  import org.apache.lucene.analysis.myAnalyzer;
>
> after that i modified this command in IndexFile.java
>
>   IndexWriter writer = new IndexWriter("index", myAnalyzer(), true);
> Unfortunately there is some error here which I couldn't recognize, I feel I
> didn't missed any step, also myanalyzer.java was compiled without any error.
>
> Thanks in advance
> Farag
>   

What/where is the error? The steps you followed seem correct. Can you 
share some of your analyzer code?

Just some notes: Java convention says you should start class names with 
uppercase (MyAnalyzer); plus, where are you are instantiating your 
analyzer (new IndexWriter("index", new myAnalyzer(), true);)?



-- 

*Marcelo Frantz Schneider*
/SIC - TCO - Tecnologia em Engenharia do Conhecimento/
*DGITRO TECNOLOGIA*

-- 
Esta mensagem foi verificada pelo sistema de antivrus da Dgitro e
acredita-se estar livre de perigo.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34850-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 09 13:04:17 2008
Return-Path: <java-user-return-34850-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 2106 invoked from network); 9 Jul 2008 13:04:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Jul 2008 13:04:13 -0000
Received: (qmail 75899 invoked by uid 500); 9 Jul 2008 13:04:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75844 invoked by uid 500); 9 Jul 2008 13:04:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75460 invoked by uid 99); 9 Jul 2008 13:04:05 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Jul 2008 06:04:05 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [63.65.184.134] (HELO birexchange.BIRPLAZA.local) (63.65.184.134)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Jul 2008 13:03:13 +0000
Subject: performance feedback
Date: Wed, 9 Jul 2008 09:03:57 -0400
Message-ID: <CC2671C08F06704ABFD37ED1EA09AA5659B9E4@birexchange.BIRPLAZA.local>
X-MS-Has-Attach: 
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
X-MS-TNEF-Correlator: 
Thread-Topic: performance feedback
Thread-Index: AcjhnjW9yS1xc8h3Sm20Vs43mErQ9gAHc1OQ
Content-class: urn:content-classes:message
X-MimeOLE: Produced By Microsoft Exchange V6.5.6944.0
From: "Beard, Brian" <Brian.Beard@mybir.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

I just did an update from lucene 2.2.0 to 2.3.2 and thought I'd give
some kudos for the indexing performance enhancements.

The lucene indexing portion is about 6-8 times faster. Previously we
were doing ~60-120 documents per second, now we're between 400-1000,
depending on the type of document, size, and how many fields there are.
Haven't done a formal comparison side by side, but certainly is
substantially faster.

We index from 5 to 20 fields per document (in serial through
IndexWriter). Most are 3-5K total size, but can vary quite a bit. Total
index size (eventually) will be ~15G.

Thanks,

Brian Beard





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34851-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 09 13:18:59 2008
Return-Path: <java-user-return-34851-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 6770 invoked from network); 9 Jul 2008 13:18:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Jul 2008 13:18:58 -0000
Received: (qmail 93715 invoked by uid 500); 9 Jul 2008 13:18:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93673 invoked by uid 500); 9 Jul 2008 13:18:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93662 invoked by uid 99); 9 Jul 2008 13:18:51 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Jul 2008 06:18:51 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [63.65.184.134] (HELO birexchange.BIRPLAZA.local) (63.65.184.134)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Jul 2008 13:18:00 +0000
Subject: performance feedback
Date: Wed, 9 Jul 2008 09:17:56 -0400
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Message-ID: <CC2671C08F06704ABFD37ED1EA09AA5659B9FA@birexchange.BIRPLAZA.local>
X-MS-Has-Attach: 
Content-class: urn:content-classes:message
X-MimeOLE: Produced By Microsoft Exchange V6.5.6944.0
X-MS-TNEF-Correlator: 
Thread-Topic: performance feedback
Thread-Index: AcjhnjW9yS1xc8h3Sm20Vs43mErQ9gAHc1OQAAJPn6A=
From: "Beard, Brian" <Brian.Beard@mybir.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org


I just did an update from lucene 2.2.0 to 2.3.2 and thought I'd give
some kudos for the indexing performance enhancements.

The lucene indexing portion is about 6-8 times faster. Previously we
were doing ~60-120 documents per second, now we're between 400-1000,
depending on the type of document, size, and how many fields there are.
Haven't done a formal comparison side by side, but certainly is
substantially faster.

The gain would have been equal to the 8-10 times in the readme, but
using custom tokenizers slows things down a little vs. using the
standard one. At first I didn't realize to use reusableTokenFilter which
bypassed the custom tokenizers and had the 8-10x improvement. Maybe
there's some more gain to be had I can pursue.

We index from 5 to 20 fields per document (in serial through
IndexWriter). Most are 3-5K total size, but can vary quite a bit. Total
index size (eventually) will be ~15G.

Thanks,

Brian Beard





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34852-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 09 13:26:20 2008
Return-Path: <java-user-return-34852-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10887 invoked from network); 9 Jul 2008 13:26:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Jul 2008 13:26:17 -0000
Received: (qmail 9042 invoked by uid 500); 9 Jul 2008 13:26:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8993 invoked by uid 500); 9 Jul 2008 13:26:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8490 invoked by uid 99); 9 Jul 2008 13:26:09 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Jul 2008 06:26:09 -0700
X-ASF-Spam-Status: No, hits=4.0 required=10.0
	tests=DNS_FROM_OPENWHOIS,FORGED_YAHOO_RCVD,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Jul 2008 13:25:16 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KGZfu-0000mE-3B
	for java-user@lucene.apache.org; Wed, 09 Jul 2008 06:25:38 -0700
Message-ID: <18361573.post@talk.nabble.com>
Date: Wed, 9 Jul 2008 06:25:38 -0700 (PDT)
From: starz10de <farag_ahmed@yahoo.com>
To: java-user@lucene.apache.org
Subject: Re: My own nalyzer in lucene
In-Reply-To: <4874B678.9080501@digitro.com.br>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Nabble-From: farag_ahmed@yahoo.com
References: <18360568.post@talk.nabble.com> <4874B678.9080501@digitro.com.br>
X-Virus-Checked: Checked by ClamAV on apache.org


I think there is problem of creating the jar files, it is created correctly
where i can see myanalyzer inside, but I made a test where i change the nam=
e
of Standardanlazer and then i did the same steps again , then i faced the
same error inside the IndexFile.java :

the eroor   "   the constructor IndexWriter(string, myanalyzer, boolean) is
not defined  "

I think there is no problem inside the code of myAnalyzer.java as i did som=
e
test where i just change the name of StandardAnalyzer and then i got the
same error.


Thnaks
Farag


Marcelo Schneider wrote:
>=20
> starz10de escreveu:
>> Hi All,
>> I am new in lucene!
>>  I am trying to do my own nalyzer (myAnalyzer) in lucene. I worte it and
>> I
>> compile it, then i add myAnlayzer.class to the folder=20
>>   \org\apache\lucene\analysis  and then i create new jar files which
>> contains myAnalyzer and the other files, then  i imported  myanalyzer in
>> IndexFile.java successfully:
>>
>>  import org.apache.lucene.analysis.myAnalyzer;
>>
>> after that i modified this command in IndexFile.java
>>
>>   IndexWriter writer =3D new IndexWriter("index", myAnalyzer(), true);
>> Unfortunately there is some error here which I couldn't recognize, I fee=
l
>> I
>> didn't missed any step, also myanalyzer.java was compiled without any
>> error.
>>
>> Thanks in advance
>> Farag
>>  =20
>=20
> What/where is the error? The steps you followed seem correct. Can you=20
> share some of your analyzer code?
>=20
> Just some notes: Java convention says you should start class names with=
=20
> uppercase (MyAnalyzer); plus, where are you are instantiating your=20
> analyzer (new IndexWriter("index", new myAnalyzer(), true);)?
>=20
>=20
>=20
> --=20
>=20
> *Marcelo Frantz Schneider*
> /SIC - TCO - Tecnologia em Engenharia do Conhecimento/
> *D=C3=8DGITRO TECNOLOGIA*
>=20
> --=20
> Esta mensagem foi verificada pelo sistema de antiv=C3=ADrus da D=C3=ADgit=
ro e
> acredita-se estar livre de perigo.
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>=20
>=20

--=20
View this message in context: http://www.nabble.com/My-own-nalyzer-in-lucen=
e-tp18360568p18361573.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34853-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 09 13:42:06 2008
Return-Path: <java-user-return-34853-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19546 invoked from network); 9 Jul 2008 13:42:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Jul 2008 13:42:06 -0000
Received: (qmail 42358 invoked by uid 500); 9 Jul 2008 13:42:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41932 invoked by uid 500); 9 Jul 2008 13:41:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41921 invoked by uid 99); 9 Jul 2008 13:41:59 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Jul 2008 06:41:59 -0700
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.162.177 as permitted sender)
Received: from [209.85.162.177] (HELO el-out-1112.google.com) (209.85.162.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Jul 2008 13:41:05 +0000
Received: by el-out-1112.google.com with SMTP id m34so427786ele.14
        for <java-user@lucene.apache.org>; Wed, 09 Jul 2008 06:41:27 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=tECGYu8YpGW/Mesp3REy45LC9HL+iSldwRJP7toTTMY=;
        b=c92F3vZgG+q/UwHZrwDKlHtRT1lUzSoRSAR0GCMLs2/9YiiTtA5lIZ0juItH20F15s
         g8TjcyPmSPF1+zhxI8Oyg05X3SDWuM15fl4S88bfIc5ZnDheZC4FCcz27cIBcdMMCXZU
         oSXIvp0pUCE6E8Yv0yUpzvs24oZ6R1v4+8bpo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=HLAqmtgMyey7sC7qI8DW+WJsqZGE6wcKAyW/MEKD9+yvaJfNs7vVKFtxh/iGby15WX
         dHtTYzOrmuA1r8TpmUd3/TbQnWKd/1LnU+moM8n4QbWWqMntinGh+v0PRcW1tJhiTLwx
         50xkmywlthveZO6tDDpFxuXhU/u1uiANNKRWo=
Received: by 10.151.11.19 with SMTP id o19mr4937586ybi.78.1215610886933;
        Wed, 09 Jul 2008 06:41:26 -0700 (PDT)
Received: by 10.151.40.4 with HTTP; Wed, 9 Jul 2008 06:41:26 -0700 (PDT)
Message-ID: <359a92830807090641h21f656a5p43ce824b963381fb@mail.gmail.com>
Date: Wed, 9 Jul 2008 09:41:26 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: My own nalyzer in lucene
In-Reply-To: <18361573.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_3633_10197397.1215610886911"
References: <18360568.post@talk.nabble.com> <4874B678.9080501@digitro.com.br>
	 <18361573.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_3633_10197397.1215610886911
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Let's see your analyzer code. Actually, I'm really only curious about the
class declaration. Did you subclass your analyzer from the proper Lucene
superclass? Say Analyzer?

And why bother putting it in a separate jar file in the first place? Unless
you really need to share this jar across projects? This seems like
substantial complexity if you don't really, really need it.

Best
Erick

On Wed, Jul 9, 2008 at 9:25 AM, starz10de <farag_ahmed@yahoo.com> wrote:

>
> I think there is problem of creating the jar files, it is created correct=
ly
> where i can see myanalyzer inside, but I made a test where i change the
> name
> of Standardanlazer and then i did the same steps again , then i faced the
> same error inside the IndexFile.java :
>
> the eroor   "   the constructor IndexWriter(string, myanalyzer, boolean) =
is
> not defined  "
>
> I think there is no problem inside the code of myAnalyzer.java as i did
> some
> test where i just change the name of StandardAnalyzer and then i got the
> same error.
>
>
> Thnaks
> Farag
>
>
> Marcelo Schneider wrote:
> >
> > starz10de escreveu:
> >> Hi All,
> >> I am new in lucene!
> >>  I am trying to do my own nalyzer (myAnalyzer) in lucene. I worte it a=
nd
> >> I
> >> compile it, then i add myAnlayzer.class to the folder
> >>   \org\apache\lucene\analysis  and then i create new jar files which
> >> contains myAnalyzer and the other files, then  i imported  myanalyzer =
in
> >> IndexFile.java successfully:
> >>
> >>  import org.apache.lucene.analysis.myAnalyzer;
> >>
> >> after that i modified this command in IndexFile.java
> >>
> >>   IndexWriter writer =3D new IndexWriter("index", myAnalyzer(), true);
> >> Unfortunately there is some error here which I couldn't recognize, I
> feel
> >> I
> >> didn't missed any step, also myanalyzer.java was compiled without any
> >> error.
> >>
> >> Thanks in advance
> >> Farag
> >>
> >
> > What/where is the error? The steps you followed seem correct. Can you
> > share some of your analyzer code?
> >
> > Just some notes: Java convention says you should start class names with
> > uppercase (MyAnalyzer); plus, where are you are instantiating your
> > analyzer (new IndexWriter("index", new myAnalyzer(), true);)?
> >
> >
> >
> > --
> >
> > *Marcelo Frantz Schneider*
> > /SIC - TCO - Tecnologia em Engenharia do Conhecimento/
> > *D=CDGITRO TECNOLOGIA*
> >
> > --
> > Esta mensagem foi verificada pelo sistema de antiv=EDrus da D=EDgitro e
> > acredita-se estar livre de perigo.
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> >
>
> --
> View this message in context:
> http://www.nabble.com/My-own-nalyzer-in-lucene-tp18360568p18361573.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_3633_10197397.1215610886911--

From java-user-return-34854-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 09 13:50:19 2008
Return-Path: <java-user-return-34854-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 24144 invoked from network); 9 Jul 2008 13:50:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Jul 2008 13:50:19 -0000
Received: (qmail 59396 invoked by uid 500); 9 Jul 2008 13:50:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59363 invoked by uid 500); 9 Jul 2008 13:50:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59352 invoked by uid 99); 9 Jul 2008 13:50:12 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Jul 2008 06:50:12 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Jul 2008 13:49:20 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KGa3A-0001Zk-DD
	for java-user@lucene.apache.org; Wed, 09 Jul 2008 06:49:40 -0700
Message-ID: <18362075.post@talk.nabble.com>
Date: Wed, 9 Jul 2008 06:49:40 -0700 (PDT)
From: jnance <nancejd@ornl.gov>
To: java-user@lucene.apache.org
Subject: Searching for instances within a document
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: nancejd@ornl.gov
X-Virus-Checked: Checked by ClamAV on apache.org


Hi,

I am indexing lots of text files and need to see how many times a certain
word comes up in each text file. Right now I have this constructor for
"search":

 static void search(Searcher searcher, String queryString) throws
ParseException, IOException {
		 QueryParser parser = new QueryParser("content", new StandardAnalyzer());
		 Query query = parser.parse(queryString);
		 Hits hits = searcher.search(query);
		 
		 int hitCount = hits.length();
		 if (hitCount == 0) {
			 System.out.println("0 documents contain the word \"" + queryString +
".\""); 
		 }
		 else {
			 System.out.println(hitCount + " documents contain the word \"" +
queryString + ".\"");
		 }
	 }

This tells me how many documents contain the word I'm looking for... but how
do I get it to tell me how many times the word occurs within that document?

Thanks,

James
-- 
View this message in context: http://www.nabble.com/Searching-for-instances-within-a-document-tp18362075p18362075.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34855-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 09 14:01:31 2008
Return-Path: <java-user-return-34855-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33431 invoked from network); 9 Jul 2008 14:01:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Jul 2008 14:01:30 -0000
Received: (qmail 86890 invoked by uid 500); 9 Jul 2008 14:01:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86852 invoked by uid 500); 9 Jul 2008 14:01:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86840 invoked by uid 99); 9 Jul 2008 14:01:24 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Jul 2008 07:01:23 -0700
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 64.233.170.185 as permitted sender)
Received: from [64.233.170.185] (HELO rn-out-0910.google.com) (64.233.170.185)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Jul 2008 14:00:31 +0000
Received: by rn-out-0910.google.com with SMTP id j71so809655rne.4
        for <java-user@lucene.apache.org>; Wed, 09 Jul 2008 07:00:52 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=ymgJNtuLkRXPvldyck1EfCwXxXHO/Wgnp9rhEygCPF0=;
        b=tmV2TQlTHPAFJ9WicjvIq/D8WOmwkDBy6LKe+EQb2/PinYbZPJz6DEA+xYR19Dc0iu
         PX1N9y1tvZ8HZYO4P/OiNUBZ++mzC6Mmi0jVBulsKzkG8a7pFe69yvpjnR11O3xi3Xs8
         NCh7KQMlj8/pQYv3A3e0fE/0kndA2awTIqzSs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=eE1YVBs0M0E+aFHweKTW0vB1t/1/VAs6KtmsN05zi5yjgUZoObQSCSz5+Ks4rPVRNW
         I9KKBo4Dp9iS9dlZVLO8CBibmcippK9VtEoTV/stbI27XQswVXqAgroANUe1Xhryitjf
         Y3M0GMqcKSasmF/SQ0mxHZOlAKOH/aZ3uSWc4=
Received: by 10.151.99.17 with SMTP id b17mr12434266ybm.212.1215612052804;
        Wed, 09 Jul 2008 07:00:52 -0700 (PDT)
Received: by 10.151.40.4 with HTTP; Wed, 9 Jul 2008 07:00:52 -0700 (PDT)
Message-ID: <359a92830807090700w45561abdjd2c153b63f5da97b@mail.gmail.com>
Date: Wed, 9 Jul 2008 10:00:52 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Searching for instances within a document
In-Reply-To: <18362075.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_3919_30700377.1215612052814"
References: <18362075.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_3919_30700377.1215612052814
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I know this has been discussed before, so if you search the
archive you might find an answer more quickly. I don't
remember what the resolution was, so I can't help there.

Best
Erick

On Wed, Jul 9, 2008 at 9:49 AM, jnance <nancejd@ornl.gov> wrote:

>
> Hi,
>
> I am indexing lots of text files and need to see how many times a certain
> word comes up in each text file. Right now I have this constructor for
> "search":
>
>  static void search(Searcher searcher, String queryString) throws
> ParseException, IOException {
>                 QueryParser parser = new QueryParser("content", new
> StandardAnalyzer());
>                 Query query = parser.parse(queryString);
>                 Hits hits = searcher.search(query);
>
>                 int hitCount = hits.length();
>                 if (hitCount == 0) {
>                         System.out.println("0 documents contain the word
> \"" + queryString +
> ".\"");
>                 }
>                 else {
>                         System.out.println(hitCount + " documents contain
> the word \"" +
> queryString + ".\"");
>                 }
>         }
>
> This tells me how many documents contain the word I'm looking for... but
> how
> do I get it to tell me how many times the word occurs within that document?
>
> Thanks,
>
> James
> --
> View this message in context:
> http://www.nabble.com/Searching-for-instances-within-a-document-tp18362075p18362075.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_3919_30700377.1215612052814--

From java-user-return-34856-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 09 14:06:05 2008
Return-Path: <java-user-return-34856-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35293 invoked from network); 9 Jul 2008 14:06:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Jul 2008 14:06:05 -0000
Received: (qmail 98819 invoked by uid 500); 9 Jul 2008 14:06:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97911 invoked by uid 500); 9 Jul 2008 14:06:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97900 invoked by uid 99); 9 Jul 2008 14:06:00 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Jul 2008 07:06:00 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Jul 2008 14:05:07 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KGaIT-0002KF-5c
	for java-user@lucene.apache.org; Wed, 09 Jul 2008 07:05:29 -0700
Message-ID: <18362432.post@talk.nabble.com>
Date: Wed, 9 Jul 2008 07:05:29 -0700 (PDT)
From: jnance <nancejd@ornl.gov>
To: java-user@lucene.apache.org
Subject: Re: Searching for instances within a document
In-Reply-To: <359a92830807090700w45561abdjd2c153b63f5da97b@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: nancejd@ornl.gov
References: <18362075.post@talk.nabble.com> <359a92830807090700w45561abdjd2c153b63f5da97b@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Ok, I'll see if I can find anything.

Thanks,

James

-- 
View this message in context: http://www.nabble.com/Searching-for-instances-within-a-document-tp18362075p18362432.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34857-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 09 14:38:55 2008
Return-Path: <java-user-return-34857-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 50517 invoked from network); 9 Jul 2008 14:38:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Jul 2008 14:38:52 -0000
Received: (qmail 74348 invoked by uid 500); 9 Jul 2008 14:38:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74320 invoked by uid 500); 9 Jul 2008 14:38:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74309 invoked by uid 99); 9 Jul 2008 14:38:46 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Jul 2008 07:38:46 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.132.250] (HELO an-out-0708.google.com) (209.85.132.250)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Jul 2008 14:37:53 +0000
Received: by an-out-0708.google.com with SMTP id c37so626259anc.49
        for <java-user@lucene.apache.org>; Wed, 09 Jul 2008 07:38:13 -0700 (PDT)
Received: by 10.100.144.11 with SMTP id r11mr6371373and.140.1215614276332;
        Wed, 09 Jul 2008 07:37:56 -0700 (PDT)
Received: from ?10.17.4.4? ( [72.93.214.93])
        by mx.google.com with ESMTPS id d12sm5597831and.6.2008.07.09.07.37.54
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Wed, 09 Jul 2008 07:37:55 -0700 (PDT)
Message-Id: <3D36A871-3EA3-4847-B3DB-C871A67914AE@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <CC2671C08F06704ABFD37ED1EA09AA5659B9FA@birexchange.BIRPLAZA.local>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: performance feedback
Date: Wed, 9 Jul 2008 10:37:53 -0400
References: <CC2671C08F06704ABFD37ED1EA09AA5659B9FA@birexchange.BIRPLAZA.local>
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org


This is great to hear!

If you tweak things a bit (increase RAM buffer size, use  
autoCommit=false, use threads, etc) you should be able to eke out some  
more gains...

Are you storing fields & using term vectors on any of your fields?

Mike

Beard, Brian wrote:

>
> I just did an update from lucene 2.2.0 to 2.3.2 and thought I'd give
> some kudos for the indexing performance enhancements.
>
> The lucene indexing portion is about 6-8 times faster. Previously we
> were doing ~60-120 documents per second, now we're between 400-1000,
> depending on the type of document, size, and how many fields there  
> are.
> Haven't done a formal comparison side by side, but certainly is
> substantially faster.
>
> The gain would have been equal to the 8-10 times in the readme, but
> using custom tokenizers slows things down a little vs. using the
> standard one. At first I didn't realize to use reusableTokenFilter  
> which
> bypassed the custom tokenizers and had the 8-10x improvement. Maybe
> there's some more gain to be had I can pursue.
>
> We index from 5 to 20 fields per document (in serial through
> IndexWriter). Most are 3-5K total size, but can vary quite a bit.  
> Total
> index size (eventually) will be ~15G.
>
> Thanks,
>
> Brian Beard
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34858-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 09 15:35:56 2008
Return-Path: <java-user-return-34858-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 17735 invoked from network); 9 Jul 2008 15:35:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Jul 2008 15:35:56 -0000
Received: (qmail 83775 invoked by uid 500); 9 Jul 2008 15:35:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82859 invoked by uid 500); 9 Jul 2008 15:35:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82848 invoked by uid 99); 9 Jul 2008 15:35:49 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Jul 2008 08:35:49 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [63.65.184.134] (HELO birexchange.BIRPLAZA.local) (63.65.184.134)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Jul 2008 15:34:58 +0000
Content-class: urn:content-classes:message
Subject: RE: performance feedback
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Date: Wed, 9 Jul 2008 11:35:13 -0400
Message-ID: <CC2671C08F06704ABFD37ED1EA09AA5659BA44@birexchange.BIRPLAZA.local>
X-MimeOLE: Produced By Microsoft Exchange V6.5.6944.0
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: performance feedback
Thread-Index: Acjh0YEhjQUfuUnWSdiFQNUtbkAtQgAAlD3A
From: "Beard, Brian" <Brian.Beard@mybir.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

I will try tweaking RAM, and check about autoCommit=3Dfalse. It's on the
future agenda to multi-thread through the index writer. The indexing
time I quoted includes the document creation time which would definitely
improve with multi-threading.

I'm doing batch updates of up to 1000 a pop, and closing and re-opening
the IndexWriter in between.

Not using term vectors on any fields. Not using compression either. I
did change the tokenizers to re-use instead of instantiate a new one.=20

About half of the fields are stored in the index. Most are small, but
unfortunately the largest one is stored which uses a lot of memory and
probably takes additional time to write. The only reason is so a snippet
can be returned from it, but eventually I'd like to get rid of that and
return snippets as tokens in the stream (I'm guessing that it might be
ok to return analyzed data as a snippet given it would save a lot on
index size, which would speed up copy time during swapping between
search and update indexes).

-----Original Message-----
From: Michael McCandless [mailto:lucene@mikemccandless.com]=20
Sent: Wednesday, July 09, 2008 10:38 AM
To: java-user@lucene.apache.org
Subject: Re: performance feedback


This is great to hear!

If you tweak things a bit (increase RAM buffer size, use =20
autoCommit=3Dfalse, use threads, etc) you should be able to eke out some =
=20
more gains...

Are you storing fields & using term vectors on any of your fields?

Mike

Beard, Brian wrote:

>
> I just did an update from lucene 2.2.0 to 2.3.2 and thought I'd give
> some kudos for the indexing performance enhancements.
>
> The lucene indexing portion is about 6-8 times faster. Previously we
> were doing ~60-120 documents per second, now we're between 400-1000,
> depending on the type of document, size, and how many fields there =20
> are.
> Haven't done a formal comparison side by side, but certainly is
> substantially faster.
>
> The gain would have been equal to the 8-10 times in the readme, but
> using custom tokenizers slows things down a little vs. using the
> standard one. At first I didn't realize to use reusableTokenFilter =20
> which
> bypassed the custom tokenizers and had the 8-10x improvement. Maybe
> there's some more gain to be had I can pursue.
>
> We index from 5 to 20 fields per document (in serial through
> IndexWriter). Most are 3-5K total size, but can vary quite a bit. =20
> Total
> index size (eventually) will be ~15G.
>
> Thanks,
>
> Brian Beard
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34859-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 09 15:51:23 2008
Return-Path: <java-user-return-34859-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 27863 invoked from network); 9 Jul 2008 15:51:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Jul 2008 15:51:23 -0000
Received: (qmail 12864 invoked by uid 500); 9 Jul 2008 15:51:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12837 invoked by uid 500); 9 Jul 2008 15:51:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12826 invoked by uid 99); 9 Jul 2008 15:51:16 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Jul 2008 08:51:16 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of yseeley@gmail.com designates 209.85.146.176 as permitted sender)
Received: from [209.85.146.176] (HELO wa-out-1112.google.com) (209.85.146.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Jul 2008 15:50:25 +0000
Received: by wa-out-1112.google.com with SMTP id l24so1896286waf.11
        for <java-user@lucene.apache.org>; Wed, 09 Jul 2008 08:50:47 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:sender
         :to:subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references
         :x-google-sender-auth;
        bh=yHUDkAhyxx3RzkPEXm+GhBALbeHht91V/66plEV8gO8=;
        b=NH6ujX2hhaQvCqg7KCwR373EjikxQyKEzlXwkt5lz+j62yTknBLsCwT9IgJwnFpamn
         hGXFK603oY07kz7R6v+7aU3xDjQhHqSXgAPE9TuIgXjEeUI8Fsx5BGzGGBje7GcqjfRQ
         tFIbj0adZEirwETLEb9ZJrBklVUT0TGHlRI5c=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:sender:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references:x-google-sender-auth;
        b=HV/ayVpqHLaVUcEAqEREGNC585TvdCfPOnkxOyLWCFx4GkIaSxYa6wI2rPjxFz3ytp
         WCxeOpjGRJqhiEDXOUAoQUljIu/DCtZFMHvKeaJemhNc9fWqARg/I7ZSWpgJmxykC0Lz
         71KtcK+tRFjKfT+bMVixuNFtrwPGcTm37hIpA=
Received: by 10.115.92.2 with SMTP id u2mr9590818wal.33.1215618647304;
        Wed, 09 Jul 2008 08:50:47 -0700 (PDT)
Received: by 10.114.75.13 with HTTP; Wed, 9 Jul 2008 08:50:47 -0700 (PDT)
Message-ID: <c68e39170807090850j3b12065cra5bbeacf74060a5d@mail.gmail.com>
Date: Wed, 9 Jul 2008 11:50:47 -0400
From: "Yonik Seeley" <yonik@apache.org>
Sender: yseeley@gmail.com
To: java-user@lucene.apache.org
Subject: Re: performance feedback
In-Reply-To: <CC2671C08F06704ABFD37ED1EA09AA5659BA44@birexchange.BIRPLAZA.local>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <CC2671C08F06704ABFD37ED1EA09AA5659BA44@birexchange.BIRPLAZA.local>
X-Google-Sender-Auth: 997289174ea68835
X-Virus-Checked: Checked by ClamAV on apache.org

On Wed, Jul 9, 2008 at 11:35 AM, Beard, Brian <Brian.Beard@mybir.com> wrote:
> I will try tweaking RAM, and check about autoCommit=false. It's on the
> future agenda to multi-thread through the index writer. The indexing
> time I quoted includes the document creation time which would definitely
> improve with multi-threading.
>
> I'm doing batch updates of up to 1000 a pop, and closing and re-opening
> the IndexWriter in between.

autoCommit=false will definitely help, and there is normally no reason
not to use it.
Bigger batches (or a single batch) will also help indexing speed.  A
single IndexWriter session can now avoid copying stored fields on
segment merges.

-Yonik

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34860-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 09 16:07:00 2008
Return-Path: <java-user-return-34860-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33437 invoked from network); 9 Jul 2008 16:06:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Jul 2008 16:06:59 -0000
Received: (qmail 46753 invoked by uid 500); 9 Jul 2008 16:06:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46499 invoked by uid 500); 9 Jul 2008 16:06:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46488 invoked by uid 99); 9 Jul 2008 16:06:53 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Jul 2008 09:06:53 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of yseeley@gmail.com designates 209.85.146.181 as permitted sender)
Received: from [209.85.146.181] (HELO wa-out-1112.google.com) (209.85.146.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Jul 2008 16:06:01 +0000
Received: by wa-out-1112.google.com with SMTP id l24so1899289waf.11
        for <java-user@lucene.apache.org>; Wed, 09 Jul 2008 09:06:23 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:sender
         :to:subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references
         :x-google-sender-auth;
        bh=yHUDkAhyxx3RzkPEXm+GhBALbeHht91V/66plEV8gO8=;
        b=e9+JFsBMJuiBQTvSNOL0TikWivILIvAfUHjKIt4JpmOmMcJNkRavp/5nmCFYI+7MJS
         ZUws5aJHjVXGyjWF6ZD85xpwLEll1WT0lqykACZVa/W0tAzVVcTM8aJGGeFCGM6aYk8A
         OWHRp1A37/VFl5BNeQVMqYY9ELlF0w5bB4YZM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:sender:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references:x-google-sender-auth;
        b=W1aP5l4eJf1K5b62IO4l/1bNZzQFDyiz+qZG5i2u+RL6pfPex8oT/QgqJfokwLn85w
         BrR8Pt+L10AC3uGVzF7x8JTQy4HRzbJW3kKEjx6clMicSZwNQHeHwYLZW9j7VljEl2dl
         hYklk02Bje+x2dIBU7PnE/C/QPxap3/n94r6s=
Received: by 10.114.92.2 with SMTP id p2mr9530934wab.223.1215619582130;
        Wed, 09 Jul 2008 09:06:22 -0700 (PDT)
Received: by 10.114.75.13 with HTTP; Wed, 9 Jul 2008 09:06:22 -0700 (PDT)
Message-ID: <c68e39170807090906p5bf0e660r7e9433a70c2c65d6@mail.gmail.com>
Date: Wed, 9 Jul 2008 12:06:22 -0400
From: "Yonik Seeley" <yonik@apache.org>
Sender: yseeley@gmail.com
To: java-user@lucene.apache.org
Subject: Re: performance feedback
In-Reply-To: <CC2671C08F06704ABFD37ED1EA09AA5659BA44@birexchange.BIRPLAZA.local>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <CC2671C08F06704ABFD37ED1EA09AA5659BA44@birexchange.BIRPLAZA.local>
X-Google-Sender-Auth: 0bc9b2331b01609d
X-Virus-Checked: Checked by ClamAV on apache.org

On Wed, Jul 9, 2008 at 11:35 AM, Beard, Brian <Brian.Beard@mybir.com> wrote:
> I will try tweaking RAM, and check about autoCommit=false. It's on the
> future agenda to multi-thread through the index writer. The indexing
> time I quoted includes the document creation time which would definitely
> improve with multi-threading.
>
> I'm doing batch updates of up to 1000 a pop, and closing and re-opening
> the IndexWriter in between.

autoCommit=false will definitely help, and there is normally no reason
not to use it.
Bigger batches (or a single batch) will also help indexing speed.  A
single IndexWriter session can now avoid copying stored fields on
segment merges.

-Yonik

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34861-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 09 18:56:07 2008
Return-Path: <java-user-return-34861-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8482 invoked from network); 9 Jul 2008 18:56:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Jul 2008 18:56:07 -0000
Received: (qmail 992 invoked by uid 500); 9 Jul 2008 18:56:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 948 invoked by uid 500); 9 Jul 2008 18:56:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 937 invoked by uid 99); 9 Jul 2008 18:56:01 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Jul 2008 11:56:01 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of peterlkeegan@gmail.com designates 74.125.44.29 as permitted sender)
Received: from [74.125.44.29] (HELO yx-out-2324.google.com) (74.125.44.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Jul 2008 18:55:09 +0000
Received: by yx-out-2324.google.com with SMTP id 3so751121yxj.5
        for <java-user@lucene.apache.org>; Wed, 09 Jul 2008 11:55:31 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type;
        bh=4sNubg7q/JfUcqEqEFc5Rp6NRr6LB20KVQhMeem2OBM=;
        b=B914Y46nKaTk1cuePmZHQCMgFLx7rvHBWYMwFMpiED75ui91fd9PMw9PibSxkoawPl
         dYM90hxs5yMgAyWKdBbno5r9DM4r80FkY12kMqvktRxjqQVuaFsQ79/StJ4+/kJhVVYN
         3Pp8Fz9iLwjkQHHzRMBVgEBnMFFNdD5UCchH0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=iTca6UjaGEdb7oRtjWVtmub6vbEb/laRBNQLItgoushA4JrX61OxqJ074OmqqK2KJz
         GcF2AyPN+2lnVnZQaG1zAjJLIWNaEGHx41HwmF5i2w6HmpGO1Fhy2R02Cxud3+xxtDFx
         vZG2FHjlrMKR6/SMf40TnziD8IwOwpUeGMDvE=
Received: by 10.142.105.13 with SMTP id d13mr2406663wfc.275.1215629730467;
        Wed, 09 Jul 2008 11:55:30 -0700 (PDT)
Received: by 10.142.231.3 with HTTP; Wed, 9 Jul 2008 11:55:30 -0700 (PDT)
Message-ID: <e994873a0807091155x565924ffo212457ec808e77e7@mail.gmail.com>
Date: Wed, 9 Jul 2008 14:55:30 -0400
From: "Peter Keegan" <peterlkeegan@gmail.com>
To: java-user@lucene.apache.org
Subject: Payloads and SpanScorer
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_2934_1959046.1215629730485"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_2934_1959046.1215629730485
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

If a SpanQuery is constructed from one or more BoostingTermQuery(s), the
payloads on the terms are never processed by the SpanScorer. It seems to me
that you would want the SpanScorer to score the document both on the spans
distance and the payload score. So, either the SpanScorer would have to
process the payloads (duplicating the code in BoostingSpanScorer), or
perhaps SpanScorer could access the BoostingSpanScorers, or maybe there's
another approach.

Any thoughts on how to accomplish this?

Peter

------=_Part_2934_1959046.1215629730485--

From java-user-return-34862-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 10 01:01:48 2008
Return-Path: <java-user-return-34862-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79158 invoked from network); 10 Jul 2008 01:01:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Jul 2008 01:01:48 -0000
Received: (qmail 80324 invoked by uid 500); 10 Jul 2008 01:01:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80283 invoked by uid 500); 10 Jul 2008 01:01:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80272 invoked by uid 99); 10 Jul 2008 01:01:41 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Jul 2008 18:01:41 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Jul 2008 01:00:49 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KGkX0-0000pQ-Tx
	for java-user@lucene.apache.org; Wed, 09 Jul 2008 18:01:10 -0700
Message-ID: <18373913.post@talk.nabble.com>
Date: Wed, 9 Jul 2008 18:01:10 -0700 (PDT)
From: blazingwolf7 <blazingwolf7@gmail.com>
To: java-user@lucene.apache.org
Subject: .fdt file
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: blazingwolf7@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hi, 

I had recently found out that Lucene will retrieve the content of a document
from a file ".fdt". I am trying to retrieve the entire file in one go
instead of retrieving it based on document number. can it be done?
-- 
View this message in context: http://www.nabble.com/.fdt-file-tp18373913p18373913.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34863-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 10 01:03:42 2008
Return-Path: <java-user-return-34863-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80162 invoked from network); 10 Jul 2008 01:03:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Jul 2008 01:03:42 -0000
Received: (qmail 82662 invoked by uid 500); 10 Jul 2008 01:03:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82636 invoked by uid 500); 10 Jul 2008 01:03:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82624 invoked by uid 99); 10 Jul 2008 01:03:36 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Jul 2008 18:03:36 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Jul 2008 01:02:44 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KGkYs-00015X-1h
	for java-user@lucene.apache.org; Wed, 09 Jul 2008 18:03:06 -0700
Message-ID: <18373925.post@talk.nabble.com>
Date: Wed, 9 Jul 2008 18:03:06 -0700 (PDT)
From: blazingwolf7 <blazingwolf7@gmail.com>
To: java-user@lucene.apache.org
Subject: .fdt file
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: blazingwolf7@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hi, 

I had recently found out that Lucene will retrieve the content of a document
from a file ".fdt". I am trying to retrieve the entire file in one go
instead of retrieving it based on document number. can it be done?
-- 
View this message in context: http://www.nabble.com/.fdt-file-tp18373925p18373925.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34864-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 10 01:07:48 2008
Return-Path: <java-user-return-34864-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82087 invoked from network); 10 Jul 2008 01:07:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Jul 2008 01:07:47 -0000
Received: (qmail 85663 invoked by uid 500); 10 Jul 2008 01:07:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85633 invoked by uid 500); 10 Jul 2008 01:07:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85622 invoked by uid 99); 10 Jul 2008 01:07:42 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Jul 2008 18:07:42 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of yseeley@gmail.com designates 74.125.46.29 as permitted sender)
Received: from [74.125.46.29] (HELO yw-out-2324.google.com) (74.125.46.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Jul 2008 01:06:50 +0000
Received: by yw-out-2324.google.com with SMTP id 3so1298436ywj.5
        for <java-user@lucene.apache.org>; Wed, 09 Jul 2008 18:06:57 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:sender
         :to:subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references
         :x-google-sender-auth;
        bh=JbpH0QHdStAqBPnDNsecvigVQ+gQ7W78HTNpo/DpFRg=;
        b=OKus303q/YwW6YFJ/0I4yh012TU/dtbckg/zoPw/GQvRZJvVLe/92zeVq9tE5rTFEs
         VG4V0B9gqQqiIZLOfy9/nbb6gEJmKjQPBtr4uU8Noxh0KVXMTbGkgaozcS04+wfjzHfS
         qclFb/DQy81e6NezF8NnBNwEq2lLuH6qfWwq0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:sender:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references:x-google-sender-auth;
        b=QjOtjcrGxhHNZ2QnzhSMoXI7PDJ5BIYEseEuT4s+1OHxevg3x8rGvDoyK4545Sp/nr
         gnxJak9nl1MTBnrTWcMUhQL427PU5TEn8NuQedevw4PfcRp7JyPkOpErcZh5RUghli11
         sDN5SZRWneIFvWeTezE9L0Ckk8CANXxhUPidU=
Received: by 10.151.6.16 with SMTP id j16mr13388378ybi.208.1215652017697;
        Wed, 09 Jul 2008 18:06:57 -0700 (PDT)
Received: by 10.150.227.18 with HTTP; Wed, 9 Jul 2008 18:06:57 -0700 (PDT)
Message-ID: <c68e39170807091806h3665660ey4f81c190c2488113@mail.gmail.com>
Date: Wed, 9 Jul 2008 21:06:57 -0400
From: "Yonik Seeley" <yonik@apache.org>
Sender: yseeley@gmail.com
To: java-user@lucene.apache.org
Subject: Re: .fdt file
In-Reply-To: <18373913.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <18373913.post@talk.nabble.com>
X-Google-Sender-Auth: 203b076b5601df65
X-Virus-Checked: Checked by ClamAV on apache.org

On Wed, Jul 9, 2008 at 9:01 PM, blazingwolf7 <blazingwolf7@gmail.com> wrote:
> I had recently found out that Lucene will retrieve the content of a document
> from a file ".fdt". I am trying to retrieve the entire file in one go
> instead of retrieving it based on document number. can it be done?

"cp" can retrieve the file on one go ;-)

Other than that, the format is documented here:
http://lucene.apache.org/java/docs/fileformats.html
But I'm not sure why retrieving by document number won't work for you.

-Yonik

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34865-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 10 03:14:37 2008
Return-Path: <java-user-return-34865-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51835 invoked from network); 10 Jul 2008 03:14:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Jul 2008 03:14:37 -0000
Received: (qmail 73704 invoked by uid 500); 10 Jul 2008 03:14:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73669 invoked by uid 500); 10 Jul 2008 03:14:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73658 invoked by uid 99); 10 Jul 2008 03:14:30 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Jul 2008 20:14:30 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Jul 2008 03:13:37 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KGmbX-0004qy-0l
	for java-user@lucene.apache.org; Wed, 09 Jul 2008 20:13:59 -0700
Message-ID: <18375077.post@talk.nabble.com>
Date: Wed, 9 Jul 2008 20:13:59 -0700 (PDT)
From: blazingwolf7 <blazingwolf7@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: .fdt file
In-Reply-To: <c68e39170807091806h3665660ey4f81c190c2488113@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: blazingwolf7@gmail.com
References: <18373913.post@talk.nabble.com> <c68e39170807091806h3665660ey4f81c190c2488113@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Sorry,but I am still quite new to Lucene. What exactly is "cp"?


Yonik Seeley wrote:
> 
> On Wed, Jul 9, 2008 at 9:01 PM, blazingwolf7 <blazingwolf7@gmail.com>
> wrote:
>> I had recently found out that Lucene will retrieve the content of a
>> document
>> from a file ".fdt". I am trying to retrieve the entire file in one go
>> instead of retrieving it based on document number. can it be done?
> 
> "cp" can retrieve the file on one go ;-)
> 
> Other than that, the format is documented here:
> http://lucene.apache.org/java/docs/fileformats.html
> But I'm not sure why retrieving by document number won't work for you.
> 
> -Yonik
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/.fdt-file-tp18373913p18375077.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34866-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 10 05:05:47 2008
Return-Path: <java-user-return-34866-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75022 invoked from network); 10 Jul 2008 05:05:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Jul 2008 05:05:47 -0000
Received: (qmail 51020 invoked by uid 500); 10 Jul 2008 05:05:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50990 invoked by uid 500); 10 Jul 2008 05:05:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50979 invoked by uid 99); 10 Jul 2008 05:05:42 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Jul 2008 22:05:42 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of yseeley@gmail.com designates 74.125.46.31 as permitted sender)
Received: from [74.125.46.31] (HELO yw-out-2324.google.com) (74.125.46.31)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Jul 2008 05:04:48 +0000
Received: by yw-out-2324.google.com with SMTP id 3so1331541ywj.5
        for <java-user@lucene.apache.org>; Wed, 09 Jul 2008 22:05:06 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:sender
         :to:subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references
         :x-google-sender-auth;
        bh=oyj+LlsSY9Y30f5uVIu5vWKTro8XWtd2E0WPriTuC+g=;
        b=CurPVwH9IkKx1WoVHeqzY8bOTLeycdUOqiGkMHTr/dPFya953fzICM910tx1mx9aqz
         DmQB8gAe4aVoNn1/hS4zqLs23WE2qzgKKM0mM+IdMUd7tBN0hmOnv4QYGIBbzPsljHDi
         xgYpHCvPqz43bv8TcESt/hdhKfIOXeGtc+8qY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:sender:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references:x-google-sender-auth;
        b=ZUloEnhRx0LGj4oYMWsZZdSssz4fSa+NS1w5kSPkVFkFWIK5wXa9iZw27d1zxm48pW
         9l7T40RTTtxVNm0aJvTh+m5Ey/8CCkOVgZzlnn5dTpRElzo8Uta2rTTLHTBoPyBOQfAv
         FQ+Hl7uva/In5Wvh6GUogA8FOKeTUy2cSv/rE=
Received: by 10.151.49.8 with SMTP id b8mr13796890ybk.82.1215666305951;
        Wed, 09 Jul 2008 22:05:05 -0700 (PDT)
Received: by 10.150.227.18 with HTTP; Wed, 9 Jul 2008 22:05:05 -0700 (PDT)
Message-ID: <c68e39170807092205mb2c1fdckfba1bdc877e343ef@mail.gmail.com>
Date: Thu, 10 Jul 2008 01:05:05 -0400
From: "Yonik Seeley" <yonik@apache.org>
Sender: yseeley@gmail.com
To: java-user@lucene.apache.org
Subject: Re: .fdt file
In-Reply-To: <18375077.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <18373913.post@talk.nabble.com>
	 <c68e39170807091806h3665660ey4f81c190c2488113@mail.gmail.com>
	 <18375077.post@talk.nabble.com>
X-Google-Sender-Auth: 8aa2cba06de0383f
X-Virus-Checked: Checked by ClamAV on apache.org

On Wed, Jul 9, 2008 at 11:13 PM, blazingwolf7 <blazingwolf7@gmail.com> wrote:
> Sorry,but I am still quite new to Lucene. What exactly is "cp"?

The unix command for copy (hence the smiley).

Some of your recent questions seem to be suffering from an XY problem:
http://www.perlmonks.org/index.pl?node_id=542341
You may get more help by explaining what you are trying to do.

-Yonik

> Yonik Seeley wrote:
>>
>> On Wed, Jul 9, 2008 at 9:01 PM, blazingwolf7 <blazingwolf7@gmail.com>
>> wrote:
>>> I had recently found out that Lucene will retrieve the content of a
>>> document
>>> from a file ".fdt". I am trying to retrieve the entire file in one go
>>> instead of retrieving it based on document number. can it be done?
>>
>> "cp" can retrieve the file on one go ;-)
>>
>> Other than that, the format is documented here:
>> http://lucene.apache.org/java/docs/fileformats.html
>> But I'm not sure why retrieving by document number won't work for you.
>>
>> -Yonik

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34867-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 10 05:15:56 2008
Return-Path: <java-user-return-34867-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76399 invoked from network); 10 Jul 2008 05:15:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Jul 2008 05:15:55 -0000
Received: (qmail 55490 invoked by uid 500); 10 Jul 2008 05:15:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55454 invoked by uid 500); 10 Jul 2008 05:15:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55443 invoked by uid 99); 10 Jul 2008 05:15:49 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Jul 2008 22:15:49 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Jul 2008 05:14:58 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id 1F14E71C410; Wed,  9 Jul 2008 22:14:50 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id 1BEBB71C343
	for <java-user@lucene.apache.org>; Wed,  9 Jul 2008 22:14:50 -0700 (PDT)
Date: Wed, 9 Jul 2008 22:14:50 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Sorting case-insensitively
In-Reply-To: <868CA8F2-4F97-4CC1-98DB-C34E4A88A2F8@lucasmail.org>
Message-ID: <Pine.LNX.4.62.0807092210550.27581@radix.cryptio.net>
References: <EB8A44A6-A9FF-4C0E-ACA8-9E0E21C5AD6F@lucasmail.org>
 <E91CC8FF-2D02-42C2-8CEA-6D5B61E4C253@ehatchersolutions.com>
 <3F71F1AB-3905-4097-8C86-E66916BDF521@lucasmail.org>
 <868CA8F2-4F97-4CC1-98DB-C34E4A88A2F8@lucasmail.org>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: But when my code runs, I get a NullPointerException in Lucene's
: SortComparator,
: line 54 which reads:
: 
: 	return cachedValues[i.doc].compareTo (cachedValues[j.doc]);
: 
: because cachedCalues[i.doc] is null.  But why is it null?

I'm going to guess you have a doc where that field doesn't have a value.  
ordinarily that's fine, but maybe SortComparator doesn't handle 
that case very well.  what's the full stack trace look like?





-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34868-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 10 05:30:53 2008
Return-Path: <java-user-return-34868-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81551 invoked from network); 10 Jul 2008 05:30:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Jul 2008 05:30:51 -0000
Received: (qmail 67311 invoked by uid 500); 10 Jul 2008 05:30:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67275 invoked by uid 500); 10 Jul 2008 05:30:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67264 invoked by uid 99); 10 Jul 2008 05:30:46 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Jul 2008 22:30:46 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=SPF_NEUTRAL,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: 194.109.24.26 is neither permitted nor denied by domain of karl.wettin@gmail.com)
Received: from [194.109.24.26] (HELO smtp-vbr6.xs4all.nl) (194.109.24.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Jul 2008 05:29:51 +0000
Received: from kodapan.lan (memnon.xs4all.nl [82.93.70.124])
	by smtp-vbr6.xs4all.nl (8.13.8/8.13.8) with ESMTP id m6A5UCnE071698
	for <java-user@lucene.apache.org>; Thu, 10 Jul 2008 07:30:12 +0200 (CEST)
	(envelope-from karl.wettin@gmail.com)
Message-Id: <F46369DC-2E26-4CB8-BBAB-5B96AE9BF008@gmail.com>
From: Karl Wettin <karl.wettin@gmail.com>
To: java-user@lucene.apache.org
In-Reply-To: <18362075.post@talk.nabble.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v924)
Subject: Re: Searching for instances within a document
Date: Thu, 10 Jul 2008 07:30:12 +0200
References: <18362075.post@talk.nabble.com>
X-Mailer: Apple Mail (2.924)
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org

Maybe you are looking for the document TermFreqVector?


        karl

9 jul 2008 kl. 15.49 skrev jnance:

>
> Hi,
>
> I am indexing lots of text files and need to see how many times a  
> certain
> word comes up in each text file. Right now I have this constructor for
> "search":
>
> static void search(Searcher searcher, String queryString) throws
> ParseException, IOException {
> 		 QueryParser parser = new QueryParser("content", new  
> StandardAnalyzer());
> 		 Query query = parser.parse(queryString);
> 		 Hits hits = searcher.search(query);
> 		
> 		 int hitCount = hits.length();
> 		 if (hitCount == 0) {
> 			 System.out.println("0 documents contain the word \"" +  
> queryString +
> ".\"");
> 		 }
> 		 else {
> 			 System.out.println(hitCount + " documents contain the word \"" +
> queryString + ".\"");
> 		 }
> 	 }
>
> This tells me how many documents contain the word I'm looking for...  
> but how
> do I get it to tell me how many times the word occurs within that  
> document?
>
> Thanks,
>
> James
> -- 
> View this message in context: http://www.nabble.com/Searching-for-instances-within-a-document-tp18362075p18362075.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34869-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 10 05:42:50 2008
Return-Path: <java-user-return-34869-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 83033 invoked from network); 10 Jul 2008 05:42:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Jul 2008 05:42:50 -0000
Received: (qmail 73464 invoked by uid 500); 10 Jul 2008 05:42:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73433 invoked by uid 500); 10 Jul 2008 05:42:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73422 invoked by uid 99); 10 Jul 2008 05:42:45 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 09 Jul 2008 22:42:45 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Jul 2008 05:41:50 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KGoux-0000cF-Pv
	for java-user@lucene.apache.org; Wed, 09 Jul 2008 22:42:11 -0700
Message-ID: <18376301.post@talk.nabble.com>
Date: Wed, 9 Jul 2008 22:42:11 -0700 (PDT)
From: blazingwolf7 <blazingwolf7@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: .fdt file
In-Reply-To: <c68e39170807092205mb2c1fdckfba1bdc877e343ef@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: blazingwolf7@gmail.com
References: <18373913.post@talk.nabble.com> <c68e39170807091806h3665660ey4f81c190c2488113@mail.gmail.com> <18375077.post@talk.nabble.com> <c68e39170807092205mb2c1fdckfba1bdc877e343ef@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Well, I am trying to extract the URL and contentLength from the ".fdt" file.
I am planning to use both of these values in a filter to remove certain
links to be display in the search result. The problem is, I am told not to
use the IndexReader to retrieve these values for each document found
matching with the query.

So now, instead, I will have to retrieve the entire .fdt file, extract both
the values and store it into an arraylist which will be use later.  I am
having problem extracting the entire file without using all the seek()
method to determine the position of the document.

Any suggestion?


Yonik Seeley wrote:
> 
> On Wed, Jul 9, 2008 at 11:13 PM, blazingwolf7 <blazingwolf7@gmail.com>
> wrote:
>> Sorry,but I am still quite new to Lucene. What exactly is "cp"?
> 
> The unix command for copy (hence the smiley).
> 
> Some of your recent questions seem to be suffering from an XY problem:
> http://www.perlmonks.org/index.pl?node_id=542341
> You may get more help by explaining what you are trying to do.
> 
> -Yonik
> 
>> Yonik Seeley wrote:
>>>
>>> On Wed, Jul 9, 2008 at 9:01 PM, blazingwolf7 <blazingwolf7@gmail.com>
>>> wrote:
>>>> I had recently found out that Lucene will retrieve the content of a
>>>> document
>>>> from a file ".fdt". I am trying to retrieve the entire file in one go
>>>> instead of retrieving it based on document number. can it be done?
>>>
>>> "cp" can retrieve the file on one go ;-)
>>>
>>> Other than that, the format is documented here:
>>> http://lucene.apache.org/java/docs/fileformats.html
>>> But I'm not sure why retrieving by document number won't work for you.
>>>
>>> -Yonik
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/.fdt-file-tp18373913p18376301.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34870-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 10 07:44:23 2008
Return-Path: <java-user-return-34870-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 16904 invoked from network); 10 Jul 2008 07:44:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Jul 2008 07:44:23 -0000
Received: (qmail 51046 invoked by uid 500); 10 Jul 2008 07:44:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 51016 invoked by uid 500); 10 Jul 2008 07:44:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 51005 invoked by uid 99); 10 Jul 2008 07:44:17 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Jul 2008 00:44:17 -0700
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lakhani.ajay@googlemail.com designates 64.233.184.239 as permitted sender)
Received: from [64.233.184.239] (HELO wr-out-0506.google.com) (64.233.184.239)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Jul 2008 07:43:22 +0000
Received: by wr-out-0506.google.com with SMTP id c30so3168432wra.21
        for <java-user@lucene.apache.org>; Thu, 10 Jul 2008 00:43:44 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=googlemail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=SApvGs99pH2PEYJbGRs51Ism06ftNstEZPbU1zzjcnk=;
        b=EGAZGE/4+ZOvE8tLXXWhvzdP1SmGhTbBVPMrxTugj+2AyhzNepLQAtnyEH6+sgbaxK
         SVvf240hRO9gDINPboYpgzIsrturMFnnxRqfTpZJpLwjSb2i2MBgON0dTxtIaoxx+OTZ
         DXABHFsHOUtOXBsQYpgC0C2CaDaT5Tmi2Ydt0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=googlemail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=vHDUnsPucqGBDBNlZz8qwD2EhVF1p2oR1h9w6RH6CaFL14K7I83ZiW0ba5g2gJ6o0/
         LDerPYqxx3EB9zDD/tLIP5IQ8ya3LPSArALWzO39tyGjdttDbSQcXt2qulDlz6YLK3Mj
         pBhGtf9GNb336mwH5Wx2NdxFzDbf7fVOKOnQ8=
Received: by 10.90.54.17 with SMTP id c17mr1613864aga.113.1215675823375;
        Thu, 10 Jul 2008 00:43:43 -0700 (PDT)
Received: by 10.90.74.3 with HTTP; Thu, 10 Jul 2008 00:43:43 -0700 (PDT)
Message-ID: <43f44d1e0807100043s35587c6ema731f7cd32d2e20c@mail.gmail.com>
Date: Thu, 10 Jul 2008 13:13:43 +0530
From: "Ajay Lakhani" <lakhani.ajay@googlemail.com>
To: java-user@lucene.apache.org
Subject: Re: Searching for instances within a document
In-Reply-To: <F46369DC-2E26-4CB8-BBAB-5B96AE9BF008@gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_14456_29620561.1215675823377"
References: <18362075.post@talk.nabble.com>
	 <F46369DC-2E26-4CB8-BBAB-5B96AE9BF008@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_14456_29620561.1215675823377
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi James,

Try this:

    Searcher searcher = new IndexSearcher(dir);
    QueryParser parser = new QueryParser("content", new StandardAnalyzer());
    Query query = parser.parse(queryString);

    HashSet queryTerms = new HashSet();
    query.extractTerms(queryTerms);

    Hits hits = searcher.search(query);

    IndexReader reader = IndexReader.open(dir);

    for (int i =0; i < hits.length() ; i ++){
      Document d = hits.doc(i);
      Field fid = d.getField("id");
      Field ftitle = d.getField("title");
      System.out.println("id is " + fid.stringValue());
      System.out.println("title is " + ftitle.stringValue());

      TermFreqVector tfv = reader.getTermFreqVector(hits.id(i), "content");
      String[] terms = tfv.getTerms();
      int [] freqs = tfv.getTermFrequencies();//get the frequencies

      // for each term in the query
      for (Iterator iter = queryTerms.iterator(); iter.hasNext();) {
        Term term = (Term) iter.next();

        // for each term in the vector
        for (int j = 0; j < terms.length; j++) {
          if (terms[j].equals(term.text())) {
            System.out.println("frequency of term ["+ term.text() +"] is " +
freqs[j] );
          }
        }
      }
    }

Let me know if this helps.
Cheers
AJ

2008/7/10 Karl Wettin <karl.wettin@gmail.com>:

> Maybe you are looking for the document TermFreqVector?
>
>
>       karl
>
> 9 jul 2008 kl. 15.49 skrev jnance:
>
>
>> Hi,
>>
>> I am indexing lots of text files and need to see how many times a certain
>> word comes up in each text file. Right now I have this constructor for
>> "search":
>>
>> static void search(Searcher searcher, String queryString) throws
>> ParseException, IOException {
>>                 QueryParser parser = new QueryParser("content", new
>> StandardAnalyzer());
>>                 Query query = parser.parse(queryString);
>>                 Hits hits = searcher.search(query);
>>
>>                 int hitCount = hits.length();
>>                 if (hitCount == 0) {
>>                         System.out.println("0 documents contain the word
>> \"" + queryString +
>> ".\"");
>>                 }
>>                 else {
>>                         System.out.println(hitCount + " documents contain
>> the word \"" +
>> queryString + ".\"");
>>                 }
>>         }
>>
>> This tells me how many documents contain the word I'm looking for... but
>> how
>> do I get it to tell me how many times the word occurs within that
>> document?
>>
>> Thanks,
>>
>> James
>> --
>> View this message in context:
>> http://www.nabble.com/Searching-for-instances-within-a-document-tp18362075p18362075.html
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_14456_29620561.1215675823377--

From java-user-return-34871-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 10 09:21:54 2008
Return-Path: <java-user-return-34871-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 43205 invoked from network); 10 Jul 2008 09:21:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Jul 2008 09:21:54 -0000
Received: (qmail 43243 invoked by uid 500); 10 Jul 2008 09:21:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43215 invoked by uid 500); 10 Jul 2008 09:21:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43203 invoked by uid 99); 10 Jul 2008 09:21:48 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Jul 2008 02:21:48 -0700
X-ASF-Spam-Status: No, hits=1.8 required=10.0
	tests=MIME_QP_LONG_LINE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [63.247.81.221] (HELO maximus.getnetvps.net) (63.247.81.221)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Jul 2008 09:20:54 +0000
Received: (qmail 16111 invoked by uid 48); 10 Jul 2008 11:20:15 +0200
Received: from isa2.syzefxis-hosting.gr (isa2.syzefxis-hosting.gr
	[84.205.231.39]) by webmail.tera.gr (Horde MIME library) with HTTP; Thu, 10
	Jul 2008 11:20:15 +0200
Message-ID: <20080710112015.aa5s7dhwgkg48gos@webmail.tera.gr>
Date: Thu, 10 Jul 2008 11:20:15 +0200
From: jim@tera.gr
To: java-user@lucene.apache.org
Subject: Highlighting terms with different style
MIME-Version: 1.0
Content-Type: text/plain;
	charset=ISO-8859-1;
	DelSp="Yes";
	format="flowed"
Content-Disposition: inline
Content-Transfer-Encoding: quoted-printable
User-Agent: Internet Messaging Program (IMP) H3 (4.1.6)
X-Virus-Checked: Checked by ClamAV on apache.org

Hi

Is it possible to Hightlight more than one terms with highlighter but =20
with different style for each term ??

1st term with SimpleHTMLFormatter("<span class=3D\"highlight1\">", "</span>"=
);
2rd term with SimpleHTMLFormatter("<span class=3D\"highlight2\">", "</span>"=
);
......
n-th term  with SimpleHTMLFormatter("<span class=3D\"highlightn\">", "</span=
>");

or  for foloween code

  SimpleHTMLFormatter formatter =3D
                     new SimpleHTMLFormatter("<span =20
class=3D\"highlight\">",  "</span>");
             Highlighter highlighter =3D new Highlighter(formatter, scorer);

to use something like this:

SimpleHTMLFormatter [] formatters =3D {new SimpleHTMLFormatter("<span =20
class=3D\"highlight1\">", "</span>"),
                                                               new =20
SimpleHTMLFormatter("<span class=3D\"highlight\">","</span>"),
                                                              ..............=
..
                                                              new =20
SimpleHTMLFormatter("<span class=3D\"highlight\">", "</span>") }

Highlighter highlighter =3D new Highlighter(formatters, scorer);

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34872-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 10 11:09:37 2008
Return-Path: <java-user-return-34872-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77529 invoked from network); 10 Jul 2008 11:09:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Jul 2008 11:09:37 -0000
Received: (qmail 80261 invoked by uid 500); 10 Jul 2008 11:09:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80209 invoked by uid 500); 10 Jul 2008 11:09:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80198 invoked by uid 99); 10 Jul 2008 11:09:29 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Jul 2008 04:09:29 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [82.111.253.243] (HELO mail.uk.scalix.com) (82.111.253.243)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Jul 2008 11:08:32 +0000
Received: from mail.uk.scalix.com (localhost.localdomain [127.0.0.1])
	by mail.uk.scalix.com (8.13.8/8.13.8) with ESMTP id m6AB7qZi025481
	for <java-user@lucene.apache.org>; Thu, 10 Jul 2008 12:07:52 +0100
Received: from [10.11.108.233] (mail.uk.scalix.com [10.11.108.216])
    by mail.uk.scalix.com (Scalix SMTP Relay 11.4.1.11843)
    via ESMTP; Thu, 10 Jul 2008 12:07:52 +0100 (BST)
Date: Thu, 10 Jul 2008 12:07:52 +0100
From: Chris Bamford <chris.bamford@scalix.com>
To: java-user@lucene.apache.org
Message-ID: <4875ED88.9060402@scalix.com>
In-Reply-To: <BEDB94B7C89C4F0B93F52ACE3B82A1F1@desktop>
References: <18295066.post@talk.nabble.com>
References: <BEDB94B7C89C4F0B93F52ACE3B82A1F1@desktop>
Subject: Re: newbie question
x-scalix-Hops: 1
User-Agent: Thunderbird 2.0.0.14 (X11/20080505)
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII";
	format="flowed"
Content-Disposition: inline
X-Spam-Checker-Version: SpamAssassin 3.2.5 (2008-06-10) on mail.uk.scalix.com
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.2 required=5.0 tests=AWL,BAYES_00 autolearn=ham
	version=3.2.5

Hi John,

Just continuing from an earlier question where I asked you how to handle 
strings like "from:fred flintston*" (sorry I have lost the original email).
You advised me to write my own BooleanQuery and add to it Prefix- / 
Term- / Phrase- Querys as appropriate.  I have done so, but am having 
trouble with the result - my PhraseQueries just do not get any hits at 
all  :-(
My code looks for quotes - if it finds them, it treats the quoted phrase 
as a PhraseQuery and sets the slop factor to 0.
so,  an input of:

    subject:"Good Morning"

results in a PhraseQuery (which I add to my BooleanQuery and then dump 
with toString()) of:

    +subject:"good morning"

... which fails.
However, if I break it into 2 TermQuerys, it works (but that's not what 
I want).

What am I missing?

Thanks,

- Chris

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34873-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 10 11:36:19 2008
Return-Path: <java-user-return-34873-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85030 invoked from network); 10 Jul 2008 11:36:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Jul 2008 11:36:18 -0000
Received: (qmail 5299 invoked by uid 500); 10 Jul 2008 11:36:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5263 invoked by uid 500); 10 Jul 2008 11:36:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5252 invoked by uid 99); 10 Jul 2008 11:36:13 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Jul 2008 04:36:13 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of aditigupta20@gmail.com designates 209.85.142.188 as permitted sender)
Received: from [209.85.142.188] (HELO ti-out-0910.google.com) (209.85.142.188)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Jul 2008 11:35:21 +0000
Received: by ti-out-0910.google.com with SMTP id b8so1509102tic.11
        for <java-user@lucene.apache.org>; Thu, 10 Jul 2008 04:35:42 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type;
        bh=KiFEXQjsh5hkiQnXLFsCt5xxx8LIRYLHouvhTJYsvFc=;
        b=sQKcWy0IRd4NNVHpnsL20JxTmuThG+CGz20b6OHVKh3b3BIpTqDMQ0svmSXuUdrd1P
         6DJbXcjnuvW0mcarMjnU6tHz9fNY3JT49CTp1rQr+i4RF2D3BlMXdwiUxBzKS4rvkPs7
         HxASisbmAm2OKJpte6vxYemnoqdCYfL6Q+7Y4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=SHkY+a6urDVK4x1PvteFGqa7rkxp1Aq4pOvnOPuu9Kx50cSKicAG/A4b8eMoSyyv3A
         PqH9eHqeczHOcUKOADXoYHB+P4o5qjpNkzGl8lhFTJNwUWMxNgDX/WcuiyQ3rr9awoTP
         sx6EnbMtQnFcSNxisl0diA5POabb6lydST+bM=
Received: by 10.110.47.17 with SMTP id u17mr5332792tiu.46.1215689742573;
        Thu, 10 Jul 2008 04:35:42 -0700 (PDT)
Received: by 10.110.39.2 with HTTP; Thu, 10 Jul 2008 04:35:42 -0700 (PDT)
Message-ID: <6fc71b230807100435i66b8b8d9y72e557530a891581@mail.gmail.com>
Date: Thu, 10 Jul 2008 17:05:42 +0530
From: "Aditi Goyal" <aditigupta20@gmail.com>
To: java-user@lucene.apache.org
Subject: Can we update a field on the current index
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_6095_13737723.1215689742602"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_6095_13737723.1215689742602
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi,

I want to modify a field on the current index. Can it be done?
For what I have heard that we cannot update the index . It has to be
reindexed by deleting and then indexing again.


Thanks,
Aditi

------=_Part_6095_13737723.1215689742602--

From java-user-return-34874-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 10 11:58:28 2008
Return-Path: <java-user-return-34874-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90806 invoked from network); 10 Jul 2008 11:58:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Jul 2008 11:58:27 -0000
Received: (qmail 29218 invoked by uid 500); 10 Jul 2008 11:58:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29186 invoked by uid 500); 10 Jul 2008 11:58:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29174 invoked by uid 99); 10 Jul 2008 11:58:20 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Jul 2008 04:58:20 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [82.111.253.243] (HELO mail.uk.scalix.com) (82.111.253.243)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Jul 2008 11:57:26 +0000
Received: from mail.uk.scalix.com (localhost.localdomain [127.0.0.1])
	by mail.uk.scalix.com (8.13.8/8.13.8) with ESMTP id m6ABvjKN024323
	for <java-user@lucene.apache.org>; Thu, 10 Jul 2008 12:57:45 +0100
Received: from [10.11.108.233] (mail.uk.scalix.com [10.11.108.216])
    by mail.uk.scalix.com (Scalix SMTP Relay 11.4.1.11843)
    via ESMTP; Thu, 10 Jul 2008 12:57:45 +0100 (BST)
Date: Thu, 10 Jul 2008 12:57:45 +0100
From: Chris Bamford <chris.bamford@scalix.com>
To: java-user@lucene.apache.org
Message-ID: <4875F939.20507@scalix.com>
In-Reply-To: <4875ED88.9060402@scalix.com>
References: <18295066.post@talk.nabble.com>
References: <4875ED88.9060402@scalix.com>
Subject: Re: newbie question (for John Griffin)
x-scalix-Hops: 1
User-Agent: Thunderbird 2.0.0.14 (X11/20080505)
MIME-Version: 1.0
Content-Type: multipart/mixed;
	boundary="------------020700020900060108010908"
X-Spam-Checker-Version: SpamAssassin 3.2.5 (2008-06-10) on mail.uk.scalix.com
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.2 required=5.0 tests=AWL,BAYES_00 autolearn=ham
	version=3.2.5

--------------020700020900060108010908
Content-Type: text/plain;
	charset="US-ASCII";
	format="flowed"
Content-Disposition: inline

Hi John,

Further to my question below, I did some back-to-basics investigation of 
PhraseQueries and found that even basic ones fail for me...
I found the attached code on the Internet (see 
http://affy.blogspot.com/2003/04/codebit-examples-for-all-of-lucenes.html) 
and this fails too...  Can you explain why?  I would expect the first 
test to deliver 2 hits.

I have tried with Lucene 2.0 and 2.3.2 jars and both fail.

Thanks again,

- Chris



Chris Bamford wrote:
> Hi John,
>
> Just continuing from an earlier question where I asked you how to 
> handle strings like "from:fred flintston*" (sorry I have lost the 
> original email).
> You advised me to write my own BooleanQuery and add to it Prefix- / 
> Term- / Phrase- Querys as appropriate.  I have done so, but am having 
> trouble with the result - my PhraseQueries just do not get any hits at 
> all  :-(
> My code looks for quotes - if it finds them, it treats the quoted 
> phrase as a PhraseQuery and sets the slop factor to 0.
> so,  an input of:
>
>    subject:"Good Morning"
>
> results in a PhraseQuery (which I add to my BooleanQuery and then dump 
> with toString()) of:
>
>    +subject:"good morning"
>
> ... which fails.
> However, if I break it into 2 TermQuerys, it works (but that's not 
> what I want).
>
> What am I missing?
>
> Thanks,
>
> - Chris
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


-- 
------------------------------------------------------------------------
*Chris Bamford*
Senior Development Engineer 	<http://www.scalix.com>
------------------------------------------------------------------------
/Email / MSN/ 	chris.bamford@scalix.com
/Tel/ 	+44 (0)1344 381814 	  	/Skype/ 	c.bamford


--------------020700020900060108010908
Content-Type: text/x-java;
	name="TestRunQueries.java"
Content-Transfer-Encoding: base64
Content-Disposition: inline;
	filename="TestRunQueries.java"

LyoKICogVG8gY2hhbmdlIHRoaXMgdGVtcGxhdGUsIGNob29zZSBUb29scyB8IFRlbXBsYXRl
cwogKiBhbmQgb3BlbiB0aGUgdGVtcGxhdGUgaW4gdGhlIGVkaXRvci4KICovCgpwYWNrYWdl
IEV4cGVyaW1lbnRhbDsKCgppbXBvcnQgamF2YS5pby5JT0V4Y2VwdGlvbjsKaW1wb3J0IGph
dmEudXRpbC5MaW5rZWRMaXN0OwoKaW1wb3J0IGp1bml0LmZyYW1ld29yay5UZXN0Q2FzZTsK
aW1wb3J0IG9yZy5hcGFjaGUubHVjZW5lLmFuYWx5c2lzLnN0YW5kYXJkLio7CmltcG9ydCBv
cmcuYXBhY2hlLmx1Y2VuZS5kb2N1bWVudC4qOwppbXBvcnQgb3JnLmFwYWNoZS5sdWNlbmUu
aW5kZXguKjsKaW1wb3J0IG9yZy5hcGFjaGUubHVjZW5lLnNlYXJjaC4qOwppbXBvcnQgb3Jn
LmFwYWNoZS5sdWNlbmUuc3RvcmUuKjsKCgpwdWJsaWMgY2xhc3MgVGVzdFJ1blF1ZXJpZXMg
ZXh0ZW5kcyBUZXN0Q2FzZSB7CiAgICAKICAgIHB1YmxpYyB2b2lkIHRlc3RRdWVyaWVzKCkg
dGhyb3dzIEV4Y2VwdGlvbiB7CgoJCVJBTURpcmVjdG9yeSBpbmRleFN0b3JlID0gbmV3IFJB
TURpcmVjdG9yeSgpOwoJCVF1ZXJ5IHF1ZXJ5ID0gbnVsbDsKCgkJU3RyaW5nIGRvY3NbXSA9
IHsKCQkJImFhYSBiYmIgY2NjIiwKCQkJImFhYSBkZGQgZWVlIiwKCQkJImFhYSBkZGQgZmZm
IiwKCQkJImFhYSBkZWUgZmZmIiwKCQkJIkFBQSBmZmYgZ2dnIiwKCQkJImdnZyBoaGggaWlp
IiwKCQkJIjEyMyAxMjMgMXoyIiwJLy8gZG9jdW1lbnQgY29udGFpbmluZyB6IGZvciAKCQkJ
CQkvLyBXaWxkY2FyZFF1ZXJ5IGV4YW1wbGUuCgkJCSI5OTkgMTIzIDEyMyIsCS8vIGRvY3Vt
ZW50IGZvciBmdXp6eSBzZWFyY2guCgkJCSI5eDkgMTIzIDEyMyIsCS8vIGRvY3VtZW50IGZv
ciBmdXp6eSBzZWFyY2guCgkJCSI5OSAxMjMgMTIzIiwJLy8gZG9jdW1lbnQgZm9yIGZ1enp5
IHNlYXJjaC4KCQkJInh4eCB5eXkgenp6IgoJCX07CgkJCgkJSW5kZXhXcml0ZXIgd3JpdGVy
ID0gbmV3IEluZGV4V3JpdGVyKGluZGV4U3RvcmUsIAoJCQluZXcgU3RhbmRhcmRBbmFseXpl
cigpLCB0cnVlKTsKCQlmb3IgKGludCBqID0gMDsgaiA8IGRvY3MubGVuZ3RoOyBqKyspIHsK
CQkJRG9jdW1lbnQgZCA9IG5ldyBEb2N1bWVudCgpOwoJCQlkLmFkZChuZXcgRmllbGQoImJv
ZHkiLCBkb2NzW2pdLCBGaWVsZC5TdG9yZS5ZRVMsIEZpZWxkLkluZGV4LlVOX1RPS0VOSVpF
RCkpOwoJCQl3cml0ZXIuYWRkRG9jdW1lbnQoZCk7CgkJfQoJCXdyaXRlci5jbG9zZSgpOwoK
CQlJbmRleFJlYWRlciBpbmRleFJlYWRlciA9IEluZGV4UmVhZGVyLm9wZW4oaW5kZXhTdG9y
ZSk7CgoJCVN5c3RlbS5vdXQucHJpbnRsbigiXG4qKioqKiogUGhyYXNlUXVlcnkgRXhhbXBs
ZSAqKioqKioiKTsKCQlTeXN0ZW0ub3V0LnByaW50bG4oIk5PVEU6IDIgZG9jdW1lbnRzIGFy
ZSBmb3VuZCAiIAoJCQkrICJ3aXRoICdhYWEgZGRkJyBpbiBvcmRlci4iKTsKCQlTeXN0ZW0u
b3V0LnByaW50bG4oIi0tLS0tLS0tLS0tLS0tIiAKCQkJKyAiLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tIik7CgkJUGhyYXNlUXVlcnkgcHEgPSBuZXcgIFBocmFzZVF1ZXJ5KCk7CQkKCQlw
cS5hZGQobmV3IFRlcm0oImJvZHkiLCAiYWFhIikpOwoJCXBxLmFkZChuZXcgVGVybSgiYm9k
eSIsICJkZGQiKSk7CgkJVGVzdFJ1blF1ZXJpZXMucnVuUXVlcnlBbmREaXNwbGF5UmVzdWx0
cyhpbmRleFN0b3JlLCBwcSk7CiAgICAgICAgICAgICAgICAKCQlTeXN0ZW0ub3V0LnByaW50
bG4oIiIpOwoJCVN5c3RlbS5vdXQucHJpbnRsbigiTk9URTogWkVSTyBkb2N1bWVudHMgYXJl
IiAKCQkJKyAiIGZvdW5kIHdpdGggJ3h4eCBkZGQnIGluIG9yZGVyLiIpOwoJCVN5c3RlbS5v
dXQucHJpbnRsbigiLS0tLS0tLS0tLS0iIAoJCQkrICItLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0iKTsKCQlwcSA9IG5ldyAgUGhyYXNlUXVlcnkoKTsJCQoJCXBxLmFkZChuZXcgVGVy
bSgiYm9keSIsICJ4eHgiKSk7CgkJcHEuYWRkKG5ldyBUZXJtKCJib2R5IiwgImRkZCIpKTsK
CQlUZXN0UnVuUXVlcmllcy5ydW5RdWVyeUFuZERpc3BsYXlSZXN1bHRzKGluZGV4U3RvcmUs
IHBxKTsKCX0KCglwdWJsaWMgc3RhdGljIHZvaWQgcnVuUXVlcnlBbmREaXNwbGF5UmVzdWx0
cyhEaXJlY3RvcnkgaW5kZXhTdG9yZSwgUXVlcnkgcSkgdGhyb3dzIElPRXhjZXB0aW9uIHsK
CQlJbmRleFNlYXJjaGVyIHNlYXJjaGVyID0gbmV3IEluZGV4U2VhcmNoZXIoaW5kZXhTdG9y
ZSk7CiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRs
bigicnVuUXVlcnlBbmREaXNwbGF5UmVzdWx0czogcXVlcnkgPSAiICsgcS50b1N0cmluZygp
KTsKCQlIaXRzIGhpdHMgPSBzZWFyY2hlci5zZWFyY2gocSk7CgkJaW50IF9sZW5ndGggPSBo
aXRzLmxlbmd0aCgpOwoJCVN5c3RlbS5vdXQucHJpbnRsbigiSElUUzogIiArIF9sZW5ndGgp
OwoJCWZvciAoaW50IGkgPSAwOyBpIDwgX2xlbmd0aDsgaSsrKSB7CgkJCURvY3VtZW50IGRv
YyA9IGhpdHMuZG9jKGkpOwoJCQlGaWVsZCBmaWVsZCA9IGRvYy5nZXRGaWVsZCgiYm9keSIp
OwoJCQlTeXN0ZW0ub3V0LnByaW50bG4oIiAgdmFsdWU6ICIgKyBmaWVsZC5zdHJpbmdWYWx1
ZSgpKTsKCQl9CgkJc2VhcmNoZXIuY2xvc2UoKTsKCX0KfQ==


--------------020700020900060108010908
Content-Type: text/plain; charset=us-ascii

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org
--------------020700020900060108010908--

From java-user-return-34875-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 10 12:07:13 2008
Return-Path: <java-user-return-34875-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93113 invoked from network); 10 Jul 2008 12:07:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Jul 2008 12:07:13 -0000
Received: (qmail 39211 invoked by uid 500); 10 Jul 2008 12:07:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39174 invoked by uid 500); 10 Jul 2008 12:07:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39163 invoked by uid 99); 10 Jul 2008 12:07:07 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Jul 2008 05:07:07 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [72.14.246.248] (HELO ag-out-0708.google.com) (72.14.246.248)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Jul 2008 12:06:14 +0000
Received: by ag-out-0708.google.com with SMTP id 23so21022667agd.11
        for <java-user@lucene.apache.org>; Thu, 10 Jul 2008 05:06:35 -0700 (PDT)
Received: by 10.100.10.15 with SMTP id 15mr7496831anj.131.1215691594921;
        Thu, 10 Jul 2008 05:06:34 -0700 (PDT)
Received: from ?10.17.4.4? ( [72.93.214.93])
        by mx.google.com with ESMTPS id c39sm8067832anc.29.2008.07.10.05.06.34
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Thu, 10 Jul 2008 05:06:34 -0700 (PDT)
Message-Id: <5157C12F-37FF-4646-9F95-6F68FFD89D96@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <6fc71b230807100435i66b8b8d9y72e557530a891581@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: Can we update a field on the current index
Date: Thu, 10 Jul 2008 08:06:32 -0400
References: <6fc71b230807100435i66b8b8d9y72e557530a891581@mail.gmail.com>
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org


Yes you must delete the entire document and then re-index a new one,  
to update a single Field.

There is some work underway, or at least a Jira issue opened, towards  
improving this situation, here:

     https://issues.apache.org/jira/browse/LUCENE-1231

But it will be some time before that's available.

Mike

Aditi Goyal wrote:

> Hi,
>
> I want to modify a field on the current index. Can it be done?
> For what I have heard that we cannot update the index . It has to be
> reindexed by deleting and then indexing again.
>
>
> Thanks,
> Aditi


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34876-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 10 12:23:38 2008
Return-Path: <java-user-return-34876-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7042 invoked from network); 10 Jul 2008 12:23:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Jul 2008 12:23:38 -0000
Received: (qmail 67676 invoked by uid 500); 10 Jul 2008 12:23:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67565 invoked by uid 500); 10 Jul 2008 12:23:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67554 invoked by uid 99); 10 Jul 2008 12:23:32 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Jul 2008 05:23:32 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Jul 2008 12:22:40 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KGvAs-0005Ti-ID
	for java-user@lucene.apache.org; Thu, 10 Jul 2008 05:23:02 -0700
Message-ID: <18381743.post@talk.nabble.com>
Date: Thu, 10 Jul 2008 05:23:02 -0700 (PDT)
From: jnance <nancejd@ornl.gov>
To: java-user@lucene.apache.org
Subject: Re: Searching for instances within a document
In-Reply-To: <43f44d1e0807100043s35587c6ema731f7cd32d2e20c@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: nancejd@ornl.gov
References: <18362075.post@talk.nabble.com> <F46369DC-2E26-4CB8-BBAB-5B96AE9BF008@gmail.com> <43f44d1e0807100043s35587c6ema731f7cd32d2e20c@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Yes, the term frequency vector is exactly what I needed. Thanks!

-James


Ajay Lakhani wrote:
> 
> Hi James,
> 
> Try this:
> 
>     Searcher searcher = new IndexSearcher(dir);
>     QueryParser parser = new QueryParser("content", new
> StandardAnalyzer());
>     Query query = parser.parse(queryString);
> 
>     HashSet queryTerms = new HashSet();
>     query.extractTerms(queryTerms);
> 
>     Hits hits = searcher.search(query);
> 
>     IndexReader reader = IndexReader.open(dir);
> 
>     for (int i =0; i < hits.length() ; i ++){
>       Document d = hits.doc(i);
>       Field fid = d.getField("id");
>       Field ftitle = d.getField("title");
>       System.out.println("id is " + fid.stringValue());
>       System.out.println("title is " + ftitle.stringValue());
> 
>       TermFreqVector tfv = reader.getTermFreqVector(hits.id(i),
> "content");
>       String[] terms = tfv.getTerms();
>       int [] freqs = tfv.getTermFrequencies();//get the frequencies
> 
>       // for each term in the query
>       for (Iterator iter = queryTerms.iterator(); iter.hasNext();) {
>         Term term = (Term) iter.next();
> 
>         // for each term in the vector
>         for (int j = 0; j < terms.length; j++) {
>           if (terms[j].equals(term.text())) {
>             System.out.println("frequency of term ["+ term.text() +"] is "
> +
> freqs[j] );
>           }
>         }
>       }
>     }
> 
> Let me know if this helps.
> Cheers
> AJ
> 
> 2008/7/10 Karl Wettin <karl.wettin@gmail.com>:
> 
>> Maybe you are looking for the document TermFreqVector?
>>
>>
>>       karl
>>
>> 9 jul 2008 kl. 15.49 skrev jnance:
>>
>>
>>> Hi,
>>>
>>> I am indexing lots of text files and need to see how many times a
>>> certain
>>> word comes up in each text file. Right now I have this constructor for
>>> "search":
>>>
>>> static void search(Searcher searcher, String queryString) throws
>>> ParseException, IOException {
>>>                 QueryParser parser = new QueryParser("content", new
>>> StandardAnalyzer());
>>>                 Query query = parser.parse(queryString);
>>>                 Hits hits = searcher.search(query);
>>>
>>>                 int hitCount = hits.length();
>>>                 if (hitCount == 0) {
>>>                         System.out.println("0 documents contain the word
>>> \"" + queryString +
>>> ".\"");
>>>                 }
>>>                 else {
>>>                         System.out.println(hitCount + " documents
>>> contain
>>> the word \"" +
>>> queryString + ".\"");
>>>                 }
>>>         }
>>>
>>> This tells me how many documents contain the word I'm looking for... but
>>> how
>>> do I get it to tell me how many times the word occurs within that
>>> document?
>>>
>>> Thanks,
>>>
>>> James
>>> --
>>> View this message in context:
>>> http://www.nabble.com/Searching-for-instances-within-a-document-tp18362075p18362075.html
>>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
> 
> 

-- 
View this message in context: http://www.nabble.com/Searching-for-instances-within-a-document-tp18362075p18381743.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34877-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 10 13:16:32 2008
Return-Path: <java-user-return-34877-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32228 invoked from network); 10 Jul 2008 13:16:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Jul 2008 13:16:32 -0000
Received: (qmail 44884 invoked by uid 500); 10 Jul 2008 13:16:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44652 invoked by uid 500); 10 Jul 2008 13:16:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44641 invoked by uid 99); 10 Jul 2008 13:16:25 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Jul 2008 06:16:25 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of christopher.kolstad@gmail.com designates 209.85.132.247 as permitted sender)
Received: from [209.85.132.247] (HELO an-out-0708.google.com) (209.85.132.247)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Jul 2008 13:15:34 +0000
Received: by an-out-0708.google.com with SMTP id c37so715094anc.49
        for <java-user@lucene.apache.org>; Thu, 10 Jul 2008 06:15:56 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type;
        bh=3EjQj1y90v2RgsTO/jlnaqE6GzF5bIahTyr3tWD1J0U=;
        b=YwmPdA7eVxTF9AvertnP3RFK8Wpvn8Jm4z1dedMB8PFY6Ea4NUryDX3oV3jTmvdugD
         BmG61idIPhUvDx07d6DMf0I91o9LliugeWT82hVP+2S8HA/JtesTOp7Zw1m+eBiOKyoy
         ZMirwP7koIkj86055yeqJX3wuVXFaULDoPblg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=DgDiGetTcRuTDVcL2ApZCcx3A8dRiPdU+d6an4RgMZyGq6cullB+x/kk+z0NDKgyeQ
         r0SJ2/wL4DDAW7zzua+sukOakPjb1jZ9Jw7+9t1H0vfW+l6LIHk88THyq5hvYXxY9SyM
         R5w7h69jifcYjU9LlEVNS0Iu5Aks1w8v4Xmp8=
Received: by 10.101.71.9 with SMTP id y9mr7633175ank.127.1215695755897;
        Thu, 10 Jul 2008 06:15:55 -0700 (PDT)
Received: by 10.100.248.12 with HTTP; Thu, 10 Jul 2008 06:15:55 -0700 (PDT)
Message-ID: <dd3751860807100615p3edc635dvf64b06edf4a24442@mail.gmail.com>
Date: Thu, 10 Jul 2008 15:15:55 +0200
From: "Christopher Kolstad" <christopher.kolstad@gmail.com>
To: java-user@lucene.apache.org
Subject: Best practice for updating an index when reindexing is not an option
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_18942_26394895.1215695755898"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_18942_26394895.1215695755898
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi.

Currently using Lucene 2.3.2 in a tomcat webapp. We have an action
configured that performs reindexing on our staging server. However, our live
server can not reindex since it does not have the necessary dtd files to
process the xml.

To update the index on the live server we perform a subversion update on the
lucene index directory.
Unfortunately this makes it necessary to stop the IndexSearcher while the
SubversionUpdate is doing its thing.

Presently we've had a requirement from our customer to not disable search.

So my idea was to copy the index directory to another directory and then
switch the IndexSearcher from the original index directory to the temporary
directory.
Then perform the Subversion update, and when done, switch the IndexSearcher
back to the original (now, updated) index directory.

Does anyone have any other suggestions on how to update the index directory
from subversion without having to disable the IndexSearcher?

BR
Christopher

-- 
Regards,
Christopher Kolstad
=============================
|100 little bugs in the code, debug one, |
|recompile, 101 little bugs in the code |
=============================

E-mail: chriswk@ifi.uio.no (University)
christopher.kolstad@gmail.com (Home)
chriswk@ovitas.no (Job)

------=_Part_18942_26394895.1215695755898--

From java-user-return-34878-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 10 13:22:36 2008
Return-Path: <java-user-return-34878-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35465 invoked from network); 10 Jul 2008 13:22:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Jul 2008 13:22:35 -0000
Received: (qmail 61160 invoked by uid 500); 10 Jul 2008 13:22:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60331 invoked by uid 500); 10 Jul 2008 13:22:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60320 invoked by uid 99); 10 Jul 2008 13:22:29 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Jul 2008 06:22:29 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.177] (HELO spunkymail-a6.g.dreamhost.com) (208.97.132.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Jul 2008 13:21:35 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a6.g.dreamhost.com (Postfix) with ESMTP id 6D0C3109F2E
	for <java-user@lucene.apache.org>; Thu, 10 Jul 2008 06:21:27 -0700 (PDT)
Message-Id: <87F4AC78-A127-4D68-820B-AD0B55038978@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <e994873a0807091155x565924ffo212457ec808e77e7@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: Payloads and SpanScorer
Date: Thu, 10 Jul 2008 09:21:26 -0400
References: <e994873a0807091155x565924ffo212457ec808e77e7@mail.gmail.com>
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org

I'm not fully following what you want.  Can you explain a bit more?

Thanks,
Grant

On Jul 9, 2008, at 2:55 PM, Peter Keegan wrote:

> If a SpanQuery is constructed from one or more BoostingTermQuery(s),  
> the
> payloads on the terms are never processed by the SpanScorer. It  
> seems to me
> that you would want the SpanScorer to score the document both on the  
> spans
> distance and the payload score. So, either the SpanScorer would have  
> to
> process the payloads (duplicating the code in BoostingSpanScorer), or
> perhaps SpanScorer could access the BoostingSpanScorers, or maybe  
> there's
> another approach.
>
> Any thoughts on how to accomplish this?
>
> Peter

--------------------------
Grant Ingersoll
http://www.lucidimagination.com

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ








---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34879-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 10 14:00:34 2008
Return-Path: <java-user-return-34879-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53252 invoked from network); 10 Jul 2008 14:00:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Jul 2008 14:00:34 -0000
Received: (qmail 35569 invoked by uid 500); 10 Jul 2008 14:00:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34869 invoked by uid 500); 10 Jul 2008 14:00:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34858 invoked by uid 99); 10 Jul 2008 14:00:25 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Jul 2008 07:00:25 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of peterlkeegan@gmail.com designates 209.85.200.173 as permitted sender)
Received: from [209.85.200.173] (HELO wf-out-1314.google.com) (209.85.200.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Jul 2008 13:59:32 +0000
Received: by wf-out-1314.google.com with SMTP id 28so3588714wfc.20
        for <java-user@lucene.apache.org>; Thu, 10 Jul 2008 06:59:55 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=JhxTBVoVwHX4ce2jfj/8Qf/RxwDA+F/RbXd5wdxx+KM=;
        b=Txl2GF0iXyC05W7cfoOzmmYIMxRzqp3oFS2waAeyvfLY0+iyMTvR3tTUkE0AV1xQXn
         GIkkNTGMDEehHYkuEx3xcQglzqLcmmmzm63rCdehiSws8+R6oQgfthVPQnXj9NibFrwf
         YSE/vLche/LxEvRUb4+dBJ6NckKTRKXJpQKVA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=mpAC+I0VnVnMNSYaLi2bYPhdWBWOpTe8xjyW/yyIcPQfCYmoTGIDikp+wf6/whR4uL
         532PMQSzwuPbrP1Zo1IN3v4skByofidLQ/PkS2JYbBvc9qV3XutRlfwmHgJGbGHt3+iF
         itPVq8WqeGB0BhJqdF5M6+pq80snvwUo086Z4=
Received: by 10.142.154.20 with SMTP id b20mr2763954wfe.59.1215698394963;
        Thu, 10 Jul 2008 06:59:54 -0700 (PDT)
Received: by 10.142.231.3 with HTTP; Thu, 10 Jul 2008 06:59:54 -0700 (PDT)
Message-ID: <e994873a0807100659y6de7a772t4265080fe5bc83c9@mail.gmail.com>
Date: Thu, 10 Jul 2008 09:59:54 -0400
From: "Peter Keegan" <peterlkeegan@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Payloads and SpanScorer
In-Reply-To: <87F4AC78-A127-4D68-820B-AD0B55038978@apache.org>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_11495_7402262.1215698394961"
References: <e994873a0807091155x565924ffo212457ec808e77e7@mail.gmail.com>
	 <87F4AC78-A127-4D68-820B-AD0B55038978@apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_11495_7402262.1215698394961
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Suppose I create a SpanNearQuery phrase with the terms "long range missiles"
and some slop factor. Each term is actually a BoostingTermQuery. Currently,
the score computed by SpanNearQuery.SpanScorer is based on the sloppy
frequency of the terms and their weights (this is fine). But even though
each term is actually a BoostingTermQuery, the BoostingTermScorer (and
therefore 'processPayload') is never invoked for this type of query.

I was looking for a way to have SpanNearQuery (also SpanOrQuery,
SpanFirstQuery) recognize that the terms in the phrase should boost the
overall score based on the payloads assigned to them. Thus the score from
the SpanNearQuery would be higher if :

a) the terms have payloads that boost their scores
b) the terms are positionally next to each other (minimal slop - as it works
now)


Does this make sense?

Peter

On Thu, Jul 10, 2008 at 9:21 AM, Grant Ingersoll <gsingers@apache.org>
wrote:

> I'm not fully following what you want.  Can you explain a bit more?
>
> Thanks,
> Grant
>
>
> On Jul 9, 2008, at 2:55 PM, Peter Keegan wrote:
>
>  If a SpanQuery is constructed from one or more BoostingTermQuery(s), the
>> payloads on the terms are never processed by the SpanScorer. It seems to
>> me
>> that you would want the SpanScorer to score the document both on the spans
>> distance and the payload score. So, either the SpanScorer would have to
>> process the payloads (duplicating the code in BoostingSpanScorer), or
>> perhaps SpanScorer could access the BoostingSpanScorers, or maybe there's
>> another approach.
>>
>> Any thoughts on how to accomplish this?
>>
>> Peter
>>
>
> --------------------------
> Grant Ingersoll
> http://www.lucidimagination.com
>
> Lucene Helpful Hints:
> http://wiki.apache.org/lucene-java/BasicsOfPerformance
> http://wiki.apache.org/lucene-java/LuceneFAQ
>
>
>
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_11495_7402262.1215698394961--

From java-user-return-34880-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 10 14:28:13 2008
Return-Path: <java-user-return-34880-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 66598 invoked from network); 10 Jul 2008 14:28:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Jul 2008 14:28:13 -0000
Received: (qmail 92895 invoked by uid 500); 10 Jul 2008 14:28:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92863 invoked by uid 500); 10 Jul 2008 14:28:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92852 invoked by uid 99); 10 Jul 2008 14:28:04 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Jul 2008 07:28:04 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [72.14.246.250] (HELO ag-out-0708.google.com) (72.14.246.250)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Jul 2008 14:27:11 +0000
Received: by ag-out-0708.google.com with SMTP id 23so21382483agd.11
        for <java-user@lucene.apache.org>; Thu, 10 Jul 2008 07:27:32 -0700 (PDT)
Received: by 10.90.49.8 with SMTP id w8mr10157451agw.66.1215700051989;
        Thu, 10 Jul 2008 07:27:31 -0700 (PDT)
Received: from ?10.17.4.4? ( [72.93.214.93])
        by mx.google.com with ESMTPS id 3sm81809wrh.6.2008.07.10.07.27.01
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Thu, 10 Jul 2008 07:27:31 -0700 (PDT)
Message-Id: <01681492-BD51-41FF-906D-A0C83516513F@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <dd3751860807100615p3edc635dvf64b06edf4a24442@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: Best practice for updating an index when reindexing is not an option
Date: Thu, 10 Jul 2008 10:27:00 -0400
References: <dd3751860807100615p3edc635dvf64b06edf4a24442@mail.gmail.com>
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org


Why does SubversionUpdate require shutting down the IndexSearcher?   
What goes wrong?

You might want to switch instead to rsync.

A Lucene index is fundamentally write once, so, syncing changes over  
should simply be copying over new files and removing now-deleted  
files.  You won't be able to remove files held open by the  
IndexSearcher, but, once the IndexSearcher restarts you'd then be able  
to delete those files on the next sync.

Mike

Christopher Kolstad wrote:

> Hi.
>
> Currently using Lucene 2.3.2 in a tomcat webapp. We have an action
> configured that performs reindexing on our staging server. However,  
> our live
> server can not reindex since it does not have the necessary dtd  
> files to
> process the xml.
>
> To update the index on the live server we perform a subversion  
> update on the
> lucene index directory.
> Unfortunately this makes it necessary to stop the IndexSearcher  
> while the
> SubversionUpdate is doing its thing.
>
> Presently we've had a requirement from our customer to not disable  
> search.
>
> So my idea was to copy the index directory to another directory and  
> then
> switch the IndexSearcher from the original index directory to the  
> temporary
> directory.
> Then perform the Subversion update, and when done, switch the  
> IndexSearcher
> back to the original (now, updated) index directory.
>
> Does anyone have any other suggestions on how to update the index  
> directory
> from subversion without having to disable the IndexSearcher?
>
> BR
> Christopher
>
> -- 
> Regards,
> Christopher Kolstad
> =============================
> |100 little bugs in the code, debug one, |
> |recompile, 101 little bugs in the code |
> =============================
>
> E-mail: chriswk@ifi.uio.no (University)
> christopher.kolstad@gmail.com (Home)
> chriswk@ovitas.no (Job)


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34881-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 10 15:06:13 2008
Return-Path: <java-user-return-34881-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7132 invoked from network); 10 Jul 2008 15:06:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Jul 2008 15:06:13 -0000
Received: (qmail 76334 invoked by uid 500); 10 Jul 2008 15:05:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76310 invoked by uid 500); 10 Jul 2008 15:05:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76298 invoked by uid 99); 10 Jul 2008 15:05:39 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Jul 2008 08:05:39 -0700
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of yseeley@gmail.com designates 209.85.162.182 as permitted sender)
Received: from [209.85.162.182] (HELO el-out-1112.google.com) (209.85.162.182)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Jul 2008 15:04:45 +0000
Received: by el-out-1112.google.com with SMTP id m34so569981ele.14
        for <java-user@lucene.apache.org>; Thu, 10 Jul 2008 08:05:07 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:sender
         :to:subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references
         :x-google-sender-auth;
        bh=Bdtbvs1o37xZLLJyUElINT7YoH6FXJYC6quBj19rfJA=;
        b=bt+BqUBq3NlRJWuunWhzuDsBoFFjpmswyh1Zj3b7uaiTUFNdVu9m2mlUT7htA0eF+b
         4HnR5J9DT3SlxfZoYm2/d0cDWRsI82u483H8A7/r058AXuTS+KOvwRr9pMZGk1+cia5m
         4ydzYmaGYuB+l8pGVcdtRtI7Bkgt30AS/VCrQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:sender:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references:x-google-sender-auth;
        b=PC9TxAPiOym/PBT1f5QjkvJCy4Ug8WZ0jjsPT4DVhgTmpttSgFvcfLpGzvdVYG9pi6
         oJf3MQBkAPoqnKmCx8oqRwFtDm73UJgaXWi6sqrOWGNHD6diYgoQr9xsncIaa2F1S9uY
         27ZH1whBLXsTjjMaLeKr/Rm6WPlSL57Sv78eE=
Received: by 10.151.143.3 with SMTP id v3mr14545567ybn.244.1215702306846;
        Thu, 10 Jul 2008 08:05:06 -0700 (PDT)
Received: by 10.150.227.18 with HTTP; Thu, 10 Jul 2008 08:05:06 -0700 (PDT)
Message-ID: <c68e39170807100805s7716fc10xf1e79e619b7a7ea8@mail.gmail.com>
Date: Thu, 10 Jul 2008 11:05:06 -0400
From: "Yonik Seeley" <yonik@apache.org>
Sender: yseeley@gmail.com
To: java-user@lucene.apache.org
Subject: Re: .fdt file
In-Reply-To: <18376301.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <18373913.post@talk.nabble.com>
	 <c68e39170807091806h3665660ey4f81c190c2488113@mail.gmail.com>
	 <18375077.post@talk.nabble.com>
	 <c68e39170807092205mb2c1fdckfba1bdc877e343ef@mail.gmail.com>
	 <18376301.post@talk.nabble.com>
X-Google-Sender-Auth: 83075331ca08481e
X-Virus-Checked: Checked by ClamAV on apache.org

On Thu, Jul 10, 2008 at 1:42 AM, blazingwolf7 <blazingwolf7@gmail.com> wrote:
> Well, I am trying to extract the URL and contentLength from the ".fdt" file.
> I am planning to use both of these values in a filter to remove certain
> links to be display in the search result. The problem is, I am told not to
> use the IndexReader to retrieve these values for each document found
> matching with the query.
>
> So now, instead, I will have to retrieve the entire .fdt file, extract both
> the values and store it into an arraylist which will be use later.  I am
> having problem extracting the entire file without using all the seek()
> method to determine the position of the document.
>
> Any suggestion?

You're trying to do things at too low of a level (bypassing Lucene's
public APIs)
I suggested earlier that you index the URL untokenized, and then use
the FieldCache.  That will allow you to easily retrieve a String[] of
all the URLs.

-Yonik


> Yonik Seeley wrote:
>>
>> On Wed, Jul 9, 2008 at 11:13 PM, blazingwolf7 <blazingwolf7@gmail.com>
>> wrote:
>>> Sorry,but I am still quite new to Lucene. What exactly is "cp"?
>>
>> The unix command for copy (hence the smiley).
>>
>> Some of your recent questions seem to be suffering from an XY problem:
>> http://www.perlmonks.org/index.pl?node_id=542341
>> You may get more help by explaining what you are trying to do.
>>
>> -Yonik
>>
>>> Yonik Seeley wrote:
>>>>
>>>> On Wed, Jul 9, 2008 at 9:01 PM, blazingwolf7 <blazingwolf7@gmail.com>
>>>> wrote:
>>>>> I had recently found out that Lucene will retrieve the content of a
>>>>> document
>>>>> from a file ".fdt". I am trying to retrieve the entire file in one go
>>>>> instead of retrieving it based on document number. can it be done?
>>>>
>>>> "cp" can retrieve the file on one go ;-)
>>>>
>>>> Other than that, the format is documented here:
>>>> http://lucene.apache.org/java/docs/fileformats.html
>>>> But I'm not sure why retrieving by document number won't work for you.
>>>>
>>>> -Yonik
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>
> --
> View this message in context: http://www.nabble.com/.fdt-file-tp18373913p18376301.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34882-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 10 15:14:47 2008
Return-Path: <java-user-return-34882-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 28964 invoked from network); 10 Jul 2008 15:14:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Jul 2008 15:14:47 -0000
Received: (qmail 96385 invoked by uid 500); 10 Jul 2008 15:14:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96047 invoked by uid 500); 10 Jul 2008 15:14:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96036 invoked by uid 99); 10 Jul 2008 15:14:36 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Jul 2008 08:14:36 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [63.65.184.134] (HELO birexchange.BIRPLAZA.local) (63.65.184.134)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Jul 2008 15:13:45 +0000
Content-class: urn:content-classes:message
Subject: RE: performance feedback
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Date: Thu, 10 Jul 2008 11:13:45 -0400
X-MimeOLE: Produced By Microsoft Exchange V6.5.6944.0
Message-ID: <CC2671C08F06704ABFD37ED1EA09AA5659BB1E@birexchange.BIRPLAZA.local>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: performance feedback
Thread-Index: Acjh3dU9PN89ACl9Qmm5Ie6mHHLS0gAwXxyw
From: "Beard, Brian" <Brian.Beard@mybir.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Currently the default setting is being used with our setup, so
autoCommit is true. I'll set this to false to see if it improves.

Question: If autoCommit is false, does this apply to optimization also,
so that during an hour long optimization that gets killed in the middle,
will the index be in the left in the initial state before optimization
started?

-----Original Message-----
From: yseeley@gmail.com [mailto:yseeley@gmail.com] On Behalf Of Yonik
Seeley
Sent: Wednesday, July 09, 2008 12:06 PM
To: java-user@lucene.apache.org
Subject: Re: performance feedback

On Wed, Jul 9, 2008 at 11:35 AM, Beard, Brian <Brian.Beard@mybir.com>
wrote:
> I will try tweaking RAM, and check about autoCommit=3Dfalse. It's on =
the
> future agenda to multi-thread through the index writer. The indexing
> time I quoted includes the document creation time which would
definitely
> improve with multi-threading.
>
> I'm doing batch updates of up to 1000 a pop, and closing and
re-opening
> the IndexWriter in between.

autoCommit=3Dfalse will definitely help, and there is normally no reason
not to use it.
Bigger batches (or a single batch) will also help indexing speed.  A
single IndexWriter session can now avoid copying stored fields on
segment merges.

-Yonik

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34883-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 10 15:19:01 2008
Return-Path: <java-user-return-34883-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30602 invoked from network); 10 Jul 2008 15:19:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Jul 2008 15:19:00 -0000
Received: (qmail 3197 invoked by uid 500); 10 Jul 2008 15:16:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3164 invoked by uid 500); 10 Jul 2008 15:16:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3152 invoked by uid 99); 10 Jul 2008 15:16:34 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Jul 2008 08:16:34 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [82.111.253.243] (HELO mail.uk.scalix.com) (82.111.253.243)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Jul 2008 15:15:40 +0000
Received: from mail.uk.scalix.com (localhost.localdomain [127.0.0.1])
	by mail.uk.scalix.com (8.13.8/8.13.8) with ESMTP id m6AFEx1K010379
	for <java-user@lucene.apache.org>; Thu, 10 Jul 2008 16:15:00 +0100
Received: from [10.11.108.233] (mail.uk.scalix.com [10.11.108.216])
    by mail.uk.scalix.com (Scalix SMTP Relay 11.4.1.11843)
    via ESMTP; Thu, 10 Jul 2008 16:14:59 +0100 (BST)
Date: Thu, 10 Jul 2008 16:14:59 +0100
From: Chris Bamford <chris.bamford@scalix.com>
To: java-user@lucene.apache.org
Message-ID: <48762773.60009@scalix.com>
In-Reply-To: <4875F939.20507@scalix.com>
References: <18295066.post@talk.nabble.com>
References: <4875F939.20507@scalix.com>
Subject: Re: newbie question (for John Griffin) - fixed
x-scalix-Hops: 1
User-Agent: Thunderbird 2.0.0.14 (X11/20080505)
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII";
	format="flowed"
Content-Disposition: inline
X-Spam-Checker-Version: SpamAssassin 3.2.5 (2008-06-10) on mail.uk.scalix.com
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.2 required=5.0 tests=AWL,BAYES_00 autolearn=ham
	version=3.2.5

Hi John,

Please ignore my earlier questions on this subject, as I have got to the 
bottom of it.
I was not passing each word in the phrase as a separate Term to the 
query; instead I was passing the whole string (doh!).

Thanks.

- Chris

Chris Bamford wrote:
> Hi John,
>
> Further to my question below, I did some back-to-basics investigation 
> of PhraseQueries and found that even basic ones fail for me...
> I found the attached code on the Internet (see 
> http://affy.blogspot.com/2003/04/codebit-examples-for-all-of-lucenes.html) 
> and this fails too...  Can you explain why?  I would expect the first 
> test to deliver 2 hits.
>
> I have tried with Lucene 2.0 and 2.3.2 jars and both fail.
>
> Thanks again,
>
> - Chris
>
>
>
> Chris Bamford wrote:
>> Hi John,
>>
>> Just continuing from an earlier question where I asked you how to 
>> handle strings like "from:fred flintston*" (sorry I have lost the 
>> original email).
>> You advised me to write my own BooleanQuery and add to it Prefix- / 
>> Term- / Phrase- Querys as appropriate.  I have done so, but am having 
>> trouble with the result - my PhraseQueries just do not get any hits 
>> at all  :-(
>> My code looks for quotes - if it finds them, it treats the quoted 
>> phrase as a PhraseQuery and sets the slop factor to 0.
>> so,  an input of:
>>
>>    subject:"Good Morning"
>>
>> results in a PhraseQuery (which I add to my BooleanQuery and then 
>> dump with toString()) of:
>>
>>    +subject:"good morning"
>>
>> ... which fails.
>> However, if I break it into 2 TermQuerys, it works (but that's not 
>> what I want).
>>
>> What am I missing?
>>
>> Thanks,
>>
>> - Chris
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
>
> ------------------------------------------------------------------------
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


-- 
------------------------------------------------------------------------
*Chris Bamford*
Senior Development Engineer 	<http://www.scalix.com>
------------------------------------------------------------------------
/Email / MSN/ 	chris.bamford@scalix.com
/Tel/ 	+44 (0)1344 381814 	  	/Skype/ 	c.bamford


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34884-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 10 15:21:40 2008
Return-Path: <java-user-return-34884-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32626 invoked from network); 10 Jul 2008 15:21:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Jul 2008 15:21:40 -0000
Received: (qmail 21983 invoked by uid 500); 10 Jul 2008 15:21:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21962 invoked by uid 500); 10 Jul 2008 15:21:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21951 invoked by uid 99); 10 Jul 2008 15:21:15 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Jul 2008 08:21:15 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of yseeley@gmail.com designates 209.85.162.183 as permitted sender)
Received: from [209.85.162.183] (HELO el-out-1112.google.com) (209.85.162.183)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Jul 2008 15:20:24 +0000
Received: by el-out-1112.google.com with SMTP id m34so573381ele.14
        for <java-user@lucene.apache.org>; Thu, 10 Jul 2008 08:20:47 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:sender
         :to:subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references
         :x-google-sender-auth;
        bh=4ui6edAHe9ScBLceulw08zP+p1sh2Q6aCbtdfI/SLkI=;
        b=FBBYiXIMmxrHx0eSklhMvtzYY96gSXgK7mVD/dmBLoOW/Nfc6tMsMdIn2/NoRkZeZl
         uS9YvzmRUzXsUn2g6FeU4Kaqla/pd4cJGFefc0k8gWpLaWoFT/scb10AZbwkWxCe7FXe
         aBMvS3NP3NYi+cReS79sQy/YVZDwtjQRFzXj4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:sender:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references:x-google-sender-auth;
        b=dkm9LwX30QODCc0shMfFltrNgvdBKXhnTYKypb89qSBq2mVSV37V2STC5k5uiyX4pH
         b8SATrWV+QjvjiOxKP6PbvJ0HvoEcHlmDjAopHS9wZLkyf0cYzyGooPPUM7gviyqhI2/
         JGPeetZLpzGwc0ghKijaOrr2f2Z8JOntJGp2c=
Received: by 10.151.114.6 with SMTP id r6mr14575172ybm.181.1215703246772;
        Thu, 10 Jul 2008 08:20:46 -0700 (PDT)
Received: by 10.150.227.18 with HTTP; Thu, 10 Jul 2008 08:20:46 -0700 (PDT)
Message-ID: <c68e39170807100820w406d32caucea30352d4a1458@mail.gmail.com>
Date: Thu, 10 Jul 2008 11:20:46 -0400
From: "Yonik Seeley" <yonik@apache.org>
Sender: yseeley@gmail.com
To: java-user@lucene.apache.org
Subject: Re: performance feedback
In-Reply-To: <CC2671C08F06704ABFD37ED1EA09AA5659BB1E@birexchange.BIRPLAZA.local>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <CC2671C08F06704ABFD37ED1EA09AA5659BB1E@birexchange.BIRPLAZA.local>
X-Google-Sender-Auth: ac48415ec6fce5f0
X-Virus-Checked: Checked by ClamAV on apache.org

On Thu, Jul 10, 2008 at 11:13 AM, Beard, Brian <Brian.Beard@mybir.com> wrote:
> Question: If autoCommit is false, does this apply to optimization also,
> so that during an hour long optimization that gets killed in the middle,
> will the index be in the left in the initial state before optimization
> started?

Yes.  But the longest merge is the biggest, so that would probably
happen almost as often with autoCommit=true too.

-Yonik

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34885-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 10 16:40:11 2008
Return-Path: <java-user-return-34885-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62467 invoked from network); 10 Jul 2008 16:40:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Jul 2008 16:40:11 -0000
Received: (qmail 56458 invoked by uid 500); 10 Jul 2008 16:39:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56426 invoked by uid 500); 10 Jul 2008 16:39:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 43902 invoked by uid 99); 10 Jul 2008 16:28:33 -0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of SRS0=9pUxH+=XW=lucasmail.org=paul@yourhostingaccount.com designates 65.254.254.80 as permitted sender)
X-EN-OrigOutIP: 10.1.18.6
X-EN-IMPSID: oGQu1Z00107rVmq0000000
Message-Id: <8082B7D2-C2DD-4069-A7F9-6C53FBE93675@lucasmail.org>
From: "Paul J. Lucas" <paul@lucasmail.org>
To: java-user@lucene.apache.org
In-Reply-To: <Pine.LNX.4.62.0807092210550.27581@radix.cryptio.net>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: Sorting case-insensitively
Date: Thu, 10 Jul 2008 09:24:48 -0700
References: <EB8A44A6-A9FF-4C0E-ACA8-9E0E21C5AD6F@lucasmail.org> <E91CC8FF-2D02-42C2-8CEA-6D5B61E4C253@ehatchersolutions.com> <3F71F1AB-3905-4097-8C86-E66916BDF521@lucasmail.org> <868CA8F2-4F97-4CC1-98DB-C34E4A88A2F8@lucasmail.org> <Pine.LNX.4.62.0807092210550.27581@radix.cryptio.net>
X-Mailer: Apple Mail (2.926)
X-EN-UserInfo: 19b3ee6e8bc35660ab25150f3ce1009e:104eb4694f5dc54e252b420fd863a3b6
X-EN-AuthUser: paul@pauljlucas.org
Sender:  "Paul J. Lucas" <paul@lucasmail.org>
X-EN-OrigIP: 76.201.168.3
X-EN-OrigHost: adsl-76-201-168-3.dsl.pltn13.sbcglobal.net
X-Virus-Checked: Checked by ClamAV on apache.org

On Jul 9, 2008, at 10:14 PM, Chris Hostetter wrote:

> I'm going to guess you have a doc where that field doesn't have a  
> value.
> ordinarily that's fine, but maybe SortComparator doesn't handle
> that case very well.

But how does the built-in STRING sort work with null values then?  And  
how do I make a SortComparitor that works?

> what's the full stack trace look like?

See below.

- Paul


java.lang.NullPointerException
	at org.apache.lucene.search.SortComparator 
$1.compare(SortComparator.java:54)
	at  
org 
.apache 
.lucene.search.FieldSortedHitQueue.lessThan(FieldSortedHitQueue.java: 
125)
	at org.apache.lucene.util.PriorityQueue.upHeap(PriorityQueue.java:139)
	at org.apache.lucene.util.PriorityQueue.put(PriorityQueue.java:53)
	at  
org 
.apache 
.lucene.util.PriorityQueue.insertWithOverflow(PriorityQueue.java:78)
	at  
org 
.apache 
.lucene 
.search 
.FieldSortedHitQueue.insertWithOverflow(FieldSortedHitQueue.java:108)
	at  
org 
.apache 
.lucene.search.TopFieldDocCollector.collect(TopFieldDocCollector.java: 
61)
	at org.apache.lucene.search.TermScorer.score(TermScorer.java:76)
	at org.apache.lucene.search.TermScorer.score(TermScorer.java:61)
	at org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java: 
146)
	at org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java: 
124)
	at org.apache.lucene.search.Hits.getMoreDocs(Hits.java:100)
	at org.apache.lucene.search.Hits.<init>(Hits.java:77)
	at org.apache.lucene.search.Searcher.search(Searcher.java:55)


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34886-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 10 17:31:32 2008
Return-Path: <java-user-return-34886-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84591 invoked from network); 10 Jul 2008 17:31:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Jul 2008 17:31:32 -0000
Received: (qmail 52498 invoked by uid 500); 10 Jul 2008 17:31:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52462 invoked by uid 500); 10 Jul 2008 17:31:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52451 invoked by uid 99); 10 Jul 2008 17:31:23 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Jul 2008 10:31:23 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.83] (HELO spunkymail-a10.g.dreamhost.com) (208.97.132.83)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Jul 2008 17:30:29 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a10.g.dreamhost.com (Postfix) with ESMTP id CB84F16382A
	for <java-user@lucene.apache.org>; Thu, 10 Jul 2008 10:30:20 -0700 (PDT)
Message-Id: <CE4A60BB-D8D6-49D3-8B2B-235D7CC2BC02@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <e994873a0807100659y6de7a772t4265080fe5bc83c9@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: Payloads and SpanScorer
Date: Thu, 10 Jul 2008 13:30:20 -0400
References: <e994873a0807091155x565924ffo212457ec808e77e7@mail.gmail.com> <87F4AC78-A127-4D68-820B-AD0B55038978@apache.org> <e994873a0807100659y6de7a772t4265080fe5bc83c9@mail.gmail.com>
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org

Makes sense.  It was always my intent to implement things like  
PayloadNearQuery, see http://wiki.apache.org/lucene-java/Payload_Planning

I think it would make sense to develop these and I would be happy to  
help shepherd a patch through, but am not in a position to generate  
said patch at this moment in time.

On Jul 10, 2008, at 9:59 AM, Peter Keegan wrote:

> Suppose I create a SpanNearQuery phrase with the terms "long range  
> missiles"
> and some slop factor. Each term is actually a BoostingTermQuery.  
> Currently,
> the score computed by SpanNearQuery.SpanScorer is based on the sloppy
> frequency of the terms and their weights (this is fine). But even  
> though
> each term is actually a BoostingTermQuery, the BoostingTermScorer (and
> therefore 'processPayload') is never invoked for this type of query.
>
> I was looking for a way to have SpanNearQuery (also SpanOrQuery,
> SpanFirstQuery) recognize that the terms in the phrase should boost  
> the
> overall score based on the payloads assigned to them. Thus the score  
> from
> the SpanNearQuery would be higher if :
>
> a) the terms have payloads that boost their scores
> b) the terms are positionally next to each other (minimal slop - as  
> it works
> now)
>
>
> Does this make sense?
>
> Peter
>
> On Thu, Jul 10, 2008 at 9:21 AM, Grant Ingersoll <gsingers@apache.org>
> wrote:
>
>> I'm not fully following what you want.  Can you explain a bit more?
>>
>> Thanks,
>> Grant
>>
>>
>> On Jul 9, 2008, at 2:55 PM, Peter Keegan wrote:
>>
>> If a SpanQuery is constructed from one or more  
>> BoostingTermQuery(s), the
>>> payloads on the terms are never processed by the SpanScorer. It  
>>> seems to
>>> me
>>> that you would want the SpanScorer to score the document both on  
>>> the spans
>>> distance and the payload score. So, either the SpanScorer would  
>>> have to
>>> process the payloads (duplicating the code in BoostingSpanScorer),  
>>> or
>>> perhaps SpanScorer could access the BoostingSpanScorers, or maybe  
>>> there's
>>> another approach.
>>>
>>> Any thoughts on how to accomplish this?
>>>
>>> Peter
>>>
>>
>> --------------------------
>> Grant Ingersoll
>> http://www.lucidimagination.com
>>
>> Lucene Helpful Hints:
>> http://wiki.apache.org/lucene-java/BasicsOfPerformance
>> http://wiki.apache.org/lucene-java/LuceneFAQ
>>
>>
>>
>>
>>
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>

--------------------------
Grant Ingersoll
http://www.lucidimagination.com

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ








---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34887-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 10 18:10:47 2008
Return-Path: <java-user-return-34887-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98641 invoked from network); 10 Jul 2008 18:10:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Jul 2008 18:10:47 -0000
Received: (qmail 24747 invoked by uid 500); 10 Jul 2008 18:10:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24717 invoked by uid 500); 10 Jul 2008 18:10:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24706 invoked by uid 99); 10 Jul 2008 18:10:31 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Jul 2008 11:10:31 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of peterlkeegan@gmail.com designates 66.249.82.224 as permitted sender)
Received: from [66.249.82.224] (HELO wx-out-0506.google.com) (66.249.82.224)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Jul 2008 18:09:37 +0000
Received: by wx-out-0506.google.com with SMTP id h29so1498205wxd.20
        for <java-user@lucene.apache.org>; Thu, 10 Jul 2008 11:09:59 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=raXB4saXIc3fl8wVOVOP2DoihyY3uzM9XIA5pcUMz/0=;
        b=Cy8SeB7vaiKRa1SWDWunnkkzIFFxi7xFMsnpKvyAo0Y7w28TBMIhLyrh3oFtY4klJJ
         Afg+HbhuThUYPCmmpO4m8zS4gpVfgvBoErS5IFI4DS8w93h+SaNRhdnzGx46DJSWaadt
         Uc9hSZRU9jwZvpardV9Boanmm8GhziUEzg7QA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=CMhwIqmnw0V3A/fd0R5J5bPT/e7vit8WB6a/3VBDkMBXgu8WTfBlNUvs3pLRIg7evd
         ejleaRZQds3BCPXnbq36IvQU7Tk1KwGFEWKr+GyIIFd3sHeXTAc9Qt1412rLJnSc9hBD
         6mu3QCtx9+vcJB9onUo5Z04Qw6WcTrKPFF8KA=
Received: by 10.142.213.10 with SMTP id l10mr2792550wfg.163.1215713398568;
        Thu, 10 Jul 2008 11:09:58 -0700 (PDT)
Received: by 10.142.231.3 with HTTP; Thu, 10 Jul 2008 11:09:58 -0700 (PDT)
Message-ID: <e994873a0807101109v33f6cdcpe9164c39f7dc07b4@mail.gmail.com>
Date: Thu, 10 Jul 2008 14:09:58 -0400
From: "Peter Keegan" <peterlkeegan@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Payloads and SpanScorer
In-Reply-To: <CE4A60BB-D8D6-49D3-8B2B-235D7CC2BC02@apache.org>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_14431_11188448.1215713398555"
References: <e994873a0807091155x565924ffo212457ec808e77e7@mail.gmail.com>
	 <87F4AC78-A127-4D68-820B-AD0B55038978@apache.org>
	 <e994873a0807100659y6de7a772t4265080fe5bc83c9@mail.gmail.com>
	 <CE4A60BB-D8D6-49D3-8B2B-235D7CC2BC02@apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_14431_11188448.1215713398555
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I may take a crack at this. Any more thoughts you may have on the
implementation are welcome, but I don't want to distract you too much.

Thanks,
Peter


On Thu, Jul 10, 2008 at 1:30 PM, Grant Ingersoll <gsingers@apache.org>
wrote:

> Makes sense.  It was always my intent to implement things like
> PayloadNearQuery, see http://wiki.apache.org/lucene-java/Payload_Planning
>
> I think it would make sense to develop these and I would be happy to help
> shepherd a patch through, but am not in a position to generate said patch at
> this moment in time.
>
>
> On Jul 10, 2008, at 9:59 AM, Peter Keegan wrote:
>
>  Suppose I create a SpanNearQuery phrase with the terms "long range
>> missiles"
>> and some slop factor. Each term is actually a BoostingTermQuery.
>> Currently,
>> the score computed by SpanNearQuery.SpanScorer is based on the sloppy
>> frequency of the terms and their weights (this is fine). But even though
>> each term is actually a BoostingTermQuery, the BoostingTermScorer (and
>> therefore 'processPayload') is never invoked for this type of query.
>>
>> I was looking for a way to have SpanNearQuery (also SpanOrQuery,
>> SpanFirstQuery) recognize that the terms in the phrase should boost the
>> overall score based on the payloads assigned to them. Thus the score from
>> the SpanNearQuery would be higher if :
>>
>> a) the terms have payloads that boost their scores
>> b) the terms are positionally next to each other (minimal slop - as it
>> works
>> now)
>>
>>
>> Does this make sense?
>>
>> Peter
>>
>> On Thu, Jul 10, 2008 at 9:21 AM, Grant Ingersoll <gsingers@apache.org>
>> wrote:
>>
>>  I'm not fully following what you want.  Can you explain a bit more?
>>>
>>> Thanks,
>>> Grant
>>>
>>>
>>> On Jul 9, 2008, at 2:55 PM, Peter Keegan wrote:
>>>
>>> If a SpanQuery is constructed from one or more BoostingTermQuery(s), the
>>>
>>>> payloads on the terms are never processed by the SpanScorer. It seems to
>>>> me
>>>> that you would want the SpanScorer to score the document both on the
>>>> spans
>>>> distance and the payload score. So, either the SpanScorer would have to
>>>> process the payloads (duplicating the code in BoostingSpanScorer), or
>>>> perhaps SpanScorer could access the BoostingSpanScorers, or maybe
>>>> there's
>>>> another approach.
>>>>
>>>> Any thoughts on how to accomplish this?
>>>>
>>>> Peter
>>>>
>>>>
>>> --------------------------
>>> Grant Ingersoll
>>> http://www.lucidimagination.com
>>>
>>> Lucene Helpful Hints:
>>> http://wiki.apache.org/lucene-java/BasicsOfPerformance
>>> http://wiki.apache.org/lucene-java/LuceneFAQ
>>>
>>>
>>>
>>>
>>>
>>>
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>>
> --------------------------
> Grant Ingersoll
> http://www.lucidimagination.com
>
> Lucene Helpful Hints:
> http://wiki.apache.org/lucene-java/BasicsOfPerformance
> http://wiki.apache.org/lucene-java/LuceneFAQ
>
>
>
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_14431_11188448.1215713398555--

From java-user-return-34888-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 10 21:25:35 2008
Return-Path: <java-user-return-34888-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98337 invoked from network); 10 Jul 2008 21:25:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Jul 2008 21:25:35 -0000
Received: (qmail 41186 invoked by uid 500); 10 Jul 2008 21:25:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41156 invoked by uid 500); 10 Jul 2008 21:25:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41145 invoked by uid 99); 10 Jul 2008 21:25:28 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Jul 2008 14:25:28 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Jul 2008 21:24:36 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id EDC0871C3FF; Thu, 10 Jul 2008 14:24:58 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id A9F8F71C32D
	for <java-user@lucene.apache.org>; Thu, 10 Jul 2008 14:24:58 -0700 (PDT)
Date: Thu, 10 Jul 2008 14:24:58 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Sorting case-insensitively
In-Reply-To: <8082B7D2-C2DD-4069-A7F9-6C53FBE93675@lucasmail.org>
Message-ID: <Pine.LNX.4.62.0807101400360.16471@radix.cryptio.net>
References: <EB8A44A6-A9FF-4C0E-ACA8-9E0E21C5AD6F@lucasmail.org>
 <E91CC8FF-2D02-42C2-8CEA-6D5B61E4C253@ehatchersolutions.com>
 <3F71F1AB-3905-4097-8C86-E66916BDF521@lucasmail.org>
 <868CA8F2-4F97-4CC1-98DB-C34E4A88A2F8@lucasmail.org>
 <Pine.LNX.4.62.0807092210550.27581@radix.cryptio.net>
 <8082B7D2-C2DD-4069-A7F9-6C53FBE93675@lucasmail.org>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: But how does the built-in STRING sort work with null values then?  And how do
: I make a SortComparitor that works?

Built in string sorting uses FieldCache.DEFAULT.getStringIndex() ... any 
doc without a value ends up without an assignment in StringIndex.order[], 
so it gets the default value of 0.  In most cases only the order[] needs 
to be consulted and the ints are compared -- in the case of a 
RemoteSearcher or something like it, the StringIndex.lookup[] can be 
consulted using the index from StringIndex.order[] -- and the 0th slot 
of StringIndex.lookup[] is null.  
(see FieldSortedHitQueue.comparatorString to see what i mean)

But that doesn't really relate to what you're doing, because it doesn't 
even deal with the SortComparator class -- it returns an 
anonymous direct subclass of ScoreDocComparator.

I suspect the ScoreDocComparator in SortComparator is buggy in that it 
assumes there will be a cachedValue for every ScoreDoc -- even though 
there is no garuntee of that.  if you could submit a test case that 
reproduces this using a trivial subclass (just return the orriginal String 
as the Comparable) that can help us verify the bug and the fix.

Assuming i'm right, I don'treally have any good work arround suggestion 
for you beyond overriding newComparator() in your SortComparator subclass 
to explicitly test for null yourself.

: > what's the full stack trace look like?
: 
: See below.

thanks ... i just wanted to double check there wasn't some a-typical code 
path involved (RemoteMultiSearcher or anything)


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34889-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 10 21:45:58 2008
Return-Path: <java-user-return-34889-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8375 invoked from network); 10 Jul 2008 21:45:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Jul 2008 21:45:57 -0000
Received: (qmail 74221 invoked by uid 500); 10 Jul 2008 21:45:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73687 invoked by uid 500); 10 Jul 2008 21:45:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73676 invoked by uid 99); 10 Jul 2008 21:45:50 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Jul 2008 14:45:50 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Jul 2008 21:44:59 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id 9229A71C14C; Thu, 10 Jul 2008 14:45:21 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id 8E52571C13C
	for <java-user@lucene.apache.org>; Thu, 10 Jul 2008 14:45:21 -0700 (PDT)
Date: Thu, 10 Jul 2008 14:45:21 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: how to get IndexReader Remote?
In-Reply-To: <BAY119-W38004D6DA75243BB55A93EB4960@phx.gbl>
Message-ID: <Pine.LNX.4.62.0807101442140.16471@radix.cryptio.net>
References: <357284.79975.qm@web53005.mail.re2.yahoo.com>
 <EC19D53A-0C9A-4427-B9EA-38A93D080AAD@mikemccandless.com>
 <BAY119-W38004D6DA75243BB55A93EB4960@phx.gbl>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: I have a MultiSearcher from remote using by 
: Naming.bind("rmi://"+IP+":"+PORT+"/"+NAME, RemoteSearchable)
: ,but MultiSearcher  doesn't has getIndexReader() .
: How to get IndexReader?

It's not possible to get a remote IndexReader ... that's the main 
distinction between the Searchable interface and the Searcher class -- the 
methods availabel in Searchable can be (decently) streamed across the wire 
-- but returning a whole IndexReader remotely would be ... insane ... in 
most cases.


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34890-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 10 21:54:06 2008
Return-Path: <java-user-return-34890-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 13156 invoked from network); 10 Jul 2008 21:54:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Jul 2008 21:54:06 -0000
Received: (qmail 90583 invoked by uid 500); 10 Jul 2008 21:53:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90554 invoked by uid 500); 10 Jul 2008 21:53:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90542 invoked by uid 99); 10 Jul 2008 21:53:28 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Jul 2008 14:53:28 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ronchalant@gmail.com designates 64.233.166.183 as permitted sender)
Received: from [64.233.166.183] (HELO py-out-1112.google.com) (64.233.166.183)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Jul 2008 21:52:35 +0000
Received: by py-out-1112.google.com with SMTP id z74so1955900pyg.9
        for <java-user@lucene.apache.org>; Thu, 10 Jul 2008 14:52:57 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:from:to
         :content-type:content-transfer-encoding:mime-version:subject:date
         :x-mailer;
        bh=xSwTA+YbyBr4+UKketbZFBxU+fdRGRPEjLY9oeI9taA=;
        b=n6blYkpI+L9wTmTO6CGK2FnDMxOmByA29HTGXjIhafnPwEou6TmP+ou/0BX/oVbL5D
         0vYd8CLaLoVLoCPoAbzb51b2XRaHeh8CRYf0MqvAJof9ng9v2XjrYpbT0ii6p5Ncidge
         KyytxrKpIirAj+2R1C5ch6qh9la04gPFUctng=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:from:to:content-type:content-transfer-encoding
         :mime-version:subject:date:x-mailer;
        b=mimyiATTtNSdE78qXk0HEmp13DwG41OTxRGFbg3UJZ1+YzuJ2UZ2z+uKsqePIp3pHv
         QvI9KAqxnHkjT3p4+BfjOmA1xk0+8CMIwg8HQYJlXF87OqW+lJolmK/bXYMDB58Tq4nl
         tnack9iJH2OK2sHpwDeVkKhT69D/ZDU71wnEs=
Received: by 10.35.81.1 with SMTP id i1mr2554421pyl.20.1215726777462;
        Thu, 10 Jul 2008 14:52:57 -0700 (PDT)
Received: from bs2.brick.local ( [70.91.6.33])
        by mx.google.com with ESMTPS id n27sm731933pyh.11.2008.07.10.14.52.56
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Thu, 10 Jul 2008 14:52:57 -0700 (PDT)
Message-Id: <F28D06AF-4268-4854-9B59-4A2D0879FAD8@gmail.com>
From: Ronald Rudy <ronchalant@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Boolean expression for no terms OR matching a wildcard
Date: Thu, 10 Jul 2008 17:52:45 -0400
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org

I need to perform a query for a term that may or may not have values,  
and I need to check for the conditions where either no terms are  
indexed OR any and ALL indexed terms match a wildcard.

For example, say the following values were indexed as terms in the  
field "myfield" in the three documents:

1) terms "abc123" and "abcdef123"
2) terms "abc123", "def123" and "abcdef123"
3) no terms

I want my query with a wildcard search of "+myfield:abc*123" to match  
on both 1 and 3 but NOT 2.

Is this possible?

Thanks,
   - Ron

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34891-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 10 22:09:20 2008
Return-Path: <java-user-return-34891-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22636 invoked from network); 10 Jul 2008 22:09:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Jul 2008 22:09:20 -0000
Received: (qmail 8256 invoked by uid 500); 10 Jul 2008 22:09:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8228 invoked by uid 500); 10 Jul 2008 22:09:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8217 invoked by uid 99); 10 Jul 2008 22:09:11 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Jul 2008 15:09:11 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.190.38.19] (HELO web50004.mail.re2.yahoo.com) (206.190.38.19)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 10 Jul 2008 22:08:19 +0000
Received: (qmail 13535 invoked by uid 60001); 10 Jul 2008 22:07:41 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=lBkGhYelwFzD7a9jovEUcwtDmU4eofQwKL+cHGh8eJnlWsh4iKRKSYqJkcW6RdWawc4YnN3JpuCNLnQzobSIIiHL37/XMhSNnVqbZMxD2EFuuJEpmWqLCokCdlJnWmUamSxlaKKUxNjjkZnAi11k7VjLUUkGt1jq23mXEwJdh48=;
X-YMail-OSG: pMVrt9IVM1kHkCSf250GkAjwoQ2sqgdV5epaALDGOsXXi2pHgP5TXNncL8s_B0qILw--
Received: from [166.77.103.133] by web50004.mail.re2.yahoo.com via HTTP; Thu, 10 Jul 2008 15:07:41 PDT
Date: Thu, 10 Jul 2008 15:07:41 -0700 (PDT)
From: xin liu <liuxinx@yahoo.com>
Subject: how to get total hit count for each Searchable?
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-1108074553-1215727661=:13045"
Content-Transfer-Encoding: 8bit
Message-ID: <468655.13045.qm@web50004.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

--0-1108074553-1215727661=:13045
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit

Hi,
I have individual index files for Audio, Image and PDF files. We build common meta fields for them. When I search for a string, I want the search defaults to return mixed search results from these 3 different index based on relevancy. But I also wants to know hit count for each individual index type. For example, I want to get:
Mixed together total hit count: 105, with the first 10 HitItem.
Total hit in Audio: 73
Total hit in Image: 17
Total hit in PDF:    15

Right now, I'm doing the following way:
1. Gets one Searchable instance for Audio, one for Image, and one for PDF index;
2. construct ParallelMultiSearcher s with above 3 Searchable as parameters; call its search to get total hit count and first 10 hit items;
3. Call Audio searchable to get total hit count in Audio;
4. Call Image searchable to get total hit count for Image;
5. Call PDF searchable to get total hit count for Image.

So, Lucene will need do 6 search operations for these 3 index. Definitely, the performance will be an issue. 

Any experts can give me some advice? Thanks!

Tony



       
--0-1108074553-1215727661=:13045--

From java-user-return-34892-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 11 00:56:55 2008
Return-Path: <java-user-return-34892-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 15010 invoked from network); 11 Jul 2008 00:56:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Jul 2008 00:56:55 -0000
Received: (qmail 41091 invoked by uid 500); 11 Jul 2008 00:56:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41061 invoked by uid 500); 11 Jul 2008 00:56:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41050 invoked by uid 99); 11 Jul 2008 00:56:41 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Jul 2008 17:56:41 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Jul 2008 00:55:46 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KH6vg-0006xn-HH
	for java-user@lucene.apache.org; Thu, 10 Jul 2008 17:56:08 -0700
Message-ID: <18394786.post@talk.nabble.com>
Date: Thu, 10 Jul 2008 17:56:08 -0700 (PDT)
From: blazingwolf7 <blazingwolf7@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: .fdt file
In-Reply-To: <c68e39170807100805s7716fc10xf1e79e619b7a7ea8@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: blazingwolf7@gmail.com
References: <18373913.post@talk.nabble.com> <c68e39170807091806h3665660ey4f81c190c2488113@mail.gmail.com> <18375077.post@talk.nabble.com> <c68e39170807092205mb2c1fdckfba1bdc877e343ef@mail.gmail.com> <18376301.post@talk.nabble.com> <c68e39170807100805s7716fc10xf1e79e619b7a7ea8@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Thanks. I think I will follow the advice. But just for the sack of curiosity,
can what I suggest be done ?


Yonik Seeley wrote:
> 
> On Thu, Jul 10, 2008 at 1:42 AM, blazingwolf7 <blazingwolf7@gmail.com>
> wrote:
>> Well, I am trying to extract the URL and contentLength from the ".fdt"
>> file.
>> I am planning to use both of these values in a filter to remove certain
>> links to be display in the search result. The problem is, I am told not
>> to
>> use the IndexReader to retrieve these values for each document found
>> matching with the query.
>>
>> So now, instead, I will have to retrieve the entire .fdt file, extract
>> both
>> the values and store it into an arraylist which will be use later.  I am
>> having problem extracting the entire file without using all the seek()
>> method to determine the position of the document.
>>
>> Any suggestion?
> 
> You're trying to do things at too low of a level (bypassing Lucene's
> public APIs)
> I suggested earlier that you index the URL untokenized, and then use
> the FieldCache.  That will allow you to easily retrieve a String[] of
> all the URLs.
> 
> -Yonik
> 
> 
>> Yonik Seeley wrote:
>>>
>>> On Wed, Jul 9, 2008 at 11:13 PM, blazingwolf7 <blazingwolf7@gmail.com>
>>> wrote:
>>>> Sorry,but I am still quite new to Lucene. What exactly is "cp"?
>>>
>>> The unix command for copy (hence the smiley).
>>>
>>> Some of your recent questions seem to be suffering from an XY problem:
>>> http://www.perlmonks.org/index.pl?node_id=542341
>>> You may get more help by explaining what you are trying to do.
>>>
>>> -Yonik
>>>
>>>> Yonik Seeley wrote:
>>>>>
>>>>> On Wed, Jul 9, 2008 at 9:01 PM, blazingwolf7 <blazingwolf7@gmail.com>
>>>>> wrote:
>>>>>> I had recently found out that Lucene will retrieve the content of a
>>>>>> document
>>>>>> from a file ".fdt". I am trying to retrieve the entire file in one go
>>>>>> instead of retrieving it based on document number. can it be done?
>>>>>
>>>>> "cp" can retrieve the file on one go ;-)
>>>>>
>>>>> Other than that, the format is documented here:
>>>>> http://lucene.apache.org/java/docs/fileformats.html
>>>>> But I'm not sure why retrieving by document number won't work for you.
>>>>>
>>>>> -Yonik
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>>
>>
>> --
>> View this message in context:
>> http://www.nabble.com/.fdt-file-tp18373913p18376301.html
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/.fdt-file-tp18373913p18394786.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34893-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 11 01:50:45 2008
Return-Path: <java-user-return-34893-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 50817 invoked from network); 11 Jul 2008 01:50:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Jul 2008 01:50:44 -0000
Received: (qmail 66698 invoked by uid 500); 11 Jul 2008 01:50:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66667 invoked by uid 500); 11 Jul 2008 01:50:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66656 invoked by uid 99); 11 Jul 2008 01:50:38 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Jul 2008 18:50:38 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=SPF_NEUTRAL,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.5] (HELO spunkymail-a5.g.dreamhost.com) (208.97.132.5)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Jul 2008 01:49:43 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a5.g.dreamhost.com (Postfix) with ESMTP id 1FD3021636
	for <java-user@lucene.apache.org>; Thu, 10 Jul 2008 18:50:05 -0700 (PDT)
Message-Id: <4DA8BB31-CDD6-4CAE-91C7-E2435947F7F6@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <18376301.post@talk.nabble.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: .fdt file
Date: Thu, 10 Jul 2008 21:50:03 -0400
References: <18373913.post@talk.nabble.com> <c68e39170807091806h3665660ey4f81c190c2488113@mail.gmail.com> <18375077.post@talk.nabble.com> <c68e39170807092205mb2c1fdckfba1bdc877e343ef@mail.gmail.com> <18376301.post@talk.nabble.com>
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org


On Jul 10, 2008, at 1:42 AM, blazingwolf7 wrote:

>
> Well, I am trying to extract the URL and contentLength from the  
> ".fdt" file.
> I am planning to use both of these values in a filter to remove  
> certain
> links to be display in the search result. The problem is, I am told  
> not to
> use the IndexReader to retrieve these values for each document found
> matching with the query.

Are you implying that using the IR would solve your problem, but for  
some reason you're architect (or whatever you call the person making  
the decisions) told you not to?  If so, can you explain more the  
reasoning?

>
>
> So now, instead, I will have to retrieve the entire .fdt file,  
> extract both
> the values and store it into an arraylist which will be use later.   
> I am
> having problem extracting the entire file without using all the seek()
> method to determine the position of the document.
>
> Any suggestion?
>
>
> Yonik Seeley wrote:
>>
>> On Wed, Jul 9, 2008 at 11:13 PM, blazingwolf7  
>> <blazingwolf7@gmail.com>
>> wrote:
>>> Sorry,but I am still quite new to Lucene. What exactly is "cp"?
>>
>> The unix command for copy (hence the smiley).
>>
>> Some of your recent questions seem to be suffering from an XY  
>> problem:
>> http://www.perlmonks.org/index.pl?node_id=542341
>> You may get more help by explaining what you are trying to do.
>>
>> -Yonik
>>
>>> Yonik Seeley wrote:
>>>>
>>>> On Wed, Jul 9, 2008 at 9:01 PM, blazingwolf7 <blazingwolf7@gmail.com 
>>>> >
>>>> wrote:
>>>>> I had recently found out that Lucene will retrieve the content  
>>>>> of a
>>>>> document
>>>>> from a file ".fdt". I am trying to retrieve the entire file in  
>>>>> one go
>>>>> instead of retrieving it based on document number. can it be done?
>>>>
>>>> "cp" can retrieve the file on one go ;-)
>>>>
>>>> Other than that, the format is documented here:
>>>> http://lucene.apache.org/java/docs/fileformats.html
>>>> But I'm not sure why retrieving by document number won't work for  
>>>> you.
>>>>
>>>> -Yonik
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>
> -- 
> View this message in context: http://www.nabble.com/.fdt-file-tp18373913p18376301.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

--------------------------
Grant Ingersoll
http://www.lucidimagination.com

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ








---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34894-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 11 02:12:24 2008
Return-Path: <java-user-return-34894-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58888 invoked from network); 11 Jul 2008 02:12:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Jul 2008 02:12:24 -0000
Received: (qmail 76335 invoked by uid 500); 11 Jul 2008 02:12:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76295 invoked by uid 500); 11 Jul 2008 02:12:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76284 invoked by uid 99); 11 Jul 2008 02:12:17 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Jul 2008 19:12:17 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Jul 2008 02:11:22 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KH86q-0000vZ-A2
	for java-user@lucene.apache.org; Thu, 10 Jul 2008 19:11:44 -0700
Message-ID: <18395519.post@talk.nabble.com>
Date: Thu, 10 Jul 2008 19:11:44 -0700 (PDT)
From: blazingwolf7 <blazingwolf7@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: .fdt file
In-Reply-To: <4DA8BB31-CDD6-4CAE-91C7-E2435947F7F6@apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: blazingwolf7@gmail.com
References: <18373913.post@talk.nabble.com> <c68e39170807091806h3665660ey4f81c190c2488113@mail.gmail.com> <18375077.post@talk.nabble.com> <c68e39170807092205mb2c1fdckfba1bdc877e343ef@mail.gmail.com> <18376301.post@talk.nabble.com> <4DA8BB31-CDD6-4CAE-91C7-E2435947F7F6@apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org


Well, according to him, using the reader to access the index everytime a
document is found to retrieve certain values is inefficient. Meaning if
there is 500k document, the index will be access 500k times. It might affect
the performance of the search.

So I am instructed to retrieve all the necessary values at the beginning of
the search and store it. Later the values will be retrieve from there. I am
cracking my head trying to do that%-|


Grant Ingersoll-6 wrote:
> 
> 
> On Jul 10, 2008, at 1:42 AM, blazingwolf7 wrote:
> 
>>
>> Well, I am trying to extract the URL and contentLength from the  
>> ".fdt" file.
>> I am planning to use both of these values in a filter to remove  
>> certain
>> links to be display in the search result. The problem is, I am told  
>> not to
>> use the IndexReader to retrieve these values for each document found
>> matching with the query.
> 
> Are you implying that using the IR would solve your problem, but for  
> some reason you're architect (or whatever you call the person making  
> the decisions) told you not to?  If so, can you explain more the  
> reasoning?
> 
>>
>>
>> So now, instead, I will have to retrieve the entire .fdt file,  
>> extract both
>> the values and store it into an arraylist which will be use later.   
>> I am
>> having problem extracting the entire file without using all the seek()
>> method to determine the position of the document.
>>
>> Any suggestion?
>>
>>
>> Yonik Seeley wrote:
>>>
>>> On Wed, Jul 9, 2008 at 11:13 PM, blazingwolf7  
>>> <blazingwolf7@gmail.com>
>>> wrote:
>>>> Sorry,but I am still quite new to Lucene. What exactly is "cp"?
>>>
>>> The unix command for copy (hence the smiley).
>>>
>>> Some of your recent questions seem to be suffering from an XY  
>>> problem:
>>> http://www.perlmonks.org/index.pl?node_id=542341
>>> You may get more help by explaining what you are trying to do.
>>>
>>> -Yonik
>>>
>>>> Yonik Seeley wrote:
>>>>>
>>>>> On Wed, Jul 9, 2008 at 9:01 PM, blazingwolf7 <blazingwolf7@gmail.com 
>>>>> >
>>>>> wrote:
>>>>>> I had recently found out that Lucene will retrieve the content  
>>>>>> of a
>>>>>> document
>>>>>> from a file ".fdt". I am trying to retrieve the entire file in  
>>>>>> one go
>>>>>> instead of retrieving it based on document number. can it be done?
>>>>>
>>>>> "cp" can retrieve the file on one go ;-)
>>>>>
>>>>> Other than that, the format is documented here:
>>>>> http://lucene.apache.org/java/docs/fileformats.html
>>>>> But I'm not sure why retrieving by document number won't work for  
>>>>> you.
>>>>>
>>>>> -Yonik
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>>
>>
>> -- 
>> View this message in context:
>> http://www.nabble.com/.fdt-file-tp18373913p18376301.html
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
> 
> --------------------------
> Grant Ingersoll
> http://www.lucidimagination.com
> 
> Lucene Helpful Hints:
> http://wiki.apache.org/lucene-java/BasicsOfPerformance
> http://wiki.apache.org/lucene-java/LuceneFAQ
> 
> 
> 
> 
> 
> 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/.fdt-file-tp18373913p18395519.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34895-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 11 02:41:13 2008
Return-Path: <java-user-return-34895-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 66678 invoked from network); 11 Jul 2008 02:41:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Jul 2008 02:41:13 -0000
Received: (qmail 90346 invoked by uid 500); 11 Jul 2008 02:41:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90320 invoked by uid 500); 11 Jul 2008 02:41:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90309 invoked by uid 99); 11 Jul 2008 02:41:07 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Jul 2008 19:41:07 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [65.89.232.7] (HELO thebluezone.net) (65.89.232.7)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Jul 2008 02:40:12 +0000
Received: from localhost (localhost [127.0.0.1])
	by thebluezone.net (Postfix) with ESMTP id C22A3286C0E
	for <java-user@lucene.apache.org>; Thu, 10 Jul 2008 20:40:01 -0600 (MDT)
Received: from thebluezone.net ([127.0.0.1])
	by localhost (mail1 [127.0.0.1]) (amavisd-new, port 10024) with ESMTP
	id 10751-08 for <java-user@lucene.apache.org>;
	Thu, 10 Jul 2008 20:39:59 -0600 (MDT)
Received: from desktop (unknown [65.89.233.61])
	by thebluezone.net (Postfix) with ESMTP id 7322E286C0C
	for <java-user@lucene.apache.org>; Thu, 10 Jul 2008 20:39:59 -0600 (MDT)
From: "John Griffin" <jgriffin@thebluezone.net>
To: <java-user@lucene.apache.org>
References: <18295066.post@talk.nabble.com> <4875F939.20507@scalix.com>
Subject: RE: newbie question (for John Griffin)
Date: Thu, 10 Jul 2008 20:39:52 -0600
Message-ID: <ED66351E075642E987CBBA6F2137292C@desktop>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
In-Reply-To: <4875F939.20507@scalix.com>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.5512
Thread-Index: AcjihE+nJZueYew4Rayl09ngO8NZGAAebSZQ
X-Virus-Scanned: by thebluezone.net
X-Virus-Checked: Checked by ClamAV on apache.org

Chris,

The code you refer to in the blog is 5 years old! Some of the code is no
longer valid with the newer Lucene jars. I wouldn't use it to test anything.


My suspicion is that your index itself is suspect. Let's see the code you
use to build the index with a small data set that will show what you are
trying to accomplish.

BUT FIRST! Look at your built index with Luke before doing this to make sure
that what you THINK you have in your index is really what you have.

Luke is at http://www.getopt.org/luke/. This is probably THE most important
tool you'll have in your arsenal and is pretty easy to use. You can query
your index with it and see if it responds the way you think it should. You
can enter your subject:"Good Morning" query and see what happens. If Luke
can't find what you're querying for then your code won't. 

John G.


-----Original Message-----
From: Chris Bamford [mailto:chris.bamford@scalix.com] 
Sent: Thursday, July 10, 2008 5:58 AM
To: java-user@lucene.apache.org
Subject: Re: newbie question (for John Griffin)

Hi John,

Further to my question below, I did some back-to-basics investigation of 
PhraseQueries and found that even basic ones fail for me...
I found the attached code on the Internet (see 
http://affy.blogspot.com/2003/04/codebit-examples-for-all-of-lucenes.html) 
and this fails too...  Can you explain why?  I would expect the first 
test to deliver 2 hits.

I have tried with Lucene 2.0 and 2.3.2 jars and both fail.

Thanks again,

- Chris



Chris Bamford wrote:
> Hi John,
>
> Just continuing from an earlier question where I asked you how to 
> handle strings like "from:fred flintston*" (sorry I have lost the 
> original email).
> You advised me to write my own BooleanQuery and add to it Prefix- / 
> Term- / Phrase- Querys as appropriate.  I have done so, but am having 
> trouble with the result - my PhraseQueries just do not get any hits at 
> all  :-(
> My code looks for quotes - if it finds them, it treats the quoted 
> phrase as a PhraseQuery and sets the slop factor to 0.
> so,  an input of:
>
>    subject:"Good Morning"
>
> results in a PhraseQuery (which I add to my BooleanQuery and then dump 
> with toString()) of:
>
>    +subject:"good morning"
>
> ... which fails.
> However, if I break it into 2 TermQuerys, it works (but that's not 
> what I want).
>
> What am I missing?
>
> Thanks,
>
> - Chris
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


-- 
------------------------------------------------------------------------
*Chris Bamford*
Senior Development Engineer 	<http://www.scalix.com>
------------------------------------------------------------------------
/Email / MSN/ 	chris.bamford@scalix.com
/Tel/ 	+44 (0)1344 381814 	  	/Skype/ 	c.bamford



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34896-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 11 02:44:13 2008
Return-Path: <java-user-return-34896-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67392 invoked from network); 11 Jul 2008 02:44:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Jul 2008 02:44:13 -0000
Received: (qmail 92859 invoked by uid 500); 11 Jul 2008 02:44:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92819 invoked by uid 500); 11 Jul 2008 02:44:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92808 invoked by uid 99); 11 Jul 2008 02:44:07 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Jul 2008 19:44:07 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [65.89.232.7] (HELO thebluezone.net) (65.89.232.7)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Jul 2008 02:43:12 +0000
Received: from localhost (localhost [127.0.0.1])
	by thebluezone.net (Postfix) with ESMTP id 78923286C16
	for <java-user@lucene.apache.org>; Thu, 10 Jul 2008 20:43:34 -0600 (MDT)
Received: from thebluezone.net ([127.0.0.1])
	by localhost (mail1 [127.0.0.1]) (amavisd-new, port 10024) with ESMTP
	id 11105-05 for <java-user@lucene.apache.org>;
	Thu, 10 Jul 2008 20:43:32 -0600 (MDT)
Received: from desktop (unknown [65.89.233.61])
	by thebluezone.net (Postfix) with ESMTP id 72596286C0C
	for <java-user@lucene.apache.org>; Thu, 10 Jul 2008 20:43:32 -0600 (MDT)
From: "John Griffin" <jgriffin@thebluezone.net>
To: <java-user@lucene.apache.org>
References: <18295066.post@talk.nabble.com> <48762773.60009@scalix.com>
Subject: RE: newbie question (for John Griffin) - fixed
Date: Thu, 10 Jul 2008 20:43:24 -0600
Message-ID: <E5B142977247418C9ABDD7503DB78E23@desktop>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
In-Reply-To: <48762773.60009@scalix.com>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.5512
Thread-Index: AcjioFBO4Jacof+VSU+O4IYC+ChSTQAX13bQ
X-Virus-Scanned: by thebluezone.net
X-Virus-Checked: Checked by ClamAV on apache.org

Chris,

-----Original Message-----
From: Chris Bamford [mailto:chris.bamford@scalix.com] 
Sent: Thursday, July 10, 2008 9:15 AM
To: java-user@lucene.apache.org
Subject: Re: newbie question (for John Griffin) - fixed

Hi John,

Please ignore my earlier questions on this subject, as I have got to the 
bottom of it.
I was not passing each word in the phrase as a separate Term to the 
query; 

==I'm not sure I understand. You want a phrase query so they should be
==passed as a phrase in quotes.


instead I was passing the whole string (doh!).

Thanks.

- Chris

Chris Bamford wrote:
> Hi John,
>
> Further to my question below, I did some back-to-basics investigation 
> of PhraseQueries and found that even basic ones fail for me...
> I found the attached code on the Internet (see 
> http://affy.blogspot.com/2003/04/codebit-examples-for-all-of-lucenes.html)

> and this fails too...  Can you explain why?  I would expect the first 
> test to deliver 2 hits.
>
> I have tried with Lucene 2.0 and 2.3.2 jars and both fail.
>
> Thanks again,
>
> - Chris
>
>
>
> Chris Bamford wrote:
>> Hi John,
>>
>> Just continuing from an earlier question where I asked you how to 
>> handle strings like "from:fred flintston*" (sorry I have lost the 
>> original email).
>> You advised me to write my own BooleanQuery and add to it Prefix- / 
>> Term- / Phrase- Querys as appropriate.  I have done so, but am having 
>> trouble with the result - my PhraseQueries just do not get any hits 
>> at all  :-(
>> My code looks for quotes - if it finds them, it treats the quoted 
>> phrase as a PhraseQuery and sets the slop factor to 0.
>> so,  an input of:
>>
>>    subject:"Good Morning"
>>
>> results in a PhraseQuery (which I add to my BooleanQuery and then 
>> dump with toString()) of:
>>
>>    +subject:"good morning"
>>
>> ... which fails.
>> However, if I break it into 2 TermQuerys, it works (but that's not 
>> what I want).
>>
>> What am I missing?
>>
>> Thanks,
>>
>> - Chris
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
>
> ------------------------------------------------------------------------
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


-- 
------------------------------------------------------------------------
*Chris Bamford*
Senior Development Engineer 	<http://www.scalix.com>
------------------------------------------------------------------------
/Email / MSN/ 	chris.bamford@scalix.com
/Tel/ 	+44 (0)1344 381814 	  	/Skype/ 	c.bamford


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34897-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 11 02:55:10 2008
Return-Path: <java-user-return-34897-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70984 invoked from network); 11 Jul 2008 02:55:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Jul 2008 02:55:10 -0000
Received: (qmail 4154 invoked by uid 500); 11 Jul 2008 02:55:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4110 invoked by uid 500); 11 Jul 2008 02:55:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4099 invoked by uid 99); 11 Jul 2008 02:55:04 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Jul 2008 19:55:04 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [65.89.232.7] (HELO thebluezone.net) (65.89.232.7)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Jul 2008 02:54:12 +0000
Received: from localhost (localhost [127.0.0.1])
	by thebluezone.net (Postfix) with ESMTP id 2AAF9286C0C
	for <java-user@lucene.apache.org>; Thu, 10 Jul 2008 20:54:34 -0600 (MDT)
Received: from thebluezone.net ([127.0.0.1])
	by localhost (mail1 [127.0.0.1]) (amavisd-new, port 10024) with ESMTP
	id 13046-03 for <java-user@lucene.apache.org>;
	Thu, 10 Jul 2008 20:54:29 -0600 (MDT)
Received: from desktop (unknown [65.89.233.61])
	by thebluezone.net (Postfix) with ESMTP id 15ED2286BFB
	for <java-user@lucene.apache.org>; Thu, 10 Jul 2008 20:54:29 -0600 (MDT)
From: "John Griffin" <jgriffin@thebluezone.net>
To: <java-user@lucene.apache.org>
Subject: Deletions
Date: Thu, 10 Jul 2008 20:54:21 -0600
Message-ID: <1842802D6BF0436FAA657B2FAE28C0B0@desktop>
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_0021_01C8E2CF.211AA0C0"
X-Mailer: Microsoft Office Outlook 11
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.5512
Thread-Index: AcjjAWt7IUfSnJwSQ0yDMmFYT/52PQ==
X-Virus-Scanned: by thebluezone.net
X-Virus-Checked: Checked by ClamAV on apache.org

------=_NextPart_000_0021_01C8E2CF.211AA0C0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit

Guys (and Gals),

 

A question on index deletions, what exactly happens to the Lucene document
numbers in an index when a document is deleted? Let's say I have a 5 doc
index.

 

Document #                  Doc

0                                  doc1                             

1                                  doc2

2                                  doc3

3                                  doc4

4                                  doc5

 

If doc 2 is deleted, is this what I'm left with?

 

Document #                  Doc

0                                  doc1                             

1                                  doc2

2                                  doc4

3                                  doc5

 

This is my assumption. If not, what DOES happen?

 

TIA

 

John G.

 

 

 


------=_NextPart_000_0021_01C8E2CF.211AA0C0--


From java-user-return-34898-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 11 04:54:30 2008
Return-Path: <java-user-return-34898-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1057 invoked from network); 11 Jul 2008 04:54:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Jul 2008 04:54:30 -0000
Received: (qmail 83129 invoked by uid 500); 11 Jul 2008 04:54:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83094 invoked by uid 500); 11 Jul 2008 04:54:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83082 invoked by uid 99); 11 Jul 2008 04:54:24 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Jul 2008 21:54:24 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of aditigupta20@gmail.com designates 209.85.142.186 as permitted sender)
Received: from [209.85.142.186] (HELO ti-out-0910.google.com) (209.85.142.186)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Jul 2008 04:53:32 +0000
Received: by ti-out-0910.google.com with SMTP id b8so1721442tic.11
        for <java-user@lucene.apache.org>; Thu, 10 Jul 2008 21:53:53 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=S4dspqmrekq30cGVFlDBzvyLy2BWMfO2kpX9CUa/9zU=;
        b=rBO9ZKJJDK7nxsozw4i/JrBqWHvOeMjop/h8gdGzD3J63bxLFedtBcSgXskjy9Cs+k
         xzb3hji06uVcCwP0ZoikH9/jpYbgmwuD8R1MPBO8trhWyzXnsWap1wO4qy8ZMB2dk1Se
         XHon8zOp/34oPt8riODAc76hNjpmN1uXcUuEU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=QXEu0Q6t9E3WCY/YlF8zcE8wVICjjoHljVCemHjAogxENF8ErOkfOzK6U1CTNGN1sZ
         dw64gFw2CkF63aZBisGJGNGjIKOn0Vxax5o5p1giEI5UBzhELKMMaKqGRsa2hyy9E/yd
         gBUgztEGxg6UQKv0rY0fcFyU+8rOx/oLJta7o=
Received: by 10.110.46.3 with SMTP id t3mr5631950tit.33.1215752033662;
        Thu, 10 Jul 2008 21:53:53 -0700 (PDT)
Received: by 10.110.39.2 with HTTP; Thu, 10 Jul 2008 21:53:53 -0700 (PDT)
Message-ID: <6fc71b230807102153p52e3d175x2d2151cb92f977f2@mail.gmail.com>
Date: Fri, 11 Jul 2008 10:23:53 +0530
From: "Aditi Goyal" <aditigupta20@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Can we update a field on the current index
In-Reply-To: <5157C12F-37FF-4646-9F95-6F68FFD89D96@mikemccandless.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_34504_32075568.1215752033660"
References: <6fc71b230807100435i66b8b8d9y72e557530a891581@mail.gmail.com>
	 <5157C12F-37FF-4646-9F95-6F68FFD89D96@mikemccandless.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_34504_32075568.1215752033660
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Thanks Mike for your valuable time.

Regards,
Aditi

On Thu, Jul 10, 2008 at 5:36 PM, Michael McCandless <
lucene@mikemccandless.com> wrote:

>
> Yes you must delete the entire document and then re-index a new one, to
> update a single Field.
>
> There is some work underway, or at least a Jira issue opened, towards
> improving this situation, here:
>
>    https://issues.apache.org/jira/browse/LUCENE-1231
>
> But it will be some time before that's available.
>
> Mike
>
>
> Aditi Goyal wrote:
>
>  Hi,
>>
>> I want to modify a field on the current index. Can it be done?
>> For what I have heard that we cannot update the index . It has to be
>> reindexed by deleting and then indexing again.
>>
>>
>> Thanks,
>> Aditi
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_34504_32075568.1215752033660--

From java-user-return-34899-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 11 04:54:52 2008
Return-Path: <java-user-return-34899-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1155 invoked from network); 11 Jul 2008 04:54:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Jul 2008 04:54:52 -0000
Received: (qmail 84885 invoked by uid 500); 11 Jul 2008 04:54:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84856 invoked by uid 500); 11 Jul 2008 04:54:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 84845 invoked by uid 99); 11 Jul 2008 04:54:46 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 10 Jul 2008 21:54:46 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of anshumg@gmail.com designates 72.14.220.157 as permitted sender)
Received: from [72.14.220.157] (HELO fg-out-1718.google.com) (72.14.220.157)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Jul 2008 04:53:54 +0000
Received: by fg-out-1718.google.com with SMTP id l27so1678247fgb.27
        for <java-user@lucene.apache.org>; Thu, 10 Jul 2008 21:54:15 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=5O8tHQmhiCqg0LoH1OVH1/e5L98Xgf2ILD95zPH5q7g=;
        b=wC+5v8XbIGjr90CVEnrRP1zqGyQ9LUTTU7YPWfZOvGLTxaJoPtXgfuu0ohGlsc0CZX
         CgZCHgDNpmr8Nmqvd2oBPVM9oKCCwSYSDaMv6Y0YuGYFwI+C0O7mrPgY9f1mR4fnD2G1
         VdhdLFDcgcxSnbA4WY6fXsax+IBDCyXvNN1+s=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=Ds5/ECDHEe5lDrwJwy7nOB7nyauFKswMg4nqwODpMqAHDK3TewSdLHH7Xevwj9o4Kq
         2LT+ezTV2C25l45qybyk9SnlWtOYmBMn5b6j5ooGNar7GnBRcVtOdhjN2PYh8LIQW0tc
         rVGithQd2AGMhVHy5R7LqX9vdIcA9vIPssZ3w=
Received: by 10.125.132.18 with SMTP id j18mr2699713mkn.63.1215752055356;
        Thu, 10 Jul 2008 21:54:15 -0700 (PDT)
Received: by 10.125.162.6 with HTTP; Thu, 10 Jul 2008 21:54:15 -0700 (PDT)
Message-ID: <867513fe0807102154p5fef5b7doca43305a81052a9d@mail.gmail.com>
Date: Fri, 11 Jul 2008 10:24:15 +0530
From: Anshum <anshumg@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Deletions
In-Reply-To: <1842802D6BF0436FAA657B2FAE28C0B0@desktop>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_17543_18444345.1215752055325"
References: <1842802D6BF0436FAA657B2FAE28C0B0@desktop>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_17543_18444345.1215752055325
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi John,

In case of deletions, it is just a delayed delete. In other words, the doc
is just marked as deleted in the deletable file, leaving a void in the
numbering of docs. The actual shifting of document ids happens only when you
optimize the index. In that case the deletables file is used to physically
remove the docs from the index.

Hope that clears the doubt :)

--
Anshum Gupta
Naukri Labs!

On Fri, Jul 11, 2008 at 8:24 AM, John Griffin <jgriffin@thebluezone.net>
wrote:

> Guys (and Gals),
>
>
>
> A question on index deletions, what exactly happens to the Lucene document
> numbers in an index when a document is deleted? Let's say I have a 5 doc
> index.
>
>
>
> Document #                  Doc
>
> 0                                  doc1
>
> 1                                  doc2
>
> 2                                  doc3
>
> 3                                  doc4
>
> 4                                  doc5
>
>
>
> If doc 2 is deleted, is this what I'm left with?
>
>
>
> Document #                  Doc
>
> 0                                  doc1
>
> 1                                  doc2
>
> 2                                  doc4
>
> 3                                  doc5
>
>
>
> This is my assumption. If not, what DOES happen?
>
>
>
> TIA
>
>
>
> John G.
>
>
>
>
>
>
>
>


-- 
--
The facts expressed here belong to everybody, the opinions to me.
The distinction is yours to draw............

------=_Part_17543_18444345.1215752055325--

From java-user-return-34900-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 11 07:07:59 2008
Return-Path: <java-user-return-34900-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36867 invoked from network); 11 Jul 2008 07:07:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Jul 2008 07:07:59 -0000
Received: (qmail 98753 invoked by uid 500); 11 Jul 2008 07:07:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98719 invoked by uid 500); 11 Jul 2008 07:07:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98708 invoked by uid 99); 11 Jul 2008 07:07:53 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Jul 2008 00:07:53 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of christopher.kolstad@gmail.com designates 209.85.132.248 as permitted sender)
Received: from [209.85.132.248] (HELO an-out-0708.google.com) (209.85.132.248)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Jul 2008 07:07:01 +0000
Received: by an-out-0708.google.com with SMTP id c37so782994anc.49
        for <java-user@lucene.apache.org>; Fri, 11 Jul 2008 00:07:23 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:sender
         :to:subject:in-reply-to:mime-version:content-type:references
         :x-google-sender-auth;
        bh=+MAVaam6AT75dWtxZwQh3mCx3jC//Sc5Xm7ALSt4iYg=;
        b=iRkS/XaeXHbdm/Yxp1PuAAPDWOeNo4ahq4We83pfbXJK1B2FE/krTYoMvX+3mZiKhy
         Sbzc94iU1PXlrO5PNffUOxyfScJ58dxTAArfO6VTkCl2eVPjDoNiTznVksy4iBXHHNQv
         v0Y8s3X1HHuQ3VDDkM1f1t0Yr4shB+rYTpBIE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:sender:to:subject:in-reply-to:mime-version
         :content-type:references:x-google-sender-auth;
        b=UmiMXz5VXu9ttsS8XUnu8Eoug8eYODmSAH5nop/4DdmVj6zE3wioeDApOeKsnaE9lQ
         5pwt6GSrJBLuBMTXTqmVaCOf59gcxxpJM4J+9Vn1GH9XwcrcZwXDfDiowfrVrm/tbr6Y
         PFv2jSbXXdjaAW1MWMu/nIetbOR/MFNzVU41A=
Received: by 10.100.31.3 with SMTP id e3mr7933398ane.21.1215760042778;
        Fri, 11 Jul 2008 00:07:22 -0700 (PDT)
Received: by 10.100.248.12 with HTTP; Fri, 11 Jul 2008 00:07:22 -0700 (PDT)
Message-ID: <dd3751860807110007k2513aa6l883390703282c4f3@mail.gmail.com>
Date: Fri, 11 Jul 2008 09:07:22 +0200
From: "Christopher Kolstad" <chriswk@ovitas.no>
Sender: christopher.kolstad@gmail.com
To: java-user@lucene.apache.org
Subject: Re: Best practice for updating an index when reindexing is not an option
In-Reply-To: <01681492-BD51-41FF-906D-A0C83516513F@mikemccandless.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_28092_8455012.1215760042766"
References: <dd3751860807100615p3edc635dvf64b06edf4a24442@mail.gmail.com>
	 <01681492-BD51-41FF-906D-A0C83516513F@mikemccandless.com>
X-Google-Sender-Auth: 259d2b717e3e18d3
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_28092_8455012.1215760042766
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi.

First, thanks for the reply.

Why does SubversionUpdate require shutting down the IndexSearcher?  What
> goes wrong?
>

SubversionUpdate requires shutting down the IndexSearcher in our current
implementation because the old index files are deleted in the tag we're
switching to. Sorry, just realised that my last mail didn't state that we
don't in fact to an "svn up", but rather an "svn switch". Thus, when we try
to perform the update SubversionUpdate fails due to file lock issues when
trying to update (deleting the old lucene files) the lucene index directory
(The relevant code for the update action is quoted below).

You might want to switch instead to rsync.
>

I'm hoping I won't have to, firstly because I'm more familiar with
subversion, secondly because that would require me to configure rsync for
windows, and I'm still not sure if that will help anything with the file
lock issues we're trying to avoid.

A Lucene index is fundamentally write once, so, syncing changes over should
> simply be copying over new files and removing now-deleted files.  You won't
> be able to remove files held open by the IndexSearcher, but, once the
> IndexSearcher restarts you'd then be able to delete those files on the next
> sync.


So I should be able to run the switch and then restart the IndexSearcher,
instead of turning off the IndexSearcher, run the switch, turn on the
IndexSearcher. I'd see how that would work with a linux box, having a bit
more trouble seeing how I will get it to work with a windows box (and my
live server is unfortunately a Windows 2003 box), Subversion keeps running
into file lock issues when I switch from one tag to the other if I try to
keep the search active. With Lucene 2.1 it even ran into file lock issues
after I'd disabled the search and was performing the switch. Now, when we're
using the Lucene 2.3.2 jar the lock issues has mostly gone (once in 3
months, instead of every switch/update).

Current code:

disableSearch(request); //Sets the SearchActive boolean to false
>
> Search searcher =
> (Search)ctx.getAttribute(FelleskatalogenStartupServlet.SEARCH);
>       if (searcher != null) {
>         searcher.clear();
>      }

           String latestTag =
> SubversionUtil.getInstance().getLatestTag(getTagUrl(request));
>
>             SubversionUtil.getInstance().runSwitch(getRoot(request),
> getTagUrl(request) + "/" + latestTag);
>
>             if (log.isDebugEnabled()) {
>                 log.debug("Index set to " + getRoot(request) + "/lucene");
>             }
>
>             ctx.setAttribute(FelleskatalogenStartupServlet.SEARCH, new
> Search(getRoot(request) + "/lucene"));
>             ctx.setAttribute(FelleskatalogenStartupServlet.SEARCHACTIVE,
> new Boolean(true));
>


BR,

Christopher

On Thu, Jul 10, 2008 at 4:27 PM, Michael McCandless <
lucene@mikemccandless.com> wrote:



>
> Why does SubversionUpdate require shutting down the IndexSearcher?  What
> goes wrong?
>
> You might want to switch instead to rsync.
>
> A Lucene index is fundamentally write once, so, syncing changes over should
> simply be copying over new files and removing now-deleted files.  You won't
> be able to remove files held open by the IndexSearcher, but, once the
> IndexSearcher restarts you'd then be able to delete those files on the next
> sync.
>
> Mike
>
>
> Christopher Kolstad wrote:
>
>  Hi.
>>
>> Currently using Lucene 2.3.2 in a tomcat webapp. We have an action
>> configured that performs reindexing on our staging server. However, our
>> live
>> server can not reindex since it does not have the necessary dtd files to
>> process the xml.
>>
>> To update the index on the live server we perform a subversion update on
>> the
>> lucene index directory.
>> Unfortunately this makes it necessary to stop the IndexSearcher while the
>> SubversionUpdate is doing its thing.
>>
>> Presently we've had a requirement from our customer to not disable search.
>>
>> So my idea was to copy the index directory to another directory and then
>> switch the IndexSearcher from the original index directory to the
>> temporary
>> directory.
>> Then perform the Subversion update, and when done, switch the
>> IndexSearcher
>> back to the original (now, updated) index directory.
>>
>> Does anyone have any other suggestions on how to update the index
>> directory
>> from subversion without having to disable the IndexSearcher?
>>
>> BR
>> Christopher
>>
>> --
>> Regards,
>> Christopher Kolstad
>> =============================
>> |100 little bugs in the code, debug one, |
>> |recompile, 101 little bugs in the code |
>> =============================
>>
>> E-mail: chriswk@ifi.uio.no (University)
>> christopher.kolstad@gmail.com (Home)
>> chriswk@ovitas.no (Job)
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
Regards,
Christopher Kolstad
=============================
|100 little bugs in the code, debug one, |
|recompile, 101 little bugs in the code |
=============================

E-mail: chriswk@ifi.uio.no (University)
christopher.kolstad@gmail.com (Home)
chriswk@ovitas.no (Job)

------=_Part_28092_8455012.1215760042766--

From java-user-return-34901-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 11 09:11:17 2008
Return-Path: <java-user-return-34901-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73302 invoked from network); 11 Jul 2008 09:11:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Jul 2008 09:11:17 -0000
Received: (qmail 39226 invoked by uid 500); 11 Jul 2008 09:11:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39194 invoked by uid 500); 11 Jul 2008 09:11:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39183 invoked by uid 99); 11 Jul 2008 09:11:11 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Jul 2008 02:11:11 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [74.125.46.28] (HELO yw-out-2324.google.com) (74.125.46.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Jul 2008 09:10:18 +0000
Received: by yw-out-2324.google.com with SMTP id 3so1554808ywj.5
        for <java-user@lucene.apache.org>; Fri, 11 Jul 2008 02:10:37 -0700 (PDT)
Received: by 10.150.192.7 with SMTP id p7mr15500910ybf.91.1215767437137;
        Fri, 11 Jul 2008 02:10:37 -0700 (PDT)
Received: from ?10.17.4.4? ( [72.93.214.93])
        by mx.google.com with ESMTPS id 9sm671009yws.5.2008.07.11.02.10.36
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Fri, 11 Jul 2008 02:10:36 -0700 (PDT)
Message-Id: <B47FCAB6-CAFD-41AD-AB01-03FFDB166DD1@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <6fc71b230807102153p52e3d175x2d2151cb92f977f2@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: Can we update a field on the current index
Date: Fri, 11 Jul 2008 05:10:35 -0400
References: <6fc71b230807100435i66b8b8d9y72e557530a891581@mail.gmail.com> <5157C12F-37FF-4646-9F95-6F68FFD89D96@mikemccandless.com> <6fc71b230807102153p52e3d175x2d2151cb92f977f2@mail.gmail.com>
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org


You're welcome!

And, feel free to go vote for that issue ... Jira's voting system lets  
us gauge importance of features like this over time :)

Mike

Aditi Goyal wrote:

> Thanks Mike for your valuable time.
>
> Regards,
> Aditi
>
> On Thu, Jul 10, 2008 at 5:36 PM, Michael McCandless <
> lucene@mikemccandless.com> wrote:
>
>>
>> Yes you must delete the entire document and then re-index a new  
>> one, to
>> update a single Field.
>>
>> There is some work underway, or at least a Jira issue opened, towards
>> improving this situation, here:
>>
>>   https://issues.apache.org/jira/browse/LUCENE-1231
>>
>> But it will be some time before that's available.
>>
>> Mike
>>
>>
>> Aditi Goyal wrote:
>>
>> Hi,
>>>
>>> I want to modify a field on the current index. Can it be done?
>>> For what I have heard that we cannot update the index . It has to be
>>> reindexed by deleting and then indexing again.
>>>
>>>
>>> Thanks,
>>> Aditi
>>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34902-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 11 09:34:47 2008
Return-Path: <java-user-return-34902-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81122 invoked from network); 11 Jul 2008 09:34:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Jul 2008 09:34:47 -0000
Received: (qmail 68859 invoked by uid 500); 11 Jul 2008 09:34:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68825 invoked by uid 500); 11 Jul 2008 09:34:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68814 invoked by uid 99); 11 Jul 2008 09:34:41 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Jul 2008 02:34:41 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=SPF_NEUTRAL,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [74.125.46.30] (HELO yw-out-2324.google.com) (74.125.46.30)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Jul 2008 09:33:46 +0000
Received: by yw-out-2324.google.com with SMTP id 3so1557756ywj.5
        for <java-user@lucene.apache.org>; Fri, 11 Jul 2008 02:34:06 -0700 (PDT)
Received: by 10.150.91.4 with SMTP id o4mr631818ybb.153.1215768846722;
        Fri, 11 Jul 2008 02:34:06 -0700 (PDT)
Received: from ?10.17.4.4? ( [72.93.214.93])
        by mx.google.com with ESMTPS id 33sm593259yxr.3.2008.07.11.02.34.05
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Fri, 11 Jul 2008 02:34:06 -0700 (PDT)
Message-Id: <95A2CED2-369E-4132-97E4-7488442D25A3@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <18395519.post@talk.nabble.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: .fdt file
Date: Fri, 11 Jul 2008 05:34:05 -0400
References: <18373913.post@talk.nabble.com> <c68e39170807091806h3665660ey4f81c190c2488113@mail.gmail.com> <18375077.post@talk.nabble.com> <c68e39170807092205mb2c1fdckfba1bdc877e343ef@mail.gmail.com> <18376301.post@talk.nabble.com> <4DA8BB31-CDD6-4CAE-91C7-E2435947F7F6@apache.org> <18395519.post@talk.nabble.com>
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org


I think the FieldCache API fits for this...

Its purpose is to do a one-time caching of a particular field's  
values, rendered as a straight array keyed by document ID.  So  
building that cache initially takes time and memory, but then getting  
the value for a particular document is extremely fast assuming your OS  
is not swapping...

Mike

blazingwolf7 wrote:

>
> Well, according to him, using the reader to access the index  
> everytime a
> document is found to retrieve certain values is inefficient. Meaning  
> if
> there is 500k document, the index will be access 500k times. It  
> might affect
> the performance of the search.
>
> So I am instructed to retrieve all the necessary values at the  
> beginning of
> the search and store it. Later the values will be retrieve from  
> there. I am
> cracking my head trying to do that%-|
>
>
> Grant Ingersoll-6 wrote:
>>
>>
>> On Jul 10, 2008, at 1:42 AM, blazingwolf7 wrote:
>>
>>>
>>> Well, I am trying to extract the URL and contentLength from the
>>> ".fdt" file.
>>> I am planning to use both of these values in a filter to remove
>>> certain
>>> links to be display in the search result. The problem is, I am told
>>> not to
>>> use the IndexReader to retrieve these values for each document found
>>> matching with the query.
>>
>> Are you implying that using the IR would solve your problem, but for
>> some reason you're architect (or whatever you call the person making
>> the decisions) told you not to?  If so, can you explain more the
>> reasoning?
>>
>>>
>>>
>>> So now, instead, I will have to retrieve the entire .fdt file,
>>> extract both
>>> the values and store it into an arraylist which will be use later.
>>> I am
>>> having problem extracting the entire file without using all the  
>>> seek()
>>> method to determine the position of the document.
>>>
>>> Any suggestion?
>>>
>>>
>>> Yonik Seeley wrote:
>>>>
>>>> On Wed, Jul 9, 2008 at 11:13 PM, blazingwolf7
>>>> <blazingwolf7@gmail.com>
>>>> wrote:
>>>>> Sorry,but I am still quite new to Lucene. What exactly is "cp"?
>>>>
>>>> The unix command for copy (hence the smiley).
>>>>
>>>> Some of your recent questions seem to be suffering from an XY
>>>> problem:
>>>> http://www.perlmonks.org/index.pl?node_id=542341
>>>> You may get more help by explaining what you are trying to do.
>>>>
>>>> -Yonik
>>>>
>>>>> Yonik Seeley wrote:
>>>>>>
>>>>>> On Wed, Jul 9, 2008 at 9:01 PM, blazingwolf7 <blazingwolf7@gmail.com
>>>>>>>
>>>>>> wrote:
>>>>>>> I had recently found out that Lucene will retrieve the content
>>>>>>> of a
>>>>>>> document
>>>>>>> from a file ".fdt". I am trying to retrieve the entire file in
>>>>>>> one go
>>>>>>> instead of retrieving it based on document number. can it be  
>>>>>>> done?
>>>>>>
>>>>>> "cp" can retrieve the file on one go ;-)
>>>>>>
>>>>>> Other than that, the format is documented here:
>>>>>> http://lucene.apache.org/java/docs/fileformats.html
>>>>>> But I'm not sure why retrieving by document number won't work for
>>>>>> you.
>>>>>>
>>>>>> -Yonik
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>>
>>>
>>> -- 
>>> View this message in context:
>>> http://www.nabble.com/.fdt-file-tp18373913p18376301.html
>>> Sent from the Lucene - Java Users mailing list archive at  
>>> Nabble.com.
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>
>> --------------------------
>> Grant Ingersoll
>> http://www.lucidimagination.com
>>
>> Lucene Helpful Hints:
>> http://wiki.apache.org/lucene-java/BasicsOfPerformance
>> http://wiki.apache.org/lucene-java/LuceneFAQ
>>
>>
>>
>>
>>
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>
> -- 
> View this message in context: http://www.nabble.com/.fdt-file-tp18373913p18395519.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34903-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 11 09:40:09 2008
Return-Path: <java-user-return-34903-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82665 invoked from network); 11 Jul 2008 09:40:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Jul 2008 09:40:09 -0000
Received: (qmail 78509 invoked by uid 500); 11 Jul 2008 09:40:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78464 invoked by uid 500); 11 Jul 2008 09:39:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78436 invoked by uid 99); 11 Jul 2008 09:39:59 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Jul 2008 02:39:59 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [74.125.46.30] (HELO yw-out-2324.google.com) (74.125.46.30)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Jul 2008 09:39:06 +0000
Received: by yw-out-2324.google.com with SMTP id 3so1558342ywj.5
        for <java-user@lucene.apache.org>; Fri, 11 Jul 2008 02:39:10 -0700 (PDT)
Received: by 10.151.145.21 with SMTP id x21mr4443444ybn.42.1215769149982;
        Fri, 11 Jul 2008 02:39:09 -0700 (PDT)
Received: from ?10.17.4.4? ( [72.93.214.93])
        by mx.google.com with ESMTPS id 6sm515551ywn.0.2008.07.11.02.39.09
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Fri, 11 Jul 2008 02:39:09 -0700 (PDT)
Message-Id: <54EF8D55-8DCF-4BBC-95B2-A7CFB15EC69B@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <867513fe0807102154p5fef5b7doca43305a81052a9d@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: Deletions
Date: Fri, 11 Jul 2008 05:39:08 -0400
References: <1842802D6BF0436FAA657B2FAE28C0B0@desktop> <867513fe0807102154p5fef5b7doca43305a81052a9d@mail.gmail.com>
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org


The deleted docs are actually stored separately, per segment, into  
files named _X_N.del, where X is the segment name and N is a  
generation count (keeps increasing by 1 every time new deletes are  
committed to that segment).

Normal segment merging will also collapse the deletes in those  
segments that were merged, thus collapsing down the docIDs.  You can  
also call IndexWriter.expungeDeletes() to collapse all holes from the  
index.  That method just merges adjacent segments that have deletes ...

Lucene used to also have a file "deletable" which tracked those index  
files that should be deleted, but that is no longer used as of 2.1.   
Instead, Lucene computes (using reference counting) which files in the  
directory are no longer referenced.

Mike

Anshum wrote:

> Hi John,
>
> In case of deletions, it is just a delayed delete. In other words,  
> the doc
> is just marked as deleted in the deletable file, leaving a void in the
> numbering of docs. The actual shifting of document ids happens only  
> when you
> optimize the index. In that case the deletables file is used to  
> physically
> remove the docs from the index.
>
> Hope that clears the doubt :)
>
> --
> Anshum Gupta
> Naukri Labs!
>
> On Fri, Jul 11, 2008 at 8:24 AM, John Griffin <jgriffin@thebluezone.net 
> >
> wrote:
>
>> Guys (and Gals),
>>
>>
>>
>> A question on index deletions, what exactly happens to the Lucene  
>> document
>> numbers in an index when a document is deleted? Let's say I have a  
>> 5 doc
>> index.
>>
>>
>>
>> Document #                  Doc
>>
>> 0                                  doc1
>>
>> 1                                  doc2
>>
>> 2                                  doc3
>>
>> 3                                  doc4
>>
>> 4                                  doc5
>>
>>
>>
>> If doc 2 is deleted, is this what I'm left with?
>>
>>
>>
>> Document #                  Doc
>>
>> 0                                  doc1
>>
>> 1                                  doc2
>>
>> 2                                  doc4
>>
>> 3                                  doc5
>>
>>
>>
>> This is my assumption. If not, what DOES happen?
>>
>>
>>
>> TIA
>>
>>
>>
>> John G.
>>
>>
>>
>>
>>
>>
>>
>>
>
>
> -- 
> --
> The facts expressed here belong to everybody, the opinions to me.
> The distinction is yours to draw............


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34904-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 11 09:48:04 2008
Return-Path: <java-user-return-34904-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84654 invoked from network); 11 Jul 2008 09:48:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Jul 2008 09:48:04 -0000
Received: (qmail 89653 invoked by uid 500); 11 Jul 2008 09:47:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89619 invoked by uid 500); 11 Jul 2008 09:47:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89608 invoked by uid 99); 11 Jul 2008 09:47:57 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Jul 2008 02:47:57 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [74.125.46.30] (HELO yw-out-2324.google.com) (74.125.46.30)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Jul 2008 09:47:04 +0000
Received: by yw-out-2324.google.com with SMTP id 3so1559269ywj.5
        for <java-user@lucene.apache.org>; Fri, 11 Jul 2008 02:47:25 -0700 (PDT)
Received: by 10.151.48.20 with SMTP id a20mr15556733ybk.111.1215769645429;
        Fri, 11 Jul 2008 02:47:25 -0700 (PDT)
Received: from ?10.17.4.4? ( [72.93.214.93])
        by mx.google.com with ESMTPS id 5sm732682ywd.8.2008.07.11.02.47.24
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Fri, 11 Jul 2008 02:47:24 -0700 (PDT)
Message-Id: <690D5439-B4D0-4651-917A-73CD3DA1467C@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <dd3751860807110007k2513aa6l883390703282c4f3@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: Best practice for updating an index when reindexing is not an option
Date: Fri, 11 Jul 2008 05:47:23 -0400
References: <dd3751860807100615p3edc635dvf64b06edf4a24442@mail.gmail.com> <01681492-BD51-41FF-906D-A0C83516513F@mikemccandless.com> <dd3751860807110007k2513aa6l883390703282c4f3@mail.gmail.com>
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org

OK, got it.

The only way to make this work with svn is if you can have svn perform  
a switch without doing any removal, then restart your IndexSearcher,  
then do a normal svn switch to remove the now unused files.  Does svn  
have an option to "switch but don't remove any removed files"?   
Because IndexSearcher holds these files open, svn will not be able to  
remove the now unused files until IndexSearcher switches.

Or ... for every update to your index you could plant 2 tags, the  
first one reflecting only added files, and the 2nd one reflecting  
removed files.  Then, with your IndexSearcher still running, do an svn  
switch to the first tag, then restart the IndexSearcher, then svn  
switch to the 2nd one.  I think that'd work?

This should only be necessary on Windows ... UNIX platforms let you  
remove a file even when it's held open by a process ... the file's  
bytes still exist on disk (just without a filename pointing to them)  
and are only deleted when the last open file handle on that file is  
closed -- "delete on last close".

Mike

Christopher Kolstad wrote:

> Hi.
>
> First, thanks for the reply.
>
> Why does SubversionUpdate require shutting down the IndexSearcher?   
> What
>> goes wrong?
>>
>
> SubversionUpdate requires shutting down the IndexSearcher in our  
> current
> implementation because the old index files are deleted in the tag  
> we're
> switching to. Sorry, just realised that my last mail didn't state  
> that we
> don't in fact to an "svn up", but rather an "svn switch". Thus, when  
> we try
> to perform the update SubversionUpdate fails due to file lock issues  
> when
> trying to update (deleting the old lucene files) the lucene index  
> directory
> (The relevant code for the update action is quoted below).
>
> You might want to switch instead to rsync.
>>
>
> I'm hoping I won't have to, firstly because I'm more familiar with
> subversion, secondly because that would require me to configure  
> rsync for
> windows, and I'm still not sure if that will help anything with the  
> file
> lock issues we're trying to avoid.
>
> A Lucene index is fundamentally write once, so, syncing changes over  
> should
>> simply be copying over new files and removing now-deleted files.   
>> You won't
>> be able to remove files held open by the IndexSearcher, but, once the
>> IndexSearcher restarts you'd then be able to delete those files on  
>> the next
>> sync.
>
>
> So I should be able to run the switch and then restart the  
> IndexSearcher,
> instead of turning off the IndexSearcher, run the switch, turn on the
> IndexSearcher. I'd see how that would work with a linux box, having  
> a bit
> more trouble seeing how I will get it to work with a windows box  
> (and my
> live server is unfortunately a Windows 2003 box), Subversion keeps  
> running
> into file lock issues when I switch from one tag to the other if I  
> try to
> keep the search active. With Lucene 2.1 it even ran into file lock  
> issues
> after I'd disabled the search and was performing the switch. Now,  
> when we're
> using the Lucene 2.3.2 jar the lock issues has mostly gone (once in 3
> months, instead of every switch/update).
>
> Current code:
>
> disableSearch(request); //Sets the SearchActive boolean to false
>>
>> Search searcher =
>> (Search)ctx.getAttribute(FelleskatalogenStartupServlet.SEARCH);
>>      if (searcher != null) {
>>        searcher.clear();
>>     }
>
>           String latestTag =
>> SubversionUtil.getInstance().getLatestTag(getTagUrl(request));
>>
>>            SubversionUtil.getInstance().runSwitch(getRoot(request),
>> getTagUrl(request) + "/" + latestTag);
>>
>>            if (log.isDebugEnabled()) {
>>                log.debug("Index set to " + getRoot(request) + "/ 
>> lucene");
>>            }
>>
>>            ctx.setAttribute(FelleskatalogenStartupServlet.SEARCH, new
>> Search(getRoot(request) + "/lucene"));
>>             
>> ctx.setAttribute(FelleskatalogenStartupServlet.SEARCHACTIVE,
>> new Boolean(true));
>>
>
>
> BR,
>
> Christopher
>
> On Thu, Jul 10, 2008 at 4:27 PM, Michael McCandless <
> lucene@mikemccandless.com> wrote:
>
>
>
>>
>> Why does SubversionUpdate require shutting down the IndexSearcher?   
>> What
>> goes wrong?
>>
>> You might want to switch instead to rsync.
>>
>> A Lucene index is fundamentally write once, so, syncing changes  
>> over should
>> simply be copying over new files and removing now-deleted files.   
>> You won't
>> be able to remove files held open by the IndexSearcher, but, once the
>> IndexSearcher restarts you'd then be able to delete those files on  
>> the next
>> sync.
>>
>> Mike
>>
>>
>> Christopher Kolstad wrote:
>>
>> Hi.
>>>
>>> Currently using Lucene 2.3.2 in a tomcat webapp. We have an action
>>> configured that performs reindexing on our staging server.  
>>> However, our
>>> live
>>> server can not reindex since it does not have the necessary dtd  
>>> files to
>>> process the xml.
>>>
>>> To update the index on the live server we perform a subversion  
>>> update on
>>> the
>>> lucene index directory.
>>> Unfortunately this makes it necessary to stop the IndexSearcher  
>>> while the
>>> SubversionUpdate is doing its thing.
>>>
>>> Presently we've had a requirement from our customer to not disable  
>>> search.
>>>
>>> So my idea was to copy the index directory to another directory  
>>> and then
>>> switch the IndexSearcher from the original index directory to the
>>> temporary
>>> directory.
>>> Then perform the Subversion update, and when done, switch the
>>> IndexSearcher
>>> back to the original (now, updated) index directory.
>>>
>>> Does anyone have any other suggestions on how to update the index
>>> directory
>>> from subversion without having to disable the IndexSearcher?
>>>
>>> BR
>>> Christopher
>>>
>>> --
>>> Regards,
>>> Christopher Kolstad
>>> =============================
>>> |100 little bugs in the code, debug one, |
>>> |recompile, 101 little bugs in the code |
>>> =============================
>>>
>>> E-mail: chriswk@ifi.uio.no (University)
>>> christopher.kolstad@gmail.com (Home)
>>> chriswk@ovitas.no (Job)
>>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
>
> -- 
> Regards,
> Christopher Kolstad
> =============================
> |100 little bugs in the code, debug one, |
> |recompile, 101 little bugs in the code |
> =============================
>
> E-mail: chriswk@ifi.uio.no (University)
> christopher.kolstad@gmail.com (Home)
> chriswk@ovitas.no (Job)


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34905-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 11 10:29:39 2008
Return-Path: <java-user-return-34905-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94795 invoked from network); 11 Jul 2008 10:29:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Jul 2008 10:29:39 -0000
Received: (qmail 37353 invoked by uid 500); 11 Jul 2008 10:29:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36380 invoked by uid 500); 11 Jul 2008 10:29:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36369 invoked by uid 99); 11 Jul 2008 10:29:33 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Jul 2008 03:29:32 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: 74.125.46.31 is neither permitted nor denied by domain of lucene@mikemccandless.com)
Received: from [74.125.46.31] (HELO yw-out-2324.google.com) (74.125.46.31)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Jul 2008 10:28:40 +0000
Received: by yw-out-2324.google.com with SMTP id 3so1563990ywj.5
        for <java-user@lucene.apache.org>; Fri, 11 Jul 2008 03:29:02 -0700 (PDT)
Received: by 10.151.14.4 with SMTP id r4mr15613066ybi.123.1215772142506;
        Fri, 11 Jul 2008 03:29:02 -0700 (PDT)
Received: from ?10.17.4.4? ( [72.93.214.93])
        by mx.google.com with ESMTPS id 9sm581946ywf.2.2008.07.11.03.29.01
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Fri, 11 Jul 2008 03:29:01 -0700 (PDT)
Message-Id: <40D21DE1-7CCA-4EB1-8F09-7E5CAA55F75E@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <c68e39170807071230q2ac803e5x12a732d3e5f835f3@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: ThreadLocal in SegmentReader
Date: Fri, 11 Jul 2008 06:29:00 -0400
References: <18306230.post@talk.nabble.com> <FEF4B2B0-2AD6-4537-AF0C-0E8574BDD930@mikemccandless.com> <18314310.post@talk.nabble.com> <3526647C-1D0E-41A2-94D6-5D8A2B445640@mikemccandless.com> <18317640.post@talk.nabble.com> <9517C390-8EA0-4EE6-BE4F-E84A948DBCE5@mikemccandless.com> <c68e39170807071230q2ac803e5x12a732d3e5f835f3@mail.gmail.com>
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org


After discussing this on java-dev:

     http://mail-archives.apache.org/mod_mbox/lucene-java-dev/200807.mbox/%3CF5FC94B2-E5C7-40C0-8B73-E12245B91CEE@mikemccandless.com%3E

it seems that this is not in fact a leak but rather a delayed GC  
issue.  The objects are eventually freed, on Sun 1.4, 1.5 and 1.6.

When a ThreadLocal instance becomes unreferenced & GC'd, Java does not  
immediately reclaim the now-unreferenced objects, if the thread  
remains alive.  However, over time, as other ThreadLocals are used  
with that thread, those stale objects do eventually get reclaimed.  So  
my feeling for now is it's OK for Lucene to continue to use non-static  
ThreadLocals.

Mike

Yonik Seeley wrote:

> On Mon, Jul 7, 2008 at 2:43 PM, Michael McCandless
> <lucene@mikemccandless.com> wrote:
>> So now I'm confused: the SegmentReader itself should no longer be  
>> reachable,
>> assuming you are not holding any references to your IndexReader.
>>
>> Which means the ThreadLocal instance should no longer be reachable.
>
> It will still be referenced from the Thread(s) ThreadLocalMap
> The key (the ThreadLocal) will be weakly referenced, but the values
> (now stale) are strongly referenced and won't be actually removed
> until the table is resized (under the Java6 impl at least).
> Nice huh?
>
> -Yonik
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34906-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 11 11:35:35 2008
Return-Path: <java-user-return-34906-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12800 invoked from network); 11 Jul 2008 11:35:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Jul 2008 11:35:34 -0000
Received: (qmail 10538 invoked by uid 500); 11 Jul 2008 11:35:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9936 invoked by uid 500); 11 Jul 2008 11:35:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9924 invoked by uid 99); 11 Jul 2008 11:35:28 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Jul 2008 04:35:28 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of christopher.kolstad@gmail.com designates 209.85.132.245 as permitted sender)
Received: from [209.85.132.245] (HELO an-out-0708.google.com) (209.85.132.245)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Jul 2008 11:34:36 +0000
Received: by an-out-0708.google.com with SMTP id c37so799804anc.49
        for <java-user@lucene.apache.org>; Fri, 11 Jul 2008 04:34:58 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:sender
         :to:subject:in-reply-to:mime-version:content-type:references
         :x-google-sender-auth;
        bh=jVNmJc/v0o8o0tE6D+GfM2hkqWJP8MOaM4W08qucoaQ=;
        b=f60+jZfzIXr44G8zC+AzTkkHE3WOr/Gu6h7rQ2gojc4XbD5eCLRU1CPyIZiVa6Swx7
         +R+fHNCiQpXQMh696hDZ1J4NJKt+DyeQWCHpITUyfX0VXUt9MZCu+97OYDQKko5ZYhmj
         VyPrrQ5i2NIwJPc90czChZN1uRjoxgj0oymWo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:sender:to:subject:in-reply-to:mime-version
         :content-type:references:x-google-sender-auth;
        b=B6HF9JlDQHnYEzjhATsU8UqM6M59ceSWhAvmjf7tmsyudkUB72zN4NjeCD/F1qin6H
         e4N0TKaLlsA6bH+ZtFCPiF52RzhGsPU19On5MK15pYWccTvSIrhc75jZpZF0IDJX2OzO
         pquJBQAJn0VuifZ1d16HgcJGpgCYtU9XDysSU=
Received: by 10.100.177.15 with SMTP id z15mr7985584ane.112.1215776098436;
        Fri, 11 Jul 2008 04:34:58 -0700 (PDT)
Received: by 10.100.248.12 with HTTP; Fri, 11 Jul 2008 04:34:58 -0700 (PDT)
Message-ID: <dd3751860807110434i4bc97ae7r48d4fb23cb7fcf7f@mail.gmail.com>
Date: Fri, 11 Jul 2008 13:34:58 +0200
From: "Christopher Kolstad" <chriswk@ovitas.no>
Sender: christopher.kolstad@gmail.com
To: java-user@lucene.apache.org
Subject: Re: Best practice for updating an index when reindexing is not an option
In-Reply-To: <690D5439-B4D0-4651-917A-73CD3DA1467C@mikemccandless.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_30516_949273.1215776098401"
References: <dd3751860807100615p3edc635dvf64b06edf4a24442@mail.gmail.com>
	 <01681492-BD51-41FF-906D-A0C83516513F@mikemccandless.com>
	 <dd3751860807110007k2513aa6l883390703282c4f3@mail.gmail.com>
	 <690D5439-B4D0-4651-917A-73CD3DA1467C@mikemccandless.com>
X-Google-Sender-Auth: 7ec40973016a0ef8
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_30516_949273.1215776098401
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

>
> The only way to make this work with svn is if you can have svn perform a
> switch without doing any removal, then restart your IndexSearcher, then do a
> normal svn switch to remove the now unused files.  Does svn have an option
> to "switch but don't remove any removed files"?  Because IndexSearcher holds
> these files open, svn will not be able to remove the now unused files until
> IndexSearcher switches.

Exactly, I'll hear with the svn-user list to see if anyone has had any
experiece with a similar problem, but it looks like the svn switch command
automatically performs an svn up instantly after having switched to the new
URL. (I.e. it will remove the file)

Or ... for every update to your index you could plant 2 tags, the first one
> reflecting only added files, and the 2nd one reflecting removed files.
>  Then, with your IndexSearcher still running, do an svn switch to the first
> tag, then restart the IndexSearcher, then svn switch to the 2nd one.  I
> think that'd work?

That sounds like a rather good idea, SVN does have diff between two
different tags, so it should be possible to quickly figure out which files
are added and which are removed (or modified (in the case of the index I
guess all the files should be new)).

This should only be necessary on Windows ... UNIX platforms let you remove a
> file even when it's held open by a process ... the file's bytes still exist
> on disk (just without a filename pointing to them) and are only deleted when
> the last open file handle on that file is closed -- "delete on last close".


That's what I thought, but it feels good to get confirmation. We've been
trying to move our customer to linux for a long time. Hopefully it will
happen this fall and we won't have to do it this way anymore.

Appreciate all the help Mike, we got an OK from the customer to wait until
the fall and hopefully a move to linux. So I'll leave it be for now, though
not perfect, at least it works the way it did before I started to attempt
the improvement ;)

Christopher (Chris also works ;) )


On Fri, Jul 11, 2008 at 11:47 AM, Michael McCandless <
lucene@mikemccandless.com> wrote:

> OK, got it.
>
> The only way to make this work with svn is if you can have svn perform a
> switch without doing any removal, then restart your IndexSearcher, then do a
> normal svn switch to remove the now unused files.  Does svn have an option
> to "switch but don't remove any removed files"?  Because IndexSearcher holds
> these files open, svn will not be able to remove the now unused files until
> IndexSearcher switches.
>
> Or ... for every update to your index you could plant 2 tags, the first one
> reflecting only added files, and the 2nd one reflecting removed files.
>  Then, with your IndexSearcher still running, do an svn switch to the first
> tag, then restart the IndexSearcher, then svn switch to the 2nd one.  I
> think that'd work?
>
> This should only be necessary on Windows ... UNIX platforms let you remove
> a file even when it's held open by a process ... the file's bytes still
> exist on disk (just without a filename pointing to them) and are only
> deleted when the last open file handle on that file is closed -- "delete on
> last close".
>
>
> Mike
>
> Christopher Kolstad wrote:
>
>  Hi.
>>
>> First, thanks for the reply.
>>
>> Why does SubversionUpdate require shutting down the IndexSearcher?  What
>>
>>> goes wrong?
>>>
>>>
>> SubversionUpdate requires shutting down the IndexSearcher in our current
>> implementation because the old index files are deleted in the tag we're
>> switching to. Sorry, just realised that my last mail didn't state that we
>> don't in fact to an "svn up", but rather an "svn switch". Thus, when we
>> try
>> to perform the update SubversionUpdate fails due to file lock issues when
>> trying to update (deleting the old lucene files) the lucene index
>> directory
>> (The relevant code for the update action is quoted below).
>>
>> You might want to switch instead to rsync.
>>
>>>
>>>
>> I'm hoping I won't have to, firstly because I'm more familiar with
>> subversion, secondly because that would require me to configure rsync for
>> windows, and I'm still not sure if that will help anything with the file
>> lock issues we're trying to avoid.
>>
>> A Lucene index is fundamentally write once, so, syncing changes over
>> should
>>
>>> simply be copying over new files and removing now-deleted files.  You
>>> won't
>>> be able to remove files held open by the IndexSearcher, but, once the
>>> IndexSearcher restarts you'd then be able to delete those files on the
>>> next
>>> sync.
>>>
>>
>>
>> So I should be able to run the switch and then restart the IndexSearcher,
>> instead of turning off the IndexSearcher, run the switch, turn on the
>> IndexSearcher. I'd see how that would work with a linux box, having a bit
>> more trouble seeing how I will get it to work with a windows box (and my
>> live server is unfortunately a Windows 2003 box), Subversion keeps running
>> into file lock issues when I switch from one tag to the other if I try to
>> keep the search active. With Lucene 2.1 it even ran into file lock issues
>> after I'd disabled the search and was performing the switch. Now, when
>> we're
>> using the Lucene 2.3.2 jar the lock issues has mostly gone (once in 3
>> months, instead of every switch/update).
>>
>> Current code:
>>
>> disableSearch(request); //Sets the SearchActive boolean to false
>>
>>>
>>> Search searcher =
>>> (Search)ctx.getAttribute(FelleskatalogenStartupServlet.SEARCH);
>>>     if (searcher != null) {
>>>       searcher.clear();
>>>    }
>>>
>>
>>          String latestTag =
>>
>>> SubversionUtil.getInstance().getLatestTag(getTagUrl(request));
>>>
>>>           SubversionUtil.getInstance().runSwitch(getRoot(request),
>>> getTagUrl(request) + "/" + latestTag);
>>>
>>>           if (log.isDebugEnabled()) {
>>>               log.debug("Index set to " + getRoot(request) + "/lucene");
>>>           }
>>>
>>>           ctx.setAttribute(FelleskatalogenStartupServlet.SEARCH, new
>>> Search(getRoot(request) + "/lucene"));
>>>           ctx.setAttribute(FelleskatalogenStartupServlet.SEARCHACTIVE,
>>> new Boolean(true));
>>>
>>>
>>
>> BR,
>>
>> Christopher
>>
>> On Thu, Jul 10, 2008 at 4:27 PM, Michael McCandless <
>> lucene@mikemccandless.com> wrote:
>>
>>
>>
>>
>>> Why does SubversionUpdate require shutting down the IndexSearcher?  What
>>> goes wrong?
>>>
>>> You might want to switch instead to rsync.
>>>
>>> A Lucene index is fundamentally write once, so, syncing changes over
>>> should
>>> simply be copying over new files and removing now-deleted files.  You
>>> won't
>>> be able to remove files held open by the IndexSearcher, but, once the
>>> IndexSearcher restarts you'd then be able to delete those files on the
>>> next
>>> sync.
>>>
>>> Mike
>>>
>>>
>>> Christopher Kolstad wrote:
>>>
>>> Hi.
>>>
>>>>
>>>> Currently using Lucene 2.3.2 in a tomcat webapp. We have an action
>>>> configured that performs reindexing on our staging server. However, our
>>>> live
>>>> server can not reindex since it does not have the necessary dtd files to
>>>> process the xml.
>>>>
>>>> To update the index on the live server we perform a subversion update on
>>>> the
>>>> lucene index directory.
>>>> Unfortunately this makes it necessary to stop the IndexSearcher while
>>>> the
>>>> SubversionUpdate is doing its thing.
>>>>
>>>> Presently we've had a requirement from our customer to not disable
>>>> search.
>>>>
>>>> So my idea was to copy the index directory to another directory and then
>>>> switch the IndexSearcher from the original index directory to the
>>>> temporary
>>>> directory.
>>>> Then perform the Subversion update, and when done, switch the
>>>> IndexSearcher
>>>> back to the original (now, updated) index directory.
>>>>
>>>> Does anyone have any other suggestions on how to update the index
>>>> directory
>>>> from subversion without having to disable the IndexSearcher?
>>>>
>>>> BR
>>>> Christopher
>>>>
>>>> --
>>>> Regards,
>>>> Christopher Kolstad
>>>> =============================
>>>> |100 little bugs in the code, debug one, |
>>>> |recompile, 101 little bugs in the code |
>>>> =============================
>>>>
>>>> E-mail: chriswk@ifi.uio.no (University)
>>>> christopher.kolstad@gmail.com (Home)
>>>> chriswk@ovitas.no (Job)
>>>>
>>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>>
>>
>> --
>> Regards,
>> Christopher Kolstad
>> =============================
>> |100 little bugs in the code, debug one, |
>> |recompile, 101 little bugs in the code |
>> =============================
>>
>> E-mail: chriswk@ifi.uio.no (University)
>> christopher.kolstad@gmail.com (Home)
>> chriswk@ovitas.no (Job)
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
Regards,
Christopher Kolstad
=============================
|100 little bugs in the code, debug one, |
|recompile, 101 little bugs in the code |
=============================

E-mail: chriswk@ifi.uio.no (University)
christopher.kolstad@gmail.com (Home)
chriswk@ovitas.no (Job)

------=_Part_30516_949273.1215776098401--

From java-user-return-34907-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 11 12:42:09 2008
Return-Path: <java-user-return-34907-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36984 invoked from network); 11 Jul 2008 12:42:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Jul 2008 12:42:09 -0000
Received: (qmail 75680 invoked by uid 500); 11 Jul 2008 12:42:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75589 invoked by uid 500); 11 Jul 2008 12:42:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75572 invoked by uid 99); 11 Jul 2008 12:42:03 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Jul 2008 05:42:03 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [64.233.178.244] (HELO hs-out-0708.google.com) (64.233.178.244)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Jul 2008 12:41:10 +0000
Received: by hs-out-0708.google.com with SMTP id 4so936010hsl.5
        for <java-user@lucene.apache.org>; Fri, 11 Jul 2008 05:41:32 -0700 (PDT)
Received: by 10.100.120.15 with SMTP id s15mr1620388anc.66.1215780091905;
        Fri, 11 Jul 2008 05:41:31 -0700 (PDT)
Received: from ?10.17.4.4? ( [72.93.214.93])
        by mx.google.com with ESMTPS id b11sm556559ana.36.2008.07.11.05.41.31
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Fri, 11 Jul 2008 05:41:31 -0700 (PDT)
Message-Id: <EF09AE04-EEDA-44CF-A40A-72D1B58B5027@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <dd3751860807110434i4bc97ae7r48d4fb23cb7fcf7f@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: Best practice for updating an index when reindexing is not an option
Date: Fri, 11 Jul 2008 08:41:30 -0400
References: <dd3751860807100615p3edc635dvf64b06edf4a24442@mail.gmail.com> <01681492-BD51-41FF-906D-A0C83516513F@mikemccandless.com> <dd3751860807110007k2513aa6l883390703282c4f3@mail.gmail.com> <690D5439-B4D0-4651-917A-73CD3DA1467C@mikemccandless.com> <dd3751860807110434i4bc97ae7r48d4fb23cb7fcf7f@mail.gmail.com>
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org


OK, sounds good.  Fall will be here before you know it!

Mike

Christopher Kolstad wrote:

>>
>> The only way to make this work with svn is if you can have svn  
>> perform a
>> switch without doing any removal, then restart your IndexSearcher,  
>> then do a
>> normal svn switch to remove the now unused files.  Does svn have an  
>> option
>> to "switch but don't remove any removed files"?  Because  
>> IndexSearcher holds
>> these files open, svn will not be able to remove the now unused  
>> files until
>> IndexSearcher switches.
>
> Exactly, I'll hear with the svn-user list to see if anyone has had any
> experiece with a similar problem, but it looks like the svn switch  
> command
> automatically performs an svn up instantly after having switched to  
> the new
> URL. (I.e. it will remove the file)
>
> Or ... for every update to your index you could plant 2 tags, the  
> first one
>> reflecting only added files, and the 2nd one reflecting removed  
>> files.
>> Then, with your IndexSearcher still running, do an svn switch to  
>> the first
>> tag, then restart the IndexSearcher, then svn switch to the 2nd  
>> one.  I
>> think that'd work?
>
> That sounds like a rather good idea, SVN does have diff between two
> different tags, so it should be possible to quickly figure out which  
> files
> are added and which are removed (or modified (in the case of the  
> index I
> guess all the files should be new)).
>
> This should only be necessary on Windows ... UNIX platforms let you  
> remove a
>> file even when it's held open by a process ... the file's bytes  
>> still exist
>> on disk (just without a filename pointing to them) and are only  
>> deleted when
>> the last open file handle on that file is closed -- "delete on last  
>> close".
>
>
> That's what I thought, but it feels good to get confirmation. We've  
> been
> trying to move our customer to linux for a long time. Hopefully it  
> will
> happen this fall and we won't have to do it this way anymore.
>
> Appreciate all the help Mike, we got an OK from the customer to wait  
> until
> the fall and hopefully a move to linux. So I'll leave it be for now,  
> though
> not perfect, at least it works the way it did before I started to  
> attempt
> the improvement ;)
>
> Christopher (Chris also works ;) )
>
>
> On Fri, Jul 11, 2008 at 11:47 AM, Michael McCandless <
> lucene@mikemccandless.com> wrote:
>
>> OK, got it.
>>
>> The only way to make this work with svn is if you can have svn  
>> perform a
>> switch without doing any removal, then restart your IndexSearcher,  
>> then do a
>> normal svn switch to remove the now unused files.  Does svn have an  
>> option
>> to "switch but don't remove any removed files"?  Because  
>> IndexSearcher holds
>> these files open, svn will not be able to remove the now unused  
>> files until
>> IndexSearcher switches.
>>
>> Or ... for every update to your index you could plant 2 tags, the  
>> first one
>> reflecting only added files, and the 2nd one reflecting removed  
>> files.
>> Then, with your IndexSearcher still running, do an svn switch to  
>> the first
>> tag, then restart the IndexSearcher, then svn switch to the 2nd  
>> one.  I
>> think that'd work?
>>
>> This should only be necessary on Windows ... UNIX platforms let you  
>> remove
>> a file even when it's held open by a process ... the file's bytes  
>> still
>> exist on disk (just without a filename pointing to them) and are only
>> deleted when the last open file handle on that file is closed --  
>> "delete on
>> last close".
>>
>>
>> Mike
>>
>> Christopher Kolstad wrote:
>>
>> Hi.
>>>
>>> First, thanks for the reply.
>>>
>>> Why does SubversionUpdate require shutting down the  
>>> IndexSearcher?  What
>>>
>>>> goes wrong?
>>>>
>>>>
>>> SubversionUpdate requires shutting down the IndexSearcher in our  
>>> current
>>> implementation because the old index files are deleted in the tag  
>>> we're
>>> switching to. Sorry, just realised that my last mail didn't state  
>>> that we
>>> don't in fact to an "svn up", but rather an "svn switch". Thus,  
>>> when we
>>> try
>>> to perform the update SubversionUpdate fails due to file lock  
>>> issues when
>>> trying to update (deleting the old lucene files) the lucene index
>>> directory
>>> (The relevant code for the update action is quoted below).
>>>
>>> You might want to switch instead to rsync.
>>>
>>>>
>>>>
>>> I'm hoping I won't have to, firstly because I'm more familiar with
>>> subversion, secondly because that would require me to configure  
>>> rsync for
>>> windows, and I'm still not sure if that will help anything with  
>>> the file
>>> lock issues we're trying to avoid.
>>>
>>> A Lucene index is fundamentally write once, so, syncing changes over
>>> should
>>>
>>>> simply be copying over new files and removing now-deleted files.   
>>>> You
>>>> won't
>>>> be able to remove files held open by the IndexSearcher, but, once  
>>>> the
>>>> IndexSearcher restarts you'd then be able to delete those files  
>>>> on the
>>>> next
>>>> sync.
>>>>
>>>
>>>
>>> So I should be able to run the switch and then restart the  
>>> IndexSearcher,
>>> instead of turning off the IndexSearcher, run the switch, turn on  
>>> the
>>> IndexSearcher. I'd see how that would work with a linux box,  
>>> having a bit
>>> more trouble seeing how I will get it to work with a windows box  
>>> (and my
>>> live server is unfortunately a Windows 2003 box), Subversion keeps  
>>> running
>>> into file lock issues when I switch from one tag to the other if I  
>>> try to
>>> keep the search active. With Lucene 2.1 it even ran into file lock  
>>> issues
>>> after I'd disabled the search and was performing the switch. Now,  
>>> when
>>> we're
>>> using the Lucene 2.3.2 jar the lock issues has mostly gone (once  
>>> in 3
>>> months, instead of every switch/update).
>>>
>>> Current code:
>>>
>>> disableSearch(request); //Sets the SearchActive boolean to false
>>>
>>>>
>>>> Search searcher =
>>>> (Search)ctx.getAttribute(FelleskatalogenStartupServlet.SEARCH);
>>>>    if (searcher != null) {
>>>>      searcher.clear();
>>>>   }
>>>>
>>>
>>>         String latestTag =
>>>
>>>> SubversionUtil.getInstance().getLatestTag(getTagUrl(request));
>>>>
>>>>          SubversionUtil.getInstance().runSwitch(getRoot(request),
>>>> getTagUrl(request) + "/" + latestTag);
>>>>
>>>>          if (log.isDebugEnabled()) {
>>>>              log.debug("Index set to " + getRoot(request) + "/ 
>>>> lucene");
>>>>          }
>>>>
>>>>          ctx.setAttribute(FelleskatalogenStartupServlet.SEARCH, new
>>>> Search(getRoot(request) + "/lucene"));
>>>>           
>>>> ctx.setAttribute(FelleskatalogenStartupServlet.SEARCHACTIVE,
>>>> new Boolean(true));
>>>>
>>>>
>>>
>>> BR,
>>>
>>> Christopher
>>>
>>> On Thu, Jul 10, 2008 at 4:27 PM, Michael McCandless <
>>> lucene@mikemccandless.com> wrote:
>>>
>>>
>>>
>>>
>>>> Why does SubversionUpdate require shutting down the  
>>>> IndexSearcher?  What
>>>> goes wrong?
>>>>
>>>> You might want to switch instead to rsync.
>>>>
>>>> A Lucene index is fundamentally write once, so, syncing changes  
>>>> over
>>>> should
>>>> simply be copying over new files and removing now-deleted files.   
>>>> You
>>>> won't
>>>> be able to remove files held open by the IndexSearcher, but, once  
>>>> the
>>>> IndexSearcher restarts you'd then be able to delete those files  
>>>> on the
>>>> next
>>>> sync.
>>>>
>>>> Mike
>>>>
>>>>
>>>> Christopher Kolstad wrote:
>>>>
>>>> Hi.
>>>>
>>>>>
>>>>> Currently using Lucene 2.3.2 in a tomcat webapp. We have an action
>>>>> configured that performs reindexing on our staging server.  
>>>>> However, our
>>>>> live
>>>>> server can not reindex since it does not have the necessary dtd  
>>>>> files to
>>>>> process the xml.
>>>>>
>>>>> To update the index on the live server we perform a subversion  
>>>>> update on
>>>>> the
>>>>> lucene index directory.
>>>>> Unfortunately this makes it necessary to stop the IndexSearcher  
>>>>> while
>>>>> the
>>>>> SubversionUpdate is doing its thing.
>>>>>
>>>>> Presently we've had a requirement from our customer to not disable
>>>>> search.
>>>>>
>>>>> So my idea was to copy the index directory to another directory  
>>>>> and then
>>>>> switch the IndexSearcher from the original index directory to the
>>>>> temporary
>>>>> directory.
>>>>> Then perform the Subversion update, and when done, switch the
>>>>> IndexSearcher
>>>>> back to the original (now, updated) index directory.
>>>>>
>>>>> Does anyone have any other suggestions on how to update the index
>>>>> directory
>>>>> from subversion without having to disable the IndexSearcher?
>>>>>
>>>>> BR
>>>>> Christopher
>>>>>
>>>>> --
>>>>> Regards,
>>>>> Christopher Kolstad
>>>>> =============================
>>>>> |100 little bugs in the code, debug one, |
>>>>> |recompile, 101 little bugs in the code |
>>>>> =============================
>>>>>
>>>>> E-mail: chriswk@ifi.uio.no (University)
>>>>> christopher.kolstad@gmail.com (Home)
>>>>> chriswk@ovitas.no (Job)
>>>>>
>>>>>
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>>
>>>
>>> --
>>> Regards,
>>> Christopher Kolstad
>>> =============================
>>> |100 little bugs in the code, debug one, |
>>> |recompile, 101 little bugs in the code |
>>> =============================
>>>
>>> E-mail: chriswk@ifi.uio.no (University)
>>> christopher.kolstad@gmail.com (Home)
>>> chriswk@ovitas.no (Job)
>>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
>
> -- 
> Regards,
> Christopher Kolstad
> =============================
> |100 little bugs in the code, debug one, |
> |recompile, 101 little bugs in the code |
> =============================
>
> E-mail: chriswk@ifi.uio.no (University)
> christopher.kolstad@gmail.com (Home)
> chriswk@ovitas.no (Job)


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34908-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 11 13:29:11 2008
Return-Path: <java-user-return-34908-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 50776 invoked from network); 11 Jul 2008 13:29:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Jul 2008 13:29:11 -0000
Received: (qmail 34831 invoked by uid 500); 11 Jul 2008 13:29:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34810 invoked by uid 500); 11 Jul 2008 13:29:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34799 invoked by uid 99); 11 Jul 2008 13:29:05 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Jul 2008 06:29:05 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Jul 2008 13:28:12 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KHIfq-0006il-5A
	for java-user@lucene.apache.org; Fri, 11 Jul 2008 06:28:34 -0700
Message-ID: <18403878.post@talk.nabble.com>
Date: Fri, 11 Jul 2008 06:28:34 -0700 (PDT)
From: jnance <nancejd@ornl.gov>
To: java-user@lucene.apache.org
Subject: Re: Searching for instances within a document
In-Reply-To: <18381743.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: nancejd@ornl.gov
References: <18362075.post@talk.nabble.com> <F46369DC-2E26-4CB8-BBAB-5B96AE9BF008@gmail.com> <43f44d1e0807100043s35587c6ema731f7cd32d2e20c@mail.gmail.com> <18381743.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org


The TermFrequencyVector works perfectly for normal query strings. But if I
add a wild card (*) onto words to search for different forms of the word I
get an ArrayIndexOutOfBoundsException because the index is -1. Why does this
happen? And is there anyway to avoid it?

Thanks,

James



jnance wrote:
> 
> Yes, the term frequency vector is exactly what I needed. Thanks!
> 
> -James
> 
> 
> Ajay Lakhani wrote:
>> 
>> Hi James,
>> 
>> Try this:
>> 
>>     Searcher searcher = new IndexSearcher(dir);
>>     QueryParser parser = new QueryParser("content", new
>> StandardAnalyzer());
>>     Query query = parser.parse(queryString);
>> 
>>     HashSet queryTerms = new HashSet();
>>     query.extractTerms(queryTerms);
>> 
>>     Hits hits = searcher.search(query);
>> 
>>     IndexReader reader = IndexReader.open(dir);
>> 
>>     for (int i =0; i < hits.length() ; i ++){
>>       Document d = hits.doc(i);
>>       Field fid = d.getField("id");
>>       Field ftitle = d.getField("title");
>>       System.out.println("id is " + fid.stringValue());
>>       System.out.println("title is " + ftitle.stringValue());
>> 
>>       TermFreqVector tfv = reader.getTermFreqVector(hits.id(i),
>> "content");
>>       String[] terms = tfv.getTerms();
>>       int [] freqs = tfv.getTermFrequencies();//get the frequencies
>> 
>>       // for each term in the query
>>       for (Iterator iter = queryTerms.iterator(); iter.hasNext();) {
>>         Term term = (Term) iter.next();
>> 
>>         // for each term in the vector
>>         for (int j = 0; j < terms.length; j++) {
>>           if (terms[j].equals(term.text())) {
>>             System.out.println("frequency of term ["+ term.text() +"] is
>> " +
>> freqs[j] );
>>           }
>>         }
>>       }
>>     }
>> 
>> Let me know if this helps.
>> Cheers
>> AJ
>> 
>> 2008/7/10 Karl Wettin <karl.wettin@gmail.com>:
>> 
>>> Maybe you are looking for the document TermFreqVector?
>>>
>>>
>>>       karl
>>>
>>> 9 jul 2008 kl. 15.49 skrev jnance:
>>>
>>>
>>>> Hi,
>>>>
>>>> I am indexing lots of text files and need to see how many times a
>>>> certain
>>>> word comes up in each text file. Right now I have this constructor for
>>>> "search":
>>>>
>>>> static void search(Searcher searcher, String queryString) throws
>>>> ParseException, IOException {
>>>>                 QueryParser parser = new QueryParser("content", new
>>>> StandardAnalyzer());
>>>>                 Query query = parser.parse(queryString);
>>>>                 Hits hits = searcher.search(query);
>>>>
>>>>                 int hitCount = hits.length();
>>>>                 if (hitCount == 0) {
>>>>                         System.out.println("0 documents contain the
>>>> word
>>>> \"" + queryString +
>>>> ".\"");
>>>>                 }
>>>>                 else {
>>>>                         System.out.println(hitCount + " documents
>>>> contain
>>>> the word \"" +
>>>> queryString + ".\"");
>>>>                 }
>>>>         }
>>>>
>>>> This tells me how many documents contain the word I'm looking for...
>>>> but
>>>> how
>>>> do I get it to tell me how many times the word occurs within that
>>>> document?
>>>>
>>>> Thanks,
>>>>
>>>> James
>>>> --
>>>> View this message in context:
>>>> http://www.nabble.com/Searching-for-instances-within-a-document-tp18362075p18362075.html
>>>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>>>
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>> 
>> 
> 
> 

-- 
View this message in context: http://www.nabble.com/Searching-for-instances-within-a-document-tp18362075p18403878.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34909-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 11 17:13:58 2008
Return-Path: <java-user-return-34909-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61006 invoked from network); 11 Jul 2008 17:13:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Jul 2008 17:13:58 -0000
Received: (qmail 64655 invoked by uid 500); 11 Jul 2008 17:13:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64385 invoked by uid 500); 11 Jul 2008 17:13:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64374 invoked by uid 99); 11 Jul 2008 17:13:51 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Jul 2008 10:13:51 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.190.38.23] (HELO web50008.mail.re2.yahoo.com) (206.190.38.23)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 11 Jul 2008 17:12:58 +0000
Received: (qmail 71503 invoked by uid 60001); 11 Jul 2008 17:13:19 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=RjRqKqsC5KghakMH0/zF9i9s1cdCmnfpAjb32qN+3KKip04QQ2bWqq51WomJT2zRUMWx5+FO0Wu061PwB73BAUP4Cf/EkucU2wTuzaEQT7exHAuk/H+MUH7+F9vcC/KsXScMr8oawGk/ZUV8OGLkJw7ypKdW4J1Q5dYW9Qctu5g=;
X-YMail-OSG: aJ3TrGsVM1mV_3Z50y4RcT6lxBqrtrFNTU9bgadjSq7V434YsVkeJ3SLG2HAcPZy6vJsvrIJmGJ_3zyxpvlOwp6d_NeAqFQ7X3XCJG0I9PhNhM9EmTb0gwy1.dZdgfmP7g--
Received: from [166.77.103.133] by web50008.mail.re2.yahoo.com via HTTP; Fri, 11 Jul 2008 10:13:19 PDT
Date: Fri, 11 Jul 2008 10:13:19 -0700 (PDT)
From: xin liu <liuxinx@yahoo.com>
Subject: how to get total hit count for each Searchable?
To: java-user@lucene.apache.org
In-Reply-To: <468655.13045.qm@web50004.mail.re2.yahoo.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-579532015-1215796399=:71308"
Content-Transfer-Encoding: 8bit
Message-ID: <608925.71308.qm@web50008.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

--0-579532015-1215796399=:71308
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit

Hi,

I have individual index files for Audio, Image and PDF files. We build common meta fields for these different data types. When I search for a string, I want the search to return mixed search results from these 3 different index based on relevancy. So I use ParallelMultiSearcher class to do the search. But I also wants to know individual hit count for each individual index type. For example, I want to get:
    Mixed together total hit count: 103, with the first 10 HitItem.
    Total hit in Audio: 73
    Total hit in Image: 17
    Total hit in PDF: 13

Right now, I'm doing the following way:
1. Gets one Searchable instance for Audio, one for Image, and one for PDF index;
2. construct ParallelMultiSearcher s with above 3 Searchable as parameters; call its search to get total hit count and first 10 hit items;
3. Call Audio searchable to get total hit count in Audio;
4. Call Image searchable to get total hit count for Image;
5. Call PDF searchable to get total hit count for Image.

So, Lucene will need do 6 search operations for these 3 index. Definitely, the performance will be an issue.

Any better solution for this? Thanks!

Tony






       
--0-579532015-1215796399=:71308--

From java-user-return-34910-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 11 18:40:47 2008
Return-Path: <java-user-return-34910-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96502 invoked from network); 11 Jul 2008 18:40:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Jul 2008 18:40:46 -0000
Received: (qmail 52109 invoked by uid 500); 11 Jul 2008 18:40:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52085 invoked by uid 500); 11 Jul 2008 18:40:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52074 invoked by uid 99); 11 Jul 2008 18:40:41 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Jul 2008 11:40:41 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: 194.109.24.35 is neither permitted nor denied by domain of karl.wettin@gmail.com)
Received: from [194.109.24.35] (HELO smtp-vbr15.xs4all.nl) (194.109.24.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Jul 2008 18:39:48 +0000
Received: from kodapan.lan (memnon.xs4all.nl [82.93.70.124])
	by smtp-vbr15.xs4all.nl (8.13.8/8.13.8) with ESMTP id m6BIdcOQ048826
	for <java-user@lucene.apache.org>; Fri, 11 Jul 2008 20:39:39 +0200 (CEST)
	(envelope-from karl.wettin@gmail.com)
Message-Id: <486E8DE9-2127-46D1-BE60-351043CE7793@gmail.com>
From: Karl Wettin <karl.wettin@gmail.com>
To: java-user@lucene.apache.org
In-Reply-To: <18403878.post@talk.nabble.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: Searching for instances within a document
Date: Fri, 11 Jul 2008 20:39:37 +0200
References: <18362075.post@talk.nabble.com> <F46369DC-2E26-4CB8-BBAB-5B96AE9BF008@gmail.com> <43f44d1e0807100043s35587c6ema731f7cd32d2e20c@mail.gmail.com> <18381743.post@talk.nabble.com> <18403878.post@talk.nabble.com>
X-Mailer: Apple Mail (2.926)
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org


11 jul 2008 kl. 15.28 skrev jnance:
>
> The TermFrequencyVector works perfectly for normal query strings.  
> But if I
> add a wild card (*) onto words to search for different forms of the  
> word I
> get an ArrayIndexOutOfBoundsException because the index is -1. Why  
> does this
> happen? And is there anyway to avoid it?

It is because

> public interface TermFreqVector {
>
>   /** Return an index in the term numbers array returned from
>    *  <code>getTerms</code> at which the term with the specified
>    *  <code>term</code> appears. If this term does not appear in the  
> array,
>    *  return -1.
>    */
>   public int indexOf(String term);

accepts a term text value and you try feed it with an unparsed query  
string. The respose is negative as there is no term in the document  
with the term text value 'foo*'.

One way to solve your problem is to enumerate the terms of the vector  
and see if it.startsWith("foo");


You should probably explain what it is you try to achive by doing this.


     karl

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34911-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 11 18:45:25 2008
Return-Path: <java-user-return-34911-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98280 invoked from network); 11 Jul 2008 18:45:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Jul 2008 18:45:24 -0000
Received: (qmail 56674 invoked by uid 500); 11 Jul 2008 18:45:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56639 invoked by uid 500); 11 Jul 2008 18:45:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56628 invoked by uid 99); 11 Jul 2008 18:45:18 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Jul 2008 11:45:18 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Jul 2008 18:44:26 +0000
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 7692F30EFC19; Fri, 11 Jul 2008 12:44:48 -0600 (MDT)
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on javelina
X-Spam-Level: 
Received: from [10.0.1.2] (va-69-68-189-198.dyn.embarqhsd.net [69.68.189.198])
	by ehatchersolutions.com (Postfix) with ESMTP id 1B37F30EFC18
	for <java-user@lucene.apache.org>; Fri, 11 Jul 2008 12:44:40 -0600 (MDT)
Message-Id: <703F6A06-67E6-464F-A69A-B497EA52F31F@ehatchersolutions.com>
From: Erik Hatcher <erik@ehatchersolutions.com>
To: java-user@lucene.apache.org
In-Reply-To: <608925.71308.qm@web50008.mail.re2.yahoo.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v924)
Subject: Re: how to get total hit count for each Searchable?
Date: Fri, 11 Jul 2008 14:44:35 -0400
References: <608925.71308.qm@web50008.mail.re2.yahoo.com>
X-Mailer: Apple Mail (2.924)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-0.6 required=5.0 tests=BAYES_00,RCVD_IN_SORBS_DUL 
	autolearn=no version=3.1.1


On Jul 11, 2008, at 1:13 PM, xin liu wrote:
> I have individual index files for Audio, Image and PDF files. We  
> build common meta fields for these different data types. When I  
> search for a string, I want the search to return mixed search  
> results from these 3 different index based on relevancy. So I use  
> ParallelMultiSearcher class to do the search. But I also wants to  
> know individual hit count for each individual index type. For  
> example, I want to get:
>    Mixed together total hit count: 103, with the first 10 HitItem.
>    Total hit in Audio: 73
>    Total hit in Image: 17
>    Total hit in PDF: 13
>
> Right now, I'm doing the following way:
> 1. Gets one Searchable instance for Audio, one for Image, and one  
> for PDF index;
> 2. construct ParallelMultiSearcher s with above 3 Searchable as  
> parameters; call its search to get total hit count and first 10 hit  
> items;
> 3. Call Audio searchable to get total hit count in Audio;
> 4. Call Image searchable to get total hit count for Image;
> 5. Call PDF searchable to get total hit count for Image.
>
> So, Lucene will need do 6 search operations for these 3 index.  
> Definitely, the performance will be an issue.
>
> Any better solution for this? Thanks!

Solr - <http://lucene.apache.org/solr> - features faceting along the  
lines of your needs.

However, Solr does not currently support ParallelMultiSearcher, but it  
does support distributed searching across sharded Solr instances.   
Under the covers of Solr is simply a Lucene index.   There's no reason  
Solr couldn't be enhanced to support ParallelMultiSearcher, I don't  
think, but right now it only uses a single file based IndexSearcher.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34912-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jul 12 04:38:45 2008
Return-Path: <java-user-return-34912-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 11612 invoked from network); 12 Jul 2008 04:38:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Jul 2008 04:38:45 -0000
Received: (qmail 29577 invoked by uid 500); 12 Jul 2008 04:38:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29539 invoked by uid 500); 12 Jul 2008 04:38:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29528 invoked by uid 99); 12 Jul 2008 04:38:38 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 11 Jul 2008 21:38:38 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 12 Jul 2008 04:37:45 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KHWs3-0004ZO-Gi
	for java-user@lucene.apache.org; Fri, 11 Jul 2008 21:38:07 -0700
Message-ID: <18416048.post@talk.nabble.com>
Date: Fri, 11 Jul 2008 21:38:07 -0700 (PDT)
From: Roman Puchkovskiy <roman.puchkovskiy@blandware.com>
To: java-user@lucene.apache.org
Subject: Re: ThreadLocal in SegmentReader
In-Reply-To: <40D21DE1-7CCA-4EB1-8F09-7E5CAA55F75E@mikemccandless.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: roman.puchkovskiy@blandware.com
References: <18306230.post@talk.nabble.com> <FEF4B2B0-2AD6-4537-AF0C-0E8574BDD930@mikemccandless.com> <18314310.post@talk.nabble.com> <3526647C-1D0E-41A2-94D6-5D8A2B445640@mikemccandless.com> <18317640.post@talk.nabble.com> <9517C390-8EA0-4EE6-BE4F-E84A948DBCE5@mikemccandless.com> <c68e39170807071230q2ac803e5x12a732d3e5f835f3@mail.gmail.com> <40D21DE1-7CCA-4EB1-8F09-7E5CAA55F75E@mikemccandless.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Well, this 'replacement' of the ThreadLocal does not solve the initial
problem. As there's always at least one ThreadLocal which binds the object
loaded by the web-app to the Thread which is _not_ loaded by the web-app,
the classloader never may be unloaded.

You are right, this is not the 'leak' in the usual sense, but this is not
the 'delayed GC' problem, this is the 'never-happening-GC' problem when you
have the classloader which needs to be unloaded.


Michael McCandless-2 wrote:
> 
> 
> After discussing this on java-dev:
> 
>     
> http://mail-archives.apache.org/mod_mbox/lucene-java-dev/200807.mbox/%3CF5FC94B2-E5C7-40C0-8B73-E12245B91CEE@mikemccandless.com%3E
> 
> it seems that this is not in fact a leak but rather a delayed GC  
> issue.  The objects are eventually freed, on Sun 1.4, 1.5 and 1.6.
> 
> When a ThreadLocal instance becomes unreferenced & GC'd, Java does not  
> immediately reclaim the now-unreferenced objects, if the thread  
> remains alive.  However, over time, as other ThreadLocals are used  
> with that thread, those stale objects do eventually get reclaimed.  So  
> my feeling for now is it's OK for Lucene to continue to use non-static  
> ThreadLocals.
> 
> Mike
> 
> Yonik Seeley wrote:
> 
>> On Mon, Jul 7, 2008 at 2:43 PM, Michael McCandless
>> <lucene@mikemccandless.com> wrote:
>>> So now I'm confused: the SegmentReader itself should no longer be  
>>> reachable,
>>> assuming you are not holding any references to your IndexReader.
>>>
>>> Which means the ThreadLocal instance should no longer be reachable.
>>
>> It will still be referenced from the Thread(s) ThreadLocalMap
>> The key (the ThreadLocal) will be weakly referenced, but the values
>> (now stale) are strongly referenced and won't be actually removed
>> until the table is resized (under the Java6 impl at least).
>> Nice huh?
>>
>> -Yonik
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/ThreadLocal-in-SegmentReader-tp18306230p18416048.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34913-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jul 12 10:09:23 2008
Return-Path: <java-user-return-34913-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 68262 invoked from network); 12 Jul 2008 10:09:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Jul 2008 10:09:23 -0000
Received: (qmail 25097 invoked by uid 500); 12 Jul 2008 10:09:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25070 invoked by uid 500); 12 Jul 2008 10:09:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25059 invoked by uid 99); 12 Jul 2008 10:09:14 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 12 Jul 2008 03:09:14 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 12 Jul 2008 10:08:21 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KHbyw-0005Ca-4G
	for java-user@lucene.apache.org; Sat, 12 Jul 2008 03:05:34 -0700
Message-ID: <18417970.post@talk.nabble.com>
Date: Sat, 12 Jul 2008 03:05:34 -0700 (PDT)
From: sandyg <gaddamsandeeps@gmail.com>
To: java-user@lucene.apache.org
Subject: background merge hit exception
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: gaddamsandeeps@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org




Hi ALL ,
This is the exception raised when  when am indexing the records (I have 10
million records and after indexing 4 million record  i got this exception)

java.io.IOException: background merge hit exception: _8n:c7759352 _8o:c57658
_8p:c55810 into _8q [optimize] 

please give me the solution.
-- 
View this message in context: http://www.nabble.com/background-merge-hit-exception-tp18417970p18417970.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34914-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jul 12 10:46:54 2008
Return-Path: <java-user-return-34914-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72198 invoked from network); 12 Jul 2008 10:46:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Jul 2008 10:46:54 -0000
Received: (qmail 41108 invoked by uid 500); 12 Jul 2008 10:46:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41072 invoked by uid 500); 12 Jul 2008 10:46:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41061 invoked by uid 99); 12 Jul 2008 10:46:47 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 12 Jul 2008 03:46:47 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=SPF_NEUTRAL,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [74.125.46.31] (HELO yw-out-2324.google.com) (74.125.46.31)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 12 Jul 2008 10:45:53 +0000
Received: by yw-out-2324.google.com with SMTP id 3so1731431ywj.5
        for <java-user@lucene.apache.org>; Sat, 12 Jul 2008 03:46:15 -0700 (PDT)
Received: by 10.150.137.8 with SMTP id k8mr17346545ybd.87.1215859575146;
        Sat, 12 Jul 2008 03:46:15 -0700 (PDT)
Received: from ?10.17.4.4? ( [72.93.214.93])
        by mx.google.com with ESMTPS id 5sm2622667yxt.1.2008.07.12.03.46.14
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Sat, 12 Jul 2008 03:46:14 -0700 (PDT)
Message-Id: <30C41984-93AB-413A-A7C4-38716C0E04E8@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <18417970.post@talk.nabble.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: background merge hit exception
Date: Sat, 12 Jul 2008 06:46:13 -0400
References: <18417970.post@talk.nabble.com>
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org


Normally when optimize throws this exception, either it includes a  
"caused by" in the exception, or, you should have seen a stack trace  
from a merge thread printed to your stderr.

One quick thing to check is whether you have enough disk space to  
complete the optimize.  It looks like that was your final merge, which  
is the biggest, so you'll need ~1X the size of your index in free  
space.  EG if your index is 10 GB you need 10 GB of free disk space  
before attempting optimize.

Finally, you can switch temporarily to SerialMergeScheduler and then  
run your optimize, eg:

   writer.setMergeScheduler(new SerialMergeScheduler());
   writer.optimize();

Mike

sandyg wrote:

>
>
>
> Hi ALL ,
> This is the exception raised when  when am indexing the records (I  
> have 10
> million records and after indexing 4 million record  i got this  
> exception)
>
> java.io.IOException: background merge hit exception: _8n:c7759352  
> _8o:c57658
> _8p:c55810 into _8q [optimize]
>
> please give me the solution.
> -- 
> View this message in context: http://www.nabble.com/background-merge-hit-exception-tp18417970p18417970.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34915-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jul 13 13:00:50 2008
Return-Path: <java-user-return-34915-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59639 invoked from network); 13 Jul 2008 13:00:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Jul 2008 13:00:50 -0000
Received: (qmail 79702 invoked by uid 500); 13 Jul 2008 13:00:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79657 invoked by uid 500); 13 Jul 2008 13:00:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79645 invoked by uid 99); 13 Jul 2008 13:00:42 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 13 Jul 2008 06:00:42 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of spring@gmx.eu designates 213.165.64.20 as permitted sender)
Received: from [213.165.64.20] (HELO mail.gmx.net) (213.165.64.20)
    by apache.org (qpsmtpd/0.29) with SMTP; Sun, 13 Jul 2008 12:59:49 +0000
Received: (qmail invoked by alias); 13 Jul 2008 12:59:10 -0000
Received: from e178127103.adsl.alicedsl.de (EHLO msrvcn04) [85.178.127.103]
  by mail.gmx.net (mp017) with SMTP; 13 Jul 2008 14:59:10 +0200
X-Authenticated: #2635966
X-Provags-ID: V01U2FsdGVkX18PKVo/FXEPldi4G760B2OS+wbXm9dO6nDicldN+1
	O5JsTeAtg9Iaj+
From: <spring@gmx.eu>
To: <java-user@lucene.apache.org>
Subject: Indexing questions
Date: Sun, 13 Jul 2008 14:59:10 +0200
Message-ID: <A9AEF4F5CDC245F699BE96AE81D425B4@msrvcn04>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.3790.4133
Thread-Index: Acjk6DtcRRc5W5UnSeqx4eKW3JF5FQ==
X-Y-GMX-Trusted: 0
X-FuHaFi: 0.78
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

I have some questions about indexing:

1. Is it possible to open indexes with Multireader+IndexSearcher and add
documents to these indexes simultaneously?
2. Is it possible to open indexes with Multireader+IndexSearcher and
optimize these indexes simultaneously?
3. Is it possible to open indexes with Multireader+IndexSearcher and merge
these indexes simultaneously?

Thank you.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34916-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jul 13 14:39:54 2008
Return-Path: <java-user-return-34916-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77487 invoked from network); 13 Jul 2008 14:39:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Jul 2008 14:39:54 -0000
Received: (qmail 18214 invoked by uid 500); 13 Jul 2008 14:39:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18173 invoked by uid 500); 13 Jul 2008 14:39:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18162 invoked by uid 99); 13 Jul 2008 14:39:48 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 13 Jul 2008 07:39:48 -0700
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.68.5.15] (HELO relay01.pair.com) (209.68.5.15)
    by apache.org (qpsmtpd/0.29) with SMTP; Sun, 13 Jul 2008 14:38:56 +0000
Received: (qmail 76966 invoked from network); 13 Jul 2008 14:39:16 -0000
Received: from unknown (HELO ?192.168.2.3?) (unknown)
  by unknown with SMTP; 13 Jul 2008 14:39:16 -0000
X-pair-Authenticated: 76.111.24.163
Subject: Boost token when storing document?
From: Darren Govoni <darren@ontrenet.com>
To: java-user@lucene.apache.org
Content-Type: text/plain
Date: Sun, 13 Jul 2008 10:39:17 -0400
Message-Id: <1215959957.9650.3.camel@nuraku>
Mime-Version: 1.0
X-Mailer: Evolution 2.22.2 
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,
  Sorry if I missed this in the documentation, but I wanted to know if
Lucene allows boosting of tokens _within_ a field when a document is
stored? Let me explain. Let's say I store the following field

numbers: one one one two three

Searching "numbers:" field with a boost on one will score higher for
this document because "one" is stronger in the field. What I want is to
not have to store "one" 3 times in the field.

numbers: one^3 two three

Or something like that _when_ I store the document. So when a search
comes, it sees that document as IF "one" was present 3 times. This way I
can manipulate the presence of tokens in a document without having to
waste space for them?

Thank you for any thought on this.

Darren


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34917-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jul 13 14:55:40 2008
Return-Path: <java-user-return-34917-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79942 invoked from network); 13 Jul 2008 14:55:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Jul 2008 14:55:39 -0000
Received: (qmail 22940 invoked by uid 500); 13 Jul 2008 14:55:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22906 invoked by uid 500); 13 Jul 2008 14:55:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 22895 invoked by uid 99); 13 Jul 2008 14:55:33 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 13 Jul 2008 07:55:33 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lucenelist2007@danielnaber.de designates 80.67.29.23 as permitted sender)
Received: from [80.67.29.23] (HELO smtprelay09.ispgateway.de) (80.67.29.23)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 13 Jul 2008 14:54:38 +0000
Received: from [91.37.248.221] (helo=p5b25f8dd.dip.t-dialin.net)
	by smtprelay09.ispgateway.de with esmtpsa (TLSv1:AES256-SHA:256)
	(Exim 4.68)
	(envelope-from <lucenelist2007@danielnaber.de>)
	id 1KI2yZ-0007Uv-L8
	for java-user@lucene.apache.org; Sun, 13 Jul 2008 16:54:59 +0200
From: Daniel Naber <lucenelist2007@danielnaber.de>
To: java-user@lucene.apache.org
Subject: Re: Boost token when storing document?
Date: Sun, 13 Jul 2008 16:57:14 +0200
User-Agent: KMail/1.9.6 (enterprise 20070904.708012)
References: <1215959957.9650.3.camel@nuraku>
In-Reply-To: <1215959957.9650.3.camel@nuraku>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="us-ascii"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200807131657.14371@danielnaber.de>
X-Df-Sender: 695637
X-Virus-Checked: Checked by ClamAV on apache.org

On Sonntag, 13. Juli 2008, Darren Govoni wrote:

> Hi,
>   Sorry if I missed this in the documentation, but I wanted to know if
> Lucene allows boosting of tokens _within_ a field when a document is
> stored? 

Yes, you can use payloads for that, see 
http://wiki.apache.org/lucene-java/Payloads

Regards
 Daniel

-- 
http://www.danielnaber.de

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34918-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jul 13 15:00:21 2008
Return-Path: <java-user-return-34918-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80898 invoked from network); 13 Jul 2008 15:00:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Jul 2008 15:00:20 -0000
Received: (qmail 26420 invoked by uid 500); 13 Jul 2008 15:00:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26387 invoked by uid 500); 13 Jul 2008 15:00:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26376 invoked by uid 99); 13 Jul 2008 15:00:15 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 13 Jul 2008 08:00:15 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 13 Jul 2008 14:59:22 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KI308-0003H0-79
	for java-user@lucene.apache.org; Sun, 13 Jul 2008 07:56:36 -0700
Message-ID: <18430143.post@talk.nabble.com>
Date: Sun, 13 Jul 2008 07:56:36 -0700 (PDT)
From: miztaken <justjunktome@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: How to handle frequent updates.
In-Reply-To: <21A2566B-E422-435A-A9EC-E72A1A8FCEE5@gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: justjunktome@gmail.com
References: <18347238.post@talk.nabble.com> <21A2566B-E422-435A-A9EC-E72A1A8FCEE5@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


>You want updates that show up in the reader/searcher without latency?  
>I believe LUCENE-1313 is an attempt at that.

Thanks for the info.

>What sort of operations do you use the matrix for? How large can it  
>grow? Can you give an example of what the matrix might contain?
>What was the reason to solve your problem using Lucene? Is there some  
>specific feature that made something easier or faster than the  
>solutions you discarded?

I want to do some mathematical operation which requires matrix manipulation,
and those matrix can be of huge size even though stored as sparse so i want
an embedded system (DB or API) which allow me to store, update, delete and
retrieve cell of matrix as fast as possilble considering disk constraints.

Any suggestion?

Thanks
miztaken


               karl

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org




-- 
View this message in context: http://www.nabble.com/How-to-handle-frequent-updates.-tp18347238p18430143.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34919-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jul 13 15:02:00 2008
Return-Path: <java-user-return-34919-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82431 invoked from network); 13 Jul 2008 15:02:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Jul 2008 15:02:00 -0000
Received: (qmail 28268 invoked by uid 500); 13 Jul 2008 15:01:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28241 invoked by uid 500); 13 Jul 2008 15:01:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28230 invoked by uid 99); 13 Jul 2008 15:01:54 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 13 Jul 2008 08:01:54 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 13 Jul 2008 15:01:01 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KI31i-0003L5-AT
	for java-user@lucene.apache.org; Sun, 13 Jul 2008 07:58:14 -0700
Message-ID: <18430143.post@talk.nabble.com>
Date: Sun, 13 Jul 2008 07:58:14 -0700 (PDT)
From: miztaken <justjunktome@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: How to handle frequent updates.
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: justjunktome@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hi there,
sorry for my late response. I was absorbed by something else.

>You want updates that show up in the reader/searcher without latency?  
>I believe LUCENE-1313 is an attempt at that.

Thanks for the info.

>What sort of operations do you use the matrix for? How large can it  
>grow? Can you give an example of what the matrix might contain?
>What was the reason to solve your problem using Lucene? Is there some  
>specific feature that made something easier or faster than the  
>solutions you discarded?

I want to do some mathematical operation which requires matrix manipulation,
and those matrix can be of huge size even though stored as sparse so i want
an embedded system (DB or API) which allow me to store, update, delete and
retrieve cell of matrix as fast as possilble considering disk constraints.

Any suggestion?

Thanks
miztaken


               karl

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org




-- 
View this message in context: http://www.nabble.com/How-to-handle-frequent-updates.-tp18347238p18430143.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34920-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 14 09:42:06 2008
Return-Path: <java-user-return-34920-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 29848 invoked from network); 14 Jul 2008 09:42:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Jul 2008 09:42:05 -0000
Received: (qmail 60031 invoked by uid 500); 14 Jul 2008 09:42:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59736 invoked by uid 500); 14 Jul 2008 09:41:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59725 invoked by uid 99); 14 Jul 2008 09:41:59 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Jul 2008 02:41:59 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Jul 2008 09:41:05 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KIKYi-0003A8-DB
	for java-user@lucene.apache.org; Mon, 14 Jul 2008 02:41:28 -0700
Message-ID: <18440507.post@talk.nabble.com>
Date: Mon, 14 Jul 2008 02:41:28 -0700 (PDT)
From: blazingwolf7 <blazingwolf7@gmail.com>
To: java-user@lucene.apache.org
Subject: ArrayList or HashMap
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: blazingwolf7@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hi, 

I am working on extracting information from around 2 to 3 million document
and place it into the memory to retrieve it for filtering search results.
The application will have to extract the information and store it for every
search. I am wondering what will be the best way to store this information.

ArrayList or hashmap? Which is the fastest among these two? I will have to
directly access information in a particular position by using some
identifier which both of this is capable of doing. So I just need to know
which one will be faster. And what is the maximum size of the arraylist and
hashmap?

thanks
-- 
View this message in context: http://www.nabble.com/ArrayList-or-HashMap-tp18440507p18440507.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34921-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 14 10:28:07 2008
Return-Path: <java-user-return-34921-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 39843 invoked from network); 14 Jul 2008 10:28:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Jul 2008 10:28:07 -0000
Received: (qmail 5082 invoked by uid 500); 14 Jul 2008 10:28:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5047 invoked by uid 500); 14 Jul 2008 10:28:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5036 invoked by uid 99); 14 Jul 2008 10:28:00 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Jul 2008 03:28:00 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [74.125.46.30] (HELO yw-out-2324.google.com) (74.125.46.30)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Jul 2008 10:27:06 +0000
Received: by yw-out-2324.google.com with SMTP id 3so2035913ywj.5
        for <java-user@lucene.apache.org>; Mon, 14 Jul 2008 03:27:18 -0700 (PDT)
Received: by 10.150.206.1 with SMTP id d1mr20002717ybg.144.1216031237902;
        Mon, 14 Jul 2008 03:27:17 -0700 (PDT)
Received: from ?10.17.4.4? ( [72.93.214.93])
        by mx.google.com with ESMTPS id 5sm4705652ywl.4.2008.07.14.03.27.17
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Mon, 14 Jul 2008 03:27:17 -0700 (PDT)
Message-Id: <B15BB6F3-DC7D-4BBF-A31D-8A9EFED33216@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <A9AEF4F5CDC245F699BE96AE81D425B4@msrvcn04>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: Indexing questions
Date: Mon, 14 Jul 2008 06:27:16 -0400
References: <A9AEF4F5CDC245F699BE96AE81D425B4@msrvcn04>
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org


The answer to all 3 is yes, but, you'll have to re-open your  
IndexReader to see any of those changes.

An IndexReader always searches the "point in time" snapshot of the  
index as of the moment it was opened.

Any & all changes done with an IndexWriter (including opening a new  
index in the directory with create=true) will not be visible to any  
already open IndexReader.

Mike

<spring@gmx.eu> wrote:

> Hi,
>
> I have some questions about indexing:
>
> 1. Is it possible to open indexes with Multireader+IndexSearcher and  
> add
> documents to these indexes simultaneously?
> 2. Is it possible to open indexes with Multireader+IndexSearcher and
> optimize these indexes simultaneously?
> 3. Is it possible to open indexes with Multireader+IndexSearcher and  
> merge
> these indexes simultaneously?
>
> Thank you.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34922-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 14 12:26:28 2008
Return-Path: <java-user-return-34922-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89868 invoked from network); 14 Jul 2008 12:26:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Jul 2008 12:26:28 -0000
Received: (qmail 39505 invoked by uid 500); 14 Jul 2008 12:26:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39479 invoked by uid 500); 14 Jul 2008 12:26:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39466 invoked by uid 99); 14 Jul 2008 12:26:22 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Jul 2008 05:26:22 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of asteriosk@gmail.com designates 64.233.184.236 as permitted sender)
Received: from [64.233.184.236] (HELO wr-out-0506.google.com) (64.233.184.236)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Jul 2008 12:25:28 +0000
Received: by wr-out-0506.google.com with SMTP id c30so4613176wra.21
        for <java-user@lucene.apache.org>; Mon, 14 Jul 2008 05:25:34 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type;
        bh=CYLKL4TE94UZSstP6hicp5geXVSjpYITbViiU9f1Qpg=;
        b=RXs4DqBZUbqUZRMyv2v4HWXm97PdiObpcaAq8ANXfmmVULZj180Tf5BSR2EnSXb5dY
         rS5EaKRI8mH5yXB8GW68HYM+m+pbS0x7udcOr+BFkfQciAbLSsKfMH2lMHejKRuuoaH/
         o5trNEINlg6dNv/Nc5DXbJinLZLJVpqHf1yKo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=WX7wRJt7blVsTjqaJGibjyLYtfK+H5onHJJUqigIAIlbJD8GrXDwmmh5UHIX26Pj3d
         xQ5XC9o2cxJqgZQYgu6yMH/A/TzbKPnwPFW+H8uSiDSklVO/QTaj4GRqg1L9rChJAUPm
         YvTAiukCwy04jp67wHfaNBMqUkbcH0aTE+adk=
Received: by 10.90.66.14 with SMTP id o14mr14563059aga.61.1216038334032;
        Mon, 14 Jul 2008 05:25:34 -0700 (PDT)
Received: by 10.90.105.16 with HTTP; Mon, 14 Jul 2008 05:25:33 -0700 (PDT)
Message-ID: <42b442de0807140525y531bd94fi840566282196acab@mail.gmail.com>
Date: Mon, 14 Jul 2008 15:25:33 +0300
From: "Asterios Katsifodimos" <asteriosk@gmail.com>
To: java-user@lucene.apache.org
Subject: Cosine Similarity between two documents, using different zone weights
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_44444_21395532.1216038334032"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_44444_21395532.1216038334032
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hello *,

I have been trying to find an *efficient *(in terms of performance) way
to get the Cosine Similarity between two Lucene Documents.

I have seen that this can be done with:

   1. Converting the document into a query and submitting the query, getting

   the results and their score. --TOO SLOW if you want this for all
   documents
   in a corpus.
   2. MoreLikeThis class, but this is not what I really want.

What I want is the following:
I have 3 different fields(zones) in my index(corpus) for each document.
Each zone has its own boost(weight).

What I need is: get the distance of all pairs of documents in my index
using the different term weights(from each field's boost).

I other words I need to calculate the Similarity formula
for all  pairs of documents in the index.

Does anyone have in mind any project or code that does this?
It would take some time to develop this myself.

thanks a lot in advance,
-- 
Asterios Katsifodimos
High Performance Computing systems Lab
Department of Computer Science, University of Cyprus
http://grid.ucy.ac.cy

------=_Part_44444_21395532.1216038334032--

From java-user-return-34923-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 14 13:05:32 2008
Return-Path: <java-user-return-34923-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7423 invoked from network); 14 Jul 2008 13:05:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Jul 2008 13:05:31 -0000
Received: (qmail 90378 invoked by uid 500); 14 Jul 2008 13:05:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90345 invoked by uid 500); 14 Jul 2008 13:05:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90334 invoked by uid 99); 14 Jul 2008 13:05:24 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Jul 2008 06:05:24 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ronchalant@gmail.com designates 209.85.200.175 as permitted sender)
Received: from [209.85.200.175] (HELO wf-out-1314.google.com) (209.85.200.175)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Jul 2008 13:04:32 +0000
Received: by wf-out-1314.google.com with SMTP id 28so4881012wfc.20
        for <java-user@lucene.apache.org>; Mon, 14 Jul 2008 06:04:56 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references;
        bh=aM0jSCb9e8MZuT8kVXIZzjxWQS3Ew9ynj7bVlWVPmWM=;
        b=rUWbtOJl0ZEYqPxxMqJSXAT4GWEHv6ta9lqUacPOQpDdslFvnV/XWU9Vo2uARSvb1u
         BzpzcZ4Ng74ypuHW+AsprlBe3QQmStzR5UjYAr0kCqRpikOc4NEr8VcSHGmZxb1zN1ZB
         kDGLwagoKQrgqTARqBYxV9Bc/SQGXzm0N4y10=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references;
        b=O0TtqcJX71BBORAJjYIU1CFYo5NN8vBcwOFDSPSMarXKYWPVHqVfiGrnVBOjdseRx8
         tjG5WTG18w75rALZ4jGfS65QCDhrO7w9ZNZz56gfyzHsGVvh2ai0LXy6jIv98kPdgsoY
         y6LsC8nm1s3poxgdTSiJxm2KL+uhZbRpM3F+k=
Received: by 10.142.180.19 with SMTP id c19mr4195534wff.322.1216040695841;
        Mon, 14 Jul 2008 06:04:55 -0700 (PDT)
Received: by 10.142.214.13 with HTTP; Mon, 14 Jul 2008 06:04:55 -0700 (PDT)
Message-ID: <d31a84170807140604u595b4883i8a26f404252c205e@mail.gmail.com>
Date: Mon, 14 Jul 2008 09:04:55 -0400
From: "Ron Rudy" <ronchalant@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Boolean expression for no terms OR matching a wildcard
In-Reply-To: <F28D06AF-4268-4854-9B59-4A2D0879FAD8@gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <F28D06AF-4268-4854-9B59-4A2D0879FAD8@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Can I assume that since nobody replied to this that there's no way to
perform this kind of search?  What I think I need is two different
types of conditions:

1) a wildcard conditional that is forced to match against all indexed
values for a field
2) a conditional that matches when NO values at all are indexed for a field

-Ron


On Thu, Jul 10, 2008 at 5:52 PM, Ronald Rudy <ronchalant@gmail.com> wrote:
> I need to perform a query for a term that may or may not have values, and I
> need to check for the conditions where either no terms are indexed OR any
> and ALL indexed terms match a wildcard.
>
> For example, say the following values were indexed as terms in the field
> "myfield" in the three documents:
>
> 1) terms "abc123" and "abcdef123"
> 2) terms "abc123", "def123" and "abcdef123"
> 3) no terms
>
> I want my query with a wildcard search of "+myfield:abc*123" to match on
> both 1 and 3 but NOT 2.
>
> Is this possible?
>
> Thanks,
>  - Ron
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34924-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 14 17:10:06 2008
Return-Path: <java-user-return-34924-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91106 invoked from network); 14 Jul 2008 17:10:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Jul 2008 17:10:06 -0000
Received: (qmail 39012 invoked by uid 500); 14 Jul 2008 17:09:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38988 invoked by uid 500); 14 Jul 2008 17:09:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38977 invoked by uid 99); 14 Jul 2008 17:09:59 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Jul 2008 10:09:59 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of blogathan.rao@gmail.com designates 72.14.204.231 as permitted sender)
Received: from [72.14.204.231] (HELO qb-out-0506.google.com) (72.14.204.231)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Jul 2008 17:09:07 +0000
Received: by qb-out-0506.google.com with SMTP id f17so4558048qba.5
        for <java-user@lucene.apache.org>; Mon, 14 Jul 2008 10:09:30 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type;
        bh=D8dNyL2wlX8PjAigki/2MDUDh2ahVwHGSahSgy/TJog=;
        b=wUvw8atPPdHgENO8kyAz4XCoz9P8Tk6MhFwVlqFqvOaWJvfj107nHVZptpSMJlTyBX
         oPNFJvX2ELYQTYIuQxkva8lsxYvY1IMGzmpMEZ9KEjvDUEqZxWEiAGfvYSDHziDJBfVp
         qbE8Bw9n/RFIV7wJfg9an8rEMtHY+/Ly5WmYE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=rYRV+dHBCGAWxb9wObDvB7a8PqpPkf2Sml2FonkMK2LfzZIYj/x5qkiBj4MnYxlS3L
         2aqSQefTwu0K4npJqi9nMFBNXggyx11zNPYJQ2UMIaw5DZVoEodH+gakAw3iYxwMxXOZ
         qG1V9O4f1I8ybCkrU37wlb2UU2kHDqELt5DrM=
Received: by 10.125.125.5 with SMTP id c5mr3443161mkn.164.1216055369622;
        Mon, 14 Jul 2008 10:09:29 -0700 (PDT)
Received: by 10.125.125.7 with HTTP; Mon, 14 Jul 2008 10:09:29 -0700 (PDT)
Message-ID: <a7f27bc30807141009s5dd18574yd8b4fbee3f54e256@mail.gmail.com>
Date: Mon, 14 Jul 2008 22:39:29 +0530
From: "Preetam Rao" <blogathan.rao@gmail.com>
To: java-user@lucene.apache.org
Subject: matching sub phrases from user entered query...
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_39999_6638429.1216055369606"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_39999_6638429.1216055369606
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi,

Is there a query in Lucene which matches sub phrases ?

For example if the document text is "new york  existing homes *3 bed 2
bath*homes 3 miles from city center 2 rooms" and if user enters
"Brooklyn homes
with *3 bed *rooms  and swimming pools", I would like to recognize the fact
the the document contained a sub prefix of the user query and give it more
score compared to a document which contained all the terms, but not in
phrases, for example " new york *2 bed 3 bath"* (should not match). Also
note that I do not want the *3 *and *2 *in *3 *miles and *2*  rooms to
affect the query when I have a sub phrase match.

This is something of a middle ground between pure 'boolean OR' query and an
'exact phrase query'. Here  the more the number of sub phrases and their
lengths, the higher the score compared to individual term matches.

I was redirected to Shingle filter which is a token filter that spits out
n-grams. But it does not seem to be best solution since one does not know in
advance what n in n-grams should be. Also it means one has to get all these
bi grams and then construct a boolean OR query which is not very efficient
either.

Anyone has tried any alternate approaches ? Appreciate your thoughts. The
use case is for user entered queries when one does interpret or parse them,
but to ensure that the better sub phrases user enters, the better results he
gets.

Thanks
Preetam

------=_Part_39999_6638429.1216055369606--

From java-user-return-34925-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 14 17:15:13 2008
Return-Path: <java-user-return-34925-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92278 invoked from network); 14 Jul 2008 17:15:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Jul 2008 17:15:12 -0000
Received: (qmail 44357 invoked by uid 500); 14 Jul 2008 17:15:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44327 invoked by uid 500); 14 Jul 2008 17:15:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44316 invoked by uid 99); 14 Jul 2008 17:15:06 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Jul 2008 10:15:06 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of blogathan.rao@gmail.com designates 72.14.204.233 as permitted sender)
Received: from [72.14.204.233] (HELO qb-out-0506.google.com) (72.14.204.233)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Jul 2008 17:14:14 +0000
Received: by qb-out-0506.google.com with SMTP id f17so4562961qba.5
        for <java-user@lucene.apache.org>; Mon, 14 Jul 2008 10:14:27 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type;
        bh=Efg6T4uUsWJoa6Fz2w79FbHPs05eW5vWi9FIhgZ9yhE=;
        b=dkux3At25gLPGFV2ybmgPf5DKYG5xxRG5vOQhMNdXv+3L5U0+ofH1CL2n0Zv7ONPrS
         kYor13ez9sg7yYU22CDBt7utQWZKhVAA847fu7aSUsBQiM0q/uAUHZ2jMh/VrNiIVFi0
         Z9sbF1xu1d5t02m19f1nny5kGkClhHqM+nMhw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=rMWsrjC7iDqgtzdTYrtydokT4kaqO+Dk9jDEtrNiPUqDTo0sjIqjMcMlvcwn2oykaY
         62WnKhqaQAXKRTy/3zATbmEfHF8JwwxHWzeCUVt6+RSMfpHPOhT3WB7rg6B+zjkL3Oc1
         YJv512XzgvGVmWA+EAwdwMB9a3MgjkNA7QLwM=
Received: by 10.125.89.5 with SMTP id r5mr3440003mkl.173.1216055666622;
        Mon, 14 Jul 2008 10:14:26 -0700 (PDT)
Received: by 10.125.125.7 with HTTP; Mon, 14 Jul 2008 10:14:26 -0700 (PDT)
Message-ID: <a7f27bc30807141014uaf5fc6cme9426b00cdebcc59@mail.gmail.com>
Date: Mon, 14 Jul 2008 22:44:26 +0530
From: "Preetam Rao" <blogathan.rao@gmail.com>
To: java-user@lucene.apache.org
Subject: matching sub phrases in user entered query...
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_40029_12143229.1216055666637"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_40029_12143229.1216055666637
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi,

Sorry if you get this mail second time. Having some trouble with mail box.

Is there a query in Lucene which matches sub phrases ?

For example if the document text is "new york  existing homes *3 bed 2
bath*homes 3 miles from city center 2 rooms" and if user enters
"Brooklyn homes
with *3 bed *rooms  and swimming pools", I would like to recognize the fact
the the document contained a sub prefix of the user query and give it more
score compared to a document which contained all the terms, but not in
phrases, for example " new york *2 bed 3 bath"* (should not match). Also
note that I do not want the *3 *and *2 *in *3 *miles and *2*  rooms to
affect the query when I have a sub phrase match.

This is something of a middle ground between pure 'boolean OR' query and an
'exact phrase query'. Here  the more the number of sub phrases and their
lengths, the higher the score compared to individual term matches.

I was redirected to Shingle filter which is a token filter that spits out
n-grams. But it does not seem to be best solution since one does not know in
advance what n in n-grams should be. Also it means one has to get all these
bi grams and then construct a boolean OR query which is not very efficient
either.

Anyone has tried any alternate approaches ? Appreciate your thoughts. The
use case is for user entered queries when one does interpret or parse them,
but to ensure that the better sub phrases user enters, the better results he
gets.

Thanks
Preetam

------=_Part_40029_12143229.1216055666637--

From java-user-return-34926-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 14 17:41:08 2008
Return-Path: <java-user-return-34926-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5574 invoked from network); 14 Jul 2008 17:41:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Jul 2008 17:41:08 -0000
Received: (qmail 84877 invoked by uid 500); 14 Jul 2008 17:41:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84844 invoked by uid 500); 14 Jul 2008 17:41:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 84833 invoked by uid 99); 14 Jul 2008 17:41:01 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Jul 2008 10:41:01 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of blogathan.rao@gmail.com designates 216.239.58.188 as permitted sender)
Received: from [216.239.58.188] (HELO gv-out-0910.google.com) (216.239.58.188)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Jul 2008 17:40:09 +0000
Received: by gv-out-0910.google.com with SMTP id u5so1426024gve.23
        for <java-user@lucene.apache.org>; Mon, 14 Jul 2008 10:40:32 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type;
        bh=xpdKFlvd/LfmfZMDTz0N5WZFB/svEQn4TKHnFLgcg6s=;
        b=YH5Oxx+0lKHBrKPI6+T1kj/lYgC84L1W+8fImvWmVEGloRh2zh/GAGlCWvM+7XhQOD
         nMbCBpoNfYfiIsstkMNCYKZP0zXRPR13vjSvBNqCZrZP1rtmba4miohom0Cs0JmqfLh7
         kQgY/Tl272Ib64RAeIhd9zCtebLuzPqbtonUE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=KFlgIZTAGDr21gixslDj4cd0v8XFCnYnQqpN+jxQ4r0S6OrUyg6yxXIERXoGl5Tf8w
         /DXzorJxPDIyMkDRHWGs+uvaf4/LRiL96SIdegj1/80jylNm5fihZzd1Omv3UFkKIY2d
         Mj5E88g5W1v9AiPzT+FeMy3BhwG16RebtiFqo=
Received: by 10.125.68.6 with SMTP id v6mr3455220mkk.124.1216057231876;
        Mon, 14 Jul 2008 10:40:31 -0700 (PDT)
Received: by 10.125.125.7 with HTTP; Mon, 14 Jul 2008 10:40:31 -0700 (PDT)
Message-ID: <a7f27bc30807141040y2846e1d3y25fe39593cfe10f0@mail.gmail.com>
Date: Mon, 14 Jul 2008 23:10:31 +0530
From: "Preetam Rao" <blogathan.rao@gmail.com>
To: java-user@lucene.apache.org
Subject: matching sub phrases in user entered query...
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_40434_28315136.1216057231892"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_40434_28315136.1216057231892
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi,

Sorry if you get this mail second or third time. Getting mail delivery
errors from gmail for some unknown reason.
This is my last attempt at sending the mail for the day.. :-)

Is there a query in Lucene which matches sub phrases ?

For example if the document text is "new york  existing homes *3 bed 2
bath*homes 3 miles from city center 2 rooms" and if user enters
"Brooklyn homes
with *3 bed *rooms  and swimming pools", I would like to recognize the fact
the the document contained a sub prefix of the user query and give it more
score compared to a document which contained all the terms, but not in
phrases, for example " new york *2 bed 3 bath"* (should not match). Also
note that I do not want the *3 *and *2 *in *3 *miles and *2*  rooms to
affect the query when I have a sub phrase match.

This is something of a middle ground between pure 'boolean OR' query and an
'exact phrase query'. Here  the more the number of sub phrases and their
lengths, the higher the score compared to individual term matches.

I was redirected to Shingle filter which is a token filter that spits out
n-grams. But it does not seem to be best solution since one does not know in
advance what n in n-grams should be. Also it means one has to get all these
bi grams and then construct a boolean OR query which is not very efficient
either.

Anyone has tried any alternate approaches ? Appreciate your thoughts. The
use case is for user entered queries when one does interpret or parse them,
but to ensure that the better sub phrases user enters, the better results he
gets.

Thanks
Preetam

------=_Part_40434_28315136.1216057231892--

From java-user-return-34927-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 14 18:06:44 2008
Return-Path: <java-user-return-34927-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26710 invoked from network); 14 Jul 2008 18:06:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Jul 2008 18:06:44 -0000
Received: (qmail 18071 invoked by uid 500); 14 Jul 2008 18:06:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18044 invoked by uid 500); 14 Jul 2008 18:06:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18033 invoked by uid 99); 14 Jul 2008 18:06:38 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Jul 2008 11:06:38 -0700
X-ASF-Spam-Status: No, hits=-4.0 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [128.230.108.46] (HELO SUEXCL-02.ad.syr.edu) (128.230.108.46)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Jul 2008 18:05:45 +0000
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: RE: matching sub phrases in user entered query...
Date: Mon, 14 Jul 2008 14:03:29 -0400
Message-ID: <9294E20AED46934EA459020706463F94C59B33@SUEXCL-02.ad.syr.edu>
In-Reply-To: <a7f27bc30807141040y2846e1d3y25fe39593cfe10f0@mail.gmail.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: matching sub phrases in user entered query...
Thread-Index: Acjl2NKP5N1cgnBETaOhLXqyF6FmogAAHIuw
From: "Steven A Rowe" <sarowe@syr.edu>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Preetam,

On 07/14/2008 at 1:40 PM, Preetam Rao wrote:
> Is there a query in Lucene which matches sub phrases ?
>=20
[snip]
>=20
> I was redirected to Shingle filter which is a token filter
> that spits out n-grams. But it does not seem to be best solution
> since one does not know in advance what n in n-grams should be.

You could guess at the useful range, though, and then have ((max n)-(min =
n)+1) fields, scaling the boost for each with the corresponding value of =
n. =20

Just using 2-grams could be good enough, since the longer the sub-phrase =
match, the more matching 2-grams.

> Also it means one has to get all these bi grams and then construct
> a boolean OR query which is not very efficient either.

In terms of your requirements, though, I think you're stuck with this =
inefficiency, no matter what solution you end up with; you need to do =
some form of term combination in your queries.  And the ShingleFilter =
approach doesn't compare badly here, since positions for phrase queries =
don't have to be looked up during scoring. =20

If index space efficiency is a concern, though, the =
one-field-per-value-of-n solution I mentioned above could pose a =
problem.

Steve

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34928-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 14 18:46:23 2008
Return-Path: <java-user-return-34928-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63973 invoked from network); 14 Jul 2008 18:46:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Jul 2008 18:46:23 -0000
Received: (qmail 135 invoked by uid 500); 14 Jul 2008 18:46:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 117 invoked by uid 500); 14 Jul 2008 18:46:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 29106 invoked by uid 99); 14 Jul 2008 17:04:41 -0000
X-ASF-Spam-Status: No, hits=-1.0 required=10.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of SRS0=+CtHHZ=X2=lucasmail.org=paul@yourhostingaccount.com designates 65.254.253.112 as permitted sender)
X-EN-OrigOutIP: 10.1.18.5
X-EN-IMPSID: pt101Z00506ZpSa0000000
Message-Id: <B9D440EB-172D-41F3-BC36-848C0254B9BC@lucasmail.org>
From: "Paul J. Lucas" <paul@lucasmail.org>
To: java-user@lucene.apache.org
In-Reply-To: <Pine.LNX.4.62.0807101400360.16471@radix.cryptio.net>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v928)
Subject: Re: Sorting case-insensitively
Date: Mon, 14 Jul 2008 10:00:30 -0700
References: <EB8A44A6-A9FF-4C0E-ACA8-9E0E21C5AD6F@lucasmail.org> <E91CC8FF-2D02-42C2-8CEA-6D5B61E4C253@ehatchersolutions.com> <3F71F1AB-3905-4097-8C86-E66916BDF521@lucasmail.org> <868CA8F2-4F97-4CC1-98DB-C34E4A88A2F8@lucasmail.org> <Pine.LNX.4.62.0807092210550.27581@radix.cryptio.net> <8082B7D2-C2DD-4069-A7F9-6C53FBE93675@lucasmail.org> <Pine.LNX.4.62.0807101400360.16471@radix.cryptio.net>
X-Mailer: Apple Mail (2.928)
X-EN-UserInfo: 19b3ee6e8bc35660ab25150f3ce1009e:104eb4694f5dc54e252b420fd863a3b6
X-EN-AuthUser: paul@pauljlucas.org
Sender:  "Paul J. Lucas" <paul@lucasmail.org>
X-EN-OrigIP: 76.201.168.3
X-EN-OrigHost: adsl-76-201-168-3.dsl.pltn13.sbcglobal.net
X-Virus-Checked: Checked by ClamAV on apache.org

On Jul 10, 2008, at 2:24 PM, Chris Hostetter wrote:

> if you could submit a test case that
> reproduces this using a trivial subclass (just return the orriginal  
> String
> as the Comparable) that can help us verify the bug and the fix.

See my e-mail dated July 3, 2008.

> Assuming i'm right, I don'treally have any good work arround  
> suggestion
> for you beyond overriding newComparator() in your SortComparator  
> subclass
> to explicitly test for null yourself.

And what do I do if it is null?

- Paul

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34929-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 14 18:47:38 2008
Return-Path: <java-user-return-34929-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65250 invoked from network); 14 Jul 2008 18:47:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Jul 2008 18:47:38 -0000
Received: (qmail 5825 invoked by uid 500); 14 Jul 2008 18:47:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5787 invoked by uid 500); 14 Jul 2008 18:47:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5776 invoked by uid 99); 14 Jul 2008 18:47:30 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Jul 2008 11:47:30 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: 82.108.63.208 is neither permitted nor denied by domain of googlydec@gmail.com)
Received: from [82.108.63.208] (HELO mail.semantico.net) (82.108.63.208)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Jul 2008 18:46:37 +0000
Received: from mail.semantico.net (localhost.localdomain [127.0.0.1])
	by mail.semantico.net (Postfix) with ESMTP id 85D0238393
	for <java-user@lucene.apache.org>; Mon, 14 Jul 2008 19:46:58 +0100 (BST)
Received: from [192.168.1.238] (fw2-dmz.semantico.net [82.108.63.253])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by mail.semantico.net (Postfix) with ESMTP id 770813838F
	for <java-user@lucene.apache.org>; Mon, 14 Jul 2008 19:46:58 +0100 (BST)
Message-ID: <487B9F21.7010705@gmail.com>
Date: Mon, 14 Jul 2008 19:46:57 +0100
From: Declan Newman <googlydec@gmail.com>
User-Agent: Thunderbird 2.0.0.14 (Windows/20080421)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: MultiSearcher and TopFieldDocCollector
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Scanned: ClamAV using ClamSMTP
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

I'm in the process of trying to optimize searches and avoid the dreaded 
OutOfMemoryError s.

We currently return the entire document from each of the search results 
and then filter the results using parameters obtained from a database. 
Not very efficient.

The idea was to override TopFieldDocCollector to do the sorting etc. and 
only load the full document for those we need to display. But, I haven't 
found an easy way to use TopFieldDocCollector (FieldSortedHitQueue etc.) 
with MultiSearcher.

Is there an easy way I've missed?

Thanks for any advice.

Declan

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34930-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 15 02:16:15 2008
Return-Path: <java-user-return-34930-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89779 invoked from network); 15 Jul 2008 02:16:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Jul 2008 02:16:14 -0000
Received: (qmail 30812 invoked by uid 500); 15 Jul 2008 02:16:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30785 invoked by uid 500); 15 Jul 2008 02:16:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30774 invoked by uid 99); 15 Jul 2008 02:16:07 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Jul 2008 19:16:07 -0700
X-ASF-Spam-Status: No, hits=-4.0 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of absayeed@us.ibm.com designates 32.97.182.146 as permitted sender)
Received: from [32.97.182.146] (HELO e6.ny.us.ibm.com) (32.97.182.146)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Jul 2008 02:15:12 +0000
Received: from d01relay04.pok.ibm.com (d01relay04.pok.ibm.com [9.56.227.236])
	by e6.ny.us.ibm.com (8.13.8/8.13.8) with ESMTP id m6F2Ho7W014441
	for <java-user@lucene.apache.org>; Mon, 14 Jul 2008 22:17:50 -0400
Received: from d01av04.pok.ibm.com (d01av04.pok.ibm.com [9.56.224.64])
	by d01relay04.pok.ibm.com (8.13.8/8.13.8/NCO v9.0) with ESMTP id m6F2FFCx237558
	for <java-user@lucene.apache.org>; Mon, 14 Jul 2008 22:15:15 -0400
Received: from d01av04.pok.ibm.com (loopback [127.0.0.1])
	by d01av04.pok.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id m6F2FFax020032
	for <java-user@lucene.apache.org>; Mon, 14 Jul 2008 22:15:15 -0400
Received: from d01ml604.pok.ibm.com (d01ml604.pok.ibm.com [9.56.227.90])
	by d01av04.pok.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id m6F2FFBp020028
	for <java-user@lucene.apache.org>; Mon, 14 Jul 2008 22:15:15 -0400
In-Reply-To: <487B9F21.7010705@gmail.com>
Subject: Stable score scaling; LSI again
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 7.0 HF144 February 01, 2006
Message-ID: <OF38831C7C.47DBAB4D-ON85257487.00079604-85257487.000C64B1@us.ibm.com>
From: Asad Sayeed <absayeed@us.ibm.com>
Date: Mon, 14 Jul 2008 22:15:16 -0400
X-MIMETrack: Serialize by Router on D01ML604/01/M/IBM(Build V85_M1_05262008|May 26, 2008) at
 07/14/2008 22:15:15
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org

Hi, I have a couple of questions about how to alter the similarity scores.
I need scores that can be thresholded, and whose thresholds remain stable
even when I add documents to the IndexWriter. ie, identity should be a
fixed value such as 1.0.  I know that for efficiency reasons, Lucene
doesn't do this.  However, that level of efficiency is not as big a concern
for me as getting a stable, thresholdable similarity score from, eg,
"normal" cosine similarity.  Is there a way to change the DefaultSimilarity
trivally to get this feature, or is it a major overhaul?  The searches from
Lucene are being fed to another analyzer is why, so when the "identity"
score changes by adding docs to the index, it messes up the rest of the
processing.

The other question I had was about scoring via Latent Semantic Indexing.  I
read in the archives of this list from way back when that LSI was hard to
integrate into Lucene.  Is that still the case?  I mean, from what I
understand, it is just transforming the index in some way.

Yours,
--Asad.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34931-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 15 03:36:21 2008
Return-Path: <java-user-return-34931-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32005 invoked from network); 15 Jul 2008 03:36:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Jul 2008 03:36:21 -0000
Received: (qmail 64854 invoked by uid 500); 15 Jul 2008 03:36:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64825 invoked by uid 500); 15 Jul 2008 03:36:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64814 invoked by uid 99); 15 Jul 2008 03:36:14 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Jul 2008 20:36:14 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of blogathan.rao@gmail.com designates 209.85.128.188 as permitted sender)
Received: from [209.85.128.188] (HELO fk-out-0910.google.com) (209.85.128.188)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Jul 2008 03:35:21 +0000
Received: by fk-out-0910.google.com with SMTP id 18so3053855fkq.5
        for <java-user@lucene.apache.org>; Mon, 14 Jul 2008 20:35:43 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=dHGNjlH/Hn/eVG9xf5kFNbYiiOpBx5FoumrucnBIPqw=;
        b=Le5u4yiVi5iWZnUOK9wefiV/C1lziWxsEeXVI8BVpcElI8JRIbqFE7cEd71FcXDn+/
         6cHPa6Vye89yS7IR+fy+X9uCjq2wescIgl/Zm9G3S2nkH0dJGLJD0eBeurGmQBBRjVZu
         k/gXv5I22b/fQw2Tf530Of04xWKuwmfyB433I=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=dGig/afOx0A/jeo6H9i+aL4Ehtk7CjtiJ7SK/Z5I4cG5UDQeWPuEP0R66Ugj9wvpy8
         HolWFl74oj/veuwOB5mBeyWLAZQnXzXLXYlU6XbtB6v28oHmdQrWKfUW8uH6RJNuPdJR
         9XmWamKlt6jwckCoRmAxlk7cvKbIaAp/1dq3U=
Received: by 10.125.164.7 with SMTP id r7mr3490419mko.132.1216092943324;
        Mon, 14 Jul 2008 20:35:43 -0700 (PDT)
Received: by 10.125.125.7 with HTTP; Mon, 14 Jul 2008 20:35:43 -0700 (PDT)
Message-ID: <a7f27bc30807142035u45636588o321f03369b0f842@mail.gmail.com>
Date: Tue, 15 Jul 2008 09:05:43 +0530
From: "Preetam Rao" <blogathan.rao@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: matching sub phrases in user entered query...
In-Reply-To: <9294E20AED46934EA459020706463F94C59B33@SUEXCL-02.ad.syr.edu>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_354_18453247.1216092943312"
References: <a7f27bc30807141040y2846e1d3y25fe39593cfe10f0@mail.gmail.com>
	 <9294E20AED46934EA459020706463F94C59B33@SUEXCL-02.ad.syr.edu>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_354_18453247.1216092943312
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi Steve,

It would be simpler if I have a query called SubPhraseQuery in which case I
do not have to either generate extra terms during ingestion or generate
extra queries during querying. As a user, the best I would hope for is, to
ingest the data from some feed into different fields, run the user query as
is using some set of lucene queries and get most relevant results without
worrying much about the internals  of scoring.

In my case, I know that each field will most likely match some sub phrase of
the user query and need to have a query or solr request handler which
handles this case.

For cases where I care more about exact matches or sub phrase matches and
not about tf or idf, I think a SubPhraseQuery with the following parameters
will be great.
phraseBoostFactor - factor which tells how good a n term match is than n-1
term match.
useHighestMatch - which picks only the best sub phrase match as the score
ignoreDuplicates - ignores duplicate sub phrase matches.

Currently I have tried using Solr's dismax handler as well as standard
request handler with boosts and other parameters, but out of 3 million
documents, unable to get the most relevant top 5 results which is most
important for me.Trying to understand the scoring and fine tuning was no
help either. To get the most relevant top 10 results, I am willing to
resorting to some kind of exact match based scores rather than rely on
lucene's scoring formulas.

If a query like above is in place, then one can use another solr request
handler similar to dismax, which uses SubPhraseQuerries instead of dismax.
And for a user who is more interested in exact/sub phrase matches in some
fields and normal boolean matches in other, the additional parameters at the
handler level would be more useful.
matchOnlyOneField - matches only one field and does not use matched terms on
another field.
ignoretfIdf - On a per field basis, allows one to ignore some scoring
calculations and just use the sub phrase scores.

This handler combined with sub phrase query parameters can prove very useful
in handling user queries as they are , with lot more flexibility.

I believe, the same use case might exist for many users who have mostly
structured data with only some portions of it being free text, like
description, reviews etc and want to handle user entered queries as is
without resorting to query interpretation of score tuning.

Thanks
Preetam

On Mon, Jul 14, 2008 at 11:33 PM, Steven A Rowe <sarowe@syr.edu> wrote:

> Hi Preetam,
>
> On 07/14/2008 at 1:40 PM, Preetam Rao wrote:
> > Is there a query in Lucene which matches sub phrases ?
> >
> [snip]
> >
> > I was redirected to Shingle filter which is a token filter
> > that spits out n-grams. But it does not seem to be best solution
> > since one does not know in advance what n in n-grams should be.
>
> You could guess at the useful range, though, and then have ((max n)-(min
> n)+1) fields, scaling the boost for each with the corresponding value of n.
>
> Just using 2-grams could be good enough, since the longer the sub-phrase
> match, the more matching 2-grams.
>
> > Also it means one has to get all these bi grams and then construct
> > a boolean OR query which is not very efficient either.
>
> In terms of your requirements, though, I think you're stuck with this
> inefficiency, no matter what solution you end up with; you need to do some
> form of term combination in your queries.  And the ShingleFilter approach
> doesn't compare badly here, since positions for phrase queries don't have to
> be looked up during scoring.
>
> If index space efficiency is a concern, though, the
> one-field-per-value-of-n solution I mentioned above could pose a problem.
>
> Steve
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_354_18453247.1216092943312--

From java-user-return-34932-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 15 04:52:51 2008
Return-Path: <java-user-return-34932-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65416 invoked from network); 15 Jul 2008 04:52:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Jul 2008 04:52:51 -0000
Received: (qmail 7637 invoked by uid 500); 15 Jul 2008 04:52:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7598 invoked by uid 500); 15 Jul 2008 04:52:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7587 invoked by uid 99); 15 Jul 2008 04:52:44 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 14 Jul 2008 21:52:44 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of anshumg@gmail.com designates 72.14.220.154 as permitted sender)
Received: from [72.14.220.154] (HELO fg-out-1718.google.com) (72.14.220.154)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Jul 2008 04:51:51 +0000
Received: by fg-out-1718.google.com with SMTP id l27so2838257fgb.27
        for <java-user@lucene.apache.org>; Mon, 14 Jul 2008 21:52:11 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=QnHRWQ7RXPmY6G7yvH3iDPA1lYoTUu8qBYH2geVcTCM=;
        b=r2fL/ZOT8+Gy07Mm8mSgnMalo2IDatt/dgoSqj3VZKXxthpGGEQP7021mjVr87Dihy
         BzLFF6X/hlaprcfpgtNCavAUoaUmEz7q26zGcS7Rhx7U9soYDR5EwL1UpyoqA7VXN5Az
         Q+Xc6uRPTFOt3TJYXW0jyBflZ0Isckz/J339Q=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=RXGAhlBeaEaPQLID0Tmi2QiqasdBHqA4Euhdtn7h8NuXyZf8IM5aYfVeGvhy1hHOAV
         lXGkz/pqTyjNJrOt2k9rrTxUyDqkxTwrQHZ7enhoxFO4PFNLVPqUm5bL8WAPQsvm4B79
         qZOQP8eAaU7di7mkAISrh/NhYhExPzeLt21Oc=
Received: by 10.125.161.2 with SMTP id n2mr72552mko.162.1216097531396;
        Mon, 14 Jul 2008 21:52:11 -0700 (PDT)
Received: by 10.125.162.6 with HTTP; Mon, 14 Jul 2008 21:52:11 -0700 (PDT)
Message-ID: <867513fe0807142152l68d31699l9207f019721c8f1d@mail.gmail.com>
Date: Tue, 15 Jul 2008 10:22:11 +0530
From: Anshum <anshumg@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Indexing questions
In-Reply-To: <A9AEF4F5CDC245F699BE96AE81D425B4@msrvcn04>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_850_13760371.1216097531395"
References: <A9AEF4F5CDC245F699BE96AE81D425B4@msrvcn04>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_850_13760371.1216097531395
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi,

As per my knowledge, you may do any of the below processes while searching
(n parallel) just that the changes would not reflect until you reopen the
index readers (by either using the reopen command or closing and opening
them explicitly).
But the downside to this would be, in case your daemon crashes in the
meantime or you need to restart the daemon, the index would not be usable
until you have completed your indexing processs.
How about just copying and performing your indexing (or index write related)
operations on the  copy and then performing a rename operation followed by
reopening of the index readers.

--
Anshum

On Sun, Jul 13, 2008 at 6:29 PM, <spring@gmx.eu> wrote:

> Hi,
>
> I have some questions about indexing:
>
> 1. Is it possible to open indexes with Multireader+IndexSearcher and add
> documents to these indexes simultaneously?
> 2. Is it possible to open indexes with Multireader+IndexSearcher and
> optimize these indexes simultaneously?
> 3. Is it possible to open indexes with Multireader+IndexSearcher and merge
> these indexes simultaneously?
>
> Thank you.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
--
The facts expressed here belong to everybody, the opinions to me.
The distinction is yours to draw............

------=_Part_850_13760371.1216097531395--

From java-user-return-34933-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 15 07:32:08 2008
Return-Path: <java-user-return-34933-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38246 invoked from network); 15 Jul 2008 07:32:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Jul 2008 07:32:08 -0000
Received: (qmail 14270 invoked by uid 500); 15 Jul 2008 07:32:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14247 invoked by uid 500); 15 Jul 2008 07:32:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 14236 invoked by uid 99); 15 Jul 2008 07:32:01 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Jul 2008 00:32:01 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: 194.109.24.35 is neither permitted nor denied by domain of karl.wettin@gmail.com)
Received: from [194.109.24.35] (HELO smtp-vbr15.xs4all.nl) (194.109.24.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Jul 2008 07:31:07 +0000
Received: from kodapan.lan (memnon.xs4all.nl [82.93.70.124])
	by smtp-vbr15.xs4all.nl (8.13.8/8.13.8) with ESMTP id m6F7Uvt5023692
	for <java-user@lucene.apache.org>; Tue, 15 Jul 2008 09:30:58 +0200 (CEST)
	(envelope-from karl.wettin@gmail.com)
Message-Id: <4322275B-59E8-4FD8-A057-2613719E6084@gmail.com>
From: Karl Wettin <karl.wettin@gmail.com>
To: java-user@lucene.apache.org
In-Reply-To: <18430143.post@talk.nabble.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: How to handle frequent updates.
Date: Tue, 15 Jul 2008 09:30:57 +0200
References: <18430143.post@talk.nabble.com>
X-Mailer: Apple Mail (2.926)
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org


13 jul 2008 kl. 16.58 skrev miztaken:
>
>> What sort of operations do you use the matrix for? How large can it
>> grow? Can you give an example of what the matrix might contain?
>> What was the reason to solve your problem using Lucene? Is there some
>> specific feature that made something easier or faster than the
>> solutions you discarded?
>
> I want to do some mathematical operation which requires matrix  
> manipulation,
> and those matrix can be of huge size even though stored as sparse so  
> i want
> an embedded system (DB or API) which allow me to store, update,  
> delete and
> retrieve cell of matrix as fast as possilble considering disk  
> constraints.
>
> Any suggestion?


I still don't understand why you choose Lucene in the first place. Do  
you for instance query the index? Or is Lucene only used to persist  
the matrix?

Perhaps HAMA, BDB or a relational database could work for you.


        karl

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34934-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 15 07:48:34 2008
Return-Path: <java-user-return-34934-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 46919 invoked from network); 15 Jul 2008 07:48:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Jul 2008 07:48:34 -0000
Received: (qmail 44045 invoked by uid 500); 15 Jul 2008 07:48:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44018 invoked by uid 500); 15 Jul 2008 07:48:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44007 invoked by uid 99); 15 Jul 2008 07:48:27 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Jul 2008 00:48:27 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: 194.109.24.34 is neither permitted nor denied by domain of karl.wettin@gmail.com)
Received: from [194.109.24.34] (HELO smtp-vbr14.xs4all.nl) (194.109.24.34)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Jul 2008 07:47:34 +0000
Received: from kodapan.lan (memnon.xs4all.nl [82.93.70.124])
	by smtp-vbr14.xs4all.nl (8.13.8/8.13.8) with ESMTP id m6F7lPHr065551
	for <java-user@lucene.apache.org>; Tue, 15 Jul 2008 09:47:25 +0200 (CEST)
	(envelope-from karl.wettin@gmail.com)
Message-Id: <9168B6C9-FD83-4F44-926C-D4D83D589C6F@gmail.com>
From: Karl Wettin <karl.wettin@gmail.com>
To: java-user@lucene.apache.org
In-Reply-To: <a7f27bc30807142035u45636588o321f03369b0f842@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: matching sub phrases in user entered query...
Date: Tue, 15 Jul 2008 09:47:25 +0200
References: <a7f27bc30807141040y2846e1d3y25fe39593cfe10f0@mail.gmail.com> <9294E20AED46934EA459020706463F94C59B33@SUEXCL-02.ad.syr.edu> <a7f27bc30807142035u45636588o321f03369b0f842@mail.gmail.com>
X-Mailer: Apple Mail (2.926)
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org

Couldn't you create multiple "shingle phrase queries" from the user  
query and add them all to a BooleanQuery?

"example input query"^10 OR
"example input"^5 OR
"input query"^5

SpanNear and PhraseQueries are rather expensive though. Not too long  
ago I replaced phrase queries with a shingles in an index containing  
tens of millions of small documents, resulting in queries taking  
something like 1/10 of the time to match with just as good results. If  
not even better in some cases.

     karl


15 jul 2008 kl. 05.35 skrev Preetam Rao:

> Hi Steve,
>
> It would be simpler if I have a query called SubPhraseQuery in which  
> case I
> do not have to either generate extra terms during ingestion or  
> generate
> extra queries during querying. As a user, the best I would hope for  
> is, to
> ingest the data from some feed into different fields, run the user  
> query as
> is using some set of lucene queries and get most relevant results  
> without
> worrying much about the internals  of scoring.
>
> In my case, I know that each field will most likely match some sub  
> phrase of
> the user query and need to have a query or solr request handler which
> handles this case.
>
> For cases where I care more about exact matches or sub phrase  
> matches and
> not about tf or idf, I think a SubPhraseQuery with the following  
> parameters
> will be great.
> phraseBoostFactor - factor which tells how good a n term match is  
> than n-1
> term match.
> useHighestMatch - which picks only the best sub phrase match as the  
> score
> ignoreDuplicates - ignores duplicate sub phrase matches.
>
> Currently I have tried using Solr's dismax handler as well as standard
> request handler with boosts and other parameters, but out of 3 million
> documents, unable to get the most relevant top 5 results which is most
> important for me.Trying to understand the scoring and fine tuning  
> was no
> help either. To get the most relevant top 10 results, I am willing to
> resorting to some kind of exact match based scores rather than rely on
> lucene's scoring formulas.
>
> If a query like above is in place, then one can use another solr  
> request
> handler similar to dismax, which uses SubPhraseQuerries instead of  
> dismax.
> And for a user who is more interested in exact/sub phrase matches in  
> some
> fields and normal boolean matches in other, the additional  
> parameters at the
> handler level would be more useful.
> matchOnlyOneField - matches only one field and does not use matched  
> terms on
> another field.
> ignoretfIdf - On a per field basis, allows one to ignore some scoring
> calculations and just use the sub phrase scores.
>
> This handler combined with sub phrase query parameters can prove  
> very useful
> in handling user queries as they are , with lot more flexibility.
>
> I believe, the same use case might exist for many users who have  
> mostly
> structured data with only some portions of it being free text, like
> description, reviews etc and want to handle user entered queries as is
> without resorting to query interpretation of score tuning.
>
> Thanks
> Preetam
>
> On Mon, Jul 14, 2008 at 11:33 PM, Steven A Rowe <sarowe@syr.edu>  
> wrote:
>
>> Hi Preetam,
>>
>> On 07/14/2008 at 1:40 PM, Preetam Rao wrote:
>>> Is there a query in Lucene which matches sub phrases ?
>>>
>> [snip]
>>>
>>> I was redirected to Shingle filter which is a token filter
>>> that spits out n-grams. But it does not seem to be best solution
>>> since one does not know in advance what n in n-grams should be.
>>
>> You could guess at the useful range, though, and then have ((max n)- 
>> (min
>> n)+1) fields, scaling the boost for each with the corresponding  
>> value of n.
>>
>> Just using 2-grams could be good enough, since the longer the sub- 
>> phrase
>> match, the more matching 2-grams.
>>
>>> Also it means one has to get all these bi grams and then construct
>>> a boolean OR query which is not very efficient either.
>>
>> In terms of your requirements, though, I think you're stuck with this
>> inefficiency, no matter what solution you end up with; you need to  
>> do some
>> form of term combination in your queries.  And the ShingleFilter  
>> approach
>> doesn't compare badly here, since positions for phrase queries  
>> don't have to
>> be looked up during scoring.
>>
>> If index space efficiency is a concern, though, the
>> one-field-per-value-of-n solution I mentioned above could pose a  
>> problem.
>>
>> Steve
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34935-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 15 07:51:26 2008
Return-Path: <java-user-return-34935-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48907 invoked from network); 15 Jul 2008 07:51:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Jul 2008 07:51:26 -0000
Received: (qmail 48478 invoked by uid 500); 15 Jul 2008 07:51:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48446 invoked by uid 500); 15 Jul 2008 07:51:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48435 invoked by uid 99); 15 Jul 2008 07:51:20 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Jul 2008 00:51:20 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of sascha.fahl@googlemail.com designates 72.14.220.155 as permitted sender)
Received: from [72.14.220.155] (HELO fg-out-1718.google.com) (72.14.220.155)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Jul 2008 07:50:24 +0000
Received: by fg-out-1718.google.com with SMTP id l27so2864031fgb.27
        for <java-user@lucene.apache.org>; Tue, 15 Jul 2008 00:50:47 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=googlemail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:to:content-type
         :content-transfer-encoding:mime-version:subject:date:x-mailer:from;
        bh=Gt0dyhtTBTfI8VVdUGBlOhgEUUGVVn6fVd1qaoW975c=;
        b=ZzdqxzI8WUSHkVniW/75Asu0Ozugonx12FptVydyXa7od6tF41EtNLuT9+KxOAE0Wy
         p3bGv1u/UNJFRLyU4vu6qWdJAMzgpI0dd2fNab6u/n6MBrFDx63ySGey6U+KbGVBAlkx
         GTtHrGXjNiFDaq2JUAePX6AMYhNhrY/CLVJ/c=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=googlemail.com; s=gamma;
        h=message-id:to:content-type:content-transfer-encoding:mime-version
         :subject:date:x-mailer:from;
        b=DjvN7wLYuwiS2S4h52Ihc0wd7d0+bmJ40otNVUx1OfezV3vkdOspWBLNHQ2bcTblcP
         tvfcLED9CqGS0HZ4fPqgBi9RY1YjrAjzPjASHKlLJRUCmOQLUbS1XjuaD76RTTXGC1wU
         ktU6+4IlYTowbyANXyUl5ZWeeRLiC5tzUF848=
Received: by 10.86.96.18 with SMTP id t18mr15592375fgb.17.1216108247223;
        Tue, 15 Jul 2008 00:50:47 -0700 (PDT)
Received: from ?192.168.69.152? ( [84.174.108.40])
        by mx.google.com with ESMTPS id 12sm3899169fgg.0.2008.07.15.00.50.45
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Tue, 15 Jul 2008 00:50:45 -0700 (PDT)
Message-Id: <806BD812-0581-48CC-A418-55ECF856165B@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Improving GeoSort from Lucene in Action Book
Date: Tue, 15 Jul 2008 09:50:43 +0200
X-Mailer: Apple Mail (2.926)
From: Sascha Fahl <sascha.fahl@googlemail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

I read the chapter about custom sort methods and hacked around with  
the GeoSort. Are there ways to improve the algorithm? Espacially  
calculating the distance for ALL documents in the index is a bad idea  
because only the distance for hitted documents are of interest. That  
could save lots of time because the number of hits compared to all  
documents in an index usually is pretty small.


Thanks,
Sascha

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34936-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 15 08:00:09 2008
Return-Path: <java-user-return-34936-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53981 invoked from network); 15 Jul 2008 08:00:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Jul 2008 08:00:08 -0000
Received: (qmail 64046 invoked by uid 500); 15 Jul 2008 08:00:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63703 invoked by uid 500); 15 Jul 2008 08:00:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63692 invoked by uid 99); 15 Jul 2008 08:00:01 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Jul 2008 01:00:01 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: 194.109.24.33 is neither permitted nor denied by domain of karl.wettin@gmail.com)
Received: from [194.109.24.33] (HELO smtp-vbr13.xs4all.nl) (194.109.24.33)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Jul 2008 07:59:05 +0000
Received: from kodapan.lan (memnon.xs4all.nl [82.93.70.124])
	by smtp-vbr13.xs4all.nl (8.13.8/8.13.8) with ESMTP id m6F7wvq3030238
	for <java-user@lucene.apache.org>; Tue, 15 Jul 2008 09:58:58 +0200 (CEST)
	(envelope-from karl.wettin@gmail.com)
Message-Id: <AFA1133A-EA70-4D5B-9C1B-D3BBA1B1584F@gmail.com>
From: Karl Wettin <karl.wettin@gmail.com>
To: java-user@lucene.apache.org
In-Reply-To: <42b442de0807140525y531bd94fi840566282196acab@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: Cosine Similarity between two documents, using different zone weights
Date: Tue, 15 Jul 2008 09:58:57 +0200
References: <42b442de0807140525y531bd94fi840566282196acab@mail.gmail.com>
X-Mailer: Apple Mail (2.926)
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org

I'm not sure what it is you say you want to do. If what you want to do  
is to measure distance between two documents then the easiet way is to  
extract the feature vectors (document TermFreqVector) from those two  
documents and measure the distance using something like the Tanimoto  
coefficient.

You want to do this for all the pairs in the index? Consider Hadoop.

You might get more and better help by asking in Mahout: http://lucene.apache.org/mahout/

          karl


14 jul 2008 kl. 14.25 skrev Asterios Katsifodimos:

> Hello *,
>
> I have been trying to find an *efficient *(in terms of performance)  
> way
> to get the Cosine Similarity between two Lucene Documents.
>
> I have seen that this can be done with:
>
>   1. Converting the document into a query and submitting the query,  
> getting
>
>   the results and their score. --TOO SLOW if you want this for all
>   documents
>   in a corpus.
>   2. MoreLikeThis class, but this is not what I really want.
>
> What I want is the following:
> I have 3 different fields(zones) in my index(corpus) for each  
> document.
> Each zone has its own boost(weight).
>
> What I need is: get the distance of all pairs of documents in my index
> using the different term weights(from each field's boost).
>
> I other words I need to calculate the Similarity formula
> for all  pairs of documents in the index.
>
> Does anyone have in mind any project or code that does this?
> It would take some time to develop this myself.
>
> thanks a lot in advance,
> -- 
> Asterios Katsifodimos
> High Performance Computing systems Lab
> Department of Computer Science, University of Cyprus
> http://grid.ucy.ac.cy


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34937-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 15 08:06:32 2008
Return-Path: <java-user-return-34937-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 55953 invoked from network); 15 Jul 2008 08:06:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Jul 2008 08:06:32 -0000
Received: (qmail 73227 invoked by uid 500); 15 Jul 2008 08:06:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73189 invoked by uid 500); 15 Jul 2008 08:06:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73178 invoked by uid 99); 15 Jul 2008 08:06:24 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Jul 2008 01:06:24 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: 194.109.24.28 is neither permitted nor denied by domain of karl.wettin@gmail.com)
Received: from [194.109.24.28] (HELO smtp-vbr8.xs4all.nl) (194.109.24.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Jul 2008 08:05:31 +0000
Received: from kodapan.lan (memnon.xs4all.nl [82.93.70.124])
	by smtp-vbr8.xs4all.nl (8.13.8/8.13.8) with ESMTP id m6F85rbp027064
	for <java-user@lucene.apache.org>; Tue, 15 Jul 2008 10:05:53 +0200 (CEST)
	(envelope-from karl.wettin@gmail.com)
Message-Id: <4809CFF4-5C65-4BBD-99A0-AFA720416D93@gmail.com>
From: Karl Wettin <karl.wettin@gmail.com>
To: java-user@lucene.apache.org
In-Reply-To: <806BD812-0581-48CC-A418-55ECF856165B@gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: Improving GeoSort from Lucene in Action Book
Date: Tue, 15 Jul 2008 10:05:52 +0200
References: <806BD812-0581-48CC-A418-55ECF856165B@gmail.com>
X-Mailer: Apple Mail (2.926)
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org


15 jul 2008 kl. 09.50 skrev Sascha Fahl:

> I read the chapter about custom sort methods and hacked around with  
> the GeoSort. Are there ways to improve the algorithm? Espacially  
> calculating the distance for ALL documents in the index is a bad  
> idea because only the distance for hitted documents are of interest.  
> That could save lots of time because the number of hits compared to  
> all documents in an index usually is pretty small.

GeoLucene and LocalLucene are both branches of Lucene hacked to handle  
geo-positioning problems. You might want to take a look at them if  
that is features you are looking for. I suppose the code in the book  
is mearly an example to show how to implement a custom sort, but I  
didn't read it so I'm just guessing here.


      karl

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34938-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 15 08:08:17 2008
Return-Path: <java-user-return-34938-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 57264 invoked from network); 15 Jul 2008 08:08:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Jul 2008 08:08:17 -0000
Received: (qmail 76038 invoked by uid 500); 15 Jul 2008 08:08:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76004 invoked by uid 500); 15 Jul 2008 08:08:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75993 invoked by uid 99); 15 Jul 2008 08:08:10 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Jul 2008 01:08:10 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Jul 2008 08:07:17 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KIfZU-0006gr-Te
	for java-user@lucene.apache.org; Tue, 15 Jul 2008 01:07:40 -0700
Message-ID: <18460018.post@talk.nabble.com>
Date: Tue, 15 Jul 2008 01:07:40 -0700 (PDT)
From: John Patterson <jdp2000@gmail.com>
To: java-user@lucene.apache.org
Subject: Mixing non scored an scored queries
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: jdp2000@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hi,

I have a number of fields that are used to filter documents from a search.
They should not contribute to the score of the document but merely decide
which documents are valid.  i.e. it doesn't matter how rare they are in the
index.  I also have a single "combined" field that is used for free text
searching and it should be scored as normal.

How can I turn off scoring of these "filter" fields?

Thanks,

John
-- 
View this message in context: http://www.nabble.com/Mixing-non-scored-an-scored-queries-tp18460018p18460018.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34939-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 15 08:22:03 2008
Return-Path: <java-user-return-34939-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62672 invoked from network); 15 Jul 2008 08:22:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Jul 2008 08:22:03 -0000
Received: (qmail 96612 invoked by uid 500); 15 Jul 2008 08:21:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96583 invoked by uid 500); 15 Jul 2008 08:21:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96572 invoked by uid 99); 15 Jul 2008 08:21:55 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Jul 2008 01:21:55 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [89.107.64.151] (HELO server1.primetide.net) (89.107.64.151)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Jul 2008 08:21:00 +0000
Received: from [192.168.69.152] (p54AE6C28.dip.t-dialin.net [84.174.108.40])
	(authenticated bits=0)
	by server1.primetide.net (8.14.0/8.14.0) with ESMTP id m6F8KG9F004937
	(version=TLSv1/SSLv3 cipher=AES128-SHA bits=128 verify=NO)
	for <java-user@lucene.apache.org>; Tue, 15 Jul 2008 10:20:16 +0200
Message-Id: <C5A65448-81B5-48F4-9077-6DA45CED923A@evenity.net>
From: Sascha Fahl <sascha@evenity.net>
To: java-user@lucene.apache.org
In-Reply-To: <4809CFF4-5C65-4BBD-99A0-AFA720416D93@gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed; delsp=yes
Content-Transfer-Encoding: quoted-printable
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: Improving GeoSort from Lucene in Action Book
Date: Tue, 15 Jul 2008 10:20:16 +0200
References: <806BD812-0581-48CC-A418-55ECF856165B@gmail.com> <4809CFF4-5C65-4BBD-99A0-AFA720416D93@gmail.com>
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org

There is a big difference between GeoSearch and GeoSort. GeoSearch =20
means you are looking for data within a certain range. To implement =20
this index structures like R-Trees help, because they make it a lot =20
easier to think in "boxes". GeoSort is just to sort the data in =20
relation to a given point in a 2D environment. So you always have to =20
compute the distance from the given point to the locations of the =20
documents. I think this is the only possibly approach?


Am 15.07.2008 um 10:05 schrieb Karl Wettin:

>
> 15 jul 2008 kl. 09.50 skrev Sascha Fahl:
>
>> I read the chapter about custom sort methods and hacked around with =20=

>> the GeoSort. Are there ways to improve the algorithm? Espacially =20
>> calculating the distance for ALL documents in the index is a bad =20
>> idea because only the distance for hitted documents are of =20
>> interest. That could save lots of time because the number of hits =20
>> compared to all documents in an index usually is pretty small.
>
> GeoLucene and LocalLucene are both branches of Lucene hacked to =20
> handle geo-positioning problems. You might want to take a look at =20
> them if that is features you are looking for. I suppose the code in =20=

> the book is mearly an example to show how to implement a custom =20
> sort, but I didn't read it so I'm just guessing here.
>
>
>     karl
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org

Sascha Fahl
Softwareenticklung

evenity GmbH
Zu den M=FChlen 19
D-35390 Gie=DFen

Mail: sascha@evenity.net






---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34940-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 15 08:22:10 2008
Return-Path: <java-user-return-34940-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62825 invoked from network); 15 Jul 2008 08:22:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Jul 2008 08:22:10 -0000
Received: (qmail 97987 invoked by uid 500); 15 Jul 2008 08:22:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97937 invoked by uid 500); 15 Jul 2008 08:22:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97913 invoked by uid 99); 15 Jul 2008 08:22:01 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Jul 2008 01:22:01 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of blogathan.rao@gmail.com designates 64.233.182.184 as permitted sender)
Received: from [64.233.182.184] (HELO nf-out-0910.google.com) (64.233.182.184)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Jul 2008 08:21:08 +0000
Received: by nf-out-0910.google.com with SMTP id g16so1579378nfd.15
        for <java-user@lucene.apache.org>; Tue, 15 Jul 2008 01:21:13 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=2YuUqqTm5mjrJQXuV9MomKEcVHYZBA7p1WyYXkmMk68=;
        b=MKVCFPaBdsJ2cyQK3BeE0Inmlwk38JSX/mX1OvkZEMYCDL3euqMOaEkCoGWiSnS3c9
         9jDhfGsSgcmHTTB9vd1K3wQMPjly0jdSUY/nYU2K/dOvsb9aPzd3/x84GFyLZMy2Yiig
         0K+WlULgHWVQEygnyve4fHsUoamG56U/yTGdA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=Rjr+SYpk9I7EvMPQm3ISY6MjT3DZiGMzJR/eFwFSiwlvTvu3IlpMMi1yPiRtMJU+fH
         1T35hJscNiPqC9e/6T5/To9oaga4A61kjm0KLggkiH8rXou5dhJQohhH2mmUy0IFcbSo
         yO0BTVONkKiywLm7jeTA9Wn0kx8biEFGcwbJs=
Received: by 10.125.148.7 with SMTP id a7mr3500657mko.128.1216110072951;
        Tue, 15 Jul 2008 01:21:12 -0700 (PDT)
Received: by 10.125.125.7 with HTTP; Tue, 15 Jul 2008 01:21:12 -0700 (PDT)
Message-ID: <a7f27bc30807150121p29034173n7961138217213562@mail.gmail.com>
Date: Tue, 15 Jul 2008 13:51:12 +0530
From: "Preetam Rao" <blogathan.rao@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: matching sub phrases in user entered query...
In-Reply-To: <9168B6C9-FD83-4F44-926C-D4D83D589C6F@gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_2801_27646685.1216110072938"
References: <a7f27bc30807141040y2846e1d3y25fe39593cfe10f0@mail.gmail.com>
	 <9294E20AED46934EA459020706463F94C59B33@SUEXCL-02.ad.syr.edu>
	 <a7f27bc30807142035u45636588o321f03369b0f842@mail.gmail.com>
	 <9168B6C9-FD83-4F44-926C-D4D83D589C6F@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_2801_27646685.1216110072938
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

That is very good performance.

But, If I take, on an average, 6 terms per user query, and looking at
shingles of size 2 I will have a boolean OR of  5 shingle phrase  queries.
How better is this compared to a single sub phrase query which would
internally be just like another phrase query with some extra operations.
Also, each shingle phrase query is going to get treated like phrase query.
right ?

Thanks
Preetam

On Tue, Jul 15, 2008 at 1:17 PM, Karl Wettin <karl.wettin@gmail.com> wrote:

> Couldn't you create multiple "shingle phrase queries" from the user query
> and add them all to a BooleanQuery?
>
> "example input query"^10 OR
> "example input"^5 OR
> "input query"^5
>
> SpanNear and PhraseQueries are rather expensive though. Not too long ago I
> replaced phrase queries with a shingles in an index containing tens of
> millions of small documents, resulting in queries taking something like 1/10
> of the time to match with just as good results. If not even better in some
> cases.
>
>    karl
>
>
> 15 jul 2008 kl. 05.35 skrev Preetam Rao:
>
>
>  Hi Steve,
>>
>> It would be simpler if I have a query called SubPhraseQuery in which case
>> I
>> do not have to either generate extra terms during ingestion or generate
>> extra queries during querying. As a user, the best I would hope for is, to
>> ingest the data from some feed into different fields, run the user query
>> as
>> is using some set of lucene queries and get most relevant results without
>> worrying much about the internals  of scoring.
>>
>> In my case, I know that each field will most likely match some sub phrase
>> of
>> the user query and need to have a query or solr request handler which
>> handles this case.
>>
>> For cases where I care more about exact matches or sub phrase matches and
>> not about tf or idf, I think a SubPhraseQuery with the following
>> parameters
>> will be great.
>> phraseBoostFactor - factor which tells how good a n term match is than n-1
>> term match.
>> useHighestMatch - which picks only the best sub phrase match as the score
>> ignoreDuplicates - ignores duplicate sub phrase matches.
>>
>> Currently I have tried using Solr's dismax handler as well as standard
>> request handler with boosts and other parameters, but out of 3 million
>> documents, unable to get the most relevant top 5 results which is most
>> important for me.Trying to understand the scoring and fine tuning was no
>> help either. To get the most relevant top 10 results, I am willing to
>> resorting to some kind of exact match based scores rather than rely on
>> lucene's scoring formulas.
>>
>> If a query like above is in place, then one can use another solr request
>> handler similar to dismax, which uses SubPhraseQuerries instead of dismax.
>> And for a user who is more interested in exact/sub phrase matches in some
>> fields and normal boolean matches in other, the additional parameters at
>> the
>> handler level would be more useful.
>> matchOnlyOneField - matches only one field and does not use matched terms
>> on
>> another field.
>> ignoretfIdf - On a per field basis, allows one to ignore some scoring
>> calculations and just use the sub phrase scores.
>>
>> This handler combined with sub phrase query parameters can prove very
>> useful
>> in handling user queries as they are , with lot more flexibility.
>>
>> I believe, the same use case might exist for many users who have mostly
>> structured data with only some portions of it being free text, like
>> description, reviews etc and want to handle user entered queries as is
>> without resorting to query interpretation of score tuning.
>>
>> Thanks
>> Preetam
>>
>> On Mon, Jul 14, 2008 at 11:33 PM, Steven A Rowe <sarowe@syr.edu> wrote:
>>
>>  Hi Preetam,
>>>
>>> On 07/14/2008 at 1:40 PM, Preetam Rao wrote:
>>>
>>>> Is there a query in Lucene which matches sub phrases ?
>>>>
>>>>  [snip]
>>>
>>>>
>>>> I was redirected to Shingle filter which is a token filter
>>>> that spits out n-grams. But it does not seem to be best solution
>>>> since one does not know in advance what n in n-grams should be.
>>>>
>>>
>>> You could guess at the useful range, though, and then have ((max n)-(min
>>> n)+1) fields, scaling the boost for each with the corresponding value of
>>> n.
>>>
>>> Just using 2-grams could be good enough, since the longer the sub-phrase
>>> match, the more matching 2-grams.
>>>
>>>  Also it means one has to get all these bi grams and then construct
>>>> a boolean OR query which is not very efficient either.
>>>>
>>>
>>> In terms of your requirements, though, I think you're stuck with this
>>> inefficiency, no matter what solution you end up with; you need to do
>>> some
>>> form of term combination in your queries.  And the ShingleFilter approach
>>> doesn't compare badly here, since positions for phrase queries don't have
>>> to
>>> be looked up during scoring.
>>>
>>> If index space efficiency is a concern, though, the
>>> one-field-per-value-of-n solution I mentioned above could pose a problem.
>>>
>>> Steve
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_2801_27646685.1216110072938--

From java-user-return-34941-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 15 08:54:36 2008
Return-Path: <java-user-return-34941-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82466 invoked from network); 15 Jul 2008 08:54:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Jul 2008 08:54:35 -0000
Received: (qmail 39790 invoked by uid 500); 15 Jul 2008 08:54:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39753 invoked by uid 500); 15 Jul 2008 08:54:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39742 invoked by uid 99); 15 Jul 2008 08:54:29 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Jul 2008 01:54:29 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Jul 2008 08:53:35 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KIgII-0008AG-OY
	for java-user@lucene.apache.org; Tue, 15 Jul 2008 01:53:58 -0700
Message-ID: <18460696.post@talk.nabble.com>
Date: Tue, 15 Jul 2008 01:53:58 -0700 (PDT)
From: martinoleary <martin.oleary1@gmail.com>
To: java-user@lucene.apache.org
Subject: MoreLikeThis from a field with a specific value
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: martin.oleary1@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hi there... 

im trying to get MoreLikeThis documents from my lucene index given a
sentence... just one line of text lets say... but i also want to get the
returned results only where a field has a specific value.... 

so for example if i have my index and it contains a categoryId and
content... i would like to get results where content is like blah blah blah
and categoryId = 1 or 2.. etc... 

my more like this like method is returning something like this:
content:blah content:blah content:blah +categoryId:2

but when this is run, its returning EVERYTHING from this category....

when i leave out the +categoryId: , i am getting related results depending
on the content. 

can anyone help inform me as to why its returning everything? 


-- 
View this message in context: http://www.nabble.com/MoreLikeThis-from-a-field-with-a-specific-value-tp18460696p18460696.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34942-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 15 08:55:24 2008
Return-Path: <java-user-return-34942-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 83164 invoked from network); 15 Jul 2008 08:55:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Jul 2008 08:55:23 -0000
Received: (qmail 44740 invoked by uid 500); 15 Jul 2008 08:55:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44698 invoked by uid 500); 15 Jul 2008 08:55:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44687 invoked by uid 99); 15 Jul 2008 08:55:16 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Jul 2008 01:55:16 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [74.125.46.31] (HELO yw-out-2324.google.com) (74.125.46.31)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Jul 2008 08:54:23 +0000
Received: by yw-out-2324.google.com with SMTP id 3so2257393ywj.5
        for <java-user@lucene.apache.org>; Tue, 15 Jul 2008 01:54:45 -0700 (PDT)
Received: by 10.150.51.2 with SMTP id y2mr21855614yby.149.1216111663304;
        Tue, 15 Jul 2008 01:47:43 -0700 (PDT)
Received: from ?10.17.4.4? ( [72.93.214.93])
        by mx.google.com with ESMTPS id 6sm6458473ywn.0.2008.07.15.01.47.42
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Tue, 15 Jul 2008 01:47:42 -0700 (PDT)
Message-Id: <1D860F0C-A4DA-45AC-B9D8-5BEB0D17321F@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <867513fe0807142152l68d31699l9207f019721c8f1d@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: Indexing questions
Date: Tue, 15 Jul 2008 04:47:41 -0400
References: <A9AEF4F5CDC245F699BE96AE81D425B4@msrvcn04> <867513fe0807142152l68d31699l9207f019721c8f1d@mail.gmail.com>
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org


Anshum wrote:

> But the downside to this would be, in case your daemon crashes in the
> meantime or you need to restart the daemon, the index would not be  
> usable
> until you have completed your indexing processs.

This isn't quite true.  If you open IndexWriter with autoCommit=false,  
then none of the changes you do with it will be visible to an  
IndexReader, even one reopened while IndexWriter is doing its work,  
until you close the IndexWriter.

With autoCommit=true, it's true IndexWriter will periodically make  
some part of the changes visible to a reader that reopens.

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34943-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 15 08:55:31 2008
Return-Path: <java-user-return-34943-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 83217 invoked from network); 15 Jul 2008 08:55:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Jul 2008 08:55:31 -0000
Received: (qmail 44984 invoked by uid 500); 15 Jul 2008 08:55:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44938 invoked by uid 500); 15 Jul 2008 08:55:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44908 invoked by uid 99); 15 Jul 2008 08:55:17 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Jul 2008 01:55:17 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of blogathan.rao@gmail.com designates 64.233.182.185 as permitted sender)
Received: from [64.233.182.185] (HELO nf-out-0910.google.com) (64.233.182.185)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Jul 2008 08:54:25 +0000
Received: by nf-out-0910.google.com with SMTP id g16so1582819nfd.15
        for <java-user@lucene.apache.org>; Tue, 15 Jul 2008 01:54:48 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=jd7I0eab4p2xrS+wH5zEtmNytBmQTev+OB1E2HOJmFc=;
        b=QgHgjnhvzZWOkggL28u5RQmRJCpkHIw+bgtbT+w9SbPF578wXKPjNTbGjoRfyXVWVc
         SkvIfQa4aainrmz3mPfG6CDOzEDcvTfBgILP8fN/NWJZNnafn76vJzxVnh0imOlZ58oJ
         tKrGSi9PgzUCHyHE3gqvUsB2K450rbaEpObVQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=fbvn9h73FmEDpCTHh0luI5VHHs2vnnFB4wzgE1R3E4dKO1D8ukogfA7kvY6w8qDKme
         os/6JAqfwQpKNe3ok69Gc5gQrs5u0iuFZVJaITU6ipXMCzypv3EGTTocdnFGHBoW5I+L
         OMNsbwJz52+X3l5q6008GuxEmppqxvFh8ad6c=
Received: by 10.125.111.14 with SMTP id o14mr3519137mkm.3.1216112088084;
        Tue, 15 Jul 2008 01:54:48 -0700 (PDT)
Received: by 10.125.125.7 with HTTP; Tue, 15 Jul 2008 01:54:47 -0700 (PDT)
Message-ID: <a7f27bc30807150154s1d970049l8e1a9c1455a2fb92@mail.gmail.com>
Date: Tue, 15 Jul 2008 14:24:47 +0530
From: "Preetam Rao" <blogathan.rao@gmail.com>
To: java-user@lucene.apache.org
Subject: Fwd: Returned mail: see transcript for details
In-Reply-To: <200807141714.m6EHEKel010637@spwiki.spsoftware.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_2868_13820611.1216112088048"
References: <200807141714.m6EHEKel010637@spwiki.spsoftware.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_2868_13820611.1216112088048
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi,

Every time I send a mail to this list, I get the below error.
Any idea where is the problem ?
It also appears that my mails are actually reaching the list.
Any help in rectifying this is appreciated.

Thanks
Preetam

---------- Forwarded message ----------
From: Mail Delivery Subsystem <MAILER-DAEMON@spsoftindia.com>
Date: Mon, Jul 14, 2008 at 10:44 PM
Subject: Returned mail: see transcript for details
To: blogathan.rao@gmail.com


  ----- The following addresses had permanent fatal errors -----
spsoft
   (reason: 550 5.1.1 User unknown)
   (expanded from: root)

  ----- Transcript of session follows -----
550 5.1.1 spsoft... User unknown

Final-Recipient: RFC822; postmaster@localhost
X-Actual-Recipient: RFC822; spsoft@spwiki.spsoftware.com
Action: failed
Status: 5.1.1
Diagnostic-Code: X-Unix; 550 5.1.1 User unknown
Last-Attempt-Date: Mon, 14 Jul 2008 22:44:20 +0530


---------- Forwarded message ----------
From: "Preetam Rao" <blogathan.rao@gmail.com>
To: java-user@lucene.apache.org
Date: Mon, 14 Jul 2008 22:44:26 +0530
Subject: matching sub phrases in user entered query...
Hi,

<snip>

------=_Part_2868_13820611.1216112088048--

From java-user-return-34944-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 15 08:56:30 2008
Return-Path: <java-user-return-34944-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 83883 invoked from network); 15 Jul 2008 08:56:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Jul 2008 08:56:29 -0000
Received: (qmail 48917 invoked by uid 500); 15 Jul 2008 08:56:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48785 invoked by uid 500); 15 Jul 2008 08:56:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48774 invoked by uid 99); 15 Jul 2008 08:56:22 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Jul 2008 01:56:22 -0700
X-ASF-Spam-Status: No, hits=4.0 required=10.0
	tests=DNS_FROM_OPENWHOIS,FORGED_YAHOO_RCVD,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Jul 2008 08:55:29 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KIgK8-0008Dt-FL
	for java-user@lucene.apache.org; Tue, 15 Jul 2008 01:55:52 -0700
Message-ID: <18460721.post@talk.nabble.com>
Date: Tue, 15 Jul 2008 01:55:52 -0700 (PDT)
From: starz10de <farag_ahmed@yahoo.com>
To: java-user@lucene.apache.org
Subject: Print the text files before indexing them in lucene
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: farag_ahmed@yahoo.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hi All,
 It might be easy question, but for new one as me in lucene it is not that
easy.  I want to print the text files before indexing them in lucene , I did
try to do it , but i could just print the index content where we see the
kewowrds and document nr and frequency.  I need beside that to print the
text files content plus their pathes.

thanks in advance
-- 
View this message in context: http://www.nabble.com/Print-the-text-files-before-indexing-them-in-lucene-tp18460721p18460721.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34945-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 15 09:25:12 2008
Return-Path: <java-user-return-34945-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96128 invoked from network); 15 Jul 2008 09:25:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Jul 2008 09:25:12 -0000
Received: (qmail 3705 invoked by uid 500); 15 Jul 2008 09:25:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3680 invoked by uid 500); 15 Jul 2008 09:25:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3667 invoked by uid 99); 15 Jul 2008 09:25:04 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Jul 2008 02:25:04 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of spring@gmx.eu designates 213.165.64.20 as permitted sender)
Received: from [213.165.64.20] (HELO mail.gmx.net) (213.165.64.20)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 15 Jul 2008 09:24:10 +0000
Received: (qmail 12208 invoked by uid 0); 15 Jul 2008 09:24:31 -0000
Received: from 193.111.216.133 by www153.gmx.net with HTTP;
 Tue, 15 Jul 2008 11:24:31 +0200 (CEST)
Content-Type: text/plain; charset="us-ascii"
Date: Tue, 15 Jul 2008 11:24:31 +0200
From: spring@gmx.eu
In-Reply-To: <867513fe0807142152l68d31699l9207f019721c8f1d@mail.gmail.com>
Message-ID: <20080715092431.312560@gmx.net>
MIME-Version: 1.0
References: <A9AEF4F5CDC245F699BE96AE81D425B4@msrvcn04>
 <867513fe0807142152l68d31699l9207f019721c8f1d@mail.gmail.com>
Subject: Re: Indexing questions
To: java-user@lucene.apache.org
X-Authenticated: #2635966
X-Flags: 0001
X-Mailer: WWW-Mail 6100 (Global Message Exchange)
X-Priority: 3
X-Provags-ID: V01U2FsdGVkX1/4X7VTOhr457OGljkMnXH8cur7ifjMh6m6oa9pOZ
 GVjdlvKaFD2KPcDKI2etqjyaVMoDeyMU8eGg== 
Content-Transfer-Encoding: 7bit
X-GMX-UID: oQEeHF9abXB+bNtKGjQ28q4iLyUmZQgT
X-Virus-Checked: Checked by ClamAV on apache.org

> How about just copying and performing your indexing (or index write
> related)
> operations on the  copy and then performing a rename operation followed by
> reopening of the index readers.

This is how we did it until now. But the indexes become bigger and bigger (50 GB and more) and so we are looking for an alternative.

Other question: What happens if the index does no longer fit into RAM? How does it affect the search performance? 

Thank you.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34946-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 15 09:28:50 2008
Return-Path: <java-user-return-34946-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98082 invoked from network); 15 Jul 2008 09:28:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Jul 2008 09:28:50 -0000
Received: (qmail 8944 invoked by uid 500); 15 Jul 2008 09:28:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8704 invoked by uid 500); 15 Jul 2008 09:28:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8693 invoked by uid 99); 15 Jul 2008 09:28:43 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Jul 2008 02:28:43 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of spring@gmx.eu designates 213.165.64.20 as permitted sender)
Received: from [213.165.64.20] (HELO mail.gmx.net) (213.165.64.20)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 15 Jul 2008 09:27:50 +0000
Received: (qmail 7586 invoked by uid 0); 15 Jul 2008 09:27:13 -0000
Received: from 193.111.216.133 by www162.gmx.net with HTTP;
 Tue, 15 Jul 2008 11:27:12 +0200 (CEST)
Content-Type: text/plain; charset="us-ascii"
Date: Tue, 15 Jul 2008 11:27:12 +0200
From: spring@gmx.eu
In-Reply-To: <1D860F0C-A4DA-45AC-B9D8-5BEB0D17321F@mikemccandless.com>
Message-ID: <20080715092712.313790@gmx.net>
MIME-Version: 1.0
References: <A9AEF4F5CDC245F699BE96AE81D425B4@msrvcn04>
 <867513fe0807142152l68d31699l9207f019721c8f1d@mail.gmail.com>
 <1D860F0C-A4DA-45AC-B9D8-5BEB0D17321F@mikemccandless.com>
Subject: Re: Indexing questions
To: java-user@lucene.apache.org
X-Authenticated: #2635966
X-Flags: 0001
X-Mailer: WWW-Mail 6100 (Global Message Exchange)
X-Priority: 3
X-Provags-ID: V01U2FsdGVkX18LayYvD8gLt9IxVCht8E0FgVmCtIAHdidCQ9GGut
 VeGQY6CfRFcXYYwcwZ5HaOauQ2+WclxWK5FQ== 
Content-Transfer-Encoding: 7bit
X-GMX-UID: QlREfa8JbmwofsxKQDdLz91PUzc4clE9
X-Virus-Checked: Checked by ClamAV on apache.org

> This isn't quite true.  If you open IndexWriter with autoCommit=false,  
> then none of the changes you do with it will be visible to an  
> IndexReader, even one reopened while IndexWriter is doing its work,  
> until you close the IndexWriter.

Where are the docs for this transaction buffered? In RAM or on disk?

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34947-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 15 09:39:39 2008
Return-Path: <java-user-return-34947-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3716 invoked from network); 15 Jul 2008 09:39:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Jul 2008 09:39:39 -0000
Received: (qmail 16506 invoked by uid 500); 15 Jul 2008 09:39:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16474 invoked by uid 500); 15 Jul 2008 09:39:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16463 invoked by uid 99); 15 Jul 2008 09:39:32 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Jul 2008 02:39:32 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: 194.109.24.35 is neither permitted nor denied by domain of karl.wettin@gmail.com)
Received: from [194.109.24.35] (HELO smtp-vbr15.xs4all.nl) (194.109.24.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Jul 2008 09:38:38 +0000
Received: from kodapan.lan (memnon.xs4all.nl [82.93.70.124])
	by smtp-vbr15.xs4all.nl (8.13.8/8.13.8) with ESMTP id m6F9cUsM055220
	for <java-user@lucene.apache.org>; Tue, 15 Jul 2008 11:38:30 +0200 (CEST)
	(envelope-from karl.wettin@gmail.com)
Message-Id: <816A98A2-14D3-491A-B7EC-D4714BCD6144@gmail.com>
From: Karl Wettin <karl.wettin@gmail.com>
To: java-user@lucene.apache.org
In-Reply-To: <C5A65448-81B5-48F4-9077-6DA45CED923A@evenity.net>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed; delsp=yes
Content-Transfer-Encoding: quoted-printable
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: Improving GeoSort from Lucene in Action Book
Date: Tue, 15 Jul 2008 11:38:19 +0200
References: <806BD812-0581-48CC-A418-55ECF856165B@gmail.com> <4809CFF4-5C65-4BBD-99A0-AFA720416D93@gmail.com> <C5A65448-81B5-48F4-9077-6DA45CED923A@evenity.net>
X-Mailer: Apple Mail (2.926)
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org

15 jul 2008 kl. 10.20 skrev Sascha Fahl:

> There is a big difference between GeoSearch and GeoSort. GeoSearch =20
> means you are looking for data within a certain range. To implement =20=

> this index structures like R-Trees help, because they make it a lot =20=

> easier to think in "boxes". GeoSort is just to sort the data in =20
> relation to a given point in a 2D environment. So you always have to =20=

> compute the distance from the given point to the locations of the =20
> documents. I think this is the only possibly approach?

What I really tried to say is that if you are looking at improving a =20
lat/long related solution you'll probably find more expertize on the =20
user lists of the projects I mentioned.

They too sort their results by distance. My guess is that they make =20
use of the "boxes" there too. If, then I don't know if you can use =20
their API as any other Lucene index. If not, well then you've probably =20=

got a really nice GeoSort to plug in to your application right here =20
and now.

LocalLucene/trunk/README:
> //Create a distance sort using the radial filter (distance =20
> calculations are done
> // in the radial filter, so use the output of that to drive the sort)
> DistanceSortSource dsort =3D new DistanceSortSource(filter);
> Sort sort =3D new Sort(new SortField("foo", dsort));



           karl





>
>
>
> Am 15.07.2008 um 10:05 schrieb Karl Wettin:
>
>>
>> 15 jul 2008 kl. 09.50 skrev Sascha Fahl:
>>
>>> I read the chapter about custom sort methods and hacked around =20
>>> with the GeoSort. Are there ways to improve the algorithm? =20
>>> Espacially calculating the distance for ALL documents in the index =20=

>>> is a bad idea because only the distance for hitted documents are =20
>>> of interest. That could save lots of time because the number of =20
>>> hits compared to all documents in an index usually is pretty small.
>>
>> GeoLucene and LocalLucene are both branches of Lucene hacked to =20
>> handle geo-positioning problems. You might want to take a look at =20
>> them if that is features you are looking for. I suppose the code in =20=

>> the book is mearly an example to show how to implement a custom =20
>> sort, but I didn't read it so I'm just guessing here.
>>
>>
>>    karl
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>
> Sascha Fahl
> Softwareenticklung
>
> evenity GmbH
> Zu den M=FChlen 19
> D-35390 Gie=DFen
>
> Mail: sascha@evenity.net
>
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34948-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 15 09:48:37 2008
Return-Path: <java-user-return-34948-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8051 invoked from network); 15 Jul 2008 09:48:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Jul 2008 09:48:36 -0000
Received: (qmail 22722 invoked by uid 500); 15 Jul 2008 09:48:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22684 invoked by uid 500); 15 Jul 2008 09:48:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 22673 invoked by uid 99); 15 Jul 2008 09:48:28 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Jul 2008 02:48:28 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: 194.109.24.24 is neither permitted nor denied by domain of karl.wettin@gmail.com)
Received: from [194.109.24.24] (HELO smtp-vbr4.xs4all.nl) (194.109.24.24)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Jul 2008 09:47:33 +0000
Received: from kodapan.lan (memnon.xs4all.nl [82.93.70.124])
	by smtp-vbr4.xs4all.nl (8.13.8/8.13.8) with ESMTP id m6F9lPNp041738
	for <java-user@lucene.apache.org>; Tue, 15 Jul 2008 11:47:25 +0200 (CEST)
	(envelope-from karl.wettin@gmail.com)
Message-Id: <7FD5A172-E944-4424-B75D-9E937B65B92B@gmail.com>
From: Karl Wettin <karl.wettin@gmail.com>
To: java-user@lucene.apache.org
In-Reply-To: <a7f27bc30807150154s1d970049l8e1a9c1455a2fb92@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: Returned mail: see transcript for details
Date: Tue, 15 Jul 2008 11:47:03 +0200
References: <200807141714.m6EHEKel010637@spwiki.spsoftware.com> <a7f27bc30807150154s1d970049l8e1a9c1455a2fb92@mail.gmail.com>
X-Mailer: Apple Mail (2.926)
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org

The list subscriber spsoft@spwiki.spsoftware.com is not a known email  
address and the MX server (spsoftindia.com) sends the bounce back to  
you. I'm not sure if this is because some header is missing or if  
spsoftindia.com does not follow protocol. My guess is the latter.

A list moderator should remove the subscriber.

        karl


15 jul 2008 kl. 10.54 skrev Preetam Rao:

> Hi,
>
> Every time I send a mail to this list, I get the below error.
> Any idea where is the problem ?
> It also appears that my mails are actually reaching the list.
> Any help in rectifying this is appreciated.
>
> Thanks
> Preetam
>
> ---------- Forwarded message ----------
> From: Mail Delivery Subsystem <MAILER-DAEMON@spsoftindia.com>
> Date: Mon, Jul 14, 2008 at 10:44 PM
> Subject: Returned mail: see transcript for details
> To: blogathan.rao@gmail.com
>
>
>  ----- The following addresses had permanent fatal errors -----
> spsoft
>   (reason: 550 5.1.1 User unknown)
>   (expanded from: root)
>
>  ----- Transcript of session follows -----
> 550 5.1.1 spsoft... User unknown
>
> Final-Recipient: RFC822; postmaster@localhost
> X-Actual-Recipient: RFC822; spsoft@spwiki.spsoftware.com
> Action: failed
> Status: 5.1.1
> Diagnostic-Code: X-Unix; 550 5.1.1 User unknown
> Last-Attempt-Date: Mon, 14 Jul 2008 22:44:20 +0530
>
>
> ---------- Forwarded message ----------
> From: "Preetam Rao" <blogathan.rao@gmail.com>
> To: java-user@lucene.apache.org
> Date: Mon, 14 Jul 2008 22:44:26 +0530
> Subject: matching sub phrases in user entered query...
> Hi,
>
> <snip>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34949-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 15 09:51:25 2008
Return-Path: <java-user-return-34949-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 9738 invoked from network); 15 Jul 2008 09:51:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Jul 2008 09:51:25 -0000
Received: (qmail 27174 invoked by uid 500); 15 Jul 2008 09:51:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27147 invoked by uid 500); 15 Jul 2008 09:51:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27136 invoked by uid 99); 15 Jul 2008 09:51:19 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Jul 2008 02:51:19 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.132.249] (HELO an-out-0708.google.com) (209.85.132.249)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Jul 2008 09:50:24 +0000
Received: by an-out-0708.google.com with SMTP id c37so1480153anc.49
        for <java-user@lucene.apache.org>; Tue, 15 Jul 2008 02:50:29 -0700 (PDT)
Received: by 10.100.250.12 with SMTP id x12mr11051953anh.93.1216115429725;
        Tue, 15 Jul 2008 02:50:29 -0700 (PDT)
Received: from ?10.17.4.4? ( [72.93.214.93])
        by mx.google.com with ESMTPS id 6sm7696930yxg.6.2008.07.15.02.50.29
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Tue, 15 Jul 2008 02:50:29 -0700 (PDT)
Message-Id: <3FD38DFA-B8FD-4BEC-84CC-1BFE3322CD2A@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <20080715092712.313790@gmx.net>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: Indexing questions
X-Priority: 3
Date: Tue, 15 Jul 2008 05:50:28 -0400
References: <A9AEF4F5CDC245F699BE96AE81D425B4@msrvcn04> <867513fe0807142152l68d31699l9207f019721c8f1d@mail.gmail.com> <1D860F0C-A4DA-45AC-B9D8-5BEB0D17321F@mikemccandless.com> <20080715092712.313790@gmx.net>
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org


spring@gmx.eu wrote:

>> This isn't quite true.  If you open IndexWriter with  
>> autoCommit=false,
>> then none of the changes you do with it will be visible to an
>> IndexReader, even one reopened while IndexWriter is doing its work,
>> until you close the IndexWriter.
>
> Where are the docs for this transaction buffered? In RAM or on disk?

Both.

Pending adds/deletes are buffered in RAM.  Once the RAM buffer is  
full, a flush is triggered and a new segment, plus any deletes, are  
written to disk.

But that segment is not referenced by a segments_N file until a commit  
is done.

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34950-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 15 10:06:50 2008
Return-Path: <java-user-return-34950-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 16464 invoked from network); 15 Jul 2008 10:06:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Jul 2008 10:06:50 -0000
Received: (qmail 43119 invoked by uid 500); 15 Jul 2008 10:06:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43014 invoked by uid 500); 15 Jul 2008 10:06:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 72262 invoked by uid 99); 15 Jul 2008 03:47:34 -0000
X-ASF-Spam-Status: No, hits=4.0 required=10.0
	tests=HTML_MESSAGE,RCVD_IN_BL_SPAMCOP_NET,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy includes SPF record at spf.trusted-forwarder.org)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.in;
  h=Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=E15Zykcl1cg9wFcDXReQkoWFDhlm0p7k+uSbYM/9xhJptagrEDZuv4nsfMjIfvglqoVrcwOsUJtkl7fbPPD4GgkqoNGQ+c7JhaTSGkRQHt9eomfEMTgRvC33nMt+H7J76Gv5FyFngO7CAlbv9ecu1AiLIXd+pi7NWzyZlKqR4og=;
X-Mailer: YahooMailRC/975.45 YahooMailWebService/0.7.199
Date: Tue, 15 Jul 2008 09:16:56 +0530 (IST)
From: "Preetham B.R" <pretbrao@yahoo.co.in>
Subject: RE: matching sub phrases in user entered query...
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-794557180-1216093616=:4413"
Message-ID: <896209.4413.qm@web8706.mail.in.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

--0-794557180-1216093616=:4413
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable

Hi Steve,=0A=0AIt would be simpler if I have a query called SubPhraseQuery =
in which case I=0Ado not have to either generate extra terms during ingesti=
on or generate=0Aextra queries during querying. As a user, the best I would=
 hope for is, to=0Aingest the data from some feed into different fields, ru=
n the user query as=0Ais using some set of lucene queries and get most rele=
vant results without=0Aworrying much about the internals  of scoring.=0A=0A=
In my case, I know that each field will most likely match some sub phrase o=
f=0Athe user query and need to have a query or solr request handler which=
=0Ahandles this case.=0A=0AFor cases where I care more about exact matches =
or sub phrase matches and=0Anot about tf or idf, I think a SubPhraseQuery w=
ith the following parameters=0Awill be great.=0AphraseBoostFactor - factor =
which tells how good a n term match is than n-1=0Aterm match.=0AuseHighestM=
atch - which picks only the best sub phrase match as the score=0AignoreDupl=
icates - ignores duplicate sub phrase matches.=0A=0ACurrently I have tried =
using Solr's dismax handler as well as standard=0Arequest handler with boos=
ts and other parameters, but out of 3 million=0Adocuments, unable to get th=
e most relevant top 5 results which is most=0Aimportant for me.Trying to un=
derstand the scoring and fine tuning was no=0Ahelp either. To get the most =
relevant top 10 results, I am willing to=0Aresorting to some kind of exact =
match based scores rather than rely on=0Alucene's scoring formulas.=0A=0AIf=
 a query like above is in place, then one can use another solr request=0Aha=
ndler similar to dismax, which uses SubPhraseQuerries instead of dismax.=0A=
And for a user who is more interested in exact/sub phrase matches in some=
=0Afields and normal boolean matches in other, the additional parameters at=
 the=0Ahandler level would be more useful.=0AmatchOnlyOneField - matches on=
ly one field and does not use matched terms on=0Aanother field.=0AignoretfI=
df - On a per field basis, allows one to ignore some scoring=0Acalculations=
 and just use the sub phrase scores.=0A=0AThis handler combined with sub ph=
rase query parameters can prove very useful=0Ain handling user queries as t=
hey are , with lot more flexibility.=0A=0AI believe, the same use case migh=
t exist for many users who have mostly=0Astructured data with only some por=
tions of it being free text, like=0Adescription, reviews etc and want to ha=
ndle user entered queries as is=0Awithout resorting to query interpretation=
 of score tuning.=0A=0AThanks=0APreetam=0A=0AOn Mon, Jul 14, 2008 at 11:33 =
PM, Steven A Rowe <sarowe@syr.edu> wrote:=0A=0A> Hi Preetam,=0A>=0A> On 07/=
14/2008 at 1:40 PM, Preetam Rao wrote:=0A> > Is there a query in Lucene whi=
ch matches sub phrases ?=0A> >=0A> [snip]=0A> >=0A> > I was redirected to S=
hingle filter which is a token filter=0A> > that spits out n-grams. But it =
does not seem to be best solution=0A> > since one does not know in advance =
what n in n-grams should be.=0A>=0A> You could guess at the useful range, t=
hough, and then have ((max n)-(min=0A> n)+1) fields, scaling the boost for =
each with the corresponding value of n.=0A>=0A> Just using 2-grams could be=
 good enough, since the longer the sub-phrase=0A> match, the more matching =
2-grams.=0A>=0A> > Also it means one has to get all these bi grams and then=
 construct=0A> > a boolean OR query which is not very efficient either.=0A>=
=0A> In terms of your requirements, though, I think you're stuck with this=
=0A> inefficiency, no matter what solution you end up with; you need to do =
some=0A> form of term combination in your queries.  And the ShingleFilter a=
pproach=0A> doesn't compare badly here, since positions for phrase queries =
don't have to=0A> be looked up during scoring.=0A>=0A> If index space effic=
iency is a concern, though, the=0A> one-field-per-value-of-n solution I men=
tioned above could pose a problem.=0A>=0A> Steve=0A>=0A> ------------------=
------------=0A---------------------------------------=0A> To unsubscribe, =
e-mail: java-user-unsubscribe@lucene.apache.org=0A> For additional commands=
, e-mail: java-user-help@lucene.apache.org=0A>=0A>=0A=0A=0A=0A      Bring y=
our gang together. Do your thing. Find your favourite Yahoo! group at http:=
//in.promos.yahoo.com/groups/
--0-794557180-1216093616=:4413--

From java-user-return-34951-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 15 12:22:32 2008
Return-Path: <java-user-return-34951-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88477 invoked from network); 15 Jul 2008 12:22:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Jul 2008 12:22:32 -0000
Received: (qmail 45398 invoked by uid 500); 15 Jul 2008 12:22:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45361 invoked by uid 500); 15 Jul 2008 12:22:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45350 invoked by uid 99); 15 Jul 2008 12:22:24 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Jul 2008 05:22:24 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [82.111.253.243] (HELO mail.uk.scalix.com) (82.111.253.243)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Jul 2008 12:21:28 +0000
Received: from mail.uk.scalix.com (localhost.localdomain [127.0.0.1])
	by mail.uk.scalix.com (8.13.8/8.13.8) with ESMTP id m6FCKmg3002683
	for <java-user@lucene.apache.org>; Tue, 15 Jul 2008 13:20:49 +0100
Received: from [10.11.108.233] (mail.uk.scalix.com [10.11.108.216])
    by mail.uk.scalix.com (Scalix SMTP Relay 11.4.1.11855)
    via ESMTP; Tue, 15 Jul 2008 13:20:48 +0100 (BST)
Date: Tue, 15 Jul 2008 13:20:48 +0100
From: Chris Bamford <chris.bamford@scalix.com>
To: java-user@lucene.apache.org
Message-ID: <487C9620.2090807@scalix.com>
In-Reply-To: <E5B142977247418C9ABDD7503DB78E23@desktop>
References: <18295066.post@talk.nabble.com>
References: <48762773.60009@scalix.com>
References: <E5B142977247418C9ABDD7503DB78E23@desktop>
Subject: Re: newbie question (for John Griffin) - fixed
x-scalix-Hops: 1
User-Agent: Thunderbird 2.0.0.14 (X11/20080505)
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII";
	format="flowed"
Content-Disposition: inline
X-Spam-Checker-Version: SpamAssassin 3.2.5 (2008-06-10) on mail.uk.scalix.com
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.2 required=5.0 tests=AWL,BAYES_00 autolearn=ham
	version=3.2.5

Hi John

Thanks for your continued interest in my travails!

==I'm not sure I understand. You want a phrase query so they should be
==passed as a phrase in quotes.

Ok... well I must be missing something then  :-(
This fails to return any hits for me:

        PhraseQuery pq = new  PhraseQuery();       
        pq.add(new Term("body", "aaa ddd"));

while
       PhraseQuery pq = new  PhraseQuery();       
       pq.add(new Term("body", "aaa"));
       pq.add(new Term("body", "ddd"));

works fine.
I have tried with both Lucene 2.0 and 2.3 jars.

Please advise!

Thanks,

-Chris
    BTW thanks for the tip about Luke


John Griffin wrote:
> Chris,
>
> -----Original Message-----
> From: Chris Bamford [mailto:chris.bamford@scalix.com] 
> Sent: Thursday, July 10, 2008 9:15 AM
> To: java-user@lucene.apache.org
> Subject: Re: newbie question (for John Griffin) - fixed
>
> Hi John,
>
> Please ignore my earlier questions on this subject, as I have got to the 
> bottom of it.
> I was not passing each word in the phrase as a separate Term to the 
> query; 
>
> ==I'm not sure I understand. You want a phrase query so they should be
> ==passed as a phrase in quotes.
>
>
> instead I was passing the whole string (doh!).
>
> Thanks.
>
> - Chris
>
> Chris Bamford wrote:
>   
>> Hi John,
>>
>> Further to my question below, I did some back-to-basics investigation 
>> of PhraseQueries and found that even basic ones fail for me...
>> I found the attached code on the Internet (see 
>> http://affy.blogspot.com/2003/04/codebit-examples-for-all-of-lucenes.html)
>>     
>
>   
>> and this fails too...  Can you explain why?  I would expect the first 
>> test to deliver 2 hits.
>>
>> I have tried with Lucene 2.0 and 2.3.2 jars and both fail.
>>
>> Thanks again,
>>
>> - Chris
>>
>>
>>
>> Chris Bamford wrote:
>>     
>>> Hi John,
>>>
>>> Just continuing from an earlier question where I asked you how to 
>>> handle strings like "from:fred flintston*" (sorry I have lost the 
>>> original email).
>>> You advised me to write my own BooleanQuery and add to it Prefix- / 
>>> Term- / Phrase- Querys as appropriate.  I have done so, but am having 
>>> trouble with the result - my PhraseQueries just do not get any hits 
>>> at all  :-(
>>> My code looks for quotes - if it finds them, it treats the quoted 
>>> phrase as a PhraseQuery and sets the slop factor to 0.
>>> so,  an input of:
>>>
>>>    subject:"Good Morning"
>>>
>>> results in a PhraseQuery (which I add to my BooleanQuery and then 
>>> dump with toString()) of:
>>>
>>>    +subject:"good morning"
>>>
>>> ... which fails.
>>> However, if I break it into 2 TermQuerys, it works (but that's not 
>>> what I want).
>>>
>>> What am I missing?
>>>
>>> Thanks,
>>>
>>> - Chris
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>       
>> ------------------------------------------------------------------------
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>     
>
>
>   


-- 
------------------------------------------------------------------------
*Chris Bamford*
Senior Development Engineer 	<http://www.scalix.com>
------------------------------------------------------------------------
/Email / MSN/ 	chris.bamford@scalix.com
/Tel/ 	+44 (0)1344 381814 	  	/Skype/ 	c.bamford


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34952-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 15 12:26:46 2008
Return-Path: <java-user-return-34952-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90588 invoked from network); 15 Jul 2008 12:26:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Jul 2008 12:26:45 -0000
Received: (qmail 49184 invoked by uid 500); 15 Jul 2008 12:26:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49160 invoked by uid 500); 15 Jul 2008 12:26:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49149 invoked by uid 99); 15 Jul 2008 12:26:39 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Jul 2008 05:26:39 -0700
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=SPF_PASS,URIBL_GREY
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of marcelo.ochoa@gmail.com designates 64.233.170.190 as permitted sender)
Received: from [64.233.170.190] (HELO rn-out-0910.google.com) (64.233.170.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Jul 2008 12:25:44 +0000
Received: by rn-out-0910.google.com with SMTP id j71so1517752rne.4
        for <java-user@lucene.apache.org>; Tue, 15 Jul 2008 05:26:07 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type:content-transfer-encoding
         :content-disposition;
        bh=I017/C1Auwb5Ji/4NB05V53za+shKDO0Nk4dgjmZaMA=;
        b=JbNzK/G3joplQgn12eagFCnbWn3TPRj9vpivS4I4s+yEkMeFVJ3mIudssHv5PW/wjU
         /7LP2NGZvnVahvvh5Uh0itWfytNul/7fWQTVjrVhieqbt1gbuAn6+Wj4d0Hi4lCXuPEx
         aHwO/VuywS0ieJMxVnsiLGj00SJShgwzbdwuU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type
         :content-transfer-encoding:content-disposition;
        b=yBbrRn32OdU0stj9j+HLvr9xFZMeUC3l8mSB31CQBnleWbH5kuRxiQUXt8VSX5db3Y
         R0PlZAjJoYFJXuGv5GGA/kH624ZstZfinjHyhQKEBrObFPDF0ote1gETVP4uK0DrfNwU
         w9/NBm+ljJLr09xNpPoOhDOuyvvE0m3fr9RfY=
Received: by 10.150.12.3 with SMTP id 3mr208534ybl.17.1216124767240;
        Tue, 15 Jul 2008 05:26:07 -0700 (PDT)
Received: by 10.151.99.7 with HTTP; Tue, 15 Jul 2008 05:26:07 -0700 (PDT)
Message-ID: <126142c0807150526i2f3c9d10j8cf494c6eb2ed7d9@mail.gmail.com>
Date: Tue, 15 Jul 2008 09:26:07 -0300
From: "Marcelo Ochoa" <marcelo.ochoa@gmail.com>
To: java-user@lucene.apache.org
Subject: ANN: A Lucene-OJVM native REST WS example
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org

Hi all:
  For people who are using Lucene Oracle integration project:
http://marceloochoa.blogspot.com/2008/07/lucene-ojvm-native-rest-ws.html
  Best regards, Marcelo.

-- 
Marcelo F. Ochoa
http://marceloochoa.blogspot.com/
http://marcelo.ochoa.googlepages.com/home
______________
Do you Know DBPrism? Look @ DB Prism's Web Site
http://www.dbprism.com.ar/index.html
More info?
Chapter 17 of the book "Programming the Oracle Database using Java &
Web Services"
http://www.amazon.com/gp/product/1555583296/
Chapter 21 of the book "Professional XML Databases" - Wrox Press
http://www.amazon.com/gp/product/1861003587/
Chapter 8 of the book "Oracle & Open Source" - O'Reilly
http://www.oreilly.com/catalog/oracleopen/

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34953-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 15 13:29:40 2008
Return-Path: <java-user-return-34953-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 27897 invoked from network); 15 Jul 2008 13:29:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Jul 2008 13:29:40 -0000
Received: (qmail 60530 invoked by uid 500); 15 Jul 2008 13:29:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59648 invoked by uid 500); 15 Jul 2008 13:29:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59637 invoked by uid 99); 15 Jul 2008 13:29:32 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Jul 2008 06:29:32 -0700
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 74.125.92.27 as permitted sender)
Received: from [74.125.92.27] (HELO qw-out-2122.google.com) (74.125.92.27)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Jul 2008 13:28:38 +0000
Received: by qw-out-2122.google.com with SMTP id 5so137044qwi.53
        for <java-user@lucene.apache.org>; Tue, 15 Jul 2008 06:29:01 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=eXq50kLna5FWs6mFToXYZN/G1Vz1vhTq3/WIENgr9aU=;
        b=Gj2n/ZKSTq9Qi3r87Deqb7YdpNk5/AiHGHs9YnpKARTYFLHwWttMSwtI5zOl+Z+Msh
         A2hpNqssDyOqxDNNwVl/xNBWbxKp1fSCEo48eS04QQ36POjxvkdY+OqtHMNS/FWxgFHM
         bi/S8/sqLm7qGLd39pP3S2bCMOdifp3BBP/Bk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=JIxjIBUAypEI1rYkPt4HFRtfLl9C5W2grysfB77TkzV2ZAxza5raVSfO6qvCX+iwve
         QkIr8UARoVs3Rc2P24lfsnJQZtaKLtN9pVU0VcbtFC6GPd35QnXieFGF4q7WO5IbfaNr
         piC21lhwTyliNKD8t76A14CavLnRoiWwCezdY=
Received: by 10.151.155.21 with SMTP id h21mr257104ybo.142.1216128541045;
        Tue, 15 Jul 2008 06:29:01 -0700 (PDT)
Received: by 10.151.40.4 with HTTP; Tue, 15 Jul 2008 06:29:01 -0700 (PDT)
Message-ID: <359a92830807150629y7449f6cco4c71b382c80339df@mail.gmail.com>
Date: Tue, 15 Jul 2008 09:29:01 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Mixing non scored an scored queries
In-Reply-To: <18460018.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_4931_29738291.1216128541049"
References: <18460018.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_4931_29738291.1216128541049
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

One way would be to create Filters and add them in with
ConstantScoreRangeQuery....

Best
Erick

On Tue, Jul 15, 2008 at 4:07 AM, John Patterson <jdp2000@gmail.com> wrote:

>
> Hi,
>
> I have a number of fields that are used to filter documents from a search.
> They should not contribute to the score of the document but merely decide
> which documents are valid.  i.e. it doesn't matter how rare they are in the
> index.  I also have a single "combined" field that is used for free text
> searching and it should be scored as normal.
>
> How can I turn off scoring of these "filter" fields?
>
> Thanks,
>
> John
> --
> View this message in context:
> http://www.nabble.com/Mixing-non-scored-an-scored-queries-tp18460018p18460018.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_4931_29738291.1216128541049--

From java-user-return-34954-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 15 13:30:58 2008
Return-Path: <java-user-return-34954-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 28836 invoked from network); 15 Jul 2008 13:30:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Jul 2008 13:30:58 -0000
Received: (qmail 64933 invoked by uid 500); 15 Jul 2008 13:30:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64909 invoked by uid 500); 15 Jul 2008 13:30:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64898 invoked by uid 99); 15 Jul 2008 13:30:50 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Jul 2008 06:30:50 -0700
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 74.125.92.26 as permitted sender)
Received: from [74.125.92.26] (HELO qw-out-2122.google.com) (74.125.92.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Jul 2008 13:29:56 +0000
Received: by qw-out-2122.google.com with SMTP id 5so137408qwi.53
        for <java-user@lucene.apache.org>; Tue, 15 Jul 2008 06:30:19 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=zz+Njxn+ZmUGZOj0Ot169jaRC3gFh+I83EnTEbG50pU=;
        b=O6FOMFUNaEJCZakvFNgmavJoRz0TJB8pBBJnTbrytYuQFdQD9/QrLNqskv9vit1VcN
         2Y9LXHTXuxVZdtDUub5MogYEcEHZimdmANgKoDy50MZD7XSRKXVeGgazKCJFiQLpFdn1
         haOeacsHmsny4reiaFcrtKhx3UaCUO0X+1QHo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=rt//lh9vRSEnBL5PV5feYgD8Hh4+DJ2Id8UFC6oIAOayxRFXbWpFbF83fGpNqNpxOC
         137qCw1Hgj5J9Q3pX5lWJLK3rxtCMGsvtqXQs/sC8GI2HvtheoOyCN6fBrXuIlvG3iAy
         Iwvdwy6Zi7uVwt5qVWpb0Gzvgn+7il8YKPzrA=
Received: by 10.151.157.1 with SMTP id j1mr246094ybo.173.1216128619084;
        Tue, 15 Jul 2008 06:30:19 -0700 (PDT)
Received: by 10.151.40.4 with HTTP; Tue, 15 Jul 2008 06:30:18 -0700 (PDT)
Message-ID: <359a92830807150630r2f092a5do128efea04ec93da7@mail.gmail.com>
Date: Tue, 15 Jul 2008 09:30:18 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Print the text files before indexing them in lucene
In-Reply-To: <18460721.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_4951_24936718.1216128618874"
References: <18460721.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_4951_24936718.1216128618874
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I guess I don't understand this. Somewhere, you have to be
opening the text file to feed it's contents to Lucene. Why can't
you just print things then? If you're using the demo, you need
to look into the code and you'll see something like this.

Best
Erick

On Tue, Jul 15, 2008 at 4:55 AM, starz10de <farag_ahmed@yahoo.com> wrote:

>
> Hi All,
>  It might be easy question, but for new one as me in lucene it is not that
> easy.  I want to print the text files before indexing them in lucene , I
> did
> try to do it , but i could just print the index content where we see the
> kewowrds and document nr and frequency.  I need beside that to print the
> text files content plus their pathes.
>
> thanks in advance
> --
> View this message in context:
> http://www.nabble.com/Print-the-text-files-before-indexing-them-in-lucene-tp18460721p18460721.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_4951_24936718.1216128618874--

From java-user-return-34955-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 15 13:35:36 2008
Return-Path: <java-user-return-34955-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30890 invoked from network); 15 Jul 2008 13:35:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Jul 2008 13:35:35 -0000
Received: (qmail 72241 invoked by uid 500); 15 Jul 2008 13:35:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72220 invoked by uid 500); 15 Jul 2008 13:35:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72193 invoked by uid 99); 15 Jul 2008 13:35:27 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Jul 2008 06:35:27 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Jul 2008 13:34:33 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KIkgC-0000uc-Pn
	for java-user@lucene.apache.org; Tue, 15 Jul 2008 06:34:56 -0700
Message-ID: <18465466.post@talk.nabble.com>
Date: Tue, 15 Jul 2008 06:34:56 -0700 (PDT)
From: John Patterson <jdp2000@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Mixing non scored an scored queries
In-Reply-To: <359a92830807150629y7449f6cco4c71b382c80339df@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: jdp2000@gmail.com
References: <18460018.post@talk.nabble.com> <359a92830807150629y7449f6cco4c71b382c80339df@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org




Erick Erickson wrote:
> 
> One way would be to create Filters and add them in with
> ConstantScoreRangeQuery....
> 

Would that mean running the query twice?  i.e. once to create the filter and
once to rank the results?
-- 
View this message in context: http://www.nabble.com/Mixing-non-scored-an-scored-queries-tp18460018p18465466.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34956-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 15 13:54:31 2008
Return-Path: <java-user-return-34956-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 41758 invoked from network); 15 Jul 2008 13:54:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Jul 2008 13:54:30 -0000
Received: (qmail 95859 invoked by uid 500); 15 Jul 2008 13:54:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95825 invoked by uid 500); 15 Jul 2008 13:54:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95814 invoked by uid 99); 15 Jul 2008 13:54:22 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Jul 2008 06:54:22 -0700
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.142.185 as permitted sender)
Received: from [209.85.142.185] (HELO ti-out-0910.google.com) (209.85.142.185)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Jul 2008 13:53:27 +0000
Received: by ti-out-0910.google.com with SMTP id b8so2657285tic.11
        for <java-user@lucene.apache.org>; Tue, 15 Jul 2008 06:53:50 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=8tO8H7zY09cmw3AYu+oY1qHPD4f4SIhpmsm472lelf0=;
        b=JIw9pljbORNxcWn0QV3Yy9rElkxQhauqg1dcBr06JXhIN3vBT67XzEHFcxiqg1H1g8
         0meEJQCfe0WiLL3W119sl2C6CnB3bjdh9nqEzVTAaAMCvBqlkqphF3DHWqYZf2Op7vdg
         cj8KuXpNumjZDUUgL+MZDmj/MV7lOjfQrceYg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=vvnBWYqOkncZ8cjF24KCdJUYPLFZZPZTT6NLR8g0uym0VvWr1lIOCDBq+6G4omYCmH
         382oe0ittfHjM5HA6/RaEaFaixmNSGOlgEZLf5HsNcEp3StTbpR2wYHcATqPMkfsLEID
         R302wOpB/y9tNHMmoFQGjZ6FnURLjsu7dJeXw=
Received: by 10.151.141.16 with SMTP id t16mr325390ybn.60.1216130029190;
        Tue, 15 Jul 2008 06:53:49 -0700 (PDT)
Received: by 10.151.40.4 with HTTP; Tue, 15 Jul 2008 06:53:49 -0700 (PDT)
Message-ID: <359a92830807150653u2712e3eco8030c40d289dd246@mail.gmail.com>
Date: Tue, 15 Jul 2008 09:53:49 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Mixing non scored an scored queries
In-Reply-To: <18465466.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_5173_8747593.1216130029181"
References: <18460018.post@talk.nabble.com>
	 <359a92830807150629y7449f6cco4c71b382c80339df@mail.gmail.com>
	 <18465466.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_5173_8747593.1216130029181
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

No, you create the filter via TermDocs/TermEnum. You can also cache
them. Creating filters is *much* faster than you think <G>.

Alternatively, you could boost everything *else* by some large factor
and then the unimportant fields would add relatively little to the final
score.

Best
Erick

On Tue, Jul 15, 2008 at 9:34 AM, John Patterson <jdp2000@gmail.com> wrote:

>
>
>
> Erick Erickson wrote:
> >
> > One way would be to create Filters and add them in with
> > ConstantScoreRangeQuery....
> >
>
> Would that mean running the query twice?  i.e. once to create the filter
> and
> once to rank the results?
> --
> View this message in context:
> http://www.nabble.com/Mixing-non-scored-an-scored-queries-tp18460018p18465466.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_5173_8747593.1216130029181--

From java-user-return-34957-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 15 13:58:02 2008
Return-Path: <java-user-return-34957-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45083 invoked from network); 15 Jul 2008 13:58:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Jul 2008 13:58:02 -0000
Received: (qmail 4639 invoked by uid 500); 15 Jul 2008 13:57:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4608 invoked by uid 500); 15 Jul 2008 13:57:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4597 invoked by uid 99); 15 Jul 2008 13:57:55 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Jul 2008 06:57:55 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Jul 2008 13:57:01 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KIl1w-0001du-Sj
	for java-user@lucene.apache.org; Tue, 15 Jul 2008 06:57:24 -0700
Message-ID: <18465937.post@talk.nabble.com>
Date: Tue, 15 Jul 2008 06:57:24 -0700 (PDT)
From: John Patterson <jdp2000@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Mixing non scored an scored queries
In-Reply-To: <359a92830807150629y7449f6cco4c71b382c80339df@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: jdp2000@gmail.com
References: <18460018.post@talk.nabble.com> <359a92830807150629y7449f6cco4c71b382c80339df@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org




Erick Erickson wrote:
> 
> One way would be to create Filters and add them in with
> 

I could possibly wrap the standard BooleanQuery in an adapter which also
wraps its Weight and Scorer to return a constant value.

But that seems like a hell of a lot of internal jiggery pokery for something
that is surely a very common use case?



-- 
View this message in context: http://www.nabble.com/Mixing-non-scored-an-scored-queries-tp18460018p18465937.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34958-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 15 14:07:52 2008
Return-Path: <java-user-return-34958-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48820 invoked from network); 15 Jul 2008 14:07:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Jul 2008 14:07:52 -0000
Received: (qmail 23090 invoked by uid 500); 15 Jul 2008 14:07:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22233 invoked by uid 500); 15 Jul 2008 14:07:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 22222 invoked by uid 99); 15 Jul 2008 14:07:45 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Jul 2008 07:07:45 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Jul 2008 14:06:51 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KIlBS-0002By-Rn
	for java-user@lucene.apache.org; Tue, 15 Jul 2008 07:07:14 -0700
Message-ID: <18466151.post@talk.nabble.com>
Date: Tue, 15 Jul 2008 07:07:14 -0700 (PDT)
From: John Patterson <jdp2000@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Mixing non scored an scored queries
In-Reply-To: <359a92830807150653u2712e3eco8030c40d289dd246@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: jdp2000@gmail.com
References: <18460018.post@talk.nabble.com> <359a92830807150629y7449f6cco4c71b382c80339df@mail.gmail.com> <18465466.post@talk.nabble.com> <359a92830807150653u2712e3eco8030c40d289dd246@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org




Erick Erickson wrote:
> 
> No, you create the filter via TermDocs/TermEnum. You can also cache
> them. Creating filters is *much* faster than you think <G>.
> 

But I can have many terms in the query.  With over 10 million documents and
many concurrent searches, creating a filter for every search would create a
lot of garbage, use a lot of ram and surely cripple the performance.

Also, I use the boolean AND and OR type functionality when filtering out
results.

And logically, it does not need to be done.  I am just looking for the
standard way that people use fields to narrow done results.  Every product
catalogue / shopping site does it.


Erick Erickson wrote:
> 
> Alternatively, you could boost everything *else* by some large factor
> and then the unimportant fields would add relatively little to the final
> score.
> 

Thanks for the suggestions.  Is there truly no non-hack way to accomplish
this?

-- 
View this message in context: http://www.nabble.com/Mixing-non-scored-an-scored-queries-tp18460018p18466151.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34959-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 15 14:25:52 2008
Return-Path: <java-user-return-34959-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54595 invoked from network); 15 Jul 2008 14:25:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Jul 2008 14:25:52 -0000
Received: (qmail 60341 invoked by uid 500); 15 Jul 2008 14:25:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59357 invoked by uid 500); 15 Jul 2008 14:25:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59346 invoked by uid 99); 15 Jul 2008 14:25:45 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Jul 2008 07:25:45 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: 194.109.24.26 is neither permitted nor denied by domain of karl.wettin@gmail.com)
Received: from [194.109.24.26] (HELO smtp-vbr6.xs4all.nl) (194.109.24.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Jul 2008 14:24:50 +0000
Received: from kodapan.lan (memnon.xs4all.nl [82.93.70.124])
	by smtp-vbr6.xs4all.nl (8.13.8/8.13.8) with ESMTP id m6FEOhMH076203
	for <java-user@lucene.apache.org>; Tue, 15 Jul 2008 16:24:43 +0200 (CEST)
	(envelope-from karl.wettin@gmail.com)
Message-Id: <DD0FDC75-113E-4951-AE08-77FFE43CAC66@gmail.com>
From: Karl Wettin <karl.wettin@gmail.com>
To: java-user@lucene.apache.org
In-Reply-To: <18460018.post@talk.nabble.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: Mixing non scored an scored queries
Date: Tue, 15 Jul 2008 16:24:42 +0200
References: <18460018.post@talk.nabble.com>
X-Mailer: Apple Mail (2.926)
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org

15 jul 2008 kl. 10.07 skrev John Patterson:

> I have a number of fields that are used to filter documents from a  
> search.
> They should not contribute to the score of the document but merely  
> decide
> which documents are valid.  i.e. it doesn't matter how rare they are  
> in the
> index.  I also have a single "combined" field that is used for free  
> text
> searching and it should be scored as normal.
>
> How can I turn off scoring of these "filter" fields?

I think all you need to do is to create a custom query (sounds like  
you want a clone of TermQuery) that uses a Scorer that always return 1f.


            karl



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34960-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 15 14:49:35 2008
Return-Path: <java-user-return-34960-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 68697 invoked from network); 15 Jul 2008 14:49:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Jul 2008 14:49:35 -0000
Received: (qmail 5444 invoked by uid 500); 15 Jul 2008 14:49:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5075 invoked by uid 500); 15 Jul 2008 14:49:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5064 invoked by uid 99); 15 Jul 2008 14:49:27 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Jul 2008 07:49:27 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Jul 2008 14:48:33 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KIlpp-0003cp-07
	for java-user@lucene.apache.org; Tue, 15 Jul 2008 07:48:57 -0700
Message-ID: <18467109.post@talk.nabble.com>
Date: Tue, 15 Jul 2008 07:48:56 -0700 (PDT)
From: John Patterson <jdp2000@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Mixing non scored an scored queries
In-Reply-To: <DD0FDC75-113E-4951-AE08-77FFE43CAC66@gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: jdp2000@gmail.com
References: <18460018.post@talk.nabble.com> <DD0FDC75-113E-4951-AE08-77FFE43CAC66@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org




Karl Wettin wrote:
> 
> I think all you need to do is to create a custom query (sounds like  
> you want a clone of TermQuery) that uses a Scorer that always return 1f.
> 

That sounds exactly like what is required.  I imagine that would be quite
useful to have in the core project?
-- 
View this message in context: http://www.nabble.com/Mixing-non-scored-an-scored-queries-tp18460018p18467109.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34961-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 15 15:14:36 2008
Return-Path: <java-user-return-34961-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95461 invoked from network); 15 Jul 2008 15:14:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Jul 2008 15:14:35 -0000
Received: (qmail 46018 invoked by uid 500); 15 Jul 2008 15:14:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45979 invoked by uid 500); 15 Jul 2008 15:14:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45942 invoked by uid 99); 15 Jul 2008 15:14:28 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Jul 2008 08:14:28 -0700
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [217.146.182.36] (HELO web27104.mail.ukl.yahoo.com) (217.146.182.36)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 15 Jul 2008 15:13:32 +0000
Received: (qmail 13599 invoked by uid 60001); 15 Jul 2008 15:12:54 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=XFSp1wAfwzcTijJ/ZguH/V4SFNSC6oQ2I7qGfT9y/BMbRa1pAbPke8hbjBLKxH5acqhAVQegd9pS2bUJ1pTU7eKKUZsr5eL85spknCD2bykDJ8vkKh8fCxlBUgYJEZoXpx61D3sBayO2BbrV31uk21ISLlNxoJkrcbvrwP0IAu0=;
Received: from [84.131.194.187] by web27104.mail.ukl.yahoo.com via HTTP; Tue, 15 Jul 2008 15:12:54 GMT
X-Mailer: YahooMailRC/1042.40 YahooMailWebService/0.7.199
Date: Tue, 15 Jul 2008 15:12:54 +0000 (GMT)
From: eks dev <eksdev@yahoo.co.uk>
Subject: Re: Mixing non scored an scored queries
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
Message-ID: <295811.13530.qm@web27104.mail.ukl.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

do not forget that Filter does not have to be loaded in memory, not any mor=
e since LUECEN-584 commit! Now it is only skipping iterator what you need.=
=0A=0A=0Atranslated, you could use:=0AConstantScoreQuery created with Filte=
r made from TermDocs (you need to implement only DocIdSet / DocIdSetIterato=
r, this is rally trivial as TermDocs implements next() and skipTo() methods=
)=0A=0AIf TermDocs is not enough for you you could have a look at the Boole=
anFilter that will create only one (Open)BitSet per request if you feed it =
with TermDocs based Filters... =0A=0AGenerally, it would be great to have B=
ooleanQuery that Accepts Filters as clauses (infrastructure is now there th=
anks to Paul , see LUCENE-584)=0A=0A=0A=0A----- Original Message ----=0A> F=
rom: John Patterson <jdp2000@gmail.com>=0A> To: java-user@lucene.apache.org=
=0A> Sent: Tuesday, 15 July, 2008 4:48:56 PM=0A> Subject: Re: Mixing non sc=
ored an scored queries=0A> =0A> =0A> =0A> =0A> Karl Wettin wrote:=0A> > =0A=
> > I think all you need to do is to create a custom query (sounds like  =
=0A> > you want a clone of TermQuery) that uses a Scorer that always return=
 1f.=0A> > =0A> =0A> That sounds exactly like what is required.  I imagine =
that would be quite=0A> useful to have in the core project?=0A> -- =0A> Vie=
w this message in context: =0A> http://www.nabble.com/Mixing-non-scored-an-=
scored-queries-tp18460018p18467109.html=0A> Sent from the Lucene - Java Use=
rs mailing list archive at Nabble.com.=0A> =0A> =0A> ----------------------=
-----------------------------------------------=0A> To unsubscribe, e-mail:=
 java-user-unsubscribe@lucene.apache.org=0A> For additional commands, e-mai=
l: java-user-help@lucene.apache.org=0A=0A=0A=0A      ______________________=
____________________________________=0ANot happy with your email address?.=
=0AGet the one you really want - millions of new email addresses available =
now at Yahoo! http://uk.docs.yahoo.com/ymail/new.html

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34962-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 15 15:23:02 2008
Return-Path: <java-user-return-34962-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99374 invoked from network); 15 Jul 2008 15:23:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Jul 2008 15:23:02 -0000
Received: (qmail 63127 invoked by uid 500); 15 Jul 2008 15:22:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63087 invoked by uid 500); 15 Jul 2008 15:22:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63053 invoked by uid 99); 15 Jul 2008 15:22:53 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Jul 2008 08:22:53 -0700
X-ASF-Spam-Status: No, hits=-4.0 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of absayeed@us.ibm.com designates 32.97.182.141 as permitted sender)
Received: from [32.97.182.141] (HELO e1.ny.us.ibm.com) (32.97.182.141)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Jul 2008 15:21:58 +0000
Received: from d01relay02.pok.ibm.com (d01relay02.pok.ibm.com [9.56.227.234])
	by e1.ny.us.ibm.com (8.13.8/8.13.8) with ESMTP id m6FFMLKk022578
	for <java-user@lucene.apache.org>; Tue, 15 Jul 2008 11:22:21 -0400
Received: from d01av01.pok.ibm.com (d01av01.pok.ibm.com [9.56.224.215])
	by d01relay02.pok.ibm.com (8.13.8/8.13.8/NCO v9.0) with ESMTP id m6FFMLj8138714
	for <java-user@lucene.apache.org>; Tue, 15 Jul 2008 11:22:21 -0400
Received: from d01av01.pok.ibm.com (loopback [127.0.0.1])
	by d01av01.pok.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id m6FFMLfs008348
	for <java-user@lucene.apache.org>; Tue, 15 Jul 2008 11:22:21 -0400
Received: from d01ml604.pok.ibm.com (d01ml604.pok.ibm.com [9.56.227.90])
	by d01av01.pok.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id m6FFMKJ5008332
	for <java-user@lucene.apache.org>; Tue, 15 Jul 2008 11:22:20 -0400
In-Reply-To: <OF38831C7C.47DBAB4D-ON85257487.00079604-85257487.000C64B1@us.ibm.com>
Subject: Re: Stable score scaling; LSI again
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 7.0 HF144 February 01, 2006
Message-ID: <OF536820B0.806307A0-ON85257487.00543C72-85257487.005474D4@us.ibm.com>
From: Asad Sayeed <absayeed@us.ibm.com>
Date: Tue, 15 Jul 2008 11:22:21 -0400
X-MIMETrack: Serialize by Router on D01ML604/01/M/IBM(Build V85_M1_05262008|May 26, 2008) at
 07/15/2008 11:22:20
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org

In other words, for my first question, what I want to know is how I might
consistently and correctly get the same max score for any two pairs of
identical documents without having to rewrite major parts of lucene.   I
could find ALL the scores and divide them by the max, but that seems
somehow wrong and not robust, especially since if I put the identical
documents several times into the index, I get slightly different scores
from a MoreLikeThis query.

Yours,
--Asad.


                                                                           
             Asad                                                          
             Sayeed/Watson/IBM                                             
             @IBMUS                                                     To 
                                       java-user@lucene.apache.org         
             07/14/2008 10:15                                           cc 
             PM                                                            
                                                                   Subject 
                                       Stable score scaling; LSI again     
             Please respond to                                             
             java-user@lucene.                                             
                apache.org                                                 
                                                                           
                                                                           
                                                                           




Hi, I have a couple of questions about how to alter the similarity scores.
I need scores that can be thresholded, and whose thresholds remain stable
even when I add documents to the IndexWriter. ie, identity should be a
fixed value such as 1.0.  I know that for efficiency reasons, Lucene
doesn't do this.  However, that level of efficiency is not as big a concern
for me as getting a stable, thresholdable similarity score from, eg,
"normal" cosine similarity.  Is there a way to change the DefaultSimilarity
trivally to get this feature, or is it a major overhaul?  The searches from
Lucene are being fed to another analyzer is why, so when the "identity"
score changes by adding docs to the index, it messes up the rest of the
processing.

The other question I had was about scoring via Latent Semantic Indexing.  I
read in the archives of this list from way back when that LSI was hard to
integrate into Lucene.  Is that still the case?  I mean, from what I
understand, it is just transforming the index in some way.

Yours,
--Asad.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34963-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 15 15:59:24 2008
Return-Path: <java-user-return-34963-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26640 invoked from network); 15 Jul 2008 15:59:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Jul 2008 15:59:23 -0000
Received: (qmail 45208 invoked by uid 500); 15 Jul 2008 15:59:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45180 invoked by uid 500); 15 Jul 2008 15:59:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45160 invoked by uid 99); 15 Jul 2008 15:59:06 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Jul 2008 08:59:06 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Jul 2008 15:58:11 +0000
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 8941430EFC17; Tue, 15 Jul 2008 09:58:04 -0600 (MDT)
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on javelina
X-Spam-Level: 
Received: from [10.0.1.2] (va-69-68-189-198.dyn.embarqhsd.net [69.68.189.198])
	by ehatchersolutions.com (Postfix) with ESMTP id 6A51D30EFC16
	for <java-user@lucene.apache.org>; Tue, 15 Jul 2008 09:57:58 -0600 (MDT)
Message-Id: <7E47FD4D-465A-4E1A-9EDB-6953619FBFF8@ehatchersolutions.com>
From: Erik Hatcher <erik@ehatchersolutions.com>
To: java-user@lucene.apache.org
In-Reply-To: <7FD5A172-E944-4424-B75D-9E937B65B92B@gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v924)
Subject: Re: Returned mail: see transcript for details
Date: Tue, 15 Jul 2008 11:57:55 -0400
References: <200807141714.m6EHEKel010637@spwiki.spsoftware.com> <a7f27bc30807150154s1d970049l8e1a9c1455a2fb92@mail.gmail.com> <7FD5A172-E944-4424-B75D-9E937B65B92B@gmail.com>
X-Mailer: Apple Mail (2.924)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-0.6 required=5.0 tests=BAYES_00,RCVD_IN_SORBS_DUL 
	autolearn=no version=3.1.1

I've finally successfully removed the offending address from the  
list.   I had tried earlier, but somehow it failed to take, but this  
time I think it has worked.   Let me know off the list if you continue  
to get this bounce (something I've never seen personally, for the  
record).

	Erik


On Jul 15, 2008, at 5:47 AM, Karl Wettin wrote:

> The list subscriber spsoft@spwiki.spsoftware.com is not a known  
> email address and the MX server (spsoftindia.com) sends the bounce  
> back to you. I'm not sure if this is because some header is missing  
> or if spsoftindia.com does not follow protocol. My guess is the  
> latter.
>
> A list moderator should remove the subscriber.
>
>       karl
>
>
> 15 jul 2008 kl. 10.54 skrev Preetam Rao:
>
>> Hi,
>>
>> Every time I send a mail to this list, I get the below error.
>> Any idea where is the problem ?
>> It also appears that my mails are actually reaching the list.
>> Any help in rectifying this is appreciated.
>>
>> Thanks
>> Preetam
>>
>> ---------- Forwarded message ----------
>> From: Mail Delivery Subsystem <MAILER-DAEMON@spsoftindia.com>
>> Date: Mon, Jul 14, 2008 at 10:44 PM
>> Subject: Returned mail: see transcript for details
>> To: blogathan.rao@gmail.com
>>
>>
>> ----- The following addresses had permanent fatal errors -----
>> spsoft
>>  (reason: 550 5.1.1 User unknown)
>>  (expanded from: root)
>>
>> ----- Transcript of session follows -----
>> 550 5.1.1 spsoft... User unknown
>>
>> Final-Recipient: RFC822; postmaster@localhost
>> X-Actual-Recipient: RFC822; spsoft@spwiki.spsoftware.com
>> Action: failed
>> Status: 5.1.1
>> Diagnostic-Code: X-Unix; 550 5.1.1 User unknown
>> Last-Attempt-Date: Mon, 14 Jul 2008 22:44:20 +0530
>>
>>
>> ---------- Forwarded message ----------
>> From: "Preetam Rao" <blogathan.rao@gmail.com>
>> To: java-user@lucene.apache.org
>> Date: Mon, 14 Jul 2008 22:44:26 +0530
>> Subject: matching sub phrases in user entered query...
>> Hi,
>>
>> <snip>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34964-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 15 16:10:25 2008
Return-Path: <java-user-return-34964-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32473 invoked from network); 15 Jul 2008 16:10:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Jul 2008 16:10:24 -0000
Received: (qmail 74284 invoked by uid 500); 15 Jul 2008 16:10:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74246 invoked by uid 500); 15 Jul 2008 16:10:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74234 invoked by uid 99); 15 Jul 2008 16:10:16 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Jul 2008 09:10:16 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Jul 2008 16:09:23 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KIn62-0006hD-33
	for java-user@lucene.apache.org; Tue, 15 Jul 2008 09:09:46 -0700
Message-ID: <18469025.post@talk.nabble.com>
Date: Tue, 15 Jul 2008 09:09:46 -0700 (PDT)
From: John Patterson <jdp2000@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Mixing non scored an scored queries
In-Reply-To: <295811.13530.qm@web27104.mail.ukl.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: jdp2000@gmail.com
References: <18460018.post@talk.nabble.com> <295811.13530.qm@web27104.mail.ukl.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org




eks dev wrote:
> 
> do not forget that Filter does not have to be loaded in memory, not any
> more since LUECEN-584 commit! Now it is only skipping iterator what you
> need.
> 
> 
> translated, you could use:
> ConstantScoreQuery created with Filter made from TermDocs (you need to
> implement only DocIdSet / DocIdSetIterator, this is rally trivial as
> TermDocs implements next() and skipTo() methods)
> 
> If TermDocs is not enough for you you could have a look at the
> BooleanFilter that will create only one (Open)BitSet per request if you
> feed it with TermDocs based Filters... 
> 
> Generally, it would be great to have BooleanQuery that Accepts Filters as
> clauses (infrastructure is now there thanks to Paul , see LUCENE-584)
> 
> 

I don't think filters are the way to go here because I need to use boolean
style logic e.g.

Search for free text "open fire" restricted to "London" OR "Brighton" in
category "Pubs and bars" OR "Restaurants"

which means I need to construct and run a BooleanQuery - unless I implement
my own boolean logic to use TermDocs which seems like overkill.

So it seems that creating a constant scoring TermQuery is the best
suggestion so far.

Thanks,

John

-- 
View this message in context: http://www.nabble.com/Mixing-non-scored-an-scored-queries-tp18460018p18469025.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34965-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 15 16:12:20 2008
Return-Path: <java-user-return-34965-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33197 invoked from network); 15 Jul 2008 16:12:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Jul 2008 16:12:20 -0000
Received: (qmail 77859 invoked by uid 500); 15 Jul 2008 16:12:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77837 invoked by uid 500); 15 Jul 2008 16:12:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77826 invoked by uid 99); 15 Jul 2008 16:12:13 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Jul 2008 09:12:13 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Jul 2008 16:11:19 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KIn7u-0006m9-Ve
	for java-user@lucene.apache.org; Tue, 15 Jul 2008 09:11:42 -0700
Message-ID: <18469083.post@talk.nabble.com>
Date: Tue, 15 Jul 2008 09:11:42 -0700 (PDT)
From: John Patterson <jdp2000@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Mixing non scored an scored queries
In-Reply-To: <18469025.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: jdp2000@gmail.com
References: <18460018.post@talk.nabble.com> <295811.13530.qm@web27104.mail.ukl.yahoo.com> <18469025.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org




John Patterson wrote:
> 
> 
> I don't think filters are the way to go here because I need to use boolean
> style logic e.g.
> 
> Search for free text "open fire" restricted to "London" OR "Brighton" in
> category "Pubs and bars" OR "Restaurants"
> 
> which means I need to construct and run a BooleanQuery - unless I
> implement my own boolean logic to use TermDocs which seems like overkill.
> 
> So it seems that creating a constant scoring TermQuery is the best
> suggestion so far.
> 

Would be really great if I could call BooleanQuery.setConstantScore(1.0f) or
something.

-- 
View this message in context: http://www.nabble.com/Mixing-non-scored-an-scored-queries-tp18460018p18469083.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34966-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 15 16:16:05 2008
Return-Path: <java-user-return-34966-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 34157 invoked from network); 15 Jul 2008 16:16:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Jul 2008 16:16:04 -0000
Received: (qmail 84093 invoked by uid 500); 15 Jul 2008 16:15:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83920 invoked by uid 500); 15 Jul 2008 16:15:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83909 invoked by uid 99); 15 Jul 2008 16:15:57 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Jul 2008 09:15:57 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Jul 2008 16:15:04 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KInBY-0006tv-97
	for java-user@lucene.apache.org; Tue, 15 Jul 2008 09:15:28 -0700
Message-ID: <18469178.post@talk.nabble.com>
Date: Tue, 15 Jul 2008 09:15:28 -0700 (PDT)
From: John Patterson <jdp2000@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Mixing non scored an scored queries
In-Reply-To: <DD0FDC75-113E-4951-AE08-77FFE43CAC66@gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: jdp2000@gmail.com
References: <18460018.post@talk.nabble.com> <DD0FDC75-113E-4951-AE08-77FFE43CAC66@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org




Karl Wettin wrote:
> 
> 
> I think all you need to do is to create a custom query (sounds like  
> you want a clone of TermQuery) that uses a Scorer that always return 1f.
> 
> 

Actually, I just thought that it would probably be better to create an
adapter Query that always returns a constant score.  That way instead of
being restricted to working with TermQuery you could wrap any type of query.

new ConstantScoreQuery(myExistingQuery, 1.0f);


-- 
View this message in context: http://www.nabble.com/Mixing-non-scored-an-scored-queries-tp18460018p18469178.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34967-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 15 16:45:03 2008
Return-Path: <java-user-return-34967-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51194 invoked from network); 15 Jul 2008 16:45:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Jul 2008 16:45:03 -0000
Received: (qmail 33962 invoked by uid 500); 15 Jul 2008 16:44:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33661 invoked by uid 500); 15 Jul 2008 16:44:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33650 invoked by uid 99); 15 Jul 2008 16:44:55 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Jul 2008 09:44:55 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of yseeley@gmail.com designates 74.125.44.29 as permitted sender)
Received: from [74.125.44.29] (HELO yx-out-2324.google.com) (74.125.44.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Jul 2008 16:44:02 +0000
Received: by yx-out-2324.google.com with SMTP id 3so1369190yxj.5
        for <java-user@lucene.apache.org>; Tue, 15 Jul 2008 09:44:26 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:sender
         :to:subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references
         :x-google-sender-auth;
        bh=gBAFcFzec5upJZCOCc5/WXfitnrnODstuZpV6aFD+lY=;
        b=tWDPWZkUC60C4BDJI+6y+k9hrLXTihQZxvUznrIVABQ3fPnBJPv25ffkuQ/jxieM11
         /JgXkrUtaQiBRxN34aPlGAJSt2LIalWxbp/wRhwt5wStLPJB70kT2t0fr25Iv6Vofla3
         iQg4dLbGnPUSQyHwPzsUyZ0m5rh4W2oP32hk4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:sender:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references:x-google-sender-auth;
        b=uLMKe88xrwsPBlSAEB6ya0aDJQ2gHcH+xTc36wxFBNd1viWNM+KiOwfWGNS9h+jrYb
         nFLIu/ENbGo9oingUrkIvZWCBK+OJkc1DATptC/zLmIkhFGOvqHfjAnZcYpsjdpvmjp3
         NZHJXcXoVWioTjVIiZ5bxmyKz5eNyhTN0XSE4=
Received: by 10.114.180.18 with SMTP id c18mr14365886waf.128.1216140265793;
        Tue, 15 Jul 2008 09:44:25 -0700 (PDT)
Received: by 10.114.75.13 with HTTP; Tue, 15 Jul 2008 09:44:25 -0700 (PDT)
Message-ID: <c68e39170807150944s62ec4735xbff9b7d286b0c148@mail.gmail.com>
Date: Tue, 15 Jul 2008 12:44:25 -0400
From: "Yonik Seeley" <yonik@apache.org>
Sender: yseeley@gmail.com
To: java-user@lucene.apache.org
Subject: Re: Mixing non scored an scored queries
In-Reply-To: <DD0FDC75-113E-4951-AE08-77FFE43CAC66@gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <18460018.post@talk.nabble.com>
	 <DD0FDC75-113E-4951-AE08-77FFE43CAC66@gmail.com>
X-Google-Sender-Auth: cafee776ec3c49d0
X-Virus-Checked: Checked by ClamAV on apache.org

On Tue, Jul 15, 2008 at 10:24 AM, Karl Wettin <karl.wettin@gmail.com> wrote:
>> I have a number of fields that are used to filter documents from a search.
>> They should not contribute to the score of the document but merely decide
>> which documents are valid.  i.e. it doesn't matter how rare they are in
>> the
>> index.  I also have a single "combined" field that is used for free text
>> searching and it should be scored as normal.
>>
>> How can I turn off scoring of these "filter" fields?
>
> I think all you need to do is to create a custom query (sounds like you want
> a clone of TermQuery) that uses a Scorer that always return 1f.

Or just set the boost to zero on the individual filter fields, or on
the whole filter expression.

+(my query) +(filter1 OR filter2 AND filter3)^0

-Yonik

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34968-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 15 16:54:14 2008
Return-Path: <java-user-return-34968-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 57082 invoked from network); 15 Jul 2008 16:54:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Jul 2008 16:54:13 -0000
Received: (qmail 41131 invoked by uid 500); 15 Jul 2008 16:54:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41095 invoked by uid 500); 15 Jul 2008 16:54:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41084 invoked by uid 99); 15 Jul 2008 16:54:06 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Jul 2008 09:54:06 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: 194.109.24.37 is neither permitted nor denied by domain of karl.wettin@gmail.com)
Received: from [194.109.24.37] (HELO smtp-vbr17.xs4all.nl) (194.109.24.37)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Jul 2008 16:53:13 +0000
Received: from kodapan.lan (memnon.xs4all.nl [82.93.70.124])
	by smtp-vbr17.xs4all.nl (8.13.8/8.13.8) with ESMTP id m6FGraVu069925
	for <java-user@lucene.apache.org>; Tue, 15 Jul 2008 18:53:36 +0200 (CEST)
	(envelope-from karl.wettin@gmail.com)
Message-Id: <E382D0D4-1E02-4887-9017-4BA4BD19C09A@gmail.com>
From: Karl Wettin <karl.wettin@gmail.com>
To: java-user@lucene.apache.org
In-Reply-To: <18469083.post@talk.nabble.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: Mixing non scored an scored queries
Date: Tue, 15 Jul 2008 18:53:35 +0200
References: <18460018.post@talk.nabble.com> <295811.13530.qm@web27104.mail.ukl.yahoo.com> <18469025.post@talk.nabble.com> <18469083.post@talk.nabble.com>
X-Mailer: Apple Mail (2.926)
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org


15 jul 2008 kl. 18.11 skrev John Patterson:
>
>>
> So it seems that creating a constant scoring TermQuery is the best
> suggestion so far.
>
> Would be really great if I could call  
> BooleanQuery.setConstantScore(1.0f) or
> something.


You might be looking at implementing something like

public class NonScoringQueryDecorator extends Query {

   private Query decorated;

   public NonScoringQueryDecorator(Query decorated) {
     this.decorated = decorated;
   }

   protected Weight createWeight(Searcher searcher) throws IOException {
     Weight decoratedWeight = this.decorated.createWeight(searcher);
     return new Weight() {
       public Scorer scorer(IndexReader reader) throws IOException {
         return new Scorer(){
           public float score() throws IOException {
             return 1f;
           }
         };
       }
     };
   }


Feel free to post it as an issue in the Jira when it's implemented.


         karl




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34969-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 15 17:20:36 2008
Return-Path: <java-user-return-34969-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71670 invoked from network); 15 Jul 2008 17:20:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Jul 2008 17:20:35 -0000
Received: (qmail 91427 invoked by uid 500); 15 Jul 2008 17:20:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91197 invoked by uid 500); 15 Jul 2008 17:20:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 91185 invoked by uid 99); 15 Jul 2008 17:20:29 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Jul 2008 10:20:29 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.142.188 as permitted sender)
Received: from [209.85.142.188] (HELO ti-out-0910.google.com) (209.85.142.188)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Jul 2008 17:19:34 +0000
Received: by ti-out-0910.google.com with SMTP id b8so2729537tic.11
        for <java-user@lucene.apache.org>; Tue, 15 Jul 2008 10:19:57 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=srIM2nb5gIIJm//MJVd9KkhI0F+oCmXgQWYojzURtNc=;
        b=pk6Av/trrgY/yxVRT/5CYtsfwGX9Nsiau7O8s1b1D7xmYxQj1d69099KdH2uUyJnoo
         Dye3NSuEhtwNeAiPMpettrrG1znRLR6rbFthCv8Gu2pKa9giHjbu2Q8Y2Sa3lCO6jsqp
         B8N7x3lABxy0Jv2k492a5hAt/gtXHTFgKYyLU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=dMiuuY9E4ZZrWkGYvHnfLVEAnxhykgxNJXPelAMfEhhVt9g7SqaLOI3AJ/v8tJ5Z5m
         cXdqtht+vjc8oPJLpXgxivhFIKnisrBybX/rCbHgD7Ci0688l+sk4wkGpwHiGI4PuOG7
         HEaG4Sst0SzsBzkWm2RaqHuFMYOz5PUOHb9oA=
Received: by 10.151.145.17 with SMTP id x17mr618773ybn.102.1216142395703;
        Tue, 15 Jul 2008 10:19:55 -0700 (PDT)
Received: by 10.151.40.4 with HTTP; Tue, 15 Jul 2008 10:19:55 -0700 (PDT)
Message-ID: <359a92830807151019i7467759ai91eeea0076e60d44@mail.gmail.com>
Date: Tue, 15 Jul 2008 13:19:55 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Returned mail: see transcript for details
In-Reply-To: <7E47FD4D-465A-4E1A-9EDB-6953619FBFF8@ehatchersolutions.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_8765_4000030.1216142395736"
References: <200807141714.m6EHEKel010637@spwiki.spsoftware.com>
	 <a7f27bc30807150154s1d970049l8e1a9c1455a2fb92@mail.gmail.com>
	 <7FD5A172-E944-4424-B75D-9E937B65B92B@gmail.com>
	 <7E47FD4D-465A-4E1A-9EDB-6953619FBFF8@ehatchersolutions.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_8765_4000030.1216142395736
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Erik:

I'm having the same problem, I expect this e-mail to get a bounce-back.
Could I ask you to take a glance at it?

It's no big deal, I just have to delete the bounce-back.

Thanks
Erick@ThisIsHowItsReallySpelled.Grin

On Tue, Jul 15, 2008 at 11:57 AM, Erik Hatcher <erik@ehatchersolutions.com>
wrote:

> I've finally successfully removed the offending address from the list.   I
> had tried earlier, but somehow it failed to take, but this time I think it
> has worked.   Let me know off the list if you continue to get this bounce
> (something I've never seen personally, for the record).
>
>        Erik
>
>
>
> On Jul 15, 2008, at 5:47 AM, Karl Wettin wrote:
>
>  The list subscriber spsoft@spwiki.spsoftware.com is not a known email
>> address and the MX server (spsoftindia.com) sends the bounce back to you.
>> I'm not sure if this is because some header is missing or if
>> spsoftindia.com does not follow protocol. My guess is the latter.
>>
>> A list moderator should remove the subscriber.
>>
>>      karl
>>
>>
>> 15 jul 2008 kl. 10.54 skrev Preetam Rao:
>>
>>  Hi,
>>>
>>> Every time I send a mail to this list, I get the below error.
>>> Any idea where is the problem ?
>>> It also appears that my mails are actually reaching the list.
>>> Any help in rectifying this is appreciated.
>>>
>>> Thanks
>>> Preetam
>>>
>>> ---------- Forwarded message ----------
>>> From: Mail Delivery Subsystem <MAILER-DAEMON@spsoftindia.com>
>>> Date: Mon, Jul 14, 2008 at 10:44 PM
>>> Subject: Returned mail: see transcript for details
>>> To: blogathan.rao@gmail.com
>>>
>>>
>>> ----- The following addresses had permanent fatal errors -----
>>> spsoft
>>>  (reason: 550 5.1.1 User unknown)
>>>  (expanded from: root)
>>>
>>> ----- Transcript of session follows -----
>>> 550 5.1.1 spsoft... User unknown
>>>
>>> Final-Recipient: RFC822; postmaster@localhost
>>> X-Actual-Recipient: RFC822; spsoft@spwiki.spsoftware.com
>>> Action: failed
>>> Status: 5.1.1
>>> Diagnostic-Code: X-Unix; 550 5.1.1 User unknown
>>> Last-Attempt-Date: Mon, 14 Jul 2008 22:44:20 +0530
>>>
>>>
>>> ---------- Forwarded message ----------
>>> From: "Preetam Rao" <blogathan.rao@gmail.com>
>>> To: java-user@lucene.apache.org
>>> Date: Mon, 14 Jul 2008 22:44:26 +0530
>>> Subject: matching sub phrases in user entered query...
>>> Hi,
>>>
>>> <snip>
>>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_8765_4000030.1216142395736--

From java-user-return-34970-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 15 17:29:22 2008
Return-Path: <java-user-return-34970-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76451 invoked from network); 15 Jul 2008 17:29:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Jul 2008 17:29:22 -0000
Received: (qmail 8803 invoked by uid 500); 15 Jul 2008 17:29:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8774 invoked by uid 500); 15 Jul 2008 17:29:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8763 invoked by uid 99); 15 Jul 2008 17:29:15 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Jul 2008 10:29:15 -0700
X-ASF-Spam-Status: No, hits=-4.0 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [128.230.108.46] (HELO SUEXCL-02.ad.syr.edu) (128.230.108.46)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Jul 2008 17:28:23 +0000
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: RE: newbie question (for John Griffin) - fixed
Date: Tue, 15 Jul 2008 13:26:06 -0400
Message-ID: <9294E20AED46934EA459020706463F94C59B62@SUEXCL-02.ad.syr.edu>
In-Reply-To: <487C9620.2090807@scalix.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: newbie question (for John Griffin) - fixed
Thread-Index: AcjmdYfeKl1WA/u8TIy+ndPD+boFJQAKGxmA
From: "Steven A Rowe" <sarowe@syr.edu>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Chris,

The PhraseQuery class does no parsing; tokenization is expected to =
happen before you feed anything to it.  So unless you have an index-time =
analyzer that outputs terms that look like "aaa ddd" -- that is, terms =
with embedded spaces -- then attempting to use PhraseQuery or any other =
query type to look for these terms will bring you no joy.  (Of course, =
this only applies if you are not using a query parser - I believe John's =
point about enclosing a phrase query in quotes refers to the action =
Lucene's QueryParser takes when it sees input of this sort.)

The way that it worked for you - adding terms one at a time, with no =
quotes and no spaces - is the correct usage pattern.

Steve

On 07/15/2008 at 8:20 AM, Chris Bamford wrote:
> Hi John
>=20
> Thanks for your continued interest in my travails!
>=20
> =3D=3DI'm not sure I understand. You want a phrase query so they =
should be
> =3D=3Dpassed as a phrase in quotes.
>=20
> Ok... well I must be missing something then  :-(
> This fails to return any hits for me:
>=20
>         PhraseQuery pq =3D new  PhraseQuery();
>         pq.add(new Term("body", "aaa ddd"));
>=20
> while
>        PhraseQuery pq =3D new  PhraseQuery();
>        pq.add(new Term("body", "aaa"));
>        pq.add(new Term("body", "ddd"));
>=20
> works fine.
> I have tried with both Lucene 2.0 and 2.3 jars.
>=20
> Please advise!
>=20
> Thanks,
>=20
> -Chris
>     BTW thanks for the tip about Luke
>=20
>=20
> John Griffin wrote:
> > Chris,
> >=20
> > -----Original Message-----
> > From: Chris Bamford [mailto:chris.bamford@scalix.com]
> > Sent: Thursday, July 10, 2008 9:15 AM
> > To: java-user@lucene.apache.org
> > Subject: Re: newbie question (for John Griffin) - fixed
> >=20
> > Hi John,
> >=20
> > Please ignore my earlier questions on this subject, as I have got to
> > the bottom of it. I was not passing each word in the phrase as a
> > separate Term to the query;
> >=20
> > =3D=3DI'm not sure I understand. You want a phrase query so they =
should be
> > =3D=3Dpassed as a phrase in quotes.
> >=20
> >=20
> > instead I was passing the whole string (doh!).
> >=20
> > Thanks.
> >=20
> > - Chris
> >=20
> > Chris Bamford wrote:
> >=20
> > > Hi John,
> > >=20
> > > Further to my question below, I did some back-to-basics =
investigation
> > > of PhraseQueries and found that even basic ones fail for me... I =
found
> > > the attached code on the Internet (see
> > >=20
> http://affy.blogspot.com/2003/04/codebit-examples-for-all-of-l
> ucenes.html)
> > >=20
> >=20
> >=20
> > > and this fails too...  Can you explain why?  I would expect the =
first
> > > test to deliver 2 hits.
> > >=20
> > > I have tried with Lucene 2.0 and 2.3.2 jars and both fail.
> > >=20
> > > Thanks again,
> > >=20
> > > - Chris
> > >=20
> > >=20
> > >=20
> > > Chris Bamford wrote:
> > >=20
> > > > Hi John,
> > > >=20
> > > > Just continuing from an earlier question where I asked you how =
to
> > > > handle strings like "from:fred flintston*" (sorry I have lost =
the
> > > > original email). You advised me to write my own BooleanQuery and =
add
> > > > to it Prefix- / Term- / Phrase- Querys as appropriate.  I have =
done
> > > > so, but am having trouble with the result - my PhraseQueries =
just do
> > > > not get any hits at all  :-( My code looks for quotes - if it =
finds
> > > > them, it treats the quoted phrase as a PhraseQuery and sets the =
slop
> > > > factor to 0. so,  an input of:
> > > >=20
> > > >    subject:"Good Morning"
> > > >=20
> > > > results in a PhraseQuery (which I add to my BooleanQuery and =
then
> > > > dump with toString()) of:
> > > >=20
> > > >    +subject:"good morning"
> > > >=20
> > > > ... which fails. However, if I break it into 2 TermQuerys, it =
works
> > > > (but that's not what I want).
> > > >=20
> > > > What am I missing?
> > > >=20
> > > > Thanks,
> > > >=20
> > > > - Chris



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34971-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 15 17:33:20 2008
Return-Path: <java-user-return-34971-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78624 invoked from network); 15 Jul 2008 17:33:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Jul 2008 17:33:19 -0000
Received: (qmail 13433 invoked by uid 500); 15 Jul 2008 17:33:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13404 invoked by uid 500); 15 Jul 2008 17:33:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13393 invoked by uid 99); 15 Jul 2008 17:33:12 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Jul 2008 10:33:12 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [82.111.253.243] (HELO mail.uk.scalix.com) (82.111.253.243)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Jul 2008 17:32:16 +0000
Received: from mail.uk.scalix.com (localhost.localdomain [127.0.0.1])
	by mail.uk.scalix.com (8.13.8/8.13.8) with ESMTP id m6FHVbXa008325
	for <java-user@lucene.apache.org>; Tue, 15 Jul 2008 18:31:37 +0100
Received: from [10.11.108.233] (mail.uk.scalix.com [10.11.108.216])
    by mail.uk.scalix.com (Scalix SMTP Relay 11.4.1.11855)
    via ESMTP; Tue, 15 Jul 2008 18:31:37 +0100 (BST)
Date: Tue, 15 Jul 2008 18:31:36 +0100
From: Chris Bamford <chris.bamford@scalix.com>
To: java-user@lucene.apache.org
Message-ID: <487CDEF8.1060602@scalix.com>
In-Reply-To: <9294E20AED46934EA459020706463F94C59B62@SUEXCL-02.ad.syr.edu>
References: <9294E20AED46934EA459020706463F94C59B62@SUEXCL-02.ad.syr.edu>
Subject: Re: newbie question (for John Griffin) - fixed
x-scalix-Hops: 1
User-Agent: Thunderbird 2.0.0.14 (X11/20080505)
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII";
	format="flowed"
Content-Disposition: inline
X-Spam-Checker-Version: SpamAssassin 3.2.5 (2008-06-10) on mail.uk.scalix.com
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.2 required=5.0 tests=AWL,BAYES_00 autolearn=ham
	version=3.2.5

Thanks Steve.

Steven A Rowe wrote:
> Hi Chris,
>
> The PhraseQuery class does no parsing; tokenization is expected to happen before you feed anything to it.  So unless you have an index-time analyzer that outputs terms that look like "aaa ddd" -- that is, terms with embedded spaces -- then attempting to use PhraseQuery or any other query type to look for these terms will bring you no joy.  (Of course, this only applies if you are not using a query parser - I believe John's point about enclosing a phrase query in quotes refers to the action Lucene's QueryParser takes when it sees input of this sort.)
>
> The way that it worked for you - adding terms one at a time, with no quotes and no spaces - is the correct usage pattern.
>
> Steve
>
> On 07/15/2008 at 8:20 AM, Chris Bamford wrote:
>   
>> Hi John
>>
>> Thanks for your continued interest in my travails!
>>
>> ==I'm not sure I understand. You want a phrase query so they should be
>> ==passed as a phrase in quotes.
>>
>> Ok... well I must be missing something then  :-(
>> This fails to return any hits for me:
>>
>>         PhraseQuery pq = new  PhraseQuery();
>>         pq.add(new Term("body", "aaa ddd"));
>>
>> while
>>        PhraseQuery pq = new  PhraseQuery();
>>        pq.add(new Term("body", "aaa"));
>>        pq.add(new Term("body", "ddd"));
>>
>> works fine.
>> I have tried with both Lucene 2.0 and 2.3 jars.
>>
>> Please advise!
>>
>> Thanks,
>>
>> -Chris
>>     BTW thanks for the tip about Luke
>>
>>
>> John Griffin wrote:
>>     
>>> Chris,
>>>
>>> -----Original Message-----
>>> From: Chris Bamford [mailto:chris.bamford@scalix.com]
>>> Sent: Thursday, July 10, 2008 9:15 AM
>>> To: java-user@lucene.apache.org
>>> Subject: Re: newbie question (for John Griffin) - fixed
>>>
>>> Hi John,
>>>
>>> Please ignore my earlier questions on this subject, as I have got to
>>> the bottom of it. I was not passing each word in the phrase as a
>>> separate Term to the query;
>>>
>>> ==I'm not sure I understand. You want a phrase query so they should be
>>> ==passed as a phrase in quotes.
>>>
>>>
>>> instead I was passing the whole string (doh!).
>>>
>>> Thanks.
>>>
>>> - Chris
>>>
>>> Chris Bamford wrote:
>>>
>>>       
>>>> Hi John,
>>>>
>>>> Further to my question below, I did some back-to-basics investigation
>>>> of PhraseQueries and found that even basic ones fail for me... I found
>>>> the attached code on the Internet (see
>>>>
>>>>         
>> http://affy.blogspot.com/2003/04/codebit-examples-for-all-of-l
>> ucenes.html)
>>     
>>>       
>>>> and this fails too...  Can you explain why?  I would expect the first
>>>> test to deliver 2 hits.
>>>>
>>>> I have tried with Lucene 2.0 and 2.3.2 jars and both fail.
>>>>
>>>> Thanks again,
>>>>
>>>> - Chris
>>>>
>>>>
>>>>
>>>> Chris Bamford wrote:
>>>>
>>>>         
>>>>> Hi John,
>>>>>
>>>>> Just continuing from an earlier question where I asked you how to
>>>>> handle strings like "from:fred flintston*" (sorry I have lost the
>>>>> original email). You advised me to write my own BooleanQuery and add
>>>>> to it Prefix- / Term- / Phrase- Querys as appropriate.  I have done
>>>>> so, but am having trouble with the result - my PhraseQueries just do
>>>>> not get any hits at all  :-( My code looks for quotes - if it finds
>>>>> them, it treats the quoted phrase as a PhraseQuery and sets the slop
>>>>> factor to 0. so,  an input of:
>>>>>
>>>>>    subject:"Good Morning"
>>>>>
>>>>> results in a PhraseQuery (which I add to my BooleanQuery and then
>>>>> dump with toString()) of:
>>>>>
>>>>>    +subject:"good morning"
>>>>>
>>>>> ... which fails. However, if I break it into 2 TermQuerys, it works
>>>>> (but that's not what I want).
>>>>>
>>>>> What am I missing?
>>>>>
>>>>> Thanks,
>>>>>
>>>>> - Chris
>>>>>           
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>   


-- 
------------------------------------------------------------------------
*Chris Bamford*
Senior Development Engineer 	<http://www.scalix.com>
------------------------------------------------------------------------
/Email / MSN/ 	chris.bamford@scalix.com
/Tel/ 	+44 (0)1344 381814 	  	/Skype/ 	c.bamford


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34972-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 15 17:38:44 2008
Return-Path: <java-user-return-34972-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82294 invoked from network); 15 Jul 2008 17:38:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Jul 2008 17:38:43 -0000
Received: (qmail 30100 invoked by uid 500); 15 Jul 2008 17:38:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30055 invoked by uid 500); 15 Jul 2008 17:38:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30040 invoked by uid 99); 15 Jul 2008 17:38:34 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Jul 2008 10:38:34 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Jul 2008 17:37:40 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KIoTT-0001K7-Se
	for java-user@lucene.apache.org; Tue, 15 Jul 2008 10:38:03 -0700
Message-ID: <18470916.post@talk.nabble.com>
Date: Tue, 15 Jul 2008 10:38:03 -0700 (PDT)
From: John Patterson <jdp2000@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Mixing non scored an scored queries
In-Reply-To: <E382D0D4-1E02-4887-9017-4BA4BD19C09A@gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: jdp2000@gmail.com
References: <18460018.post@talk.nabble.com> <295811.13530.qm@web27104.mail.ukl.yahoo.com> <18469025.post@talk.nabble.com> <18469083.post@talk.nabble.com> <E382D0D4-1E02-4887-9017-4BA4BD19C09A@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org



Karl Wettin wrote:
> 
> 
> Feel free to post it as an issue in the Jira when it's implemented.
> 
> 

Thanks a lot!  Will do

John
-- 
View this message in context: http://www.nabble.com/Mixing-non-scored-an-scored-queries-tp18460018p18470916.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34973-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 15 17:41:46 2008
Return-Path: <java-user-return-34973-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 83415 invoked from network); 15 Jul 2008 17:41:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Jul 2008 17:41:45 -0000
Received: (qmail 36553 invoked by uid 500); 15 Jul 2008 17:41:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36243 invoked by uid 500); 15 Jul 2008 17:41:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36232 invoked by uid 99); 15 Jul 2008 17:41:38 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Jul 2008 10:41:38 -0700
X-ASF-Spam-Status: No, hits=-4.0 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [128.230.108.46] (HELO SUEXCL-02.ad.syr.edu) (128.230.108.46)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Jul 2008 17:40:43 +0000
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Returned mail: see transcript for details
Date: Tue, 15 Jul 2008 13:38:06 -0400
Message-ID: <9294E20AED46934EA459020706463F94C59B63@SUEXCL-02.ad.syr.edu>
In-Reply-To: <359a92830807151019i7467759ai91eeea0076e60d44@mail.gmail.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Returned mail: see transcript for details
Thread-Index: Acjmnx2V4oZxtMX/QLO44ttnwF8rtQAAYAMQ
From: "Steven A Rowe" <sarowe@syr.edu>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Erik,

I'm seeing the same problem - here's an excerpt from the headers of a =
bounce I just got (note the address "gaurav.kumar@spsoftindia.com" in =
the last couple of "Received:" headers):

Received: from spwiki.spsoftware.com (static61.17.14-87.vsnl.eth.net =
[61.17.14.87] (may be forged))
	for <sarowe@syr.edu>; Tue, 15 Jul 2008 13:30:52 -0400
Received: from localhost (localhost)
	by spwiki.spsoftware.com (8.14.2/8.14.2) id m6FHRS6S007651;
	Tue, 15 Jul 2008 22:57:28 +0530
From: Mail Delivery Subsystem <MAILER-DAEMON@spsoftindia.com>
Subject: Returned mail: see transcript for details
Received: from spwiki.spsoftware.com (localhost.localdomain [127.0.0.1])
	by spwiki.spsoftware.com (8.14.2/8.14.2) with ESMTP id m6FHRH6S007648
	for <postmaster@localhost>; Tue, 15 Jul 2008 22:57:22 +0530
Received: from pop.spsoftindia.com
	by spwiki.spsoftware.com with POP3 (fetchmail-6.3.8)
	for <postmaster@localhost> (multi-drop); Tue, 15 Jul 2008 22:57:22 =
+0530 (IST)
Received: from mx04.mfg.onr.siteprotect.com (unknown [192.168.33.225])
	by mf08.mfg.onr.chicago.hostway (Postfix) with ESMTP id EE0741744006
	for <gaurav.kumar@spsoftindia.com>; Tue, 15 Jul 2008 11:57:56 -0500 =
(CDT)
Received: from mail.apache.org (hermes.apache.org [140.211.11.2])
	by mx04.mfg.onr.siteprotect.com (Postfix) with SMTP id 0024420B4062
	for <gaurav.kumar@spsoftindia.com>; Tue, 15 Jul 2008 12:29:17 -0500 =
(CDT)

Steve

On 07/15/2008 at 1:19 PM, Erick Erickson wrote:
> Erik:
>=20
> I'm having the same problem, I expect this e-mail to get a =
bounce-back.
> Could I ask you to take a glance at it?
>=20
> It's no big deal, I just have to delete the bounce-back.
>=20
> Thanks
> Erick@ThisIsHowItsReallySpelled.Grin
>=20
> On Tue, Jul 15, 2008 at 11:57 AM, Erik Hatcher
> <erik@ehatchersolutions.com> wrote:
>=20
> > I've finally successfully removed the offending address from the =
list.=20
> >  I had tried earlier, but somehow it failed to take, but this time I
> > think it has worked.   Let me know off the list if you continue to =
get
> > this bounce (something I've never seen personally, for the record).
> >=20
> >        Erik
> >=20
> >=20
> >=20
> > On Jul 15, 2008, at 5:47 AM, Karl Wettin wrote:
> >=20
> > > The list subscriber spsoft@spwiki.spsoftware.com is not a known =
email
> > > address and the MX server (spsoftindia.com) sends the bounce back =
to
> > > you. I'm not sure if this is because some header is missing or if
> > > spsoftindia.com does not follow protocol. My guess is the latter.
> > =20
> >  A list moderator should remove the subscriber.
> > =20
> > >      karl
> > >=20
> > >=20
> > > 15 jul 2008 kl. 10.54 skrev Preetam Rao:
> > >=20
> > >  Hi,
> > > =20
> > >  Every time I send a mail to this list, I get the below error.
> > >  Any idea where is the problem ?
> > >  It also appears that my mails are actually reaching the list.
> > >  Any help in rectifying this is appreciated.
> > > =20
> > >  Thanks
> > >  Preetam
> > > =20
> > >  ---------- Forwarded message ----------
> > >  From: Mail Delivery Subsystem <MAILER-DAEMON@spsoftindia.com>
> > >  Date: Mon, Jul 14, 2008 at 10:44 PM
> > >  Subject: Returned mail: see transcript for details
> > >  To: blogathan.rao@gmail.com
> > > =20
> > > =20
> > >  ----- The following addresses had permanent fatal errors -----
> > >  spsoft
> > > >  (reason: 550 5.1.1 User unknown)
> > > >  (expanded from: root)
> > > >=20
> > > > ----- Transcript of session follows -----
> > > > 550 5.1.1 spsoft... User unknown
> > > >=20
> > > > Final-Recipient: RFC822; postmaster@localhost
> > > > X-Actual-Recipient: RFC822; spsoft@spwiki.spsoftware.com
> > > > Action: failed
> > > > Status: 5.1.1
> > > > Diagnostic-Code: X-Unix; 550 5.1.1 User unknown
> > > > Last-Attempt-Date: Mon, 14 Jul 2008 22:44:20 +0530
> > > >=20
> > > >=20
> > > > ---------- Forwarded message ----------
> > > > From: "Preetam Rao" <blogathan.rao@gmail.com>
> > > > To: java-user@lucene.apache.org
> > > > Date: Mon, 14 Jul 2008 22:44:26 +0530
> > > > Subject: matching sub phrases in user entered query...
> > > > Hi,
> > > >=20
> > > > <snip>
> > > >=20
> > >=20
> > >=20
> > >=20
> > > =
---------------------------------------------------------------------
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org =
For
> > > additional commands, e-mail: java-user-help@lucene.apache.org
> > >=20
> >=20
> >=20
> >=20
> > =
---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org For
> > additional commands, e-mail: java-user-help@lucene.apache.org
> >=20
> >=20
>

=20


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34974-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 15 20:48:30 2008
Return-Path: <java-user-return-34974-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19188 invoked from network); 15 Jul 2008 20:48:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Jul 2008 20:48:30 -0000
Received: (qmail 52431 invoked by uid 500); 15 Jul 2008 20:48:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52387 invoked by uid 500); 15 Jul 2008 20:48:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52370 invoked by uid 99); 15 Jul 2008 20:48:23 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Jul 2008 13:48:23 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Jul 2008 20:47:31 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id B4EE471C421; Tue, 15 Jul 2008 13:47:55 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id ADD0171C418
	for <java-user@lucene.apache.org>; Tue, 15 Jul 2008 13:47:55 -0700 (PDT)
Date: Tue, 15 Jul 2008 13:47:55 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Boolean expression for no terms OR matching a wildcard
In-Reply-To: <d31a84170807140604u595b4883i8a26f404252c205e@mail.gmail.com>
Message-ID: <Pine.LNX.4.62.0807151343310.18025@radix.cryptio.net>
References: <F28D06AF-4268-4854-9B59-4A2D0879FAD8@gmail.com>
 <d31a84170807140604u595b4883i8a26f404252c205e@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


Assuming i understand your question: the fact that your first clause is a 
wildcard query is irrelevant, to generalize your request you want a way to 
query for all docs which either match some sub query, or have no terms in 
the field at all.  to find all docs with no terms for a given field, you 
need to search for all docs (MatchAllDocs), then exclude the docs that 
have a value for 
thatfield -- which is easy to do using a ConstantScoreRangeQuery where the 
lower and upper bounds are both null.

essentially you want something like...

   myfield:abc*123  (+MatchAllDocsQuery -myfield:[* TO *])

(except you'll have to construct the MatchAllDocsQuery and the two 
BooleanQueries yourself)


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34975-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 15 22:11:34 2008
Return-Path: <java-user-return-34975-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76423 invoked from network); 15 Jul 2008 22:11:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Jul 2008 22:11:33 -0000
Received: (qmail 45630 invoked by uid 500); 15 Jul 2008 22:11:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45593 invoked by uid 500); 15 Jul 2008 22:11:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45582 invoked by uid 99); 15 Jul 2008 22:11:26 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Jul 2008 15:11:26 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: 194.109.24.31 is neither permitted nor denied by domain of karl.wettin@gmail.com)
Received: from [194.109.24.31] (HELO smtp-vbr11.xs4all.nl) (194.109.24.31)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Jul 2008 22:10:32 +0000
Received: from kodapan.lan (memnon.xs4all.nl [82.93.70.124])
	by smtp-vbr11.xs4all.nl (8.13.8/8.13.8) with ESMTP id m6FLg3SJ005752
	for <java-user@lucene.apache.org>; Tue, 15 Jul 2008 23:42:03 +0200 (CEST)
	(envelope-from karl.wettin@gmail.com)
Message-Id: <3BB7A550-A0A4-4451-B1BA-9D0E3CA96AAF@gmail.com>
From: Karl Wettin <karl.wettin@gmail.com>
To: java-user@lucene.apache.org
In-Reply-To: <c68e39170807150944s62ec4735xbff9b7d286b0c148@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: Mixing non scored an scored queries
Date: Tue, 15 Jul 2008 23:42:02 +0200
References: <18460018.post@talk.nabble.com> <DD0FDC75-113E-4951-AE08-77FFE43CAC66@gmail.com> <c68e39170807150944s62ec4735xbff9b7d286b0c148@mail.gmail.com>
X-Mailer: Apple Mail (2.926)
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org


15 jul 2008 kl. 18.44 skrev Yonik Seeley:

> On Tue, Jul 15, 2008 at 10:24 AM, Karl Wettin  
> <karl.wettin@gmail.com> wrote:
>>> I have a number of fields that are used to filter documents from a  
>>> search.
>>> They should not contribute to the score of the document but merely  
>>> decide
>>> which documents are valid.  i.e. it doesn't matter how rare they  
>>> are in
>>> the
>>> index.  I also have a single "combined" field that is used for  
>>> free text
>>> searching and it should be scored as normal.
>>>
>>> How can I turn off scoring of these "filter" fields?
>>
>> I think all you need to do is to create a custom query (sounds like  
>> you want
>> a clone of TermQuery) that uses a Scorer that always return 1f.
>
> Or just set the boost to zero on the individual filter fields, or on
> the whole filter expression.
>
> +(my query) +(filter1 OR filter2 AND filter3)^0

Yeah, that's a much simpler solution :).

Use that one John!


        karl

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34976-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 15 22:15:10 2008
Return-Path: <java-user-return-34976-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78860 invoked from network); 15 Jul 2008 22:15:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Jul 2008 22:15:10 -0000
Received: (qmail 50543 invoked by uid 500); 15 Jul 2008 22:15:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50510 invoked by uid 500); 15 Jul 2008 22:15:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50499 invoked by uid 99); 15 Jul 2008 22:15:03 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Jul 2008 15:15:03 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ronchalant@gmail.com designates 64.233.184.233 as permitted sender)
Received: from [64.233.184.233] (HELO wr-out-0506.google.com) (64.233.184.233)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Jul 2008 22:14:10 +0000
Received: by wr-out-0506.google.com with SMTP id c30so5320304wra.21
        for <java-user@lucene.apache.org>; Tue, 15 Jul 2008 15:14:34 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:from:to
         :in-reply-to:content-type:content-transfer-encoding:mime-version
         :subject:date:references:x-mailer;
        bh=+GLf5TueV+lJCRm5PuWXa27uynsAjg6/+vLqyTNwP4M=;
        b=KMj2mOitdq6+ZqkUoELBYSl9ctVmeiyQL9r+527Y9pYWApeeFmVgg8vPZQIVNSw4us
         wg1LyDUL5jfUIRbJGnIGrs/ZXHxbfbz2to87LIF+IYJ4ifAb2saMWboFv/KwiEGqqAJX
         iongaNApHq8e4wr5xFdHIE3YL+quI9UvX59fc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:from:to:in-reply-to:content-type
         :content-transfer-encoding:mime-version:subject:date:references
         :x-mailer;
        b=BDjpYJD+PvgzilByU4HMi2ST8vxijxAcMIf6K/a/fH1ASwijtKl6MEN+EjQWba4AAf
         /6oqYjkEzhQR/FpTxqwWUXi34kNIBShGXDWBtLlwp3RiVOaGv7KT92MzvqkqX1Bcr/e3
         zKcipwp4LYhxKT0utjZrSnkDKQe9tRmO+hGPI=
Received: by 10.90.86.9 with SMTP id j9mr464615agb.38.1216160074248;
        Tue, 15 Jul 2008 15:14:34 -0700 (PDT)
Received: from ?192.168.2.6? ( [96.245.76.52])
        by mx.google.com with ESMTPS id 38sm590176aga.13.2008.07.15.15.14.33
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Tue, 15 Jul 2008 15:14:33 -0700 (PDT)
Message-Id: <7A04AEE6-6697-417D-8E12-50986437597D@gmail.com>
From: Ronald Rudy <ronchalant@gmail.com>
To: java-user@lucene.apache.org
In-Reply-To: <Pine.LNX.4.62.0807151343310.18025@radix.cryptio.net>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: Boolean expression for no terms OR matching a wildcard
Date: Tue, 15 Jul 2008 18:14:31 -0400
References: <F28D06AF-4268-4854-9B59-4A2D0879FAD8@gmail.com> <d31a84170807140604u595b4883i8a26f404252c205e@mail.gmail.com> <Pine.LNX.4.62.0807151343310.18025@radix.cryptio.net>
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks Chris (or if you prefer, Hoss) - I will definitely try that for  
matching no docs, but one of the problems I'm having is that I'm  
indexing multiple terms for one field and I need ALL the terms to  
match it.

Maybe this is easier ... suppose what I'm indexing is a phone number,  
and there are multiple phone numbers for what I'm indexing under the  
same field (phone) and I want the wildcard query to match only records  
that have either no phone numbers at all OR where ALL phone numbers  
are in a specific area code (e.g. 800* would match all in the 800 area  
code).

I would want something like

+phone:800*

but I want this query to ALSO exclude any hits that have any records  
that DON'T match the wildcard ... so if a record has an 800* number  
AND a 900* number I don't want it to be in the results..

-Ron


On Jul 15, 2008, at 4:47 PM, Chris Hostetter wrote:

>
> Assuming i understand your question: the fact that your first clause  
> is a
> wildcard query is irrelevant, to generalize your request you want a  
> way to
> query for all docs which either match some sub query, or have no  
> terms in
> the field at all.  to find all docs with no terms for a given field,  
> you
> need to search for all docs (MatchAllDocs), then exclude the docs that
> have a value for
> thatfield -- which is easy to do using a ConstantScoreRangeQuery  
> where the
> lower and upper bounds are both null.
>
> essentially you want something like...
>
>   myfield:abc*123  (+MatchAllDocsQuery -myfield:[* TO *])
>
> (except you'll have to construct the MatchAllDocsQuery and the two
> BooleanQueries yourself)
>
>
> -Hoss
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34977-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 15 22:38:03 2008
Return-Path: <java-user-return-34977-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99091 invoked from network); 15 Jul 2008 22:38:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Jul 2008 22:38:03 -0000
Received: (qmail 77220 invoked by uid 500); 15 Jul 2008 22:37:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77189 invoked by uid 500); 15 Jul 2008 22:37:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77178 invoked by uid 99); 15 Jul 2008 22:37:56 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Jul 2008 15:37:56 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [196.25.240.81] (HELO ctb-mesg-1-3.saix.net) (196.25.240.81)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Jul 2008 22:37:00 +0000
Received: from [192.168.0.2] (dsl-243-250-24.telkomadsl.co.za [41.243.250.24])
	by ctb-mesg-1-3.saix.net (Postfix) with ESMTP id 744B5B18F
	for <java-user@lucene.apache.org>; Wed, 16 Jul 2008 00:37:16 +0200 (SAST)
Message-ID: <487D2676.7050102@stimulussoft.com>
Date: Wed, 16 Jul 2008 00:36:38 +0200
From: Jamie <jamie@stimulussoft.com>
User-Agent: Thunderbird 2.0.0.14 (Windows/20080421)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Lucene & XFile interface
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi there

I am trying to use YANFS (see https://yanfs.dev.java.net/) to allow 
administrators to configure Lucene index that is accessible via NFS on a 
remote drive. Is there a way to easily modify lucene such that when it 
reads / writes from the Index it uses the XFile  object instead of File? 
In this way, there is a lot more flexibility on where the index can be 
stored (without having to rely on operating system mount points). Is it 
correct to subclass org.apache.lucene.store.Directory for this purpose? 
Are there any other considerations that one should bear in mind?

Thanks in advance

Jamie



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34978-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 15 23:04:41 2008
Return-Path: <java-user-return-34978-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 23906 invoked from network); 15 Jul 2008 23:04:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Jul 2008 23:04:41 -0000
Received: (qmail 2612 invoked by uid 500); 15 Jul 2008 23:04:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2580 invoked by uid 500); 15 Jul 2008 23:04:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2565 invoked by uid 99); 15 Jul 2008 23:04:35 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Jul 2008 16:04:35 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [203.217.22.128] (HELO web1.nuix.com.au) (203.217.22.128)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Jul 2008 23:03:42 +0000
Received: from [192.168.222.60] (unknown [192.168.222.60])
	by web1.nuix.com.au (Postfix) with ESMTP id 7B2D14ED89F
	for <java-user@lucene.apache.org>; Wed, 16 Jul 2008 09:03:34 +1000 (EST)
Message-ID: <487D2CE7.7080508@nuix.com>
Date: Wed, 16 Jul 2008 09:04:07 +1000
From: Daniel Noll <daniel@nuix.com>
Organization: NUIX Pty Limited
User-Agent: Thunderbird 2.0.0.14 (Windows/20080421)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: MoreLikeThis from a field with a specific value
References: <18460696.post@talk.nabble.com>
In-Reply-To: <18460696.post@talk.nabble.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

martinoleary wrote:
> Hi there... 
> 
> im trying to get MoreLikeThis documents from my lucene index given a
> sentence... just one line of text lets say... but i also want to get the
> returned results only where a field has a specific value.... 
> 
> so for example if i have my index and it contains a categoryId and
> content... i would like to get results where content is like blah blah blah
> and categoryId = 1 or 2.. etc... 
> 
> my more like this like method is returning something like this:
> content:blah content:blah content:blah +categoryId:2
> 
> but when this is run, its returning EVERYTHING from this category....

Not surprising at all.  This is what you actually want:

+(content:blah content:blah content:blah) +categoryId:2

Your original query's only REQUIRED constraint was that it match the 
category.

Daniel


-- 
Daniel Noll

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34979-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 16 00:55:50 2008
Return-Path: <java-user-return-34979-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 6221 invoked from network); 16 Jul 2008 00:55:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Jul 2008 00:55:49 -0000
Received: (qmail 88249 invoked by uid 500); 16 Jul 2008 00:55:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88197 invoked by uid 500); 16 Jul 2008 00:55:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88186 invoked by uid 99); 16 Jul 2008 00:55:42 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 15 Jul 2008 17:55:42 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 Jul 2008 00:54:48 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KIvIV-0008Q6-IF
	for java-user@lucene.apache.org; Tue, 15 Jul 2008 17:55:11 -0700
Message-ID: <18478069.post@talk.nabble.com>
Date: Tue, 15 Jul 2008 17:55:11 -0700 (PDT)
From: John Patterson <jdp2000@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Mixing non scored an scored queries
In-Reply-To: <3BB7A550-A0A4-4451-B1BA-9D0E3CA96AAF@gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: jdp2000@gmail.com
References: <18460018.post@talk.nabble.com> <DD0FDC75-113E-4951-AE08-77FFE43CAC66@gmail.com> <c68e39170807150944s62ec4735xbff9b7d286b0c148@mail.gmail.com> <3BB7A550-A0A4-4451-B1BA-9D0E3CA96AAF@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org




Karl Wettin wrote:
> 
> 
>> Or just set the boost to zero on the individual filter fields, or on
>> the whole filter expression.
>>
>> +(my query) +(filter1 OR filter2 AND filter3)^0
> 
> 

That sounds perfect!  I thought that boosts would be multiplied together to
give 0 for the whole expression.  But I never looked into it.  So thanks
again.

I'll try this during the week and post my results.

John
-- 
View this message in context: http://www.nabble.com/Mixing-non-scored-an-scored-queries-tp18460018p18478069.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34980-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 16 08:44:30 2008
Return-Path: <java-user-return-34980-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69726 invoked from network); 16 Jul 2008 08:44:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Jul 2008 08:44:30 -0000
Received: (qmail 81092 invoked by uid 500); 16 Jul 2008 08:44:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81058 invoked by uid 500); 16 Jul 2008 08:44:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 6958 invoked by uid 99); 16 Jul 2008 04:26:20 -0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of SRS0=U5fpfO=X4=lucasmail.org=paul@yourhostingaccount.com designates 65.254.253.90 as permitted sender)
X-EN-OrigOutIP: 10.1.18.3
X-EN-IMPSID: qUNg1Z00103yUm20000000
Message-Id: <81093FC6-B5AE-4669-B912-525379D22A43@lucasmail.org>
From: "Paul J. Lucas" <paul@lucasmail.org>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v928.1)
Subject: Interrupting a query
Date: Tue, 15 Jul 2008 21:22:36 -0700
X-Mailer: Apple Mail (2.928.1)
X-EN-UserInfo: 19b3ee6e8bc35660ab25150f3ce1009e:104eb4694f5dc54e252b420fd863a3b6
X-EN-AuthUser: paul@pauljlucas.org
Sender:  "Paul J. Lucas" <paul@lucasmail.org>
X-EN-OrigIP: 98.210.152.178
X-EN-OrigHost: c-98-210-152-178.hsd1.ca.comcast.net
X-Virus-Checked: Checked by ClamAV on apache.org

If a complicated query is running in a Thread, how does Lucene respond  
to Thread.interrupt()?  I want to be able to interrupt an in-progress  
query.

- Paul

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34981-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 16 08:59:37 2008
Return-Path: <java-user-return-34981-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80843 invoked from network); 16 Jul 2008 08:59:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Jul 2008 08:59:37 -0000
Received: (qmail 98393 invoked by uid 500); 16 Jul 2008 08:59:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98363 invoked by uid 500); 16 Jul 2008 08:59:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98352 invoked by uid 99); 16 Jul 2008 08:59:31 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 Jul 2008 01:59:31 -0700
X-ASF-Spam-Status: No, hits=-2.0 required=10.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [64.18.3.98] (HELO exprod8og109.obsmtp.com) (64.18.3.98)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 16 Jul 2008 08:58:37 +0000
Received: from source ([193.201.197.58]) by exprod8ob109.postini.com ([64.18.7.12]) with SMTP;
	Wed, 16 Jul 2008 01:58:56 PDT
X-MimeOLE: Produced By Microsoft Exchange V6.5
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C8E722.2D2B9CC3"
x-cr-puzzleid: {36774A0A-5810-48AD-A683-7F5483881705}
Content-class: urn:content-classes:message
x-cr-hashedpuzzle: AOB5 AQYf BoGE Brf2 EoP6 EqQE EzET F1eS GHqI GMes G2u+ HXB4 HgPM IhvS JPBH KORa;1;agBhAHYAYQAtAHUAcwBlAHIAQABsAHUAYwBlAG4AZQAuAGEAcABhAGMAaABlAC4AbwByAGcA;Sosha1_v1;7;{36774A0A-5810-48AD-A683-7F5483881705};YQBhAG0AaQByAC4AeQBhAHMAZQBlAG4AQABnAGwAbwBiAGEAbABkAGEAdABhAHAAbwBpAG4AdAAuAGMAbwBtAA==;Wed, 16 Jul 2008 08:58:48 GMT;QQBjAGMAZQBuAHQAIABJAG4AcwBlAG4AcwBpAHQAaQB2AGUAIABTAGUAYQByAGMAaAA=
Subject: Accent Insensitive Search
Date: Wed, 16 Jul 2008 09:58:48 +0100
Message-ID: <39F273ED33612448863A19BBC1FBCFA003078843@ms2.lsc.net>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Accent Insensitive Search
Thread-Index: Acjmk73xugAnPtfqRVeeuGeV9LsEIQAAKuVQ
References: <200807141714.m6EHEKel010637@spwiki.spsoftware.com> <a7f27bc30807150154s1d970049l8e1a9c1455a2fb92@mail.gmail.com> <7FD5A172-E944-4424-B75D-9E937B65B92B@gmail.com> <7E47FD4D-465A-4E1A-9EDB-6953619FBFF8@ehatchersolutions.com>
From: <Aamir.Yaseen@globaldatapoint.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01C8E722.2D2B9CC3
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

Hi All,

I need to implememnt Accent Insensitive Searchin my application.

=20

Simple example is Krak=F3w search should also bring Krakow also in =
search results.

=20

I have seen many threads discussing sloution with SOLR, But I dont want =
to use SOLR in my application for only this feature.

=20

Any suggessionas?

=20

=20

Regards,

Aamir Yaseen


------_=_NextPart_001_01C8E722.2D2B9CC3--

From java-user-return-34982-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 16 09:02:20 2008
Return-Path: <java-user-return-34982-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81981 invoked from network); 16 Jul 2008 09:02:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Jul 2008 09:02:20 -0000
Received: (qmail 2824 invoked by uid 500); 16 Jul 2008 09:02:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2792 invoked by uid 500); 16 Jul 2008 09:02:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2781 invoked by uid 99); 16 Jul 2008 09:02:13 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 Jul 2008 02:02:13 -0700
X-ASF-Spam-Status: No, hits=2.8 required=10.0
	tests=MIME_BASE64_BLANKS,MIME_BASE64_TEXT,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of helloanand@gmail.com designates 64.233.166.176 as permitted sender)
Received: from [64.233.166.176] (HELO py-out-1112.google.com) (64.233.166.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 Jul 2008 09:01:20 +0000
Received: by py-out-1112.google.com with SMTP id z74so3198224pyg.9
        for <java-user@lucene.apache.org>; Wed, 16 Jul 2008 02:01:43 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:x-rim-org-msg-ref-id
         :message-id:content-transfer-encoding:reply-to:x-priority
         :sensitivity:importance:to:subject:from:date:content-type
         :mime-version;
        bh=jnjoUiYtIXh/Aa3PZZ0ypht6hCogtDiiM0FHsF5bi/Q=;
        b=fBKN+WiTqd/LXg0LOSRdAARCnpOjYAzxUXxX972rpCJRo0KBx7hh3X1H47TVUSDNUt
         UOFtytCYO/y5YTOtZuLCuzTgE2iJiIPb7M83eTwF9G2xOjkDn2bExCPiVztpvI/1dE5y
         7gFollAkxw1O6Gs4pRIGGHVZkakMLqbcWBgZg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=x-rim-org-msg-ref-id:message-id:content-transfer-encoding:reply-to
         :x-priority:sensitivity:importance:to:subject:from:date:content-type
         :mime-version;
        b=DvPti+le8iqsCXmeTZfZoZhR4jH995wKz7kWwmdackAdLqkBt/lUBhd1CVe8IcWiFG
         xENZ88XTann568Jo3fX7hSNwdSIu9JT0hHfIaNY97XClJ+Yrm23Vziri6VYF8hEsOmaJ
         NjM/UZvYtvN4XgXZjTgCum1EEuZs643+kiJFc=
Received: by 10.64.232.16 with SMTP id e16mr21954852qbh.86.1216198903610;
        Wed, 16 Jul 2008 02:01:43 -0700 (PDT)
Received: from bda046.bisx.produk.on.blackberry ( [216.9.253.174])
        by mx.google.com with ESMTPS id k7sm1526932qba.3.2008.07.16.02.01.42
        (version=SSLv3 cipher=RC4-MD5);
        Wed, 16 Jul 2008 02:01:43 -0700 (PDT)
X-rim-org-msg-ref-id:1399548182
Message-ID:<1399548182-1216198901-cardhu_decombobulator_blackberry.rim.net-249399229-@bxe011.bisx.produk.on.blackberry>
Content-Transfer-Encoding: base64
Reply-To: helloanand@gmail.com
X-Priority: Normal
Sensitivity: Normal
Importance: Normal
To: java-user@lucene.apache.org
Subject: Re: Accent Insensitive Search
From: "Anand Jain" <helloanand@gmail.com>
Date: Wed, 16 Jul 2008 09:01:30 +0000
Content-Type: text/plain; charset="Windows-1252"
MIME-Version: 1.0
X-Virus-Checked: Checked by ClamAV on apache.org

WW91IG5lZWQgdG8gaW5jbHVkZSBJU09MYXRpbkZpbHRlciBpbiB5b3VyIGFuYWx5emVyLg0KDQpU
aGF0IHdpbGwgY29udmVydCBhbGwgYWNjZW50ZWQgY2hhcmFjdGVycyB0byB0aGVpciBub24tYWNj
ZW50ZWQgdmVyc2lvbi4NCg0KLS0tLS0tT3JpZ2luYWwgTWVzc2FnZS0tLS0tLQ0KRnJvbTogQWFt
aXIuWWFzZWVuQGdsb2JhbGRhdGFwb2ludC5jb20NClRvOiBqYXZhLXVzZXJAbHVjZW5lLmFwYWNo
ZS5vcmcNClJlcGx5VG86IGphdmEtdXNlckBsdWNlbmUuYXBhY2hlLm9yZw0KU2VudDogSnVsIDE2
LCAyMDA4IDI6MjggUE0NClN1YmplY3Q6IEFjY2VudCBJbnNlbnNpdGl2ZSBTZWFyY2gNCg0KSGkg
QWxsLA0KDQpJIG5lZWQgdG8gaW1wbGVtZW1udCBBY2NlbnQgSW5zZW5zaXRpdmUgU2VhcmNoaW4g
bXkgYXBwbGljYXRpb24uDQoNCiANCg0KU2ltcGxlIGV4YW1wbGUgaXMgS3Jha/N3IHNlYXJjaCBz
aG91bGQgYWxzbyBicmluZyBLcmFrb3cgYWxzbyBpbiBzZWFyY2ggcmVzdWx0cy4NCg0KIA0KDQpJ
IGhhdmUgc2VlbiBtYW55IHRocmVhZHMgZGlzY3Vzc2luZyBzbG91dGlvbiB3aXRoIFNPTFIsIEJ1
dCBJIGRvbnQgd2FudCB0byB1c2UgU09MUiBpbiBteSBhcHBsaWNhdGlvbiBmb3Igb25seSB0aGlz
IGZlYXR1cmUuDQoNCiANCg0KQW55IHN1Z2dlc3Npb25hcz8NCg0KIA0KDQogDQoNClJlZ2FyZHMs
DQoNCkFhbWlyIFlhc2Vlbg0KDQoNCg0K



From java-user-return-34983-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 16 09:03:33 2008
Return-Path: <java-user-return-34983-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82450 invoked from network); 16 Jul 2008 09:03:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Jul 2008 09:03:33 -0000
Received: (qmail 5699 invoked by uid 500); 16 Jul 2008 09:03:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5554 invoked by uid 500); 16 Jul 2008 09:03:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5543 invoked by uid 99); 16 Jul 2008 09:03:26 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 Jul 2008 02:03:26 -0700
X-ASF-Spam-Status: No, hits=-2.0 required=10.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [64.18.3.92] (HELO exprod8og106.obsmtp.com) (64.18.3.92)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 16 Jul 2008 09:02:32 +0000
Received: from source ([193.201.197.58]) by exprod8ob106.postini.com ([64.18.7.12]) with SMTP;
	Wed, 16 Jul 2008 02:02:54 PDT
X-MimeOLE: Produced By Microsoft Exchange V6.5
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C8E722.BB63D084"
x-cr-puzzleid: {53A8800A-474C-483D-9E8C-1B2BD3AD226E}
Content-class: urn:content-classes:message
x-cr-hashedpuzzle: A/6M BGNl BUK2 CKgO Cnl9 DBr4 DI61 DtiU DwGN EbMb FH/s FuxY GYUL HLDC IQe7 Ji/4;1;agBhAHYAYQAtAHUAcwBlAHIAQABsAHUAYwBlAG4AZQAuAGEAcABhAGMAaABlAC4AbwByAGcA;Sosha1_v1;7;{53A8800A-474C-483D-9E8C-1B2BD3AD226E};YQBhAG0AaQByAC4AeQBhAHMAZQBlAG4AQABnAGwAbwBiAGEAbABkAGEAdABhAHAAbwBpAG4AdAAuAGMAbwBtAA==;Wed, 16 Jul 2008 09:02:50 GMT;QQBjAGMAZQBuAHQAIABJAG4AcwBlAG4AcwBpAHQAaQB2AGUAIABTAGUAYQByAGMAaAA=
Subject: Accent Insensitive Search
Date: Wed, 16 Jul 2008 10:02:50 +0100
Message-ID: <39F273ED33612448863A19BBC1FBCFA003078848@ms2.lsc.net>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Accent Insensitive Search
Thread-Index: Acjmk73xugAnPtfqRVeeuGeV9LsEIQAAKuVQACOPfFA=
From: <Aamir.Yaseen@globaldatapoint.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01C8E722.BB63D084
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

Hi All,

I need to implememnt Accent Insensitive Searchin my application.

=20

Simple example is Krak=F3w search should also bring Krakow also in =
search results.

=20

I have seen many threads discussing sloution with SOLR, But I dont want =
to use SOLR in my application for only this feature.

=20

Any suggessionas?

=20

=20

Regards,

Aamir Yaseen


------_=_NextPart_001_01C8E722.BB63D084--

From java-user-return-34984-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 16 09:19:09 2008
Return-Path: <java-user-return-34984-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86264 invoked from network); 16 Jul 2008 09:19:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Jul 2008 09:19:09 -0000
Received: (qmail 22293 invoked by uid 500); 16 Jul 2008 09:19:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22263 invoked by uid 500); 16 Jul 2008 09:19:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 22252 invoked by uid 99); 16 Jul 2008 09:19:03 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 Jul 2008 02:19:03 -0700
X-ASF-Spam-Status: No, hits=-4.0 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [64.18.3.84] (HELO exprod8og102.obsmtp.com) (64.18.3.84)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 16 Jul 2008 09:18:09 +0000
Received: from source ([193.201.197.58]) by exprod8ob102.postini.com ([64.18.7.12]) with SMTP;
	Wed, 16 Jul 2008 02:18:22 PDT
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Accent Insensitive Search
Date: Wed, 16 Jul 2008 10:15:52 +0100
Message-ID: <39F273ED33612448863A19BBC1FBCFA003078851@ms2.lsc.net>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Accent Insensitive Search
Thread-Index: AcjnIqYGa/MXsex4QKiugAXxHJBx4gAAb7sA
References: <1399548182-1216198901-cardhu_decombobulator_blackberry.rim.net-249399229-@bxe011.bisx.produk.on.blackberry>
From: <Aamir.Yaseen@globaldatapoint.com>
To: <java-user@lucene.apache.org>,
	<helloanand@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

I need to search reverse as well, so shall I apply filter while creating =
index and then search using same ISOLatinFilter?

Regards,
Aamir Yaseen


-----Original Message-----
From: Anand Jain [mailto:helloanand@gmail.com]=20
Sent: 16 July 2008 10:02 AM
To: java-user@lucene.apache.org
Subject: Re: Accent Insensitive Search

You need to include ISOLatinFilter in your analyzer.

That will convert all accented characters to their non-accented version.

------Original Message------
From: Aamir.Yaseen@globaldatapoint.com
To: java-user@lucene.apache.org
ReplyTo: java-user@lucene.apache.org
Sent: Jul 16, 2008 2:28 PM
Subject: Accent Insensitive Search

Hi All,

I need to implememnt Accent Insensitive Searchin my application.

=20

Simple example is Krak=F3w search should also bring Krakow also in =
search results.

=20

I have seen many threads discussing sloution with SOLR, But I dont want =
to use SOLR in my application for only this feature.

=20

Any suggessionas?

=20

=20

Regards,

Aamir Yaseen




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34985-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 16 09:22:30 2008
Return-Path: <java-user-return-34985-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89734 invoked from network); 16 Jul 2008 09:22:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Jul 2008 09:22:29 -0000
Received: (qmail 29246 invoked by uid 500); 16 Jul 2008 09:22:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29006 invoked by uid 500); 16 Jul 2008 09:22:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28984 invoked by uid 99); 16 Jul 2008 09:22:21 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 Jul 2008 02:22:21 -0700
X-ASF-Spam-Status: No, hits=2.8 required=10.0
	tests=MIME_BASE64_BLANKS,MIME_BASE64_TEXT,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of helloanand@gmail.com designates 64.233.166.177 as permitted sender)
Received: from [64.233.166.177] (HELO py-out-1112.google.com) (64.233.166.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 Jul 2008 09:21:27 +0000
Received: by py-out-1112.google.com with SMTP id z74so3201174pyg.9
        for <java-user@lucene.apache.org>; Wed, 16 Jul 2008 02:21:51 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:x-rim-org-msg-ref-id
         :message-id:content-transfer-encoding:reply-to:x-priority
         :sensitivity:importance:to:subject:from:date:content-type
         :mime-version;
        bh=iZmWlf2eOlH8PAQRqC76PaZnC8Q//Dg6pGdJodcNdN4=;
        b=SL+Iz6UE9UL04ykzpb4cOCzdEgZXwSe2H92ptlpxXSCM8PgPaHjmNl6XWpv8B8PgrA
         UgDaGrNpFFbEmQrOJR/vpY9bJHF/9jP5ktEGB5/ker3aQpp3qtlZIC7TG6++/bgmF7CM
         D/eH8EHUTM06mr5maDOEicKuR1E4ys40FIxsQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=x-rim-org-msg-ref-id:message-id:content-transfer-encoding:reply-to
         :x-priority:sensitivity:importance:to:subject:from:date:content-type
         :mime-version;
        b=gTzBZcsjqOrjLwYG0yoxcJ63i+WeO2khqeSheV43RYXW9xvhehTmS+e0XjI9NZPsHR
         /6mu1QM1zsiPgtQD/HTKxlG/ykhm0QpPCida4LNpwMtAS6KvmeVcJPbUwl+C0OxPNif7
         xa9ux3bIsiU7lc9ZGqS3WSPfoQZhcNcNi7CVk=
Received: by 10.65.163.8 with SMTP id q8mr21936485qbo.32.1216200111170;
        Wed, 16 Jul 2008 02:21:51 -0700 (PDT)
Received: from bda046.bisx.produk.on.blackberry ( [216.9.253.174])
        by mx.google.com with ESMTPS id s31sm1607272qbs.11.2008.07.16.02.21.49
        (version=SSLv3 cipher=RC4-MD5);
        Wed, 16 Jul 2008 02:21:50 -0700 (PDT)
X-rim-org-msg-ref-id:1769101562
Message-ID:<1769101562-1216200108-cardhu_decombobulator_blackberry.rim.net-1347200121-@bxe011.bisx.produk.on.blackberry>
Content-Transfer-Encoding: base64
Reply-To: helloanand@gmail.com
X-Priority: Normal
Sensitivity: Normal
Importance: Normal
To: Aamir.Yaseen@globaldatapoint.com,java-user@lucene.apache.org
Subject: Re: Accent Insensitive Search
From: "Anand Jain" <helloanand@gmail.com>
Date: Wed, 16 Jul 2008 09:21:37 +0000
Content-Type: text/plain; charset="Windows-1252"
MIME-Version: 1.0
X-Virus-Checked: Checked by ClamAV on apache.org

WWVzIHlvdSdsbCBuZWVkIHRvIGRvIGl0IGJvdGggdGhlIHRpbWVzLg0KLS0tLS0tT3JpZ2luYWwg
TWVzc2FnZS0tLS0tLQ0KRnJvbTogQWFtaXIuWWFzZWVuQGdsb2JhbGRhdGFwb2ludC5jb20NClRv
OiBqYXZhLXVzZXJAbHVjZW5lLmFwYWNoZS5vcmcNClRvOiBoZWxsb2FuYW5kQGdtYWlsLmNvbQ0K
U2VudDogSnVsIDE2LCAyMDA4IDI6NDUgUE0NClN1YmplY3Q6IFJFOiBBY2NlbnQgSW5zZW5zaXRp
dmUgU2VhcmNoDQoNCkkgbmVlZCB0byBzZWFyY2ggcmV2ZXJzZSBhcyB3ZWxsLCBzbyBzaGFsbCBJ
IGFwcGx5IGZpbHRlciB3aGlsZSBjcmVhdGluZyBpbmRleCBhbmQgdGhlbiBzZWFyY2ggdXNpbmcg
c2FtZSBJU09MYXRpbkZpbHRlcj8NCg0KUmVnYXJkcywNCkFhbWlyIFlhc2Vlbg0KDQoNCi0tLS0t
T3JpZ2luYWwgTWVzc2FnZS0tLS0tDQpGcm9tOiBBbmFuZCBKYWluIFttYWlsdG86aGVsbG9hbmFu
ZEBnbWFpbC5jb21dIA0KU2VudDogMTYgSnVseSAyMDA4IDEwOjAyIEFNDQpUbzogamF2YS11c2Vy
QGx1Y2VuZS5hcGFjaGUub3JnDQpTdWJqZWN0OiBSZTogQWNjZW50IEluc2Vuc2l0aXZlIFNlYXJj
aA0KDQpZb3UgbmVlZCB0byBpbmNsdWRlIElTT0xhdGluRmlsdGVyIGluIHlvdXIgYW5hbHl6ZXIu
DQoNClRoYXQgd2lsbCBjb252ZXJ0IGFsbCBhY2NlbnRlZCBjaGFyYWN0ZXJzIHRvIHRoZWlyIG5v
bi1hY2NlbnRlZCB2ZXJzaW9uLg0KDQotLS0tLS1PcmlnaW5hbCBNZXNzYWdlLS0tLS0tDQpGcm9t
OiBBYW1pci5ZYXNlZW5AZ2xvYmFsZGF0YXBvaW50LmNvbQ0KVG86IGphdmEtdXNlckBsdWNlbmUu
YXBhY2hlLm9yZw0KUmVwbHlUbzogamF2YS11c2VyQGx1Y2VuZS5hcGFjaGUub3JnDQpTZW50OiBK
dWwgMTYsIDIwMDggMjoyOCBQTQ0KU3ViamVjdDogQWNjZW50IEluc2Vuc2l0aXZlIFNlYXJjaA0K
DQpIaSBBbGwsDQoNCkkgbmVlZCB0byBpbXBsZW1lbW50IEFjY2VudCBJbnNlbnNpdGl2ZSBTZWFy
Y2hpbiBteSBhcHBsaWNhdGlvbi4NCg0KIA0KDQpTaW1wbGUgZXhhbXBsZSBpcyBLcmFr83cgc2Vh
cmNoIHNob3VsZCBhbHNvIGJyaW5nIEtyYWtvdyBhbHNvIGluIHNlYXJjaCByZXN1bHRzLg0KDQog
DQoNCkkgaGF2ZSBzZWVuIG1hbnkgdGhyZWFkcyBkaXNjdXNzaW5nIHNsb3V0aW9uIHdpdGggU09M
UiwgQnV0IEkgZG9udCB3YW50IHRvIHVzZSBTT0xSIGluIG15IGFwcGxpY2F0aW9uIGZvciBvbmx5
IHRoaXMgZmVhdHVyZS4NCg0KIA0KDQpBbnkgc3VnZ2Vzc2lvbmFzPw0KDQogDQoNCiANCg0KUmVn
YXJkcywNCg0KQWFtaXIgWWFzZWVuDQoNCg0KDQoNCg==



From java-user-return-34986-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 16 12:15:38 2008
Return-Path: <java-user-return-34986-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81391 invoked from network); 16 Jul 2008 12:15:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Jul 2008 12:15:38 -0000
Received: (qmail 57181 invoked by uid 500); 16 Jul 2008 12:15:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56960 invoked by uid 500); 16 Jul 2008 12:15:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56949 invoked by uid 99); 16 Jul 2008 12:15:30 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 Jul 2008 05:15:30 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.119] (HELO spunkymail-a7.g.dreamhost.com) (208.97.132.119)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 Jul 2008 12:14:33 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a7.g.dreamhost.com (Postfix) with ESMTP id 2B3165B4ED
	for <java-user@lucene.apache.org>; Wed, 16 Jul 2008 05:14:26 -0700 (PDT)
Message-Id: <CFB5B993-0481-4961-8F17-E3DB3CD2E35D@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <81093FC6-B5AE-4669-B912-525379D22A43@lucasmail.org>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: Interrupting a query
Date: Wed, 16 Jul 2008 08:14:25 -0400
References: <81093FC6-B5AE-4669-B912-525379D22A43@lucasmail.org>
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org

See https://issues.apache.org/jira/browse/LUCENE-997

-Grant

On Jul 16, 2008, at 12:22 AM, Paul J. Lucas wrote:

> If a complicated query is running in a Thread, how does Lucene  
> respond to Thread.interrupt()?  I want to be able to interrupt an in- 
> progress query.
>
> - Paul
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

--------------------------
Grant Ingersoll
http://www.lucidimagination.com

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ








---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34987-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 16 13:34:52 2008
Return-Path: <java-user-return-34987-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 39972 invoked from network); 16 Jul 2008 13:34:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Jul 2008 13:34:52 -0000
Received: (qmail 9343 invoked by uid 500); 16 Jul 2008 13:34:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9311 invoked by uid 500); 16 Jul 2008 13:34:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9300 invoked by uid 99); 16 Jul 2008 13:34:44 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 Jul 2008 06:34:44 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 72.14.220.156 as permitted sender)
Received: from [72.14.220.156] (HELO fg-out-1718.google.com) (72.14.220.156)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 Jul 2008 13:33:51 +0000
Received: by fg-out-1718.google.com with SMTP id l27so3104570fgb.27
        for <java-user@lucene.apache.org>; Wed, 16 Jul 2008 06:34:14 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=/NxcKLaM+LRo8E4Hy8b2d5+Xc+2Bfz8WOUViYoRTESg=;
        b=F7Lg0VdrfRD6bMwzp7owUV4qA3OfOi8eCq68Jw0Zgd9MEw1rnvViTO/mSm/8BG2IcB
         OCfZK0P2b0rZH/wgrdl9S5pk6lQlL0hfEC5JyQd3ANTKqGiUXM7hBy8/ZBFPU1b8oxEN
         B4DmHlR6EwyGAxRK5vtRicflRxxk4PxBEVQ/U=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=hZy2z09MyPfo5KjViaffJJXYiuCznkte2r+PfGJa1j0WIqCOdciQ/etj8SKjcdcyqS
         awV0YwDEVS5pzSq+0aOEg/Ndwvy/Xyfk6F3uCKMjw/maPAJgURIkie3QEW8BMaEC7UsP
         +p+sZ7zdZcWQ79r8LDgLZOvqtPnOB8XtX7Zk4=
Received: by 10.86.60.14 with SMTP id i14mr2035362fga.75.1216215254260;
        Wed, 16 Jul 2008 06:34:14 -0700 (PDT)
Received: by 10.86.33.20 with HTTP; Wed, 16 Jul 2008 06:34:14 -0700 (PDT)
Message-ID: <359a92830807160634u7c39e20i678df3c67de38488@mail.gmail.com>
Date: Wed, 16 Jul 2008 09:34:14 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Accent Insensitive Search
In-Reply-To: <39F273ED33612448863A19BBC1FBCFA003078848@ms2.lsc.net>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_14845_22772641.1216215254266"
References: <39F273ED33612448863A19BBC1FBCFA003078848@ms2.lsc.net>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_14845_22772641.1216215254266
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

This topic has been discussed many times on this list, so you'll find
far more information if you search the mail archive than I can remember <G>=
.

But no, you don't have to use SOLR. SOLR is built on Lucene, and as far as
I know all the analyzers available to SOLR are available in Lucene.

Basically, you just have to use the right analyzer at index and search time=
.
You
might try looking over the Lucene website and the wiki.

Best
Erick



On Wed, Jul 16, 2008 at 5:02 AM, <Aamir.Yaseen@globaldatapoint.com> wrote:

> Hi All,
>
> I need to implememnt Accent Insensitive Searchin my application.
>
>
>
> Simple example is Krak=F3w search should also bring Krakow also in search
> results.
>
>
>
> I have seen many threads discussing sloution with SOLR, But I dont want t=
o
> use SOLR in my application for only this feature.
>
>
>
> Any suggessionas?
>
>
>
>
>
> Regards,
>
> Aamir Yaseen
>
>

------=_Part_14845_22772641.1216215254266--

From java-user-return-34988-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 16 13:42:16 2008
Return-Path: <java-user-return-34988-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 43843 invoked from network); 16 Jul 2008 13:42:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Jul 2008 13:42:15 -0000
Received: (qmail 23279 invoked by uid 500); 16 Jul 2008 13:42:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23241 invoked by uid 500); 16 Jul 2008 13:42:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23230 invoked by uid 99); 16 Jul 2008 13:42:08 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 Jul 2008 06:42:08 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: 194.109.24.35 is neither permitted nor denied by domain of karl.wettin@gmail.com)
Received: from [194.109.24.35] (HELO smtp-vbr15.xs4all.nl) (194.109.24.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 Jul 2008 13:41:14 +0000
Received: from kodapan.lan (memnon.xs4all.nl [82.93.70.124])
	by smtp-vbr15.xs4all.nl (8.13.8/8.13.8) with ESMTP id m6GDf6fH062952
	for <java-user@lucene.apache.org>; Wed, 16 Jul 2008 15:41:07 +0200 (CEST)
	(envelope-from karl.wettin@gmail.com)
Message-Id: <8209C912-8ABC-4D21-8ECA-5F02A4492479@gmail.com>
From: Karl Wettin <karl.wettin@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Scaling
Date: Wed, 16 Jul 2008 15:41:06 +0200
X-Mailer: Apple Mail (2.926)
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org

Is there some sort of a scaling strategies listing available? I think  
there is a Wiki page missing.

What are the typical promblems I'll encounter when distributing the  
search over multiple machines?

Do people split up their index per node or do they use the complete  
index and restrict what part to search in using filters? The latter  
would be good for the scores, right? Then how do I calculate the cost  
in speed for the score with better quality? I mean, splitting the  
index in two and searching on two machines using ParallelMultiSearcher  
probably means that I'll get something like 30% speed improvement and  
not 100%. Or?

Is there something to win by using multiple threads each restricted to  
a part each of the same index on a single machine, compared to a  
single thread? Or is it all I/O? That would mean there is something to  
gain if the index was on SSD or in RAM, right?


       karl

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34989-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 16 13:56:53 2008
Return-Path: <java-user-return-34989-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 57363 invoked from network); 16 Jul 2008 13:56:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Jul 2008 13:56:53 -0000
Received: (qmail 51378 invoked by uid 500); 16 Jul 2008 13:56:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 51344 invoked by uid 500); 16 Jul 2008 13:56:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 51329 invoked by uid 99); 16 Jul 2008 13:56:46 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 Jul 2008 06:56:46 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of SRS0=U5fpfO=X4=lucasmail.org=paul@yourhostingaccount.com designates 65.254.253.90 as permitted sender)
Received: from [65.254.253.90] (HELO mailout11.yourhostingaccount.com) (65.254.253.90)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 Jul 2008 13:55:38 +0000
Received: from mailscan02.yourhostingaccount.com ([10.1.15.2] helo=mailscan02.yourhostingaccount.com)
	by mailout11.yourhostingaccount.com with esmtp (Exim)
	id 1KJ7TD-0002uN-CV
	for java-user@lucene.apache.org; Wed, 16 Jul 2008 09:55:03 -0400
Received: from impout03.yourhostingaccount.com ([10.1.55.3] helo=impout03.yourhostingaccount.com)
	by mailscan02.yourhostingaccount.com with esmtp (Exim)
	id 1KJ7TC-0004VJ-Pq
	for java-user@lucene.apache.org; Wed, 16 Jul 2008 09:55:03 -0400
Received: from authsmtp03.yourhostingaccount.com ([10.1.18.3])
	by impout03.yourhostingaccount.com with NO UCE
	id qdv21Z00G03yUm20000000; Wed, 16 Jul 2008 09:55:02 -0400
X-EN-OrigOutIP: 10.1.18.3
X-EN-IMPSID: qdv21Z00G03yUm20000000
Received: from adsl-76-201-168-3.dsl.pltn13.sbcglobal.net ([76.201.168.3] helo=[10.0.1.203])
	by authsmtp03.yourhostingaccount.com with esmtpsa (TLSv1:AES128-SHA:128)
	(Exim)
	id 1KJ7TB-0004rI-UU
	for java-user@lucene.apache.org; Wed, 16 Jul 2008 09:55:02 -0400
Message-Id: <6D7AA29C-A7BF-4306-84DA-D7F5BEF593C9@lucasmail.org>
From: "Paul J. Lucas" <paul@lucasmail.org>
To: java-user@lucene.apache.org
In-Reply-To: <CFB5B993-0481-4961-8F17-E3DB3CD2E35D@apache.org>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v928.1)
Subject: Re: Interrupting a query
Date: Wed, 16 Jul 2008 06:54:52 -0700
References: <81093FC6-B5AE-4669-B912-525379D22A43@lucasmail.org> <CFB5B993-0481-4961-8F17-E3DB3CD2E35D@apache.org>
X-Mailer: Apple Mail (2.928.1)
X-EN-UserInfo: 19b3ee6e8bc35660ab25150f3ce1009e:104eb4694f5dc54e252b420fd863a3b6
X-EN-AuthUser: paul@pauljlucas.org
Sender:  "Paul J. Lucas" <paul@lucasmail.org>
X-EN-OrigIP: 76.201.168.3
X-EN-OrigHost: adsl-76-201-168-3.dsl.pltn13.sbcglobal.net
X-Virus-Checked: Checked by ClamAV on apache.org

That has nothing to do with interrupting a query at some arbitrary time.

- Paul


On Jul 16, 2008, at 5:14 AM, Grant Ingersoll wrote:

> See https://issues.apache.org/jira/browse/LUCENE-997
>
> -Grant
>
> On Jul 16, 2008, at 12:22 AM, Paul J. Lucas wrote:
>
>> If a complicated query is running in a Thread, how does Lucene  
>> respond to Thread.interrupt()?  I want to be able to interrupt an  
>> in-progress query.
>>
>> - Paul

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34990-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 16 14:02:12 2008
Return-Path: <java-user-return-34990-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63006 invoked from network); 16 Jul 2008 14:02:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Jul 2008 14:02:12 -0000
Received: (qmail 67263 invoked by uid 500); 16 Jul 2008 14:02:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67239 invoked by uid 500); 16 Jul 2008 14:02:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67228 invoked by uid 99); 16 Jul 2008 14:02:05 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 Jul 2008 07:02:05 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of glen.newton@gmail.com designates 209.85.198.232 as permitted sender)
Received: from [209.85.198.232] (HELO rv-out-0506.google.com) (209.85.198.232)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 Jul 2008 14:01:12 +0000
Received: by rv-out-0506.google.com with SMTP id f6so6402621rvb.5
        for <java-user@lucene.apache.org>; Wed, 16 Jul 2008 07:01:36 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references;
        bh=Ig/Gubza66/zfjLj5gFIyDlbYzUt3bOlpylRSl0u8uo=;
        b=X4VFtYwyDHWLcyUCbgj0UW5qf5e2gdy/HzGHNeqJQcPTzl2ur1pFT+AaD93iAWLLEG
         yIpYXkJyIXvUpUMK1nA2EDNzq5BmGsaLyYJ60C8GlK45gK5l9GCjUH95eo2++0CZJCgu
         6Gn5FT/gBr4HjSmvsApee8EQKUzdJnGoGfIyc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references;
        b=WaG6dgU8dZy9vvGYIJzT9UsX4DO/VOvd7e3kRhVc7fatTfqKOZNWGMJ6xUQ1+uBO4W
         49P7drCv/705Q27iW4P7IyfdbnDlcqk73QRrCa/FZ6VZT9TjavNPUIa3SgvPV707iH/l
         J+cLjaO+M062vrqn++4SzNceEjchXm0eBd05M=
Received: by 10.140.204.7 with SMTP id b7mr74098rvg.175.1216216896187;
        Wed, 16 Jul 2008 07:01:36 -0700 (PDT)
Received: by 10.141.27.13 with HTTP; Wed, 16 Jul 2008 07:01:36 -0700 (PDT)
Message-ID: <5e76f3840807160701t6fb80fa1gb4eff040b8d6c220@mail.gmail.com>
Date: Wed, 16 Jul 2008 10:01:36 -0400
From: "Glen Newton" <glen.newton@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Scaling
In-Reply-To: <8209C912-8ABC-4D21-8ECA-5F02A4492479@gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <8209C912-8ABC-4D21-8ECA-5F02A4492479@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

A subset of your questions are answered (or at least examined) in my
postings on multi-thread queries on a multiple-core single system:
http://zzzoot.blogspot.com/2008/06/simultaneous-threaded-query-lucene.html
http://zzzoot.blogspot.com/2008/06/lucene-concurrent-search-performance.html

-Glen

2008/7/16 Karl Wettin <karl.wettin@gmail.com>:
> Is there some sort of a scaling strategies listing available? I think there
> is a Wiki page missing.
>
> What are the typical promblems I'll encounter when distributing the search
> over multiple machines?
>
> Do people split up their index per node or do they use the complete index
> and restrict what part to search in using filters? The latter would be good
> for the scores, right? Then how do I calculate the cost in speed for the
> score with better quality? I mean, splitting the index in two and searching
> on two machines using ParallelMultiSearcher probably means that I'll get
> something like 30% speed improvement and not 100%. Or?
>
> Is there something to win by using multiple threads each restricted to a
> part each of the same index on a single machine, compared to a single
> thread? Or is it all I/O? That would mean there is something to gain if the
> index was on SSD or in RAM, right?
>
>
>      karl
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>



-- 

-

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34991-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 16 16:11:30 2008
Return-Path: <java-user-return-34991-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98005 invoked from network); 16 Jul 2008 16:11:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Jul 2008 16:11:30 -0000
Received: (qmail 16317 invoked by uid 500); 16 Jul 2008 16:11:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16282 invoked by uid 500); 16 Jul 2008 16:11:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16271 invoked by uid 99); 16 Jul 2008 16:11:22 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 Jul 2008 09:11:22 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [217.146.176.44] (HELO web26507.mail.ukl.yahoo.com) (217.146.176.44)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 16 Jul 2008 16:10:26 +0000
Received: (qmail 30850 invoked by uid 60001); 16 Jul 2008 16:09:49 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.fr;
  h=Received:X-Mailer:Date:From:Reply-To:Subject:To:Cc:MIME-Version:Content-Type:Message-ID;
  b=37tmAdaCj0i4XBKA+zq93rNk6xaGV5PPhY3mddaGK4Sig9edIpWKfRTm2MvNFAI/t4fcYbhCgIU1HbkLCZpw5Z3Bwzgmcq6EXL3QrRT73Z1p96B4HK94wlWVAbbO8iGxiuBtTJKFcADs2u7QPTj8lgo2tnHQqnVC03hLVvhXMCM=;
Received: from [193.49.212.129] by web26507.mail.ukl.yahoo.com via HTTP; Wed, 16 Jul 2008 16:09:49 GMT
X-Mailer: YahooMailWebService/0.7.218
Date: Wed, 16 Jul 2008 16:09:49 +0000 (GMT)
From: legrand thomas <thomaslegrand14@yahoo.fr>
Reply-To: thomaslegrand14@yahoo.fr
Subject: advanced WildcardQuery
To: java-user@lucene.apache.org
Cc: francois.vanhille@hotmail.com
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-1548433755-1216224589=:30615"
Message-ID: <515674.30615.qm@web26507.mail.ukl.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

--0-1548433755-1216224589=:30615
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable


Dear all,

I'd like to search on long titles (tokenized and stored) using the Wildcard=
Query. Considering the following example:

title=3D"pretty car for sale"=20

If I search for "pretty*", I get the document having this title. But it's n=
ot the case if I build a WilcardQuery with the term "pretty*car". I also wa=
nt to get this document when searching for "pretty*sale*". How should I do =
? Is it really possible ?

I use lucene 2.3.1.

Thanks in advance,

Thomas Legrand
=0A=0A=0A      ____________________________________________________________=
_________________ =0AEnvoyez avec Yahoo! Mail. Une boite mail plus intellig=
ente http://mail.yahoo.fr
--0-1548433755-1216224589=:30615--

From java-user-return-34992-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 16 17:12:48 2008
Return-Path: <java-user-return-34992-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 34444 invoked from network); 16 Jul 2008 17:12:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Jul 2008 17:12:48 -0000
Received: (qmail 1646 invoked by uid 500); 16 Jul 2008 17:12:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 1616 invoked by uid 500); 16 Jul 2008 17:12:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 1587 invoked by uid 99); 16 Jul 2008 17:12:36 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 Jul 2008 10:12:36 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 72.14.220.153 as permitted sender)
Received: from [72.14.220.153] (HELO fg-out-1718.google.com) (72.14.220.153)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 Jul 2008 17:11:40 +0000
Received: by fg-out-1718.google.com with SMTP id l27so3142020fgb.27
        for <java-user@lucene.apache.org>; Wed, 16 Jul 2008 10:12:03 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=5KLv1ijMjVy9Ie8sntJQ1s9IArQR8eAj4Jj/vFlG63I=;
        b=eAUDU+H6vnMzNt7ZOmCBpOyYMieSyvjFc0j/EVMG3ISM7EwXicF1Hz7L0EKUBliUZl
         Jl13Z3uI1UwFy2eXjEkfYqb6Myr16sLeKEhPEcgvS/H3oQgbReF7Ec1H6jCyNxeh2sDW
         DL8vdmH5UT8iPDQXbJ3ESMsV9MISMAJ1UTS7w=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=SxSS3W5PzE80asnMBBsrk8q4iG+7wCg2qi0CUTEaTdpG1DRTbr2VlUXcrWJpQVpJ8l
         02ho2nrO+9E6SDR7oDQ7FyyEDXcDTwvHqoJlJ99aepomEHXLjY10VyVJPpkP6gNjLdUE
         ogqSSmJULtus2Vwxfav1js4LRZy1XIA1xvAPg=
Received: by 10.86.76.20 with SMTP id y20mr2381089fga.41.1216228322788;
        Wed, 16 Jul 2008 10:12:02 -0700 (PDT)
Received: by 10.86.33.20 with HTTP; Wed, 16 Jul 2008 10:12:02 -0700 (PDT)
Message-ID: <359a92830807161012w72fef99dv29cd61b138a1d77@mail.gmail.com>
Date: Wed, 16 Jul 2008 13:12:02 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org, thomaslegrand14@yahoo.fr
Subject: Re: advanced WildcardQuery
In-Reply-To: <515674.30615.qm@web26507.mail.ukl.yahoo.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_17039_10800388.1216228322790"
References: <515674.30615.qm@web26507.mail.ukl.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_17039_10800388.1216228322790
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Check query.toString(), but I think the problem is that Lucene is
looking for a single term (word?) that starts with "pretty" and ends
with "car". So this should match "prettynicecar" but not
"pretty nice car" since the latter is split into separate tokens.

If you're concerned only with whole-word terms, you can think about
phrase queries with an appropriate slop. Beware, phrase queries
aren't tokenized, so the following phrase query wouldn't do what
you want "pret* car"~5 if you submit it *with* the quotes.

You could also use SpanQuery, but again that would be
easier if you're only concerned with whole words.

Building up a wildcard query with pretty* car should work too.

Best
Erick

On Wed, Jul 16, 2008 at 12:09 PM, legrand thomas <thomaslegrand14@yahoo.fr>
wrote:

>
> Dear all,
>
> I'd like to search on long titles (tokenized and stored) using the
> WildcardQuery. Considering the following example:
>
> title="pretty car for sale"
>
> If I search for "pretty*", I get the document having this title. But it's
> not the case if I build a WilcardQuery with the term "pretty*car". I also
> want to get this document when searching for "pretty*sale*". How should I do
> ? Is it really possible ?
>
> I use lucene 2.3.1.
>
> Thanks in advance,
>
> Thomas Legrand
>
>
>
>
>  _____________________________________________________________________________
> Envoyez avec Yahoo! Mail. Une boite mail plus intelligente
> http://mail.yahoo.fr
>

------=_Part_17039_10800388.1216228322790--

From java-user-return-34993-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 16 17:14:25 2008
Return-Path: <java-user-return-34993-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35276 invoked from network); 16 Jul 2008 17:14:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Jul 2008 17:14:25 -0000
Received: (qmail 8238 invoked by uid 500); 16 Jul 2008 17:14:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8213 invoked by uid 500); 16 Jul 2008 17:14:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8202 invoked by uid 99); 16 Jul 2008 17:14:18 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 Jul 2008 10:14:18 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: 194.109.24.27 is neither permitted nor denied by domain of karl.wettin@gmail.com)
Received: from [194.109.24.27] (HELO smtp-vbr7.xs4all.nl) (194.109.24.27)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 Jul 2008 17:13:24 +0000
Received: from kodapan.lan (memnon.xs4all.nl [82.93.70.124])
	by smtp-vbr7.xs4all.nl (8.13.8/8.13.8) with ESMTP id m6GHDlXa031419
	for <java-user@lucene.apache.org>; Wed, 16 Jul 2008 19:13:47 +0200 (CEST)
	(envelope-from karl.wettin@gmail.com)
Message-Id: <1F6B0276-EABB-4EF8-8465-A72D028722BA@gmail.com>
From: Karl Wettin <karl.wettin@gmail.com>
To: java-user@lucene.apache.org
In-Reply-To: <515674.30615.qm@web26507.mail.ukl.yahoo.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: advanced WildcardQuery
Date: Wed, 16 Jul 2008 19:13:46 +0200
References: <515674.30615.qm@web26507.mail.ukl.yahoo.com>
X-Mailer: Apple Mail (2.926)
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org


16 jul 2008 kl. 18.09 skrev legrand thomas:

> I'd like to search on long titles (tokenized and stored) using the  
> WildcardQuery. Considering the following example:
>
> title="pretty car for sale"
>
> If I search for "pretty*", I get the document having this title. But  
> it's not the case if I build a WilcardQuery with the term  
> "pretty*car". I also want to get this document when searching for  
> "pretty*sale*". How should I do ? Is it really possible ?

You are confusing terms with phrases. Wildcards works on term level  
and you try to use wildcards to indicate position increment in a  
phrase. I think you are looking for a sloppy PhraseQuery or  
SpanNearQuery.

It could be solved in a way similar as you propose it should work, for  
instance by not tokenizing the title and use a RegexQuery. This is  
however a rather expensive solution.


            karl

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34994-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 16 17:24:55 2008
Return-Path: <java-user-return-34994-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40491 invoked from network); 16 Jul 2008 17:24:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Jul 2008 17:24:55 -0000
Received: (qmail 26652 invoked by uid 500); 16 Jul 2008 17:24:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26628 invoked by uid 500); 16 Jul 2008 17:24:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26617 invoked by uid 99); 16 Jul 2008 17:24:48 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 Jul 2008 10:24:48 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: 194.109.24.27 is neither permitted nor denied by domain of karl.wettin@gmail.com)
Received: from [194.109.24.27] (HELO smtp-vbr7.xs4all.nl) (194.109.24.27)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 Jul 2008 17:23:54 +0000
Received: from kodapan.lan (memnon.xs4all.nl [82.93.70.124])
	by smtp-vbr7.xs4all.nl (8.13.8/8.13.8) with ESMTP id m6GHOHUc038155
	for <java-user@lucene.apache.org>; Wed, 16 Jul 2008 19:24:17 +0200 (CEST)
	(envelope-from karl.wettin@gmail.com)
Message-Id: <CDD9B734-5321-440E-967A-AA02D6B61B07@gmail.com>
From: Karl Wettin <karl.wettin@gmail.com>
To: java-user@lucene.apache.org
In-Reply-To: <18478069.post@talk.nabble.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: Mixing non scored an scored queries
Date: Wed, 16 Jul 2008 19:24:17 +0200
References: <18460018.post@talk.nabble.com> <DD0FDC75-113E-4951-AE08-77FFE43CAC66@gmail.com> <c68e39170807150944s62ec4735xbff9b7d286b0c148@mail.gmail.com> <3BB7A550-A0A4-4451-B1BA-9D0E3CA96AAF@gmail.com> <18478069.post@talk.nabble.com>
X-Mailer: Apple Mail (2.926)
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org


16 jul 2008 kl. 02.55 skrev John Patterson:
> Karl Wettin wrote:
>>
>>
>>> Or just set the boost to zero on the individual filter fields, or on
>>> the whole filter expression.
>>>
>>> +(my query) +(filter1 OR filter2 AND filter3)^0
>>
>>
>
> That sounds perfect!  I thought that boosts would be multiplied  
> together to
> give 0 for the whole expression.  But I never looked into it.  So  
> thanks
> again.
>
> I'll try this during the week and post my results.

After sleeping on this it hit me that you might be able to save a bit  
of CPU ticks by decorating queries and bypassing the scorer rather  
than evaluating the score and then multiply it with 0. Probably not  
too much though. Not much but might be worth mentioning.


           karl

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34995-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 16 17:33:03 2008
Return-Path: <java-user-return-34995-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44471 invoked from network); 16 Jul 2008 17:33:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Jul 2008 17:33:03 -0000
Received: (qmail 39551 invoked by uid 500); 16 Jul 2008 17:32:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39528 invoked by uid 500); 16 Jul 2008 17:32:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39517 invoked by uid 99); 16 Jul 2008 17:32:56 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 Jul 2008 10:32:56 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 Jul 2008 17:32:02 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KJArZ-0000qx-Pz
	for java-user@lucene.apache.org; Wed, 16 Jul 2008 10:32:25 -0700
Message-ID: <18492642.post@talk.nabble.com>
Date: Wed, 16 Jul 2008 10:32:25 -0700 (PDT)
From: John Patterson <jdp2000@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Mixing non scored an scored queries
In-Reply-To: <CDD9B734-5321-440E-967A-AA02D6B61B07@gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: jdp2000@gmail.com
References: <18460018.post@talk.nabble.com> <DD0FDC75-113E-4951-AE08-77FFE43CAC66@gmail.com> <c68e39170807150944s62ec4735xbff9b7d286b0c148@mail.gmail.com> <3BB7A550-A0A4-4451-B1BA-9D0E3CA96AAF@gmail.com> <18478069.post@talk.nabble.com> <CDD9B734-5321-440E-967A-AA02D6B61B07@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org




Karl Wettin wrote:
> 
> 
> After sleeping on this it hit me that you might be able to save a bit  
> of CPU ticks by decorating queries and bypassing the scorer rather  
> than evaluating the score and then multiply it with 0. Probably not  
> too much though. Not much but might be worth mentioning.
> 
> 

A couple of years ago I created a "ConjuctionSearcher" that did pretty much
the same job as ConjuctionScorer but did no scoring at all.  Admittedly I
did no optimisation on it - just used standard collections etc - and found
it performed about 10% faster.  That was less than I hoped for so I didn't
bother taking it any further.  But I guess for some people a 10% saving
could be significant.



-- 
View this message in context: http://www.nabble.com/Mixing-non-scored-an-scored-queries-tp18460018p18492642.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34996-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 16 18:49:22 2008
Return-Path: <java-user-return-34996-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 2632 invoked from network); 16 Jul 2008 18:49:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Jul 2008 18:49:22 -0000
Received: (qmail 41516 invoked by uid 500); 16 Jul 2008 18:49:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41231 invoked by uid 500); 16 Jul 2008 18:49:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41220 invoked by uid 99); 16 Jul 2008 18:49:13 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 Jul 2008 11:49:13 -0700
X-ASF-Spam-Status: No, hits=1.5 required=10.0
	tests=SPF_PASS,WEIRD_PORT
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of petite_abeille@mac.com designates 17.148.16.96 as permitted sender)
Received: from [17.148.16.96] (HELO asmtpout021.mac.com) (17.148.16.96)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 Jul 2008 18:48:17 +0000
MIME-version: 1.0
Content-type: text/plain; charset=UTF-8; format=flowed; delsp=yes
Received: from [192.168.1.4] ([84.226.143.55])
 by asmtp021.mac.com (Sun Java(tm) System Messaging Server 6.3-6.03 (built Mar
 14 2008; 32bit)) with ESMTPSA id <0K4300FY8ZC0SQC0@asmtp021.mac.com> for
 java-user@lucene.apache.org; Wed, 16 Jul 2008 10:02:27 -0700 (PDT)
Sender: petite_abeille@mac.com
Message-id: <4CF8D305-124B-4FAF-83D3-44D31F295B3A@mac.com>
From: Petite Abeille <petite_abeille@mac.com>
To: java-user@lucene.apache.org
In-reply-to: <39F273ED33612448863A19BBC1FBCFA003078843@ms2.lsc.net>
Content-transfer-encoding: quoted-printable
Subject: Re: Accent Insensitive Search
Date: Wed, 16 Jul 2008 19:02:18 +0200
References: <200807141714.m6EHEKel010637@spwiki.spsoftware.com>
 <a7f27bc30807150154s1d970049l8e1a9c1455a2fb92@mail.gmail.com>
 <7FD5A172-E944-4424-B75D-9E937B65B92B@gmail.com>
 <7E47FD4D-465A-4E1A-9EDB-6953619FBFF8@ehatchersolutions.com>
 <39F273ED33612448863A19BBC1FBCFA003078843@ms2.lsc.net>
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org


On Jul 16, 2008, at 10:58 AM, Aamir.Yaseen@globaldatapoint.com wrote:

> Simple example is Krak=C3=B3w search should also bring Krakow also in =20=

> search results.

As pointed out previously, you need to transliterate your input using =20=

something like ISOLatinFilter or such.

For example, searching for 'aaiun' should return 'Aai=C3=BAn' and =
vis-versa:

http://svr225.stepx.com:3388/search?q=3Daaiun
http://svr225.stepx.com:3388/el-aaiun

Sean M. Burke's Unidecode provides an extensive transliteration of =20
Unicode into ASCII:

http://interglacial.com/~sburke/tpj/as_html/tpj22.html

E.g.:

=D0=9C=D0=BE=D1=81=D0=BA=D0=B2=D0=B0=CC=81	Moskva
=E5=8C=97=E4=BA=AC	beijing
=E1=BC=88=CE=B8=CE=B7=CE=BD=E1=BE=B6	Athena
=EC=84=9C=EC=9A=B8	seoul
=E6=9D=B1=E4=BA=AC	dongjing
=E4=BA=AC=E9=83=BD=E5=B8=82	jingdushi
=E0=A4=A8=E0=A5=87=E0=A4=AA=E0=A4=BE=E0=A4=B2	nepaal

Cheers,

--
PA.
http://alt.textdrive.com/nanoki/


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34997-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 17 06:30:27 2008
Return-Path: <java-user-return-34997-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32703 invoked from network); 17 Jul 2008 06:30:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Jul 2008 06:30:27 -0000
Received: (qmail 64646 invoked by uid 500); 17 Jul 2008 06:30:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64615 invoked by uid 500); 17 Jul 2008 06:30:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64604 invoked by uid 99); 17 Jul 2008 06:30:20 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 16 Jul 2008 23:30:20 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Jul 2008 06:29:27 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KJMzv-0001hB-Kq
	for java-user@lucene.apache.org; Wed, 16 Jul 2008 23:29:51 -0700
Message-ID: <18502361.post@talk.nabble.com>
Date: Wed, 16 Jul 2008 23:29:51 -0700 (PDT)
From: Mohsen Saboorian <mohsens@gmail.com>
To: java-user@lucene.apache.org
Subject: Doesn it make sense cache IndexReader?
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: mohsens@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hi,
I have a set of indices in different languages (very smal indices: on
average each index directory has 10,000 documents, which has an overall size
of less than 2mb). I want to know if this is a good idea to cache
IndexReader (once opened) somewhere and further reuse it? My application is
single-threaded, but I have memory concerns, since the indexing and search
is totally done on client machines. 

Does it make sense to have all IndexReaders cached (for example if opening
an index reader takes some time). Does Lucene load some part of index in
memory as soon as a call to IndexReader.open() is done?

Mohsen.
-- 
View this message in context: http://www.nabble.com/Doesn-it-make-sense-cache-IndexReader--tp18502361p18502361.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-34998-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 17 08:03:18 2008
Return-Path: <java-user-return-34998-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79529 invoked from network); 17 Jul 2008 08:03:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Jul 2008 08:03:18 -0000
Received: (qmail 55076 invoked by uid 500); 17 Jul 2008 08:03:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55041 invoked by uid 500); 17 Jul 2008 08:03:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55029 invoked by uid 99); 17 Jul 2008 08:03:11 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Jul 2008 01:03:10 -0700
X-ASF-Spam-Status: No, hits=1.5 required=10.0
	tests=SPF_PASS,WEIRD_PORT
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of wojtekh2@gmail.com designates 209.85.132.250 as permitted sender)
Received: from [209.85.132.250] (HELO an-out-0708.google.com) (209.85.132.250)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Jul 2008 08:02:14 +0000
Received: by an-out-0708.google.com with SMTP id c37so884107anc.49
        for <java-user@lucene.apache.org>; Thu, 17 Jul 2008 01:02:39 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references;
        bh=q1yM1fLwFYw/FO7N7QlU+McasjD6I0ZLy2U3IOd+NbE=;
        b=XbO8AwiSy2jnvhE3uu30JAlimJuMvblte5H7Ky7WIQVPPtT628z/nzivksYbnI0NLH
         BFcDVQ7I4nZxJGzt1i7Av2Bdz4Zhoaa+sRQVK0gMrN5pw/Zad1+zNYb/h/sClXQRddmi
         MogSKAPuul4GpGtnZo+tgZ6/xh4v2Q7ZEKugE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references;
        b=em2kpvh0h/jBT9IU08Qlbi2jzMo06ZzzpevclOCPaoEYLCer4oFd436MQyuk+C/wYQ
         8wNdsdSKjb4tr7QEnnO3SgcCRXyyuw6yD6jQDXX8jELNGnnAxQ5eJYp0H0nNa/0FafIp
         U7Dg0ooTZovSMdnQ8bfdfyBODlWdXVPIDazbI=
Received: by 10.100.166.9 with SMTP id o9mr3738254ane.59.1216281758772;
        Thu, 17 Jul 2008 01:02:38 -0700 (PDT)
Received: by 10.100.202.4 with HTTP; Thu, 17 Jul 2008 01:02:38 -0700 (PDT)
Message-ID: <329a6c830807170102r2cda9092m706b993111c75e0a@mail.gmail.com>
Date: Thu, 17 Jul 2008 10:02:38 +0200
From: "Wojtek H" <wojtekh2@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Accent Insensitive Search
In-Reply-To: <4CF8D305-124B-4FAF-83D3-44D31F295B3A@mac.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: base64
Content-Disposition: inline
References: <200807141714.m6EHEKel010637@spwiki.spsoftware.com>
	 <a7f27bc30807150154s1d970049l8e1a9c1455a2fb92@mail.gmail.com>
	 <7FD5A172-E944-4424-B75D-9E937B65B92B@gmail.com>
	 <7E47FD4D-465A-4E1A-9EDB-6953619FBFF8@ehatchersolutions.com>
	 <39F273ED33612448863A19BBC1FBCFA003078843@ms2.lsc.net>
	 <4CF8D305-124B-4FAF-83D3-44D31F295B3A@mac.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Tm90ZSB0aGF0IElTT0xhdGluMUFjY2VudEZpbHRlciBjb252ZXJ0cyBhY2NlbnQgY2hhcmFjdGVy
cyBvbmx5IGZyb20KSVNPLTg4NTktMSBjaGFyYWN0ZXIgc2V0LiBXaGljaCBtZWFucyB0aGF0IGlm
IHlvdSBuZWVkIHRvIGNvbnZlcnQKYWNjZW50cyBvZiBlYXN0ZXJuIEV1cm9wZWFuIGxhbmd1YWdl
cyB5b3UgbmVlZCB0byB3cml0ZSB5b3VyIG93bgphY2NlbnQgZmlsdGVyLgp3b2p0ZWsKCjIwMDgv
Ny8xNiBQZXRpdGUgQWJlaWxsZSA8cGV0aXRlX2FiZWlsbGVAbWFjLmNvbT46Cj4KPiBPbiBKdWwg
MTYsIDIwMDgsIGF0IDEwOjU4IEFNLCBBYW1pci5ZYXNlZW5AZ2xvYmFsZGF0YXBvaW50LmNvbSB3
cm90ZToKPgo+PiBTaW1wbGUgZXhhbXBsZSBpcyBLcmFrw7N3IHNlYXJjaCBzaG91bGQgYWxzbyBi
cmluZyBLcmFrb3cgYWxzbyBpbiBzZWFyY2gKPj4gcmVzdWx0cy4KPgo+IEFzIHBvaW50ZWQgb3V0
IHByZXZpb3VzbHksIHlvdSBuZWVkIHRvIHRyYW5zbGl0ZXJhdGUgeW91ciBpbnB1dCB1c2luZwo+
IHNvbWV0aGluZyBsaWtlIElTT0xhdGluRmlsdGVyIG9yIHN1Y2guCj4KPiBGb3IgZXhhbXBsZSwg
c2VhcmNoaW5nIGZvciAnYWFpdW4nIHNob3VsZCByZXR1cm4gJ0FhacO6bicgYW5kIHZpcy12ZXJz
YToKPgo+IGh0dHA6Ly9zdnIyMjUuc3RlcHguY29tOjMzODgvc2VhcmNoP3E9YWFpdW4KPiBodHRw
Oi8vc3ZyMjI1LnN0ZXB4LmNvbTozMzg4L2VsLWFhaXVuCj4KPiBTZWFuIE0uIEJ1cmtlJ3MgVW5p
ZGVjb2RlIHByb3ZpZGVzIGFuIGV4dGVuc2l2ZSB0cmFuc2xpdGVyYXRpb24gb2YgVW5pY29kZQo+
IGludG8gQVNDSUk6Cj4KPiBodHRwOi8vaW50ZXJnbGFjaWFsLmNvbS9+c2J1cmtlL3Rwai9hc19o
dG1sL3RwajIyLmh0bWwKPgo+IEUuZy46Cj4KPiDQnNC+0YHQutCy0LDMgSBNb3NrdmEKPiDljJfk
uqwgICAgICBiZWlqaW5nCj4g4byIzrjOt8694b62ICAgQXRoZW5hCj4g7ISc7Jq4ICAgICAgc2Vv
dWwKPiDmnbHkuqwgICAgICBkb25namluZwo+IOS6rOmDveW4giAgICAgamluZ2R1c2hpCj4g4KSo
4KWH4KSq4KS+4KSyICAgbmVwYWFsCj4KPiBDaGVlcnMsCj4KPiAtLQo+IFBBLgo+IGh0dHA6Ly9h
bHQudGV4dGRyaXZlLmNvbS9uYW5va2kvCj4KPgo+IC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQo+IFRvIHVuc3Vic2Ny
aWJlLCBlLW1haWw6IGphdmEtdXNlci11bnN1YnNjcmliZUBsdWNlbmUuYXBhY2hlLm9yZwo+IEZv
ciBhZGRpdGlvbmFsIGNvbW1hbmRzLCBlLW1haWw6IGphdmEtdXNlci1oZWxwQGx1Y2VuZS5hcGFj
aGUub3JnCj4KPgo=


From java-user-return-34999-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 17 09:36:30 2008
Return-Path: <java-user-return-34999-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21152 invoked from network); 17 Jul 2008 09:36:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Jul 2008 09:36:30 -0000
Received: (qmail 61741 invoked by uid 500); 17 Jul 2008 09:36:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61705 invoked by uid 500); 17 Jul 2008 09:36:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61693 invoked by uid 99); 17 Jul 2008 09:36:22 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Jul 2008 02:36:22 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [193.97.200.65] (HELO gate.fiz-technik.de) (193.97.200.65)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Jul 2008 09:35:28 +0000
Received: from localhost (localhost [127.0.0.1])
	by localhost.qgroup.de (Postfix) with ESMTP id D34B113F774
	for <java-user@lucene.apache.org>; Thu, 17 Jul 2008 11:39:56 +0200 (CEST)
Received: from gate.fiz-technik.de ([127.0.0.1])
 by localhost (gate [127.0.0.1]) (amavisd-new, port 27304) with ESMTP
 id 24691-12 for <java-user@lucene.apache.org>;
 Thu, 17 Jul 2008 11:39:56 +0200 (CEST)
Received: from fizmail.fiz-technik.de (newton1.fiz-technik.de [193.97.200.134])
	by gate.fiz-technik.de (Postfix) with SMTP id 9D2EC13F749
	for <java-user@lucene.apache.org>; Thu, 17 Jul 2008 11:39:56 +0200 (CEST)
Received: by fizmail.fiz-technik.de (Postfix, from userid 65534)
	id 305871CB43D; Thu, 17 Jul 2008 11:35:47 +0200 (CEST)
Received: from newton1.fiz-technik.de (localhost [127.0.0.1])
	by fizmail.fiz-technik.de (Postfix) with ESMTP id 9CF201CB2CC
	for <java-user@lucene.apache.org>; Thu, 17 Jul 2008 11:35:45 +0200 (CEST)
Message-ID: <3928522.1216287345640.SLOX.WebMail.wwwrun@newton1.fiz-technik.de>
From: Karsten Fissmer <karsten-lucene@fiz-technik.de>
To: java-user@lucene.apache.org
Subject: Re: Doesn it make sense cache IndexReader?
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-15
Content-Transfer-Encoding: 7bit
X-Priority: 3 (normal)
X-Mailer: SuSE Linux Openexchange Server 4 - WebMail (Build 2.3788)
X-Operating-System: Linux 2.4.21-215-default i386 (JVM 1.3.1_04)
Organization: FIZ-Technik-Inform GmbH 
References: <18502361.post@talk.nabble.com>
Date: Thu, 17 Jul 2008 11:35:45 +0200 (CEST)
X-Virus-Checked: Checked by ClamAV on apache.org

hi Mohsen,

IndexReader is thread-save so you don't need a cache.

Opening and closing an IndexReader takes some time. But I don't now if this is measurable.
So if you know that you don't want to change a index, let the IndexReader open.
(somebody disagree with me?)

If you want to use your main memory you can switch from FSDirectory to RamDirectory.
This will boost your performance for sure.

Best regards
  Karsten

> Does it make sense to have all IndexReaders cached (for example if opening
> an index reader takes some time). Does Lucene load some part of index in
> memory as soon as a call to IndexReader.open() is done?



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35000-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 17 13:40:21 2008
Return-Path: <java-user-return-35000-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56338 invoked from network); 17 Jul 2008 13:40:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Jul 2008 13:40:19 -0000
Received: (qmail 99651 invoked by uid 500); 17 Jul 2008 13:40:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98945 invoked by uid 500); 17 Jul 2008 13:40:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98934 invoked by uid 99); 17 Jul 2008 13:40:11 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Jul 2008 06:40:11 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of sascha.fahl@googlemail.com designates 72.14.204.230 as permitted sender)
Received: from [72.14.204.230] (HELO qb-out-0506.google.com) (72.14.204.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Jul 2008 13:39:15 +0000
Received: by qb-out-0506.google.com with SMTP id e6so15356qbe.27
        for <java-user@lucene.apache.org>; Thu, 17 Jul 2008 06:39:39 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=googlemail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:to:content-type
         :content-transfer-encoding:mime-version:subject:date:x-mailer:from;
        bh=An+9IARBxUgWDlHNmyjVDmxl36V6JL8NAC6b1gvSrUQ=;
        b=r3/JAyNqQpeCdS3HFxlj6q/VSPADMSpMjDZIPB4/ONFAQEwyFnAeZAaF6Qq89rfQ/7
         PLpcnM3WocIq9Ojsq05JERECcBxhjwlbIDHsYIhVZaXR3xRvGRjLS4OXGNTdVJYn55oz
         /PdhDoRJJ7RcAd6QzRquZ3TS4sy0lR9NVlbzg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=googlemail.com; s=gamma;
        h=message-id:to:content-type:content-transfer-encoding:mime-version
         :subject:date:x-mailer:from;
        b=rCy5JLXmcvUzlCRjaXzFtoj8PbljrLaTnECMjWbIwTUm1HseWghY00hdAhgPoc/MSP
         7IXIs8IyuSgopcUYuB5rMOzoQaC+wFohJ9vh2TVmjiPPVZbn/Iue8PBpQAlTbPfDLlka
         koNCxVgydE42fb0Wpeze06VZap8d0b1S9KEK4=
Received: by 10.103.214.13 with SMTP id r13mr1958219muq.4.1216301978767;
        Thu, 17 Jul 2008 06:39:38 -0700 (PDT)
Received: from ?192.168.69.152? ( [84.174.86.131])
        by mx.google.com with ESMTPS id s10sm5721726muh.10.2008.07.17.06.39.36
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Thu, 17 Jul 2008 06:39:37 -0700 (PDT)
Message-Id: <2A4AE147-955A-49E6-B176-C518BF7569B8@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re-Search Hits
Date: Thu, 17 Jul 2008 15:39:34 +0200
X-Mailer: Apple Mail (2.926)
From: Sascha Fahl <sascha.fahl@googlemail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

for performance reasons I cache Hits for a certain Query in memcached,  
for things like pageination etc. My question right now is if it is  
possible to re-search such a cached Hits sets. That would be great for  
features like live-learch and so on. Does Lucene support that?

Sascha

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35001-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 17 13:55:37 2008
Return-Path: <java-user-return-35001-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 66804 invoked from network); 17 Jul 2008 13:55:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Jul 2008 13:55:36 -0000
Received: (qmail 31670 invoked by uid 500); 17 Jul 2008 13:55:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31635 invoked by uid 500); 17 Jul 2008 13:55:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31624 invoked by uid 99); 17 Jul 2008 13:55:29 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Jul 2008 06:55:29 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of jason.rutherglen@gmail.com designates 66.249.82.227 as permitted sender)
Received: from [66.249.82.227] (HELO wx-out-0506.google.com) (66.249.82.227)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Jul 2008 13:54:37 +0000
Received: by wx-out-0506.google.com with SMTP id h29so2852339wxd.20
        for <java-user@lucene.apache.org>; Thu, 17 Jul 2008 06:55:01 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=xj0CFZJqjr/slF3PHpp0ZOyyZ4FPLrAeTBrp377HUnM=;
        b=LcJVhAok0BFbu1ZCZsx+Nx1GL4skuhE03WmMsTUe+me1D/jHYE46qCQJB/vYzEnv1n
         zrXV0PzWVfwD7RqiiuYChKkf8rWiY+SPVX3NwZXugW6BzHIBag8NisJedndWJ1NDENzU
         +vCraTzvy9TDHybW1xme7GhKV0IdnBzNUeSBw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=kx3dhdYaXG2Gtkmh4jl+Iro6LWRHlNsvkgJ5bId6Lbhqh+o7PsPjNFwTNriDaszuxS
         gJSmT4Pw0JL7VIegY7grh1JnwP97b//EcxmNR3SC2GNDYZ0Yz7ySaqhv/4kUPbfbwaIP
         O1dbNyCdLSP4WvXlEpy1QwTxagHyBbbPAwXR0=
Received: by 10.114.209.1 with SMTP id h1mr1685072wag.36.1216302900552;
        Thu, 17 Jul 2008 06:55:00 -0700 (PDT)
Received: by 10.114.126.9 with HTTP; Thu, 17 Jul 2008 06:55:00 -0700 (PDT)
Message-ID: <85d3c3b60807170655u1610fd41t8e9bb446459f5b0d@mail.gmail.com>
Date: Thu, 17 Jul 2008 09:55:00 -0400
From: "Jason Rutherglen" <jason.rutherglen@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Scaling
In-Reply-To: <8209C912-8ABC-4D21-8ECA-5F02A4492479@gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_38730_26870234.1216302900557"
References: <8209C912-8ABC-4D21-8ECA-5F02A4492479@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_38730_26870234.1216302900557
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

The scaling per machine should be linear.  The overhead from the network is
minimal because the Lucene object sizes are not impacting.  Google mentions
in one of their early white papers on scaling
http://labs.google.com/papers/googlecluster-ieee.pdf that they have sub
indexes which are now popularly called shards over which an individual
thread performs a search over.  Executed in parallel (ParallelMultiSearcher
which does not use thread pooling) the response time will be faster than
using a single thread assuming part of the indexes are in the system cache.
A query is simply an iteration so it is easy to see how parallelization
speeds up response times.  Queries per second should ideally be solved by
adding more hardware with the same indexes on each server.  Then further
dividing these into what can be termed cells which represent different
indexes on sets of servers.

Having a large index on a single machine does not scale well because most of
the index will not be in the system cache.  If the index grows so does the
response time.  Dividing the index up into shards and cells allows for
efficient scaling which is proven at the big G.  It puts more of the total
index in the system cache of many machines.

The general assumption is that hardware is cheap and can be added easily,
search systems can take advantage of this and parallelize as much as
possible, per server, per application.

On Wed, Jul 16, 2008 at 9:41 AM, Karl Wettin <karl.wettin@gmail.com> wrote:

> Is there some sort of a scaling strategies listing available? I think there
> is a Wiki page missing.
>
> What are the typical promblems I'll encounter when distributing the search
> over multiple machines?
>
> Do people split up their index per node or do they use the complete index
> and restrict what part to search in using filters? The latter would be good
> for the scores, right? Then how do I calculate the cost in speed for the
> score with better quality? I mean, splitting the index in two and searching
> on two machines using ParallelMultiSearcher probably means that I'll get
> something like 30% speed improvement and not 100%. Or?
>
> Is there something to win by using multiple threads each restricted to a
> part each of the same index on a single machine, compared to a single
> thread? Or is it all I/O? That would mean there is something to gain if the
> index was on SSD or in RAM, right?
>
>
>      karl
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_38730_26870234.1216302900557--

From java-user-return-35002-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 17 15:49:56 2008
Return-Path: <java-user-return-35002-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63115 invoked from network); 17 Jul 2008 15:49:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Jul 2008 15:49:56 -0000
Received: (qmail 67398 invoked by uid 500); 17 Jul 2008 15:49:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67043 invoked by uid 500); 17 Jul 2008 15:49:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67032 invoked by uid 99); 17 Jul 2008 15:49:49 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Jul 2008 08:49:49 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Jul 2008 15:48:54 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KJVjK-0004tr-ES
	for java-user@lucene.apache.org; Thu, 17 Jul 2008 08:49:18 -0700
Message-ID: <18511667.post@talk.nabble.com>
Date: Thu, 17 Jul 2008 08:49:18 -0700 (PDT)
From: Mohsen Saboorian <mohsens@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Doesn it make sense cache IndexReader?
In-Reply-To: <3928522.1216287345640.SLOX.WebMail.wwwrun@newton1.fiz-technik.de>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: mohsens@gmail.com
References: <18502361.post@talk.nabble.com> <3928522.1216287345640.SLOX.WebMail.wwwrun@newton1.fiz-technik.de>
X-Virus-Checked: Checked by ClamAV on apache.org


Kastern, thanks for the reply.

> IndexReader is thread-save so you don't need a cache.

If it wasn't thread-safe I may need a cache? I think the cache cannot be
used on a non-thread-safe environment since it exposes same instances to
different threads.

> Opening and closing an IndexReader takes some time. But I don't
> now if this is measurable.
> So if you know that you don't want to change a index, let the IndexReader
> open.
> (somebody disagree with me?)

My indices are readonly. Once created never change. If the memory footprint
for an open IndexReader is very low, I can keep all the gradually opened
index readers open.

> If you want to use your main memory you can switch from FSDirectory to
> RamDirectory.
> This will boost your performance for sure.

Thanks for the suggestion. I will use it for the most commonly used index.

Mohsen.
-- 
View this message in context: http://www.nabble.com/Doesn-it-make-sense-cache-IndexReader--tp18502361p18511667.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35003-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 18 01:25:26 2008
Return-Path: <java-user-return-35003-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61618 invoked from network); 18 Jul 2008 01:25:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Jul 2008 01:25:25 -0000
Received: (qmail 16742 invoked by uid 500); 18 Jul 2008 01:25:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16710 invoked by uid 500); 18 Jul 2008 01:25:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16699 invoked by uid 99); 18 Jul 2008 01:25:18 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 17 Jul 2008 18:25:18 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of sebastienrainville@gmail.com designates 66.249.92.171 as permitted sender)
Received: from [66.249.92.171] (HELO ug-out-1314.google.com) (66.249.92.171)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Jul 2008 01:24:25 +0000
Received: by ug-out-1314.google.com with SMTP id h3so3443ugf.29
        for <java-user@lucene.apache.org>; Thu, 17 Jul 2008 18:24:48 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type;
        bh=WkQuL0YqsRAmZpT9Z6lVr7w5z/tFZw1IXJfY4NeOHLk=;
        b=fr1wLs6J/B4qLmkFGuwaxy0wm5lDLXCRUeQgoK43DhTU6vGgDuSjf6AYMXcAhVsOjV
         pQsGYFi7k4BrdO/UFqgQZXKLk2THypYQY7fUGS4QMWO+MwtR/d8mZ6IiPTJWKXQmbjSM
         RZP7rJV5vKrbtPoaw3rWLc6Uyyz9AZxXylUAc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=dQGOFcbQmF58FngWeqlI0krd8MmF2uqPyXI+77u2/UuZ4eZnw+Mi5UQk+L7s1TqnmL
         1GkIednZkP9QGuJMeIa9Lq5o5uC2H/P2kXFrONgv08v/7NO7ZA/685kHe05IWP4SPOj0
         lK102e+hhsvviyKx7wb/5EjPZsV/ehKB1YYE4=
Received: by 10.125.151.16 with SMTP id d16mr169077mko.52.1216344288513;
        Thu, 17 Jul 2008 18:24:48 -0700 (PDT)
Received: by 10.125.87.4 with HTTP; Thu, 17 Jul 2008 18:24:48 -0700 (PDT)
Message-ID: <8e8e0b4f0807171824x7d5f731ftd03eb67c8c0d695e@mail.gmail.com>
Date: Thu, 17 Jul 2008 21:24:48 -0400
From: "=?ISO-8859-1?Q?S=E9bastien_Rainville?=" <sebastienrainville@gmail.com>
To: java-user@lucene.apache.org
Subject: custom scoring
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_29199_25028121.1216344288502"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_29199_25028121.1216344288502
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi,

I would like to customize the lucene scoring to remove the effect of the
"coord()" parameter in Similarity for the number of fields in which the
whole query is found.

First, here's what I'm trying to achieve:

For example, if I have the query "New York" and that the documents have 2
fields: name and description. What I want is that it doesn't make a
difference if "New York" is found in both the name and the description or
just one of them. Similarity.coord() seems to be the parameter responsible
for that...

My first attempt to solve that was to supply my own implementation of
Similarity that is a subclass of DefaultSimilarity and simply override
coord(). To my surprise, I found out that that parameter is not only used to
take into consideration the number of fields in which the query was found
but also the number of terms in the query found in a given field. So, the
effect is that the number of fields in which the query is found is cancelled
but it introduces the problem that now the query "New York" doesn't favor
"New York" over "York" anymore, which is really problematic...

Then, I saw this:
http://hudson.zones.apache.org/hudson/job/Lucene-trunk/javadoc//org/apache/lucene/search/package-summary.html#scoring

It's a very vague description. I then started to look into the lucene code
and now I'm at the point where I don't really know where to start and if I'm
looking at the right thing.

By the way, I'm using Solr... but the scoring is a lucene thing so I think
I'm at the right place.

So, what I'm looking for is a hint on where and how I should start.

Thanks in advance,
Sebastien

------=_Part_29199_25028121.1216344288502--

From java-user-return-35004-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 18 07:53:03 2008
Return-Path: <java-user-return-35004-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 68821 invoked from network); 18 Jul 2008 07:53:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Jul 2008 07:53:03 -0000
Received: (qmail 47801 invoked by uid 500); 18 Jul 2008 07:52:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47766 invoked by uid 500); 18 Jul 2008 07:52:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47755 invoked by uid 99); 18 Jul 2008 07:52:55 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Jul 2008 00:52:55 -0700
X-ASF-Spam-Status: No, hits=-1.0 required=10.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [66.111.4.27] (HELO out3.smtp.messagingengine.com) (66.111.4.27)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Jul 2008 07:52:00 +0000
Received: from compute1.internal (compute1.internal [10.202.2.41])
	by out1.messagingengine.com (Postfix) with ESMTP id 92D9E13ABA8
	for <java-user@lucene.apache.org>; Fri, 18 Jul 2008 03:49:14 -0400 (EDT)
Received: from heartbeat1.messagingengine.com ([10.202.2.160])
  by compute1.internal (MEProxy); Fri, 18 Jul 2008 03:49:14 -0400
X-Sasl-enc: ZUCd5C0ktZ99iDCqExJp/XqyACeBAmQZk3pKv+fZIh/i 1216367354
Received: from [192.168.123.210] (unknown [86.43.104.130])
	by mail.messagingengine.com (Postfix) with ESMTPSA id 063BE14E08
	for <java-user@lucene.apache.org>; Fri, 18 Jul 2008 03:49:13 -0400 (EDT)
Message-ID: <48804AF8.8010106@boboco.ie>
Date: Fri, 18 Jul 2008 08:49:12 +0100
From: Eric Bowman <ebowman@boboco.ie>
User-Agent: Thunderbird 2.0.0.14 (X11/20080629)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Scaling
References: <8209C912-8ABC-4D21-8ECA-5F02A4492479@gmail.com> <85d3c3b60807170655u1610fd41t8e9bb446459f5b0d@mail.gmail.com>
In-Reply-To: <85d3c3b60807170655u1610fd41t8e9bb446459f5b0d@mail.gmail.com>
X-Enigmail-Version: 0.95.6
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Jason Rutherglen wrote:
> The scaling per machine should be linear.  The overhead from the network is
> minimal because the Lucene object sizes are not impacting.  Google mentions
> in one of their early white papers on scaling
> http://labs.google.com/papers/googlecluster-ieee.pdf that they have sub
> indexes which are now popularly called shards over which an individual
> thread performs a search over.  Executed in parallel (ParallelMultiSearcher
> which does not use thread pooling) the response time will be faster than
> using a single thread assuming part of the indexes are in the system cache.
> A query is simply an iteration so it is easy to see how parallelization
> speeds up response times.  Queries per second should ideally be solved by
> adding more hardware with the same indexes on each server.  Then further
> dividing these into what can be termed cells which represent different
> indexes on sets of servers.
>
> Having a large index on a single machine does not scale well because most of
> the index will not be in the system cache.  If the index grows so does the
> response time.  Dividing the index up into shards and cells allows for
> efficient scaling which is proven at the big G.  It puts more of the total
> index in the system cache of many machines.
>
> The general assumption is that hardware is cheap and can be added easily,
> search systems can take advantage of this and parallelize as much as
> possible, per server, per application.
>   
One thing I have trouble understanding is how scoring works in this 
case.  Does Lucene really "just work", or are there special things we 
have to do to make sure that the scores are coherent so we can actually 
decide which was the best match?  What kind of constraints are there 
when breaking up the index into parts to make sure scoring remains coherent?

Thanks,
Eric

-- 
Eric Bowman
Boboco Ltd
ebowman@boboco.ie
http://www.boboco.ie/ebowman/pubkey.pgp
+35318394189/+353872801532


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35005-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 18 10:52:40 2008
Return-Path: <java-user-return-35005-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61943 invoked from network); 18 Jul 2008 10:52:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Jul 2008 10:52:40 -0000
Received: (qmail 29532 invoked by uid 500); 18 Jul 2008 10:52:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29498 invoked by uid 500); 18 Jul 2008 10:52:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29487 invoked by uid 99); 18 Jul 2008 10:52:32 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Jul 2008 03:52:32 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.202] (HELO spunkymail-a4.g.dreamhost.com) (208.97.132.202)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Jul 2008 10:51:38 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a4.g.dreamhost.com (Postfix) with ESMTP id 673043B9FC
	for <java-user@lucene.apache.org>; Fri, 18 Jul 2008 03:51:32 -0700 (PDT)
Message-Id: <DA19B34C-9F38-4FD8-A5EA-07CE81F7BE93@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <6D7AA29C-A7BF-4306-84DA-D7F5BEF593C9@lucasmail.org>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: Interrupting a query
Date: Fri, 18 Jul 2008 06:51:31 -0400
References: <81093FC6-B5AE-4669-B912-525379D22A43@lucasmail.org> <CFB5B993-0481-4961-8F17-E3DB3CD2E35D@apache.org> <6D7AA29C-A7BF-4306-84DA-D7F5BEF593C9@lucasmail.org>
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org

True, but I think the approach is similar, in that you need to have  
the hit collector check to see if your interrupt flag has been set and  
then exit out.

-Grant

On Jul 16, 2008, at 9:54 AM, Paul J. Lucas wrote:

> That has nothing to do with interrupting a query at some arbitrary  
> time.
>
> - Paul
>
>
> On Jul 16, 2008, at 5:14 AM, Grant Ingersoll wrote:
>
>> See https://issues.apache.org/jira/browse/LUCENE-997
>>
>> -Grant
>>
>> On Jul 16, 2008, at 12:22 AM, Paul J. Lucas wrote:
>>
>>> If a complicated query is running in a Thread, how does Lucene  
>>> respond to Thread.interrupt()?  I want to be able to interrupt an  
>>> in-progress query.
>>>
>>> - Paul
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>







---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35006-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 18 13:34:08 2008
Return-Path: <java-user-return-35006-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54005 invoked from network); 18 Jul 2008 13:34:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Jul 2008 13:34:08 -0000
Received: (qmail 11990 invoked by uid 500); 18 Jul 2008 13:34:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11962 invoked by uid 500); 18 Jul 2008 13:34:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11951 invoked by uid 99); 18 Jul 2008 13:34:01 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Jul 2008 06:34:01 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: 194.109.24.36 is neither permitted nor denied by domain of karl.wettin@gmail.com)
Received: from [194.109.24.36] (HELO smtp-vbr16.xs4all.nl) (194.109.24.36)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Jul 2008 13:33:07 +0000
Received: from kodapan.lan (memnon.xs4all.nl [82.93.70.124])
	by smtp-vbr16.xs4all.nl (8.13.8/8.13.8) with ESMTP id m6IDXUSB028247
	for <java-user@lucene.apache.org>; Fri, 18 Jul 2008 15:33:30 +0200 (CEST)
	(envelope-from karl.wettin@gmail.com)
Message-Id: <AFD69A52-0CCA-461B-A72F-827F6D5F90D3@gmail.com>
From: Karl Wettin <karl.wettin@gmail.com>
To: java-user@lucene.apache.org
In-Reply-To: <48804AF8.8010106@boboco.ie>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: Scaling
Date: Fri, 18 Jul 2008 15:33:29 +0200
References: <8209C912-8ABC-4D21-8ECA-5F02A4492479@gmail.com> <85d3c3b60807170655u1610fd41t8e9bb446459f5b0d@mail.gmail.com> <48804AF8.8010106@boboco.ie>
X-Mailer: Apple Mail (2.926)
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org


18 jul 2008 kl. 09.49 skrev Eric Bowman:

> One thing I have trouble understanding is how scoring works in this  
> case.  Does Lucene really "just work", or are there special things  
> we have to do to make sure that the scores are coherent so we can  
> actually decide which was the best match?  What kind of constraints  
> are there when breaking up the index into parts to make sure scoring  
> remains coherent?


AFAIK the score would suffer from splitting up the index as tf/idf  
then only represent a part of the index, i.e. two identical docments  
in two indices would end up with different scores as the index meta  
data is different. I have no clue how large the impact could be nor if  
there are good and bad ways to split an index.

One solution I can think of is to share complete index over all nodes  
but restrict the results from each node to a subset of the index using  
a filter. This should produce the right score but will probably be a  
bit slower than splitting the index.

Perhaps it would be possible to split the index for searching but use  
an alternative source for scoring.


           karl

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35007-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 18 13:50:24 2008
Return-Path: <java-user-return-35007-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64216 invoked from network); 18 Jul 2008 13:50:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Jul 2008 13:50:23 -0000
Received: (qmail 42608 invoked by uid 500); 18 Jul 2008 13:50:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42568 invoked by uid 500); 18 Jul 2008 13:50:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42557 invoked by uid 99); 18 Jul 2008 13:50:16 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Jul 2008 06:50:16 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of jason.rutherglen@gmail.com designates 209.85.142.188 as permitted sender)
Received: from [209.85.142.188] (HELO ti-out-0910.google.com) (209.85.142.188)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Jul 2008 13:49:21 +0000
Received: by ti-out-0910.google.com with SMTP id b8so302098tic.11
        for <java-user@lucene.apache.org>; Fri, 18 Jul 2008 06:49:45 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=KlAt1qZx+wwgkqBzJ+vZgeYhonsDS+6oZ6ETehlBfcE=;
        b=ezuwhTKdo1djfg9Z76Sx8dGra63TmgNfnTNQTykXzjSHtEbgCI1vr44tIcepEK1mf0
         /OLtM2JqQS1ouq1LaIqRAo7J5snCS8Qg1l5eqrK1Y0287ruDNJ8xyyCHoopBMK64DLVl
         qH9Zt7DCC6oIEOulQ3NpHmsU0IBv6MplQvl9Q=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=aeWkNfrQDFob3/rGSzR6c0dYNM2yNl9E+LfnoJHu4bi4LylOO1fvJOI/4u4mah5MoK
         Ibv7B2qa7bcL+L65D3vEdPPFNFrbTgq0Aq704s1Ke67XZmIm45z3xe+U/cbfNclJjEod
         kaG4ZFsRAcGaWs6C/dCVk1QpJX6muJPf/T+mE=
Received: by 10.150.181.11 with SMTP id d11mr254902ybf.127.1216388983798;
        Fri, 18 Jul 2008 06:49:43 -0700 (PDT)
Received: by 10.151.112.11 with HTTP; Fri, 18 Jul 2008 06:49:43 -0700 (PDT)
Message-ID: <85d3c3b60807180649y52e980ffo92494b0586e3e292@mail.gmail.com>
Date: Fri, 18 Jul 2008 09:49:43 -0400
From: "Jason Rutherglen" <jason.rutherglen@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Scaling
In-Reply-To: <48804AF8.8010106@boboco.ie>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_15649_19137553.1216388983777"
References: <8209C912-8ABC-4D21-8ECA-5F02A4492479@gmail.com>
	 <85d3c3b60807170655u1610fd41t8e9bb446459f5b0d@mail.gmail.com>
	 <48804AF8.8010106@boboco.ie>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_15649_19137553.1216388983777
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

RMI search in Lucene uses Searchable.int[] docFreqs(Term[] terms) to obtain
the docfreqs for all terms in a the query from each server.  Which it then
turns into a globalized Weight that is submitted to all the Searchables
(servers).  Look at MultiSearcher.  This is fine for most systems even with
the network traffic.

There are ways to mitigate network traffic at the greater than 100 server
mark by locating a proxy server at each rack.  This way the main search
client does not have for example 5000 sockets open to 5000 servers, it only
has 500 sockets open to the 500 proxy servers with 100 server per proxy.
The intensive local network traffic is performed by the search proxy which
then returns the results to the main search client.

In web search a global term frequency database is used.  This does not work
for many Lucene instances where the the index is updated frequently.  It
still could be done with indexes that are updates often however it would
seem to require a lot of work with possibly little to gain, unless you want
to offer the user 0.05 second response times.

On Fri, Jul 18, 2008 at 3:49 AM, Eric Bowman <ebowman@boboco.ie> wrote:

> Jason Rutherglen wrote:
>
>> The scaling per machine should be linear.  The overhead from the network
>> is
>> minimal because the Lucene object sizes are not impacting.  Google
>> mentions
>> in one of their early white papers on scaling
>> http://labs.google.com/papers/googlecluster-ieee.pdf that they have sub
>> indexes which are now popularly called shards over which an individual
>> thread performs a search over.  Executed in parallel
>> (ParallelMultiSearcher
>> which does not use thread pooling) the response time will be faster than
>> using a single thread assuming part of the indexes are in the system
>> cache.
>> A query is simply an iteration so it is easy to see how parallelization
>> speeds up response times.  Queries per second should ideally be solved by
>> adding more hardware with the same indexes on each server.  Then further
>> dividing these into what can be termed cells which represent different
>> indexes on sets of servers.
>>
>> Having a large index on a single machine does not scale well because most
>> of
>> the index will not be in the system cache.  If the index grows so does the
>> response time.  Dividing the index up into shards and cells allows for
>> efficient scaling which is proven at the big G.  It puts more of the total
>> index in the system cache of many machines.
>>
>> The general assumption is that hardware is cheap and can be added easily,
>> search systems can take advantage of this and parallelize as much as
>> possible, per server, per application.
>>
>>
> One thing I have trouble understanding is how scoring works in this case.
>  Does Lucene really "just work", or are there special things we have to do
> to make sure that the scores are coherent so we can actually decide which
> was the best match?  What kind of constraints are there when breaking up the
> index into parts to make sure scoring remains coherent?
>
> Thanks,
> Eric
>
> --
> Eric Bowman
> Boboco Ltd
> ebowman@boboco.ie
> http://www.boboco.ie/ebowman/pubkey.pgp
> +35318394189/+353872801532
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_15649_19137553.1216388983777--

From java-user-return-35008-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 18 14:57:32 2008
Return-Path: <java-user-return-35008-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7739 invoked from network); 18 Jul 2008 14:57:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Jul 2008 14:57:32 -0000
Received: (qmail 42933 invoked by uid 500); 18 Jul 2008 14:57:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42903 invoked by uid 500); 18 Jul 2008 14:57:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42889 invoked by uid 99); 18 Jul 2008 14:57:25 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Jul 2008 07:57:25 -0700
X-ASF-Spam-Status: No, hits=-4.0 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [128.230.108.46] (HELO SUEXCL-02.ad.syr.edu) (128.230.108.46)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Jul 2008 14:56:32 +0000
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: RE: custom scoring
Date: Fri, 18 Jul 2008 10:54:13 -0400
Message-ID: <9294E20AED46934EA459020706463F94C59BC1@SUEXCL-02.ad.syr.edu>
In-Reply-To: <8e8e0b4f0807171824x7d5f731ftd03eb67c8c0d695e@mail.gmail.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: custom scoring
Thread-Index: AcjodSv9ik7NOSIIRYSrH+n3d4xtjAAb0fMA
From: "Steven A Rowe" <sarowe@syr.edu>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi S=E9bastien,

Have you looked into the DisjunctionMaxQuery =
<http://lucene.apache.org/java/2_3_2/api/org/apache/lucene/search/Disjunc=
tionMaxQuery.html>?  From that page:

   A query that generates the union of documents produced by its
   subqueries, and that scores each document with the maximum score
   for that document as produced by any subquery, plus a tie
   breaking increment for any additional matching subqueries. This
   is useful when searching for a word in multiple fields with
   different boost factors (so that the fields cannot be combined
   equivalently into a single search field). We want the primary
   score to be the one associated with the highest boost, not the
   sum of the field scores (as BooleanQuery would give).

Here's the Solr wiki page for it: =
<http://wiki.apache.org/solr/DisMaxRequestHandler>.

I think you could just give the name and description fields the same =
boost, and you'd be pretty close to getting what you want right out of =
the box with Solr.

Steve

On 07/17/2008 at 9:24 PM, S=E9bastien Rainville wrote:
> Hi,
>=20
> I would like to customize the lucene scoring to remove the
> effect of the "coord()" parameter in Similarity for the
> number of fields in which the whole query is found.
>=20
> First, here's what I'm trying to achieve:
>=20
> For example, if I have the query "New York" and that the
> documents have 2 fields: name and description. What I want
> is that it doesn't make a difference if "New York" is found
> in both the name and the description or just one of them.
> Similarity.coord() seems to be the parameter responsible
> for that...
>=20
> My first attempt to solve that was to supply my own
> implementation of Similarity that is a subclass of
> DefaultSimilarity and simply override coord(). To my surprise,
> I found out that that parameter is not only used to take into
> consideration the number of fields in which the query was
> found but also the number of terms in the query found in a
> given field. So, the effect is that the number of fields in
> which the query is found is cancelled but it introduces the
> problem that now the query "New York" doesn't favor "New York"
> over "York" anymore, which is really problematic...
>=20
> Then, I saw this:
> =
http://hudson.zones.apache.org/hudson/job/Lucene-trunk/javadoc//org/apach=
e/lucene/search/package-summary.html#scoring
>=20
> It's a very vague description. I then started to look into
> the lucene code and now I'm at the point where I don't really
> know where to start and if I'm looking at the right thing.
>=20
> By the way, I'm using Solr... but the scoring is a lucene
> thing so I think I'm at the right place.
>=20
> So, what I'm looking for is a hint on where and how I should start.
>=20
> Thanks in advance,
> Sebastien

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35009-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 18 16:49:33 2008
Return-Path: <java-user-return-35009-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3999 invoked from network); 18 Jul 2008 16:49:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Jul 2008 16:49:33 -0000
Received: (qmail 96529 invoked by uid 500); 18 Jul 2008 16:49:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96493 invoked by uid 500); 18 Jul 2008 16:49:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96482 invoked by uid 99); 18 Jul 2008 16:49:26 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Jul 2008 09:49:26 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Jul 2008 16:48:33 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id 0E5E371C44E; Fri, 18 Jul 2008 09:48:57 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id C528571C1E8
	for <java-user@lucene.apache.org>; Fri, 18 Jul 2008 09:48:57 -0700 (PDT)
Date: Fri, 18 Jul 2008 09:48:57 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: RE: how to statistics categories amount
In-Reply-To: <BAY119-W36A6F1B87270D9DFEC6DA6B4980@phx.gbl>
Message-ID: <Pine.LNX.4.62.0807180946320.12129@radix.cryptio.net>
References: <BAY119-W440204702F26CC85BB2799B49D0@phx.gbl>
 <A0375914-6EDE-4A0C-BB74-2483060E54A3@ehatchersolutions.com>
 <BAY119-W36A6F1B87270D9DFEC6DA6B4980@phx.gbl>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: Anyone  explain  solr's function  of  facet  ,thanks!

I gave  talk a few years back which goes into some of hte details of 
doing faceting in Solr.  that will give you a starting point, and then 
looking at the Solr "SimpleFacets" class can fill in the details.

http://people.apache.org/~hossman/apachecon2006us/

Note: the talk pre-dates the actual "SimpleFacets" functionality being 
added to Solr, so you won't see specific class names mentioned, and you 
will see some much simpler/crappier demo code of hte same principles.


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35010-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 18 16:52:29 2008
Return-Path: <java-user-return-35010-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5860 invoked from network); 18 Jul 2008 16:52:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Jul 2008 16:52:29 -0000
Received: (qmail 1762 invoked by uid 500); 18 Jul 2008 16:52:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 1733 invoked by uid 500); 18 Jul 2008 16:52:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 1722 invoked by uid 99); 18 Jul 2008 16:52:21 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Jul 2008 09:52:21 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [217.12.10.218] (HELO web26007.mail.ukl.yahoo.com) (217.12.10.218)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 18 Jul 2008 16:51:27 +0000
Received: (qmail 34303 invoked by uid 60001); 18 Jul 2008 16:51:48 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=4BSf8U94wBKBh0kISq3qRIsb0NfmP/oZrQGkk5s81Oo8NIQ6H2Ia0/ZjDiqQ7ieQYKa8JDmSVt5M4lfYCvTPpERx/dhDu/XmCouyRkI/yQ6UX1ki5Ld5cz5o5y0CyqBFGbthjIwtAVnSgEcd4OF9Up6auA5X3c2w239wXzpXzIc=;
Received: from [62.189.26.100] by web26007.mail.ukl.yahoo.com via HTTP; Fri, 18 Jul 2008 16:51:48 GMT
X-Mailer: YahooMailRC/1042.40 YahooMailWebService/0.7.218
Date: Fri, 18 Jul 2008 16:51:48 +0000 (GMT)
From: mark harwood <markharw00d@yahoo.co.uk>
Subject: Re: Scaling
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
Message-ID: <899463.34200.qm@web26007.mail.ukl.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

>>I have no clue how large the impact could be =0A=0AI did do some benchmar=
king of a scoring scheme based on local idf vs one with visibility of a glo=
bal idf.=0AUsing randomized allocation of documents to shards and sufficien=
t volumes of content in each index, the local idf policy produced identical=
 top results to the global idf policy for the vast majority of searches.=0A=
=0ACheers=0AMark=0A=0A=0A=0A----- Original Message ----=0AFrom: Karl Wettin=
 <karl.wettin@gmail.com>=0ATo: java-user@lucene.apache.org=0ASent: Friday, =
18 July, 2008 2:33:29 PM=0ASubject: Re: Scaling=0A=0A=0A18 jul 2008 kl. 09.=
49 skrev Eric Bowman:=0A=0A> One thing I have trouble understanding is how =
scoring works in this  =0A> case.  Does Lucene really "just work", or are t=
here special things  =0A> we have to do to make sure that the scores are co=
herent so we can  =0A> actually decide which was the best match?  What kind=
 of constraints  =0A> are there when breaking up the index into parts to ma=
ke sure scoring  =0A> remains coherent?=0A=0A=0AAFAIK the score would suffe=
r from splitting up the index as tf/idf  =0Athen only represent a part of t=
he index, i.e. two identical docments  =0Ain two indices would end up with =
different scores as the index meta  =0Adata is different. I have no clue ho=
w large the impact could be nor if  =0Athere are good and bad ways to split=
 an index.=0A=0AOne solution I can think of is to share complete index over=
 all nodes  =0Abut restrict the results from each node to a subset of the i=
ndex using  =0Aa filter. This should produce the right score but will proba=
bly be a  =0Abit slower than splitting the index.=0A=0APerhaps it would be =
possible to split the index for searching but use  =0Aan alternative source=
 for scoring.=0A=0A=0A           karl=0A=0A--------------------------------=
-------------------------------------=0ATo unsubscribe, e-mail: java-user-u=
nsubscribe@lucene.apache.org=0AFor additional commands, e-mail: java-user-h=
elp@lucene.apache.org=0A=0A=0A      _______________________________________=
___________________=0ANot happy with your email address?.=0AGet the one you=
 really want - millions of new email addresses available now at Yahoo! http=
://uk.docs.yahoo.com/ymail/new.html

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35011-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 18 17:33:39 2008
Return-Path: <java-user-return-35011-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 29481 invoked from network); 18 Jul 2008 17:33:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Jul 2008 17:33:39 -0000
Received: (qmail 58844 invoked by uid 500); 18 Jul 2008 17:33:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58587 invoked by uid 500); 18 Jul 2008 17:33:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58576 invoked by uid 99); 18 Jul 2008 17:33:31 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Jul 2008 10:33:31 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Jul 2008 17:32:38 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id A88DB71C3FE; Fri, 18 Jul 2008 10:31:42 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id A491171C3B7
	for <java-user@lucene.apache.org>; Fri, 18 Jul 2008 10:31:42 -0700 (PDT)
Date: Fri, 18 Jul 2008 10:31:42 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: Lucene Users <java-user@lucene.apache.org>
Subject: Re: Sorting case-insensitively
In-Reply-To: <B9D440EB-172D-41F3-BC36-848C0254B9BC@lucasmail.org>
Message-ID: <Pine.LNX.4.62.0807181016270.12129@radix.cryptio.net>
References: <EB8A44A6-A9FF-4C0E-ACA8-9E0E21C5AD6F@lucasmail.org>
 <E91CC8FF-2D02-42C2-8CEA-6D5B61E4C253@ehatchersolutions.com>
 <3F71F1AB-3905-4097-8C86-E66916BDF521@lucasmail.org>
 <868CA8F2-4F97-4CC1-98DB-C34E4A88A2F8@lucasmail.org>
 <Pine.LNX.4.62.0807092210550.27581@radix.cryptio.net>
 <8082B7D2-C2DD-4069-A7F9-6C53FBE93675@lucasmail.org>
 <Pine.LNX.4.62.0807101400360.16471@radix.cryptio.net>
 <B9D440EB-172D-41F3-BC36-848C0254B9BC@lucasmail.org>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: > if you could submit a test case that
	...
: See my e-mail dated July 3, 2008.

Sorry: i ment open a bug (in Jira) and submit a JUnit test case.  I also 
ment something even simpler so the lower casing doesn't confuse the issue 
ie:
        class IdentitySortComparator extends SortComparator {
            public Comparable getComparable( String termText ) {
                return termText;
            }
        } 

: > Assuming i'm right, I don'treally have any good work arround suggestion
: > for you beyond overriding newComparator() in your SortComparator subclass
: > to explicitly test for null yourself.
: 
: And what do I do if it is null?

whatever you want ... treat null as less then everything else, or treat 
null as greater then everything else .... hmmmmmm ... except (still 
assuming my hunch is right) no matter what you do to make 
yourComparable.compareTo(null) behave well, there's still nothing you can 
do to prevent the case where yourComparable itself might be null.  we're 
back to the same problem of FieldCache not giving people any way to 
specify what the "default" value in the cache should be for docs that have 
no Terms indexed for that field.

Bottom line: the fact that the built in int/float/string/etc sorting works 
even when a doc has no value for a field is really kind of a fluke -- it's 
pretty much impossible to get the same behavior using "Custom" sorting 
(and i can't think of an easy way to fix it without gutting the API).

Even if someone else has a good idea to make it work, I would still 
*strongely* recommend you just index the lowercase form in an alternate 
field -- it's going to be faster, both because the lowercasing is all done 
at index time not at search time, and assuming a moderate overlap of 
field value the StringIndex FieldCache type will probably use less RAM 
then the simple Comparable FieldCache type containging lowercase strings.

-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35012-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 18 17:48:17 2008
Return-Path: <java-user-return-35012-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38347 invoked from network); 18 Jul 2008 17:48:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Jul 2008 17:48:16 -0000
Received: (qmail 70688 invoked by uid 500); 18 Jul 2008 17:48:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70656 invoked by uid 500); 18 Jul 2008 17:48:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70645 invoked by uid 99); 18 Jul 2008 17:48:10 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Jul 2008 10:48:10 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Jul 2008 17:47:15 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KJu3P-0001XN-Sd
	for java-user@lucene.apache.org; Fri, 18 Jul 2008 10:47:39 -0700
Message-ID: <18534562.post@talk.nabble.com>
Date: Fri, 18 Jul 2008 10:47:39 -0700 (PDT)
From: dan at gmail <danqinsitu@gmail.com>
To: java-user@lucene.apache.org
Subject: How did Lucene clean out the deleted documents from the disk?
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: danqinsitu@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hello,

Could someone please confirm that calling indexWriter.optimize() is the only
way to clean out the deleted documents from the disk?

I understand that indexWriter.deleteDocuments() does not clean the disk
space, and I tested that calling after indexWriter.flush() and
indexWriter.close() after indexWriter.deleteDocuments() does not clean the
disk space either.  So do they only mark the documents have been deleted,
then which method really do the "delete" the documents (from the disk)?

Thanks,
Dan
-- 
View this message in context: http://www.nabble.com/How-did-Lucene-clean-out-the-deleted-documents-from-the-disk--tp18534562p18534562.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35013-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 18 18:31:05 2008
Return-Path: <java-user-return-35013-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71849 invoked from network); 18 Jul 2008 18:31:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Jul 2008 18:31:05 -0000
Received: (qmail 25708 invoked by uid 500); 18 Jul 2008 18:30:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25423 invoked by uid 500); 18 Jul 2008 18:30:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25412 invoked by uid 99); 18 Jul 2008 18:30:57 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Jul 2008 11:30:57 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=SPF_NEUTRAL,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.132.246] (HELO an-out-0708.google.com) (209.85.132.246)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Jul 2008 18:30:02 +0000
Received: by an-out-0708.google.com with SMTP id c37so1375423anc.49
        for <java-user@lucene.apache.org>; Fri, 18 Jul 2008 11:30:25 -0700 (PDT)
Received: by 10.100.178.13 with SMTP id a13mr447694anf.29.1216405824848;
        Fri, 18 Jul 2008 11:30:24 -0700 (PDT)
Received: from ?10.17.4.4? ( [72.93.214.93])
        by mx.google.com with ESMTPS id 3sm1930350wrs.22.2008.07.18.11.30.24
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Fri, 18 Jul 2008 11:30:24 -0700 (PDT)
Message-Id: <8CB63474-51CE-430D-BD08-6CEBCD2197D9@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <18534562.post@talk.nabble.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: How did Lucene clean out the deleted documents from the disk?
Date: Fri, 18 Jul 2008 14:30:23 -0400
References: <18534562.post@talk.nabble.com>
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org


Either optimize() or expungeDeletes() will reclaim the disk space used  
by deleted documents.

Also, over time, as segments that have marked deletions are merged,  
the disk space is also reclaimed.

Mike

dan at gmail wrote:

>
> Hello,
>
> Could someone please confirm that calling indexWriter.optimize() is  
> the only
> way to clean out the deleted documents from the disk?
>
> I understand that indexWriter.deleteDocuments() does not clean the  
> disk
> space, and I tested that calling after indexWriter.flush() and
> indexWriter.close() after indexWriter.deleteDocuments() does not  
> clean the
> disk space either.  So do they only mark the documents have been  
> deleted,
> then which method really do the "delete" the documents (from the  
> disk)?
>
> Thanks,
> Dan
> -- 
> View this message in context: http://www.nabble.com/How-did-Lucene-clean-out-the-deleted-documents-from-the-disk--tp18534562p18534562.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35014-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 18 18:57:43 2008
Return-Path: <java-user-return-35014-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95814 invoked from network); 18 Jul 2008 18:57:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Jul 2008 18:57:43 -0000
Received: (qmail 46475 invoked by uid 500); 18 Jul 2008 18:57:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46438 invoked by uid 500); 18 Jul 2008 18:57:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46423 invoked by uid 99); 18 Jul 2008 18:57:35 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Jul 2008 11:57:35 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Jul 2008 18:56:42 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id 6BB0A71C385; Fri, 18 Jul 2008 11:56:36 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id 67D2E71C32D
	for <java-user@lucene.apache.org>; Fri, 18 Jul 2008 11:56:36 -0700 (PDT)
Date: Fri, 18 Jul 2008 11:56:36 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: MultiSearcher and TopFieldDocCollector
In-Reply-To: <487B9F21.7010705@gmail.com>
Message-ID: <Pine.LNX.4.62.0807181154570.24508@radix.cryptio.net>
References: <487B9F21.7010705@gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: The idea was to override TopFieldDocCollector to do the sorting etc. and only
: load the full document for those we need to display. But, I haven't found an
: easy way to use TopFieldDocCollector (FieldSortedHitQueue etc.) with
: MultiSearcher.

I don't understand this statement ... i mean, i haven't ever used 
MultiSearcher, but it has a search(Weight,Filter,HitCollector) ... what 
exactly is the problem you are facing?


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35015-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 18 21:04:51 2008
Return-Path: <java-user-return-35015-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12008 invoked from network); 18 Jul 2008 21:04:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Jul 2008 21:04:51 -0000
Received: (qmail 32163 invoked by uid 500); 18 Jul 2008 21:04:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32133 invoked by uid 500); 18 Jul 2008 21:04:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32122 invoked by uid 99); 18 Jul 2008 21:04:44 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Jul 2008 14:04:44 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ssmith@mainstreamdata.com designates 209.63.42.201 as permitted sender)
Received: from [209.63.42.201] (HELO nexus1.mainstreamdata.com) (209.63.42.201)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Jul 2008 21:03:51 +0000
Received: from localhost (localhost [127.0.0.1])
	by nexus1.mainstreamdata.com (Postfix) with ESMTP id EB49758007
	for <java-user@lucene.apache.org>; Fri, 18 Jul 2008 15:03:44 -0600 (MDT)
X-Virus-Scanned: Debian amavisd-new at nexus1.mainstreamdata.com
Received: from nexus1.mainstreamdata.com ([127.0.0.1])
	by localhost (nexus1.mainstreamdata.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id wX81kgHJvE6H for <java-user@lucene.apache.org>;
	Fri, 18 Jul 2008 15:03:38 -0600 (MDT)
Received: from exchange.slc.mainstreamdata.com (exchange.slc.mainstreamdata.com [10.2.1.132])
	by nexus1.mainstreamdata.com (Postfix) with ESMTP id A9C114B00E
	for <java-user@lucene.apache.org>; Fri, 18 Jul 2008 15:03:38 -0600 (MDT)
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C8E919.C006DDE4"
Subject: Bug in CJKTokenizer
Date: Fri, 18 Jul 2008 15:03:37 -0600
Message-ID: <55F9EF953014514EB6BEE1F5198CEEB4032CF182@exchange.slc.mainstreamdata.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Bug in CJKTokenizer
thread-index: AcjpGb82zl3ThPaJQGGf6tjFM1AvmA==
From: "Scott Smith" <ssmith@mainstreamdata.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01C8E919.C006DDE4
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

org.apache.lucene.analysis.cjk.CJKTokenizer is in the "contrib" portion =
of lucene, so I'm not sure if this is the right place to mention this or =
not.  I was doing some detailed analysis of how this tokenizer worked =
and noticed the following behavior (which I would classify as a bug).

=20

If you pass the word "construccion" to the tokenizer, it returns a =
single token: "construccion".  That seems correct.  If you pass the word =
"construcci=F3n" to this tokenizer, it will generate three tokens: =
"construcci", "=F3", and "n".  This is happens because the accented "o" =
is not treated as a Latin-1 character.  Splitting the word seems like a =
bug and violates the "does a decent job for most European languages" =
statement.

=20

The fix seems straight forward.  I replaced the following 2 lines (in =
the CJKTokenizer class):

=20

            if ((ub =3D=3D Character.UnicodeBlock.BASIC_LATIN)

                 || (ub =3D=3D =
Character.UnicodeBlock.HALFWIDTH_AND_FULLWIDTH_FORMS))

=20

With

=20

            if ((ub =3D=3D Character.UnicodeBlock.BASIC_LATIN)           =
    // chars 0x00-0x7f

                 || (ub =3D=3D =
Character.UnicodeBlock.LATIN_1_SUPPLEMENT)    // char 0x80-0xff

                 || (ub =3D=3D Character.UnicodeBlock.LATIN_EXTENDED_A)  =
    // char 0x100-0x17f

                 || (ub =3D=3D =
Character.UnicodeBlock.HALFWIDTH_AND_FULLWIDTH_FORMS))

=20

Am I missing something or does this seem like a reasonable thing to want =
to do?


------_=_NextPart_001_01C8E919.C006DDE4--

From java-user-return-35016-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 18 21:22:02 2008
Return-Path: <java-user-return-35016-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 24650 invoked from network); 18 Jul 2008 21:22:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Jul 2008 21:22:02 -0000
Received: (qmail 49427 invoked by uid 500); 18 Jul 2008 21:21:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49389 invoked by uid 500); 18 Jul 2008 21:21:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49369 invoked by uid 99); 18 Jul 2008 21:21:50 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Jul 2008 14:21:50 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Jul 2008 21:12:57 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KJxGT-0001Px-Fs
	for java-user@lucene.apache.org; Fri, 18 Jul 2008 14:13:21 -0700
Message-ID: <18537767.post@talk.nabble.com>
Date: Fri, 18 Jul 2008 14:13:21 -0700 (PDT)
From: dan at gmail <danqinsitu@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: How did Lucene clean out the deleted documents from the disk?
In-Reply-To: <8CB63474-51CE-430D-BD08-6CEBCD2197D9@mikemccandless.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: danqinsitu@gmail.com
References: <18534562.post@talk.nabble.com> <8CB63474-51CE-430D-BD08-6CEBCD2197D9@mikemccandless.com>
X-Virus-Checked: Checked by ClamAV on apache.org


> Also, over time, as segments that have marked deletions are merged,  
> the disk space is also reclaimed.

Thanks Mike.

So can I say that calling optimzie() is really optional?  Because I was
worrying that these deleted documents would never get cleaned if I don't run
optimize() and eventually it would run out of the disk space.  What I am
trying to figure out here is if optimization is mandatory.  I know that
optimization would improve the search performance, however it would take a
long time to run and the application I am writing needs to update the index
very frequently.  According to "Lucene in Action", running optimization is
not recommended in my case.  So would you please advise?

Thanks,
Dan


Michael McCandless-2 wrote:
> 
> 
> Either optimize() or expungeDeletes() will reclaim the disk space used  
> by deleted documents.
> 
> Also, over time, as segments that have marked deletions are merged,  
> the disk space is also reclaimed.
> 
> Mike
> 
> dan at gmail wrote:
> 
>>
>> Hello,
>>
>> Could someone please confirm that calling indexWriter.optimize() is  
>> the only
>> way to clean out the deleted documents from the disk?
>>
>> I understand that indexWriter.deleteDocuments() does not clean the  
>> disk
>> space, and I tested that calling after indexWriter.flush() and
>> indexWriter.close() after indexWriter.deleteDocuments() does not  
>> clean the
>> disk space either.  So do they only mark the documents have been  
>> deleted,
>> then which method really do the "delete" the documents (from the  
>> disk)?
>>
>> Thanks,
>> Dan
>> -- 
>> View this message in context:
>> http://www.nabble.com/How-did-Lucene-clean-out-the-deleted-documents-from-the-disk--tp18534562p18534562.html
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/How-did-Lucene-clean-out-the-deleted-documents-from-the-disk--tp18534562p18537767.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35017-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 18 21:32:28 2008
Return-Path: <java-user-return-35017-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 34507 invoked from network); 18 Jul 2008 21:32:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Jul 2008 21:32:28 -0000
Received: (qmail 67029 invoked by uid 500); 18 Jul 2008 21:32:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66836 invoked by uid 500); 18 Jul 2008 21:32:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66824 invoked by uid 99); 18 Jul 2008 21:32:21 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Jul 2008 14:32:21 -0700
X-ASF-Spam-Status: No, hits=-4.0 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [128.230.108.46] (HELO SUEXCL-02.ad.syr.edu) (128.230.108.46)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Jul 2008 21:31:28 +0000
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Bug in CJKTokenizer
Date: Fri, 18 Jul 2008 17:29:09 -0400
Message-ID: <9294E20AED46934EA459020706463F94C59BDC@SUEXCL-02.ad.syr.edu>
In-Reply-To: <55F9EF953014514EB6BEE1F5198CEEB4032CF182@exchange.slc.mainstreamdata.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Bug in CJKTokenizer
Thread-Index: AcjpGb82zl3ThPaJQGGf6tjFM1AvmAAAmIpA
From: "Steven A Rowe" <sarowe@syr.edu>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Scott,

I think this sounds reasonable, but why not also add LATIN_EXTENDED_B =
and LATIN_EXTENDED_ADDITIONAL?  AFAICT, among other things, these cover =
some eastern European languages and Vietnamese, respectively.

Steve

On 07/18/2008 at 5:03 PM, Scott Smith wrote:
> org.apache.lucene.analysis.cjk.CJKTokenizer is in the
> "contrib" portion of lucene, so I'm not sure if this is the
> right place to mention this or not.  I was doing some
> detailed analysis of how this tokenizer worked and noticed
> the following behavior (which I would classify as a bug).
>=20
> If you pass the word "construccion" to the tokenizer, it returns a
> single token: "construccion".  That seems correct. If you pass the =
word
> "construcci=F3n" to this tokenizer, it will generate three tokens:
> "construcci", "=F3", and "n".  This is happens because the accented =
"o" is
> not treated as a Latin-1 character.  Splitting the word seems like a =
bug
> and violates the "does a decent job for most European languages"
> statement.
>=20
> The fix seems straight forward.  I replaced the following 2
> lines (in the CJKTokenizer class):
>=20
>             if ((ub =3D=3D Character.UnicodeBlock.BASIC_LATIN)
>                  || (ub =3D=3D =
Character.UnicodeBlock.HALFWIDTH_AND_FULLWIDTH_FORMS))
>=20
> With
>=20
>             if ((ub =3D=3D Character.UnicodeBlock.BASIC_LATIN) // =
chars 0x00-0x7f
>                  || (ub =3D=3D =
Character.UnicodeBlock.LATIN_1_SUPPLEMENT)    // char 0x80-0xff
>                  || (ub =3D=3D =
Character.UnicodeBlock.LATIN_EXTENDED_A)      // char 0x100-0x17f
>                  || (ub =3D=3D =
Character.UnicodeBlock.HALFWIDTH_AND_FULLWIDTH_FORMS))
>=20
> Am I missing something or does this seem like a reasonable
> thing to want to do?

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35018-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 18 21:48:42 2008
Return-Path: <java-user-return-35018-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 50302 invoked from network); 18 Jul 2008 21:48:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Jul 2008 21:48:42 -0000
Received: (qmail 83593 invoked by uid 500); 18 Jul 2008 21:48:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83554 invoked by uid 500); 18 Jul 2008 21:48:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83543 invoked by uid 99); 18 Jul 2008 21:48:34 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Jul 2008 14:48:34 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ssmith@mainstreamdata.com designates 209.63.42.201 as permitted sender)
Received: from [209.63.42.201] (HELO nexus1.mainstreamdata.com) (209.63.42.201)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Jul 2008 21:47:41 +0000
Received: from localhost (localhost [127.0.0.1])
	by nexus1.mainstreamdata.com (Postfix) with ESMTP id 671F773014
	for <java-user@lucene.apache.org>; Fri, 18 Jul 2008 15:47:36 -0600 (MDT)
X-Virus-Scanned: Debian amavisd-new at nexus1.mainstreamdata.com
Received: from nexus1.mainstreamdata.com ([127.0.0.1])
	by localhost (nexus1.mainstreamdata.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id Zv4O6TCSI7Nt for <java-user@lucene.apache.org>;
	Fri, 18 Jul 2008 15:47:30 -0600 (MDT)
Received: from exchange.slc.mainstreamdata.com (exchange.slc.mainstreamdata.com [10.2.1.132])
	by nexus1.mainstreamdata.com (Postfix) with ESMTP id 311DD73002
	for <java-user@lucene.apache.org>; Fri, 18 Jul 2008 15:47:30 -0600 (MDT)
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Bug in CJKTokenizer
Date: Fri, 18 Jul 2008 15:47:29 -0600
Message-ID: <55F9EF953014514EB6BEE1F5198CEEB4032CF197@exchange.slc.mainstreamdata.com>
In-Reply-To: <9294E20AED46934EA459020706463F94C59BDC@SUEXCL-02.ad.syr.edu>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Bug in CJKTokenizer
thread-index: AcjpGb82zl3ThPaJQGGf6tjFM1AvmAAAmIpAAACXjjA=
References: <55F9EF953014514EB6BEE1F5198CEEB4032CF182@exchange.slc.mainstreamdata.com> <9294E20AED46934EA459020706463F94C59BDC@SUEXCL-02.ad.syr.edu>
From: "Scott Smith" <ssmith@mainstreamdata.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

I'm certainly not a language expert and so you may be correct.  I do see =
references to some of the eastern European languages in the descriptions =
of these two and so maybe they should be added as well.

-----Original Message-----
From: Steven A Rowe [mailto:sarowe@syr.edu]=20
Sent: Friday, July 18, 2008 3:29 PM
To: java-user@lucene.apache.org
Subject: RE: Bug in CJKTokenizer

Hi Scott,

I think this sounds reasonable, but why not also add LATIN_EXTENDED_B =
and LATIN_EXTENDED_ADDITIONAL?  AFAICT, among other things, these cover =
some eastern European languages and Vietnamese, respectively.

Steve

On 07/18/2008 at 5:03 PM, Scott Smith wrote:
> org.apache.lucene.analysis.cjk.CJKTokenizer is in the
> "contrib" portion of lucene, so I'm not sure if this is the
> right place to mention this or not.  I was doing some
> detailed analysis of how this tokenizer worked and noticed
> the following behavior (which I would classify as a bug).
>=20
> If you pass the word "construccion" to the tokenizer, it returns a
> single token: "construccion".  That seems correct. If you pass the =
word
> "construcci=F3n" to this tokenizer, it will generate three tokens:
> "construcci", "=F3", and "n".  This is happens because the accented =
"o" is
> not treated as a Latin-1 character.  Splitting the word seems like a =
bug
> and violates the "does a decent job for most European languages"
> statement.
>=20
> The fix seems straight forward.  I replaced the following 2
> lines (in the CJKTokenizer class):
>=20
>             if ((ub =3D=3D Character.UnicodeBlock.BASIC_LATIN)
>                  || (ub =3D=3D =
Character.UnicodeBlock.HALFWIDTH_AND_FULLWIDTH_FORMS))
>=20
> With
>=20
>             if ((ub =3D=3D Character.UnicodeBlock.BASIC_LATIN) // =
chars 0x00-0x7f
>                  || (ub =3D=3D =
Character.UnicodeBlock.LATIN_1_SUPPLEMENT)    // char 0x80-0xff
>                  || (ub =3D=3D =
Character.UnicodeBlock.LATIN_EXTENDED_A)      // char 0x100-0x17f
>                  || (ub =3D=3D =
Character.UnicodeBlock.HALFWIDTH_AND_FULLWIDTH_FORMS))
>=20
> Am I missing something or does this seem like a reasonable
> thing to want to do?

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35019-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 18 21:51:30 2008
Return-Path: <java-user-return-35019-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53490 invoked from network); 18 Jul 2008 21:51:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Jul 2008 21:51:30 -0000
Received: (qmail 89172 invoked by uid 500); 18 Jul 2008 21:51:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89145 invoked by uid 500); 18 Jul 2008 21:51:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89134 invoked by uid 99); 18 Jul 2008 21:51:23 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Jul 2008 14:51:22 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=SPF_NEUTRAL,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [64.233.184.233] (HELO wr-out-0506.google.com) (64.233.184.233)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Jul 2008 21:50:27 +0000
Received: by wr-out-0506.google.com with SMTP id c30so459908wra.21
        for <java-user@lucene.apache.org>; Fri, 18 Jul 2008 14:50:50 -0700 (PDT)
Received: by 10.90.63.12 with SMTP id l12mr755058aga.5.1216417849841;
        Fri, 18 Jul 2008 14:50:49 -0700 (PDT)
Received: from ?10.17.4.4? ( [72.93.214.93])
        by mx.google.com with ESMTPS id 7sm3233301wrl.41.2008.07.18.14.50.48
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Fri, 18 Jul 2008 14:50:48 -0700 (PDT)
Message-Id: <641A4A2A-947E-4335-B265-E427B1AD7087@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <18537767.post@talk.nabble.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: How did Lucene clean out the deleted documents from the disk?
Date: Fri, 18 Jul 2008 17:50:47 -0400
References: <18534562.post@talk.nabble.com> <8CB63474-51CE-430D-BD08-6CEBCD2197D9@mikemccandless.com> <18537767.post@talk.nabble.com>
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org


That's right, you do not need to run optimize.

Over time the disk space will gradually be reclaimed through Lucene's  
normal merging...

Mike

dan at gmail wrote:

>
>> Also, over time, as segments that have marked deletions are merged,
>> the disk space is also reclaimed.
>
> Thanks Mike.
>
> So can I say that calling optimzie() is really optional?  Because I  
> was
> worrying that these deleted documents would never get cleaned if I  
> don't run
> optimize() and eventually it would run out of the disk space.  What  
> I am
> trying to figure out here is if optimization is mandatory.  I know  
> that
> optimization would improve the search performance, however it would  
> take a
> long time to run and the application I am writing needs to update  
> the index
> very frequently.  According to "Lucene in Action", running  
> optimization is
> not recommended in my case.  So would you please advise?
>
> Thanks,
> Dan
>
>
> Michael McCandless-2 wrote:
>>
>>
>> Either optimize() or expungeDeletes() will reclaim the disk space  
>> used
>> by deleted documents.
>>
>> Also, over time, as segments that have marked deletions are merged,
>> the disk space is also reclaimed.
>>
>> Mike
>>
>> dan at gmail wrote:
>>
>>>
>>> Hello,
>>>
>>> Could someone please confirm that calling indexWriter.optimize() is
>>> the only
>>> way to clean out the deleted documents from the disk?
>>>
>>> I understand that indexWriter.deleteDocuments() does not clean the
>>> disk
>>> space, and I tested that calling after indexWriter.flush() and
>>> indexWriter.close() after indexWriter.deleteDocuments() does not
>>> clean the
>>> disk space either.  So do they only mark the documents have been
>>> deleted,
>>> then which method really do the "delete" the documents (from the
>>> disk)?
>>>
>>> Thanks,
>>> Dan
>>> -- 
>>> View this message in context:
>>> http://www.nabble.com/How-did-Lucene-clean-out-the-deleted-documents-from-the-disk--tp18534562p18534562.html
>>> Sent from the Lucene - Java Users mailing list archive at  
>>> Nabble.com.
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>
> -- 
> View this message in context: http://www.nabble.com/How-did-Lucene-clean-out-the-deleted-documents-from-the-disk--tp18534562p18537767.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35020-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 18 22:01:46 2008
Return-Path: <java-user-return-35020-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64245 invoked from network); 18 Jul 2008 22:01:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Jul 2008 22:01:46 -0000
Received: (qmail 3489 invoked by uid 500); 18 Jul 2008 22:01:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3450 invoked by uid 500); 18 Jul 2008 22:01:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3439 invoked by uid 99); 18 Jul 2008 22:01:38 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Jul 2008 15:01:38 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Jul 2008 22:00:45 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id A176171C45C; Fri, 18 Jul 2008 15:00:39 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id 9E0F271C44F
	for <java-user@lucene.apache.org>; Fri, 18 Jul 2008 15:00:39 -0700 (PDT)
Date: Fri, 18 Jul 2008 15:00:39 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Boolean expression for no terms OR matching a wildcard
In-Reply-To: <7A04AEE6-6697-417D-8E12-50986437597D@gmail.com>
Message-ID: <Pine.LNX.4.62.0807181456060.24508@radix.cryptio.net>
References: <F28D06AF-4268-4854-9B59-4A2D0879FAD8@gmail.com>
 <d31a84170807140604u595b4883i8a26f404252c205e@mail.gmail.com>
 <Pine.LNX.4.62.0807151343310.18025@radix.cryptio.net>
 <7A04AEE6-6697-417D-8E12-50986437597D@gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org

: Maybe this is easier ... suppose what I'm indexing is a phone number, and
: there are multiple phone numbers for what I'm indexing under the same field
: (phone) and I want the wildcard query to match only records that have either
: no phone numbers at all OR where ALL phone numbers are in a specific area code
: (e.g. 800* would match all in the 800 area code).

i can't think of anyway to accomplish the second part of your query.  
specificly, given the following records...

  Doc1: field1:AAA, field1:Aaa, field1:Bb, field1:C, field2:X, field3:Y
  Doc2: field1:AAA, field1:Aaa, field1:Aa, field2:Z

...i can't think of any type of query like field1:A* which would match 
Doc2 but not Doc1 (because there are other field1 values that do not start 
with 'A')



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35021-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 18 22:02:15 2008
Return-Path: <java-user-return-35021-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64509 invoked from network); 18 Jul 2008 22:02:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Jul 2008 22:02:14 -0000
Received: (qmail 6095 invoked by uid 500); 18 Jul 2008 22:02:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5178 invoked by uid 500); 18 Jul 2008 22:02:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5167 invoked by uid 99); 18 Jul 2008 22:02:07 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Jul 2008 15:02:07 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Jul 2008 22:01:14 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id DBC6771C475; Fri, 18 Jul 2008 15:01:38 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id D9E6771C473
	for <java-user@lucene.apache.org>; Fri, 18 Jul 2008 15:01:38 -0700 (PDT)
Date: Fri, 18 Jul 2008 15:01:38 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Lucene & XFile interface
In-Reply-To: <487D2676.7050102@stimulussoft.com>
Message-ID: <Pine.LNX.4.62.0807181500540.24508@radix.cryptio.net>
References: <487D2676.7050102@stimulussoft.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: remote drive. Is there a way to easily modify lucene such that when it reads /
: writes from the Index it uses the XFile  object instead of File? In this way,
: there is a lot more flexibility on where the index can be stored (without
: having to rely on operating system mount points). Is it correct to subclass
: org.apache.lucene.store.Directory for this purpose? Are there any other

That is exactly what the org.apache.lucene.store.Directory abstraction is 
for, so you can keep your index anywhere you want.


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35022-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 18 22:25:04 2008
Return-Path: <java-user-return-35022-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79599 invoked from network); 18 Jul 2008 22:25:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Jul 2008 22:25:04 -0000
Received: (qmail 20862 invoked by uid 500); 18 Jul 2008 22:24:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20831 invoked by uid 500); 18 Jul 2008 22:24:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 20815 invoked by uid 99); 18 Jul 2008 22:24:56 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 18 Jul 2008 15:24:56 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [217.146.182.34] (HELO web27102.mail.ukl.yahoo.com) (217.146.182.34)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 18 Jul 2008 22:24:02 +0000
Received: (qmail 76563 invoked by uid 60001); 18 Jul 2008 22:24:24 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=1hvWK+s9uzZ6MsuDdPvnyX4OJjoOPGD9r6uCUAJ9VA3O3mEh1Ftc0c+sQE0HrgpxI+d3012v+uIP6fI3t/z5DjXqVDXe92+29bRinIccUBpVmM8lEfTajcPhWnWOYL70HOXB26d//fgE4CUPMsqDEYpZbVF/K+kw8QQ1Z9ny1G8=;
Received: from [79.201.92.203] by web27102.mail.ukl.yahoo.com via HTTP; Fri, 18 Jul 2008 22:24:24 GMT
X-Mailer: YahooMailRC/1042.40 YahooMailWebService/0.7.218
Date: Fri, 18 Jul 2008 22:24:24 +0000 (GMT)
From: eks dev <eksdev@yahoo.co.uk>
Subject: Re: Boolean expression for no terms OR matching a wildcard
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
Message-ID: <422242.75662.qm@web27102.mail.ukl.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Analyzer that detects your condition "ALL match something", if possible at =
all...=0Ae.g. "800123456 80034543534 80023423423" -> 800=0A=0A than you put=
 it in ALL_MATCH field and match this condition against it... if this prefi=
x needs to be variable, you could extract all matching prefixes to this fii=
eld an make your query work like "ALL_MATCH:800" and care not for the rest =
:) than yo would not need field1 at all for these queries=0A=0Ayou were loo=
king for something like this or you need "Query solution"?=0A=0A=0A=0A-----=
 Original Message ----=0A> From: Chris Hostetter <hossman_lucene@fucit.org>=
=0A> To: java-user@lucene.apache.org=0A> Sent: Saturday, 19 July, 2008 12:0=
0:39 AM=0A> Subject: Re: Boolean expression for no terms OR matching a wild=
card=0A> =0A> : Maybe this is easier ... suppose what I'm indexing is a pho=
ne number, and=0A> : there are multiple phone numbers for what I'm indexing=
 under the same field=0A> : (phone) and I want the wildcard query to match =
only records that have either=0A> : no phone numbers at all OR where ALL ph=
one numbers are in a specific area code=0A> : (e.g. 800* would match all in=
 the 800 area code).=0A> =0A> i can't think of anyway to accomplish the sec=
ond part of your query.  =0A> specificly, given the following records...=0A=
> =0A>   Doc1: field1:AAA, field1:Aaa, field1:Bb, field1:C, field2:X, field=
3:Y=0A>   Doc2: field1:AAA, field1:Aaa, field1:Aa, field2:Z=0A> =0A> ...i c=
an't think of any type of query like field1:A* which would match =0A> Doc2 =
but not Doc1 (because there are other field1 values that do not start =0A> =
with 'A')=0A> =0A> =0A> =0A> -Hoss=0A> =0A> =0A> --------------------------=
-------------------------------------------=0A> To unsubscribe, e-mail: jav=
a-user-unsubscribe@lucene.apache.org=0A> For additional commands, e-mail: j=
ava-user-help@lucene.apache.org=0A=0A=0A=0A      __________________________=
________________________________=0ANot happy with your email address?.=0AGe=
t the one you really want - millions of new email addresses available now a=
t Yahoo! http://uk.docs.yahoo.com/ymail/new.html

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35023-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jul 19 09:54:18 2008
Return-Path: <java-user-return-35023-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 49992 invoked from network); 19 Jul 2008 09:54:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Jul 2008 09:54:18 -0000
Received: (qmail 57195 invoked by uid 500); 19 Jul 2008 09:54:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57164 invoked by uid 500); 19 Jul 2008 09:54:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57152 invoked by uid 99); 19 Jul 2008 09:54:10 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 19 Jul 2008 02:54:10 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of sascha.fahl@googlemail.com designates 209.85.134.189 as permitted sender)
Received: from [209.85.134.189] (HELO mu-out-0910.google.com) (209.85.134.189)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 19 Jul 2008 09:53:14 +0000
Received: by mu-out-0910.google.com with SMTP id g7so408972muf.5
        for <java-user@lucene.apache.org>; Sat, 19 Jul 2008 02:53:36 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=googlemail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:to:content-type
         :content-transfer-encoding:mime-version:subject:date:x-mailer:from;
        bh=RfSFARpKpRNP4vqO5zLyCZ6BYYqkM3lqYQHiaWpMbZE=;
        b=B96SAxXO/r15PIAFKoA0gjFvZpmXDoBb1VnMH1IfY0D2sws3Nc1KbX8VhnJAR/6eXZ
         Ov9nKTsFjssQo77OwgxNzyksFgbZb5FSIHSnbQG7tkBmcMFUuSQcIpzjzWi/nJqqPzAo
         quDhbUb7NhhKdV6ssfoXqPwAAuSrXAreK8MSk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=googlemail.com; s=gamma;
        h=message-id:to:content-type:content-transfer-encoding:mime-version
         :subject:date:x-mailer:from;
        b=aSmrfiePIQQYefrxH+IyB8y/VyQ13RCSnEHbXtFErcVW625BQLZq9wAJztZyvyIoPb
         vq8zp3sg53K0mOg+i/d3cJv90owvqrKaq6xGsS2t56jREwrwQx2J6NnGPDfKF2uiHigZ
         2GcC5xrQhfsqsG3mIyD8uJUKIwzcL3e8muDgU=
Received: by 10.103.201.5 with SMTP id d5mr940429muq.18.1216461216656;
        Sat, 19 Jul 2008 02:53:36 -0700 (PDT)
Received: from ?192.168.0.132? ( [92.50.95.241])
        by mx.google.com with ESMTPS id u9sm26380478muf.12.2008.07.19.02.53.35
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Sat, 19 Jul 2008 02:53:35 -0700 (PDT)
Message-Id: <84EBC490-7B1D-4EAA-A3CE-3BA3C39CCE57@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
Subject: GeoSort approach - your opinion
Date: Sat, 19 Jul 2008 11:53:33 +0200
X-Mailer: Apple Mail (2.926)
From: Sascha Fahl <sascha.fahl@googlemail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

last week I realized an approach for GeoSort in lucene. Inspired by  
"Lucene in action" I modified the algorithm in the following way. When  
an IndexReader for a certain index is created, a cache for  
geoinformation is created - this simply is a 2 dimensional int Array.  
So it is possible to cache geoinformation for 1.000.000 docs in around  
8 MB. Everytime the ScoreDocComparator.compare(ScoreDoc i, ScoreDoc j)  
method is called I fetch the int Array with the geoinfo from the cache  
and calculate the distance.
I think this is a quite good solution:
1. Only the distances of real Hits are calculated. So only needed  
operations are done.
2. The geoinformation is not fetched via IndexReader.doc(i) but  
directly from the cache that is placed in the RAM
3. All hits get returned because this approach does not work with a  
boxed model, that excludes documents that are not within a certain  
radius (this is very annoying if there is a hit with a distance of 51  
km and the radius is 50 km)

What do you think about this approach? The only possible advantage is  
the cache I think because I do not really know if the JVM is good in  
handling 10 MB of data in the RAM.


MfG

Sascha Fahl
sascha.fahl@gmail.com




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35024-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jul 19 10:00:41 2008
Return-Path: <java-user-return-35024-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 52930 invoked from network); 19 Jul 2008 10:00:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Jul 2008 10:00:41 -0000
Received: (qmail 59844 invoked by uid 500); 19 Jul 2008 10:00:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59811 invoked by uid 500); 19 Jul 2008 10:00:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59800 invoked by uid 99); 19 Jul 2008 10:00:31 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 19 Jul 2008 03:00:31 -0700
X-ASF-Spam-Status: No, hits=4.0 required=10.0
	tests=DNS_FROM_OPENWHOIS,FORGED_YAHOO_RCVD,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 19 Jul 2008 09:59:37 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KK9EQ-0006dS-0d
	for java-user@lucene.apache.org; Sat, 19 Jul 2008 03:00:02 -0700
Message-ID: <18543061.post@talk.nabble.com>
Date: Sat, 19 Jul 2008 03:00:02 -0700 (PDT)
From: starz10de <farag_ahmed@yahoo.com>
To: java-user@lucene.apache.org
Subject: Return the sentence number in the indexed files
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: farag_ahmed@yahoo.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hi All,

I have a text files that contain several sentences, there is space between
each sentence.
When searching the index  , i get the path for the documents that match the
query

 String path = doc.get("path");


 Is it possible to get the number of the sentence that match the query
inside the matched documents?

Thanks in advance
-- 
View this message in context: http://www.nabble.com/Return-the-sentence-number-in-the-indexed-files-tp18543061p18543061.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35025-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jul 19 11:30:43 2008
Return-Path: <java-user-return-35025-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91282 invoked from network); 19 Jul 2008 11:30:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Jul 2008 11:30:43 -0000
Received: (qmail 94398 invoked by uid 500); 19 Jul 2008 11:30:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94354 invoked by uid 500); 19 Jul 2008 11:30:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94343 invoked by uid 99); 19 Jul 2008 11:30:36 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 19 Jul 2008 04:30:36 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 19 Jul 2008 11:29:41 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KKAdZ-0000q7-7q
	for java-user@lucene.apache.org; Sat, 19 Jul 2008 04:30:05 -0700
Message-ID: <18543588.post@talk.nabble.com>
Date: Sat, 19 Jul 2008 04:30:05 -0700 (PDT)
From: Sebastin <sebasmtech@gmail.com>
To: java-user@lucene.apache.org
Subject: How to avoid duplicate records in lucene
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: sebasmtech@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hi All,

Is there any possibility to avoid duplicate records in lucene  2.3.1? 
-- 
View this message in context: http://www.nabble.com/How-to-avoid-duplicate-records-in-lucene-tp18543588p18543588.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35026-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jul 19 14:49:12 2008
Return-Path: <java-user-return-35026-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8443 invoked from network); 19 Jul 2008 14:49:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Jul 2008 14:49:11 -0000
Received: (qmail 13792 invoked by uid 500); 19 Jul 2008 14:49:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13760 invoked by uid 500); 19 Jul 2008 14:49:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13749 invoked by uid 99); 19 Jul 2008 14:49:04 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 19 Jul 2008 07:49:04 -0700
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of peterlkeegan@gmail.com designates 209.85.200.169 as permitted sender)
Received: from [209.85.200.169] (HELO wf-out-1314.google.com) (209.85.200.169)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 19 Jul 2008 14:48:08 +0000
Received: by wf-out-1314.google.com with SMTP id 28so465538wfc.20
        for <java-user@lucene.apache.org>; Sat, 19 Jul 2008 07:48:33 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=CBRfc/7j58Wamwo35RvJqdU099tyVWV0WbFm6cuPprI=;
        b=a4q6YKv/2DBhSzguu83EVkzUuArm/gT3vPQ9qy5iCD/U4oBPkhcSjXrixRTHzO0CsZ
         7HnADcPMhdkD07cksRlPi6u45yUNZHma77RiauLKCvqZxJXHm/YjZxxyMd6NAkeCNLEf
         sgyOFs5M6bpFzxeRKDjMX6E9njdh8cJVJAIac=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=GNS6AknYKlwpDGeBN1qcDY750N1Ea1PsD1a1hpzGgBwuxbe++/WLbFkuyg93nAEB0H
         AzJLWl/CtwE0oWL5iFoV4vFBy2MnNAxpPVwMaKlkKQoOb/sMy1TNBqlhIgE7RcJF7hXC
         Z8WHln6raswmJQXz72WyG9CZb3y05wSD0B0xo=
Received: by 10.142.214.11 with SMTP id m11mr520715wfg.69.1216478913378;
        Sat, 19 Jul 2008 07:48:33 -0700 (PDT)
Received: by 10.142.231.3 with HTTP; Sat, 19 Jul 2008 07:48:33 -0700 (PDT)
Message-ID: <e994873a0807190748m1a331ce2k7b4b942a6264ae2c@mail.gmail.com>
Date: Sat, 19 Jul 2008 10:48:33 -0400
From: "Peter Keegan" <peterlkeegan@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Payloads and SpanScorer
In-Reply-To: <e994873a0807101109v33f6cdcpe9164c39f7dc07b4@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_38577_14975858.1216478913379"
References: <e994873a0807091155x565924ffo212457ec808e77e7@mail.gmail.com>
	 <87F4AC78-A127-4D68-820B-AD0B55038978@apache.org>
	 <e994873a0807100659y6de7a772t4265080fe5bc83c9@mail.gmail.com>
	 <CE4A60BB-D8D6-49D3-8B2B-235D7CC2BC02@apache.org>
	 <e994873a0807101109v33f6cdcpe9164c39f7dc07b4@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_38577_14975858.1216478913379
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I discovered this post from Karl Wettin in May about SpanNearQuery scoring:
http://www.nabble.com/SpanNearQuery-scoring-td17425454.html#a17425454

Karl apparently had the same expectations I had about the usage model of
spans and boosts. I also found JIRA issue 533 (SpanQuery scoring: SpanWeight
lacks a recursive traversal of the query tree), which addresses the same
problem.

So, I made an attempt to modify SpanNearQuery to expand a nested
BoostingTermQuery, but soon realized while debugging that since
BoostingTermQuery loads payloads from all term positions in the document,
not just the ones constrained by the outer SpanQuery, the resulting score
could be higher than it should be.

Next, I followed Grant's idea of providing span classes that read payloads.
I implemented a 'BoostingNearQuery' that extends 'SpanNearQuery' that
provides term boosts on proximity queries. I will submit a patch to a JIRA
later. This patch works but probably needs more work. I don't like the use
of 'instanceof', but I didn't want to touch Spans or TermSpans. Also, the
payload code is mostly a copy of what's in BoostingTermQuery and could be
common-sourced somewhere. Feel free to throw darts at it :)

Peter



On Thu, Jul 10, 2008 at 2:09 PM, Peter Keegan <peterlkeegan@gmail.com>
wrote:

> I may take a crack at this. Any more thoughts you may have on the
> implementation are welcome, but I don't want to distract you too much.
>
> Thanks,
> Peter
>
>
>
> On Thu, Jul 10, 2008 at 1:30 PM, Grant Ingersoll <gsingers@apache.org>
> wrote:
>
>> Makes sense.  It was always my intent to implement things like
>> PayloadNearQuery, see http://wiki.apache.org/lucene-java/Payload_Planning
>>
>> I think it would make sense to develop these and I would be happy to help
>> shepherd a patch through, but am not in a position to generate said patch at
>> this moment in time.
>>
>>
>> On Jul 10, 2008, at 9:59 AM, Peter Keegan wrote:
>>
>>  Suppose I create a SpanNearQuery phrase with the terms "long range
>>> missiles"
>>> and some slop factor. Each term is actually a BoostingTermQuery.
>>> Currently,
>>> the score computed by SpanNearQuery.SpanScorer is based on the sloppy
>>> frequency of the terms and their weights (this is fine). But even though
>>> each term is actually a BoostingTermQuery, the BoostingTermScorer (and
>>> therefore 'processPayload') is never invoked for this type of query.
>>>
>>> I was looking for a way to have SpanNearQuery (also SpanOrQuery,
>>> SpanFirstQuery) recognize that the terms in the phrase should boost the
>>> overall score based on the payloads assigned to them. Thus the score from
>>> the SpanNearQuery would be higher if :
>>>
>>> a) the terms have payloads that boost their scores
>>> b) the terms are positionally next to each other (minimal slop - as it
>>> works
>>> now)
>>>
>>>
>>> Does this make sense?
>>>
>>> Peter
>>>
>>> On Thu, Jul 10, 2008 at 9:21 AM, Grant Ingersoll <gsingers@apache.org>
>>> wrote:
>>>
>>>  I'm not fully following what you want.  Can you explain a bit more?
>>>>
>>>> Thanks,
>>>> Grant
>>>>
>>>>
>>>> On Jul 9, 2008, at 2:55 PM, Peter Keegan wrote:
>>>>
>>>> If a SpanQuery is constructed from one or more BoostingTermQuery(s), the
>>>>
>>>>> payloads on the terms are never processed by the SpanScorer. It seems
>>>>> to
>>>>> me
>>>>> that you would want the SpanScorer to score the document both on the
>>>>> spans
>>>>> distance and the payload score. So, either the SpanScorer would have to
>>>>> process the payloads (duplicating the code in BoostingSpanScorer), or
>>>>> perhaps SpanScorer could access the BoostingSpanScorers, or maybe
>>>>> there's
>>>>> another approach.
>>>>>
>>>>> Any thoughts on how to accomplish this?
>>>>>
>>>>> Peter
>>>>>
>>>>>
>>>> --------------------------
>>>> Grant Ingersoll
>>>> http://www.lucidimagination.com
>>>>
>>>> Lucene Helpful Hints:
>>>> http://wiki.apache.org/lucene-java/BasicsOfPerformance
>>>> http://wiki.apache.org/lucene-java/LuceneFAQ
>>>>
>>>>
>>>>
>>>>
>>>>
>>>>
>>>>
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>>
>> --------------------------
>> Grant Ingersoll
>> http://www.lucidimagination.com
>>
>> Lucene Helpful Hints:
>> http://wiki.apache.org/lucene-java/BasicsOfPerformance
>> http://wiki.apache.org/lucene-java/LuceneFAQ
>>
>>
>>
>>
>>
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>

------=_Part_38577_14975858.1216478913379--

From java-user-return-35027-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jul 19 15:46:30 2008
Return-Path: <java-user-return-35027-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67524 invoked from network); 19 Jul 2008 15:46:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Jul 2008 15:46:30 -0000
Received: (qmail 42671 invoked by uid 500); 19 Jul 2008 15:46:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42636 invoked by uid 500); 19 Jul 2008 15:46:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42625 invoked by uid 99); 19 Jul 2008 15:46:22 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 19 Jul 2008 08:46:21 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [68.142.206.163] (HELO n24.bullet.mail.mud.yahoo.com) (68.142.206.163)
    by apache.org (qpsmtpd/0.29) with SMTP; Sat, 19 Jul 2008 15:45:26 +0000
Received: from [68.142.200.226] by n24.bullet.mail.mud.yahoo.com with NNFMP; 19 Jul 2008 15:44:34 -0000
Received: from [209.191.119.183] by t7.bullet.mud.yahoo.com with NNFMP; 19 Jul 2008 15:44:34 -0000
Received: from [127.0.0.1] by omp106.mail.mud.yahoo.com with NNFMP; 19 Jul 2008 15:44:34 -0000
X-Yahoo-Newman-Id: 257830.7265.bm@omp106.mail.mud.yahoo.com
Received: (qmail 29183 invoked from network); 19 Jul 2008 15:44:32 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=Received:X-YMail-OSG:X-Yahoo-Newman-Property:Message-ID:Date:From:User-Agent:MIME-Version:To:Subject:References:In-Reply-To:Content-Type:Content-Transfer-Encoding;
  b=fI/Wm5dwX+ClCZj4FpqkyAvltSB1N9EVEd51alZ9/JyjbnjBq6uW94B2idF+nO4gKhjqEsT6x5VyUw2ZEcZPdeu/J8EAqXX6AUy3QuoIGGvSoZ5+Mwc82ReZGtv92KCkH8QR4xCHPH1Q29+GohRG3g3MwpfxgoZNQZJ0Tg9vLr8=  ;
Received: from unknown (HELO ?192.168.2.3?) (markharw00d@194.106.34.5 with plain)
  by smtp002.mail.ukl.yahoo.com with SMTP; 19 Jul 2008 15:44:31 -0000
X-YMail-OSG: sdhw8DcVM1kmso8fq3u2EqNUffoefZ3TdgPHqJe8L1aEbIrx1W6.zN288Aoo9fYP_fiY7FwQGUCsM0DsGdxpvGnMElq2n70pV.RkuYGce_afNcJ3YbovVQhsDaABeeWPa.I-
X-Yahoo-Newman-Property: ymail-3
Message-ID: <48820BD6.5080900@yahoo.co.uk>
Date: Sat, 19 Jul 2008 16:44:22 +0100
From: markharw00d <markharw00d@yahoo.co.uk>
User-Agent: Thunderbird 2.0.0.14 (Windows/20080421)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: How to avoid duplicate records in lucene
References: <18543588.post@talk.nabble.com>
In-Reply-To: <18543588.post@talk.nabble.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Sebastin wrote:
> Hi All,
>
> Is there any possibility to avoid duplicate records in lucene  2.3.1? 
>   

At index-time or query time?
See DuplicateFilter in contrib/queries for a query-time filter


Cheers
Mark


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35028-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jul 19 21:39:50 2008
Return-Path: <java-user-return-35028-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 39511 invoked from network); 19 Jul 2008 21:39:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Jul 2008 21:39:50 -0000
Received: (qmail 15693 invoked by uid 500); 19 Jul 2008 21:39:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15667 invoked by uid 500); 19 Jul 2008 21:39:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15656 invoked by uid 99); 19 Jul 2008 21:39:42 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 19 Jul 2008 14:39:42 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.66] (HELO spunkymail-a17.g.dreamhost.com) (208.97.132.66)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 19 Jul 2008 21:38:46 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a17.g.dreamhost.com (Postfix) with ESMTP id 6E55375238
	for <java-user@lucene.apache.org>; Sat, 19 Jul 2008 14:38:39 -0700 (PDT)
Message-Id: <910A445A-0C7A-4263-9419-C4F75E92EF0A@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <18543061.post@talk.nabble.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: Return the sentence number in the indexed files
Date: Sat, 19 Jul 2008 17:38:38 -0400
References: <18543061.post@talk.nabble.com>
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org


On Jul 19, 2008, at 6:00 AM, starz10de wrote:

>
> Hi All,
>
> I have a text files that contain several sentences, there is space  
> between
> each sentence.
> When searching the index  , i get the path for the documents that  
> match the
> query
>
> String path = doc.get("path");
>
>
> Is it possible to get the number of the sentence that match the query
> inside the matched documents?

Not without some extra work.  This kind of thing requires post (or  
pre) processing.  You can use SpanQuery to know where in a document  
you matched, and then do the sentence calculations.  Another option is  
to index each sentence as a separate document and then post process to  
combine.

If you search the archives on this list and java-dev you'll see  
several discussions on the topic.   See:
http://lucene.markmail.org/message/we25gm32p6qot32c?q=sentence+detection
and
http://lucene.markmail.org/message/uq6ffx3oqsulgxys?q=sentence

HTH,
Grant


--------------------------
Grant Ingersoll
http://www.lucidimagination.com

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ








---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35029-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jul 20 11:54:52 2008
Return-Path: <java-user-return-35029-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 49470 invoked from network); 20 Jul 2008 11:54:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Jul 2008 11:54:52 -0000
Received: (qmail 13068 invoked by uid 500); 20 Jul 2008 11:54:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13031 invoked by uid 500); 20 Jul 2008 11:54:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13020 invoked by uid 99); 20 Jul 2008 11:54:46 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 20 Jul 2008 04:54:46 -0700
X-ASF-Spam-Status: No, hits=4.0 required=10.0
	tests=DNS_FROM_OPENWHOIS,FORGED_YAHOO_RCVD,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 20 Jul 2008 11:53:49 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KKXTY-0004dg-4x
	for java-user@lucene.apache.org; Sun, 20 Jul 2008 04:53:16 -0700
Message-ID: <18553514.post@talk.nabble.com>
Date: Sun, 20 Jul 2008 04:53:16 -0700 (PDT)
From: starz10de <farag_ahmed@yahoo.com>
To: java-user@lucene.apache.org
Subject: Re: Return the sentence number in the indexed files
In-Reply-To: <910A445A-0C7A-4263-9419-C4F75E92EF0A@apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: farag_ahmed@yahoo.com
References: <18543061.post@talk.nabble.com> <910A445A-0C7A-4263-9419-C4F75E92EF0A@apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org


thanks Grant for the answer,

 to index each sentence as a separate document  , i already did this and it
work fine, i indexed more than 93000 sentences (Documents)  approx. in 11
minutes. I though the other option might be more efficient.

Farag 

Grant Ingersoll-6 wrote:
> 
> 
> On Jul 19, 2008, at 6:00 AM, starz10de wrote:
> 
>>
>> Hi All,
>>
>> I have a text files that contain several sentences, there is space  
>> between
>> each sentence.
>> When searching the index  , i get the path for the documents that  
>> match the
>> query
>>
>> String path = doc.get("path");
>>
>>
>> Is it possible to get the number of the sentence that match the query
>> inside the matched documents?
> 
> Not without some extra work.  This kind of thing requires post (or  
> pre) processing.  You can use SpanQuery to know where in a document  
> you matched, and then do the sentence calculations.  Another option is  
> to index each sentence as a separate document and then post process to  
> combine.
> 
> If you search the archives on this list and java-dev you'll see  
> several discussions on the topic.   See:
> http://lucene.markmail.org/message/we25gm32p6qot32c?q=sentence+detection
> and
> http://lucene.markmail.org/message/uq6ffx3oqsulgxys?q=sentence
> 
> HTH,
> Grant
> 
> 
> --------------------------
> Grant Ingersoll
> http://www.lucidimagination.com
> 
> Lucene Helpful Hints:
> http://wiki.apache.org/lucene-java/BasicsOfPerformance
> http://wiki.apache.org/lucene-java/LuceneFAQ
> 
> 
> 
> 
> 
> 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/Return-the-sentence-number-in-the-indexed-files-tp18543061p18553514.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35030-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jul 20 12:30:01 2008
Return-Path: <java-user-return-35030-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64211 invoked from network); 20 Jul 2008 12:30:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Jul 2008 12:30:01 -0000
Received: (qmail 23553 invoked by uid 500); 20 Jul 2008 12:29:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23511 invoked by uid 500); 20 Jul 2008 12:29:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23500 invoked by uid 99); 20 Jul 2008 12:29:54 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 20 Jul 2008 05:29:54 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ronchalant@gmail.com designates 74.125.46.31 as permitted sender)
Received: from [74.125.46.31] (HELO yw-out-2324.google.com) (74.125.46.31)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 20 Jul 2008 12:28:59 +0000
Received: by yw-out-2324.google.com with SMTP id 3so316621ywj.5
        for <java-user@lucene.apache.org>; Sun, 20 Jul 2008 05:29:14 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:from:to
         :in-reply-to:content-type:content-transfer-encoding:mime-version
         :subject:date:references:x-mailer;
        bh=jHl5dSHnuL+00Uj9edCcisyRqWaYjopfEIXUtU5oB30=;
        b=NwTLudlA2LPiblCdX26bDq+FQ3lv+wspcm2H3QGR1ASwNVEx8X6LgzwhWgAkok7yDm
         0Sh/4hj5XR0tPKedGktX+xrt390KzqkDSqeFACVxGBiwpewDCFrl2YQj6KOZ87Jbdn+G
         yEIHAhPgImDSu27LErxNdpZCoONB9SmwAjmAI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:from:to:in-reply-to:content-type
         :content-transfer-encoding:mime-version:subject:date:references
         :x-mailer;
        b=teRwjhMaXb7phF9tYr3io7w7ppFKtD7q3BwPubuSdZ/upxEUnQjE3Zhef2SXD5HWxd
         MYPRK+2e0n7YxrcuppNPCjosfBlbYMtTGVbAYvPx851Ms1ePUYNHAQGmc+kjrT86kxMc
         feNQZC2rMmQcPrqWLxvh6/fhJ4bnrykgWs3sI=
Received: by 10.150.95.5 with SMTP id s5mr2406954ybb.246.1216556954029;
        Sun, 20 Jul 2008 05:29:14 -0700 (PDT)
Received: from ?192.168.2.6? ( [96.245.76.52])
        by mx.google.com with ESMTPS id 4sm795304yxq.8.2008.07.20.05.29.10
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Sun, 20 Jul 2008 05:29:13 -0700 (PDT)
Message-Id: <5661F143-09E3-4EED-8CD3-EFF3E6F7B882@gmail.com>
From: Ronald Rudy <ronchalant@gmail.com>
To: java-user@lucene.apache.org
In-Reply-To: <422242.75662.qm@web27102.mail.ukl.yahoo.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: Boolean expression for no terms OR matching a wildcard
Date: Sun, 20 Jul 2008 08:29:04 -0400
References: <422242.75662.qm@web27102.mail.ukl.yahoo.com>
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org

A query solution is preferable.. but I can programmatically filter my  
results after the fact, it just seems like something that the Lucene  
team should consider adding.. I think it would only have value for  
wildcard queries, but nonetheless it would have some value I think..

-Ron


On Jul 18, 2008, at 6:24 PM, eks dev wrote:

> Analyzer that detects your condition "ALL match something", if  
> possible at all...
> e.g. "800123456 80034543534 80023423423" -> 800
>
> than you put it in ALL_MATCH field and match this condition against  
> it... if this prefix needs to be variable, you could extract all  
> matching prefixes to this fiield an make your query work like  
> "ALL_MATCH:800" and care not for the rest :) than yo would not need  
> field1 at all for these queries
>
> you were looking for something like this or you need "Query solution"?
>
>
>
> ----- Original Message ----
>> From: Chris Hostetter <hossman_lucene@fucit.org>
>> To: java-user@lucene.apache.org
>> Sent: Saturday, 19 July, 2008 12:00:39 AM
>> Subject: Re: Boolean expression for no terms OR matching a wildcard
>>
>> : Maybe this is easier ... suppose what I'm indexing is a phone  
>> number, and
>> : there are multiple phone numbers for what I'm indexing under the  
>> same field
>> : (phone) and I want the wildcard query to match only records that  
>> have either
>> : no phone numbers at all OR where ALL phone numbers are in a  
>> specific area code
>> : (e.g. 800* would match all in the 800 area code).
>>
>> i can't think of anyway to accomplish the second part of your query.
>> specificly, given the following records...
>>
>>  Doc1: field1:AAA, field1:Aaa, field1:Bb, field1:C, field2:X,  
>> field3:Y
>>  Doc2: field1:AAA, field1:Aaa, field1:Aa, field2:Z
>>
>> ...i can't think of any type of query like field1:A* which would  
>> match
>> Doc2 but not Doc1 (because there are other field1 values that do  
>> not start
>> with 'A')
>>
>>
>>
>> -Hoss
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>      __________________________________________________________
> Not happy with your email address?.
> Get the one you really want - millions of new email addresses  
> available now at Yahoo! http://uk.docs.yahoo.com/ymail/new.html
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35031-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 21 02:05:40 2008
Return-Path: <java-user-return-35031-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35102 invoked from network); 21 Jul 2008 02:05:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Jul 2008 02:05:39 -0000
Received: (qmail 5774 invoked by uid 500); 21 Jul 2008 02:05:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5744 invoked by uid 500); 21 Jul 2008 02:05:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5733 invoked by uid 99); 21 Jul 2008 02:05:32 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 20 Jul 2008 19:05:32 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of markrmiller@gmail.com designates 64.233.166.178 as permitted sender)
Received: from [64.233.166.178] (HELO py-out-1112.google.com) (64.233.166.178)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Jul 2008 02:04:37 +0000
Received: by py-out-1112.google.com with SMTP id z74so742708pyg.9
        for <java-user@lucene.apache.org>; Sun, 20 Jul 2008 19:05:02 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from
         :user-agent:mime-version:to:subject:references:in-reply-to
         :content-type:content-transfer-encoding;
        bh=Nw+Oet7eSgpCQdUCQqcckH18M51vYGZ4bRgUj2ca49E=;
        b=HOqhyGITm9F9Fz4lqjKO/ujo04153ZCclJWlBihSzZ8XhGbCBTmGq8b5UW8Y4lsrH7
         t0Dv/kaQ58JbgMcAViyL/BzHfUMUJf+ycpa8gbgSFvkqRYF3aRtwGA694ciTZsHRVSeS
         GppHPNvp8JaJAA6GW2yX3qG4DmMreNXrU2ozw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references
         :in-reply-to:content-type:content-transfer-encoding;
        b=UibIg9WjGcZkuQyiD4tYVj478YngBlZI3iqfsMKWuk0byxOOiA0Q/QtF4Te8foXlH9
         v2Q7ZLmhbC8+YFgrD2tIfbqdihA7LhEe66N2tFHi2Z/4qDeCAk68B4UoXOTYdJAYmPsP
         79ilcMb0cMfxYg5G4xIb9bmbMOXm6H3a2oQ7c=
Received: by 10.64.21.6 with SMTP id 6mr4201782qbu.50.1216605901757;
        Sun, 20 Jul 2008 19:05:01 -0700 (PDT)
Received: from ?192.168.1.103? ( [69.124.234.149])
        by mx.google.com with ESMTPS id p27sm6494721qbp.15.2008.07.20.19.05.00
        (version=SSLv3 cipher=RC4-MD5);
        Sun, 20 Jul 2008 19:05:00 -0700 (PDT)
Message-ID: <4883EECC.4070900@gmail.com>
Date: Sun, 20 Jul 2008 22:05:00 -0400
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.14 (X11/20080505)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Doesn it make sense cache IndexReader?
References: <18502361.post@talk.nabble.com>
In-Reply-To: <18502361.post@talk.nabble.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

With very small indexes and no sort fields (eg. you just use relevance) 
loading an IndexReader does not take very long. I think it does always 
make sense to cache it and reuse it though - unless the index has 
changed, there is no reason to pay the price of opening a new 
IndexReader. As your index grows, and especially if you sort on fields, 
the price of 'warming' a new IndexReader can get quite high.

However, if memory is an issue, you might not cache just so that its not 
guaranteed that all of your IndexReaders for each index will be in 
memory at the same time - this is not a great solution to your memory 
problem though  - if all indecies are ever searched at the same time, 
you will need to be able to accommodate that many IndexReaders in RAM 
anyway.

- Mark

Mohsen Saboorian wrote:
> Hi,
> I have a set of indices in different languages (very smal indices: on
> average each index directory has 10,000 documents, which has an overall size
> of less than 2mb). I want to know if this is a good idea to cache
> IndexReader (once opened) somewhere and further reuse it? My application is
> single-threaded, but I have memory concerns, since the indexing and search
> is totally done on client machines. 
>
> Does it make sense to have all IndexReaders cached (for example if opening
> an index reader takes some time). Does Lucene load some part of index in
> memory as soon as a call to IndexReader.open() is done?
>
> Mohsen.
>   


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35032-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 21 02:11:49 2008
Return-Path: <java-user-return-35032-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37006 invoked from network); 21 Jul 2008 02:11:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Jul 2008 02:11:49 -0000
Received: (qmail 8749 invoked by uid 500); 21 Jul 2008 02:11:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8709 invoked by uid 500); 21 Jul 2008 02:11:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8698 invoked by uid 99); 21 Jul 2008 02:11:42 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 20 Jul 2008 19:11:42 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of markrmiller@gmail.com designates 64.233.166.178 as permitted sender)
Received: from [64.233.166.178] (HELO py-out-1112.google.com) (64.233.166.178)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Jul 2008 02:10:48 +0000
Received: by py-out-1112.google.com with SMTP id z74so743350pyg.9
        for <java-user@lucene.apache.org>; Sun, 20 Jul 2008 19:11:12 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from
         :user-agent:mime-version:to:subject:references:in-reply-to
         :content-type:content-transfer-encoding;
        bh=l+fH/qpheuIjvXBZuWTQHWvyZJBPI6mO8ABxxqXRWL8=;
        b=Upq3N618JQjJcBUD79COJdXuKCNnjFVjkz85Ts418r5LkhhmL/R+sHMSaKqj5qRhSj
         HqNjrpW5aPvPM9fajBLPDz82XGnEapeOYjeuqkSykwi/zYgHhHhYQH5bNw6zASxX4imh
         9HnmlQEcwqGGjGwqHxvMLPliOaV9/lrF/AVlw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references
         :in-reply-to:content-type:content-transfer-encoding;
        b=oDW+hgsL29+g9iBbegtOFIUYYbn86O3D4oN0JVwRFScZr4/3xaKrGckre0nBa53GPI
         9Y1df0NmIU3T/1TM7bEFQzijrxl3x7zknfD72qN3gcMPwzpWK7M4cMnlp0OTUuZfrkQ+
         UHEUDgI4ZZTqAXmkpbPW2gOM8IvblIz+EtlY4=
Received: by 10.65.59.16 with SMTP id m16mr4182772qbk.94.1216606272141;
        Sun, 20 Jul 2008 19:11:12 -0700 (PDT)
Received: from ?192.168.1.103? ( [69.124.234.149])
        by mx.google.com with ESMTPS id 28sm6441160qbw.0.2008.07.20.19.11.11
        (version=SSLv3 cipher=RC4-MD5);
        Sun, 20 Jul 2008 19:11:11 -0700 (PDT)
Message-ID: <4883F03F.7050409@gmail.com>
Date: Sun, 20 Jul 2008 22:11:11 -0400
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.14 (X11/20080505)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: How to avoid duplicate records in lucene
References: <18543588.post@talk.nabble.com>
In-Reply-To: <18543588.post@talk.nabble.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Sebastin wrote:
> Hi All,
>
> Is there any possibility to avoid duplicate records in lucene  2.3.1? 
>   
I don't believe that there is a very high performance way to do this. 
You are basically going to have to query the index for an id before 
adding a new doc. The best way I can think of off the top of my head is 
to batch - first check that ids in the batch are unique, then check all 
ids in the batch against the IndexReader, then add the ones that are not 
dupes. Of course all of your docs would have to be added through this 
single choke point so that you knew other threads had not added that id 
after the first thread had looked but before it added the doc.

I think Mark H has you covered if getting the dupes out after are okay.

- Mark

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35033-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 21 07:00:52 2008
Return-Path: <java-user-return-35033-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85630 invoked from network); 21 Jul 2008 07:00:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Jul 2008 07:00:52 -0000
Received: (qmail 51717 invoked by uid 500); 21 Jul 2008 07:00:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 51682 invoked by uid 500); 21 Jul 2008 07:00:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 51671 invoked by uid 99); 21 Jul 2008 07:00:44 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Jul 2008 00:00:44 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Jul 2008 06:59:49 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KKpNW-00017w-6q
	for java-user@lucene.apache.org; Mon, 21 Jul 2008 00:00:14 -0700
Message-ID: <18563153.post@talk.nabble.com>
Date: Mon, 21 Jul 2008 00:00:14 -0700 (PDT)
From: sandyg <gaddamsandeeps@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: background merge hit exception
In-Reply-To: <30C41984-93AB-413A-A7C4-38716C0E04E8@mikemccandless.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: gaddamsandeeps@gmail.com
References: <18417970.post@talk.nabble.com> <30C41984-93AB-413A-A7C4-38716C0E04E8@mikemccandless.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Hi,
thx for the reply.
But i had enough space in my desk .


Michael McCandless-2 wrote:
> 
> 
> Normally when optimize throws this exception, either it includes a  
> "caused by" in the exception, or, you should have seen a stack trace  
> from a merge thread printed to your stderr.
> 
> One quick thing to check is whether you have enough disk space to  
> complete the optimize.  It looks like that was your final merge, which  
> is the biggest, so you'll need ~1X the size of your index in free  
> space.  EG if your index is 10 GB you need 10 GB of free disk space  
> before attempting optimize.
> 
> Finally, you can switch temporarily to SerialMergeScheduler and then  
> run your optimize, eg:
> 
>    writer.setMergeScheduler(new SerialMergeScheduler());
>    writer.optimize();
> 
> Mike
> 
> sandyg wrote:
> 
>>
>>
>>
>> Hi ALL ,
>> This is the exception raised when  when am indexing the records (I  
>> have 10
>> million records and after indexing 4 million record  i got this  
>> exception)
>>
>> java.io.IOException: background merge hit exception: _8n:c7759352  
>> _8o:c57658
>> _8p:c55810 into _8q [optimize]
>>
>> please give me the solution.
>> -- 
>> View this message in context:
>> http://www.nabble.com/background-merge-hit-exception-tp18417970p18417970.html
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/background-merge-hit-exception-tp18417970p18563153.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35034-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 21 10:10:43 2008
Return-Path: <java-user-return-35034-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80012 invoked from network); 21 Jul 2008 10:10:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Jul 2008 10:10:43 -0000
Received: (qmail 60157 invoked by uid 500); 21 Jul 2008 10:10:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60123 invoked by uid 500); 21 Jul 2008 10:10:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60112 invoked by uid 99); 21 Jul 2008 10:10:34 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Jul 2008 03:10:34 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=SPF_NEUTRAL,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [74.125.46.29] (HELO yw-out-2324.google.com) (74.125.46.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Jul 2008 10:09:37 +0000
Received: by yw-out-2324.google.com with SMTP id 3so434176ywj.5
        for <java-user@lucene.apache.org>; Mon, 21 Jul 2008 03:09:49 -0700 (PDT)
Received: by 10.151.145.17 with SMTP id x17mr3590704ybn.102.1216634989147;
        Mon, 21 Jul 2008 03:09:49 -0700 (PDT)
Received: from ?10.17.4.4? ( [72.93.214.93])
        by mx.google.com with ESMTPS id 9sm1198258ywf.2.2008.07.21.03.09.48
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Mon, 21 Jul 2008 03:09:48 -0700 (PDT)
Message-Id: <EC382448-7B15-4D3D-B272-401BC0B555B5@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <18563153.post@talk.nabble.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: background merge hit exception
Date: Mon, 21 Jul 2008 06:09:47 -0400
References: <18417970.post@talk.nabble.com> <30C41984-93AB-413A-A7C4-38716C0E04E8@mikemccandless.com> <18563153.post@talk.nabble.com>
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org


Did you see a "caused by" in your stack trace?  Or, a separate  
unhandled exception in a thread?  Is this reproducible?

Also, did you have a reader open on the index when you ran the  
optimize?  If so, you'd need 2X the index size (eg 20 GB with the  
example below) free.

Mike

sandyg wrote:

>
> Hi,
> thx for the reply.
> But i had enough space in my desk .
>
>
> Michael McCandless-2 wrote:
>>
>>
>> Normally when optimize throws this exception, either it includes a
>> "caused by" in the exception, or, you should have seen a stack trace
>> from a merge thread printed to your stderr.
>>
>> One quick thing to check is whether you have enough disk space to
>> complete the optimize.  It looks like that was your final merge,  
>> which
>> is the biggest, so you'll need ~1X the size of your index in free
>> space.  EG if your index is 10 GB you need 10 GB of free disk space
>> before attempting optimize.
>>
>> Finally, you can switch temporarily to SerialMergeScheduler and then
>> run your optimize, eg:
>>
>>   writer.setMergeScheduler(new SerialMergeScheduler());
>>   writer.optimize();
>>
>> Mike
>>
>> sandyg wrote:
>>
>>>
>>>
>>>
>>> Hi ALL ,
>>> This is the exception raised when  when am indexing the records (I
>>> have 10
>>> million records and after indexing 4 million record  i got this
>>> exception)
>>>
>>> java.io.IOException: background merge hit exception: _8n:c7759352
>>> _8o:c57658
>>> _8p:c55810 into _8q [optimize]
>>>
>>> please give me the solution.
>>> -- 
>>> View this message in context:
>>> http://www.nabble.com/background-merge-hit-exception-tp18417970p18417970.html
>>> Sent from the Lucene - Java Users mailing list archive at  
>>> Nabble.com.
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>
> -- 
> View this message in context: http://www.nabble.com/background-merge-hit-exception-tp18417970p18563153.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35035-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 21 10:43:42 2008
Return-Path: <java-user-return-35035-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95094 invoked from network); 21 Jul 2008 10:43:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Jul 2008 10:43:42 -0000
Received: (qmail 4253 invoked by uid 500); 21 Jul 2008 10:43:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4217 invoked by uid 500); 21 Jul 2008 10:43:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4206 invoked by uid 99); 21 Jul 2008 10:43:35 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Jul 2008 03:43:35 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [130.225.24.87] (HELO luna.statsbiblioteket.dk) (130.225.24.87)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Jul 2008 10:42:42 +0000
Received: from [172.18.249.244] (PC990.sb.statsbiblioteket.dk [172.18.249.244])
 by luna.statsbiblioteket.dk
 (iPlanet Messaging Server 5.2 HotFix 1.16 (built May 14 2003))
 with ESMTP id <0K4C001PKR3UHG@luna.statsbiblioteket.dk> for
 java-user@lucene.apache.org; Mon, 21 Jul 2008 12:43:06 +0200 (MEST)
Date: Mon, 21 Jul 2008 12:43:05 +0200
From: Toke Eskildsen <te@statsbiblioteket.dk>
Subject: Re: GeoSort approach - your opinion
In-reply-to: <84EBC490-7B1D-4EAA-A3CE-3BA3C39CCE57@gmail.com>
To: java-user@lucene.apache.org
Reply-to: te@statsbiblioteket.dk
Message-id: <1216636985.3455.60.camel@PC990.sb.statsbiblioteket.dk>
Organization: Statsbiblioteket
MIME-version: 1.0
X-Mailer: Evolution 2.22.2 (2.22.2-2.fc9)
Content-type: text/plain; charset=UTF-8
Content-transfer-encoding: 8BIT
References: <84EBC490-7B1D-4EAA-A3CE-3BA3C39CCE57@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

On Sat, 2008-07-19 at 11:53 +0200, Sascha Fahl wrote:
> last week I realized an approach for GeoSort in lucene. Inspired by  
> "Lucene in action" I modified the algorithm in the following way. When  
> an IndexReader for a certain index is created, a cache for  
> geoinformation is created - this simply is a 2 dimensional int Array.  
> So it is possible to cache geoinformation for 1.000.000 docs in around  
> 8 MB.

Be aware that arrays in themselves take up a fair amount of memory, so
you'll want to use only 3 arrays in total and not 1000001:

int[][] coordinates = new int[2];
锘coordinates[0] = new int[1000000];
锘coordinates[1] = new int[1000000];

[...]

> What do you think about this approach?

Sounds fine when the index rarely changes.

> The only possible advantage is the cache I think because I do not really 
> know if the JVM is good in handling 10 MB of data in the RAM.

The Sun JVM is perfectly capable of handling large arrays efficiently.
We use an array-based structure of ints and longs for quick facet look
up that is approximately 300MB.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35036-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 21 13:41:25 2008
Return-Path: <java-user-return-35036-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89807 invoked from network); 21 Jul 2008 13:41:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Jul 2008 13:41:25 -0000
Received: (qmail 9226 invoked by uid 500); 21 Jul 2008 13:41:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9203 invoked by uid 500); 21 Jul 2008 13:41:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9192 invoked by uid 99); 21 Jul 2008 13:41:17 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Jul 2008 06:41:17 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Jul 2008 13:40:23 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KKvd9-0005kQ-GB
	for java-user@lucene.apache.org; Mon, 21 Jul 2008 06:40:47 -0700
Message-ID: <18568862.post@talk.nabble.com>
Date: Mon, 21 Jul 2008 06:40:47 -0700 (PDT)
From: Sebastin <sebasmtech@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: How to avoid duplicate records in lucene
In-Reply-To: <4883F03F.7050409@gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: sebasmtech@gmail.com
References: <18543588.post@talk.nabble.com> <4883F03F.7050409@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


at the time search , while querying the data
markrmiller wrote:
> 
> Sebastin wrote:
>> Hi All,
>>
>> Is there any possibility to avoid duplicate records in lucene  2.3.1? 
>>   
> I don't believe that there is a very high performance way to do this. 
> You are basically going to have to query the index for an id before 
> adding a new doc. The best way I can think of off the top of my head is 
> to batch - first check that ids in the batch are unique, then check all 
> ids in the batch against the IndexReader, then add the ones that are not 
> dupes. Of course all of your docs would have to be added through this 
> single choke point so that you knew other threads had not added that id 
> after the first thread had looked but before it added the doc.
> 
> I think Mark H has you covered if getting the dupes out after are okay.
> 
> - Mark
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/How-to-avoid-duplicate-records-in-lucene-tp18543588p18568862.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35037-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 21 14:19:04 2008
Return-Path: <java-user-return-35037-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 11950 invoked from network); 21 Jul 2008 14:19:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Jul 2008 14:19:04 -0000
Received: (qmail 74392 invoked by uid 500); 21 Jul 2008 14:18:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74139 invoked by uid 500); 21 Jul 2008 14:18:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74128 invoked by uid 99); 21 Jul 2008 14:18:56 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Jul 2008 07:18:56 -0700
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.198.226 as permitted sender)
Received: from [209.85.198.226] (HELO rv-out-0506.google.com) (209.85.198.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Jul 2008 14:18:01 +0000
Received: by rv-out-0506.google.com with SMTP id f6so1405989rvb.5
        for <java-user@lucene.apache.org>; Mon, 21 Jul 2008 07:18:27 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=ziFsmnbB2xBxc8YACExB+JWHSAvt5CHhtK+gjIqPjGY=;
        b=qIWquxY8eFVmspcpo90JTeLKr5MzzDI9bfi2nTY3xdDRI+bWqA+eEnUbjTopJOjKXS
         ZMrcveesO7ymCJFZ4rguGGJtR22LU0/fQXaYH0t96IcCfmS2u9XDJNBtRNrByD2jBOHX
         xk9vZUX8E1HRzBiOMrcol/K4wlvstVdncSc8s=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=Cf3NR+fLUIMy2gF4Q1maGVAt5Cs1T6+OblHoF7WkewYzCvP4i0myc93oAGFZct8RwU
         AOP/+51Zvi32cFeMxlZgWQTNjE/72YveNyz3nBDUB8ZJEl1HEVDyWbA+W721akxjOd02
         Kv01QKxbFUhq8YctfXo8oK9IOjdyg1mYjLeLU=
Received: by 10.141.49.18 with SMTP id b18mr1875895rvk.92.1216649906899;
        Mon, 21 Jul 2008 07:18:26 -0700 (PDT)
Received: by 10.141.185.2 with HTTP; Mon, 21 Jul 2008 07:18:26 -0700 (PDT)
Message-ID: <359a92830807210718l66f56f0ew2df8c52c5daafccd@mail.gmail.com>
Date: Mon, 21 Jul 2008 10:18:26 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: How to avoid duplicate records in lucene
In-Reply-To: <18568862.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_55486_15293556.1216649906897"
References: <18543588.post@talk.nabble.com> <4883F03F.7050409@gmail.com>
	 <18568862.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_55486_15293556.1216649906897
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

could you define duplicate? As far as I know, you don't
get the same (internal) doc id back more than once, so what
is a duplicate?

Best
Erick

On Mon, Jul 21, 2008 at 9:40 AM, Sebastin <sebasmtech@gmail.com> wrote:

>
> at the time search , while querying the data
> markrmiller wrote:
> >
> > Sebastin wrote:
> >> Hi All,
> >>
> >> Is there any possibility to avoid duplicate records in lucene  2.3.1?
> >>
> > I don't believe that there is a very high performance way to do this.
> > You are basically going to have to query the index for an id before
> > adding a new doc. The best way I can think of off the top of my head is
> > to batch - first check that ids in the batch are unique, then check all
> > ids in the batch against the IndexReader, then add the ones that are not
> > dupes. Of course all of your docs would have to be added through this
> > single choke point so that you knew other threads had not added that id
> > after the first thread had looked but before it added the doc.
> >
> > I think Mark H has you covered if getting the dupes out after are okay.
> >
> > - Mark
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> >
>
> --
> View this message in context:
> http://www.nabble.com/How-to-avoid-duplicate-records-in-lucene-tp18543588p18568862.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_55486_15293556.1216649906897--

From java-user-return-35038-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 21 18:45:12 2008
Return-Path: <java-user-return-35038-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22867 invoked from network); 21 Jul 2008 18:45:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Jul 2008 18:45:12 -0000
Received: (qmail 77811 invoked by uid 500); 21 Jul 2008 18:45:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77662 invoked by uid 500); 21 Jul 2008 18:45:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77651 invoked by uid 99); 21 Jul 2008 18:45:04 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Jul 2008 11:45:04 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=SPF_NEUTRAL,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [119.160.244.246] (HELO n3c.bullet.tw1.yahoo.com) (119.160.244.246)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 21 Jul 2008 18:44:08 +0000
Received: from [119.160.244.77] by n3.bullet.tw1.yahoo.com with NNFMP; 21 Jul 2008 18:44:31 -0000
Received: from [202.43.196.224] by t2.bullet.tw1.yahoo.com with NNFMP; 21 Jul 2008 18:44:31 -0000
Received: from [217.12.4.215] by t1.bullet.tpe.yahoo.com with NNFMP; 21 Jul 2008 18:44:30 -0000
Received: from [87.248.110.136] by t2.bullet.ukl.yahoo.com with NNFMP; 21 Jul 2008 18:44:29 -0000
Received: from [127.0.0.1] by omp225.mail.ukl.yahoo.com with NNFMP; 21 Jul 2008 18:44:29 -0000
X-Yahoo-Newman-Id: 513652.22010.bm@omp225.mail.ukl.yahoo.com
Received: (qmail 51578 invoked from network); 21 Jul 2008 18:44:29 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=Received:X-YMail-OSG:X-Yahoo-Newman-Property:Message-ID:Date:From:User-Agent:MIME-Version:To:Subject:References:In-Reply-To:Content-Type:Content-Transfer-Encoding;
  b=HxXsQrgodlS3ZX57kBVBrloY/AIHw83u+GnhKj0IxZjqCzJP82OtsO249mTDIhbZYz9Eaf8Iuio+rWtInKRO5J6EJT5Pz50lmzyAUnzrm3XC+BdlaIOyZdD2b1vgyROfdU8iE3dNbPEjog9M1qAVsUp4O4Ob7wb2ijcPVfKly1s=  ;
Received: from unknown (HELO ?192.168.2.3?) (markharw00d@194.106.34.5 with plain)
  by smtp008.mail.ukl.yahoo.com with SMTP; 21 Jul 2008 18:44:29 -0000
X-YMail-OSG: kbvbGgkVM1kki0vih2ZtViXK0Pg1uojolmpcVYhX.5eq_i5g2nuB7IF.o6.FVXVMxy8mT7hoB62JHCMm9ndXvhO8GP8VXAlf2lpk4m7lS7Wwg6DlkzLJ78pDQfIY_1QrUhoybqR3fcD.k4TPnK8uVVOn
X-Yahoo-Newman-Property: ymail-3
Message-ID: <4884D90A.60801@yahoo.co.uk>
Date: Mon, 21 Jul 2008 19:44:26 +0100
From: markharw00d <markharw00d@yahoo.co.uk>
User-Agent: Thunderbird 2.0.0.14 (Windows/20080421)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: How to avoid duplicate records in lucene
References: <18543588.post@talk.nabble.com> <4883F03F.7050409@gmail.com>	 <18568862.post@talk.nabble.com> <359a92830807210718l66f56f0ew2df8c52c5daafccd@mail.gmail.com>
In-Reply-To: <359a92830807210718l66f56f0ew2df8c52c5daafccd@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

 >>could you define duplicate?

That's your choice of field that you want to de-dup on.
That could be a field such as "DatabasePrimaryKey" or perhaps a field 
containing an MD5 hash of document content.
The DuplicateFilter ensures only one document can exist in results for 
each unique value for the choice of field.

Cheers
Mark

Erick Erickson wrote:
> could you define duplicate? As far as I know, you don't
> get the same (internal) doc id back more than once, so what
> is a duplicate?
>
> Best
> Erick
>
> On Mon, Jul 21, 2008 at 9:40 AM, Sebastin <sebasmtech@gmail.com> wrote:
>
>   
>> at the time search , while querying the data
>> markrmiller wrote:
>>     
>>> Sebastin wrote:
>>>       
>>>> Hi All,
>>>>
>>>> Is there any possibility to avoid duplicate records in lucene  2.3.1?
>>>>
>>>>         
>>> I don't believe that there is a very high performance way to do this.
>>> You are basically going to have to query the index for an id before
>>> adding a new doc. The best way I can think of off the top of my head is
>>> to batch - first check that ids in the batch are unique, then check all
>>> ids in the batch against the IndexReader, then add the ones that are not
>>> dupes. Of course all of your docs would have to be added through this
>>> single choke point so that you knew other threads had not added that id
>>> after the first thread had looked but before it added the doc.
>>>
>>> I think Mark H has you covered if getting the dupes out after are okay.
>>>
>>> - Mark
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>>
>>>       
>> --
>> View this message in context:
>> http://www.nabble.com/How-to-avoid-duplicate-records-in-lucene-tp18543588p18568862.html
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>     
>
>   
> ------------------------------------------------------------------------
>
> No virus found in this incoming message.
> Checked by AVG. 
> Version: 7.5.526 / Virus Database: 270.5.3/1563 - Release Date: 20/07/2008 12:59
>   



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35039-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 21 18:54:35 2008
Return-Path: <java-user-return-35039-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 29851 invoked from network); 21 Jul 2008 18:54:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Jul 2008 18:54:35 -0000
Received: (qmail 91611 invoked by uid 500); 21 Jul 2008 18:54:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90761 invoked by uid 500); 21 Jul 2008 18:54:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90750 invoked by uid 99); 21 Jul 2008 18:54:27 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Jul 2008 11:54:27 -0700
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [217.146.182.33] (HELO web27101.mail.ukl.yahoo.com) (217.146.182.33)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 21 Jul 2008 18:53:30 +0000
Received: (qmail 35198 invoked by uid 60001); 21 Jul 2008 18:52:54 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=m+paEoEtnbH/1XDW7Hcjq5Pamk5JZ8vFANjlrpz1qimPRDK2MBGlj15qY+YzNs+xgHNj9BuwNk2v0OGMDWGP/8rh7bEQbO2jbKR7ZrfmjlSGBRO/1Ddanbux5GDFxZXGXOirtjWmhUEqL8TV9jDRSJcN7o86fDIYqOPRsVMXIIo=;
Received: from [79.201.63.13] by web27101.mail.ukl.yahoo.com via HTTP; Mon, 21 Jul 2008 18:52:54 GMT
X-Mailer: YahooMailRC/1042.40 YahooMailWebService/0.7.218
Date: Mon, 21 Jul 2008 18:52:54 +0000 (GMT)
From: eks dev <eksdev@yahoo.co.uk>
Subject: Re: How to avoid duplicate records in lucene
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
Message-ID: <109484.34801.qm@web27101.mail.ukl.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

you could maintain your bloom filter and check only "positives" if they are=
 not false positives with exact search, if you have small percentage of dup=
licates (unique documents dominate updates) this will help you a lot on per=
formance side =0A=0A=0A=0A----- Original Message ----=0A> From: markharw00d=
 <markharw00d@yahoo.co.uk>=0A> To: java-user@lucene.apache.org=0A> Sent: Mo=
nday, 21 July, 2008 8:44:26 PM=0A> Subject: Re: How to avoid duplicate reco=
rds in lucene=0A> =0A> >>could you define duplicate?=0A> =0A> That's your c=
hoice of field that you want to de-dup on.=0A> That could be a field such a=
s "DatabasePrimaryKey" or perhaps a field =0A> containing an MD5 hash of do=
cument content.=0A> The DuplicateFilter ensures only one document can exist=
 in results for =0A> each unique value for the choice of field.=0A> =0A> Ch=
eers=0A> Mark=0A> =0A> Erick Erickson wrote:=0A> > could you define duplica=
te? As far as I know, you don't=0A> > get the same (internal) doc id back m=
ore than once, so what=0A> > is a duplicate?=0A> >=0A> > Best=0A> > Erick=
=0A> >=0A> > On Mon, Jul 21, 2008 at 9:40 AM, Sebastin wrote:=0A> >=0A> >  =
=0A> >> at the time search , while querying the data=0A> >> markrmiller wro=
te:=0A> >>    =0A> >>> Sebastin wrote:=0A> >>>      =0A> >>>> Hi All,=0A> >=
>>>=0A> >>>> Is there any possibility to avoid duplicate records in lucene =
 2.3.1?=0A> >>>>=0A> >>>>        =0A> >>> I don't believe that there is a v=
ery high performance way to do this.=0A> >>> You are basically going to hav=
e to query the index for an id before=0A> >>> adding a new doc. The best wa=
y I can think of off the top of my head is=0A> >>> to batch - first check t=
hat ids in the batch are unique, then check all=0A> >>> ids in the batch ag=
ainst the IndexReader, then add the ones that are not=0A> >>> dupes. Of cou=
rse all of your docs would have to be added through this=0A> >>> single cho=
ke point so that you knew other threads had not added that id=0A> >>> after=
 the first thread had looked but before it added the doc.=0A> >>>=0A> >>> I=
 think Mark H has you covered if getting the dupes out after are okay.=0A> =
>>>=0A> >>> - Mark=0A> >>>=0A> >>> ----------------------------------------=
-----------------------------=0A> >>> To unsubscribe, e-mail: java-user-uns=
ubscribe@lucene.apache.org=0A> >>> For additional commands, e-mail: java-us=
er-help@lucene.apache.org=0A> >>>=0A> >>>=0A> >>>=0A> >>>      =0A> >> --=
=0A> >> View this message in context:=0A> >> =0A> http://www.nabble.com/How=
-to-avoid-duplicate-records-in-lucene-tp18543588p18568862.html=0A> >> Sent =
from the Lucene - Java Users mailing list archive at Nabble.com.=0A> >>=0A>=
 >>=0A> >> ----------------------------------------------------------------=
-----=0A> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.or=
g=0A> >> For additional commands, e-mail: java-user-help@lucene.apache.org=
=0A> >>=0A> >>=0A> >>    =0A> >=0A> >  =0A> > -----------------------------=
-------------------------------------------=0A> >=0A> > No virus found in t=
his incoming message.=0A> > Checked by AVG. =0A> > Version: 7.5.526 / Virus=
 Database: 270.5.3/1563 - Release Date: 20/07/2008 =0A> 12:59=0A> >  =0A> =
=0A> =0A> =0A> ------------------------------------------------------------=
---------=0A> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.o=
rg=0A> For additional commands, e-mail: java-user-help@lucene.apache.org=0A=
=0A=0A=0A      __________________________________________________________=
=0ANot happy with your email address?.=0AGet the one you really want - mill=
ions of new email addresses available now at Yahoo! http://uk.docs.yahoo.co=
m/ymail/new.html

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35040-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 21 19:03:40 2008
Return-Path: <java-user-return-35040-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35763 invoked from network); 21 Jul 2008 19:03:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Jul 2008 19:03:40 -0000
Received: (qmail 6340 invoked by uid 500); 21 Jul 2008 19:03:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6225 invoked by uid 500); 21 Jul 2008 19:03:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6214 invoked by uid 99); 21 Jul 2008 19:03:32 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Jul 2008 12:03:32 -0700
X-ASF-Spam-Status: No, hits=-4.0 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [128.230.108.46] (HELO SUEXCL-02.ad.syr.edu) (128.230.108.46)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Jul 2008 19:02:39 +0000
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Boolean expression for no terms OR matching a wildcard
Date: Mon, 21 Jul 2008 15:00:17 -0400
Message-ID: <9294E20AED46934EA459020706463F94C59C1F@SUEXCL-02.ad.syr.edu>
In-Reply-To: <5661F143-09E3-4EED-8CD3-EFF3E6F7B882@gmail.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Boolean expression for no terms OR matching a wildcard
Thread-Index: AcjqZFgJFeftJLdgQrKBc/hT5cmEUAA8CbfQ
From: "Steven A Rowe" <sarowe@syr.edu>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Ronald,

Caveat - I haven't tested this, but:

With a RegexQuery =
<http://lucene.apache.org/java/2_3_2/api/org/apache/lucene/search/regex/R=
egexQuery.html>, I think you can do something like (using your example):

   +abc*123 -{Regex}(?!abc.*123$)

This query would include all documents that have terms that match the =
wildcard "abc*123", and exclude all documents containing terms that =
don't match regex "^abc.*123$".

Note that the Lucene QueryParser doesn't handle regex queries (and if it =
did, the syntax would probably be different than "{Regex}" - this was =
intended solely for purposes of exposition).  As a result, you would =
have to manually construct the RegexQuery and combine it using =
BooleanQuery clauses with your wildcard query.

The "(?!...)" syntax is a negative lookahead assertion - this is a Java =
1.4+ java.util.regex.Pattern feature.  Note that wildcard expressions =
are easily programmatically converted to regular expressions by =
substituting "*"->".*" and "?"->".", and then adding the "$" anchor.  =
The "^" anchor is not required with RegexQuery's, because when using the =
java.util.regex engine (the default engine), j.u.r.Matcher.lookingAt() =
is used; from =
<http://java.sun.com/j2se/1.4.2/docs/api/java/util/regex/Matcher.html#loo=
kingAt()>:

   Attempts to match the input sequence, starting at the
   beginning, against the pattern.

   Like the matches method, this method always starts at the
   beginning of the input sequence; unlike that method, it
   does not require that the entire input sequence be matched.=20

Caveat #2: RegexQuery's are relatively slow, since *all* index terms =
have to be tested against the regular expression, so you may have to use =
some other method if query response time turns out to be a problem.

Steve

On 07/20/2008 at 8:29 AM, Ronald Rudy wrote:
> A query solution is preferable.. but I can programmatically
> filter my results after the fact, it just seems like something that
> the Lucene team should consider adding.. I think it would only have
> value for wildcard queries, but nonetheless it would have some value
> I think..
>=20
> -Ron
>=20
> On Jul 18, 2008, at 6:24 PM, eks dev wrote:
>=20
> > Analyzer that detects your condition "ALL match something", if
> > possible at all...
> > e.g. "800123456 80034543534 80023423423" -> 800
> >=20
> > than you put it in ALL_MATCH field and match this condition against
> > it... if this prefix needs to be variable, you could extract all
> > matching prefixes to this fiield an make your query work like
> > "ALL_MATCH:800" and care not for the rest :) than yo would not need
> > field1 at all for these queries
> >=20
> > you were looking for something like this or you need "Query =
solution"?
> >=20
> > ----- Original Message ----
> > > From: Chris Hostetter <hossman_lucene@fucit.org>
> > > To: java-user@lucene.apache.org
> > > Sent: Saturday, 19 July, 2008 12:00:39 AM
> > > Subject: Re: Boolean expression for no terms OR matching a =
wildcard
> > >=20
> > > > Maybe this is easier ... suppose what I'm indexing is a phone =
number,
> > > > and there are multiple phone numbers for what I'm indexing under =
the
> > > > same field (phone) and I want the wildcard query to match only
> > > > records that have either no phone numbers at all OR where ALL =
phone
> > > > numbers are in a specific area code (e.g. 800* would match all =
in the
> > > > 800 area code).
> > >=20
> > > i can't think of anyway to accomplish the second part of your =
query.
> > > specificly, given the following records...
> > >=20
> > >  Doc1: field1:AAA, field1:Aaa, field1:Bb, field1:C, field2:X, =
field3:Y
> > >  Doc2: field1:AAA, field1:Aaa, field1:Aa, field2:Z
> > >=20
> > > ...i can't think of any type of query like field1:A* which would =
match
> > > Doc2 but not Doc1 (because there are other field1 values that do
> > > not start with 'A')
> > >
> > > -Hoss



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35041-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 21 19:06:25 2008
Return-Path: <java-user-return-35041-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37106 invoked from network); 21 Jul 2008 19:06:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Jul 2008 19:06:25 -0000
Received: (qmail 10394 invoked by uid 500); 21 Jul 2008 19:06:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10367 invoked by uid 500); 21 Jul 2008 19:06:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10356 invoked by uid 99); 21 Jul 2008 19:06:17 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Jul 2008 12:06:17 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ronchalant@gmail.com designates 64.233.166.179 as permitted sender)
Received: from [64.233.166.179] (HELO py-out-1112.google.com) (64.233.166.179)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Jul 2008 19:05:22 +0000
Received: by py-out-1112.google.com with SMTP id z74so939721pyg.9
        for <java-user@lucene.apache.org>; Mon, 21 Jul 2008 12:05:47 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:from:to
         :in-reply-to:content-type:content-transfer-encoding:mime-version
         :subject:date:references:x-mailer;
        bh=7IsBH3r63AcU7EvTQJDPbLKTCZuvlBxgesY5EcLLyc8=;
        b=vw3hoTDGMWeCIEMxboTCpyYpk0qOy3KuURW+664/8FMvsxJ59k+3XUu2gOtC+GdbhA
         Q9XMur9G0Rwmoy31c/thxi/VzH3Bm3PLaksjCXAYg8L7yQMtHhZIcqlTyW42W0/hlXWB
         97igOw637kISlgdL1gRtjssU/Rqlx6neWwArw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:from:to:in-reply-to:content-type
         :content-transfer-encoding:mime-version:subject:date:references
         :x-mailer;
        b=U6Xek5JGhETKxikYA/qYU/CxcaWqnRvifFEq9a9vNLEU6urVqFCt6UdGmypn7L1+dv
         lHPx7+X217lw4lAQsFWuErY92CL1qhtiRrXBxJ4RJRfG/3oafHMWTTPTbQkPGM65RSpv
         a8zd11jav3aRzDve2xvIa8A91lazyjHTc/myc=
Received: by 10.64.204.13 with SMTP id b13mr5356145qbg.84.1216667146804;
        Mon, 21 Jul 2008 12:05:46 -0700 (PDT)
Received: from bslt08.brick.local ( [70.91.6.33])
        by mx.google.com with ESMTPS id f60sm16322705pyh.37.2008.07.21.12.05.45
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Mon, 21 Jul 2008 12:05:46 -0700 (PDT)
Message-Id: <1E6934B8-E358-4A17-BD7E-46A13CB69F0A@gmail.com>
From: Ronald Rudy <ronchalant@gmail.com>
To: java-user@lucene.apache.org
In-Reply-To: <9294E20AED46934EA459020706463F94C59C1F@SUEXCL-02.ad.syr.edu>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: Boolean expression for no terms OR matching a wildcard
Date: Mon, 21 Jul 2008 15:05:39 -0400
References: <9294E20AED46934EA459020706463F94C59C1F@SUEXCL-02.ad.syr.edu>
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks Steve, this looks promising even if it doesn't perform the  
best.  I'll run some tests on what produces the best results.

-Ron


On Jul 21, 2008, at 3:00 PM, Steven A Rowe wrote:

> Hi Ronald,
>
> Caveat - I haven't tested this, but:
>
> With a RegexQuery <http://lucene.apache.org/java/2_3_2/api/org/apache/lucene/search/regex/RegexQuery.html 
> >, I think you can do something like (using your example):
>
>   +abc*123 -{Regex}(?!abc.*123$)
>
> This query would include all documents that have terms that match  
> the wildcard "abc*123", and exclude all documents containing terms  
> that don't match regex "^abc.*123$".
>
> Note that the Lucene QueryParser doesn't handle regex queries (and  
> if it did, the syntax would probably be different than "{Regex}" -  
> this was intended solely for purposes of exposition).  As a result,  
> you would have to manually construct the RegexQuery and combine it  
> using BooleanQuery clauses with your wildcard query.
>
> The "(?!...)" syntax is a negative lookahead assertion - this is a  
> Java 1.4+ java.util.regex.Pattern feature.  Note that wildcard  
> expressions are easily programmatically converted to regular  
> expressions by substituting "*"->".*" and "?"->".", and then adding  
> the "$" anchor.  The "^" anchor is not required with RegexQuery's,  
> because when using the java.util.regex engine (the default engine),  
> j.u.r.Matcher.lookingAt() is used; from <http://java.sun.com/j2se/1.4.2/docs/api/java/util/regex/Matcher.html#lookingAt() 
> >:
>
>   Attempts to match the input sequence, starting at the
>   beginning, against the pattern.
>
>   Like the matches method, this method always starts at the
>   beginning of the input sequence; unlike that method, it
>   does not require that the entire input sequence be matched.
>
> Caveat #2: RegexQuery's are relatively slow, since *all* index terms  
> have to be tested against the regular expression, so you may have to  
> use some other method if query response time turns out to be a  
> problem.
>
> Steve
>
> On 07/20/2008 at 8:29 AM, Ronald Rudy wrote:
>> A query solution is preferable.. but I can programmatically
>> filter my results after the fact, it just seems like something that
>> the Lucene team should consider adding.. I think it would only have
>> value for wildcard queries, but nonetheless it would have some value
>> I think..
>>
>> -Ron
>>
>> On Jul 18, 2008, at 6:24 PM, eks dev wrote:
>>
>>> Analyzer that detects your condition "ALL match something", if
>>> possible at all...
>>> e.g. "800123456 80034543534 80023423423" -> 800
>>>
>>> than you put it in ALL_MATCH field and match this condition against
>>> it... if this prefix needs to be variable, you could extract all
>>> matching prefixes to this fiield an make your query work like
>>> "ALL_MATCH:800" and care not for the rest :) than yo would not need
>>> field1 at all for these queries
>>>
>>> you were looking for something like this or you need "Query  
>>> solution"?
>>>
>>> ----- Original Message ----
>>>> From: Chris Hostetter <hossman_lucene@fucit.org>
>>>> To: java-user@lucene.apache.org
>>>> Sent: Saturday, 19 July, 2008 12:00:39 AM
>>>> Subject: Re: Boolean expression for no terms OR matching a wildcard
>>>>
>>>>> Maybe this is easier ... suppose what I'm indexing is a phone  
>>>>> number,
>>>>> and there are multiple phone numbers for what I'm indexing under  
>>>>> the
>>>>> same field (phone) and I want the wildcard query to match only
>>>>> records that have either no phone numbers at all OR where ALL  
>>>>> phone
>>>>> numbers are in a specific area code (e.g. 800* would match all  
>>>>> in the
>>>>> 800 area code).
>>>>
>>>> i can't think of anyway to accomplish the second part of your  
>>>> query.
>>>> specificly, given the following records...
>>>>
>>>> Doc1: field1:AAA, field1:Aaa, field1:Bb, field1:C, field2:X,  
>>>> field3:Y
>>>> Doc2: field1:AAA, field1:Aaa, field1:Aa, field2:Z
>>>>
>>>> ...i can't think of any type of query like field1:A* which would  
>>>> match
>>>> Doc2 but not Doc1 (because there are other field1 values that do
>>>> not start with 'A')
>>>>
>>>> -Hoss
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35042-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 22 03:28:34 2008
Return-Path: <java-user-return-35042-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91143 invoked from network); 22 Jul 2008 03:28:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Jul 2008 03:28:34 -0000
Received: (qmail 13776 invoked by uid 500); 22 Jul 2008 03:28:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13534 invoked by uid 500); 22 Jul 2008 03:28:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13523 invoked by uid 99); 22 Jul 2008 03:28:27 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Jul 2008 20:28:27 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Jul 2008 03:27:32 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KL8Xd-000812-Dg
	for java-user@lucene.apache.org; Mon, 21 Jul 2008 20:27:57 -0700
Message-ID: <18581695.post@talk.nabble.com>
Date: Mon, 21 Jul 2008 20:27:57 -0700 (PDT)
From: blazingwolf7 <blazingwolf7@gmail.com>
To: java-user@lucene.apache.org
Subject: Storing information
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: blazingwolf7@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hi, 

I am using Lucene to perform searching. I have certain information that will
be loaded everytime a search is run. This means, if there are multiple user
running the search at the same time, the information will be loaded multiple
times. 

This is not effecient at all, so I was wondering is there anyway I can load
those values only once, and every search perform after that no matter how
many user will simply refer to the preloaded values?

Thanks
-- 
View this message in context: http://www.nabble.com/Storing-information-tp18581695p18581695.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35043-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 22 03:50:19 2008
Return-Path: <java-user-return-35043-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 6215 invoked from network); 22 Jul 2008 03:50:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Jul 2008 03:50:19 -0000
Received: (qmail 26603 invoked by uid 500); 22 Jul 2008 03:50:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26580 invoked by uid 500); 22 Jul 2008 03:50:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26569 invoked by uid 99); 22 Jul 2008 03:50:13 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 21 Jul 2008 20:50:13 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of yseeley@gmail.com designates 209.85.198.229 as permitted sender)
Received: from [209.85.198.229] (HELO rv-out-0506.google.com) (209.85.198.229)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Jul 2008 03:49:19 +0000
Received: by rv-out-0506.google.com with SMTP id f6so1703054rvb.5
        for <java-user@lucene.apache.org>; Mon, 21 Jul 2008 20:49:44 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:sender
         :to:subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references
         :x-google-sender-auth;
        bh=+a5PIaUEw/qzSk6DJWVdEFm5s2y+PoOmAd5FDovOGXQ=;
        b=R9koL9Qgq3d3K5RoT2xQMqlO7ti6paJs1rRI+wzLcv4L/7eCfVW+HQRX2pf9leKPO7
         vqL6NQ0rFhRtaknacmRE4K6RzGCSmLXFstyXmUM2Ffmv133MjF3Q/VSpWY8uAl+JWUOs
         PJoB0F2y4BxeTWKV2iFuyeTlj2tJF59KJajhc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:sender:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references:x-google-sender-auth;
        b=lXyz7FdLBq7rWR24irg/Jm5vUIpeq/dsGc4LGsGCILg8K5qE3+j0oUQ6wEyfeewHfy
         NQZU/m1glvJ1FI8Qj4AVablHPYR9XkGJPyVCTMY04Ty5zQ7L42Z769Mxa9NqLcHarsCG
         7PIuXV3wMKL/8sjTLMBd0QFnMwamftdbMSzk8=
Received: by 10.141.43.19 with SMTP id v19mr2267404rvj.154.1216698583995;
        Mon, 21 Jul 2008 20:49:43 -0700 (PDT)
Received: by 10.140.192.19 with HTTP; Mon, 21 Jul 2008 20:49:43 -0700 (PDT)
Message-ID: <c68e39170807212049rc5ad083obce877c0f3517f2e@mail.gmail.com>
Date: Mon, 21 Jul 2008 23:49:43 -0400
From: "Yonik Seeley" <yonik@apache.org>
Sender: yseeley@gmail.com
To: java-user@lucene.apache.org
Subject: Re: Storing information
In-Reply-To: <18581695.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <18581695.post@talk.nabble.com>
X-Google-Sender-Auth: 33a7593829b9743e
X-Virus-Checked: Checked by ClamAV on apache.org

On Mon, Jul 21, 2008 at 11:27 PM, blazingwolf7 <blazingwolf7@gmail.com> wrote:
> I am using Lucene to perform searching. I have certain information that will
> be loaded everytime a search is run. This means, if there are multiple user
> running the search at the same time, the information will be loaded multiple
> times.

Is  this a Lucene question?
Anyway, refer to the Lucene FieldCache for an example of how to avoid
multiple threads from creating more than one cached object.

-Yonik

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35044-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 22 09:48:48 2008
Return-Path: <java-user-return-35044-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 34517 invoked from network); 22 Jul 2008 09:48:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Jul 2008 09:48:48 -0000
Received: (qmail 50949 invoked by uid 500); 22 Jul 2008 09:48:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50722 invoked by uid 500); 22 Jul 2008 09:48:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50711 invoked by uid 99); 22 Jul 2008 09:48:40 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Jul 2008 02:48:40 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Jul 2008 09:47:45 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KLETa-0002c6-5X
	for java-user@lucene.apache.org; Tue, 22 Jul 2008 02:48:10 -0700
Message-ID: <18585878.post@talk.nabble.com>
Date: Tue, 22 Jul 2008 02:48:10 -0700 (PDT)
From: mpermar <mpermar@gmail.com>
To: java-user@lucene.apache.org
Subject: Opposite to StopFilter. Anything already implemented out there?
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: mpermar@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hi All, 

I want to index some incoming text. In this case what I want to do is just
detect keywords in that text. Therefore I want to discard everything that is
not in the keywords set. This sounds to me pretty much like the reverse of
using stop words, that is it I want to use a set of "accepted" words. 

So I planned to create a new filter that just checks that incoming words are
in the "acceptable set" and discards them otherwise. Are you aware of any
analyzer/filter out there that uses this approach? Is there any other better
way to do this?

Best Regards,
Martin
-- 
View this message in context: http://www.nabble.com/Opposite-to-StopFilter.-Anything-already-implemented-out-there--tp18585878p18585878.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35045-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 22 11:42:01 2008
Return-Path: <java-user-return-35045-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 83693 invoked from network); 22 Jul 2008 11:42:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Jul 2008 11:42:01 -0000
Received: (qmail 73246 invoked by uid 500); 22 Jul 2008 11:41:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73218 invoked by uid 500); 22 Jul 2008 11:41:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 27017 invoked by uid 99); 22 Jul 2008 10:57:18 -0000
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of antonyjoseph89@gmail.com designates 209.85.142.191 as permitted sender)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type;
        bh=3QtRxj4JaBKVtXYdjGgf5oh6xrPOdN0yZDWEvAJZIoo=;
        b=hcssWPI1kfNMnTqcazPXmYXoSph2E9hAlTS6BgXdi9aQpIeLjmlcAWWeJQfxmn1S30
         sQdqm1OfbEbVqt6pel/XrBHR6FzP5YYyHqSS03daR+zLvqxx+V4E8aoy5PeAIEx0YVwA
         q29CZBVe1063nUXahIrpcgHYCN+4bpA+C7oDM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=w0c2WeLHTtNuLedFUubnO2fqOzPY5NwOuu9+SujNwWvoHk1NPU3nvPyOjXbKTWOqCr
         Bz9PEQ2gyqKb8iQyijxFiAQeEk/caD0hnIUa9amI2RHsUe5eCxqqe6ouesdVdzoTPJg/
         sMfJnoyf8DpA/3UUXvXY/1WmkgAdnShWkEBYU=
Message-ID: <f14c4c340807220356m782d80c1hbe1d02e307405f89@mail.gmail.com>
Date: Tue, 22 Jul 2008 16:26:48 +0530
From: "Antony Joseph" <antonyjoseph89@gmail.com>
To: java-user@lucene.apache.org
Subject: Memory leaks during indexing.
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_108056_20790393.1216724208933"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_108056_20790393.1216724208933
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi all,

I am using *Lucene* 2.3.1 and JCC 1.6 to create an *index* of my
python-based application(for searching).Everything is working fine.After
some time(3 hours later) i found my python memory consumptions is grown to
high when i started the applcaition(indexing) the  python consumption is 40
mb , after 3 hours the python consumption shows 140mb . *The *performance of
Indexing become poor and memory leaks.

please help me to solve the problem.

Thanks
Antony







-- 
Antony Joseph A
DigitalGlue
antony@digitalglue.in
T: +91 22 30601091

------=_Part_108056_20790393.1216724208933--

From java-user-return-35046-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 22 13:21:35 2008
Return-Path: <java-user-return-35046-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 41189 invoked from network); 22 Jul 2008 13:21:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Jul 2008 13:21:35 -0000
Received: (qmail 97768 invoked by uid 500); 22 Jul 2008 13:21:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96999 invoked by uid 500); 22 Jul 2008 13:21:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96988 invoked by uid 99); 22 Jul 2008 13:21:27 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Jul 2008 06:21:27 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of Aravind.Yarram@equifax.com designates 216.46.96.103 as permitted sender)
Received: from [216.46.96.103] (HELO smtp11.atl.equifax.com) (216.46.96.103)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Jul 2008 13:20:33 +0000
Received: from postoffice21.equifax.com (unknown [192.168.4.42])
	by smtp11.atl.equifax.com (Postfix) with ESMTP id 7E76231F8
	for <java-user@lucene.apache.org>; Tue, 22 Jul 2008 09:14:16 -0400 (EDT)
Received: from wetcisdlppsmtp1.eis.equifax.com (wetcisdlppsmtp1.fin.equifax.com [172.18.152.141])
	by postoffice21.equifax.com (Symantec Mail Security) with SMTP id 96A2C558002
	for <java-user@lucene.apache.org>; Tue, 22 Jul 2008 09:19:47 -0400 (EDT)
X-AuditID: c0a8042a-adf1abb000000b62-f8-4885de738684
Received: from noteswetc12.fin.equifax.com (noteswetc12.fin.equifax.com [172.18.113.62])
	by postoffice21.equifax.com (Symantec Mail Security) with ESMTP id 5F731558002
	for <java-user@lucene.apache.org>; Tue, 22 Jul 2008 09:19:47 -0400 (EDT)
In-Reply-To: <f14c4c340807220356m782d80c1hbe1d02e307405f89@mail.gmail.com>
To: java-user@lucene.apache.org
Subject: escaping logical operators such as OR AND
Message-ID: <OF4643DE42.2B0324CC-ON8525748E.004943A6-8525748E.00495329@fin.equifax.com>
Date: Tue, 22 Jul 2008 09:20:54 -0400
From: Aravind.Yarram@equifax.com
Content-Type: multipart/alternative; boundary="=_alternative 004953228525748E_="
MIME-Version: 1.0
X-Mailer: Lotus Notes Release 7.0.2 September 26, 2006
X-Disclaimed: 48683
X-Brightmail-Tracker: AAAAAA==
X-CFilter-Loop: Reflected
X-Virus-Checked: Checked by ClamAV on apache.org

--=_alternative 004953228525748E_=
Content-Type: text/plain; charset="US-ASCII"
Content-Transfer-Encoding: quoted-printable

helo all,

In my project, we are indexing the US states...when we try to search on=20
oregon ; state:OR, search on OR is throwing err...i know OR is a logical=20
op in lucene...is there a way to escape such keywords?

tx!

Regards,=20
Aravind R Yarram
Enabling Technologies
Equifax Information Services LLC
1525 Windward Concourse, J42E
Alpharetta, GA 30005
desk: 770 740 6951
email: aravind.yarram@equifax.com=20
This message contains information from Equifax Inc. which may be confidenti=
al and privileged.  If you are not an intended recipient, please refrain fr=
om any disclosure, copying, distribution or use of this information and not=
e that such actions are prohibited.  If you have received this transmission=
 in error, please notify by e-mail postmaster@equifax.com.

--=_alternative 004953228525748E_=--

From java-user-return-35047-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 22 13:29:04 2008
Return-Path: <java-user-return-35047-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45537 invoked from network); 22 Jul 2008 13:29:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Jul 2008 13:29:04 -0000
Received: (qmail 5457 invoked by uid 500); 22 Jul 2008 13:28:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5425 invoked by uid 500); 22 Jul 2008 13:28:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5413 invoked by uid 99); 22 Jul 2008 13:28:58 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Jul 2008 06:28:58 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of Aravind.Yarram@equifax.com designates 216.46.96.104 as permitted sender)
Received: from [216.46.96.104] (HELO smtp12.atl.equifax.com) (216.46.96.104)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Jul 2008 13:28:04 +0000
Received: from postoffice20.equifax.com (unknown [192.168.4.40])
	by smtp12.atl.equifax.com (Postfix) with ESMTP id DD4E9308E
	for <java-user@lucene.apache.org>; Tue, 22 Jul 2008 09:20:32 -0400 (EDT)
Received: from wetcisdlppsmtp1.eis.equifax.com (wetcisdlppsmtp1.fin.equifax.com [172.18.152.141])
	by postoffice20.equifax.com (Symantec Mail Security) with SMTP id EA04F558002
	for <java-user@lucene.apache.org>; Tue, 22 Jul 2008 09:27:30 -0400 (EDT)
X-AuditID: c0a80428-aa667bb000000fe5-da-4885e042e2ed
Received: from noteswetc12.fin.equifax.com (noteswetc12.fin.equifax.com [172.18.113.62])
	by postoffice20.equifax.com (Symantec Mail Security) with ESMTP id B71AB558002
	for <java-user@lucene.apache.org>; Tue, 22 Jul 2008 09:27:30 -0400 (EDT)
To: java-user@lucene.apache.org
Subject: escaping logical operators such as OR AND
Message-ID: <OF4CD1B4FA.4E2BFF5B-ON8525748E.0049F1BE-8525748E.0049FB56@fin.equifax.com>
Date: Tue, 22 Jul 2008 09:28:04 -0400
From: Aravind.Yarram@equifax.com
Content-Type: multipart/alternative; boundary="=_alternative 0049FB538525748E_="
MIME-Version: 1.0
X-Mailer: Lotus Notes Release 7.0.2 September 26, 2006
X-Disclaimed: 60779
X-Brightmail-Tracker: AAAAAA==
X-CFilter-Loop: Reflected
X-Virus-Checked: Checked by ClamAV on apache.org

--=_alternative 0049FB538525748E_=
Content-Type: text/plain; charset="US-ASCII"
Content-Transfer-Encoding: quoted-printable

helo all,

In my project, we are indexing the US states...when we try to search on=20
oregon ; state:OR, search on OR is throwing err...i know OR is a logical=20
op in lucene...is there a way to escape such keywords?

tx!

Regards,=20
Aravind R Yarram
Enabling Technologies
Equifax Information Services LLC
1525 Windward Concourse, J42E
Alpharetta, GA 30005
desk: 770 740 6951
email: aravind.yarram@equifax.com=20
This message contains information from Equifax Inc. which may be confidenti=
al and privileged.  If you are not an intended recipient, please refrain fr=
om any disclosure, copying, distribution or use of this information and not=
e that such actions are prohibited.  If you have received this transmission=
 in error, please notify by e-mail postmaster@equifax.com.

--=_alternative 0049FB538525748E_=--

From java-user-return-35048-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 22 13:38:37 2008
Return-Path: <java-user-return-35048-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 50506 invoked from network); 22 Jul 2008 13:38:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Jul 2008 13:38:37 -0000
Received: (qmail 21492 invoked by uid 500); 22 Jul 2008 13:38:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21462 invoked by uid 500); 22 Jul 2008 13:38:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21442 invoked by uid 99); 22 Jul 2008 13:38:20 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Jul 2008 06:38:20 -0700
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.198.232 as permitted sender)
Received: from [209.85.198.232] (HELO rv-out-0506.google.com) (209.85.198.232)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Jul 2008 13:37:25 +0000
Received: by rv-out-0506.google.com with SMTP id f6so1906820rvb.5
        for <java-user@lucene.apache.org>; Tue, 22 Jul 2008 06:37:50 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=MyXtll/Rd+HVJLkMraPxwO2p/Ao6J/gJ15MWm6NxowY=;
        b=hySl/Zm91rwlXlOrxaWMV6f6EccKoCDrsKLR+I6HP6SalUkQZSSKPNA3Ok2shMz+pj
         ui7BpKMPDs5UcIkW6QYpfYR1NZGz7CNHXAmQt4dFEtmgOyvGj3vPsf78uZoximyndiJ0
         mow3oYg7HnzO1Z4AXO1/voNTiSF6uxfG1TeeM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=nUYQAawnb870eSs1AHDmNm3K0aBlzI6/UFNoIk9aRS4H3Q9Q1CX5dKPRgTCrEcPZmO
         NkDp4YKnl7nCQpbxoP74iZwA+CUCngGahL40mzSm5JhvBWJTtv9Svt20JamapjYMU1PS
         WGJchmFj8D14WDo84Nni/LzXvBaqOzCQQFIT0=
Received: by 10.141.136.19 with SMTP id o19mr2523655rvn.281.1216733870217;
        Tue, 22 Jul 2008 06:37:50 -0700 (PDT)
Received: by 10.141.185.2 with HTTP; Tue, 22 Jul 2008 06:37:50 -0700 (PDT)
Message-ID: <359a92830807220637x450f1f6bkb5b463c2ad34d6ee@mail.gmail.com>
Date: Tue, 22 Jul 2008 09:37:50 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: How to avoid duplicate records in lucene
In-Reply-To: <4884D90A.60801@yahoo.co.uk>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_64785_29693713.1216733870206"
References: <18543588.post@talk.nabble.com> <4883F03F.7050409@gmail.com>
	 <18568862.post@talk.nabble.com>
	 <359a92830807210718l66f56f0ew2df8c52c5daafccd@mail.gmail.com>
	 <4884D90A.60801@yahoo.co.uk>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_64785_29693713.1216733870206
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Well, the point of my question was to insure that we were all using common
terms. For all we know, the original questioner considered "duplicate"
records ones that had identical, or even similar text. Nothing in the
original question indicated any de-dup happening.

I've often found that assumptions that we are all talking about the same
thing are...er...incorrect. And I don't want to waste my time answering
questions that weren't what was asked......

Best
Erick

On Mon, Jul 21, 2008 at 2:44 PM, markharw00d <markharw00d@yahoo.co.uk>
wrote:

> >>could you define duplicate?
>
> That's your choice of field that you want to de-dup on.
> That could be a field such as "DatabasePrimaryKey" or perhaps a field
> containing an MD5 hash of document content.
> The DuplicateFilter ensures only one document can exist in results for each
> unique value for the choice of field.
>
> Cheers
> Mark
>
> Erick Erickson wrote:
>
>> could you define duplicate? As far as I know, you don't
>> get the same (internal) doc id back more than once, so what
>> is a duplicate?
>>
>> Best
>> Erick
>>
>> On Mon, Jul 21, 2008 at 9:40 AM, Sebastin <sebasmtech@gmail.com> wrote:
>>
>>
>>
>>> at the time search , while querying the data
>>> markrmiller wrote:
>>>
>>>
>>>> Sebastin wrote:
>>>>
>>>>
>>>>> Hi All,
>>>>>
>>>>> Is there any possibility to avoid duplicate records in lucene  2.3.1?
>>>>>
>>>>>
>>>>>
>>>> I don't believe that there is a very high performance way to do this.
>>>> You are basically going to have to query the index for an id before
>>>> adding a new doc. The best way I can think of off the top of my head is
>>>> to batch - first check that ids in the batch are unique, then check all
>>>> ids in the batch against the IndexReader, then add the ones that are not
>>>> dupes. Of course all of your docs would have to be added through this
>>>> single choke point so that you knew other threads had not added that id
>>>> after the first thread had looked but before it added the doc.
>>>>
>>>> I think Mark H has you covered if getting the dupes out after are okay.
>>>>
>>>> - Mark
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>>
>>>>
>>>>
>>> --
>>> View this message in context:
>>>
>>> http://www.nabble.com/How-to-avoid-duplicate-records-in-lucene-tp18543588p18568862.html
>>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>>
>>>
>>
>>  ------------------------------------------------------------------------
>>
>> No virus found in this incoming message.
>> Checked by AVG. Version: 7.5.526 / Virus Database: 270.5.3/1563 - Release
>> Date: 20/07/2008 12:59
>>
>>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_64785_29693713.1216733870206--

From java-user-return-35049-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 22 13:41:47 2008
Return-Path: <java-user-return-35049-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 52162 invoked from network); 22 Jul 2008 13:41:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Jul 2008 13:41:47 -0000
Received: (qmail 29458 invoked by uid 500); 22 Jul 2008 13:41:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29092 invoked by uid 500); 22 Jul 2008 13:41:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29081 invoked by uid 99); 22 Jul 2008 13:41:40 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Jul 2008 06:41:40 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.198.238 as permitted sender)
Received: from [209.85.198.238] (HELO rv-out-0506.google.com) (209.85.198.238)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Jul 2008 13:40:46 +0000
Received: by rv-out-0506.google.com with SMTP id f6so1907971rvb.5
        for <java-user@lucene.apache.org>; Tue, 22 Jul 2008 06:40:54 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=FnvYHclVJ5608ktSUPWvXcO1QNk9zeaQ1my/FdOPRvw=;
        b=O1ob+ihTU+SjbYLPm2cADHTe7ZW6QiUpwSIRobbaiFENdg+rLCEzxJFEzH6DTup4ob
         lObhO4aWCZc5efuOJhU+aTVU6jISSDg3uG3rbo+IIBF32b/nh51mONMWngsvRp3AWXJC
         ZlH10VhHHo7/85qzIUXkHXadIvTAd9HW51JWk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=Kiog88uWhMiZtw6+Ohjozss/qX5uNoxTcQ49LXV0RvAx6a8hsh6+eg7LynEWnGxsO9
         jEn2Yra76ULO7oZFy9oa9dVJcNaddNVyr1NqIVHiHwhx7lJDUaClq0fYl8ERm5a/5+jd
         Fr6Jov5X6bbgDfITR3nPuIVY9F6bDSHivRWbE=
Received: by 10.140.170.12 with SMTP id s12mr2550119rve.101.1216734054077;
        Tue, 22 Jul 2008 06:40:54 -0700 (PDT)
Received: by 10.141.185.2 with HTTP; Tue, 22 Jul 2008 06:40:54 -0700 (PDT)
Message-ID: <359a92830807220640n57c0a8f9x8f4bb7648dd062a7@mail.gmail.com>
Date: Tue, 22 Jul 2008 09:40:54 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: escaping logical operators such as OR AND
In-Reply-To: <OF4CD1B4FA.4E2BFF5B-ON8525748E.0049F1BE-8525748E.0049FB56@fin.equifax.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_64803_26739991.1216734054083"
References: <OF4CD1B4FA.4E2BFF5B-ON8525748E.0049F1BE-8525748E.0049FB56@fin.equifax.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_64803_26739991.1216734054083
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Have you tried lower-casing them? To be treated as an operator, they
must be upper cased.

But be careful that, when you lower-case them, your query analyzer doesn't
treat them as stop words....

Best
Erick

On Tue, Jul 22, 2008 at 9:28 AM, <Aravind.Yarram@equifax.com> wrote:

> helo all,
>
> In my project, we are indexing the US states...when we try to search on
> oregon ; state:OR, search on OR is throwing err...i know OR is a logical
> op in lucene...is there a way to escape such keywords?
>
> tx!
>
> Regards,
> Aravind R Yarram
> Enabling Technologies
> Equifax Information Services LLC
> 1525 Windward Concourse, J42E
> Alpharetta, GA 30005
> desk: 770 740 6951
> email: aravind.yarram@equifax.com
> This message contains information from Equifax Inc. which may be
> confidential and privileged.  If you are not an intended recipient, please
> refrain from any disclosure, copying, distribution or use of this
> information and note that such actions are prohibited.  If you have received
> this transmission in error, please notify by e-mail postmaster@equifax.com
> .
>

------=_Part_64803_26739991.1216734054083--

From java-user-return-35050-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 22 13:53:44 2008
Return-Path: <java-user-return-35050-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61256 invoked from network); 22 Jul 2008 13:53:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Jul 2008 13:53:44 -0000
Received: (qmail 56069 invoked by uid 500); 22 Jul 2008 13:53:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55934 invoked by uid 500); 22 Jul 2008 13:53:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55923 invoked by uid 99); 22 Jul 2008 13:53:36 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Jul 2008 06:53:36 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Jul 2008 13:52:41 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KLIIc-0001X4-AS
	for java-user@lucene.apache.org; Tue, 22 Jul 2008 06:53:06 -0700
Message-ID: <18587632.post@talk.nabble.com>
Date: Tue, 22 Jul 2008 06:53:06 -0700 (PDT)
From: WY-LAC <wally.yuen@lac-bac.gc.ca>
To: java-user@lucene.apache.org
Subject: Parametric/faceted Searching
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: wally.yuen@lac-bac.gc.ca
X-Virus-Checked: Checked by ClamAV on apache.org


I looking for sample code that would do the following : 

      On the first page a parametric Fields 

            Topics
            ALL
            Births, Marriages and Death (1200)   - Major Category
            - Divorces in Canada (750)              - sub category
            - Deaths (450)                              - sub category

       Click on Major Category it would display 

           Topics
           
            Births, Marriages and Death (1200)   - Major Category
            - Divorces in Canada (750)              - sub category
            - Deaths (450)                              - sub category

       Click on sub Category ( Divorces in Canada ) it would display the
following

           Topics
           
            Births, Marriages and Death             - Major Category
            - Divorces in Canada (750)              - sub category
            
            



             
-- 
View this message in context: http://www.nabble.com/Parametric-faceted-Searching-tp18587632p18587632.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35051-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 22 13:53:52 2008
Return-Path: <java-user-return-35051-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61366 invoked from network); 22 Jul 2008 13:53:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Jul 2008 13:53:52 -0000
Received: (qmail 57636 invoked by uid 500); 22 Jul 2008 13:53:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57601 invoked by uid 500); 22 Jul 2008 13:53:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57590 invoked by uid 99); 22 Jul 2008 13:53:44 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Jul 2008 06:53:44 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of Aravind.Yarram@equifax.com designates 216.46.96.102 as permitted sender)
Received: from [216.46.96.102] (HELO smtp10.atl.equifax.com) (216.46.96.102)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Jul 2008 13:52:51 +0000
Received: from postoffice21.equifax.com (unknown [192.168.4.42])
	by smtp10.atl.equifax.com (Postfix) with ESMTP id CD49531D9
	for <java-user@lucene.apache.org>; Tue, 22 Jul 2008 09:43:41 -0400 (EDT)
Received: from 172.18.152.143 (wetcisdlppsmtp3.fin.equifax.com [172.18.152.143])
	by postoffice21.equifax.com (Symantec Mail Security) with SMTP id BA18F558002
	for <java-user@lucene.apache.org>; Tue, 22 Jul 2008 09:52:08 -0400 (EDT)
X-AuditID: c0a8042a-abf16bb000000b62-19-4885e6083cbe
Received: from noteswetc12.fin.equifax.com (noteswetc12.fin.equifax.com [172.18.113.62])
	by postoffice21.equifax.com (Symantec Mail Security) with ESMTP id 6610A558002
	for <java-user@lucene.apache.org>; Tue, 22 Jul 2008 09:52:08 -0400 (EDT)
In-Reply-To: <359a92830807220640n57c0a8f9x8f4bb7648dd062a7@mail.gmail.com>
To: java-user@lucene.apache.org
Cc: java-user@lucene.apache.org
Subject: Re: escaping logical operators such as OR AND
Message-ID: <OFB9394915.FA24E256-ON8525748E.004C318D-8525748E.004C4914@fin.equifax.com>
Date: Tue, 22 Jul 2008 09:53:14 -0400
From: Aravind.Yarram@equifax.com
Content-Type: multipart/alternative; boundary="=_alternative 004C490E8525748E_="
MIME-Version: 1.0
X-Mailer: Lotus Notes Release 7.0.2 September 26, 2006
X-Disclaimed: 14355
X-Brightmail-Tracker: AAAAAA==
X-CFilter-Loop: Reflected
X-Virus-Checked: Checked by ClamAV on apache.org

--=_alternative 004C490E8525748E_=
Content-Type: text/plain; charset="US-ASCII"
Content-Transfer-Encoding: quoted-printable

lower-casing worked...tx...but is there a way of escaping them like we use =

escape characters in java!

Regards,=20
Aravind R Yarram
Enabling Technologies
Equifax Information Services LLC
1525 Windward Concourse, J42E
Alpharetta, GA 30005
desk: 770 740 6951
email: aravind.yarram@equifax.com=20



"Erick Erickson" <erickerickson@gmail.com>=20
07/22/2008 09:40 AM
Please respond to
java-user@lucene.apache.org


To
java-user@lucene.apache.org
cc

Subject
Re: escaping logical operators such as OR AND






Have you tried lower-casing them? To be treated as an operator, they
must be upper cased.

But be careful that, when you lower-case them, your query analyzer doesn't
treat them as stop words....

Best
Erick

On Tue, Jul 22, 2008 at 9:28 AM, <Aravind.Yarram@equifax.com> wrote:

> helo all,
>
> In my project, we are indexing the US states...when we try to search on
> oregon ; state:OR, search on OR is throwing err...i know OR is a logical
> op in lucene...is there a way to escape such keywords?
>
> tx!
>
> Regards,
> Aravind R Yarram
> Enabling Technologies
> Equifax Information Services LLC
> 1525 Windward Concourse, J42E
> Alpharetta, GA 30005
> desk: 770 740 6951
> email: aravind.yarram@equifax.com
> This message contains information from Equifax Inc. which may be
> confidential and privileged.  If you are not an intended recipient,=20
please
> refrain from any disclosure, copying, distribution or use of this
> information and note that such actions are prohibited.  If you have=20
received
> this transmission in error, please notify by e-mail=20
postmaster@equifax.com
> .
>


This message contains information from Equifax Inc. which may be confidenti=
al and privileged.  If you are not an intended recipient, please refrain fr=
om any disclosure, copying, distribution or use of this information and not=
e that such actions are prohibited.  If you have received this transmission=
 in error, please notify by e-mail postmaster@equifax.com.

--=_alternative 004C490E8525748E_=--

From java-user-return-35052-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 22 14:06:51 2008
Return-Path: <java-user-return-35052-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69668 invoked from network); 22 Jul 2008 14:06:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Jul 2008 14:06:49 -0000
Received: (qmail 81745 invoked by uid 500); 22 Jul 2008 14:06:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81719 invoked by uid 500); 22 Jul 2008 14:06:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81708 invoked by uid 99); 22 Jul 2008 14:06:42 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Jul 2008 07:06:42 -0700
X-ASF-Spam-Status: No, hits=-4.0 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [128.230.108.46] (HELO SUEXCL-02.ad.syr.edu) (128.230.108.46)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Jul 2008 14:05:48 +0000
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Opposite to StopFilter. Anything already implemented out there?
Date: Tue, 22 Jul 2008 10:03:05 -0400
Message-ID: <9294E20AED46934EA459020706463F94C59C37@SUEXCL-02.ad.syr.edu>
In-Reply-To: <18585878.post@talk.nabble.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Opposite to StopFilter. Anything already implemented out there?
Thread-Index: Acjr4CjRMRxD7a5FReyUvUfIn5DLxwAIJMlg
From: "Steven A Rowe" <sarowe@syr.edu>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Martin,

On 07/22/2008 at 5:48 AM, mpermar wrote:
> I want to index some incoming text. In this case what I want
> to do is just detect keywords in that text. Therefore I want
> to discard everything that is not in the keywords set. This
> sounds to me pretty much like the reverse of using stop words,
> that is it I want to use a set of "accepted" words.
>=20
> So I planned to create a new filter that just checks that
> incoming words are in the "acceptable set" and discards them
> otherwise. Are you aware of any analyzer/filter out there that
> uses this approach? Is there any other better way to do this?

Solr has KeepWordFilter - it sounds exactly like what you want:=20

Javadoc: =
<http://lucene.apache.org/solr/api/org/apache/solr/analysis/KeepWordFilte=
r.html>
Source: =
<http://svn.apache.org/viewvc/lucene/solr/trunk/src/java/org/apache/solr/=
analysis/KeepWordFilter.java?view=3Dmarkup>

Depending on your requirements and the nature of your keywords list, you =
might consider applying this filter only to queries, rather than at =
index time.  That way, the keyword list can change without having to =
re-index.

Steve

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35053-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 22 14:13:08 2008
Return-Path: <java-user-return-35053-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70879 invoked from network); 22 Jul 2008 14:13:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Jul 2008 14:13:06 -0000
Received: (qmail 87530 invoked by uid 500); 22 Jul 2008 14:12:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87498 invoked by uid 500); 22 Jul 2008 14:12:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87487 invoked by uid 99); 22 Jul 2008 14:12:57 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Jul 2008 07:12:57 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [64.233.184.235] (HELO wr-out-0506.google.com) (64.233.184.235)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Jul 2008 14:12:02 +0000
Received: by wr-out-0506.google.com with SMTP id c30so1346566wra.21
        for <java-user@lucene.apache.org>; Tue, 22 Jul 2008 07:12:23 -0700 (PDT)
Received: by 10.90.116.9 with SMTP id o9mr3035690agc.45.1216735943602;
        Tue, 22 Jul 2008 07:12:23 -0700 (PDT)
Received: from ?10.17.4.4? ( [72.93.214.93])
        by mx.google.com with ESMTPS id 8sm7440938wrl.21.2008.07.22.07.12.22
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Tue, 22 Jul 2008 07:12:22 -0700 (PDT)
Message-Id: <171AA37F-578B-419F-BDE9-BF270611D8F0@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <f14c4c340807220356m782d80c1hbe1d02e307405f89@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: Memory leaks during indexing.
Date: Tue, 22 Jul 2008 10:12:21 -0400
References: <f14c4c340807220356m782d80c1hbe1d02e307405f89@mail.gmail.com>
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org


Can you post the Python sources of the Lucene part of your application?

One thing to check is how the JRE is being instantiated from Python,  
ie, what the equivalent setting is for -Xmx (= max heap size).  It's  
possible the 140 MB consumption is actually "OK" as far as the JRE is  
concerned, if it was told it's allowed to use that much heap (or more).

Try letting it continue to run for a very long time to see how the  
size grows... if it's really a leak it will truly keep growing and  
eventually hit an OutOfMemory exception in Java or Python; if instead  
it's just the JRE thinking it's allowed to use that much heap it  
should at some point level off, but possibly at a high value.

Are you able to get the same memory leak to happen with a java only  
version of the Lucene part of your application?

Mike

Antony Joseph wrote:

> Hi all,
>
> I am using *Lucene* 2.3.1 and JCC 1.6 to create an *index* of my
> python-based application(for searching).Everything is working  
> fine.After
> some time(3 hours later) i found my python memory consumptions is  
> grown to
> high when i started the applcaition(indexing) the  python  
> consumption is 40
> mb , after 3 hours the python consumption shows 140mb . *The  
> *performance of
> Indexing become poor and memory leaks.
>
> please help me to solve the problem.
>
> Thanks
> Antony
>
>
>
>
>
>
>
> -- 
> Antony Joseph A
> DigitalGlue
> antony@digitalglue.in
> T: +91 22 30601091


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35054-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 22 14:13:47 2008
Return-Path: <java-user-return-35054-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71102 invoked from network); 22 Jul 2008 14:13:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Jul 2008 14:13:47 -0000
Received: (qmail 90297 invoked by uid 500); 22 Jul 2008 14:13:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90270 invoked by uid 500); 22 Jul 2008 14:13:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90259 invoked by uid 99); 22 Jul 2008 14:13:39 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Jul 2008 07:13:39 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.198.226 as permitted sender)
Received: from [209.85.198.226] (HELO rv-out-0506.google.com) (209.85.198.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Jul 2008 14:12:45 +0000
Received: by rv-out-0506.google.com with SMTP id f6so1919279rvb.5
        for <java-user@lucene.apache.org>; Tue, 22 Jul 2008 07:13:10 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=A3HyKW+tatl699PW2WVy8nISQ8knUMbEoRbYKi8QIIg=;
        b=XUYJJ9fR4iUO+GNOqDd+wsouY8T6NAdBqfMAPykWsrPT6+7QIvX2ycCsY15w+pPONF
         ac4eVo5I4MkIRpltXI47WAerxXWLL6+iTvuuyBK76RYhRhMqv7on1jvOUpT8SkfowRus
         /wTOGKaAkDVLpyqBNCdVMzJx/HeWyrTw1Kq2c=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=ufdFkTN/uvItFApe+R51cQj3iCSt1k3kuJVKmJ+bqzqzOau/1Q9hqnLRpvAw7CzX4x
         ZpUwuBrjP2PaCumZTO8n9EipQWIyM55rP48/t2uzpniFOxkBQm8WMiQ1kZDlZ5atKBlm
         hCwCo7lfc9PiXVJl1t6skP5HnUsu2Phh2GuLw=
Received: by 10.141.168.16 with SMTP id v16mr2561700rvo.233.1216735990818;
        Tue, 22 Jul 2008 07:13:10 -0700 (PDT)
Received: by 10.141.185.2 with HTTP; Tue, 22 Jul 2008 07:13:10 -0700 (PDT)
Message-ID: <359a92830807220713i2688d4c2hee464126e007cc15@mail.gmail.com>
Date: Tue, 22 Jul 2008 10:13:10 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: escaping logical operators such as OR AND
In-Reply-To: <OFB9394915.FA24E256-ON8525748E.004C318D-8525748E.004C4914@fin.equifax.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_64941_2101959.1216735990801"
References: <359a92830807220640n57c0a8f9x8f4bb7648dd062a7@mail.gmail.com>
	 <OFB9394915.FA24E256-ON8525748E.004C318D-8525748E.004C4914@fin.equifax.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_64941_2101959.1216735990801
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

<<is there a way of escaping them like we use
escape characters in java>>

I haven't ever tried, so I don't know <G>... But my
poor memory doesn't bring any to mind....

Best
Erick

On Tue, Jul 22, 2008 at 9:53 AM, <Aravind.Yarram@equifax.com> wrote:

> lower-casing worked...tx...but is there a way of escaping them like we use
> escape characters in java!
>
> Regards,
> Aravind R Yarram
> Enabling Technologies
> Equifax Information Services LLC
> 1525 Windward Concourse, J42E
> Alpharetta, GA 30005
> desk: 770 740 6951
> email: aravind.yarram@equifax.com
>
>
>
> "Erick Erickson" <erickerickson@gmail.com>
> 07/22/2008 09:40 AM
> Please respond to
> java-user@lucene.apache.org
>
>
> To
> java-user@lucene.apache.org
> cc
>
> Subject
> Re: escaping logical operators such as OR AND
>
>
>
>
>
>
> Have you tried lower-casing them? To be treated as an operator, they
> must be upper cased.
>
> But be careful that, when you lower-case them, your query analyzer doesn't
> treat them as stop words....
>
> Best
> Erick
>
> On Tue, Jul 22, 2008 at 9:28 AM, <Aravind.Yarram@equifax.com> wrote:
>
> > helo all,
> >
> > In my project, we are indexing the US states...when we try to search on
> > oregon ; state:OR, search on OR is throwing err...i know OR is a logical
> > op in lucene...is there a way to escape such keywords?
> >
> > tx!
> >
> > Regards,
> > Aravind R Yarram
> > Enabling Technologies
> > Equifax Information Services LLC
> > 1525 Windward Concourse, J42E
> > Alpharetta, GA 30005
> > desk: 770 740 6951
> > email: aravind.yarram@equifax.com
> > This message contains information from Equifax Inc. which may be
> > confidential and privileged.  If you are not an intended recipient,
> please
> > refrain from any disclosure, copying, distribution or use of this
> > information and note that such actions are prohibited.  If you have
> received
> > this transmission in error, please notify by e-mail
> postmaster@equifax.com
> > .
> >
>
>
> This message contains information from Equifax Inc. which may be
> confidential and privileged.  If you are not an intended recipient, please
> refrain from any disclosure, copying, distribution or use of this
> information and note that such actions are prohibited.  If you have received
> this transmission in error, please notify by e-mail postmaster@equifax.com
> .
>

------=_Part_64941_2101959.1216735990801--

From java-user-return-35055-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 22 15:26:56 2008
Return-Path: <java-user-return-35055-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35787 invoked from network); 22 Jul 2008 15:26:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Jul 2008 15:26:56 -0000
Received: (qmail 10715 invoked by uid 500); 22 Jul 2008 15:26:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10683 invoked by uid 500); 22 Jul 2008 15:26:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10672 invoked by uid 99); 22 Jul 2008 15:26:48 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Jul 2008 08:26:48 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Jul 2008 15:25:53 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KLJko-0004p7-C4
	for java-user@lucene.apache.org; Tue, 22 Jul 2008 08:26:18 -0700
Message-ID: <18591960.post@talk.nabble.com>
Date: Tue, 22 Jul 2008 08:26:18 -0700 (PDT)
From: mpermar <mpermar@gmail.com>
To: java-user@lucene.apache.org
Subject: RE: Opposite to StopFilter. Anything already implemented out there?
In-Reply-To: <9294E20AED46934EA459020706463F94C59C37@SUEXCL-02.ad.syr.edu>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: mpermar@gmail.com
References: <18585878.post@talk.nabble.com> <9294E20AED46934EA459020706463F94C59C37@SUEXCL-02.ad.syr.edu>
X-Virus-Checked: Checked by ClamAV on apache.org


Absolutely!

Thanks Steven. 

Best Regards,
Martin


Steven A Rowe wrote:
> 
> Hi Martin,
> 
> On 07/22/2008 at 5:48 AM, mpermar wrote:
>> I want to index some incoming text. In this case what I want
>> to do is just detect keywords in that text. Therefore I want
>> to discard everything that is not in the keywords set. This
>> sounds to me pretty much like the reverse of using stop words,
>> that is it I want to use a set of "accepted" words.
>> 
>> So I planned to create a new filter that just checks that
>> incoming words are in the "acceptable set" and discards them
>> otherwise. Are you aware of any analyzer/filter out there that
>> uses this approach? Is there any other better way to do this?
> 
> Solr has KeepWordFilter - it sounds exactly like what you want: 
> 
> Javadoc:
> <http://lucene.apache.org/solr/api/org/apache/solr/analysis/KeepWordFilter.html>
> Source:
> <http://svn.apache.org/viewvc/lucene/solr/trunk/src/java/org/apache/solr/analysis/KeepWordFilter.java?view=markup>
> 
> Depending on your requirements and the nature of your keywords list, you
> might consider applying this filter only to queries, rather than at index
> time.  That way, the keyword list can change without having to re-index.
> 
> Steve
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/Opposite-to-StopFilter.-Anything-already-implemented-out-there--tp18585878p18591960.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35056-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 22 17:33:18 2008
Return-Path: <java-user-return-35056-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7364 invoked from network); 22 Jul 2008 17:33:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Jul 2008 17:33:18 -0000
Received: (qmail 68759 invoked by uid 500); 22 Jul 2008 17:33:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68727 invoked by uid 500); 22 Jul 2008 17:33:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68716 invoked by uid 99); 22 Jul 2008 17:33:10 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Jul 2008 10:33:10 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.74] (HELO spunkymail-a19.g.dreamhost.com) (208.97.132.74)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Jul 2008 17:32:14 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a19.g.dreamhost.com (Postfix) with ESMTP id 91ED9120A5
	for <java-user@lucene.apache.org>; Tue, 22 Jul 2008 10:32:38 -0700 (PDT)
Message-Id: <674BEBA9-A19E-487C-846C-82DF7C5C4A44@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <c68e39170807212049rc5ad083obce877c0f3517f2e@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: Storing information
Date: Tue, 22 Jul 2008 13:32:37 -0400
References: <18581695.post@talk.nabble.com> <c68e39170807212049rc5ad083obce877c0f3517f2e@mail.gmail.com>
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org

You may also want a Document cache and or even a Query cache,  
depending on your situation.

-Grant

On Jul 21, 2008, at 11:49 PM, Yonik Seeley wrote:

> On Mon, Jul 21, 2008 at 11:27 PM, blazingwolf7  
> <blazingwolf7@gmail.com> wrote:
>> I am using Lucene to perform searching. I have certain information  
>> that will
>> be loaded everytime a search is run. This means, if there are  
>> multiple user
>> running the search at the same time, the information will be loaded  
>> multiple
>> times.
>
> Is  this a Lucene question?
> Anyway, refer to the Lucene FieldCache for an example of how to avoid
> multiple threads from creating more than one cached object.
>
> -Yonik
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

--------------------------
Grant Ingersoll
http://www.lucidimagination.com

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ








---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35057-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 22 18:10:07 2008
Return-Path: <java-user-return-35057-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32029 invoked from network); 22 Jul 2008 18:10:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Jul 2008 18:10:06 -0000
Received: (qmail 48478 invoked by uid 500); 22 Jul 2008 18:09:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48453 invoked by uid 500); 22 Jul 2008 18:09:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48442 invoked by uid 99); 22 Jul 2008 18:09:58 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Jul 2008 11:09:58 -0700
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [217.12.10.212] (HELO web26001.mail.ukl.yahoo.com) (217.12.10.212)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 22 Jul 2008 18:09:01 +0000
Received: (qmail 20638 invoked by uid 60001); 22 Jul 2008 18:09:24 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=cTx4vcCibiPnFUB/CTcUccUPoqm2GUsMIlemAveKPUpi7lJgHAOKYUfzHlhm/sWlfhF0fGA4Eog1TMZ0jtKc6DpMh2E56XU4TpqtKOkppWRZIwnKZxubo6GZOu3yorv3uTpLAEc/zW18df72g68ojxinL+W827jGburbq25jZSA=;
Received: from [193.36.230.96] by web26001.mail.ukl.yahoo.com via HTTP; Tue, 22 Jul 2008 18:09:24 GMT
X-Mailer: YahooMailRC/1042.40 YahooMailWebService/0.7.218
Date: Tue, 22 Jul 2008 18:09:24 +0000 (GMT)
From: mark harwood <markharw00d@yahoo.co.uk>
Subject: Re: How to avoid duplicate records in lucene
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
Message-ID: <857030.20618.qm@web26001.mail.ukl.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

>>Well, the point of my question was to insure that we were all using commo=
n terms.=0A=0ASorry, Erick. I thought your "define duplicate" question was =
asking me about DuplicateFilter's concept of duplicates rather than asking =
the original poster about his notion of what a duplicate document meant to =
him. You're right it would be useful to understand more about the intention=
 of the original message.=0A=0ACheers=0AMark=0A=0A=0A=0A=0A=0A----- Origina=
l Message ----=0AFrom: Erick Erickson <erickerickson@gmail.com>=0ATo: java-=
user@lucene.apache.org=0ASent: Tuesday, 22 July, 2008 2:37:50 PM=0ASubject:=
 Re: How to avoid duplicate records in lucene=0A=0AWell, the point of my qu=
estion was to insure that we were all using common=0Aterms. For all we know=
, the original questioner considered "duplicate"=0Arecords ones that had id=
entical, or even similar text. Nothing in the=0Aoriginal question indicated=
 any de-dup happening.=0A=0AI've often found that assumptions that we are a=
ll talking about the same=0Athing are...er...incorrect. And I don't want to=
 waste my time answering=0Aquestions that weren't what was asked......=0A=
=0ABest=0AErick=0A=0AOn Mon, Jul 21, 2008 at 2:44 PM, markharw00d <markharw=
00d@yahoo.co.uk>=0Awrote:=0A=0A> >>could you define duplicate?=0A>=0A> That=
's your choice of field that you want to de-dup on.=0A> That could be a fie=
ld such as "DatabasePrimaryKey" or perhaps a field=0A> containing an MD5 ha=
sh of document content.=0A> The DuplicateFilter ensures only one document c=
an exist in results for each=0A> unique value for the choice of field.=0A>=
=0A> Cheers=0A> Mark=0A>=0A> Erick Erickson wrote:=0A>=0A>> could you defin=
e duplicate? As far as I know, you don't=0A>> get the same (internal) doc i=
d back more than once, so what=0A>> is a duplicate?=0A>>=0A>> Best=0A>> Eri=
ck=0A>>=0A>> On Mon, Jul 21, 2008 at 9:40 AM, Sebastin <sebasmtech@gmail.co=
m> wrote:=0A>>=0A>>=0A>>=0A>>> at the time search , while querying the data=
=0A>>> markrmiller wrote:=0A>>>=0A>>>=0A>>>> Sebastin wrote:=0A>>>>=0A>>>>=
=0A>>>>> Hi All,=0A>>>>>=0A>>>>> Is there any possibility to avoid duplicat=
e records in lucene  2.3.1?=0A>>>>>=0A>>>>>=0A>>>>>=0A>>>> I don't believe =
that there is a very high performance way to do this.=0A>>>> You are basica=
lly going to have to query the index for an id before=0A>>>> adding a new d=
oc. The best way I can think of off the top of my head is=0A>>>> to batch -=
 first check that ids in the batch are unique, then check all=0A>>>> ids in=
 the batch against the IndexReader, then add the ones that are not=0A>>>> d=
upes. Of course all of your docs would have to be added through this=0A>>>>=
 single choke point so that you knew other threads had not added that id=0A=
>>>> after the first thread had looked but before it added the doc.=0A>>>>=
=0A>>>> I think Mark H has you covered if getting the dupes out after are o=
kay.=0A>>>>=0A>>>> - Mark=0A>>>>=0A>>>> -----------------------------------=
----------------------------------=0A>>>> To unsubscribe, e-mail: java-user=
-unsubscribe@lucene.apache.org=0A>>>> For additional commands, e-mail: java=
-user-help@lucene.apache.org=0A>>>>=0A>>>>=0A>>>>=0A>>>>=0A>>>>=0A>>> --=0A=
>>> View this message in context:=0A>>>=0A>>> http://www.nabble.com/How-to-=
avoid-duplicate-records-in-lucene-tp18543588p18568862.html=0A>>> Sent from =
the Lucene - Java Users mailing list archive at Nabble.com.=0A>>>=0A>>>=0A>=
>> ---------------------------------------------------------------------=0A=
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org=0A>>> F=
or additional commands, e-mail: java-user-help@lucene.apache.org=0A>>>=0A>>=
>=0A>>>=0A>>>=0A>>=0A>>  --------------------------------------------------=
----------------------=0A>>=0A>> No virus found in this incoming message.=
=0A>> Checked by AVG. Version: 7.5.526 / Virus Database: 270.5.3/1563 - Rel=
ease=0A>> Date: 20/07/2008 12:59=0A>>=0A>>=0A>=0A>=0A>=0A> ----------------=
-----------------------------------------------------=0A> To unsubscribe, e=
-mail: java-user-unsubscribe@lucene.apache.org=0A> For additional commands,=
 e-mail: java-user-help@lucene.apache.org=0A>=0A>=0A=0A=0A=0A      ________=
__________________________________________________=0ANot happy with your em=
ail address?.=0AGet the one you really want - millions of new email address=
es available now at Yahoo! http://uk.docs.yahoo.com/ymail/new.html

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35058-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 22 18:22:53 2008
Return-Path: <java-user-return-35058-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 43663 invoked from network); 22 Jul 2008 18:22:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Jul 2008 18:22:53 -0000
Received: (qmail 69801 invoked by uid 500); 22 Jul 2008 18:22:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69659 invoked by uid 500); 22 Jul 2008 18:22:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69648 invoked by uid 99); 22 Jul 2008 18:22:45 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Jul 2008 11:22:45 -0700
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.198.230 as permitted sender)
Received: from [209.85.198.230] (HELO rv-out-0506.google.com) (209.85.198.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Jul 2008 18:21:49 +0000
Received: by rv-out-0506.google.com with SMTP id f6so2009050rvb.5
        for <java-user@lucene.apache.org>; Tue, 22 Jul 2008 11:22:13 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=N13gSsG6LOGD5U8P1F5H3zzqg6XT9cIdPoLL2WoG/9A=;
        b=AI0Nc9A6ckDbuXIIKjn3KaVcsFHYX6ObbIoXzat5I1MIuXqo9G8MbybiluJKdeV4bG
         J8NWiSZmMb2P+YhERaaoCkSpTrrwYUx7tcFTvJDxuprLKT71FtVPyNnHT2Poj97RzaPb
         SFqRFmx73W5tXHRxBIVf3Ug65GC7WSBQJGVGE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=gLBr9pYw+ft30MvRnH05o6zbqlMuLkaNfPQe9Q63jPqtCfDziI8/MCNVuk/bEin414
         NP83M2UNBD4VUIPvnKABoHrdpV60YKzI/a4tfgdrcqHDwOJd5pe8L5XKqa+nYeE5/6/v
         nyriuh0jTGCEbZiojAET3qh1QeMi322Lz649I=
Received: by 10.141.1.2 with SMTP id d2mr79385rvi.42.1216750933648;
        Tue, 22 Jul 2008 11:22:13 -0700 (PDT)
Received: by 10.141.185.2 with HTTP; Tue, 22 Jul 2008 11:22:13 -0700 (PDT)
Message-ID: <359a92830807221122o4c1898b7mcb9a604c85f5f7b2@mail.gmail.com>
Date: Tue, 22 Jul 2008 14:22:13 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: How to avoid duplicate records in lucene
In-Reply-To: <857030.20618.qm@web26001.mail.ukl.yahoo.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_66976_22652652.1216750933656"
References: <857030.20618.qm@web26001.mail.ukl.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_66976_22652652.1216750933656
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

NP, if my original reply had included my second one, then you'd have
known what I was talking about <G>...

I *love* it when I unknowingly demonstrate the issue I'm trying to clarify
<G>.

Best
Erick

On Tue, Jul 22, 2008 at 2:09 PM, mark harwood <markharw00d@yahoo.co.uk>
wrote:

> >>Well, the point of my question was to insure that we were all using
> common terms.
>
> Sorry, Erick. I thought your "define duplicate" question was asking me
> about DuplicateFilter's concept of duplicates rather than asking the
> original poster about his notion of what a duplicate document meant to him.
> You're right it would be useful to understand more about the intention of
> the original message.
>
> Cheers
> Mark
>
>
>
>
>
> ----- Original Message ----
> From: Erick Erickson <erickerickson@gmail.com>
> To: java-user@lucene.apache.org
> Sent: Tuesday, 22 July, 2008 2:37:50 PM
> Subject: Re: How to avoid duplicate records in lucene
>
> Well, the point of my question was to insure that we were all using common
> terms. For all we know, the original questioner considered "duplicate"
> records ones that had identical, or even similar text. Nothing in the
> original question indicated any de-dup happening.
>
> I've often found that assumptions that we are all talking about the same
> thing are...er...incorrect. And I don't want to waste my time answering
> questions that weren't what was asked......
>
> Best
> Erick
>
> On Mon, Jul 21, 2008 at 2:44 PM, markharw00d <markharw00d@yahoo.co.uk>
> wrote:
>
> > >>could you define duplicate?
> >
> > That's your choice of field that you want to de-dup on.
> > That could be a field such as "DatabasePrimaryKey" or perhaps a field
> > containing an MD5 hash of document content.
> > The DuplicateFilter ensures only one document can exist in results for
> each
> > unique value for the choice of field.
> >
> > Cheers
> > Mark
> >
> > Erick Erickson wrote:
> >
> >> could you define duplicate? As far as I know, you don't
> >> get the same (internal) doc id back more than once, so what
> >> is a duplicate?
> >>
> >> Best
> >> Erick
> >>
> >> On Mon, Jul 21, 2008 at 9:40 AM, Sebastin <sebasmtech@gmail.com> wrote:
> >>
> >>
> >>
> >>> at the time search , while querying the data
> >>> markrmiller wrote:
> >>>
> >>>
> >>>> Sebastin wrote:
> >>>>
> >>>>
> >>>>> Hi All,
> >>>>>
> >>>>> Is there any possibility to avoid duplicate records in lucene  2.3.1?
> >>>>>
> >>>>>
> >>>>>
> >>>> I don't believe that there is a very high performance way to do this.
> >>>> You are basically going to have to query the index for an id before
> >>>> adding a new doc. The best way I can think of off the top of my head
> is
> >>>> to batch - first check that ids in the batch are unique, then check
> all
> >>>> ids in the batch against the IndexReader, then add the ones that are
> not
> >>>> dupes. Of course all of your docs would have to be added through this
> >>>> single choke point so that you knew other threads had not added that
> id
> >>>> after the first thread had looked but before it added the doc.
> >>>>
> >>>> I think Mark H has you covered if getting the dupes out after are
> okay.
> >>>>
> >>>> - Mark
> >>>>
> >>>> ---------------------------------------------------------------------
> >>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >>>> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>>>
> >>>>
> >>>>
> >>>>
> >>>>
> >>> --
> >>> View this message in context:
> >>>
> >>>
> http://www.nabble.com/How-to-avoid-duplicate-records-in-lucene-tp18543588p18568862.html
> >>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
> >>>
> >>>
> >>> ---------------------------------------------------------------------
> >>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >>> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>>
> >>>
> >>>
> >>>
> >>
> >>
>  ------------------------------------------------------------------------
> >>
> >> No virus found in this incoming message.
> >> Checked by AVG. Version: 7.5.526 / Virus Database: 270.5.3/1563 -
> Release
> >> Date: 20/07/2008 12:59
> >>
> >>
> >
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
>
>
>       __________________________________________________________
> Not happy with your email address?.
> Get the one you really want - millions of new email addresses available now
> at Yahoo! http://uk.docs.yahoo.com/ymail/new.html
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_66976_22652652.1216750933656--

From java-user-return-35059-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 22 18:53:46 2008
Return-Path: <java-user-return-35059-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 68227 invoked from network); 22 Jul 2008 18:53:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Jul 2008 18:53:46 -0000
Received: (qmail 46356 invoked by uid 500); 22 Jul 2008 18:53:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46327 invoked by uid 500); 22 Jul 2008 18:53:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46316 invoked by uid 99); 22 Jul 2008 18:53:38 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Jul 2008 11:53:38 -0700
X-ASF-Spam-Status: No, hits=4.0 required=10.0
	tests=DNS_FROM_OPENWHOIS,FORGED_YAHOO_RCVD,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Jul 2008 18:52:44 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KLMyz-0004D6-Ex
	for java-user@lucene.apache.org; Tue, 22 Jul 2008 11:53:09 -0700
Message-ID: <18595855.post@talk.nabble.com>
Date: Tue, 22 Jul 2008 11:53:09 -0700 (PDT)
From: starz10de <farag_ahmed@yahoo.com>
To: java-user@lucene.apache.org
Subject: storing the contents of a document in the  lucene index
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: farag_ahmed@yahoo.com
X-Virus-Checked: Checked by ClamAV on apache.org


  Could any one tell me please how to print the content of the document after
reading the index.
for example if i like to print the  index terms then i do :

IndexReader ir = IndexReader.open(index);
TermEnum termEnum = ir.terms(); 
while (termEnum.next()) {
			TermDocs dok = ir.termDocs();
			dok.seek(termEnum);
			while (dok.next()) {
System.out.println(termEnum.term().text().trim());
				}

I can print the text files before indexing them, but because of encoding
issues i like to print them from the index.
As i know the content of the document(whole text) is also stored in the
index, my question how to print this content.

so at the end i will print the path of the current document , index terms
and the content of the document


thanks in advance
-- 
View this message in context: http://www.nabble.com/storing-the-contents-of-a-document-in-the--lucene-index-tp18595855p18595855.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35060-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 22 18:57:57 2008
Return-Path: <java-user-return-35060-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71215 invoked from network); 22 Jul 2008 18:57:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Jul 2008 18:57:56 -0000
Received: (qmail 56350 invoked by uid 500); 22 Jul 2008 18:57:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56319 invoked by uid 500); 22 Jul 2008 18:57:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 45229 invoked by uid 99); 22 Jul 2008 18:51:57 -0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of SRS0=CnqOL1=YC=lucasmail.org=paul@yourhostingaccount.com designates 65.254.253.41 as permitted sender)
X-EN-OrigOutIP: 10.1.18.3
X-EN-IMPSID: t6oG1Z00303yUm20000000
Message-Id: <50A8B89E-5D68-4573-B2CC-83C348A8A7EE@lucasmail.org>
From: "Paul J. Lucas" <paul@lucasmail.org>
To: java-user@lucene.apache.org
In-Reply-To: <DA19B34C-9F38-4FD8-A5EA-07CE81F7BE93@apache.org>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v928.1)
Subject: Re: Interrupting a query
Date: Tue, 22 Jul 2008 11:48:13 -0700
References: <81093FC6-B5AE-4669-B912-525379D22A43@lucasmail.org> <CFB5B993-0481-4961-8F17-E3DB3CD2E35D@apache.org> <6D7AA29C-A7BF-4306-84DA-D7F5BEF593C9@lucasmail.org> <DA19B34C-9F38-4FD8-A5EA-07CE81F7BE93@apache.org>
X-Mailer: Apple Mail (2.928.1)
X-EN-UserInfo: 19b3ee6e8bc35660ab25150f3ce1009e:104eb4694f5dc54e252b420fd863a3b6
X-EN-AuthUser: paul@pauljlucas.org
Sender:  "Paul J. Lucas" <paul@lucasmail.org>
X-EN-OrigIP: 74.93.6.105
X-EN-OrigHost: skippy.lightcrafts.com
X-Virus-Checked: Checked by ClamAV on apache.org

If I'm calling:

	IndexSearcher.search( query, sortOrder );

how, exactly, can I do what you suggest?  *That* call is what I want  
to interrupt.

- Paul


On Jul 18, 2008, at 3:51 AM, Grant Ingersoll wrote:

> True, but I think the approach is similar, in that you need to have  
> the hit collector check to see if your interrupt flag has been set  
> and then exit out.
>
> On Jul 16, 2008, at 9:54 AM, Paul J. Lucas wrote:
>
>> That has nothing to do with interrupting a query at some arbitrary  
>> time.
>>
>> On Jul 16, 2008, at 5:14 AM, Grant Ingersoll wrote:
>>
>>> See https://issues.apache.org/jira/browse/LUCENE-997
>>>
>>> On Jul 16, 2008, at 12:22 AM, Paul J. Lucas wrote:
>>>
>>>> If a complicated query is running in a Thread, how does Lucene  
>>>> respond to Thread.interrupt()?  I want to be able to interrupt an  
>>>> in-progress query.
>>>>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35061-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 22 19:41:09 2008
Return-Path: <java-user-return-35061-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97775 invoked from network); 22 Jul 2008 19:41:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Jul 2008 19:41:09 -0000
Received: (qmail 27993 invoked by uid 500); 22 Jul 2008 19:41:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27956 invoked by uid 500); 22 Jul 2008 19:41:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27945 invoked by uid 99); 22 Jul 2008 19:41:01 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Jul 2008 12:41:01 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [63.87.234.181] (HELO US1-IIEX1.IICORP.DOM) (63.87.234.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Jul 2008 19:40:07 +0000
Received: from US1-IIEX1.IICORP.DOM ([10.2.11.6]) by US1-IIEX1.IICORP.DOM
 ([10.2.11.6]) with mapi; Tue, 22 Jul 2008 15:38:38 -0400
From: Robert Stewart <Robert.Stewart@INFONGEN.COM>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Tue, 22 Jul 2008 15:37:26 -0400
Subject: Fastest way to get just the "bits" of matching documents
Thread-Topic: Fastest way to get just the "bits" of matching documents
Thread-Index: AcjsMl7cUdlhPex7S/CA8FKC3ClwCw==
Message-ID: <36B4EF9511887240A973A93E7878B0560A077E7FBF@US1-IIEX1.IICORP.DOM>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: multipart/alternative;
	boundary="_000_36B4EF9511887240A973A93E7878B0560A077E7FBFUS1IIEX1IICOR_"
MIME-Version: 1.0
X-Virus-Checked: Checked by ClamAV on apache.org

--_000_36B4EF9511887240A973A93E7878B0560A077E7FBFUS1IIEX1IICOR_
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

I need to execute a boolean query and get back just the bits of all the mat=
ching documents.  I do additional filtering (date ranges and entitlements) =
and then do my own sorting later on.  I know that using QueryFilter.Bits() =
will still compute scores for all matching documents.  I do not want to com=
pute any scores.  For queries with large results (over 5 million), seems li=
ke it is somewhat slow , and maybe computing scores is taking some time.  I=
 have 10million document index, and for some very broad queries (4-5 millio=
n matching documents), seems like getting bits is slow (1.5 seconds).  I ca=
n do my own sorting of results for requested page in under 30 ms, since I h=
ave efficient cached permutations of sorting by various fields.  Is there a=
 way given a BooleanQuery, to get matching bits without computing any score=
s internally?  I looked at ConstantScoreQuery but I believe it actually sti=
ll computes scores since it gets bits from the underlying query anyway.  In=
 fact I tested it and it is actually slower to use ConstantScoreQuery than =
not to.

Is it possible to use a custom similarity class to make scoring faster (by =
returning 0 values, etc)?




Thanks,
Bob

--_000_36B4EF9511887240A973A93E7878B0560A077E7FBFUS1IIEX1IICOR_--

From java-user-return-35062-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 22 20:26:18 2008
Return-Path: <java-user-return-35062-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 29081 invoked from network); 22 Jul 2008 20:26:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Jul 2008 20:26:18 -0000
Received: (qmail 87357 invoked by uid 500); 22 Jul 2008 20:26:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87322 invoked by uid 500); 22 Jul 2008 20:26:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87311 invoked by uid 99); 22 Jul 2008 20:26:10 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Jul 2008 13:26:10 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [217.146.182.39] (HELO web27107.mail.ukl.yahoo.com) (217.146.182.39)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 22 Jul 2008 20:25:15 +0000
Received: (qmail 50102 invoked by uid 60001); 22 Jul 2008 20:25:38 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=2awom6tZrJrWjsmS/13NLnJ2fbhsr2EHbbmj2O4lH6Ry7mYU1WTS2yl4M1/090ZdSrNMC5vJERAYbE50ZxAT1jYdx4bJflGIrg5gpN46Y7nzkRmuE9ZZQxzaQKf04bBKaU/LPOXs478hYApHwAvu31rjjl4fjrqRwXwrNQQEnJU=;
Received: from [79.201.111.224] by web27107.mail.ukl.yahoo.com via HTTP; Tue, 22 Jul 2008 20:25:38 GMT
X-Mailer: YahooMailRC/1042.40 YahooMailWebService/0.7.218
Date: Tue, 22 Jul 2008 20:25:38 +0000 (GMT)
From: eks dev <eksdev@yahoo.co.uk>
Subject: Re: Fastest way to get just the "bits" of matching documents
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
Message-ID: <925729.49551.qm@web27107.mail.ukl.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

no, at the moment you can not make pure boolean queries. But 1.5 seconds on=
 10Mio document sounds a bit too much (we have well under 200mS on 150Mio c=
ollection) what you can do:=0A=0A1. use Filter for high frequency terms, e.=
g. via ConstantScoreQuery as much as you can, but you have to cache them (C=
achingWrapperFilter or something like that). SoretedVIntList can help a lot=
 in reducing memory requirements for filter caching =0A2. Use RAMDisk if it=
 fits in RAM, or MMAPDisk=0A3.Provide more details, what is the structure o=
f the Query takes so long, what is the data in index... so someone can help=
 you really. Your question it is just too abstract now=0A4. try to sort you=
r index so that things that you expect in result get close, e.g if you sear=
ch predominantly on some number, sort it on it... if you can... this helps =
reduce IO stress due locality=0A5. try https://issues.apache.org/jira/brows=
e/LUCENE-1340  as you do not need term frequencies for scoring=0A6. try usi=
ng your HitCollector insted of QueryFilter.Bits() to get your bits=0A=0A=0A=
if you tried all these options and it still does not work fast enough and y=
ou really have bottelneck in Scoring (I doubt it) then you have 2:=0A- Wait=
 for Paul to come back from Holidays, he wanted to make "pure Boolean" quer=
ies, without Scoring, possible :)=0A- Invest in faster CPU/Memory=0A =0A=0A=
have fun=0Aeks=0A=0A=0A=0A----- Original Message ----=0A> From: Robert Stew=
art <Robert.Stewart@INFONGEN.COM>=0A> To: "java-user@lucene.apache.org" <ja=
va-user@lucene.apache.org>=0A> Sent: Tuesday, 22 July, 2008 9:37:26 PM=0A> =
Subject: Fastest way to get just the "bits" of matching documents=0A> =0A> =
I need to execute a boolean query and get back just the bits of all the mat=
ching =0A> documents.  I do additional filtering (date ranges and entitleme=
nts) and then do =0A> my own sorting later on.  I know that using QueryFilt=
er.Bits() will still =0A> compute scores for all matching documents.  I do =
not want to compute any =0A> scores.  For queries with large results (over =
5 million), seems like it is =0A> somewhat slow , and maybe computing score=
s is taking some time.  I have =0A> 10million document index, and for some =
very broad queries (4-5 million matching =0A> documents), seems like gettin=
g bits is slow (1.5 seconds).  I can do my own =0A> sorting of results for =
requested page in under 30 ms, since I have efficient =0A> cached permutati=
ons of sorting by various fields.  Is there a way given a =0A> BooleanQuery=
, to get matching bits without computing any scores internally?  I =0A> loo=
ked at ConstantScoreQuery but I believe it actually still computes scores =
=0A> since it gets bits from the underlying query anyway.  In fact I tested=
 it and it =0A> is actually slower to use ConstantScoreQuery than not to.=
=0A> =0A> Is it possible to use a custom similarity class to make scoring f=
aster (by =0A> returning 0 values, etc)?=0A> =0A> =0A> =0A> =0A> Thanks,=0A=
> Bob=0A=0A=0A=0A      ____________________________________________________=
______=0ANot happy with your email address?.=0AGet the one you really want =
- millions of new email addresses available now at Yahoo! http://uk.docs.ya=
hoo.com/ymail/new.html

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35063-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 22 21:52:53 2008
Return-Path: <java-user-return-35063-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78011 invoked from network); 22 Jul 2008 21:52:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Jul 2008 21:52:53 -0000
Received: (qmail 15855 invoked by uid 500); 22 Jul 2008 21:52:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15827 invoked by uid 500); 22 Jul 2008 21:52:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15816 invoked by uid 99); 22 Jul 2008 21:52:45 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Jul 2008 14:52:45 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.145] (HELO spunkymail-a18.g.dreamhost.com) (208.97.132.145)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Jul 2008 21:51:49 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a18.g.dreamhost.com (Postfix) with ESMTP id 2918E5B4DD
	for <java-user@lucene.apache.org>; Tue, 22 Jul 2008 14:51:44 -0700 (PDT)
Message-Id: <ACD035EF-7891-4B04-9959-03CFA580EE45@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <50A8B89E-5D68-4573-B2CC-83C348A8A7EE@lucasmail.org>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: Interrupting a query
Date: Tue, 22 Jul 2008 17:51:42 -0400
References: <81093FC6-B5AE-4669-B912-525379D22A43@lucasmail.org> <CFB5B993-0481-4961-8F17-E3DB3CD2E35D@apache.org> <6D7AA29C-A7BF-4306-84DA-D7F5BEF593C9@lucasmail.org> <DA19B34C-9F38-4FD8-A5EA-07CE81F7BE93@apache.org> <50A8B89E-5D68-4573-B2CC-83C348A8A7EE@lucasmail.org>
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org

You can't with that call.  You have to make one that uses a  
HitCollector, and your hit collector needs to be interruptable and it  
probably needs to handle your sorting.  Sounds like a nice  
contribution/patch.

Sorry, I can't offer a better solution.

-Grant

On Jul 22, 2008, at 2:48 PM, Paul J. Lucas wrote:

> If I'm calling:
>
> 	IndexSearcher.search( query, sortOrder );
>
> how, exactly, can I do what you suggest?  *That* call is what I want  
> to interrupt.
>
> - Paul
>
>
> On Jul 18, 2008, at 3:51 AM, Grant Ingersoll wrote:
>
>> True, but I think the approach is similar, in that you need to have  
>> the hit collector check to see if your interrupt flag has been set  
>> and then exit out.
>>
>> On Jul 16, 2008, at 9:54 AM, Paul J. Lucas wrote:
>>
>>> That has nothing to do with interrupting a query at some arbitrary  
>>> time.
>>>
>>> On Jul 16, 2008, at 5:14 AM, Grant Ingersoll wrote:
>>>
>>>> See https://issues.apache.org/jira/browse/LUCENE-997
>>>>
>>>> On Jul 16, 2008, at 12:22 AM, Paul J. Lucas wrote:
>>>>
>>>>> If a complicated query is running in a Thread, how does Lucene  
>>>>> respond to Thread.interrupt()?  I want to be able to interrupt  
>>>>> an in-progress query.
>>>>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

--------------------------
Grant Ingersoll
http://www.lucidimagination.com

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ








---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35064-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 23 00:55:31 2008
Return-Path: <java-user-return-35064-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 16650 invoked from network); 23 Jul 2008 00:55:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Jul 2008 00:55:30 -0000
Received: (qmail 50190 invoked by uid 500); 23 Jul 2008 00:55:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50148 invoked by uid 500); 23 Jul 2008 00:55:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50137 invoked by uid 99); 23 Jul 2008 00:55:22 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Jul 2008 17:55:22 -0700
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 72.14.220.155 as permitted sender)
Received: from [72.14.220.155] (HELO fg-out-1718.google.com) (72.14.220.155)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Jul 2008 00:54:27 +0000
Received: by fg-out-1718.google.com with SMTP id l27so1173916fgb.27
        for <java-user@lucene.apache.org>; Tue, 22 Jul 2008 17:54:34 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=fhgWY7OCnnQzq8GacSvPqCkmXhkn8Z9sP1pTx8nwJis=;
        b=YMGWIB67kdNhjhL5LRJ3wArY6qP3fQXK8O4hfeKHnE1xukZN7wOn4wHDa0d4QdvM00
         tfh+/t6snwwxoW5axyP1tC3Fu/axBIkn8BPOgK3zvpfdB/Z6qwnhL81scS8jYjhjwZVo
         koePCFLI2oe/RwgFEhMjnbHrcX4hIaRLxh8oU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=qnTNeGghqtNKUGjxRSydkwlwnGxOXvURYUDF1y+v+MC/0me/k+nCBSQ1iJtO4ycdtU
         8CZaW6mKVKAxx1QQCUzHy8hjl4/G00CwEpbCcwizKCXAe4wUtf571OAz/QWch+h6rZsP
         KG9DLeJoTZnXtTBqZuxweOPHQzXPqAKzreupU=
Received: by 10.86.98.14 with SMTP id v14mr7060255fgb.74.1216774474679;
        Tue, 22 Jul 2008 17:54:34 -0700 (PDT)
Received: by 10.86.33.20 with HTTP; Tue, 22 Jul 2008 17:54:34 -0700 (PDT)
Message-ID: <359a92830807221754g7b16d3aaxd3acd08c88d38ad7@mail.gmail.com>
Date: Tue, 22 Jul 2008 20:54:34 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: storing the contents of a document in the lucene index
In-Reply-To: <18595855.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_56904_3631114.1216774474671"
References: <18595855.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_56904_3631114.1216774474671
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

<<<As i know the content of the document(whole text) is also stored in the
index, my question how to print this content.>>>

This not strictly true. For instance, stop words aren't even indexed.
Reconstructing a document from the index is very expensive
(see Luke for examples of how this is done).

You can get the text back verbatim if you store it in your index. See
Field.Store.YES (or Field.Store.COMPRESS). Storage is orthogonal
to indexing, so you can index the tokens in a field but not store them,
store them but not index them, or do both. Not storing and not indexing
is, I guess, theoretically possible but I sure can't see why you'd try it
<G>.

But if you store the field, you can get it back very easily with
Document.get("field").
Storing the fields will make your index larger, but shouldn't have a great
effect on your search times I don't think.

Best
Erick



On Tue, Jul 22, 2008 at 2:53 PM, starz10de <farag_ahmed@yahoo.com> wrote:

>
>  Could any one tell me please how to print the content of the document
> after
> reading the index.
> for example if i like to print the  index terms then i do :
>
> IndexReader ir = IndexReader.open(index);
> TermEnum termEnum = ir.terms();
> while (termEnum.next()) {
>                        TermDocs dok = ir.termDocs();
>                        dok.seek(termEnum);
>                        while (dok.next()) {
> System.out.println(termEnum.term().text().trim());
>                                }
>
> I can print the text files before indexing them, but because of encoding
> issues i like to print them from the index.
> As i know the content of the document(whole text) is also stored in the
> index, my question how to print this content.
>
> so at the end i will print the path of the current document , index terms
> and the content of the document
>
>
> thanks in advance
> --
> View this message in context:
> http://www.nabble.com/storing-the-contents-of-a-document-in-the--lucene-index-tp18595855p18595855.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_56904_3631114.1216774474671--

From java-user-return-35065-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 23 04:40:39 2008
Return-Path: <java-user-return-35065-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73812 invoked from network); 23 Jul 2008 04:40:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Jul 2008 04:40:39 -0000
Received: (qmail 76324 invoked by uid 500); 23 Jul 2008 04:40:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76299 invoked by uid 500); 23 Jul 2008 04:40:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76283 invoked by uid 99); 23 Jul 2008 04:40:32 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Jul 2008 21:40:32 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Jul 2008 04:39:37 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KLW5s-00084H-Ih
	for java-user@lucene.apache.org; Tue, 22 Jul 2008 21:36:52 -0700
Message-ID: <18603752.post@talk.nabble.com>
Date: Tue, 22 Jul 2008 21:36:52 -0700 (PDT)
From: Sebastin <sebasmtech@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: How to avoid duplicate records in lucene
In-Reply-To: <857030.20618.qm@web26001.mail.ukl.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: sebasmtech@gmail.com
References: <18543588.post@talk.nabble.com> <857030.20618.qm@web26001.mail.ukl.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Erick,

example,

IndexWriter writer = new IndexWriter("C:/index",new
StandardAnalyzer(),true);

String records = "Lucene" +" " +"action"+" "+"book" ;

Document doc = new Document();

doc.add(new
Field("contents",records,Field.Store.YES,Field.Index.TOKENIZED));


writer.addDocument(doc);
writer.optimize();
writer.close();


when the records is inserted twice,while querying for "Lucene" it will
display the same record twice.








mark harwood wrote:
> 
>>>Well, the point of my question was to insure that we were all using
common terms.
> 
> Sorry, Erick. I thought your "define duplicate" question was asking me
> about DuplicateFilter's concept of duplicates rather than asking the
> original poster about his notion of what a duplicate document meant to
> him. You're right it would be useful to understand more about the
> intention of the original message.
> 
> Cheers
> Mark
> 
> 
> 
> 
> 
> ----- Original Message ----
> From: Erick Erickson <erickerickson@gmail.com>
> To: java-user@lucene.apache.org
> Sent: Tuesday, 22 July, 2008 2:37:50 PM
> Subject: Re: How to avoid duplicate records in lucene
> 
> Well, the point of my question was to insure that we were all using common
> terms. For all we know, the original questioner considered "duplicate"
> records ones that had identical, or even similar text. Nothing in the
> original question indicated any de-dup happening.
> 
> I've often found that assumptions that we are all talking about the same
> thing are...er...incorrect. And I don't want to waste my time answering
> questions that weren't what was asked......
> 
> Best
> Erick
> 
> On Mon, Jul 21, 2008 at 2:44 PM, markharw00d <markharw00d@yahoo.co.uk>
> wrote:
> 
>> >>could you define duplicate?
>>
>> That's your choice of field that you want to de-dup on.
>> That could be a field such as "DatabasePrimaryKey" or perhaps a field
>> containing an MD5 hash of document content.
>> The DuplicateFilter ensures only one document can exist in results for
>> each
>> unique value for the choice of field.
>>
>> Cheers
>> Mark
>>
>> Erick Erickson wrote:
>>
>>> could you define duplicate? As far as I know, you don't
>>> get the same (internal) doc id back more than once, so what
>>> is a duplicate?
>>>
>>> Best
>>> Erick
>>>
>>> On Mon, Jul 21, 2008 at 9:40 AM, Sebastin <sebasmtech@gmail.com> wrote:
>>>
>>>
>>>
>>>> at the time search , while querying the data
>>>> markrmiller wrote:
>>>>
>>>>
>>>>> Sebastin wrote:
>>>>>
>>>>>
>>>>>> Hi All,
>>>>>>
>>>>>> Is there any possibility to avoid duplicate records in lucene  2.3.1?
>>>>>>
>>>>>>
>>>>>>
>>>>> I don't believe that there is a very high performance way to do this.
>>>>> You are basically going to have to query the index for an id before
>>>>> adding a new doc. The best way I can think of off the top of my head
>>>>> is
>>>>> to batch - first check that ids in the batch are unique, then check
>>>>> all
>>>>> ids in the batch against the IndexReader, then add the ones that are
>>>>> not
>>>>> dupes. Of course all of your docs would have to be added through this
>>>>> single choke point so that you knew other threads had not added that
>>>>> id
>>>>> after the first thread had looked but before it added the doc.
>>>>>
>>>>> I think Mark H has you covered if getting the dupes out after are
>>>>> okay.
>>>>>
>>>>> - Mark
>>>>>
>>>>> ---------------------------------------------------------------------
>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>
>>>>>
>>>>>
>>>>>
>>>>>
>>>> --
>>>> View this message in context:
>>>>
>>>> http://www.nabble.com/How-to-avoid-duplicate-records-in-lucene-tp18543588p18568862.html
>>>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>>>
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>>
>>>>
>>>
>>> 
>>> ------------------------------------------------------------------------
>>>
>>> No virus found in this incoming message.
>>> Checked by AVG. Version: 7.5.526 / Virus Database: 270.5.3/1563 -
>>> Release
>>> Date: 20/07/2008 12:59
>>>
>>>
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
> 
> 
> 
>       __________________________________________________________
> Not happy with your email address?.
> Get the one you really want - millions of new email addresses available
> now at Yahoo! http://uk.docs.yahoo.com/ymail/new.html
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/How-to-avoid-duplicate-records-in-lucene-tp18543588p18603752.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35066-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 23 06:59:23 2008
Return-Path: <java-user-return-35066-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44636 invoked from network); 23 Jul 2008 06:59:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Jul 2008 06:59:23 -0000
Received: (qmail 81299 invoked by uid 500); 23 Jul 2008 06:59:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81273 invoked by uid 500); 23 Jul 2008 06:59:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81262 invoked by uid 99); 23 Jul 2008 06:59:16 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 22 Jul 2008 23:59:16 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Jul 2008 06:58:21 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KLYJA-0003qj-Sp
	for java-user@lucene.apache.org; Tue, 22 Jul 2008 23:58:45 -0700
Message-ID: <18604932.post@talk.nabble.com>
Date: Tue, 22 Jul 2008 23:58:44 -0700 (PDT)
From: Sandeep K <sandeepk84@gmail.com>
To: java-user@lucene.apache.org
Subject: Lucene write locks
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: sandeepk84@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hi all..
I had a question related to the write locks created by Lucene.
I use Lucene 2.3.2. Will this newwer version create locks while indexing as
older ones?
or is there any other way that lucene handles its operations?

And my another doubt is that i use JMS for lucene indexing.
My App server will not do indexing but will pass the needed data for
indexing to the JMS server.
will there be any problem in indexing as its asynchronous?
plz help me..

thanks and regards,
Sand.



-- 
View this message in context: http://www.nabble.com/Lucene-write-locks-tp18604932p18604932.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35067-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 23 07:43:27 2008
Return-Path: <java-user-return-35067-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65290 invoked from network); 23 Jul 2008 07:43:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Jul 2008 07:43:27 -0000
Received: (qmail 46204 invoked by uid 500); 23 Jul 2008 07:43:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46170 invoked by uid 500); 23 Jul 2008 07:43:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46158 invoked by uid 99); 23 Jul 2008 07:43:20 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Jul 2008 00:43:20 -0700
X-ASF-Spam-Status: No, hits=4.0 required=10.0
	tests=DNS_FROM_OPENWHOIS,FORGED_YAHOO_RCVD,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Jul 2008 07:42:26 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KLYzq-0005Vl-Nc
	for java-user@lucene.apache.org; Wed, 23 Jul 2008 00:42:50 -0700
Message-ID: <18605547.post@talk.nabble.com>
Date: Wed, 23 Jul 2008 00:42:50 -0700 (PDT)
From: starz10de <farag_ahmed@yahoo.com>
To: java-user@lucene.apache.org
Subject: Re: storing the contents of a document in the  lucene index
In-Reply-To: <18595855.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: farag_ahmed@yahoo.com
References: <18595855.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Hi Erik,

 I don't remove the stop words, as I index parallel corpora which is used
for learning the translations between pair of languages. so every word is
important. I even develop my own analyzer for Arabic which is just remove
punctuations and special symbols and it return only Arabic text.

I guess in the   FileDocument.java   the whole text is already stored

doc.add(Field.Text("contents", IN)); 

where IN is 

IN = new BufferedReader(new InputStreamReader(new FileInputStream(f))

if this is not the case yould you please how to store the whole text inside
the index ? 

I am new to lucene and I don't know how to use this "Field.Store.YES" to
store whole text.

 

Best regards
Farag



starz10de wrote:
> 
>   Could any one tell me please how to print the content of the document
> after reading the index.
> for example if i like to print the  index terms then i do :
> 
> IndexReader ir = IndexReader.open(index);
> TermEnum termEnum = ir.terms(); 
> while (termEnum.next()) {
> 			TermDocs dok = ir.termDocs();
> 			dok.seek(termEnum);
> 			while (dok.next()) {
> System.out.println(termEnum.term().text().trim());
> 				}
> 
> I can print the text files before indexing them, but because of encoding
> issues i like to print them from the index.
> As i know the content of the document(whole text) is also stored in the
> index, my question how to print this content.
> 
> so at the end i will print the path of the current document , index terms
> and the content of the document
> 
> 
> thanks in advance
> 

-- 
View this message in context: http://www.nabble.com/storing-the-contents-of-a-document-in-the--lucene-index-tp18595855p18605547.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35068-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 23 09:27:39 2008
Return-Path: <java-user-return-35068-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 18270 invoked from network); 23 Jul 2008 09:27:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Jul 2008 09:27:38 -0000
Received: (qmail 92690 invoked by uid 500); 23 Jul 2008 09:27:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92647 invoked by uid 500); 23 Jul 2008 09:27:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92636 invoked by uid 99); 23 Jul 2008 09:27:31 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Jul 2008 02:27:31 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [74.125.46.30] (HELO yw-out-2324.google.com) (74.125.46.30)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Jul 2008 09:26:36 +0000
Received: by yw-out-2324.google.com with SMTP id 3so885771ywj.5
        for <java-user@lucene.apache.org>; Wed, 23 Jul 2008 02:26:50 -0700 (PDT)
Received: by 10.151.154.12 with SMTP id g12mr4148600ybo.38.1216805209974;
        Wed, 23 Jul 2008 02:26:49 -0700 (PDT)
Received: from ?10.17.4.4? ( [72.93.214.93])
        by mx.google.com with ESMTPS id 6sm1578719ywi.1.2008.07.23.02.26.49
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Wed, 23 Jul 2008 02:26:49 -0700 (PDT)
Message-Id: <A00D0A15-DB5E-4D64-AF60-2A09EC5718F9@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <18604932.post@talk.nabble.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: Lucene write locks
Date: Wed, 23 Jul 2008 05:26:47 -0400
References: <18604932.post@talk.nabble.com>
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org


Sandeep K wrote:

>
> Hi all..
> I had a question related to the write locks created by Lucene.
> I use Lucene 2.3.2. Will this newwer version create locks while  
> indexing as
> older ones?
> or is there any other way that lucene handles its operations?

It still creates write locks, which are used to ensure only one writer  
is changing the index at a time.

> And my another doubt is that i use JMS for lucene indexing.
> My App server will not do indexing but will pass the needed data for
> indexing to the JMS server.
> will there be any problem in indexing as its asynchronous?
> plz help me..

Will there be multiple machines that might open an IndexWriter and do  
indexing, on receiving messages from the JMS server?

What filesystem is being used to share access to the index?

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35069-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 23 10:17:02 2008
Return-Path: <java-user-return-35069-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45194 invoked from network); 23 Jul 2008 10:17:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Jul 2008 10:17:02 -0000
Received: (qmail 58565 invoked by uid 500); 23 Jul 2008 10:16:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58519 invoked by uid 500); 23 Jul 2008 10:16:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58504 invoked by uid 99); 23 Jul 2008 10:16:53 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Jul 2008 03:16:53 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Jul 2008 10:15:59 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KLbOR-0002lN-MM
	for java-user@lucene.apache.org; Wed, 23 Jul 2008 03:16:23 -0700
Message-ID: <18607685.post@talk.nabble.com>
Date: Wed, 23 Jul 2008 03:16:23 -0700 (PDT)
From: Sandeep K <sandeepk84@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene write locks
In-Reply-To: <A00D0A15-DB5E-4D64-AF60-2A09EC5718F9@mikemccandless.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: sandeepk84@gmail.com
References: <18604932.post@talk.nabble.com> <A00D0A15-DB5E-4D64-AF60-2A09EC5718F9@mikemccandless.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Thanks a lot Mike,
There will be only one machine which uses IndexWriter and its  the
JMS server. This server will first create the file in the physical file
system(its Linux)
and then index the saved file. 


Michael McCandless-2 wrote:
> 
> 
> Sandeep K wrote:
> 
>>
>> Hi all..
>> I had a question related to the write locks created by Lucene.
>> I use Lucene 2.3.2. Will this newwer version create locks while  
>> indexing as
>> older ones?
>> or is there any other way that lucene handles its operations?
> 
> It still creates write locks, which are used to ensure only one writer  
> is changing the index at a time.
> 
>> And my another doubt is that i use JMS for lucene indexing.
>> My App server will not do indexing but will pass the needed data for
>> indexing to the JMS server.
>> will there be any problem in indexing as its asynchronous?
>> plz help me..
> 
> Will there be multiple machines that might open an IndexWriter and do  
> indexing, on receiving messages from the JMS server?
> 
> What filesystem is being used to share access to the index?
> 
> Mike
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/Lucene-write-locks-tp18604932p18607685.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35070-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 23 10:30:20 2008
Return-Path: <java-user-return-35070-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 55397 invoked from network); 23 Jul 2008 10:30:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Jul 2008 10:30:20 -0000
Received: (qmail 81906 invoked by uid 500); 23 Jul 2008 10:30:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81757 invoked by uid 500); 23 Jul 2008 10:30:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81746 invoked by uid 99); 23 Jul 2008 10:30:12 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Jul 2008 03:30:12 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=SPF_NEUTRAL,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.132.241] (HELO an-out-0708.google.com) (209.85.132.241)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Jul 2008 10:29:16 +0000
Received: by an-out-0708.google.com with SMTP id c37so2225896anc.49
        for <java-user@lucene.apache.org>; Wed, 23 Jul 2008 03:29:22 -0700 (PDT)
Received: by 10.100.177.15 with SMTP id z15mr3025317ane.112.1216808962107;
        Wed, 23 Jul 2008 03:29:22 -0700 (PDT)
Received: from ?10.17.4.4? ( [72.93.214.93])
        by mx.google.com with ESMTPS id d19sm9744026and.17.2008.07.23.03.29.21
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Wed, 23 Jul 2008 03:29:21 -0700 (PDT)
Message-Id: <9FD8013D-99F5-4995-8D4B-80510645722B@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <18607685.post@talk.nabble.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: Lucene write locks
Date: Wed, 23 Jul 2008 06:29:20 -0400
References: <18604932.post@talk.nabble.com> <A00D0A15-DB5E-4D64-AF60-2A09EC5718F9@mikemccandless.com> <18607685.post@talk.nabble.com>
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org


OK then this should be fine.  That single machine, on receiving a JMS  
message, should use a single IndexWriter for making changes to the  
index (ie, it should not try to open a 2nd IndexWriter while a  
previous one is still working on a previous message).

Mike

Sandeep K wrote:

>
> Thanks a lot Mike,
> There will be only one machine which uses IndexWriter and its  the
> JMS server. This server will first create the file in the physical  
> file
> system(its Linux)
> and then index the saved file.
>
>
> Michael McCandless-2 wrote:
>>
>>
>> Sandeep K wrote:
>>
>>>
>>> Hi all..
>>> I had a question related to the write locks created by Lucene.
>>> I use Lucene 2.3.2. Will this newwer version create locks while
>>> indexing as
>>> older ones?
>>> or is there any other way that lucene handles its operations?
>>
>> It still creates write locks, which are used to ensure only one  
>> writer
>> is changing the index at a time.
>>
>>> And my another doubt is that i use JMS for lucene indexing.
>>> My App server will not do indexing but will pass the needed data for
>>> indexing to the JMS server.
>>> will there be any problem in indexing as its asynchronous?
>>> plz help me..
>>
>> Will there be multiple machines that might open an IndexWriter and do
>> indexing, on receiving messages from the JMS server?
>>
>> What filesystem is being used to share access to the index?
>>
>> Mike
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>
> -- 
> View this message in context: http://www.nabble.com/Lucene-write-locks-tp18604932p18607685.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35071-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 23 10:33:44 2008
Return-Path: <java-user-return-35071-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 57212 invoked from network); 23 Jul 2008 10:33:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Jul 2008 10:33:43 -0000
Received: (qmail 85844 invoked by uid 500); 23 Jul 2008 10:33:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85811 invoked by uid 500); 23 Jul 2008 10:33:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85800 invoked by uid 99); 23 Jul 2008 10:33:36 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Jul 2008 03:33:36 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Jul 2008 10:32:41 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KLbec-0003BU-5l
	for java-user@lucene.apache.org; Wed, 23 Jul 2008 03:33:06 -0700
Message-ID: <18607897.post@talk.nabble.com>
Date: Wed, 23 Jul 2008 03:33:06 -0700 (PDT)
From: Sandeep K <sandeepk84@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene write locks
In-Reply-To: <18604932.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: sandeepk84@gmail.com
References: <18604932.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org


I have another problem also. 
While parsing the files during indexing I get the following error, 
java.lang.NoClassDefFoundError: de/sty/io/mimetype/MimeTypeResolver
what is this? I use Lius-1.0
Its giving the error in the line where I have 
IndexerFactory.getIndexer(file, LiusConfig obj)
plz help

thanks and regards,
Sand




Sandeep K wrote:
> 
> Hi all..
> I had a question related to the write locks created by Lucene.
> I use Lucene 2.3.2. Will this newwer version create locks while indexing
> as older ones?
> or is there any other way that lucene handles its operations?
> 
> And my another doubt is that i use JMS for lucene indexing.
> My App server will not do indexing but will pass the needed data for
> indexing to the JMS server.
> will there be any problem in indexing as its asynchronous?
> plz help me..
> 
> thanks and regards,
> Sand.
> 
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/Lucene-write-locks-tp18604932p18607897.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35072-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 23 11:26:40 2008
Return-Path: <java-user-return-35072-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 83732 invoked from network); 23 Jul 2008 11:26:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Jul 2008 11:26:40 -0000
Received: (qmail 45302 invoked by uid 500); 23 Jul 2008 11:26:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45267 invoked by uid 500); 23 Jul 2008 11:26:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45250 invoked by uid 99); 23 Jul 2008 11:26:32 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Jul 2008 04:26:32 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Jul 2008 11:25:37 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KLcTq-0004kS-Ey
	for java-user@lucene.apache.org; Wed, 23 Jul 2008 04:26:02 -0700
Message-ID: <18608657.post@talk.nabble.com>
Date: Wed, 23 Jul 2008 04:26:02 -0700 (PDT)
From: sandyg <gaddamsandeeps@gmail.com>
To: java-user@lucene.apache.org
Subject: BooleanQuery$TooManyClauses: maxClauseCount is set to 1024
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: gaddamsandeeps@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hi ALL,

Please can u help how to overcome the exception 
org.apache.lucene.search.BooleanQuery$TooManyClauses: maxClauseCount is set
to 1024

i got this when am using prefix query like 123*


-- 
View this message in context: http://www.nabble.com/BooleanQuery%24TooManyClauses%3A-maxClauseCount-is-set-to-1024-tp18608657p18608657.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35073-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 23 11:32:44 2008
Return-Path: <java-user-return-35073-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 87744 invoked from network); 23 Jul 2008 11:32:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Jul 2008 11:32:44 -0000
Received: (qmail 55656 invoked by uid 500); 23 Jul 2008 11:32:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55634 invoked by uid 500); 23 Jul 2008 11:32:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55623 invoked by uid 99); 23 Jul 2008 11:32:37 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Jul 2008 04:32:37 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ian.lea@gmail.com designates 209.85.146.177 as permitted sender)
Received: from [209.85.146.177] (HELO wa-out-1112.google.com) (209.85.146.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Jul 2008 11:31:43 +0000
Received: by wa-out-1112.google.com with SMTP id l24so1619939waf.11
        for <java-user@lucene.apache.org>; Wed, 23 Jul 2008 04:32:08 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references;
        bh=NznZdfBIrh2RNoNbNaQPR4KXkdGUfriVjJSQIVR1c/c=;
        b=QQP88Jrm7bYgeX43wd01yCzLWN1EDuZHLt3y7bAPyrBf15bPBvnwa9xrCNX5ogtE0i
         TeRemWLCHeNvk7DaURWnfUsxThtWZSCw43Pe9EMqBVuI1NxEjr7c6RMs0okaVaZzpC70
         H/BXi+AnI1+qev3MyzlMpiOF/iCAiwsp5crrM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references;
        b=pNSbqkoCV/ScbDfq4sbl6ZLzl4m3h8teiuM5a3YEFyUt0nj0i+QYdZDFMGWWBX/QoX
         buxTmAPuyVv3XiXHoI5cFpt6Av8vPc666wmXvEZ+grh98Qy4IoLLnUkhiFnwhnwNqkeZ
         JBF3wNqzCWHySeRtdyzuVt3SErXTd4BwN80Q4=
Received: by 10.114.196.13 with SMTP id t13mr4739027waf.219.1216812728070;
        Wed, 23 Jul 2008 04:32:08 -0700 (PDT)
Received: by 10.114.15.5 with HTTP; Wed, 23 Jul 2008 04:32:08 -0700 (PDT)
Message-ID: <8c4e68610807230432i7066140t77090c2bf342fc8a@mail.gmail.com>
Date: Wed, 23 Jul 2008 12:32:08 +0100
From: "Ian Lea" <ian.lea@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: BooleanQuery$TooManyClauses: maxClauseCount is set to 1024
In-Reply-To: <18608657.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <18608657.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

http://wiki.apache.org/jakarta-lucene/LuceneFAQ#head-06fafb5d19e786a50fb3dfb8821a6af9f37aa831


--
Ian.


On Wed, Jul 23, 2008 at 12:26 PM, sandyg <gaddamsandeeps@gmail.com> wrote:
>
> Hi ALL,
>
> Please can u help how to overcome the exception
> org.apache.lucene.search.BooleanQuery$TooManyClauses: maxClauseCount is set
> to 1024
>
> i got this when am using prefix query like 123*
>
>
> --

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35074-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 23 13:41:09 2008
Return-Path: <java-user-return-35074-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60411 invoked from network); 23 Jul 2008 13:41:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Jul 2008 13:41:09 -0000
Received: (qmail 70459 invoked by uid 500); 23 Jul 2008 13:41:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70423 invoked by uid 500); 23 Jul 2008 13:41:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70412 invoked by uid 99); 23 Jul 2008 13:41:00 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Jul 2008 06:41:00 -0700
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.198.234 as permitted sender)
Received: from [209.85.198.234] (HELO rv-out-0506.google.com) (209.85.198.234)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Jul 2008 13:40:04 +0000
Received: by rv-out-0506.google.com with SMTP id f6so2393433rvb.5
        for <java-user@lucene.apache.org>; Wed, 23 Jul 2008 06:40:29 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=612g9Ih02SHY6VJJogNlLNutMx/NhLUrWIRr6VHG8GQ=;
        b=X/OCtfad8qIMZRpekyxBme14QfrBuAj/jx5gsaIIR3Xy1qk5ncSS/NLChlJq6gGGbr
         irA/b/rYUNDs9zs4JhiViMIdQwjCmOwh3vRVUJ6WUO4jvF0PgLOHDSJdhbvMhSNIobcQ
         elZB6xg8Gufx9vOIBTxq3KQMiqAZCeIcdmOVs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=jNpNz6QVYiFF2puRU/FPdPr8ODwQ66YWZQBU5P9nieivAMhscUNnDa+mhbMFAmu58O
         pMaX+nqM+Dxh/EH0b5BjGTua0uwZL+zM8VhzbUcRUC2p5z+xQT2q0cpWc1b6GLKTNZTx
         ATiB8RLR5/XAumlg61wwDfTQSdRwiX8O5urUI=
Received: by 10.141.204.16 with SMTP id g16mr63429rvq.275.1216820428949;
        Wed, 23 Jul 2008 06:40:28 -0700 (PDT)
Received: by 10.141.185.2 with HTTP; Wed, 23 Jul 2008 06:40:28 -0700 (PDT)
Message-ID: <359a92830807230640u79b2731as7156414822861f00@mail.gmail.com>
Date: Wed, 23 Jul 2008 09:40:28 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: How to avoid duplicate records in lucene
In-Reply-To: <18603752.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_74541_26643371.1216820428947"
References: <18543588.post@talk.nabble.com>
	 <857030.20618.qm@web26001.mail.ukl.yahoo.com>
	 <18603752.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_74541_26643371.1216820428947
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Well, yes, that's expected behavior. Lucene makes no attempt to filter
"substantially similar" documents. From Lucene's perspective, you added
it twice, you must have had a good reason.

And no, it doesn't really display the same document twice. There are two
documents in Lucene that happen to have identical content. They'd
have different internal document IDs.

So what problem are you really trying to solve? Or are you just trying to
understand Lucene?

If you require that identical (or similar) documents are indexed only once,
you have to insure that yourself. Lucene is an *engine*, not a full-blown
application. So the various kinds of business logic restrictions are up
to you to implement.

Best
Erick

On Wed, Jul 23, 2008 at 12:36 AM, Sebastin <sebasmtech@gmail.com> wrote:

>
> Erick,
>
> example,
>
> IndexWriter writer = new IndexWriter("C:/index",new
> StandardAnalyzer(),true);
>
> String records = "Lucene" +" " +"action"+" "+"book" ;
>
> Document doc = new Document();
>
> doc.add(new
> Field("contents",records,Field.Store.YES,Field.Index.TOKENIZED));
>
>
> writer.addDocument(doc);
> writer.optimize();
> writer.close();
>
>
> when the records is inserted twice,while querying for "Lucene" it will
> display the same record twice.
>
>
>
>
>
>
>
>
> mark harwood wrote:
> >
> >>>Well, the point of my question was to insure that we were all using
> common terms.
> >
> > Sorry, Erick. I thought your "define duplicate" question was asking me
> > about DuplicateFilter's concept of duplicates rather than asking the
> > original poster about his notion of what a duplicate document meant to
> > him. You're right it would be useful to understand more about the
> > intention of the original message.
> >
> > Cheers
> > Mark
> >
> >
> >
> >
> >
> > ----- Original Message ----
> > From: Erick Erickson <erickerickson@gmail.com>
> > To: java-user@lucene.apache.org
> > Sent: Tuesday, 22 July, 2008 2:37:50 PM
> > Subject: Re: How to avoid duplicate records in lucene
> >
> > Well, the point of my question was to insure that we were all using
> common
> > terms. For all we know, the original questioner considered "duplicate"
> > records ones that had identical, or even similar text. Nothing in the
> > original question indicated any de-dup happening.
> >
> > I've often found that assumptions that we are all talking about the same
> > thing are...er...incorrect. And I don't want to waste my time answering
> > questions that weren't what was asked......
> >
> > Best
> > Erick
> >
> > On Mon, Jul 21, 2008 at 2:44 PM, markharw00d <markharw00d@yahoo.co.uk>
> > wrote:
> >
> >> >>could you define duplicate?
> >>
> >> That's your choice of field that you want to de-dup on.
> >> That could be a field such as "DatabasePrimaryKey" or perhaps a field
> >> containing an MD5 hash of document content.
> >> The DuplicateFilter ensures only one document can exist in results for
> >> each
> >> unique value for the choice of field.
> >>
> >> Cheers
> >> Mark
> >>
> >> Erick Erickson wrote:
> >>
> >>> could you define duplicate? As far as I know, you don't
> >>> get the same (internal) doc id back more than once, so what
> >>> is a duplicate?
> >>>
> >>> Best
> >>> Erick
> >>>
> >>> On Mon, Jul 21, 2008 at 9:40 AM, Sebastin <sebasmtech@gmail.com>
> wrote:
> >>>
> >>>
> >>>
> >>>> at the time search , while querying the data
> >>>> markrmiller wrote:
> >>>>
> >>>>
> >>>>> Sebastin wrote:
> >>>>>
> >>>>>
> >>>>>> Hi All,
> >>>>>>
> >>>>>> Is there any possibility to avoid duplicate records in lucene
>  2.3.1?
> >>>>>>
> >>>>>>
> >>>>>>
> >>>>> I don't believe that there is a very high performance way to do this.
> >>>>> You are basically going to have to query the index for an id before
> >>>>> adding a new doc. The best way I can think of off the top of my head
> >>>>> is
> >>>>> to batch - first check that ids in the batch are unique, then check
> >>>>> all
> >>>>> ids in the batch against the IndexReader, then add the ones that are
> >>>>> not
> >>>>> dupes. Of course all of your docs would have to be added through this
> >>>>> single choke point so that you knew other threads had not added that
> >>>>> id
> >>>>> after the first thread had looked but before it added the doc.
> >>>>>
> >>>>> I think Mark H has you covered if getting the dupes out after are
> >>>>> okay.
> >>>>>
> >>>>> - Mark
> >>>>>
> >>>>> ---------------------------------------------------------------------
> >>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>>>>
> >>>>>
> >>>>>
> >>>>>
> >>>>>
> >>>> --
> >>>> View this message in context:
> >>>>
> >>>>
> http://www.nabble.com/How-to-avoid-duplicate-records-in-lucene-tp18543588p18568862.html
> >>>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
> >>>>
> >>>>
> >>>> ---------------------------------------------------------------------
> >>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >>>> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>>>
> >>>>
> >>>>
> >>>>
> >>>
> >>>
> >>>
> ------------------------------------------------------------------------
> >>>
> >>> No virus found in this incoming message.
> >>> Checked by AVG. Version: 7.5.526 / Virus Database: 270.5.3/1563 -
> >>> Release
> >>> Date: 20/07/2008 12:59
> >>>
> >>>
> >>
> >>
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >
> >
> >
> >       __________________________________________________________
> > Not happy with your email address?.
> > Get the one you really want - millions of new email addresses available
> > now at Yahoo! http://uk.docs.yahoo.com/ymail/new.html
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> >
>
> --
> View this message in context:
> http://www.nabble.com/How-to-avoid-duplicate-records-in-lucene-tp18543588p18603752.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_74541_26643371.1216820428947--

From java-user-return-35075-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 23 13:52:19 2008
Return-Path: <java-user-return-35075-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 66514 invoked from network); 23 Jul 2008 13:52:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Jul 2008 13:52:19 -0000
Received: (qmail 87240 invoked by uid 500); 23 Jul 2008 13:52:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86231 invoked by uid 500); 23 Jul 2008 13:52:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86220 invoked by uid 99); 23 Jul 2008 13:52:11 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Jul 2008 06:52:11 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=SPF_NEUTRAL,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.132.242] (HELO an-out-0708.google.com) (209.85.132.242)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Jul 2008 13:51:15 +0000
Received: by an-out-0708.google.com with SMTP id c37so2290773anc.49
        for <java-user@lucene.apache.org>; Wed, 23 Jul 2008 06:51:39 -0700 (PDT)
Received: by 10.100.124.6 with SMTP id w6mr73417anc.44.1216821099281;
        Wed, 23 Jul 2008 06:51:39 -0700 (PDT)
Received: from ?10.17.4.4? ( [72.93.214.93])
        by mx.google.com with ESMTPS id b19sm8248944ana.19.2008.07.23.06.51.37
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Wed, 23 Jul 2008 06:51:38 -0700 (PDT)
Message-Id: <A82AB1BD-9F76-4D69-B150-807B2A2F3FA9@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <18607897.post@talk.nabble.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: Lucene write locks
Date: Wed, 23 Jul 2008 09:51:36 -0400
References: <18604932.post@talk.nabble.com> <18607897.post@talk.nabble.com>
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org


This looks like a CLASSPATH issue.  You need to make sure whatever jar  
contains that class is in the CLASSPATH when you run that line.

Mike

Sandeep K wrote:

>
> I have another problem also.
> While parsing the files during indexing I get the following error,
> java.lang.NoClassDefFoundError: de/sty/io/mimetype/MimeTypeResolver
> what is this? I use Lius-1.0
> Its giving the error in the line where I have
> IndexerFactory.getIndexer(file, LiusConfig obj)
> plz help
>
> thanks and regards,
> Sand
>
>
>
>
> Sandeep K wrote:
>>
>> Hi all..
>> I had a question related to the write locks created by Lucene.
>> I use Lucene 2.3.2. Will this newwer version create locks while  
>> indexing
>> as older ones?
>> or is there any other way that lucene handles its operations?
>>
>> And my another doubt is that i use JMS for lucene indexing.
>> My App server will not do indexing but will pass the needed data for
>> indexing to the JMS server.
>> will there be any problem in indexing as its asynchronous?
>> plz help me..
>>
>> thanks and regards,
>> Sand.
>>
>>
>>
>>
>
> -- 
> View this message in context: http://www.nabble.com/Lucene-write-locks-tp18604932p18607897.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35076-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 23 13:53:45 2008
Return-Path: <java-user-return-35076-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67507 invoked from network); 23 Jul 2008 13:53:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Jul 2008 13:53:45 -0000
Received: (qmail 91619 invoked by uid 500); 23 Jul 2008 13:53:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91579 invoked by uid 500); 23 Jul 2008 13:53:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 91537 invoked by uid 99); 23 Jul 2008 13:53:36 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Jul 2008 06:53:36 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of cambazz@gmail.com designates 209.85.198.235 as permitted sender)
Received: from [209.85.198.235] (HELO rv-out-0506.google.com) (209.85.198.235)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Jul 2008 13:52:42 +0000
Received: by rv-out-0506.google.com with SMTP id f6so2398598rvb.5
        for <java-user@lucene.apache.org>; Wed, 23 Jul 2008 06:53:08 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type;
        bh=+nVX0kebNJtNS4zv2LotC/mwRdBy2TtPgTCX80pPlbw=;
        b=FduIlGxn9ZMoZtErMIoAUDRLlFMrI+nZntusXLsLDRi8P/jna3fzwoT1h/Rpi9lHYc
         Rtx0GjJ/+XgwtW/dVrvPEK9KLJ1ywWETGhmxod2iqm7SdDUfs8tAhYz6xhErcDB2CW0l
         y1xPDevImxM8suCCEuE74T8XU936jIlMg0/dM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=nezaaPgDH3oEh2usN9U9TmAEfsjN0Z1JMyRu07emUUywGYb5ZDnSfWLNkON2lWX9Y3
         lyAD2IIg5bJit/eZffkA7TuFKmu0ZigTDemYBmZu8FPguDqipqQpX+D88KbvZ0OxRZKN
         TJdFSS659vLu3Ht3u41sUsGo87oOFG50WLm24=
Received: by 10.140.127.13 with SMTP id z13mr76471rvc.194.1216821188107;
        Wed, 23 Jul 2008 06:53:08 -0700 (PDT)
Received: by 10.141.168.3 with HTTP; Wed, 23 Jul 2008 06:53:08 -0700 (PDT)
Message-ID: <1bcb7c7f0807230653u541284e5m5f015c71fb0961c9@mail.gmail.com>
Date: Wed, 23 Jul 2008 16:53:08 +0300
From: "Cam Bazz" <cambazz@gmail.com>
To: java-user@lucene.apache.org
Subject: lucene delete by query
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_136691_10155654.1216821188099"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_136691_10155654.1216821188099
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

hello,

was not there a lucene delete by query feature coming up? I remember
something like that, but I could not find an references.

best regards,
-c.b.

------=_Part_136691_10155654.1216821188099--

From java-user-return-35077-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 23 13:54:13 2008
Return-Path: <java-user-return-35077-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67958 invoked from network); 23 Jul 2008 13:54:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Jul 2008 13:54:13 -0000
Received: (qmail 94568 invoked by uid 500); 23 Jul 2008 13:54:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94544 invoked by uid 500); 23 Jul 2008 13:54:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94529 invoked by uid 99); 23 Jul 2008 13:54:05 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Jul 2008 06:54:05 -0700
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.198.233 as permitted sender)
Received: from [209.85.198.233] (HELO rv-out-0506.google.com) (209.85.198.233)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Jul 2008 13:53:05 +0000
Received: by rv-out-0506.google.com with SMTP id f6so2398649rvb.5
        for <java-user@lucene.apache.org>; Wed, 23 Jul 2008 06:53:13 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=Fgo2cZRntGXWvBQbmAoj7V5Oy820RCuPMOcDB4aB3PY=;
        b=CKkld9zN8Pz1nmf2UcxZm+eiwoo3BlVmFI6itlmOfcYUAAy2ghxinurTINlj4o+RpE
         dehurqsGZUl6BGhcJtsYxILT4qGfwWa5q9L3r7SYvbbKYAOXNY8HoOk98U19skAqlf1V
         O0bu5apYYHhWVyBxwXVxymOI0hBfPVtRR1YQs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=KaTLpHJMRFg/ntJChBFHoXNOXk5CxPZNPEDZf6bEpxI9sb3UdG/Hbu2IdV3comVGlo
         Y8waE08331pj2IrxzYdAYBXRdu55WRAUoS8DN6MIowx0KwO3asebaMASCsdhy6bB88nP
         gOvnF5SNHGJnVyNVTGUdkv8jQLHJML/HvE7hg=
Received: by 10.141.115.6 with SMTP id s6mr73443rvm.224.1216821193724;
        Wed, 23 Jul 2008 06:53:13 -0700 (PDT)
Received: by 10.141.185.2 with HTTP; Wed, 23 Jul 2008 06:53:13 -0700 (PDT)
Message-ID: <359a92830807230653t53cccaceu1bba44bc8dada488@mail.gmail.com>
Date: Wed, 23 Jul 2008 09:53:13 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: storing the contents of a document in the lucene index
In-Reply-To: <18605547.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_74733_25500944.1216821193756"
References: <18595855.post@talk.nabble.com> <18605547.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_74733_25500944.1216821193756
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

OK, I'm finally catching on. You have to change the demo code to
get the contents into something besides an input stream, so you
can use one of the alternate forms of the Field constructor. For
instance, you could read it all into a string and use the form:

doc.add(new Field("content", <string with all the file contents in it>,
               Field.Store.YES, Field.Index.TOKENIZED))


Or, you can do something like this, which produces identical results
to the above

while (more text to read) {
     String line = read a line of text from the file
     doc.add(new Field("content", line, Field.Store.YES,
Field.Index.TOKENIZED))
}

You can add to the same field as often as you want and it just appends the
content of calls 2 to N to the same field.


Best
Erick


On Wed, Jul 23, 2008 at 3:42 AM, starz10de <farag_ahmed@yahoo.com> wrote:

>
> Hi Erik,
>
>  I don't remove the stop words, as I index parallel corpora which is used
> for learning the translations between pair of languages. so every word is
> important. I even develop my own analyzer for Arabic which is just remove
> punctuations and special symbols and it return only Arabic text.
>
> I guess in the   FileDocument.java   the whole text is already stored
>
> doc.add(Field.Text("contents", IN));
>
> where IN is
>
> IN = new BufferedReader(new InputStreamReader(new FileInputStream(f))
>
> if this is not the case yould you please how to store the whole text inside
> the index ?
>
> I am new to lucene and I don't know how to use this "Field.Store.YES" to
> store whole text.
>
>
>
> Best regards
> Farag
>
>
>
> starz10de wrote:
> >
> >   Could any one tell me please how to print the content of the document
> > after reading the index.
> > for example if i like to print the  index terms then i do :
> >
> > IndexReader ir = IndexReader.open(index);
> > TermEnum termEnum = ir.terms();
> > while (termEnum.next()) {
> >                       TermDocs dok = ir.termDocs();
> >                       dok.seek(termEnum);
> >                       while (dok.next()) {
> > System.out.println(termEnum.term().text().trim());
> >                               }
> >
> > I can print the text files before indexing them, but because of encoding
> > issues i like to print them from the index.
> > As i know the content of the document(whole text) is also stored in the
> > index, my question how to print this content.
> >
> > so at the end i will print the path of the current document , index terms
> > and the content of the document
> >
> >
> > thanks in advance
> >
>
> --
> View this message in context:
> http://www.nabble.com/storing-the-contents-of-a-document-in-the--lucene-index-tp18595855p18605547.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_74733_25500944.1216821193756--

From java-user-return-35078-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 23 14:26:15 2008
Return-Path: <java-user-return-35078-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84592 invoked from network); 23 Jul 2008 14:26:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Jul 2008 14:26:15 -0000
Received: (qmail 59020 invoked by uid 500); 23 Jul 2008 14:26:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58991 invoked by uid 500); 23 Jul 2008 14:26:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58980 invoked by uid 99); 23 Jul 2008 14:26:07 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Jul 2008 07:26:07 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of yseeley@gmail.com designates 209.85.198.235 as permitted sender)
Received: from [209.85.198.235] (HELO rv-out-0506.google.com) (209.85.198.235)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Jul 2008 14:25:14 +0000
Received: by rv-out-0506.google.com with SMTP id f6so2412312rvb.5
        for <java-user@lucene.apache.org>; Wed, 23 Jul 2008 07:25:40 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:sender
         :to:subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references
         :x-google-sender-auth;
        bh=qVKI9QLV+mRtOXFrEFFvv5sluUl9veDe2iZTwXlMS9c=;
        b=hVygs7cPnDfPlrKZLpVoQb8t8aP4Kjm1vETfrLaUrzxZIdfjcz57AWPlSNbjZujw2F
         X+qTpnDtMp2XKrm6P1SOfdyXmcMh+pJXtEWAiogx+rboQhlllECfw09jEjJzuPKZbQTD
         XytTgIneiF1L++tlPMpZPnPQzF/HaMIxd6ngw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:sender:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references:x-google-sender-auth;
        b=rzd34BeT4TiuMIaPwjmrDfrAfjLMtyvlthKIWfNDSFZJqyNmeb4NxujNvUxXdLnnqP
         31y/Q/hzeExp158/V/D45U37pW00TYXQzxP/o9ojaQX3QSVcb8ZrSsZuMm/c8+TQ53gR
         kPe0WBxo35OiAM/e+N2BepDg9ExFOycDqfuxg=
Received: by 10.141.198.2 with SMTP id a2mr91537rvq.219.1216823140276;
        Wed, 23 Jul 2008 07:25:40 -0700 (PDT)
Received: by 10.140.192.19 with HTTP; Wed, 23 Jul 2008 07:25:40 -0700 (PDT)
Message-ID: <c68e39170807230725p23a39732l5704cad662203b85@mail.gmail.com>
Date: Wed, 23 Jul 2008 10:25:40 -0400
From: "Yonik Seeley" <yonik@apache.org>
Sender: yseeley@gmail.com
To: java-user@lucene.apache.org
Subject: Re: lucene delete by query
In-Reply-To: <1bcb7c7f0807230653u541284e5m5f015c71fb0961c9@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <1bcb7c7f0807230653u541284e5m5f015c71fb0961c9@mail.gmail.com>
X-Google-Sender-Auth: e01f0c56a180ed41
X-Virus-Checked: Checked by ClamAV on apache.org

It's in the lucene trunk (current development version).
IndexWriter.deleteDocuments(Query query)

-Yonik

On Wed, Jul 23, 2008 at 9:53 AM, Cam Bazz <cambazz@gmail.com> wrote:
> hello,
>
> was not there a lucene delete by query feature coming up? I remember
> something like that, but I could not find an references.
>
> best regards,
> -c.b.
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35079-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 23 16:00:41 2008
Return-Path: <java-user-return-35079-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 66513 invoked from network); 23 Jul 2008 16:00:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Jul 2008 16:00:41 -0000
Received: (qmail 78605 invoked by uid 500); 23 Jul 2008 16:00:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78571 invoked by uid 500); 23 Jul 2008 16:00:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78560 invoked by uid 99); 23 Jul 2008 16:00:33 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Jul 2008 09:00:33 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of isaacrc82@gmail.com designates 209.85.198.235 as permitted sender)
Received: from [209.85.198.235] (HELO rv-out-0506.google.com) (209.85.198.235)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Jul 2008 15:59:39 +0000
Received: by rv-out-0506.google.com with SMTP id f6so2451421rvb.5
        for <java-user@lucene.apache.org>; Wed, 23 Jul 2008 09:00:05 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type;
        bh=o35n84VRdyUgqJwGgqvg8UqpldsDw6EcXXtHfK1Fric=;
        b=RrgN7fgKtQmMrYK8MpxeNueJ5lDUX2XxIKyZu1QISdgMwGqq9rh7dI51gJjuJQdPRI
         LNgyv4NWH6bAQeVi8UAzZ16JPeAZjxD/Vs5grrK7EJNG9f5Ry5yRUD4wOa029bQCDb21
         1RRkTP4SR9IGEDYe29tTt5Cdw+Qvu7XsQ6z3E=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=CM3PgrVSBYq8Yc4dCkKgSMdT7/zJJa+X5xNbkHwy0sIUCvs6RiGPHwEH4TPiCbVaO+
         CT3GqoNGa/O2XV5hN5IXIfe0WSCW0PGiEiTmJIjlvswwSDD+7BC8X/4vjOeLFnFFRgvR
         Sqr/lpGTGDnEp9JB+QpHaCg4cXnm1hLc9bf1A=
Received: by 10.140.133.10 with SMTP id g10mr144565rvd.170.1216828804884;
        Wed, 23 Jul 2008 09:00:04 -0700 (PDT)
Received: by 10.141.49.19 with HTTP; Wed, 23 Jul 2008 09:00:04 -0700 (PDT)
Message-ID: <bf1404350807230900w2f16adc7u5db1e2e5a671f5c1@mail.gmail.com>
Date: Wed, 23 Jul 2008 12:00:04 -0400
From: Ariel <isaacrc82@gmail.com>
To: java-user@lucene.apache.org
Subject: What is the percent of size of lucene's index ?
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_85966_33143619.1216828804866"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_85966_33143619.1216828804866
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I need to know what is the percent of size of lucene's index respect the
information I'm going to index, I have read some articles that say if a I
index 120 Gb of information the index will grow until 40 Gb, that means the
percent is 30 %, Could somebody tell me how can be proved that ?
Is there any official document of apache lucene where says that ?
I hope somebody can help me.
Thanks.
Ariel

------=_Part_85966_33143619.1216828804866--

From java-user-return-35080-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 23 16:12:40 2008
Return-Path: <java-user-return-35080-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70019 invoked from network); 23 Jul 2008 16:12:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Jul 2008 16:12:37 -0000
Received: (qmail 2658 invoked by uid 500); 23 Jul 2008 16:12:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2634 invoked by uid 500); 23 Jul 2008 16:12:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2583 invoked by uid 99); 23 Jul 2008 16:12:21 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Jul 2008 09:12:20 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ian.lea@gmail.com designates 64.233.166.180 as permitted sender)
Received: from [64.233.166.180] (HELO py-out-1112.google.com) (64.233.166.180)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Jul 2008 16:11:26 +0000
Received: by py-out-1112.google.com with SMTP id z74so1416754pyg.9
        for <java-user@lucene.apache.org>; Wed, 23 Jul 2008 09:11:33 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references;
        bh=ZOycRan4AoU9BWqBY9cO8itP9A2wtZIevQkOWWvmf00=;
        b=gubNrLBrRovBi8WjSe3vszDEbfi9Le6dJ/zg8BklBjC63BNCTdTAqY2piqSElVLXgx
         Xjvnqf/pfjfBpvSr1mzfZbzrEWfEgNeXq8x4+N9yWUvFr+GsuQDXbgD3qIwqGCi5WbeM
         xUCUvECNfSC/KmkwBJHOGB3yuV5JWhm/AZjV0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references;
        b=lJV9pWS606Hxb8dQXOVAnEutNDhY5jQzthvzXB3bzsUqhrs2pCL/FYv760sGrRDzeM
         OYPE6YI3z8Ow71uw1NfRuRUqTPkEfUt4O7A2He8N/KHQqRffjLOLtXN2f0flkynRzOVq
         LYhugbsLVTMhInfOIu+39l/04ouBN8nTMQJHE=
Received: by 10.115.111.1 with SMTP id o1mr195800wam.100.1216829492970;
        Wed, 23 Jul 2008 09:11:32 -0700 (PDT)
Received: by 10.114.15.5 with HTTP; Wed, 23 Jul 2008 09:11:32 -0700 (PDT)
Message-ID: <8c4e68610807230911k57c20a9fo9eac00f62bc1d398@mail.gmail.com>
Date: Wed, 23 Jul 2008 17:11:32 +0100
From: "Ian Lea" <ian.lea@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: What is the percent of size of lucene's index ?
In-Reply-To: <bf1404350807230900w2f16adc7u5db1e2e5a671f5c1@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <bf1404350807230900w2f16adc7u5db1e2e5a671f5c1@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

I think there are too many variables to give a simple answer.

How much of your data are you storing?  Indexing? Compressing?

Get a representative sample of your data and try it out.


--
Ian.


On Wed, Jul 23, 2008 at 5:00 PM, Ariel <isaacrc82@gmail.com> wrote:
> I need to know what is the percent of size of lucene's index respect the
> information I'm going to index, I have read some articles that say if a I
> index 120 Gb of information the index will grow until 40 Gb, that means the
> percent is 30 %, Could somebody tell me how can be proved that ?
> Is there any official document of apache lucene where says that ?
> I hope somebody can help me.
> Thanks.
> Ariel
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35081-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 23 16:16:04 2008
Return-Path: <java-user-return-35081-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70879 invoked from network); 23 Jul 2008 16:16:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Jul 2008 16:16:02 -0000
Received: (qmail 12319 invoked by uid 500); 23 Jul 2008 16:15:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12292 invoked by uid 500); 23 Jul 2008 16:15:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12281 invoked by uid 99); 23 Jul 2008 16:15:55 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Jul 2008 09:15:55 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [209.222.209.11] (HELO mirkwood.informatics.jax.org) (209.222.209.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Jul 2008 16:15:01 +0000
Received: from [127.0.0.1] (corona [209.222.209.245])
	by mirkwood.informatics.jax.org (8.13.8/8.13.8) with ESMTP id m6NGFOwE001360
	for <java-user@lucene.apache.org>; Wed, 23 Jul 2008 12:15:24 -0400 (EDT)
	(envelope-from mhall@informatics.jax.org)
Message-ID: <4887584B.3010104@informatics.jax.org>
Date: Wed, 23 Jul 2008 12:11:55 -0400
From: Matthew Hall <mhall@informatics.jax.org>
User-Agent: Thunderbird 2.0.0.14 (Windows/20080421)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: What is the percent of size of lucene's index ?
References: <bf1404350807230900w2f16adc7u5db1e2e5a671f5c1@mail.gmail.com> <8c4e68610807230911k57c20a9fo9eac00f62bc1d398@mail.gmail.com>
In-Reply-To: <8c4e68610807230911k57c20a9fo9eac00f62bc1d398@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-PMX-Version: 5.4.3.345767, Antispam-Engine: 2.6.0.325393, Antispam-Data: 2008.7.23.160109
X-PerlMx-Spam: Gauge=IIIIIII, Probability=7%, Report='BODY_SIZE_1400_1499 0, BODY_SIZE_5000_LESS 0, __BOUNCE_CHALLENGE_SUBJ 0, __C230066_P5 0, __CT 0, __CTE 0, __CT_TEXT_PLAIN 0, __FRAUD_419_BODY_WEBMAIL 0, __FRAUD_419_WEBMAIL 0, __HAS_MSGID 0, __MIME_TEXT_ONLY 0, __MIME_VERSION 0, __SANE_MSGID 0, __USER_AGENT 0'
X-Virus-Checked: Checked by ClamAV on apache.org

You can also use Luke after you've created your indexes to get their 
exact size, and other interesting data points.

Like Ian said though, the decisions you make on a field by field basis 
will make your index size vary quite a bit, so probably the best thing 
you could do is simply try it out, and then examine it.

Matt

Ian Lea wrote:
> I think there are too many variables to give a simple answer.
>
> How much of your data are you storing?  Indexing? Compressing?
>
> Get a representative sample of your data and try it out.
>
>
> --
> Ian.
>
>
> On Wed, Jul 23, 2008 at 5:00 PM, Ariel <isaacrc82@gmail.com> wrote:
>   
>> I need to know what is the percent of size of lucene's index respect the
>> information I'm going to index, I have read some articles that say if a I
>> index 120 Gb of information the index will grow until 40 Gb, that means the
>> percent is 30 %, Could somebody tell me how can be proved that ?
>> Is there any official document of apache lucene where says that ?
>> I hope somebody can help me.
>> Thanks.
>> Ariel
>>
>>     
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>   

-- 
Matthew Hall
Software Engineer
Mouse Genome Informatics
mhall@informatics.jax.org
(207) 288-6012



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35082-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 23 16:20:59 2008
Return-Path: <java-user-return-35082-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72801 invoked from network); 23 Jul 2008 16:20:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Jul 2008 16:20:58 -0000
Received: (qmail 21365 invoked by uid 500); 23 Jul 2008 16:20:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21338 invoked by uid 500); 23 Jul 2008 16:20:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21323 invoked by uid 99); 23 Jul 2008 16:20:44 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Jul 2008 09:20:44 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [196.25.240.81] (HELO ctb-mesg-1-3.saix.net) (196.25.240.81)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Jul 2008 16:19:49 +0000
Received: from [192.168.0.2] (dsl-243-246-62.telkomadsl.co.za [41.243.246.62])
	by ctb-mesg-1-3.saix.net (Postfix) with ESMTP id ED3323B6E
	for <java-user@lucene.apache.org>; Wed, 23 Jul 2008 18:19:26 +0200 (SAST)
Message-ID: <48875A01.2070504@stimulussoft.com>
Date: Wed, 23 Jul 2008 18:19:13 +0200
From: Jamie <jamie@stimulussoft.com>
User-Agent: Thunderbird 2.0.0.14 (Windows/20080421)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Lucene Search Error: Java.io.IOException: Bad file descriptor
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Everyone

I am getting the the following error when executing  Hits hits = 
searchers.search(query, queryFilter, sort):

18007414-java.io.IOException: Bad file descriptor
18007455-       at java.io.RandomAccessFile.seek(Native Method)
18007504-       at 
org.apache.lucene.store.FSDirectory$FSIndexInput.readInternal(FSDirectory.java:545)
18007592-       at 
org.apache.lucene.store.BufferedIndexInput.readBytes(BufferedIndexInput.java:131)
18007678-       at 
org.apache.lucene.index.CompoundFileReader$CSIndexInput.readInternal(CompoundFileReader.java:240)
--
18009148-       at 
org.apache.lucene.search.FieldSortedHitQueue.getCachedComparator(FieldSortedHitQueue.java:168)
18009247-       at 
org.apache.lucene.search.FieldSortedHitQueue.<init>(FieldSortedHitQueue.java:56)
18009332-       at 
org.apache.lucene.search.TopFieldDocCollector.<init>(TopFieldDocCollector.java:43)
18009419-       at 
org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:122)
18009493-       at 
org.apache.lucene.search.MultiSearcherThread.run(ParallelMultiSearcher.java:250)

Does this mean the index is corrupted? Any idea why it would be corrupted?

Jamie



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35083-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 23 16:24:50 2008
Return-Path: <java-user-return-35083-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75627 invoked from network); 23 Jul 2008 16:24:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Jul 2008 16:24:49 -0000
Received: (qmail 28115 invoked by uid 500); 23 Jul 2008 16:24:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28043 invoked by uid 500); 23 Jul 2008 16:24:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28032 invoked by uid 99); 23 Jul 2008 16:24:42 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Jul 2008 09:24:42 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [209.222.209.11] (HELO mirkwood.informatics.jax.org) (209.222.209.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Jul 2008 16:23:47 +0000
Received: from [127.0.0.1] (corona [209.222.209.245])
	by mirkwood.informatics.jax.org (8.13.8/8.13.8) with ESMTP id m6NGOAXS002146
	for <java-user@lucene.apache.org>; Wed, 23 Jul 2008 12:24:11 -0400 (EDT)
	(envelope-from mhall@informatics.jax.org)
Message-ID: <48875A5A.1070807@informatics.jax.org>
Date: Wed, 23 Jul 2008 12:20:42 -0400
From: Matthew Hall <mhall@informatics.jax.org>
User-Agent: Thunderbird 2.0.0.14 (Windows/20080421)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Lucene Search Error: Java.io.IOException: Bad file descriptor
References: <48875A01.2070504@stimulussoft.com>
In-Reply-To: <48875A01.2070504@stimulussoft.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-PMX-Version: 5.4.3.345767, Antispam-Engine: 2.6.0.325393, Antispam-Data: 2008.7.23.160439
X-PerlMx-Spam: Gauge=IIIIIII, Probability=7%, Report='BODY_SIZE_1700_1799 0, BODY_SIZE_5000_LESS 0, __BOUNCE_CHALLENGE_SUBJ 0, __CT 0, __CTE 0, __CT_TEXT_PLAIN 0, __HAS_MSGID 0, __MIME_TEXT_ONLY 0, __MIME_VERSION 0, __SANE_MSGID 0, __USER_AGENT 0'
X-Virus-Checked: Checked by ClamAV on apache.org

Did you try to open the index using Luke?

Luke will be able to tell you whether or not the index is in  fact 
corrupted, but looking at your stack trace, it almost looks like the 
file.. simply isn't there?

Matt

Jamie wrote:
> Hi Everyone
>
> I am getting the the following error when executing  Hits hits = 
> searchers.search(query, queryFilter, sort):
>
> 18007414-java.io.IOException: Bad file descriptor
> 18007455-       at java.io.RandomAccessFile.seek(Native Method)
> 18007504-       at 
> org.apache.lucene.store.FSDirectory$FSIndexInput.readInternal(FSDirectory.java:545) 
>
> 18007592-       at 
> org.apache.lucene.store.BufferedIndexInput.readBytes(BufferedIndexInput.java:131) 
>
> 18007678-       at 
> org.apache.lucene.index.CompoundFileReader$CSIndexInput.readInternal(CompoundFileReader.java:240) 
>
> -- 
> 18009148-       at 
> org.apache.lucene.search.FieldSortedHitQueue.getCachedComparator(FieldSortedHitQueue.java:168) 
>
> 18009247-       at 
> org.apache.lucene.search.FieldSortedHitQueue.<init>(FieldSortedHitQueue.java:56) 
>
> 18009332-       at 
> org.apache.lucene.search.TopFieldDocCollector.<init>(TopFieldDocCollector.java:43) 
>
> 18009419-       at 
> org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:122)
> 18009493-       at 
> org.apache.lucene.search.MultiSearcherThread.run(ParallelMultiSearcher.java:250) 
>
>
> Does this mean the index is corrupted? Any idea why it would be 
> corrupted?
>
> Jamie
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35084-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 23 16:34:34 2008
Return-Path: <java-user-return-35084-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81426 invoked from network); 23 Jul 2008 16:34:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Jul 2008 16:34:34 -0000
Received: (qmail 50592 invoked by uid 500); 23 Jul 2008 16:34:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50225 invoked by uid 500); 23 Jul 2008 16:34:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50212 invoked by uid 99); 23 Jul 2008 16:34:26 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Jul 2008 09:34:26 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [196.25.240.80] (HELO ctb-mesg-1-2.saix.net) (196.25.240.80)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Jul 2008 16:33:30 +0000
Received: from [192.168.0.2] (dsl-243-246-62.telkomadsl.co.za [41.243.246.62])
	by ctb-mesg-1-2.saix.net (Postfix) with ESMTP id BC857AC49
	for <java-user@lucene.apache.org>; Wed, 23 Jul 2008 18:33:53 +0200 (SAST)
Message-ID: <48875D63.8000006@stimulussoft.com>
Date: Wed, 23 Jul 2008 18:33:39 +0200
From: Jamie <jamie@stimulussoft.com>
User-Agent: Thunderbird 2.0.0.14 (Windows/20080421)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Lucene Search Error: Java.io.IOException: Bad file descriptor
References: <48875A01.2070504@stimulussoft.com> <48875A5A.1070807@informatics.jax.org>
In-Reply-To: <48875A5A.1070807@informatics.jax.org>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Matthew

Thanks in advance for the suggestion.

Which file do you think does not exist?

This is what we have:

_15zw.cfs  _19od.cfs  _1a5d.cfs  _1a7n.cfs  _1ahf.cfs  _1ahh.cfs  
_qzl.cfs       segments.gen
_1993.cfs  _1a0w.cfs  _1a7c.cfs  _1a9m.cfs  _1ahg.cfs  _1ahi.cfs  
segments_158j

Aside from Luke (which requires a GUI), it is there a command line 
utility that can check the integrity of the index?

Jamie

Matthew Hall wrote:
> Did you try to open the index using Luke?
>
> Luke will be able to tell you whether or not the index is in  fact 
> corrupted, but looking at your stack trace, it almost looks like the 
> file.. simply isn't there?
>
> Matt
>
> Jamie wrote:
>> Hi Everyone
>>
>> I am getting the the following error when executing  Hits hits = 
>> searchers.search(query, queryFilter, sort):
>>
>> 18007414-java.io.IOException: Bad file descriptor
>> 18007455-       at java.io.RandomAccessFile.seek(Native Method)
>> 18007504-       at 
>> org.apache.lucene.store.FSDirectory$FSIndexInput.readInternal(FSDirectory.java:545) 
>>
>> 18007592-       at 
>> org.apache.lucene.store.BufferedIndexInput.readBytes(BufferedIndexInput.java:131) 
>>
>> 18007678-       at 
>> org.apache.lucene.index.CompoundFileReader$CSIndexInput.readInternal(CompoundFileReader.java:240) 
>>
>> -- 
>> 18009148-       at 
>> org.apache.lucene.search.FieldSortedHitQueue.getCachedComparator(FieldSortedHitQueue.java:168) 
>>
>> 18009247-       at 
>> org.apache.lucene.search.FieldSortedHitQueue.<init>(FieldSortedHitQueue.java:56) 
>>
>> 18009332-       at 
>> org.apache.lucene.search.TopFieldDocCollector.<init>(TopFieldDocCollector.java:43) 
>>
>> 18009419-       at 
>> org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:122)
>> 18009493-       at 
>> org.apache.lucene.search.MultiSearcherThread.run(ParallelMultiSearcher.java:250) 
>>
>>
>> Does this mean the index is corrupted? Any idea why it would be 
>> corrupted?
>>
>> Jamie
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


-- 
Stimulus Software - MailArchiva
Email Archiving And Compliance
USA Tel: +1-713-366-8072 ext 3
UK Tel: +44-20-80991035 ext 3
Email: jamie@stimulussoft.com
Web: http://www.mailarchiva.com




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35085-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 23 16:43:32 2008
Return-Path: <java-user-return-35085-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86242 invoked from network); 23 Jul 2008 16:43:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Jul 2008 16:43:32 -0000
Received: (qmail 68748 invoked by uid 500); 23 Jul 2008 16:43:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68715 invoked by uid 500); 23 Jul 2008 16:43:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68704 invoked by uid 99); 23 Jul 2008 16:43:24 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Jul 2008 09:43:24 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [196.25.240.80] (HELO ctb-mesg-1-2.saix.net) (196.25.240.80)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Jul 2008 16:42:28 +0000
Received: from [192.168.0.2] (dsl-243-246-62.telkomadsl.co.za [41.243.246.62])
	by ctb-mesg-1-2.saix.net (Postfix) with ESMTP id 0CD08E309
	for <java-user@lucene.apache.org>; Wed, 23 Jul 2008 18:42:22 +0200 (SAST)
Message-ID: <48875F5F.30203@stimulussoft.com>
Date: Wed, 23 Jul 2008 18:42:07 +0200
From: Jamie <jamie@stimulussoft.com>
User-Agent: Thunderbird 2.0.0.14 (Windows/20080421)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Lucene Search Error: Java.io.IOException: Bad file descriptor
References: <48875A01.2070504@stimulussoft.com> <48875A5A.1070807@informatics.jax.org> <48875D63.8000006@stimulussoft.com>
In-Reply-To: <48875D63.8000006@stimulussoft.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Wasn't there some index corruption issue with Java 1.6 and Lucene 2.3.2? 
Could this be the problem?

Jamie

Jamie wrote:
> Hi Matthew
>
> Thanks in advance for the suggestion.
>
> Which file do you think does not exist?
>
> This is what we have:
>
> _15zw.cfs  _19od.cfs  _1a5d.cfs  _1a7n.cfs  _1ahf.cfs  _1ahh.cfs  
> _qzl.cfs       segments.gen
> _1993.cfs  _1a0w.cfs  _1a7c.cfs  _1a9m.cfs  _1ahg.cfs  _1ahi.cfs  
> segments_158j
>
> Aside from Luke (which requires a GUI), it is there a command line 
> utility that can check the integrity of the index?
>
> Jamie
>
> Matthew Hall wrote:
>> Did you try to open the index using Luke?
>>
>> Luke will be able to tell you whether or not the index is in  fact 
>> corrupted, but looking at your stack trace, it almost looks like the 
>> file.. simply isn't there?
>>
>> Matt
>>
>> Jamie wrote:
>>> Hi Everyone
>>>
>>> I am getting the the following error when executing  Hits hits = 
>>> searchers.search(query, queryFilter, sort):
>>>
>>> 18007414-java.io.IOException: Bad file descriptor
>>> 18007455-       at java.io.RandomAccessFile.seek(Native Method)
>>> 18007504-       at 
>>> org.apache.lucene.store.FSDirectory$FSIndexInput.readInternal(FSDirectory.java:545) 
>>>
>>> 18007592-       at 
>>> org.apache.lucene.store.BufferedIndexInput.readBytes(BufferedIndexInput.java:131) 
>>>
>>> 18007678-       at 
>>> org.apache.lucene.index.CompoundFileReader$CSIndexInput.readInternal(CompoundFileReader.java:240) 
>>>
>>> -- 
>>> 18009148-       at 
>>> org.apache.lucene.search.FieldSortedHitQueue.getCachedComparator(FieldSortedHitQueue.java:168) 
>>>
>>> 18009247-       at 
>>> org.apache.lucene.search.FieldSortedHitQueue.<init>(FieldSortedHitQueue.java:56) 
>>>
>>> 18009332-       at 
>>> org.apache.lucene.search.TopFieldDocCollector.<init>(TopFieldDocCollector.java:43) 
>>>
>>> 18009419-       at 
>>> org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:122)
>>> 18009493-       at 
>>> org.apache.lucene.search.MultiSearcherThread.run(ParallelMultiSearcher.java:250) 
>>>
>>>
>>> Does this mean the index is corrupted? Any idea why it would be 
>>> corrupted?
>>>
>>> Jamie
>>>
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
>


-- 
Stimulus Software - MailArchiva
Email Archiving And Compliance
USA Tel: +1-713-366-8072 ext 3
UK Tel: +44-20-80991035 ext 3
Email: jamie@stimulussoft.com
Web: http://www.mailarchiva.com




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35086-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 23 16:48:29 2008
Return-Path: <java-user-return-35086-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89327 invoked from network); 23 Jul 2008 16:48:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Jul 2008 16:48:28 -0000
Received: (qmail 79854 invoked by uid 500); 23 Jul 2008 16:48:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79825 invoked by uid 500); 23 Jul 2008 16:48:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79814 invoked by uid 99); 23 Jul 2008 16:48:18 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Jul 2008 09:48:18 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [196.25.240.81] (HELO ctb-mesg-1-3.saix.net) (196.25.240.81)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Jul 2008 16:47:22 +0000
Received: from [192.168.0.2] (dsl-243-246-62.telkomadsl.co.za [41.243.246.62])
	by ctb-mesg-1-3.saix.net (Postfix) with ESMTP id CF95012E8A
	for <java-user@lucene.apache.org>; Wed, 23 Jul 2008 18:47:43 +0200 (SAST)
Message-ID: <488760A0.8050303@stimulussoft.com>
Date: Wed, 23 Jul 2008 18:47:28 +0200
From: Jamie <jamie@stimulussoft.com>
User-Agent: Thunderbird 2.0.0.14 (Windows/20080421)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Lucene Search Error: Java.io.IOException: Bad file descriptor
References: <48875A01.2070504@stimulussoft.com> <48875A5A.1070807@informatics.jax.org> <48875D63.8000006@stimulussoft.com> <48875F5F.30203@stimulussoft.com>
In-Reply-To: <48875F5F.30203@stimulussoft.com>
Content-Type: multipart/mixed;
 boundary="------------070500010007000309020104"
X-Virus-Checked: Checked by ClamAV on apache.org

--------------070500010007000309020104
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit

Hi

The index log file is attached. Many thanks in advance for your 
consideration!

Jamie

Jamie wrote:
> Wasn't there some index corruption issue with Java 1.6 and Lucene 
> 2.3.2? Could this be the problem?
>
> Jamie
>
> Jamie wrote:
>> Hi Matthew
>>
>> Thanks in advance for the suggestion.
>>
>> Which file do you think does not exist?
>>
>> This is what we have:
>>
>> _15zw.cfs  _19od.cfs  _1a5d.cfs  _1a7n.cfs  _1ahf.cfs  _1ahh.cfs  
>> _qzl.cfs       segments.gen
>> _1993.cfs  _1a0w.cfs  _1a7c.cfs  _1a9m.cfs  _1ahg.cfs  _1ahi.cfs  
>> segments_158j
>>
>> Aside from Luke (which requires a GUI), it is there a command line 
>> utility that can check the integrity of the index?
>>
>> Jamie
>>
>> Matthew Hall wrote:
>>> Did you try to open the index using Luke?
>>>
>>> Luke will be able to tell you whether or not the index is in  fact 
>>> corrupted, but looking at your stack trace, it almost looks like the 
>>> file.. simply isn't there?
>>>
>>> Matt
>>>
>>> Jamie wrote:
>>>> Hi Everyone
>>>>
>>>> I am getting the the following error when executing  Hits hits = 
>>>> searchers.search(query, queryFilter, sort):
>>>>
>>>> 18007414-java.io.IOException: Bad file descriptor
>>>> 18007455-       at java.io.RandomAccessFile.seek(Native Method)
>>>> 18007504-       at 
>>>> org.apache.lucene.store.FSDirectory$FSIndexInput.readInternal(FSDirectory.java:545) 
>>>>
>>>> 18007592-       at 
>>>> org.apache.lucene.store.BufferedIndexInput.readBytes(BufferedIndexInput.java:131) 
>>>>
>>>> 18007678-       at 
>>>> org.apache.lucene.index.CompoundFileReader$CSIndexInput.readInternal(CompoundFileReader.java:240) 
>>>>
>>>> -- 
>>>> 18009148-       at 
>>>> org.apache.lucene.search.FieldSortedHitQueue.getCachedComparator(FieldSortedHitQueue.java:168) 
>>>>
>>>> 18009247-       at 
>>>> org.apache.lucene.search.FieldSortedHitQueue.<init>(FieldSortedHitQueue.java:56) 
>>>>
>>>> 18009332-       at 
>>>> org.apache.lucene.search.TopFieldDocCollector.<init>(TopFieldDocCollector.java:43) 
>>>>
>>>> 18009419-       at 
>>>> org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:122)
>>>> 18009493-       at 
>>>> org.apache.lucene.search.MultiSearcherThread.run(ParallelMultiSearcher.java:250) 
>>>>
>>>>
>>>> Does this mean the index is corrupted? Any idea why it would be 
>>>> corrupted?
>>>>
>>>> Jamie
>>>>
>>>>
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>
>>
>
>


-- 
Stimulus Software - MailArchiva
Email Archiving And Compliance
USA Tel: +1-713-366-8072 ext 3
UK Tel: +44-20-80991035 ext 3
Email: jamie@stimulussoft.com
Web: http://www.mailarchiva.com




--------------070500010007000309020104
Content-Type: application/x-gzip;
 name="indexlog.tar.gz"
Content-Transfer-Encoding: base64
Content-Disposition: inline;
 filename="indexlog.tar.gz"

H4sIAKVgh0gAA+zdW2/jtroG4F73VwgF9t0aVzyJYhYG6G6LAsXuYC3sWcC+KIpCx8RtYjk+
TA6/fsuSY1EixY+0ZEfJeC5az5jUgbQ+P2FsvfNFmj3+Od/9d3ZbXH9zij9++SegtPp/+af1
f4wRZzz4BiGfooAFnLBvfIQDhL7x/JMcTefPdr2JVp73zaooNqZ20PNv9M+vv/zs/b4sitsP
iHzY3KyyKP2A/rjy1tnm10VefN6U/3LnpdlttpkXi38Xt/Pk6WOxup5Fyyi5yWa32yRbZLP6
BfQ/Wbb81+L26bdovfmpuLubb35udfyB+QH2829//T/Ph/d65aXzlWZf602xyma/fP55vsqS
8vHTD99Xu6//i7xouynqvX/Mo9t15t1lq+sMOPTfiusfnzbZ5/lz9qlp/gNiLCNRXG/ic9kr
3d5muoOqt/JTsUi2q1W22HxqdfgBpYGPY+Ktorsft3meraod/fgRBTPfu4se63/Mfi6S9ccP
SP6X3QBm/8lWdy9P/DLPbtPfssX15uYj211CXrXvj3/eP99eJYL5gnp/Ivb8cJWEmGJc/kUI
cpVwzNjucZGWrRApH0Z+2SYIqods969+9ZAn5cMgqB4urhJE0O6huCsf+rxqEZc7wsKvHpb/
TPcT+p95OUwfcDmPi+LBy2+36xsv2njJbbHOlCZe3WA359d35YB93G1s4aVF8nk3v5+1//qv
PC9fIh/9um81WpvVNtv/tRqq9X7SX1pU/fbNFtu7qg/aPSoHuOxRj6yvObxqVL04y8v++5N5
zSH+tj6EZbHezBfXay9av4ycV4/R4eS+/bYa8Zdzv/Kwl89vs7W3KfbnUT7o6+t5xW36v//9
aff6/BgigX1vkT38suuWpdU/ckx287H+fvfy/Qdl/oyUp1o2+r7s+dGfhSH5r2+rstJ+PZTX
QvL3spiXO/1uv/d1OYgk/M77HeGXA1p7//Tm6/ry9T561Vz+ceLNVdUt876rxmKWL+6+A1qs
7oEWy9Uj0GIzX4Mt5kCLxQo80hQ6jjzdfKe8+H/79O+r8jWzSKsqtr7ypAHVN/a82+xLduvx
GeGBQGj3Egtn5ft4+Xj3ArTrHcwoIoJQvuvOZyio/lLu3ro/xpQjwXb9y79wKnBw5QWW3T+g
shiXPdlMcMTCcsekv+dPnz7XL8TqrUH/9L6IXL1m4aiv8PL5vkNcFN7drsRV57H2ltkiLQvM
P6tzW2Wb7WpxOXepZ1Vbr7yHVVFeRIcqsyuw7ToklAvPVLWEqWrt3rt6ilbdZn21P+K74kvm
JXW/TlXsKwPdVp3TfXn/nso8Nlxlp+cqwjHHecUbBO92El4NQ59RMtyrCPEk8d+pV1t1AcFw
RSBcCy1ci/PAFU0Zrs1YA4ItBgi2cBMsQ5JgiSilQCXACsSdAFvVbjIaYI/YnEy6AgRsAQK2
AAFbgIAtQMAWIGALELDFAbDIDNi25NTGLoDt720HWFN/C8D2d1cBS/t7qohTn54U4uorXVe1
nTR3GYRuT1vSRk6kjUx1bATSqsDWkVaoxWFapJUmtLEtP4Nt8wxTQXajg+HdTsK2hJTVcDBt
k5z7+XuHbatMYFi4GBTuUivc5XmEi9+EcJtBB6i7HEDdZR91RUh82qUupUIcrIsJmfmBOFCX
zhh3o25V0+lo1D1iczL+liB1lyB1lyB1lyB1lyB1lyB1lyB1lwfqYjN12+ZTG7tQt7+3HXVN
/S2o299dpS7r76kqT316msqrL3ldHXfi3mU0ekfDFr+xE35jU2UbAb8qxXX4jdRyMVH8SjPb
KFicXsEJ50m4GyQC73QKBg4TP2XhcAP7OA3f66cRgLpBYA0TUMP3Wg3fn0fD5G1puBl9gMX3
A1h877QCjAltWExpMCvxcmAxnoWBG4uras9GY/ERm5OheA+y+B5k8T3I4nuQxfcgi+9BFt+D
LL4/sJiYWdz2odrYhcX9ve1YbOpvweL+7iqLDT1VCKpPTxyC9bWvq+xOIrwMCzwstlBOnKCc
mGrdCFBW2a6DcqwWkKlDWZrig5gxOsO6Mc9SjiqHUHi3UzAzE2E5C4PNHMaI4K/QzK1aQmE8
UxDPKy2eV+fBM32jeG6mAVD0aoCiV26foyBY/iQwwTMaIvmTwII6Mbp6LwhGY/QRm5NhuQIZ
vQIZvQIZvQIZvQIZvQIZvQIZvTowmpoZ3fak2tiF0f297Rht6m/B6P7uKqN5f0/Vi+rTb8WL
dRXQFXsnOF7Gx2F8bGGdOsE6NVW/EWCtMl8H60QtKW8G1tJcN8I+w5fkOM7SZDdsDN7pFHxd
VlkeJCN85jgKfV5W/K9X2K3qwmBqM5Daay2116NT29dam711azcTAqB7LQ2Fs7pbnVvspqU9
GO66uxwayg7yZpjNOKHSpzoIDZ3cXb1V8NHcfcTmZImuQXevQXevQXevQXevQXevQXevQXev
D+5mZne3Aao2dnF3f287d5v6W7i7v7vq7rC/p+pK9ek358q6IOw21ndCdsK8jNRRI2Vr8czJ
4pmpIo5gcfUnA53FU7XMvD2Ly7OuUbk4mcpxnvkE70YwgPc6CZbjEHOfj/BVwKicZXRhebfk
BDDQAxDoGy3QN6MDnWuBHrwboEtTA1B9Iw2KM9VbnVtUZ+WohGGX6oSE5dA3VC9JhdmB6qW2
mJPUqzeScDSpH7E52a4bUOobUOobUOobUOobUOobUOobUOqbg9QDs9TbZFUbu0i9v7ed1E39
LaTe312VuujvqfpTffoN+7OuDOUj3ndqdhK9jNnAMbPVe+6k99xUJUfQu/qzhE7vmVp63rLe
5fnXOJ6e7vMrYZwSHu0Gk8O7nQLkM+ELf/j3HhHNuUjii+P7yxCHRc9B0W+1ot+OLXqiBT1/
h6CX5gig/bYZHWfZy31bsCcIYREonyDHPmlgjyiecRoeYM9nPhdOsq/eZMRosj9ic7J1t6Ds
t6Dst6Dst6Dst6Dst6Dst6DstwfZc7Ps28RVG7vIvr+3nexN/S1k399dlX15CUJdvZL/ZR8k
SpWkqbe5ma8buLY67J6untm136PuZYBPUTPqi/sqId7vm2IT3ZbDuN/rH8qxqeZWn34X5j4M
St85JsViPU+z1X6qTjsxZfUqqr996Tuc8rUZbRfJza7AerXVyla12XDYM5G2P0JcXgIDB+8w
D4e++wu8eqLU0SZabTSNm2He9/h4tteZ9w7EqsygNLS74Sxn6+wXbucQSnfVRZfg+vt2mnb1
j8Sf6taveLzScZzxMCqVdK4JI+p8G9RJG2xDJ8kP4DrXTr/Iluxv02iyt43kyd42kigNbeZg
G0mV/cecwsejlaXtOtW10zrVtWmmRlinUlfNdOtU/a2qi0p+BWpb3IEtFmCLAmyxBFvcgy1W
YIs12GKzb9FF8qus7H0pixMWtu/qabHIzvzJWBQkiGbVUk34Nj4bm/ocB8O/e4b8kBMm3sva
XfNCC+EVt1YT7Yrbg3bF7eE83yfrHN4rr7jtRxZYJ3sY8BWxB6eviCGOw8MqWeAHsxAx6UYL
yHdbJave4tBoq2RHbE4u3g/gKtkDuEr2AK6SPYCrZA/gKtkDuEr2AK6SPRws03rJq6tk7XUq
tbHLKll/b7tVMlN/i1Wy/u7SKpkIBWLceOTqqoL69KusKtT1or6wr+rvHeiOzG4t4Gs/ZVvW
3zix/sZUpEZgvfpDho711+qV/5pIlaavESg9g0AjRDlOd2Mh4N1OQaDl8eZ5+foZTNA4yljO
3hdBW1VAwBYVoEUftRZ9HNuiWGtRMUGLNkMMoPSxOTlnlMp9WyhF5TH6yqcyRRjQ5q64CM8C
nx9Uyma+YwDEzbgJZkdsTnbaI6jSR1Clj6BKH0GVPoIqfQRV+giq9PGgUmFWaVtnamMXlfb3
tlOpqb+FSvu7a1RK+ruqRFOfngLR6kv8KsF9h2hntcu5OzpVvXpNZWt+4ggzVc06p96otWAS
TpXmsQErP8PHHaMoR6KOMPPh/U5CrGnESIAHi1WEzEfBOwVrqy4gi/BdBKfvPmnt+jS2XQN9
iNm04nd7hxtQ7FNzms6Klfu2bwNAMQkUxSKOUXMXWxKwUi5NuAOZhQI7MXY+bo7ZEZuTYfcE
MvYJZOwTyNgnkLFPIGOfQMY+gYx9anLMgCTeTpDZsCheQ3fLKLOBYbyG/hrLUkNfTZLXREJp
+0pJfc2XG+09WMssr8s4aMbBFrl/OSH3rxOHmvVXmm6r7vlOS7nSnB64Sw4Lpfh03OWIsfrr
2QjB+50Ed0MuGIsHc5dl8e4rCO+cu+1iYZPdC4f3Pmvd+zy2e5nevdNK74XHHQDwc3O+zgCW
+7YBjJkIlXAzhHF5MocYB8xnlGA5xsHxOzh/jZtudsTmZBI+gwB+BgH8DAL4GQTwMwjgZxDA
zyCAnxsAA0m+HQQOjPIdnOU7NMzXKs33BcDM0FcDv4lk2YI1pb74rxLWe9SWArwMiGlAbEn8
txOJ/z5x1JkKdB2J/9LUjomSWJrcg42pf/rPLhDCqIirYcLwbidB45zHGR9OY5RHoQi/Hhu3
y4dF/C8C838TX4dk6V9P+iHb7vFNHcnNBJi1nPjHfxK31dci8swX0j1jfX/GEJWszJjbZx7+
Hjfy7IjNSXpMfMjKuxZmK5ctACuXLQArVy2MVi5bAFbeHanZylWLvZWBKOCOF4dlARu6W1p5
YBqwob/Gyqa+GhpOJAPXvrTUNWD/2TXt4Vsa8TIyViNjq+dbJz3fnjj/TLW8Ts9/a6rJ1PUs
zXLDaHyGjwD7NAhx/Xt3Au93Co4uZy7Ok8GMJn6S5enXp+h2PbHID0ZggHC5Px2n0Zk4Pa0E
4WNmAnA1GuBq1OdqERJfWYSmiKHms8Rs91niUMpiwJg4ufp23Ay0IzYnSxOBrkagqxHoagS6
GoGuRqCrEehq1LgayBLu2HJYmLChu6WrB8YJG/prXM0NfTV6nEh27hE1pi4G2rLvxsjLELkN
ka201evdVArvThyIprpfJ+1bTX15M9KWprsh9zm+dcezmAfVfR8Qhfc7BXKT2Ed0OLlRigPG
8Fds7naJscgfRmAAcYK1+MZnwve0EogHTQmgcDxA4dhpdZuQsMkiJsiflT+kSwpH2C0R7W7c
RLQjNie7FIMKx6DCMahwDCocgwrHoMIxqHDcKByIIu5IdFgWsaG7pcIHphEb+msUHhr6aog5
kcTdIcWmrgraNwI3a17G6sixsnX5wsnlixOHo/XXo26r7vm+PZdL894APTjDR0swzfNqABm8
1ynwnGOUZcOz0WiUxoRedN6tOBbZxQgML06IlunkTEyfVnjxOHMDeJ0M8Dpx8roQfhOe8A+f
iVJVzbI5mmHfDeyLcYPRjticTFgCgp2AYCcg2AkIdgKCnYBgJyDYSQN2IMO4g9ZhIcaG7pZg
HxhjbOivAbsw9NUgdCIBvaOUnbo+aN8b3DR6GbShg2ZL+MKJ8MWJE9LUHyh0hF9oatAbJrz0
AmgsH55hsR0naYprAwXwfqeg+UBwnA+/xV0uSJZdNN9fhSwSjxEYeZxQLevpmVg/rcjjkScJ
8D0d4Hvqdt9ngZpvZjLKS0IR6dPmhLh9M7MYNx3tiM3J4KUg7ynIewrynoK8pyDvKch7CvKe
NrwHgo87xB2WfGzobsn7gdnHhv4a3ncy0rSdjSFp7R5QStq4daO+wHcPtBlpCAgm1jz/Dtx9
GJTeU9SEpJ1qXl4ig/Zf6dIdjSkjLWB9E2n9Y8TlNTB09A5TAcWkdVvrc9LO8FJ7jZS0U0+g
NK53UkjaGS/czhE0GWk0PGSkdRsqIWmvc7zdjLRzHEUlk87VYISdQ1hZtcE2dpSEtNPvlKkJ
abo23YQ0TRslIU3TRklI07aZg22UhDTdMXcT0rRtdLq0XahaOi1ULU8ckaYum+kWqvpbVdcU
GBr2ALZ4BFs8gS2eoRaJD7ZAYAsMtiCHiLQOkV9jaS9hZcWjofV7eickjZ3hNg8oTZOX8s3h
/U5h/Q7HPE+G3/AXpX6chO8lokJ+qfFugdMsvLXaaBfeAu3CW3CmhbfO8b3uwtvL4AILZsGA
BbPAacGMU/kX4rR8yQrRJKX5s/LMnFbMluMmpR2xObmGB+CKWQCumAXgilkArpgF4IpZAK6Y
BeCKWdCYpvWih6LSNK2dVsz6u1uumJk2YLNi1t//ZcWsrMQIE6GkpSEghF3z/GssL+zLRn19
v/xUeXx4+uWs7aGvFgdTvbo/cWia+mOHDvpLTRF4TbZKM9iQ9Ay3TIjSiItapCG82ymINGWM
jyBSTmMfv5ffKGvLgEWALwITfBOulSk/k0wnFeGrjDJAVD6AqNztO1YMkeZOByKc0ZDKdzoI
3T6yeT9uatoRm5PNxkGhclCoHBQqB4XKQaFyUKgcFCpvhAqE+XaYNizN19DdUqgD83wN/VWh
EkNXjdWmEW/bLR/1da6t1m5ou5y+u1lXTmZdnThArb94dVt1z3cSZpWmssHr4SYA5GR45UGG
0vq2uQLe7RTwmgWYsHT4ciqKM8bzd6rXdmWwyP5FYPhvEmoZG47NWK5n7KTSf/uHG/Bs2Jym
s2flvu38CF8EvgJaGhIuLboyxGeUB9K3kFCInEi7GjdB7YjNycgLQdKGIGlDkLQhSNoQJG0I
kjYESRs2pAWSgDuuGxYFbOhuSdqBYcCG/ippqaGrxnTTiMTtLSX1NV/uq/dgLXF3GQfNONgi
V734TTVtfeIANZXcOuSuNIViWsiV5vSg3eAcd7fNYipo9bLHPrzfKXAXiVjw4bfayvyI5O/l
Tlt2tQJb5AZjMDc4EVr2ivOs3naPb6LsbcYd8K8YsJ4r3L6jE/ImPpixcOYz6Ss6WFAn+67H
DU87YnOyBgVoXwHaV4D2FaB9BWhfAdpXgPYVB/tiID24DUBNaxf7Grrb2de4AQv7Gvqr9mWG
rqr5NM9P03z1hb9fx9AetR3+LgNiHBBbDW+cNLw5cXZaf3Hqtuqe70Q1LE1uw+Iz3IGWiBjz
ahEYI3i3k1BxTjOUBMNXgbF4Pzegda0eFvnCGMwXTiKtj6Mz+XhS+cIuEwBAORoA5agPyuUh
+xyrQcOUNl9nD+kMN1IWMyoCJylvxo1OO2Jzsh0jUMoRKOUIlHIESjkCpRyBUo5AKUeNlIGY
4Q4Xh8UMG7pbSnlgzLChvyplU1cNDKcRqutQWeoSoK3xbkK8jIzVyNjaeetk5+2Jk9NUyevs
rCsmU7ezNMsNos9wl1iUxTlLqvHC8G6ngOiIEVGO6WBDM5L6LP76EN2uJxZBxBgOIo61mo7P
pOlJBREfNRMAq+MBrI4dMxv2NzyoMxvIDEnfeKMzP3RLJN6Om5x2xOZkaMYgq2OQ1THI6hhk
dQyyOgZZHYOsjhtWA4nEHVsOSyQ2dLdk9cBEYkN/ldXc0FWDx2nE7h5TYupaoK36boq8DJHb
ENlC+4sTtL+cODhNZb8O2ltNeXkz0JamuxF3ePrPLuMoypLqFgKYwLudgrhJmPrRcHHvchne
/SeXreuLRWQxhiOLEy28k7HhTfTwnlRk8bApAQSeNEPhLHC5b0vgWFCB1IXtwA9Y8xFowWYh
au7TymaUuhn8y7i5aUdsTlZpAho8AQ2egAZPQIMnoMET0OAJaPCkMTiQXtyB6LD0YkN3S4MP
TC829FcNHhq6aoA5jWTeQdWmLgvlBnpPyFKal7E6cqxsVf7gpPKHE8emqT8j6FT+RVNw3p7K
pXk/8Jyf48PWUU5ZTqshpPB+p+BzJKI4HOG7hTRN8ii9CL1bdCwCjjEccJxqqZ6eaY18UgHH
I80NYPZ0wKp56rRqzhiX7hQXhjPMmrtwBDMu3JIVHsYNTjtic7JhU1DsKSj2FBR7Coo9BcWe
gmJPQbGnjdiBpOMOW4clHRu6W4p9YNKxob8qdmHoqlHoNMJ7xyk6dXV4WcQ5PsX3MmiDB83W
8OoFb6qWjyfOTVN/otAZ/kFTgt6w4aUXQIP5M9wnJIkSH1chyJjBu52E5f2cB2iE+y77iQiD
i+V7q5BFHDKG45AzLeqzM62/TyoOeexJAnSfDViRz3pX5CnjgcL7gIXNTfYo57OQBdK3MgPu
xvvHcYPTjticDN4M5H0G8j4DeZ+BvM9A3mcg7zOQ91nDeyAXuWPcYbnIhu6WvB+Yi2zor/K+
k5um7WvMTWv3AHLTRq4b9QW++xdtbhoG8oo1z78Ddx8GpfcU1dy0k83LIUgo7z0aU24a8oO+
mbT+OeLyIhg6es1cQMlpSnNtdNo5Xm2vEJ128imUB/auyU4758XbPYQmPC3gh/A0pWU3Pe21
jrgTn3aWw6h80r0kjL5ziDKrt9hGjxKgdo7d5mqEmrZRN0NN10gJUdM1UlLU9I3mcCMlR017
4N0gNX0jHTdtl66enJaunk6cpNZPa7tW1eUFZosFYAsOtgjBFgJsEYEtYrBFArZID0lqHTS/
ymJfXlaqgNu/yXei1Jq1NXy6389TnvlxVB1jAO93Emt6Oc7jPB++psczlqfZe1nUk15sQbfE
aRbjWm20i3HX2sW46zP9hr1zfK+8GLcfXGAR7XrAr8ive+/XQDmtF8jadzYTjEu3NpsR6VOt
CO/W1JxW0Z7GDVM7YnNyGb8GV9GuwVW0a3AV7RpcRbsGV9GuwVW0a3AV7bphTetVD4WpaVo7
raL1d7dcRTNtwGYVrb+/tIqGuU+p+dg1Sw7TyGrf1436An/5VcnxGeuXs7a3/rOT9Z9PHKam
/uShs/6Tpgi8plylGWxQKs7woVFEYkrTajA4vN8poDTCJCUj3EYhQCxC7+ZrXbpCYBH0i+Gg
3xstTm/GxinW43RaQb/dUQaUetOcnbNS5b5tpQYkpOqvess3/ub+B4TOcIAOSiWzELv9qvd5
3Dy1IzYns+0GROoNiNQbEKk3IFJvQKTegEi9AZF60yAVSPztSG1Y4q+huyVSByb+GvqrSCWG
rhquTST7tlM/6gv9KsG9x2jptsvpO7OV+i5sLVufNk9NRbSOrc+asjAJtkpTefDr/7d3p9uN
6toWgO8DneGBkJDEfhva9H2fp7+ukDIyLGtKCIjicv0642wJsDArn5cxU6fLN1VLrZKse5Su
xruNga+11kUxQxhwVjUFP1K97hcGh1TgFKcCX5CMvVipxxpXKvDB5QaevQjoul54xkloYfRc
5SaTuXHnIvfBbFe7Z0tSm7I5k3cXELMXELMXELMXELMXELMXELMXELMXPWZBOPBAdGHhwJbp
jpgNDAe2zB9jVlimEpqLJB33UBXpLve/TYjpMbmndaDWwZW3zIu3bNkkNQLbBG+/Rg1fb1y8
Nc4p4dwF+7RV2mZJ907K8X5jgK7kmUjZDJERWjKdHLt094uFQ4JwihOEL0nyXq5E3rgShPG6
A/teBtj30u9RtjJLd/ZN9ZYoqTAeZSsy7aVfNmuW2pTNmR68hPq9hPq9hPq9hPq9hPq9hPq9
hPq97PULcoQHBAzLEbZMd9RvYI6wZf5Yv5llKqG+SPJzYUHprnyyovvx77QgtgVx9XDq5eF0
2Sw1QueUhxlROiL1sHFyexhny8NY1vnXI2l5gncag4pZmVZlPkMIhGiq7J9B8V7p4A5BwxwH
DV+ROr5aR8fD44tdx/0JAEy+CmDylV+LWOY9kyXLNyo1f9yeyMyLyemsQWpTNmfC8Qoy+Qoy
+Qoy+Qoy+Qoy+Qoy+Qoy+WrHZA4ih/etSIz2YbJluhuTrRtwYLJl/pjJtqljFRL/PXIVdiWA
rPFePDytjNvKuMKZe8GZLxukRjCegnNKFJPY4Wyc5V7QagVBqyZPv36WxhnebRSGbquqbXgw
okuhWVn8e4jerycOscQcxxJfk5q+XknTccUSTzkTgNXXAay+9mK14v2P3dj/tiu0UbL/vVuy
8bqPuPtzMFuO2pTNmc68hqq+hqq+hqq+hqq+hqq+hqq+hqq+7lUN4okHtAyLJ7ZMd1R1YDyx
Zf5Y1coylbBjJCG8EypMVwrIou+HyNMS+S2Rq7OFl7PFsjlqhPopZ3OivPwaZxunuwd3vsKD
IJJCM/H1JCSe4v3GIO6i0lwm4V3rJuOiOpro4uAS45BhzHGG8Q1J75uV6B1XhnHQKQEGvwkw
+I1faztXxhMneLLhWhmt7S2ivBAuZg1Sm7I5k6U3EOE3EOE3EOE3EOE3EOE3EOE3EOE3PcJB
mPFAomFhxpbpjggPDDO2zB8jXFumEsKMJKk3pNZ0RYH8O+BHzdNaTVwrV5ZnXizPlg1SIz4k
UCwXRMH5fSw3zjvh8wXvtc54lVdfz/fiHO83Bp+zRohsjodiqErJ5AT0UdVxCD3mOPT4lpT6
7UpSjyv0eJ5zA8h+G0D2W0+y67wne7p1ldYm2VO/m7azWZPUpmzOROwtJPstJPstJPstJPst
JPstJPstJPttT3aQfTxwa1j2sWW6I9kDs48t88dkzy1TCYZGkuc7S9HpqgP5l8HPo6dFC100
V8RLL8TLZZPUiI8UFOIzogT9YsQbb4Cd5vMVfjnZJqLOv1KRucC7jQHzKhNci2DLF7zKyqMJ
UlugCDmkI3OcjnxHmv5uncfjDY/vGEzfnySA+7uAp+vdHXy6nk7S7ueW+0FqvNc9T5ONYsJ4
up701L2cNUhtyuZM795B3d9B3d9B3d9B3d9B3d9B3d9B3d/1ugc5yQPihuUkW6Y76j4wJ9ky
f6z7QZAaOdcapLY/AwWpzVs3ugv8z3QySI2DAGPivx8Bu3eLcvAlEkFqS52XXaTQ/cGjsQap
perQmXT+GHF6E4SuXn8uUJDaaDgdpLbCu+0ngtSWPoXmwt4YQWorXrzDQ+iD1JTeBamNRo6C
1H7oiIdBamscxpdPhpeE1Xc+iWZfW9xHzzhIbYXd3hNBatSgUZAaMWgcpEYMGgepkYOGQWrE
oHGQGnXgoyA1chDFTdfOlfLqXKllg9SIPhrVuTo86uvygtFiZ3DEORxxAUdcwhFXcMQ1HHED
R9zugtQGaP6RXt/9tvgp7f5HfhCklq/wyIembpqiO8QM7zaGjl7VKlaq8G/neVoqfjTfzhtv
tWxY4IhW3N4YshX3QLbiHlb6en1wfD/civteXNBCewj4fvzh0PfjjAnZffm99wV58qdBsftl
WfInOC3d9dD0Rmu/X5apWWPUpmzOLOIPsIf2AHtoD7CH9gB7aA+wh/YAe2gPsIf20KNm712P
YtSI0V49tMPTHXtotg249NAOzzd6aFwlQtqPnWg4RJLc3tWN7gL/+0XJ9MT106t2l772kr5e
NkaN+NxBSV8RReAn3WqcwZ6kKzxDIavrnGVfayHxbmMgKcsUq2eI9lWplPnR5FBQdcAh4pfj
iN9H0qaPK9k0rojf4SoDpD4GIPXR6ybOVBqpEzxPNlIp42veVHkl/XY1erYQtSmbM9H2CIn6
CIn6CIn6CIn6CIn6CIn6CIn62BMVJP0OnBaW9GuZ7kjUwKRfy/wxUbllKoG1SDJvB+Wju87J
au2nttPL90dr7oXWfNkQNYLQFFo1URaiQKtxKnu9rvGDp6SQKeseAabwfmPga9EUWVWH61Xx
gh0pXvcLg0MWMMdZwE+kYp9WUmxcWcAHlxtw9imAs0+HOJtrnozuWhR51nM2ZWwjZd9xzbYK
8Ou45vPGqE3YnAm8J8jZJ8jZJ8jZJ8jZJ8jZJ8jZJ8jZp56zIBN4YLqwTGDLdEfOBmYCW+aP
OSssUwnPRRKKe6iOdBc8Wb/9YHdaB2IdXIFbeAG3WDhGbcxtCrg5USjiAq5xTnfSZQlb47f9
baKV/Fof7bDjGKybCl0kRbB1m7SsdH3s2N2vFg7RwRxHBz+T6n1eSb1xRQfjdQf8fQ7g77Mf
f0XKe/5ytfnzGowctdyPv8W8OWoTNmeC8Bny9xny9xny9xny9xny9xny9xny97nnL0gRHhgw
LEXYMt2Rv4Epwpb5Y/5mlqkE+yJJz4UFpbvyyYru57/TgtgWxBXEpReIy4Vz1MY8p0BcEKUj
UhAbJ9eQMV9exrXibdk99Cp32G8MMGa5TvMiPExt+9JVc6z3MKD64RA1zHHU8AtJ5JeViBxX
1LDHCQBWfgmw8ovXnQ/bK8lIfUik2qi8T1NjG+aJ5XLeNLUJmzP5+AKx/AKx/AKx/AKx/AKx
/AKx/AKx/NJjGYQOD8QYFjpsme6I5cDQYcv8MZZtUwkbRpKx615auhpAFnk/JJ5WxmllXPlc
efG5WjhNbYx5is8lUUxi57Nxlg1HZ8unOyghClH/WTCROOw3BkeXRVrKMvxmCq0LdWS/TvMu
KMIhnFjgcOJX0tOv6zxVanh8v8bT/ZkAsH4NeHTU68FHR0muxUjWmdi+pN09xVpumMiMe4o5
84spruYNVJuwOZOarxDWrxDWrxDWrxDWrxDWrxDWrxDWrztYCxBTvK9LYrQPrC3T3WBt3YAD
rC3zx7BWlqljPhL//bfwsSsG309iIV+HmyNPS+S5RK7Urr2oXS8cqDaGP0Xtiigvv4baxuk2
zK1XuKuD1UlStV9Lxxx2HAO6WZpwrbJgdWdFXmX/zm0dqMg4pBkLnGb8RvL7bSV+x5VmHHRK
gMPfAhz+5ulwmRgOV2IjUtPhgvk1uOt5M9UmbM6U6Rt0+Bt0+Bt0+Bt0+Bt0+Bt0+Bt0+Fvv
cBBsPMBoWLCxZbqjwwODjS3zxw7XlqkEMiNJ7Q0pNl1VIP8Q+GnztFYT18pV5o2XzJuFM9XG
nxMomddEwfl9MjfOe090tsKN11VZivQr81ikDvuNQuh5K4ss/LFtbVOmLDsJfVh1HNKPBU4/
fiep/r7OnSfD4/vFVO/PDTD7e8BNKe9eN6VsF0gamWrZhvPczFTjyovszbyZahM2ZyL2HZL9
HZL9HZL9HZL9HZL9HZL9HZL9vSc7iEEeuDUsBtky3ZHsgTHIlvljsueWqQRDI4n2naXodNXh
73eo0zN+T4sWvGiuiG+9EN8unKk2/khBIb4hStAvRrzxBjA0v7tpmy+meZ6lafn1vDvBHfYb
g+ZVXrW6Cn8Gc5ozofKT5g/WIYeoZIGjkj9I1n/MzfqMZn1cUckznyTg+49+cbx9b87d871I
cpmMgK8563vykicbzaUB/CT168m388aqTdicSd4PCPwPCPwPCPwPCPwPCPwPCPwPCPyPHvgg
NHmg3LDQZMt0R+AHhiZb5o+BP4hVI+daY9X2Z6BYtXnrRneB/1dldKyaAGnGxH8/AnnvFuXg
SyRi1ZY6L7uAoc+DR2ONVcv0oTPp/Eni9CYIXb3+XKBYtdFwOlZthXfbT8SqLX0KzYW9MWLV
Vrx4h4fQx6rlfBerNho5ilX7oSMexqqtcRhfPhleElbf+eSbfW1xHz3jWLUVdvtJxKpRg0ax
asSgcawaMWgcq0YOGsaqEYPGsWrUgY9i1chBFDddm1dnXs2rs4Vj1catNKp5dXjU1+UFg8Ye
4IhHOOIJjniGI17giFc44g2OeN/Fqg3Q/CPtvs9t8cu5+x/5QawaY+s8BrjkbffdrHDYcQxd
PVaUbS11cFtP53WZF8fS1TPebWJY44hu3N4YqhtXJ1Q3zvh/l/2SfXB8P9yN+15cexdtuzaT
vyXfm4u/JecizfsbW5Ns78kNYsO0X2jF2by5ahM2Z1TxOkFNtD8j7E207QjQRNuOAE20rxHW
Jtp2BGii/TlSexPta8S3avbe8yhXjRjt1UQ7PN2xiWbbgEsT7fB8o4kmMsW1/diJjkMkQe5d
1egu77/flEwPYD+9anfqn3tR/3zhXLXxBw+K+mdEEfhJuBpnsDdpusbzetvtq8nzr9XIHHYc
g0krVecyCSZpngiRq+Mi6X4lcEj9FTD1t2akTdlKNo0r9Xe4ygCpLACpzAupabL9kLa7lTNR
27/m2vimN0uFF1LP501Wm7A5k20MIpVBpDKIVAaRyiBSGUQqg0hlPVJB+O9AamHhv5bpjkgN
DP+1zB8jlVumElyLJAZ3UD6665ys1n5uO718f7aOL2RbBbtYOFltjGiKredEWYiCrcapNPy6
wlN1dZ438itZTUiH/cbA17aVMguPm2C5rhg7mqfqWmuDQ0SwgBHBdUpCNl0JsnFFBB9cbiDa
NEC0qZ9oM+PHSSLhmzw1HifApN+tixfzZqtN2JxJvBSCNoWgTSFoUwjaFII2haBNIWjTHrQg
KnigurCoYMt0R9AGRgVb5o9BKyxTCdFFkpV7qIx01ztZvv1od1oHYh1ciXvpRdzLhbPVDhea
4ajh642LuMY5NaybLf+jINbkPK27O+iUw45jwC5LdNaU4drVnBdpc+zY3S8XDpHCAkYK15xU
L5/9UVuCZm9cmcJ44YF/ufGCvQG8N9nh5zssSbbC2CWs/W+LjM3eD/Sl37NtL+dNWJuwOZOF
HCKYQwRziGAOEcwhgjlEMIcI5j2CQcDwQIJhAcOW6Y4IDgwYtswfIzizTCXwF0mwLiwq3cX/
X7W96g8dtiMDTytiXRFXGF95wfhq4Yy1MdMpGF8SxSNSGJtntydyppZvB2daym89aYf9RiHk
Kk1ZmQYLmaeyyvU/I+RBBXEIIhYwiLgWpJXFSh3iuIKIfc4AQLMIaBoLvydaKdbfBiFZsvnD
G+MH77nfE62u5k1Zm7A5k5ACgllAMAsIZgHBLCCYBQSzgGAWPZhBJPFAjWGRxJbpjmAOjCS2
zB+D2TaV4GEkCbwepaWrAf/1f9OnOvG0NG5L40roay9CXy+cszYGPUXoK6KcRE9o4zQbll7h
52q8TkQqv1Ysd9hvFJauS93yWe6tEEyyfxDT+0XFIbtYwOziOiNVna2k6riyiyedCsDrLIDX
mSevs74fneVq8+dJbT2vmUi9eH09b9bahM2Z4MwgrzPI6wzyOoO8ziCvM8jrDPI663kNQowH
xgwLMbZMd+R1YIixZf6Y18oylTBkJFG9U2pMVwzIuu+HydMaea6RK7jHF7ytFt4snLY25j8F
7muiwPwecBvnu5e3XOFHeY1MC/71m7wscdhvDPKuG1ZyGQ7vqsqFPJqM4+AqkzmkHWcw7biW
pMDlOgIfHt8vFHh/TgDFZQDFpWd2QyZ6inO5kdvX2lOca79bQ27mjVubsDkTpxJSXEKKS0hx
CSkuIcUlpLiEFJc7imcg9njfo8RoH4pbprtR3LoBB4pb5o8pri1Tx8wk/vvvY2ZXFci/BF7e
PC3W5MVyxfmtF85vFw5cO1yQhqOGr/cX4tw48YbSdz8BTJe7HbvQOkm69xtz2HEMTGeybJNi
hga5znhaVyenjyqPQz5yBvORa0WCXa2Tjzw8vt8M9v7kALmr6UnJe3P3k5J1kv65MX5Ad67T
/i4VlrGN7B8opzZScS+6384buzZhcyZmFaS7gnRXkO4K0l1BuitIdwXprnq6g6TkgV/DkpIt
0x3pHpiUbJk/pntumUpoNJL033nKTlcfvhM5yZfmyNLTqgWvmivm77wwf7dw8Nr4owWF+Vui
CP1mzBvvAEP1cvnee9ukLPl6oEiWOuw3BtSnpcjSMtj0VcGEPJoY5SUKkUOgcgYDlWtN2l6v
1IyPK1B57rMEkK8D2vParz2vmdGeV3qLITN5LWV+z+O7mzd5bcLmTPVqaHwNja+h8TU0vobG
19D4Ghpf98YH0coD6IZFK1umOxo/MFrZMn9s/EHyGjnXmry2PwMlr81cN7oL/M//Q0avZSD0
mPjvx4Dv3aocfI1E9tpiZ+ZvDFGdHzwcW/hayvND59L508TpbRC8fP3JQOlro+F0+toa77ef
iF9b/CSaS3tj5K+teQEPj2EXwCZSuQtgG40cBbD91CEPE9hWOY4vqAyvCyv0PLLQui3u62cU
wbbGbvNxBBs5aBjBRg0aRbBRg0YRbPSgCzxoFMFGHvgwgo0eRLnTtY1179XGul84gm3cVKPa
WIdHfV1fKJSsTuAIBkekcASHIwQckcEREo5Quwi2gZ5/ovFX5/9V378Xc/tLP4xgk/pvl00s
9529bNJSdZ0Q7rDjGNp7rMnqJFHB/b2y0m1yLL9pM99tfFjjiLbc3hiyLVeQbbli7racpNty
g+P72bbc38UF3bSif1He3TRz7v6T0ETKpR610zKptPE0YLZJ9x4HnAm/ftr9vCFsEzZn1vEC
9tMK2E8rYD+tgP20AvbTCthPK2A/rehds/euRyFsxGivftrh6Y79NNsGXPpph+cb/bRM5Uop
+8ETrYc4ct+/C0d3hW83cfDQHDsGp1ftrP1xdbAVrIeFU9jGnz0o7d8TVeAn7WqcwZ6lKlv+
S2eR8bTsvnQWDvuNQqVJJkUbrlKWqj9BFsfF0v1S4BARnOGI4JL0abnS18ZRRQSPVhlAtQz4
2rf0C61I8sSIYWMbxcxfZWUZ82Lqw7wxbBM2Z8KthEwtIVNLyNQSMrWETC0hU0vI1LJnKsgK
HlAtLCvYMt2RqYFZwZb5BFO5ZS4Btjhic4f1o7vQ/345Mj0/9/TyJ8D10QuujwvnsB2uXsNR
w9cbBVyNU2kIVi3/YyjOWV13VMgc9huFYJtC6ZQFC1aJNm+P5ZEF9trgECic4UDhipRstdKP
m6IKFD683IC0VcDPlSq/nyvJRKc703IhNnr7mvvWK1d+Txp4nDeJbcLmTOVV0LQVNG0FTVtB
01bQtBU0bQVNW/WmBdHCA9eFRQtbpjuaNjBa2DKfMK2wzCVQF0e47sFK0l3yf29hn56ye1oH
ah1clTu++m1F7WnhKLaxuSnlPhKVIi7lGue0565Olm/YMiULXemv9ZEOO47Cu4KnaR3u3YIn
mc6P3bv75cIhgDjDAcQ1Cd96pRZuVAHEDusOBFwHNHVrz6au5EZTV2+RYYZKZEx7Afhp3hS2
CZszSVhDANcQwDUEcA0BXEMA1xDANQRw3QMYRBEPEBgWRWyZ7gjgwChiy3wCwJllLgG/ODJ4
cUXpLv2/vYzpYbynBbEuiCuJn71I/LxwCNvh6jQcNXy9kZLYOLmGjdMVnotVbg9Vd199K4cd
x2DjNql5Ef742lpJ2R7LT+h964dDXHGG44ob0sjNSs3hqNKKfU4AwHIT0C5uDraLJddipGXO
Vf/Ld5myTSa5GcGW5V5afp43gm3C5kw/NlDLDdRyA7XcQC03UMsN1HIDtdz0WgaZxQMxhmUW
W6Y7ajkws9gyn9CybS6Bwzgiej1qS1cE/nZCpkf1nlbGbWVc/fzi5eeXhRPYxpqn/ExVk9j9
bJxlA9Ir3BWstoVKVF8Lph32G4Ojy0JkPA+/KZjJKsnEvwfp/YriEGqc4VDjlhR1u1LXOapQ
40lnAtC6DehDt3596MyIfBAs2cra/A0c8+xDv8ybvjZhc6Y1WyjrFsq6hbJuoaxbKOsWyrqF
sm57WYNw44Euw8KNLdMdZR0YbmyZT8haWeYSfowjwndKjemKwd9GyvQo39MSeS6Rq7Vfvaz9
unD42lj+lLVfiPrya6xtnG4D3WqFOztY1Yom+1q63GHHMaibpazJ5gh1kMX2ZP3D6t4vMg7p
xxlOPz4j+X22Er+jSj8OOyXA4WcBDj/zc7hI+huiBZebTJgd7pz7pSC/zhu9NmFzpkzPoMPP
oMPPoMPPoMPPoMPPoMPPoMPPeoeDFOSBRcNSkC3THR0emIJsmU84XFvmEsiMI+I3qNh0VYH8
Q+CnzdNaTVwrV5m/ecn8beHktfHnBErmr0TF+X0yN867QfR8eaJXqi5S/mcJZeKw3xiEXqWi
aGZ4WEbF86KQJ6EPqo50iEmWOCb5nKT6+TpUHx7fL6Z6f26A2c8DzH7ul8egMuMe7nwLM2k+
mMMzjuFt3si1CZszEXsOyX4OyX4OyX4OyX4OyX4OyX4OyX6+I7sEacn7bCVG+5DdMt2N7NYN
OJDdMp8ge26ZO2Yo8d9/L0O76kD+ZfDy6GnRghfNFfHjK95WLt8XTlwbf6SgEP9G1KBfjHjj
DdBrPmcrNNwLofOi/lpM5rDjGDjPtppn+Qwd95QJlZ48f7gSOcQpSxynfEHC/mIl2EcVpzz3
SQLCvwgQ/oWX8HnClfGYkmyTSmXcHaMS5UX893kT1yZszkTvBST+BST+BST+BST+BST+BST+
BST+RU98kKo8YG5YqrJluiPxA1OVLfMJ4g8i18jJ1si1/Rkgcm3mutFd4P8dSlyTIO6Y+O9H
YO/dohx8iePAtcXOyy5z6PLg0Vjz1lR66Ew6f5Y4vQlCV68/FyhubTScjFtb4932A2lri59C
c2Fv+rC1NS/e4SH0WWsi3WWtjUYOs9Z+6ogHUWurHMYXUIaXhBV4PpFnaqyecdLaCru9JJLW
qEGjpDVi0DhpjRg0TlojBw2T1ohB46Q16sBHSWvkIMqbru2rD6/21cfCSWuHbe026uvygtlj
BRxRwhEVHFHDEQ0c0cIRZ3DE+S5pbYDmH2n4XW6Ln0jd/8gPk9ZyvnxbL0vbvOyOMXXYbxRd
Pa1YIcN/vVarpNz+TT2Spp7xZkuHJY5oxu2NIZtxV2Qz7mqlZtzg+H64Gfe9uKCJdhXQRLvy
u7WVJVl/a+ufr8m5NB915tdD+5g3ZW3C5swafgV7aFewh3YFe2hXsId2BXtoV7CHdgV7aFe9
afbe8ihljRjt1UM7PN2xh2bbgEsP7fB8o4cmJctFZj94ouEQR8D7d9XoLu+/nzKn57KfXrW7
9D+9pP+5cMra+HMHJf0Pogr8pFuNM2iQdIXnKbC0TarmK8pdcocdR2HSVheirWd4ooJO+PGk
VFC1wCEGWOIY4GtSp9cr6TSuGODhKgOmXgcw9drzbs6k/65XMrFJtfmIMe13N+fnvClrEzZn
wu0aMvUaMvUaMvUaMvUaMvUaMvUaMvW6ZyoIAx5QLSwM2DLdkamBYcCW+QRTuWUuAbZIYnEH
5aO7zslq7Se308v3hmuW+MB1O3rZlLUxoym4fhJ1IQq4GqfSEOwKDydoyzYRXznBUjjsNwbA
ZlWZlGW4XzPZKpUcqV/3a4NDXrDEecE3JGRvVoJsXHnBB5cbiPYmQLQ3h0Sba56MQtaEkP2z
vVIuNjrvG69ikwmv4OCugM8WsjZlcybybiBpbyBpbyBpbyBpbyBpbyBpbyBpb3rSguDgAevC
goMt0x1JGxgcbJlPkFZY5hKmiyQ591Ah6a54soD74e60DsQ6uCKXeSGXLRuyRpCbQO7XqOHr
jQu5xjk1tJsvHyRRqFK17dfyZA77jUG7LE3apGzCuZvXotBH88Mgt3LhkC4scbrwLene23UC
JIbHF6l7+3UHAL4NyI249cuNSFXWP1VLyXSTiP73O2wjvR5u2xX32ULWpmzOJOEtBPAtBPAt
BPAtBPAtBPAtBPAtBPBtD2CQMjxAYFjKsGW6I4ADU4Yt8wkAZ5a5BPwiSdeFFaW79L+fYE4e
taMATwtiWxBXEqdeJE6XDVkjgE6RmBG1I1ISGyd3Z+M0SVd4BpYopRRf6yQd9huDjYtt1W7S
8LtrszKT7J+R8X75cMghljiH+I4k8t1KreG4cog9TgCw8l1As/jO6/YHxeVOyux/IhUbaXSL
k43O/bCczpqxNmVzJh/vIJbvIJbvIJbvIJbvIJbvIJbvIJbveiyDROIBGMMSiS3THbEcmEhs
mU9g2TaXsGEkAbzutaUrAn8bIdOTeE8r47YyrnzmXnzmy2asEZin+JwS1SR2Phtn2XC0WOPp
U3VS1/prxZTDjmOAtFRNvT0zoZBu65xz/e9Ber+iOKQWS5xafE+K+n4lUceVWjzlTABa3wfQ
+t7vB3B/FmL3AziZGbcVq4x7qZrPmq82ZXOmM++hqu+hqu+hqu+hqu+hqu+hqu+hqu97VYPk
4oEsw5KLLdMdVR2YXGyZT6haWeYSdowkn3dCfekKAVny/RB5WiK/JXJ1tvBytlg2X41QP+Vs
TtSXX+Ns43Qb4JYrgJtzmSXd4161w45jADdL26xNZvgRXpJnlaz+YXLvVxmHfGOJ840fSHs/
rGTvuPKNg04JQPhDAMIf/BCujZ/3ccU3WaaNR7mK1OsxFN2fi9kC1qZszqTpA4T4A4T4A4T4
A4T4A4T4A4T4A4T4Qw9xEHQ8wGhY0LFluiPEA4OOLfMJiGvLXEKZkaT4hhSbriqQfwj8uHla
q4lr5UrzzIvm2bIBa8QHBYrmgqg4v4/mxnk3jK6XN3qd8CLpeJM77DcGoudbAqvwR7e1vNT8
5PNhzXFIQpY4CfmRhPrjSlCPKwl5nnMDxP4YIPZHvwdyCNa3zZXYCseIRGYb5Sn2bNZ8tSmb
Mw37CMX+CMX+CMX+CMX+CMX+CMX+CMX+2IsdRCIP1BoWiWyZ7ij2wEhky3xC7LllLqHQSGJ+
Z6k6XXkg/zT4cfS0aKGL5mp46WV4uWy+GvGJgjJ8RtSgX2x44w3QY54lf1Etlmu4J22TsuzP
YqrEYccxaJ5VvOZihqeGyCypmuIE+kOVSDkEJyscnPxEyv5pHdkPj+8YZN+fJED8pwDiP3kS
X/VPKFGMbbhmJvHz3Iv4ctZ8tSmbM9H7BIn/BIn/BIn/BIn/BIn/BIn/BIn/tCO+AhHK+8wl
RvsQ3zLdjfjWDTgQ3zKfIP4gX42cbM1X25+B8tXmrRvdBf7nf5D5agpkGxP//QjsvVuUgy+R
yFdb6rzskoaeDx6NNV8tzw+dSdfPEqc3QfDq9ecC5auNhtP5aiu8234iX23pU2gu7I2Rr7bi
xTs8hD5fLevz1UYjR/lqP3TEw3y1NQ7jCyjDS8IKPJ+gs68t7qtnnK+2wm6fiXw1atAoX40Y
NM5XIwaN89XIQcN8NWLQOF+NOvBRvho5iPKma/tKebWv1LL5akQzjWpfHR71dXnBxLErOOIa
jriBI27hiDs44h6OeIAjHnf5agM0/0jD73lb/LLU/Y/8IF/N6K4teB9tsl0L+fUsYMUcdhxD
W08122POgrt6Mi/qSh1LU894s7FhiSOacXtjyGbcC9mMe5m7GcfpZtzg+H64Gfe9uKCJ9tK/
KO8mmjl3r4mWypSJ0XN+WSKl7h/0m4uNVpnxoN/E74tyNWvC2pTNmVX8BXbRXmAX7QV20V5g
F+0FdtFeYBftBXbRXnrV7L3pUcIaMdqri3Z4umMXzbYBly7a4flmFy2X2/e6/eCJlkMkke5d
3egu8P8qfvDQHFsFp1ftbH3tZX29bMIa8cmDsr4iqsBPytU4gwZKd0FnfDmUFqJOqw4CqcOO
Y0CpFoUSwSbNEtaI5rhMul8IHMJ/FQ7/fSVx+roSTuMK/x2uMlDqa4BSXz2VyjKW9EpVfPMd
WfGtVJ77xVHoWRPWpmzOhNsrZOorZOorZOorZOorZOorZOorZOprz1QQBDygWlgQsGW6I1MD
g4At8wmmcstcAmyRROIOKkh3qZMF209up5fvD9fcC675sglrBKMpuGqiLkQBV+NUUoJNFxNs
npRN0n2vyB32GwNgi2K74uFdVcaqVG/fksdJ2P3a4BAVrHBU8Btp2beV7nqMKyr44HID1L4F
3L/4duj+RTJhTWV5f/8i43qT9M8UUJvtWniJNp83YG3C5kzjvUHRvkHRvkHRvkHRvkHRvkHR
vkHRvvWiBZnBA9WFZQZbpjuKNjAz2DKfEK2wzCVIF0lo7qE60l3wf2/5mZ6ee1oHah1cjVt4
GbdYOGBtLG7KuDlRKeIyrnFOe+ymyfLYrYXMxVfAmhIO+40Bu0zUjWqKcO2WohbsWBu2B8qF
Q7CwwsHC7yR739cJWBseX6Ts7dcd+Pc9IGDNnLsfsKaTLSeGAM6kEMZTtdgm237w75+qxXjq
JeBi3oS1CZszTfgOBfwOBfwOBfwOBfwOBfwOBfwOBfzeCxhEDA8UGBYxbJnuKODAiGHLfELA
mWUuIb9IonVhSemu/e9EIPKoHQl4WhDbgriauPQycblwwtpY6JSJC6J2RGpi4+QaOOYr3GAr
WdWwrl+YOew4Bh2niarz8KdgMZa1NT+yO2ydC4hDDLHCMcQfpJI/VmoOxxVD7HECAJc/AtrF
H14/d+ciNbScbEViPNFKbJhfwlo5b8LahM2ZfPyAWP6AWP6AWP6AWP6AWP6AWP6AWP7osQzi
iAdgDIsjtkx3xHJgHLFlPoFl21zChpGk77pXlq4E/O2ETI/hPa2M28q48rny4nO1cMLaGPMU
n0uimsTOZ+MsG47OVnB0qYum7N5c0mHHMTia1aIpZDXD86eKPKnyfw/S+zXFIbVY4dTiT1LU
nyuJOq7U4ilnAtD6M4DWn35PktK6j3fIsmwjtTBy1njil7NWzZuzNmFzpjY/oa0/oa0/oa0/
oa0/oa0/oa0/oa0/e1uD9OKBL8PSiy3THW0dmF5smU/YWlnmEoKMJKN3Qo3pigFZ9v0oeVoi
vyVy1Xbtpe164Zy1sf0pbVdEffk12jZOt8FutTy706aUTf61csphvzGouynyqmXB6G6yXP7T
5t4vMQ4BxwoGHDcJhW/j/10W33EFHAedErvCtys6WeF7cx1C1jKZ9knHSb5JzYw15pnYUM+b
sTZhcwZLmwQh/M8IO8K3IwDCtyMAwr9GWBG+HQEQ/udI7Qj/GvGNcBB2PIBoWNixZbojwgPD
ji3zCYRry1xCmJEk+YbUmq4okH8H/Kh5WquJa+XK8saL5c3CGWvjDwkUy2ui4vw+lhvn3fB5
vkJbXFdF06ivNdQOO44B6CxtmirX4W3xot0uvz4RfVh3HAKRFQxEbhhpdbaS1eMKRJ7n3AC0
swC0M7/WeW7clZIJsclzbbbOhV8IQzNvztqEzZmOZVDtDKqdQbUzqHYG1c6g2hlUO+vVDpKR
B3INS0a2THdUe2AysmU+ofbcMpeQaCRpv7NUna48kH8a/Eh6WrTQRXN1fOvl+HbhnLXxpwrK
8Q1Rg36x4403QA96zlYAPc+ytKm/FjN32HEUoK+VqvMmGPRKc9GUJ88fLEQOAcoKBig3KQn7
dCXYxxWgPPNJAsJPA4Sfeglfqv7x0Ox/mZB7P9NMNjr1u/O8nTdnbcLmTPSmkPgpJH4KiZ9C
4qeQ+CkkfgqJn/bEB1HKA+aGRSlbpjsSPzBK2TKfIP4wZ42abM9Z28+IBTlr8xaO7gr/72DO
Gsg4Jv77Edh7tygHXyKRs7bUefmbONTwg0djy1njaXroTDp/lji9CUJXrz8XMGdtOJzOWVvh
3fYTOWtLn0JzYW+MnLUVL97hIfQ5a9ul2eWsDUeOctZ+6IiHOWtrHMYXUIaXhBV4HoFn3Rb3
1TPKWVtjt3ycs0YOGuasUYNGOWvUoFHOGj3oAg8a5ayRBz7MWaMHUd50bV+debWvzhbOWRs3
06j21eFRX5cXTB57gSNe4Yg3OOIdjviAIz7RiCaBI1ifs7aP5p9o+DXbzW2Ltvsf+WHOGl/j
MRBKcsG/nKYThx1H0dbL2ibf/g0J/p6+qZhS4kj6esbbTSfDIjfux+2PIftxguzHiXX6ccPj
+9l+3N/FBX00EdBHE363tybb17b7ppwlmzSTxjfl2zXxaqOdzRu0NmFzZhkXsI0mYBtNwDaa
gG00AdtoArbRBGyjiR1r9t/zKGiNGO3TRrNMd2ujWTfg0EazzDfaaCrPpBL2gx/3HIj//hM9
h++y0V3f3x80yUNz6xWcXrU79s+9sH++cNDa+KMHhf0zogr8JF2NM2iodIWHKmyv+VaWX4vB
HPYbA0qrrCn1DA/ubYqSyWP5rpmsBA4xwBrGADcZidNsJZxGFQM8WmWg1CxAqZmfUnWqjGfy
JpucZcavsETml7N2Pm/O2oTNmW7LoFIzqNQMKjWDSs2gUjOo1AwqNeuVCuKAB1ILiwO2THdU
amAcsGU+oVRumUt4LY5g3GH96C50slz7we308v3dOr6SbSXsYuGctbGiKbeeE3UhCrcap9IA
7AqPJ2BpIbLq6+dPOnXYcQyCFSUrqzpcsEnDNZNHKtj94uAQGqxhaHAjScrKlSgbVWjw4eUG
ppUBppV+ppWJ+WCBdJPrvScLKOll2ot5k9YmbM5UnoSmldC0EppWQtNKaFoJTSuhaWVvWpAd
PHBdWHawZbqjaQOzgy3zCdMKy1wCdXGE5x4sJN0VTxZwP92d1oFYB1flXnop93LhpLXDlWY4
avh641KucU4N7q7wa/+mUc33V8/cYb8xaJcV21XWM9xEUNX59rUfO3f3y4VDwLCGAcONIt2r
VnJvVAHDDusOAKwCAKz8fqTPDQDrJNvwrAcw22Ta79aDy3mD1iZsziShggBWEMAKAlhBACsI
YAUBrCCAVQ9gEDU8QGBY1LBluiOAA6OGLfMJAGeWuQT84ojYxRWlu/TJku4nwNOC2BbElcRX
XiS+WjhobQx0isSXRO2IlMTGye1tLNjyKcSyqVJWfK2TcNhvFDbWuRRCzBG0VsnqWG9mQAXE
IY5YwzjiRpNI1nMjWdBIjiqO2OcEAC3r/oV7a9mcu6dlLkQiR7nEjCmd9zdBZNlGaWbeBJH6
NYyv5s1am7A5U5AaellDL2voZQ29rKGXNfSyhl7WvZdBMPHAjGHBxJbpjl4ODCa2zCe8bJtL
8DCOHF6P4tJVge3wg4fv6MTTyjitjKugr70Efb1w1trY85Sgr4hqErugjbNsUFqukVmseK06
XWUOO47B0m3a8HSGZ8q2smLH8kjZyRXFIbtYw+ziJidJna/Ud44qu3jSmQC2zgM60fmhTnTK
0jxPRynGCd++jp2txSZL+xRjJjaetL6eN2ptwuZMbOaQ1jmkdQ5pnUNa55DWOaR1Dmmd97QG
McYDXobFGFumO9I6MMbYMp+gtbLMJQAZR1jvlCLTVYO/rZTpqb2nJfJcIldsj693Wym8WThq
bUx/CtvXRH35Ndg2Trehbr2CupumTtru13jSYccxqJvVRVrK8JuZs+2fDMX+YXbvFxmHpGMN
k46bgvR3sZK/o0o6DjslAOJFAMQLz6dR5En/NIqEbRRj5tMoPH/ndzNv2tqEzZkyLaDDC+jw
Ajq8gA4voMML6PACOrzoHQ4ijwcWDYs8tkx3dHhg5LFlPuFwbZlLIDOOPN+gYtNVBfIPgZ82
T2s1ca1cZX7rJfPbhdPWDtej4ajh6/19MjfOe0/0LFme6HWWFN3t18phtzEAPc3rJgm/+3q7
3Lk++XxUcxxSkTVORS5JqJcrQT2qVOSZzg0Qexkg9tLvJu6cSSNpTW1VxM2kNe53E/ftvElr
EzZnGraEYi+h2Eso9hKKvYRiL6HYSyj2shc7yEceqDUsH9ky3VHsgfnIlvmE2HPLXEKhcWT+
zlN1uvJA/mnw4+hp0UIXzdXwd16Gv1s4aW38iYIy/C1Rg36x4Y03gIH5dIWH37Gq4t0N49ph
vzFonrWK8Sa83c7rTJfpifMH65BDgrLGCcoV6fpqJddHlaA890kCwK8CgF95AZ9r1f9KM1XJ
xrjpXGxUqrx8fzdvzNqEzZniraDvK+j7Cvq+gr6voO8r6PsK+r7qfQ+SlAfGDUtStkx39H1g
krJlPuH7QcwaOdkas7Y/A8SszVw2uuv7z/8gY9Y0iDgm/vsRwHu3KAdf4jhmbbHzsgscqg8e
jTVmTahDZ9L5g8TpTRC6ev25QDFro+FkzNoa77YfiFlb/BSaC3vTx6ytefEOD6GPWfsOqCVH
DmPWfuqIBzFrqxzGF1CGl4QVeD55Z19b3FfPOGZthd3WRMwaNWgUs0YMGsesEYPGMWvkoGHM
GjFoHLNGHfgoZo0cRHnTtXd179W7ul84Zm3cSaN6V4dHfV1eMHhMwBEZHCHhCAVHaDgihyMK
OKLcxawN0Pwj3b7t4G3Rdv8jP4xZy8QK99Amlcy/DjF32G0MLb06a6u2Ce7o1aJi+dF8QW+8
1fJhgSM6cXtjyE5cQ3bimpU6cYPj++FO3Pfigg5aE9BBa/xuamWqv6lVaL5JjfCKdCOF31fk
9/NGrE3YnFnCG9hCa2ALrYEttAa20BrYQmtgC62BLbSmJ83eex5GrI1He7XQDk93bKHZNuDS
Qjs832ih5SlPuP3YiXZDHKnu31Wju7z/fsacnsZ+etXuzh8XB1u9elg4YW38qYNy/j1RBH5S
rcYZNEC6wqMUZCuSLvY3Txz2G4NIWZPWfIaAirJVjDXHRdK9SpA7xP/mOP63JW3azm3TlLTp
8PiisGm/ygCpbf/qvJFqzt1D6tYIWoyVmvP+e17Fsk0qjUcgbJQfUh/mTVibsDmTbS1EaguR
2kKkthCpLURqC5HaQqS2O6TmIAd4X2rEaB+kWqa7IdW6AQekWuaPkcotU8dcI/57DFzrrvP/
qvTgMbq57fTyJ7D10YutjwsHrB0uXsNRw9cbBVuNU2n4dYXEiVSKuv7qxOXMYb8x+LVKKtnK
YL4KqbK0PlK+7pcGh6TgHCcFn5GOPVunxzo8vrgc2y83AO1ZQNf1zO++xVyJ/r5FyTc6y40b
F7XnowQe541Xm7A5k3hnELRnELRnELRnELRnELRnELRnELRnPWhBZPBAdWGRwZbpjqANjAy2
zB+DVlimEqKLJDL3UB3pLvi/fYjp2bmndaDWwZW444vfVtOeFk5XG4ObIu4jUSjiIq5xTnvr
SrbGA7gSrr5+EJSnDvuNwbpKSqbDrcvaqihrcezY3a8WDqHCOQ4VPifVe76SeuMKFcbrDvh7
HsDfc7/f5bO0b+fmf55oK41uLvf71c7TvNFqEzZncvAc4vcc4vcc4vcc4vcc4vcc4vcc4ve8
xy/IFh4IMCxb2DLdEb+B2cKW+WP8ZpapBPoiidSF5aS77sl67qe/04LYFsSVw89eHH5eOFnt
cHEajhq+3kg5bJxcw8V8DReXRVV1TWDusOMYYMzyqqjz8JsYmCjEtoD/MzLeryAO+cM5zh++
IIl8sRKR48of9jgBwMoXAVa+8GsV//mIuQt/SPMtiYxcNe2ZQ/w8b67ahM2ZfLyAWL6AWL6A
WL6AWL6AWL6AWL6AWL7osQxyiAdiDMshtkx3xHJgDrFl/hjLtqmEDSNJ3XUvLF0FIEu8HxJP
K+O0Mq58fvHi88vCsWpjzFN8popJ7Hw2zrLh6Gx5Rzd1xfnXD41z4bDfKBhdVG3WqvCbKbTI
iqN54NTUiuKQVJzjpOJLktOXK3E6rqTiKWcCuPoywNWXns+GlUaaAxebXGvz2bA594L1y7yp
ahM2Z1LzEsL6EsL6EsL6EsL6EsL6EsL6EsL6soc1CCwe6DIssNgy3RHWgYHFlvljWCvLVIKP
kaTyTigxXS0gq76fI09L5LdErtR+9aL268KhamP4U9R+IcrLr6G2cboNc6u/9k0XM3fNWFZ/
ZarlmcN+YzB3mya5FDPcv1wcUaRacIlxiDTOcaTxFWnvq5XsHVekcdApAQi/CkD4lRfCFeuD
jdn/hEo2MhM7hScb7XcryOu8kWoTNmey9Aoi/Aoi/Aoi/Aoi/Aoi/Aoi/Aoi/KpHOIg2Hkg0
LNrYMt0R4YHRxpb5Y4Rry1RCmJHE9obUmq4okH8H/Kh5WquJa+XK8jcvlr8tnKg2/pBAsfyV
KDi/j+XGead8vuC9JWlbqqb9WkPpsOMYgM5qUZWiDL+3RDZF1Z6IPqo7DvHHOY4/viatfr2S
1eOKP57n3AC0Xweg/doL7SLJ8/7Hi1m20ax/GEe2SRLhhfa3eVPVJmzOZOw1RPs1RPs1RPs1
RPs1RPs1RPs1RPt1j3aQgzyQa1gOsmW6I9oDc5At88dozy1TCYhGEu07S9HpqgP5l8FPpKdF
C100V8aPL3hbtXxfOFRt/KGCYvwbUYJ+MeONN0DvebWLKhbLeT6pW12pr8VUDjuOwfNCtZVi
wZxvZNrKE+YPliGHrOQcZyXfkKq/mVv1glZ9XFnJM58kwPubfnG8eW/O3eM9l4kQenRnDNei
/3nmlkCbxAA+32g/37/Pm6o2YXOmeG+g72+g72+g72+g72+g72+g72+g729634PU5AFyw1KT
LdMdfR+YmmyZP/b9IFSNnGsNVdufgULV5q0b3QX+J+qGDFXLQZox8d+PAN67RTn4EolQtaXO
yy5e6Pbg0VhD1ZQ4dCadP0ic3gShq9efCxSqNhpOh6qt8G77iVC1pU+hubA3Rqjaihfv8BD6
ULWc7ULVRiNHoWo/dMTDULU1DuPLJ8NLwuo7n3Szry3uo2ccqrbCbm+JUDVq0ChUjRg0DlUj
Bo1D1chBw1A1YtA4VI068FGoGjmI4qZr7+rDq3f1sXCo2mFau436urxgzFgDR7RwxBkccQ5H
XMARl3DEFRxxvQtVG6D5R7p92/97W7Td/8gPQ9XUCr9bYwmXJZNfB6kddhxDT4/JskgSHZ6r
pnRV6mPp6hnvNj2scUQ3bm8M2Y27I7txdyt9xz44vh/uxn0vLuii3QV8SX7nd2er2LuzlbFN
qrhxZ2ue+N3a+jFvsNqEzZll/A520e5gF+0OdtHuYBftDnbR7mAX7Q520e561uy96VGwGjHa
q4t2eLpjF822AZcu2uH5ZhdNZ1zbj51oOUSS496Vje76/vtVyfT89dOrdrf+p5f1PxcOVht/
8qCs/0EUgZ+Uq3EGDZTu7t/ky6G0rlnFv7J+89xhx3GgVDMhk/AbR1mTN+VxoXS/FDik/uY4
9fee1On93DrltE7jSv0drjJg6n3/6ryZas7dY2qabw8hHX3Zm27/8Pd3cwq+4VIYURRc+z0H
4XPebLUJmzPldg+deg+deg+deg+deg+deg+deg+det87FQQAD7AWFgBsme7o1MAAYMv8sVO5
ZSohtkiicAcFpLvS/6v4wWN0pNvp5XvLVSY+ct2OXjZbbexoSq6fRFmIQq7GqewJq9nyhG10
mbVfb3KWJA47joGwQjA5xy+f0jbTR5MNbKsNX6cWWXYwiMTsA4nZh7kxq0jMjg4wLs32Kw5Y
+9C/Tm/WmnP3WCvSLNdifA9jtn29u8d7CbbJjDsYmU59UNvV8Nny1aZszmTeA0TtA0TtA0Tt
A0TtA0TtA0TtA0Ttww61g8sABaxRw31Ya5vv5lr7Fhxga9vAWLbCNndsO2pAVLjrrvv/ut8z
0EfrxrzTUhxaClfyMi/ysmWz1giAE+T9GjV6wXGZ1zitBn5XCBbOiqJOi259mMOOY8AvY01Z
ifC4tbqoZZ0cu34HFcMhZHgwiGTwI8ngx3XuOBgdYKQM7pceePgx4G6ER6+7EbbW0DsNC7nl
izAfdquE1096ugI/W+TalM2ZQnyEHn6EHn6EHn6EHn6EHn6EHn6EHn40PAwCh4cgDEscts13
9XBg5rBtA2MPZ7a5FAIjiduFdaUrAN/f1tGH7arB05qANXEVcuol5HTZ+DXC65SQGVVGIhWy
cX57Kudr5BK3IhfJ99sqddhzDFZOk0bNQOW0LevsaOLXfGuIQ0TxYBBp5ifSzE9rmTmukGKP
cwDw/BSA5yfP512JxHjeVb7JRG7cIZFzv2ZyOmsE25TNmZx8gnh+gnh+gnh+gnh+gnh+gnh+
gnh+MvAMAouHegxLLLbNd8VzYGaxbQNjPFvnUlCMJKXXvcB0lYCu9p5iPC2O6+K4cpp7cZov
G8dG4J7idEoVltg5bZxow9Vr5BrrrJJF1S0Zd9hzDK5mpZSinOEWDN1mqj6aSLbJdcUh4ngw
iCT2M0ns57WIHVfI8ZSTAaz9HGDt50PWzjVPRvdtCJGx3to822Q6NaydpdrL2nzWVLYpmzP1
+Qyt/Qyt/Qyt/Qyt/Qyt/Qyt/Qyt/WxYG+QdD7EZFnhsm+9q7cDIY9sGxtZWtrkUJyPJ9p1Q
abqSQNd/T1eeVsl7lVz1Lbz0LZZNaCM+C1D65lSp+TX6Ns64wfBVHi/BWt2Kbu2Ew55jYLhq
Zdam4Qpvm6SujvWnfBMKjUNE8mAQyfEXkuMva3E8rpDkoLMCXP4S4PIXrx44U4nauVwysUnN
+0cSv0fCdn8xZstpm7I5E6ovkOUvkOUvkOUvkOUvkOUvkOUvkOUvBstBWvLQpWFxybb5riwP
DEy2bWDMcm2bS4EzkkDgkIrTlQb6D4KnPE/LNX25XKGeeUE9WzazjfjYQEFdUMXn90HdOPWG
2NcIbVNtK5Pvayhz2HMMYmct50XThpO9SHkmjyboYcba4xCxPBhE2v2VtPvrWnaPK2R5ntMD
EP8agPhXL8Rzpvq7wHmab3LjLnC+0Sr3Unw2a3DblM2Zrn2Fin+Fin+Fin+Fin+Fin+Fin+F
in81FA/iloeMDctbts13VXxg4rJtA2PF57a5FEsjCRKepfZ0RYL+G+Hp09O6zbBurq6XXq6X
y4a4EZ8yKNdnVDn6xa433gMG8Ff4cSZjZZ39Bb502HMMwBdJ2W4/0oX6vqyq4p++LwbWIod4
5sEg0vlvpPPf5nZ+esD5cQU0z3yeAPjf+tXxBr85dw/8W2xpMRJ/Jo3ffXLFNjzJDfEL4fUQ
6u4PzWxRblM2Zxr4DYr/DYr/DYr/DYr/DYr/DYr/DYr/zRA/yGoekjcsrNk231X8gXHNtg2M
xT/Ic6MnWwPdBlNQotu85aO7zv9E8JCJboNjoyQeSZjyQsty+DUSoW5LnZpdvNH74cOxpboJ
lh48m+6fLU7vhBkWsD8hKNptPJ7OdlvhTfcT2W6Ln0VzZW+McLc1L+LhMezS3bZLvEt3Gw8d
xbv91DEP893WOI4vtAwvCyv6PILWui3uS2iU77bGbt/H+W7koGG+GzVolO9GDRrlu9GDLvCg
Ub4beeDDfDd6EGlQ176W8uprqWUD3oguG9XXOjzq6/qCkWd3cMQ9HPEARzzCEU9wxDMc8QJH
vO4C3oaI/pFO4Pt/1XY/Hn/sBxFvPElXuQc3ETzrjlI57DmGhh8rS8XLGeI0Ci3a4mieRmy+
4dSw0FGtur1BZKvug2zVfaz1lfzgAH+4Vfe9vqDF9hHwnfqH33fqiejjM7gQm1Qoo8OmmN8P
1tSsMW9TNmcW8w/YYfuAHbYP2GH7gB22D9hh+4Adtg/YYfswdLP3pkc5b9Rwvw7b4fmuHTbb
Fpw6bIc30HfYtqNYBo6eakNEki/f1Y7uIt99nzI9GP70wv3wr73wr5dNfCM+ilD4V1Q9+EnK
GifRQKr4S8V0QaSmeS6/nxmsHfYcBVILmcqiCkcq33qyZMeF1EE9cMgkHgwitfpJavVzrS+W
40olHi40YOtnwDfDn4e+GU7TfEuQ0Q+6tpDon2rGUrXJsz6feAsNkXnBVc+a+zZlcyblPiFc
PyFcPyFcPyFcPyFcPyFcPyFcPw24goDiId3CEopt813hGphRbNvACK7DgBAQ10sNiMFv3fW+
++pkenLvaQUGc10pm3tRNl82Ao6ANUVZTVWIKChrnE3DtCv8lEq2XKtvOOQOO46CtE2q6qoJ
v9Nye/7ao3m2r70+OAQaDwZRtG0TirbG/7swbeOKND644nbjbpdrsnH35jrc/ciT7UvfPbQg
55tc9g8TYxvtmXqRz5sCN2FzBvraBBH3zwg7cbcjAHG3IwBxv0ZYibsdAYj750jtxP0a8Ze4
INt4iLywcGPbfFfiBsYb2zYwIu4w8wME/FIDogJed93TldxTeqeloJfCFb2FF3qLhUPgxgSn
0JtTNSMu9BqntdcvS5bXr5ZZpr+WhyUO+40Cvzwrs2SGfm7CMrGtukeu3/2KwVyykBnMQm4Z
yWC20v0IwwOMlMH90gMPs+m3KuzNdQiBy1h/q4LYvtWV5MatCls/eHG4mDcEbsLmTCAyyGEG
OcwghxnkMIMcZpDDDHKY9RxmIBR5AEJiuBeHLfMdOWzdgguHLRsYcTizTSUMSAyI04Dd9f/3
yzvysB0xeFoTtCauQC69gFwunAE35joF5IKqIpEC2Ti/hpTXuEG3qoSu626lmMOeo7ByLhUX
OtjKsigzzv8ZKg+KiEtwMoPByW1Kmjldy8xxBSd7nAOA5zQAz6kfnlnePwBXKLXFiTSegCu1
XwhcOW8I3ITNmZxMIZ5TiOcU4jmFeE4hnlOI5xTiOTXwDBKUh3wMTFC2zHfFc2iCsmUDIzxb
p1JQjCQs2L2+dIWALvaeYjwtjuviuHK68uJ0tXAG3Bj3FKdLqq7EzmnjRBuuFsu7mmesLdtu
xVKHHUfB6lJlTNbBrBZp3aqjv/8CVhWXkGUGQ5ZbTvqar3RrxvAAf42v+5MBoM0D7trgfndt
iFRlvbTzZJMZd21spZ34PaW2mjcCbsLmTHtyKG0Opc2htDmUNofS5lDaHEqbG9IGcctDawbG
LVvmu0o7NG7ZsoGRtJVtKoXJSAKFJ1SariTsvpMMSBY+rZL/Krnau/ayd71wAtz4kwBl74qq
NL/G3sYZNxC+uxdZLNfcLpgQ8ru5zR32HIPCc6719nQF3wdSl9X21f/DCh8UGpdAZgYDmVtB
clzMzXFxgONxBTIHnRXgctGvhbfLzbl7LucyEV0yxP4vBlPeP0w2zfSGJ3vZzInfLwbreUPg
JmzOpKqAMBcQ5gLCXECYCwhzAWEuIMyFAXOQzTykaWA2s2W+K8xDs5ktGxjBXNumUuSMJHQ4
pOZ0xeG/Shx+Ra72PC3X9OVypXrjRfVm4Qy48QcHiuo1VXt+H9WNU9+bPV3hhpSiVhn/Jptw
2HEMZGfNthi34Y1z1jY1a//BG1Jg6XGJb2YwvrnNSLxna92rEld88zynByg+C7iNJTt0G8t2
JaUeKT7PuOgf+5Hkm1z3N4FvSc+4F+KbeTPgJmzOZG0GEZ9BxGcQ8RlEfAYRn0HEZxDxmYF4
kOQ8ZGxgkrNlviviQ5OcLRsYIT63TaVUGkky8Sy1pysSu+9bAyKKT+s2x7q5sr71Yn27cATc
+EMGxfqGqka/mPXGe8Dw/Qo3xjS51pXsFjNz2HEUvk+Ltg6/3byWRV6cOvKWUuSS9Mxg0nMr
SebLtZgfV9LzzOcJeF8GeF963ba+FX7/m888kxvFjSegcO73dOp23vy3CZsz/Suh9iXUvoTa
l1D7EmpfQu1LqH1paB8kPg+9G5j4bJnvqv3QxGfLBkbaH8a/kXPt8W/7U1D827y1o7vI//wP
Ov6NoSBmYsARKHy3LIdfIxH/ttSp+Zt+1KrDh2ONfxPZwbPp/rni9E6YYQH7EwLj30bj6fi3
Fd50PxH/tvhZNFf2xoh/W/MiHh5DH/+Wij7+bTR0FP/2U8c8jH9b4zi+zDK8LKzm88lh+9ri
PoTG8W8r7FYR8W/UoFH8GzFoHP9GDBrHv5GDhvFvxKBx/Bt14KP4N3IQSVDXntaZV0/rbOH4
t3GHjeppHR71dX3BQLQPOOITjWgTOILBESkcweEIAUdkffzbANE/0QVs1bb8pcLjj/0w/i2V
Kzxdgkkl2u+2iHTYcxTdvkxlsg5/DDFLdJqLY4l/23vDyWGho/p0e4PIPp0m+3R6rT7d4AB/
tk/3d31Bf00H9Ne03/fpjKWp0WHjG5H0z4XIN0r7ddjO5s1/m7A5s5pr2GHTsMOmYYdNww6b
hh02DTtsGnbYtMGbvXc9zH8jhvt12A7Pd+2w2bbg1GE7vAGjw8a2F61S4PipTkQcQfTf5aO7
znefPQMC5E8v3Mv/517+P184AW78aYTy/xlVEX5Ss8ZJNJyqV3hesFDbl9CthnLYcQxMbbIt
roORmkrO0uMi6qAUuEQVMxhV3OakVfO1HsMQVVTxaKEBWvOARyzkfo9YkDztbwLlnG0k08aT
gLX0Muv5vNFvEzZnKi6HZs2hWXNo1hyaNYdmzaFZc2jW3DAryCwemi0ws9gy39WsoZnFlg0Q
ZuW2yRTd4gjvHZaR7nrf/WA3IMX3tAJsUo7x+Kq2lbOLhcPfxqamFHtO1YgoFGuczZ6znC3P
2ZYrJr/hoB12HANnc60aNkPTVSdJ1egjFe2gPrjkGjOYa9wWJG2LtdqwUeUaH15xYNwioDFb
eN34mPO8/5nT/7YI2MjtuvS3PjLhh9yLecPfJmzOZF8BkVtA5BYQuQVEbgGRW0DkFhC5hYFc
kG88RF5gvrFlvityQ/ONLRsgkDtM+0D5vsSAqIjXXfm7NkVA0O9pKQ4shSt7L73Ye7lw/Nvh
qjMcNXrBcbHXOK2Gf/kaoRa5KPX303dzhz3HAGDVVrUKB7CukkoVx+7fQcVwSUFmOAW5JCFc
rgXhqFKQHZYeiLgMEHF58FYFvj3AdHSrAhfGA7yU3iTbF7QTcbJJM78Mi8t5A+AmbM5EYglJ
XEISl5DEJSRxCUlcQhKXkMSlQWKQhzwkYWAesmW+K4lD85AtGyBIPMzwQDHAxIA4HdjVALq8
e4LwtCZgTVyRfOWF5KuFI+DGZKeQfEnVkUiRbJxfQ8vZCloWVVl9xyWnicOeY9Byw2SSsvAE
uEb8SdD+V7S8X0NSl9TkFKcmVySbq5XYPDzA2NncnwPg5yrAz9UhP+eaJ2J804Tu9cyk2DDR
3zSxpU/ud6fv1bwJcBM2Z3qygnquoJ4rqOcK6rmCeq6gniuo56rXcwrikwd6JIZ76dky31HP
1i246NmyAULP1smEFIkBkUuxKwV0ufcj42lxnBfH1dPXXp6+XjgDbqx7ytNXVGWJ3dPGiTZg
rVaAdcLrtPiGNXPYcwywZm0pClXO8LCrVqZHfx8GLCsuIcspDlmuSWLXaxE7qpDlSScDWLsO
sHbtdfdGKhLeZ8BxueGSGRlwOfd7Su31vBlwEzZn6rOG1q6htWto7Rpau4bWrqG1a2jt2rA2
SFseWjMwbdky39XaoWnLlg0Q1la2yRQn44gUnlJquppA/wHwdOVplbxXyVXf42vfVhZvFk6B
G38WoPR9TdWaX6Nv44wbDM9XYHhZNqL5fqOlDnuOgeHb5dRFFazwLJFs+6fg31X4oM64ZDKn
OJO5ITnerMXxqDKZw84KcHkT4PLGz+VM9w+7ECrfSKXNbGbp1wO/mTcCbsLmTKk20OUNdHkD
Xd5AlzfQ5Q10eQNd3hguB9nMQ5cGZjNb5ru6PDSb2bIBwuXaNpkSZxy5w0E1pysO9J8ET3qe
lmv6crlK/dZL6rcLh8Adrk3DUaMX/Pukbpz6nuxihR8wslTVos67ReQOe46B7Cqpqhn65nnK
k3/n/m33wuOS35zi/OaWpHu7Ft2jym+e6fQAw7cBhm/9IiF0pnaGz6TYqt3sradSeRn+dt4E
uAmbM1XbQsO30PAtNHwLDd9Cw7fQ8C00fGsYHsQ4Dw0bGONsme9q+NAYZ8sGCMPntskUSuNI
Jp6n+HRVgv4j4anT07rNsG6uqr/zUv3dwhlw488YlOpvqXr0i1VvvAcM3q/y+0xe8qL7fWYq
HPYcA++ZyOs/D8QNBT7TvGqaYwl5XqQauaQ9pzjt+Yyk/tla1I8q7Xnu8wTMfxZg/jO/vn2u
jAf+Zekm08x44J/0u53mbt4YuAmbMxF8Bsl/Bsl/Bsl/Bsl/Bsl/Bsl/Bsl/ZpAfhD4PyRsY
+myZ70r+0NBnywYI8g+D4MjZ9iC4/SkgCG7m6tFd5n/+Bx0El6I4ZmLAEVB8tyyHX+M4CG6x
U7PLQTo/fDjWIDiVHDyb7h8uTu+EGRawPyEwCG40ngyCW+NN9wNBcMufRXNlb/oguFUv4uEx
9EFw3AiCGw0dBsH92DEPguBWOY4vtQwvC6v6fBLZvra4T6FxENwKuz0nguCoQaMgOGLQOAiO
GDQOgiMHDYPgiEHjIDjqwEdBcOQgE6GwdHaxWqMq7doHu/fqg90vnBs37spRfbDDo74uR5ik
puGIHI4o4IgSjqjgiBqOaOCIts+NG5j7RzqH59tqycVex2+NZ0yUKi3qoluFzGHPMXT8skZz
qWfIgcu4zI+m4ff3DfR9JnGjbm8Q2ai7IBt1F2s16gYH+MONuu/1BQ22i4AG24Vfg02K/kt1
nssN42aiRsqZV4ftft4YuAmbM4vzBeywXcAO2wXssF3ADtsF7LBdwA7bBeywXRi42XvTwxg4
Yrhfh+3wfNcOm20LTh22wxswOmzbq1pl4PCpNkQcefTfxaO7yncfPANy5E8v3Evz40Jhq10P
C6fAjT9bUJq/pwrCT9rUOIkGUld4XoPOK8G+3zrSYccxGLVQIs3bGYyqEimq4zLqoBq4hBan
OLT4ksTq5VpYjSu0eLjQQK2XAWq99HqkmRDGz7lSzjdK9BkZYpN5fi/8MG8Q3ITNmY67hGq9
hGq9hGq9hGq9hGq9hGq9hGq9NNQKwouHbAsML7bMd1VraHixZQNjtXLbXApvkUT4DqpId7nT
ddtTcacVmJRm/Ojl2MeFc+AOF7LhqNELjsKxxtk0QLvGkw/qotGp6tZFOew5BtGWrSr5DEFw
XGRJezSPPrAXCJeM4xRnHF+RtL1ai7ZxZRwfXHFg3KsA4175GlftGVfm6Z5xhZdxH+fNgZuw
OVN9V9C4V9C4V9C4V9C4V9C4V9C4V9C4V4ZxQdjxEHmBYceW+a7GDQ07tmxgbFxhm0sJL5Kk
30PlpLvu6UruSb3TUtBL4arecSGw1benhWPgxgan1PtIFY241Guc1p6/2RpPEahFxuouKzfV
DnuOgb9ClSoJv+lAsFzL8tj1O6gYLnnIKc5DviYZfL0Wg+PKQ8ZLDzx8HeDha687FZRIjGBk
sX2v51t5/AVxstm+aC8QP82bAjdhcyYRryGIryGIryGIryGIryGIryGIryGIrw0Qg2DkoQgD
g5Et811BHBqMbNnAGMTDGA8UBkwMiFOBXQWgi7snB09rAtbElcjPXkR+XjgE7nChGo4aveBI
iWycX8PKa/wkP+Fl/t0pzh12HAOVWam50jPc/CBUVZTJP4PlQRFxCU9OcXjyDanmm7XUHFd4
ssc5AHy+CeDzjd+Nvirp/cy13kum4Js0l156fp43BW7C5kxP3kA930A930A930A930A930A9
30A93xh6BhnKQz4GZihb5rvqOTRD2bKBsZ6tcykpRhIX7F5gukpAV3tPMp4Wx3VxXD394uXp
l4VD4Ma6pzxNFpbYPW2caAPWu9+f8cVg3fKy+X6SLU8cdhwDrJUstnU22NW5TsSWEP8cq/eL
CndJWeY4ZfmW9PXt3L5WtK+HB/hrfN2fDADt234JvKFtzt2DthDpn5+QDp9Tq7K8v3NDsC2G
mPmbulz5hU28zBsCN2FzJj5vIbVvIbVvIbVvIbVvIbVvIbVvIbVve2pzELg8sCYx3IvalvmO
1LZuwYXalg2Mqa1scwlNEgN+iya7orA9jMMvxJGVp1XyXyVXfL964ft14Qy48UcBCt8vVKn5
Nfg2znivcLlCe7tOWKO7O0E4c9hxDApnmjOZhSdKbN8sdXY8kRLhhcYlk5njTOY7EuR3KzW8
hwf4+0DenxUg87uAFvid3x0kXJp3kKRiI3Np3EGicz+Yv86bAjdhcyZV7yDM7yDM7yDM7yDM
7yDM7yDM7yDM7wyYg3TmoUwD05kt811hHprObNnAGObaNpciZySxwyE1pysOux5NQP7wabkC
lsuV6m9eVH9bOARu/MGBovorVXx+H9WNU2+YfdfAThczuxK8TLqQCJ467DgGs9csq9Lw2Oa2
yBrdnsQ+Kjwu+c0c5zffk3S/X4vuceU3z3N6gOHvAwx/72n4bM/wciO52DO8Xwrc27wpcBM2
Z6r2Hhr+Hhr+Hhr+Hhr+Hhr+Hhr+Hhr+3jA8SHIeIjYwydky39XwoUnOlg2MDZ/b5lIojSSZ
eJbi01UJ+o+Ep05P6zbDurmqfnzx2yrn+8IhcOPPGJTq36hy9ItVb7wHKN4v15Ivs5TXVbeY
3GHHMfBeZDpRRTjvs1bWx/qwvVlKkUvYM8dhzw+k8x/Wcn5cYc8znycA/ocA8D94gZ8lwuza
J0m6Edv1+St+tvWVn/jf5w2Bm7A508APUPwPUPwPUPwPUPwPUPwPUPwPUPwPhvhB7vOQvIG5
z5b5ruIPzX22bGAs/mEGHDnZngG3PwVlwM1bP7oL/c//oDPgOIpjJgYcgcR3y3L4NRIZcEud
ml0E0uPhw7FlwGVJevBsun+2OL0TZljA/oTADLjReDoDboU33U9kwC1+Fs2VvTEy4Na8iIfH
0GfAibzPgBsNHWXA/dQxDzPg1jiOL7QMLwsr+jzC2Lot7ktolAG3xm4fxxlw5KBhBhw1aJQB
Rw0aZcDRgy7woFEGHHngwww4ehBpUNe+1odXX+tj4VC3w+B2G/V1fcGYsws44hKOuIIjruGI
GzjiFo64gyPu+1C3AaJ/pBP4uC1/Ivf4Y9+lFhoNP73CIyaKhiX6+w+hcNhzDB2/sq5kwWe4
B7fiKjuaR0yY7zcxrHNUq25vENmqeyJbdU9rteoGB/jDrbrv9QUttqeAFtvTj94X+zFvCNyE
zZnF/Al22J5gh+0JdtieYIftCXbYnmCH7Ql22J4M3ey962EIHDHcr8N2eL5rh822BacO2+EN
GB02vr2iJTh8qg8RSRZ9Vz26y3z3yTMgQ/70wr30/+ml/8+FQ+DGn0Uo/X9QBeEnLWucxF6p
Kln+eQ11WWf8+22dOew4BqTqOkmbGX4oVhZ5UR3ND8XIauCSWMxxYvEzqdXnubWaHtBqXInF
w4UGbH3uX543W825e2xl22NMRg9akKk2HmnG+SYX5iPNWO6XkPE5bwrchM2ZkHuGbH2GbH2G
bH2GbH2GbH2GbH2GbH022Aqyi4duC8wutsx3ZWtodrFlA2O2cttcSm+RRPgOykh3vf9XpYcP
0pVxpxWYkmasEh/IbkcvmwI3ZjUF2U+qREQBWeNsUqJdru+qpOblN3+kw45jEG2VMC1kuGhV
Xhf50fyQyl4fXPKNOc43fiFp+7JWIzaufOODKw6M+xLQmn35yZ87dWV8thS4KZsz1fcCjfsC
jfsCjfsCjfsCjfsCjfsCjftiGBckHQ+RF5h0bJnvatzQpGPLBsbGFba5lPAiyfk9VE+6C3/X
pQgI/D0txYGlcFUv81IvWzYFjjA4od6vUaMXHJd6jdNq8Fcs/xgBlre1lEW3QMphzzH4t8zq
Vof7V2Z12ehj5++gYriEIXMchvxKOvh1LQfHFYaMlx6A+DUAxK9eIOaKpX0qsk43QnMzFZkz
Lw+zWUPgpmzOFOIr9PAr9PAr9PAr9PAr9PAr9PAr9PCr4WGQijwEYWAqsmW+q4dDU5EtGxh7
OLPNpRAYSRQwrCtdAaBru6cGT2sC1sRVyKmXkNNlQ+AIr1NCZlQZiVTIxvmlqLxcpzjjVZnq
bqG0w45jkDLjTVW24Y/cYlXKku379F+x8qCIuEQncxyd/Eai+W0tNMcVnexxDoCe3wL0/Ob3
Y3qpej3LdOsbnu/0nG4S4afndNYQuCmbMz35BvX8BvX8BvX8BvX8BvX8BvX8BvX8ZugZRCgP
+RgYoWyZ76rn0AhlywbGerbOpaQYSVywe4HpKgFd7T3JeFoc18Vx9TT38jRfNgSO0D3l6ZQq
LLF72jjRBqzV8rDW2zpXyW7FcocdxwDrstZlPoOrdaWP9p5i96LiErLMccjyO+nr97V8HVfI
8pSTAaD9HgDt90PQzjVPxBDaQvH+1uQ0ZRuppdGm1iz1gjafNQJuyuZMer5DaL9DaL9DaL9D
aL9DaL9DaL9DaL8b0AZpy0NpBqYtW+a7Qjs0bdmygTG0h0EbKFCYGPBbLNmVBLr+e6LytEre
q+RKb+FFb7FsBBzxQYCiN6dKza+ht3HGDYPnKzx+QqSZrLs8CZE47DkGhGeZqmaIgMuUTFT9
DyN8v84Il0hmgSOZP0iNf6yk8eEB/j6N92cFsPwjgOUffv1vlekdy7N8qyhptL+ZkF4qF7Pm
v03ZnOnUD6jyD6jyD6jyD6jyD6jyD6jyD6jyj17lAgQzD1hKDPdSuWW+o8qtW3BRuWUDY5Vr
21zCm8SAX+fNrjTQfxD84HlaroDlcnV65uX0bNn8N+JTA+V0QRWf3+d049T3YNdshYCIpmoV
79aQOew4Bq+zNCtTNUPXvMmTnP/LbfNDpcclvFng8OZPku6fa9E9rvDmeU4PMPxngOE/vQyf
prI3vJDphvPMQPwWcF6Iz2YNgJuyOZO1nxDxnxDxnxDxnxDxnxDxnxDxnxDxnwbiQYjzULGB
Ic6W+a6IDw1xtmxgjPjcNpdSaSSpxLPUnq5I0H8jPHl6WrcZ1s2V9dKL9XLZADjiQwbF+owq
R7+Y9cZ7wPA9X6MhX4hEqm41U4c9RwH8qpApb8OB3+o0V+UJ+IerkUvWs4BZz2cJJX3j/11Y
+nFlPc98nuzk3y7yZPLvzXUgP2MG+fNskyhtkD/TmRf55awJcFM2ZyD4LEHk/zPCTv7tCED+
7QhA/q8RVvJvRwDy/zlSO/m/RvwlP8h8Hpo3MPPZMt+V/KGZz5YNjMk/TIAjJ9sT4PanoAS4
eatHd5n/+R90ApxAWczEgCOg+G5ZDr9GIgFuqVPzNwDpzHI41gS4NDt4Nt0/XJzeCTMsYH9C
YALcaDydALfCm+4nEuAWP4vmyt4YCXBrXsTDY+gT4DIjAW40dJQA91PHPEyAW+M4vtAyvCys
6POJYvva4r6ExglwK+yWEQlw1KBRAhwxaJwARwwaJ8CRg4YJcMSgcQIcdeCjBDhyEGlQ18aW
8mpsqWUT4Ig2G9XYOjzq6/qCmWhPcMQzHPECR7zCEW9wxDsc8QFHfPYJcANE/0Qr8Ixty1+W
e/yxHybA6Wz5jl/dlmladgfJHXYcQ8MvLTKWz3AHLq9FeSwPIt57t/FhlaPadHuDyDZdSrbp
0rXadIMD/Nk23d/1Be21NKC9lno+ZFjsPWRYbzKjv/bnIcN+98WqWfPfpmzO/Gufwv5aCvtr
KeyvpbC/lsL+Wgr7aynsr6WGbfbe9TD/jRju1187PN+1v2bbglN/7fAGzP5atv3HwfFTbYg4
gui/y0d3ne8+eAYEyJ9euBf+tRf+9bIBcMRHEQr/iqoIP0lZ4yQaSF3hWQ2sypu6/WaBcNhz
FEoVUiYq/FvpQm7PZHVcTB2UA5e8YgHzis846VW+llejyiseLTSAKw+AK/eCq5a5Adc0kRu5
NcZfuG7/4ku/55npWRPgpmzOpByHcOUQrhzClUO4cghXDuHKIVy5AVcQXDyEW2BwsWW+K1xD
g4stGyDgym2TKb/FEeA7rCPdBU9Xbk/InVZgSpaxyr0omy8bAUfAmqKspmpEFJQ1zqZh2jWe
fZDrNtFVty6Zw55jMC2rtVZaB6O2KNKKHatpBwXCJd5YwHjjM0HiVqyF26jijQ+vOFCuCFCu
8Htogd4CZvfQApVvkkQYdz+mzA+5+bwRcBM2Z7JPQOQKiFwBkSsgcgVEroDIFRC5wkAuiDke
Ii8w5tgy3xW5oTHHlg0QyBW2yRTx4kj5PVhPugufLuWe1jstBb0UruwtvNhbLJwBN0Y4xd6c
qhpxsdc4rb1/8xUeJcDKROXy+90kHfYcg39blnA5wy+NmFZtdiy/NHItGS5hyAKGIZ9lJISz
tSAcVRiyw9IDEWcBIs78fg8kjMavSMVG5n3bl28SJrxEXMwbAjdhc6YRMyjiDIo4gyLOoIgz
KOIMijiDIs4MEYNQ5KEIA0ORLfNdRRwaimzZACHizDaZYmAcUcC4sHQVgC7unh48rQlYE1cj
l15GLhdOgRuLnTJyQdWRSI1snF8Dyyv8Lr9MMtnW3UIphx3HYGXG2qRteDCWRZWwovlnrDyo
IS7JyQImJ59JEs1yLTRHlZzscw6AnmWAnqVfP1nyrA+BE2zDty+sv2ki97zbt5w3BG7C5kxP
SqhnCfUsoZ4l1LOEepZQzxLqWRp6BhHKQz0GRihb5rvqOTRC2bIBQs/WyZQU48gL9qgwXSmg
y70nGU+L47o4rp6uvDxdLZwCN9Y95emSqiyxe9o40Qas5QpdaKnrsvqWtXbYcxSy5lLVVREs
a1Vlucz+PVkPyopLzrKAOctniiS2WovYUeUsTzoZwNoqwNrKr1MtudpZm+dqI4XRqE6Z37Nq
q3lj4CZszsSngtRWkNoKUltBaitIbQWprSC1lUFtkLc8pGZg3rJlviu1Q/OWLRsgqD0M3ECZ
wsSA36LJriTQ9d+TladV8l4lV3zXXviuF86BG38UoPBdUbXm1+DbOOOGwvUKCi+aSnzHSuQO
O44C4bqWiQi/F6So2+2r/4cRPqgzLqnMAqYyn2lS43otjUeVyhx2VgDLdQDL9SGWMyak1kOX
54LJ/qeDjG247HvgegtzL5fX8wbBTdicKVUNXa6hyzV0uYYu19DlGrpcQ5drw+Ugnnno0sB4
Zst8V5eHxjNbNkC4fJihgZKHiQG/TpxdcaD/JHjS87Rc05fLVeqNl9SbhZPgxp8bKKnXVPX5
fVI3Tv2O7CJJ/sqZL0d2XXPBi69FzBKHPUdhdpkkJRfhjfO2bFh+Mvuw9GQuIc4ZDHE+y0m8
53PjXdF4Hx7gL8Z7f3qA4vN+UbwVb87dU7xIs1yL0Z0s/E9/ZPfTyGwLd5maN4Jr5eX4Zt4s
uAmbM2WbQ8fn0PE5dHwOHZ9Dx+fQ8Tl0fN47PgOBzgPHEsO9HG+Z7+h46xZcHG/ZAOH43DaZ
gCkx4PfCtKsT2wM7/NIchXpatznWzVX2rZfs24XD4MafMyjZN1Q9+sWyN94DBvF3zfF0MeIL
mYum7RaTOew4CuHXZd2KdIawZ1ke/wNKQmqRS+hzBkOfzwqS+sXc1E8PUD+q0Oe5zxMwf9Gv
jrf5zbn7nXudbO00euZfpvu711MhNqnuO/dio6Tfbz/bebPgJmzORHAByV9A8heQ/AUkfwHJ
X0DyF5D8hUF+EP88JG9g/LNlviv5Q+OfLRsgyD8MgyNn28Pg9qeAMLiZ60d3of/J66HD4DKU
y0wMOAKK75bl8Gsch8Etdmp2WUjl4cOxhsHJ9ODZdP9wcXonzLCA/QmBYXCj8WQY3Bpvuh8I
g1v+LJore9OHwa16EQ+PoQ+DU1kfBjcaOgyD+7FjHoTBrXIcX2oZXhZW9fmksskxhcZhcCvs
tiTC4KhBozA4YtA4DI4YNA6DIwcNw+CIQeMwOOrAR2Fw5CATobB0dtFaoyrt2gc78+qDnS2c
HTfuylF9sMOjvi5HlKZ2lsIRHI4QcEQGR0g4QsERGo7I++y4gbl/pHNYbqulysyOH1vjmWy6
qfLiu+WXOuw5ipZfVqYNC38mMUtbkTRH81C2v++g71OJe3V7g8heXUX26qqV7qkdHuAP9+q+
1xf02KqAu2Mrv7tjtRRGsEbKNinvn6+mNpnwuz32bN48uAmbM8tzBXtsFeyxVbDHVsEeWwV7
bBXssVWwx1YZvNl718M8OGK4X4/t8HzXHpttC049tsMbMHpsIpVsHAeXoVR6YsCPNCK66tFd
5v/9vXsqIE3+9MK9PH/u5fnzhePgxp8uKM+fUQXhJ3VqnESDqSs8DU01SSu7xeAO+40Cqdt6
lRVNMFJTppVgx2XUQTFwCS/OcHhxTWK1XgurcYUXDxcaqLUOUGvt+VizVBiPNcs2cnuYxmPN
dOqF1vN5s+AmbM5kXA3RWkO01hCtNURrDdFaQ7TWEK21gVYQYjxUW2CIsWW+K1pDQ4wtGxij
ldvmUnaLJMp3UEW6y52u256IO63ApFTj8UVtq2YXC0fBjVFNMfacKhFRMNY4m4ZnsxXarjVr
EvbddhUOe45CtDVjrUqCRSsVq5P6SEU7KBAuOccZzjluSNo2a9E2rpzjgysOjNsEGLfxMq4y
ntzL/rc1wEby/oFiyUbnfj94upg3C27C5kz2NRC5DURuA5HbQOQ2ELkNRG4DkdsYyAWBx0Pl
BQYeW+a7Ijc08NiygTFyhW0uRbxI0n4P1ZPuwqdLuaf1TktBL4Urey+92Hu5cBTc4aIzHDV6
wXGx1zithn/V8v5NeZOX3z8ryRx2HAV/q4wJGd7QZVUiVa6P3b+DkuGSiZzhTOSWhHC7FoTj
ykTGSw9E3AaIuPXr+m7/zx2Jtco3Ummj6yuyzAvEl/NGwU3YnEnEFoK4hSBuIYhbCOIWgriF
IG4hiFsDxCAceSjCwHBky3xXEIeGI1s2MAZxZptLKTCSQGBYV7oCQNd2Tw6e1gSsiSuRr7yI
fLVwEtwY7BSRL6kyEimRjfNrWDlf3spNkfLs+6cq0mHHUVi5zJKsncHKeaWz7FjvfoBFxCU/
OcP5yWckms/WQnNc+cke5wDo+SxAz2e+90xw456J7Zt/+2LMeyb8bvS9mjcKbsLmTE+eQT2f
QT2fQT2fQT2fQT2fQT2fQT2fGXoGQcpDPgYGKVvmu+o5NEjZsoGxnq1zKSlGkhnsXmC6SkBX
e08ynhbHdXFcPX3t5enrhZPgxrqnPH1FFZbYPW2c6B7W6Qq/fStzqbjuVkw57DgGWKeqktkM
D7sSdZZv3wX/nKsHVcUlaznDWcvnJLDP1wJ2XFnLU04GkPZ5gLTPPaXNzNDlfCuZPWkrP2lf
z5sEN2Fzpj3PobTPobTPobTPobTPobTPobTPobTPDWmD0OUhNQNDly3zXaUdGrps2cBY2so2
l8JkJLHCEypNVxLo+u+pytMqea+Sq73Hl76tKt4sHAQ3/iRA2fuaKjW/xt7GGTcQvsIv+5hi
rEqrbu20w55jUHiblFXBghXeJkm2PdX/LsIHdcYlljnDscwXpMYv1tJ4XLHMQWcFsPwigOUX
Xiz/83zN/mmyudjkmTaeJsv9HiZ7M28O3ITNmU69gCq/gCq/gCq/gCq/gCq/gCq/gCq/MFQO
8pmHLA3MZ7bMd1V5aD6zZQNjlQ/jM1DwMDHg13mzKw30HwRPeJ6Wa/pyuTr91svptwvHwB0u
TcNRoxf8+5xunHoD7Cv8dFEURaK/nzKWO+w4Bq8zlZRZVgaDPU81L9sT2EeVxyXCOcMRzpek
3C/XkntcEc7znB5A+MsAwl/6ET5N+yhnnmabhOdGBlzOtZfhb+fNgJuwOVO1l9Dwl9Dwl9Dw
l9Dwl9Dwl9Dwl9Dwl4bhQZbzELGBWc6W+a6GD81ytmxgbPhhHgbKJiYG/F6UdkWC/hvhqdPT
us2wbq6qv/NS/d3CEXDjzxiU6m+pcvSLVW+8Bwzer/DLzLzVxfc7TyYOO46B96Ip2m3dD74p
ps5yXv+DN5s71yLpkvYscdrzFen8q5WcPzzAY3B+f54A+K8CwH/ldytNItUO/LlON4qbt9Lw
xO9Bf3fzJsBN2JxJ4CsI/isI/isI/isI/isI/isI/isI/qse/BKEPg/ESwz3Ar9lviP4rVtw
Ab9lA2PwDwPgyMn2ALj9KSgAbt7q0V3mf/4HHQAnURYzMeAIIL5blsOvkQiAW+rU7PKPrg8f
jjUATrODZ9P5o8XpnTDHAvYnBAbAjcbTAXArvOl+IgBu8bNoruyNEQC35kU8PIY+AE6LPgBu
NHQUAPdTxzwMgFvjOL7QMrwsrOjzSWL72uK+hMYBcCvs9poIgKMGjQLgiEHjADhi0DgAjhw0
DIAjBo0D4KgDHwXAkYNIg7q2te692lr3Cye6jZtsVFvr8Kiv6wtmnFVwRA1HNHBEC0ecwRHn
cMQFHHHZJ7oNEP0jjcDtjraF2+OPfRdZaPT7Vni6BMtqneruScSSOew5hoZfKkupwr/OZ9sT
WGfpsTT8zPcbG9Y5qlG3N4hs1N2QjbqbtRp1gwP84Ubd9/qCBttNQIPtxqvBlmqp+2/UZbaR
LDW+Uc8Sv9+q3c8b/zZhc2Ytv4ENthvYYLuBDbYb2GC7gQ22G9hgu4ENthsDN3tvehj/Rgz3
a7Adnu/aYLNtwanBdngDZoNNJhodPtWGiCSHvise3VW+++AZkB9/euFe+B8XClvtelg4/m38
UYTC/z1VEH6SssZJ7JHKV3hSQ5YWaVp3q5E67DgGozKWZZyH/0iMJboSzdF8K02WA5e0YonT
im9Jrd6updW40oqHCw3YehvA1ls/tm7/ku/Y+icbI80MtSYJ91Lrw7z5bxM2ZzruFqr1Fqr1
Fqr1Fqr1Fqr1Fqr1Fqr11lArCC0esi0wtNgy31WtoaHFlg2M1cptcym8RZLdOygi3dVOl21P
xZ1WYFKM8aOXYx8Xzn87XMiGo0YvOArHGmfTAO0aTz3IklSmZbcu3GHPMYi2zesm0eHxb0nS
NEcTf2GvDy7JxhInG9+RsL2bG7bpAdjGlWx8cMWBcO/61+ktXHPunnCZTrZYGBI3V0mfdpFu
39l/Hgvz17jZhms/4z7OG/82YXOm+u6gce+gce+gce+gce+gce+gce+gce8M44KM4yHyAjOO
LfNdjRuacWzZwNi4wjaXEl4kCb+H6kl34f9XpYeP1pV6p6Wgl8JVveNCYKtvTwvHv40NTqn3
kSoacanXOK0Gf+UK/JVplnfPEJDCYccx6Je1tW7zaoZfGbUqq4/ev4OS4ZKDLHEO8j0J4fu1
Orxx5SDjpQcivg/o+d779Xy57m9VEDzfsKS/VSHd5Mwv/u1p3vi3CZsziXgPQXwPQXwPQXwP
QXwPQXwPQXwPQXxvgBjkIQ9FGJiHbJnvCuLQPGTLBsYgzmxzKQVGEgIM60pXAHZNjoA04NOa
oDVxJfKzF5GfF45/O1yohqNGLzhSIhvn17CyXt7KRcKr9NsfmcOOo7ByVUq9LaXBVuZtyosj
u0HXvYi4ZCZLnJn8QKL5Ya3ucVyZyR7nAOj5IaCf/HCwnyy5FiM+iy2Iej7nbJNmzOCzTKQX
n5/nzX+bsDkTlA+Qzw+Qzw+Qzw+Qzw+Qzw+Qzw+Qzw8Gn0F68tCPgenJlvmufA5NT7ZsYMxn
61yKipEkBbtXmK4U7HokAZHBp8VxXhxXUL94gfpl4fy3Me8pUJOFJXZQGyeakjVfrgvNWMXV
9/UhHfYcBa15XqVCzHBbMWPyeBLgJtcVl4hliSOWH0ljP67VmI4rYnnKyQDYfgxoVT8ealUz
oUQmR73q5M9H17/azpIN08Zzq8SGKS9sv8wbATdhcyY/HyG2HyG2HyG2HyG2HyG2HyG2HyG2
Hw1sg7DloTYDw5Yt812xHRq2bNnAGNvKNpfyZCR5whNKTVcTdk2WgGDh0yr5r5Irv1+9+P26
cATc+MMAxe8XqtT8Gn4bZ7x3uEiXd3iRtHX9/T5TDjuOguFKVXUZ/us+ybK6+pcVPqgzLoHM
EgcyP5Ecf5qb4+IAx+MKZA46K8DlT/1aeLvcnLvnci5EIkc3VStlBEhkIt1obd5Dkgq/Jvjr
vCFwEzZnSvUJuvwJuvwJuvwJuvwJuvwJuvwJuvzJcDmIZh7CNDCa2TLf1eWh0cyWDYxdrm1z
KXFGEjocUnO64vBfJQ6/Ild6npZr+nK5Sv3NS+pvC4fAjT83UFJ/pYrP75O6ceopsi94A3e9
Pfz0+x2nHfYcg9m52qI9/PeL27dAUsvmZPZR6XHJb5Y4v/mZxPvzWr30uPKb5zk9QPHPAd31
Z79QCMX7UAiZ8I1U5p0szC8T4m3eELgJmzNV+wwN/wwN/wwN/wwN/wwN/wwN/wwN/2wYHgQ5
DxEbGORsme9q+NAgZ8sGxoYfRmKgZGJiwO9FaVcjdv2dgIji07rNsW6uqh9f/LbK+b5wCNz4
Mwal+jeqHP1i1RvvAYP3u/tT0uV4X7ZZ06huNXOHPcfA+6YtqzIN572oVVaceG8pRi5pzxKn
Pb+Qzn9Z6770uNKeZz5PAPwvAfeuvxy6dz1laZ6nI/HL7VrtyM9S/odoO/KrTa78gp/f582B
m7A5U8Ev0Pwv0Pwv0Pwv0Pwv0Pwv0Pwv0PwvhvlB8PMQvYHBz5b5ruYPDX62bGBs/lEOHDUZ
5MDtZ9mCHLh560d3of8ZcyAHDgUyEwOOwOK7ZTn8GokcuKVOzS4G6fXw4dhy4CRLD55N908X
p3fCDAvYnxCcAzccT+fArfCm+4kcuMXPormyN0YO3JoX8fAY+hy4PDdy4IZDRzlwP3XMwxy4
NY7jCy3Dy8KKPo9Atm6L+xIa5cCtsdvXcQ4cOWiYA0cNGuXAUYNGOXD0oAs8aJQDRx74MAeO
HkQa1LWz9eHV2fpYOAfuMLjdRn1dXzAZ7QaOuIUj7uCIezjiAY54hCOe4IhnIwduH9E/0gt8
3Za/PPf4Yz/MgctWiNjIyyRVXcSGShx2HEPHr0p0lRThHb+0SFSVH0vHz3i7qWRY5ohO3f4g
slP3Rnbq3lb6Rn54gD/cqfteX9Bhewv4Sv3N79lqiegfNpyxP8FvwvhKXeR+Dxv+mDcGbsLm
zFL+Bvtrb7C/9gb7a2+wv/YG+2tvsL/2Bvtrb71t9t/0MAaOGO7VX7PMd+yvWbfg0l+zbMDo
r8mEMwkOn+hCEAN+pAvRFY/uKv/7fQp5bI7dg9ML97L/p5f9PxeOgRt/EqHs/0EVhJ+UrHES
DaOukZqh2+1f/W+kMoc9x4BUwbdWrIORmm2LZiWPy6iDauCSWaxwZvE7idX3tbAaV2bxcKGB
Wt8D1PruqValjYcsiI1MtKHWjPs9ZeFz3hi4CZszHfcO1foO1foO1foO1foO1foO1foO1fpu
qBWEFw/ZFhhebJnvqtbQ8GLLBsZq5ba5FN4iyfAdVJHucqfrtqfiTiswJc5YJz6O3Y5eNgZu
rGrKsZ9UiYjCscbZNECbLQ/aWkvddDkYKnXYcQyeZVVTNVn4kw9EyRvRHiloB/XBJd9Y4Xzj
D1K2H2vJNq5844MrDoj7EUDcD7/fOuWZ0ZjlW4SYwvUMgeuK+GwhcFM2Z5rvAwr3Awr3Awr3
Awr3Awr3Awr3Awr3wxAuCDoeEi8w6Ngy31W4oUHHlg2MhStscynfRRLze6iadJc9Xcg9oXda
CnopXM3LvMzLlg2BIwROmPdr1OgFx2Ve47Qa+FXLP/arTYusaLv14Q47jgG/WZnXMzx8t2RN
UlTHbt9BwXDJQlY4C/mTRPDn3AjODiA4rixkvPRAw5/9C/bWsDl3T8OZSKQa/RAoE1r0v/3P
s02W9z/9Z8mGCeEFYjZrCNyUzZlE/IQg/oQg/oQg/oQg/oQg/oQg/oQg/jRADFKRhyIMTEW2
zHcFcWgqsmUDYxBntrmUAiOJAoaVpSsB21GHD9uVg6c1AWviSuTUi8jpsiFwBNgpIjOqjERK
ZOP89laWK9z5oLeVLOPdQgmHHcdgZVYVsm1mSKpQqtHV0fwg37eIuCQnK5icfJ5QbDb+35nY
zA+wOa7kZI9zYPfzdgF3r9zXz3tz939Iv/0YLKkQOLHjs+Jqo4Th543iXhnKXfWfLQRuyuYM
UJ4niM9/Rtj5vB0B+LwdAfj8NcLK5+0IwOc/R2rn89eIv3wGGcpDPwZmKFvmu/I5NEPZsoEx
n61zKSpGkhfsXmG6UvBfxQ8fv6sZT4vjujiuoOZeoObLhsARvKdAnVKFJXZQGyfakLVa4Z7i
om6z5rtFmTnsOQpaN3mVsiqc1pWs6kL/e7Qe1BWXoGUFg5bPGWlsttb9GXEFLU85GQDbbPqt
G3tzHe5O5pz1gcsi32jzJ3Va+FGbzxoBN2VzJj4ZpDaD1GaQ2gxSm0FqM0htBqnNDGqDvOWh
NQPzli3zXakdmrds2cCY2so2l9JkJJHCEwpNVxF230wGZAufVsl/lVzxLbzwLZaNgCM+ClD4
5lSp+TX4Ns64ofB8hQfOFlXyt+EpHXYcA8JlVrV1+PNm05bl+sgePhFSZlwCmRUMZD5PSYun
Kz1cdniAv8/i/VkBKE+nP0p2b67Lo2R5YrTAt27ZZGm+c/lWMtzvDhIxawTclM2ZUk2hy1Po
8hS6PIUuT6HLU+jyFLo8NVwOopmHMA2MZrbMd3V5aDSzZQNjl2vbXEqckYQOhxSdrjr8fTAj
+Ypc6XlarunL5Sr1zEvq2bIRcMTnBkrqgio+v0/qxqnvya7WiIDjdSLy7waqcthzDGZvlcpU
eN98+z7I83/wjhRYeVzimxWMbz7nJN75Wo30uOKb5zk9QPE8oLXOD7XWt68mGd8HzjKm+0d/
yHxjPK6OsU2mvfIgur8ms2XATdmcyVoOEc8h4jlEPIeI5xDxHCKeQ8RzA/Egx3mo2MAcZ8t8
V8SH5jhbNjBGfG6bS6k0kmDiWYpPVyV2HZ6AhOLTus2xbq6sl16sl8tmwBEfMijWZ1Q5+sWs
N94Dhu/FX2WL5Xwvi2pb+LrV1A57jsH3TLCiSLNg4OfbjZQn3x+uRS5RzwpGPZ8LEvpibuiL
A9CPK+p55vMExC/61fEWvzl3T/xciD8t+qH4mdhek3/Fz+UWZUzuzM83PGVe5JezRsBN2ZyJ
YAHJLyD5BSS/gOQXkPwCkl9A8guD/CD2eWjewNhny3xX8ofGPls2MCb/MAKOnGyPgNufgiLg
5q0f3YX+J3iHjoBTKI6ZGHAEFN8ty+HXSETALXVq/iYgnWeHD8caAZexg2fT/cPF6Z0wwwL2
JwRGwI3G0xFwK7zpfiICbvGzaK7sjREBt+ZFPDyGXQScZLqPgBsNHUXA/dQxDyPg1jiOL7QM
Lwsr+nyy2L62uC+hcQTcCrvNiAg4atAoAo4YNI6AIwaNI+DIQcMIOGLQOAKOOvBRBBw5iDSo
a2NLeTW21LIRcESbjWpsHR71dX3BULQ3OOIdjviAIz7RiPMEjmBwRApH8D4CboDon2gFnmfb
eUx7/LEfRsCpfIVv9EWmmP7+Q5g77DmKjl9blTy84ccymahSHUnLb+/9lg/rHNWq2xtEtuok
2aqTa30nPzjAn23V/V1f0GKTAV+qy0NfqtO3xmZMJMmuxZYmG+P3amLDeOrVYFOzZsBN2ZxZ
yyVssEnYYJOwwSZhg03CBpuEDTYJG2zSwM3emx5nwI2H+zXYDs93bbDZtuDUYDu8AaPBpnma
SCIEDkXREwN+og/xXT26y3z3jUpAhPzphXvpX3vpXy8bAkd8FqH0r6iK8JOWNU5ir1S9QlAx
401TpN1zg3XisOcolKqTljcynKlJlWuZHBdT9+uBdsks1jCz+FyRXlUreXV4gFF4tV9oAFcV
AFflDVeuTbhyne3R1e9RC3rWHLgpmzMtp6BcFZSrgnJVUK4KylVBuSooV9XLVYP04oHciOFe
crXMd5SrdQsucrVsgJArt00mAEcMiAFw3QVPV24/yZ1WQE8JNNa5l2XzZYPgCFlTltVUjYjC
ssbZNFC7RrJxLaqk7n5Eo5nDnmNAbdnysiyDTdsUWjb8SEk7qA8uEccaRhyfa9K2ei3bRhVx
fHjFAXJ1AHK1f3eW7yE3z/f7s34PLsjnzYKbsDnTfRoqV0PlaqhcDZWroXI1VK6GytWGckHa
8VB5gWnHlvmuyg1NO7ZsgFCusE2mjBdH2O/BitJd+nQx98TeaSnopXB1b+Hl3mLhMLixwin3
5lTViMu9xmk1AJwt/wAwVahWlt36pA47jsG/gsuqCX+YQCFY3dbH7t9BwXBJRNYwEfk8JyGc
r5RqMTzASCHcLz0QcR4QZpEfCrPIti9X65GIVSL7tm+Wbc2TmmFwWvv1fYt5w+AmbM40Yg5F
nEMR51DEORRxDkWcQxHnUMS5IWKQjjwUYWA6smW+q4hD05EtGyBEnNkmUwyMIxMYl5auBvx9
oDp52K4ePK0JWBNXI5deRi4XToMbi50yckHVkUiNbJxfA8tr3Kjb5BnXslsp7rDnGLTMZJHX
SRHMZVkl+bYm/ytcHhQRlxBlDUOUzwvSzcVaDeSoQpR9zgEAdBHQUi68AioYF0YYnE42LDey
4KTw+0F9OW8W3ITNmZ4soJ4LqOcC6rmAei6gnguo5wLquTD0DKKUh3oMjFK2zHfVc2iUsmUD
hJ6tkykpxpEb7FFgukqw65IEBAifFsd5cVw9XXl5ulo4DG6se8rTJVVZYve0caJ7WOdr3Fu8
PcLt6+yWTDjsOQpYqzrPMh5+b3Etc7V9H/xzsh7UFZfAZY0Dl0uS2OVaxI4qcHnSyQDWLgOs
XXpZO01S1beq2dZWiZkGJ5TfzRvVvGlwEzZn8rOE2C4htkuI7RJiu4TYLiG2S4jt0sA2CF4e
YjMweNky3xXbocHLlg0Q2Fa2yZQn4wgXnlJquppA/wHwhOVplbxXyZXftRe/64Xj4MYfBih+
V1St+TX8Ns644fDdTcl8OYcXkjfJd4M7c9hzFA7nKdNqhkdRNLwoWvkPO3xQaVzSmTVOZ65I
kFdr3SsSVTpz2FkBMq8CbiOpDt1GksqUifGTZZOE9TbnTGwSnhtPltWeT5at502Em7A5U6sV
tHkFbV5Bm1fQ5hW0eQVtXkGbV4bNQVLz0KaBSc2W+a42D01qtmyAsLm2TabUGUcIcVDV6crD
7ovQgDTi03IFLJer1hsvrTcLR8KNPztQWq+p6vP7tG6ceoPtag22syRtvh/NIR32HAXbK1Uq
1QSzvW5rmRz9zxgnlB6XQGeNA51rku/1SlERwwP8xXzvTw9wfB2QEFEfTIhIldSjFrvkqme8
zNRGpUYo3CYX0ovxzbyZcBM2Z8K2hoyvIeNryPgaMr6GjK8h42vI+NpgPAh2HjI2MNjZMt+V
8aHBzpYNEIzPbZMpl8YRVTxP9enKxN8Hr5MvzRWop3WbYd1cYd96wb5dOBRu/DGDgn1D1aNf
DHvjPbATfpasEfqcM1HwLhROK4c9RyH8vG15lgcLP2WyVf/gnefuxcgl/lnj+OeGpH6z1q0z
UcU/z32egPmbgLtqGr872LX5A1DJNpxL466a1C8Fup03Em7C5kwDN1D8DRR/A8XfQPE3UPwN
FH8Dxd8Y4gcp0EPxBqZAW+a7ij80BdqyAUL8w0w4crY9E25/CsiEm7l6dJf5n/9EZ8JpFM9M
DDgCie+W5fBrHGfCLXZqdpFI7eHDsWbCaXHwbLp/tji9E2ZYwP6EwEy40XgyE26NN90PZMIt
fxbNlb3pM+FWvYiHx9BnwnHRZ8KNhg4z4X7smAeZcKscx5dahpeFVX0+4WxfW9yn0DgTboXd
tkQmHDVolAlHDBpnwhGDxplw5KBhJhwxaJwJRx34KBOOHEQi1LWvdebV1zpbOBNu3GWj+lqH
R31dXzAlTcIRCo7QcEQORxRwRAlHVHBE3WfCDRD9I53AdjuPC48/9oNMuCwRyzf8uKzyusv4
1NphxzH0+9qqqbkOvw+XFyw/ngcTm283PSxzVJ9ubxDZpzsj+3Rna/XpBgf4w3267/UF/bWz
gP7ame+v1rK9X61plu39as0vEu5s3ki4CZszS/kZbLCdwQbbGWywncEG2xlssJ3BBtsZbLCd
GbbZe9PDSDhiuF+D7fB81wabbQtODbbDGzAabHkidQoOn+pCxJFM/108uqt897kzIFH+9MK9
7H/uZf/zhRPhxp9EKPufUQXhJyVrnETDqHJ5o8q2rNX3j8Vyhx3HYFTWtmUh2vDvpJOykOlx
GXVQDVzyizXOLz4nsXq+Flbjyi8eLjRQ63mAWs89vxUWhlql3nBuPmshzfzUej5vHNyEzZmO
O4dqPYdqPYdqPYdqPYdqPYdqPYdqPTfUCoKMh2wLDDK2zHdVa2iQsWUDY7UOc0JQnC8xIAa8
dZc7Xbc9FXdagUnJxuOL2lbNLhZOgxurmnLsOVUionCscTYN0Oo10uAKnnz/fCZPHPYchWhL
pTQLjzhOq1aqo3n6gbVA5C5RxzmOOr4gaXuxEm2HBxgXbfsVB8a9CDDuhadxef/s3kyxjRLc
NC7PvYx7MW8Y3ITNmeq7gMa9gMa9gMa9gMa9gMa9gMa9gMa96I2bg8jjAfKI4V7Gtcx3NK51
Cy7GtWxgbFxhm0sIjxgQlfC6656u5H7UOy3FgaVwVe+ll3ovF86CO1x0hqNGLzgu9Rqntecv
S1bgLyvSpOhuIsuZw55j4G+mmnyGMGRWpixtk2Pn76BkuMQi5zgW+ZJ08OVaDo4rFhkvPQDx
ZQCIL31BzAwQpxup8j0Q+2XBXc6bBTdhcyYRLyGILyGILyGILyGILyGILyGILyGILw0Qg3Tk
oQgD05Et811BHJqObNnAGMSZbS6lwEgSgWFd6QoAXds9OXhaE7AmrkS+8iLy1cJRcGOwU0S+
pMpIpETuz+//nf6d/p3+nf6d/p3+nf6d/p3+nf6d/p3+nf6d/p3+nf6d/p3+nf6d/p3+nf4t
8u//AVzq3xgAOAkA

--------------070500010007000309020104
Content-Type: text/plain; charset=us-ascii

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org
--------------070500010007000309020104--

From java-user-return-35087-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 23 16:50:16 2008
Return-Path: <java-user-return-35087-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90608 invoked from network); 23 Jul 2008 16:50:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Jul 2008 16:50:16 -0000
Received: (qmail 87675 invoked by uid 500); 23 Jul 2008 16:50:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87639 invoked by uid 500); 23 Jul 2008 16:50:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87628 invoked by uid 99); 23 Jul 2008 16:50:08 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Jul 2008 09:50:08 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [209.222.209.11] (HELO mirkwood.informatics.jax.org) (209.222.209.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Jul 2008 16:49:13 +0000
Received: from [127.0.0.1] (corona [209.222.209.245])
	by mirkwood.informatics.jax.org (8.13.8/8.13.8) with ESMTP id m6NGnaRJ004644
	for <java-user@lucene.apache.org>; Wed, 23 Jul 2008 12:49:37 -0400 (EDT)
	(envelope-from mhall@informatics.jax.org)
Message-ID: <4887604F.6090608@informatics.jax.org>
Date: Wed, 23 Jul 2008 12:46:07 -0400
From: Matthew Hall <mhall@informatics.jax.org>
User-Agent: Thunderbird 2.0.0.14 (Windows/20080421)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Lucene Search Error: Java.io.IOException: Bad file descriptor
References: <48875A01.2070504@stimulussoft.com> <48875A5A.1070807@informatics.jax.org> <48875D63.8000006@stimulussoft.com>
In-Reply-To: <48875D63.8000006@stimulussoft.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-PMX-Version: 5.4.3.345767, Antispam-Engine: 2.6.0.325393, Antispam-Data: 2008.7.23.162608
X-PerlMx-Spam: Gauge=IIIIIII, Probability=7%, Report='BODY_SIZE_3000_3999 0, BODY_SIZE_5000_LESS 0, __BOUNCE_CHALLENGE_SUBJ 0, __C230066_P5 0, __CT 0, __CTE 0, __CT_TEXT_PLAIN 0, __HAS_MSGID 0, __MIME_TEXT_ONLY 0, __MIME_VERSION 0, __SANE_MSGID 0, __STOCK_PHRASE_7 0, __USER_AGENT 0'
X-Virus-Checked: Checked by ClamAV on apache.org

I'm not sure which file in particular would be the one 
corrupter/missing, which is why I suggested looking at the index with luke.

As for the jave 1.6 lucene 2.3.2 index corruption issue, I'm not 100% 
familiar with the details on that one, but as a quick test, you should 
be able to swap to a 1.5 version of java, reindex and see if that fixes 
things.

Well.. unless your code uses something jave 6 specific I suppose.

Matt

Jamie wrote:
> Hi Matthew
>
> Thanks in advance for the suggestion.
>
> Which file do you think does not exist?
>
> This is what we have:
>
> _15zw.cfs  _19od.cfs  _1a5d.cfs  _1a7n.cfs  _1ahf.cfs  _1ahh.cfs  
> _qzl.cfs       segments.gen
> _1993.cfs  _1a0w.cfs  _1a7c.cfs  _1a9m.cfs  _1ahg.cfs  _1ahi.cfs  
> segments_158j
>
> Aside from Luke (which requires a GUI), it is there a command line 
> utility that can check the integrity of the index?
>
> Jamie
>
> Matthew Hall wrote:
>> Did you try to open the index using Luke?
>>
>> Luke will be able to tell you whether or not the index is in  fact 
>> corrupted, but looking at your stack trace, it almost looks like the 
>> file.. simply isn't there?
>>
>> Matt
>>
>> Jamie wrote:
>>> Hi Everyone
>>>
>>> I am getting the the following error when executing  Hits hits = 
>>> searchers.search(query, queryFilter, sort):
>>>
>>> 18007414-java.io.IOException: Bad file descriptor
>>> 18007455-       at java.io.RandomAccessFile.seek(Native Method)
>>> 18007504-       at 
>>> org.apache.lucene.store.FSDirectory$FSIndexInput.readInternal(FSDirectory.java:545) 
>>>
>>> 18007592-       at 
>>> org.apache.lucene.store.BufferedIndexInput.readBytes(BufferedIndexInput.java:131) 
>>>
>>> 18007678-       at 
>>> org.apache.lucene.index.CompoundFileReader$CSIndexInput.readInternal(CompoundFileReader.java:240) 
>>>
>>> -- 
>>> 18009148-       at 
>>> org.apache.lucene.search.FieldSortedHitQueue.getCachedComparator(FieldSortedHitQueue.java:168) 
>>>
>>> 18009247-       at 
>>> org.apache.lucene.search.FieldSortedHitQueue.<init>(FieldSortedHitQueue.java:56) 
>>>
>>> 18009332-       at 
>>> org.apache.lucene.search.TopFieldDocCollector.<init>(TopFieldDocCollector.java:43) 
>>>
>>> 18009419-       at 
>>> org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:122)
>>> 18009493-       at 
>>> org.apache.lucene.search.MultiSearcherThread.run(ParallelMultiSearcher.java:250) 
>>>
>>>
>>> Does this mean the index is corrupted? Any idea why it would be 
>>> corrupted?
>>>
>>> Jamie
>>>
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
>

-- 
Matthew Hall
Software Engineer
Mouse Genome Informatics
mhall@informatics.jax.org
(207) 288-6012



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35088-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 23 17:12:13 2008
Return-Path: <java-user-return-35088-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 660 invoked from network); 23 Jul 2008 17:12:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Jul 2008 17:12:13 -0000
Received: (qmail 25556 invoked by uid 500); 23 Jul 2008 17:12:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25516 invoked by uid 500); 23 Jul 2008 17:12:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25505 invoked by uid 99); 23 Jul 2008 17:12:05 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Jul 2008 10:12:05 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [64.233.184.231] (HELO wr-out-0506.google.com) (64.233.184.231)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Jul 2008 17:11:08 +0000
Received: by wr-out-0506.google.com with SMTP id c30so1812845wra.21
        for <java-user@lucene.apache.org>; Wed, 23 Jul 2008 10:11:15 -0700 (PDT)
Received: by 10.90.95.18 with SMTP id s18mr248891agb.121.1216833075005;
        Wed, 23 Jul 2008 10:11:15 -0700 (PDT)
Received: from ?10.17.4.4? ( [72.93.214.93])
        by mx.google.com with ESMTPS id 13sm6409472wrl.19.2008.07.23.10.11.14
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Wed, 23 Jul 2008 10:11:14 -0700 (PDT)
Message-Id: <282DB5DC-0A2D-4D42-AA4D-4E1C02584E32@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <48875F5F.30203@stimulussoft.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: Lucene Search Error: Java.io.IOException: Bad file descriptor
Date: Wed, 23 Jul 2008 13:11:13 -0400
References: <48875A01.2070504@stimulussoft.com> <48875A5A.1070807@informatics.jax.org> <48875D63.8000006@stimulussoft.com> <48875F5F.30203@stimulussoft.com>
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org


org.apache.lucene.index.CheckIndex checks the index for corruption,  
and (if you specify -fix) will "repair" the index by removing any  
segments that have problems.

There is this issue with Java 1.6.0_0{4,5}:

     https://issues.apache.org/jira/browse/LUCENE-1282

Sun is making progress on fixing that JRE bug.

That said, your exception does not look the same as this issue.

Is it possible you are closing your searcher or IndexReader before or  
while running this search?  It's odd to get a "Bad file desctriptor".

Is this easily reproduced?

Mike

Jamie wrote:

> Wasn't there some index corruption issue with Java 1.6 and Lucene  
> 2.3.2? Could this be the problem?
>
> Jamie
>
> Jamie wrote:
>> Hi Matthew
>>
>> Thanks in advance for the suggestion.
>>
>> Which file do you think does not exist?
>>
>> This is what we have:
>>
>> _15zw.cfs  _19od.cfs  _1a5d.cfs  _1a7n.cfs  _1ahf.cfs  _1ahh.cfs   
>> _qzl.cfs       segments.gen
>> _1993.cfs  _1a0w.cfs  _1a7c.cfs  _1a9m.cfs  _1ahg.cfs  _1ahi.cfs   
>> segments_158j
>>
>> Aside from Luke (which requires a GUI), it is there a command line  
>> utility that can check the integrity of the index?
>>
>> Jamie
>>
>> Matthew Hall wrote:
>>> Did you try to open the index using Luke?
>>>
>>> Luke will be able to tell you whether or not the index is in  fact  
>>> corrupted, but looking at your stack trace, it almost looks like  
>>> the file.. simply isn't there?
>>>
>>> Matt
>>>
>>> Jamie wrote:
>>>> Hi Everyone
>>>>
>>>> I am getting the the following error when executing  Hits hits =  
>>>> searchers.search(query, queryFilter, sort):
>>>>
>>>> 18007414-java.io.IOException: Bad file descriptor
>>>> 18007455-       at java.io.RandomAccessFile.seek(Native Method)
>>>> 18007504-       at org.apache.lucene.store.FSDirectory 
>>>> $FSIndexInput.readInternal(FSDirectory.java:545)
>>>> 18007592-       at  
>>>> org 
>>>> .apache 
>>>> .lucene 
>>>> .store.BufferedIndexInput.readBytes(BufferedIndexInput.java:131)
>>>> 18007678-       at org.apache.lucene.index.CompoundFileReader 
>>>> $CSIndexInput.readInternal(CompoundFileReader.java:240)
>>>> -- 
>>>> 18009148-       at  
>>>> org 
>>>> .apache 
>>>> .lucene 
>>>> .search 
>>>> .FieldSortedHitQueue.getCachedComparator(FieldSortedHitQueue.java: 
>>>> 168)
>>>> 18009247-       at  
>>>> org 
>>>> .apache 
>>>> .lucene 
>>>> .search.FieldSortedHitQueue.<init>(FieldSortedHitQueue.java:56)
>>>> 18009332-       at  
>>>> org 
>>>> .apache 
>>>> .lucene 
>>>> .search.TopFieldDocCollector.<init>(TopFieldDocCollector.java:43)
>>>> 18009419-       at  
>>>> org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java: 
>>>> 122)
>>>> 18009493-       at  
>>>> org 
>>>> .apache 
>>>> .lucene.search.MultiSearcherThread.run(ParallelMultiSearcher.java: 
>>>> 250)
>>>>
>>>> Does this mean the index is corrupted? Any idea why it would be  
>>>> corrupted?
>>>>
>>>> Jamie
>>>>
>>>>
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>
>>
>
>
> -- 
> Stimulus Software - MailArchiva
> Email Archiving And Compliance
> USA Tel: +1-713-366-8072 ext 3
> UK Tel: +44-20-80991035 ext 3
> Email: jamie@stimulussoft.com
> Web: http://www.mailarchiva.com
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35089-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 23 17:13:43 2008
Return-Path: <java-user-return-35089-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1114 invoked from network); 23 Jul 2008 17:13:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Jul 2008 17:13:42 -0000
Received: (qmail 30044 invoked by uid 500); 23 Jul 2008 17:13:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30019 invoked by uid 500); 23 Jul 2008 17:13:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30008 invoked by uid 99); 23 Jul 2008 17:13:35 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Jul 2008 10:13:35 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of mindas@gmail.com designates 74.125.44.28 as permitted sender)
Received: from [74.125.44.28] (HELO yx-out-2324.google.com) (74.125.44.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Jul 2008 17:12:41 +0000
Received: by yx-out-2324.google.com with SMTP id 3so401720yxj.5
        for <java-user@lucene.apache.org>; Wed, 23 Jul 2008 10:12:49 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references;
        bh=P7OOR9MYwLHc7RXs79HSKrZ3uuAoqhbdoYlktxzSJGM=;
        b=uWtAbN95j4XU3SZZf6OGOyi3Fu9oga2QAcaBEC0/lXy4rUj2JeL8qCfT6brdc2aZNt
         bolww2KpRJE24EcUxGaXyk2gN7shaEBLswJBOw2A0vJd+ZKPko2dnvI6pRgy+EjjE0mz
         4cedBPYFoa6pzXMvJdLjZEMDK0hCxhMpPltMI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references;
        b=ZrwKTfRzgOeKnYDQBepVtBj5JI7fq0qqeicveoge1YaIEW0cZY04V4w7BZ3OMllqj7
         kmWrSQ6DK/PnJO2vlqEbSwMiDJh7tEAaQeRhpHKPpj9yHrTS89dH2SXV2Y4nBmCbO34j
         INK1UBbvraYlh+D+HyRsL24A0GBsJ7FrJj2gQ=
Received: by 10.150.49.1 with SMTP id w1mr504178ybw.4.1216833169157;
        Wed, 23 Jul 2008 10:12:49 -0700 (PDT)
Received: by 10.150.145.10 with HTTP; Wed, 23 Jul 2008 10:12:49 -0700 (PDT)
Message-ID: <a4d7dcf50807231012o35bd3ac2gdcd60600eaf6d224@mail.gmail.com>
Date: Wed, 23 Jul 2008 18:12:49 +0100
From: "=?WINDOWS-1252?Q?Mindaugas_=8Eak=9Aauskas?=" <mindas@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene Search Error: Java.io.IOException: Bad file descriptor
In-Reply-To: <4887604F.6090608@informatics.jax.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <48875A01.2070504@stimulussoft.com>
	 <48875A5A.1070807@informatics.jax.org>
	 <48875D63.8000006@stimulussoft.com>
	 <4887604F.6090608@informatics.jax.org>
X-Virus-Checked: Checked by ClamAV on apache.org

On Wed, Jul 23, 2008 at 5:46 PM, Matthew Hall <mhall@informatics.jax.org> wrote:
> <..>As for the jave 1.6 lucene 2.3.2 index corruption issue <..>

Correct me if I'm wrong, but doesnt' the particular Sun bug [1] only
manifests itself if -Xbatch option is used? Also, the exceptions
mentioned in LUCENE-1282 does not really match the one given below:

>>>> 18007414-java.io.IOException: Bad file descriptor
>>>> 18007455-       at java.io.RandomAccessFile.seek(Native Method)

Back on topic - we're having similar (intermittant) problems on one of
our product installations, running Lucene 2.2.0. The stack trace looks
very similar with the exception of the top line which is

java.io.IOException: Bad file number
        at java.io.RandomAccessFile.seek(Native Method)
        at org.apache.lucene.store.FSDirectory$FSIndexInput.readInternal(FSDirectory.java:545)

Quick googling gave me a hint that I could be using a searcher which
appears to be closed (later I found a theoretical possibility for this
to happen in my app). I have unsuccessfully tried to reproduce this
particular exception in my dev environment so had to write this off to
multi-threading when the reader is closed just before
RandomAccessFile.seek(). I still don't know if I was right.

Jamie, is your case always reproducible, or is it somewhat random?

m.

[1] http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6707044

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35090-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 23 17:17:53 2008
Return-Path: <java-user-return-35090-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 2340 invoked from network); 23 Jul 2008 17:17:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Jul 2008 17:17:53 -0000
Received: (qmail 36670 invoked by uid 500); 23 Jul 2008 17:17:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36641 invoked by uid 500); 23 Jul 2008 17:17:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36630 invoked by uid 99); 23 Jul 2008 17:17:46 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Jul 2008 10:17:46 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [64.233.184.224] (HELO wr-out-0506.google.com) (64.233.184.224)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Jul 2008 17:16:51 +0000
Received: by wr-out-0506.google.com with SMTP id c30so1815630wra.21
        for <java-user@lucene.apache.org>; Wed, 23 Jul 2008 10:17:15 -0700 (PDT)
Received: by 10.90.115.17 with SMTP id n17mr12682agc.57.1216833434893;
        Wed, 23 Jul 2008 10:17:14 -0700 (PDT)
Received: from ?10.17.4.4? ( [72.93.214.93])
        by mx.google.com with ESMTPS id x55sm5048320hsx.5.2008.07.23.10.17.13
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Wed, 23 Jul 2008 10:17:14 -0700 (PDT)
Message-Id: <7A0B4E55-CF80-496B-8F76-286FAAF4A30E@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <a4d7dcf50807231012o35bd3ac2gdcd60600eaf6d224@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: Lucene Search Error: Java.io.IOException: Bad file descriptor
Date: Wed, 23 Jul 2008 13:17:12 -0400
References: <48875A01.2070504@stimulussoft.com> <48875A5A.1070807@informatics.jax.org> <48875D63.8000006@stimulussoft.com> <4887604F.6090608@informatics.jax.org> <a4d7dcf50807231012o35bd3ac2gdcd60600eaf6d224@mail.gmail.com>
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org


Mindaugas ?ak?auskas wrote:

> On Wed, Jul 23, 2008 at 5:46 PM, Matthew Hall <mhall@informatics.jax.org 
> > wrote:
>> <..>As for the jave 1.6 lucene 2.3.2 index corruption issue <..>
>
> Correct me if I'm wrong, but doesnt' the particular Sun bug [1] only
> manifests itself if -Xbatch option is used? Also, the exceptions
> mentioned in LUCENE-1282 does not really match the one given below:

Actually the bug happens with or without -Xbatch, though perhaps less  
often with -Xbatch.

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35091-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 23 17:48:38 2008
Return-Path: <java-user-return-35091-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19212 invoked from network); 23 Jul 2008 17:48:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Jul 2008 17:48:38 -0000
Received: (qmail 92275 invoked by uid 500); 23 Jul 2008 17:48:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92222 invoked by uid 500); 23 Jul 2008 17:48:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92205 invoked by uid 99); 23 Jul 2008 17:48:30 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Jul 2008 10:48:30 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.132.240] (HELO an-out-0708.google.com) (209.85.132.240)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Jul 2008 17:47:33 +0000
Received: by an-out-0708.google.com with SMTP id c37so2429126anc.49
        for <java-user@lucene.apache.org>; Wed, 23 Jul 2008 10:47:58 -0700 (PDT)
Received: by 10.100.5.16 with SMTP id 16mr90116ane.35.1216835266626;
        Wed, 23 Jul 2008 10:47:46 -0700 (PDT)
Received: from ?10.17.4.4? ( [72.93.214.93])
        by mx.google.com with ESMTPS id 33sm6439908wra.37.2008.07.23.10.47.45
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Wed, 23 Jul 2008 10:47:46 -0700 (PDT)
Message-Id: <1190C5F3-FAE6-4CC7-8CED-B0247DED9ED8@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <488760A0.8050303@stimulussoft.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: Lucene Search Error: Java.io.IOException: Bad file descriptor
Date: Wed, 23 Jul 2008 13:47:44 -0400
References: <48875A01.2070504@stimulussoft.com> <48875A5A.1070807@informatics.jax.org> <48875D63.8000006@stimulussoft.com> <48875F5F.30203@stimulussoft.com> <488760A0.8050303@stimulussoft.com>
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org


This log looks healthy.

Mike

Jamie wrote:

> Hi
>
> The index log file is attached. Many thanks in advance for your  
> consideration!
>
> Jamie
>
> Jamie wrote:
>> Wasn't there some index corruption issue with Java 1.6 and Lucene  
>> 2.3.2? Could this be the problem?
>>
>> Jamie
>>
>> Jamie wrote:
>>> Hi Matthew
>>>
>>> Thanks in advance for the suggestion.
>>>
>>> Which file do you think does not exist?
>>>
>>> This is what we have:
>>>
>>> _15zw.cfs  _19od.cfs  _1a5d.cfs  _1a7n.cfs  _1ahf.cfs  _1ahh.cfs   
>>> _qzl.cfs       segments.gen
>>> _1993.cfs  _1a0w.cfs  _1a7c.cfs  _1a9m.cfs  _1ahg.cfs  _1ahi.cfs   
>>> segments_158j
>>>
>>> Aside from Luke (which requires a GUI), it is there a command line  
>>> utility that can check the integrity of the index?
>>>
>>> Jamie
>>>
>>> Matthew Hall wrote:
>>>> Did you try to open the index using Luke?
>>>>
>>>> Luke will be able to tell you whether or not the index is in   
>>>> fact corrupted, but looking at your stack trace, it almost looks  
>>>> like the file.. simply isn't there?
>>>>
>>>> Matt
>>>>
>>>> Jamie wrote:
>>>>> Hi Everyone
>>>>>
>>>>> I am getting the the following error when executing  Hits hits =  
>>>>> searchers.search(query, queryFilter, sort):
>>>>>
>>>>> 18007414-java.io.IOException: Bad file descriptor
>>>>> 18007455-       at java.io.RandomAccessFile.seek(Native Method)
>>>>> 18007504-       at org.apache.lucene.store.FSDirectory 
>>>>> $FSIndexInput.readInternal(FSDirectory.java:545)
>>>>> 18007592-       at  
>>>>> org 
>>>>> .apache 
>>>>> .lucene 
>>>>> .store.BufferedIndexInput.readBytes(BufferedIndexInput.java:131)
>>>>> 18007678-       at org.apache.lucene.index.CompoundFileReader 
>>>>> $CSIndexInput.readInternal(CompoundFileReader.java:240)
>>>>> -- 
>>>>> 18009148-       at  
>>>>> org 
>>>>> .apache 
>>>>> .lucene 
>>>>> .search 
>>>>> .FieldSortedHitQueue 
>>>>> .getCachedComparator(FieldSortedHitQueue.java:168)
>>>>> 18009247-       at  
>>>>> org 
>>>>> .apache 
>>>>> .lucene 
>>>>> .search.FieldSortedHitQueue.<init>(FieldSortedHitQueue.java:56)
>>>>> 18009332-       at  
>>>>> org 
>>>>> .apache 
>>>>> .lucene 
>>>>> .search.TopFieldDocCollector.<init>(TopFieldDocCollector.java:43)
>>>>> 18009419-       at  
>>>>> org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java: 
>>>>> 122)
>>>>> 18009493-       at  
>>>>> org 
>>>>> .apache 
>>>>> .lucene 
>>>>> .search.MultiSearcherThread.run(ParallelMultiSearcher.java:250)
>>>>>
>>>>> Does this mean the index is corrupted? Any idea why it would be  
>>>>> corrupted?
>>>>>
>>>>> Jamie
>>>>>
>>>>>
>>>>>
>>>>> ---------------------------------------------------------------------
>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>
>>>>
>>>>
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>
>>>
>>
>>
>
>
> -- 
> Stimulus Software - MailArchiva
> Email Archiving And Compliance
> USA Tel: +1-713-366-8072 ext 3
> UK Tel: +44-20-80991035 ext 3
> Email: jamie@stimulussoft.com
> Web: http://www.mailarchiva.com
>
>
>
> < 
> indexlog 
> .tar 
> .gz 
> >---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35092-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 23 19:07:40 2008
Return-Path: <java-user-return-35092-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88887 invoked from network); 23 Jul 2008 19:07:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Jul 2008 19:07:40 -0000
Received: (qmail 12656 invoked by uid 500); 23 Jul 2008 19:07:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11663 invoked by uid 500); 23 Jul 2008 19:07:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11652 invoked by uid 99); 23 Jul 2008 19:07:32 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Jul 2008 12:07:32 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of cambazz@gmail.com designates 209.85.198.224 as permitted sender)
Received: from [209.85.198.224] (HELO rv-out-0506.google.com) (209.85.198.224)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Jul 2008 19:06:38 +0000
Received: by rv-out-0506.google.com with SMTP id f6so2529021rvb.5
        for <java-user@lucene.apache.org>; Wed, 23 Jul 2008 12:07:03 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=8YOLjWzwOW0IotiyHTb61OAlWUpuN+vdAWiF9bu6nGE=;
        b=ATsv26DF7C5Y666mwWXcnki6flDmhlbpJ7uPhS83dz1VD0fbnQhwS06GF9jm+kRHvm
         uU+tnDWLSDSSfSOvg13o7BxeUhsE8XveNXn7vOMhb8/U4CNJNWHpm+SpJhvluQ5zqSel
         kE5nj2qdcmuM8qSK5UihBLQ5Mq+4FlA5ZSqtE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=iYZTh9eJEOL9XS2H6H1KWl4IVmGtze54BeeRjXwFOmoVTJD9yA4yYNP1B3vUqzls4D
         Qzpv22+IWwXwsJFDtjiiph6SC77cwJFOAPUqds1vo4nhPyrFeU2KqYfj3enPSSqprcfS
         s0udQ1oOGsgVw6xDLe8T3mF6HYLo6VSLTGBW8=
Received: by 10.141.68.12 with SMTP id v12mr59529rvk.111.1216840023751;
        Wed, 23 Jul 2008 12:07:03 -0700 (PDT)
Received: by 10.141.168.3 with HTTP; Wed, 23 Jul 2008 12:07:03 -0700 (PDT)
Message-ID: <1bcb7c7f0807231207y22305c8bhdf53cd4624edd90f@mail.gmail.com>
Date: Wed, 23 Jul 2008 22:07:03 +0300
From: "Cam Bazz" <cambazz@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: lucene delete by query
In-Reply-To: <c68e39170807230725p23a39732l5704cad662203b85@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_143588_11213650.1216840023753"
References: <1bcb7c7f0807230653u541284e5m5f015c71fb0961c9@mail.gmail.com>
	 <c68e39170807230725p23a39732l5704cad662203b85@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_143588_11213650.1216840023753
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

how reliable is the version in the trunk? is it ok for production?



On Wed, Jul 23, 2008 at 5:25 PM, Yonik Seeley <yonik@apache.org> wrote:

> It's in the lucene trunk (current development version).
> IndexWriter.deleteDocuments(Query query)
>
> -Yonik
>
> On Wed, Jul 23, 2008 at 9:53 AM, Cam Bazz <cambazz@gmail.com> wrote:
> > hello,
> >
> > was not there a lucene delete by query feature coming up? I remember
> > something like that, but I could not find an references.
> >
> > best regards,
> > -c.b.
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_143588_11213650.1216840023753--

From java-user-return-35093-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 23 19:31:08 2008
Return-Path: <java-user-return-35093-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5105 invoked from network); 23 Jul 2008 19:31:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Jul 2008 19:31:08 -0000
Received: (qmail 41550 invoked by uid 500); 23 Jul 2008 19:31:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41524 invoked by uid 500); 23 Jul 2008 19:31:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41513 invoked by uid 99); 23 Jul 2008 19:31:01 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Jul 2008 12:31:01 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ryandetzel@gmail.com designates 64.233.184.225 as permitted sender)
Received: from [64.233.184.225] (HELO wr-out-0506.google.com) (64.233.184.225)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Jul 2008 19:30:07 +0000
Received: by wr-out-0506.google.com with SMTP id c30so1876886wra.21
        for <java-user@lucene.apache.org>; Wed, 23 Jul 2008 12:30:32 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type:content-transfer-encoding
         :content-disposition;
        bh=tjx2G9OX3GlY9IVoxTNIKt2f8FwUXuITnr0nUztHBGc=;
        b=EOe5/9n1eJHsSukxGT6cawMBmf39cNfDTh0c0ogWSxNRM78PMoLvt1D26ptj0OFy2F
         cE8i2Hc0H0TqvJfYvU2PB9ANOUfQFP4fBUOuU3sepvg8ZBNc0XsvTpErY17UbYOkM5Gm
         dl2iQHNIbPMaxm9M876wQLY+6moBp+ky2HROk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type
         :content-transfer-encoding:content-disposition;
        b=ZUCQTMjLQQb1eX5RNzJ9W/m4MBgsV4XJHPxUnNJuA2VmVkZykoM14roNEnBjFPCbqs
         T9jA0RKvcEXqv5pk9SXCPH1PZkjbv6tDjy2WTKmwVmGiTVmhvru7ja3B4drmY3m1Bg3J
         qrfxv1pWBtj+h8HsNsOrKU7jZzOtKa905/WF8=
Received: by 10.100.165.13 with SMTP id n13mr251369ane.32.1216841432154;
        Wed, 23 Jul 2008 12:30:32 -0700 (PDT)
Received: by 10.100.154.1 with HTTP; Wed, 23 Jul 2008 12:30:32 -0700 (PDT)
Message-ID: <a6221ed30807231230u19bebeddo4c2860215d9f52f@mail.gmail.com>
Date: Wed, 23 Jul 2008 15:30:32 -0400
From: "Ryan Detzel" <ryandetzel@gmail.com>
To: java-user@lucene.apache.org
Subject: Using lucene to search a bunch of keywords?
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org

Everything i've read and seen about luceen is search for keywords in
documents; I want to do the reverse. I have a huge list of
keywords("big boy","red ball","computer") and I have phrases that I
want to see if they keywords are in. For example using the small
keyword list above(store in documents in lucene) what's the best
approach to pass in a query "the girl likes red balls" and have it
match the keyword "red ball"?

Thanks.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35094-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 23 19:53:49 2008
Return-Path: <java-user-return-35094-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25814 invoked from network); 23 Jul 2008 19:53:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Jul 2008 19:53:49 -0000
Received: (qmail 75333 invoked by uid 500); 23 Jul 2008 19:53:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74373 invoked by uid 500); 23 Jul 2008 19:53:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74362 invoked by uid 99); 23 Jul 2008 19:53:41 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Jul 2008 12:53:41 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [63.87.234.181] (HELO US1-IIEX1.IICORP.DOM) (63.87.234.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Jul 2008 19:52:48 +0000
Received: from US1-IIEX1.IICORP.DOM ([10.2.11.6]) by US1-IIEX1.IICORP.DOM
 ([10.2.11.6]) with mapi; Wed, 23 Jul 2008 15:50:56 -0400
From: Robert Stewart <Robert.Stewart@INFONGEN.COM>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Wed, 23 Jul 2008 15:49:46 -0400
Subject: RE: Using lucene to search a bunch of keywords?
Thread-Topic: Using lucene to search a bunch of keywords?
Thread-Index: Acjs+mNo1o6zbCeBQgmfxdAJ9Jbn+gAAXjdQ
Message-ID: <36B4EF9511887240A973A93E7878B0560A077E812C@US1-IIEX1.IICORP.DOM>
References: <a6221ed30807231230u19bebeddo4c2860215d9f52f@mail.gmail.com>
In-Reply-To: <a6221ed30807231230u19bebeddo4c2860215d9f52f@mail.gmail.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0
X-Virus-Checked: Checked by ClamAV on apache.org

You need to invert the process.  Using Lucene may not be the best option...=
 You need to make your document a key into an index of key words.  I've don=
e the same thing, but not with Lucene. You need to pass through the documen=
t and for each word (token) lookup in some index (hashtable) to find possib=
le keywords or phrases starting with that word, and then see which ones mat=
ch, and then continue through the document.  You may be able to use lucene =
to do this, but I am not sure if it is the right tool.

What I did was create a hashtable which is keyed by the first word in each =
keyword I want to match. The value for each hashtable entry is a list of al=
l keywords starting with that word, sorted by length in descending order.  =
When I see a word in the document which has one or more keywords which star=
t with that word, enumerate the sorted list attempting to match the longer =
ones first.  If you get a match, continue processing the document from the =
end of that match.  I only have about 1million total keywords, so I just lo=
ad entire thing into a in memory hashtable, and have my own document tokeni=
zer.  I don't use Lucene at all for that.

For example, I might have keywords:

Key:"apple"
List: (sorted by length in descending order):
"apple computer company"
"apple computer inc"
"apple computer"
"apple pie"
"apple"

Then if I have a document:

"I love apple pie, but not apple computer"

It finds "apple" but the first one matches "apple pie", then second one mat=
ches "apple computer", etc.


If you need to use Lucene, you could try parsing your document into a query=
, and then issue that query (as a big Boolean OR query) to a Lucene index c=
ontaining your keywords, and then enumerate the matches. But unless you hav=
e a lot of keywords to index, it probably doesn't make sense to use Lucene =
for that.

-----Original Message-----
From: Ryan Detzel [mailto:ryandetzel@gmail.com]
Sent: Wednesday, July 23, 2008 3:31 PM
To: java-user@lucene.apache.org
Subject: Using lucene to search a bunch of keywords?

Everything i've read and seen about luceen is search for keywords in
documents; I want to do the reverse. I have a huge list of
keywords("big boy","red ball","computer") and I have phrases that I
want to see if they keywords are in. For example using the small
keyword list above(store in documents in lucene) what's the best
approach to pass in a query "the girl likes red balls" and have it
match the keyword "red ball"?

Thanks.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35095-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 23 19:57:52 2008
Return-Path: <java-user-return-35095-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 29947 invoked from network); 23 Jul 2008 19:57:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Jul 2008 19:57:52 -0000
Received: (qmail 78753 invoked by uid 500); 23 Jul 2008 19:57:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78707 invoked by uid 500); 23 Jul 2008 19:57:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78696 invoked by uid 99); 23 Jul 2008 19:57:44 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Jul 2008 12:57:44 -0700
X-ASF-Spam-Status: No, hits=-4.0 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [128.230.108.46] (HELO SUEXCL-02.ad.syr.edu) (128.230.108.46)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Jul 2008 19:56:48 +0000
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Using lucene to search a bunch of keywords?
Date: Wed, 23 Jul 2008 15:54:02 -0400
Message-ID: <9294E20AED46934EA459020706463F94C59C76@SUEXCL-02.ad.syr.edu>
In-Reply-To: <a6221ed30807231230u19bebeddo4c2860215d9f52f@mail.gmail.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Using lucene to search a bunch of keywords?
Thread-Index: Acjs+q3xjRq8edDIR5a9F449h10afgAAMGGg
From: "Steven A Rowe" <sarowe@syr.edu>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Ryan,

I'm not sure Lucene's the right tool for this job.

I have used regular expressions and ternary search trees in the past to =
do similar things.

Is the set of keywords too large for an in-memory solution like these?  =
If not, consider using a tool like the Perl package Regex::PreSuf =
<http://search.cpan.org/dist/Regex-PreSuf/> - it can convert a list of =
strings into a compact set of alternations, which you can then import =
into a Java program.  (I'm not aware of any similar Java tools.)

Steve

On 07/23/2008 at 3:30 PM, Ryan Detzel wrote:
> Everything i've read and seen about luceen is search for keywords in
> documents; I want to do the reverse. I have a huge list of
> keywords("big boy","red ball","computer") and I have phrases that I
> want to see if they keywords are in. For example using the small
> keyword list above(store in documents in lucene) what's the best
> approach to pass in a query "the girl likes red balls" and have it
> match the keyword "red ball"?

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35096-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 23 20:06:14 2008
Return-Path: <java-user-return-35096-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37503 invoked from network); 23 Jul 2008 20:06:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Jul 2008 20:06:14 -0000
Received: (qmail 89332 invoked by uid 500); 23 Jul 2008 20:06:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89302 invoked by uid 500); 23 Jul 2008 20:06:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89289 invoked by uid 99); 23 Jul 2008 20:06:07 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Jul 2008 13:06:07 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ryandetzel@gmail.com designates 66.249.82.228 as permitted sender)
Received: from [66.249.82.228] (HELO wx-out-0506.google.com) (66.249.82.228)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Jul 2008 20:05:10 +0000
Received: by wx-out-0506.google.com with SMTP id h29so860629wxd.20
        for <java-user@lucene.apache.org>; Wed, 23 Jul 2008 13:05:34 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:from:to
         :in-reply-to:content-type:content-transfer-encoding:mime-version
         :subject:date:references:x-mailer;
        bh=ljfS2Qj0bT5GWId/p3s7K90EF4RUb/JYlUE0k7WVNWQ=;
        b=ZHqjYb0oKHnSGwv+87uRyFnOveG89hlCbTkxubwyPHM+SwmDvuWvqmwl0qWpDHijXr
         jC6CnbWPbOEB7eqNegQGj7GsP0oiaiAxIDn2ssp9XtnFDinB+M7AFmhSA2EzvK2uMgCX
         BAi6BVWAXbB4CVKuw6MKKU1A7xwp38Fk77IfU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:from:to:in-reply-to:content-type
         :content-transfer-encoding:mime-version:subject:date:references
         :x-mailer;
        b=fbHDueqz6v5TUq7nD0ZjjG0S0njmJi74yf5VCLmMjCZyIlB3WNHaQ4Wgn/dTRQ0QyH
         Z3KDEgINslbwu30S4Dv12EZfYvO/v6rwC4jgr+V1evyDviwTyonxppMMOWL5OwwQHNgO
         6+3hxBSmPpO3vPoOTliaJsTPrjSF9icoefNOg=
Received: by 10.70.57.5 with SMTP id f5mr197592wxa.51.1216843534150;
        Wed, 23 Jul 2008 13:05:34 -0700 (PDT)
Received: from ?192.168.1.153? ( [207.190.216.139])
        by mx.google.com with ESMTPS id i39sm17465298wxd.30.2008.07.23.13.05.32
        (version=SSLv3 cipher=RC4-MD5);
        Wed, 23 Jul 2008 13:05:33 -0700 (PDT)
Message-Id: <A00DA5C6-3998-42CC-9804-EA66E48143A8@gmail.com>
From: Ryan D <ryandetzel@gmail.com>
To: java-user@lucene.apache.org
In-Reply-To: <9294E20AED46934EA459020706463F94C59C76@SUEXCL-02.ad.syr.edu>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: Using lucene to search a bunch of keywords?
Date: Wed, 23 Jul 2008 16:05:25 -0400
References: <9294E20AED46934EA459020706463F94C59C76@SUEXCL-02.ad.syr.edu>
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org

Heh, actually I'm using Perl but I've always associated text-search  
with Lucene, I'm not sure if it's the best solution or not. On the  
small side there are 1.6 million keywords, on the large side there are  
well over 100 million but I might find another way to break down the  
searches into smaller searches(send A-G server1, H-R to server2...etc).

Is there another search tool that might be better suited for  
this...the only thing I can relate this too is how AdWords works. A  
user enters a query in the Google search box and they search their  
database for people who've purchased those keywords to the appropriate  
ads.  What I'm doing is similar but without the payday. :-{

Currently I'm using a (huge) hash table and regular expressions  
($query =~ /$keyword/) going down the list from largest to smallest  
but I know this is not a long term solution especially if I have to  
load the large 100 million+ list in.

Thanks.


On Jul 23, 2008, at 3:54 PM, Steven A Rowe wrote:

> Hi Ryan,
>
> I'm not sure Lucene's the right tool for this job.
>
> I have used regular expressions and ternary search trees in the past  
> to do similar things.
>
> Is the set of keywords too large for an in-memory solution like  
> these?  If not, consider using a tool like the Perl package  
> Regex::PreSuf <http://search.cpan.org/dist/Regex-PreSuf/> - it can  
> convert a list of strings into a compact set of alternations, which  
> you can then import into a Java program.  (I'm not aware of any  
> similar Java tools.)
>
> Steve
>
> On 07/23/2008 at 3:30 PM, Ryan Detzel wrote:
>> Everything i've read and seen about luceen is search for keywords in
>> documents; I want to do the reverse. I have a huge list of
>> keywords("big boy","red ball","computer") and I have phrases that I
>> want to see if they keywords are in. For example using the small
>> keyword list above(store in documents in lucene) what's the best
>> approach to pass in a query "the girl likes red balls" and have it
>> match the keyword "red ball"?
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35097-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 23 20:09:27 2008
Return-Path: <java-user-return-35097-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 39596 invoked from network); 23 Jul 2008 20:09:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Jul 2008 20:09:27 -0000
Received: (qmail 94238 invoked by uid 500); 23 Jul 2008 20:09:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94193 invoked by uid 500); 23 Jul 2008 20:09:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94182 invoked by uid 99); 23 Jul 2008 20:09:19 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Jul 2008 13:09:19 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of cambazz@gmail.com designates 209.85.198.235 as permitted sender)
Received: from [209.85.198.235] (HELO rv-out-0506.google.com) (209.85.198.235)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Jul 2008 20:08:25 +0000
Received: by rv-out-0506.google.com with SMTP id f6so2554415rvb.5
        for <java-user@lucene.apache.org>; Wed, 23 Jul 2008 13:08:50 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type;
        bh=I/exrZHgbeO6SFFkmPD66wFeu/PWpvJuXrugC74aXnk=;
        b=SB/9hGQVw5/f2Q3dno7vgaoAwHK8kZgUl9vrBDgoI056WOtA54045vfua3+S1ZRxI9
         KjGVl/tFlfwGCS9X26pH637+h+3MCW+zdjpr6XABlcXZCdewX/KtVGDkqSIZ4Ya3YNnO
         G3WHr8cjaaLPUDs04Ej8C2FWqfrmCA927r2os=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=xdNrSgCvxd+u8dKTja6Z7EIzu/orlwwaqx0WlRznne9pomu2JzA5c7bcC0paaZ5cFU
         i3hkMhFijlMVnnI4nktwyz6YRy9D++ywIWClPdpFHtJlbSiIl7gM6E/PhMlQsv7HnV3b
         jz0WTSaKIfAhc+DyZo4TcFtcGNeqbBYwbdB3A=
Received: by 10.141.169.11 with SMTP id w11mr92342rvo.76.1216843730322;
        Wed, 23 Jul 2008 13:08:50 -0700 (PDT)
Received: by 10.141.168.3 with HTTP; Wed, 23 Jul 2008 13:08:50 -0700 (PDT)
Message-ID: <1bcb7c7f0807231308v22b80e9fpa5147ca20fc470e3@mail.gmail.com>
Date: Wed, 23 Jul 2008 23:08:50 +0300
From: "Cam Bazz" <cambazz@gmail.com>
To: java-user@lucene.apache.org
Subject: deleting documents with doc id
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_144401_244526.1216843730349"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_144401_244526.1216843730349
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

hello -

if I make a query and get the document ids and delete with the document id -
could there be a side effect?

my index is committed periodically, but i can not say when it is committed.

best regards,
-c.b.

------=_Part_144401_244526.1216843730349--

From java-user-return-35098-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 23 21:13:21 2008
Return-Path: <java-user-return-35098-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97572 invoked from network); 23 Jul 2008 21:13:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Jul 2008 21:13:21 -0000
Received: (qmail 55127 invoked by uid 500); 23 Jul 2008 21:13:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55104 invoked by uid 500); 23 Jul 2008 21:13:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55093 invoked by uid 99); 23 Jul 2008 21:13:13 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Jul 2008 14:13:13 -0700
X-ASF-Spam-Status: No, hits=-4.0 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [128.230.108.46] (HELO SUEXCL-02.ad.syr.edu) (128.230.108.46)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Jul 2008 21:12:18 +0000
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Using lucene to search a bunch of keywords?
Date: Wed, 23 Jul 2008 17:09:34 -0400
Message-ID: <9294E20AED46934EA459020706463F94C59C7D@SUEXCL-02.ad.syr.edu>
In-Reply-To: <A00DA5C6-3998-42CC-9804-EA66E48143A8@gmail.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Using lucene to search a bunch of keywords?
Thread-Index: Acjs/5PzuTmksRhXRH6CN93yARrU0gAAQ0vA
From: "Steven A Rowe" <sarowe@syr.edu>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Ryan,

Well, at 100 million+ keywords, Lucene might be the right tool.

One thing that you might check out for the query side is Karl Wettin's =
recently committed ShingleMatrixAnalyzer (not in any Lucene release yet =
- only on the trunk).

The JUnit test class TestShingleMatrixFilter has an example of splitting =
an input string into "shingles" (a.k.a. "token n-grams") - in this =
example the input string "please divide this sentence into shingles" is =
converted into the following terms by requesting a minimum shingle size =
of one token and a maximum of two tokens, and using the space character =
to join the tokens together:

"please", "please divide", "divide", "divide this", "this", "this =
sentence", "sentence",  "sentence into", "into", "into shingles", =
"shingles"

You could index your keywords list as-is with no tokenization; break up =
your queries using a WhitespaceTokenizer connected to a =
ShingleMatrixFilter, with the minimum shingle size set to one and the =
maximum set to the number of tokens in keyword with the most tokens; and =
then build a BooleanQuery with one clause per shingle, each set to =
BooleanClause.Occur.SHOULD.

Steve

On 07/23/2008 at 4:05 PM, Ryan D wrote:
> Heh, actually I'm using Perl but I've always associated text-search =
with
> Lucene, I'm not sure if it's the best solution or not. On the small =
side
> there are 1.6 million keywords, on the large side there are well over
> 100 million but I might find another way to break down the searches =
into
> smaller searches(send A-G server1, H-R to server2...etc).
>=20
> Is there another search tool that might be better suited for =
this...the
> only thing I can relate this too is how AdWords works. A user enters a
> query in the Google search box and they search their database for =
people
> who've purchased those keywords to the appropriate ads.  What I'm =
doing
> is similar but without the payday. :-{
>=20
> Currently I'm using a (huge) hash table and regular expressions
> ($query =3D~ /$keyword/) going down the list from largest to smallest
> but I know this is not a long term solution especially if I have to
> load the large 100 million+ list in.
>=20
> Thanks.
>=20
>=20
> On Jul 23, 2008, at 3:54 PM, Steven A Rowe wrote:
>=20
> > Hi Ryan,
> >=20
> > I'm not sure Lucene's the right tool for this job.
> >=20
> > I have used regular expressions and ternary search trees in the past =
to
> > do similar things.
> >=20
> > Is the set of keywords too large for an in-memory solution like =
these?=20
> > If not, consider using a tool like the Perl package Regex::PreSuf
> > <http://search.cpan.org/dist/Regex-PreSuf/> - it can convert a list =
of
> > strings into a compact set of alternations, which you can then =
import
> > into a Java program.  (I'm not aware of any similar Java tools.)
> >=20
> > Steve
> >=20
> > On 07/23/2008 at 3:30 PM, Ryan Detzel wrote:
> > > Everything i've read and seen about luceen is search for keywords =
in
> > > documents; I want to do the reverse. I have a huge list of
> > > keywords("big boy","red ball","computer") and I have phrases that =
I
> > > want to see if they keywords are in. For example using the small
> > > keyword list above(store in documents in lucene) what's the best
> > > approach to pass in a query "the girl likes red balls" and have it
> > > match the keyword "red ball"?

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35099-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 23 21:17:20 2008
Return-Path: <java-user-return-35099-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99845 invoked from network); 23 Jul 2008 21:17:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Jul 2008 21:17:20 -0000
Received: (qmail 70824 invoked by uid 500); 23 Jul 2008 21:17:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70805 invoked by uid 500); 23 Jul 2008 21:17:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70794 invoked by uid 99); 23 Jul 2008 21:17:12 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Jul 2008 14:17:12 -0700
X-ASF-Spam-Status: No, hits=-4.0 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [128.230.108.46] (HELO SUEXCL-02.ad.syr.edu) (128.230.108.46)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Jul 2008 21:16:18 +0000
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Using lucene to search a bunch of keywords?
Date: Wed, 23 Jul 2008 17:13:55 -0400
Message-ID: <9294E20AED46934EA459020706463F94C59C7E@SUEXCL-02.ad.syr.edu>
In-Reply-To: <9294E20AED46934EA459020706463F94C59C7D@SUEXCL-02.ad.syr.edu>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Using lucene to search a bunch of keywords?
Thread-Index: Acjs/5PzuTmksRhXRH6CN93yARrU0gAAQ0vAAAINX5A=
From: "Steven A Rowe" <sarowe@syr.edu>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

On 07/23/2008 at 5:09 PM, Steven A Rowe wrote:
> Karl Wettin's recently committed ShingleMatrixAnalyzer

Oops, "ShingleMatrixAnalyzer" -> "ShingleMatrixFilter".=20

Steve

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35100-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 23 21:18:08 2008
Return-Path: <java-user-return-35100-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 271 invoked from network); 23 Jul 2008 21:18:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Jul 2008 21:18:08 -0000
Received: (qmail 73787 invoked by uid 500); 23 Jul 2008 21:18:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73754 invoked by uid 500); 23 Jul 2008 21:18:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73743 invoked by uid 99); 23 Jul 2008 21:18:00 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Jul 2008 14:18:00 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [80.237.132.108] (HELO wp101.webpack.hosteurope.de) (80.237.132.108)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Jul 2008 21:17:03 +0000
Received: from p5b244853.dip.t-dialin.net ([91.36.72.83] helo=[192.168.0.4]); authenticated
	by wp101.webpack.hosteurope.de running ExIM  using esmtpsa (TLSv1:RC4-SHA:128)
	id 1KLlf8-00038a-8r; Wed, 23 Jul 2008 23:14:18 +0200
Message-Id: <A93C8C52-EA08-46CF-9843-7D5FA166397A@johannet.de>
From: Johannes Dorn <johannes@johannet.de>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Search returns empty Documents
Date: Wed, 23 Jul 2008 23:14:17 +0200
X-Mailer: Apple Mail (2.926)
X-bounce-key: webpack.hosteurope.de;johannes@johannet.de;1216847868;57aa6ecf;
X-Virus-Checked: Checked by ClamAV on apache.org

Hello,
I am quite new to Lucene.
I've added a search to my application by combining the getting started  
application and the xml#1 contribution.

Here are the methods used to generate the index.

	public static void generateIndex() {
		try {
			if (!docDir.exists() || !docDir.canRead()) {
				System.out.println("Document directory '" +docDir.getAbsolutePath() 
+ "' does not exist or is not readable, please check the path");
				System.exit(1);
			}	
			IndexWriter writer = new IndexWriter(INDEX_DIR, new  
StandardAnalyzer(), true);
			indexDocs(writer, docDir);
			writer.optimize();
			writer.close();
		} catch (IOException e) {
			System.out.println(e.getMessage());
		}
	}

	private static void indexDocs(IndexWriter writer, File file) throws  
IOException {
		if (file.canRead()) {
			if (!file.getName().substring(0, 1).equals(".")) {
				if (file.isDirectory() && file.equals(docDir)) {
					String[] files = file.list();
					if (files != null) {
						for (int i=0; i<files.length; i++) {			
							indexDocs(writer, new File(file+"/"+files[i]));
						}
					}
				}
				else {
					try {
						saxParserFactory = SAXParserFactory.newInstance();
						saxParserFactory.setValidating(false);
						SAXParser saxParser = saxParserFactory.newSAXParser();
						xmlReader = saxParser.getXMLReader();

						transformerFactory = TransformerFactory.newInstance();
						Transformer transformer = transformerFactory.newTransformer(new  
StreamSource(xslFileSite.toURL().toString()));
						xmlIndexer = new XMLIndexer(writer,xmlReader,transformer);
						xmlIndexer.indexFile(file);
					}
					catch (Exception ex) {
						System.out.println(ex);
					}
				}
			}
		}			
	}

    public void startElement(String namespaceURI, String localName,
                             String rawName, Attributes atts)
		throws SAXException
    {
    	if(rawName.equals("field") || rawName.equals("datefield"))
    	{
    		currentField = new FieldHolder();
			currentField.type = rawName;
			currentField.name = atts.getValue("name");
			currentField.value = new StringBuffer();
			currentField.store = atts.getValue("store").equals("true") ?  
true:false;
			currentField.index = atts.getValue("index").equals("true") ?  
true:false;
			currentField.token = atts.getValue("token").equals("true") ?  
true:false;
			inField = true;
		}
    }

    public void characters(char[] ch, int start, int length) throws  
SAXException
    {
		if(inField)
		{
			currentField.value.append(ch,start,length);
		}
	}

	public void endElement(java.lang.String namespaceURI,
                       java.lang.String localName,
                       java.lang.String qName)
                throws SAXException
	{
		fieldHolders.add(currentField);
		inField = false;
	}

	public void indexFile(File xmlFile) throws Exception
	{
		if(xmlFile.exists())
		{
			try
			{
				ByteArrayOutputStream byteOutputStream = new  
ByteArrayOutputStream((int)(xmlFile.length())*2);
				BufferedOutputStream bufferedOutputStream = new  
BufferedOutputStream(byteOutputStream);
				StreamResult streamResult = new StreamResult(bufferedOutputStream);

				FileInputStream fileInputStream = new FileInputStream(xmlFile);
				StreamSource streamSource = new StreamSource(new  
BufferedInputStream(fileInputStream));
				transformer.transform(streamSource,streamResult);
				BufferedInputStream inputStream = new BufferedInputStream(new  
ByteArrayInputStream(byteOutputStream.toByteArray()));
				xmlReader.parse(new InputSource(inputStream));

				Document doc = new Document();
				for(int i=0; i<2; i++)
				{
					FieldHolder fieldHolder = (FieldHolder)(fieldHolders.get(i));
					
					//Modified by Johannes Dorn
					Field.Store store = Field.Store.YES;
					if (fieldHolder.store == false)
						store = Field.Store.NO;
					
					Field.Index index = Field.Index.NO;
					if (fieldHolder.index) {
						if (fieldHolder.token)
							index = Field.Index.TOKENIZED;
						else
							index = Field.Index.UN_TOKENIZED;
					}
					
			//		if(!fieldHolder.value.toString().trim().equals(""))
					   doc.add(new  
Field(fieldHolder.name,fieldHolder.value.toString(),store,index));
					//End of Modifications
				}
				writer.addDocument(doc);
			}
			catch (Exception exception)
			{
				transformer.clearParameters();
				//put log messages here
			}
		}
		else
		{
			//put log messages here
		}
	}

And now the search:

	public static Vector<String> search(String searchText) throws  
Exception {
		Vector<String> result = new Vector<String>();
		String index = "index";
		String defaultField = "text";

		IndexReader reader = IndexReader.open(index);
		Searcher searcher = new IndexSearcher(reader);
		Analyzer analyzer = new StandardAnalyzer();

		QueryParser parser = new QueryParser(defaultField, analyzer);

		Query query = parser.parse(searchText);

		Hits hits = searcher.search(query);
		for (int i = 0; i < hits.length(); i++) {
			Document doc = hits.doc(i);
			String path = doc.get("path");
			if (path != null) {
				String title = path;
				int pos = title.indexOf("/");
				title = title.substring(pos+1);
				pos = title.indexOf("/");
				title = title.substring(pos+1);
				if (title != null) {
					result.add(title);
				}
			} else {
			}
		}
		reader.close();
		searcher.close();
		return result;
	}


Right now, I only index and search two files.
If i search for a word, that is in either of these files, hits has  
three docs, all of whice are null.

What am i doing wrong here?

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35101-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 23 22:22:37 2008
Return-Path: <java-user-return-35101-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 55779 invoked from network); 23 Jul 2008 22:22:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Jul 2008 22:22:37 -0000
Received: (qmail 98952 invoked by uid 500); 23 Jul 2008 22:22:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98914 invoked by uid 500); 23 Jul 2008 22:22:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98903 invoked by uid 99); 23 Jul 2008 22:22:29 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Jul 2008 15:22:29 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [80.237.132.108] (HELO wp101.webpack.hosteurope.de) (80.237.132.108)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Jul 2008 22:21:32 +0000
Received: from p5b244853.dip.t-dialin.net ([91.36.72.83] helo=[192.168.0.4]); authenticated
	by wp101.webpack.hosteurope.de running ExIM  using esmtpsa (TLSv1:RC4-SHA:128)
	id 1KLmfV-0001qf-JK; Thu, 24 Jul 2008 00:18:46 +0200
Message-Id: <7BAA91D2-B3BD-437E-B9EC-F37279CF8D84@johannet.de>
From: Johannes Dorn <johannes@johannet.de>
To: java-user@lucene.apache.org
In-Reply-To: <A93C8C52-EA08-46CF-9843-7D5FA166397A@johannet.de>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: Search returns empty Documents
Date: Thu, 24 Jul 2008 00:18:41 +0200
References: <A93C8C52-EA08-46CF-9843-7D5FA166397A@johannet.de>
X-Mailer: Apple Mail (2.926)
X-bounce-key: webpack.hosteurope.de;johannes@johannet.de;1216851737;f517363e;
X-Virus-Checked: Checked by ClamAV on apache.org

Hello,
i found my mistake.
i forgot to add the files path to the document.


greetings
Johannes Dorn

Am 23.07.2008 um 23:14 schrieb Johannes Dorn:

> Hello,
> I am quite new to Lucene.
> I've added a search to my application by combining the getting  
> started application and the xml#1 contribution.
>
> Here are the methods used to generate the index.
>
> 	public static void generateIndex() {
> 		try {
> 			if (!docDir.exists() || !docDir.canRead()) {
> 				System.out.println("Document directory '"  
> +docDir.getAbsolutePath()+ "' does not exist or is not readable,  
> please check the path");
> 				System.exit(1);
> 			}	
> 			IndexWriter writer = new IndexWriter(INDEX_DIR, new  
> StandardAnalyzer(), true);
> 			indexDocs(writer, docDir);
> 			writer.optimize();
> 			writer.close();
> 		} catch (IOException e) {
> 			System.out.println(e.getMessage());
> 		}
> 	}
>
> 	private static void indexDocs(IndexWriter writer, File file) throws  
> IOException {
> 		if (file.canRead()) {
> 			if (!file.getName().substring(0, 1).equals(".")) {
> 				if (file.isDirectory() && file.equals(docDir)) {
> 					String[] files = file.list();
> 					if (files != null) {
> 						for (int i=0; i<files.length; i++) {			
> 							indexDocs(writer, new File(file+"/"+files[i]));
> 						}
> 					}
> 				}
> 				else {
> 					try {
> 						saxParserFactory = SAXParserFactory.newInstance();
> 						saxParserFactory.setValidating(false);
> 						SAXParser saxParser = saxParserFactory.newSAXParser();
> 						xmlReader = saxParser.getXMLReader();
>
> 						transformerFactory = TransformerFactory.newInstance();
> 						Transformer transformer =  
> transformerFactory.newTransformer(new  
> StreamSource(xslFileSite.toURL().toString()));
> 						xmlIndexer = new XMLIndexer(writer,xmlReader,transformer);
> 						xmlIndexer.indexFile(file);
> 					}
> 					catch (Exception ex) {
> 						System.out.println(ex);
> 					}
> 				}
> 			}
> 		}			
> 	}
>
>   public void startElement(String namespaceURI, String localName,
>                            String rawName, Attributes atts)
> 		throws SAXException
>   {
>   	if(rawName.equals("field") || rawName.equals("datefield"))
>   	{
>   		currentField = new FieldHolder();
> 			currentField.type = rawName;
> 			currentField.name = atts.getValue("name");
> 			currentField.value = new StringBuffer();
> 			currentField.store = atts.getValue("store").equals("true") ?  
> true:false;
> 			currentField.index = atts.getValue("index").equals("true") ?  
> true:false;
> 			currentField.token = atts.getValue("token").equals("true") ?  
> true:false;
> 			inField = true;
> 		}
>   }
>
>   public void characters(char[] ch, int start, int length) throws  
> SAXException
>   {
> 		if(inField)
> 		{
> 			currentField.value.append(ch,start,length);
> 		}
> 	}
>
> 	public void endElement(java.lang.String namespaceURI,
>                      java.lang.String localName,
>                      java.lang.String qName)
>               throws SAXException
> 	{
> 		fieldHolders.add(currentField);
> 		inField = false;
> 	}
>
> 	public void indexFile(File xmlFile) throws Exception
> 	{
> 		if(xmlFile.exists())
> 		{
> 			try
> 			{
> 				ByteArrayOutputStream byteOutputStream = new  
> ByteArrayOutputStream((int)(xmlFile.length())*2);
> 				BufferedOutputStream bufferedOutputStream = new  
> BufferedOutputStream(byteOutputStream);
> 				StreamResult streamResult = new  
> StreamResult(bufferedOutputStream);
>
> 				FileInputStream fileInputStream = new FileInputStream(xmlFile);
> 				StreamSource streamSource = new StreamSource(new  
> BufferedInputStream(fileInputStream));
> 				transformer.transform(streamSource,streamResult);
> 				BufferedInputStream inputStream = new BufferedInputStream(new  
> ByteArrayInputStream(byteOutputStream.toByteArray()));
> 				xmlReader.parse(new InputSource(inputStream));
>
> 				Document doc = new Document();
> 				for(int i=0; i<2; i++)
> 				{
> 					FieldHolder fieldHolder = (FieldHolder)(fieldHolders.get(i));
> 					
> 					//Modified by Johannes Dorn
> 					Field.Store store = Field.Store.YES;
> 					if (fieldHolder.store == false)
> 						store = Field.Store.NO;
> 					
> 					Field.Index index = Field.Index.NO;
> 					if (fieldHolder.index) {
> 						if (fieldHolder.token)
> 							index = Field.Index.TOKENIZED;
> 						else
> 							index = Field.Index.UN_TOKENIZED;
> 					}
> 					
> 			//		if(!fieldHolder.value.toString().trim().equals(""))
> 					   doc.add(new  
> Field(fieldHolder.name,fieldHolder.value.toString(),store,index));
> 					//End of Modifications
> 				}
> 				writer.addDocument(doc);
> 			}
> 			catch (Exception exception)
> 			{
> 				transformer.clearParameters();
> 				//put log messages here
> 			}
> 		}
> 		else
> 		{
> 			//put log messages here
> 		}
> 	}
>
> And now the search:
>
> 	public static Vector<String> search(String searchText) throws  
> Exception {
> 		Vector<String> result = new Vector<String>();
> 		String index = "index";
> 		String defaultField = "text";
>
> 		IndexReader reader = IndexReader.open(index);
> 		Searcher searcher = new IndexSearcher(reader);
> 		Analyzer analyzer = new StandardAnalyzer();
>
> 		QueryParser parser = new QueryParser(defaultField, analyzer);
>
> 		Query query = parser.parse(searchText);
>
> 		Hits hits = searcher.search(query);
> 		for (int i = 0; i < hits.length(); i++) {
> 			Document doc = hits.doc(i);
> 			String path = doc.get("path");
> 			if (path != null) {
> 				String title = path;
> 				int pos = title.indexOf("/");
> 				title = title.substring(pos+1);
> 				pos = title.indexOf("/");
> 				title = title.substring(pos+1);
> 				if (title != null) {
> 					result.add(title);
> 				}
> 			} else {
> 			}
> 		}
> 		reader.close();
> 		searcher.close();
> 		return result;
> 	}
>
>
> Right now, I only index and search two files.
> If i search for a word, that is in either of these files, hits has  
> three docs, all of whice are null.
>
> What am i doing wrong here?
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35102-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 23 23:14:52 2008
Return-Path: <java-user-return-35102-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 189 invoked from network); 23 Jul 2008 23:14:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Jul 2008 23:14:49 -0000
Received: (qmail 56245 invoked by uid 500); 23 Jul 2008 23:14:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56210 invoked by uid 500); 23 Jul 2008 23:14:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56188 invoked by uid 99); 23 Jul 2008 23:14:41 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Jul 2008 16:14:41 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of karl.wettin@gmail.com designates 66.249.92.174 as permitted sender)
Received: from [66.249.92.174] (HELO ug-out-1314.google.com) (66.249.92.174)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Jul 2008 23:13:46 +0000
Received: by ug-out-1314.google.com with SMTP id h3so567240ugf.29
        for <java-user@lucene.apache.org>; Wed, 23 Jul 2008 16:13:52 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:from:to
         :in-reply-to:content-type:content-transfer-encoding:mime-version
         :subject:date:references:x-mailer;
        bh=nYvYBj1Ms/gGtwdELQSRUkrfYfYjVl1yt/zXciyRN8s=;
        b=L/UAHeIug9GOOtIqGSfyfT9dmVbgImC1Xt5cZDAGqRIZgR6I4n53oM6XDjzwj95CpY
         mfUa0TRH06LnBp+hujbEtXTPYfu4JYFIrVX+kcTVovJlQ8N80jZxelRtwX6tBStaSvi0
         hea5HIncLbxKwgQkj1XoETnxpc2NIBxSA1Y80=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:from:to:in-reply-to:content-type
         :content-transfer-encoding:mime-version:subject:date:references
         :x-mailer;
        b=Pc0vR97vbSCBLUtd9+vHOhDb8dD3gvCG8iBAX6GsE9LDqWR1lJ3xFtr2Qu6UF8xbET
         1sMjpupGLZOw4HYE7m8AhLV9OlpqsmzjD+M0wHBsxw30WUyc6am4bMRDwnPAv7Aby9/k
         Qfs2Qp3qRdUfP5/y2mF3+cPzg5yUEohR7Soqw=
Received: by 10.66.245.2 with SMTP id s2mr87928ugh.80.1216854832651;
        Wed, 23 Jul 2008 16:13:52 -0700 (PDT)
Received: from kodapan.lan ( [82.93.70.124])
        by mx.google.com with ESMTPS id g30sm14546202ugd.61.2008.07.23.16.13.48
        (version=SSLv3 cipher=RC4-MD5);
        Wed, 23 Jul 2008 16:13:50 -0700 (PDT)
Message-Id: <55B38F3C-C416-42FD-855D-19DBC03D3D57@gmail.com>
From: Karl Wettin <karl.wettin@gmail.com>
To: java-user@lucene.apache.org
In-Reply-To: <1bcb7c7f0807231308v22b80e9fpa5147ca20fc470e3@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: deleting documents with doc id
Date: Thu, 24 Jul 2008 01:13:46 +0200
References: <1bcb7c7f0807231308v22b80e9fpa5147ca20fc470e3@mail.gmail.com>
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org


23 jul 2008 kl. 22.08 skrev Cam Bazz:

> hello -
>
> if I make a query and get the document ids and delete with the  
> document id -
> could there be a side effect?
>
> my index is committed periodically, but i can not say when it is  
> committed.

The only thing is that the deltions will not be visible until you  
create a new IndexReader. Also, lots and lots of deletions without  
optimizing an index can have an impact on performance, but that is not  
something you are likely to encounter.


       karl

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35103-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 23 23:19:44 2008
Return-Path: <java-user-return-35103-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 2506 invoked from network); 23 Jul 2008 23:19:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Jul 2008 23:19:43 -0000
Received: (qmail 59883 invoked by uid 500); 23 Jul 2008 23:19:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59857 invoked by uid 500); 23 Jul 2008 23:19:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59846 invoked by uid 99); 23 Jul 2008 23:19:36 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Jul 2008 16:19:36 -0700
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of chris.lu@gmail.com designates 209.85.128.190 as permitted sender)
Received: from [209.85.128.190] (HELO fk-out-0910.google.com) (209.85.128.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Jul 2008 23:18:40 +0000
Received: by fk-out-0910.google.com with SMTP id 18so1772269fkq.5
        for <java-user@lucene.apache.org>; Wed, 23 Jul 2008 16:19:04 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=nohxmtL56UWdD4ZwdtFj/4KxmX1G30rZmVVKYmfir10=;
        b=lollMCYbEMffb6wYWccR8p8qzeWLlBLDLbfIJeHMzpFZp6pfcNHGEew+Ai++WWbk6b
         5lJGiDEll2+4u/5QzFaKYa4uz8T+IYD/kW74xtXIBCbE26GSbdtkME7Vtq/+g1eyCMeU
         LfY0pU139Z1XsECVU6i1zILP+aoq9yV9vObgQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=RUuxriCZddsojfyKZjVQA34UawTgKhB0TiTp7qWqZ2u0lLoHGRcRmsY1dxtzLZeHcG
         /z9SWsl+qECERbGnsQEc5VjbmzLMPRiWhJEKt5G9BvMYpSMthqJenBwQVYq6SiFrqoB1
         5fTn+U5Q2XYah8Bz8Qf1FitoLhzC7Q6nuqP70=
Received: by 10.125.142.5 with SMTP id u5mr19376mkn.126.1216855143761;
        Wed, 23 Jul 2008 16:19:03 -0700 (PDT)
Received: by 10.125.148.8 with HTTP; Wed, 23 Jul 2008 16:19:03 -0700 (PDT)
Message-ID: <6e3ae6310807231619g37a3636cre6fc37fada34308c@mail.gmail.com>
Date: Wed, 23 Jul 2008 16:19:03 -0700
From: "Chris Lu" <chris.lu@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: How to avoid duplicate records in lucene
In-Reply-To: <18603752.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_304_13614966.1216855143753"
References: <18543588.post@talk.nabble.com>
	 <857030.20618.qm@web26001.mail.ukl.yahoo.com>
	 <18603752.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_304_13614966.1216855143753
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Sebastin,

Lucene is just like a plain database table. It doesn't have uniqueness
constraint.
So you can have two documents of the exact same content.

What you should do is to check for duplication before adding. And if
duplication is found, delete the old Document and add a new Document.
This way, you can control what your "unique key" is.

-- 
Chris Lu
-------------------------
Instant Scalable Full-Text Search On Any Database/Application
site: http://www.dbsight.net
demo: http://search.dbsight.com
Lucene Database Search in 3 minutes:
http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_minutes
DBSight customer, a shopping comparison site, (anonymous per request) got
2.6 Million Euro funding!

On Tue, Jul 22, 2008 at 9:36 PM, Sebastin <sebasmtech@gmail.com> wrote:

>
> Erick,
>
> example,
>
> IndexWriter writer = new IndexWriter("C:/index",new
> StandardAnalyzer(),true);
>
> String records = "Lucene" +" " +"action"+" "+"book" ;
>
> Document doc = new Document();
>
> doc.add(new
> Field("contents",records,Field.Store.YES,Field.Index.TOKENIZED));
>
>
> writer.addDocument(doc);
> writer.optimize();
> writer.close();
>
>
> when the records is inserted twice,while querying for "Lucene" it will
> display the same record twice.
>
>
>
>
>
>
>
>
> mark harwood wrote:
> >
> >>>Well, the point of my question was to insure that we were all using
> common terms.
> >
> > Sorry, Erick. I thought your "define duplicate" question was asking me
> > about DuplicateFilter's concept of duplicates rather than asking the
> > original poster about his notion of what a duplicate document meant to
> > him. You're right it would be useful to understand more about the
> > intention of the original message.
> >
> > Cheers
> > Mark
> >
> >
> >
> >
> >
> > ----- Original Message ----
> > From: Erick Erickson <erickerickson@gmail.com>
> > To: java-user@lucene.apache.org
> > Sent: Tuesday, 22 July, 2008 2:37:50 PM
> > Subject: Re: How to avoid duplicate records in lucene
> >
> > Well, the point of my question was to insure that we were all using
> common
> > terms. For all we know, the original questioner considered "duplicate"
> > records ones that had identical, or even similar text. Nothing in the
> > original question indicated any de-dup happening.
> >
> > I've often found that assumptions that we are all talking about the same
> > thing are...er...incorrect. And I don't want to waste my time answering
> > questions that weren't what was asked......
> >
> > Best
> > Erick
> >
> > On Mon, Jul 21, 2008 at 2:44 PM, markharw00d <markharw00d@yahoo.co.uk>
> > wrote:
> >
> >> >>could you define duplicate?
> >>
> >> That's your choice of field that you want to de-dup on.
> >> That could be a field such as "DatabasePrimaryKey" or perhaps a field
> >> containing an MD5 hash of document content.
> >> The DuplicateFilter ensures only one document can exist in results for
> >> each
> >> unique value for the choice of field.
> >>
> >> Cheers
> >> Mark
> >>
> >> Erick Erickson wrote:
> >>
> >>> could you define duplicate? As far as I know, you don't
> >>> get the same (internal) doc id back more than once, so what
> >>> is a duplicate?
> >>>
> >>> Best
> >>> Erick
> >>>
> >>> On Mon, Jul 21, 2008 at 9:40 AM, Sebastin <sebasmtech@gmail.com>
> wrote:
> >>>
> >>>
> >>>
> >>>> at the time search , while querying the data
> >>>> markrmiller wrote:
> >>>>
> >>>>
> >>>>> Sebastin wrote:
> >>>>>
> >>>>>
> >>>>>> Hi All,
> >>>>>>
> >>>>>> Is there any possibility to avoid duplicate records in lucene
>  2.3.1?
> >>>>>>
> >>>>>>
> >>>>>>
> >>>>> I don't believe that there is a very high performance way to do this.
> >>>>> You are basically going to have to query the index for an id before
> >>>>> adding a new doc. The best way I can think of off the top of my head
> >>>>> is
> >>>>> to batch - first check that ids in the batch are unique, then check
> >>>>> all
> >>>>> ids in the batch against the IndexReader, then add the ones that are
> >>>>> not
> >>>>> dupes. Of course all of your docs would have to be added through this
> >>>>> single choke point so that you knew other threads had not added that
> >>>>> id
> >>>>> after the first thread had looked but before it added the doc.
> >>>>>
> >>>>> I think Mark H has you covered if getting the dupes out after are
> >>>>> okay.
> >>>>>
> >>>>> - Mark
> >>>>>
> >>>>> ---------------------------------------------------------------------
> >>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>>>>
> >>>>>
> >>>>>
> >>>>>
> >>>>>
> >>>> --
> >>>> View this message in context:
> >>>>
> >>>>
> http://www.nabble.com/How-to-avoid-duplicate-records-in-lucene-tp18543588p18568862.html
> >>>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
> >>>>
> >>>>
> >>>> ---------------------------------------------------------------------
> >>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >>>> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>>>
> >>>>
> >>>>
> >>>>
> >>>
> >>>
> >>>
> ------------------------------------------------------------------------
> >>>
> >>> No virus found in this incoming message.
> >>> Checked by AVG. Version: 7.5.526 / Virus Database: 270.5.3/1563 -
> >>> Release
> >>> Date: 20/07/2008 12:59
> >>>
> >>>
> >>
> >>
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >
> >
> >
> >       __________________________________________________________
> > Not happy with your email address?.
> > Get the one you really want - millions of new email addresses available
> > now at Yahoo! http://uk.docs.yahoo.com/ymail/new.html
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> >
>
> --
> View this message in context:
> http://www.nabble.com/How-to-avoid-duplicate-records-in-lucene-tp18543588p18603752.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
Chris Lu
-------------------------
Instant Scalable Full-Text Search On Any Database/Application
site: http://www.dbsight.net
demo: http://search.dbsight.com
Lucene Database Search in 3 minutes:
http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_minutes
DBSight customer, a shopping comparison site, (anonymous per request) got
2.6 Million Euro funding!

------=_Part_304_13614966.1216855143753--

From java-user-return-35104-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 23 23:49:31 2008
Return-Path: <java-user-return-35104-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25619 invoked from network); 23 Jul 2008 23:49:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Jul 2008 23:49:31 -0000
Received: (qmail 89947 invoked by uid 500); 23 Jul 2008 23:49:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89906 invoked by uid 500); 23 Jul 2008 23:49:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89891 invoked by uid 99); 23 Jul 2008 23:49:25 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Jul 2008 16:49:25 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [196.25.240.77] (HELO ctb-mesg7.saix.net) (196.25.240.77)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Jul 2008 23:48:27 +0000
Received: from [192.168.0.2] (dsl-243-246-62.telkomadsl.co.za [41.243.246.62])
	by ctb-mesg7.saix.net (Postfix) with ESMTP id AF4EA2A01
	for <java-user@lucene.apache.org>; Thu, 24 Jul 2008 01:47:53 +0200 (SAST)
Message-ID: <4887C310.2030300@stimulussoft.com>
Date: Thu, 24 Jul 2008 01:47:28 +0200
From: Jamie <jamie@stimulussoft.com>
User-Agent: Thunderbird 2.0.0.14 (Windows/20080421)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Lucene Search Error: Java.io.IOException: Bad file descriptor
References: <48875A01.2070504@stimulussoft.com> <48875A5A.1070807@informatics.jax.org> <48875D63.8000006@stimulussoft.com> <48875F5F.30203@stimulussoft.com> <488760A0.8050303@stimulussoft.com> <1190C5F3-FAE6-4CC7-8CED-B0247DED9ED8@mikemccandless.com>
In-Reply-To: <1190C5F3-FAE6-4CC7-8CED-B0247DED9ED8@mikemccandless.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi All,

I found something interesting....

Could this error be the result of the bad file descriptor close bug as 
described in 
http://256.com/gray/docs/misc/java_bad_file_descriptor_close_bug.shtml.

This would definitely fit the description since this happened on JRE 
1.6u3.... apparently, update 3 suffered from this file descriptor issue. 
The fix
is to update the JRE to the latest version (which I believe is update 7).

Michael, what does one need to do to overcome the other JRE 1.6 bug? Are 
we still waiting for a JRE update from Sun to address it?
 Is there a workaround that we can use in the meantime?

Thanks

Jamie


Michael McCandless wrote:
>
> This log looks healthy.
>
> Mike
>
> Jamie wrote:
>
>> Hi
>>
>> The index log file is attached. Many thanks in advance for your 
>> consideration!
>>
>> Jamie
>>
>> Jamie wrote:
>>> Wasn't there some index corruption issue with Java 1.6 and Lucene 
>>> 2.3.2? Could this be the problem?
>>>
>>> Jamie
>>>
>>> Jamie wrote:
>>>> Hi Matthew
>>>>
>>>> Thanks in advance for the suggestion.
>>>>
>>>> Which file do you think does not exist?
>>>>
>>>> This is what we have:
>>>>
>>>> _15zw.cfs  _19od.cfs  _1a5d.cfs  _1a7n.cfs  _1ahf.cfs  _1ahh.cfs  
>>>> _qzl.cfs       segments.gen
>>>> _1993.cfs  _1a0w.cfs  _1a7c.cfs  _1a9m.cfs  _1ahg.cfs  _1ahi.cfs  
>>>> segments_158j
>>>>
>>>> Aside from Luke (which requires a GUI), it is there a command line 
>>>> utility that can check the integrity of the index?
>>>>
>>>> Jamie
>>>>
>>>> Matthew Hall wrote:
>>>>> Did you try to open the index using Luke?
>>>>>
>>>>> Luke will be able to tell you whether or not the index is in  fact 
>>>>> corrupted, but looking at your stack trace, it almost looks like 
>>>>> the file.. simply isn't there?
>>>>>
>>>>> Matt
>>>>>
>>>>> Jamie wrote:
>>>>>> Hi Everyone
>>>>>>
>>>>>> I am getting the the following error when executing  Hits hits = 
>>>>>> searchers.search(query, queryFilter, sort):
>>>>>>
>>>>>> 18007414-java.io.IOException: Bad file descriptor
>>>>>> 18007455-       at java.io.RandomAccessFile.seek(Native Method)
>>>>>> 18007504-       at 
>>>>>> org.apache.lucene.store.FSDirectory$FSIndexInput.readInternal(FSDirectory.java:545) 
>>>>>>
>>>>>> 18007592-       at 
>>>>>> org.apache.lucene.store.BufferedIndexInput.readBytes(BufferedIndexInput.java:131) 
>>>>>>
>>>>>> 18007678-       at 
>>>>>> org.apache.lucene.index.CompoundFileReader$CSIndexInput.readInternal(CompoundFileReader.java:240) 
>>>>>>
>>>>>> -- 
>>>>>> 18009148-       at 
>>>>>> org.apache.lucene.search.FieldSortedHitQueue.getCachedComparator(FieldSortedHitQueue.java:168) 
>>>>>>
>>>>>> 18009247-       at 
>>>>>> org.apache.lucene.search.FieldSortedHitQueue.<init>(FieldSortedHitQueue.java:56) 
>>>>>>
>>>>>> 18009332-       at 
>>>>>> org.apache.lucene.search.TopFieldDocCollector.<init>(TopFieldDocCollector.java:43) 
>>>>>>
>>>>>> 18009419-       at 
>>>>>> org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:122) 
>>>>>>
>>>>>> 18009493-       at 
>>>>>> org.apache.lucene.search.MultiSearcherThread.run(ParallelMultiSearcher.java:250) 
>>>>>>
>>>>>>
>>>>>> Does this mean the index is corrupted? Any idea why it would be 
>>>>>> corrupted?
>>>>>>
>>>>>> Jamie
>>>>>>
>


-- 
Stimulus Software - MailArchiva
Email Archiving And Compliance
USA Tel: +1-713-366-8072 ext 3
UK Tel: +44-20-80991035 ext 3
Email: jamie@stimulussoft.com
Web: http://www.mailarchiva.com




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35105-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 24 00:04:04 2008
Return-Path: <java-user-return-35105-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36545 invoked from network); 24 Jul 2008 00:04:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Jul 2008 00:04:04 -0000
Received: (qmail 97012 invoked by uid 500); 24 Jul 2008 00:03:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96970 invoked by uid 500); 24 Jul 2008 00:03:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96959 invoked by uid 99); 24 Jul 2008 00:03:58 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Jul 2008 17:03:58 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [196.25.240.87] (HELO ctb-mesg-2-2.saix.net) (196.25.240.87)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Jul 2008 00:03:01 +0000
Received: from [192.168.0.2] (dsl-243-246-62.telkomadsl.co.za [41.243.246.62])
	by ctb-mesg-2-2.saix.net (Postfix) with ESMTP id 2B59D307E
	for <java-user@lucene.apache.org>; Thu, 24 Jul 2008 02:02:55 +0200 (SAST)
Message-ID: <4887C695.706@stimulussoft.com>
Date: Thu, 24 Jul 2008 02:02:29 +0200
From: Jamie <jamie@stimulussoft.com>
User-Agent: Thunderbird 2.0.0.14 (Windows/20080421)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Lucene Search Error: Java.io.IOException: Bad file descriptor
References: <48875A01.2070504@stimulussoft.com> <48875A5A.1070807@informatics.jax.org> <48875D63.8000006@stimulussoft.com> <48875F5F.30203@stimulussoft.com> <488760A0.8050303@stimulussoft.com> <1190C5F3-FAE6-4CC7-8CED-B0247DED9ED8@mikemccandless.com> <4887C310.2030300@stimulussoft.com>
In-Reply-To: <4887C310.2030300@stimulussoft.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi

I feel like we are having to tip toe across JRE bugs to get this to work 
right. I am definitely not pointing fingers, since the issues and their 
resolutions are complex but
I would appreciate some insight on the most reliable combination of JRE 
6 and Lucene. I cannot downgrade the JRE to 5 as my code is deeply dependent
on Java 1.6. Right now, I'm thinking about updating the JRE to 6 update 
7 and using the latest nightly  Lucene snapshot available here:

http://people.apache.org/maven-snapshot-repository/org/apache/lucene/lucene-core/2.3-SNAPSHOT/lucene-core-2.3-SNAPSHOT.jar

Is this a good strategy?

Jamie

Jamie wrote:
> Hi All,
>
> I found something interesting....
>
> Could this error be the result of the bad file descriptor close bug as 
> described in 
> http://256.com/gray/docs/misc/java_bad_file_descriptor_close_bug.shtml.
>
> This would definitely fit the description since this happened on JRE 
> 1.6u3.... apparently, update 3 suffered from this file descriptor 
> issue. The fix
> is to update the JRE to the latest version (which I believe is update 7).
>
> Michael, what does one need to do to overcome the other JRE 1.6 bug? 
> Are we still waiting for a JRE update from Sun to address it?
> Is there a workaround that we can use in the meantime?
>
> Thanks
>
> Jamie
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35106-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 24 00:20:54 2008
Return-Path: <java-user-return-35106-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48549 invoked from network); 24 Jul 2008 00:20:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Jul 2008 00:20:53 -0000
Received: (qmail 4047 invoked by uid 500); 24 Jul 2008 00:20:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4005 invoked by uid 500); 24 Jul 2008 00:20:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3994 invoked by uid 99); 24 Jul 2008 00:20:46 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Jul 2008 17:20:46 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [64.233.184.224] (HELO wr-out-0506.google.com) (64.233.184.224)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Jul 2008 00:19:50 +0000
Received: by wr-out-0506.google.com with SMTP id c30so1991700wra.21
        for <java-user@lucene.apache.org>; Wed, 23 Jul 2008 17:19:56 -0700 (PDT)
Received: by 10.90.116.4 with SMTP id o4mr529590agc.76.1216858795840;
        Wed, 23 Jul 2008 17:19:55 -0700 (PDT)
Received: from ?10.17.4.4? ( [72.93.214.93])
        by mx.google.com with ESMTPS id 38sm7686888aga.4.2008.07.23.17.19.55
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Wed, 23 Jul 2008 17:19:55 -0700 (PDT)
Message-Id: <2CECF292-C95E-4269-9FA3-2440D418B6D9@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <4887C695.706@stimulussoft.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: Lucene Search Error: Java.io.IOException: Bad file descriptor
Date: Wed, 23 Jul 2008 20:19:54 -0400
References: <48875A01.2070504@stimulussoft.com> <48875A5A.1070807@informatics.jax.org> <48875D63.8000006@stimulussoft.com> <48875F5F.30203@stimulussoft.com> <488760A0.8050303@stimulussoft.com> <1190C5F3-FAE6-4CC7-8CED-B0247DED9ED8@mikemccandless.com> <4887C310.2030300@stimulussoft.com> <4887C695.706@stimulussoft.com>
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org


I think that is the best strategy at this point.

The head of 2.3 has a workaround (that so far *seems* to work around)  
for that JRE bug.

Mike

Jamie wrote:

> Hi
>
> I feel like we are having to tip toe across JRE bugs to get this to  
> work right. I am definitely not pointing fingers, since the issues  
> and their resolutions are complex but
> I would appreciate some insight on the most reliable combination of  
> JRE 6 and Lucene. I cannot downgrade the JRE to 5 as my code is  
> deeply dependent
> on Java 1.6. Right now, I'm thinking about updating the JRE to 6  
> update 7 and using the latest nightly  Lucene snapshot available here:
>
> http://people.apache.org/maven-snapshot-repository/org/apache/lucene/lucene-core/2.3-SNAPSHOT/lucene-core-2.3-SNAPSHOT.jar
>
> Is this a good strategy?
>
> Jamie
>
> Jamie wrote:
>> Hi All,
>>
>> I found something interesting....
>>
>> Could this error be the result of the bad file descriptor close bug  
>> as described in http://256.com/gray/docs/misc/java_bad_file_descriptor_close_bug.shtml 
>> .
>>
>> This would definitely fit the description since this happened on  
>> JRE 1.6u3.... apparently, update 3 suffered from this file  
>> descriptor issue. The fix
>> is to update the JRE to the latest version (which I believe is  
>> update 7).
>>
>> Michael, what does one need to do to overcome the other JRE 1.6  
>> bug? Are we still waiting for a JRE update from Sun to address it?
>> Is there a workaround that we can use in the meantime?
>>
>> Thanks
>>
>> Jamie
>>
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35107-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 24 00:30:49 2008
Return-Path: <java-user-return-35107-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56033 invoked from network); 24 Jul 2008 00:30:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Jul 2008 00:30:49 -0000
Received: (qmail 10618 invoked by uid 500); 24 Jul 2008 00:30:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10586 invoked by uid 500); 24 Jul 2008 00:30:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10575 invoked by uid 99); 24 Jul 2008 00:30:42 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Jul 2008 17:30:42 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of yseeley@gmail.com designates 209.85.198.224 as permitted sender)
Received: from [209.85.198.224] (HELO rv-out-0506.google.com) (209.85.198.224)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Jul 2008 00:29:47 +0000
Received: by rv-out-0506.google.com with SMTP id f6so2601412rvb.5
        for <java-user@lucene.apache.org>; Wed, 23 Jul 2008 17:30:13 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:sender
         :to:subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references
         :x-google-sender-auth;
        bh=b01d2Hq7DAH1OmdPLkM9eRTS90InyLQx4SuRt95z534=;
        b=nSxnf8ftYbS+fhlCVKafv9N9FOqeKwC4JadxZxxcEev+DKI4WxExmFW7usgtTJpawQ
         aR2fX2T4LADq7V2KKdO7Ss8P34QbAfYULzrpjlbOExUcAvxEgx2n4qJPnhro8OvYUOid
         2N5E8KsVNwKZevWjLDs8LfsoXOvwSjHfhIM1M=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:sender:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references:x-google-sender-auth;
        b=ps0ZzO8jEyjezbUTbl7CmYLhZJeyTf11vrQY8USmlTalz+CgxZLMS4Uv+rnJO+mc0R
         iaH/rSdggj+WmVpl4H0jrOI7+0OEDjxiXxuop6EumOxgD/3X7R/M6zUV083PRMMWHf7i
         CNZh7xJ9DHv4wIQdAN4to0twq4y7YM5PPlUUI=
Received: by 10.141.171.6 with SMTP id y6mr144253rvo.84.1216859413294;
        Wed, 23 Jul 2008 17:30:13 -0700 (PDT)
Received: by 10.140.192.19 with HTTP; Wed, 23 Jul 2008 17:30:13 -0700 (PDT)
Message-ID: <c68e39170807231730v5ce0ffc5w2e6b942f2a7574fb@mail.gmail.com>
Date: Wed, 23 Jul 2008 20:30:13 -0400
From: "Yonik Seeley" <yonik@apache.org>
Sender: yseeley@gmail.com
To: java-user@lucene.apache.org
Subject: Re: Lucene Search Error: Java.io.IOException: Bad file descriptor
In-Reply-To: <4887C310.2030300@stimulussoft.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <48875A01.2070504@stimulussoft.com>
	 <48875A5A.1070807@informatics.jax.org>
	 <48875D63.8000006@stimulussoft.com> <48875F5F.30203@stimulussoft.com>
	 <488760A0.8050303@stimulussoft.com>
	 <1190C5F3-FAE6-4CC7-8CED-B0247DED9ED8@mikemccandless.com>
	 <4887C310.2030300@stimulussoft.com>
X-Google-Sender-Auth: 6516d1e63f76e393
X-Virus-Checked: Checked by ClamAV on apache.org

On Wed, Jul 23, 2008 at 7:47 PM, Jamie <jamie@stimulussoft.com> wrote:
> Could this error be the result of the bad file descriptor close bug as
> described in
> http://256.com/gray/docs/misc/java_bad_file_descriptor_close_bug.shtml.

Hmmm, that's an interesting read.
Seems like maybe we should kill most of the remaining finalizers we
use... they are really more trouble than they are worth.

-Yonik

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35108-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 24 06:18:29 2008
Return-Path: <java-user-return-35108-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72918 invoked from network); 24 Jul 2008 06:18:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Jul 2008 06:18:29 -0000
Received: (qmail 83388 invoked by uid 500); 24 Jul 2008 06:18:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83352 invoked by uid 500); 24 Jul 2008 06:18:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83341 invoked by uid 99); 24 Jul 2008 06:18:21 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 23 Jul 2008 23:18:21 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of kalanir@gmail.com designates 209.85.198.236 as permitted sender)
Received: from [209.85.198.236] (HELO rv-out-0506.google.com) (209.85.198.236)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Jul 2008 06:17:27 +0000
Received: by rv-out-0506.google.com with SMTP id f6so2710103rvb.5
        for <java-user@lucene.apache.org>; Wed, 23 Jul 2008 23:17:52 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type;
        bh=CMkkaMZpzMGYaHDuPwBf0gN8SEL7O03n5zRnBiOTs54=;
        b=BZF5G2y2D5NJF1fHCyuzebWJGR5EzoWXyh389lhktqm0auZ9V1F/CNRetTbxwvyKGw
         ttYbuUks3lAob73HVtbM9gH+MQgytEfFWsNh6VvUQWZ1W7cZ2stH5APwlnfzhQ0OXJXC
         /eN+F3x794PGQKxWx+cqW0lLemm4qu4/+XK/k=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=W3xqQJrwzGvCFGUCerkAglFuMKB2aYBp1WjJakQXCl5BwNQl/oo0iAytPxuKD9ukCJ
         IcfIhdAUmVoGlaYHydgzIAknjwkGJYsbj4g2YUw6e7sz/Vj/itXwtqVqZ344XVoDkIjt
         k3OG2QOSeVt1COSmrpg67/0tTVMkolHFhGHqY=
Received: by 10.114.184.11 with SMTP id h11mr467986waf.175.1216880272299;
        Wed, 23 Jul 2008 23:17:52 -0700 (PDT)
Received: by 10.114.157.7 with HTTP; Wed, 23 Jul 2008 23:17:52 -0700 (PDT)
Message-ID: <5816fbdd0807232317n7c079dfdlde790e39d9230f4e@mail.gmail.com>
Date: Thu, 24 Jul 2008 11:47:52 +0530
From: "Kalani Ruwanpathirana" <kalanir@gmail.com>
To: java-user@lucene.apache.org
Subject: Ignoring XML tags when Indexing
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_145239_8215034.1216880272299"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_145239_8215034.1216880272299
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi all,

I am searching for a way to ignore XML tags in the input when indexing. Is
there a built in functionality in Lucene to get this done?
I am sorry if this was discussed before. I searched but couldn't find a
clear solution.

Thanks in advance
Kalani

-- 
Kalani Ruwanpathirana
Department of Computer Science & Engineering
University of Moratuwa

------=_Part_145239_8215034.1216880272299--

From java-user-return-35109-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 24 09:06:58 2008
Return-Path: <java-user-return-35109-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86710 invoked from network); 24 Jul 2008 09:06:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Jul 2008 09:06:58 -0000
Received: (qmail 60138 invoked by uid 500); 24 Jul 2008 09:06:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60097 invoked by uid 500); 24 Jul 2008 09:06:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60086 invoked by uid 99); 24 Jul 2008 09:06:51 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Jul 2008 02:06:51 -0700
X-ASF-Spam-Status: No, hits=4.0 required=10.0
	tests=DNS_FROM_OPENWHOIS,FORGED_YAHOO_RCVD,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Jul 2008 09:05:56 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KLwmC-0008LA-UY
	for java-user@lucene.apache.org; Thu, 24 Jul 2008 02:06:20 -0700
Message-ID: <18628000.post@talk.nabble.com>
Date: Thu, 24 Jul 2008 02:06:20 -0700 (PDT)
From: Konstantyn Smirnov <injecteer@yahoo.com>
To: java-user@lucene.apache.org
Subject: Re: Parametric/faceted Searching
In-Reply-To: <18587632.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: injecteer@yahoo.com
References: <18587632.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org


I soved that using a single field in the document.

It's content is based on a simple convention. 
Say I have 2 docs with values BirthsMarriagesDeath_Deaths_Females and 
BirthsMarriagesDeath_Divorces.

Now when I need to get the total count for BirthsMarriagesDeath category, I
run "BirthsMarriagesDeath*" query. If I need look in a sub-category, I use
"BirthsMarriagesDeath_Deaths*"
-- 
View this message in context: http://www.nabble.com/Parametric-faceted-Searching-tp18587632p18628000.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35110-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 24 10:21:49 2008
Return-Path: <java-user-return-35110-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 43038 invoked from network); 24 Jul 2008 10:21:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Jul 2008 10:21:49 -0000
Received: (qmail 66743 invoked by uid 500); 24 Jul 2008 10:21:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66695 invoked by uid 500); 24 Jul 2008 10:21:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66684 invoked by uid 99); 24 Jul 2008 10:21:41 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Jul 2008 03:21:41 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [64.233.184.233] (HELO wr-out-0506.google.com) (64.233.184.233)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Jul 2008 10:20:46 +0000
Received: by wr-out-0506.google.com with SMTP id c30so2241440wra.21
        for <java-user@lucene.apache.org>; Thu, 24 Jul 2008 03:21:09 -0700 (PDT)
Received: by 10.100.249.10 with SMTP id w10mr118824anh.156.1216894869481;
        Thu, 24 Jul 2008 03:21:09 -0700 (PDT)
Received: from ?10.17.4.4? ( [72.93.214.93])
        by mx.google.com with ESMTPS id b29sm13079251ana.22.2008.07.24.03.21.08
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Thu, 24 Jul 2008 03:21:09 -0700 (PDT)
Message-Id: <4384CE1E-2111-4FCB-9938-4F6E1E866009@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <1bcb7c7f0807231207y22305c8bhdf53cd4624edd90f@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: lucene delete by query
Date: Thu, 24 Jul 2008 06:21:08 -0400
References: <1bcb7c7f0807230653u541284e5m5f015c71fb0961c9@mail.gmail.com> <c68e39170807230725p23a39732l5704cad662203b85@mail.gmail.com> <1bcb7c7f0807231207y22305c8bhdf53cd4624edd90f@mail.gmail.com>
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org


Unfortunately, this is not an easy question to answer ... it's really  
up to you to test it out for your application & production env, and  
see.  We certainly try very hard not to break things, but  alot of  
sizable changes have gone into the trunk since 2.3.

Lucene has good test case coverage, and that coverage keeps improving  
with time -- every time we find something broken we make a test case  
first to catch it & prevent it in the future, then fix it.

If you do test the trunk it'd be great to hear back how it went, good  
or bad, because that helps us improve, faster...

Mike

Cam Bazz wrote:

> how reliable is the version in the trunk? is it ok for production?
>
>
>
> On Wed, Jul 23, 2008 at 5:25 PM, Yonik Seeley <yonik@apache.org>  
> wrote:
>
>> It's in the lucene trunk (current development version).
>> IndexWriter.deleteDocuments(Query query)
>>
>> -Yonik
>>
>> On Wed, Jul 23, 2008 at 9:53 AM, Cam Bazz <cambazz@gmail.com> wrote:
>>> hello,
>>>
>>> was not there a lucene delete by query feature coming up? I remember
>>> something like that, but I could not find an references.
>>>
>>> best regards,
>>> -c.b.
>>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35111-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 24 12:35:03 2008
Return-Path: <java-user-return-35111-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22910 invoked from network); 24 Jul 2008 12:35:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Jul 2008 12:35:03 -0000
Received: (qmail 24020 invoked by uid 500); 24 Jul 2008 12:34:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23980 invoked by uid 500); 24 Jul 2008 12:34:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23969 invoked by uid 99); 24 Jul 2008 12:34:55 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Jul 2008 05:34:55 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Jul 2008 12:34:01 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KLzyW-000726-TC
	for java-user@lucene.apache.org; Thu, 24 Jul 2008 05:31:16 -0700
Message-ID: <18630935.post@talk.nabble.com>
Date: Thu, 24 Jul 2008 05:31:16 -0700 (PDT)
From: "Karsten F." <karsten-lucene@fiz-technik.de>
To: java-user@lucene.apache.org
Subject: Re: Parametric/faceted Searching
In-Reply-To: <18628000.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: karsten-lucene@fiz-technik.de
References: <18587632.post@talk.nabble.com> <18628000.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Hi,

my question: How did ebay solve this problem?

Take a look to the faceted browsing in the mark twain project:
http://www.marktwainproject.org/xtf/search?keyword=Berlin&style=mtp
http://tinyurl.com/5cvb3c

This solution is open source and from the xtf project (they use lucene).
http://xtf.wiki.sourceforge.net/programming_Faceted_Browsing

It also use the prefix search but it count the hits for the subtree without
extra search:
The tree of categories is very sufficient in the main memory, so the count
is quite fast.

"sufficient" means, that for each category and document -which belongs to
this category- one "int" is stored in main memory.

The faceted browsing of xtf can used without the rest of xtf (like the
sorting in lucene can used without lucene): you can breaking of the
coupling, but you should consinder to use xtf as a whole .

Keep me informed which solution you selected :-)

Best regards
  Karsten
-- 
View this message in context: http://www.nabble.com/Parametric-faceted-Searching-tp18587632p18630935.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35112-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 24 12:41:54 2008
Return-Path: <java-user-return-35112-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26875 invoked from network); 24 Jul 2008 12:41:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Jul 2008 12:41:54 -0000
Received: (qmail 31384 invoked by uid 500); 24 Jul 2008 12:41:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31350 invoked by uid 500); 24 Jul 2008 12:41:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31339 invoked by uid 99); 24 Jul 2008 12:41:47 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Jul 2008 05:41:47 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of marcelo.schneider@digitro.com.br designates 189.85.128.24 as permitted sender)
Received: from [189.85.128.24] (HELO mail.digitro.com.br) (189.85.128.24)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Jul 2008 12:40:50 +0000
Received: from serverdgt.daf.digitro.com.br (firewall [189.85.128.10])
	by mail.digitro.com.br (Postfix) with ESMTP id 6CA201F90A76
	for <java-user@lucene.apache.org>; Thu, 24 Jul 2008 09:40:31 -0300 (BRT)
Received: from [192.168.170.157] (dinamico157.dti.digitro.com.br [192.168.170.157])
	by serverdgt.daf.digitro.com.br (Postfix) with ESMTP id 613E93C451B
	for <java-user@lucene.apache.org>; Thu, 24 Jul 2008 09:40:52 -0300 (BRT)
Message-ID: <48887854.6080804@digitro.com.br>
Date: Thu, 24 Jul 2008 09:40:52 -0300
From: Marcelo Schneider <marcelo.schneider@digitro.com.br>
User-Agent: Thunderbird 2.0.0.0 (Windows/20070326)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Ignoring XML tags when Indexing
References: <5816fbdd0807232317n7c079dfdlde790e39d9230f4e@mail.gmail.com>
In-Reply-To: <5816fbdd0807232317n7c079dfdlde790e39d9230f4e@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 8bit
X-Digitro-MailScanner-Information: Please contact the ISP for more information
X-MailScanner-ID: 6CA201F90A76.31661
X-Digitro-MailScanner: Found to be clean
X-Digitro-MailScanner-From: marcelo.schneider@digitro.com.br
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No

Do you just want to ignore them and store all in one field? If you know 
the used tags previously, I guess you could set up a stop words list 
with them. If not, you could do an "XMLAnalyzer" that simply ignores 
everything inside '<>'...

If you want to split the xml content in separate fields, you have to 
parse it before indexing, take a look at this article: 
http://www.ibm.com/developerworks/library/j-lucene/

I'm a little bit new to Lucene, so I might be missing something here, 
but I wouldn't expect it to have an API for this...


Kalani Ruwanpathirana escreveu:
> Hi all,
>
> I am searching for a way to ignore XML tags in the input when indexing. Is
> there a built in functionality in Lucene to get this done?
> I am sorry if this was discussed before. I searched but couldn't find a
> clear solution.
>
> Thanks in advance
> Kalani
>
>   

-- 


*Marcelo Frantz Schneider*
/SIC - TCO - Tecnologia em Engenharia do Conhecimento/

*DGITRO TECNOLOGIA*
*E-mail:* marcelo.schneider@digitro.com.br 
<mailto:marcelo.schneider@digitro.com.br>
***Site:* www.digitro.com <http://www.digitro.com>

-- 
Esta mensagem foi verificada pelo sistema de antivrus da Dgitro e
acredita-se estar livre de perigo.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35113-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 24 13:26:18 2008
Return-Path: <java-user-return-35113-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48707 invoked from network); 24 Jul 2008 13:26:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Jul 2008 13:26:18 -0000
Received: (qmail 92716 invoked by uid 500); 24 Jul 2008 13:26:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92682 invoked by uid 500); 24 Jul 2008 13:26:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92671 invoked by uid 99); 24 Jul 2008 13:26:11 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Jul 2008 06:26:11 -0700
X-ASF-Spam-Status: No, hits=4.0 required=10.0
	tests=DNS_FROM_OPENWHOIS,FORGED_YAHOO_RCVD,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Jul 2008 13:25:16 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KM0p9-0000fS-QL
	for java-user@lucene.apache.org; Thu, 24 Jul 2008 06:25:40 -0700
Message-ID: <18631887.post@talk.nabble.com>
Date: Thu, 24 Jul 2008 06:25:39 -0700 (PDT)
From: starz10de <farag_ahmed@yahoo.com>
To: java-user@lucene.apache.org
Subject: Re: storing the contents of a document in the lucene index
In-Reply-To: <359a92830807230653t53cccaceu1bba44bc8dada488@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: farag_ahmed@yahoo.com
References: <18595855.post@talk.nabble.com> <18605547.post@talk.nabble.com> <359a92830807230653t53cccaceu1bba44bc8dada488@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Dear Erick ,

 Thnaks for your answer, I tryed other way ,  where I read the text files
before i index them. I will try also your solution here.

best regards


Erick Erickson wrote:
> 
> OK, I'm finally catching on. You have to change the demo code to
> get the contents into something besides an input stream, so you
> can use one of the alternate forms of the Field constructor. For
> instance, you could read it all into a string and use the form:
> 
> doc.add(new Field("content", <string with all the file contents in it>,
>                Field.Store.YES, Field.Index.TOKENIZED))
> 
> 
> Or, you can do something like this, which produces identical results
> to the above
> 
> while (more text to read) {
>      String line = read a line of text from the file
>      doc.add(new Field("content", line, Field.Store.YES,
> Field.Index.TOKENIZED))
> }
> 
> You can add to the same field as often as you want and it just appends the
> content of calls 2 to N to the same field.
> 
> 
> Best
> Erick
> 
> 
> On Wed, Jul 23, 2008 at 3:42 AM, starz10de <farag_ahmed@yahoo.com> wrote:
> 
>>
>> Hi Erik,
>>
>>  I don't remove the stop words, as I index parallel corpora which is used
>> for learning the translations between pair of languages. so every word is
>> important. I even develop my own analyzer for Arabic which is just remove
>> punctuations and special symbols and it return only Arabic text.
>>
>> I guess in the   FileDocument.java   the whole text is already stored
>>
>> doc.add(Field.Text("contents", IN));
>>
>> where IN is
>>
>> IN = new BufferedReader(new InputStreamReader(new FileInputStream(f))
>>
>> if this is not the case yould you please how to store the whole text
>> inside
>> the index ?
>>
>> I am new to lucene and I don't know how to use this "Field.Store.YES" to
>> store whole text.
>>
>>
>>
>> Best regards
>> Farag
>>
>>
>>
>> starz10de wrote:
>> >
>> >   Could any one tell me please how to print the content of the document
>> > after reading the index.
>> > for example if i like to print the  index terms then i do :
>> >
>> > IndexReader ir = IndexReader.open(index);
>> > TermEnum termEnum = ir.terms();
>> > while (termEnum.next()) {
>> >                       TermDocs dok = ir.termDocs();
>> >                       dok.seek(termEnum);
>> >                       while (dok.next()) {
>> > System.out.println(termEnum.term().text().trim());
>> >                               }
>> >
>> > I can print the text files before indexing them, but because of
>> encoding
>> > issues i like to print them from the index.
>> > As i know the content of the document(whole text) is also stored in the
>> > index, my question how to print this content.
>> >
>> > so at the end i will print the path of the current document , index
>> terms
>> > and the content of the document
>> >
>> >
>> > thanks in advance
>> >
>>
>> --
>> View this message in context:
>> http://www.nabble.com/storing-the-contents-of-a-document-in-the--lucene-index-tp18595855p18605547.html
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
> 
> 

-- 
View this message in context: http://www.nabble.com/storing-the-contents-of-a-document-in-the--lucene-index-tp18595855p18631887.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35114-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 24 14:34:29 2008
Return-Path: <java-user-return-35114-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94145 invoked from network); 24 Jul 2008 14:34:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Jul 2008 14:34:29 -0000
Received: (qmail 93140 invoked by uid 500); 24 Jul 2008 14:34:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93118 invoked by uid 500); 24 Jul 2008 14:34:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93107 invoked by uid 99); 24 Jul 2008 14:34:22 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Jul 2008 07:34:22 -0700
X-ASF-Spam-Status: No, hits=3.7 required=10.0
	tests=HTML_MESSAGE,SPF_NEUTRAL,UPPERCASE_50_75
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: 64.73.27.229 is neither permitted nor denied by domain of eric.hamacher@enetrix.com)
Received: from [64.73.27.229] (HELO mailout.readyenterprise.com) (64.73.27.229)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Jul 2008 14:33:28 +0000
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C8ED9A.3F8C4D16"
Subject: SnowballFilter
Date: Thu, 24 Jul 2008 09:33:32 -0500
Message-ID: <CDC26C59B5B0E74E8276FE547CEC34340E6986C5@RENTXBE01.rent.local>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: SnowballFilter
Thread-Index: Acjtmj8jbJTyNmM4TyCAi/avaocU+w==
From: "Eric Hamacher" <eric.hamacher@enetrix.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01C8ED9A.3F8C4D16
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Hello:

=20

Is it my imagination, or did SnowballFilter disappear from 2.3.x?  I am
looking through lucene-core-2.3.0.jar and lucene-core-2.3.2.jar and
cannot find it.  If so, what replaced it?

=20

Thanks

=20

Regards,

Eric Hamacher

=20

******************************

THIS EMAIL IS INTENDED ONLY FOR THE REVIEW OF THE ADDRESSEE(S), AND MAY
CONTAIN CONFIDENTIAL AND LEGALLY PRIVILEGED INFORMATION. INTERCEPTION,
COPYING, DISSEMINATION, OR OTHER USE BY OTHER THAN THE ADDRESSEE(S) IS
PROHIBITED AND MAY BE PENALIZED UNDER APPLICABLE PRIVACY LAWS. IF YOU
RECEIVED THIS EMAIL IN ERROR, PLEASE DELETE IT AND NOTIFY ME BY RETURN
EMAIL TO eric.hamacher@enetrix.com *******************************

=20


------_=_NextPart_001_01C8ED9A.3F8C4D16--

From java-user-return-35115-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 24 15:04:45 2008
Return-Path: <java-user-return-35115-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30617 invoked from network); 24 Jul 2008 15:04:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Jul 2008 15:04:44 -0000
Received: (qmail 56461 invoked by uid 500); 24 Jul 2008 15:04:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56271 invoked by uid 500); 24 Jul 2008 15:04:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56260 invoked by uid 99); 24 Jul 2008 15:04:37 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Jul 2008 08:04:37 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: 64.73.27.229 is neither permitted nor denied by domain of eric.hamacher@enetrix.com)
Received: from [64.73.27.229] (HELO mailout.readyenterprise.com) (64.73.27.229)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Jul 2008 15:03:43 +0000
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: SnowballFilter
Date: Thu, 24 Jul 2008 10:04:07 -0500
Message-ID: <CDC26C59B5B0E74E8276FE547CEC34340E698809@RENTXBE01.rent.local>
In-Reply-To: <CDC26C59B5B0E74E8276FE547CEC34340E6986C5@RENTXBE01.rent.local>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: SnowballFilter
Thread-Index: Acjtmj8jbJTyNmM4TyCAi/avaocU+wABDSOA
References: <CDC26C59B5B0E74E8276FE547CEC34340E6986C5@RENTXBE01.rent.local>
From: "Eric Hamacher" <eric.hamacher@enetrix.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Oh, I see it's a separate distribution. Sorry!

-----Original Message-----
From: Eric Hamacher [mailto:eric.hamacher@enetrix.com]=20
Sent: Thursday, July 24, 2008 9:34 AM
To: java-user@lucene.apache.org
Subject: SnowballFilter

Hello:

=20

Is it my imagination, or did SnowballFilter disappear from 2.3.x?  I am
looking through lucene-core-2.3.0.jar and lucene-core-2.3.2.jar and
cannot find it.  If so, what replaced it?

=20

Thanks

=20

Regards,

Eric Hamacher

=20

******************************

THIS EMAIL IS INTENDED ONLY FOR THE REVIEW OF THE ADDRESSEE(S), AND MAY
CONTAIN CONFIDENTIAL AND LEGALLY PRIVILEGED INFORMATION. INTERCEPTION,
COPYING, DISSEMINATION, OR OTHER USE BY OTHER THAN THE ADDRESSEE(S) IS
PROHIBITED AND MAY BE PENALIZED UNDER APPLICABLE PRIVACY LAWS. IF YOU
RECEIVED THIS EMAIL IN ERROR, PLEASE DELETE IT AND NOTIFY ME BY RETURN
EMAIL TO eric.hamacher@enetrix.com *******************************

=20


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35116-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 24 18:46:27 2008
Return-Path: <java-user-return-35116-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 57006 invoked from network); 24 Jul 2008 18:46:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Jul 2008 18:46:27 -0000
Received: (qmail 3666 invoked by uid 500); 24 Jul 2008 18:46:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3643 invoked by uid 500); 24 Jul 2008 18:46:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3632 invoked by uid 99); 24 Jul 2008 18:46:19 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Jul 2008 11:46:19 -0700
X-ASF-Spam-Status: No, hits=4.0 required=10.0
	tests=DNS_FROM_OPENWHOIS,FORGED_YAHOO_RCVD,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Jul 2008 18:45:24 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KM5oz-0004li-1Q
	for java-user@lucene.apache.org; Thu, 24 Jul 2008 11:45:49 -0700
Message-ID: <18638011.post@talk.nabble.com>
Date: Thu, 24 Jul 2008 11:45:49 -0700 (PDT)
From: samd <sdoyle_2@yahoo.com>
To: java-user@lucene.apache.org
Subject: Luke shows in top terms but no search results??
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: sdoyle_2@yahoo.com
X-Virus-Checked: Checked by ClamAV on apache.org


Can someone explain this to me?

After indexing I can see the terms I expect in the top terms using Luke but
then when I search I get no results??

This is really bizarre and is blocker for me.

Thanks.
-- 
View this message in context: http://www.nabble.com/Luke-shows-in-top-terms-but-no-search-results---tp18638011p18638011.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35117-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 24 18:49:19 2008
Return-Path: <java-user-return-35117-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59282 invoked from network); 24 Jul 2008 18:49:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Jul 2008 18:49:19 -0000
Received: (qmail 7212 invoked by uid 500); 24 Jul 2008 18:49:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7174 invoked by uid 500); 24 Jul 2008 18:49:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7163 invoked by uid 99); 24 Jul 2008 18:49:13 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Jul 2008 11:49:13 -0700
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of Aravind.Yarram@equifax.com designates 216.46.96.102 as permitted sender)
Received: from [216.46.96.102] (HELO smtp10.atl.equifax.com) (216.46.96.102)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Jul 2008 18:48:17 +0000
Received: from postoffice21.equifax.com (unknown [192.168.4.42])
	by smtp10.atl.equifax.com (Postfix) with ESMTP id 66C5530E2
	for <java-user@lucene.apache.org>; Thu, 24 Jul 2008 14:39:06 -0400 (EDT)
Received: from wetcisdlppsmtp1.eis.equifax.com (wetcisdlppsmtp1.fin.equifax.com [172.18.152.141])
	by postoffice21.equifax.com (Symantec Mail Security) with SMTP id 1372D558003
	for <java-user@lucene.apache.org>; Thu, 24 Jul 2008 14:47:34 -0400 (EDT)
X-AuditID: c0a8042a-abf16bb000000b62-b6-4888ce464b26
Received: from noteswetc12.fin.equifax.com (noteswetc12.fin.equifax.com [172.18.113.62])
	by postoffice21.equifax.com (Symantec Mail Security) with ESMTP id C059B558002
	for <java-user@lucene.apache.org>; Thu, 24 Jul 2008 14:47:33 -0400 (EDT)
In-Reply-To: <18638011.post@talk.nabble.com>
To: java-user@lucene.apache.org
Subject: Re: Luke shows in top terms but no search results??
Message-ID: <OF4E06572F.2BCE2A20-ON85257490.006730AE-85257490.006754DF@fin.equifax.com>
Date: Thu, 24 Jul 2008 14:48:39 -0400
From: Aravind.Yarram@equifax.com
Content-Type: multipart/alternative; boundary="=_alternative 006754C185257490_="
MIME-Version: 1.0
X-Mailer: Lotus Notes Release 6.5.5  CCH1 March 07, 2006
X-Disclaimed: 55707
X-Brightmail-Tracker: AAAAAA==
X-CFilter-Loop: Reflected
X-Virus-Checked: Checked by ClamAV on apache.org

--=_alternative 006754C185257490_=
Content-Type: text/plain; charset="US-ASCII"
Content-Transfer-Encoding: quoted-printable

r u using the same analyzer, which u used for indexing, in the luke as=20
well?

Regards,=20
Aravind R Yarram
Enabling Technologies
Equifax Information Services LLC
1525 Windward Concourse, J42E
Alpharetta, GA 30005
desk: 770 740 6951
email: aravind.yarram@equifax.com=20



samd <sdoyle=5F2@yahoo.com>=20
07/24/2008 02:45 PM
Please respond to
java-user@lucene.apache.org


To
java-user@lucene.apache.org
cc

Subject
Luke shows in top terms but no search results??







Can someone explain this to me?

After indexing I can see the terms I expect in the top terms using Luke=20
but
then when I search I get no results??

This is really bizarre and is blocker for me.

Thanks.
--=20
View this message in context:=20
http://www.nabble.com/Luke-shows-in-top-terms-but-no-search-results---tp186=
38011p18638011.html

Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



This message contains information from Equifax Inc. which may be confidenti=
al and privileged.  If you are not an intended recipient, please refrain fr=
om any disclosure, copying, distribution or use of this information and not=
e that such actions are prohibited.  If you have received this transmission=
 in error, please notify by e-mail postmaster@equifax.com.

--=_alternative 006754C185257490_=--

From java-user-return-35118-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 24 18:55:19 2008
Return-Path: <java-user-return-35118-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63617 invoked from network); 24 Jul 2008 18:55:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Jul 2008 18:55:19 -0000
Received: (qmail 18182 invoked by uid 500); 24 Jul 2008 18:55:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18156 invoked by uid 500); 24 Jul 2008 18:55:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18145 invoked by uid 99); 24 Jul 2008 18:55:12 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Jul 2008 11:55:12 -0700
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.198.239 as permitted sender)
Received: from [209.85.198.239] (HELO rv-out-0506.google.com) (209.85.198.239)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Jul 2008 18:54:17 +0000
Received: by rv-out-0506.google.com with SMTP id f6so2987432rvb.5
        for <java-user@lucene.apache.org>; Thu, 24 Jul 2008 11:54:42 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=3iRMrORURF0rxp3Li2GyR5BVi0SJ96GqSU7zUCgIejw=;
        b=fE8gWFXepUqDPSkaVuMyMzw5Q/+WE5grkRUyNjEbFsrWFaw4whscypKF/vZPjzsXRL
         PxZ1IK+L83M7yjDQl0RLZf0Ii+Co/lMds8P70WYkoRZVlFhiLKdK1+TmxQBZz3zd2j6M
         BPLP89o008N4hm2sGbPB3op4i8syMqPr2gDI0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=kutHpq+m8vtNUoZzlNHlv9BvjYXU86VIeccdLs+bJZe7a54M9P5Af2FWbCEDAhawIT
         IjyOB4w39C/8b3qn7D7HopZrOAXmd08s0GsHmrovPHb1p/UYngbuvdK8QAVyFJ4Es1Ol
         w1pRDNFlx9Af4etRWjdZIWX7bVX3+cn9W0cZA=
Received: by 10.140.164.6 with SMTP id m6mr379786rve.208.1216925682641;
        Thu, 24 Jul 2008 11:54:42 -0700 (PDT)
Received: by 10.141.185.2 with HTTP; Thu, 24 Jul 2008 11:54:42 -0700 (PDT)
Message-ID: <359a92830807241154y1ecfd550mf743f71b2a964415@mail.gmail.com>
Date: Thu, 24 Jul 2008 14:54:42 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Luke shows in top terms but no search results??
In-Reply-To: <18638011.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_87410_4110799.1216925682624"
References: <18638011.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_87410_4110799.1216925682624
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

This is almost certainly a coding error, and it's impossible to help without
seeing some code. Please pust:

1> your indexing code (suitably pared down)
2> your search code along with a sample query

Best
Erick

On Thu, Jul 24, 2008 at 2:45 PM, samd <sdoyle_2@yahoo.com> wrote:

>
> Can someone explain this to me?
>
> After indexing I can see the terms I expect in the top terms using Luke but
> then when I search I get no results??
>
> This is really bizarre and is blocker for me.
>
> Thanks.
> --
> View this message in context:
> http://www.nabble.com/Luke-shows-in-top-terms-but-no-search-results---tp18638011p18638011.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_87410_4110799.1216925682624--

From java-user-return-35119-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 24 18:57:45 2008
Return-Path: <java-user-return-35119-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65147 invoked from network); 24 Jul 2008 18:57:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Jul 2008 18:57:45 -0000
Received: (qmail 23733 invoked by uid 500); 24 Jul 2008 18:57:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23516 invoked by uid 500); 24 Jul 2008 18:57:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23505 invoked by uid 99); 24 Jul 2008 18:57:38 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Jul 2008 11:57:38 -0700
X-ASF-Spam-Status: No, hits=4.0 required=10.0
	tests=DNS_FROM_OPENWHOIS,FORGED_YAHOO_RCVD,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Jul 2008 18:56:42 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KM5zu-00056d-VC
	for java-user@lucene.apache.org; Thu, 24 Jul 2008 11:57:06 -0700
Message-ID: <18638286.post@talk.nabble.com>
Date: Thu, 24 Jul 2008 11:57:06 -0700 (PDT)
From: samd <sdoyle_2@yahoo.com>
To: java-user@lucene.apache.org
Subject: Re: Luke shows in top terms but no search results??
In-Reply-To: <OF4E06572F.2BCE2A20-ON85257490.006730AE-85257490.006754DF@fin.equifax.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: sdoyle_2@yahoo.com
References: <18638011.post@talk.nabble.com> <OF4E06572F.2BCE2A20-ON85257490.006730AE-85257490.006754DF@fin.equifax.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Hello and yes I'm using Standard in both cases.


Aravind.Yarram wrote:
> 
> r u using the same analyzer, which u used for indexing, in the luke as 
> well?
> 
> Regards, 
> Aravind R Yarram
> Enabling Technologies
> Equifax Information Services LLC
> 1525 Windward Concourse, J42E
> Alpharetta, GA 30005
> desk: 770 740 6951
> email: aravind.yarram@equifax.com 
> 
> 
> 
> samd <sdoyle_2@yahoo.com> 
> 07/24/2008 02:45 PM
> Please respond to
> java-user@lucene.apache.org
> 
> 
> To
> java-user@lucene.apache.org
> cc
> 
> Subject
> Luke shows in top terms but no search results??
> 
> 
> 
> 
> 
> 
> 
> Can someone explain this to me?
> 
> After indexing I can see the terms I expect in the top terms using Luke 
> but
> then when I search I get no results??
> 
> This is really bizarre and is blocker for me.
> 
> Thanks.
> -- 
> View this message in context: 
> http://www.nabble.com/Luke-shows-in-top-terms-but-no-search-results---tp18638011p18638011.html
> 
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 
> This message contains information from Equifax Inc. which may be
> confidential and privileged.  If you are not an intended recipient, please
> refrain from any disclosure, copying, distribution or use of this
> information and note that such actions are prohibited.  If you have
> received this transmission in error, please notify by e-mail
> postmaster@equifax.com.
> 
> 

-- 
View this message in context: http://www.nabble.com/Luke-shows-in-top-terms-but-no-search-results---tp18638011p18638286.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35120-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 24 18:58:33 2008
Return-Path: <java-user-return-35120-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65986 invoked from network); 24 Jul 2008 18:58:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Jul 2008 18:58:33 -0000
Received: (qmail 27084 invoked by uid 500); 24 Jul 2008 18:58:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27059 invoked by uid 500); 24 Jul 2008 18:58:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27048 invoked by uid 99); 24 Jul 2008 18:58:26 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Jul 2008 11:58:26 -0700
X-ASF-Spam-Status: No, hits=4.0 required=10.0
	tests=DNS_FROM_OPENWHOIS,FORGED_YAHOO_RCVD,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Jul 2008 18:57:31 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KM60i-00058c-8a
	for java-user@lucene.apache.org; Thu, 24 Jul 2008 11:57:56 -0700
Message-ID: <18638323.post@talk.nabble.com>
Date: Thu, 24 Jul 2008 11:57:56 -0700 (PDT)
From: samd <sdoyle_2@yahoo.com>
To: java-user@lucene.apache.org
Subject: Re: Luke shows in top terms but no search results??
In-Reply-To: <OF4E06572F.2BCE2A20-ON85257490.006730AE-85257490.006754DF@fin.equifax.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: sdoyle_2@yahoo.com
References: <18638011.post@talk.nabble.com> <OF4E06572F.2BCE2A20-ON85257490.006730AE-85257490.006754DF@fin.equifax.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Oh and the field is not tokenized and stored.
-- 
View this message in context: http://www.nabble.com/Luke-shows-in-top-terms-but-no-search-results---tp18638011p18638323.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35121-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 24 19:04:17 2008
Return-Path: <java-user-return-35121-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71023 invoked from network); 24 Jul 2008 19:04:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Jul 2008 19:04:17 -0000
Received: (qmail 42482 invoked by uid 500); 24 Jul 2008 19:04:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42448 invoked by uid 500); 24 Jul 2008 19:04:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42437 invoked by uid 99); 24 Jul 2008 19:04:09 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Jul 2008 12:04:09 -0700
X-ASF-Spam-Status: No, hits=4.0 required=10.0
	tests=DNS_FROM_OPENWHOIS,FORGED_YAHOO_RCVD,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Jul 2008 19:03:14 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KM66F-0005Wk-7L
	for java-user@lucene.apache.org; Thu, 24 Jul 2008 12:03:39 -0700
Message-ID: <18638495.post@talk.nabble.com>
Date: Thu, 24 Jul 2008 12:03:39 -0700 (PDT)
From: samd <sdoyle_2@yahoo.com>
To: java-user@lucene.apache.org
Subject: Re: Luke shows in top terms but no search results??
In-Reply-To: <359a92830807241154y1ecfd550mf743f71b2a964415@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: sdoyle_2@yahoo.com
References: <18638011.post@talk.nabble.com> <359a92830807241154y1ecfd550mf743f71b2a964415@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Indexing is done via Hibernate Search, the search I'm doing I have done in
Luke and it returns nothing. I select the field from the drop down. I type
the text which matches the top term value. No results.

Now, this isn't all fields only some fields.




Erick Erickson wrote:
> 
> This is almost certainly a coding error, and it's impossible to help
> without
> seeing some code. Please pust:
> 
> 1> your indexing code (suitably pared down)
> 2> your search code along with a sample query
> 
> Best
> Erick
> 
> On Thu, Jul 24, 2008 at 2:45 PM, samd <sdoyle_2@yahoo.com> wrote:
> 
>>
>> Can someone explain this to me?
>>
>> After indexing I can see the terms I expect in the top terms using Luke
>> but
>> then when I search I get no results??
>>
>> This is really bizarre and is blocker for me.
>>
>> Thanks.
>> --
>> View this message in context:
>> http://www.nabble.com/Luke-shows-in-top-terms-but-no-search-results---tp18638011p18638011.html
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
> 
> 

-- 
View this message in context: http://www.nabble.com/Luke-shows-in-top-terms-but-no-search-results---tp18638011p18638495.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35122-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 24 19:08:51 2008
Return-Path: <java-user-return-35122-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73249 invoked from network); 24 Jul 2008 19:08:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Jul 2008 19:08:51 -0000
Received: (qmail 48702 invoked by uid 500); 24 Jul 2008 19:08:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48661 invoked by uid 500); 24 Jul 2008 19:08:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48650 invoked by uid 99); 24 Jul 2008 19:08:44 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Jul 2008 12:08:44 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [209.222.209.11] (HELO mirkwood.informatics.jax.org) (209.222.209.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Jul 2008 19:07:49 +0000
Received: from [127.0.0.1] (corona [209.222.209.245])
	by mirkwood.informatics.jax.org (8.13.8/8.13.8) with ESMTP id m6OJ7pNv026263
	for <java-user@lucene.apache.org>; Thu, 24 Jul 2008 15:07:52 -0400 (EDT)
	(envelope-from mhall@informatics.jax.org)
Message-ID: <4888D318.9070309@informatics.jax.org>
Date: Thu, 24 Jul 2008 15:08:08 -0400
From: Matthew Hall <mhall@informatics.jax.org>
User-Agent: Thunderbird 2.0.0.16 (Windows/20080708)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Luke shows in top terms but no search results??
References: <18638011.post@talk.nabble.com> <OF4E06572F.2BCE2A20-ON85257490.006730AE-85257490.006754DF@fin.equifax.com> <18638323.post@talk.nabble.com>
In-Reply-To: <18638323.post@talk.nabble.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-PMX-Version: 5.4.3.345767, Antispam-Engine: 2.6.0.325393, Antispam-Data: 2008.7.24.184909
X-PerlMx-Spam: Gauge=IIIIIII, Probability=7%, Report='BODY_SIZE_1000_LESS 0, BODY_SIZE_5000_LESS 0, BODY_SIZE_500_599 0, __BOUNCE_CHALLENGE_SUBJ 0, __CT 0, __CTE 0, __CT_TEXT_PLAIN 0, __HAS_MSGID 0, __MIME_TEXT_ONLY 0, __MIME_VERSION 0, __SANE_MSGID 0, __USER_AGENT 0'
X-Virus-Checked: Checked by ClamAV on apache.org

Erm.. if its not tokenized that's your problem.

You are setting up an Analyzer when indexing.. but then not actually 
USING it.

Whereas when you are searching you are running your query through the 
analyzer, which transforms your text in such a way that it no longer 
matches against your untokenized form.

So, rerun your index, changing untokenized to tokenized, and I think you 
will see the results you are looking for.

Matt

samd wrote:
> Oh and the field is not tokenized and stored.
>   


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35123-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 24 19:15:24 2008
Return-Path: <java-user-return-35123-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75463 invoked from network); 24 Jul 2008 19:15:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Jul 2008 19:15:24 -0000
Received: (qmail 57926 invoked by uid 500); 24 Jul 2008 19:15:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57711 invoked by uid 500); 24 Jul 2008 19:15:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57700 invoked by uid 99); 24 Jul 2008 19:15:17 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Jul 2008 12:15:17 -0700
X-ASF-Spam-Status: No, hits=4.0 required=10.0
	tests=DNS_FROM_OPENWHOIS,FORGED_YAHOO_RCVD,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Jul 2008 19:14:22 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KM6H1-0005tT-9O
	for java-user@lucene.apache.org; Thu, 24 Jul 2008 12:14:47 -0700
Message-ID: <18638704.post@talk.nabble.com>
Date: Thu, 24 Jul 2008 12:14:47 -0700 (PDT)
From: samd <sdoyle_2@yahoo.com>
To: java-user@lucene.apache.org
Subject: Re: Luke shows in top terms but no search results??
In-Reply-To: <4888D318.9070309@informatics.jax.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: sdoyle_2@yahoo.com
References: <18638011.post@talk.nabble.com> <OF4E06572F.2BCE2A20-ON85257490.006730AE-85257490.006754DF@fin.equifax.com> <18638323.post@talk.nabble.com> <4888D318.9070309@informatics.jax.org>
X-Virus-Checked: Checked by ClamAV on apache.org


Yes that did it and thanks. The examples I have seen have shown cases where
you can specify values which aren't tokenized but yet do a search against
it. Such cases were for something where the name was unique as it is in this
case.

Now as I said before some fields have found matches which were not tokenized
and some did not. I guess I really need to understand more about Lucene but
for the time being I can work with this.

Thank you for your help.


Matthew Hall-7 wrote:
> 
> Erm.. if its not tokenized that's your problem.
> 
> You are setting up an Analyzer when indexing.. but then not actually 
> USING it.
> 
> Whereas when you are searching you are running your query through the 
> analyzer, which transforms your text in such a way that it no longer 
> matches against your untokenized form.
> 
> So, rerun your index, changing untokenized to tokenized, and I think you 
> will see the results you are looking for.
> 
> Matt
> 
> samd wrote:
>> Oh and the field is not tokenized and stored.
>>   
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/Luke-shows-in-top-terms-but-no-search-results---tp18638011p18638704.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35124-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 24 21:06:18 2008
Return-Path: <java-user-return-35124-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 41419 invoked from network); 24 Jul 2008 21:06:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Jul 2008 21:06:18 -0000
Received: (qmail 8020 invoked by uid 500); 24 Jul 2008 21:06:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7986 invoked by uid 500); 24 Jul 2008 21:06:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7975 invoked by uid 99); 24 Jul 2008 21:06:10 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Jul 2008 14:06:10 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [63.87.234.181] (HELO US1-IIEX1.IICORP.DOM) (63.87.234.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Jul 2008 21:05:15 +0000
Received: from US1-IIEX1.IICORP.DOM ([10.2.11.6]) by US1-IIEX1.IICORP.DOM
 ([10.2.11.6]) with mapi; Thu, 24 Jul 2008 17:01:41 -0400
From: Robert Stewart <Robert.Stewart@INFONGEN.COM>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Thu, 24 Jul 2008 17:00:33 -0400
Subject: RE: Fastest way to get just the "bits" of matching documents
Thread-Topic: Fastest way to get just the "bits" of matching documents
Thread-Index: AcjsOO6iHcEdZjuWSfGkfGy9u+3qxwBluGdA
Message-ID: <36B4EF9511887240A973A93E7878B0560A077E826C@US1-IIEX1.IICORP.DOM>
References: <925729.49551.qm@web27107.mail.ukl.yahoo.com>
In-Reply-To: <925729.49551.qm@web27107.mail.ukl.yahoo.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
MIME-Version: 1.0
X-Virus-Checked: Checked by ClamAV on apache.org

UXVlcmllcyBhcmUgdmVyeSBjb21wbGV4IGluIG91ciBjYXNlLCBzb21lIGhhdmUgdXAgdG8gMTAw
IG9yIG1vcmUgY2xhdXNlcyAob3ZlciBzZXZlcmFsIGZpZWxkcyksIGluY2x1ZGluZyBkaXNqdW5j
dGlvbnMgYW5kIHByb2hpYml0ZWQgY2xhdXNlcy4gIFNvbWUgcXVlcmllcyB0YWtlIG92ZXIgNSBz
ZWNvbmRzIHRvdGFsIHRpbWUgb24gMTAgbWlsbGlvbiBkb2N1bWVudCBpbmRleC4gIEkgdGhpbmsg
aXQgaXMgYmVjYXVzZSBxdWVyaWVzIGFyZSB0b28gYmlnIGFuZCBjb21wbGljYXRlZC4gIElzIHRo
ZXJlIGFueSBzbWFydGVyIHdheXMgdG8gb3B0aW1pemUgQm9vbGVhbiBxdWVyaWVzIHRoYW4gdXNp
bmcgZGVmYXVsdCBCb29sZWFuIHF1ZXJ5IGNsYXNzZXM/ICBXb3VsZCBpdCBtYWtlIHNlbnNlIHRv
IHB1cnN1ZSBzb21lIGN1c3RvbSAicXVlcnkgb3B0aW1pemVyIj8NCg0KDQoNCg0KDQotLS0tLU9y
aWdpbmFsIE1lc3NhZ2UtLS0tLQ0KRnJvbTogZWtzIGRldiBbbWFpbHRvOmVrc2RldkB5YWhvby5j
by51a10NClNlbnQ6IFR1ZXNkYXksIEp1bHkgMjIsIDIwMDggNDoyNiBQTQ0KVG86IGphdmEtdXNl
ckBsdWNlbmUuYXBhY2hlLm9yZw0KU3ViamVjdDogUmU6IEZhc3Rlc3Qgd2F5IHRvIGdldCBqdXN0
IHRoZSAiYml0cyIgb2YgbWF0Y2hpbmcgZG9jdW1lbnRzDQoNCm5vLCBhdCB0aGUgbW9tZW50IHlv
dSBjYW4gbm90IG1ha2UgcHVyZSBib29sZWFuIHF1ZXJpZXMuIEJ1dCAxLjUgc2Vjb25kcyBvbiAx
ME1pbyBkb2N1bWVudCBzb3VuZHMgYSBiaXQgdG9vIG11Y2ggKHdlIGhhdmUgd2VsbCB1bmRlciAy
MDBtUyBvbiAxNTBNaW8gY29sbGVjdGlvbikgd2hhdCB5b3UgY2FuIGRvOg0KDQoxLiB1c2UgRmls
dGVyIGZvciBoaWdoIGZyZXF1ZW5jeSB0ZXJtcywgZS5nLiB2aWEgQ29uc3RhbnRTY29yZVF1ZXJ5
IGFzIG11Y2ggYXMgeW91IGNhbiwgYnV0IHlvdSBoYXZlIHRvIGNhY2hlIHRoZW0gKENhY2hpbmdX
cmFwcGVyRmlsdGVyIG9yIHNvbWV0aGluZyBsaWtlIHRoYXQpLiBTb3JldGVkVkludExpc3QgY2Fu
IGhlbHAgYSBsb3QgaW4gcmVkdWNpbmcgbWVtb3J5IHJlcXVpcmVtZW50cyBmb3IgZmlsdGVyIGNh
Y2hpbmcNCjIuIFVzZSBSQU1EaXNrIGlmIGl0IGZpdHMgaW4gUkFNLCBvciBNTUFQRGlzaw0KMy5Q
cm92aWRlIG1vcmUgZGV0YWlscywgd2hhdCBpcyB0aGUgc3RydWN0dXJlIG9mIHRoZSBRdWVyeSB0
YWtlcyBzbyBsb25nLCB3aGF0IGlzIHRoZSBkYXRhIGluIGluZGV4Li4uIHNvIHNvbWVvbmUgY2Fu
IGhlbHAgeW91IHJlYWxseS4gWW91ciBxdWVzdGlvbiBpdCBpcyBqdXN0IHRvbyBhYnN0cmFjdCBu
b3cNCjQuIHRyeSB0byBzb3J0IHlvdXIgaW5kZXggc28gdGhhdCB0aGluZ3MgdGhhdCB5b3UgZXhw
ZWN0IGluIHJlc3VsdCBnZXQgY2xvc2UsIGUuZyBpZiB5b3Ugc2VhcmNoIHByZWRvbWluYW50bHkg
b24gc29tZSBudW1iZXIsIHNvcnQgaXQgb24gaXQuLi4gaWYgeW91IGNhbi4uLiB0aGlzIGhlbHBz
IHJlZHVjZSBJTyBzdHJlc3MgZHVlIGxvY2FsaXR5DQo1LiB0cnkgaHR0cHM6Ly9pc3N1ZXMuYXBh
Y2hlLm9yZy9qaXJhL2Jyb3dzZS9MVUNFTkUtMTM0MCAgYXMgeW91IGRvIG5vdCBuZWVkIHRlcm0g
ZnJlcXVlbmNpZXMgZm9yIHNjb3JpbmcNCjYuIHRyeSB1c2luZyB5b3VyIEhpdENvbGxlY3RvciBp
bnN0ZWQgb2YgUXVlcnlGaWx0ZXIuQml0cygpIHRvIGdldCB5b3VyIGJpdHMNCg0KDQppZiB5b3Ug
dHJpZWQgYWxsIHRoZXNlIG9wdGlvbnMgYW5kIGl0IHN0aWxsIGRvZXMgbm90IHdvcmsgZmFzdCBl
bm91Z2ggYW5kIHlvdSByZWFsbHkgaGF2ZSBib3R0ZWxuZWNrIGluIFNjb3JpbmcgKEkgZG91YnQg
aXQpIHRoZW4geW91IGhhdmUgMjoNCi0gV2FpdCBmb3IgUGF1bCB0byBjb21lIGJhY2sgZnJvbSBI
b2xpZGF5cywgaGUgd2FudGVkIHRvIG1ha2UgInB1cmUgQm9vbGVhbiIgcXVlcmllcywgd2l0aG91
dCBTY29yaW5nLCBwb3NzaWJsZSA6KQ0KLSBJbnZlc3QgaW4gZmFzdGVyIENQVS9NZW1vcnkNCg0K
DQpoYXZlIGZ1bg0KZWtzDQoNCg0KDQotLS0tLSBPcmlnaW5hbCBNZXNzYWdlIC0tLS0NCj4gRnJv
bTogUm9iZXJ0IFN0ZXdhcnQgPFJvYmVydC5TdGV3YXJ0QElORk9OR0VOLkNPTT4NCj4gVG86ICJq
YXZhLXVzZXJAbHVjZW5lLmFwYWNoZS5vcmciIDxqYXZhLXVzZXJAbHVjZW5lLmFwYWNoZS5vcmc+
DQo+IFNlbnQ6IFR1ZXNkYXksIDIyIEp1bHksIDIwMDggOTozNzoyNiBQTQ0KPiBTdWJqZWN0OiBG
YXN0ZXN0IHdheSB0byBnZXQganVzdCB0aGUgImJpdHMiIG9mIG1hdGNoaW5nIGRvY3VtZW50cw0K
Pg0KPiBJIG5lZWQgdG8gZXhlY3V0ZSBhIGJvb2xlYW4gcXVlcnkgYW5kIGdldCBiYWNrIGp1c3Qg
dGhlIGJpdHMgb2YgYWxsIHRoZSBtYXRjaGluZw0KPiBkb2N1bWVudHMuICBJIGRvIGFkZGl0aW9u
YWwgZmlsdGVyaW5nIChkYXRlIHJhbmdlcyBhbmQgZW50aXRsZW1lbnRzKSBhbmQgdGhlbiBkbw0K
PiBteSBvd24gc29ydGluZyBsYXRlciBvbi4gIEkga25vdyB0aGF0IHVzaW5nIFF1ZXJ5RmlsdGVy
LkJpdHMoKSB3aWxsIHN0aWxsDQo+IGNvbXB1dGUgc2NvcmVzIGZvciBhbGwgbWF0Y2hpbmcgZG9j
dW1lbnRzLiAgSSBkbyBub3Qgd2FudCB0byBjb21wdXRlIGFueQ0KPiBzY29yZXMuICBGb3IgcXVl
cmllcyB3aXRoIGxhcmdlIHJlc3VsdHMgKG92ZXIgNSBtaWxsaW9uKSwgc2VlbXMgbGlrZSBpdCBp
cw0KPiBzb21ld2hhdCBzbG93ICwgYW5kIG1heWJlIGNvbXB1dGluZyBzY29yZXMgaXMgdGFraW5n
IHNvbWUgdGltZS4gIEkgaGF2ZQ0KPiAxMG1pbGxpb24gZG9jdW1lbnQgaW5kZXgsIGFuZCBmb3Ig
c29tZSB2ZXJ5IGJyb2FkIHF1ZXJpZXMgKDQtNSBtaWxsaW9uIG1hdGNoaW5nDQo+IGRvY3VtZW50
cyksIHNlZW1zIGxpa2UgZ2V0dGluZyBiaXRzIGlzIHNsb3cgKDEuNSBzZWNvbmRzKS4gIEkgY2Fu
IGRvIG15IG93bg0KPiBzb3J0aW5nIG9mIHJlc3VsdHMgZm9yIHJlcXVlc3RlZCBwYWdlIGluIHVu
ZGVyIDMwIG1zLCBzaW5jZSBJIGhhdmUgZWZmaWNpZW50DQo+IGNhY2hlZCBwZXJtdXRhdGlvbnMg
b2Ygc29ydGluZyBieSB2YXJpb3VzIGZpZWxkcy4gIElzIHRoZXJlIGEgd2F5IGdpdmVuIGENCj4g
Qm9vbGVhblF1ZXJ5LCB0byBnZXQgbWF0Y2hpbmcgYml0cyB3aXRob3V0IGNvbXB1dGluZyBhbnkg
c2NvcmVzIGludGVybmFsbHk/ICBJDQo+IGxvb2tlZCBhdCBDb25zdGFudFNjb3JlUXVlcnkgYnV0
IEkgYmVsaWV2ZSBpdCBhY3R1YWxseSBzdGlsbCBjb21wdXRlcyBzY29yZXMNCj4gc2luY2UgaXQg
Z2V0cyBiaXRzIGZyb20gdGhlIHVuZGVybHlpbmcgcXVlcnkgYW55d2F5LiAgSW4gZmFjdCBJIHRl
c3RlZCBpdCBhbmQgaXQNCj4gaXMgYWN0dWFsbHkgc2xvd2VyIHRvIHVzZSBDb25zdGFudFNjb3Jl
UXVlcnkgdGhhbiBub3QgdG8uDQo+DQo+IElzIGl0IHBvc3NpYmxlIHRvIHVzZSBhIGN1c3RvbSBz
aW1pbGFyaXR5IGNsYXNzIHRvIG1ha2Ugc2NvcmluZyBmYXN0ZXIgKGJ5DQo+IHJldHVybmluZyAw
IHZhbHVlcywgZXRjKT8NCj4NCj4NCj4NCj4NCj4gVGhhbmtzLA0KPiBCb2INCg0KDQoNCiAgICAg
IF9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X18NCk5vdCBoYXBweSB3aXRoIHlvdXIgZW1haWwgYWRkcmVzcz8uDQpHZXQgdGhlIG9uZSB5b3Ug
cmVhbGx5IHdhbnQgLSBtaWxsaW9ucyBvZiBuZXcgZW1haWwgYWRkcmVzc2VzIGF2YWlsYWJsZSBu
b3cgYXQgWWFob28hIGh0dHA6Ly91ay5kb2NzLnlhaG9vLmNvbS95bWFpbC9uZXcuaHRtbA0KDQot
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0NClRvIHVuc3Vic2NyaWJlLCBlLW1haWw6IGphdmEtdXNlci11bnN1YnNjcmli
ZUBsdWNlbmUuYXBhY2hlLm9yZw0KRm9yIGFkZGl0aW9uYWwgY29tbWFuZHMsIGUtbWFpbDogamF2
YS11c2VyLWhlbHBAbHVjZW5lLmFwYWNoZS5vcmcNCg0K


From java-user-return-35125-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 25 05:56:14 2008
Return-Path: <java-user-return-35125-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76761 invoked from network); 25 Jul 2008 05:56:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Jul 2008 05:56:14 -0000
Received: (qmail 3322 invoked by uid 500); 25 Jul 2008 05:56:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3290 invoked by uid 500); 25 Jul 2008 05:56:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3279 invoked by uid 99); 25 Jul 2008 05:56:07 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Jul 2008 22:56:07 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of kalanir@gmail.com designates 209.85.146.178 as permitted sender)
Received: from [209.85.146.178] (HELO wa-out-1112.google.com) (209.85.146.178)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Jul 2008 05:55:10 +0000
Received: by wa-out-1112.google.com with SMTP id l24so2210340waf.11
        for <java-user@lucene.apache.org>; Thu, 24 Jul 2008 22:55:18 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=W3aDZIAFRsKNPAhAIq7MyJa+GzeDiqqTz03oGjtqBB4=;
        b=e4K5TDKIb8C6eqsEG6VH5pDvm/S1FDc2aTQ+qPc9/nqU657PuPFZ4iFf0teUMp+QvH
         RM7px/v0atHhqcfmOVN7cefoBNtFwGoOkYDYBLeomBhS9JJJZUQoFXTkXRzuvWOuJUXl
         ALTFFjPTTmKWu57YSViMiiwyb6G4dJzS3HBik=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=v51EZYKxzsVCnskduzwi6tSrkyGON1M7u/TZvJVe7wcUQDIQDWP/k1ReY1b4HVrbPJ
         mPRo28zvSAozOi1m0HIfLXXf2bwZ29wjOJAaJq4q4zm8Gx7nnJcModTmAcT30NcBvtPd
         Vq0BKesE5ixpmdtPb1COKAwX/ubYtDfqNfqmI=
Received: by 10.115.91.2 with SMTP id t2mr1525991wal.62.1216965318531;
        Thu, 24 Jul 2008 22:55:18 -0700 (PDT)
Received: by 10.114.157.7 with HTTP; Thu, 24 Jul 2008 22:55:18 -0700 (PDT)
Message-ID: <5816fbdd0807242255m79e0bdb6hf8bcc27a539bc5fc@mail.gmail.com>
Date: Fri, 25 Jul 2008 11:25:18 +0530
From: "Kalani Ruwanpathirana" <kalanir@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Ignoring XML tags when Indexing
In-Reply-To: <48887854.6080804@digitro.com.br>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_162194_9317528.1216965318555"
References: <5816fbdd0807232317n7c079dfdlde790e39d9230f4e@mail.gmail.com>
	 <48887854.6080804@digitro.com.br>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_162194_9317528.1216965318555
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Hi Marcelo,

Thanks for the reply. Yes I want to ignore all the tags and store the text
in one field. Previously used tags are not known and seems the "XMLAnalyzer=
"
is the
solution. Anyway I think Lucene itself does not support a XMLAnalyzer. Do I
have to do it manually?

Kalani

On Thu, Jul 24, 2008 at 6:10 PM, Marcelo Schneider <
marcelo.schneider@digitro.com.br> wrote:

> Do you just want to ignore them and store all in one field? If you know t=
he
> used tags previously, I guess you could set up a stop words list with the=
m.
> If not, you could do an "XMLAnalyzer" that simply ignores everything insi=
de
> '<>'...
>
> If you want to split the xml content in separate fields, you have to pars=
e
> it before indexing, take a look at this article:
> http://www.ibm.com/developerworks/library/j-lucene/
>
> I'm a little bit new to Lucene, so I might be missing something here, but=
 I
> wouldn't expect it to have an API for this...
>
>
> Kalani Ruwanpathirana escreveu:
>
>> Hi all,
>>
>> I am searching for a way to ignore XML tags in the input when indexing. =
Is
>> there a built in functionality in Lucene to get this done?
>> I am sorry if this was discussed before. I searched but couldn't find a
>> clear solution.
>>
>> Thanks in advance
>> Kalani
>>
>>
>>
>
> --
>
>
> *Marcelo Frantz Schneider*
> /SIC - TCO - Tecnologia em Engenharia do Conhecimento/
>
> *D=CDGITRO TECNOLOGIA*
> *E-mail:* marcelo.schneider@digitro.com.br <mailto:
> marcelo.schneider@digitro.com.br>
> ***Site:* www.digitro.com <http://www.digitro.com>
>
> --
> Esta mensagem foi verificada pelo sistema de antiv=EDrus da D=EDgitro e
> acredita-se estar livre de perigo.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


--=20
Kalani Ruwanpathirana
Department of Computer Science & Engineering
University of Moratuwa

------=_Part_162194_9317528.1216965318555--

From java-user-return-35126-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 25 06:12:24 2008
Return-Path: <java-user-return-35126-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81535 invoked from network); 25 Jul 2008 06:12:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Jul 2008 06:12:23 -0000
Received: (qmail 18463 invoked by uid 500); 25 Jul 2008 06:12:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18430 invoked by uid 500); 25 Jul 2008 06:12:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18417 invoked by uid 99); 25 Jul 2008 06:12:17 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 24 Jul 2008 23:12:17 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [203.217.22.128] (HELO web1.nuix.com.au) (203.217.22.128)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Jul 2008 06:11:23 +0000
Received: from [192.168.222.60] (unknown [192.168.222.60])
	by web1.nuix.com.au (Postfix) with ESMTP id 20D1B4ED89E
	for <java-user@lucene.apache.org>; Fri, 25 Jul 2008 16:10:45 +1000 (EST)
Message-ID: <48896E8C.50207@nuix.com>
Date: Fri, 25 Jul 2008 16:11:24 +1000
From: Daniel Noll <daniel@nuix.com>
Organization: NUIX Pty Limited
User-Agent: Thunderbird 2.0.0.16 (Windows/20080708)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Ignoring XML tags when Indexing
References: <5816fbdd0807232317n7c079dfdlde790e39d9230f4e@mail.gmail.com>	 <48887854.6080804@digitro.com.br> <5816fbdd0807242255m79e0bdb6hf8bcc27a539bc5fc@mail.gmail.com>
In-Reply-To: <5816fbdd0807242255m79e0bdb6hf8bcc27a539bc5fc@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Kalani Ruwanpathirana wrote:
> Hi Marcelo,
> 
> Thanks for the reply. Yes I want to ignore all the tags and store the text
> in one field. Previously used tags are not known and seems the "XMLAnalyzer"
> is the
> solution. Anyway I think Lucene itself does not support a XMLAnalyzer. Do I
> have to do it manually?

What makes more sense (at least the way I see it) is to implement a 
Reader which returns the text you need from the XML.  This sort of thing 
is relatively simple to do with the newer StAX API.  You can have your 
reader return even small chunks of text, and it should perform okay as 
long as you have a BufferedReader wrapped around the entire thing.

Daniel

-- 
Daniel Noll

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35127-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 25 07:12:38 2008
Return-Path: <java-user-return-35127-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 13168 invoked from network); 25 Jul 2008 07:12:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Jul 2008 07:12:37 -0000
Received: (qmail 53471 invoked by uid 500); 25 Jul 2008 07:12:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53436 invoked by uid 500); 25 Jul 2008 07:12:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53424 invoked by uid 99); 25 Jul 2008 07:12:30 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Jul 2008 00:12:30 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Jul 2008 07:11:34 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KMHQ1-0003dq-Tp
	for java-user@lucene.apache.org; Fri, 25 Jul 2008 00:08:49 -0700
Message-ID: <18646366.post@talk.nabble.com>
Date: Fri, 25 Jul 2008 00:08:49 -0700 (PDT)
From: Sandeep K <sandeepk84@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene write locks
In-Reply-To: <9FD8013D-99F5-4995-8D4B-80510645722B@mikemccandless.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: sandeepk84@gmail.com
References: <18604932.post@talk.nabble.com> <A00D0A15-DB5E-4D64-AF60-2A09EC5718F9@mikemccandless.com> <18607685.post@talk.nabble.com> <9FD8013D-99F5-4995-8D4B-80510645722B@mikemccandless.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Hey Michael,
Thanks a lot for ur time. 
On the JMS side I have the code which uses IndexWriter.
I have to index the files that are getting uploaded. It's fine 
all the way if i upload ane file. But when i tried with 2-3 files,
it giving me the following error.

org.apache.lucene.store.LockObtainFailedException: 
Lock obtain timed out: [*Lucene_store_path]/write.lock

I guess this is because while indexing the second file, it tries to get the
lock 
before the completion of the first one. I am planning to use Synchronized
blocks.
Is there any other way to stop this or make it synchronized? 
ie. to make it sure that only one indexing happens at a time?

thanks a lot
regards,
sand


Michael McCandless-2 wrote:
> 
> 
> OK then this should be fine.  That single machine, on receiving a JMS  
> message, should use a single IndexWriter for making changes to the  
> index (ie, it should not try to open a 2nd IndexWriter while a  
> previous one is still working on a previous message).
> 
> Mike
> 
> Sandeep K wrote:
> 
>>
>> Thanks a lot Mike,
>> There will be only one machine which uses IndexWriter and its  the
>> JMS server. This server will first create the file in the physical  
>> file
>> system(its Linux)
>> and then index the saved file.
>>
>>
>> Michael McCandless-2 wrote:
>>>
>>>
>>> Sandeep K wrote:
>>>
>>>>
>>>> Hi all..
>>>> I had a question related to the write locks created by Lucene.
>>>> I use Lucene 2.3.2. Will this newwer version create locks while
>>>> indexing as
>>>> older ones?
>>>> or is there any other way that lucene handles its operations?
>>>
>>> It still creates write locks, which are used to ensure only one  
>>> writer
>>> is changing the index at a time.
>>>
>>>> And my another doubt is that i use JMS for lucene indexing.
>>>> My App server will not do indexing but will pass the needed data for
>>>> indexing to the JMS server.
>>>> will there be any problem in indexing as its asynchronous?
>>>> plz help me..
>>>
>>> Will there be multiple machines that might open an IndexWriter and do
>>> indexing, on receiving messages from the JMS server?
>>>
>>> What filesystem is being used to share access to the index?
>>>
>>> Mike
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>>
>>
>> -- 
>> View this message in context:
>> http://www.nabble.com/Lucene-write-locks-tp18604932p18607685.html
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/Lucene-write-locks-tp18604932p18646366.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35128-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 25 08:54:32 2008
Return-Path: <java-user-return-35128-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70766 invoked from network); 25 Jul 2008 08:54:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Jul 2008 08:54:31 -0000
Received: (qmail 92969 invoked by uid 500); 25 Jul 2008 08:54:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92703 invoked by uid 500); 25 Jul 2008 08:54:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92692 invoked by uid 99); 25 Jul 2008 08:54:25 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Jul 2008 01:54:25 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of thomas.becker@net-m.de designates 62.214.145.243 as permitted sender)
Received: from [62.214.145.243] (HELO mx1.net-m.de) (62.214.145.243)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Jul 2008 08:53:31 +0000
Received: from tbeckers-MacBook.local ([192.168.1.173])
	(authenticated bits=0)
	by mx1.net-m.de (8.13.8/8.13.8) with ESMTP id m6P8rtoI021746
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <java-user@lucene.apache.org>; Fri, 25 Jul 2008 10:53:55 +0200
Message-ID: <4889948B.9080703@net-m.de>
Date: Fri, 25 Jul 2008 10:53:31 +0200
From: Thomas Becker <thomas.becker@net-m.de>
User-Agent: Thunderbird 2.0.0.14 (Macintosh/20080421)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Range Query Question
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Greylist: Sender succeeded SMTP AUTH, not delayed by milter-greylist-4.0 (mx1.net-m.de [192.168.4.13]); Fri, 25 Jul 2008 10:53:55 +0200 (CEST)
X-Virus-Scanned: ClamAV 0.93.3/7824/Fri Jul 25 03:48:33 2008 on nereus.d4.net-m.de
X-Virus-Status: Clean
X-Virus-Checked: Checked by ClamAV on apache.org

Hi all,

I need to replace some db queries with lucene due to response time 
issues for sure. In this special case I need to do a range query on a 
field and a prefix query. I'm trying to prepare and try my query in luke 
with no success before migrating it to java.

I need to find all names starting with for example "A Balladeer" to "A 
Perfect Circle" in the name field. The sort field is sortName (same 
content as name, but untokenized for sorting).

I tried the following in luke which should give me a few hundred docs:

name:["A Balladeer*" TO "A Perfect Circle*"] - 0 results, also there 
should be some
name:["A Balladeer*" TO "B*" - >10k results, but also returns results 
which have a string in the middle or end starting with A

I tried using sortName (untokenized) field instead:
sortName:["A Balladeer*" TO "B*" - 25 results, all starting with A* 
(guess since it's untokenized), but far less than expected again

Tried a couple of more (stupid) things with little success. I googled 
around, but I'm kinda stuck here. So I'm asking the list. How can I 
search all name/sortName fields in a range between "A Balladeer*" TO "A 
Perfect Circle*" and get only terms back which are starting with that 
terms? Is there a way to accomplish that in Java and try it in luke?

And is there a way to sort resultsets in luke?

Cheers,
Thomas

-- 
Thomas Becker



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35129-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 25 09:14:31 2008
Return-Path: <java-user-return-35129-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80561 invoked from network); 25 Jul 2008 09:14:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Jul 2008 09:14:31 -0000
Received: (qmail 23694 invoked by uid 500); 25 Jul 2008 09:14:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23666 invoked by uid 500); 25 Jul 2008 09:14:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23655 invoked by uid 99); 25 Jul 2008 09:14:24 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Jul 2008 02:14:24 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ian.lea@gmail.com designates 209.85.198.228 as permitted sender)
Received: from [209.85.198.228] (HELO rv-out-0506.google.com) (209.85.198.228)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Jul 2008 09:13:30 +0000
Received: by rv-out-0506.google.com with SMTP id f6so3248806rvb.5
        for <java-user@lucene.apache.org>; Fri, 25 Jul 2008 02:13:38 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references;
        bh=4V9QfyyPb3zF/HEhjKXRccJllj5s09Oar5dSBHUxMKU=;
        b=iWCM3hPHQVsLNIfj/2kyHTBHpDe1HCSWsYM554QtLPCGKwgtk070FodZhe0N4ASdhM
         dt+3GObTG/sLe+pF+792biS05D8pecXU7m2bESvD+9pkV0SZTkZa4v/P8KYVKSyu5SuW
         kY1q55TKgqaBvjLjoDcv+hnTAuoufHizR2IdM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references;
        b=BHJnH5SBnmPjtoOWfXz02f6ikAsSuMxsTcR8X668xyf79MwBs9uaILpcbApjlWHeZO
         oExiJZXcxHtV+UVixth4Na4ZpfwntL6AJlyijXt/ny1tGGeIBXBET0V8H3RGVbfJ9VeM
         LdD/H135SiVG5FuJI5+K/JlAIoitYWAGUi5gs=
Received: by 10.114.185.8 with SMTP id i8mr1610191waf.28.1216977218431;
        Fri, 25 Jul 2008 02:13:38 -0700 (PDT)
Received: by 10.114.15.5 with HTTP; Fri, 25 Jul 2008 02:13:38 -0700 (PDT)
Message-ID: <8c4e68610807250213y7feac436tf22f143d3f752248@mail.gmail.com>
Date: Fri, 25 Jul 2008 10:13:38 +0100
From: "Ian Lea" <ian.lea@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Range Query Question
In-Reply-To: <4889948B.9080703@net-m.de>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <4889948B.9080703@net-m.de>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi


Are you sure your range queries should have wild card asterisks on the
end?  Looks odd to me and I don't know what the effect would be.

I'd also prefer everything in lower case but maybe you've got the
right analyzers being used consistently in indexing and searching
chains.


--
Ian.



On Fri, Jul 25, 2008 at 9:53 AM, Thomas Becker <thomas.becker@net-m.de> wrote:
> Hi all,
>
> I need to replace some db queries with lucene due to response time issues
> for sure. In this special case I need to do a range query on a field and a
> prefix query. I'm trying to prepare and try my query in luke with no success
> before migrating it to java.
>
> I need to find all names starting with for example "A Balladeer" to "A
> Perfect Circle" in the name field. The sort field is sortName (same content
> as name, but untokenized for sorting).
>
> I tried the following in luke which should give me a few hundred docs:
>
> name:["A Balladeer*" TO "A Perfect Circle*"] - 0 results, also there should
> be some
> name:["A Balladeer*" TO "B*" - >10k results, but also returns results which
> have a string in the middle or end starting with A
>
> I tried using sortName (untokenized) field instead:
> sortName:["A Balladeer*" TO "B*" - 25 results, all starting with A* (guess
> since it's untokenized), but far less than expected again
>
> Tried a couple of more (stupid) things with little success. I googled
> around, but I'm kinda stuck here. So I'm asking the list. How can I search
> all name/sortName fields in a range between "A Balladeer*" TO "A Perfect
> Circle*" and get only terms back which are starting with that terms? Is
> there a way to accomplish that in Java and try it in luke?
>
> And is there a way to sort resultsets in luke?
>
> Cheers,
> Thomas
>
> --
> Thomas Becker

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35130-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 25 09:24:10 2008
Return-Path: <java-user-return-35130-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85987 invoked from network); 25 Jul 2008 09:24:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Jul 2008 09:24:10 -0000
Received: (qmail 40745 invoked by uid 500); 25 Jul 2008 09:24:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40713 invoked by uid 500); 25 Jul 2008 09:24:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40701 invoked by uid 99); 25 Jul 2008 09:24:03 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Jul 2008 02:24:03 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of thomas.becker@net-m.de designates 62.214.145.243 as permitted sender)
Received: from [62.214.145.243] (HELO mx1.net-m.de) (62.214.145.243)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Jul 2008 09:23:06 +0000
Received: from tbeckers-MacBook.local ([192.168.1.173])
	(authenticated bits=0)
	by mx1.net-m.de (8.13.8/8.13.8) with ESMTP id m6P9NUCH026251
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <java-user@lucene.apache.org>; Fri, 25 Jul 2008 11:23:30 +0200
Message-ID: <48899B7A.8010409@net-m.de>
Date: Fri, 25 Jul 2008 11:23:06 +0200
From: Thomas Becker <thomas.becker@net-m.de>
User-Agent: Thunderbird 2.0.0.14 (Macintosh/20080421)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Range Query Question
References: <4889948B.9080703@net-m.de> <8c4e68610807250213y7feac436tf22f143d3f752248@mail.gmail.com>
In-Reply-To: <8c4e68610807250213y7feac436tf22f143d3f752248@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 8bit
X-Greylist: Sender succeeded SMTP AUTH, not delayed by milter-greylist-4.0 (mx1.net-m.de [192.168.4.13]); Fri, 25 Jul 2008 11:23:30 +0200 (CEST)
X-Virus-Scanned: ClamAV 0.93.3/7824/Fri Jul 25 03:48:33 2008 on nereus.d4.net-m.de
X-Virus-Status: Clean
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Ian,

no the wild cards should not be necessary. That was just the last try 
out of some. I now the exact content of both fields in my range query. 
The case is as the java code found it, but the analyzer will lowercase 
it anyhow. I'm trying the SimpleAnalyzer since all other seem to ommit 
single char terms.

name:("A Balladeer") (translated to name:("a balladeer") by the analyzer 
gives me the doc I expect with doc Id 13002.
name:("A Perfect Circle") gives me as excpected doc Id 35833.

However:

name:["A Balladeer" TO "A Perfect Circle"] gives zero results. Tried it 
also with braces around the term and such stupid things, even if they 
shouldn't be needed in a range query.

I'm kinda clueless.

Cheers,
Thomas

Ian Lea wrote:
> Hi
>
>
> Are you sure your range queries should have wild card asterisks on the
> end?  Looks odd to me and I don't know what the effect would be.
>
> I'd also prefer everything in lower case but maybe you've got the
> right analyzers being used consistently in indexing and searching
> chains.
>
>
> --
> Ian.
>
>
>
> On Fri, Jul 25, 2008 at 9:53 AM, Thomas Becker <thomas.becker@net-m.de> wrote:
>   
>> Hi all,
>>
>> I need to replace some db queries with lucene due to response time issues
>> for sure. In this special case I need to do a range query on a field and a
>> prefix query. I'm trying to prepare and try my query in luke with no success
>> before migrating it to java.
>>
>> I need to find all names starting with for example "A Balladeer" to "A
>> Perfect Circle" in the name field. The sort field is sortName (same content
>> as name, but untokenized for sorting).
>>
>> I tried the following in luke which should give me a few hundred docs:
>>
>> name:["A Balladeer*" TO "A Perfect Circle*"] - 0 results, also there should
>> be some
>> name:["A Balladeer*" TO "B*" - >10k results, but also returns results which
>> have a string in the middle or end starting with A
>>
>> I tried using sortName (untokenized) field instead:
>> sortName:["A Balladeer*" TO "B*" - 25 results, all starting with A* (guess
>> since it's untokenized), but far less than expected again
>>
>> Tried a couple of more (stupid) things with little success. I googled
>> around, but I'm kinda stuck here. So I'm asking the list. How can I search
>> all name/sortName fields in a range between "A Balladeer*" TO "A Perfect
>> Circle*" and get only terms back which are starting with that terms? Is
>> there a way to accomplish that in Java and try it in luke?
>>
>> And is there a way to sort resultsets in luke?
>>
>> Cheers,
>> Thomas
>>
>> --
>> Thomas Becker
>>     
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>   

-- 
Thomas Becker
Senior JEE Developer

net mobile AG
Zollhof 17
40221 Dsseldorf
GERMANY

Phone:    +49 211 97020-195
Fax:      +49 211 97020-949
Mobile:   +49 173 5146567 (private)
E-Mail:   mailto:thomas.becker@net-m.de
Internet: http://www.net-m.de

Registergericht:  Amtsgericht Dsseldorf, HRB 48022
Vorstand:         Theodor Niehues (Vorsitzender), Frank Hartmann,
                 Kai Markus Kulas, Dieter Plassmann
Vorsitzender des
Aufsichtsrates:   Dr. Michael Briem 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35131-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 25 09:28:10 2008
Return-Path: <java-user-return-35131-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 87855 invoked from network); 25 Jul 2008 09:28:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Jul 2008 09:28:09 -0000
Received: (qmail 48646 invoked by uid 500); 25 Jul 2008 09:28:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48620 invoked by uid 500); 25 Jul 2008 09:28:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48608 invoked by uid 99); 25 Jul 2008 09:28:03 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Jul 2008 02:28:03 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of thomas.becker@net-m.de designates 62.214.145.243 as permitted sender)
Received: from [62.214.145.243] (HELO mx1.net-m.de) (62.214.145.243)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Jul 2008 09:27:07 +0000
Received: from tbeckers-MacBook.local ([192.168.1.173])
	(authenticated bits=0)
	by mx1.net-m.de (8.13.8/8.13.8) with ESMTP id m6P9RUS8026824
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <java-user@lucene.apache.org>; Fri, 25 Jul 2008 11:27:30 +0200
Message-ID: <48899C6A.9000006@net-m.de>
Date: Fri, 25 Jul 2008 11:27:06 +0200
From: Thomas Becker <thomas.becker@net-m.de>
User-Agent: Thunderbird 2.0.0.14 (Macintosh/20080421)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Range Query Question
References: <4889948B.9080703@net-m.de> <8c4e68610807250213y7feac436tf22f143d3f752248@mail.gmail.com> <48899B7A.8010409@net-m.de>
In-Reply-To: <48899B7A.8010409@net-m.de>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 8bit
X-Greylist: Sender succeeded SMTP AUTH, not delayed by milter-greylist-4.0 (mx1.net-m.de [192.168.4.13]); Fri, 25 Jul 2008 11:27:31 +0200 (CEST)
X-Virus-Scanned: ClamAV 0.93.3/7824/Fri Jul 25 03:48:33 2008 on nereus.d4.net-m.de
X-Virus-Status: Clean
X-Virus-Checked: Checked by ClamAV on apache.org

Btw. I tried the wildcard since I found something on google, which noted 
wildcards together with StartsWith queries.

Thomas Becker wrote:
> Hi Ian,
>
> no the wild cards should not be necessary. That was just the last try 
> out of some. I now the exact content of both fields in my range query. 
> The case is as the java code found it, but the analyzer will lowercase 
> it anyhow. I'm trying the SimpleAnalyzer since all other seem to ommit 
> single char terms.
>
> name:("A Balladeer") (translated to name:("a balladeer") by the 
> analyzer gives me the doc I expect with doc Id 13002.
> name:("A Perfect Circle") gives me as excpected doc Id 35833.
>
> However:
>
> name:["A Balladeer" TO "A Perfect Circle"] gives zero results. Tried 
> it also with braces around the term and such stupid things, even if 
> they shouldn't be needed in a range query.
>
> I'm kinda clueless.
>
> Cheers,
> Thomas
>
> Ian Lea wrote:
>> Hi
>>
>>
>> Are you sure your range queries should have wild card asterisks on the
>> end?  Looks odd to me and I don't know what the effect would be.
>>
>> I'd also prefer everything in lower case but maybe you've got the
>> right analyzers being used consistently in indexing and searching
>> chains.
>>
>>
>> -- 
>> Ian.
>>
>>
>>
>> On Fri, Jul 25, 2008 at 9:53 AM, Thomas Becker 
>> <thomas.becker@net-m.de> wrote:
>>  
>>> Hi all,
>>>
>>> I need to replace some db queries with lucene due to response time 
>>> issues
>>> for sure. In this special case I need to do a range query on a field 
>>> and a
>>> prefix query. I'm trying to prepare and try my query in luke with no 
>>> success
>>> before migrating it to java.
>>>
>>> I need to find all names starting with for example "A Balladeer" to "A
>>> Perfect Circle" in the name field. The sort field is sortName (same 
>>> content
>>> as name, but untokenized for sorting).
>>>
>>> I tried the following in luke which should give me a few hundred docs:
>>>
>>> name:["A Balladeer*" TO "A Perfect Circle*"] - 0 results, also there 
>>> should
>>> be some
>>> name:["A Balladeer*" TO "B*" - >10k results, but also returns 
>>> results which
>>> have a string in the middle or end starting with A
>>>
>>> I tried using sortName (untokenized) field instead:
>>> sortName:["A Balladeer*" TO "B*" - 25 results, all starting with A* 
>>> (guess
>>> since it's untokenized), but far less than expected again
>>>
>>> Tried a couple of more (stupid) things with little success. I googled
>>> around, but I'm kinda stuck here. So I'm asking the list. How can I 
>>> search
>>> all name/sortName fields in a range between "A Balladeer*" TO "A 
>>> Perfect
>>> Circle*" and get only terms back which are starting with that terms? Is
>>> there a way to accomplish that in Java and try it in luke?
>>>
>>> And is there a way to sort resultsets in luke?
>>>
>>> Cheers,
>>> Thomas
>>>
>>> -- 
>>> Thomas Becker
>>>     
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>   
>

-- 
Thomas Becker
Senior JEE Developer

net mobile AG
Zollhof 17
40221 Dsseldorf
GERMANY

Phone:    +49 211 97020-195
Fax:      +49 211 97020-949
Mobile:   +49 173 5146567 (private)
E-Mail:   mailto:thomas.becker@net-m.de
Internet: http://www.net-m.de

Registergericht:  Amtsgericht Dsseldorf, HRB 48022
Vorstand:         Theodor Niehues (Vorsitzender), Frank Hartmann,
                 Kai Markus Kulas, Dieter Plassmann
Vorsitzender des
Aufsichtsrates:   Dr. Michael Briem 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35132-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 25 09:36:39 2008
Return-Path: <java-user-return-35132-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93297 invoked from network); 25 Jul 2008 09:36:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Jul 2008 09:36:39 -0000
Received: (qmail 55086 invoked by uid 500); 25 Jul 2008 09:36:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55052 invoked by uid 500); 25 Jul 2008 09:36:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55041 invoked by uid 99); 25 Jul 2008 09:36:33 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Jul 2008 02:36:32 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of daniel.rosher@hotonline.com designates 208.87.233.190 as permitted sender)
Received: from [208.87.233.190] (HELO cluster-g.mailcontrol.com) (208.87.233.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Jul 2008 09:35:35 +0000
Received: from mail.workthing.com (mail.workthing.com [195.224.106.50])
	by rly07g.srv.mailcontrol.com (MailControl) with ESMTP id m6P9YpkG020725
	for <java-user@lucene.apache.org>; Fri, 25 Jul 2008 10:34:57 +0100
thread-index: AcjuOWBHiBPrHI5YQ6CnVeK36/EhCA==
Importance: normal
Content-Class: urn:content-classes:message
Priority: normal
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.3790.4133
Received: from [192.168.222.60] ([192.168.222.60] RDNS failed) by mail.workthing.com with Microsoft SMTPSVC(6.0.3790.3959); Fri, 25 Jul 2008 10:32:37 +0100
Subject: Re: Range Query Question
From: "daniel rosher" <daniel.rosher@hotonline.com>
To: <java-user@lucene.apache.org>
In-Reply-To: <4889948B.9080703@net-m.de>
References: <4889948B.9080703@net-m.de>
Content-Type: text/plain;
	charset="Windows-1252"
Date: Fri, 25 Jul 2008 10:35:25 +0100
Message-ID: <1216978525.7901.20.camel@rosher.org>
MIME-Version: 1.0
X-Mailer: Evolution 2.10.1 
Content-Transfer-Encoding: quoted-printable
X-OriginalArrivalTime: 25 Jul 2008 09:32:37.0388 (UTC) FILETIME=[60289CC0:01C8EE39]
X-Scanned-By: MailControl A-08-50-03 (www.mailcontrol.com) on 10.71.0.117
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Thomas,

I think one solution would be similar to the autocomplete function I've
implemented in solr, you can use this as follows in solr:

FieldType:
<fieldType name=3D"autocomplete" class=3D"solr.TextField">
<analyzer type=3D"index">
<tokenizer class=3D"solr.KeywordTokenizerFactory"/>
<filter class=3D"solr.LowerCaseFilterFactory" />
<filter class=3D"solr.PatternReplaceFilterFactory" pattern=3D"([^a-z])"
replacement=3D"" replace=3D"all" />
<filter class=3D"solr.EdgeNGramFilterFactory" maxGramSize=3D"20"
minGramSize=3D"1" />
</analyzer>
<analyzer type=3D"query">
<tokenizer class=3D"solr.KeywordTokenizerFactory"/>
<filter class=3D"solr.LowerCaseFilterFactory" />
<filter class=3D"solr.PatternReplaceFilterFactory" pattern=3D"([^a-z])"
replacement=3D"" replace=3D"all" />
</analyzer>
</fieldType>

This can then match on the whole string OR part of the string. To use
the QueryParser, you'd not be using the query part of the analyzer above
but I've included for completeness. The core of it in regards to
wildcard search is the EdgeNGramFilterFactory.

Field:
<field name=3D"name" type=3D"autocomplete" indexed=3D"true" =
stored=3D"false"
required=3D"false"/>

Then you queries can then become e.g.:

name:["aballadeer" TO "aperfectcirclf"] -- i.e. without wildcards.

Note that you'd need to do the work of the query analyzer up front, i.e.
lowercase the input and remove any non a-z chars. Additionally the '*'
on the start term would need to be removed AND the '*' on the end term
also removed and the last char increased by one char if the '*' is
present. In this case 'e' becomes 'f'.

I think you'd find this a much more efficient solution than using
wildcards which can be a performance bottleneck.

Regards,
Dan

On Fri, 2008-07-25 at 10:53 +0200, Thomas Becker wrote:
> Hi all,
>=20
> I need to replace some db queries with lucene due to response time=20
> issues for sure. In this special case I need to do a range query on a=20
> field and a prefix query. I'm trying to prepare and try my query in =
luke=20
> with no success before migrating it to java.
>=20
> I need to find all names starting with for example "A Balladeer" to "A =

> Perfect Circle" in the name field. The sort field is sortName (same=20
> content as name, but untokenized for sorting).
>=20
> I tried the following in luke which should give me a few hundred docs:
>=20
> name:["A Balladeer*" TO "A Perfect Circle*"] - 0 results, also there=20
> should be some
> name:["A Balladeer*" TO "B*" - >10k results, but also returns results=20
> which have a string in the middle or end starting with A
>=20
> I tried using sortName (untokenized) field instead:
> sortName:["A Balladeer*" TO "B*" - 25 results, all starting with A*=20
> (guess since it's untokenized), but far less than expected again
>=20
> Tried a couple of more (stupid) things with little success. I googled=20
> around, but I'm kinda stuck here. So I'm asking the list. How can I=20
> search all name/sortName fields in a range between "A Balladeer*" TO =
"A=20
> Perfect Circle*" and get only terms back which are starting with that=20
> terms? Is there a way to accomplish that in Java and try it in luke?
>=20
> And is there a way to sort resultsets in luke?
>=20
> Cheers,
> Thomas
>
Daniel Rosher
Developer
www.thehotonlinenetwork.com
d: 0207 3489 912

    t: 0845 4680 568

    f: 0845 4680 868

    m:=20

		Beaumont House, Kensington Village, Avonmore Road, London, W14 8TS
=09


    - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - =
- - - - - - - - - - - - - - - - - - - - -

    This message is sent in confidence for the addressee only. It may =
contain privileged

    information. The contents are not to be disclosed to anyone other =
than the addressee.

    Unauthorised recipients are requested to preserve this =
confidentiality and to advise

    us of any errors in transmission. Thank you.

    hotonline ltd is registered in England & Wales. Registered office: =
One Canada Square,

    Canary Wharf, London E14 5AP. Registered No: 1904765.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35133-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 25 09:40:41 2008
Return-Path: <java-user-return-35133-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95369 invoked from network); 25 Jul 2008 09:40:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Jul 2008 09:40:40 -0000
Received: (qmail 59881 invoked by uid 500); 25 Jul 2008 09:40:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59670 invoked by uid 500); 25 Jul 2008 09:40:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59659 invoked by uid 99); 25 Jul 2008 09:40:34 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Jul 2008 02:40:34 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=SPF_NEUTRAL,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.132.250] (HELO an-out-0708.google.com) (209.85.132.250)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Jul 2008 09:39:37 +0000
Received: by an-out-0708.google.com with SMTP id c37so3506718anc.49
        for <java-user@lucene.apache.org>; Fri, 25 Jul 2008 02:40:02 -0700 (PDT)
Received: by 10.100.33.9 with SMTP id g9mr2525324ang.57.1216978802139;
        Fri, 25 Jul 2008 02:40:02 -0700 (PDT)
Received: from ?10.17.4.4? ( [72.93.214.93])
        by mx.google.com with ESMTPS id 30sm7326137yxk.4.2008.07.25.02.40.01
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Fri, 25 Jul 2008 02:40:01 -0700 (PDT)
Message-Id: <0C85BDDB-0063-490E-A27A-35A62AFF3AB4@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <18646366.post@talk.nabble.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: Lucene write locks
Date: Fri, 25 Jul 2008 05:40:01 -0400
References: <18604932.post@talk.nabble.com> <A00D0A15-DB5E-4D64-AF60-2A09EC5718F9@mikemccandless.com> <18607685.post@talk.nabble.com> <9FD8013D-99F5-4995-8D4B-80510645722B@mikemccandless.com> <18646366.post@talk.nabble.com>
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org


I think the simplest approach is to use a synchronized block in your  
application to check if an IndexWriter is currently open, and if so,  
use that one to add your docs, else, open a new one and store it in a  
central place where the next message to come in can go and find it?

Each instance of IndexWriter is thread safe, so it's fine if multiple  
threads add documents at the same time.

Mike

Sandeep K wrote:

>
> Hey Michael,
> Thanks a lot for ur time.
> On the JMS side I have the code which uses IndexWriter.
> I have to index the files that are getting uploaded. It's fine
> all the way if i upload ane file. But when i tried with 2-3 files,
> it giving me the following error.
>
> org.apache.lucene.store.LockObtainFailedException:
> Lock obtain timed out: [*Lucene_store_path]/write.lock
>
> I guess this is because while indexing the second file, it tries to  
> get the
> lock
> before the completion of the first one. I am planning to use  
> Synchronized
> blocks.
> Is there any other way to stop this or make it synchronized?
> ie. to make it sure that only one indexing happens at a time?
>
> thanks a lot
> regards,
> sand
>
>
> Michael McCandless-2 wrote:
>>
>>
>> OK then this should be fine.  That single machine, on receiving a JMS
>> message, should use a single IndexWriter for making changes to the
>> index (ie, it should not try to open a 2nd IndexWriter while a
>> previous one is still working on a previous message).
>>
>> Mike
>>
>> Sandeep K wrote:
>>
>>>
>>> Thanks a lot Mike,
>>> There will be only one machine which uses IndexWriter and its  the
>>> JMS server. This server will first create the file in the physical
>>> file
>>> system(its Linux)
>>> and then index the saved file.
>>>
>>>
>>> Michael McCandless-2 wrote:
>>>>
>>>>
>>>> Sandeep K wrote:
>>>>
>>>>>
>>>>> Hi all..
>>>>> I had a question related to the write locks created by Lucene.
>>>>> I use Lucene 2.3.2. Will this newwer version create locks while
>>>>> indexing as
>>>>> older ones?
>>>>> or is there any other way that lucene handles its operations?
>>>>
>>>> It still creates write locks, which are used to ensure only one
>>>> writer
>>>> is changing the index at a time.
>>>>
>>>>> And my another doubt is that i use JMS for lucene indexing.
>>>>> My App server will not do indexing but will pass the needed data  
>>>>> for
>>>>> indexing to the JMS server.
>>>>> will there be any problem in indexing as its asynchronous?
>>>>> plz help me..
>>>>
>>>> Will there be multiple machines that might open an IndexWriter  
>>>> and do
>>>> indexing, on receiving messages from the JMS server?
>>>>
>>>> What filesystem is being used to share access to the index?
>>>>
>>>> Mike
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>>
>>>
>>> -- 
>>> View this message in context:
>>> http://www.nabble.com/Lucene-write-locks-tp18604932p18607685.html
>>> Sent from the Lucene - Java Users mailing list archive at  
>>> Nabble.com.
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>
> -- 
> View this message in context: http://www.nabble.com/Lucene-write-locks-tp18604932p18646366.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35134-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 25 10:53:50 2008
Return-Path: <java-user-return-35134-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 28862 invoked from network); 25 Jul 2008 10:53:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Jul 2008 10:53:50 -0000
Received: (qmail 37594 invoked by uid 500); 25 Jul 2008 10:53:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37566 invoked by uid 500); 25 Jul 2008 10:53:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37555 invoked by uid 99); 25 Jul 2008 10:53:42 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Jul 2008 03:53:42 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Jul 2008 10:52:47 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KMKvA-0003Kr-GG
	for java-user@lucene.apache.org; Fri, 25 Jul 2008 03:53:12 -0700
Message-ID: <18649403.post@talk.nabble.com>
Date: Fri, 25 Jul 2008 03:53:12 -0700 (PDT)
From: Sandeep K <sandeepk84@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene write locks
In-Reply-To: <0C85BDDB-0063-490E-A27A-35A62AFF3AB4@mikemccandless.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: sandeepk84@gmail.com
References: <18604932.post@talk.nabble.com> <A00D0A15-DB5E-4D64-AF60-2A09EC5718F9@mikemccandless.com> <18607685.post@talk.nabble.com> <9FD8013D-99F5-4995-8D4B-80510645722B@mikemccandless.com> <18646366.post@talk.nabble.com> <0C85BDDB-0063-490E-A27A-35A62AFF3AB4@mikemccandless.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Hi Mike,
sorry i didn't get much of it. 
i tried with synchronized block also.
but it was a failure. will it be enough to have 
a synchronized block only?

if each instance of IndexWriter is thread safe,
then do we need to check whether its open or closed each time?
why it's not doing the work even if an IndexWriter instance is 
created for each file to be indexed?

thanks and regards,
sand
 


Michael McCandless-2 wrote:
> 
> 
> I think the simplest approach is to use a synchronized block in your  
> application to check if an IndexWriter is currently open, and if so,  
> use that one to add your docs, else, open a new one and store it in a  
> central place where the next message to come in can go and find it?
> 
> Each instance of IndexWriter is thread safe, so it's fine if multiple  
> threads add documents at the same time.
> 
> Mike
> 
> Sandeep K wrote:
> 
>>
>> Hey Michael,
>> Thanks a lot for ur time.
>> On the JMS side I have the code which uses IndexWriter.
>> I have to index the files that are getting uploaded. It's fine
>> all the way if i upload ane file. But when i tried with 2-3 files,
>> it giving me the following error.
>>
>> org.apache.lucene.store.LockObtainFailedException:
>> Lock obtain timed out: [*Lucene_store_path]/write.lock
>>
>> I guess this is because while indexing the second file, it tries to  
>> get the
>> lock
>> before the completion of the first one. I am planning to use  
>> Synchronized
>> blocks.
>> Is there any other way to stop this or make it synchronized?
>> ie. to make it sure that only one indexing happens at a time?
>>
>> thanks a lot
>> regards,
>> sand
>>
>>
>> Michael McCandless-2 wrote:
>>>
>>>
>>> OK then this should be fine.  That single machine, on receiving a JMS
>>> message, should use a single IndexWriter for making changes to the
>>> index (ie, it should not try to open a 2nd IndexWriter while a
>>> previous one is still working on a previous message).
>>>
>>> Mike
>>>
>>> Sandeep K wrote:
>>>
>>>>
>>>> Thanks a lot Mike,
>>>> There will be only one machine which uses IndexWriter and its  the
>>>> JMS server. This server will first create the file in the physical
>>>> file
>>>> system(its Linux)
>>>> and then index the saved file.
>>>>
>>>>
>>>> Michael McCandless-2 wrote:
>>>>>
>>>>>
>>>>> Sandeep K wrote:
>>>>>
>>>>>>
>>>>>> Hi all..
>>>>>> I had a question related to the write locks created by Lucene.
>>>>>> I use Lucene 2.3.2. Will this newwer version create locks while
>>>>>> indexing as
>>>>>> older ones?
>>>>>> or is there any other way that lucene handles its operations?
>>>>>
>>>>> It still creates write locks, which are used to ensure only one
>>>>> writer
>>>>> is changing the index at a time.
>>>>>
>>>>>> And my another doubt is that i use JMS for lucene indexing.
>>>>>> My App server will not do indexing but will pass the needed data  
>>>>>> for
>>>>>> indexing to the JMS server.
>>>>>> will there be any problem in indexing as its asynchronous?
>>>>>> plz help me..
>>>>>
>>>>> Will there be multiple machines that might open an IndexWriter  
>>>>> and do
>>>>> indexing, on receiving messages from the JMS server?
>>>>>
>>>>> What filesystem is being used to share access to the index?
>>>>>
>>>>> Mike
>>>>>
>>>>> ---------------------------------------------------------------------
>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>
>>>>>
>>>>>
>>>>
>>>> -- 
>>>> View this message in context:
>>>> http://www.nabble.com/Lucene-write-locks-tp18604932p18607685.html
>>>> Sent from the Lucene - Java Users mailing list archive at  
>>>> Nabble.com.
>>>>
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>>
>>
>> -- 
>> View this message in context:
>> http://www.nabble.com/Lucene-write-locks-tp18604932p18646366.html
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/Lucene-write-locks-tp18604932p18649403.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35135-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 25 11:18:50 2008
Return-Path: <java-user-return-35135-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37507 invoked from network); 25 Jul 2008 11:18:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Jul 2008 11:18:50 -0000
Received: (qmail 60410 invoked by uid 500); 25 Jul 2008 11:18:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60371 invoked by uid 500); 25 Jul 2008 11:18:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60345 invoked by uid 99); 25 Jul 2008 11:18:43 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Jul 2008 04:18:43 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of nageshblore@gmail.com designates 66.249.90.176 as permitted sender)
Received: from [66.249.90.176] (HELO ik-out-1112.google.com) (66.249.90.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Jul 2008 11:17:49 +0000
Received: by ik-out-1112.google.com with SMTP id c28so2640070ika.5
        for <java-user@lucene.apache.org>; Fri, 25 Jul 2008 04:17:56 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type;
        bh=LACW5ECWHIBRiQX813ss/K/d+Dy5DKgsyJ99QuzxBTY=;
        b=bNgynB1sZ54kKhQQsL+fOZgPIYJUZ4tYDFN56k0QiWm/PwSrdNXfkyznyD4Mlb6K2X
         bnbqLjLeux4x12ZW6raR1qIJSyUgO+GZPSNgYs9kh2a0myTshY0JXdFp7UeIyWTaB0tH
         AFaInqoRpWvKszeHOcRCf/NHIreUS9on1RzzA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=jKLqbg6leLbNjneMralEbheqaUqMVsKzn81RZ/Nh6TKJ5zG5rb3CPmO/wo8yvNKPuN
         Ex6dN04acnvpK6RQd9i2vugsbIj1Od7qvFCtTo3DZzPGBdmVKXMoAg6KRbYei+rg4q3D
         8t9JuMsFNPbojasKoosgh8Ey9PPCCGYtzsniY=
Received: by 10.210.136.10 with SMTP id j10mr1820447ebd.43.1216984675659;
        Fri, 25 Jul 2008 04:17:55 -0700 (PDT)
Received: by 10.210.52.2 with HTTP; Fri, 25 Jul 2008 04:17:55 -0700 (PDT)
Message-ID: <59a485a30807250417s7315f1d2wb4ef65e2db37b2f7@mail.gmail.com>
Date: Fri, 25 Jul 2008 16:47:55 +0530
From: "=?UTF-8?B?4LKo4LK+4LKX4LOH4LK24LONIOCyuOCzgeCyrOCzjeCysOCyueCzjQ==?= =?UTF-8?B?4LKu4LKj4LON4LKvIChOYWdlc2ggUyk=?=" <nageshblore@gmail.com>
To: java-user@lucene.apache.org
Subject: Deleted documents in the index.
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_85803_21591713.1216984675679"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_85803_21591713.1216984675679
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi,
I am writing a class to report on an index. This index has documents updated
using the IndexWriter.updateDocument(Term, Document) method. That is,
documents were deleted and added again. My aim is to see what documents (and
their fields) are present in the index. Since the document was updated (i.e.
deleted and added), it is marked as deleted and hence not able to obtain a
Document object for the updated document.

How do I report on such documents ?

for (int i = 1; i < numDocs; i++) {
//ir is an IndexReader object
            if (ir.isDeleted(i)) {
                bw.write("Document " + i + " has been deleted.");
                bw.newLine();
            } else {
                Document d = getDocument(ir, i);

                List<Field> l = d.getFields();
                int numFields = l.size();
                bw.write("Document has " + numFields + " fields as
follows");
                bw.newLine();

                for (int j = 0; j < numFields; j++) {
                    String fieldName = l.get(j).name();
                    bw.write("\t Field : " + fieldName + " Value : "
                            + d.getField(fieldName).stringValue());
                    bw.newLine();
                }
            }
        }

------=_Part_85803_21591713.1216984675679--

From java-user-return-35136-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 25 11:39:17 2008
Return-Path: <java-user-return-35136-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48792 invoked from network); 25 Jul 2008 11:39:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Jul 2008 11:39:16 -0000
Received: (qmail 80350 invoked by uid 500); 25 Jul 2008 11:39:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80313 invoked by uid 500); 25 Jul 2008 11:39:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80302 invoked by uid 99); 25 Jul 2008 11:39:09 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Jul 2008 04:39:09 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of marcelo.schneider@digitro.com.br designates 189.85.128.24 as permitted sender)
Received: from [189.85.128.24] (HELO mail.digitro.com.br) (189.85.128.24)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Jul 2008 11:38:14 +0000
Received: from serverdgt.daf.digitro.com.br (firewall [189.85.128.10])
	by mail.digitro.com.br (Postfix) with ESMTP id 03C6F1F90AB4
	for <java-user@lucene.apache.org>; Fri, 25 Jul 2008 08:37:55 -0300 (BRT)
Received: from [192.168.170.157] (dinamico157.dti.digitro.com.br [192.168.170.157])
	by serverdgt.daf.digitro.com.br (Postfix) with ESMTP id 428003C45AA
	for <java-user@lucene.apache.org>; Fri, 25 Jul 2008 08:38:28 -0300 (BRT)
Message-ID: <4889BB34.2000904@digitro.com.br>
Date: Fri, 25 Jul 2008 08:38:28 -0300
From: Marcelo Schneider <marcelo.schneider@digitro.com.br>
User-Agent: Thunderbird 2.0.0.0 (Windows/20070326)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Ignoring XML tags when Indexing
References: <5816fbdd0807232317n7c079dfdlde790e39d9230f4e@mail.gmail.com>	 <48887854.6080804@digitro.com.br> <5816fbdd0807242255m79e0bdb6hf8bcc27a539bc5fc@mail.gmail.com> <48896E8C.50207@nuix.com>
In-Reply-To: <48896E8C.50207@nuix.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 8bit
X-Digitro-MailScanner-Information: Please contact the ISP for more information
X-MailScanner-ID: 03C6F1F90AB4.F14E1
X-Digitro-MailScanner: Found to be clean
X-Digitro-MailScanner-From: marcelo.schneider@digitro.com.br
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No

Daniel Noll wrote:
> What makes more sense (at least the way I see it) is to implement a 
> Reader which returns the text you need from the XML.  This sort of 
> thing is relatively simple to do with the newer StAX API.  You can 
> have your reader return even small chunks of text, and it should 
> perform okay as long as you have a BufferedReader wrapped around the 
> entire thing.
>
> Daniel
Indeed, for the sort of thing you are trying to do it definitely makes 
more sense to implement a reader.


-- 

Marcelo Frantz Schneider
SIC - TCO - Tecnologia em Engenharia do Conhecimento
DGITRO TECNOLOGIA*
*****

-- 
Esta mensagem foi verificada pelo sistema de antivrus da Dgitro e
acredita-se estar livre de perigo.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35137-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 25 11:40:08 2008
Return-Path: <java-user-return-35137-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 49219 invoked from network); 25 Jul 2008 11:40:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Jul 2008 11:40:08 -0000
Received: (qmail 84142 invoked by uid 500); 25 Jul 2008 11:40:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83781 invoked by uid 500); 25 Jul 2008 11:40:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83770 invoked by uid 99); 25 Jul 2008 11:40:01 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Jul 2008 04:40:01 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [63.87.234.181] (HELO US1-IIEX1.IICORP.DOM) (63.87.234.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Jul 2008 11:39:07 +0000
Received: from US1-IIEX1.IICORP.DOM ([10.2.11.6]) by US1-IIEX1.IICORP.DOM
 ([10.2.11.6]) with mapi; Fri, 25 Jul 2008 07:37:13 -0400
From: Robert Stewart <Robert.Stewart@INFONGEN.COM>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Fri, 25 Jul 2008 07:36:04 -0400
Subject: caching fields for query performance
Thread-Topic: caching fields for query performance
Thread-Index: AcjuSp7q6j6HN2QkQKyC2yVPWggY3A==
Message-ID: <36B4EF9511887240A973A93E7878B0560A077E828B@US1-IIEX1.IICORP.DOM>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: multipart/alternative;
	boundary="_000_36B4EF9511887240A973A93E7878B0560A077E828BUS1IIEX1IICOR_"
MIME-Version: 1.0
X-Virus-Checked: Checked by ClamAV on apache.org

--_000_36B4EF9511887240A973A93E7878B0560A077E828BUS1IIEX1IICOR_
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

If I have a frequently queried field, which has a single value per document=
 (such as language), how can I pre-cache all field values, such that the un=
derlying query processing always uses memory cache (never disk i/o) for tha=
t particular field?  I don't know if it is possible without some custom que=
ry processing, which may be difficult in my case.

We have incoming ad-hoc Boolean queries, for instance:

+topic:m&a +topic:earn  +company:MSFT +language:(ENG FRA RUS)


We have translated contents per-language, so frequently, the language claus=
e may contain up to 30 language field values.  The performance differences =
between:

+topic:m&a +topic:earn  +company:MSFT +language:(ENG FRA RUS)

And

+topic:m&a +topic:earn  +company:MSFT

Is very significant (mostly since language is OR clause).

So is there some way to optimize query processing on a per-field basis, suc=
h that language clauses are processed more efficiently?

Thanks
Bob

--_000_36B4EF9511887240A973A93E7878B0560A077E828BUS1IIEX1IICOR_--

From java-user-return-35138-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 25 12:12:57 2008
Return-Path: <java-user-return-35138-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 68088 invoked from network); 25 Jul 2008 12:12:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Jul 2008 12:12:57 -0000
Received: (qmail 18442 invoked by uid 500); 25 Jul 2008 12:12:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18415 invoked by uid 500); 25 Jul 2008 12:12:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18404 invoked by uid 99); 25 Jul 2008 12:12:50 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Jul 2008 05:12:50 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of nageshblore@gmail.com designates 66.249.90.182 as permitted sender)
Received: from [66.249.90.182] (HELO ik-out-1112.google.com) (66.249.90.182)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Jul 2008 12:11:56 +0000
Received: by ik-out-1112.google.com with SMTP id c28so2659996ika.5
        for <java-user@lucene.apache.org>; Fri, 25 Jul 2008 05:12:02 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type:content-transfer-encoding
         :content-disposition;
        bh=3RptpwfQYLxdjCyABdf0wen31rRQqHHNgmLr5Jq+dew=;
        b=wULl+xId6x1cmz4SQmMRwHNvFy7J/qvNntvFQwpsp91AJX02N4/RXSCr6CkZWV9bn+
         szOhJ4HArO1XZH/gPWRReuBhexlsdk2X13WOO/FBymxSeS9ZefeZKNsYYLDJXo2b3/Pn
         ceQsaDvmeqPhqCJQ8iW5zFrHdahe8QhHmUylE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type
         :content-transfer-encoding:content-disposition;
        b=QbKIK/VwGH37zsses7VjUS4n7IdZ+RyLgaVblFmzXWRO+HhL4wrOjZ542qmCqmGmVS
         f5ueDoJ/0/SWlgDw6/WnMgP5o7TcoQAUpreBvW6IVhqPjlenh8PHwpdVK72K1HjKX6od
         hKludr0T+ObrscVm3xa1sjMybp12tGOa5O5RY=
Received: by 10.210.87.14 with SMTP id k14mr1881702ebb.60.1216987922618;
        Fri, 25 Jul 2008 05:12:02 -0700 (PDT)
Received: by 10.210.52.2 with HTTP; Fri, 25 Jul 2008 05:12:02 -0700 (PDT)
Message-ID: <59a485a30807250512w4fd7647h81185cd62fc070ce@mail.gmail.com>
Date: Fri, 25 Jul 2008 17:42:02 +0530
From: "=?UTF-8?B?4LKo4LK+4LKX4LOH4LK24LONIOCyuOCzgeCyrOCzjeCysOCyueCzjQ==?= =?UTF-8?B?4LKu4LKj4LON4LKvIChOYWdlc2ggUyk=?=" <nageshblore@gmail.com>
To: java-user <java-user@lucene.apache.org>
Subject: Deleted documents in the index.
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,
I think, the earlier mail didn't make it through.

I am writing a class to report on an index. This index has documents
updated using the IndexWriter.updateDocument(Term, Document) method.
That is, documents were deleted and added again. My aim is to see what
documents (and their fields) are present in the index. Since the
document was updated (i.e. deleted and added), it is marked as deleted
and hence not able to obtain a Document object for the updated
document.

How do I report on such documents ?

for (int i = 1; i < numDocs; i++) {
//ir is an IndexReader object
            if (ir.isDeleted(i)) {
                bw.write("Document " + i + " has been deleted.");
                bw.newLine();
            } else {
                Document d = getDocument(ir, i);

                List<Field> l = d.getFields();
                int numFields = l.size();
                bw.write("Document has " + numFields + " fields as follows");
                bw.newLine();

                for (int j = 0; j < numFields; j++) {
                    String fieldName = l.get(j).name();
                    bw.write("\t Field : " + fieldName + " Value : "
                            + d.getField(fieldName).stringValue());
                    bw.newLine();
                }
            }
        }

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35139-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 25 12:19:57 2008
Return-Path: <java-user-return-35139-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76389 invoked from network); 25 Jul 2008 12:19:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Jul 2008 12:19:57 -0000
Received: (qmail 29690 invoked by uid 500); 25 Jul 2008 12:19:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29652 invoked by uid 500); 25 Jul 2008 12:19:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29641 invoked by uid 99); 25 Jul 2008 12:19:50 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Jul 2008 05:19:50 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [64.233.184.228] (HELO wr-out-0506.google.com) (64.233.184.228)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Jul 2008 12:18:55 +0000
Received: by wr-out-0506.google.com with SMTP id c30so2969334wra.21
        for <java-user@lucene.apache.org>; Fri, 25 Jul 2008 05:19:02 -0700 (PDT)
Received: by 10.100.227.20 with SMTP id z20mr2809113ang.62.1216988341241;
        Fri, 25 Jul 2008 05:19:01 -0700 (PDT)
Received: from ?10.17.4.4? ( [72.93.214.93])
        by mx.google.com with ESMTPS id d24sm13715318and.24.2008.07.25.05.19.00
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Fri, 25 Jul 2008 05:19:00 -0700 (PDT)
Message-Id: <117F0D1C-0906-454A-9BE4-0D37E30C5E99@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <59a485a30807250512w4fd7647h81185cd62fc070ce@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: Deleted documents in the index.
Date: Fri, 25 Jul 2008 08:18:59 -0400
References: <59a485a30807250512w4fd7647h81185cd62fc070ce@mail.gmail.com>
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org


When you call updateDocument, the old  document is deleted but a  
wholly new document is added.  So the "else" clause in your loop below  
will report on the newly added documents (you won't miss any).

Mike

(Nagesh S) wrote:

> Hi,
> I think, the earlier mail didn't make it through.
>
> I am writing a class to report on an index. This index has documents
> updated using the IndexWriter.updateDocument(Term, Document) method.
> That is, documents were deleted and added again. My aim is to see what
> documents (and their fields) are present in the index. Since the
> document was updated (i.e. deleted and added), it is marked as deleted
> and hence not able to obtain a Document object for the updated
> document.
>
> How do I report on such documents ?
>
> for (int i = 1; i < numDocs; i++) {
> //ir is an IndexReader object
>            if (ir.isDeleted(i)) {
>                bw.write("Document " + i + " has been deleted.");
>                bw.newLine();
>            } else {
>                Document d = getDocument(ir, i);
>
>                List<Field> l = d.getFields();
>                int numFields = l.size();
>                bw.write("Document has " + numFields + " fields as  
> follows");
>                bw.newLine();
>
>                for (int j = 0; j < numFields; j++) {
>                    String fieldName = l.get(j).name();
>                    bw.write("\t Field : " + fieldName + " Value : "
>                            + d.getField(fieldName).stringValue());
>                    bw.newLine();
>                }
>            }
>        }
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35140-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 25 12:39:12 2008
Return-Path: <java-user-return-35140-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89902 invoked from network); 25 Jul 2008 12:39:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Jul 2008 12:39:11 -0000
Received: (qmail 56218 invoked by uid 500); 25 Jul 2008 12:39:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56178 invoked by uid 500); 25 Jul 2008 12:39:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56167 invoked by uid 99); 25 Jul 2008 12:39:04 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Jul 2008 05:39:04 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=SPF_NEUTRAL,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [64.233.178.248] (HELO hs-out-0708.google.com) (64.233.178.248)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Jul 2008 12:38:08 +0000
Received: by hs-out-0708.google.com with SMTP id 4so444194hsl.5
        for <java-user@lucene.apache.org>; Fri, 25 Jul 2008 05:38:31 -0700 (PDT)
Received: by 10.100.164.10 with SMTP id m10mr2809562ane.120.1216989510942;
        Fri, 25 Jul 2008 05:38:30 -0700 (PDT)
Received: from ?10.17.4.4? ( [72.93.214.93])
        by mx.google.com with ESMTPS id 33sm9438121wra.37.2008.07.25.05.38.30
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Fri, 25 Jul 2008 05:38:30 -0700 (PDT)
Message-Id: <BC01FD35-122D-4018-A404-4C992DAFAEBF@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <18649403.post@talk.nabble.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: Lucene write locks
Date: Fri, 25 Jul 2008 08:38:29 -0400
References: <18604932.post@talk.nabble.com> <A00D0A15-DB5E-4D64-AF60-2A09EC5718F9@mikemccandless.com> <18607685.post@talk.nabble.com> <9FD8013D-99F5-4995-8D4B-80510645722B@mikemccandless.com> <18646366.post@talk.nabble.com> <0C85BDDB-0063-490E-A27A-35A62AFF3AB4@mikemccandless.com> <18649403.post@talk.nabble.com>
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org


It's not enough to have a synchronized block only, unless eg within  
the synchronized block you open the IndexWriter, add docs, close it.

Basically, you must also ensure only one instance of IndexWriter is  
open at once.

If you try to open another instance of IndexWriter while a previous  
instance is still open, you'll get that LockObtainFailedException.

Alternatively, on hitting that exception you could pause & retry a bit  
later if you want.  But that solution is non-optimal because you are  
inserting unnecessary delay in when a document gets indexed.

Mike

Sandeep K wrote:

>
> Hi Mike,
> sorry i didn't get much of it.
> i tried with synchronized block also.
> but it was a failure. will it be enough to have
> a synchronized block only?
>
> if each instance of IndexWriter is thread safe,
> then do we need to check whether its open or closed each time?
> why it's not doing the work even if an IndexWriter instance is
> created for each file to be indexed?
>
> thanks and regards,
> sand
>
>
>
> Michael McCandless-2 wrote:
>>
>>
>> I think the simplest approach is to use a synchronized block in your
>> application to check if an IndexWriter is currently open, and if so,
>> use that one to add your docs, else, open a new one and store it in a
>> central place where the next message to come in can go and find it?
>>
>> Each instance of IndexWriter is thread safe, so it's fine if multiple
>> threads add documents at the same time.
>>
>> Mike
>>
>> Sandeep K wrote:
>>
>>>
>>> Hey Michael,
>>> Thanks a lot for ur time.
>>> On the JMS side I have the code which uses IndexWriter.
>>> I have to index the files that are getting uploaded. It's fine
>>> all the way if i upload ane file. But when i tried with 2-3 files,
>>> it giving me the following error.
>>>
>>> org.apache.lucene.store.LockObtainFailedException:
>>> Lock obtain timed out: [*Lucene_store_path]/write.lock
>>>
>>> I guess this is because while indexing the second file, it tries to
>>> get the
>>> lock
>>> before the completion of the first one. I am planning to use
>>> Synchronized
>>> blocks.
>>> Is there any other way to stop this or make it synchronized?
>>> ie. to make it sure that only one indexing happens at a time?
>>>
>>> thanks a lot
>>> regards,
>>> sand
>>>
>>>
>>> Michael McCandless-2 wrote:
>>>>
>>>>
>>>> OK then this should be fine.  That single machine, on receiving a  
>>>> JMS
>>>> message, should use a single IndexWriter for making changes to the
>>>> index (ie, it should not try to open a 2nd IndexWriter while a
>>>> previous one is still working on a previous message).
>>>>
>>>> Mike
>>>>
>>>> Sandeep K wrote:
>>>>
>>>>>
>>>>> Thanks a lot Mike,
>>>>> There will be only one machine which uses IndexWriter and its  the
>>>>> JMS server. This server will first create the file in the physical
>>>>> file
>>>>> system(its Linux)
>>>>> and then index the saved file.
>>>>>
>>>>>
>>>>> Michael McCandless-2 wrote:
>>>>>>
>>>>>>
>>>>>> Sandeep K wrote:
>>>>>>
>>>>>>>
>>>>>>> Hi all..
>>>>>>> I had a question related to the write locks created by Lucene.
>>>>>>> I use Lucene 2.3.2. Will this newwer version create locks while
>>>>>>> indexing as
>>>>>>> older ones?
>>>>>>> or is there any other way that lucene handles its operations?
>>>>>>
>>>>>> It still creates write locks, which are used to ensure only one
>>>>>> writer
>>>>>> is changing the index at a time.
>>>>>>
>>>>>>> And my another doubt is that i use JMS for lucene indexing.
>>>>>>> My App server will not do indexing but will pass the needed data
>>>>>>> for
>>>>>>> indexing to the JMS server.
>>>>>>> will there be any problem in indexing as its asynchronous?
>>>>>>> plz help me..
>>>>>>
>>>>>> Will there be multiple machines that might open an IndexWriter
>>>>>> and do
>>>>>> indexing, on receiving messages from the JMS server?
>>>>>>
>>>>>> What filesystem is being used to share access to the index?
>>>>>>
>>>>>> Mike
>>>>>>
>>>>>> ---------------------------------------------------------------------
>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>
>>>>>>
>>>>>>
>>>>>
>>>>> -- 
>>>>> View this message in context:
>>>>> http://www.nabble.com/Lucene-write-locks-tp18604932p18607685.html
>>>>> Sent from the Lucene - Java Users mailing list archive at
>>>>> Nabble.com.
>>>>>
>>>>>
>>>>> ---------------------------------------------------------------------
>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>
>>>>
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>>
>>>
>>> -- 
>>> View this message in context:
>>> http://www.nabble.com/Lucene-write-locks-tp18604932p18646366.html
>>> Sent from the Lucene - Java Users mailing list archive at  
>>> Nabble.com.
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>
> -- 
> View this message in context: http://www.nabble.com/Lucene-write-locks-tp18604932p18649403.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35141-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 25 12:45:29 2008
Return-Path: <java-user-return-35141-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93261 invoked from network); 25 Jul 2008 12:45:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Jul 2008 12:45:29 -0000
Received: (qmail 62690 invoked by uid 500); 25 Jul 2008 12:45:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62649 invoked by uid 500); 25 Jul 2008 12:45:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62638 invoked by uid 99); 25 Jul 2008 12:45:23 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Jul 2008 05:45:23 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of nageshblore@gmail.com designates 64.233.182.184 as permitted sender)
Received: from [64.233.182.184] (HELO nf-out-0910.google.com) (64.233.182.184)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Jul 2008 12:44:29 +0000
Received: by nf-out-0910.google.com with SMTP id g16so1097802nfd.15
        for <java-user@lucene.apache.org>; Fri, 25 Jul 2008 05:44:53 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references;
        bh=K4v51joSBN+S5N+BsXtmi+zKR/y9Ekpk85D7BnEdL5k=;
        b=Vds5qV7dRZNGIj8TMIlol/PrmcX03DgBX/GAqwozXTHFO6zMC8elkBNJMBuGakwEUF
         UOzFIsocbhuuWuhtsCbvzwTEvJIXnl0jHupioMEilILYAWzDAUGI4a0nAVtjhv/eYVt3
         HOY0YL7bKTLFG+vWE0I2ABimRMxASRVuhsUYY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references;
        b=tZZb7Ja6Zr2y/ocv6NFi7A+Z7+NllkWiacT6K6KBybliPTHviIpmZ0jZ7s7AUHJRIS
         ZZ/hYmItHK/rJOYlEUkkd8BjjC7zt6NEVZ1aGz31uAqi/9S0qoDCqurZ771Zsj+ImnPu
         bYfGEmTFCg8G8BspeOFGDnbsyQlhXpW2CwYl0=
Received: by 10.210.60.8 with SMTP id i8mr1931228eba.24.1216989892933;
        Fri, 25 Jul 2008 05:44:52 -0700 (PDT)
Received: by 10.210.52.2 with HTTP; Fri, 25 Jul 2008 05:44:52 -0700 (PDT)
Message-ID: <59a485a30807250544s123e804dga0a44f8c73887056@mail.gmail.com>
Date: Fri, 25 Jul 2008 18:14:52 +0530
From: "=?UTF-8?B?4LKo4LK+4LKX4LOH4LK24LONIOCyuOCzgeCyrOCzjeCysOCyueCzjQ==?= =?UTF-8?B?4LKu4LKj4LON4LKvIChOYWdlc2ggUyk=?=" <nageshblore@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Deleted documents in the index.
In-Reply-To: <117F0D1C-0906-454A-9BE4-0D37E30C5E99@mikemccandless.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <59a485a30807250512w4fd7647h81185cd62fc070ce@mail.gmail.com>
	 <117F0D1C-0906-454A-9BE4-0D37E30C5E99@mikemccandless.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Michael,
Thanks for your response. Yes, I got that.

I guess, my question is, how do I access the newly added document ? In
other words, if the index initially had 20 docs of which 10 were
updated (that is, deleted and then added), how do I access the updated
ones ?

Initially, there was no check for delete - that is, I did not have
IndexReader.isDeleted(int). It had the for loop only which would fail
when obtaining a 'deleted' document with the following :

java.lang.IllegalArgumentException: attempt to access a deleted document
 at org.apache.lucene.index.SegmentReader.document(SegmentReader.java:331)
 at org.apache.lucene.index.MultiReader.document(MultiReader.java:108)
 at org.apache.lucene.index.IndexReader.document(IndexReader.java:437)
etc.

Regards,
Nagesh

On 7/25/08, Michael McCandless <lucene@mikemccandless.com> wrote:
>
> When you call updateDocument, the old  document is deleted but a
> wholly new document is added.  So the "else" clause in your loop below
> will report on the newly added documents (you won't miss any).
>
> Mike
>
> (Nagesh S) wrote:
>
>> Hi,
>> I think, the earlier mail didn't make it through.
>>
>> I am writing a class to report on an index. This index has documents
>> updated using the IndexWriter.updateDocument(Term, Document) method.
>> That is, documents were deleted and added again. My aim is to see what
>> documents (and their fields) are present in the index. Since the
>> document was updated (i.e. deleted and added), it is marked as deleted
>> and hence not able to obtain a Document object for the updated
>> document.
>>
>> How do I report on such documents ?
>>
>> for (int i = 1; i < numDocs; i++) {
>> //ir is an IndexReader object
>>            if (ir.isDeleted(i)) {
>>                bw.write("Document " + i + " has been deleted.");
>>                bw.newLine();
>>            } else {
>>                Document d = getDocument(ir, i);
>>
>>                List<Field> l = d.getFields();
>>                int numFields = l.size();
>>                bw.write("Document has " + numFields + " fields as
>> follows");
>>                bw.newLine();
>>
>>                for (int j = 0; j < numFields; j++) {
>>                    String fieldName = l.get(j).name();
>>                    bw.write("\t Field : " + fieldName + " Value : "
>>                            + d.getField(fieldName).stringValue());
>>                    bw.newLine();
>>                }
>>            }
>>        }
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35142-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 25 12:48:41 2008
Return-Path: <java-user-return-35142-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95692 invoked from network); 25 Jul 2008 12:48:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Jul 2008 12:48:40 -0000
Received: (qmail 67181 invoked by uid 500); 25 Jul 2008 12:48:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67142 invoked by uid 500); 25 Jul 2008 12:48:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67131 invoked by uid 99); 25 Jul 2008 12:48:34 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Jul 2008 05:48:34 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of kalanir@gmail.com designates 209.85.198.238 as permitted sender)
Received: from [209.85.198.238] (HELO rv-out-0506.google.com) (209.85.198.238)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Jul 2008 12:47:40 +0000
Received: by rv-out-0506.google.com with SMTP id f6so3316081rvb.5
        for <java-user@lucene.apache.org>; Fri, 25 Jul 2008 05:47:48 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=i2ouit4ZlQQobVYkfl5S5hmV6KIgkWmFn04zfYLXfAo=;
        b=CDwPznYYhevU3xmomsM9Vh83LG4kXtp5ssqhfrgRwIfRsy/aURwaGjBMh39MlBbVIi
         SNysoGLn9mDWkbYxOcN0lUp/0Y/QUat5wA6aecfAF35nrcfmNFfJzZOeWFnMjhQaFy3J
         63Hdl5WhtThT/n+DK4GoNmX/hNc0/a9eApsTc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=fxwP5DqCAxjR8osRVMP5ZyvtYENqcy28I5jvdfmIHSqc4pTmPoOR5AgM33j6P5UEVI
         oFdfQUyynr7vLrFBEj9Oll/d8NRibpJlEu5wvgS9cfcUJb34ytFNIK1qZEu0ziyg3EL0
         uocFs6EH60bOfGsHfU+SLA0gq1N8WfF7NLppA=
Received: by 10.115.79.8 with SMTP id g8mr1795109wal.215.1216990068520;
        Fri, 25 Jul 2008 05:47:48 -0700 (PDT)
Received: by 10.114.157.7 with HTTP; Fri, 25 Jul 2008 05:47:48 -0700 (PDT)
Message-ID: <5816fbdd0807250547q1b85abb9gd87b6f4d3814a461@mail.gmail.com>
Date: Fri, 25 Jul 2008 18:17:48 +0530
From: "Kalani Ruwanpathirana" <kalanir@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Ignoring XML tags when Indexing
In-Reply-To: <4889BB34.2000904@digitro.com.br>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_166985_9261209.1216990068502"
References: <5816fbdd0807232317n7c079dfdlde790e39d9230f4e@mail.gmail.com>
	 <48887854.6080804@digitro.com.br>
	 <5816fbdd0807242255m79e0bdb6hf8bcc27a539bc5fc@mail.gmail.com>
	 <48896E8C.50207@nuix.com> <4889BB34.2000904@digitro.com.br>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_166985_9261209.1216990068502
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Thanks both of you :) I will try that out

Kalani

On Fri, Jul 25, 2008 at 5:08 PM, Marcelo Schneider <
marcelo.schneider@digitro.com.br> wrote:

> Daniel Noll wrote:
>
>> What makes more sense (at least the way I see it) is to implement a Read=
er
>> which returns the text you need from the XML.  This sort of thing is
>> relatively simple to do with the newer StAX API.  You can have your read=
er
>> return even small chunks of text, and it should perform okay as long as =
you
>> have a BufferedReader wrapped around the entire thing.
>>
>> Daniel
>>
> Indeed, for the sort of thing you are trying to do it definitely makes mo=
re
> sense to implement a reader.
>
>
> --
>
> Marcelo Frantz Schneider
> SIC - TCO - Tecnologia em Engenharia do Conhecimento
> D=CDGITRO TECNOLOGIA*
> *****
>
> --
> Esta mensagem foi verificada pelo sistema de antiv=EDrus da D=EDgitro e
> acredita-se estar livre de perigo.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


--=20
Kalani Ruwanpathirana
Department of Computer Science & Engineering
University of Moratuwa

------=_Part_166985_9261209.1216990068502--

From java-user-return-35143-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 25 13:23:02 2008
Return-Path: <java-user-return-35143-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 16640 invoked from network); 25 Jul 2008 13:23:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Jul 2008 13:23:02 -0000
Received: (qmail 32742 invoked by uid 500); 25 Jul 2008 13:22:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32704 invoked by uid 500); 25 Jul 2008 13:22:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32693 invoked by uid 99); 25 Jul 2008 13:22:54 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Jul 2008 06:22:54 -0700
X-ASF-Spam-Status: No, hits=4.0 required=10.0
	tests=DNS_FROM_OPENWHOIS,FORGED_YAHOO_RCVD,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Jul 2008 13:21:59 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KMNFY-0000ZN-IB
	for java-user@lucene.apache.org; Fri, 25 Jul 2008 06:22:24 -0700
Message-ID: <18651668.post@talk.nabble.com>
Date: Fri, 25 Jul 2008 06:22:24 -0700 (PDT)
From: starz10de <farag_ahmed@yahoo.com>
To: java-user@lucene.apache.org
Subject: Document path in lucene index
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: farag_ahmed@yahoo.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hi All,

 I am reading the index and printing the index terms and their corresponding
paths.

I can print the index terms but I don't know if there is any possibilites to
print the coressbonds paths, i can just print the docid, but i need to print
the paths as it is possible in searcher (query).

IndexReader ir = IndexReader.open(index); 
TermEnum termEnum = ir.terms(); 
while (termEnum.next()) { 
                        TermDocs dok = ir.termDocs(); 
                        dok.seek(termEnum); 
                        while (dok.next()) { 
 System.out.println(indexTerm+"          "+dok.freq()+"        "+dok.doc());               
                 } 


Is it possible here to get the corresponding document paths??

Thanks in advance

-- 
View this message in context: http://www.nabble.com/Document-path-in-lucene-index-tp18651668p18651668.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35144-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 25 13:23:53 2008
Return-Path: <java-user-return-35144-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 17123 invoked from network); 25 Jul 2008 13:23:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Jul 2008 13:23:53 -0000
Received: (qmail 35688 invoked by uid 500); 25 Jul 2008 13:23:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 35640 invoked by uid 500); 25 Jul 2008 13:23:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 35627 invoked by uid 99); 25 Jul 2008 13:23:39 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Jul 2008 06:23:39 -0700
X-ASF-Spam-Status: No, hits=4.0 required=10.0
	tests=DNS_FROM_OPENWHOIS,FORGED_YAHOO_RCVD,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Jul 2008 13:22:44 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KMNGG-0000al-Vg
	for java-user@lucene.apache.org; Fri, 25 Jul 2008 06:23:08 -0700
Message-ID: <18651668.post@talk.nabble.com>
Date: Fri, 25 Jul 2008 06:23:08 -0700 (PDT)
From: starz10de <farag_ahmed@yahoo.com>
To: java-user@lucene.apache.org
Subject: Document path in lucene index
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: farag_ahmed@yahoo.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hi All,

 I am reading the index and printing the index terms and their corresponding
paths.

I can print the index terms but I don't know if there is any possibilites to
print the coressbonds paths, i can just print the docid, but i need to print
the paths same as in searcher (query).

IndexReader ir = IndexReader.open(index); 
TermEnum termEnum = ir.terms(); 
while (termEnum.next()) { 
                        TermDocs dok = ir.termDocs(); 
                        dok.seek(termEnum); 
                        while (dok.next()) { 
 System.out.println(indexTerm+"          "+dok.freq()+"        "+dok.doc());               
                 } 


Is it possible here to get the corresponding document paths??

Thanks in advance

-- 
View this message in context: http://www.nabble.com/Document-path-in-lucene-index-tp18651668p18651668.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35145-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 25 13:48:11 2008
Return-Path: <java-user-return-35145-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32913 invoked from network); 25 Jul 2008 13:48:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Jul 2008 13:48:10 -0000
Received: (qmail 81325 invoked by uid 500); 25 Jul 2008 13:48:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81288 invoked by uid 500); 25 Jul 2008 13:48:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81277 invoked by uid 99); 25 Jul 2008 13:48:03 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Jul 2008 06:48:03 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [64.233.184.237] (HELO wr-out-0506.google.com) (64.233.184.237)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Jul 2008 13:47:08 +0000
Received: by wr-out-0506.google.com with SMTP id c30so3013916wra.21
        for <java-user@lucene.apache.org>; Fri, 25 Jul 2008 06:47:13 -0700 (PDT)
Received: by 10.100.33.9 with SMTP id g9mr2975440ang.57.1216993633523;
        Fri, 25 Jul 2008 06:47:13 -0700 (PDT)
Received: from ?10.17.4.4? ( [72.93.214.93])
        by mx.google.com with ESMTPS id 15sm6384308wrl.25.2008.07.25.06.47.12
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Fri, 25 Jul 2008 06:47:12 -0700 (PDT)
Message-Id: <7CCF1183-4479-414E-AFFC-3C6786D3EC2D@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <59a485a30807250544s123e804dga0a44f8c73887056@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: Deleted documents in the index.
Date: Fri, 25 Jul 2008 09:47:11 -0400
References: <59a485a30807250512w4fd7647h81185cd62fc070ce@mail.gmail.com> <117F0D1C-0906-454A-9BE4-0D37E30C5E99@mikemccandless.com> <59a485a30807250544s123e804dga0a44f8c73887056@mail.gmail.com>
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org


Oh, I think I see the problem -- instead of numDocs in your for loop  
(which I assume came from IndexReader.numDocs()) change that to maxDoc  
(IndexReader.maxDoc()).

Mike

(Nagesh S) wrote:

> Hi Michael,
> Thanks for your response. Yes, I got that.
>
> I guess, my question is, how do I access the newly added document ? In
> other words, if the index initially had 20 docs of which 10 were
> updated (that is, deleted and then added), how do I access the updated
> ones ?
>
> Initially, there was no check for delete - that is, I did not have
> IndexReader.isDeleted(int). It had the for loop only which would fail
> when obtaining a 'deleted' document with the following :
>
> java.lang.IllegalArgumentException: attempt to access a deleted  
> document
> at org.apache.lucene.index.SegmentReader.document(SegmentReader.java: 
> 331)
> at org.apache.lucene.index.MultiReader.document(MultiReader.java:108)
> at org.apache.lucene.index.IndexReader.document(IndexReader.java:437)
> etc.
>
> Regards,
> Nagesh
>
> On 7/25/08, Michael McCandless <lucene@mikemccandless.com> wrote:
>>
>> When you call updateDocument, the old  document is deleted but a
>> wholly new document is added.  So the "else" clause in your loop  
>> below
>> will report on the newly added documents (you won't miss any).
>>
>> Mike
>>
>> (Nagesh S) wrote:
>>
>>> Hi,
>>> I think, the earlier mail didn't make it through.
>>>
>>> I am writing a class to report on an index. This index has documents
>>> updated using the IndexWriter.updateDocument(Term, Document) method.
>>> That is, documents were deleted and added again. My aim is to see  
>>> what
>>> documents (and their fields) are present in the index. Since the
>>> document was updated (i.e. deleted and added), it is marked as  
>>> deleted
>>> and hence not able to obtain a Document object for the updated
>>> document.
>>>
>>> How do I report on such documents ?
>>>
>>> for (int i = 1; i < numDocs; i++) {
>>> //ir is an IndexReader object
>>>           if (ir.isDeleted(i)) {
>>>               bw.write("Document " + i + " has been deleted.");
>>>               bw.newLine();
>>>           } else {
>>>               Document d = getDocument(ir, i);
>>>
>>>               List<Field> l = d.getFields();
>>>               int numFields = l.size();
>>>               bw.write("Document has " + numFields + " fields as
>>> follows");
>>>               bw.newLine();
>>>
>>>               for (int j = 0; j < numFields; j++) {
>>>                   String fieldName = l.get(j).name();
>>>                   bw.write("\t Field : " + fieldName + " Value : "
>>>                           + d.getField(fieldName).stringValue());
>>>                   bw.newLine();
>>>               }
>>>           }
>>>       }
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35146-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 25 14:10:08 2008
Return-Path: <java-user-return-35146-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 55933 invoked from network); 25 Jul 2008 14:10:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Jul 2008 14:10:08 -0000
Received: (qmail 26882 invoked by uid 500); 25 Jul 2008 14:10:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26856 invoked by uid 500); 25 Jul 2008 14:10:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26845 invoked by uid 99); 25 Jul 2008 14:10:00 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Jul 2008 07:10:00 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of nageshblore@gmail.com designates 64.233.182.187 as permitted sender)
Received: from [64.233.182.187] (HELO nf-out-0910.google.com) (64.233.182.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Jul 2008 14:09:06 +0000
Received: by nf-out-0910.google.com with SMTP id g16so1109062nfd.15
        for <java-user@lucene.apache.org>; Fri, 25 Jul 2008 07:09:14 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references;
        bh=7Eyy1/tjHZzR6udLRKvB5xqcmKFjHFvaQJuNGnq96Ew=;
        b=PO1m3QK96qpSMvATQGKmJvt21TC1rTD/9Zx8ruuJhA2AIwswR98pRnvDBViN+an1JN
         R+AXRXIng8r1LsQpGHicGZVzV2nFYDYJR9cYZKw78as4NWakb8iNziLvovZ35W3c6Jc7
         0rFWLe3bQ2VOEAMBUt/gSpXQRhw3MzghhZaL8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references;
        b=uqT0lddDDJEbcwmvboMO78KHJ/hSjYhVhAzmUZbvlyExl/yfBp4CsSLGTjyVO8pBY5
         39j/1Xudec/2Lw6+GQ2R8DzNV26AT4FbRDLHqYwkFg9QhnWIOW95ZPrraBaJQNwShiAF
         S35lqEmrtwSWQ/EpMrdmLDcjhGftb+u185AJs=
Received: by 10.210.92.11 with SMTP id p11mr1980624ebb.175.1216994953782;
        Fri, 25 Jul 2008 07:09:13 -0700 (PDT)
Received: by 10.210.52.2 with HTTP; Fri, 25 Jul 2008 07:09:13 -0700 (PDT)
Message-ID: <59a485a30807250709if876e28o7294d6f7542968d3@mail.gmail.com>
Date: Fri, 25 Jul 2008 19:39:13 +0530
From: "=?UTF-8?B?4LKo4LK+4LKX4LOH4LK24LONIOCyuOCzgeCyrOCzjeCysOCyueCzjQ==?= =?UTF-8?B?4LKu4LKj4LON4LKvIChOYWdlc2ggUyk=?=" <nageshblore@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Deleted documents in the index.
In-Reply-To: <7CCF1183-4479-414E-AFFC-3C6786D3EC2D@mikemccandless.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <59a485a30807250512w4fd7647h81185cd62fc070ce@mail.gmail.com>
	 <117F0D1C-0906-454A-9BE4-0D37E30C5E99@mikemccandless.com>
	 <59a485a30807250544s123e804dga0a44f8c73887056@mail.gmail.com>
	 <7CCF1183-4479-414E-AFFC-3C6786D3EC2D@mikemccandless.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Michael,
The numDocs did come from IndexReader.numDocs().

hmm...let me try with maxDoc.

Nagesh

On 7/25/08, Michael McCandless <lucene@mikemccandless.com> wrote:
>
> Oh, I think I see the problem -- instead of numDocs in your for loop
> (which I assume came from IndexReader.numDocs()) change that to maxDoc
> (IndexReader.maxDoc()).
>
> Mike
>
> (Nagesh S) wrote:
>
>> Hi Michael,
>> Thanks for your response. Yes, I got that.
>>
>> I guess, my question is, how do I access the newly added document ? In
>> other words, if the index initially had 20 docs of which 10 were
>> updated (that is, deleted and then added), how do I access the updated
>> ones ?
>>
>> Initially, there was no check for delete - that is, I did not have
>> IndexReader.isDeleted(int). It had the for loop only which would fail
>> when obtaining a 'deleted' document with the following :
>>
>> java.lang.IllegalArgumentException: attempt to access a deleted
>> document
>> at org.apache.lucene.index.SegmentReader.document(SegmentReader.java:
>> 331)
>> at org.apache.lucene.index.MultiReader.document(MultiReader.java:108)
>> at org.apache.lucene.index.IndexReader.document(IndexReader.java:437)
>> etc.
>>
>> Regards,
>> Nagesh
>>
>> On 7/25/08, Michael McCandless <lucene@mikemccandless.com> wrote:
>>>
>>> When you call updateDocument, the old  document is deleted but a
>>> wholly new document is added.  So the "else" clause in your loop
>>> below
>>> will report on the newly added documents (you won't miss any).
>>>
>>> Mike
>>>
>>> (Nagesh S) wrote:
>>>
>>>> Hi,
>>>> I think, the earlier mail didn't make it through.
>>>>
>>>> I am writing a class to report on an index. This index has documents
>>>> updated using the IndexWriter.updateDocument(Term, Document) method.
>>>> That is, documents were deleted and added again. My aim is to see
>>>> what
>>>> documents (and their fields) are present in the index. Since the
>>>> document was updated (i.e. deleted and added), it is marked as
>>>> deleted
>>>> and hence not able to obtain a Document object for the updated
>>>> document.
>>>>
>>>> How do I report on such documents ?
>>>>
>>>> for (int i = 1; i < numDocs; i++) {
>>>> //ir is an IndexReader object
>>>>           if (ir.isDeleted(i)) {
>>>>               bw.write("Document " + i + " has been deleted.");
>>>>               bw.newLine();
>>>>           } else {
>>>>               Document d = getDocument(ir, i);
>>>>
>>>>               List<Field> l = d.getFields();
>>>>               int numFields = l.size();
>>>>               bw.write("Document has " + numFields + " fields as
>>>> follows");
>>>>               bw.newLine();
>>>>
>>>>               for (int j = 0; j < numFields; j++) {
>>>>                   String fieldName = l.get(j).name();
>>>>                   bw.write("\t Field : " + fieldName + " Value : "
>>>>                           + d.getField(fieldName).stringValue());
>>>>                   bw.newLine();
>>>>               }
>>>>           }
>>>>       }
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35147-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 25 14:48:23 2008
Return-Path: <java-user-return-35147-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89214 invoked from network); 25 Jul 2008 14:48:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Jul 2008 14:48:23 -0000
Received: (qmail 782 invoked by uid 500); 25 Jul 2008 14:48:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 756 invoked by uid 500); 25 Jul 2008 14:48:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 745 invoked by uid 99); 25 Jul 2008 14:48:16 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Jul 2008 07:48:16 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of yseeley@gmail.com designates 209.85.198.234 as permitted sender)
Received: from [209.85.198.234] (HELO rv-out-0506.google.com) (209.85.198.234)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Jul 2008 14:47:20 +0000
Received: by rv-out-0506.google.com with SMTP id f6so3366542rvb.5
        for <java-user@lucene.apache.org>; Fri, 25 Jul 2008 07:46:27 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:sender
         :to:subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references
         :x-google-sender-auth;
        bh=oLCYhudFFbvWlPMX2z8A3QWTptU9pCvNFgc57ss11R4=;
        b=qAspJqprkMz5m0n5OK4Cb1VUTgKe8dk4Bgz5yG6//u8R9aMcC2qGaOd47CVXUJ21lC
         7pn3SGrAQDOqCAAr8K0one+3aXRFY+GPdkSPNjkDzevHwXjILaT/NDOfUpBAJoIKc/8h
         2TIFiyOBjAq+77boO9pDsiPGplEH7jRcqnILA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:sender:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references:x-google-sender-auth;
        b=PQX1fvDS2NudyKsdAPhDw8ZcpzfgNRCVCjCO7wh+s+51J/HOk8IgObRYTyXTdepbJx
         sbIv0A7FaIdbbLFWtZdoYqP2vEV7LyZfseYyxnz9pkP+eBapPjqt2cyDCGfaucrgXSEB
         pAG18BJCiCDjIe5mop7SONu54nfwbO0pLAElc=
Received: by 10.141.205.10 with SMTP id h10mr916820rvq.54.1216997187596;
        Fri, 25 Jul 2008 07:46:27 -0700 (PDT)
Received: by 10.140.192.19 with HTTP; Fri, 25 Jul 2008 07:46:27 -0700 (PDT)
Message-ID: <c68e39170807250746p3bfabcd8tb64ee3e3d2add411@mail.gmail.com>
Date: Fri, 25 Jul 2008 10:46:27 -0400
From: "Yonik Seeley" <yonik@apache.org>
Sender: yseeley@gmail.com
To: java-user@lucene.apache.org
Subject: Re: caching fields for query performance
In-Reply-To: <36B4EF9511887240A973A93E7878B0560A077E828B@US1-IIEX1.IICORP.DOM>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <36B4EF9511887240A973A93E7878B0560A077E828B@US1-IIEX1.IICORP.DOM>
X-Google-Sender-Auth: 39389e6a60530d4a
X-Virus-Checked: Checked by ClamAV on apache.org

Yes, pull out language:ENG language:FRA language:RUS into filters,
cache them, and re-use them across all queries.

In Lucene, see CachingWrapperFilter()
In Solr, use a separate fq (for filter query) parameter...
  q=+topic:m&a +topic:earn  +company:MSFT&fq=language:ENG

-Yonik

On Fri, Jul 25, 2008 at 7:36 AM, Robert Stewart
<Robert.Stewart@infongen.com> wrote:
> If I have a frequently queried field, which has a single value per document (such as language), how can I pre-cache all field values, such that the underlying query processing always uses memory cache (never disk i/o) for that particular field?  I don't know if it is possible without some custom query processing, which may be difficult in my case.
>
> We have incoming ad-hoc Boolean queries, for instance:
>
> +topic:m&a +topic:earn  +company:MSFT +language:(ENG FRA RUS)
>
>
> We have translated contents per-language, so frequently, the language clause may contain up to 30 language field values.  The performance differences between:
>
> +topic:m&a +topic:earn  +company:MSFT +language:(ENG FRA RUS)
>
> And
>
> +topic:m&a +topic:earn  +company:MSFT
>
> Is very significant (mostly since language is OR clause).
>
> So is there some way to optimize query processing on a per-field basis, such that language clauses are processed more efficiently?
>
> Thanks
> Bob
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35148-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 25 14:57:31 2008
Return-Path: <java-user-return-35148-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96645 invoked from network); 25 Jul 2008 14:57:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Jul 2008 14:57:31 -0000
Received: (qmail 20673 invoked by uid 500); 25 Jul 2008 14:57:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20465 invoked by uid 500); 25 Jul 2008 14:57:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 20453 invoked by uid 99); 25 Jul 2008 14:57:24 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Jul 2008 07:57:24 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of nageshblore@gmail.com designates 64.233.182.185 as permitted sender)
Received: from [64.233.182.185] (HELO nf-out-0910.google.com) (64.233.182.185)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Jul 2008 14:56:30 +0000
Received: by nf-out-0910.google.com with SMTP id g16so1117948nfd.15
        for <java-user@lucene.apache.org>; Fri, 25 Jul 2008 07:56:37 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references;
        bh=h/ybOmKR7H2clmSwKx/UHK0eC/VPqBFIUN0NfRAXA70=;
        b=d2k90sFuHQzTpuyGQx1qQ0usMsrMVJuZctblq81msP89f25wfPtLIxu6MiUSQD4vLR
         EQj31ZS1E6ZINyT/Kz+kAwIs1wsFiXJ2rCrPV3y890iKFx119YhBgTX6iEnAWNWmpx+X
         x/M1cyVqnlw2yl/+6EqFUSulmdpzJSfLQv8wg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references;
        b=WNB8YlfYYtWfiQ88tuQFgaTgRnasd+j7D2VHT3sFoluiaRlpCgqyMvxT0DwJFqVotM
         GImjSGZ8evgzMeWYzljroKprLhRIslGkIrR04T2nb//RY2bH/jSqt1nM+HOi9E50z9Ij
         PXlAhPPcE7h+RLl2MnMi9lplVzVRX3/WrK0hQ=
Received: by 10.210.111.4 with SMTP id j4mr2031769ebc.110.1216997797457;
        Fri, 25 Jul 2008 07:56:37 -0700 (PDT)
Received: by 10.210.52.2 with HTTP; Fri, 25 Jul 2008 07:56:37 -0700 (PDT)
Message-ID: <59a485a30807250756y5a39a44aha9f23434458f5fb7@mail.gmail.com>
Date: Fri, 25 Jul 2008 20:26:37 +0530
From: "=?UTF-8?B?4LKo4LK+4LKX4LOH4LK24LONIOCyuOCzgeCyrOCzjeCysOCyueCzjQ==?= =?UTF-8?B?4LKu4LKj4LON4LKvIChOYWdlc2ggUyk=?=" <nageshblore@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Deleted documents in the index.
In-Reply-To: <59a485a30807250709if876e28o7294d6f7542968d3@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: base64
Content-Disposition: inline
References: <59a485a30807250512w4fd7647h81185cd62fc070ce@mail.gmail.com>
	 <117F0D1C-0906-454A-9BE4-0D37E30C5E99@mikemccandless.com>
	 <59a485a30807250544s123e804dga0a44f8c73887056@mail.gmail.com>
	 <7CCF1183-4479-414E-AFFC-3C6786D3EC2D@mikemccandless.com>
	 <59a485a30807250709if876e28o7294d6f7542968d3@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

SGV5IE1pY2hhZWwsClRoZSBtYXhEb2MoKSBkaWQgdGhlIHRyaWNrICEgVGhhbmtzICEKCkkgaGF2
ZSBnb3Qgc29tZSByZWFkaW5nIHRvIGRvIGFib3V0IG51bURvY3MoKSBhbmQgbWF4RG9jKCkuLi4u
LgoKCk5hZ2VzaAoKT24gNy8yNS8wOCwg4LKo4LK+4LKX4LOH4LK24LONIOCyuOCzgeCyrOCzjeCy
sOCyueCzjeCyruCyo+CzjeCyryAoTmFnZXNoIFMpIDxuYWdlc2hibG9yZUBnbWFpbC5jb20+IHdy
b3RlOgo+IEhpIE1pY2hhZWwsCj4gVGhlIG51bURvY3MgZGlkIGNvbWUgZnJvbSBJbmRleFJlYWRl
ci5udW1Eb2NzKCkuCj4KPiBobW0uLi5sZXQgbWUgdHJ5IHdpdGggbWF4RG9jLgo+Cj4gTmFnZXNo
Cj4KPiBPbiA3LzI1LzA4LCBNaWNoYWVsIE1jQ2FuZGxlc3MgPGx1Y2VuZUBtaWtlbWNjYW5kbGVz
cy5jb20+IHdyb3RlOgo+Pgo+PiBPaCwgSSB0aGluayBJIHNlZSB0aGUgcHJvYmxlbSAtLSBpbnN0
ZWFkIG9mIG51bURvY3MgaW4geW91ciBmb3IgbG9vcAo+PiAod2hpY2ggSSBhc3N1bWUgY2FtZSBm
cm9tIEluZGV4UmVhZGVyLm51bURvY3MoKSkgY2hhbmdlIHRoYXQgdG8gbWF4RG9jCj4+IChJbmRl
eFJlYWRlci5tYXhEb2MoKSkuCj4+Cj4+IE1pa2UKPj4KPj4gKE5hZ2VzaCBTKSB3cm90ZToKPj4K
Pj4+IEhpIE1pY2hhZWwsCj4+PiBUaGFua3MgZm9yIHlvdXIgcmVzcG9uc2UuIFllcywgSSBnb3Qg
dGhhdC4KPj4+Cj4+PiBJIGd1ZXNzLCBteSBxdWVzdGlvbiBpcywgaG93IGRvIEkgYWNjZXNzIHRo
ZSBuZXdseSBhZGRlZCBkb2N1bWVudCA/IEluCj4+PiBvdGhlciB3b3JkcywgaWYgdGhlIGluZGV4
IGluaXRpYWxseSBoYWQgMjAgZG9jcyBvZiB3aGljaCAxMCB3ZXJlCj4+PiB1cGRhdGVkICh0aGF0
IGlzLCBkZWxldGVkIGFuZCB0aGVuIGFkZGVkKSwgaG93IGRvIEkgYWNjZXNzIHRoZSB1cGRhdGVk
Cj4+PiBvbmVzID8KPj4+Cj4+PiBJbml0aWFsbHksIHRoZXJlIHdhcyBubyBjaGVjayBmb3IgZGVs
ZXRlIC0gdGhhdCBpcywgSSBkaWQgbm90IGhhdmUKPj4+IEluZGV4UmVhZGVyLmlzRGVsZXRlZChp
bnQpLiBJdCBoYWQgdGhlIGZvciBsb29wIG9ubHkgd2hpY2ggd291bGQgZmFpbAo+Pj4gd2hlbiBv
YnRhaW5pbmcgYSAnZGVsZXRlZCcgZG9jdW1lbnQgd2l0aCB0aGUgZm9sbG93aW5nIDoKPj4+Cj4+
PiBqYXZhLmxhbmcuSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uOiBhdHRlbXB0IHRvIGFjY2VzcyBh
IGRlbGV0ZWQKPj4+IGRvY3VtZW50Cj4+PiBhdCBvcmcuYXBhY2hlLmx1Y2VuZS5pbmRleC5TZWdt
ZW50UmVhZGVyLmRvY3VtZW50KFNlZ21lbnRSZWFkZXIuamF2YToKPj4+IDMzMSkKPj4+IGF0IG9y
Zy5hcGFjaGUubHVjZW5lLmluZGV4Lk11bHRpUmVhZGVyLmRvY3VtZW50KE11bHRpUmVhZGVyLmph
dmE6MTA4KQo+Pj4gYXQgb3JnLmFwYWNoZS5sdWNlbmUuaW5kZXguSW5kZXhSZWFkZXIuZG9jdW1l
bnQoSW5kZXhSZWFkZXIuamF2YTo0MzcpCj4+PiBldGMuCj4+Pgo+Pj4gUmVnYXJkcywKPj4+IE5h
Z2VzaAo+Pj4KPj4+IE9uIDcvMjUvMDgsIE1pY2hhZWwgTWNDYW5kbGVzcyA8bHVjZW5lQG1pa2Vt
Y2NhbmRsZXNzLmNvbT4gd3JvdGU6Cj4+Pj4KPj4+PiBXaGVuIHlvdSBjYWxsIHVwZGF0ZURvY3Vt
ZW50LCB0aGUgb2xkICBkb2N1bWVudCBpcyBkZWxldGVkIGJ1dCBhCj4+Pj4gd2hvbGx5IG5ldyBk
b2N1bWVudCBpcyBhZGRlZC4gIFNvIHRoZSAiZWxzZSIgY2xhdXNlIGluIHlvdXIgbG9vcAo+Pj4+
IGJlbG93Cj4+Pj4gd2lsbCByZXBvcnQgb24gdGhlIG5ld2x5IGFkZGVkIGRvY3VtZW50cyAoeW91
IHdvbid0IG1pc3MgYW55KS4KPj4+Pgo+Pj4+IE1pa2UKPj4+Pgo+Pj4+IChOYWdlc2ggUykgd3Jv
dGU6Cj4+Pj4KPj4+Pj4gSGksCj4+Pj4+IEkgdGhpbmssIHRoZSBlYXJsaWVyIG1haWwgZGlkbid0
IG1ha2UgaXQgdGhyb3VnaC4KPj4+Pj4KPj4+Pj4gSSBhbSB3cml0aW5nIGEgY2xhc3MgdG8gcmVw
b3J0IG9uIGFuIGluZGV4LiBUaGlzIGluZGV4IGhhcyBkb2N1bWVudHMKPj4+Pj4gdXBkYXRlZCB1
c2luZyB0aGUgSW5kZXhXcml0ZXIudXBkYXRlRG9jdW1lbnQoVGVybSwgRG9jdW1lbnQpIG1ldGhv
ZC4KPj4+Pj4gVGhhdCBpcywgZG9jdW1lbnRzIHdlcmUgZGVsZXRlZCBhbmQgYWRkZWQgYWdhaW4u
IE15IGFpbSBpcyB0byBzZWUKPj4+Pj4gd2hhdAo+Pj4+PiBkb2N1bWVudHMgKGFuZCB0aGVpciBm
aWVsZHMpIGFyZSBwcmVzZW50IGluIHRoZSBpbmRleC4gU2luY2UgdGhlCj4+Pj4+IGRvY3VtZW50
IHdhcyB1cGRhdGVkIChpLmUuIGRlbGV0ZWQgYW5kIGFkZGVkKSwgaXQgaXMgbWFya2VkIGFzCj4+
Pj4+IGRlbGV0ZWQKPj4+Pj4gYW5kIGhlbmNlIG5vdCBhYmxlIHRvIG9idGFpbiBhIERvY3VtZW50
IG9iamVjdCBmb3IgdGhlIHVwZGF0ZWQKPj4+Pj4gZG9jdW1lbnQuCj4+Pj4+Cj4+Pj4+IEhvdyBk
byBJIHJlcG9ydCBvbiBzdWNoIGRvY3VtZW50cyA/Cj4+Pj4+Cj4+Pj4+IGZvciAoaW50IGkgPSAx
OyBpIDwgbnVtRG9jczsgaSsrKSB7Cj4+Pj4+IC8vaXIgaXMgYW4gSW5kZXhSZWFkZXIgb2JqZWN0
Cj4+Pj4+ICAgICAgICAgICBpZiAoaXIuaXNEZWxldGVkKGkpKSB7Cj4+Pj4+ICAgICAgICAgICAg
ICAgYncud3JpdGUoIkRvY3VtZW50ICIgKyBpICsgIiBoYXMgYmVlbiBkZWxldGVkLiIpOwo+Pj4+
PiAgICAgICAgICAgICAgIGJ3Lm5ld0xpbmUoKTsKPj4+Pj4gICAgICAgICAgIH0gZWxzZSB7Cj4+
Pj4+ICAgICAgICAgICAgICAgRG9jdW1lbnQgZCA9IGdldERvY3VtZW50KGlyLCBpKTsKPj4+Pj4K
Pj4+Pj4gICAgICAgICAgICAgICBMaXN0PEZpZWxkPiBsID0gZC5nZXRGaWVsZHMoKTsKPj4+Pj4g
ICAgICAgICAgICAgICBpbnQgbnVtRmllbGRzID0gbC5zaXplKCk7Cj4+Pj4+ICAgICAgICAgICAg
ICAgYncud3JpdGUoIkRvY3VtZW50IGhhcyAiICsgbnVtRmllbGRzICsgIiBmaWVsZHMgYXMKPj4+
Pj4gZm9sbG93cyIpOwo+Pj4+PiAgICAgICAgICAgICAgIGJ3Lm5ld0xpbmUoKTsKPj4+Pj4KPj4+
Pj4gICAgICAgICAgICAgICBmb3IgKGludCBqID0gMDsgaiA8IG51bUZpZWxkczsgaisrKSB7Cj4+
Pj4+ICAgICAgICAgICAgICAgICAgIFN0cmluZyBmaWVsZE5hbWUgPSBsLmdldChqKS5uYW1lKCk7
Cj4+Pj4+ICAgICAgICAgICAgICAgICAgIGJ3LndyaXRlKCJcdCBGaWVsZCA6ICIgKyBmaWVsZE5h
bWUgKyAiIFZhbHVlIDogIgo+Pj4+PiAgICAgICAgICAgICAgICAgICAgICAgICAgICsgZC5nZXRG
aWVsZChmaWVsZE5hbWUpLnN0cmluZ1ZhbHVlKCkpOwo+Pj4+PiAgICAgICAgICAgICAgICAgICBi
dy5uZXdMaW5lKCk7Cj4+Pj4+ICAgICAgICAgICAgICAgfQo+Pj4+PiAgICAgICAgICAgfQo+Pj4+
PiAgICAgICB9Cj4+Pj4+Cj4+Pj4+IC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQo+Pj4+PiBUbyB1bnN1YnNjcmliZSwg
ZS1tYWlsOiBqYXZhLXVzZXItdW5zdWJzY3JpYmVAbHVjZW5lLmFwYWNoZS5vcmcKPj4+Pj4gRm9y
IGFkZGl0aW9uYWwgY29tbWFuZHMsIGUtbWFpbDogamF2YS11c2VyLWhlbHBAbHVjZW5lLmFwYWNo
ZS5vcmcKPj4+Pj4KPj4+Pgo+Pj4+Cj4+Pj4gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCj4+Pj4gVG8gdW5zdWJzY3Jp
YmUsIGUtbWFpbDogamF2YS11c2VyLXVuc3Vic2NyaWJlQGx1Y2VuZS5hcGFjaGUub3JnCj4+Pj4g
Rm9yIGFkZGl0aW9uYWwgY29tbWFuZHMsIGUtbWFpbDogamF2YS11c2VyLWhlbHBAbHVjZW5lLmFw
YWNoZS5vcmcKPj4+Pgo+Pj4+Cj4+Pgo+Pj4gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCj4+PiBUbyB1bnN1YnNjcmli
ZSwgZS1tYWlsOiBqYXZhLXVzZXItdW5zdWJzY3JpYmVAbHVjZW5lLmFwYWNoZS5vcmcKPj4+IEZv
ciBhZGRpdGlvbmFsIGNvbW1hbmRzLCBlLW1haWw6IGphdmEtdXNlci1oZWxwQGx1Y2VuZS5hcGFj
aGUub3JnCj4+Pgo+Pgo+Pgo+PiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KPj4gVG8gdW5zdWJzY3JpYmUsIGUtbWFp
bDogamF2YS11c2VyLXVuc3Vic2NyaWJlQGx1Y2VuZS5hcGFjaGUub3JnCj4+IEZvciBhZGRpdGlv
bmFsIGNvbW1hbmRzLCBlLW1haWw6IGphdmEtdXNlci1oZWxwQGx1Y2VuZS5hcGFjaGUub3JnCj4+
Cj4+Cj4K


From java-user-return-35149-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 25 21:00:32 2008
Return-Path: <java-user-return-35149-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 66064 invoked from network); 25 Jul 2008 21:00:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Jul 2008 21:00:32 -0000
Received: (qmail 34517 invoked by uid 500); 25 Jul 2008 21:00:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34492 invoked by uid 500); 25 Jul 2008 21:00:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34481 invoked by uid 99); 25 Jul 2008 21:00:24 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Jul 2008 14:00:24 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.132.249] (HELO an-out-0708.google.com) (209.85.132.249)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Jul 2008 20:59:29 +0000
Received: by an-out-0708.google.com with SMTP id c37so3827893anc.49
        for <java-user@lucene.apache.org>; Fri, 25 Jul 2008 13:59:53 -0700 (PDT)
Received: by 10.100.94.14 with SMTP id r14mr625123anb.45.1217019593134;
        Fri, 25 Jul 2008 13:59:53 -0700 (PDT)
Received: from ?10.17.4.4? ( [72.93.214.93])
        by mx.google.com with ESMTPS id 61sm7698441wry.13.2008.07.25.13.59.52
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Fri, 25 Jul 2008 13:59:52 -0700 (PDT)
From: Michael McCandless <lucene@mikemccandless.com>
To: general@lucene.apache.org
In-Reply-To: <002401c8ed79$26610f60$0308a8c0@WangJianxin>
Subject: Re: How to use lucene for high search performance ?
X-Priority: 3
References: <001701c8ed74$1c781480$0308a8c0@WangJianxin> <A3A4163E-E09E-4A05-BFC8-70A81EBCA2F3@mikemccandless.com> <002401c8ed79$26610f60$0308a8c0@WangJianxin>
Message-Id: <4AA55872-F1ED-41C9-920E-616CF2C02847@mikemccandless.com>
Content-Type: text/plain; charset=GB2312; format=flowed; delsp=yes
Content-Transfer-Encoding: quoted-printable
Mime-Version: 1.0 (Apple Message framework v926)
Date: Fri, 25 Jul 2008 16:59:50 -0400
Cc: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org


Let's move this thread to java-user (CC'd).

=CD=F5=BD=A8=D0=C2 wrote:

> Thank you.
>
> If the index files are very big(10G), I cannot load them to ram in =20
> one process.

Ahh OK.

> Shoud I use MutilSearcher to load index files with serval processes?
> How about its performance?

MultiSearcher alone doesn't really scale up -- it just lets you =20
combine the results of many Searchables.

Maybe you mean ParallelMlultiSearcher?  That class uses a separate =20
thread to search each Searchable, so if you are on a multi core/cpu =20
machine that should give a net reduction in latency of each search =20
(though I don't have any experience here!).

> by the way, I think only .frq and .tis files need to load in ram.
> And it can save some ram.

You mean you don't use any positions information?  Really the OS =20
should do the right thing for you -- it should only cache into its IO =20=

cache those files that you actually use after which searches should be =20=

fast.

Mike

>
> roy
>
> ----- Original Message -----
> From: "Michael McCandless" <lucene@mikemccandless.com>
> To: <general@lucene.apache.org>
> Sent: Thursday, July 24, 2008 6:09 PM
> Subject: Re: How to use lucene for high search performance ?
>
>
>
> Try InstantiatedIndexWriter/Reader (under contrib/instantiated)?
>
> It consumes more RAM than the RAMDirectory approach, but is faster
> performance.
>
> Mike
>
> PS -- this sort of question should go to java-user in the future.
>
> =CD=F5=BD=A8=D0=C2 wrote:
>
>>
>> Hi,
>>   If I use lucene to execute many search requests at one time, the
>> io operation will be the bottleneck of the performance.
>>   So I use RAMDirectory to avoid io operation.
>>   But I found RAMDirectory cannot raise the performance much if the
>> index is big( about 1.2G).
>>   Could anyone give me any advice to raise the performance for
>> concurrent search operation?
>>   Thanks.
>>
>> roy


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35150-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jul 26 04:18:31 2008
Return-Path: <java-user-return-35150-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40796 invoked from network); 26 Jul 2008 04:18:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Jul 2008 04:18:31 -0000
Received: (qmail 49761 invoked by uid 500); 26 Jul 2008 04:18:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49726 invoked by uid 500); 26 Jul 2008 04:18:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49715 invoked by uid 99); 26 Jul 2008 04:18:24 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 25 Jul 2008 21:18:24 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 26 Jul 2008 04:17:29 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KMbE9-0006Oi-Ui
	for java-user@lucene.apache.org; Fri, 25 Jul 2008 21:17:53 -0700
Message-ID: <18662995.post@talk.nabble.com>
Date: Fri, 25 Jul 2008 21:17:53 -0700 (PDT)
From: java_is_everything <ajaygargnsit@gmail.com>
To: java-user@lucene.apache.org
Subject: Query in IndexWriter.deleteDocuments(Term term)
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: ajaygargnsit@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hi all.

This may seem a longish and informal mail, but do correct me if my
assumptions are wrong anywhere, otherwise my actual doubt will make no
sense.

Say I opened an IndexWriter on an initially empty directory, using
autocommit = true. Now, what I do is add and delete documents randomly. I
set "x" as maxBufferedDocs and "y" as maxBufferedDeleteTerms (x < y).

IndexWritrer starts its work. Now, I perfom the following sequences :

STAGE 1 :
Add "x-2" documents one after the another.                Total docs in
memory = x-2                (1)
Delete 3 docs from memory                                       Total docs
in memory = x-5               (2)
Add 5 docs one after another                                    Total docs
in memory = x                   (3)

STAGE 2 :
A flush happens, sice maxBufferedDocs reached.           Total docs in
memory = 0                  (4)
Thus, it is also a commit.

STAGE 3 :
Add x-10 docs one after other                                   Total docs
in memory = x-10              (5)


NOW ... I call deleteDocuments(Term term), which has potential matches at
two places :
a) x-15 (out of x-10) documents currently residing in memory.
b) x-20 (out of x) documents currently in the index directory.                                            
(6)

IndexWriter.close() is called                                                                                          
(7)


Now, my question is, will the index contain
(i) a total of (x) + (x-10) - (x-15) documents
(ii) a total of (x) + (x-10) - (x-20) documents
(iii) a total of (x) + (x-10) - (x-15) - (x-20) documents


Secondly, will the answer change had I opened the IndexWriter in autocommit
= false mode?

Several other permutations of (autocommit mode), (points of flush call),
(points of close call) exist, but I guess I will be fine if I get the answer
to the first question itself. A little explanation will be highly obliged.

Looking forward to responses.

Ajay Garg
-- 
View this message in context: http://www.nabble.com/Query-in-IndexWriter.deleteDocuments%28Term-term%29-tp18662995p18662995.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35151-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jul 26 09:42:24 2008
Return-Path: <java-user-return-35151-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94423 invoked from network); 26 Jul 2008 09:42:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Jul 2008 09:42:23 -0000
Received: (qmail 60073 invoked by uid 500); 26 Jul 2008 09:42:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60039 invoked by uid 500); 26 Jul 2008 09:42:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60028 invoked by uid 99); 26 Jul 2008 09:42:17 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 26 Jul 2008 02:42:17 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.132.245] (HELO an-out-0708.google.com) (209.85.132.245)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 26 Jul 2008 09:41:21 +0000
Received: by an-out-0708.google.com with SMTP id c37so4059708anc.49
        for <java-user@lucene.apache.org>; Sat, 26 Jul 2008 02:41:28 -0700 (PDT)
Received: by 10.100.210.9 with SMTP id i9mr4646358ang.9.1217065288239;
        Sat, 26 Jul 2008 02:41:28 -0700 (PDT)
Received: from ?10.17.4.4? ( [72.93.214.93])
        by mx.google.com with ESMTPS id 9sm4973752yws.5.2008.07.26.02.41.27
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Sat, 26 Jul 2008 02:41:27 -0700 (PDT)
Message-Id: <FD8B25C8-BFEF-4C58-B7DD-4D705063B322@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <18662995.post@talk.nabble.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: Query in IndexWriter.deleteDocuments(Term term)
Date: Sat, 26 Jul 2008 05:41:26 -0400
References: <18662995.post@talk.nabble.com>
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org


java_is_everything wrote:

>
> Hi all.
>
> This may seem a longish and informal mail, but do correct me if my
> assumptions are wrong anywhere, otherwise my actual doubt will make no
> sense.
>
> Say I opened an IndexWriter on an initially empty directory, using
> autocommit = true. Now, what I do is add and delete documents  
> randomly. I
> set "x" as maxBufferedDocs and "y" as maxBufferedDeleteTerms (x < y).
>
> IndexWritrer starts its work. Now, I perfom the following sequences :
>
> STAGE 1 :
> Add "x-2" documents one after the another.                Total docs  
> in
> memory = x-2                (1)
> Delete 3 docs from memory                                        
> Total docs
> in memory = x-5               (2)
> Add 5 docs one after another                                     
> Total docs
> in memory = x                   (3)
>
> STAGE 2 :
> A flush happens, sice maxBufferedDocs reached.           Total docs in
> memory = 0                  (4)

One correction here: the added doc count that triggers a flush does  
*not* measure deletions.  So, in your step (3) above, after having  
added 2 of the 5 docs, IW will flush.  Then it has 3 added docs  
buffered in RAM.

> Thus, it is also a commit.

Assuming you're talking about trunk at this point (not 2.3), because  
only trunk distinguishes commit() vs flush(): there's no guarantee  
exactly when IW does a commit() when autoCommit is true.  Also,  
autoCommit is deprecated, meaning in 3.0 it will be hardwired to  
false, so your application must commit() or close() when it's necessary.

> STAGE 3 :
> Add x-10 docs one after other                                    
> Total docs
> in memory = x-10              (5)

Actually x-7 in memory now.

> NOW ... I call deleteDocuments(Term term), which has potential  
> matches at
> two places :
> a) x-15 (out of x-10) documents currently residing in memory.
> b) x-20 (out of x) documents currently in the index directory.
> (6)
>
> IndexWriter.close() is called
> (7)
>
>
> Now, my question is, will the index contain
> (i) a total of (x) + (x-10) - (x-15) documents
> (ii) a total of (x) + (x-10) - (x-20) documents
> (iii) a total of (x) + (x-10) - (x-15) - (x-20) documents

Index will contain (iii), corrected to (x) + (x-7) - (x-15) - (x-20).   
Ie the deletion always applies to any documents, flushed or buffered  
in RAM.  The deletion is fully independent of what buffering IW is  
doing.

> Secondly, will the answer change had I opened the IndexWriter in  
> autocommit
> = false mode?

No, you get the same result.  autoCommit simply affects *when* the  
changes become visible/durable to an external reader, not what changes  
occur.  Any series of changes using an IW will produce the same final  
result regardless of autoCommit, assuming we're not talking about JRE/ 
machine's crashing, etc.

> Several other permutations of (autocommit mode), (points of flush  
> call),
> (points of close call) exist, but I guess I will be fine if I get  
> the answer
> to the first question itself. A little explanation will be highly  
> obliged.

autoCommit, points of flushing, points of committing, points of  
merging, etc, should be fully independent of what changes (add/ 
deletes) you are doing.

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35152-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jul 26 10:40:38 2008
Return-Path: <java-user-return-35152-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 18131 invoked from network); 26 Jul 2008 10:40:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Jul 2008 10:40:38 -0000
Received: (qmail 83638 invoked by uid 500); 26 Jul 2008 10:40:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83610 invoked by uid 500); 26 Jul 2008 10:40:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83599 invoked by uid 99); 26 Jul 2008 10:40:31 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 26 Jul 2008 03:40:31 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 26 Jul 2008 10:39:36 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KMhBx-0000XP-6n
	for java-user@lucene.apache.org; Sat, 26 Jul 2008 03:40:01 -0700
Message-ID: <18665652.post@talk.nabble.com>
Date: Sat, 26 Jul 2008 03:40:01 -0700 (PDT)
From: Ajay Garg <ajaygargnsit@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Query in IndexWriter.deleteDocuments(Term term)
In-Reply-To: <FD8B25C8-BFEF-4C58-B7DD-4D705063B322@mikemccandless.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: ajaygargnsit@gmail.com
References: <18662995.post@talk.nabble.com> <FD8B25C8-BFEF-4C58-B7DD-4D705063B322@mikemccandless.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Thanks Mike. That was quite explanatory. A couple of doubts :

1. The deletions apply to buffered as well as stored-in-RAM documents.
Right. So, if the index directory contains 1 document that matches a
deleteDocument query, and 1 document in RAM that contains the same
deleteDocument query, then, will the document-in-index-directory be deleted
immediately, or when a flush is called. (It seems logical, that irrespective
of the location of document, "actual" deletion occurs only when a flush is
called .. just need to be doubly sure ...)

2. Yes I am planning to rewrite a project using Lucene 2.3.2. So, is the
next version heading straight to 3.0 ??? (Sorry, if this question seems to
be a little out of context of the current thread)

Looking forward to a reply.

Thanks
Ajay Garg

Michael McCandless-2 wrote:
> 
> 
> java_is_everything wrote:
> 
>>
>> Hi all.
>>
>> This may seem a longish and informal mail, but do correct me if my
>> assumptions are wrong anywhere, otherwise my actual doubt will make no
>> sense.
>>
>> Say I opened an IndexWriter on an initially empty directory, using
>> autocommit = true. Now, what I do is add and delete documents  
>> randomly. I
>> set "x" as maxBufferedDocs and "y" as maxBufferedDeleteTerms (x < y).
>>
>> IndexWritrer starts its work. Now, I perfom the following sequences :
>>
>> STAGE 1 :
>> Add "x-2" documents one after the another.                Total docs  
>> in
>> memory = x-2                (1)
>> Delete 3 docs from memory                                        
>> Total docs
>> in memory = x-5               (2)
>> Add 5 docs one after another                                     
>> Total docs
>> in memory = x                   (3)
>>
>> STAGE 2 :
>> A flush happens, sice maxBufferedDocs reached.           Total docs in
>> memory = 0                  (4)
> 
> One correction here: the added doc count that triggers a flush does  
> *not* measure deletions.  So, in your step (3) above, after having  
> added 2 of the 5 docs, IW will flush.  Then it has 3 added docs  
> buffered in RAM.
> 
>> Thus, it is also a commit.
> 
> Assuming you're talking about trunk at this point (not 2.3), because  
> only trunk distinguishes commit() vs flush(): there's no guarantee  
> exactly when IW does a commit() when autoCommit is true.  Also,  
> autoCommit is deprecated, meaning in 3.0 it will be hardwired to  
> false, so your application must commit() or close() when it's necessary.
> 
>> STAGE 3 :
>> Add x-10 docs one after other                                    
>> Total docs
>> in memory = x-10              (5)
> 
> Actually x-7 in memory now.
> 
>> NOW ... I call deleteDocuments(Term term), which has potential  
>> matches at
>> two places :
>> a) x-15 (out of x-10) documents currently residing in memory.
>> b) x-20 (out of x) documents currently in the index directory.
>> (6)
>>
>> IndexWriter.close() is called
>> (7)
>>
>>
>> Now, my question is, will the index contain
>> (i) a total of (x) + (x-10) - (x-15) documents
>> (ii) a total of (x) + (x-10) - (x-20) documents
>> (iii) a total of (x) + (x-10) - (x-15) - (x-20) documents
> 
> Index will contain (iii), corrected to (x) + (x-7) - (x-15) - (x-20).   
> Ie the deletion always applies to any documents, flushed or buffered  
> in RAM.  The deletion is fully independent of what buffering IW is  
> doing.
> 
>> Secondly, will the answer change had I opened the IndexWriter in  
>> autocommit
>> = false mode?
> 
> No, you get the same result.  autoCommit simply affects *when* the  
> changes become visible/durable to an external reader, not what changes  
> occur.  Any series of changes using an IW will produce the same final  
> result regardless of autoCommit, assuming we're not talking about JRE/ 
> machine's crashing, etc.
> 
>> Several other permutations of (autocommit mode), (points of flush  
>> call),
>> (points of close call) exist, but I guess I will be fine if I get  
>> the answer
>> to the first question itself. A little explanation will be highly  
>> obliged.
> 
> autoCommit, points of flushing, points of committing, points of  
> merging, etc, should be fully independent of what changes (add/ 
> deletes) you are doing.
> 
> Mike
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/Query-in-IndexWriter.deleteDocuments%28Term-term%29-tp18662995p18665652.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35153-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jul 26 12:12:48 2008
Return-Path: <java-user-return-35153-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 52438 invoked from network); 26 Jul 2008 12:12:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Jul 2008 12:12:48 -0000
Received: (qmail 26917 invoked by uid 500); 26 Jul 2008 12:12:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26887 invoked by uid 500); 26 Jul 2008 12:12:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26875 invoked by uid 99); 26 Jul 2008 12:12:40 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 26 Jul 2008 05:12:40 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.132.245] (HELO an-out-0708.google.com) (209.85.132.245)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 26 Jul 2008 12:11:45 +0000
Received: by an-out-0708.google.com with SMTP id c37so4139982anc.49
        for <java-user@lucene.apache.org>; Sat, 26 Jul 2008 05:12:10 -0700 (PDT)
Received: by 10.101.1.12 with SMTP id d12mr4824463ani.31.1217074330147;
        Sat, 26 Jul 2008 05:12:10 -0700 (PDT)
Received: from ?10.17.4.4? ( [72.93.214.93])
        by mx.google.com with ESMTPS id b14sm15269275ana.23.2008.07.26.05.12.09
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Sat, 26 Jul 2008 05:12:09 -0700 (PDT)
Message-Id: <C172F4F4-CFDF-4585-9BAF-6AA627B9DD3A@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <18665652.post@talk.nabble.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: Query in IndexWriter.deleteDocuments(Term term)
Date: Sat, 26 Jul 2008 08:12:08 -0400
References: <18662995.post@talk.nabble.com> <FD8B25C8-BFEF-4C58-B7DD-4D705063B322@mikemccandless.com> <18665652.post@talk.nabble.com>
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org


Ajay Garg wrote:

> Thanks Mike. That was quite explanatory. A couple of doubts:

You're welcome!

> 1. The deletions apply to buffered as well as stored-in-RAM documents.
> Right. So, if the index directory contains 1 document that matches a
> deleteDocument query, and 1 document in RAM that contains the same
> deleteDocument query, then, will the document-in-index-directory be  
> deleted
> immediately, or when a flush is called. (It seems logical, that  
> irrespective
> of the location of document, "actual" deletion occurs only when a  
> flush is
> called .. just need to be doubly sure ...)

Well ... the "actual" deletion (visible to an IndexReader that opens  
the index) is only guaranteed to be performed if you call commit()  
(trunk) or close() (2.3, trunk) on the IW.

First, deleted docIDs, terms and queries are simply buffered in RAM.   
Then at some point (no guarantee on when) they are flushed into per- 
segment .del files in the directory, but, these del files are  
"unreferenced" (by a segments_N file) until commit() or close() is  
called.

> 2. Yes I am planning to rewrite a project using Lucene 2.3.2. So, is  
> the
> next version heading straight to 3.0 ??? (Sorry, if this question  
> seems to
> be a little out of context of the current thread)

The current plan is to have a 2.4 release next, then a 2.9 release and  
finally 3.0.  It's spelled out a bit here:

     http://wiki.apache.org/lucene-java/Java_1.5_Migration

But there are no dates attached to those bullets!

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35154-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jul 26 13:28:03 2008
Return-Path: <java-user-return-35154-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 87967 invoked from network); 26 Jul 2008 13:28:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Jul 2008 13:28:03 -0000
Received: (qmail 62962 invoked by uid 500); 26 Jul 2008 13:27:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62934 invoked by uid 500); 26 Jul 2008 13:27:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62923 invoked by uid 99); 26 Jul 2008 13:27:56 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 26 Jul 2008 06:27:56 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 26 Jul 2008 13:27:00 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KMjnx-0005Ux-S7
	for java-user@lucene.apache.org; Sat, 26 Jul 2008 06:27:25 -0700
Message-ID: <18666813.post@talk.nabble.com>
Date: Sat, 26 Jul 2008 06:27:25 -0700 (PDT)
From: Ajay Garg <ajaygargnsit@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Query in IndexWriter.deleteDocuments(Term term)
In-Reply-To: <C172F4F4-CFDF-4585-9BAF-6AA627B9DD3A@mikemccandless.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: ajaygargnsit@gmail.com
References: <18662995.post@talk.nabble.com> <FD8B25C8-BFEF-4C58-B7DD-4D705063B322@mikemccandless.com> <18665652.post@talk.nabble.com> <C172F4F4-CFDF-4585-9BAF-6AA627B9DD3A@mikemccandless.com>
X-Virus-Checked: Checked by ClamAV on apache.org


So commit() will be available from 2.4 onwards??

Michael McCandless-2 wrote:
> 
> 
> Ajay Garg wrote:
> 
>> Thanks Mike. That was quite explanatory. A couple of doubts:
> 
> You're welcome!
> 
>> 1. The deletions apply to buffered as well as stored-in-RAM documents.
>> Right. So, if the index directory contains 1 document that matches a
>> deleteDocument query, and 1 document in RAM that contains the same
>> deleteDocument query, then, will the document-in-index-directory be  
>> deleted
>> immediately, or when a flush is called. (It seems logical, that  
>> irrespective
>> of the location of document, "actual" deletion occurs only when a  
>> flush is
>> called .. just need to be doubly sure ...)
> 
> Well ... the "actual" deletion (visible to an IndexReader that opens  
> the index) is only guaranteed to be performed if you call commit()  
> (trunk) or close() (2.3, trunk) on the IW.
> 
> First, deleted docIDs, terms and queries are simply buffered in RAM.   
> Then at some point (no guarantee on when) they are flushed into per- 
> segment .del files in the directory, but, these del files are  
> "unreferenced" (by a segments_N file) until commit() or close() is  
> called.
> 
>> 2. Yes I am planning to rewrite a project using Lucene 2.3.2. So, is  
>> the
>> next version heading straight to 3.0 ??? (Sorry, if this question  
>> seems to
>> be a little out of context of the current thread)
> 
> The current plan is to have a 2.4 release next, then a 2.9 release and  
> finally 3.0.  It's spelled out a bit here:
> 
>      http://wiki.apache.org/lucene-java/Java_1.5_Migration
> 
> But there are no dates attached to those bullets!
> 
> Mike
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/Query-in-IndexWriter.deleteDocuments%28Term-term%29-tp18662995p18666813.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35155-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jul 26 13:32:26 2008
Return-Path: <java-user-return-35155-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90229 invoked from network); 26 Jul 2008 13:32:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Jul 2008 13:32:26 -0000
Received: (qmail 65936 invoked by uid 500); 26 Jul 2008 13:32:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65903 invoked by uid 500); 26 Jul 2008 13:32:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65892 invoked by uid 99); 26 Jul 2008 13:32:20 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 26 Jul 2008 06:32:20 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 26 Jul 2008 13:31:25 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KMjsD-0005d4-Uj
	for java-user@lucene.apache.org; Sat, 26 Jul 2008 06:31:49 -0700
Message-ID: <18666853.post@talk.nabble.com>
Date: Sat, 26 Jul 2008 06:31:49 -0700 (PDT)
From: Ajay Garg <ajaygargnsit@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Query in IndexWriter.deleteDocuments(Term term)
In-Reply-To: <18666813.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: ajaygargnsit@gmail.com
References: <18662995.post@talk.nabble.com> <FD8B25C8-BFEF-4C58-B7DD-4D705063B322@mikemccandless.com> <18665652.post@talk.nabble.com> <C172F4F4-CFDF-4585-9BAF-6AA627B9DD3A@mikemccandless.com> <18666813.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Pardon me. But will commit() be "code-fully" equal to calling close()
followed by reinstantiating IW with create=false ??? If the above is indeed
true, I can very well begin with my work.

I ask this, because I plan to work within a fortnight, and 2.4 is still
someway away, and the primary reason I am porting to 2.3.2 (from 2.0.0), is
to have explicit commit() control in our hands. 


Ajay Garg wrote:
> 
> So commit() will be available from 2.4 onwards??
> 
> Michael McCandless-2 wrote:
>> 
>> 
>> Ajay Garg wrote:
>> 
>>> Thanks Mike. That was quite explanatory. A couple of doubts:
>> 
>> You're welcome!
>> 
>>> 1. The deletions apply to buffered as well as stored-in-RAM documents.
>>> Right. So, if the index directory contains 1 document that matches a
>>> deleteDocument query, and 1 document in RAM that contains the same
>>> deleteDocument query, then, will the document-in-index-directory be  
>>> deleted
>>> immediately, or when a flush is called. (It seems logical, that  
>>> irrespective
>>> of the location of document, "actual" deletion occurs only when a  
>>> flush is
>>> called .. just need to be doubly sure ...)
>> 
>> Well ... the "actual" deletion (visible to an IndexReader that opens  
>> the index) is only guaranteed to be performed if you call commit()  
>> (trunk) or close() (2.3, trunk) on the IW.
>> 
>> First, deleted docIDs, terms and queries are simply buffered in RAM.   
>> Then at some point (no guarantee on when) they are flushed into per- 
>> segment .del files in the directory, but, these del files are  
>> "unreferenced" (by a segments_N file) until commit() or close() is  
>> called.
>> 
>>> 2. Yes I am planning to rewrite a project using Lucene 2.3.2. So, is  
>>> the
>>> next version heading straight to 3.0 ??? (Sorry, if this question  
>>> seems to
>>> be a little out of context of the current thread)
>> 
>> The current plan is to have a 2.4 release next, then a 2.9 release and  
>> finally 3.0.  It's spelled out a bit here:
>> 
>>      http://wiki.apache.org/lucene-java/Java_1.5_Migration
>> 
>> But there are no dates attached to those bullets!
>> 
>> Mike
>> 
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>> 
>> 
>> 
> 
> 

-- 
View this message in context: http://www.nabble.com/Query-in-IndexWriter.deleteDocuments%28Term-term%29-tp18662995p18666853.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35156-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jul 26 17:06:52 2008
Return-Path: <java-user-return-35156-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31210 invoked from network); 26 Jul 2008 17:06:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Jul 2008 17:06:52 -0000
Received: (qmail 68417 invoked by uid 500); 26 Jul 2008 17:06:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68385 invoked by uid 500); 26 Jul 2008 17:06:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68374 invoked by uid 99); 26 Jul 2008 17:06:44 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 26 Jul 2008 10:06:44 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=SPF_NEUTRAL,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [64.233.184.225] (HELO wr-out-0506.google.com) (64.233.184.225)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 26 Jul 2008 17:05:47 +0000
Received: by wr-out-0506.google.com with SMTP id c30so3672119wra.21
        for <java-user@lucene.apache.org>; Sat, 26 Jul 2008 10:06:12 -0700 (PDT)
Received: by 10.90.116.4 with SMTP id o4mr4247975agc.73.1217091972119;
        Sat, 26 Jul 2008 10:06:12 -0700 (PDT)
Received: from ?10.17.4.4? ( [72.93.214.93])
        by mx.google.com with ESMTPS id 7sm13402493wrh.40.2008.07.26.10.06.11
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Sat, 26 Jul 2008 10:06:11 -0700 (PDT)
Message-Id: <BFBF8AFB-66B5-4760-BC6B-43DCD160547C@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <18666813.post@talk.nabble.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: Query in IndexWriter.deleteDocuments(Term term)
Date: Sat, 26 Jul 2008 13:06:10 -0400
References: <18662995.post@talk.nabble.com> <FD8B25C8-BFEF-4C58-B7DD-4D705063B322@mikemccandless.com> <18665652.post@talk.nabble.com> <C172F4F4-CFDF-4585-9BAF-6AA627B9DD3A@mikemccandless.com> <18666813.post@talk.nabble.com>
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org


Yes.

Mike

Ajay Garg wrote:

>
> So commit() will be available from 2.4 onwards??
>
> Michael McCandless-2 wrote:
>>
>>
>> Ajay Garg wrote:
>>
>>> Thanks Mike. That was quite explanatory. A couple of doubts:
>>
>> You're welcome!
>>
>>> 1. The deletions apply to buffered as well as stored-in-RAM  
>>> documents.
>>> Right. So, if the index directory contains 1 document that matches a
>>> deleteDocument query, and 1 document in RAM that contains the same
>>> deleteDocument query, then, will the document-in-index-directory be
>>> deleted
>>> immediately, or when a flush is called. (It seems logical, that
>>> irrespective
>>> of the location of document, "actual" deletion occurs only when a
>>> flush is
>>> called .. just need to be doubly sure ...)
>>
>> Well ... the "actual" deletion (visible to an IndexReader that opens
>> the index) is only guaranteed to be performed if you call commit()
>> (trunk) or close() (2.3, trunk) on the IW.
>>
>> First, deleted docIDs, terms and queries are simply buffered in RAM.
>> Then at some point (no guarantee on when) they are flushed into per-
>> segment .del files in the directory, but, these del files are
>> "unreferenced" (by a segments_N file) until commit() or close() is
>> called.
>>
>>> 2. Yes I am planning to rewrite a project using Lucene 2.3.2. So, is
>>> the
>>> next version heading straight to 3.0 ??? (Sorry, if this question
>>> seems to
>>> be a little out of context of the current thread)
>>
>> The current plan is to have a 2.4 release next, then a 2.9 release  
>> and
>> finally 3.0.  It's spelled out a bit here:
>>
>>     http://wiki.apache.org/lucene-java/Java_1.5_Migration
>>
>> But there are no dates attached to those bullets!
>>
>> Mike
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>
> -- 
> View this message in context: http://www.nabble.com/Query-in-IndexWriter.deleteDocuments%28Term-term%29-tp18662995p18666813.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35157-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jul 26 17:08:21 2008
Return-Path: <java-user-return-35157-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32892 invoked from network); 26 Jul 2008 17:08:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Jul 2008 17:08:21 -0000
Received: (qmail 71088 invoked by uid 500); 26 Jul 2008 17:08:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71051 invoked by uid 500); 26 Jul 2008 17:08:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71035 invoked by uid 99); 26 Jul 2008 17:08:15 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 26 Jul 2008 10:08:15 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.132.242] (HELO an-out-0708.google.com) (209.85.132.242)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 26 Jul 2008 17:07:20 +0000
Received: by an-out-0708.google.com with SMTP id c37so4309829anc.49
        for <java-user@lucene.apache.org>; Sat, 26 Jul 2008 10:07:28 -0700 (PDT)
Received: by 10.101.71.9 with SMTP id y9mr5223383ank.145.1217092048039;
        Sat, 26 Jul 2008 10:07:28 -0700 (PDT)
Received: from ?10.17.4.4? ( [72.93.214.93])
        by mx.google.com with ESMTPS id 9sm13281205wrl.31.2008.07.26.10.07.26
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Sat, 26 Jul 2008 10:07:26 -0700 (PDT)
Message-Id: <C6E080CD-6D4A-4352-8B87-6EC2B2247B1A@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <18666853.post@talk.nabble.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: Query in IndexWriter.deleteDocuments(Term term)
Date: Sat, 26 Jul 2008 13:07:25 -0400
References: <18662995.post@talk.nabble.com> <FD8B25C8-BFEF-4C58-B7DD-4D705063B322@mikemccandless.com> <18665652.post@talk.nabble.com> <C172F4F4-CFDF-4585-9BAF-6AA627B9DD3A@mikemccandless.com> <18666813.post@talk.nabble.com> <18666853.post@talk.nabble.com>
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org


Ajay Garg wrote:

> Pardon me. But will commit() be "code-fully" equal to calling close()
> followed by reinstantiating IW with create=false ??? If the above is  
> indeed
> true, I can very well begin with my work.

Yes, commit() can be seen as achieving exactly the same as close() and  
opening a new IndexWriter.

> I ask this, because I plan to work within a fortnight, and 2.4 is  
> still
> someway away, and the primary reason I am porting to 2.3.2 (from  
> 2.0.0), is
> to have explicit commit() control in our hands.

OK but 2.3.2 doesn't have commit yet.

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35158-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jul 26 18:18:25 2008
Return-Path: <java-user-return-35158-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67795 invoked from network); 26 Jul 2008 18:18:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Jul 2008 18:18:24 -0000
Received: (qmail 7032 invoked by uid 500); 26 Jul 2008 18:18:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6996 invoked by uid 500); 26 Jul 2008 18:18:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6985 invoked by uid 99); 26 Jul 2008 18:18:18 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 26 Jul 2008 11:18:18 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of cambazz@gmail.com designates 209.85.146.181 as permitted sender)
Received: from [209.85.146.181] (HELO wa-out-1112.google.com) (209.85.146.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 26 Jul 2008 18:17:24 +0000
Received: by wa-out-1112.google.com with SMTP id l24so2736272waf.11
        for <java-user@lucene.apache.org>; Sat, 26 Jul 2008 11:17:33 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=yZsSYiJSDkEKC7HdapIgwwUsV2FVVmbz3rz8pSQFuZU=;
        b=bOiSowOI65XD5jrXU4KJepvh9noExGSPMBrnKQJpEyF1uLlTua1WTMQpEy8HFoAXhn
         rx2dlJ6z46nw4308mEgosPYdQc8FGPFNytznIpbK/EogcWF2UmYnZN+NcOd3ENzX44pE
         J56LT6YtFkGcldEyM5kKLmsZuXD7DTLFt123M=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=YXbTig+Q37BiQWf22ism4J/8NwYvhLTBhZR3NoBU5PP/Se76d/RaY7egEMOvAhgQKn
         LDsRxs3UnG5adtZEoY6EXSPWAtP/GqnXD7eSqLh+F67cD8dgpYRZXBVgYU0A0OkCW2PQ
         7tPTbVZ6aibuMwW9Lydu7R2zdz5IyU0ml5DFE=
Received: by 10.114.192.3 with SMTP id p3mr3353105waf.112.1217096253485;
        Sat, 26 Jul 2008 11:17:33 -0700 (PDT)
Received: by 10.114.46.13 with HTTP; Sat, 26 Jul 2008 11:17:33 -0700 (PDT)
Message-ID: <1bcb7c7f0807261117k6cf8e1a3l872b151db0e890b7@mail.gmail.com>
Date: Sat, 26 Jul 2008 21:17:33 +0300
From: "Cam Bazz" <cambazz@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: deleting documents with doc id
In-Reply-To: <55B38F3C-C416-42FD-855D-19DBC03D3D57@gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_3339_32448233.1217096253480"
References: <1bcb7c7f0807231308v22b80e9fpa5147ca20fc470e3@mail.gmail.com>
	 <55B38F3C-C416-42FD-855D-19DBC03D3D57@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_3339_32448233.1217096253480
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

hello,

the thing is:

I got a indexwriter and indexsearcher.

I do a indexsearcher.getIndexReader.delete(int id)

would not that cause problems? there is not a way to delete from
indexwriter, and I think i will cause a lock issue deleting from
indexsearcher.

best,
-C.B.

On Thu, Jul 24, 2008 at 2:13 AM, Karl Wettin <karl.wettin@gmail.com> wrote:

>
> 23 jul 2008 kl. 22.08 skrev Cam Bazz:
>
>
>  hello -
>>
>> if I make a query and get the document ids and delete with the document id
>> -
>> could there be a side effect?
>>
>> my index is committed periodically, but i can not say when it is
>> committed.
>>
>
> The only thing is that the deltions will not be visible until you create a
> new IndexReader. Also, lots and lots of deletions without optimizing an
> index can have an impact on performance, but that is not something you are
> likely to encounter.
>
>
>      karl
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_3339_32448233.1217096253480--

From java-user-return-35159-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jul 26 19:48:35 2008
Return-Path: <java-user-return-35159-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 29262 invoked from network); 26 Jul 2008 19:48:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Jul 2008 19:48:34 -0000
Received: (qmail 47336 invoked by uid 500); 26 Jul 2008 19:48:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47310 invoked by uid 500); 26 Jul 2008 19:48:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47298 invoked by uid 99); 26 Jul 2008 19:48:28 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 26 Jul 2008 12:48:28 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [194.109.24.28] (HELO smtp-vbr8.xs4all.nl) (194.109.24.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 26 Jul 2008 19:47:32 +0000
Received: from k8u.lan (porta.xs4all.nl [80.127.24.69])
	by smtp-vbr8.xs4all.nl (8.13.8/8.13.8) with ESMTP id m6QJluI9084610
	for <java-user@lucene.apache.org>; Sat, 26 Jul 2008 21:47:56 +0200 (CEST)
	(envelope-from paul.elschot@xs4all.nl)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: java-user@lucene.apache.org
Subject: Re: Fastest way to get just the "bits" of matching documents
Date: Sat, 26 Jul 2008 21:47:56 +0200
User-Agent: KMail/1.9.9
References: <925729.49551.qm@web27107.mail.ukl.yahoo.com> <36B4EF9511887240A973A93E7878B0560A077E826C@US1-IIEX1.IICORP.DOM>
In-Reply-To: <36B4EF9511887240A973A93E7878B0560A077E826C@US1-IIEX1.IICORP.DOM>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="utf-8"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200807262147.56463.paul.elschot@xs4all.nl>
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org

Op Thursday 24 July 2008 23:00:33 schreef Robert Stewart:
> Queries are very complex in our case, some have up to 100 or more
> clauses (over several fields), including disjunctions and prohibited
> clauses. 

Other than the earlier advice, did you try setAllowDocsOutOfOrder() ?

Regards,
Paul Elschot

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35160-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jul 26 20:37:55 2008
Return-Path: <java-user-return-35160-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 57908 invoked from network); 26 Jul 2008 20:37:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Jul 2008 20:37:54 -0000
Received: (qmail 75429 invoked by uid 500); 26 Jul 2008 20:37:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74967 invoked by uid 500); 26 Jul 2008 20:37:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74956 invoked by uid 99); 26 Jul 2008 20:37:48 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 26 Jul 2008 13:37:48 -0700
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.68.5.16] (HELO relay02.pair.com) (209.68.5.16)
    by apache.org (qpsmtpd/0.29) with SMTP; Sat, 26 Jul 2008 20:36:54 +0000
Received: (qmail 44385 invoked from network); 26 Jul 2008 20:37:15 -0000
Received: from unknown (HELO ?192.168.2.3?) (unknown)
  by unknown with SMTP; 26 Jul 2008 20:37:15 -0000
X-pair-Authenticated: 76.111.24.163
Subject: Strict Ordering of Boosted results?
From: Darren Govoni <darren@ontrenet.com>
To: java-user@lucene.apache.org
Content-Type: text/plain
Date: Sat, 26 Jul 2008 16:37:45 -0400
Message-Id: <1217104665.28219.10.camel@nuraku>
Mime-Version: 1.0
X-Mailer: Evolution 2.22.3.1 
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,
  I've looked around a bit and couldn't find an answer to this. I want
to impose a strict ordering on results from a single query where there
multiple boosted terms in the query. 

Let's say I have a field called 'word:'. If my query is

word: termA^10.0   word: termB^2.0

I want ALL termA results (ordered by score) to come before ANY termB
results (also ordered by score). Is there a way to do this in the query
syntax? Or is this simple multiple queries?

thank you,
Darren


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35161-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jul 27 02:38:01 2008
Return-Path: <java-user-return-35161-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51776 invoked from network); 27 Jul 2008 02:38:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Jul 2008 02:38:01 -0000
Received: (qmail 69405 invoked by uid 500); 27 Jul 2008 02:37:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69375 invoked by uid 500); 27 Jul 2008 02:37:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69364 invoked by uid 99); 27 Jul 2008 02:37:54 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 26 Jul 2008 19:37:54 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [65.89.232.7] (HELO thebluezone.net) (65.89.232.7)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 27 Jul 2008 02:36:59 +0000
Received: from localhost (localhost [127.0.0.1])
	by thebluezone.net (Postfix) with ESMTP id E5514286C27
	for <java-user@lucene.apache.org>; Sat, 26 Jul 2008 20:36:53 -0600 (MDT)
Received: from thebluezone.net ([127.0.0.1])
	by localhost (mail1 [127.0.0.1]) (amavisd-new, port 10024) with ESMTP
	id 14159-03 for <java-user@lucene.apache.org>;
	Sat, 26 Jul 2008 20:36:52 -0600 (MDT)
Received: from desktop (unknown [65.89.233.61])
	by thebluezone.net (Postfix) with ESMTP id 151ED286C0A
	for <java-user@lucene.apache.org>; Sat, 26 Jul 2008 20:36:52 -0600 (MDT)
From: "John Griffin" <jgriffin@thebluezone.net>
To: <java-user@lucene.apache.org>
Subject: Query time analyzer call
Date: Sat, 26 Jul 2008 20:36:38 -0600
Message-ID: <D0120FBDEE364D608EAD102B04FB7443@desktop>
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_0003_01C8EF5F.4DB99A40"
X-Mailer: Microsoft Office Outlook 11
Thread-Index: AcjvkZgAgszHzzO3RiCtMK/Z7k5Smw==
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.5512
X-Virus-Scanned: by thebluezone.net
X-Virus-Checked: Checked by ClamAV on apache.org

------=_NextPart_000_0003_01C8EF5F.4DB99A40
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit

Guys and Gals,

 

Is there a call that can be made at query time to determine what analyzer
was used at index time so the same analyzer can be used in the query? If
there is I can't find it.

 

John G.

 

 

 


------=_NextPart_000_0003_01C8EF5F.4DB99A40--


From java-user-return-35162-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jul 27 03:48:29 2008
Return-Path: <java-user-return-35162-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92219 invoked from network); 27 Jul 2008 03:48:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Jul 2008 03:48:29 -0000
Received: (qmail 87980 invoked by uid 500); 27 Jul 2008 03:48:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87950 invoked by uid 500); 27 Jul 2008 03:48:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87939 invoked by uid 99); 27 Jul 2008 03:48:23 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 26 Jul 2008 20:48:23 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of markrmiller@gmail.com designates 209.85.132.249 as permitted sender)
Received: from [209.85.132.249] (HELO an-out-0708.google.com) (209.85.132.249)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 27 Jul 2008 03:47:28 +0000
Received: by an-out-0708.google.com with SMTP id c37so4532541anc.49
        for <java-user@lucene.apache.org>; Sat, 26 Jul 2008 20:47:54 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from
         :user-agent:mime-version:to:subject:references:in-reply-to
         :content-type:content-transfer-encoding;
        bh=heLT/dn7F9UKTeGqzUtUlQwivnWuvpOHb5M4ay0G8f0=;
        b=EpK0HcYkXKwkdEwr5zwt/qyJ23R5hIVN1Tr77nYRMtO/wstSEaslVpfhX9odT9yT6W
         g9RtYgkVqGU0aqgRqnyzNK8u7rLrpgyfbvR+mxEtgRAn6nMgMXany70eEeXv9YytOOZ+
         VeWtf3x4HY27V2muohkixM3h66LV7xH3UxspY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references
         :in-reply-to:content-type:content-transfer-encoding;
        b=FKQDFLXQ59XHBKlM9c2pCAuUzaDBUdvrp23dnBvqRqPsTj3Aw6O8PrbfMIt48U25iP
         WRY51RELzEu0LBn6jZ6nceFzLUCxaisWiIgD6cm4mestyegB7+deG4Ty3r0UxvXcn4xI
         fXAXueoGbTbJsFRs23zwpa70fwC1SVQFK7a4Q=
Received: by 10.100.42.17 with SMTP id p17mr5905489anp.20.1217130473986;
        Sat, 26 Jul 2008 20:47:53 -0700 (PDT)
Received: from ?192.168.1.103? ( [69.124.234.149])
        by mx.google.com with ESMTPS id 8sm9605604ywg.6.2008.07.26.20.47.51
        (version=SSLv3 cipher=RC4-MD5);
        Sat, 26 Jul 2008 20:47:51 -0700 (PDT)
Message-ID: <488BEFF1.7040509@gmail.com>
Date: Sat, 26 Jul 2008 23:48:01 -0400
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.16 (X11/20080724)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Query time analyzer call
References: <D0120FBDEE364D608EAD102B04FB7443@desktop>
In-Reply-To: <D0120FBDEE364D608EAD102B04FB7443@desktop>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Don't believe so...you'll have to store which one was used on your own 
when you index if you want. I think there is talk of allowing for this 
type of thing with the flexible indexing change that may be coming up at 
some point, but nothing now that I know of.

- Mark

John Griffin wrote:
> Guys and Gals,
>
>  
>
> Is there a call that can be made at query time to determine what analyzer
> was used at index time so the same analyzer can be used in the query? If
> there is I can't find it.
>
>  
>
> John G.
>
>  
>
>  
>
>  
>
>
>   


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35163-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jul 27 17:59:31 2008
Return-Path: <java-user-return-35163-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76657 invoked from network); 27 Jul 2008 17:59:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Jul 2008 17:59:30 -0000
Received: (qmail 19110 invoked by uid 500); 27 Jul 2008 17:59:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19068 invoked by uid 500); 27 Jul 2008 17:59:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19057 invoked by uid 99); 27 Jul 2008 17:59:21 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 27 Jul 2008 10:59:21 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 27 Jul 2008 17:58:25 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KNAWA-0004ju-9a
	for java-user@lucene.apache.org; Sun, 27 Jul 2008 10:58:50 -0700
Message-ID: <18678779.post@talk.nabble.com>
Date: Sun, 27 Jul 2008 10:58:50 -0700 (PDT)
From: syedfa <fayyazuddin@gmail.com>
To: java-user@lucene.apache.org
Subject: Creating an index from an XML file using Lucene in Java
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: fayyazuddin@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


Dear fellow Java/Lucene developers:

I have a question on creating an index from an XML document for the purpose
of searching using the Lucene API in Java.  

I am searching shakespeare's "Hamlet" which I have as an xml document.  I
want to include comentary on each scene and would like to make this section
searchable as well for the user.  However, at present, I search through a
set of <SPEECH> tags which represents a particular character's dialogue. 
With my new arrangement, each scene, which is composed of several characters
respective dialogues, will be enclosed in a pair of <SCENE></SCENE> tags,
and will have a set of <SCENE-COMMENTARY></SCENE-COMMENTARY> tags at the top
which will provide the commentary for the scene that follows.  How would I
modify my index code (which follows after the xml document) to create a
searchable index which allows the user to search <SCENE-COMMENTARY> section
just as easily as the text contained in the <SPEECH> tags?  Once I have
accomplished this, I would like to then be able to search the text and
display the results to the user just as easily as if they were searching
through the <SPEECH> tags.  
I have also listed the code for searching through the current index.

Thanks in advance to everyone who replies.

Sincerely;
Fayyaz


Here is the xml snippet for the play:

<PLAY>
<TITLE>The Tragedy of Hamlet, Prince of Denmark</TITLE>
<SCENE>
<SCENE-COMMENTARY>Here is where I will include commentary on the scene that
follows, which I would also like to make searchable to the
user.</SCENE-COMMENTARY>
<SPEECH>
<REFERENCE>ACT 1, SCENE 1</REFERENCE>
<SPEAKER>LORD POLONIUS</SPEAKER>
<LINES>Yet here, Laertes! aboard, aboard, for shame!
The wind sits in the shoulder of your sail,
And you are stay'd for. There; my blessing with thee!
And these few precepts in thy memory
See thou character. Give thy thoughts no tongue,
Nor any unproportioned thought his act.
Be thou familiar, but by no means vulgar.
Those friends thou hast, and their adoption tried,
Grapple them to thy soul with hoops of steel;
But do not dull thy palm with entertainment
Of each new-hatch'd, unfledged comrade. Beware
Of entrance to a quarrel, but being in,
Bear't that the opposed may beware of thee.
Give every man thy ear, but few thy voice;
Take each man's censure, but reserve thy judgment.
Costly thy habit as thy purse can buy,
But not express'd in fancy; rich, not gaudy;
For the apparel oft proclaims the man,
And they in France of the best rank and station
Are of a most select and generous chief in that.
Neither a borrower nor a lender be;
For loan oft loses both itself and friend,
And borrowing dulls the edge of husbandry.
This above all: to thine ownself be true,
And it must follow, as the night the day,
Thou canst not then be false to any man.
Farewell: my blessing season this in thee!</LINES>
</SPEECH>
<SPEECH>
<SPEAKER>HAMLET</SPEAKER>
<REFERENCE>ACT 1, SCENE 2</REFERENCE>
<LINES>To be, or not to be: that is the question:
Whether 'tis nobler in the mind to suffer
The slings and arrows of outrageous fortune,
Or to take arms against a sea of troubles,
And by opposing end them? To die: to sleep;
No more; and by a sleep to say we end
The heart-ache and the thousand natural shocks
That flesh is heir to, 'tis a consummation
Devoutly to be wish'd. To die, to sleep;
To sleep: perchance to dream: ay, there's the rub;
For in that sleep of death what dreams may come
When we have shuffled off this mortal coil,
Must give us pause: there's the respect
That makes calamity of so long life;
For who would bear the whips and scorns of time,
The oppressor's wrong, the proud man's contumely,
The pangs of despised love, the law's delay,
The insolence of office and the spurns
That patient merit of the unworthy takes,
When he himself might his quietus make
With a bare bodkin? who would fardels bear,
To grunt and sweat under a weary life,
But that the dread of something after death,
The undiscover'd country from whose bourn
No traveller returns, puzzles the will
And makes us rather bear those ills we have
Than fly to others that we know not of?
Thus conscience does make cowards of us all;
And thus the native hue of resolution
Is sicklied o'er with the pale cast of thought,
And enterprises of great pith and moment
With this regard their currents turn awry,
And lose the name of action.--Soft you now!
The fair Ophelia! Nymph, in thy orisons
Be all my sins remember'd.</LINES>
</SPEECH>
<SPEECH>
<REFERENCE>ACT 1, SCENE 3</REFERENCE>
<SPEAKER>HAMLET</SPEAKER>
<LINES>To be, or not to be: that is the question:
Whether 'tis nobler in the mind to suffer
The slings and arrows of outrageous fortune,
Or to take arms against a sea of troubles,
And by opposing end them? To die: to sleep;
No more; and by a sleep to say we end
The heart-ache and the thousand natural shocks
That flesh is heir to, 'tis a consummation
Devoutly to be wish'd. To die, to sleep;
To sleep: perchance to dream: ay, there's the rub;
For in that sleep of death what dreams may come
When we have shuffled off this mortal coil,
Must give us pause: there's the respect
That makes calamity of so long life;
For who would bear the whips and scorns of time,
The oppressor's wrong, the proud man's contumely,
The pangs of despised love, the law's delay,
The insolence of office and the spurns
That patient merit of the unworthy takes,
When he himself might his quietus make
With a bare bodkin? who would fardels bear,
To grunt and sweat under a weary life,
But that the dread of something after death,
The undiscover'd country from whose bourn
No traveller returns, puzzles the will
And makes us rather bear those ills we have
Than fly to others that we know not of?
Thus conscience does make cowards of us all;
And thus the native hue of resolution
Is sicklied o'er with the pale cast of thought,
And enterprises of great pith and moment
With this regard their currents turn awry,
And lose the name of action.--Soft you now!
The fair Ophelia! Nymph, in thy orisons
Be all my sins remember'd.</LINES>
</SPEECH>
<SPEECH>
<REFERENCE>ACT 1, SCENE 4</REFERENCE>
<SPEAKER>HAMLET</SPEAKER>
<LINES>To be, or not to be: that is the question:
Whether 'tis nobler in the mind to suffer
The slings and arrows of outrageous fortune,
Or to take arms against a sea of troubles,
And by opposing end them? To die: to sleep;
No more; and by a sleep to say we end
The heart-ache and the thousand natural shocks
That flesh is heir to, 'tis a consummation
Devoutly to be wish'd. To die, to sleep;
To sleep: perchance to dream: ay, there's the rub;
For in that sleep of death what dreams may come
When we have shuffled off this mortal coil,
Must give us pause: there's the respect
That makes calamity of so long life;
For who would bear the whips and scorns of time,
The oppressor's wrong, the proud man's contumely,
The pangs of despised love, the law's delay,
The insolence of office and the spurns
That patient merit of the unworthy takes,
When he himself might his quietus make
With a bare bodkin? who would fardels bear,
To grunt and sweat under a weary life,
But that the dread of something after death,
The undiscover'd country from whose bourn
No traveller returns, puzzles the will
And makes us rather bear those ills we have
Than fly to others that we know not of?
Thus conscience does make cowards of us all;
And thus the native hue of resolution
Is sicklied o'er with the pale cast of thought,
And enterprises of great pith and moment
With this regard their currents turn awry,
And lose the name of action.--Soft you now!
The fair Ophelia! Nymph, in thy orisons
Be all my sins remember'd.</LINES>
</SPEECH>
</SCENE>
</PLAY>


Here is my indexing code:

package hamlet;
 
import java.io.InputStream;
import java.io.IOException;
import java.io.File;
import java.io.FileInputStream;
import java.util.Iterator;
import java.util.HashMap;
 
import org.apache.lucene.analysis.Analyzer;
import org.apache.lucene.analysis.standard.StandardAnalyzer;
import org.apache.lucene.document.Document;
import org.apache.lucene.document.Field;
import org.apache.lucene.index.CorruptIndexException;
import org.apache.lucene.index.IndexWriter;
import org.apache.lucene.store.Directory;
import org.apache.lucene.store.FSDirectory;
 
import org.xml.sax.helpers.DefaultHandler;
import org.xml.sax.SAXException;
import org.xml.sax.Attributes;
 
import javax.xml.parsers.SAXParser;
import javax.xml.parsers.SAXParserFactory;
import javax.xml.parsers.ParserConfigurationException;
 
public class HamletHandler extends DefaultHandler implements DocumentHandler
{
 
    //the directory that stores xml files
    private final String dataDir  = "c:\\dataD";
    //the directory that is used to store lucene index
    private final String indexDir = "c:\\indexD";
    
	private StringBuffer elementBuffer=new StringBuffer();
	private HashMap attributeMap;
	private Document doc;
	static IndexWriter indexWriter;
	
	
	public Document getDocument(InputStream is) throws DocumentHandlerException
{
		// TODO Auto-generated method stub
		SAXParserFactory spf=SAXParserFactory.newInstance();
		
		try{
			SAXParser parser=spf.newSAXParser();
			parser.parse(is, this);
		}
		catch(IOException e){
			throw new DocumentHandlerException("Cannot parse XML document", e);
		}
		
		catch(ParserConfigurationException e){
			throw new DocumentHandlerException("Cannot parse XML document", e);
		}
		
		catch(SAXException e){
			throw new DocumentHandlerException("Cannot parse XML document", e);
		}
		
		return doc;
	}
 
	public void startDocument(){
		//doc=new Document();
	}
	
	public void startElement(String uri, String localName, String qName,
Attributes atts) throws SAXException{
	
		if(qName.equals("SPEECH")){
			doc=new Document();
		}
		elementBuffer.setLength(0);
		//attributeMap.clear();
		if(atts.getLength()>0){
			attributeMap=new HashMap();
			for(int i=0; i<atts.getLength(); i++){
				attributeMap.put(atts.getQName(i), atts.getValue(i));
			}
		}
	}
	public void characters(char[] text, int start, int length){
		elementBuffer.append(text, start, length);
		
	}
	
	public void endElement(String uri, String localName, String qName) throws
SAXException{
		
		try {
			
			if(qName.equals("REFERENCE")){
				Field reference = new Field(qName, elementBuffer.toString(),
Field.Store.YES, Field.Index.NO, Field.TermVector.NO);
				doc.add(reference);
			}
			
			else if(qName.equals("SPEAKER")){
				Field speaker = new Field(qName, elementBuffer.toString(),
Field.Store.YES, Field.Index.TOKENIZED, Field.TermVector.YES);
				speaker.setBoost(2.0f);
				doc.add(speaker);
			}
			else if(qName.equals("LINES")){
				Field lines = new Field(qName, elementBuffer.toString(),
Field.Store.YES, Field.Index.TOKENIZED, Field.TermVector.YES);
				lines.setBoost(1.0f);
				doc.add(lines);
				indexWriter.addDocument(doc);
							}
			else{
				return;
			}
				
		} catch (CorruptIndexException e) {
			// TODO Auto-generated catch block
			e.printStackTrace();
		} catch (IOException e) {
			// TODO Auto-generated catch block
			e.printStackTrace();
		}
 
		
		
	}
	/**
	 * @param args
	 */
	public static void main(String[] args) throws Exception{
		File index=new File("c:\\Documents and Settings\\Fayyazuddin A Syed\\My
Documents\\indexD");
		Directory fsDirectory = FSDirectory.getDirectory(index);
    	Analyzer  analyzer    = new StandardAnalyzer();
    	indexWriter = new IndexWriter(fsDirectory, analyzer, true);
		HamletHandler handler=new HamletHandler();
		Document doc=handler.getDocument(new FileInputStream(new File(args[0])));
		int numIndexed=indexWriter.docCount();
		System.out.println(numIndexed);
		indexWriter.optimize();
    	indexWriter.close();
 
	}
 
}


and here is my searcher code:

package search;
 
/*
 * Searcher.java
 *
 * Created on August 6, 2007, 8:46 PM
 *
 * To change this template, choose Tools | Template Manager
 * and open the template in the editor.
 */
 
 
 
import java.io.File;
import java.io.FileReader;
import java.io.Reader;
import java.io.StringReader;
import java.util.Date;
import java.util.List;
import java.util.ArrayList;
import java.io.IOException;
 
import org.apache.lucene.analysis.Analyzer;
import org.apache.lucene.analysis.TokenStream;
import org.apache.lucene.analysis.CachingTokenFilter;
import org.apache.lucene.analysis.standard.StandardAnalyzer ;
import org.apache.lucene.document.Document;
import org.apache.lucene.document.Field;
import org.apache.lucene.index.IndexReader;
import org.apache.lucene.index.IndexWriter;
import org.apache.lucene.search.IndexSearcher;
import org.apache.lucene.search.FuzzyQuery;
import org.apache.lucene.search.FuzzyLikeThisQuery;
import org.apache.lucene.search.Query ;
import org.apache.lucene.search.Scorer;
import org.apache.lucene.search.highlight.QueryScorer;
import org.apache.lucene.search.WildcardQuery;
import org.apache.lucene.search.highlight.Highlighter;
import org.apache.lucene.search.highlight.SimpleHTMLFormatter;
import org.apache.lucene.search.highlight.SimpleFragmenter;
import org.apache.lucene.search.highlight.Fragmenter;
import org.apache.lucene.search.highlight.NullFragmenter;
import org.apache.lucene.search.Hits;
import org.apache.lucene.index.Term;
import org.apache.lucene.search.TermQuery;
import org.apache.lucene.store.FSDirectory;
import org.apache.lucene.store.Directory;
import org.apache.lucene.queryParser.QueryParser;
/**
 *
 * 
 */
public class Searcher {
    
    /** Creates a new instance of Searcher */
    
    /**
     * @param args the command line arguments
     */
    public static void main(String[] args) throws Exception{ 
        
    	Searcher searchDoc=new Searcher();
        File indexDir=new File("c:\\Documents and Settings\\Fayyazuddin A
Syed\\My Documents\\indexD");
        String q="SLINGS AND ARROWS";
        String s="think~";
        if (s.contains("?") || s.contains("*")){
        	System.out.println("this is a wildcard search");
        }
        else if (s.contains("~")){
        	System.out.println("this is a fuzzy search");
        }
        else {
        	System.out.println("this is a normal search");
        }
        
        if(!indexDir.exists() || !indexDir.isDirectory()){
            throw new Exception(indexDir + "does not exist of is not a
directory."); 
        }
        //searchDoc.wildSearch(indexDir);
        searchDoc.search(indexDir, q);
        //searchDoc.fuzzySearch(indexDir);
        
        
    }
    
    public List search(File indexDir, String q) throws Exception {
         
    	List searchResult = new ArrayList();
        Directory fsDir=FSDirectory.getDirectory(indexDir);
        IndexSearcher is=new IndexSearcher(fsDir);
        
        Analyzer analyser = new StandardAnalyzer();
        Query parser=new QueryParser("LINES", analyser).parse(q);
        long start=new Date().getTime();
        Hits hits=is.search(parser);
        long end=new Date().getTime();
        QueryScorer scorer = new QueryScorer(parser);
        SimpleHTMLFormatter formatter = new SimpleHTMLFormatter("", "");
    	Highlighter highlighter = new Highlighter(formatter, scorer);
    	Highlighter high = new Highlighter(formatter, scorer);
    	Fragmenter fragmenter = new NullFragmenter();
    	Fragmenter fragment = new SimpleFragmenter(250);
    	highlighter.setTextFragmenter(fragmenter);
    	high.setTextFragmenter(fragment);
    	
        for(int i=0; i<hits.length(); i++){
        	Document doc=hits.doc(i);
        	String lns = doc.get("LINES");
         TokenStream lines = analyser.tokenStream("LINES", new
StringReader(lns));
         CachingTokenFilter filter = new CachingTokenFilter(lines);
         String highlightedLines = highlighter.getBestFragment(filter, lns);
            filter.reset();
         String highlight = high.getBestFragment(filter, lns);
        	SearchResult resultBean = new SearchResult();
        	resultBean.setReference(hits.doc(i).get("REFERENCE"));
        	resultBean.setNarrator(hits.doc(i).get("SPEAKER"));
        	resultBean.setHitResult(highlight);
        	resultBean.setQuote(highlightedLines);
        	searchResult.add(resultBean);
        	System.out.println(resultBean.getReference());
        	System.out.println(resultBean.getNarrator());
         	System.out.println(resultBean.getHitResult());
         	System.out.println("");
        	System.out.println(resultBean.getQuote());
        	System.out.println("");
        }
        
        System.err.println("Found " + hits.length() + " document(s)(in " +
(end-start) + " milliseconds) that matched query '" + q + "':"); 
        
        return searchResult;        
    }
    
    public List wildSearch(File indexDir) throws Exception {
    	
        List searchResult = new ArrayList();
        Directory fsDir=FSDirectory.getDirectory(indexDir);
        IndexSearcher is = new IndexSearcher(fsDir); 
        IndexReader ir = IndexReader.open(fsDir);               
        Analyzer analyser = new StandardAnalyzer();
        Query parser=new WildcardQuery(new Term("LINES", "the*"));
        parser=parser.rewrite(ir);
        long start=new Date().getTime();
        Hits hits=is.search(parser);
        long end=new Date().getTime();
        QueryScorer scorer = new QueryScorer(parser);
        SimpleHTMLFormatter formatter = new SimpleHTMLFormatter("", "");
    	Highlighter highlighter = new Highlighter(formatter, scorer);
        	Highlighter high = new Highlighter(formatter, scorer);
        	Fragmenter fragmenter = new NullFragmenter();
    	Fragmenter fragment = new SimpleFragmenter(250);
    	highlighter.setTextFragmenter(fragmenter);
    	high.setTextFragmenter(fragment);
    	
        for(int i=0; i<hits.length(); i++){
        	Document doc=hits.doc(i);
        	String lns = doc.get("LINES");
         TokenStream lines = analyser.tokenStream("LINES", new
StringReader(lns));
            CachingTokenFilter filter = new CachingTokenFilter(lines);
            String highlightedLines = highlighter.getBestFragment(filter,
lns);
            filter.reset();
            String highlight = high.getBestFragment(filter, lns);
            SearchResult resultBean = new SearchResult();
        	   resultBean.setNarrator(hits.doc(i).get("SPEAKER"));
        	   resultBean.setHitResult(highlight);
        	   resultBean.setQuote(highlightedLines);
        	   searchResult.add(resultBean);
        	   System.out.println(resultBean.getNarrator());
         	   System.out.println(resultBean.getHitResult());
         	   System.out.println("");
        	   System.out.println(resultBean.getQuote());
        	   System.out.println("");
        }
        
        System.err.println("Found " + hits.length() + " document(s)(in " +
(end-start) + " milliseconds) that matched query '" + "':"); 
        
        return searchResult;
    }
    
public List fuzzySearch(File indexDir) throws Exception {
    	
        List searchResult = new ArrayList();
        Directory fsDir=FSDirectory.getDirectory(indexDir);
        IndexSearcher is = new IndexSearcher(fsDir); 
        IndexReader ir = IndexReader.open(fsDir);               
        Analyzer analyser = new StandardAnalyzer();
        Query parser=new FuzzyQuery(new Term("LINES", "the~"));
        parser=parser.rewrite(ir);
        long start=new Date().getTime();
        Hits hits=is.search(parser);
        long end=new Date().getTime();
        QueryScorer scorer = new QueryScorer(parser);
        SimpleHTMLFormatter formatter = new SimpleHTMLFormatter("", "");
    	Highlighter highlighter = new Highlighter(formatter, scorer);
        	Highlighter high = new Highlighter(formatter, scorer);
        	Fragmenter fragmenter = new NullFragmenter();
    	Fragmenter fragment = new SimpleFragmenter(250);
    	highlighter.setTextFragmenter(fragmenter);
    	high.setTextFragmenter(fragment);
    	
        for(int i=0; i<hits.length(); i++){
        	Document doc=hits.doc(i);
        	String lns = doc.get("LINES");
         TokenStream lines = analyser.tokenStream("LINES", new
StringReader(lns));
            CachingTokenFilter filter = new CachingTokenFilter(lines);
            String highlightedLines = highlighter.getBestFragment(filter,
lns);
            filter.reset();
            String highlight = high.getBestFragment(filter, lns);
            SearchResult resultBean = new SearchResult();
        	resultBean.setNarrator(hits.doc(i).get("SPEAKER"));
        	resultBean.setHitResult(highlight);
        	resultBean.setQuote(highlightedLines);
        	searchResult.add(resultBean);
        	System.out.println(resultBean.getNarrator());
         	System.out.println(resultBean.getHitResult());
         	System.out.println("");
        	System.out.println(resultBean.getQuote());
        	System.out.println("");
        }
        
        System.err.println("Found " + hits.length() + " document(s)(in " +
(end-start) + " milliseconds) that matched query '" + "':"); 
        
        return searchResult;
    }
} 



-- 
View this message in context: http://www.nabble.com/Creating-an-index-from-an-XML-file-using-Lucene-in-Java-tp18678779p18678779.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35164-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jul 27 18:26:30 2008
Return-Path: <java-user-return-35164-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89965 invoked from network); 27 Jul 2008 18:26:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Jul 2008 18:26:30 -0000
Received: (qmail 26646 invoked by uid 500); 27 Jul 2008 18:26:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26614 invoked by uid 500); 27 Jul 2008 18:26:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26603 invoked by uid 99); 27 Jul 2008 18:26:24 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 27 Jul 2008 11:26:24 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 27 Jul 2008 18:25:28 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KNAwM-0005kG-CV
	for java-user@lucene.apache.org; Sun, 27 Jul 2008 11:25:54 -0700
Message-ID: <18679016.post@talk.nabble.com>
Date: Sun, 27 Jul 2008 11:25:54 -0700 (PDT)
From: "Karsten F." <karsten-lucene@fiz-technik.de>
To: java-user@lucene.apache.org
Subject: Re: Creating an index from an XML file using Lucene in Java
In-Reply-To: <18678779.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: karsten-lucene@fiz-technik.de
References: <18678779.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Hi Fayyaz,

>From my point of view, this is not a lucene question.

If I understand your SAX-Handler correctly, you start a document with each
"speech"-start-Tag and you end this document with each "lines"-close-Tag.
So if you know that the SCENE-COMMENTARY Elements and the speech elements
are disjunctive, you could use the same Element for generate document
(start-tag) and adding document to index (close-tag).

Best regards

  Karsten

p.s. is this a homework?
-- 
View this message in context: http://www.nabble.com/Creating-an-index-from-an-XML-file-using-Lucene-in-Java-tp18678779p18679016.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35165-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jul 27 18:44:36 2008
Return-Path: <java-user-return-35165-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 434 invoked from network); 27 Jul 2008 18:44:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Jul 2008 18:44:36 -0000
Received: (qmail 31564 invoked by uid 500); 27 Jul 2008 18:44:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31527 invoked by uid 500); 27 Jul 2008 18:44:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31516 invoked by uid 99); 27 Jul 2008 18:44:30 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 27 Jul 2008 11:44:30 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 27 Jul 2008 18:43:35 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KNBDs-0006H3-Ho
	for java-user@lucene.apache.org; Sun, 27 Jul 2008 11:44:00 -0700
Message-ID: <18679168.post@talk.nabble.com>
Date: Sun, 27 Jul 2008 11:44:00 -0700 (PDT)
From: "Karsten F." <karsten-lucene@fiz-technik.de>
To: java-user@lucene.apache.org
Subject: Re: deleting documents with doc id
In-Reply-To: <1bcb7c7f0807261117k6cf8e1a3l872b151db0e890b7@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: karsten-lucene@fiz-technik.de
References: <1bcb7c7f0807231308v22b80e9fpa5147ca20fc470e3@mail.gmail.com> <55B38F3C-C416-42FD-855D-19DBC03D3D57@gmail.com> <1bcb7c7f0807261117k6cf8e1a3l872b151db0e890b7@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Hi,

only to be sure:
You know IndexModifier.deleteDocument(int)?
It is deprecated, because you should use
IndexWriter.deleteDocuments(Term[]).

What do you mean with "index is committed".
If you mean "optimize()" the document number will change (so there is a
side-effect;-)

best regards
  Karsten 


cambazz wrote:
> 
> hello,
> 
> the thing is:
> 
> I got a indexwriter and indexsearcher.
> 
> I do a indexsearcher.getIndexReader.delete(int id)
> 
> would not that cause problems? there is not a way to delete from
> indexwriter, and I think i will cause a lock issue deleting from
> indexsearcher.
> 
> best,
> -C.B.
> 
-- 
View this message in context: http://www.nabble.com/deleting-documents-with-doc-id-tp18619372p18679168.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35166-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jul 27 20:41:04 2008
Return-Path: <java-user-return-35166-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60038 invoked from network); 27 Jul 2008 20:41:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Jul 2008 20:41:04 -0000
Received: (qmail 97880 invoked by uid 500); 27 Jul 2008 20:40:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97833 invoked by uid 500); 27 Jul 2008 20:40:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 97723 invoked by uid 99); 27 Jul 2008 20:39:43 -0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Message-ID: <488CDCDA.7060803@cryoserver.com>
Date: Sun, 27 Jul 2008 21:38:50 +0100
From: Mazhar Lateef <mazhar.lateef@cryoserver.com>
User-Agent: Thunderbird 2.0.0.14 (Macintosh/20080421)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Lucene performance issues..
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-OriginalArrivalTime: 27 Jul 2008 20:41:55.0593 (UTC) FILETIME=[3523E790:01C8F029]
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,
 
we have a system to archive mails and are facing some issues that we are 
having with search and indexing performance, the following is what we 
are currently facing challenges with, we are currently using lucene 
version 2.2 the platform is SLES10.1 and the application is written in 
Java.

  * Index merging and optimization.
          The index merging/optimization takes too long when large 
number of documents are being
          added, we have resolved this by having two indexes and
          keeping one writable at all times so that mails are
          constantly processed. however it would be good to find a 
solution to this issue. and have the index optimization take less time 
and be more efficient,
         also this process consumes a lot of memory. and sometime the 
application runs of memory.

  * email searching
        o We are creating very large indexes for emails we are
          processing, the size is upto +150GB for indexes only (not
          including data content), this we thought would improve
          search performance since less indexes to open and read from,
          however the searching taking upto minutes and sometime never
          returns results

We have also tried upgrading the lucene version to 2.3 in hope to 
improve performance but the results were quite the opposite. but from my 
research on the internet the Lucene version 2.3 is much faster and 
better so why are we seeing such inconsistency.

we are now adopting a slightly different architecture where we will be 
able to split the indexes and reduce the size, however I wanted to get 
some expert help, to help us with the decision of which lucene version 
to use, and how to use the lucene to get the best balance between index 
size, merging indexes and most importantly search performance,
Any help would be very much appreciated.

Many thanks in advance.

Maz

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35167-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jul 27 20:59:51 2008
Return-Path: <java-user-return-35167-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70973 invoked from network); 27 Jul 2008 20:59:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Jul 2008 20:59:51 -0000
Received: (qmail 8326 invoked by uid 500); 27 Jul 2008 20:59:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8297 invoked by uid 500); 27 Jul 2008 20:59:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8286 invoked by uid 99); 27 Jul 2008 20:59:45 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 27 Jul 2008 13:59:45 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lucenelist2007@danielnaber.de designates 80.67.18.13 as permitted sender)
Received: from [80.67.18.13] (HELO smtprelay01.ispgateway.de) (80.67.18.13)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 27 Jul 2008 20:58:48 +0000
Received: from [91.37.191.182] (helo=p5b25bfb6.dip.t-dialin.net)
	by smtprelay01.ispgateway.de with esmtpsa (TLSv1:AES256-SHA:256)
	(Exim 4.68)
	(envelope-from <lucenelist2007@danielnaber.de>)
	id 1KNDKh-00075M-Bn
	for java-user@lucene.apache.org; Sun, 27 Jul 2008 22:59:11 +0200
From: Daniel Naber <lucenelist2007@danielnaber.de>
To: java-user@lucene.apache.org
Subject: Re: Lucene performance issues..
Date: Sun, 27 Jul 2008 22:59:49 +0200
User-Agent: KMail/1.9.6 (enterprise 20070904.708012)
References: <488CDCDA.7060803@cryoserver.com>
In-Reply-To: <488CDCDA.7060803@cryoserver.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="us-ascii"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200807272259.50136@danielnaber.de>
X-Df-Sender: 695637
X-Virus-Checked: Checked by ClamAV on apache.org

On Sonntag, 27. Juli 2008, Mazhar Lateef wrote:

> We have also tried upgrading the lucene version to 2.3 in hope to
> improve performance but the results were quite the opposite. but from my
> research on the internet the Lucene version 2.3 is much faster and
> better so why are we seeing such inconsistency.

Have you checked out these pages?

http://wiki.apache.org/lucene-java/ImproveIndexingSpeed
http://wiki.apache.org/lucene-java/ImproveSearchingSpeed

Even a large index should be fast, assuming the queries are not 
complicated. Also, with a large index the performance depends on the 
number of matches, i.e. searching for very common terms might be slow. 
Maybe you could post more information about your queries.

Regards
 Daniel

-- 
http://www.danielnaber.de

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35168-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jul 27 22:19:53 2008
Return-Path: <java-user-return-35168-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3986 invoked from network); 27 Jul 2008 22:19:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Jul 2008 22:19:53 -0000
Received: (qmail 35380 invoked by uid 500); 27 Jul 2008 22:19:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 35346 invoked by uid 500); 27 Jul 2008 22:19:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 35335 invoked by uid 99); 27 Jul 2008 22:19:46 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 27 Jul 2008 15:19:46 -0700
X-ASF-Spam-Status: No, hits=2.4 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of stuhood@mailtrust.com designates 207.97.245.181 as permitted sender)
Received: from [207.97.245.181] (HELO smtp181.iad.emailsrvr.com) (207.97.245.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 27 Jul 2008 22:18:51 +0000
Received: from relay8.relay.iad.mlsrvr.com (localhost [127.0.0.1])
	by relay8.relay.iad.mlsrvr.com (SMTP Server) with ESMTP id 6FAE61D225F
	for <java-user@lucene.apache.org>; Sun, 27 Jul 2008 18:19:16 -0400 (EDT)
Received: from webmail9.r5.iad.mlsrvr.com (webmail9.r5.iad.mlsrvr.com [192.168.1.102])
	by relay8.relay.iad.mlsrvr.com (SMTP Server) with ESMTP id 6C9611D1EB3
	for <java-user@lucene.apache.org>; Sun, 27 Jul 2008 18:19:16 -0400 (EDT)
Received: from mailtrust.com (localhost [127.0.0.1])
	by webmail9.r5.iad.mlsrvr.com (Postfix) with ESMTP id 550613FC003
	for <java-user@lucene.apache.org>; Sun, 27 Jul 2008 18:19:16 -0400 (EDT)
Received: by beta.mailtrust.com
    (Authenticated sender: stuhood@mailtrust.com, from: stuhood@mailtrust.com) 
    with HTTP; Sun, 27 Jul 2008 18:19:16 -0400 (EDT)
Date: Sun, 27 Jul 2008 18:19:16 -0400 (EDT)
Subject: Re: Lucene performance issues..
From: "Stu Hood" <stuhood@mailtrust.com>
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain;charset=UTF-8
Content-Transfer-Encoding: quoted-printable
Importance: Normal
X-Priority: 3 (Normal)
X-Type: plain
In-Reply-To: <200807272259.50136@danielnaber.de>
References: <200807272259.50136@danielnaber.de>
Message-ID: <1217197156.268426903@192.168.1.71>
X-Mailer: webmail6.7b
X-Virus-Checked: Checked by ClamAV on apache.org

Also, keep in mind that optimization is a very disk intense process (and th=
erefore slow). It completely rewrites the index, and should only be done wh=
en you are not expecting the index to change for a while.=0A=0A=0A-----Orig=
inal Message-----=0AFrom: "Daniel Naber" <lucenelist2007@danielnaber.de>=0A=
Sent: Sunday, July 27, 2008 4:59pm=0ATo: java-user@lucene.apache.org=0ASubj=
ect: Re: Lucene performance issues..=0A=0AOn Sonntag, 27. Juli 2008, Mazhar=
 Lateef wrote:=0A=0A> We have also tried upgrading the lucene version to 2.=
3 in hope to=0A> improve performance but the results were quite the opposit=
e. but from my=0A> research on the internet the Lucene version 2.3 is much =
faster and=0A> better so why are we seeing such inconsistency.=0A=0AHave yo=
u checked out these pages?=0A=0Ahttp://wiki.apache.org/lucene-java/ImproveI=
ndexingSpeed=0Ahttp://wiki.apache.org/lucene-java/ImproveSearchingSpeed=0A=
=0AEven a large index should be fast, assuming the queries are not =0Acompl=
icated. Also, with a large index the performance depends on the =0Anumber o=
f matches, i.e. searching for very common terms might be slow. =0AMaybe you=
 could post more information about your queries.=0A=0ARegards=0A Daniel=0A=
=0A-- =0Ahttp://www.danielnaber.de=0A=0A-----------------------------------=
----------------------------------=0ATo unsubscribe, e-mail: java-user-unsu=
bscribe@lucene.apache.org=0AFor additional commands, e-mail: java-user-help=
@lucene.apache.org=0A=0A


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35169-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 28 00:01:58 2008
Return-Path: <java-user-return-35169-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64418 invoked from network); 28 Jul 2008 00:01:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Jul 2008 00:01:58 -0000
Received: (qmail 75512 invoked by uid 500); 28 Jul 2008 00:01:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75469 invoked by uid 500); 28 Jul 2008 00:01:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75458 invoked by uid 99); 28 Jul 2008 00:01:52 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 27 Jul 2008 17:01:52 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 Jul 2008 00:00:56 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KNGB0-00087r-CD
	for java-user@lucene.apache.org; Sun, 27 Jul 2008 17:01:22 -0700
Message-ID: <18682150.post@talk.nabble.com>
Date: Sun, 27 Jul 2008 17:01:22 -0700 (PDT)
From: syedfa <fayyazuddin@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Creating an index from an XML file using Lucene in Java
In-Reply-To: <18679016.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: fayyazuddin@gmail.com
References: <18678779.post@talk.nabble.com> <18679016.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org


I think I understand what you are saying, but I was hoping you could clarify
a little further.  in the start-element method, I have the following:

                if(qName.equals("SPEECH")){ 
                        doc=new Document(); 
                }

are you saying that I should add an identical block of code for
<SCENE-COMMENTARY> as well, and include a similar clause in the endElement
method as well? i.e.

                         else if(qName.equals("SCENE-COMMENTARY")){ 
                                Field lines = new Field(qName,
elementBuffer.toString(), Field.Store.YES, Field.Index.TOKENIZED,
Field.TermVector.YES); 
                                lines.setBoost(1.0f); 
                                doc.add(lines); 
                                indexWriter.addDocument(doc);
                         } 

Does it also matter where in the if/else if clauses I mention the
"SCENE-COMMENTARY" tag?  ie. should I mention it first?  last?  or does the
order matter?

Just wondering.
Thanks again for your prompt reply.
Sincerely;
Fayyaz

P.S.  This is actually a personal project, as I have developed an interest
in Information Retrieval and simply wanted to work on a creative project to
help me develop my skills.  :-) 


Karsten F. wrote:
> 
> Hi Fayyaz,
> 
> From my point of view, this is not a lucene question.
> 
> If I understand your SAX-Handler correctly, you start a document with each
> "speech"-start-Tag and you end this document with each "lines"-close-Tag.
> So if you know that the SCENE-COMMENTARY Elements and the speech elements
> are disjunctive, you could use the same Element for generate document
> (start-tag) and adding document to index (close-tag).
> 
> Best regards
> 
>   Karsten
> 
> p.s. is this a homework?
> 

-- 
View this message in context: http://www.nabble.com/Creating-an-index-from-an-XML-file-using-Lucene-in-Java-tp18678779p18682150.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35170-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 28 04:25:40 2008
Return-Path: <java-user-return-35170-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42281 invoked from network); 28 Jul 2008 04:25:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Jul 2008 04:25:40 -0000
Received: (qmail 70065 invoked by uid 500); 28 Jul 2008 04:25:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70023 invoked by uid 500); 28 Jul 2008 04:25:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70012 invoked by uid 99); 28 Jul 2008 04:25:32 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 27 Jul 2008 21:25:32 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 Jul 2008 04:24:37 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KNKIA-0007M8-Ky
	for java-user@lucene.apache.org; Sun, 27 Jul 2008 21:25:02 -0700
Message-ID: <18683927.post@talk.nabble.com>
Date: Sun, 27 Jul 2008 21:25:02 -0700 (PDT)
From: Ajay Garg <ajaygargnsit@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Query in IndexWriter.deleteDocuments(Term term)
In-Reply-To: <C6E080CD-6D4A-4352-8B87-6EC2B2247B1A@mikemccandless.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: ajaygargnsit@gmail.com
References: <18662995.post@talk.nabble.com> <FD8B25C8-BFEF-4C58-B7DD-4D705063B322@mikemccandless.com> <18665652.post@talk.nabble.com> <C172F4F4-CFDF-4585-9BAF-6AA627B9DD3A@mikemccandless.com> <18666813.post@talk.nabble.com> <18666853.post@talk.nabble.com> <C6E080CD-6D4A-4352-8B87-6EC2B2247B1A@mikemccandless.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Thanks Mike.

Yes, I know, 2.3.2 doesn't have commit(). That's why, I asked whether commit
= close + new IndexWriter, because then I can write a commit() method,
encapslating close() + new IndexWriter.

Thanks a ton for the prompt replies..

Ajay Garg

Michael McCandless-2 wrote:
> 
> 
> Ajay Garg wrote:
> 
>> Pardon me. But will commit() be "code-fully" equal to calling close()
>> followed by reinstantiating IW with create=false ??? If the above is  
>> indeed
>> true, I can very well begin with my work.
> 
> Yes, commit() can be seen as achieving exactly the same as close() and  
> opening a new IndexWriter.
> 
>> I ask this, because I plan to work within a fortnight, and 2.4 is  
>> still
>> someway away, and the primary reason I am porting to 2.3.2 (from  
>> 2.0.0), is
>> to have explicit commit() control in our hands.
> 
> OK but 2.3.2 doesn't have commit yet.
> 
> Mike
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/Query-in-IndexWriter.deleteDocuments%28Term-term%29-tp18662995p18683927.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35171-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 28 07:48:30 2008
Return-Path: <java-user-return-35171-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40363 invoked from network); 28 Jul 2008 07:48:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Jul 2008 07:48:30 -0000
Received: (qmail 10552 invoked by uid 500); 28 Jul 2008 07:48:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10516 invoked by uid 500); 28 Jul 2008 07:48:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10505 invoked by uid 99); 28 Jul 2008 07:48:23 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 Jul 2008 00:48:23 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of nageshblore@gmail.com designates 64.233.182.191 as permitted sender)
Received: from [64.233.182.191] (HELO nf-out-0910.google.com) (64.233.182.191)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 Jul 2008 07:47:27 +0000
Received: by nf-out-0910.google.com with SMTP id g16so1265834nfd.15
        for <java-user@lucene.apache.org>; Mon, 28 Jul 2008 00:47:52 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=AVL6mgvJ0QrcB258X+JpdbK4R/RcrBWi+TgL9py5oDw=;
        b=P2hEyixZCEowpH2Y9VCUG6gQS4PBykElsr6DXU4fDh3Wr7E6yuuFu/zG9YEd49O97k
         KdWH/xDo/0uOHrPpVMArZKtjt/F33E72hzpjFf1tSHT3moW3/b7ztZ6n/jiLQWRStYml
         X4W7CltQYAPRLj3vcBsiY7A2PMkmFAczusnjs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=oyeTg5PiaisjNdoww+LLchkWyevLMqRkwU020q3OPm04y/v69+05XXS9BOn43602sj
         2QcRc6bsPWOOnEausGwX/I+JDpj5t3LqjwBJj0vc6hRijMUjPi2/ZU1Neu7yPiHLy+Hg
         OGLENXn0g0KEZIwpG83gRtcyveWymQruB/rMM=
Received: by 10.210.133.2 with SMTP id g2mr5532673ebd.29.1217231272097;
        Mon, 28 Jul 2008 00:47:52 -0700 (PDT)
Received: by 10.210.52.2 with HTTP; Mon, 28 Jul 2008 00:47:52 -0700 (PDT)
Message-ID: <59a485a30807280047o19e3c8e7te720a09534d69173@mail.gmail.com>
Date: Mon, 28 Jul 2008 13:17:52 +0530
From: "=?UTF-8?B?4LKo4LK+4LKX4LOH4LK24LONIOCyuOCzgeCyrOCzjeCysOCyueCzjQ==?= =?UTF-8?B?4LKu4LKj4LON4LKvIChOYWdlc2ggUyk=?=" <nageshblore@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene performance issues..
In-Reply-To: <1217197156.268426903@192.168.1.71>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_12814_2278545.1217231272118"
References: <200807272259.50136@danielnaber.de>
	 <1217197156.268426903@192.168.1.71>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_12814_2278545.1217231272118
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Not an answer to your question. But, have you tried IBM's OmniFind Personal
Email Search ? Excerpt from their site :

Simple keyword or text search is not always effective for quickly finding
what you need. IBM(R) has gone beyond keywords by inventing a fast and
accurate semantic search system for personal e-mail.

IBM OmniFind Personal E-mail Search enables semantic searching by extracting
and organizing concepts and relationships from personal e-mail. Any business
e-mail user who must search in order to accomplish a business purpose will
find this tool invaluable. Customization of semantic concepts and the
ability to share these concepts with colleagues make this tool especially
useful for large enterprise customers.

IBM OmniFind Personal E-mail Search is easy to install and configure and
automatically adjusts to desktop load.


More : http://www.alphaworks.ibm.com/tech/emailsearch

Nagesh

On Mon, Jul 28, 2008 at 3:49 AM, Stu Hood <stuhood@mailtrust.com> wrote:

> Also, keep in mind that optimization is a very disk intense process (and
> therefore slow). It completely rewrites the index, and should only be done
> when you are not expecting the index to change for a while.
>
>
> -----Original Message-----
> From: "Daniel Naber" <lucenelist2007@danielnaber.de>
> Sent: Sunday, July 27, 2008 4:59pm
> To: java-user@lucene.apache.org
> Subject: Re: Lucene performance issues..
>
> On Sonntag, 27. Juli 2008, Mazhar Lateef wrote:
>
> > We have also tried upgrading the lucene version to 2.3 in hope to
> > improve performance but the results were quite the opposite. but from my
> > research on the internet the Lucene version 2.3 is much faster and
> > better so why are we seeing such inconsistency.
>
> Have you checked out these pages?
>
> http://wiki.apache.org/lucene-java/ImproveIndexingSpeed
> http://wiki.apache.org/lucene-java/ImproveSearchingSpeed
>
> Even a large index should be fast, assuming the queries are not
> complicated. Also, with a large index the performance depends on the
> number of matches, i.e. searching for very common terms might be slow.
> Maybe you could post more information about your queries.
>
> Regards
>  Daniel
>
> --
> http://www.danielnaber.de
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_12814_2278545.1217231272118--

From java-user-return-35172-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 28 08:51:49 2008
Return-Path: <java-user-return-35172-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73369 invoked from network); 28 Jul 2008 08:51:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Jul 2008 08:51:49 -0000
Received: (qmail 87141 invoked by uid 500); 28 Jul 2008 08:51:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87116 invoked by uid 500); 28 Jul 2008 08:51:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87105 invoked by uid 99); 28 Jul 2008 08:51:42 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 Jul 2008 01:51:42 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [130.225.24.87] (HELO luna.statsbiblioteket.dk) (130.225.24.87)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 Jul 2008 08:50:45 +0000
Received: from [172.18.249.244] (PC990.sb.statsbiblioteket.dk [172.18.249.244])
 by luna.statsbiblioteket.dk
 (iPlanet Messaging Server 5.2 HotFix 1.16 (built May 14 2003))
 with ESMTP id <0K4P00FY8KF0CT@luna.statsbiblioteket.dk> for
 java-user@lucene.apache.org; Mon, 28 Jul 2008 10:47:24 +0200 (MEST)
Date: Mon, 28 Jul 2008 10:47:24 +0200
From: Toke Eskildsen <te@statsbiblioteket.dk>
Subject: Re: Lucene performance issues..
In-reply-to: <488CDCDA.7060803@cryoserver.com>
To: java-user@lucene.apache.org
Reply-to: te@statsbiblioteket.dk
Message-id: <1217234844.31594.21.camel@PC990.sb.statsbiblioteket.dk>
Organization: Statsbiblioteket
MIME-version: 1.0
X-Mailer: Evolution 2.22.2 (2.22.2-2.fc9)
Content-type: text/plain; charset=UTF-8
Content-transfer-encoding: 8BIT
References: <488CDCDA.7060803@cryoserver.com>
X-Virus-Checked: Checked by ClamAV on apache.org

On Sun, 2008-07-27 at 21:38 +0100, Mazhar Lateef wrote:
>   * email searching
>         o We are creating very large indexes for emails we are
>           processing, the size is upto +150GB for indexes only (not
>           including data content), this we thought would improve
>           search performance since less indexes to open and read from,
>           however the searching taking upto minutes and sometime never
>           returns results

It this with or without warm-up? How many hits does a query typically
return and what do you do with those hits?
锘
> We have also tried upgrading the lucene version to 2.3 in hope to 
> improve performance but the results were quite the opposite. but from my 
> research on the internet the Lucene version 2.3 is much faster and 
> better so why are we seeing such inconsistency.

I encountered the same problem some time ago. It turns out that you get
lower performance if you're using an index from an older version of
Lucene with a newer version. If you haven't done so already, try
converting the old index to the new format.

Another way to go is Solid State Drives. While not cheap in themselves,
the performance-increase might make a purchase favorable. One of the
fine properties of Lucene on SSD, besides the general increase in speed,
if that less warm-up is required. This means that frequent updates of a
large index without a huge performance-hit is attainable. For a 150GB+
index, you would probably want to go for 256GB of storage and split the
index in 64GB chunks, to avoid running out of storage during merge.

We've put some fragmented notes and observations on the subject at
http://wiki.statsbiblioteket.dk/summa/Hardware - I apologize for not
taking the time to polish it, but an important deadline is looming.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35173-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 28 08:55:29 2008
Return-Path: <java-user-return-35173-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76377 invoked from network); 28 Jul 2008 08:55:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Jul 2008 08:55:29 -0000
Received: (qmail 93924 invoked by uid 500); 28 Jul 2008 08:55:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93516 invoked by uid 500); 28 Jul 2008 08:55:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93505 invoked by uid 99); 28 Jul 2008 08:55:22 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 Jul 2008 01:55:22 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 Jul 2008 08:54:25 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KNOVG-0007ES-Mc
	for java-user@lucene.apache.org; Mon, 28 Jul 2008 01:54:50 -0700
Message-ID: <18686430.post@talk.nabble.com>
Date: Mon, 28 Jul 2008 01:54:50 -0700 (PDT)
From: "Karsten F." <karsten-lucene@fiz-technik.de>
To: java-user@lucene.apache.org
Subject: Re: Creating an index from an XML file using Lucene in Java
In-Reply-To: <18682150.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: karsten-lucene@fiz-technik.de
References: <18678779.post@talk.nabble.com> <18679016.post@talk.nabble.com> <18682150.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Hi Fayyaz,

again, this is about SAX-Handler not about lucene.

My understanding of what you want:
1. one lucene document for each SPEECH-Element (already implemented)
2. one lucene document for each SCENE-COMMENTARY-Element (not implemented
yet).

correct?

If yes, you can write
                if(qName.equals("SPEECH") ||
qName.equals("SCENE-COMMENTARY")){
                        doc=new Document();
                }
and

public void endElement(String uri, String localName, String qName) throws
SAXException{
...
else if(qName.equals("SCENE-COMMENTARY")){
 Field lines = new Field(qName, elementBuffer.toString(), Field.Store.YES,
Field.Index.TOKENIZED, Field.TermVector.YES);
 doc.add(lines);
}
...
if(qName.equals("SPEECH") || qName.equals("SCENE-COMMENTARY")){
  indexWriter.addDocument(doc);
}

(instead of "indexWriter.addDocument(doc);" in block of
if(qName.equals("LINES")){ )



Best regards
  Karsten

P.S.:
If you want to learn java: 
I really like 
http://www.java-hamster-modell.de/
possible there is an english version somewhere?


syedfa wrote:
> 
> I think I understand what you are saying, but I was hoping you could
> clarify a little further.  in the start-element method, I have the
> following:
> 
>                 if(qName.equals("SPEECH")){ 
>                         doc=new Document(); 
>                 }
> 
> are you saying that I should add an identical block of code for
> <SCENE-COMMENTARY> as well, and include a similar clause in the endElement
> method as well? i.e.
> 
>                          else if(qName.equals("SCENE-COMMENTARY")){ 
>                                 Field lines = new Field(qName,
> elementBuffer.toString(), Field.Store.YES, Field.Index.TOKENIZED,
> Field.TermVector.YES); 
>                                 lines.setBoost(1.0f); 
>                                 doc.add(lines); 
>                                 indexWriter.addDocument(doc);
>                          } 
> 
> Does it also matter where in the if/else if clauses I mention the
> "SCENE-COMMENTARY" tag?  ie. should I mention it first?  last?  or does
> the order matter?
> 
> Just wondering.
> Thanks again for your prompt reply.
> Sincerely;
> Fayyaz
> 
> P.S.  This is actually a personal project, as I have developed an interest
> in Information Retrieval and simply wanted to work on a creative project
> to help me develop my skills.  :-) 
> 

-- 
View this message in context: http://www.nabble.com/Creating-an-index-from-an-XML-file-using-Lucene-in-Java-tp18678779p18686430.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35174-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 28 09:18:00 2008
Return-Path: <java-user-return-35174-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86181 invoked from network); 28 Jul 2008 09:18:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Jul 2008 09:18:00 -0000
Received: (qmail 24528 invoked by uid 500); 28 Jul 2008 09:17:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24494 invoked by uid 500); 28 Jul 2008 09:17:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24483 invoked by uid 99); 28 Jul 2008 09:17:53 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 Jul 2008 02:17:53 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=SPF_NEUTRAL,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.132.245] (HELO an-out-0708.google.com) (209.85.132.245)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 Jul 2008 09:16:56 +0000
Received: by an-out-0708.google.com with SMTP id c37so5192390anc.49
        for <java-user@lucene.apache.org>; Mon, 28 Jul 2008 02:17:03 -0700 (PDT)
Received: by 10.100.41.8 with SMTP id o8mr7888243ano.82.1217236622490;
        Mon, 28 Jul 2008 02:17:02 -0700 (PDT)
Received: from ?10.17.4.4? ( [72.93.214.93])
        by mx.google.com with ESMTPS id 4sm13625574yxq.8.2008.07.28.02.17.01
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Mon, 28 Jul 2008 02:17:02 -0700 (PDT)
Message-Id: <8A251959-7610-4E3D-B4E0-6C11A08E77E3@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <18683927.post@talk.nabble.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: Query in IndexWriter.deleteDocuments(Term term)
Date: Mon, 28 Jul 2008 05:17:00 -0400
References: <18662995.post@talk.nabble.com> <FD8B25C8-BFEF-4C58-B7DD-4D705063B322@mikemccandless.com> <18665652.post@talk.nabble.com> <C172F4F4-CFDF-4585-9BAF-6AA627B9DD3A@mikemccandless.com> <18666813.post@talk.nabble.com> <18666853.post@talk.nabble.com> <C6E080CD-6D4A-4352-8B87-6EC2B2247B1A@mikemccandless.com> <18683927.post@talk.nabble.com>
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org


Ahh gotchya, OK.

Mike

Ajay Garg wrote:

>
> Thanks Mike.
>
> Yes, I know, 2.3.2 doesn't have commit(). That's why, I asked  
> whether commit
> = close + new IndexWriter, because then I can write a commit() method,
> encapslating close() + new IndexWriter.
>
> Thanks a ton for the prompt replies..
>
> Ajay Garg
>
> Michael McCandless-2 wrote:
>>
>>
>> Ajay Garg wrote:
>>
>>> Pardon me. But will commit() be "code-fully" equal to calling  
>>> close()
>>> followed by reinstantiating IW with create=false ??? If the above is
>>> indeed
>>> true, I can very well begin with my work.
>>
>> Yes, commit() can be seen as achieving exactly the same as close()  
>> and
>> opening a new IndexWriter.
>>
>>> I ask this, because I plan to work within a fortnight, and 2.4 is
>>> still
>>> someway away, and the primary reason I am porting to 2.3.2 (from
>>> 2.0.0), is
>>> to have explicit commit() control in our hands.
>>
>> OK but 2.3.2 doesn't have commit yet.
>>
>> Mike
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>
> -- 
> View this message in context: http://www.nabble.com/Query-in-IndexWriter.deleteDocuments%28Term-term%29-tp18662995p18683927.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35175-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 28 09:20:38 2008
Return-Path: <java-user-return-35175-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 87038 invoked from network); 28 Jul 2008 09:20:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Jul 2008 09:20:38 -0000
Received: (qmail 29310 invoked by uid 500); 28 Jul 2008 09:20:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29281 invoked by uid 500); 28 Jul 2008 09:20:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29270 invoked by uid 99); 28 Jul 2008 09:20:31 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 Jul 2008 02:20:31 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.146.177] (HELO wa-out-1112.google.com) (209.85.146.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 Jul 2008 09:19:36 +0000
Received: by wa-out-1112.google.com with SMTP id l24so3279443waf.11
        for <java-user@lucene.apache.org>; Mon, 28 Jul 2008 02:19:45 -0700 (PDT)
Received: by 10.115.76.1 with SMTP id d1mr4590061wal.207.1217236785147;
        Mon, 28 Jul 2008 02:19:45 -0700 (PDT)
Received: from ?10.17.4.4? ( [72.93.214.93])
        by mx.google.com with ESMTPS id 4sm13692935yxd.2.2008.07.28.02.19.44
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Mon, 28 Jul 2008 02:19:44 -0700 (PDT)
From: Michael McCandless <lucene@mikemccandless.com>
To: general@lucene.apache.org
In-Reply-To: <006b01c8f065$b39049c0$0308a8c0@WangJianxin>
Subject: Re: How to use lucene for high search performance ?
X-Priority: 3
References: <001701c8ed74$1c781480$0308a8c0@WangJianxin> <A3A4163E-E09E-4A05-BFC8-70A81EBCA2F3@mikemccandless.com> <002401c8ed79$26610f60$0308a8c0@WangJianxin> <4AA55872-F1ED-41C9-920E-616CF2C02847@mikemccandless.com> <006b01c8f065$b39049c0$0308a8c0@WangJianxin>
Message-Id: <FDEA28F1-9344-4F2B-A925-311883928069@mikemccandless.com>
Content-Type: text/plain; charset=GB2312; format=flowed; delsp=yes
Content-Transfer-Encoding: quoted-printable
Mime-Version: 1.0 (Apple Message framework v926)
Date: Mon, 28 Jul 2008 05:19:43 -0400
Cc: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org


Yes you can, and that should be fast.

Another thing to try is an SSD -- look at the "Lucene performance =20
issues" thread on java-user.

Mike

On Jul 27, 2008, at 11:54 PM, =CD=F5=BD=A8=D0=C2 wrote:

> Thanks a lot.
>
> I have an idea, Can I use lucene on a 64bits VM?
> In the condition, I can load all index files to ram. Then no io =20
> operation, I can execute concurrent search in thread pool.
>
> Its performance will be better?
>
>
>
> ----- Original Message -----
> From: "Michael McCandless" <lucene@mikemccandless.com>
> To: <general@lucene.apache.org>
> Cc: <java-user@lucene.apache.org>
> Sent: Saturday, July 26, 2008 4:59 AM
> Subject: Re: How to use lucene for high search performance ?
>
>
>
> Let's move this thread to java-user (CC'd).
>
> =CD=F5=BD=A8=D0=C2 wrote:
>
>> Thank you.
>>
>> If the index files are very big(10G), I cannot load them to ram in
>> one process.
>
> Ahh OK.
>
>> Shoud I use MutilSearcher to load index files with serval processes?
>> How about its performance?
>
> MultiSearcher alone doesn't really scale up -- it just lets you
> combine the results of many Searchables.
>
> Maybe you mean ParallelMlultiSearcher?  That class uses a separate
> thread to search each Searchable, so if you are on a multi core/cpu
> machine that should give a net reduction in latency of each search
> (though I don't have any experience here!).
>
>> by the way, I think only .frq and .tis files need to load in ram.
>> And it can save some ram.
>
> You mean you don't use any positions information?  Really the OS
> should do the right thing for you -- it should only cache into its IO
> cache those files that you actually use after which searches should be
> fast.
>
> Mike
>
>>
>> roy
>>
>> ----- Original Message -----
>> From: "Michael McCandless" <lucene@mikemccandless.com>
>> To: <general@lucene.apache.org>
>> Sent: Thursday, July 24, 2008 6:09 PM
>> Subject: Re: How to use lucene for high search performance ?
>>
>>
>>
>> Try InstantiatedIndexWriter/Reader (under contrib/instantiated)?
>>
>> It consumes more RAM than the RAMDirectory approach, but is faster
>> performance.
>>
>> Mike
>>
>> PS -- this sort of question should go to java-user in the future.
>>
>> =CD=F5=BD=A8=D0=C2 wrote:
>>
>>>
>>> Hi,
>>>  If I use lucene to execute many search requests at one time, the
>>> io operation will be the bottleneck of the performance.
>>>  So I use RAMDirectory to avoid io operation.
>>>  But I found RAMDirectory cannot raise the performance much if the
>>> index is big( about 1.2G).
>>>  Could anyone give me any advice to raise the performance for
>>> concurrent search operation?
>>>  Thanks.
>>>
>>> roy


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35176-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 28 09:34:09 2008
Return-Path: <java-user-return-35176-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94663 invoked from network); 28 Jul 2008 09:34:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Jul 2008 09:34:08 -0000
Received: (qmail 40245 invoked by uid 500); 28 Jul 2008 09:34:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40220 invoked by uid 500); 28 Jul 2008 09:34:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40208 invoked by uid 99); 28 Jul 2008 09:34:02 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 Jul 2008 02:34:02 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [66.249.82.233] (HELO wx-out-0506.google.com) (66.249.82.233)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 Jul 2008 09:33:06 +0000
Received: by wx-out-0506.google.com with SMTP id h29so1530234wxd.20
        for <java-user@lucene.apache.org>; Mon, 28 Jul 2008 02:33:30 -0700 (PDT)
Received: by 10.70.73.12 with SMTP id v12mr6486303wxa.57.1217237610058;
        Mon, 28 Jul 2008 02:33:30 -0700 (PDT)
Received: from ?10.17.4.4? ( [72.93.214.93])
        by mx.google.com with ESMTPS id h11sm12847042wxd.24.2008.07.28.02.33.29
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Mon, 28 Jul 2008 02:33:29 -0700 (PDT)
Message-Id: <8A09FF2F-EF99-4362-982F-40C557EC73FC@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <1217197156.268426903@192.168.1.71>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: Lucene performance issues..
X-Priority: 3 (Normal)
Date: Mon, 28 Jul 2008 05:33:28 -0400
References: <200807272259.50136@danielnaber.de> <1217197156.268426903@192.168.1.71>
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org


Perhaps one thing to try is a partial optimize  
(IndexWriter.optimize(int maxNumSegments)).  It makes optimize faster,  
but searches may run slower than a full optimize.

EG, optimize(5) will reduce index to <= 5 segments.

Mike

Stu Hood wrote:

> Also, keep in mind that optimization is a very disk intense process  
> (and therefore slow). It completely rewrites the index, and should  
> only be done when you are not expecting the index to change for a  
> while.
>
>
> -----Original Message-----
> From: "Daniel Naber" <lucenelist2007@danielnaber.de>
> Sent: Sunday, July 27, 2008 4:59pm
> To: java-user@lucene.apache.org
> Subject: Re: Lucene performance issues..
>
> On Sonntag, 27. Juli 2008, Mazhar Lateef wrote:
>
>> We have also tried upgrading the lucene version to 2.3 in hope to
>> improve performance but the results were quite the opposite. but  
>> from my
>> research on the internet the Lucene version 2.3 is much faster and
>> better so why are we seeing such inconsistency.
>
> Have you checked out these pages?
>
> http://wiki.apache.org/lucene-java/ImproveIndexingSpeed
> http://wiki.apache.org/lucene-java/ImproveSearchingSpeed
>
> Even a large index should be fast, assuming the queries are not
> complicated. Also, with a large index the performance depends on the
> number of matches, i.e. searching for very common terms might be slow.
> Maybe you could post more information about your queries.
>
> Regards
> Daniel
>
> -- 
> http://www.danielnaber.de
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35177-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 28 09:56:38 2008
Return-Path: <java-user-return-35177-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8561 invoked from network); 28 Jul 2008 09:56:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Jul 2008 09:56:37 -0000
Received: (qmail 60446 invoked by uid 500); 28 Jul 2008 09:56:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60410 invoked by uid 500); 28 Jul 2008 09:56:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60399 invoked by uid 99); 28 Jul 2008 09:56:29 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 Jul 2008 02:56:29 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.132.250] (HELO an-out-0708.google.com) (209.85.132.250)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 Jul 2008 09:55:31 +0000
Received: by an-out-0708.google.com with SMTP id c37so5209935anc.49
        for <java-user@lucene.apache.org>; Mon, 28 Jul 2008 02:55:39 -0700 (PDT)
Received: by 10.100.131.3 with SMTP id e3mr3606839and.17.1217238939102;
        Mon, 28 Jul 2008 02:55:39 -0700 (PDT)
Received: from ?10.17.4.4? ( [72.93.214.93])
        by mx.google.com with ESMTPS id c27sm17898697ana.37.2008.07.28.02.55.38
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Mon, 28 Jul 2008 02:55:38 -0700 (PDT)
Message-Id: <8E27A4A4-31F3-48DD-B791-8B74E20463D7@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <c68e39170807231730v5ce0ffc5w2e6b942f2a7574fb@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: Lucene Search Error: Java.io.IOException: Bad file descriptor
Date: Mon, 28 Jul 2008 05:55:37 -0400
References: <48875A01.2070504@stimulussoft.com> <48875A5A.1070807@informatics.jax.org> <48875D63.8000006@stimulussoft.com> <48875F5F.30203@stimulussoft.com> <488760A0.8050303@stimulussoft.com> <1190C5F3-FAE6-4CC7-8CED-B0247DED9ED8@mikemccandless.com> <4887C310.2030300@stimulussoft.com> <c68e39170807231730v5ce0ffc5w2e6b942f2a7574fb@mail.gmail.com>
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org


The description here sounds exactly like what we were seeing before  
LUCENE-669 was fixed -- from his writeup it doesn't look like he  
tested with Lucene 2.2 to see if the problem went away.  I think it  
very well may.

That said, as a precaution, maybe we should no longer call close() on  
our file descriptors in the finalizers in FSIndex{Input,Output}?

Mike

On Jul 23, 2008, at 8:30 PM, Yonik Seeley wrote:

> On Wed, Jul 23, 2008 at 7:47 PM, Jamie <jamie@stimulussoft.com> wrote:
>> Could this error be the result of the bad file descriptor close bug  
>> as
>> described in
>> http://256.com/gray/docs/misc/java_bad_file_descriptor_close_bug.shtml 
>> .
>
> Hmmm, that's an interesting read.
> Seems like maybe we should kill most of the remaining finalizers we
> use... they are really more trouble than they are worth.
>
> -Yonik
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35178-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 28 14:08:41 2008
Return-Path: <java-user-return-35178-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44669 invoked from network); 28 Jul 2008 14:08:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Jul 2008 14:08:41 -0000
Received: (qmail 77198 invoked by uid 500); 28 Jul 2008 14:08:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76959 invoked by uid 500); 28 Jul 2008 14:08:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76948 invoked by uid 99); 28 Jul 2008 14:08:33 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 Jul 2008 07:08:33 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 Jul 2008 14:07:37 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KNTON-0001MR-BY
	for java-user@lucene.apache.org; Mon, 28 Jul 2008 07:08:03 -0700
Message-ID: <18689216.post@talk.nabble.com>
Date: Mon, 28 Jul 2008 07:08:03 -0700 (PDT)
From: syedfa <fayyazuddin@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Creating an index from an XML file using Lucene in Java
In-Reply-To: <18686430.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: fayyazuddin@gmail.com
References: <18678779.post@talk.nabble.com> <18679016.post@talk.nabble.com> <18682150.post@talk.nabble.com> <18686430.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Thanks Karsten for your reply.  I will implement your solution tonight,
however I did have a quick follow up question.  I understand how you are
implementing the solution for the "SCENE-COMMENTARY" tag, however because at
present I am working with the "LINES" tag, shouldn't I continue using that
instead of the "SPEECH" element?  Any reason why I should switch?  Just
wondering.  I will try both approaches tonight and let you know how it goes.

Thanks again for your help, I really appreciate it.

Take care.
Sincerely;
Fayyaz



Karsten F. wrote:
> 
> Hi Fayyaz,
> 
> again, this is about SAX-Handler not about lucene.
> 
> My understanding of what you want:
> 1. one lucene document for each SPEECH-Element (already implemented)
> 2. one lucene document for each SCENE-COMMENTARY-Element (not implemented
> yet).
> 
> correct?
> 
> If yes, you can write
>                 if(qName.equals("SPEECH") ||
> qName.equals("SCENE-COMMENTARY")){
>                         doc=new Document();
>                 }
> and
> 
> public void endElement(String uri, String localName, String qName) throws
> SAXException{
> ...
> else if(qName.equals("SCENE-COMMENTARY")){
>  Field lines = new Field(qName, elementBuffer.toString(), Field.Store.YES,
> Field.Index.TOKENIZED, Field.TermVector.YES);
>  doc.add(lines);
> }
> ...
> if(qName.equals("SPEECH") || qName.equals("SCENE-COMMENTARY")){
>   indexWriter.addDocument(doc);
> }
> 
> (instead of "indexWriter.addDocument(doc);" in block of
> if(qName.equals("LINES")){ )
> 
> 
> 
> Best regards
>   Karsten
> 
> P.S.:
> If you want to learn java: 
> I really like 
> http://www.java-hamster-modell.de/
> possible there is an english version somewhere?
> 
> 
> syedfa wrote:
>> 
>> I think I understand what you are saying, but I was hoping you could
>> clarify a little further.  in the start-element method, I have the
>> following:
>> 
>>                 if(qName.equals("SPEECH")){ 
>>                         doc=new Document(); 
>>                 }
>> 
>> are you saying that I should add an identical block of code for
>> <SCENE-COMMENTARY> as well, and include a similar clause in the
>> endElement method as well? i.e.
>> 
>>                          else if(qName.equals("SCENE-COMMENTARY")){ 
>>                                 Field lines = new Field(qName,
>> elementBuffer.toString(), Field.Store.YES, Field.Index.TOKENIZED,
>> Field.TermVector.YES); 
>>                                 lines.setBoost(1.0f); 
>>                                 doc.add(lines); 
>>                                 indexWriter.addDocument(doc);
>>                          } 
>> 
>> Does it also matter where in the if/else if clauses I mention the
>> "SCENE-COMMENTARY" tag?  ie. should I mention it first?  last?  or does
>> the order matter?
>> 
>> Just wondering.
>> Thanks again for your prompt reply.
>> Sincerely;
>> Fayyaz
>> 
>> P.S.  This is actually a personal project, as I have developed an
>> interest in Information Retrieval and simply wanted to work on a creative
>> project to help me develop my skills.  :-) 
>> 
> 
> 

-- 
View this message in context: http://www.nabble.com/Creating-an-index-from-an-XML-file-using-Lucene-in-Java-tp18678779p18689216.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35179-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 28 14:40:19 2008
Return-Path: <java-user-return-35179-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59024 invoked from network); 28 Jul 2008 14:40:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Jul 2008 14:40:19 -0000
Received: (qmail 15908 invoked by uid 500); 28 Jul 2008 14:40:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15877 invoked by uid 500); 28 Jul 2008 14:40:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15866 invoked by uid 99); 28 Jul 2008 14:40:13 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 Jul 2008 07:40:13 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [63.87.234.181] (HELO US1-IIEX1.IICORP.DOM) (63.87.234.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 Jul 2008 14:39:19 +0000
Received: from US1-IIEX1.IICORP.DOM ([10.2.11.6]) by US1-IIEX1.IICORP.DOM
 ([10.2.11.6]) with mapi; Mon, 28 Jul 2008 10:37:41 -0400
From: Robert Stewart <Robert.Stewart@INFONGEN.COM>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Mon, 28 Jul 2008 10:36:35 -0400
Subject: RE: Fastest way to get just the "bits" of matching documents
Thread-Topic: Fastest way to get just the "bits" of matching documents
Thread-Index: AcjvWFAy6iv8+vZ1Q5O3ubc+m1nfowBZgidQ
Message-ID: <36B4EF9511887240A973A93E7878B0560A077E83AD@US1-IIEX1.IICORP.DOM>
References: <925729.49551.qm@web27107.mail.ukl.yahoo.com>
 <36B4EF9511887240A973A93E7878B0560A077E826C@US1-IIEX1.IICORP.DOM>
 <200807262147.56463.paul.elschot@xs4all.nl>
In-Reply-To: <200807262147.56463.paul.elschot@xs4all.nl>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
MIME-Version: 1.0
X-Virus-Checked: Checked by ClamAV on apache.org

QlRXLCB3ZSB1c2UgTHVjZW5lIC5ORVQgbm90IEphdmEgY3VycmVudGx5LCBzbyB2ZXJzaW9uIGlz
IDEuOS4gIFVuZm9ydHVuYXRlbHkgd2UgZG9u4oCZdCBoYXZlICJzZXRBbGxvd0RvY3NPdXRPZk9y
ZGVyIiBidXQgZG8gaGF2ZSAidXNlU2NvcmVyMTQiIHdoaWNoIGlzIGFsbW9zdCB0aGUgc2FtZSB0
aGluZyBmb3Igc29tZSBxdWVyaWVzLiBJIGRpZCBub3Qgc2VlIG11Y2ggaW1wcm92ZW1lbnQgYW5k
IGZvciBvdGhlciBxdWVyaWVzIGl0IHdhcyBzbG93ZXIuICBXZSBhcmUgc3R1Y2sgb24gMS45IGR1
ZSBzb21lIHN0YWJpbGl0eSBpc3N1ZXMgKG1lbW9yeSBsZWFrcz8pIGluIDIuMCsgb2YgdGhlIC5O
RVQgcG9ydC4NCg0KV2hhdCBJIGRpZCBmaW5hbGx5LCB3YXMgcHJlLWxvYWQgZmllbGRzIHdoaWNo
IGhhdmUgYSBsaW1pdGVkIHNldCBvZiB1bmlxdWUgdmFsdWVzIGludG8gbWVtb3J5ICh1c2luZyBC
aXRBcnJheSBmb3IgPj0gbnVtX2RvY3MvOCwgYW5kIFNvcnRlZFZJbnRMaXN0IGZvciA8IG51bV9k
b2NzLzgpLiAgVGhlbiBJICJvcHRpbWl6ZSIgaW5jb21pbmcgcXVlcmllcyBieSByZXBsYWNpbmcg
aW5zdGFuY2VzIG9mIFRlcm1RdWVyeSBmb3IgdGhvc2UgZmllbGRzIHdpdGggbXkgb3duICJDYWNo
ZWRUZXJtUXVlcnkiIG9iamVjdHMgd2hpY2ggaGF2ZSBjdXN0b20gd2VpZ2h0IGFuZCBzY29yZXIg
Y2xhc3NlcyB3aGljaCB1c2UgdGhlIGNhY2hlZCBmaWVsZCBkYXRhLg0KDQoNCi0tLS0tT3JpZ2lu
YWwgTWVzc2FnZS0tLS0tDQpGcm9tOiBQYXVsIEVsc2Nob3QgW21haWx0bzpwYXVsLmVsc2Nob3RA
eHM0YWxsLm5sXQ0KU2VudDogU2F0dXJkYXksIEp1bHkgMjYsIDIwMDggMzo0OCBQTQ0KVG86IGph
dmEtdXNlckBsdWNlbmUuYXBhY2hlLm9yZw0KU3ViamVjdDogUmU6IEZhc3Rlc3Qgd2F5IHRvIGdl
dCBqdXN0IHRoZSAiYml0cyIgb2YgbWF0Y2hpbmcgZG9jdW1lbnRzDQoNCk9wIFRodXJzZGF5IDI0
IEp1bHkgMjAwOCAyMzowMDozMyBzY2hyZWVmIFJvYmVydCBTdGV3YXJ0Og0KPiBRdWVyaWVzIGFy
ZSB2ZXJ5IGNvbXBsZXggaW4gb3VyIGNhc2UsIHNvbWUgaGF2ZSB1cCB0byAxMDAgb3IgbW9yZQ0K
PiBjbGF1c2VzIChvdmVyIHNldmVyYWwgZmllbGRzKSwgaW5jbHVkaW5nIGRpc2p1bmN0aW9ucyBh
bmQgcHJvaGliaXRlZA0KPiBjbGF1c2VzLg0KDQpPdGhlciB0aGFuIHRoZSBlYXJsaWVyIGFkdmlj
ZSwgZGlkIHlvdSB0cnkgc2V0QWxsb3dEb2NzT3V0T2ZPcmRlcigpID8NCg0KUmVnYXJkcywNClBh
dWwgRWxzY2hvdA0KDQotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NClRvIHVuc3Vic2NyaWJlLCBlLW1haWw6IGphdmEt
dXNlci11bnN1YnNjcmliZUBsdWNlbmUuYXBhY2hlLm9yZw0KRm9yIGFkZGl0aW9uYWwgY29tbWFu
ZHMsIGUtbWFpbDogamF2YS11c2VyLWhlbHBAbHVjZW5lLmFwYWNoZS5vcmcNCg0K


From java-user-return-35180-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 28 17:32:26 2008
Return-Path: <java-user-return-35180-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 984 invoked from network); 28 Jul 2008 17:32:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Jul 2008 17:32:26 -0000
Received: (qmail 55224 invoked by uid 500); 28 Jul 2008 17:32:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55189 invoked by uid 500); 28 Jul 2008 17:32:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55178 invoked by uid 99); 28 Jul 2008 17:32:19 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 Jul 2008 10:32:19 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 Jul 2008 17:31:22 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KNWZX-0000W5-Qs
	for java-user@lucene.apache.org; Mon, 28 Jul 2008 10:31:47 -0700
Message-ID: <18695513.post@talk.nabble.com>
Date: Mon, 28 Jul 2008 10:31:47 -0700 (PDT)
From: syedfa <fayyazuddin@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Creating an index from an XML file using Lucene in Java
In-Reply-To: <18686430.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: fayyazuddin@gmail.com
References: <18678779.post@talk.nabble.com> <18679016.post@talk.nabble.com> <18682150.post@talk.nabble.com> <18686430.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Hi Karsten:

I have another follow-up question for you.  Once I create the index the way
you suggested, how would I modify my code to search it?


At present, I have the following code:

        Analyzer analyser = new StandardAnalyzer(); 
        Query parser=new QueryParser("LINES", analyser).parse(q); 
        long start=new Date().getTime(); 
        Hits hits=is.search(parser); 
        long end=new Date().getTime(); 
        QueryScorer scorer = new QueryScorer(parser); 

Which I am using in my search() method from my Searcher class.  This method
returns a List that holds javaBean objects which hold the results of each
hit.  The difference here is that I will be searching through another
element, whose attributes are slightly different, eg. if a hit is found in
the <SCENE-COMMENTARY> element, I won't be providing a reference to a
<SPEAKER>, but rather, just the Act, and the Scene.  I get the feeling that
based on the above code, that I would need to create another Query object to
hold the results found in the <SCENE-COMMENTARY> element.  Am I right, or is
there a way around this so that I could use the same Query object to
accomplish this?  Would I need to create a new JavaBean object to store
these results?  Finally, would I be able to display these results to the
user in order of strongest match, to least strongest?  At the moment my
results are created and presented to the user as follows:

for(int i=0; i<hits.length(); i++){ 
        Document doc=hits.doc(i); 
        String lns = doc.get("LINES"); 
        TokenStream lines = analyser.tokenStream("LINES", new
StringReader(lns)); 
        CachingTokenFilter filter = new CachingTokenFilter(lines); 
        String highlightedLines = highlighter.getBestFragment(filter, lns); 
        filter.reset(); 
        String highlight = high.getBestFragment(filter, lns); 
        SearchResult resultBean = new SearchResult(); 
        resultBean.setReference(hits.doc(i).get("REFERENCE")); 
        resultBean.setNarrator(hits.doc(i).get("SPEAKER")); 
        resultBean.setHitResult(highlight); 
        resultBean.setQuote(highlightedLines); 
        searchResult.add(resultBean); 
        System.out.println(resultBean.getReference()); 
        System.out.println(resultBean.getNarrator()); 
        System.out.println(resultBean.getHitResult()); 
        System.out.println(""); 
        System.out.println(resultBean.getQuote()); 

Thanks so much once again for your time and patience Karsten, I really do
appreciate it.

Take care.
Sincerely;
Fayyaz


Karsten F. wrote:
> 
> Hi Fayyaz,
> 
> again, this is about SAX-Handler not about lucene.
> 
> My understanding of what you want:
> 1. one lucene document for each SPEECH-Element (already implemented)
> 2. one lucene document for each SCENE-COMMENTARY-Element (not implemented
> yet).
> 
> correct?
> 
> If yes, you can write
>                 if(qName.equals("SPEECH") ||
> qName.equals("SCENE-COMMENTARY")){
>                         doc=new Document();
>                 }
> and
> 
> public void endElement(String uri, String localName, String qName) throws
> SAXException{
> ...
> else if(qName.equals("SCENE-COMMENTARY")){
>  Field lines = new Field(qName, elementBuffer.toString(), Field.Store.YES,
> Field.Index.TOKENIZED, Field.TermVector.YES);
>  doc.add(lines);
> }
> ...
> if(qName.equals("SPEECH") || qName.equals("SCENE-COMMENTARY")){
>   indexWriter.addDocument(doc);
> }
> 
> (instead of "indexWriter.addDocument(doc);" in block of
> if(qName.equals("LINES")){ )
> 
> 
> 
> Best regards
>   Karsten
> 
> P.S.:
> If you want to learn java: 
> I really like 
> http://www.java-hamster-modell.de/
> possible there is an english version somewhere?
> 
> 
> syedfa wrote:
>> 
>> I think I understand what you are saying, but I was hoping you could
>> clarify a little further.  in the start-element method, I have the
>> following:
>> 
>>                 if(qName.equals("SPEECH")){ 
>>                         doc=new Document(); 
>>                 }
>> 
>> are you saying that I should add an identical block of code for
>> <SCENE-COMMENTARY> as well, and include a similar clause in the
>> endElement method as well? i.e.
>> 
>>                          else if(qName.equals("SCENE-COMMENTARY")){ 
>>                                 Field lines = new Field(qName,
>> elementBuffer.toString(), Field.Store.YES, Field.Index.TOKENIZED,
>> Field.TermVector.YES); 
>>                                 lines.setBoost(1.0f); 
>>                                 doc.add(lines); 
>>                                 indexWriter.addDocument(doc);
>>                          } 
>> 
>> Does it also matter where in the if/else if clauses I mention the
>> "SCENE-COMMENTARY" tag?  ie. should I mention it first?  last?  or does
>> the order matter?
>> 
>> Just wondering.
>> Thanks again for your prompt reply.
>> Sincerely;
>> Fayyaz
>> 
>> P.S.  This is actually a personal project, as I have developed an
>> interest in Information Retrieval and simply wanted to work on a creative
>> project to help me develop my skills.  :-) 
>> 
> 
> 

-- 
View this message in context: http://www.nabble.com/Creating-an-index-from-an-XML-file-using-Lucene-in-Java-tp18678779p18695513.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35181-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 28 18:00:41 2008
Return-Path: <java-user-return-35181-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 18495 invoked from network); 28 Jul 2008 18:00:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Jul 2008 18:00:39 -0000
Received: (qmail 85745 invoked by uid 500); 28 Jul 2008 18:00:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85716 invoked by uid 500); 28 Jul 2008 18:00:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85705 invoked by uid 99); 28 Jul 2008 18:00:32 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 Jul 2008 11:00:32 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of dragon-fly999@hotmail.com designates 65.55.111.106 as permitted sender)
Received: from [65.55.111.106] (HELO blu0-omc2-s31.blu0.hotmail.com) (65.55.111.106)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 Jul 2008 17:59:35 +0000
Received: from BLU149-W70 ([65.55.111.71]) by blu0-omc2-s31.blu0.hotmail.com with Microsoft SMTPSVC(6.0.3790.3959);
	 Mon, 28 Jul 2008 11:00:00 -0700
Message-ID: <BLU149-W70E21A40B150D13EBB9733B9830@phx.gbl>
Content-Type: multipart/alternative;
	boundary="_26645a6c-c688-4486-9600-3e127170895b_"
X-Originating-IP: [137.103.1.90]
From: Dragon Fly <dragon-fly999@hotmail.com>
To: <java-user@lucene.apache.org>
Subject: Index optimization ...
Date: Mon, 28 Jul 2008 14:00:01 -0400
Importance: Normal
MIME-Version: 1.0
X-OriginalArrivalTime: 28 Jul 2008 18:00:00.0690 (UTC) FILETIME=[C1051920:01C8F0DB]
X-Virus-Checked: Checked by ClamAV on apache.org

--_26645a6c-c688-4486-9600-3e127170895b_
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

I'd like to shorten the time it takes to optimize my index and am willing t=
o sacrifice search and indexing performance.  Which parameters (e.g. merge =
factor) should I change? Thank you.

_________________________________________________________________
Stay in touch when you're away with Windows Live Messenger.
http://www.windowslive.com/messenger/overview.html?ocid=3DTXT_TAGLM_WL_mess=
enger2_072008=

--_26645a6c-c688-4486-9600-3e127170895b_--

From java-user-return-35182-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 29 01:36:35 2008
Return-Path: <java-user-return-35182-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63271 invoked from network); 29 Jul 2008 01:36:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Jul 2008 01:36:34 -0000
Received: (qmail 82241 invoked by uid 500); 29 Jul 2008 01:36:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82214 invoked by uid 500); 29 Jul 2008 01:36:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 95910 invoked by uid 99); 28 Jul 2008 11:53:41 -0000
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of kumaranjove@gmail.com designates 64.233.182.190 as permitted sender)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type;
        bh=FSf2uHPVzVuH831gdO5tL+d8SOjpiu/BgxNu2otQEoE=;
        b=uKinNgOiu3V5g9IlfbMyv2sxXLfitjp2604ywGwGeq3a5paiIjznvDdnoNaXBtznO+
         M3LdHhrEv2bvjOGwqhZLajMYoZrl6SbbTEpWsA7l090rqXMDp0JOVSnJ7WYFSjythwRQ
         HQAHO9f4nmEe2QZPCfyQirQVkGKfBVM3nJBuQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=J3CUeAT9PIEuADobyg5clXbiKoazez1urdj20x9cXbaxFNgCUQdCSlh4hL34wdksGr
         lZhnG7L7ZbCWpc/4ZGxX903+O04rc9XfJMckQ0+ygARp3Iarg1foopg/STpztoc+xEIW
         Ma6iwtPkeOjw+SgMNXRWTQo2onHu6U/ApBFsY=
Message-ID: <21e234c60807280453k25562d66jbbe15a4155f93cdd@mail.gmail.com>
Date: Mon, 28 Jul 2008 17:23:11 +0530
From: "senthil kumaran" <kumaranjove@gmail.com>
To: java-user@lucene.apache.org
Subject: How to get unique values for field1 where search is on field2?
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_10711_8716973.1217245991094"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_10711_8716973.1217245991094
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi,
    I've indexed Book Title,Author Name,Contents and some other fields.
Previously I gave option to search string in any of those fields and I
displayed results from getting fields "Title","Author Name","Contents" from
hits resulted docs.
    Now I want to display "Title" & "Author Name" list which have search
string in "Contents" field.

     For example Title                 : The J2EE Tutorial
                          Author Name   : Stephanie Bodoff
                          Contents          : Enterprise Beans,A
Message-Driven Bean Example .............etc............

                          Title                 : The Advanced J2EE
                          Author Name   : Stephanie Bodoff
                          Contents          : A Session Bean Example,
.............etc............

                          Title                 : Guide to Computer Security
Management
                          Author Name   : Karen Kent
                          Contents          : Management
Infrastructure,Management Planning,Management Operational Processes Example
.............etc............


    If I search the string      Example , it'll return 3 docs. I want those
3 Contents values with Title value , but I don't need duplicated Author
Names (need unique details). So I need 2 Author Name fields.
    To achieve this I've used 2 lucene queries
                     1.query with Contents:example & get only Title and
Contents fields for that search string.
                     2. same query with DuplicateFilter("Author Name") and
get only unique Author Names.

    Is there any other ways available during indexing or searching?

Thanks
RSK

------=_Part_10711_8716973.1217245991094--

From java-user-return-35183-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 29 01:53:44 2008
Return-Path: <java-user-return-35183-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80754 invoked from network); 29 Jul 2008 01:53:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Jul 2008 01:53:44 -0000
Received: (qmail 93688 invoked by uid 500); 29 Jul 2008 01:53:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93659 invoked by uid 500); 29 Jul 2008 01:53:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93648 invoked by uid 99); 29 Jul 2008 01:53:37 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 Jul 2008 18:53:37 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lgastako@gmail.com designates 74.125.92.26 as permitted sender)
Received: from [74.125.92.26] (HELO qw-out-2122.google.com) (74.125.92.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Jul 2008 01:52:43 +0000
Received: by qw-out-2122.google.com with SMTP id 5so375358qwi.53
        for <java-user@lucene.apache.org>; Mon, 28 Jul 2008 18:53:09 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:sender
         :to:subject:mime-version:content-type:x-google-sender-auth;
        bh=SUXOASi5CTaC3UPIFaYBMIMRIWKwOFi6j3A9X/2pCro=;
        b=h8ALdY6vOn25Duki9wWVnZ0SLQlNX/iBcH2jvtFMjy17cW+4EAwqm5NZm5DdU2Dy3l
         OdXlHMDwF/fm62aWz1Kvy+0wnzJUMmC73UB1xQ7s8m0iiP+BYc1nBmvPp+MikktKDLNG
         njlUW3dWSy0gQ/NW2OeH1CVexU6jWHBr8d2iw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:sender:to:subject:mime-version:content-type
         :x-google-sender-auth;
        b=ISVgYfHIrU4AT5X4iAb/mtFyrl9E9hoiu7lTwbmlCrq0ZclA+/D8KxpBcJN7e31wf4
         LK1MYUAtI0ur8CJviW12PzKTRltrCzB1AKRp/M2ZCDPT4ghRhssKo4pB3QC/N+fjW/yz
         vX1SQxPtBtng9E+8Jtig64K0SF6WokL6KaaP8=
Received: by 10.214.184.3 with SMTP id h3mr983016qaf.50.1217296388951;
        Mon, 28 Jul 2008 18:53:08 -0700 (PDT)
Received: by 10.150.219.11 with HTTP; Mon, 28 Jul 2008 18:53:08 -0700 (PDT)
Message-ID: <6f7ea56f0807281853k1f898f5atc6beaf209e03f609@mail.gmail.com>
Date: Mon, 28 Jul 2008 18:53:08 -0700
From: "John Evans" <john@jpevans.com>
Sender: lgastako@gmail.com
To: java-user@lucene.apache.org
Subject: Using lucene as a database... good idea or bad idea?
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_42459_16010434.1217296388949"
X-Google-Sender-Auth: 4878bc11850272ea
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_42459_16010434.1217296388949
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi All,

I have successfully used Lucene in the "tradtiional" way to provide
full-text search for various websites.  Now I am tasked with developing a
data-store to back a web crawler.  The crawler can be configured to retrieve
arbitrary fields from arbitrary pages, so the result is that each document
may have a random assortment of fields.  It seems like Lucene may be a
natural fit for this scenario since you can obviously add arbitrary fields
to each document and you can store the actually data in the database. I've
done some research to make sure that it would meet all of our individual
requirements (that we can iterate over documents, update (delete/replace)
documents, etc.) and everything looks good.  I've also seen a couple of
references around the net to other people trying similar things... however,
I know it's not meant to be used this way, so I thought I would post here
and ask for guidance?  Has anyone done something similar?  Is there any
specific reason to think this is a bad idea?

The one thing that I am least certain about his how well it will scale.  We
may reach the point where we have tens of millions of documents and a high
percentage of those documents may be relatively large (10k-50k each).  We
actually would NOT be expecting/needing Lucene's normal extreme fast text
search times for this, but we would need reasonable times for adding new
documents to the index, retrieving documents by ID (for iterating over all
documents), optimizing the index after a series of changes, etc.

Any advice/input/theories anyone can contribute would be greatly
appreciated.

Thanks,
-
John

------=_Part_42459_16010434.1217296388949--

From java-user-return-35184-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 29 02:27:42 2008
Return-Path: <java-user-return-35184-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1861 invoked from network); 29 Jul 2008 02:27:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Jul 2008 02:27:42 -0000
Received: (qmail 13748 invoked by uid 500); 29 Jul 2008 02:27:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13716 invoked by uid 500); 29 Jul 2008 02:27:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13705 invoked by uid 99); 29 Jul 2008 02:27:35 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 Jul 2008 19:27:35 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [65.89.232.7] (HELO thebluezone.net) (65.89.232.7)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Jul 2008 02:26:38 +0000
Received: from localhost (localhost [127.0.0.1])
	by thebluezone.net (Postfix) with ESMTP id 71242286BEA
	for <java-user@lucene.apache.org>; Mon, 28 Jul 2008 20:26:31 -0600 (MDT)
Received: from thebluezone.net ([127.0.0.1])
	by localhost (mail1 [127.0.0.1]) (amavisd-new, port 10024) with ESMTP
	id 31833-05 for <java-user@lucene.apache.org>;
	Mon, 28 Jul 2008 20:26:29 -0600 (MDT)
Received: from desktop (unknown [65.89.233.61])
	by thebluezone.net (Postfix) with ESMTP id 9968C286BE9
	for <java-user@lucene.apache.org>; Mon, 28 Jul 2008 20:26:29 -0600 (MDT)
From: "John Griffin" <jgriffin@thebluezone.net>
To: <java-user@lucene.apache.org>
References: <BLU149-W70E21A40B150D13EBB9733B9830@phx.gbl>
Subject: RE: Index optimization ...
Date: Mon, 28 Jul 2008 20:26:16 -0600
Message-ID: <D582935BCF154751AD4F67A17F2E2963@desktop>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
In-Reply-To: <BLU149-W70E21A40B150D13EBB9733B9830@phx.gbl>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.5512
Thread-Index: Acjw2+T3lefmG4qyTJecmlM2FAcFNwARjocw
X-Virus-Scanned: by thebluezone.net
X-Virus-Checked: Checked by ClamAV on apache.org

Use IndexWriter.setRAMBufferSizeMB(double mb) and you won't have to
sacrifice anything. It defaults to 16.0 MB so depending on the size of your
index you may want to make it larger. Do some testing at various values to
see where the sweet spot is. 

John G.

-----Original Message-----
From: Dragon Fly [mailto:dragon-fly999@hotmail.com] 
Sent: Monday, July 28, 2008 12:00 PM
To: java-user@lucene.apache.org
Subject: Index optimization ...

I'd like to shorten the time it takes to optimize my index and am willing to
sacrifice search and indexing performance.  Which parameters (e.g. merge
factor) should I change? Thank you.

_________________________________________________________________
Stay in touch when you're away with Windows Live Messenger.
http://www.windowslive.com/messenger/overview.html?ocid=TXT_TAGLM_WL_messeng
er2_072008


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35185-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 29 04:41:20 2008
Return-Path: <java-user-return-35185-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 74686 invoked from network); 29 Jul 2008 04:41:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Jul 2008 04:41:19 -0000
Received: (qmail 79689 invoked by uid 500); 29 Jul 2008 04:41:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79658 invoked by uid 500); 29 Jul 2008 04:41:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79646 invoked by uid 99); 29 Jul 2008 04:41:13 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 Jul 2008 21:41:13 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Jul 2008 04:40:17 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KNh0t-0007kX-4g
	for java-user@lucene.apache.org; Mon, 28 Jul 2008 21:40:43 -0700
Message-ID: <18705179.post@talk.nabble.com>
Date: Mon, 28 Jul 2008 21:40:43 -0700 (PDT)
From: syedfa <fayyazuddin@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Creating an index from an XML file using Lucene in Java
In-Reply-To: <18686430.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: fayyazuddin@gmail.com
References: <18678779.post@talk.nabble.com> <18679016.post@talk.nabble.com> <18682150.post@talk.nabble.com> <18686430.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Dear Karsten:

Sorry for the multiple posts, but I have made some progress.  I think in
order to search multiple fields, I should be using the
MultipleFieldsQueryParser class, and simply pass a String array containing
the fields I wish to search over.  My follow-up question to you is this: 
How do I highlight the results returned from the MultipleFieldsQueryParser? 
As of this moment, my Searcher code looks like this:

List searchResult = new ArrayList();
        Directory fsDir=FSDirectory.getDirectory(indexDir);
        IndexSearcher is=new IndexSearcher(fsDir);
        
        String[] fields = {"SCENE-COMMENTARY", "LINES"};
        Analyzer analyser = new StandardAnalyzer();
        Query parser=new MultiFieldQueryParser(fields, analyser).parse(q);
        //parser.setAllowLeadingWildcard(true); 
        long start=new Date().getTime();
        Hits hits=is.search(parser);
        long end=new Date().getTime();
        QueryScorer scorer = new QueryScorer(parser);
        SimpleHTMLFormatter formatter = new SimpleHTMLFormatter("", "");
    	Highlighter highlighter = new Highlighter(formatter, scorer);
    	//Highlighter highlighter = new Highlighter(scorer);
    	Highlighter high = new Highlighter(formatter, scorer);
    	//Highlighter high = new Highlighter(scorer);
    	Fragmenter fragmenter = new NullFragmenter();
    	Fragmenter fragment = new SimpleFragmenter(250);
    	highlighter.setTextFragmenter(fragmenter);
    	high.setTextFragmenter(fragment);
    	
        for(int i=0; i<hits.length(); i++){
        	Document doc=hits.doc(i);
        	String com = doc.get("SCENE-COMMENTARY");
        	String lns = doc.get("LINES");
            //String spkr = doc.get("SPEAKER");
            TokenStream lines = analyser.tokenStream("LINES", new
StringReader(lns));
            CachingTokenFilter filter = new CachingTokenFilter(lines);
            //TokenStream speaker = analyser.tokenStream("SPEAKER", new
StringReader(spkr));
            String highlightedLines = highlighter.getBestFragment(filter,
lns);
            filter.reset();
            String highlight = high.getBestFragment(filter, lns);
        	SearchResult resultBean = new SearchResult();
        	resultBean.setReference(hits.doc(i).get("REFERENCE"));
        	resultBean.setNarrator(hits.doc(i).get("SPEAKER"));
        	resultBean.setHitResult(highlight);
        	resultBean.setQuote(highlightedLines);
        	searchResult.add(resultBean);
        	System.out.println(resultBean.getReference());
        	System.out.println(resultBean.getNarrator());
         	System.out.println(resultBean.getHitResult());
         	System.out.println("");
        	System.out.println(resultBean.getQuote());
        	System.out.println("");
        }
        
        System.err.println("Found " + hits.length() + " document(s)(in " +
(end-start) + " milliseconds) that matched query '" + q + "':"); 
        
        return searchResult;        
    }

Thanks again for all of your help, I do sincerely appreciate it.

Take care.
Fayyaz


Karsten F. wrote:
> 
> Hi Fayyaz,
> 
> again, this is about SAX-Handler not about lucene.
> 
> My understanding of what you want:
> 1. one lucene document for each SPEECH-Element (already implemented)
> 2. one lucene document for each SCENE-COMMENTARY-Element (not implemented
> yet).
> 
> correct?
> 
> If yes, you can write
>                 if(qName.equals("SPEECH") ||
> qName.equals("SCENE-COMMENTARY")){
>                         doc=new Document();
>                 }
> and
> 
> public void endElement(String uri, String localName, String qName) throws
> SAXException{
> ...
> else if(qName.equals("SCENE-COMMENTARY")){
>  Field lines = new Field(qName, elementBuffer.toString(), Field.Store.YES,
> Field.Index.TOKENIZED, Field.TermVector.YES);
>  doc.add(lines);
> }
> ...
> if(qName.equals("SPEECH") || qName.equals("SCENE-COMMENTARY")){
>   indexWriter.addDocument(doc);
> }
> 
> (instead of "indexWriter.addDocument(doc);" in block of
> if(qName.equals("LINES")){ )
> 
> 
> 
> Best regards
>   Karsten
> 
> P.S.:
> If you want to learn java: 
> I really like 
> http://www.java-hamster-modell.de/
> possible there is an english version somewhere?
> 
> 
> syedfa wrote:
>> 
>> I think I understand what you are saying, but I was hoping you could
>> clarify a little further.  in the start-element method, I have the
>> following:
>> 
>>                 if(qName.equals("SPEECH")){ 
>>                         doc=new Document(); 
>>                 }
>> 
>> are you saying that I should add an identical block of code for
>> <SCENE-COMMENTARY> as well, and include a similar clause in the
>> endElement method as well? i.e.
>> 
>>                          else if(qName.equals("SCENE-COMMENTARY")){ 
>>                                 Field lines = new Field(qName,
>> elementBuffer.toString(), Field.Store.YES, Field.Index.TOKENIZED,
>> Field.TermVector.YES); 
>>                                 lines.setBoost(1.0f); 
>>                                 doc.add(lines); 
>>                                 indexWriter.addDocument(doc);
>>                          } 
>> 
>> Does it also matter where in the if/else if clauses I mention the
>> "SCENE-COMMENTARY" tag?  ie. should I mention it first?  last?  or does
>> the order matter?
>> 
>> Just wondering.
>> Thanks again for your prompt reply.
>> Sincerely;
>> Fayyaz
>> 
>> P.S.  This is actually a personal project, as I have developed an
>> interest in Information Retrieval and simply wanted to work on a creative
>> project to help me develop my skills.  :-) 
>> 
> 
> 

-- 
View this message in context: http://www.nabble.com/Creating-an-index-from-an-XML-file-using-Lucene-in-Java-tp18678779p18705179.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35186-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 29 05:04:37 2008
Return-Path: <java-user-return-35186-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86760 invoked from network); 29 Jul 2008 05:04:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Jul 2008 05:04:37 -0000
Received: (qmail 1609 invoked by uid 500); 29 Jul 2008 05:04:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 1569 invoked by uid 500); 29 Jul 2008 05:04:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 1558 invoked by uid 99); 29 Jul 2008 05:04:30 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 28 Jul 2008 22:04:30 -0700
X-ASF-Spam-Status: No, hits=2.8 required=10.0
	tests=MIME_BASE64_BLANKS,MIME_BASE64_TEXT,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of hasan.diwan@gmail.com designates 64.233.166.183 as permitted sender)
Received: from [64.233.166.183] (HELO py-out-1112.google.com) (64.233.166.183)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Jul 2008 05:03:34 +0000
Received: by py-out-1112.google.com with SMTP id z74so2780946pyg.9
        for <java-user@lucene.apache.org>; Mon, 28 Jul 2008 22:03:59 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:x-rim-org-msg-ref-id
         :return-receipt-to:message-id:content-transfer-encoding:reply-to
         :x-priority:references:in-reply-to:sensitivity:importance:to:subject
         :from:date:content-type:mime-version;
        bh=QQWUcPKzpReA/ANdNVvzg4CAs1Zg9WyvJ2SfZbRNZiw=;
        b=jY7DIH9NuzV3lxaLVfaCsl1YhXseF58Hwwe6QV7I3UqK+LsusUHHoLzsj2w+Xn5HXX
         yzQcwkS9f6x9aaoHBZzdjlUcppO76g1MvHyBee6eR+t+m/XxnjM/XBvY6DDQQLEIRuIY
         C50rtiZNTkIn0YZYcCKt9bnI2aOFj+Iedw9qo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=x-rim-org-msg-ref-id:return-receipt-to:message-id
         :content-transfer-encoding:reply-to:x-priority:references
         :in-reply-to:sensitivity:importance:to:subject:from:date
         :content-type:mime-version;
        b=i9dNvJsqEOq5qrHfK9feHxcRvdu6lrVoTThYxwfQjSf6b53hUUAn5b8UKWACE0xpDn
         oBp6f9Hltph6W9YytVW6q5gWWE50P1E5+FG56rNEWomVAI7+GprBI8Ma2WHnSDKWJgeN
         KYw0zVZfzJFutTE8QWSxMKw6SD7yW7PcuDo4o=
Received: by 10.65.11.17 with SMTP id o17mr11122178qbi.91.1217307839260;
        Mon, 28 Jul 2008 22:03:59 -0700 (PDT)
Received: from bda152.bisx.prod.on.blackberry ( [67.223.85.152])
        by mx.google.com with ESMTPS id s27sm20241503qbs.12.2008.07.28.22.03.58
        (version=SSLv3 cipher=RC4-MD5);
        Mon, 28 Jul 2008 22:03:58 -0700 (PDT)
X-rim-org-msg-ref-id:1975045633
Message-ID:<1975045633-1217307372-cardhu_decombobulator_blackberry.rim.net-308972346-@bxe204.bisx.prod.on.blackberry>
Content-Transfer-Encoding: base64
Reply-To: hasan.diwan@gmail.com
X-Priority: Normal
References: <6f7ea56f0807281853k1f898f5atc6beaf209e03f609@mail.gmail.com>
In-Reply-To: <6f7ea56f0807281853k1f898f5atc6beaf209e03f609@mail.gmail.com>
Sensitivity: Normal
Importance: Normal
To: java-user@lucene.apache.org
Subject: Re: Using lucene as a database... good idea or bad idea?
From: "Hasan Diwan" <hasan.diwan@gmail.com>
Date: Tue, 29 Jul 2008 04:55:48 +0000
Content-Type: text/plain
MIME-Version: 1.0
X-Virus-Checked: Checked by ClamAV on apache.org

Q2hlY2sgdGhlIG51dGNoIG9yIHNvbHIgcHJvamVjdHMsIGJvdGggb2Ygd2hpY2ggYXJlIHN1YnBy
b2plY3RzIG9mIGx1Y2VuZS4gRmVlbCBmcmVlIHRvIGRyb3AgbWUgYSBsaW5lIGlmIHlvdSBzaG91
bGQgcnVuIGludG8gZGlmZmljdWx0aWVzLg0KU2VudCB2aWEgQmxhY2tCZXJyeSBieSBBVCZUDQoN
Ci0tLS0tT3JpZ2luYWwgTWVzc2FnZS0tLS0tDQpGcm9tOiAiSm9obiBFdmFucyIgPGpvaG5AanBl
dmFucy5jb20+DQoNCkRhdGU6IE1vbiwgMjggSnVsIDIwMDggMTg6NTM6MDggDQpUbzogPGphdmEt
dXNlckBsdWNlbmUuYXBhY2hlLm9yZz4NClN1YmplY3Q6IFVzaW5nIGx1Y2VuZSBhcyBhIGRhdGFi
YXNlLi4uIGdvb2QgaWRlYSBvciBiYWQgaWRlYT8NCg0KDQpIaSBBbGwsDQoNCkkgaGF2ZSBzdWNj
ZXNzZnVsbHkgdXNlZCBMdWNlbmUgaW4gdGhlICJ0cmFkdGlpb25hbCIgd2F5IHRvIHByb3ZpZGUN
CmZ1bGwtdGV4dCBzZWFyY2ggZm9yIHZhcmlvdXMgd2Vic2l0ZXMuICBOb3cgSSBhbSB0YXNrZWQg
d2l0aCBkZXZlbG9waW5nIGENCmRhdGEtc3RvcmUgdG8gYmFjayBhIHdlYiBjcmF3bGVyLiAgVGhl
IGNyYXdsZXIgY2FuIGJlIGNvbmZpZ3VyZWQgdG8gcmV0cmlldmUNCmFyYml0cmFyeSBmaWVsZHMg
ZnJvbSBhcmJpdHJhcnkgcGFnZXMsIHNvIHRoZSByZXN1bHQgaXMgdGhhdCBlYWNoIGRvY3VtZW50
DQptYXkgaGF2ZSBhIHJhbmRvbSBhc3NvcnRtZW50IG9mIGZpZWxkcy4gIEl0IHNlZW1zIGxpa2Ug
THVjZW5lIG1heSBiZSBhDQpuYXR1cmFsIGZpdCBmb3IgdGhpcyBzY2VuYXJpbyBzaW5jZSB5b3Ug
Y2FuIG9idmlvdXNseSBhZGQgYXJiaXRyYXJ5IGZpZWxkcw0KdG8gZWFjaCBkb2N1bWVudCBhbmQg
eW91IGNhbiBzdG9yZSB0aGUgYWN0dWFsbHkgZGF0YSBpbiB0aGUgZGF0YWJhc2UuIEkndmUNCmRv
bmUgc29tZSByZXNlYXJjaCB0byBtYWtlIHN1cmUgdGhhdCBpdCB3b3VsZCBtZWV0IGFsbCBvZiBv
dXIgaW5kaXZpZHVhbA0KcmVxdWlyZW1lbnRzICh0aGF0IHdlIGNhbiBpdGVyYXRlIG92ZXIgZG9j
dW1lbnRzLCB1cGRhdGUgKGRlbGV0ZS9yZXBsYWNlKQ0KZG9jdW1lbnRzLCBldGMuKSBhbmQgZXZl
cnl0aGluZyBsb29rcyBnb29kLiAgSSd2ZSBhbHNvIHNlZW4gYSBjb3VwbGUgb2YNCnJlZmVyZW5j
ZXMgYXJvdW5kIHRoZSBuZXQgdG8gb3RoZXIgcGVvcGxlIHRyeWluZyBzaW1pbGFyIHRoaW5ncy4u
LiBob3dldmVyLA0KSSBrbm93IGl0J3Mgbm90IG1lYW50IHRvIGJlIHVzZWQgdGhpcyB3YXksIHNv
IEkgdGhvdWdodCBJIHdvdWxkIHBvc3QgaGVyZQ0KYW5kIGFzayBmb3IgZ3VpZGFuY2U/ICBIYXMg
YW55b25lIGRvbmUgc29tZXRoaW5nIHNpbWlsYXI/ICBJcyB0aGVyZSBhbnkNCnNwZWNpZmljIHJl
YXNvbiB0byB0aGluayB0aGlzIGlzIGEgYmFkIGlkZWE/DQoNClRoZSBvbmUgdGhpbmcgdGhhdCBJ
IGFtIGxlYXN0IGNlcnRhaW4gYWJvdXQgaGlzIGhvdyB3ZWxsIGl0IHdpbGwgc2NhbGUuICBXZQ0K
bWF5IHJlYWNoIHRoZSBwb2ludCB3aGVyZSB3ZSBoYXZlIHRlbnMgb2YgbWlsbGlvbnMgb2YgZG9j
dW1lbnRzIGFuZCBhIGhpZ2gNCnBlcmNlbnRhZ2Ugb2YgdGhvc2UgZG9jdW1lbnRzIG1heSBiZSBy
ZWxhdGl2ZWx5IGxhcmdlICgxMGstNTBrIGVhY2gpLiAgV2UNCmFjdHVhbGx5IHdvdWxkIE5PVCBi
ZSBleHBlY3RpbmcvbmVlZGluZyBMdWNlbmUncyBub3JtYWwgZXh0cmVtZSBmYXN0IHRleHQNCnNl
YXJjaCB0aW1lcyBmb3IgdGhpcywgYnV0IHdlIHdvdWxkIG5lZWQgcmVhc29uYWJsZSB0aW1lcyBm
b3IgYWRkaW5nIG5ldw0KZG9jdW1lbnRzIHRvIHRoZSBpbmRleCwgcmV0cmlldmluZyBkb2N1bWVu
dHMgYnkgSUQgKGZvciBpdGVyYXRpbmcgb3ZlciBhbGwNCmRvY3VtZW50cyksIG9wdGltaXppbmcg
dGhlIGluZGV4IGFmdGVyIGEgc2VyaWVzIG9mIGNoYW5nZXMsIGV0Yy4NCg0KQW55IGFkdmljZS9p
bnB1dC90aGVvcmllcyBhbnlvbmUgY2FuIGNvbnRyaWJ1dGUgd291bGQgYmUgZ3JlYXRseQ0KYXBw
cmVjaWF0ZWQuDQoNClRoYW5rcywNCi0NCkpvaG4NCg0K



From java-user-return-35187-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 29 08:48:57 2008
Return-Path: <java-user-return-35187-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93100 invoked from network); 29 Jul 2008 08:48:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Jul 2008 08:48:57 -0000
Received: (qmail 9235 invoked by uid 500); 29 Jul 2008 08:48:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9201 invoked by uid 500); 29 Jul 2008 08:48:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9190 invoked by uid 99); 29 Jul 2008 08:48:50 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Jul 2008 01:48:50 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ian.lea@gmail.com designates 72.14.204.234 as permitted sender)
Received: from [72.14.204.234] (HELO qb-out-0506.google.com) (72.14.204.234)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Jul 2008 08:47:55 +0000
Received: by qb-out-0506.google.com with SMTP id e6so5225231qbe.27
        for <java-user@lucene.apache.org>; Tue, 29 Jul 2008 01:48:21 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references;
        bh=mZVMeoAwmF8OqPjpDB5vrsmZ7fk34xUSq/z8yRdfgIw=;
        b=nByEnjedUO4yQ00MYk/ttkRu97f6SA70pcJOXnHZa6OMXB6CZGK7U4cuW8wEXf+H+r
         /Ib8+UiNdUHGRbr+1uE5/oPrMqLo6lzR4UB1xq7gLL/zuUf/n1EeaVFLIrG9KSkc3wDL
         2za6Nq5KNz1xFhJuTBzV3Jx6e0032MY+/L9pA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references;
        b=RjETd9yAZmdoceHVfWCSE6pBaQGSnhV2Bor1bWJ+nWYoAlUiDEfALtP5zaLomaulwx
         QMNidH/azkHc/fc3I4ee3TEMMrqaTcktd+3fueOlVLV62dC2eKdAORZ8vTVgsS58Luei
         RiQPzKdEbJBU24fcf/uFefMGgjdi2tODETTBM=
Received: by 10.114.53.18 with SMTP id b18mr2674895waa.141.1217321300454;
        Tue, 29 Jul 2008 01:48:20 -0700 (PDT)
Received: by 10.114.15.5 with HTTP; Tue, 29 Jul 2008 01:48:20 -0700 (PDT)
Message-ID: <8c4e68610807290148h6595611dla895dd22e8af4548@mail.gmail.com>
Date: Tue, 29 Jul 2008 09:48:20 +0100
From: "Ian Lea" <ian.lea@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Using lucene as a database... good idea or bad idea?
In-Reply-To: <6f7ea56f0807281853k1f898f5atc6beaf209e03f609@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <6f7ea56f0807281853k1f898f5atc6beaf209e03f609@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

John


I think it's a great idea, and do exactly this to store 5 million+
documents with info that it takes way too long to get out of our
Oracle database (think days).  Not as many docs as you are talking
about, and less data for each doc, but I wouldn't have any concerns
about scaling.  There are certainly lucene indexes out there bigger
than what you propose.  You can compress the stored data to save some
space.  Run times for optimization might get interesting but see
recent threads for suggestions on that.  And since you are not too
concerned about performance you may not need to optimize much, or even
at all.

Of course you need to remember that this is not a DBMS solution in the
sense of transactions, recovery, etc. but I'm sure you are already
aware of that.


--
Ian.


On Tue, Jul 29, 2008 at 2:53 AM, John Evans <john@jpevans.com> wrote:
> Hi All,
>
> I have successfully used Lucene in the "tradtiional" way to provide
> full-text search for various websites.  Now I am tasked with developing a
> data-store to back a web crawler.  The crawler can be configured to retrieve
> arbitrary fields from arbitrary pages, so the result is that each document
> may have a random assortment of fields.  It seems like Lucene may be a
> natural fit for this scenario since you can obviously add arbitrary fields
> to each document and you can store the actually data in the database. I've
> done some research to make sure that it would meet all of our individual
> requirements (that we can iterate over documents, update (delete/replace)
> documents, etc.) and everything looks good.  I've also seen a couple of
> references around the net to other people trying similar things... however,
> I know it's not meant to be used this way, so I thought I would post here
> and ask for guidance?  Has anyone done something similar?  Is there any
> specific reason to think this is a bad idea?
>
> The one thing that I am least certain about his how well it will scale.  We
> may reach the point where we have tens of millions of documents and a high
> percentage of those documents may be relatively large (10k-50k each).  We
> actually would NOT be expecting/needing Lucene's normal extreme fast text
> search times for this, but we would need reasonable times for adding new
> documents to the index, retrieving documents by ID (for iterating over all
> documents), optimizing the index after a series of changes, etc.
>
> Any advice/input/theories anyone can contribute would be greatly
> appreciated.
>
> Thanks,
> -
> John
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35188-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 29 09:05:38 2008
Return-Path: <java-user-return-35188-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1786 invoked from network); 29 Jul 2008 09:05:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Jul 2008 09:05:37 -0000
Received: (qmail 23872 invoked by uid 500); 29 Jul 2008 09:05:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23840 invoked by uid 500); 29 Jul 2008 09:05:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23825 invoked by uid 99); 29 Jul 2008 09:05:26 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Jul 2008 02:05:26 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of shalinmangar@gmail.com designates 209.85.198.226 as permitted sender)
Received: from [209.85.198.226] (HELO rv-out-0506.google.com) (209.85.198.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Jul 2008 09:04:28 +0000
Received: by rv-out-0506.google.com with SMTP id f6so4703805rvb.5
        for <java-user@lucene.apache.org>; Tue, 29 Jul 2008 02:04:54 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=YFLBhyCVCNjuBdsWNvHRI7nxziouww5IofemWjOMaPU=;
        b=Ka6CpD3YSoC00nXk22URVZVpGzyhJpOkMcQQtFGoCYsw9Qda+pNSq0fc43MXvomQkN
         +jtgV2NNKktDm2dkzIaPo8MN7mzrZXIGqVWt1qER4ESSxrZ/VWMB3CpQWA66OyUz/+2b
         bMfHzdqVZqFpXEQ+UEof+NQpmKYwuGuDW2L3I=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=wePjYWHKE+N0IYW1oZinlJ9AQR2wZ/ZoLO080lpz3iheNXs93VzxJ5xZVyA3SJYmXr
         Pb6SEVGLa/t4PXWrAoA1GDrmUkfQYU5CzmjQb75PU1r9WmLxl8ZYRxv1l1PLSBQGaIBx
         DliPSQNBupSJh5OTTzUOofrPhAB43ojwbVA1E=
Received: by 10.141.206.13 with SMTP id i13mr2873060rvq.100.1217322294209;
        Tue, 29 Jul 2008 02:04:54 -0700 (PDT)
Received: by 10.141.15.16 with HTTP; Tue, 29 Jul 2008 02:04:54 -0700 (PDT)
Message-ID: <69de18140807290204p683bde7n8602b643a5431d7c@mail.gmail.com>
Date: Tue, 29 Jul 2008 14:34:54 +0530
From: "Shalin Shekhar Mangar" <shalinmangar@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Index optimization ...
In-Reply-To: <BLU149-W70E21A40B150D13EBB9733B9830@phx.gbl>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_42960_14440196.1217322294188"
References: <BLU149-W70E21A40B150D13EBB9733B9830@phx.gbl>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_42960_14440196.1217322294188
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Try IndexWriter.optimize(int maxNumSegments)

On Mon, Jul 28, 2008 at 11:30 PM, Dragon Fly <dragon-fly999@hotmail.com>wrote:

> I'd like to shorten the time it takes to optimize my index and am willing
> to sacrifice search and indexing performance.  Which parameters (e.g. merge
> factor) should I change? Thank you.
>
> _________________________________________________________________
> Stay in touch when you're away with Windows Live Messenger.
>
> http://www.windowslive.com/messenger/overview.html?ocid=TXT_TAGLM_WL_messenger2_072008




-- 
Regards,
Shalin Shekhar Mangar.

------=_Part_42960_14440196.1217322294188--

From java-user-return-35189-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 29 09:34:56 2008
Return-Path: <java-user-return-35189-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 15359 invoked from network); 29 Jul 2008 09:34:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Jul 2008 09:34:56 -0000
Received: (qmail 64949 invoked by uid 500); 29 Jul 2008 09:34:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63943 invoked by uid 500); 29 Jul 2008 09:34:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63932 invoked by uid 99); 29 Jul 2008 09:34:48 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Jul 2008 02:34:48 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.191.85.214] (HELO smtp104.mail.mud.yahoo.com) (209.191.85.214)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 29 Jul 2008 09:33:51 +0000
Received: (qmail 81466 invoked from network); 29 Jul 2008 09:34:15 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.in;
  h=Received:X-YMail-OSG:X-Yahoo-Newman-Property:Message-ID:From:To:References:Subject:Date:MIME-Version:Content-Type:Content-Transfer-Encoding:X-Priority:X-MSMail-Priority:X-Mailer:X-MimeOLE;
  b=c/jVU6O3BbTb51n+O2ShHdJXsCeDe1e5J56q8Vqwuxii5YCkVpL6sRY+tGkCBO0zzUITrROX5KxDiliiAXPWXEFv7xFgO7wRnIwGzi6YMgugoHx0qXRyDUMKKksYOV5hMTKRGsvDdw4IFWjoRglSa9Ehg6XR9CykRcpmBwVIopE=  ;
Received: from unknown (HELO GaneshM) (emailgane@203.98.194.130 with login)
  by smtp104.mail.mud.yahoo.com with SMTP; 29 Jul 2008 09:34:14 -0000
X-YMail-OSG: udhFZysVM1m5sjkjy1h8wyw9dq7qe7U3pwpCg3dqlCTDn2YSViGje4phNSPVnSr13HHkFmsWXi2fNI8V.876W6WbgTkxJG5zN61S9WVPpaWI9dvjzbpuU5.TU.JvfgTYUNU-
X-Yahoo-Newman-Property: ymail-3
Message-ID: <006a01c8f15e$3f2e2df0$610cc30a@sv.us.sonicwall.com>
From: "Ganesh - yahoo" <emailgane@yahoo.co.in>
To: <java-user@lucene.apache.org>
References: <6f7ea56f0807281853k1f898f5atc6beaf209e03f609@mail.gmail.com> <8c4e68610807290148h6595611dla895dd22e8af4548@mail.gmail.com>
Subject: Re: Using lucene as a database... good idea or bad idea?
Date: Tue, 29 Jul 2008 15:04:03 +0530
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="iso-8859-1";
	reply-type=original
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.3138
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3138
X-Virus-Checked: Checked by ClamAV on apache.org

Hello all,

I am also interested in this. I want to archive the content of the document 
using Lucene.

Is it a good idea to use Lucene as storage engine?

Regards
Ganesh

----- Original Message ----- 
From: "Ian Lea" <ian.lea@gmail.com>
To: <java-user@lucene.apache.org>
Sent: Tuesday, July 29, 2008 2:18 PM
Subject: Re: Using lucene as a database... good idea or bad idea?


> John
>
>
> I think it's a great idea, and do exactly this to store 5 million+
> documents with info that it takes way too long to get out of our
> Oracle database (think days).  Not as many docs as you are talking
> about, and less data for each doc, but I wouldn't have any concerns
> about scaling.  There are certainly lucene indexes out there bigger
> than what you propose.  You can compress the stored data to save some
> space.  Run times for optimization might get interesting but see
> recent threads for suggestions on that.  And since you are not too
> concerned about performance you may not need to optimize much, or even
> at all.
>
> Of course you need to remember that this is not a DBMS solution in the
> sense of transactions, recovery, etc. but I'm sure you are already
> aware of that.
>
>
> --
> Ian.
>
>
> On Tue, Jul 29, 2008 at 2:53 AM, John Evans <john@jpevans.com> wrote:
>> Hi All,
>>
>> I have successfully used Lucene in the "tradtiional" way to provide
>> full-text search for various websites.  Now I am tasked with developing a
>> data-store to back a web crawler.  The crawler can be configured to 
>> retrieve
>> arbitrary fields from arbitrary pages, so the result is that each 
>> document
>> may have a random assortment of fields.  It seems like Lucene may be a
>> natural fit for this scenario since you can obviously add arbitrary 
>> fields
>> to each document and you can store the actually data in the database. 
>> I've
>> done some research to make sure that it would meet all of our individual
>> requirements (that we can iterate over documents, update (delete/replace)
>> documents, etc.) and everything looks good.  I've also seen a couple of
>> references around the net to other people trying similar things... 
>> however,
>> I know it's not meant to be used this way, so I thought I would post here
>> and ask for guidance?  Has anyone done something similar?  Is there any
>> specific reason to think this is a bad idea?
>>
>> The one thing that I am least certain about his how well it will scale. 
>> We
>> may reach the point where we have tens of millions of documents and a 
>> high
>> percentage of those documents may be relatively large (10k-50k each).  We
>> actually would NOT be expecting/needing Lucene's normal extreme fast text
>> search times for this, but we would need reasonable times for adding new
>> documents to the index, retrieving documents by ID (for iterating over 
>> all
>> documents), optimizing the index after a series of changes, etc.
>>
>> Any advice/input/theories anyone can contribute would be greatly
>> appreciated.
>>
>> Thanks,
>> -
>> John
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 

Send instant messages to your online friends http://in.messenger.yahoo.com 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35190-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 29 10:28:48 2008
Return-Path: <java-user-return-35190-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 34266 invoked from network); 29 Jul 2008 10:28:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Jul 2008 10:28:48 -0000
Received: (qmail 27418 invoked by uid 500); 29 Jul 2008 10:28:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27383 invoked by uid 500); 29 Jul 2008 10:28:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 77786 invoked by uid 99); 29 Jul 2008 06:33:25 -0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Date: Tue, 29 Jul 2008 08:32:46 +0200
From: =?iso-8859-1?Q?Asbj=F8rn_A=2E?= Fellinghaug <asbjorn@fellinghaug.com>
To: java-user@lucene.apache.org
Subject: Re: Index optimization ...
Message-ID: <20080729063246.GC12841@stud.ntnu.no>
References: <BLU149-W70E21A40B150D13EBB9733B9830@phx.gbl> <D582935BCF154751AD4F67A17F2E2963@desktop>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Disposition: inline
Content-Transfer-Encoding: 8bit
In-Reply-To: <D582935BCF154751AD4F67A17F2E2963@desktop>
User-Agent: Mutt/1.5.11
X-Virus-Scanned: Debian amavisd-new at bene1.itea.ntnu.no
X-Virus-Checked: Checked by ClamAV on apache.org

John Griffin:
> Use IndexWriter.setRAMBufferSizeMB(double mb) and you won't have to
> sacrifice anything. It defaults to 16.0 MB so depending on the size of your
> index you may want to make it larger. Do some testing at various values to
> see where the sweet spot is. 
> 

Also, have a look at
http://wiki.apache.org/lucene-java/ImproveIndexingSpeed, which provides
a range of helping advices in terms of enhanced indexing speed.

-- 
Asbjrn A. Fellinghaug
asbjorn@fellinghaug.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35191-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 29 12:32:38 2008
Return-Path: <java-user-return-35191-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96276 invoked from network); 29 Jul 2008 12:32:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Jul 2008 12:32:38 -0000
Received: (qmail 67402 invoked by uid 500); 29 Jul 2008 12:32:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67379 invoked by uid 500); 29 Jul 2008 12:32:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67368 invoked by uid 99); 29 Jul 2008 12:32:31 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Jul 2008 05:32:31 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.5] (HELO spunkymail-a2.g.dreamhost.com) (208.97.132.5)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Jul 2008 12:31:34 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a2.g.dreamhost.com (Postfix) with ESMTP id DBB2C881EF
	for <java-user@lucene.apache.org>; Tue, 29 Jul 2008 05:31:29 -0700 (PDT)
Message-Id: <70A670C6-E5DB-4FBA-97F3-6FD00049441D@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <006a01c8f15e$3f2e2df0$610cc30a@sv.us.sonicwall.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: Using lucene as a database... good idea or bad idea?
X-Priority: 3
Date: Tue, 29 Jul 2008 08:31:29 -0400
References: <6f7ea56f0807281853k1f898f5atc6beaf209e03f609@mail.gmail.com> <8c4e68610807290148h6595611dla895dd22e8af4548@mail.gmail.com> <006a01c8f15e$3f2e2df0$610cc30a@sv.us.sonicwall.com>
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org

I think the answer is it can be done and probably quite well.  I also  
think it's informative that Nutch does not use Lucene for this  
function, as I understand it, but that shouldn't stop you either.  You  
might also have a look at Apache Jackrabbit, which uses Lucene  
underneath as a content repository.

-Grant

On Jul 29, 2008, at 5:34 AM, Ganesh - yahoo wrote:

> Hello all,
>
> I am also interested in this. I want to archive the content of the  
> document using Lucene.
>
> Is it a good idea to use Lucene as storage engine?
>
> Regards
> Ganesh
>
> ----- Original Message ----- From: "Ian Lea" <ian.lea@gmail.com>
> To: <java-user@lucene.apache.org>
> Sent: Tuesday, July 29, 2008 2:18 PM
> Subject: Re: Using lucene as a database... good idea or bad idea?
>
>
>> John
>>
>>
>> I think it's a great idea, and do exactly this to store 5 million+
>> documents with info that it takes way too long to get out of our
>> Oracle database (think days).  Not as many docs as you are talking
>> about, and less data for each doc, but I wouldn't have any concerns
>> about scaling.  There are certainly lucene indexes out there bigger
>> than what you propose.  You can compress the stored data to save some
>> space.  Run times for optimization might get interesting but see
>> recent threads for suggestions on that.  And since you are not too
>> concerned about performance you may not need to optimize much, or  
>> even
>> at all.
>>
>> Of course you need to remember that this is not a DBMS solution in  
>> the
>> sense of transactions, recovery, etc. but I'm sure you are already
>> aware of that.
>>
>>
>> --
>> Ian.
>>
>>
>> On Tue, Jul 29, 2008 at 2:53 AM, John Evans <john@jpevans.com> wrote:
>>> Hi All,
>>>
>>> I have successfully used Lucene in the "tradtiional" way to provide
>>> full-text search for various websites.  Now I am tasked with  
>>> developing a
>>> data-store to back a web crawler.  The crawler can be configured  
>>> to retrieve
>>> arbitrary fields from arbitrary pages, so the result is that each  
>>> document
>>> may have a random assortment of fields.  It seems like Lucene may  
>>> be a
>>> natural fit for this scenario since you can obviously add  
>>> arbitrary fields
>>> to each document and you can store the actually data in the  
>>> database. I've
>>> done some research to make sure that it would meet all of our  
>>> individual
>>> requirements (that we can iterate over documents, update (delete/ 
>>> replace)
>>> documents, etc.) and everything looks good.  I've also seen a  
>>> couple of
>>> references around the net to other people trying similar things...  
>>> however,
>>> I know it's not meant to be used this way, so I thought I would  
>>> post here
>>> and ask for guidance?  Has anyone done something similar?  Is  
>>> there any
>>> specific reason to think this is a bad idea?
>>>
>>> The one thing that I am least certain about his how well it will  
>>> scale. We
>>> may reach the point where we have tens of millions of documents  
>>> and a high
>>> percentage of those documents may be relatively large (10k-50k  
>>> each).  We
>>> actually would NOT be expecting/needing Lucene's normal extreme  
>>> fast text
>>> search times for this, but we would need reasonable times for  
>>> adding new
>>> documents to the index, retrieving documents by ID (for iterating  
>>> over all
>>> documents), optimizing the index after a series of changes, etc.
>>>
>>> Any advice/input/theories anyone can contribute would be greatly
>>> appreciated.
>>>
>>> Thanks,
>>> -
>>> John
>>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>
> Send instant messages to your online friends http://in.messenger.yahoo.com
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

--------------------------
Grant Ingersoll
http://www.lucidimagination.com

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ








---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35192-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 29 12:44:22 2008
Return-Path: <java-user-return-35192-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 2204 invoked from network); 29 Jul 2008 12:44:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Jul 2008 12:44:22 -0000
Received: (qmail 84146 invoked by uid 500); 29 Jul 2008 12:44:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84105 invoked by uid 500); 29 Jul 2008 12:44:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 84094 invoked by uid 99); 29 Jul 2008 12:44:15 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Jul 2008 05:44:15 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of nageshblore@gmail.com designates 64.233.182.186 as permitted sender)
Received: from [64.233.182.186] (HELO nf-out-0910.google.com) (64.233.182.186)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Jul 2008 12:43:19 +0000
Received: by nf-out-0910.google.com with SMTP id g16so1467731nfd.15
        for <java-user@lucene.apache.org>; Tue, 29 Jul 2008 05:43:27 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=O6qoSHM+rfg9dELb/AHMWW6KbP7IDDxIzlpQtqE1uGs=;
        b=xoiqEMQ88fSMmbuk0UZXf92s/qybwvjHNk03yUGA+zGkqZaV123NbPL941IfuwOWfG
         sA7N/DnXtCFk5wNLPj4fMxmOftf2da0QOOKwxu9Xqd4ICjFplD46rXEF0Iol6VE3QtZm
         qPbQPFujzvvnIvS1wOrHml5O7svaPr0Pxy6M8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=RBf0bLqq1xLoMZPjT3TCfHTFPXKesw0mpYYJHAiG99NkmE5w6Y9qO/312/E8BkXR/6
         SQG8TT0HFfsMxmkNRimNhlU5Pq3sbHCCeyXic1jfBQOgNM3J3I36+HPKki3pixhBfOl4
         zavTRd6HGKWdBxa7No7bNHw3kAbak7AHpnDXg=
Received: by 10.210.129.10 with SMTP id b10mr7568990ebd.26.1217335407209;
        Tue, 29 Jul 2008 05:43:27 -0700 (PDT)
Received: by 10.210.52.2 with HTTP; Tue, 29 Jul 2008 05:43:27 -0700 (PDT)
Message-ID: <59a485a30807290543i3fbc39d7je153a4bda6faabcd@mail.gmail.com>
Date: Tue, 29 Jul 2008 18:13:27 +0530
From: "=?UTF-8?B?4LKo4LK+4LKX4LOH4LK24LONIOCyuOCzgeCyrOCzjeCysOCyueCzjQ==?= =?UTF-8?B?4LKu4LKj4LON4LKvIChOYWdlc2ggUyk=?=" <nageshblore@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Using lucene as a database... good idea or bad idea?
In-Reply-To: <70A670C6-E5DB-4FBA-97F3-6FD00049441D@apache.org>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_25488_7238826.1217335407212"
References: <6f7ea56f0807281853k1f898f5atc6beaf209e03f609@mail.gmail.com>
	 <8c4e68610807290148h6595611dla895dd22e8af4548@mail.gmail.com>
	 <006a01c8f15e$3f2e2df0$610cc30a@sv.us.sonicwall.com>
	 <70A670C6-E5DB-4FBA-97F3-6FD00049441D@apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_25488_7238826.1217335407212
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

The way I see it, search solutions (on whatever scale) have three components
- data aggregation, indexing/searching and presentation of results. I
thought, Lucene did the second part only.

So, I do not quite follow, why should Lucene be used for datastore ?

Nagesh

On Tue, Jul 29, 2008 at 6:01 PM, Grant Ingersoll <gsingers@apache.org>wrote:

> I think the answer is it can be done and probably quite well.  I also think
> it's informative that Nutch does not use Lucene for this function, as I
> understand it, but that shouldn't stop you either.  You might also have a
> look at Apache Jackrabbit, which uses Lucene underneath as a content
> repository.
>
> -Grant
>
>
> On Jul 29, 2008, at 5:34 AM, Ganesh - yahoo wrote:
>
>  Hello all,
>>
>> I am also interested in this. I want to archive the content of the
>> document using Lucene.
>>
>> Is it a good idea to use Lucene as storage engine?
>>
>> Regards
>> Ganesh
>>
>> ----- Original Message ----- From: "Ian Lea" <ian.lea@gmail.com>
>> To: <java-user@lucene.apache.org>
>> Sent: Tuesday, July 29, 2008 2:18 PM
>> Subject: Re: Using lucene as a database... good idea or bad idea?
>>
>>
>>  John
>>>
>>>
>>> I think it's a great idea, and do exactly this to store 5 million+
>>> documents with info that it takes way too long to get out of our
>>> Oracle database (think days).  Not as many docs as you are talking
>>> about, and less data for each doc, but I wouldn't have any concerns
>>> about scaling.  There are certainly lucene indexes out there bigger
>>> than what you propose.  You can compress the stored data to save some
>>> space.  Run times for optimization might get interesting but see
>>> recent threads for suggestions on that.  And since you are not too
>>> concerned about performance you may not need to optimize much, or even
>>> at all.
>>>
>>> Of course you need to remember that this is not a DBMS solution in the
>>> sense of transactions, recovery, etc. but I'm sure you are already
>>> aware of that.
>>>
>>>
>>> --
>>> Ian.
>>>
>>>
>>> On Tue, Jul 29, 2008 at 2:53 AM, John Evans <john@jpevans.com> wrote:
>>>
>>>> Hi All,
>>>>
>>>> I have successfully used Lucene in the "tradtiional" way to provide
>>>> full-text search for various websites.  Now I am tasked with developing
>>>> a
>>>> data-store to back a web crawler.  The crawler can be configured to
>>>> retrieve
>>>> arbitrary fields from arbitrary pages, so the result is that each
>>>> document
>>>> may have a random assortment of fields.  It seems like Lucene may be a
>>>> natural fit for this scenario since you can obviously add arbitrary
>>>> fields
>>>> to each document and you can store the actually data in the database.
>>>> I've
>>>> done some research to make sure that it would meet all of our individual
>>>> requirements (that we can iterate over documents, update
>>>> (delete/replace)
>>>> documents, etc.) and everything looks good.  I've also seen a couple of
>>>> references around the net to other people trying similar things...
>>>> however,
>>>> I know it's not meant to be used this way, so I thought I would post
>>>> here
>>>> and ask for guidance?  Has anyone done something similar?  Is there any
>>>> specific reason to think this is a bad idea?
>>>>
>>>> The one thing that I am least certain about his how well it will scale.
>>>> We
>>>> may reach the point where we have tens of millions of documents and a
>>>> high
>>>> percentage of those documents may be relatively large (10k-50k each).
>>>>  We
>>>> actually would NOT be expecting/needing Lucene's normal extreme fast
>>>> text
>>>> search times for this, but we would need reasonable times for adding new
>>>> documents to the index, retrieving documents by ID (for iterating over
>>>> all
>>>> documents), optimizing the index after a series of changes, etc.
>>>>
>>>> Any advice/input/theories anyone can contribute would be greatly
>>>> appreciated.
>>>>
>>>> Thanks,
>>>> -
>>>> John
>>>>
>>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>
>> Send instant messages to your online friends
>> http://in.messenger.yahoo.com
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
> --------------------------
> Grant Ingersoll
> http://www.lucidimagination.com
>
> Lucene Helpful Hints:
> http://wiki.apache.org/lucene-java/BasicsOfPerformance
> http://wiki.apache.org/lucene-java/LuceneFAQ
>
>
>
>
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_25488_7238826.1217335407212--

From java-user-return-35193-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 29 13:22:30 2008
Return-Path: <java-user-return-35193-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21700 invoked from network); 29 Jul 2008 13:22:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Jul 2008 13:22:30 -0000
Received: (qmail 42616 invoked by uid 500); 29 Jul 2008 13:22:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42574 invoked by uid 500); 29 Jul 2008 13:22:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42557 invoked by uid 99); 29 Jul 2008 13:22:22 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Jul 2008 06:22:22 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ian.lea@gmail.com designates 209.85.146.176 as permitted sender)
Received: from [209.85.146.176] (HELO wa-out-1112.google.com) (209.85.146.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Jul 2008 13:21:26 +0000
Received: by wa-out-1112.google.com with SMTP id l24so3687046waf.11
        for <java-user@lucene.apache.org>; Tue, 29 Jul 2008 06:21:35 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references;
        bh=0bD4reBOuYlAM/vdV8zh4FAmnYZCXfVLNC0N7eTrnk0=;
        b=vu+CaAVX+bhqDqkC+mAxGxGDPLzxizNdg8MS7bIhcBIBVj5Rh2R9qBCJiPLd0Ep8Am
         tWR6dlfyFCO/ivMglKUp9ILC0IYI6XVLZM2CvfKjmt/o3+oSKBekPxtr0fWzjwIJJfIn
         UTON3DC3E0kjvbkqXEz0rWBuzTUxVM9E0KLZY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references;
        b=DMhKefKj7+xsdYczU2yGPOFOadXhOaPZ/H1iwgi+QvDCTPRSLXZvtssGqOVpo6gN9X
         hPg+5B6JDbfq6zJnRLmfP8DPAFMfoEyfPLI1F5VrUHo7xll6OoxHzrWaL7tgzSydvcud
         zMZtZVAAeg1oU4IDYx9EjOEyEvCPOB/Us/J+8=
Received: by 10.115.46.9 with SMTP id y9mr6543310waj.23.1217337695605;
        Tue, 29 Jul 2008 06:21:35 -0700 (PDT)
Received: by 10.114.15.5 with HTTP; Tue, 29 Jul 2008 06:21:35 -0700 (PDT)
Message-ID: <8c4e68610807290621n6db7ecf3y60d05dbfee1bc5d6@mail.gmail.com>
Date: Tue, 29 Jul 2008 14:21:35 +0100
From: "Ian Lea" <ian.lea@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Using lucene as a database... good idea or bad idea?
In-Reply-To: <59a485a30807290543i3fbc39d7je153a4bda6faabcd@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: base64
Content-Disposition: inline
References: <6f7ea56f0807281853k1f898f5atc6beaf209e03f609@mail.gmail.com>
	 <8c4e68610807290148h6595611dla895dd22e8af4548@mail.gmail.com>
	 <006a01c8f15e$3f2e2df0$610cc30a@sv.us.sonicwall.com>
	 <70A670C6-E5DB-4FBA-97F3-6FD00049441D@apache.org>
	 <59a485a30807290543i3fbc39d7je153a4bda6faabcd@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

SSBkb24ndCB0aGluayB0aGF0IGFueW9uZSBpbiB0aGlzIHRocmVhZCBoYXMgc2FpZCAic2hvdWxk
IiwganVzdAoiY291bGQiIC0gaXQgaXMgYSB2YWxpZCBvcHRpb24gKElNSE8pLiAgUGVyc29uYWxs
eSwgSSB1c2UgaXQgYXMgYQpzdG9yZSBmb3IgbHVjZW5lIHJlbGF0ZWQgZGF0YSBiZWNhdXNlIEkg
a25vdyBhbmQgbGlrZSBhbmQgdHJ1c3QgaXQsIGl0CmlzIGFscmVhZHkgdGhlcmUgZm9yIHRoaXMg
cHJvamVjdCBzbyBubyBuZWVkIHRvIGludHJvZHVjZSBhbm90aGVyCnNvZnR3YXJlIGRlcGVuZGVu
Y3ksIGFuZCBiZWNhdXNlIGl0IGlzIGJsaW5kaW5nbHkgZmFzdC4KCgotLQpJYW4uCgoKT24gVHVl
LCBKdWwgMjksIDIwMDggYXQgMTo0MyBQTSwg4LKo4LK+4LKX4LOH4LK24LONIOCyuOCzgeCyrOCz
jeCysOCyueCzjeCyruCyo+CzjeCyryAoTmFnZXNoIFMpCjxuYWdlc2hibG9yZUBnbWFpbC5jb20+
IHdyb3RlOgo+IFRoZSB3YXkgSSBzZWUgaXQsIHNlYXJjaCBzb2x1dGlvbnMgKG9uIHdoYXRldmVy
IHNjYWxlKSBoYXZlIHRocmVlIGNvbXBvbmVudHMKPiAtIGRhdGEgYWdncmVnYXRpb24sIGluZGV4
aW5nL3NlYXJjaGluZyBhbmQgcHJlc2VudGF0aW9uIG9mIHJlc3VsdHMuIEkKPiB0aG91Z2h0LCBM
dWNlbmUgZGlkIHRoZSBzZWNvbmQgcGFydCBvbmx5Lgo+Cj4gU28sIEkgZG8gbm90IHF1aXRlIGZv
bGxvdywgd2h5IHNob3VsZCBMdWNlbmUgYmUgdXNlZCBmb3IgZGF0YXN0b3JlID8KPgo+IE5hZ2Vz
aAo+Cj4gT24gVHVlLCBKdWwgMjksIDIwMDggYXQgNjowMSBQTSwgR3JhbnQgSW5nZXJzb2xsIDxn
c2luZ2Vyc0BhcGFjaGUub3JnPndyb3RlOgo+Cj4+IEkgdGhpbmsgdGhlIGFuc3dlciBpcyBpdCBj
YW4gYmUgZG9uZSBhbmQgcHJvYmFibHkgcXVpdGUgd2VsbC4gIEkgYWxzbyB0aGluawo+PiBpdCdz
IGluZm9ybWF0aXZlIHRoYXQgTnV0Y2ggZG9lcyBub3QgdXNlIEx1Y2VuZSBmb3IgdGhpcyBmdW5j
dGlvbiwgYXMgSQo+PiB1bmRlcnN0YW5kIGl0LCBidXQgdGhhdCBzaG91bGRuJ3Qgc3RvcCB5b3Ug
ZWl0aGVyLiAgWW91IG1pZ2h0IGFsc28gaGF2ZSBhCj4+IGxvb2sgYXQgQXBhY2hlIEphY2tyYWJi
aXQsIHdoaWNoIHVzZXMgTHVjZW5lIHVuZGVybmVhdGggYXMgYSBjb250ZW50Cj4+IHJlcG9zaXRv
cnkuCj4+Cj4+IC1HcmFudAo+Pgo+Pgo+PiBPbiBKdWwgMjksIDIwMDgsIGF0IDU6MzQgQU0sIEdh
bmVzaCAtIHlhaG9vIHdyb3RlOgo+Pgo+PiAgSGVsbG8gYWxsLAo+Pj4KPj4+IEkgYW0gYWxzbyBp
bnRlcmVzdGVkIGluIHRoaXMuIEkgd2FudCB0byBhcmNoaXZlIHRoZSBjb250ZW50IG9mIHRoZQo+
Pj4gZG9jdW1lbnQgdXNpbmcgTHVjZW5lLgo+Pj4KPj4+IElzIGl0IGEgZ29vZCBpZGVhIHRvIHVz
ZSBMdWNlbmUgYXMgc3RvcmFnZSBlbmdpbmU/Cj4+Pgo+Pj4gUmVnYXJkcwo+Pj4gR2FuZXNoCj4+
Pgo+Pj4gLS0tLS0gT3JpZ2luYWwgTWVzc2FnZSAtLS0tLSBGcm9tOiAiSWFuIExlYSIgPGlhbi5s
ZWFAZ21haWwuY29tPgo+Pj4gVG86IDxqYXZhLXVzZXJAbHVjZW5lLmFwYWNoZS5vcmc+Cj4+PiBT
ZW50OiBUdWVzZGF5LCBKdWx5IDI5LCAyMDA4IDI6MTggUE0KPj4+IFN1YmplY3Q6IFJlOiBVc2lu
ZyBsdWNlbmUgYXMgYSBkYXRhYmFzZS4uLiBnb29kIGlkZWEgb3IgYmFkIGlkZWE/Cj4+Pgo+Pj4K
Pj4+ICBKb2huCj4+Pj4KPj4+Pgo+Pj4+IEkgdGhpbmsgaXQncyBhIGdyZWF0IGlkZWEsIGFuZCBk
byBleGFjdGx5IHRoaXMgdG8gc3RvcmUgNSBtaWxsaW9uKwo+Pj4+IGRvY3VtZW50cyB3aXRoIGlu
Zm8gdGhhdCBpdCB0YWtlcyB3YXkgdG9vIGxvbmcgdG8gZ2V0IG91dCBvZiBvdXIKPj4+PiBPcmFj
bGUgZGF0YWJhc2UgKHRoaW5rIGRheXMpLiAgTm90IGFzIG1hbnkgZG9jcyBhcyB5b3UgYXJlIHRh
bGtpbmcKPj4+PiBhYm91dCwgYW5kIGxlc3MgZGF0YSBmb3IgZWFjaCBkb2MsIGJ1dCBJIHdvdWxk
bid0IGhhdmUgYW55IGNvbmNlcm5zCj4+Pj4gYWJvdXQgc2NhbGluZy4gIFRoZXJlIGFyZSBjZXJ0
YWlubHkgbHVjZW5lIGluZGV4ZXMgb3V0IHRoZXJlIGJpZ2dlcgo+Pj4+IHRoYW4gd2hhdCB5b3Ug
cHJvcG9zZS4gIFlvdSBjYW4gY29tcHJlc3MgdGhlIHN0b3JlZCBkYXRhIHRvIHNhdmUgc29tZQo+
Pj4+IHNwYWNlLiAgUnVuIHRpbWVzIGZvciBvcHRpbWl6YXRpb24gbWlnaHQgZ2V0IGludGVyZXN0
aW5nIGJ1dCBzZWUKPj4+PiByZWNlbnQgdGhyZWFkcyBmb3Igc3VnZ2VzdGlvbnMgb24gdGhhdC4g
IEFuZCBzaW5jZSB5b3UgYXJlIG5vdCB0b28KPj4+PiBjb25jZXJuZWQgYWJvdXQgcGVyZm9ybWFu
Y2UgeW91IG1heSBub3QgbmVlZCB0byBvcHRpbWl6ZSBtdWNoLCBvciBldmVuCj4+Pj4gYXQgYWxs
Lgo+Pj4+Cj4+Pj4gT2YgY291cnNlIHlvdSBuZWVkIHRvIHJlbWVtYmVyIHRoYXQgdGhpcyBpcyBu
b3QgYSBEQk1TIHNvbHV0aW9uIGluIHRoZQo+Pj4+IHNlbnNlIG9mIHRyYW5zYWN0aW9ucywgcmVj
b3ZlcnksIGV0Yy4gYnV0IEknbSBzdXJlIHlvdSBhcmUgYWxyZWFkeQo+Pj4+IGF3YXJlIG9mIHRo
YXQuCj4+Pj4KPj4+Pgo+Pj4+IC0tCj4+Pj4gSWFuLgo+Pj4+Cj4+Pj4KPj4+PiBPbiBUdWUsIEp1
bCAyOSwgMjAwOCBhdCAyOjUzIEFNLCBKb2huIEV2YW5zIDxqb2huQGpwZXZhbnMuY29tPiB3cm90
ZToKPj4+Pgo+Pj4+PiBIaSBBbGwsCj4+Pj4+Cj4+Pj4+IEkgaGF2ZSBzdWNjZXNzZnVsbHkgdXNl
ZCBMdWNlbmUgaW4gdGhlICJ0cmFkdGlpb25hbCIgd2F5IHRvIHByb3ZpZGUKPj4+Pj4gZnVsbC10
ZXh0IHNlYXJjaCBmb3IgdmFyaW91cyB3ZWJzaXRlcy4gIE5vdyBJIGFtIHRhc2tlZCB3aXRoIGRl
dmVsb3BpbmcKPj4+Pj4gYQo+Pj4+PiBkYXRhLXN0b3JlIHRvIGJhY2sgYSB3ZWIgY3Jhd2xlci4g
IFRoZSBjcmF3bGVyIGNhbiBiZSBjb25maWd1cmVkIHRvCj4+Pj4+IHJldHJpZXZlCj4+Pj4+IGFy
Yml0cmFyeSBmaWVsZHMgZnJvbSBhcmJpdHJhcnkgcGFnZXMsIHNvIHRoZSByZXN1bHQgaXMgdGhh
dCBlYWNoCj4+Pj4+IGRvY3VtZW50Cj4+Pj4+IG1heSBoYXZlIGEgcmFuZG9tIGFzc29ydG1lbnQg
b2YgZmllbGRzLiAgSXQgc2VlbXMgbGlrZSBMdWNlbmUgbWF5IGJlIGEKPj4+Pj4gbmF0dXJhbCBm
aXQgZm9yIHRoaXMgc2NlbmFyaW8gc2luY2UgeW91IGNhbiBvYnZpb3VzbHkgYWRkIGFyYml0cmFy
eQo+Pj4+PiBmaWVsZHMKPj4+Pj4gdG8gZWFjaCBkb2N1bWVudCBhbmQgeW91IGNhbiBzdG9yZSB0
aGUgYWN0dWFsbHkgZGF0YSBpbiB0aGUgZGF0YWJhc2UuCj4+Pj4+IEkndmUKPj4+Pj4gZG9uZSBz
b21lIHJlc2VhcmNoIHRvIG1ha2Ugc3VyZSB0aGF0IGl0IHdvdWxkIG1lZXQgYWxsIG9mIG91ciBp
bmRpdmlkdWFsCj4+Pj4+IHJlcXVpcmVtZW50cyAodGhhdCB3ZSBjYW4gaXRlcmF0ZSBvdmVyIGRv
Y3VtZW50cywgdXBkYXRlCj4+Pj4+IChkZWxldGUvcmVwbGFjZSkKPj4+Pj4gZG9jdW1lbnRzLCBl
dGMuKSBhbmQgZXZlcnl0aGluZyBsb29rcyBnb29kLiAgSSd2ZSBhbHNvIHNlZW4gYSBjb3VwbGUg
b2YKPj4+Pj4gcmVmZXJlbmNlcyBhcm91bmQgdGhlIG5ldCB0byBvdGhlciBwZW9wbGUgdHJ5aW5n
IHNpbWlsYXIgdGhpbmdzLi4uCj4+Pj4+IGhvd2V2ZXIsCj4+Pj4+IEkga25vdyBpdCdzIG5vdCBt
ZWFudCB0byBiZSB1c2VkIHRoaXMgd2F5LCBzbyBJIHRob3VnaHQgSSB3b3VsZCBwb3N0Cj4+Pj4+
IGhlcmUKPj4+Pj4gYW5kIGFzayBmb3IgZ3VpZGFuY2U/ICBIYXMgYW55b25lIGRvbmUgc29tZXRo
aW5nIHNpbWlsYXI/ICBJcyB0aGVyZSBhbnkKPj4+Pj4gc3BlY2lmaWMgcmVhc29uIHRvIHRoaW5r
IHRoaXMgaXMgYSBiYWQgaWRlYT8KPj4+Pj4KPj4+Pj4gVGhlIG9uZSB0aGluZyB0aGF0IEkgYW0g
bGVhc3QgY2VydGFpbiBhYm91dCBoaXMgaG93IHdlbGwgaXQgd2lsbCBzY2FsZS4KPj4+Pj4gV2UK
Pj4+Pj4gbWF5IHJlYWNoIHRoZSBwb2ludCB3aGVyZSB3ZSBoYXZlIHRlbnMgb2YgbWlsbGlvbnMg
b2YgZG9jdW1lbnRzIGFuZCBhCj4+Pj4+IGhpZ2gKPj4+Pj4gcGVyY2VudGFnZSBvZiB0aG9zZSBk
b2N1bWVudHMgbWF5IGJlIHJlbGF0aXZlbHkgbGFyZ2UgKDEway01MGsgZWFjaCkuCj4+Pj4+ICBX
ZQo+Pj4+PiBhY3R1YWxseSB3b3VsZCBOT1QgYmUgZXhwZWN0aW5nL25lZWRpbmcgTHVjZW5lJ3Mg
bm9ybWFsIGV4dHJlbWUgZmFzdAo+Pj4+PiB0ZXh0Cj4+Pj4+IHNlYXJjaCB0aW1lcyBmb3IgdGhp
cywgYnV0IHdlIHdvdWxkIG5lZWQgcmVhc29uYWJsZSB0aW1lcyBmb3IgYWRkaW5nIG5ldwo+Pj4+
PiBkb2N1bWVudHMgdG8gdGhlIGluZGV4LCByZXRyaWV2aW5nIGRvY3VtZW50cyBieSBJRCAoZm9y
IGl0ZXJhdGluZyBvdmVyCj4+Pj4+IGFsbAo+Pj4+PiBkb2N1bWVudHMpLCBvcHRpbWl6aW5nIHRo
ZSBpbmRleCBhZnRlciBhIHNlcmllcyBvZiBjaGFuZ2VzLCBldGMuCj4+Pj4+Cj4+Pj4+IEFueSBh
ZHZpY2UvaW5wdXQvdGhlb3JpZXMgYW55b25lIGNhbiBjb250cmlidXRlIHdvdWxkIGJlIGdyZWF0
bHkKPj4+Pj4gYXBwcmVjaWF0ZWQuCj4+Pj4+Cj4+Pj4+IFRoYW5rcywKPj4+Pj4gLQo+Pj4+PiBK
b2huCj4+Pj4+Cj4+Pj4+Cj4+Pj4gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCj4+Pj4gVG8gdW5zdWJzY3JpYmUsIGUt
bWFpbDogamF2YS11c2VyLXVuc3Vic2NyaWJlQGx1Y2VuZS5hcGFjaGUub3JnCj4+Pj4gRm9yIGFk
ZGl0aW9uYWwgY29tbWFuZHMsIGUtbWFpbDogamF2YS11c2VyLWhlbHBAbHVjZW5lLmFwYWNoZS5v
cmcKPj4+Pgo+Pj4KPj4+IFNlbmQgaW5zdGFudCBtZXNzYWdlcyB0byB5b3VyIG9ubGluZSBmcmll
bmRzCj4+PiBodHRwOi8vaW4ubWVzc2VuZ2VyLnlhaG9vLmNvbQo+Pj4gLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCj4+
PiBUbyB1bnN1YnNjcmliZSwgZS1tYWlsOiBqYXZhLXVzZXItdW5zdWJzY3JpYmVAbHVjZW5lLmFw
YWNoZS5vcmcKPj4+IEZvciBhZGRpdGlvbmFsIGNvbW1hbmRzLCBlLW1haWw6IGphdmEtdXNlci1o
ZWxwQGx1Y2VuZS5hcGFjaGUub3JnCj4+Pgo+Pj4KPj4gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0KPj4gR3JhbnQgSW5nZXJzb2xsCj4+IGh0dHA6Ly93d3cubHVjaWRpbWFnaW5hdGlvbi5jb20K
Pj4KPj4gTHVjZW5lIEhlbHBmdWwgSGludHM6Cj4+IGh0dHA6Ly93aWtpLmFwYWNoZS5vcmcvbHVj
ZW5lLWphdmEvQmFzaWNzT2ZQZXJmb3JtYW5jZQo+PiBodHRwOi8vd2lraS5hcGFjaGUub3JnL2x1
Y2VuZS1qYXZhL0x1Y2VuZUZBUQo+Pgo+Pgo+Pgo+Pgo+Pgo+Pgo+Pgo+Pgo+Pgo+PiAtLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0KPj4gVG8gdW5zdWJzY3JpYmUsIGUtbWFpbDogamF2YS11c2VyLXVuc3Vic2NyaWJlQGx1
Y2VuZS5hcGFjaGUub3JnCj4+IEZvciBhZGRpdGlvbmFsIGNvbW1hbmRzLCBlLW1haWw6IGphdmEt
dXNlci1oZWxwQGx1Y2VuZS5hcGFjaGUub3JnCj4+Cj4+Cj4K


From java-user-return-35194-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 29 13:57:24 2008
Return-Path: <java-user-return-35194-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 46775 invoked from network); 29 Jul 2008 13:57:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Jul 2008 13:57:24 -0000
Received: (qmail 4577 invoked by uid 500); 29 Jul 2008 13:57:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4542 invoked by uid 500); 29 Jul 2008 13:57:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4531 invoked by uid 99); 29 Jul 2008 13:57:16 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Jul 2008 06:57:16 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.119] (HELO spunkymail-a3.g.dreamhost.com) (208.97.132.119)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Jul 2008 13:56:19 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a3.g.dreamhost.com (Postfix) with ESMTP id ECADD15D4EF
	for <java-user@lucene.apache.org>; Tue, 29 Jul 2008 06:56:14 -0700 (PDT)
Message-Id: <6841D1B2-EF76-4B58-83CB-320DC4D6DAAC@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <8c4e68610807290621n6db7ecf3y60d05dbfee1bc5d6@mail.gmail.com>
Content-Type: text/plain; charset=UTF-8; format=flowed; delsp=yes
Content-Transfer-Encoding: quoted-printable
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: Using lucene as a database... good idea or bad idea?
Date: Tue, 29 Jul 2008 09:56:13 -0400
References: <6f7ea56f0807281853k1f898f5atc6beaf209e03f609@mail.gmail.com> <8c4e68610807290148h6595611dla895dd22e8af4548@mail.gmail.com> <006a01c8f15e$3f2e2df0$610cc30a@sv.us.sonicwall.com> <70A670C6-E5DB-4FBA-97F3-6FD00049441D@apache.org> <59a485a30807290543i3fbc39d7je153a4bda6faabcd@mail.gmail.com> <8c4e68610807290621n6db7ecf3y60d05dbfee1bc5d6@mail.gmail.com>
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org

Agreed, no one is saying should.  Additionally, Lucene can be faster =20
for a number of things like storage when databases are overkill (i.e. =20=

you don't need transactions, complex joins, etc.)  After all, even the =20=

lookup of a file, can be viewed as a "search", even if it is just for =20=

a single unique key and doesn't require any fuzziness.


On Jul 29, 2008, at 9:21 AM, Ian Lea wrote:

> I don't think that anyone in this thread has said "should", just
> "could" - it is a valid option (IMHO).  Personally, I use it as a
> store for lucene related data because I know and like and trust it, it
> is already there for this project so no need to introduce another
> software dependency, and because it is blindingly fast.
>
>
> --
> Ian.
>
>
> On Tue, Jul 29, 2008 at 1:43 PM, =E0=B2=A8=E0=B2=BE=E0=B2=97=E0=B3=87=E0=
=B2=B6=E0=B3=8D =20
> =E0=B2=B8=E0=B3=81=E0=B2=AC=E0=B3=8D=E0=B2=B0=E0=B2=B9=E0=B3=8D=E0=B2=AE=
=E0=B2=A3=E0=B3=8D=E0=B2=AF (Nagesh S)
> <nageshblore@gmail.com> wrote:
>> The way I see it, search solutions (on whatever scale) have three =20
>> components
>> - data aggregation, indexing/searching and presentation of results. I
>> thought, Lucene did the second part only.
>>
>> So, I do not quite follow, why should Lucene be used for datastore ?
>>
>> Nagesh
>>
>> On Tue, Jul 29, 2008 at 6:01 PM, Grant Ingersoll =20
>> <gsingers@apache.org>wrote:
>>
>>> I think the answer is it can be done and probably quite well.  I =20
>>> also think
>>> it's informative that Nutch does not use Lucene for this function, =20=

>>> as I
>>> understand it, but that shouldn't stop you either.  You might also =20=

>>> have a
>>> look at Apache Jackrabbit, which uses Lucene underneath as a content
>>> repository.
>>>
>>> -Grant
>>>
>>>
>>> On Jul 29, 2008, at 5:34 AM, Ganesh - yahoo wrote:
>>>
>>> Hello all,
>>>>
>>>> I am also interested in this. I want to archive the content of the
>>>> document using Lucene.
>>>>
>>>> Is it a good idea to use Lucene as storage engine?
>>>>
>>>> Regards
>>>> Ganesh
>>>>
>>>> ----- Original Message ----- From: "Ian Lea" <ian.lea@gmail.com>
>>>> To: <java-user@lucene.apache.org>
>>>> Sent: Tuesday, July 29, 2008 2:18 PM
>>>> Subject: Re: Using lucene as a database... good idea or bad idea?
>>>>
>>>>
>>>> John
>>>>>
>>>>>
>>>>> I think it's a great idea, and do exactly this to store 5 million+
>>>>> documents with info that it takes way too long to get out of our
>>>>> Oracle database (think days).  Not as many docs as you are talking
>>>>> about, and less data for each doc, but I wouldn't have any =20
>>>>> concerns
>>>>> about scaling.  There are certainly lucene indexes out there =20
>>>>> bigger
>>>>> than what you propose.  You can compress the stored data to save =20=

>>>>> some
>>>>> space.  Run times for optimization might get interesting but see
>>>>> recent threads for suggestions on that.  And since you are not too
>>>>> concerned about performance you may not need to optimize much, =20
>>>>> or even
>>>>> at all.
>>>>>
>>>>> Of course you need to remember that this is not a DBMS solution =20=

>>>>> in the
>>>>> sense of transactions, recovery, etc. but I'm sure you are already
>>>>> aware of that.
>>>>>
>>>>>
>>>>> --
>>>>> Ian.
>>>>>
>>>>>
>>>>> On Tue, Jul 29, 2008 at 2:53 AM, John Evans <john@jpevans.com> =20
>>>>> wrote:
>>>>>
>>>>>> Hi All,
>>>>>>
>>>>>> I have successfully used Lucene in the "tradtiional" way to =20
>>>>>> provide
>>>>>> full-text search for various websites.  Now I am tasked with =20
>>>>>> developing
>>>>>> a
>>>>>> data-store to back a web crawler.  The crawler can be =20
>>>>>> configured to
>>>>>> retrieve
>>>>>> arbitrary fields from arbitrary pages, so the result is that each
>>>>>> document
>>>>>> may have a random assortment of fields.  It seems like Lucene =20
>>>>>> may be a
>>>>>> natural fit for this scenario since you can obviously add =20
>>>>>> arbitrary
>>>>>> fields
>>>>>> to each document and you can store the actually data in the =20
>>>>>> database.
>>>>>> I've
>>>>>> done some research to make sure that it would meet all of our =20
>>>>>> individual
>>>>>> requirements (that we can iterate over documents, update
>>>>>> (delete/replace)
>>>>>> documents, etc.) and everything looks good.  I've also seen a =20
>>>>>> couple of
>>>>>> references around the net to other people trying similar =20
>>>>>> things...
>>>>>> however,
>>>>>> I know it's not meant to be used this way, so I thought I would =20=

>>>>>> post
>>>>>> here
>>>>>> and ask for guidance?  Has anyone done something similar?  Is =20
>>>>>> there any
>>>>>> specific reason to think this is a bad idea?
>>>>>>
>>>>>> The one thing that I am least certain about his how well it =20
>>>>>> will scale.
>>>>>> We
>>>>>> may reach the point where we have tens of millions of documents =20=

>>>>>> and a
>>>>>> high
>>>>>> percentage of those documents may be relatively large (10k-50k =20=

>>>>>> each).
>>>>>> We
>>>>>> actually would NOT be expecting/needing Lucene's normal extreme =20=

>>>>>> fast
>>>>>> text
>>>>>> search times for this, but we would need reasonable times for =20
>>>>>> adding new
>>>>>> documents to the index, retrieving documents by ID (for =20
>>>>>> iterating over
>>>>>> all
>>>>>> documents), optimizing the index after a series of changes, etc.
>>>>>>
>>>>>> Any advice/input/theories anyone can contribute would be greatly
>>>>>> appreciated.
>>>>>>
>>>>>> Thanks,
>>>>>> -
>>>>>> John
>>>>>>
>>>>>>
>>>>> =
---------------------------------------------------------------------
>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>
>>>>
>>>> Send instant messages to your online friends
>>>> http://in.messenger.yahoo.com
>>>> =
---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>> --------------------------
>>> Grant Ingersoll
>>> http://www.lucidimagination.com
>>>
>>> Lucene Helpful Hints:
>>> http://wiki.apache.org/lucene-java/BasicsOfPerformance
>>> http://wiki.apache.org/lucene-java/LuceneFAQ
>>>
>>>
>>>
>>>
>>>
>>>
>>>
>>>
>>>
>>> =
---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>

--------------------------
Grant Ingersoll
http://www.lucidimagination.com

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ








---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35195-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 29 14:02:49 2008
Return-Path: <java-user-return-35195-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 49313 invoked from network); 29 Jul 2008 14:02:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Jul 2008 14:02:49 -0000
Received: (qmail 12565 invoked by uid 500); 29 Jul 2008 14:02:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12519 invoked by uid 500); 29 Jul 2008 14:02:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12508 invoked by uid 99); 29 Jul 2008 14:02:42 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Jul 2008 07:02:42 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of nageshblore@gmail.com designates 64.233.182.190 as permitted sender)
Received: from [64.233.182.190] (HELO nf-out-0910.google.com) (64.233.182.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Jul 2008 14:01:47 +0000
Received: by nf-out-0910.google.com with SMTP id g16so1483188nfd.15
        for <java-user@lucene.apache.org>; Tue, 29 Jul 2008 07:02:12 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=sWcsIGepfjVR5rwC3YB415G6bxiOYhFeY/AZFZZtufU=;
        b=u18VT47hGnGXBMb63VIevqW2/xCC2diXE4PJcPBQSlJ75DONb9woFaajgtXpFGWSy7
         G5zoJZyg/eHgv3AKtNUD1QD57C/+VejZy+4/DfWICN92DJnmA5mizvJw1CwgUZrDP3f5
         CTVfMyrUxA8gSFChVbe0bhUvh5ZTry3WdqowE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=tSG5Pcadm4jrIFuPXQ/kyZKu1c3eum7s1fGiw095j9DP3NImD10lM/xIrwjOJGju/L
         YbVl7SoSkZ3N30GnXLCcFhXZQKnVvxINAz/vXzYHFqp3m1jmjsJGtHrlOsJ2iKdcgD0/
         iY2ovJW7sgXjMLUhdWrYvhj8pT/pR6/L2RNhg=
Received: by 10.210.10.1 with SMTP id 1mr7621300ebj.167.1217340130872;
        Tue, 29 Jul 2008 07:02:10 -0700 (PDT)
Received: by 10.210.52.2 with HTTP; Tue, 29 Jul 2008 07:02:10 -0700 (PDT)
Message-ID: <59a485a30807290702h41f387f0k97e7615c0a78bb05@mail.gmail.com>
Date: Tue, 29 Jul 2008 19:32:10 +0530
From: "=?UTF-8?B?4LKo4LK+4LKX4LOH4LK24LONIOCyuOCzgeCyrOCzjeCysOCyueCzjQ==?= =?UTF-8?B?4LKu4LKj4LON4LKvIChOYWdlc2ggUyk=?=" <nageshblore@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Using lucene as a database... good idea or bad idea?
In-Reply-To: <8c4e68610807290621n6db7ecf3y60d05dbfee1bc5d6@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_26342_17123671.1217340130876"
References: <6f7ea56f0807281853k1f898f5atc6beaf209e03f609@mail.gmail.com>
	 <8c4e68610807290148h6595611dla895dd22e8af4548@mail.gmail.com>
	 <006a01c8f15e$3f2e2df0$610cc30a@sv.us.sonicwall.com>
	 <70A670C6-E5DB-4FBA-97F3-6FD00049441D@apache.org>
	 <59a485a30807290543i3fbc39d7je153a4bda6faabcd@mail.gmail.com>
	 <8c4e68610807290621n6db7ecf3y60d05dbfee1bc5d6@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_26342_17123671.1217340130876
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: base64
Content-Disposition: inline

SGkgSWFuLApZZXMsIEkgc2VlIHRoYXQgd2UgYXJlIGRpc2N1c3NpbmcgYW4gIm9wdGlvbiIgaGVy
ZS4KCkJ1dCwgYXMgSSBzYWlkIGJlZm9yZSAodGhlIHRocmVlIHBhcnRzIHRvIHNlYXJjaC1iYXNl
ZCBzb2x1dGlvbiksIEkgZG8gbm90Cmtub3cgKGJ1dCwgd291bGQgbGlrZSB0byBrbm93KSBob3cg
THVjZW5lIChqYXZhIG9ubHkgLSBub3QgTnV0Y2gsIFNvbHIsCmV0Yy4pIGNhbiBiZSB1c2VkIGFz
IGEgZGF0YXN0b3JlLgoKQmFzaWNhbGx5LCBJIGFtIG5vdCBhYmxlIHRvIGNvbm5lY3QgImRhdGFi
YXNlIiBhbmQgTHVjZW5lIGphdmEuIDopCgpOYWdlc2gKCgpPbiBUdWUsIEp1bCAyOSwgMjAwOCBh
dCA2OjUxIFBNLCBJYW4gTGVhIDxpYW4ubGVhQGdtYWlsLmNvbT4gd3JvdGU6Cgo+IEkgZG9uJ3Qg
dGhpbmsgdGhhdCBhbnlvbmUgaW4gdGhpcyB0aHJlYWQgaGFzIHNhaWQgInNob3VsZCIsIGp1c3QK
PiAiY291bGQiIC0gaXQgaXMgYSB2YWxpZCBvcHRpb24gKElNSE8pLiAgUGVyc29uYWxseSwgSSB1
c2UgaXQgYXMgYQo+IHN0b3JlIGZvciBsdWNlbmUgcmVsYXRlZCBkYXRhIGJlY2F1c2UgSSBrbm93
IGFuZCBsaWtlIGFuZCB0cnVzdCBpdCwgaXQKPiBpcyBhbHJlYWR5IHRoZXJlIGZvciB0aGlzIHBy
b2plY3Qgc28gbm8gbmVlZCB0byBpbnRyb2R1Y2UgYW5vdGhlcgo+IHNvZnR3YXJlIGRlcGVuZGVu
Y3ksIGFuZCBiZWNhdXNlIGl0IGlzIGJsaW5kaW5nbHkgZmFzdC4KPgo+Cj4gLS0KPiBJYW4uCj4K
Pgo+IE9uIFR1ZSwgSnVsIDI5LCAyMDA4IGF0IDE6NDMgUE0sIOCyqOCyvuCyl+Czh+CytuCzjSDg
srjgs4Hgsqzgs43gsrDgsrngs43gsq7gsqPgs43gsq8gKE5hZ2VzaCBTKQo+IDxuYWdlc2hibG9y
ZUBnbWFpbC5jb20+IHdyb3RlOgo+ID4gVGhlIHdheSBJIHNlZSBpdCwgc2VhcmNoIHNvbHV0aW9u
cyAob24gd2hhdGV2ZXIgc2NhbGUpIGhhdmUgdGhyZWUKPiBjb21wb25lbnRzCj4gPiAtIGRhdGEg
YWdncmVnYXRpb24sIGluZGV4aW5nL3NlYXJjaGluZyBhbmQgcHJlc2VudGF0aW9uIG9mIHJlc3Vs
dHMuIEkKPiA+IHRob3VnaHQsIEx1Y2VuZSBkaWQgdGhlIHNlY29uZCBwYXJ0IG9ubHkuCj4gPgo+
ID4gU28sIEkgZG8gbm90IHF1aXRlIGZvbGxvdywgd2h5IHNob3VsZCBMdWNlbmUgYmUgdXNlZCBm
b3IgZGF0YXN0b3JlID8KPiA+Cj4gPiBOYWdlc2gKPiA+Cj4gPiBPbiBUdWUsIEp1bCAyOSwgMjAw
OCBhdCA2OjAxIFBNLCBHcmFudCBJbmdlcnNvbGwgPGdzaW5nZXJzQGFwYWNoZS5vcmcKPiA+d3Jv
dGU6Cj4gPgo+ID4+IEkgdGhpbmsgdGhlIGFuc3dlciBpcyBpdCBjYW4gYmUgZG9uZSBhbmQgcHJv
YmFibHkgcXVpdGUgd2VsbC4gIEkgYWxzbwo+IHRoaW5rCj4gPj4gaXQncyBpbmZvcm1hdGl2ZSB0
aGF0IE51dGNoIGRvZXMgbm90IHVzZSBMdWNlbmUgZm9yIHRoaXMgZnVuY3Rpb24sIGFzIEkKPiA+
PiB1bmRlcnN0YW5kIGl0LCBidXQgdGhhdCBzaG91bGRuJ3Qgc3RvcCB5b3UgZWl0aGVyLiAgWW91
IG1pZ2h0IGFsc28gaGF2ZQo+IGEKPiA+PiBsb29rIGF0IEFwYWNoZSBKYWNrcmFiYml0LCB3aGlj
aCB1c2VzIEx1Y2VuZSB1bmRlcm5lYXRoIGFzIGEgY29udGVudAo+ID4+IHJlcG9zaXRvcnkuCj4g
Pj4KPiA+PiAtR3JhbnQKPiA+Pgo+ID4+Cj4gPj4gT24gSnVsIDI5LCAyMDA4LCBhdCA1OjM0IEFN
LCBHYW5lc2ggLSB5YWhvbyB3cm90ZToKPiA+Pgo+ID4+ICBIZWxsbyBhbGwsCj4gPj4+Cj4gPj4+
IEkgYW0gYWxzbyBpbnRlcmVzdGVkIGluIHRoaXMuIEkgd2FudCB0byBhcmNoaXZlIHRoZSBjb250
ZW50IG9mIHRoZQo+ID4+PiBkb2N1bWVudCB1c2luZyBMdWNlbmUuCj4gPj4+Cj4gPj4+IElzIGl0
IGEgZ29vZCBpZGVhIHRvIHVzZSBMdWNlbmUgYXMgc3RvcmFnZSBlbmdpbmU/Cj4gPj4+Cj4gPj4+
IFJlZ2FyZHMKPiA+Pj4gR2FuZXNoCj4gPj4+Cj4gPj4+IC0tLS0tIE9yaWdpbmFsIE1lc3NhZ2Ug
LS0tLS0gRnJvbTogIklhbiBMZWEiIDxpYW4ubGVhQGdtYWlsLmNvbT4KPiA+Pj4gVG86IDxqYXZh
LXVzZXJAbHVjZW5lLmFwYWNoZS5vcmc+Cj4gPj4+IFNlbnQ6IFR1ZXNkYXksIEp1bHkgMjksIDIw
MDggMjoxOCBQTQo+ID4+PiBTdWJqZWN0OiBSZTogVXNpbmcgbHVjZW5lIGFzIGEgZGF0YWJhc2Uu
Li4gZ29vZCBpZGVhIG9yIGJhZCBpZGVhPwo+ID4+Pgo+ID4+Pgo+ID4+PiAgSm9obgo+ID4+Pj4K
PiA+Pj4+Cj4gPj4+PiBJIHRoaW5rIGl0J3MgYSBncmVhdCBpZGVhLCBhbmQgZG8gZXhhY3RseSB0
aGlzIHRvIHN0b3JlIDUgbWlsbGlvbisKPiA+Pj4+IGRvY3VtZW50cyB3aXRoIGluZm8gdGhhdCBp
dCB0YWtlcyB3YXkgdG9vIGxvbmcgdG8gZ2V0IG91dCBvZiBvdXIKPiA+Pj4+IE9yYWNsZSBkYXRh
YmFzZSAodGhpbmsgZGF5cykuICBOb3QgYXMgbWFueSBkb2NzIGFzIHlvdSBhcmUgdGFsa2luZwo+
ID4+Pj4gYWJvdXQsIGFuZCBsZXNzIGRhdGEgZm9yIGVhY2ggZG9jLCBidXQgSSB3b3VsZG4ndCBo
YXZlIGFueSBjb25jZXJucwo+ID4+Pj4gYWJvdXQgc2NhbGluZy4gIFRoZXJlIGFyZSBjZXJ0YWlu
bHkgbHVjZW5lIGluZGV4ZXMgb3V0IHRoZXJlIGJpZ2dlcgo+ID4+Pj4gdGhhbiB3aGF0IHlvdSBw
cm9wb3NlLiAgWW91IGNhbiBjb21wcmVzcyB0aGUgc3RvcmVkIGRhdGEgdG8gc2F2ZSBzb21lCj4g
Pj4+PiBzcGFjZS4gIFJ1biB0aW1lcyBmb3Igb3B0aW1pemF0aW9uIG1pZ2h0IGdldCBpbnRlcmVz
dGluZyBidXQgc2VlCj4gPj4+PiByZWNlbnQgdGhyZWFkcyBmb3Igc3VnZ2VzdGlvbnMgb24gdGhh
dC4gIEFuZCBzaW5jZSB5b3UgYXJlIG5vdCB0b28KPiA+Pj4+IGNvbmNlcm5lZCBhYm91dCBwZXJm
b3JtYW5jZSB5b3UgbWF5IG5vdCBuZWVkIHRvIG9wdGltaXplIG11Y2gsIG9yIGV2ZW4KPiA+Pj4+
IGF0IGFsbC4KPiA+Pj4+Cj4gPj4+PiBPZiBjb3Vyc2UgeW91IG5lZWQgdG8gcmVtZW1iZXIgdGhh
dCB0aGlzIGlzIG5vdCBhIERCTVMgc29sdXRpb24gaW4gdGhlCj4gPj4+PiBzZW5zZSBvZiB0cmFu
c2FjdGlvbnMsIHJlY292ZXJ5LCBldGMuIGJ1dCBJJ20gc3VyZSB5b3UgYXJlIGFscmVhZHkKPiA+
Pj4+IGF3YXJlIG9mIHRoYXQuCj4gPj4+Pgo+ID4+Pj4KPiA+Pj4+IC0tCj4gPj4+PiBJYW4uCj4g
Pj4+Pgo+ID4+Pj4KPiA+Pj4+IE9uIFR1ZSwgSnVsIDI5LCAyMDA4IGF0IDI6NTMgQU0sIEpvaG4g
RXZhbnMgPGpvaG5AanBldmFucy5jb20+IHdyb3RlOgo+ID4+Pj4KPiA+Pj4+PiBIaSBBbGwsCj4g
Pj4+Pj4KPiA+Pj4+PiBJIGhhdmUgc3VjY2Vzc2Z1bGx5IHVzZWQgTHVjZW5lIGluIHRoZSAidHJh
ZHRpaW9uYWwiIHdheSB0byBwcm92aWRlCj4gPj4+Pj4gZnVsbC10ZXh0IHNlYXJjaCBmb3IgdmFy
aW91cyB3ZWJzaXRlcy4gIE5vdyBJIGFtIHRhc2tlZCB3aXRoCj4gZGV2ZWxvcGluZwo+ID4+Pj4+
IGEKPiA+Pj4+PiBkYXRhLXN0b3JlIHRvIGJhY2sgYSB3ZWIgY3Jhd2xlci4gIFRoZSBjcmF3bGVy
IGNhbiBiZSBjb25maWd1cmVkIHRvCj4gPj4+Pj4gcmV0cmlldmUKPiA+Pj4+PiBhcmJpdHJhcnkg
ZmllbGRzIGZyb20gYXJiaXRyYXJ5IHBhZ2VzLCBzbyB0aGUgcmVzdWx0IGlzIHRoYXQgZWFjaAo+
ID4+Pj4+IGRvY3VtZW50Cj4gPj4+Pj4gbWF5IGhhdmUgYSByYW5kb20gYXNzb3J0bWVudCBvZiBm
aWVsZHMuICBJdCBzZWVtcyBsaWtlIEx1Y2VuZSBtYXkgYmUKPiBhCj4gPj4+Pj4gbmF0dXJhbCBm
aXQgZm9yIHRoaXMgc2NlbmFyaW8gc2luY2UgeW91IGNhbiBvYnZpb3VzbHkgYWRkIGFyYml0cmFy
eQo+ID4+Pj4+IGZpZWxkcwo+ID4+Pj4+IHRvIGVhY2ggZG9jdW1lbnQgYW5kIHlvdSBjYW4gc3Rv
cmUgdGhlIGFjdHVhbGx5IGRhdGEgaW4gdGhlIGRhdGFiYXNlLgo+ID4+Pj4+IEkndmUKPiA+Pj4+
PiBkb25lIHNvbWUgcmVzZWFyY2ggdG8gbWFrZSBzdXJlIHRoYXQgaXQgd291bGQgbWVldCBhbGwg
b2Ygb3VyCj4gaW5kaXZpZHVhbAo+ID4+Pj4+IHJlcXVpcmVtZW50cyAodGhhdCB3ZSBjYW4gaXRl
cmF0ZSBvdmVyIGRvY3VtZW50cywgdXBkYXRlCj4gPj4+Pj4gKGRlbGV0ZS9yZXBsYWNlKQo+ID4+
Pj4+IGRvY3VtZW50cywgZXRjLikgYW5kIGV2ZXJ5dGhpbmcgbG9va3MgZ29vZC4gIEkndmUgYWxz
byBzZWVuIGEgY291cGxlCj4gb2YKPiA+Pj4+PiByZWZlcmVuY2VzIGFyb3VuZCB0aGUgbmV0IHRv
IG90aGVyIHBlb3BsZSB0cnlpbmcgc2ltaWxhciB0aGluZ3MuLi4KPiA+Pj4+PiBob3dldmVyLAo+
ID4+Pj4+IEkga25vdyBpdCdzIG5vdCBtZWFudCB0byBiZSB1c2VkIHRoaXMgd2F5LCBzbyBJIHRo
b3VnaHQgSSB3b3VsZCBwb3N0Cj4gPj4+Pj4gaGVyZQo+ID4+Pj4+IGFuZCBhc2sgZm9yIGd1aWRh
bmNlPyAgSGFzIGFueW9uZSBkb25lIHNvbWV0aGluZyBzaW1pbGFyPyAgSXMgdGhlcmUKPiBhbnkK
PiA+Pj4+PiBzcGVjaWZpYyByZWFzb24gdG8gdGhpbmsgdGhpcyBpcyBhIGJhZCBpZGVhPwo+ID4+
Pj4+Cj4gPj4+Pj4gVGhlIG9uZSB0aGluZyB0aGF0IEkgYW0gbGVhc3QgY2VydGFpbiBhYm91dCBo
aXMgaG93IHdlbGwgaXQgd2lsbAo+IHNjYWxlLgo+ID4+Pj4+IFdlCj4gPj4+Pj4gbWF5IHJlYWNo
IHRoZSBwb2ludCB3aGVyZSB3ZSBoYXZlIHRlbnMgb2YgbWlsbGlvbnMgb2YgZG9jdW1lbnRzIGFu
ZCBhCj4gPj4+Pj4gaGlnaAo+ID4+Pj4+IHBlcmNlbnRhZ2Ugb2YgdGhvc2UgZG9jdW1lbnRzIG1h
eSBiZSByZWxhdGl2ZWx5IGxhcmdlICgxMGstNTBrIGVhY2gpLgo+ID4+Pj4+ICBXZQo+ID4+Pj4+
IGFjdHVhbGx5IHdvdWxkIE5PVCBiZSBleHBlY3RpbmcvbmVlZGluZyBMdWNlbmUncyBub3JtYWwg
ZXh0cmVtZSBmYXN0Cj4gPj4+Pj4gdGV4dAo+ID4+Pj4+IHNlYXJjaCB0aW1lcyBmb3IgdGhpcywg
YnV0IHdlIHdvdWxkIG5lZWQgcmVhc29uYWJsZSB0aW1lcyBmb3IgYWRkaW5nCj4gbmV3Cj4gPj4+
Pj4gZG9jdW1lbnRzIHRvIHRoZSBpbmRleCwgcmV0cmlldmluZyBkb2N1bWVudHMgYnkgSUQgKGZv
ciBpdGVyYXRpbmcKPiBvdmVyCj4gPj4+Pj4gYWxsCj4gPj4+Pj4gZG9jdW1lbnRzKSwgb3B0aW1p
emluZyB0aGUgaW5kZXggYWZ0ZXIgYSBzZXJpZXMgb2YgY2hhbmdlcywgZXRjLgo+ID4+Pj4+Cj4g
Pj4+Pj4gQW55IGFkdmljZS9pbnB1dC90aGVvcmllcyBhbnlvbmUgY2FuIGNvbnRyaWJ1dGUgd291
bGQgYmUgZ3JlYXRseQo+ID4+Pj4+IGFwcHJlY2lhdGVkLgo+ID4+Pj4+Cj4gPj4+Pj4gVGhhbmtz
LAo+ID4+Pj4+IC0KPiA+Pj4+PiBKb2huCj4gPj4+Pj4KPiA+Pj4+Pgo+ID4+Pj4gLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tCj4gPj4+PiBUbyB1bnN1YnNjcmliZSwgZS1tYWlsOiBqYXZhLXVzZXItdW5zdWJzY3JpYmVA
bHVjZW5lLmFwYWNoZS5vcmcKPiA+Pj4+IEZvciBhZGRpdGlvbmFsIGNvbW1hbmRzLCBlLW1haWw6
IGphdmEtdXNlci1oZWxwQGx1Y2VuZS5hcGFjaGUub3JnCj4gPj4+Pgo+ID4+Pgo+ID4+PiBTZW5k
IGluc3RhbnQgbWVzc2FnZXMgdG8geW91ciBvbmxpbmUgZnJpZW5kcwo+ID4+PiBodHRwOi8vaW4u
bWVzc2VuZ2VyLnlhaG9vLmNvbQo+ID4+PiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KPiA+Pj4gVG8gdW5zdWJzY3Jp
YmUsIGUtbWFpbDogamF2YS11c2VyLXVuc3Vic2NyaWJlQGx1Y2VuZS5hcGFjaGUub3JnCj4gPj4+
IEZvciBhZGRpdGlvbmFsIGNvbW1hbmRzLCBlLW1haWw6IGphdmEtdXNlci1oZWxwQGx1Y2VuZS5h
cGFjaGUub3JnCj4gPj4+Cj4gPj4+Cj4gPj4gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KPiA+
PiBHcmFudCBJbmdlcnNvbGwKPiA+PiBodHRwOi8vd3d3Lmx1Y2lkaW1hZ2luYXRpb24uY29tCj4g
Pj4KPiA+PiBMdWNlbmUgSGVscGZ1bCBIaW50czoKPiA+PiBodHRwOi8vd2lraS5hcGFjaGUub3Jn
L2x1Y2VuZS1qYXZhL0Jhc2ljc09mUGVyZm9ybWFuY2UKPiA+PiBodHRwOi8vd2lraS5hcGFjaGUu
b3JnL2x1Y2VuZS1qYXZhL0x1Y2VuZUZBUQo+ID4+Cj4gPj4KPiA+Pgo+ID4+Cj4gPj4KPiA+Pgo+
ID4+Cj4gPj4KPiA+Pgo+ID4+IC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQo+ID4+IFRvIHVuc3Vic2NyaWJlLCBlLW1h
aWw6IGphdmEtdXNlci11bnN1YnNjcmliZUBsdWNlbmUuYXBhY2hlLm9yZwo+ID4+IEZvciBhZGRp
dGlvbmFsIGNvbW1hbmRzLCBlLW1haWw6IGphdmEtdXNlci1oZWxwQGx1Y2VuZS5hcGFjaGUub3Jn
Cj4gPj4KPiA+Pgo+ID4KPgo=
------=_Part_26342_17123671.1217340130876--

From java-user-return-35196-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 29 14:08:42 2008
Return-Path: <java-user-return-35196-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 50548 invoked from network); 29 Jul 2008 14:08:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Jul 2008 14:08:42 -0000
Received: (qmail 18954 invoked by uid 500); 29 Jul 2008 14:08:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18916 invoked by uid 500); 29 Jul 2008 14:08:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18905 invoked by uid 99); 29 Jul 2008 14:08:35 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Jul 2008 07:08:35 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of Aravind.Yarram@equifax.com designates 216.46.96.104 as permitted sender)
Received: from [216.46.96.104] (HELO smtp12.atl.equifax.com) (216.46.96.104)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Jul 2008 14:07:39 +0000
Received: from postoffice21.equifax.com (unknown [192.168.4.42])
	by smtp12.atl.equifax.com (Postfix) with ESMTP id 47A3F3319
	for <java-user@lucene.apache.org>; Tue, 29 Jul 2008 10:00:01 -0400 (EDT)
Received: from 172.18.152.142 (wetcisdlppsmtp2.fin.equifax.com [172.18.152.142])
	by postoffice21.equifax.com (Symantec Mail Security) with SMTP id 9863A558004
	for <java-user@lucene.apache.org>; Tue, 29 Jul 2008 10:06:31 -0400 (EDT)
X-AuditID: c0a8042a-a870fbb000000b62-bd-488f23e77d6a
Received: from noteswetc12.fin.equifax.com (noteswetc12.fin.equifax.com [172.18.113.62])
	by postoffice21.equifax.com (Symantec Mail Security) with ESMTP id 50658558002
	for <java-user@lucene.apache.org>; Tue, 29 Jul 2008 10:06:31 -0400 (EDT)
In-Reply-To: <59a485a30807290702h41f387f0k97e7615c0a78bb05@mail.gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Using lucene as a database... good idea or bad idea?
Message-ID: <OF61309802.505323C0-ON85257495.004D8FF9-85257495.004D9879@fin.equifax.com>
Date: Tue, 29 Jul 2008 10:07:48 -0400
From: Aravind.Yarram@equifax.com
Content-Type: multipart/alternative; boundary="=_alternative 004D985B85257495_="
MIME-Version: 1.0
X-Mailer: Lotus Notes Release 6.5.5  CCH1 March 07, 2006
X-Disclaimed: 35799
X-Brightmail-Tracker: AAAAAA==
X-CFilter-Loop: Reflected
X-Virus-Checked: Checked by ClamAV on apache.org

--=_alternative 004D985B85257495_=
Content-Type: text/plain; charset="UTF-8"
Content-Transfer-Encoding: base64

TG9vayBhdCBDb21wYXNzIHdyYXBwZXIgZm9yIEx1Y2VuZS4uLg0KDQpSZWdhcmRzLCANCkFyYXZp
bmQgUiBZYXJyYW0NCkVuYWJsaW5nIFRlY2hub2xvZ2llcw0KRXF1aWZheCBJbmZvcm1hdGlvbiBT
ZXJ2aWNlcyBMTEMNCjE1MjUgV2luZHdhcmQgQ29uY291cnNlLCBKNDJFDQpBbHBoYXJldHRhLCBH
QSAzMDAwNQ0KZGVzazogNzcwIDc0MCA2OTUxDQplbWFpbDogYXJhdmluZC55YXJyYW1AZXF1aWZh
eC5jb20gDQoNCg0KDQoi4LKo4LK+4LKX4LOH4LK24LONIOCyuOCzgeCyrOCzjeCysOCyueCzjeCy
ruCyo+CzjeCyryAoTmFnZXNoIFMpIiA8bmFnZXNoYmxvcmVAZ21haWwuY29tPiANCjA3LzI5LzIw
MDggMTA6MDIgQU0NClBsZWFzZSByZXNwb25kIHRvDQpqYXZhLXVzZXJAbHVjZW5lLmFwYWNoZS5v
cmcNCg0KDQpUbw0KamF2YS11c2VyQGx1Y2VuZS5hcGFjaGUub3JnDQpjYw0KDQpTdWJqZWN0DQpS
ZTogVXNpbmcgbHVjZW5lIGFzIGEgZGF0YWJhc2UuLi4gZ29vZCBpZGVhIG9yIGJhZCBpZGVhPw0K
DQoNCg0KDQoNCg0KSGkgSWFuLA0KWWVzLCBJIHNlZSB0aGF0IHdlIGFyZSBkaXNjdXNzaW5nIGFu
ICJvcHRpb24iIGhlcmUuDQoNCkJ1dCwgYXMgSSBzYWlkIGJlZm9yZSAodGhlIHRocmVlIHBhcnRz
IHRvIHNlYXJjaC1iYXNlZCBzb2x1dGlvbiksIEkgZG8gbm90DQprbm93IChidXQsIHdvdWxkIGxp
a2UgdG8ga25vdykgaG93IEx1Y2VuZSAoamF2YSBvbmx5IC0gbm90IE51dGNoLCBTb2xyLA0KZXRj
LikgY2FuIGJlIHVzZWQgYXMgYSBkYXRhc3RvcmUuDQoNCkJhc2ljYWxseSwgSSBhbSBub3QgYWJs
ZSB0byBjb25uZWN0ICJkYXRhYmFzZSIgYW5kIEx1Y2VuZSBqYXZhLiA6KQ0KDQpOYWdlc2gNCg0K
DQpPbiBUdWUsIEp1bCAyOSwgMjAwOCBhdCA2OjUxIFBNLCBJYW4gTGVhIDxpYW4ubGVhQGdtYWls
LmNvbT4gd3JvdGU6DQoNCj4gSSBkb24ndCB0aGluayB0aGF0IGFueW9uZSBpbiB0aGlzIHRocmVh
ZCBoYXMgc2FpZCAic2hvdWxkIiwganVzdA0KPiAiY291bGQiIC0gaXQgaXMgYSB2YWxpZCBvcHRp
b24gKElNSE8pLiAgUGVyc29uYWxseSwgSSB1c2UgaXQgYXMgYQ0KPiBzdG9yZSBmb3IgbHVjZW5l
IHJlbGF0ZWQgZGF0YSBiZWNhdXNlIEkga25vdyBhbmQgbGlrZSBhbmQgdHJ1c3QgaXQsIGl0DQo+
IGlzIGFscmVhZHkgdGhlcmUgZm9yIHRoaXMgcHJvamVjdCBzbyBubyBuZWVkIHRvIGludHJvZHVj
ZSBhbm90aGVyDQo+IHNvZnR3YXJlIGRlcGVuZGVuY3ksIGFuZCBiZWNhdXNlIGl0IGlzIGJsaW5k
aW5nbHkgZmFzdC4NCj4NCj4NCj4gLS0NCj4gSWFuLg0KPg0KPg0KPiBPbiBUdWUsIEp1bCAyOSwg
MjAwOCBhdCAxOjQzIFBNLCDgsqjgsr7gspfgs4fgsrbgs40g4LK44LOB4LKs4LON4LKw4LK54LON
4LKu4LKj4LON4LKvIA0KKE5hZ2VzaCBTKQ0KPiA8bmFnZXNoYmxvcmVAZ21haWwuY29tPiB3cm90
ZToNCj4gPiBUaGUgd2F5IEkgc2VlIGl0LCBzZWFyY2ggc29sdXRpb25zIChvbiB3aGF0ZXZlciBz
Y2FsZSkgaGF2ZSB0aHJlZQ0KPiBjb21wb25lbnRzDQo+ID4gLSBkYXRhIGFnZ3JlZ2F0aW9uLCBp
bmRleGluZy9zZWFyY2hpbmcgYW5kIHByZXNlbnRhdGlvbiBvZiByZXN1bHRzLiBJDQo+ID4gdGhv
dWdodCwgTHVjZW5lIGRpZCB0aGUgc2Vjb25kIHBhcnQgb25seS4NCj4gPg0KPiA+IFNvLCBJIGRv
IG5vdCBxdWl0ZSBmb2xsb3csIHdoeSBzaG91bGQgTHVjZW5lIGJlIHVzZWQgZm9yIGRhdGFzdG9y
ZSA/DQo+ID4NCj4gPiBOYWdlc2gNCj4gPg0KPiA+IE9uIFR1ZSwgSnVsIDI5LCAyMDA4IGF0IDY6
MDEgUE0sIEdyYW50IEluZ2Vyc29sbCA8Z3NpbmdlcnNAYXBhY2hlLm9yZw0KPiA+d3JvdGU6DQo+
ID4NCj4gPj4gSSB0aGluayB0aGUgYW5zd2VyIGlzIGl0IGNhbiBiZSBkb25lIGFuZCBwcm9iYWJs
eSBxdWl0ZSB3ZWxsLiAgSSBhbHNvDQo+IHRoaW5rDQo+ID4+IGl0J3MgaW5mb3JtYXRpdmUgdGhh
dCBOdXRjaCBkb2VzIG5vdCB1c2UgTHVjZW5lIGZvciB0aGlzIGZ1bmN0aW9uLCBhcyANCkkNCj4g
Pj4gdW5kZXJzdGFuZCBpdCwgYnV0IHRoYXQgc2hvdWxkbid0IHN0b3AgeW91IGVpdGhlci4gIFlv
dSBtaWdodCBhbHNvIA0KaGF2ZQ0KPiBhDQo+ID4+IGxvb2sgYXQgQXBhY2hlIEphY2tyYWJiaXQs
IHdoaWNoIHVzZXMgTHVjZW5lIHVuZGVybmVhdGggYXMgYSBjb250ZW50DQo+ID4+IHJlcG9zaXRv
cnkuDQo+ID4+DQo+ID4+IC1HcmFudA0KPiA+Pg0KPiA+Pg0KPiA+PiBPbiBKdWwgMjksIDIwMDgs
IGF0IDU6MzQgQU0sIEdhbmVzaCAtIHlhaG9vIHdyb3RlOg0KPiA+Pg0KPiA+PiAgSGVsbG8gYWxs
LA0KPiA+Pj4NCj4gPj4+IEkgYW0gYWxzbyBpbnRlcmVzdGVkIGluIHRoaXMuIEkgd2FudCB0byBh
cmNoaXZlIHRoZSBjb250ZW50IG9mIHRoZQ0KPiA+Pj4gZG9jdW1lbnQgdXNpbmcgTHVjZW5lLg0K
PiA+Pj4NCj4gPj4+IElzIGl0IGEgZ29vZCBpZGVhIHRvIHVzZSBMdWNlbmUgYXMgc3RvcmFnZSBl
bmdpbmU/DQo+ID4+Pg0KPiA+Pj4gUmVnYXJkcw0KPiA+Pj4gR2FuZXNoDQo+ID4+Pg0KPiA+Pj4g
LS0tLS0gT3JpZ2luYWwgTWVzc2FnZSAtLS0tLSBGcm9tOiAiSWFuIExlYSIgPGlhbi5sZWFAZ21h
aWwuY29tPg0KPiA+Pj4gVG86IDxqYXZhLXVzZXJAbHVjZW5lLmFwYWNoZS5vcmc+DQo+ID4+PiBT
ZW50OiBUdWVzZGF5LCBKdWx5IDI5LCAyMDA4IDI6MTggUE0NCj4gPj4+IFN1YmplY3Q6IFJlOiBV
c2luZyBsdWNlbmUgYXMgYSBkYXRhYmFzZS4uLiBnb29kIGlkZWEgb3IgYmFkIGlkZWE/DQo+ID4+
Pg0KPiA+Pj4NCj4gPj4+ICBKb2huDQo+ID4+Pj4NCj4gPj4+Pg0KPiA+Pj4+IEkgdGhpbmsgaXQn
cyBhIGdyZWF0IGlkZWEsIGFuZCBkbyBleGFjdGx5IHRoaXMgdG8gc3RvcmUgNSBtaWxsaW9uKw0K
PiA+Pj4+IGRvY3VtZW50cyB3aXRoIGluZm8gdGhhdCBpdCB0YWtlcyB3YXkgdG9vIGxvbmcgdG8g
Z2V0IG91dCBvZiBvdXINCj4gPj4+PiBPcmFjbGUgZGF0YWJhc2UgKHRoaW5rIGRheXMpLiAgTm90
IGFzIG1hbnkgZG9jcyBhcyB5b3UgYXJlIHRhbGtpbmcNCj4gPj4+PiBhYm91dCwgYW5kIGxlc3Mg
ZGF0YSBmb3IgZWFjaCBkb2MsIGJ1dCBJIHdvdWxkbid0IGhhdmUgYW55IGNvbmNlcm5zDQo+ID4+
Pj4gYWJvdXQgc2NhbGluZy4gIFRoZXJlIGFyZSBjZXJ0YWlubHkgbHVjZW5lIGluZGV4ZXMgb3V0
IHRoZXJlIGJpZ2dlcg0KPiA+Pj4+IHRoYW4gd2hhdCB5b3UgcHJvcG9zZS4gIFlvdSBjYW4gY29t
cHJlc3MgdGhlIHN0b3JlZCBkYXRhIHRvIHNhdmUgDQpzb21lDQo+ID4+Pj4gc3BhY2UuICBSdW4g
dGltZXMgZm9yIG9wdGltaXphdGlvbiBtaWdodCBnZXQgaW50ZXJlc3RpbmcgYnV0IHNlZQ0KPiA+
Pj4+IHJlY2VudCB0aHJlYWRzIGZvciBzdWdnZXN0aW9ucyBvbiB0aGF0LiAgQW5kIHNpbmNlIHlv
dSBhcmUgbm90IHRvbw0KPiA+Pj4+IGNvbmNlcm5lZCBhYm91dCBwZXJmb3JtYW5jZSB5b3UgbWF5
IG5vdCBuZWVkIHRvIG9wdGltaXplIG11Y2gsIG9yIA0KZXZlbg0KPiA+Pj4+IGF0IGFsbC4NCj4g
Pj4+Pg0KPiA+Pj4+IE9mIGNvdXJzZSB5b3UgbmVlZCB0byByZW1lbWJlciB0aGF0IHRoaXMgaXMg
bm90IGEgREJNUyBzb2x1dGlvbiBpbiANCnRoZQ0KPiA+Pj4+IHNlbnNlIG9mIHRyYW5zYWN0aW9u
cywgcmVjb3ZlcnksIGV0Yy4gYnV0IEknbSBzdXJlIHlvdSBhcmUgYWxyZWFkeQ0KPiA+Pj4+IGF3
YXJlIG9mIHRoYXQuDQo+ID4+Pj4NCj4gPj4+Pg0KPiA+Pj4+IC0tDQo+ID4+Pj4gSWFuLg0KPiA+
Pj4+DQo+ID4+Pj4NCj4gPj4+PiBPbiBUdWUsIEp1bCAyOSwgMjAwOCBhdCAyOjUzIEFNLCBKb2hu
IEV2YW5zIDxqb2huQGpwZXZhbnMuY29tPiANCndyb3RlOg0KPiA+Pj4+DQo+ID4+Pj4+IEhpIEFs
bCwNCj4gPj4+Pj4NCj4gPj4+Pj4gSSBoYXZlIHN1Y2Nlc3NmdWxseSB1c2VkIEx1Y2VuZSBpbiB0
aGUgInRyYWR0aWlvbmFsIiB3YXkgdG8gDQpwcm92aWRlDQo+ID4+Pj4+IGZ1bGwtdGV4dCBzZWFy
Y2ggZm9yIHZhcmlvdXMgd2Vic2l0ZXMuICBOb3cgSSBhbSB0YXNrZWQgd2l0aA0KPiBkZXZlbG9w
aW5nDQo+ID4+Pj4+IGENCj4gPj4+Pj4gZGF0YS1zdG9yZSB0byBiYWNrIGEgd2ViIGNyYXdsZXIu
ICBUaGUgY3Jhd2xlciBjYW4gYmUgY29uZmlndXJlZCANCnRvDQo+ID4+Pj4+IHJldHJpZXZlDQo+
ID4+Pj4+IGFyYml0cmFyeSBmaWVsZHMgZnJvbSBhcmJpdHJhcnkgcGFnZXMsIHNvIHRoZSByZXN1
bHQgaXMgdGhhdCBlYWNoDQo+ID4+Pj4+IGRvY3VtZW50DQo+ID4+Pj4+IG1heSBoYXZlIGEgcmFu
ZG9tIGFzc29ydG1lbnQgb2YgZmllbGRzLiAgSXQgc2VlbXMgbGlrZSBMdWNlbmUgbWF5IA0KYmUN
Cj4gYQ0KPiA+Pj4+PiBuYXR1cmFsIGZpdCBmb3IgdGhpcyBzY2VuYXJpbyBzaW5jZSB5b3UgY2Fu
IG9idmlvdXNseSBhZGQgDQphcmJpdHJhcnkNCj4gPj4+Pj4gZmllbGRzDQo+ID4+Pj4+IHRvIGVh
Y2ggZG9jdW1lbnQgYW5kIHlvdSBjYW4gc3RvcmUgdGhlIGFjdHVhbGx5IGRhdGEgaW4gdGhlIA0K
ZGF0YWJhc2UuDQo+ID4+Pj4+IEkndmUNCj4gPj4+Pj4gZG9uZSBzb21lIHJlc2VhcmNoIHRvIG1h
a2Ugc3VyZSB0aGF0IGl0IHdvdWxkIG1lZXQgYWxsIG9mIG91cg0KPiBpbmRpdmlkdWFsDQo+ID4+
Pj4+IHJlcXVpcmVtZW50cyAodGhhdCB3ZSBjYW4gaXRlcmF0ZSBvdmVyIGRvY3VtZW50cywgdXBk
YXRlDQo+ID4+Pj4+IChkZWxldGUvcmVwbGFjZSkNCj4gPj4+Pj4gZG9jdW1lbnRzLCBldGMuKSBh
bmQgZXZlcnl0aGluZyBsb29rcyBnb29kLiAgSSd2ZSBhbHNvIHNlZW4gYSANCmNvdXBsZQ0KPiBv
Zg0KPiA+Pj4+PiByZWZlcmVuY2VzIGFyb3VuZCB0aGUgbmV0IHRvIG90aGVyIHBlb3BsZSB0cnlp
bmcgc2ltaWxhciB0aGluZ3MuLi4NCj4gPj4+Pj4gaG93ZXZlciwNCj4gPj4+Pj4gSSBrbm93IGl0
J3Mgbm90IG1lYW50IHRvIGJlIHVzZWQgdGhpcyB3YXksIHNvIEkgdGhvdWdodCBJIHdvdWxkIA0K
cG9zdA0KPiA+Pj4+PiBoZXJlDQo+ID4+Pj4+IGFuZCBhc2sgZm9yIGd1aWRhbmNlPyAgSGFzIGFu
eW9uZSBkb25lIHNvbWV0aGluZyBzaW1pbGFyPyAgSXMgDQp0aGVyZQ0KPiBhbnkNCj4gPj4+Pj4g
c3BlY2lmaWMgcmVhc29uIHRvIHRoaW5rIHRoaXMgaXMgYSBiYWQgaWRlYT8NCj4gPj4+Pj4NCj4g
Pj4+Pj4gVGhlIG9uZSB0aGluZyB0aGF0IEkgYW0gbGVhc3QgY2VydGFpbiBhYm91dCBoaXMgaG93
IHdlbGwgaXQgd2lsbA0KPiBzY2FsZS4NCj4gPj4+Pj4gV2UNCj4gPj4+Pj4gbWF5IHJlYWNoIHRo
ZSBwb2ludCB3aGVyZSB3ZSBoYXZlIHRlbnMgb2YgbWlsbGlvbnMgb2YgZG9jdW1lbnRzIA0KYW5k
IGENCj4gPj4+Pj4gaGlnaA0KPiA+Pj4+PiBwZXJjZW50YWdlIG9mIHRob3NlIGRvY3VtZW50cyBt
YXkgYmUgcmVsYXRpdmVseSBsYXJnZSAoMTBrLTUwayANCmVhY2gpLg0KPiA+Pj4+PiAgV2UNCj4g
Pj4+Pj4gYWN0dWFsbHkgd291bGQgTk9UIGJlIGV4cGVjdGluZy9uZWVkaW5nIEx1Y2VuZSdzIG5v
cm1hbCBleHRyZW1lIA0KZmFzdA0KPiA+Pj4+PiB0ZXh0DQo+ID4+Pj4+IHNlYXJjaCB0aW1lcyBm
b3IgdGhpcywgYnV0IHdlIHdvdWxkIG5lZWQgcmVhc29uYWJsZSB0aW1lcyBmb3IgDQphZGRpbmcN
Cj4gbmV3DQo+ID4+Pj4+IGRvY3VtZW50cyB0byB0aGUgaW5kZXgsIHJldHJpZXZpbmcgZG9jdW1l
bnRzIGJ5IElEIChmb3IgaXRlcmF0aW5nDQo+IG92ZXINCj4gPj4+Pj4gYWxsDQo+ID4+Pj4+IGRv
Y3VtZW50cyksIG9wdGltaXppbmcgdGhlIGluZGV4IGFmdGVyIGEgc2VyaWVzIG9mIGNoYW5nZXMs
IGV0Yy4NCj4gPj4+Pj4NCj4gPj4+Pj4gQW55IGFkdmljZS9pbnB1dC90aGVvcmllcyBhbnlvbmUg
Y2FuIGNvbnRyaWJ1dGUgd291bGQgYmUgZ3JlYXRseQ0KPiA+Pj4+PiBhcHByZWNpYXRlZC4NCj4g
Pj4+Pj4NCj4gPj4+Pj4gVGhhbmtzLA0KPiA+Pj4+PiAtDQo+ID4+Pj4+IEpvaG4NCj4gPj4+Pj4N
Cj4gPj4+Pj4NCj4gPj4+PiANCi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KPiA+Pj4+IFRvIHVuc3Vic2NyaWJlLCBl
LW1haWw6IGphdmEtdXNlci11bnN1YnNjcmliZUBsdWNlbmUuYXBhY2hlLm9yZw0KPiA+Pj4+IEZv
ciBhZGRpdGlvbmFsIGNvbW1hbmRzLCBlLW1haWw6IGphdmEtdXNlci1oZWxwQGx1Y2VuZS5hcGFj
aGUub3JnDQo+ID4+Pj4NCj4gPj4+DQo+ID4+PiBTZW5kIGluc3RhbnQgbWVzc2FnZXMgdG8geW91
ciBvbmxpbmUgZnJpZW5kcw0KPiA+Pj4gaHR0cDovL2luLm1lc3Nlbmdlci55YWhvby5jb20NCj4g
Pj4+IA0KLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tDQo+ID4+PiBUbyB1bnN1YnNjcmliZSwgZS1tYWlsOiBqYXZhLXVz
ZXItdW5zdWJzY3JpYmVAbHVjZW5lLmFwYWNoZS5vcmcNCj4gPj4+IEZvciBhZGRpdGlvbmFsIGNv
bW1hbmRzLCBlLW1haWw6IGphdmEtdXNlci1oZWxwQGx1Y2VuZS5hcGFjaGUub3JnDQo+ID4+Pg0K
PiA+Pj4NCj4gPj4gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCj4gPj4gR3JhbnQgSW5nZXJz
b2xsDQo+ID4+IGh0dHA6Ly93d3cubHVjaWRpbWFnaW5hdGlvbi5jb20NCj4gPj4NCj4gPj4gTHVj
ZW5lIEhlbHBmdWwgSGludHM6DQo+ID4+IGh0dHA6Ly93aWtpLmFwYWNoZS5vcmcvbHVjZW5lLWph
dmEvQmFzaWNzT2ZQZXJmb3JtYW5jZQ0KPiA+PiBodHRwOi8vd2lraS5hcGFjaGUub3JnL2x1Y2Vu
ZS1qYXZhL0x1Y2VuZUZBUQ0KPiA+Pg0KPiA+Pg0KPiA+Pg0KPiA+Pg0KPiA+Pg0KPiA+Pg0KPiA+
Pg0KPiA+Pg0KPiA+Pg0KPiA+PiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCj4gPj4gVG8gdW5zdWJzY3JpYmUsIGUt
bWFpbDogamF2YS11c2VyLXVuc3Vic2NyaWJlQGx1Y2VuZS5hcGFjaGUub3JnDQo+ID4+IEZvciBh
ZGRpdGlvbmFsIGNvbW1hbmRzLCBlLW1haWw6IGphdmEtdXNlci1oZWxwQGx1Y2VuZS5hcGFjaGUu
b3JnDQo+ID4+DQo+ID4+DQo+ID4NCj4NCg0KDQpUaGlzIG1lc3NhZ2UgY29udGFpbnMgaW5mb3Jt
YXRpb24gZnJvbSBFcXVpZmF4IEluYy4gd2hpY2ggbWF5IGJlIGNvbmZpZGVudGlhbCBhbmQgcHJp
dmlsZWdlZC4gIElmIHlvdSBhcmUgbm90IGFuIGludGVuZGVkIHJlY2lwaWVudCwgcGxlYXNlIHJl
ZnJhaW4gZnJvbSBhbnkgZGlzY2xvc3VyZSwgY29weWluZywgZGlzdHJpYnV0aW9uIG9yIHVzZSBv
ZiB0aGlzIGluZm9ybWF0aW9uIGFuZCBub3RlIHRoYXQgc3VjaCBhY3Rpb25zIGFyZSBwcm9oaWJp
dGVkLiAgSWYgeW91IGhhdmUgcmVjZWl2ZWQgdGhpcyB0cmFuc21pc3Npb24gaW4gZXJyb3IsIHBs
ZWFzZSBub3RpZnkgYnkgZS1tYWlsIHBvc3RtYXN0ZXJAZXF1aWZheC5jb20uDQoNCg==
--=_alternative 004D985B85257495_=--

From java-user-return-35197-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 29 14:26:41 2008
Return-Path: <java-user-return-35197-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59523 invoked from network); 29 Jul 2008 14:26:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Jul 2008 14:26:41 -0000
Received: (qmail 45411 invoked by uid 500); 29 Jul 2008 14:26:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45384 invoked by uid 500); 29 Jul 2008 14:26:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45373 invoked by uid 99); 29 Jul 2008 14:26:34 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Jul 2008 07:26:34 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.66] (HELO spunkymail-a8.g.dreamhost.com) (208.97.132.66)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Jul 2008 14:25:37 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a8.g.dreamhost.com (Postfix) with ESMTP id 0066810BEDB
	for <java-user@lucene.apache.org>; Tue, 29 Jul 2008 07:25:32 -0700 (PDT)
Message-Id: <3B1DCAA8-D665-4ADF-9F6A-C864BC894896@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <59a485a30807290702h41f387f0k97e7615c0a78bb05@mail.gmail.com>
Content-Type: text/plain; charset=UTF-8; format=flowed; delsp=yes
Content-Transfer-Encoding: quoted-printable
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: Using lucene as a database... good idea or bad idea?
Date: Tue, 29 Jul 2008 10:25:31 -0400
References: <6f7ea56f0807281853k1f898f5atc6beaf209e03f609@mail.gmail.com> <8c4e68610807290148h6595611dla895dd22e8af4548@mail.gmail.com> <006a01c8f15e$3f2e2df0$610cc30a@sv.us.sonicwall.com> <70A670C6-E5DB-4FBA-97F3-6FD00049441D@apache.org> <59a485a30807290543i3fbc39d7je153a4bda6faabcd@mail.gmail.com> <8c4e68610807290621n6db7ecf3y60d05dbfee1bc5d6@mail.gmail.com> <59a485a30807290702h41f387f0k97e7615c0a78bb05@mail.gmail.com>
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org

Don't connect "database" (i.e. SQL, transactions, etc.) and Lucene.  =20
Connect data storage with simple, fast lookup and Lucene.

One field is the key (i.e. the filename) the other field is a binary, =20=

stored Field containing the contents of the file.  Of course, there =20
are other ways of slicing and dicing, such that one can search (in the =20=

fuzzy sense) the content and the key by adding tokenization, etc.  =20
This is the more traditional model for Lucene

Also, have a look at Apache Jackrabbit.  It is a content repository =20
that is implemented with Lucene.

-Grant

On Jul 29, 2008, at 10:02 AM, =E0=B2=A8=E0=B2=BE=E0=B2=97=E0=B3=87=E0=B2=B6=
=E0=B3=8D =20
=E0=B2=B8=E0=B3=81=E0=B2=AC=E0=B3=8D=E0=B2=B0=E0=B2=B9=E0=B3=8D=E0=B2=AE=E0=
=B2=A3=E0=B3=8D=E0=B2=AF (Nagesh S) wrote:

> Hi Ian,
> Yes, I see that we are discussing an "option" here.
>
> But, as I said before (the three parts to search-based solution), I =20=

> do not
> know (but, would like to know) how Lucene (java only - not Nutch, =20
> Solr,
> etc.) can be used as a datastore.
>
> Basically, I am not able to connect "database" and Lucene java. :)
>
> Nagesh
>
>
> On Tue, Jul 29, 2008 at 6:51 PM, Ian Lea <ian.lea@gmail.com> wrote:
>
>> I don't think that anyone in this thread has said "should", just
>> "could" - it is a valid option (IMHO).  Personally, I use it as a
>> store for lucene related data because I know and like and trust it, =20=

>> it
>> is already there for this project so no need to introduce another
>> software dependency, and because it is blindingly fast.
>>
>>
>> --
>> Ian.
>>
>>
>> On Tue, Jul 29, 2008 at 1:43 PM, =E0=B2=A8=E0=B2=BE=E0=B2=97=E0=B3=87=E0=
=B2=B6=E0=B3=8D =20
>> =E0=B2=B8=E0=B3=81=E0=B2=AC=E0=B3=8D=E0=B2=B0=E0=B2=B9=E0=B3=8D=E0=B2=AE=
=E0=B2=A3=E0=B3=8D=E0=B2=AF (Nagesh S)
>> <nageshblore@gmail.com> wrote:
>>> The way I see it, search solutions (on whatever scale) have three
>> components
>>> - data aggregation, indexing/searching and presentation of =20
>>> results. I
>>> thought, Lucene did the second part only.
>>>
>>> So, I do not quite follow, why should Lucene be used for datastore ?
>>>
>>> Nagesh
>>>
>>> On Tue, Jul 29, 2008 at 6:01 PM, Grant Ingersoll =20
>>> <gsingers@apache.org
>>> wrote:
>>>
>>>> I think the answer is it can be done and probably quite well.  I =20=

>>>> also
>> think
>>>> it's informative that Nutch does not use Lucene for this =20
>>>> function, as I
>>>> understand it, but that shouldn't stop you either.  You might =20
>>>> also have
>> a
>>>> look at Apache Jackrabbit, which uses Lucene underneath as a =20
>>>> content
>>>> repository.
>>>>
>>>> -Grant
>>>>
>>>>
>>>> On Jul 29, 2008, at 5:34 AM, Ganesh - yahoo wrote:
>>>>
>>>> Hello all,
>>>>>
>>>>> I am also interested in this. I want to archive the content of the
>>>>> document using Lucene.
>>>>>
>>>>> Is it a good idea to use Lucene as storage engine?
>>>>>
>>>>> Regards
>>>>> Ganesh
>>>>>
>>>>> ----- Original Message ----- From: "Ian Lea" <ian.lea@gmail.com>
>>>>> To: <java-user@lucene.apache.org>
>>>>> Sent: Tuesday, July 29, 2008 2:18 PM
>>>>> Subject: Re: Using lucene as a database... good idea or bad idea?
>>>>>
>>>>>
>>>>> John
>>>>>>
>>>>>>
>>>>>> I think it's a great idea, and do exactly this to store 5 =20
>>>>>> million+
>>>>>> documents with info that it takes way too long to get out of our
>>>>>> Oracle database (think days).  Not as many docs as you are =20
>>>>>> talking
>>>>>> about, and less data for each doc, but I wouldn't have any =20
>>>>>> concerns
>>>>>> about scaling.  There are certainly lucene indexes out there =20
>>>>>> bigger
>>>>>> than what you propose.  You can compress the stored data to =20
>>>>>> save some
>>>>>> space.  Run times for optimization might get interesting but see
>>>>>> recent threads for suggestions on that.  And since you are not =20=

>>>>>> too
>>>>>> concerned about performance you may not need to optimize much, =20=

>>>>>> or even
>>>>>> at all.
>>>>>>
>>>>>> Of course you need to remember that this is not a DBMS solution =20=

>>>>>> in the
>>>>>> sense of transactions, recovery, etc. but I'm sure you are =20
>>>>>> already
>>>>>> aware of that.
>>>>>>
>>>>>>
>>>>>> --
>>>>>> Ian.
>>>>>>
>>>>>>
>>>>>> On Tue, Jul 29, 2008 at 2:53 AM, John Evans <john@jpevans.com> =20=

>>>>>> wrote:
>>>>>>
>>>>>>> Hi All,
>>>>>>>
>>>>>>> I have successfully used Lucene in the "tradtiional" way to =20
>>>>>>> provide
>>>>>>> full-text search for various websites.  Now I am tasked with
>> developing
>>>>>>> a
>>>>>>> data-store to back a web crawler.  The crawler can be =20
>>>>>>> configured to
>>>>>>> retrieve
>>>>>>> arbitrary fields from arbitrary pages, so the result is that =20
>>>>>>> each
>>>>>>> document
>>>>>>> may have a random assortment of fields.  It seems like Lucene =20=

>>>>>>> may be
>> a
>>>>>>> natural fit for this scenario since you can obviously add =20
>>>>>>> arbitrary
>>>>>>> fields
>>>>>>> to each document and you can store the actually data in the =20
>>>>>>> database.
>>>>>>> I've
>>>>>>> done some research to make sure that it would meet all of our
>> individual
>>>>>>> requirements (that we can iterate over documents, update
>>>>>>> (delete/replace)
>>>>>>> documents, etc.) and everything looks good.  I've also seen a =20=

>>>>>>> couple
>> of
>>>>>>> references around the net to other people trying similar =20
>>>>>>> things...
>>>>>>> however,
>>>>>>> I know it's not meant to be used this way, so I thought I =20
>>>>>>> would post
>>>>>>> here
>>>>>>> and ask for guidance?  Has anyone done something similar?  Is =20=

>>>>>>> there
>> any
>>>>>>> specific reason to think this is a bad idea?
>>>>>>>
>>>>>>> The one thing that I am least certain about his how well it will
>> scale.
>>>>>>> We
>>>>>>> may reach the point where we have tens of millions of =20
>>>>>>> documents and a
>>>>>>> high
>>>>>>> percentage of those documents may be relatively large (10k-50k =20=

>>>>>>> each).
>>>>>>> We
>>>>>>> actually would NOT be expecting/needing Lucene's normal =20
>>>>>>> extreme fast
>>>>>>> text
>>>>>>> search times for this, but we would need reasonable times for =20=

>>>>>>> adding
>> new
>>>>>>> documents to the index, retrieving documents by ID (for =20
>>>>>>> iterating
>> over
>>>>>>> all
>>>>>>> documents), optimizing the index after a series of changes, etc.
>>>>>>>
>>>>>>> Any advice/input/theories anyone can contribute would be greatly
>>>>>>> appreciated.
>>>>>>>
>>>>>>> Thanks,
>>>>>>> -
>>>>>>> John
>>>>>>>
>>>>>>>
>>>>>> =
---------------------------------------------------------------------
>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>
>>>>>
>>>>> Send instant messages to your online friends
>>>>> http://in.messenger.yahoo.com
>>>>> =
---------------------------------------------------------------------
>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>
>>>>>
>>>> --------------------------
>>>> Grant Ingersoll
>>>> http://www.lucidimagination.com
>>>>
>>>> Lucene Helpful Hints:
>>>> http://wiki.apache.org/lucene-java/BasicsOfPerformance
>>>> http://wiki.apache.org/lucene-java/LuceneFAQ
>>>>
>>>>
>>>>
>>>>
>>>>
>>>>
>>>>
>>>>
>>>>
>>>> =
---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>
>>

--------------------------
Grant Ingersoll
http://www.lucidimagination.com

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ








---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35198-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 29 14:29:17 2008
Return-Path: <java-user-return-35198-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61597 invoked from network); 29 Jul 2008 14:29:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Jul 2008 14:29:17 -0000
Received: (qmail 53925 invoked by uid 500); 29 Jul 2008 14:29:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53895 invoked by uid 500); 29 Jul 2008 14:29:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53884 invoked by uid 99); 29 Jul 2008 14:29:09 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Jul 2008 07:29:09 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of nageshblore@gmail.com designates 64.233.182.188 as permitted sender)
Received: from [64.233.182.188] (HELO nf-out-0910.google.com) (64.233.182.188)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Jul 2008 14:28:12 +0000
Received: by nf-out-0910.google.com with SMTP id g16so1488455nfd.15
        for <java-user@lucene.apache.org>; Tue, 29 Jul 2008 07:28:14 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=E0S0L0UMDFcyz6kqS10hdaZE7ne7q/jQKrCDFxz42TI=;
        b=ShUcJGUCH+8aTYqo+S1PigIwny9JFCQ1KlquMo5Wj8SHDq0uBbWzMvmCySu5AI48bR
         1qjIUqhSz4lzbaFekPUaQ+IilYCM/WQEddb23+50efASWKLTXkc9NWwGsEsGKh3D6ZgC
         ki9Z+FeKJWEbrvsLVeIuLpXBeM4mYrXO6hs5Y=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=KBox9azy8IH0AtK5tZL3CZdUWX0tq3s8DJhoCmCyrY/3otjzp/S69R8sXZRUdIrq1c
         TvuBjnD6ak3sTEkfQro/V/o1NvZ6F6v0cutxDqPnswq2+AZBtSu2H2x7Fg4V5YV3N3eu
         ECOWBZgHx3CVkl+BDVlnUFc3WOqoPyLY2+CkY=
Received: by 10.210.118.15 with SMTP id q15mr7684185ebc.96.1217341694432;
        Tue, 29 Jul 2008 07:28:14 -0700 (PDT)
Received: by 10.210.52.2 with HTTP; Tue, 29 Jul 2008 07:28:14 -0700 (PDT)
Message-ID: <59a485a30807290728l4e5732efxf9b983720375c1cf@mail.gmail.com>
Date: Tue, 29 Jul 2008 19:58:14 +0530
From: "=?UTF-8?B?4LKo4LK+4LKX4LOH4LK24LONIOCyuOCzgeCyrOCzjeCysOCyueCzjQ==?= =?UTF-8?B?4LKu4LKj4LON4LKvIChOYWdlc2ggUyk=?=" <nageshblore@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Using lucene as a database... good idea or bad idea?
In-Reply-To: <3B1DCAA8-D665-4ADF-9F6A-C864BC894896@apache.org>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_26540_29784967.1217341694429"
References: <6f7ea56f0807281853k1f898f5atc6beaf209e03f609@mail.gmail.com>
	 <8c4e68610807290148h6595611dla895dd22e8af4548@mail.gmail.com>
	 <006a01c8f15e$3f2e2df0$610cc30a@sv.us.sonicwall.com>
	 <70A670C6-E5DB-4FBA-97F3-6FD00049441D@apache.org>
	 <59a485a30807290543i3fbc39d7je153a4bda6faabcd@mail.gmail.com>
	 <8c4e68610807290621n6db7ecf3y60d05dbfee1bc5d6@mail.gmail.com>
	 <59a485a30807290702h41f387f0k97e7615c0a78bb05@mail.gmail.com>
	 <3B1DCAA8-D665-4ADF-9F6A-C864BC894896@apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_26540_29784967.1217341694429
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: base64
Content-Disposition: inline

IkRvbid0IGNvbm5lY3QgImRhdGFiYXNlIiAoaS5lLiBTUUwsIHRyYW5zYWN0aW9ucywgZXRjLikg
YW5kIEx1Y2VuZS4KIENvbm5lY3QgZGF0YSBzdG9yYWdlIHdpdGggc2ltcGxlLCBmYXN0IGxvb2t1
cCBhbmQgTHVjZW5lLiIKVGhhbmtzLCBHcmFudCBmb3IgdGhlIGNsYXJpZmljYXRpb24uIEkgc2Vl
IG5vdy4KCk5hZ2VzaAoKT24gVHVlLCBKdWwgMjksIDIwMDggYXQgNzo1NSBQTSwgR3JhbnQgSW5n
ZXJzb2xsIDxnc2luZ2Vyc0BhcGFjaGUub3JnPndyb3RlOgoKPiBEb24ndCBjb25uZWN0ICJkYXRh
YmFzZSIgKGkuZS4gU1FMLCB0cmFuc2FjdGlvbnMsIGV0Yy4pIGFuZCBMdWNlbmUuCj4gIENvbm5l
Y3QgZGF0YSBzdG9yYWdlIHdpdGggc2ltcGxlLCBmYXN0IGxvb2t1cCBhbmQgTHVjZW5lLgo+Cj4g
T25lIGZpZWxkIGlzIHRoZSBrZXkgKGkuZS4gdGhlIGZpbGVuYW1lKSB0aGUgb3RoZXIgZmllbGQg
aXMgYSBiaW5hcnksCj4gc3RvcmVkIEZpZWxkIGNvbnRhaW5pbmcgdGhlIGNvbnRlbnRzIG9mIHRo
ZSBmaWxlLiAgT2YgY291cnNlLCB0aGVyZSBhcmUKPiBvdGhlciB3YXlzIG9mIHNsaWNpbmcgYW5k
IGRpY2luZywgc3VjaCB0aGF0IG9uZSBjYW4gc2VhcmNoIChpbiB0aGUgZnV6enkKPiBzZW5zZSkg
dGhlIGNvbnRlbnQgYW5kIHRoZSBrZXkgYnkgYWRkaW5nIHRva2VuaXphdGlvbiwgZXRjLiAgVGhp
cyBpcyB0aGUKPiBtb3JlIHRyYWRpdGlvbmFsIG1vZGVsIGZvciBMdWNlbmUKPgo+IEFsc28sIGhh
dmUgYSBsb29rIGF0IEFwYWNoZSBKYWNrcmFiYml0LiAgSXQgaXMgYSBjb250ZW50IHJlcG9zaXRv
cnkgdGhhdCBpcwo+IGltcGxlbWVudGVkIHdpdGggTHVjZW5lLgo+Cj4gLUdyYW50Cj4KPgo+IE9u
IEp1bCAyOSwgMjAwOCwgYXQgMTA6MDIgQU0sIOCyqOCyvuCyl+Czh+CytuCzjSDgsrjgs4Hgsqzg
s43gsrDgsrngs43gsq7gsqPgs43gsq8gKE5hZ2VzaCBTKSB3cm90ZToKPgo+ICBIaSBJYW4sCj4+
IFllcywgSSBzZWUgdGhhdCB3ZSBhcmUgZGlzY3Vzc2luZyBhbiAib3B0aW9uIiBoZXJlLgo+Pgo+
PiBCdXQsIGFzIEkgc2FpZCBiZWZvcmUgKHRoZSB0aHJlZSBwYXJ0cyB0byBzZWFyY2gtYmFzZWQg
c29sdXRpb24pLCBJIGRvIG5vdAo+PiBrbm93IChidXQsIHdvdWxkIGxpa2UgdG8ga25vdykgaG93
IEx1Y2VuZSAoamF2YSBvbmx5IC0gbm90IE51dGNoLCBTb2xyLAo+PiBldGMuKSBjYW4gYmUgdXNl
ZCBhcyBhIGRhdGFzdG9yZS4KPj4KPj4gQmFzaWNhbGx5LCBJIGFtIG5vdCBhYmxlIHRvIGNvbm5l
Y3QgImRhdGFiYXNlIiBhbmQgTHVjZW5lIGphdmEuIDopCj4+Cj4+IE5hZ2VzaAo+Pgo+Pgo+PiBP
biBUdWUsIEp1bCAyOSwgMjAwOCBhdCA2OjUxIFBNLCBJYW4gTGVhIDxpYW4ubGVhQGdtYWlsLmNv
bT4gd3JvdGU6Cj4+Cj4+ICBJIGRvbid0IHRoaW5rIHRoYXQgYW55b25lIGluIHRoaXMgdGhyZWFk
IGhhcyBzYWlkICJzaG91bGQiLCBqdXN0Cj4+PiAiY291bGQiIC0gaXQgaXMgYSB2YWxpZCBvcHRp
b24gKElNSE8pLiAgUGVyc29uYWxseSwgSSB1c2UgaXQgYXMgYQo+Pj4gc3RvcmUgZm9yIGx1Y2Vu
ZSByZWxhdGVkIGRhdGEgYmVjYXVzZSBJIGtub3cgYW5kIGxpa2UgYW5kIHRydXN0IGl0LCBpdAo+
Pj4gaXMgYWxyZWFkeSB0aGVyZSBmb3IgdGhpcyBwcm9qZWN0IHNvIG5vIG5lZWQgdG8gaW50cm9k
dWNlIGFub3RoZXIKPj4+IHNvZnR3YXJlIGRlcGVuZGVuY3ksIGFuZCBiZWNhdXNlIGl0IGlzIGJs
aW5kaW5nbHkgZmFzdC4KPj4+Cj4+Pgo+Pj4gLS0KPj4+IElhbi4KPj4+Cj4+Pgo+Pj4gT24gVHVl
LCBKdWwgMjksIDIwMDggYXQgMTo0MyBQTSwg4LKo4LK+4LKX4LOH4LK24LONIOCyuOCzgeCyrOCz
jeCysOCyueCzjeCyruCyo+CzjeCyryAoTmFnZXNoIFMpCj4+PiA8bmFnZXNoYmxvcmVAZ21haWwu
Y29tPiB3cm90ZToKPj4+Cj4+Pj4gVGhlIHdheSBJIHNlZSBpdCwgc2VhcmNoIHNvbHV0aW9ucyAo
b24gd2hhdGV2ZXIgc2NhbGUpIGhhdmUgdGhyZWUKPj4+Pgo+Pj4gY29tcG9uZW50cwo+Pj4KPj4+
PiAtIGRhdGEgYWdncmVnYXRpb24sIGluZGV4aW5nL3NlYXJjaGluZyBhbmQgcHJlc2VudGF0aW9u
IG9mIHJlc3VsdHMuIEkKPj4+PiB0aG91Z2h0LCBMdWNlbmUgZGlkIHRoZSBzZWNvbmQgcGFydCBv
bmx5Lgo+Pj4+Cj4+Pj4gU28sIEkgZG8gbm90IHF1aXRlIGZvbGxvdywgd2h5IHNob3VsZCBMdWNl
bmUgYmUgdXNlZCBmb3IgZGF0YXN0b3JlID8KPj4+Pgo+Pj4+IE5hZ2VzaAo+Pj4+Cj4+Pj4gT24g
VHVlLCBKdWwgMjksIDIwMDggYXQgNjowMSBQTSwgR3JhbnQgSW5nZXJzb2xsIDxnc2luZ2Vyc0Bh
cGFjaGUub3JnCj4+Pj4gd3JvdGU6Cj4+Pj4KPj4+PiAgSSB0aGluayB0aGUgYW5zd2VyIGlzIGl0
IGNhbiBiZSBkb25lIGFuZCBwcm9iYWJseSBxdWl0ZSB3ZWxsLiAgSSBhbHNvCj4+Pj4+Cj4+Pj4g
dGhpbmsKPj4+Cj4+Pj4gaXQncyBpbmZvcm1hdGl2ZSB0aGF0IE51dGNoIGRvZXMgbm90IHVzZSBM
dWNlbmUgZm9yIHRoaXMgZnVuY3Rpb24sIGFzIEkKPj4+Pj4gdW5kZXJzdGFuZCBpdCwgYnV0IHRo
YXQgc2hvdWxkbid0IHN0b3AgeW91IGVpdGhlci4gIFlvdSBtaWdodCBhbHNvIGhhdmUKPj4+Pj4K
Pj4+PiBhCj4+Pgo+Pj4+IGxvb2sgYXQgQXBhY2hlIEphY2tyYWJiaXQsIHdoaWNoIHVzZXMgTHVj
ZW5lIHVuZGVybmVhdGggYXMgYSBjb250ZW50Cj4+Pj4+IHJlcG9zaXRvcnkuCj4+Pj4+Cj4+Pj4+
IC1HcmFudAo+Pj4+Pgo+Pj4+Pgo+Pj4+PiBPbiBKdWwgMjksIDIwMDgsIGF0IDU6MzQgQU0sIEdh
bmVzaCAtIHlhaG9vIHdyb3RlOgo+Pj4+Pgo+Pj4+PiBIZWxsbyBhbGwsCj4+Pj4+Cj4+Pj4+Pgo+
Pj4+Pj4gSSBhbSBhbHNvIGludGVyZXN0ZWQgaW4gdGhpcy4gSSB3YW50IHRvIGFyY2hpdmUgdGhl
IGNvbnRlbnQgb2YgdGhlCj4+Pj4+PiBkb2N1bWVudCB1c2luZyBMdWNlbmUuCj4+Pj4+Pgo+Pj4+
Pj4gSXMgaXQgYSBnb29kIGlkZWEgdG8gdXNlIEx1Y2VuZSBhcyBzdG9yYWdlIGVuZ2luZT8KPj4+
Pj4+Cj4+Pj4+PiBSZWdhcmRzCj4+Pj4+PiBHYW5lc2gKPj4+Pj4+Cj4+Pj4+PiAtLS0tLSBPcmln
aW5hbCBNZXNzYWdlIC0tLS0tIEZyb206ICJJYW4gTGVhIiA8aWFuLmxlYUBnbWFpbC5jb20+Cj4+
Pj4+PiBUbzogPGphdmEtdXNlckBsdWNlbmUuYXBhY2hlLm9yZz4KPj4+Pj4+IFNlbnQ6IFR1ZXNk
YXksIEp1bHkgMjksIDIwMDggMjoxOCBQTQo+Pj4+Pj4gU3ViamVjdDogUmU6IFVzaW5nIGx1Y2Vu
ZSBhcyBhIGRhdGFiYXNlLi4uIGdvb2QgaWRlYSBvciBiYWQgaWRlYT8KPj4+Pj4+Cj4+Pj4+Pgo+
Pj4+Pj4gSm9obgo+Pj4+Pj4KPj4+Pj4+Pgo+Pj4+Pj4+Cj4+Pj4+Pj4gSSB0aGluayBpdCdzIGEg
Z3JlYXQgaWRlYSwgYW5kIGRvIGV4YWN0bHkgdGhpcyB0byBzdG9yZSA1IG1pbGxpb24rCj4+Pj4+
Pj4gZG9jdW1lbnRzIHdpdGggaW5mbyB0aGF0IGl0IHRha2VzIHdheSB0b28gbG9uZyB0byBnZXQg
b3V0IG9mIG91cgo+Pj4+Pj4+IE9yYWNsZSBkYXRhYmFzZSAodGhpbmsgZGF5cykuICBOb3QgYXMg
bWFueSBkb2NzIGFzIHlvdSBhcmUgdGFsa2luZwo+Pj4+Pj4+IGFib3V0LCBhbmQgbGVzcyBkYXRh
IGZvciBlYWNoIGRvYywgYnV0IEkgd291bGRuJ3QgaGF2ZSBhbnkgY29uY2VybnMKPj4+Pj4+PiBh
Ym91dCBzY2FsaW5nLiAgVGhlcmUgYXJlIGNlcnRhaW5seSBsdWNlbmUgaW5kZXhlcyBvdXQgdGhl
cmUgYmlnZ2VyCj4+Pj4+Pj4gdGhhbiB3aGF0IHlvdSBwcm9wb3NlLiAgWW91IGNhbiBjb21wcmVz
cyB0aGUgc3RvcmVkIGRhdGEgdG8gc2F2ZSBzb21lCj4+Pj4+Pj4gc3BhY2UuICBSdW4gdGltZXMg
Zm9yIG9wdGltaXphdGlvbiBtaWdodCBnZXQgaW50ZXJlc3RpbmcgYnV0IHNlZQo+Pj4+Pj4+IHJl
Y2VudCB0aHJlYWRzIGZvciBzdWdnZXN0aW9ucyBvbiB0aGF0LiAgQW5kIHNpbmNlIHlvdSBhcmUg
bm90IHRvbwo+Pj4+Pj4+IGNvbmNlcm5lZCBhYm91dCBwZXJmb3JtYW5jZSB5b3UgbWF5IG5vdCBu
ZWVkIHRvIG9wdGltaXplIG11Y2gsIG9yCj4+Pj4+Pj4gZXZlbgo+Pj4+Pj4+IGF0IGFsbC4KPj4+
Pj4+Pgo+Pj4+Pj4+IE9mIGNvdXJzZSB5b3UgbmVlZCB0byByZW1lbWJlciB0aGF0IHRoaXMgaXMg
bm90IGEgREJNUyBzb2x1dGlvbiBpbgo+Pj4+Pj4+IHRoZQo+Pj4+Pj4+IHNlbnNlIG9mIHRyYW5z
YWN0aW9ucywgcmVjb3ZlcnksIGV0Yy4gYnV0IEknbSBzdXJlIHlvdSBhcmUgYWxyZWFkeQo+Pj4+
Pj4+IGF3YXJlIG9mIHRoYXQuCj4+Pj4+Pj4KPj4+Pj4+Pgo+Pj4+Pj4+IC0tCj4+Pj4+Pj4gSWFu
Lgo+Pj4+Pj4+Cj4+Pj4+Pj4KPj4+Pj4+PiBPbiBUdWUsIEp1bCAyOSwgMjAwOCBhdCAyOjUzIEFN
LCBKb2huIEV2YW5zIDxqb2huQGpwZXZhbnMuY29tPgo+Pj4+Pj4+IHdyb3RlOgo+Pj4+Pj4+Cj4+
Pj4+Pj4gIEhpIEFsbCwKPj4+Pj4+Pj4KPj4+Pj4+Pj4gSSBoYXZlIHN1Y2Nlc3NmdWxseSB1c2Vk
IEx1Y2VuZSBpbiB0aGUgInRyYWR0aWlvbmFsIiB3YXkgdG8gcHJvdmlkZQo+Pj4+Pj4+PiBmdWxs
LXRleHQgc2VhcmNoIGZvciB2YXJpb3VzIHdlYnNpdGVzLiAgTm93IEkgYW0gdGFza2VkIHdpdGgK
Pj4+Pj4+Pj4KPj4+Pj4+PiBkZXZlbG9waW5nCj4+Pgo+Pj4+IGEKPj4+Pj4+Pj4gZGF0YS1zdG9y
ZSB0byBiYWNrIGEgd2ViIGNyYXdsZXIuICBUaGUgY3Jhd2xlciBjYW4gYmUgY29uZmlndXJlZCB0
bwo+Pj4+Pj4+PiByZXRyaWV2ZQo+Pj4+Pj4+PiBhcmJpdHJhcnkgZmllbGRzIGZyb20gYXJiaXRy
YXJ5IHBhZ2VzLCBzbyB0aGUgcmVzdWx0IGlzIHRoYXQgZWFjaAo+Pj4+Pj4+PiBkb2N1bWVudAo+
Pj4+Pj4+PiBtYXkgaGF2ZSBhIHJhbmRvbSBhc3NvcnRtZW50IG9mIGZpZWxkcy4gIEl0IHNlZW1z
IGxpa2UgTHVjZW5lIG1heSBiZQo+Pj4+Pj4+Pgo+Pj4+Pj4+IGEKPj4+Cj4+Pj4gbmF0dXJhbCBm
aXQgZm9yIHRoaXMgc2NlbmFyaW8gc2luY2UgeW91IGNhbiBvYnZpb3VzbHkgYWRkIGFyYml0cmFy
eQo+Pj4+Pj4+PiBmaWVsZHMKPj4+Pj4+Pj4gdG8gZWFjaCBkb2N1bWVudCBhbmQgeW91IGNhbiBz
dG9yZSB0aGUgYWN0dWFsbHkgZGF0YSBpbiB0aGUKPj4+Pj4+Pj4gZGF0YWJhc2UuCj4+Pj4+Pj4+
IEkndmUKPj4+Pj4+Pj4gZG9uZSBzb21lIHJlc2VhcmNoIHRvIG1ha2Ugc3VyZSB0aGF0IGl0IHdv
dWxkIG1lZXQgYWxsIG9mIG91cgo+Pj4+Pj4+Pgo+Pj4+Pj4+IGluZGl2aWR1YWwKPj4+Cj4+Pj4g
cmVxdWlyZW1lbnRzICh0aGF0IHdlIGNhbiBpdGVyYXRlIG92ZXIgZG9jdW1lbnRzLCB1cGRhdGUK
Pj4+Pj4+Pj4gKGRlbGV0ZS9yZXBsYWNlKQo+Pj4+Pj4+PiBkb2N1bWVudHMsIGV0Yy4pIGFuZCBl
dmVyeXRoaW5nIGxvb2tzIGdvb2QuICBJJ3ZlIGFsc28gc2VlbiBhIGNvdXBsZQo+Pj4+Pj4+Pgo+
Pj4+Pj4+IG9mCj4+Pgo+Pj4+IHJlZmVyZW5jZXMgYXJvdW5kIHRoZSBuZXQgdG8gb3RoZXIgcGVv
cGxlIHRyeWluZyBzaW1pbGFyIHRoaW5ncy4uLgo+Pj4+Pj4+PiBob3dldmVyLAo+Pj4+Pj4+PiBJ
IGtub3cgaXQncyBub3QgbWVhbnQgdG8gYmUgdXNlZCB0aGlzIHdheSwgc28gSSB0aG91Z2h0IEkg
d291bGQgcG9zdAo+Pj4+Pj4+PiBoZXJlCj4+Pj4+Pj4+IGFuZCBhc2sgZm9yIGd1aWRhbmNlPyAg
SGFzIGFueW9uZSBkb25lIHNvbWV0aGluZyBzaW1pbGFyPyAgSXMgdGhlcmUKPj4+Pj4+Pj4KPj4+
Pj4+PiBhbnkKPj4+Cj4+Pj4gc3BlY2lmaWMgcmVhc29uIHRvIHRoaW5rIHRoaXMgaXMgYSBiYWQg
aWRlYT8KPj4+Pj4+Pj4KPj4+Pj4+Pj4gVGhlIG9uZSB0aGluZyB0aGF0IEkgYW0gbGVhc3QgY2Vy
dGFpbiBhYm91dCBoaXMgaG93IHdlbGwgaXQgd2lsbAo+Pj4+Pj4+Pgo+Pj4+Pj4+IHNjYWxlLgo+
Pj4KPj4+PiBXZQo+Pj4+Pj4+PiBtYXkgcmVhY2ggdGhlIHBvaW50IHdoZXJlIHdlIGhhdmUgdGVu
cyBvZiBtaWxsaW9ucyBvZiBkb2N1bWVudHMgYW5kCj4+Pj4+Pj4+IGEKPj4+Pj4+Pj4gaGlnaAo+
Pj4+Pj4+PiBwZXJjZW50YWdlIG9mIHRob3NlIGRvY3VtZW50cyBtYXkgYmUgcmVsYXRpdmVseSBs
YXJnZSAoMTBrLTUwawo+Pj4+Pj4+PiBlYWNoKS4KPj4+Pj4+Pj4gV2UKPj4+Pj4+Pj4gYWN0dWFs
bHkgd291bGQgTk9UIGJlIGV4cGVjdGluZy9uZWVkaW5nIEx1Y2VuZSdzIG5vcm1hbCBleHRyZW1l
IGZhc3QKPj4+Pj4+Pj4gdGV4dAo+Pj4+Pj4+PiBzZWFyY2ggdGltZXMgZm9yIHRoaXMsIGJ1dCB3
ZSB3b3VsZCBuZWVkIHJlYXNvbmFibGUgdGltZXMgZm9yIGFkZGluZwo+Pj4+Pj4+Pgo+Pj4+Pj4+
IG5ldwo+Pj4KPj4+PiBkb2N1bWVudHMgdG8gdGhlIGluZGV4LCByZXRyaWV2aW5nIGRvY3VtZW50
cyBieSBJRCAoZm9yIGl0ZXJhdGluZwo+Pj4+Pj4+Pgo+Pj4+Pj4+IG92ZXIKPj4+Cj4+Pj4gYWxs
Cj4+Pj4+Pj4+IGRvY3VtZW50cyksIG9wdGltaXppbmcgdGhlIGluZGV4IGFmdGVyIGEgc2VyaWVz
IG9mIGNoYW5nZXMsIGV0Yy4KPj4+Pj4+Pj4KPj4+Pj4+Pj4gQW55IGFkdmljZS9pbnB1dC90aGVv
cmllcyBhbnlvbmUgY2FuIGNvbnRyaWJ1dGUgd291bGQgYmUgZ3JlYXRseQo+Pj4+Pj4+PiBhcHBy
ZWNpYXRlZC4KPj4+Pj4+Pj4KPj4+Pj4+Pj4gVGhhbmtzLAo+Pj4+Pj4+PiAtCj4+Pj4+Pj4+IEpv
aG4KPj4+Pj4+Pj4KPj4+Pj4+Pj4KPj4+Pj4+Pj4gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCj4+Pj4+Pj4gVG8gdW5z
dWJzY3JpYmUsIGUtbWFpbDogamF2YS11c2VyLXVuc3Vic2NyaWJlQGx1Y2VuZS5hcGFjaGUub3Jn
Cj4+Pj4+Pj4gRm9yIGFkZGl0aW9uYWwgY29tbWFuZHMsIGUtbWFpbDogamF2YS11c2VyLWhlbHBA
bHVjZW5lLmFwYWNoZS5vcmcKPj4+Pj4+Pgo+Pj4+Pj4+Cj4+Pj4+PiBTZW5kIGluc3RhbnQgbWVz
c2FnZXMgdG8geW91ciBvbmxpbmUgZnJpZW5kcwo+Pj4+Pj4gaHR0cDovL2luLm1lc3Nlbmdlci55
YWhvby5jb20KPj4+Pj4+IC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQo+Pj4+Pj4gVG8gdW5zdWJzY3JpYmUsIGUtbWFp
bDogamF2YS11c2VyLXVuc3Vic2NyaWJlQGx1Y2VuZS5hcGFjaGUub3JnCj4+Pj4+PiBGb3IgYWRk
aXRpb25hbCBjb21tYW5kcywgZS1tYWlsOiBqYXZhLXVzZXItaGVscEBsdWNlbmUuYXBhY2hlLm9y
Zwo+Pj4+Pj4KPj4+Pj4+Cj4+Pj4+PiAgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KPj4+Pj4g
R3JhbnQgSW5nZXJzb2xsCj4+Pj4+IGh0dHA6Ly93d3cubHVjaWRpbWFnaW5hdGlvbi5jb20KPj4+
Pj4KPj4+Pj4gTHVjZW5lIEhlbHBmdWwgSGludHM6Cj4+Pj4+IGh0dHA6Ly93aWtpLmFwYWNoZS5v
cmcvbHVjZW5lLWphdmEvQmFzaWNzT2ZQZXJmb3JtYW5jZQo+Pj4+PiBodHRwOi8vd2lraS5hcGFj
aGUub3JnL2x1Y2VuZS1qYXZhL0x1Y2VuZUZBUQo+Pj4+Pgo+Pj4+Pgo+Pj4+Pgo+Pj4+Pgo+Pj4+
Pgo+Pj4+Pgo+Pj4+Pgo+Pj4+Pgo+Pj4+Pgo+Pj4+PiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KPj4+Pj4gVG8gdW5z
dWJzY3JpYmUsIGUtbWFpbDogamF2YS11c2VyLXVuc3Vic2NyaWJlQGx1Y2VuZS5hcGFjaGUub3Jn
Cj4+Pj4+IEZvciBhZGRpdGlvbmFsIGNvbW1hbmRzLCBlLW1haWw6IGphdmEtdXNlci1oZWxwQGx1
Y2VuZS5hcGFjaGUub3JnCj4+Pj4+Cj4+Pj4+Cj4+Pj4+Cj4+Pj4KPj4+Cj4gLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0KPiBHcmFudCBJbmdlcnNvbGwKPiBodHRwOi8vd3d3Lmx1Y2lkaW1hZ2lu
YXRpb24uY29tCj4KPiBMdWNlbmUgSGVscGZ1bCBIaW50czoKPiBodHRwOi8vd2lraS5hcGFjaGUu
b3JnL2x1Y2VuZS1qYXZhL0Jhc2ljc09mUGVyZm9ybWFuY2UKPiBodHRwOi8vd2lraS5hcGFjaGUu
b3JnL2x1Y2VuZS1qYXZhL0x1Y2VuZUZBUQo+Cj4KPgo+Cj4KPgo+Cj4KPiAtLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0K
PiBUbyB1bnN1YnNjcmliZSwgZS1tYWlsOiBqYXZhLXVzZXItdW5zdWJzY3JpYmVAbHVjZW5lLmFw
YWNoZS5vcmcKPiBGb3IgYWRkaXRpb25hbCBjb21tYW5kcywgZS1tYWlsOiBqYXZhLXVzZXItaGVs
cEBsdWNlbmUuYXBhY2hlLm9yZwo+Cj4K
------=_Part_26540_29784967.1217341694429--

From java-user-return-35199-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 29 16:40:38 2008
Return-Path: <java-user-return-35199-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70715 invoked from network); 29 Jul 2008 16:40:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Jul 2008 16:40:38 -0000
Received: (qmail 10033 invoked by uid 500); 29 Jul 2008 16:40:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10010 invoked by uid 500); 29 Jul 2008 16:40:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9999 invoked by uid 99); 29 Jul 2008 16:40:30 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Jul 2008 09:40:30 -0700
X-ASF-Spam-Status: No, hits=-4.0 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of janssen@parc.com designates 13.1.64.93 as permitted sender)
Received: from [13.1.64.93] (HELO alpha.xerox.com) (13.1.64.93)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Jul 2008 16:39:33 +0000
Received: from synergy1.parc.xerox.com ([13.1.101.60]) by alpha.xerox.com with SMTP id <222585(1)>; Tue, 29 Jul 2008 09:39:34 PDT
Received: from parc.com ([127.0.0.1]) by synergy1.parc.xerox.com with SMTP id <58698>; Tue, 29 Jul 2008 09:39:31 PDT
To: java-user@lucene.apache.org
Subject: Re: Using lucene as a database... good idea or bad idea? 
In-reply-to: <6f7ea56f0807281853k1f898f5atc6beaf209e03f609@mail.gmail.com> 
References: <6f7ea56f0807281853k1f898f5atc6beaf209e03f609@mail.gmail.com>
Comments: In-reply-to "John Evans" <john@jpevans.com>
    message dated "Mon, 28 Jul 2008 18:53:08 -0700."
Date: Tue, 29 Jul 2008 09:39:24 PDT
From: Bill Janssen <janssen@parc.com>
Message-Id: <08Jul29.093931pdt."58698"@synergy1.parc.xerox.com>
X-Virus-Checked: Checked by ClamAV on apache.org

I do this with uplib (http://uplib.parc.com/) with fair success.
Originally I thought I'd need Lucene plus a relational database to
store metadata about the documents for metadata searches.  So far,
though, I've been able to store the metadata in Lucene and use the
same Lucene DB for both metadata and content.

Bill

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35200-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 29 19:29:42 2008
Return-Path: <java-user-return-35200-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77331 invoked from network); 29 Jul 2008 19:29:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Jul 2008 19:29:39 -0000
Received: (qmail 17908 invoked by uid 500); 29 Jul 2008 19:29:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17881 invoked by uid 500); 29 Jul 2008 19:29:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17870 invoked by uid 99); 29 Jul 2008 19:29:32 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Jul 2008 12:29:32 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [209.222.209.11] (HELO mirkwood.informatics.jax.org) (209.222.209.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Jul 2008 19:28:36 +0000
Received: from [127.0.0.1] (corona [209.222.209.245])
	by mirkwood.informatics.jax.org (8.13.8/8.13.8) with ESMTP id m6TJSru3025839
	for <java-user@lucene.apache.org>; Tue, 29 Jul 2008 15:28:59 -0400 (EDT)
	(envelope-from mhall@informatics.jax.org)
Message-ID: <488F6F74.4000106@informatics.jax.org>
Date: Tue, 29 Jul 2008 15:28:52 -0400
From: Matthew Hall <mhall@informatics.jax.org>
User-Agent: Thunderbird 2.0.0.16 (Windows/20080708)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Using lucene as a database... good idea or bad idea?
References: <6f7ea56f0807281853k1f898f5atc6beaf209e03f609@mail.gmail.com> <8c4e68610807290148h6595611dla895dd22e8af4548@mail.gmail.com>
In-Reply-To: <8c4e68610807290148h6595611dla895dd22e8af4548@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-PMX-Version: 5.4.3.345767, Antispam-Engine: 2.6.0.325393, Antispam-Data: 2008.7.29.191451
X-PerlMx-Spam: Gauge=IIIIIII, Probability=7%, Report='BODY_SIZE_3000_3999 0, BODY_SIZE_5000_LESS 0, __BOUNCE_CHALLENGE_SUBJ 0, __C230066_P5 0, __CT 0, __CTE 0, __CT_TEXT_PLAIN 0, __HAS_MSGID 0, __MIME_TEXT_ONLY 0, __MIME_VERSION 0, __SANE_MSGID 0, __USER_AGENT 0'
X-Virus-Checked: Checked by ClamAV on apache.org

Yeah.. we do the same thing here for indexes of up to  57M documents 
(rows), and that's just one part of our implementation.

It takes quite a bit of.. wrangling to use lucene in this manner.. but 
we've found it to be utterly worthwhile.

Matt

Ian Lea wrote:
> John
>
>
> I think it's a great idea, and do exactly this to store 5 million+
> documents with info that it takes way too long to get out of our
> Oracle database (think days).  Not as many docs as you are talking
> about, and less data for each doc, but I wouldn't have any concerns
> about scaling.  There are certainly lucene indexes out there bigger
> than what you propose.  You can compress the stored data to save some
> space.  Run times for optimization might get interesting but see
> recent threads for suggestions on that.  And since you are not too
> concerned about performance you may not need to optimize much, or even
> at all.
>
> Of course you need to remember that this is not a DBMS solution in the
> sense of transactions, recovery, etc. but I'm sure you are already
> aware of that.
>
>
> --
> Ian.
>
>
> On Tue, Jul 29, 2008 at 2:53 AM, John Evans <john@jpevans.com> wrote:
>   
>> Hi All,
>>
>> I have successfully used Lucene in the "tradtiional" way to provide
>> full-text search for various websites.  Now I am tasked with developing a
>> data-store to back a web crawler.  The crawler can be configured to retrieve
>> arbitrary fields from arbitrary pages, so the result is that each document
>> may have a random assortment of fields.  It seems like Lucene may be a
>> natural fit for this scenario since you can obviously add arbitrary fields
>> to each document and you can store the actually data in the database. I've
>> done some research to make sure that it would meet all of our individual
>> requirements (that we can iterate over documents, update (delete/replace)
>> documents, etc.) and everything looks good.  I've also seen a couple of
>> references around the net to other people trying similar things... however,
>> I know it's not meant to be used this way, so I thought I would post here
>> and ask for guidance?  Has anyone done something similar?  Is there any
>> specific reason to think this is a bad idea?
>>
>> The one thing that I am least certain about his how well it will scale.  We
>> may reach the point where we have tens of millions of documents and a high
>> percentage of those documents may be relatively large (10k-50k each).  We
>> actually would NOT be expecting/needing Lucene's normal extreme fast text
>> search times for this, but we would need reasonable times for adding new
>> documents to the index, retrieving documents by ID (for iterating over all
>> documents), optimizing the index after a series of changes, etc.
>>
>> Any advice/input/theories anyone can contribute would be greatly
>> appreciated.
>>
>> Thanks,
>> -
>> John
>>
>>     
>
>   

-- 
Matthew Hall
Software Engineer
Mouse Genome Informatics
mhall@informatics.jax.org
(207) 288-6012



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35201-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 29 21:38:42 2008
Return-Path: <java-user-return-35201-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61949 invoked from network); 29 Jul 2008 21:38:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Jul 2008 21:38:42 -0000
Received: (qmail 76044 invoked by uid 500); 29 Jul 2008 21:38:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76016 invoked by uid 500); 29 Jul 2008 21:38:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75985 invoked by uid 99); 29 Jul 2008 21:38:31 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Jul 2008 14:38:31 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of chris.lu@gmail.com designates 209.85.128.184 as permitted sender)
Received: from [209.85.128.184] (HELO fk-out-0910.google.com) (209.85.128.184)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 29 Jul 2008 21:37:34 +0000
Received: by fk-out-0910.google.com with SMTP id 18so64529fkq.5
        for <java-user@lucene.apache.org>; Tue, 29 Jul 2008 14:37:42 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=IksvCuIw30tYvdGrexo9FWrHiOfWycZDWglFiNQhdh4=;
        b=TFd4mHhHYwTp/wksvB8VbbB31Fj9d0ZN1+F1Zj9YwP3OIpLeIitCvvThtNfUUqdKym
         /bi5w/97aTiim1iGxxDRvFY3la/XowVQPwnEUyVpAWPhBtuxlRIH8IaTYSdPDpM4WiBD
         FU1ESfGkx5A3DguCzc6RUk7Yz2sW9mKcb5B48=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=Sja+1C/5PlHNDqfrVmBZDhlMZeBv4TCIzuRhS7gpwXNOp2dyiHvy8IGOE+qN1yjNiE
         gyn97qMUPYXob6h2aFs0M0ev8z52H6xg+F8MQN+hhuqciJqEgxpE/W5+tbkwEGRpyjqK
         TC+xgpt2/1m16cKUvzDAkbciPyWue0yC/7/jQ=
Received: by 10.125.89.5 with SMTP id r5mr388268mkl.169.1217367462304;
        Tue, 29 Jul 2008 14:37:42 -0700 (PDT)
Received: by 10.125.148.8 with HTTP; Tue, 29 Jul 2008 14:37:42 -0700 (PDT)
Message-ID: <6e3ae6310807291437o59c2acdbq6310acc2ec2fbf06@mail.gmail.com>
Date: Tue, 29 Jul 2008 14:37:42 -0700
From: "Chris Lu" <chris.lu@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Using lucene as a database... good idea or bad idea?
In-Reply-To: <6f7ea56f0807281853k1f898f5atc6beaf209e03f609@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_30801_21484928.1217367462310"
References: <6f7ea56f0807281853k1f898f5atc6beaf209e03f609@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_30801_21484928.1217367462310
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

It surely is possible. AFAIK, LinkedIn use lucene to store some data.

But, Lucene index in a sense is similar to database index. Both are data
structures for a specialized and limited query execution path.

So this depends on your applications' query, and how you create the lucene
index. The normal usage you listed sounds reasonable.
But you may also need to think about maintenance. In case the index is
corrupted somehow, you may also consider store the data into database, which
are more easier to manually manipulate.

-- 
Chris Lu
-------------------------
Instant Scalable Full-Text Search On Any Database/Application
site: http://www.dbsight.net
demo: http://search.dbsight.com
Lucene Database Search in 3 minutes:
http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_minutes
DBSight customer, a shopping comparison site, (anonymous per request) got
2.6 Million Euro funding!

On Mon, Jul 28, 2008 at 6:53 PM, John Evans <john@jpevans.com> wrote:

> Hi All,
>
> I have successfully used Lucene in the "tradtiional" way to provide
> full-text search for various websites.  Now I am tasked with developing a
> data-store to back a web crawler.  The crawler can be configured to
> retrieve
> arbitrary fields from arbitrary pages, so the result is that each document
> may have a random assortment of fields.  It seems like Lucene may be a
> natural fit for this scenario since you can obviously add arbitrary fields
> to each document and you can store the actually data in the database. I've
> done some research to make sure that it would meet all of our individual
> requirements (that we can iterate over documents, update (delete/replace)
> documents, etc.) and everything looks good.  I've also seen a couple of
> references around the net to other people trying similar things... however,
> I know it's not meant to be used this way, so I thought I would post here
> and ask for guidance?  Has anyone done something similar?  Is there any
> specific reason to think this is a bad idea?
>
> The one thing that I am least certain about his how well it will scale.  We
> may reach the point where we have tens of millions of documents and a high
> percentage of those documents may be relatively large (10k-50k each).  We
> actually would NOT be expecting/needing Lucene's normal extreme fast text
> search times for this, but we would need reasonable times for adding new
> documents to the index, retrieving documents by ID (for iterating over all
> documents), optimizing the index after a series of changes, etc.
>
> Any advice/input/theories anyone can contribute would be greatly
> appreciated.
>
> Thanks,
> -
> John
>

------=_Part_30801_21484928.1217367462310--

From java-user-return-35202-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 30 07:31:23 2008
Return-Path: <java-user-return-35202-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65286 invoked from network); 30 Jul 2008 07:31:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Jul 2008 07:31:23 -0000
Received: (qmail 8928 invoked by uid 500); 30 Jul 2008 07:31:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8889 invoked by uid 500); 30 Jul 2008 07:31:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8878 invoked by uid 99); 30 Jul 2008 07:31:15 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Jul 2008 00:31:15 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of Zoeppi@gmx.de designates 213.165.64.20 as permitted sender)
Received: from [213.165.64.20] (HELO mail.gmx.net) (213.165.64.20)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 30 Jul 2008 07:30:20 +0000
Received: (qmail 10100 invoked by uid 0); 30 Jul 2008 07:30:44 -0000
Received: from 89.27.254.190 by www055.gmx.net with HTTP;
 Wed, 30 Jul 2008 09:30:44 +0200 (CEST)
Content-Type: text/plain; charset="iso-8859-1"
Date: Wed, 30 Jul 2008 09:30:44 +0200
From: Zoeppi@gmx.de
Message-ID: <20080730073044.151060@gmx.net>
MIME-Version: 1.0
Subject: too many clause exception when using a filter
To: java-user@lucene.apache.org
X-Authenticated: #13613023
X-Flags: 0001
X-Mailer: WWW-Mail 6100 (Global Message Exchange)
X-Priority: 3
X-Provags-ID: V01U2FsdGVkX18SQ0Z70wMSz9vTvrw7qgXxokEbDrpi53g6LpxPI0
 f2CyEY+uk9TAPUfqJCpHn6LPurd3ojU4Ke0g== 
Content-Transfer-Encoding: 8bit
X-GMX-UID: 623xLGtaa0A7XL7YujEz1aQ/Njh6dA44
X-Virus-Checked: Checked by ClamAV on apache.org

Hello,

I've filled an index with 1100 text files with the names "monisys1" to "monisys1100". 

If I start a WildcardQuery 
       WildcardQuery query = new WildcardQuery(new Term("fileId","monisys*"));
       Hits hits = searcher.search(query);
I get a "Too many clauses" exception, like I expected.

But when I use a filter to avoid this exception, this exception still occurs.
      ConstantScoreQuery scoreQuery = new ConstantScoreQuery(new QueryWrapperFilter(new WildcardQuery(new Term("fileId","monisys*"))));
      Hits hits = searcher.search(scoreQuery);

Did I miss something? 

Thank you.

--Ren

-- 
Psssst! Schon vom neuen GMX MultiMessenger gehrt?
Der kann`s mit allen: http://www.gmx.net/de/go/multimessenger

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35203-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 30 08:35:15 2008
Return-Path: <java-user-return-35203-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94296 invoked from network); 30 Jul 2008 08:35:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Jul 2008 08:35:14 -0000
Received: (qmail 77063 invoked by uid 500); 30 Jul 2008 08:35:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77027 invoked by uid 500); 30 Jul 2008 08:35:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77016 invoked by uid 99); 30 Jul 2008 08:35:08 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Jul 2008 01:35:08 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.191.84.67] (HELO smtp114.mail.mud.yahoo.com) (209.191.84.67)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 30 Jul 2008 08:34:10 +0000
Received: (qmail 44729 invoked from network); 30 Jul 2008 08:33:35 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.in;
  h=Received:X-YMail-OSG:X-Yahoo-Newman-Property:Message-ID:From:To:References:Subject:Date:MIME-Version:Content-Type:Content-Transfer-Encoding:X-Priority:X-MSMail-Priority:X-Mailer:X-MimeOLE;
  b=6xBHjyWluWFRAoP7aHEHkchgGkdkCyu9JTNQjvrnbHgaz94bEaGNa6D8Rhj91Ibw2YxLDjtL2YK86dNCcthf7qPkw1JzZOPh2zgGAX4yhsmDsUmzMDDJAvJPouAMoCSE/1ZijJyopKQpjRL6HE75GFnws2t14SGNJtJZM5noiu8=  ;
Received: from unknown (HELO GaneshM) (emailgane@203.98.194.130 with login)
  by smtp114.mail.mud.yahoo.com with SMTP; 30 Jul 2008 08:33:34 -0000
X-YMail-OSG: F_Wk7fMVM1kGR.Q.JIEBQ52kwReyJnPmkOFjXcKt1t87qChB708C4dL5Dy0nahXCA4eL3qcyF5VAZ4Rq0F.HlILa2uR.n5cwoX0r0gcY2xPU0LfzkjgsAUTOooCSxEs-
X-Yahoo-Newman-Property: ymail-3
Message-ID: <00c001c8f21e$f2b4e060$610cc30a@sv.us.sonicwall.com>
From: "Ganesh - yahoo" <emailgane@yahoo.co.in>
To: <java-user@lucene.apache.org>
References: <20080730073044.151060@gmx.net>
Subject: Re: too many clause exception when using a filter
Date: Wed, 30 Jul 2008 14:03:28 +0530
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="iso-8859-1";
	reply-type=original
Content-Transfer-Encoding: 8bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.3138
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3138
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

Try using PrefixQuery? Is it still throws exception?

Regards
Ganesh

----- Original Message ----- 
From: <Zoeppi@gmx.de>
To: <java-user@lucene.apache.org>
Sent: Wednesday, July 30, 2008 1:00 PM
Subject: too many clause exception when using a filter


> Hello,
>
> I've filled an index with 1100 text files with the names "monisys1" to 
> "monisys1100".
>
> If I start a WildcardQuery
>       WildcardQuery query = new WildcardQuery(new 
> Term("fileId","monisys*"));
>       Hits hits = searcher.search(query);
> I get a "Too many clauses" exception, like I expected.
>
> But when I use a filter to avoid this exception, this exception still 
> occurs.
>      ConstantScoreQuery scoreQuery = new ConstantScoreQuery(new 
> QueryWrapperFilter(new WildcardQuery(new Term("fileId","monisys*"))));
>      Hits hits = searcher.search(scoreQuery);
>
> Did I miss something?
>
> Thank you.
>
> --Ren
>
> -- 
> Psssst! Schon vom neuen GMX MultiMessenger gehrt?
> Der kann`s mit allen: http://www.gmx.net/de/go/multimessenger
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 

Send instant messages to your online friends http://in.messenger.yahoo.com 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35204-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 30 10:11:58 2008
Return-Path: <java-user-return-35204-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 46978 invoked from network); 30 Jul 2008 10:11:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Jul 2008 10:11:58 -0000
Received: (qmail 17960 invoked by uid 500); 30 Jul 2008 10:11:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17929 invoked by uid 500); 30 Jul 2008 10:11:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17918 invoked by uid 99); 30 Jul 2008 10:11:49 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Jul 2008 03:11:49 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of Zoeppi@gmx.de designates 213.165.64.20 as permitted sender)
Received: from [213.165.64.20] (HELO mail.gmx.net) (213.165.64.20)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 30 Jul 2008 10:10:54 +0000
Received: (qmail 24562 invoked by uid 0); 30 Jul 2008 10:11:19 -0000
Received: from 89.27.254.190 by www036.gmx.net with HTTP;
 Wed, 30 Jul 2008 12:11:19 +0200 (CEST)
Content-Type: text/plain; charset="iso-8859-1"
Date: Wed, 30 Jul 2008 12:11:19 +0200
From: Zoeppi@gmx.de
In-Reply-To: <00c001c8f21e$f2b4e060$610cc30a@sv.us.sonicwall.com>
Message-ID: <20080730101119.310700@gmx.net>
MIME-Version: 1.0
References: <20080730073044.151060@gmx.net>
 <00c001c8f21e$f2b4e060$610cc30a@sv.us.sonicwall.com>
Subject: Re: too many clause exception when using a filter
To: java-user@lucene.apache.org
X-Authenticated: #13613023
X-Flags: 0001
X-Mailer: WWW-Mail 6100 (Global Message Exchange)
X-Priority: 3
X-Provags-ID: V01U2FsdGVkX19nq+0kElRny3qeZSDHVlA2fwpWqP+2GI1IbKR3n2
 JAVqV0YGzQTN5YCmFwUsX8UVVBDy2+a1opYQ== 
Content-Transfer-Encoding: 8bit
X-GMX-UID: cAameWxKYmYBeOmAqnc3h6tCWkZTQZTb
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

when I use the PrefixQuery instead of the WildcardQuery, I still get the exception.

Regards
--Ren


-------- Original-Nachricht --------
> Datum: Wed, 30 Jul 2008 14:03:28 +0530
> Von: "Ganesh - yahoo" <emailgane@yahoo.co.in>
> An: java-user@lucene.apache.org
> Betreff: Re: too many clause exception when using a filter

> Hi,
> 
> Try using PrefixQuery? Is it still throws exception?
> 
> Regards
> Ganesh
> 
> ----- Original Message ----- 
> From: <Zoeppi@gmx.de>
> To: <java-user@lucene.apache.org>
> Sent: Wednesday, July 30, 2008 1:00 PM
> Subject: too many clause exception when using a filter
> 
> 
> > Hello,
> >
> > I've filled an index with 1100 text files with the names "monisys1" to 
> > "monisys1100".
> >
> > If I start a WildcardQuery
> >       WildcardQuery query = new WildcardQuery(new 
> > Term("fileId","monisys*"));
> >       Hits hits = searcher.search(query);
> > I get a "Too many clauses" exception, like I expected.
> >
> > But when I use a filter to avoid this exception, this exception still 
> > occurs.
> >      ConstantScoreQuery scoreQuery = new ConstantScoreQuery(new 
> > QueryWrapperFilter(new WildcardQuery(new Term("fileId","monisys*"))));
> >      Hits hits = searcher.search(scoreQuery);
> >
> > Did I miss something?
> >
> > Thank you.
> >
> > --Ren
> >
> > -- 
> > Psssst! Schon vom neuen GMX MultiMessenger gehrt?
> > Der kann`s mit allen: http://www.gmx.net/de/go/multimessenger
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> > 
> 
> Send instant messages to your online friends http://in.messenger.yahoo.com
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org

-- 
GMX Kostenlose Spiele: Einfach online spielen und Spa haben mit Pastry Passion!
http://games.entertainment.gmx.net/de/entertainment/games/free/puzzle/6169196

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35205-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 30 10:32:16 2008
Return-Path: <java-user-return-35205-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56907 invoked from network); 30 Jul 2008 10:32:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Jul 2008 10:32:16 -0000
Received: (qmail 50073 invoked by uid 500); 30 Jul 2008 10:32:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50043 invoked by uid 500); 30 Jul 2008 10:32:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 41327 invoked by uid 99); 30 Jul 2008 10:23:01 -0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of john.obrien@criticalpath.net designates 209.228.128.133 as permitted sender)
From: "John O'Brien" <john.obrien@criticalpath.net>
To: <java-user@lucene.apache.org>
Subject: CheckIndex possibly not detecting/fixing all corruptions?
Date: Wed, 30 Jul 2008 11:22:28 +0100
Message-ID: <000f01c8f22e$2c307610$2e04bd0a@eu.cp.net>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook, Build 10.0.6626
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3198
Importance: Normal
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,
	I already posted this question on the CLucene dev list but it was
suggested that I may be able to get some help on the Java list so here =
goes.
We use Clucene 0.9.20 in our search engine. One of the indexes appears =
to
have become corrupt (still investigating the cause of the corruption). =
We
tried using the Java Lucene CheckIndex tool to fix the corruption(s).
CheckIndex detected 1 broken segment and removed 162 documents and wrote =
a
new segments file. Subsequent runs of CheckIndex report "No problems =
were
detected with this index.". However our search engine still crashes when =
its
performing a search on the "fixed" index. Here is the relevant =
backtrace:

#8  0x001c0faa in lucene::index::SegmentTermDocs::read =
(this=3D0x664f26c8,=20
    docs=3D0x664f9944, freqs=3D0x664f99c4, length=3D32)
    at CLucene/util/BitSet.h:35
#9  0x001b4a4a in lucene::index::MultiTermDocs::read (this=3D0x664e5d38, =

    docs=3D0x664f9944, freqs=3D0x664f99c4, length=3D32)
    at ../src/CLucene/index/MultiReader.cpp:400
#10 0x001ef7dc in lucene::search::TermScorer::next (this=3D0x664f9920)
    at ../src/CLucene/search/TermScorer.cpp:41
#11 0x001d2d23 in lucene::search::BooleanScorer::next =
(this=3D0x665f2fc0)
    at ../src/CLucene/search/BooleanScorer.cpp:63
#12 0x001d2d23 in lucene::search::BooleanScorer::next =
(this=3D0x664e5ec8)
    at ../src/CLucene/search/BooleanScorer.cpp:63
#13 0x001e3275 in lucene::search::IndexSearcher::_search (
    this=3D0x65ba6410, query=3D0x66734ed8, filter=3D0x0, nDocs=3D100)
    at ../src/CLucene/search/Scorer.h:39
#14 0x001e1fb0 in lucene::search::Hits::getMoreDocs (this=3D0x66881440,=20
    m=3D50) at ../src/CLucene/search/Hits.cpp:110
#15 0x001e1acf in lucene::search::Hits::Hits ()
    at CLucene/util/PriorityQueue.h:35

We tried to perform a search using Luke tool but this also resulted in =
an
error.=20
Also tried after optimizing the index db, but the same error persists.=20
So it looks like the index db might still be corrupt.

Any ideas as to why CheckIndex appears not to have detected/fixed all
corruptions?=20
Are there any other suggestions as to how to detect/repair index
corruptions?

Thanks in advance,
John.

P.s. I still have the index in question before and after running =
CheckIndex
fix on it so if anyone's willing to take a look at it I can upload it
somewhere for you to download.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35206-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 30 10:44:11 2008
Return-Path: <java-user-return-35206-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62739 invoked from network); 30 Jul 2008 10:44:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Jul 2008 10:44:11 -0000
Received: (qmail 64224 invoked by uid 500); 30 Jul 2008 10:44:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64183 invoked by uid 500); 30 Jul 2008 10:44:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64171 invoked by uid 99); 30 Jul 2008 10:44:04 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Jul 2008 03:44:04 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.132.241] (HELO an-out-0708.google.com) (209.85.132.241)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Jul 2008 10:43:07 +0000
Received: by an-out-0708.google.com with SMTP id c37so487732anc.49
        for <java-user@lucene.apache.org>; Wed, 30 Jul 2008 03:43:31 -0700 (PDT)
Received: by 10.100.209.5 with SMTP id h5mr12517746ang.18.1217414610920;
        Wed, 30 Jul 2008 03:43:30 -0700 (PDT)
Received: from ?10.17.4.4? ( [72.93.214.93])
        by mx.google.com with ESMTPS id c16sm1715293anc.31.2008.07.30.03.43.30
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Wed, 30 Jul 2008 03:43:30 -0700 (PDT)
Message-Id: <D6CDA86E-3D37-4F54-9F99-0959664BD857@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <000f01c8f22e$2c307610$2e04bd0a@eu.cp.net>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: CheckIndex possibly not detecting/fixing all corruptions?
X-Priority: 3 (Normal)
Date: Wed, 30 Jul 2008 06:43:29 -0400
References: <000f01c8f22e$2c307610$2e04bd0a@eu.cp.net>
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org


Do you have the exception Luke produced?   That'd be a good clue as to  
what CheckIndex is not detecting.  It's hard for me to tell from that  
GDB trace exactly what's gone wrong...

When you first ran CheckIndex, and it detected one corrupt segment,  
what exception did it report as the cause of the corruption on that  
segment?

If you could upload the index somewhere, that'd be great -- I'll try  
to figure out why CheckIndex fails to detect the corruption.  It's  
particularly odd that you were able to successfully optimize the index.

If you run searches on your index use Lucene java, do you get any odd  
exceptions?

Mike

John O'Brien wrote:

> Hi,
> 	I already posted this question on the CLucene dev list but it was
> suggested that I may be able to get some help on the Java list so  
> here goes.
> We use Clucene 0.9.20 in our search engine. One of the indexes  
> appears to
> have become corrupt (still investigating the cause of the  
> corruption). We
> tried using the Java Lucene CheckIndex tool to fix the corruption(s).
> CheckIndex detected 1 broken segment and removed 162 documents and  
> wrote a
> new segments file. Subsequent runs of CheckIndex report "No problems  
> were
> detected with this index.". However our search engine still crashes  
> when its
> performing a search on the "fixed" index. Here is the relevant  
> backtrace:
>
> #8  0x001c0faa in lucene::index::SegmentTermDocs::read  
> (this=0x664f26c8,
>    docs=0x664f9944, freqs=0x664f99c4, length=32)
>    at CLucene/util/BitSet.h:35
> #9  0x001b4a4a in lucene::index::MultiTermDocs::read (this=0x664e5d38,
>    docs=0x664f9944, freqs=0x664f99c4, length=32)
>    at ../src/CLucene/index/MultiReader.cpp:400
> #10 0x001ef7dc in lucene::search::TermScorer::next (this=0x664f9920)
>    at ../src/CLucene/search/TermScorer.cpp:41
> #11 0x001d2d23 in lucene::search::BooleanScorer::next  
> (this=0x665f2fc0)
>    at ../src/CLucene/search/BooleanScorer.cpp:63
> #12 0x001d2d23 in lucene::search::BooleanScorer::next  
> (this=0x664e5ec8)
>    at ../src/CLucene/search/BooleanScorer.cpp:63
> #13 0x001e3275 in lucene::search::IndexSearcher::_search (
>    this=0x65ba6410, query=0x66734ed8, filter=0x0, nDocs=100)
>    at ../src/CLucene/search/Scorer.h:39
> #14 0x001e1fb0 in lucene::search::Hits::getMoreDocs (this=0x66881440,
>    m=50) at ../src/CLucene/search/Hits.cpp:110
> #15 0x001e1acf in lucene::search::Hits::Hits ()
>    at CLucene/util/PriorityQueue.h:35
>
> We tried to perform a search using Luke tool but this also resulted  
> in an
> error.
> Also tried after optimizing the index db, but the same error persists.
> So it looks like the index db might still be corrupt.
>
> Any ideas as to why CheckIndex appears not to have detected/fixed all
> corruptions?
> Are there any other suggestions as to how to detect/repair index
> corruptions?
>
> Thanks in advance,
> John.
>
> P.s. I still have the index in question before and after running  
> CheckIndex
> fix on it so if anyone's willing to take a look at it I can upload it
> somewhere for you to download.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35207-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 30 11:06:43 2008
Return-Path: <java-user-return-35207-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 74187 invoked from network); 30 Jul 2008 11:06:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Jul 2008 11:06:43 -0000
Received: (qmail 83202 invoked by uid 500); 30 Jul 2008 11:06:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83024 invoked by uid 500); 30 Jul 2008 11:06:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83013 invoked by uid 99); 30 Jul 2008 11:06:36 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Jul 2008 04:06:36 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of adb@teamware.com designates 212.226.92.15 as permitted sender)
Received: from [212.226.92.15] (HELO monkey.teamware.com) (212.226.92.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Jul 2008 11:05:42 +0000
Received: from intrepid.teamw.com (intrepid.teamw.com [10.142.128.11])
	by monkey.teamware.com (8.13.1/8.13.1) with ESMTP id m6UB3ljE018913
	for <java-user@lucene.apache.org>; Wed, 30 Jul 2008 14:03:47 +0300
Received: from [10.142.3.10] ([10.142.3.10]) by nimitz.teamw.com with ESMTP
	 id mcricsud; 30 Jul 2008 14:03:00 +0300
Message-ID: <48904A73.4000706@teamware.com>
Date: Wed, 30 Jul 2008 21:03:15 +1000
From: Antony Bowesman <adb@teamware.com>
Organization: Teamware Group
User-Agent: Thunderbird 2.0.0.12 (Windows/20080213)
MIME-Version: 1.0
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Subject: Modifying a document by updating a payloads?
X-TWG-MDN: never
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Greylist: Sender IP whitelisted, not delayed by milter-greylist-1.6 (monkey.teamware.com [212.226.92.15]); Wed, 30 Jul 2008 14:03:47 +0300 (EEST)
X-TWG-MailScanner-Information: See www.mailscanner.info for information
X-TWG-MailScanner: Found to be clean
X-TWG-MailScanner-SpamCheck: not spam, SpamAssassin (score=0, required 5,
	autolearn=not spam)
X-MailScanner-From: adb@teamware.com
X-Virus-Checked: Checked by ClamAV on apache.org

I seem to recall some discussion about updating a payload, but I can't find it.

I was wondering if it were possible to use a payload to implement 'modify' of a 
Lucene document.  For example, I have an ID field, which has a unique ID 
refering to an external DB.  For example, I would like to store a short bitmap 
giving state information about aspects of the Document and this state could 
change during the life of the Document and be available to my searchers.

I've not yet played with payloads and I understand there is something in the 
pipeline about updating Documents, but is it possible to update a payload for an 
existing Document?

Antony



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35208-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 30 11:29:57 2008
Return-Path: <java-user-return-35208-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86677 invoked from network); 30 Jul 2008 11:29:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Jul 2008 11:29:57 -0000
Received: (qmail 7491 invoked by uid 500); 30 Jul 2008 11:29:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7461 invoked by uid 500); 30 Jul 2008 11:29:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7450 invoked by uid 99); 30 Jul 2008 11:29:51 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Jul 2008 04:29:51 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.5] (HELO spunkymail-a19.g.dreamhost.com) (208.97.132.5)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Jul 2008 11:28:55 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a19.g.dreamhost.com (Postfix) with ESMTP id D92DD12096
	for <java-user@lucene.apache.org>; Wed, 30 Jul 2008 04:29:20 -0700 (PDT)
Message-Id: <4E35AA38-17A2-4E09-B68B-F76DBEBE746C@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Fieldable anyone?
Date: Wed, 30 Jul 2008 07:29:19 -0400
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org

Is there anyone out there that actually implements their own Fieldable  
instance?  Just curious, as we are thinking of making some changes to  
it, but it would (very slightly) break our fairly strict back- 
compatibility rules (http://wiki.apache.org/lucene-java/BackwardsCompatibility 
) so I would like to get a feel for the "damage".  I suspect it is  
quite small.

Thanks,
Grant



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35209-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 30 12:25:34 2008
Return-Path: <java-user-return-35209-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30841 invoked from network); 30 Jul 2008 12:25:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Jul 2008 12:25:34 -0000
Received: (qmail 73362 invoked by uid 500); 30 Jul 2008 12:25:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73334 invoked by uid 500); 30 Jul 2008 12:25:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73323 invoked by uid 99); 30 Jul 2008 12:25:27 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Jul 2008 05:25:27 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [74.125.92.26] (HELO qw-out-2122.google.com) (74.125.92.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Jul 2008 12:24:31 +0000
Received: by qw-out-2122.google.com with SMTP id 5so149788qwi.53
        for <java-user@lucene.apache.org>; Wed, 30 Jul 2008 05:24:46 -0700 (PDT)
Received: by 10.214.182.3 with SMTP id e3mr4792174qaf.93.1217420686427;
        Wed, 30 Jul 2008 05:24:46 -0700 (PDT)
Received: from ?10.17.4.4? ( [72.93.214.93])
        by mx.google.com with ESMTPS id 45sm1757112wri.34.2008.07.30.05.24.44
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Wed, 30 Jul 2008 05:24:45 -0700 (PDT)
Message-Id: <B4AD0010-DA32-460B-85D2-B8B9742DB163@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <48904A73.4000706@teamware.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: Modifying a document by updating a payloads?
Date: Wed, 30 Jul 2008 08:24:44 -0400
References: <48904A73.4000706@teamware.com>
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org


Unfortunately you will have to delete the old doc, then reindex a new  
doc, in order to change any payloads in the document's Tokens.

This issue:

     https://issues.apache.org/jira/browse/LUCENE-1231

which is still in progress, could make updating stored (but not  
indexed) fields a much lower cost operation, but that's not for sure  
and it's not clear when that issue will be done.

Mike

Antony Bowesman wrote:

> I seem to recall some discussion about updating a payload, but I  
> can't find it.
>
> I was wondering if it were possible to use a payload to implement  
> 'modify' of a Lucene document.  For example, I have an ID field,  
> which has a unique ID refering to an external DB.  For example, I  
> would like to store a short bitmap giving state information about  
> aspects of the Document and this state could change during the life  
> of the Document and be available to my searchers.
>
> I've not yet played with payloads and I understand there is  
> something in the pipeline about updating Documents, but is it  
> possible to update a payload for an existing Document?
>
> Antony
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35210-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 30 13:47:38 2008
Return-Path: <java-user-return-35210-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84186 invoked from network); 30 Jul 2008 13:47:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Jul 2008 13:47:38 -0000
Received: (qmail 97668 invoked by uid 500); 30 Jul 2008 13:47:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97249 invoked by uid 500); 30 Jul 2008 13:47:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97238 invoked by uid 99); 30 Jul 2008 13:47:31 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Jul 2008 06:47:31 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of dragon-fly999@hotmail.com designates 65.55.111.89 as permitted sender)
Received: from [65.55.111.89] (HELO blu0-omc2-s14.blu0.hotmail.com) (65.55.111.89)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Jul 2008 13:46:33 +0000
Received: from BLU149-W11 ([65.55.111.73]) by blu0-omc2-s14.blu0.hotmail.com with Microsoft SMTPSVC(6.0.3790.3959);
	 Wed, 30 Jul 2008 06:46:38 -0700
Message-ID: <BLU149-W11F6E544515FA16F675DA7B97D0@phx.gbl>
Content-Type: multipart/alternative;
	boundary="_8b56af61-ecea-43bb-bc55-7f34fa99538a_"
X-Originating-IP: [137.103.1.90]
From: Dragon Fly <dragon-fly999@hotmail.com>
To: <java-user@lucene.apache.org>
Subject: RE: Index optimization ...
Date: Wed, 30 Jul 2008 09:46:38 -0400
Importance: Normal
In-Reply-To: <20080729063246.GC12841@stud.ntnu.no>
References: <BLU149-W70E21A40B150D13EBB9733B9830@phx.gbl>
 <D582935BCF154751AD4F67A17F2E2963@desktop>
 <20080729063246.GC12841@stud.ntnu.no>
MIME-Version: 1.0
X-OriginalArrivalTime: 30 Jul 2008 13:46:38.0536 (UTC) FILETIME=[B0A7FC80:01C8F24A]
X-Virus-Checked: Checked by ClamAV on apache.org

--_8b56af61-ecea-43bb-bc55-7f34fa99538a_
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

Perhaps I didn't explain myself clearly so please let me try it again.  I'm=
 happy with the search/indexing performance.   However=2C my index gets ful=
ly optimized every 4 hours and the time it takes to fully optimize the inde=
x is longer than I like.  Is there anything that I can do to speed up the o=
ptimization? I don't fully understand the different parameters (e.g. merge =
factor).  If I decrease the merge factor=2C would it make the indexing slow=
er (which I'm OK with) but the optimization faster? Thank you.

> Date: Tue=2C 29 Jul 2008 08:32:46 +0200
> From: asbjorn@fellinghaug.com
> To: java-user@lucene.apache.org
> Subject: Re: Index optimization ...
>=20
> John Griffin:
> > Use IndexWriter.setRAMBufferSizeMB(double mb) and you won't have to
> > sacrifice anything. It defaults to 16.0 MB so depending on the size of =
your
> > index you may want to make it larger. Do some testing at various values=
 to
> > see where the sweet spot is.=20
> >=20
>=20
> Also=2C have a look at
> http://wiki.apache.org/lucene-java/ImproveIndexingSpeed=2C which provides
> a range of helping advices in terms of enhanced indexing speed.
>=20
> --=20
> Asbj=F8rn A. Fellinghaug
> asbjorn@fellinghaug.com
>=20
> ---------------------------------------------------------------------
> To unsubscribe=2C e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands=2C e-mail: java-user-help@lucene.apache.org
>=20

_________________________________________________________________
With Windows Live for mobile=2C your contacts travel with you.
http://www.windowslive.com/mobile/overview.html?ocid=3DTXT_TAGLM_WL_mobile_=
072008=

--_8b56af61-ecea-43bb-bc55-7f34fa99538a_--

From java-user-return-35211-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 30 13:54:38 2008
Return-Path: <java-user-return-35211-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88860 invoked from network); 30 Jul 2008 13:54:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Jul 2008 13:54:38 -0000
Received: (qmail 7504 invoked by uid 500); 30 Jul 2008 13:54:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7482 invoked by uid 500); 30 Jul 2008 13:54:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7470 invoked by uid 99); 30 Jul 2008 13:54:31 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Jul 2008 06:54:31 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Jul 2008 13:53:35 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KOC7s-0007xd-Ox
	for java-user@lucene.apache.org; Wed, 30 Jul 2008 06:54:00 -0700
Message-ID: <18733752.post@talk.nabble.com>
Date: Wed, 30 Jul 2008 06:54:00 -0700 (PDT)
From: syedfa <fayyazuddin@gmail.com>
To: java-user@lucene.apache.org
Subject: Highlighting results returned from MultiFieldQueryParser
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: fayyazuddin@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


Dear fellow Lucene/Java developers:

I have an index created from an XML file which I am trying to search using
the MultiFieldQueryParser.  At present, I am using the QueryParser to
successfully return results that are highlighted.  The code is listed here:

public List search(File indexDir, String q) throws Exception { 
          
        List searchResult = new ArrayList(); 
        Directory fsDir=FSDirectory.getDirectory(indexDir); 
        IndexSearcher is=new IndexSearcher(fsDir); 
        
        Analyzer analyser = new StandardAnalyzer(); 
        Query parser=new QueryParser("LINES", analyser).parse(q); 
        long start=new Date().getTime(); 
        Hits hits=is.search(parser); 
        long end=new Date().getTime(); 
        QueryScorer scorer = new QueryScorer(parser); 
        SimpleHTMLFormatter formatter = new SimpleHTMLFormatter("", ""); 
        Highlighter highlighter = new Highlighter(formatter, scorer); 
        Highlighter high = new Highlighter(formatter, scorer); 
        Fragmenter fragmenter = new NullFragmenter(); 
        Fragmenter fragment = new SimpleFragmenter(250); 
        highlighter.setTextFragmenter(fragmenter); 
        high.setTextFragmenter(fragment); 
    
        for(int i=0; i<hits.length(); i++){ 
             Document doc=hits.doc(i); 
             String lns = doc.get("LINES"); 
             TokenStream lines = analyser.tokenStream("LINES", new
StringReader(lns)); 
             CachingTokenFilter filter = new CachingTokenFilter(lines); 
             String highlightedLines = highlighter.getBestFragment(filter,
lns); 
             filter.reset(); 
             String highlight = high.getBestFragment(filter, lns); 
             SearchResult resultBean = new SearchResult(); 
             resultBean.setReference(hits.doc(i).get("REFERENCE")); 
             resultBean.setNarrator(hits.doc(i).get("SPEAKER")); 
             resultBean.setHitResult(highlight); 
             resultBean.setQuote(highlightedLines); 
             searchResult.add(resultBean); 
             System.out.println(resultBean.getReference()); 
             System.out.println(resultBean.getNarrator()); 
             System.out.println(resultBean.getHitResult()); 
             System.out.println(""); 
             System.out.println(resultBean.getQuote()); 
             System.out.println(""); 
        } 
        
        System.err.println("Found " + hits.length() + " document(s)(in " +
(end-start) + " milliseconds) that matched query '" + q + "':"); 
        
        return searchResult;         
    } 

Currently, I have an XML element which I am searching called <LINES>.  Using
the MultiFieldQueryParser, I want the user to be able to search the <LINES>
and <SCENE-COMMENTARY> elements.  The results found within the
<SCENE-COMMENTARY> element I wish to store in a separate javaBean object
that has only two attributes, get/setResult and get/setReference, and wish
to present the results to the user in order of best match (which is what it
is doing at present).  How would I achieve the same results when I am using
the MultiFieldQueryParser class?  Would I do anything different when trying
to return highlighted results from a wildcard search or a fuzzy search?

Thanks to everyone who replies.
Sincerely;
Fayyaz
-- 
View this message in context: http://www.nabble.com/Highlighting-results-returned-from-MultiFieldQueryParser-tp18733752p18733752.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35212-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 30 13:54:45 2008
Return-Path: <java-user-return-35212-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88976 invoked from network); 30 Jul 2008 13:54:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Jul 2008 13:54:45 -0000
Received: (qmail 8448 invoked by uid 500); 30 Jul 2008 13:54:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8418 invoked by uid 500); 30 Jul 2008 13:54:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8405 invoked by uid 99); 30 Jul 2008 13:54:34 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Jul 2008 06:54:34 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ian.lea@gmail.com designates 209.85.146.176 as permitted sender)
Received: from [209.85.146.176] (HELO wa-out-1112.google.com) (209.85.146.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Jul 2008 13:53:37 +0000
Received: by wa-out-1112.google.com with SMTP id l24so13645waf.11
        for <java-user@lucene.apache.org>; Wed, 30 Jul 2008 06:54:03 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references;
        bh=nh80cxQVu2OMzEo161OIfkBRzjrqW76qTqnAQ15I1nQ=;
        b=TAFy4w9aDblkhDRT8eUyvp8o7C6CTsZr/MGVuYkQfSqE6R8XljbieXXilQIAWPduqb
         X6hNf28ta9ExumjVocMnDrJiS2H6o53PX6eDhXQOFoTdxvKOKmO2LLwfFMqZQehqx9cm
         HkfJy/b05c1tVCyE/N3UPvyuDnXvj3DPRoauA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references;
        b=SoBjYhO0F3cFSx+5tngOwsX3dyh2m78D95j9GntC+xReRNu/jgXyaqR6mI+ReD28rG
         C8Wt7sbGErqT2gU+ag7k3t3SwWv9fp7AeXzcyTV15jOSRyeh9pmJ6da7YljBmbLGK3Ts
         emyLnQ3TU/2HqY/6qsqe3rMLoacwgPpl4i+GU=
Received: by 10.115.74.1 with SMTP id b1mr8491231wal.169.1217426043509;
        Wed, 30 Jul 2008 06:54:03 -0700 (PDT)
Received: by 10.114.15.5 with HTTP; Wed, 30 Jul 2008 06:54:03 -0700 (PDT)
Message-ID: <8c4e68610807300654n526ad151yb8ba8a863d3df67a@mail.gmail.com>
Date: Wed, 30 Jul 2008 14:54:03 +0100
From: "Ian Lea" <ian.lea@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Index optimization ...
In-Reply-To: <BLU149-W11F6E544515FA16F675DA7B97D0@phx.gbl>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <BLU149-W70E21A40B150D13EBB9733B9830@phx.gbl>
	 <D582935BCF154751AD4F67A17F2E2963@desktop>
	 <20080729063246.GC12841@stud.ntnu.no>
	 <BLU149-W11F6E544515FA16F675DA7B97D0@phx.gbl>
X-Virus-Checked: Checked by ClamAV on apache.org

Why do you run an optimize every 4 hours?


--
Ian.


On Wed, Jul 30, 2008 at 2:46 PM, Dragon Fly <dragon-fly999@hotmail.com> wro=
te:
> Perhaps I didn't explain myself clearly so please let me try it again.  I=
'm happy with the search/indexing performance.   However, my index gets ful=
ly optimized every 4 hours and the time it takes to fully optimize the inde=
x is longer than I like.  Is there anything that I can do to speed up the o=
ptimization? I don't fully understand the different parameters (e.g. merge =
factor).  If I decrease the merge factor, would it make the indexing slower=
 (which I'm OK with) but the optimization faster? Thank you.
>
>> Date: Tue, 29 Jul 2008 08:32:46 +0200
>> From: asbjorn@fellinghaug.com
>> To: java-user@lucene.apache.org
>> Subject: Re: Index optimization ...
>>
>> John Griffin:
>> > Use IndexWriter.setRAMBufferSizeMB(double mb) and you won't have to
>> > sacrifice anything. It defaults to 16.0 MB so depending on the size of=
 your
>> > index you may want to make it larger. Do some testing at various value=
s to
>> > see where the sweet spot is.
>> >
>>
>> Also, have a look at
>> http://wiki.apache.org/lucene-java/ImproveIndexingSpeed, which provides
>> a range of helping advices in terms of enhanced indexing speed.
>>
>> --
>> Asbj=F8rn A. Fellinghaug
>> asbjorn@fellinghaug.com
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
> _________________________________________________________________
> With Windows Live for mobile, your contacts travel with you.
> http://www.windowslive.com/mobile/overview.html?ocid=3DTXT_TAGLM_WL_mobil=
e_072008

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35213-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 30 14:01:04 2008
Return-Path: <java-user-return-35213-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94094 invoked from network); 30 Jul 2008 14:01:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Jul 2008 14:01:04 -0000
Received: (qmail 28144 invoked by uid 500); 30 Jul 2008 14:00:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28076 invoked by uid 500); 30 Jul 2008 14:00:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28065 invoked by uid 99); 30 Jul 2008 14:00:57 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Jul 2008 07:00:57 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of dragon-fly999@hotmail.com designates 65.55.111.104 as permitted sender)
Received: from [65.55.111.104] (HELO blu0-omc2-s29.blu0.hotmail.com) (65.55.111.104)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Jul 2008 13:59:59 +0000
Received: from BLU149-W77 ([65.55.111.71]) by blu0-omc2-s29.blu0.hotmail.com with Microsoft SMTPSVC(6.0.3790.3959);
	 Wed, 30 Jul 2008 07:00:25 -0700
Message-ID: <BLU149-W77772BAF8CEB97EB089D7AB97D0@phx.gbl>
Content-Type: multipart/alternative;
	boundary="_f937cb55-f781-41bb-b631-c38d92109664_"
X-Originating-IP: [137.103.1.90]
From: Dragon Fly <dragon-fly999@hotmail.com>
To: <java-user@lucene.apache.org>
Subject: RE: Index optimization ...
Date: Wed, 30 Jul 2008 10:00:25 -0400
Importance: Normal
In-Reply-To: <8c4e68610807300654n526ad151yb8ba8a863d3df67a@mail.gmail.com>
References: <BLU149-W70E21A40B150D13EBB9733B9830@phx.gbl>
	 <D582935BCF154751AD4F67A17F2E2963@desktop>
 	 <20080729063246.GC12841@stud.ntnu.no>
 	 <BLU149-W11F6E544515FA16F675DA7B97D0@phx.gbl> 
 <8c4e68610807300654n526ad151yb8ba8a863d3df67a@mail.gmail.com>
MIME-Version: 1.0
X-OriginalArrivalTime: 30 Jul 2008 14:00:25.0633 (UTC) FILETIME=[9DA4F910:01C8F24C]
X-Virus-Checked: Checked by ClamAV on apache.org

--_f937cb55-f781-41bb-b631-c38d92109664_
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

I have two copies (active/inactive) of the index.  Searches are executed ag=
ainst the "active" index and new documents get added to the "inactive" copy=
.  The two indexes get swapped every 4 hours (so that new documents are vis=
ible to the end user).  Optimization is done before the inactive copy is ma=
de active.

> Date: Wed=2C 30 Jul 2008 14:54:03 +0100
> From: ian.lea@gmail.com
> To: java-user@lucene.apache.org
> Subject: Re: Index optimization ...
>=20
> Why do you run an optimize every 4 hours?
>=20
>=20
> --
> Ian.
>=20
>=20
> On Wed=2C Jul 30=2C 2008 at 2:46 PM=2C Dragon Fly <dragon-fly999@hotmail.=
com> wrote:
> > Perhaps I didn't explain myself clearly so please let me try it again. =
 I'm happy with the search/indexing performance.   However=2C my index gets=
 fully optimized every 4 hours and the time it takes to fully optimize the =
index is longer than I like.  Is there anything that I can do to speed up t=
he optimization? I don't fully understand the different parameters (e.g. me=
rge factor).  If I decrease the merge factor=2C would it make the indexing =
slower (which I'm OK with) but the optimization faster? Thank you.
> >
> >> Date: Tue=2C 29 Jul 2008 08:32:46 +0200
> >> From: asbjorn@fellinghaug.com
> >> To: java-user@lucene.apache.org
> >> Subject: Re: Index optimization ...
> >>
> >> John Griffin:
> >> > Use IndexWriter.setRAMBufferSizeMB(double mb) and you won't have to
> >> > sacrifice anything. It defaults to 16.0 MB so depending on the size =
of your
> >> > index you may want to make it larger. Do some testing at various val=
ues to
> >> > see where the sweet spot is.
> >> >
> >>
> >> Also=2C have a look at
> >> http://wiki.apache.org/lucene-java/ImproveIndexingSpeed=2C which provi=
des
> >> a range of helping advices in terms of enhanced indexing speed.
> >>
> >> --
> >> Asbj=F8rn A. Fellinghaug
> >> asbjorn@fellinghaug.com
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe=2C e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands=2C e-mail: java-user-help@lucene.apache.org
> >>
> >
> > _________________________________________________________________
> > With Windows Live for mobile=2C your contacts travel with you.
> > http://www.windowslive.com/mobile/overview.html?ocid=3DTXT_TAGLM_WL_mob=
ile_072008
>=20
> ---------------------------------------------------------------------
> To unsubscribe=2C e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands=2C e-mail: java-user-help@lucene.apache.org
>=20

_________________________________________________________________
With Windows Live for mobile=2C your contacts travel with you.
http://www.windowslive.com/mobile/overview.html?ocid=3DTXT_TAGLM_WL_mobile_=
072008=

--_f937cb55-f781-41bb-b631-c38d92109664_--

From java-user-return-35214-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 30 14:04:33 2008
Return-Path: <java-user-return-35214-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96537 invoked from network); 30 Jul 2008 14:04:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Jul 2008 14:04:33 -0000
Received: (qmail 33897 invoked by uid 500); 30 Jul 2008 14:04:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33868 invoked by uid 500); 30 Jul 2008 14:04:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33857 invoked by uid 99); 30 Jul 2008 14:04:26 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Jul 2008 07:04:26 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ian.lea@gmail.com designates 209.85.146.180 as permitted sender)
Received: from [209.85.146.180] (HELO wa-out-1112.google.com) (209.85.146.180)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Jul 2008 14:03:28 +0000
Received: by wa-out-1112.google.com with SMTP id l24so15935waf.11
        for <java-user@lucene.apache.org>; Wed, 30 Jul 2008 07:03:38 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references;
        bh=vJvafXinK85YNvaxVksEOUcgAg5bmYfbMA2K1t7qDJM=;
        b=ENAB5AVPTJY3cuWXg4Dp7MCM+KJjzY8xHItyX2KFI2X6wAeaDTyfhwiJEhKfGFPmJJ
         XonpHEHdF91L3JGk1pBjyo1RqsAY5TAO2eZy8IdqHBRA0PR9h+TKXRihhFaSiZSszhJ3
         8a0iJnWik4QKfN5wGC7GLS6sG6Bqcf5RxKgPg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references;
        b=bQSj2iN5gLZ+JO+QlXm7kbwWBRnJ7m2GV89MViZ5myTWMrmGuwPDAZgJcINEb6e0WF
         JtxvYURxEXq+gikKNYPdOG3FQ9MD7wUOIzePgxwUOjgbi1b5YkzvH1OCQJjpxz7YPsfT
         yMD7RZ9GkzcYOtPbJEUGTTR1jWYl10KdLhqkY=
Received: by 10.115.59.4 with SMTP id m4mr8516843wak.104.1217426617733;
        Wed, 30 Jul 2008 07:03:37 -0700 (PDT)
Received: by 10.114.15.5 with HTTP; Wed, 30 Jul 2008 07:03:37 -0700 (PDT)
Message-ID: <8c4e68610807300703l2244136aj103b23f74b62c9e9@mail.gmail.com>
Date: Wed, 30 Jul 2008 15:03:37 +0100
From: "Ian Lea" <ian.lea@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Index optimization ...
In-Reply-To: <BLU149-W77772BAF8CEB97EB089D7AB97D0@phx.gbl>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <BLU149-W70E21A40B150D13EBB9733B9830@phx.gbl>
	 <D582935BCF154751AD4F67A17F2E2963@desktop>
	 <20080729063246.GC12841@stud.ntnu.no>
	 <BLU149-W11F6E544515FA16F675DA7B97D0@phx.gbl>
	 <8c4e68610807300654n526ad151yb8ba8a863d3df67a@mail.gmail.com>
	 <BLU149-W77772BAF8CEB97EB089D7AB97D0@phx.gbl>
X-Virus-Checked: Checked by ClamAV on apache.org

OK, but why do you need to optimize before every swap?  Have you tried
with less frequent optimizes?

--
Ian.


On Wed, Jul 30, 2008 at 3:00 PM, Dragon Fly <dragon-fly999@hotmail.com> wro=
te:
> I have two copies (active/inactive) of the index.  Searches are executed =
against the "active" index and new documents get added to the "inactive" co=
py.  The two indexes get swapped every 4 hours (so that new documents are v=
isible to the end user).  Optimization is done before the inactive copy is =
made active.
>
>> Date: Wed, 30 Jul 2008 14:54:03 +0100
>> From: ian.lea@gmail.com
>> To: java-user@lucene.apache.org
>> Subject: Re: Index optimization ...
>>
>> Why do you run an optimize every 4 hours?
>>
>>
>> --
>> Ian.
>>
>>
>> On Wed, Jul 30, 2008 at 2:46 PM, Dragon Fly <dragon-fly999@hotmail.com> =
wrote:
>> > Perhaps I didn't explain myself clearly so please let me try it again.=
  I'm happy with the search/indexing performance.   However, my index gets =
fully optimized every 4 hours and the time it takes to fully optimize the i=
ndex is longer than I like.  Is there anything that I can do to speed up th=
e optimization? I don't fully understand the different parameters (e.g. mer=
ge factor).  If I decrease the merge factor, would it make the indexing slo=
wer (which I'm OK with) but the optimization faster? Thank you.
>> >
>> >> Date: Tue, 29 Jul 2008 08:32:46 +0200
>> >> From: asbjorn@fellinghaug.com
>> >> To: java-user@lucene.apache.org
>> >> Subject: Re: Index optimization ...
>> >>
>> >> John Griffin:
>> >> > Use IndexWriter.setRAMBufferSizeMB(double mb) and you won't have to
>> >> > sacrifice anything. It defaults to 16.0 MB so depending on the size=
 of your
>> >> > index you may want to make it larger. Do some testing at various va=
lues to
>> >> > see where the sweet spot is.
>> >> >
>> >>
>> >> Also, have a look at
>> >> http://wiki.apache.org/lucene-java/ImproveIndexingSpeed, which provid=
es
>> >> a range of helping advices in terms of enhanced indexing speed.
>> >>
>> >> --
>> >> Asbj=F8rn A. Fellinghaug
>> >> asbjorn@fellinghaug.com
>> >>
>> >> ---------------------------------------------------------------------
>> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> >> For additional commands, e-mail: java-user-help@lucene.apache.org
>> >>
>> >
>> > _________________________________________________________________
>> > With Windows Live for mobile, your contacts travel with you.
>> > http://www.windowslive.com/mobile/overview.html?ocid=3DTXT_TAGLM_WL_mo=
bile_072008
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
> _________________________________________________________________
> With Windows Live for mobile, your contacts travel with you.
> http://www.windowslive.com/mobile/overview.html?ocid=3DTXT_TAGLM_WL_mobil=
e_072008

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35215-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 30 14:17:07 2008
Return-Path: <java-user-return-35215-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5171 invoked from network); 30 Jul 2008 14:17:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Jul 2008 14:17:06 -0000
Received: (qmail 55107 invoked by uid 500); 30 Jul 2008 14:16:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55085 invoked by uid 500); 30 Jul 2008 14:16:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55074 invoked by uid 99); 30 Jul 2008 14:16:59 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Jul 2008 07:16:59 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of dragon-fly999@hotmail.com designates 65.55.111.94 as permitted sender)
Received: from [65.55.111.94] (HELO blu0-omc2-s19.blu0.hotmail.com) (65.55.111.94)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Jul 2008 14:16:02 +0000
Received: from BLU149-W52 ([65.55.111.71]) by blu0-omc2-s19.blu0.hotmail.com with Microsoft SMTPSVC(6.0.3790.3959);
	 Wed, 30 Jul 2008 07:15:44 -0700
Message-ID: <BLU149-W52F357CAE91A172B694C69B97D0@phx.gbl>
Content-Type: multipart/alternative;
	boundary="_1c27e80e-9c8c-45b9-a98e-70b60882383c_"
X-Originating-IP: [137.103.1.90]
From: Dragon Fly <dragon-fly999@hotmail.com>
To: <java-user@lucene.apache.org>
Subject: RE: Index optimization ...
Date: Wed, 30 Jul 2008 10:15:44 -0400
Importance: Normal
In-Reply-To: <8c4e68610807300703l2244136aj103b23f74b62c9e9@mail.gmail.com>
References: <BLU149-W70E21A40B150D13EBB9733B9830@phx.gbl>
	 <D582935BCF154751AD4F67A17F2E2963@desktop>
 	 <20080729063246.GC12841@stud.ntnu.no>
 	 <BLU149-W11F6E544515FA16F675DA7B97D0@phx.gbl>
 	 <8c4e68610807300654n526ad151yb8ba8a863d3df67a@mail.gmail.com>
 	 <BLU149-W77772BAF8CEB97EB089D7AB97D0@phx.gbl> 
 <8c4e68610807300703l2244136aj103b23f74b62c9e9@mail.gmail.com>
MIME-Version: 1.0
X-OriginalArrivalTime: 30 Jul 2008 14:15:44.0989 (UTC) FILETIME=[C19F90D0:01C8F24E]
X-Virus-Checked: Checked by ClamAV on apache.org

--_1c27e80e-9c8c-45b9-a98e-70b60882383c_
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

My understanding is that an optimized index gives the best search performan=
ce.  I can change my configuration to optimize the index every 24 hours.  H=
owever=2C I still would like to know if there is a way to speed up optimiza=
tion by tweaking parameters like the merge factor.

> Date: Wed=2C 30 Jul 2008 15:03:37 +0100
> From: ian.lea@gmail.com
> To: java-user@lucene.apache.org
> Subject: Re: Index optimization ...
>=20
> OK=2C but why do you need to optimize before every swap?  Have you tried
> with less frequent optimizes?
>=20
> --
> Ian.
>=20
>=20
> On Wed=2C Jul 30=2C 2008 at 3:00 PM=2C Dragon Fly <dragon-fly999@hotmail.=
com> wrote:
> > I have two copies (active/inactive) of the index.  Searches are execute=
d against the "active" index and new documents get added to the "inactive" =
copy.  The two indexes get swapped every 4 hours (so that new documents are=
 visible to the end user).  Optimization is done before the inactive copy i=
s made active.
> >
> >> Date: Wed=2C 30 Jul 2008 14:54:03 +0100
> >> From: ian.lea@gmail.com
> >> To: java-user@lucene.apache.org
> >> Subject: Re: Index optimization ...
> >>
> >> Why do you run an optimize every 4 hours?
> >>
> >>
> >> --
> >> Ian.
> >>
> >>
> >> On Wed=2C Jul 30=2C 2008 at 2:46 PM=2C Dragon Fly <dragon-fly999@hotma=
il.com> wrote:
> >> > Perhaps I didn't explain myself clearly so please let me try it agai=
n.  I'm happy with the search/indexing performance.   However=2C my index g=
ets fully optimized every 4 hours and the time it takes to fully optimize t=
he index is longer than I like.  Is there anything that I can do to speed u=
p the optimization? I don't fully understand the different parameters (e.g.=
 merge factor).  If I decrease the merge factor=2C would it make the indexi=
ng slower (which I'm OK with) but the optimization faster? Thank you.
> >> >
> >> >> Date: Tue=2C 29 Jul 2008 08:32:46 +0200
> >> >> From: asbjorn@fellinghaug.com
> >> >> To: java-user@lucene.apache.org
> >> >> Subject: Re: Index optimization ...
> >> >>
> >> >> John Griffin:
> >> >> > Use IndexWriter.setRAMBufferSizeMB(double mb) and you won't have =
to
> >> >> > sacrifice anything. It defaults to 16.0 MB so depending on the si=
ze of your
> >> >> > index you may want to make it larger. Do some testing at various =
values to
> >> >> > see where the sweet spot is.
> >> >> >
> >> >>
> >> >> Also=2C have a look at
> >> >> http://wiki.apache.org/lucene-java/ImproveIndexingSpeed=2C which pr=
ovides
> >> >> a range of helping advices in terms of enhanced indexing speed.
> >> >>
> >> >> --
> >> >> Asbj=F8rn A. Fellinghaug
> >> >> asbjorn@fellinghaug.com
> >> >>
> >> >> -------------------------------------------------------------------=
--
> >> >> To unsubscribe=2C e-mail: java-user-unsubscribe@lucene.apache.org
> >> >> For additional commands=2C e-mail: java-user-help@lucene.apache.org
> >> >>
> >> >
> >> > _________________________________________________________________
> >> > With Windows Live for mobile=2C your contacts travel with you.
> >> > http://www.windowslive.com/mobile/overview.html?ocid=3DTXT_TAGLM_WL_=
mobile_072008
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe=2C e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands=2C e-mail: java-user-help@lucene.apache.org
> >>
> >
> > _________________________________________________________________
> > With Windows Live for mobile=2C your contacts travel with you.
> > http://www.windowslive.com/mobile/overview.html?ocid=3DTXT_TAGLM_WL_mob=
ile_072008
>=20
> ---------------------------------------------------------------------
> To unsubscribe=2C e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands=2C e-mail: java-user-help@lucene.apache.org
>=20

_________________________________________________________________
With Windows Live for mobile=2C your contacts travel with you.
http://www.windowslive.com/mobile/overview.html?ocid=3DTXT_TAGLM_WL_mobile_=
072008=

--_1c27e80e-9c8c-45b9-a98e-70b60882383c_--

From java-user-return-35216-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 30 14:28:30 2008
Return-Path: <java-user-return-35216-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 11572 invoked from network); 30 Jul 2008 14:28:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Jul 2008 14:28:30 -0000
Received: (qmail 73176 invoked by uid 500); 30 Jul 2008 14:28:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73144 invoked by uid 500); 30 Jul 2008 14:28:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 69933 invoked by uid 99); 30 Jul 2008 14:25:46 -0000
X-ASF-Spam-Status: No, hits=-5.2 required=10.0
	tests=MIME_BASE64_BLANKS,MIME_BASE64_TEXT,RCVD_IN_DNSWL_HI,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of SRS0=Zxbcu+=YK=gmail.com=helloanand@srs.bis.eu.blackberry.com designates 216.9.253.48 as permitted sender)
X-rim-org-msg-ref-id: 932414311
Message-ID: <932414311-1217427848-cardhu_decombobulator_blackberry.rim.net-788247191-@bxe012.bisx.produk.on.blackberry>
Content-Transfer-Encoding: base64
Reply-To: helloanand@gmail.com
X-Priority: Normal
References: <BLU149-W70E21A40B150D13EBB9733B9830@phx.gbl> <D582935BCF154751AD4F67A17F2E2963@desktop>	 <20080729063246.GC12841@stud.ntnu.no>	 <BLU149-W11F6E544515FA16F675DA7B97D0@phx.gbl> <8c4e68610807300654n526ad151yb8ba8a863d3df67a@mail.gmail.com><BLU149-W77772BAF8CEB97EB089D7AB97D0@phx.gbl>
In-Reply-To: <BLU149-W77772BAF8CEB97EB089D7AB97D0@phx.gbl>
Sensitivity: Normal
Importance: Normal
To: java-user@lucene.apache.org
Subject: Re: Index optimization ...
From: "Anand Jain" <helloanand@gmail.com>
Date: Wed, 30 Jul 2008 14:23:52 +0000
Content-Type: text/plain; charset="Windows-1252"
MIME-Version: 1.0
X-Virus-Checked: Checked by ClamAV on apache.org

QXMgYW4gYXNpZGUsIEkgd291bGQgbGlrZSB0byB1bmRlcnN0YW5kIGhvdyBkbyB5b3UgZ2V0IGF3
YXkgd2l0aG91dCBhZGRpbmcgZG9jdW1lbnRzIHRvIHRoZSBhY3RpdmUgaW5kZXguIEFzIGZhciBh
cyBJIHVuZGVyc3RhbmQsIHlvdSBhcmUgb25seSBhZGRpbmcgZG9jcyB0byB0aGUgaW5hY3RpdmUg
aW5kZXggYW5kIHN3YXAgaXQgd2l0aCB0aGUgYWN0aXZlIGluZGV4IChzbyB0aGUgYWN0aXZlIG9u
ZSBiZWNvbWVzIGluYWN0aXZlIGFuZCB2aWNlLXZlcnNhKS4gU28gZG8geW91IGJyaW5nIHRoZSAi
bmV3IiBpbmFjdGl2ZSB1cHRvIHNwZWVkIHRvIGNvbXBlbnNhdGUgZm9yIHRoZSBkb2N1bWVudHMg
aXQgbWlzc2VkIHdoaWxlIHRoZSAib2xkIiBJbmFjdGl2ZSBpbmRleCBnb3QgdXBhdGVkPw0KDQpK
dXN0IGN1cmlvdXMsDQoNCkFuYW5kIA0KLS0tLS1PcmlnaW5hbCBNZXNzYWdlLS0tLS0NCkZyb206
IERyYWdvbiBGbHkgPGRyYWdvbi1mbHk5OTlAaG90bWFpbC5jb20+DQoNCkRhdGU6IFdlZCwgMzAg
SnVsIDIwMDggMTA6MDA6MjUgDQpUbzogPGphdmEtdXNlckBsdWNlbmUuYXBhY2hlLm9yZz4NClN1
YmplY3Q6IFJFOiBJbmRleCBvcHRpbWl6YXRpb24gLi4uDQoNCg0KSSBoYXZlIHR3byBjb3BpZXMg
KGFjdGl2ZS9pbmFjdGl2ZSkgb2YgdGhlIGluZGV4LiAgU2VhcmNoZXMgYXJlIGV4ZWN1dGVkIGFn
YWluc3QgdGhlICJhY3RpdmUiIGluZGV4IGFuZCBuZXcgZG9jdW1lbnRzIGdldCBhZGRlZCB0byB0
aGUgImluYWN0aXZlIiBjb3B5LiAgVGhlIHR3byBpbmRleGVzIGdldCBzd2FwcGVkIGV2ZXJ5IDQg
aG91cnMgKHNvIHRoYXQgbmV3IGRvY3VtZW50cyBhcmUgdmlzaWJsZSB0byB0aGUgZW5kIHVzZXIp
LiAgT3B0aW1pemF0aW9uIGlzIGRvbmUgYmVmb3JlIHRoZSBpbmFjdGl2ZSBjb3B5IGlzIG1hZGUg
YWN0aXZlLg0KDQo+IERhdGU6IFdlZCwgMzAgSnVsIDIwMDggMTQ6NTQ6MDMgKzAxMDANCj4gRnJv
bTogaWFuLmxlYUBnbWFpbC5jb20NCj4gVG86IGphdmEtdXNlckBsdWNlbmUuYXBhY2hlLm9yZw0K
PiBTdWJqZWN0OiBSZTogSW5kZXggb3B0aW1pemF0aW9uIC4uLg0KPiANCj4gV2h5IGRvIHlvdSBy
dW4gYW4gb3B0aW1pemUgZXZlcnkgNCBob3Vycz8NCj4gDQo+IA0KPiAtLQ0KPiBJYW4uDQo+IA0K
PiANCj4gT24gV2VkLCBKdWwgMzAsIDIwMDggYXQgMjo0NiBQTSwgRHJhZ29uIEZseSA8ZHJhZ29u
LWZseTk5OUBob3RtYWlsLmNvbT4gd3JvdGU6DQo+ID4gUGVyaGFwcyBJIGRpZG4ndCBleHBsYWlu
IG15c2VsZiBjbGVhcmx5IHNvIHBsZWFzZSBsZXQgbWUgdHJ5IGl0IGFnYWluLiAgSSdtIGhhcHB5
IHdpdGggdGhlIHNlYXJjaC9pbmRleGluZyBwZXJmb3JtYW5jZS4gICBIb3dldmVyLCBteSBpbmRl
eCBnZXRzIGZ1bGx5IG9wdGltaXplZCBldmVyeSA0IGhvdXJzIGFuZCB0aGUgdGltZSBpdCB0YWtl
cyB0byBmdWxseSBvcHRpbWl6ZSB0aGUgaW5kZXggaXMgbG9uZ2VyIHRoYW4gSSBsaWtlLiAgSXMg
dGhlcmUgYW55dGhpbmcgdGhhdCBJIGNhbiBkbyB0byBzcGVlZCB1cCB0aGUgb3B0aW1pemF0aW9u
PyBJIGRvbid0IGZ1bGx5IHVuZGVyc3RhbmQgdGhlIGRpZmZlcmVudCBwYXJhbWV0ZXJzIChlLmcu
IG1lcmdlIGZhY3RvcikuICBJZiBJIGRlY3JlYXNlIHRoZSBtZXJnZSBmYWN0b3IsIHdvdWxkIGl0
IG1ha2UgdGhlIGluZGV4aW5nIHNsb3dlciAod2hpY2ggSSdtIE9LIHdpdGgpIGJ1dCB0aGUgb3B0
aW1pemF0aW9uIGZhc3Rlcj8gVGhhbmsgeW91Lg0KPiA+DQo+ID4+IERhdGU6IFR1ZSwgMjkgSnVs
IDIwMDggMDg6MzI6NDYgKzAyMDANCj4gPj4gRnJvbTogYXNiam9ybkBmZWxsaW5naGF1Zy5jb20N
Cj4gPj4gVG86IGphdmEtdXNlckBsdWNlbmUuYXBhY2hlLm9yZw0KPiA+PiBTdWJqZWN0OiBSZTog
SW5kZXggb3B0aW1pemF0aW9uIC4uLg0KPiA+Pg0KPiA+PiBKb2huIEdyaWZmaW46DQo+ID4+ID4g
VXNlIEluZGV4V3JpdGVyLnNldFJBTUJ1ZmZlclNpemVNQihkb3VibGUgbWIpIGFuZCB5b3Ugd29u
J3QgaGF2ZSB0bw0KPiA+PiA+IHNhY3JpZmljZSBhbnl0aGluZy4gSXQgZGVmYXVsdHMgdG8gMTYu
MCBNQiBzbyBkZXBlbmRpbmcgb24gdGhlIHNpemUgb2YgeW91cg0KPiA+PiA+IGluZGV4IHlvdSBt
YXkgd2FudCB0byBtYWtlIGl0IGxhcmdlci4gRG8gc29tZSB0ZXN0aW5nIGF0IHZhcmlvdXMgdmFs
dWVzIHRvDQo+ID4+ID4gc2VlIHdoZXJlIHRoZSBzd2VldCBzcG90IGlzLg0KPiA+PiA+DQo+ID4+
DQo+ID4+IEFsc28sIGhhdmUgYSBsb29rIGF0DQo+ID4+IGh0dHA6Ly93aWtpLmFwYWNoZS5vcmcv
bHVjZW5lLWphdmEvSW1wcm92ZUluZGV4aW5nU3BlZWQsIHdoaWNoIHByb3ZpZGVzDQo+ID4+IGEg
cmFuZ2Ugb2YgaGVscGluZyBhZHZpY2VzIGluIHRlcm1zIG9mIGVuaGFuY2VkIGluZGV4aW5nIHNw
ZWVkLg0KPiA+Pg0KPiA+PiAtLQ0KPiA+PiBBc2Jq+HJuIEEuIEZlbGxpbmdoYXVnDQo+ID4+IGFz
Ympvcm5AZmVsbGluZ2hhdWcuY29tDQo+ID4+DQo+ID4+IC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KPiA+PiBUbyB1
bnN1YnNjcmliZSwgZS1tYWlsOiBqYXZhLXVzZXItdW5zdWJzY3JpYmVAbHVjZW5lLmFwYWNoZS5v
cmcNCj4gPj4gRm9yIGFkZGl0aW9uYWwgY29tbWFuZHMsIGUtbWFpbDogamF2YS11c2VyLWhlbHBA
bHVjZW5lLmFwYWNoZS5vcmcNCj4gPj4NCj4gPg0KPiA+X19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18NCj4gPiBXaXRoIFdpbmRv
d3MgTGl2ZSBmb3IgbW9iaWxlLCB5b3VyIGNvbnRhY3RzIHRyYXZlbCB3aXRoIHlvdS4NCj4gPiBo
dHRwOi8vd3d3LndpbmRvd3NsaXZlLmNvbS9tb2JpbGUvb3ZlcnZpZXcuaHRtbD9vY2lkPVRYVF9U
QUdMTV9XTF9tb2JpbGVfMDcyMDA4DQo+IA0KPiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCj4gVG8gdW5zdWJzY3Jp
YmUsIGUtbWFpbDogamF2YS11c2VyLXVuc3Vic2NyaWJlQGx1Y2VuZS5hcGFjaGUub3JnDQo+IEZv
ciBhZGRpdGlvbmFsIGNvbW1hbmRzLCBlLW1haWw6IGphdmEtdXNlci1oZWxwQGx1Y2VuZS5hcGFj
aGUub3JnDQo+IA0KDQpfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fXw0KV2l0aCBXaW5kb3dzIExpdmUgZm9yIG1vYmlsZSwgeW91
ciBjb250YWN0cyB0cmF2ZWwgd2l0aCB5b3UuDQpodHRwOi8vd3d3LndpbmRvd3NsaXZlLmNvbS9t
b2JpbGUvb3ZlcnZpZXcuaHRtbD9vY2lkPVRYVF9UQUdMTV9XTF9tb2JpbGVfMDcyMDA4DQo=



From java-user-return-35217-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 30 14:33:56 2008
Return-Path: <java-user-return-35217-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 15588 invoked from network); 30 Jul 2008 14:33:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Jul 2008 14:33:56 -0000
Received: (qmail 81058 invoked by uid 500); 30 Jul 2008 14:33:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81024 invoked by uid 500); 30 Jul 2008 14:33:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81013 invoked by uid 99); 30 Jul 2008 14:33:49 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Jul 2008 07:33:49 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ian.lea@gmail.com designates 74.125.46.29 as permitted sender)
Received: from [74.125.46.29] (HELO yw-out-2324.google.com) (74.125.46.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Jul 2008 14:32:51 +0000
Received: by yw-out-2324.google.com with SMTP id 3so22090ywj.5
        for <java-user@lucene.apache.org>; Wed, 30 Jul 2008 07:33:17 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references;
        bh=+32V5dkodv9WtUinivBp1gx+8w9kMKeSyCNUunjmra8=;
        b=pi8widsc12ODLsFu/ZW9cnHqCDSnIB32mD1gDmT+W/Z/HD+Cj5dTET6I+5cEUPTtvR
         J1L+DdS6XQqpvmIA6Mn+dOQT6jJ8nTjHzJahaTXChDVQ3m667p6l4/rs15Y/cRLR8+Vq
         2WFadpDqkIvaxEutZtTVVSc2YwINiEbkO3rJg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references;
        b=oJpQ9iJfx4oMgSz8Y1IAW8XQrZlq25rhfgoHM7q2EpA2Rv1HDdSEorBi+mT724Gkh9
         nOzQJo01Esyw/3cfgo2F4E8LyWAkVNXP9cp2bVb0Hw5Fbyz1Ge121ZDc9x8/mUgiaj4J
         Ou9S7xdYMLOlPtyZ2csi43do4gd8j251K0z7g=
Received: by 10.114.53.18 with SMTP id b18mr5192782waa.141.1217428396702;
        Wed, 30 Jul 2008 07:33:16 -0700 (PDT)
Received: by 10.114.15.5 with HTTP; Wed, 30 Jul 2008 07:33:16 -0700 (PDT)
Message-ID: <8c4e68610807300733t5fcfdd87s4372a7535d950bf@mail.gmail.com>
Date: Wed, 30 Jul 2008 15:33:16 +0100
From: "Ian Lea" <ian.lea@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Index optimization ...
In-Reply-To: <BLU149-W52F357CAE91A172B694C69B97D0@phx.gbl>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <BLU149-W70E21A40B150D13EBB9733B9830@phx.gbl>
	 <D582935BCF154751AD4F67A17F2E2963@desktop>
	 <20080729063246.GC12841@stud.ntnu.no>
	 <BLU149-W11F6E544515FA16F675DA7B97D0@phx.gbl>
	 <8c4e68610807300654n526ad151yb8ba8a863d3df67a@mail.gmail.com>
	 <BLU149-W77772BAF8CEB97EB089D7AB97D0@phx.gbl>
	 <8c4e68610807300703l2244136aj103b23f74b62c9e9@mail.gmail.com>
	 <BLU149-W52F357CAE91A172B694C69B97D0@phx.gbl>
X-Virus-Checked: Checked by ClamAV on apache.org

If I was you I'd certainly try cutting the optimize frequency.  An
optimized index should indeed give the best search performance, but in
my experience it's generally plenty fast enough anyway, and I think
you said earlier that you were prepared to sacrifice a bit of search
or indexing speed.

Sorry, can't help with the questions on speeding it up except to
advise that you play with it.  Different indexes on different hardware
with different combinations of CPU/memory/disk can give different
results.

--
Ian.


On Wed, Jul 30, 2008 at 3:15 PM, Dragon Fly <dragon-fly999@hotmail.com> wro=
te:
> My understanding is that an optimized index gives the best search perform=
ance.  I can change my configuration to optimize the index every 24 hours. =
 However, I still would like to know if there is a way to speed up optimiza=
tion by tweaking parameters like the merge factor.
>
>> Date: Wed, 30 Jul 2008 15:03:37 +0100
>> From: ian.lea@gmail.com
>> To: java-user@lucene.apache.org
>> Subject: Re: Index optimization ...
>>
>> OK, but why do you need to optimize before every swap?  Have you tried
>> with less frequent optimizes?
>>
>> --
>> Ian.
>>
>>
>> On Wed, Jul 30, 2008 at 3:00 PM, Dragon Fly <dragon-fly999@hotmail.com> =
wrote:
>> > I have two copies (active/inactive) of the index.  Searches are execut=
ed against the "active" index and new documents get added to the "inactive"=
 copy.  The two indexes get swapped every 4 hours (so that new documents ar=
e visible to the end user).  Optimization is done before the inactive copy =
is made active.
>> >
>> >> Date: Wed, 30 Jul 2008 14:54:03 +0100
>> >> From: ian.lea@gmail.com
>> >> To: java-user@lucene.apache.org
>> >> Subject: Re: Index optimization ...
>> >>
>> >> Why do you run an optimize every 4 hours?
>> >>
>> >>
>> >> --
>> >> Ian.
>> >>
>> >>
>> >> On Wed, Jul 30, 2008 at 2:46 PM, Dragon Fly <dragon-fly999@hotmail.co=
m> wrote:
>> >> > Perhaps I didn't explain myself clearly so please let me try it aga=
in.  I'm happy with the search/indexing performance.   However, my index ge=
ts fully optimized every 4 hours and the time it takes to fully optimize th=
e index is longer than I like.  Is there anything that I can do to speed up=
 the optimization? I don't fully understand the different parameters (e.g. =
merge factor).  If I decrease the merge factor, would it make the indexing =
slower (which I'm OK with) but the optimization faster? Thank you.
>> >> >
>> >> >> Date: Tue, 29 Jul 2008 08:32:46 +0200
>> >> >> From: asbjorn@fellinghaug.com
>> >> >> To: java-user@lucene.apache.org
>> >> >> Subject: Re: Index optimization ...
>> >> >>
>> >> >> John Griffin:
>> >> >> > Use IndexWriter.setRAMBufferSizeMB(double mb) and you won't have=
 to
>> >> >> > sacrifice anything. It defaults to 16.0 MB so depending on the s=
ize of your
>> >> >> > index you may want to make it larger. Do some testing at various=
 values to
>> >> >> > see where the sweet spot is.
>> >> >> >
>> >> >>
>> >> >> Also, have a look at
>> >> >> http://wiki.apache.org/lucene-java/ImproveIndexingSpeed, which pro=
vides
>> >> >> a range of helping advices in terms of enhanced indexing speed.
>> >> >>
>> >> >> --
>> >> >> Asbj=F8rn A. Fellinghaug
>> >> >> asbjorn@fellinghaug.com
>> >> >>
>> >> >> ------------------------------------------------------------------=
---
>> >> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> >> >> For additional commands, e-mail: java-user-help@lucene.apache.org
>> >> >>
>> >> >
>> >> > _________________________________________________________________
>> >> > With Windows Live for mobile, your contacts travel with you.
>> >> > http://www.windowslive.com/mobile/overview.html?ocid=3DTXT_TAGLM_WL=
_mobile_072008
>> >>
>> >> ---------------------------------------------------------------------
>> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> >> For additional commands, e-mail: java-user-help@lucene.apache.org
>> >>
>> >
>> > _________________________________________________________________
>> > With Windows Live for mobile, your contacts travel with you.
>> > http://www.windowslive.com/mobile/overview.html?ocid=3DTXT_TAGLM_WL_mo=
bile_072008
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
> _________________________________________________________________
> With Windows Live for mobile, your contacts travel with you.
> http://www.windowslive.com/mobile/overview.html?ocid=3DTXT_TAGLM_WL_mobil=
e_072008

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35218-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 30 15:13:40 2008
Return-Path: <java-user-return-35218-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 39813 invoked from network); 30 Jul 2008 15:13:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Jul 2008 15:13:40 -0000
Received: (qmail 46695 invoked by uid 500); 30 Jul 2008 15:13:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46656 invoked by uid 500); 30 Jul 2008 15:13:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46645 invoked by uid 99); 30 Jul 2008 15:13:32 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Jul 2008 08:13:32 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.66] (HELO spunkymail-a8.g.dreamhost.com) (208.97.132.66)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Jul 2008 15:12:34 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a8.g.dreamhost.com (Postfix) with ESMTP id CE20A10BF18
	for <java-user@lucene.apache.org>; Wed, 30 Jul 2008 08:12:29 -0700 (PDT)
Message-Id: <2A2BA5F2-A746-4B63-95CC-635405CFA38E@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <BLU149-W11F6E544515FA16F675DA7B97D0@phx.gbl>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed; delsp=yes
Content-Transfer-Encoding: quoted-printable
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: Index optimization ...
Date: Wed, 30 Jul 2008 11:12:28 -0400
References: <BLU149-W70E21A40B150D13EBB9733B9830@phx.gbl> <D582935BCF154751AD4F67A17F2E2963@desktop> <20080729063246.GC12841@stud.ntnu.no> <BLU149-W11F6E544515FA16F675DA7B97D0@phx.gbl>
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org

What version of Lucene are you using?  What is your current =20
mergeFactor?  Lowering this (minimum is 2) will result in an index =20
that is closer to "optimal" since an optimized index is just one that =20=

has all the segments merged into a single segment and a mergeFactor of =20=

2 just means there are only ever 2 segments (the docs could make this =20=

clearer).  The tradeoff is that you may need to do merges more often.  =20=

If you are using Lucene 2.3.x these merges can now take place in the =20
background, so this may not be as big a penalty as it once was.  =20
Still, the fact is, optimize has to go through, in the end, and merge =20=

your segments into one big segment.  This is a lengthy undertaking on =20=

a large index.

I'm not sure, however, if any of this will reduce your overall time.  =20=

I suppose it depends somewhat on your update rate.  It is possible =20
that the slower indexing could offset any gains had by a faster =20
optimize.  Another option may be to keep the mergeFactor higher, but =20
then every so often do partial optimizes to keep your index closer to =20=

optimal such that a final optimize may be speed up

Another question is have you measured your query performance on an =20
unoptimized index?  Is it acceptable?  Are you only adding new =20
documents or are you also deleting docs in that 4 hour time period?

Bottom line, though, is you need to test out the various knobs =20
(mergeFactor, RAMBufferSizeMB, etc.) and see.  You may find the =20
contrib/benchmark program helpful for running experiments, although it =20=

isn't a substitute for your actual data.

-Grant


On Jul 30, 2008, at 9:46 AM, Dragon Fly wrote:

> Perhaps I didn't explain myself clearly so please let me try it =20
> again.  I'm happy with the search/indexing performance.   However, =20
> my index gets fully optimized every 4 hours and the time it takes to =20=

> fully optimize the index is longer than I like.  Is there anything =20
> that I can do to speed up the optimization? I don't fully understand =20=

> the different parameters (e.g. merge factor).  If I decrease the =20
> merge factor, would it make the indexing slower (which I'm OK with) =20=

> but the optimization faster? Thank you.
>
>> Date: Tue, 29 Jul 2008 08:32:46 +0200
>> From: asbjorn@fellinghaug.com
>> To: java-user@lucene.apache.org
>> Subject: Re: Index optimization ...
>>
>> John Griffin:
>>> Use IndexWriter.setRAMBufferSizeMB(double mb) and you won't have to
>>> sacrifice anything. It defaults to 16.0 MB so depending on the =20
>>> size of your
>>> index you may want to make it larger. Do some testing at various =20
>>> values to
>>> see where the sweet spot is.
>>>
>>
>> Also, have a look at
>> http://wiki.apache.org/lucene-java/ImproveIndexingSpeed, which =20
>> provides
>> a range of helping advices in terms of enhanced indexing speed.
>>
>> --=20
>> Asbj=F8rn A. Fellinghaug
>> asbjorn@fellinghaug.com
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
> _________________________________________________________________
> With Windows Live for mobile, your contacts travel with you.
> =
http://www.windowslive.com/mobile/overview.html?ocid=3DTXT_TAGLM_WL_mobile=
_072008

--------------------------
Grant Ingersoll
http://www.lucidimagination.com

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ








---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35219-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 30 17:03:26 2008
Return-Path: <java-user-return-35219-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30229 invoked from network); 30 Jul 2008 17:03:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Jul 2008 17:03:26 -0000
Received: (qmail 46062 invoked by uid 500); 30 Jul 2008 17:03:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46023 invoked by uid 500); 30 Jul 2008 17:03:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46012 invoked by uid 99); 30 Jul 2008 17:03:19 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Jul 2008 10:03:19 -0700
X-ASF-Spam-Status: No, hits=-4.0 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [128.230.108.46] (HELO SUEXCL-02.ad.syr.edu) (128.230.108.46)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Jul 2008 17:02:25 +0000
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: RE: too many clause exception when using a filter
Date: Wed, 30 Jul 2008 12:59:56 -0400
Message-ID: <9294E20AED46934EA459020706463F94C59DA4@SUEXCL-02.ad.syr.edu>
In-Reply-To: <20080730073044.151060@gmx.net>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: too many clause exception when using a filter
Thread-Index: AcjyFkfUQxtSTMU/QZeK/lqVNC9bOgATWYWw
From: "Steven A Rowe" <sarowe@syr.edu>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Ren=E9,

Since you're constructing the filter from a WildcardQuery or a =
PrefixQuery, both of which use a BooleanQuery to hold a TermQuery for =
each matching index term, you'll need to increase the number of clauses =
a BooleanQuery is allowed to hold, by calling static method =
BooleanQuery.setMaxClauseCount():

<http://lucene.apache.org/java/2_3_2/api/org/apache/lucene/search/Boolean=
Query.html#setMaxClauseCount(int)>

Or, to avoid the clause limit issue altogether, you could use a =
PrefixFilter instead of a QueryWrapperFilter around a =
{Wildcard,Prefix}Query:

<http://lucene.apache.org/java/2_3_2/api/org/apache/lucene/search/PrefixF=
ilter.html>

Steve

On 07/30/2008 at 3:30 AM, Zoeppi@gmx.de wrote:
> Hello,
>=20
> I've filled an index with 1100 text files with the names
> "monisys1" to "monisys1100".
>=20
> If I start a WildcardQuery
>        WildcardQuery query =3D new WildcardQuery(new
>        Term("fileId","monisys*")); Hits hits =3D =
searcher.search(query);
> I get a "Too many clauses" exception, like I expected.
>=20
> But when I use a filter to avoid this exception, this
> exception still occurs.
>       ConstantScoreQuery scoreQuery =3D new
> ConstantScoreQuery(new QueryWrapperFilter(new
> WildcardQuery(new Term("fileId","monisys*"))));
>       Hits hits =3D searcher.search(scoreQuery);
>=20
> Did I miss something?
>=20
> Thank you.
>=20
> --Ren=E9
>=20
> --
> Psssst! Schon vom neuen GMX MultiMessenger geh=F6rt?
> Der kann`s mit allen: http://www.gmx.net/de/go/multimessenger

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35220-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 30 17:48:49 2008
Return-Path: <java-user-return-35220-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54513 invoked from network); 30 Jul 2008 17:48:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Jul 2008 17:48:49 -0000
Received: (qmail 18087 invoked by uid 500); 30 Jul 2008 17:48:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18048 invoked by uid 500); 30 Jul 2008 17:48:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18037 invoked by uid 99); 30 Jul 2008 17:48:42 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Jul 2008 10:48:42 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lgastako@gmail.com designates 64.233.166.179 as permitted sender)
Received: from [64.233.166.179] (HELO py-out-1112.google.com) (64.233.166.179)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Jul 2008 17:47:44 +0000
Received: by py-out-1112.google.com with SMTP id z74so108449pyg.9
        for <java-user@lucene.apache.org>; Wed, 30 Jul 2008 10:47:53 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:sender
         :to:subject:in-reply-to:mime-version:content-type:references
         :x-google-sender-auth;
        bh=Tj1QjU4fYKrV009fJ9r0Vro3BlgELXHxhqo71sRkoaY=;
        b=SqLD1DprKUmwZz98CA8CDYsuVNaaljAC4s9NQaAjstD4fD85XKszO43iA2ZJcb+hwg
         o3a1GZwaXUiEMAiRDUaCVEA9BqRxZ9WJIZ50rms1H0hzLOpN5ChKDxaE4wELfhgx7SeE
         B8nPmoNcv6vwyN7fHWqOFIAOQj6EmzytytYdE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:sender:to:subject:in-reply-to:mime-version
         :content-type:references:x-google-sender-auth;
        b=GwD/3zD3zncnEhtTSDhR8BBB/RSMwzTQAwo8wHVqzQ55HwbNMEGmZnxq9AOTZIp85q
         yCVAMlHwbAzqyUR4H7haH6kZ6lUWVF8kOJMJo5PNkG0K06bM9rU3EY6oBES7vOGXuA4A
         CKCgXb4efJuPtdm5BrHvzZRO5KV++EgKhQbZs=
Received: by 10.140.133.10 with SMTP id g10mr4612163rvd.151.1217440068731;
        Wed, 30 Jul 2008 10:47:48 -0700 (PDT)
Received: by 10.150.219.11 with HTTP; Wed, 30 Jul 2008 10:47:48 -0700 (PDT)
Message-ID: <6f7ea56f0807301047j299cdcb6gb5a5f37baa7d1fcf@mail.gmail.com>
Date: Wed, 30 Jul 2008 10:47:48 -0700
From: "John Evans" <john@jpevans.com>
Sender: lgastako@gmail.com
To: java-user@lucene.apache.org
Subject: Re: Using lucene as a database... good idea or bad idea?
In-Reply-To: <6e3ae6310807291437o59c2acdbq6310acc2ec2fbf06@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_72002_29172556.1217440068717"
References: <6f7ea56f0807281853k1f898f5atc6beaf209e03f609@mail.gmail.com>
	 <6e3ae6310807291437o59c2acdbq6310acc2ec2fbf06@mail.gmail.com>
X-Google-Sender-Auth: 5e6a908a60f30598
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_72002_29172556.1217440068717
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi All,

Thanks for all of the feedback.  Largely as a result of the responses I've
received from the mailing list, Lucene has made it's way on to our short
list of possible solutions.  I'm not sure what the timeframe is for
implementing a prototype and testing it, but I will try to report back with
the results when/if it happens.

Thanks again,
-
John



On Tue, Jul 29, 2008 at 2:37 PM, Chris Lu <chris.lu@gmail.com> wrote:

> It surely is possible. AFAIK, LinkedIn use lucene to store some data.
>
> But, Lucene index in a sense is similar to database index. Both are data
> structures for a specialized and limited query execution path.
>
> So this depends on your applications' query, and how you create the lucene
> index. The normal usage you listed sounds reasonable.
> But you may also need to think about maintenance. In case the index is
> corrupted somehow, you may also consider store the data into database,
> which
> are more easier to manually manipulate.
>
> --
> Chris Lu
> -------------------------
> Instant Scalable Full-Text Search On Any Database/Application
> site: http://www.dbsight.net
> demo: http://search.dbsight.com
> Lucene Database Search in 3 minutes:
>
> http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_minutes
> DBSight customer, a shopping comparison site, (anonymous per request) got
> 2.6 Million Euro funding!
>
> On Mon, Jul 28, 2008 at 6:53 PM, John Evans <john@jpevans.com> wrote:
>
> > Hi All,
> >
> > I have successfully used Lucene in the "tradtiional" way to provide
> > full-text search for various websites.  Now I am tasked with developing a
> > data-store to back a web crawler.  The crawler can be configured to
> > retrieve
> > arbitrary fields from arbitrary pages, so the result is that each
> document
> > may have a random assortment of fields.  It seems like Lucene may be a
> > natural fit for this scenario since you can obviously add arbitrary
> fields
> > to each document and you can store the actually data in the database.
> I've
> > done some research to make sure that it would meet all of our individual
> > requirements (that we can iterate over documents, update (delete/replace)
> > documents, etc.) and everything looks good.  I've also seen a couple of
> > references around the net to other people trying similar things...
> however,
> > I know it's not meant to be used this way, so I thought I would post here
> > and ask for guidance?  Has anyone done something similar?  Is there any
> > specific reason to think this is a bad idea?
> >
> > The one thing that I am least certain about his how well it will scale.
>  We
> > may reach the point where we have tens of millions of documents and a
> high
> > percentage of those documents may be relatively large (10k-50k each).  We
> > actually would NOT be expecting/needing Lucene's normal extreme fast text
> > search times for this, but we would need reasonable times for adding new
> > documents to the index, retrieving documents by ID (for iterating over
> all
> > documents), optimizing the index after a series of changes, etc.
> >
> > Any advice/input/theories anyone can contribute would be greatly
> > appreciated.
> >
> > Thanks,
> > -
> > John
> >
>

------=_Part_72002_29172556.1217440068717--

From java-user-return-35221-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 30 18:10:38 2008
Return-Path: <java-user-return-35221-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 66360 invoked from network); 30 Jul 2008 18:10:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Jul 2008 18:10:38 -0000
Received: (qmail 57622 invoked by uid 500); 30 Jul 2008 18:10:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57136 invoked by uid 500); 30 Jul 2008 18:10:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57122 invoked by uid 99); 30 Jul 2008 18:10:31 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Jul 2008 11:10:31 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [64.233.184.230] (HELO wr-out-0506.google.com) (64.233.184.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Jul 2008 18:09:34 +0000
Received: by wr-out-0506.google.com with SMTP id c30so154154wra.21
        for <java-user@lucene.apache.org>; Wed, 30 Jul 2008 11:09:41 -0700 (PDT)
Received: by 10.90.51.13 with SMTP id y13mr10285136agy.46.1217441381343;
        Wed, 30 Jul 2008 11:09:41 -0700 (PDT)
Received: from ?10.17.4.4? ( [72.93.214.93])
        by mx.google.com with ESMTPS id 39sm2822081agb.23.2008.07.30.11.09.40
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Wed, 30 Jul 2008 11:09:40 -0700 (PDT)
Message-Id: <4D46501D-8E3C-42DF-9DCE-FAFBC9296E83@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Bug in Sun's 1.6 hotspot compiler that can cause index corruption
Date: Wed, 30 Jul 2008 14:09:39 -0400
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org


FYI -- there is a nasty bug that affects Lucene in Sun's 1.6 hotspot
compiler, starting with 1.6.0_04.  At least 3 known cases have been
seen on this list.

Details are here:

   https://issues.apache.org/jira/browse/LUCENE-1282

The bug causes silent index corruption during merging, such that the
merge completes successfully but in fact has introduced corruption
into the index that goes undetected until you open an IndexReader on
it.

Sun has now fixed the bug as of build 28 of the 1.6 JRE update 10 beta
(1.6.0_10-rc-b28), here:

   http://download.java.net/jdk6/binaries

If you are using 1.6.0_04 or higher, you should consider upgrading to
this JRE release, or, upgrading once it's an official release (it's  
beta now)!

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35222-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 30 18:44:36 2008
Return-Path: <java-user-return-35222-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95700 invoked from network); 30 Jul 2008 18:44:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Jul 2008 18:44:36 -0000
Received: (qmail 98327 invoked by uid 500); 30 Jul 2008 18:44:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98305 invoked by uid 500); 30 Jul 2008 18:44:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98294 invoked by uid 99); 30 Jul 2008 18:44:28 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Jul 2008 11:44:28 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of chris.lu@gmail.com designates 72.14.220.157 as permitted sender)
Received: from [72.14.220.157] (HELO fg-out-1718.google.com) (72.14.220.157)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Jul 2008 18:43:31 +0000
Received: by fg-out-1718.google.com with SMTP id l27so96098fgb.27
        for <java-user@lucene.apache.org>; Wed, 30 Jul 2008 11:43:57 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=p0tgx/vP7dmrciaPgXSM96vNBdyRpTV+BzlY4w0X+c8=;
        b=HztxNLu4mu8GrB8S0ZlxGNIC4TkkCIhCj+AithgEFgSsYLFT2RK3dSlclWgVC2hmbp
         EOMv/8gce8l1DLU4yBuKEYVT2JpyLHNp0psWS7dNmMoFTVRZcYVQCnJxq9kcJu9ObZLP
         ECNMVA2Oo20n2MUFShP265Spkd5E8DE7u30fg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=MdsckTcKxQ2yz26FL1nzugRmEZikWQJsWGDAL3xkKndTaiaZzgTaog7r0kl/veKrt0
         2nRziZ+/dYgW0OYbW1g2PUY6r/he5x645ytHIBnEneyiurb9lPuWcpBCv+3116FzihPC
         SD/3sx/TAceC1c/b34kHw7tCCbWBDk+FkL+vE=
Received: by 10.125.146.5 with SMTP id y5mr447958mkn.112.1217443436041;
        Wed, 30 Jul 2008 11:43:56 -0700 (PDT)
Received: by 10.125.148.8 with HTTP; Wed, 30 Jul 2008 11:43:55 -0700 (PDT)
Message-ID: <6e3ae6310807301143i7c673870x41a9f265db684d59@mail.gmail.com>
Date: Wed, 30 Jul 2008 11:43:55 -0700
From: "Chris Lu" <chris.lu@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Bug in Sun's 1.6 hotspot compiler that can cause index corruption
In-Reply-To: <4D46501D-8E3C-42DF-9DCE-FAFBC9296E83@mikemccandless.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_38412_25669552.1217443436020"
References: <4D46501D-8E3C-42DF-9DCE-FAFBC9296E83@mikemccandless.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_38412_25669552.1217443436020
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Thanks!!! This would really save us a lot of efforts!

-- 
Chris Lu
-------------------------
Instant Scalable Full-Text Search On Any Database/Application
site: http://www.dbsight.net
demo: http://search.dbsight.com
Lucene Database Search in 3 minutes:
http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_minutes
DBSight customer, a shopping comparison site, (anonymous per request) got
2.6 Million Euro funding!

On Wed, Jul 30, 2008 at 11:09 AM, Michael McCandless <
lucene@mikemccandless.com> wrote:

>
> FYI -- there is a nasty bug that affects Lucene in Sun's 1.6 hotspot
> compiler, starting with 1.6.0_04.  At least 3 known cases have been
> seen on this list.
>
> Details are here:
>
>  https://issues.apache.org/jira/browse/LUCENE-1282
>
> The bug causes silent index corruption during merging, such that the
> merge completes successfully but in fact has introduced corruption
> into the index that goes undetected until you open an IndexReader on
> it.
>
> Sun has now fixed the bug as of build 28 of the 1.6 JRE update 10 beta
> (1.6.0_10-rc-b28), here:
>
>  http://download.java.net/jdk6/binaries
>
> If you are using 1.6.0_04 or higher, you should consider upgrading to
> this JRE release, or, upgrading once it's an official release (it's beta
> now)!
>
> Mike
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_38412_25669552.1217443436020--

From java-user-return-35223-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 30 18:57:24 2008
Return-Path: <java-user-return-35223-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7065 invoked from network); 30 Jul 2008 18:57:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Jul 2008 18:57:23 -0000
Received: (qmail 23138 invoked by uid 500); 30 Jul 2008 18:57:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23112 invoked by uid 500); 30 Jul 2008 18:57:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23101 invoked by uid 99); 30 Jul 2008 18:57:16 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Jul 2008 11:57:16 -0700
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 64.233.166.180 as permitted sender)
Received: from [64.233.166.180] (HELO py-out-1112.google.com) (64.233.166.180)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Jul 2008 18:56:19 +0000
Received: by py-out-1112.google.com with SMTP id z74so133861pyg.9
        for <java-user@lucene.apache.org>; Wed, 30 Jul 2008 11:56:28 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=b+CI3dXpKTUTx8j8J9/Jgfumo+/rzxkuP6Y4IMcx9n0=;
        b=YFrLUr0kqxOxaOEZh/alo38OEj+Di9tFZ0G4ydRoj55ysAcsXAcHY8cVbZ1poOOnwA
         Z7Cz3HUjYPJfE+dtI1WwGNIx+cBK8j6ou+zVB923jo7XuP1uOeFta4twnmwQMkHocTiM
         GFZKFF8V1lncmPBCvGAO33WIynFngvvetwLrQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=HJuoIvN5h+YesdOMFIUgi61tkIS9BN5tH9/GHuqcEl3n84cGs4187gyEDAADbk3PTf
         eiDN8HPXuZ/ltgEDT0gYDBZV2gRyBQu265t2KMuM/q5nQCqbtR19hmaet8lyMYGv70o1
         E7tgV6zUGYJjTqFO/B7JvgjVxMVds1P5atKA4=
Received: by 10.140.202.12 with SMTP id z12mr4699172rvf.186.1217444187819;
        Wed, 30 Jul 2008 11:56:27 -0700 (PDT)
Received: by 10.140.200.1 with HTTP; Wed, 30 Jul 2008 11:56:27 -0700 (PDT)
Message-ID: <359a92830807301156r67956444ve157a781caf864ba@mail.gmail.com>
Date: Wed, 30 Jul 2008 14:56:27 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: storing the contents of a document in the lucene index
In-Reply-To: <18631887.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_57345_3737111.1217444187812"
References: <18595855.post@talk.nabble.com> <18605547.post@talk.nabble.com>
	 <359a92830807230653t53cccaceu1bba44bc8dada488@mail.gmail.com>
	 <18631887.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_57345_3737111.1217444187812
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I thought of one more thing you should be aware of. The
the default field length for any field (no matter which of the
two forms you use) is 10,000 tokens.

This can be easily changed, see
IndexWriter.setMaxFieldLength().

Best
Erick

On Thu, Jul 24, 2008 at 9:25 AM, starz10de <farag_ahmed@yahoo.com> wrote:

>
> Dear Erick ,
>
>  Thnaks for your answer, I tryed other way ,  where I read the text files
> before i index them. I will try also your solution here.
>
> best regards
>
>
> Erick Erickson wrote:
> >
> > OK, I'm finally catching on. You have to change the demo code to
> > get the contents into something besides an input stream, so you
> > can use one of the alternate forms of the Field constructor. For
> > instance, you could read it all into a string and use the form:
> >
> > doc.add(new Field("content", <string with all the file contents in it>,
> >                Field.Store.YES, Field.Index.TOKENIZED))
> >
> >
> > Or, you can do something like this, which produces identical results
> > to the above
> >
> > while (more text to read) {
> >      String line = read a line of text from the file
> >      doc.add(new Field("content", line, Field.Store.YES,
> > Field.Index.TOKENIZED))
> > }
> >
> > You can add to the same field as often as you want and it just appends
> the
> > content of calls 2 to N to the same field.
> >
> >
> > Best
> > Erick
> >
> >
> > On Wed, Jul 23, 2008 at 3:42 AM, starz10de <farag_ahmed@yahoo.com>
> wrote:
> >
> >>
> >> Hi Erik,
> >>
> >>  I don't remove the stop words, as I index parallel corpora which is
> used
> >> for learning the translations between pair of languages. so every word
> is
> >> important. I even develop my own analyzer for Arabic which is just
> remove
> >> punctuations and special symbols and it return only Arabic text.
> >>
> >> I guess in the   FileDocument.java   the whole text is already stored
> >>
> >> doc.add(Field.Text("contents", IN));
> >>
> >> where IN is
> >>
> >> IN = new BufferedReader(new InputStreamReader(new FileInputStream(f))
> >>
> >> if this is not the case yould you please how to store the whole text
> >> inside
> >> the index ?
> >>
> >> I am new to lucene and I don't know how to use this "Field.Store.YES" to
> >> store whole text.
> >>
> >>
> >>
> >> Best regards
> >> Farag
> >>
> >>
> >>
> >> starz10de wrote:
> >> >
> >> >   Could any one tell me please how to print the content of the
> document
> >> > after reading the index.
> >> > for example if i like to print the  index terms then i do :
> >> >
> >> > IndexReader ir = IndexReader.open(index);
> >> > TermEnum termEnum = ir.terms();
> >> > while (termEnum.next()) {
> >> >                       TermDocs dok = ir.termDocs();
> >> >                       dok.seek(termEnum);
> >> >                       while (dok.next()) {
> >> > System.out.println(termEnum.term().text().trim());
> >> >                               }
> >> >
> >> > I can print the text files before indexing them, but because of
> >> encoding
> >> > issues i like to print them from the index.
> >> > As i know the content of the document(whole text) is also stored in
> the
> >> > index, my question how to print this content.
> >> >
> >> > so at the end i will print the path of the current document , index
> >> terms
> >> > and the content of the document
> >> >
> >> >
> >> > thanks in advance
> >> >
> >>
> >> --
> >> View this message in context:
> >>
> http://www.nabble.com/storing-the-contents-of-a-document-in-the--lucene-index-tp18595855p18605547.html
> >> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
> >>
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >
> >
>
> --
> View this message in context:
> http://www.nabble.com/storing-the-contents-of-a-document-in-the--lucene-index-tp18595855p18631887.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_57345_3737111.1217444187812--

From java-user-return-35224-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 30 19:05:46 2008
Return-Path: <java-user-return-35224-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12702 invoked from network); 30 Jul 2008 19:05:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Jul 2008 19:05:46 -0000
Received: (qmail 32638 invoked by uid 500); 30 Jul 2008 19:05:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32599 invoked by uid 500); 30 Jul 2008 19:05:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32588 invoked by uid 99); 30 Jul 2008 19:05:39 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Jul 2008 12:05:39 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [74.125.92.26] (HELO qw-out-2122.google.com) (74.125.92.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Jul 2008 19:04:42 +0000
Received: by qw-out-2122.google.com with SMTP id 5so31292qwi.53
        for <java-user@lucene.apache.org>; Wed, 30 Jul 2008 12:05:08 -0700 (PDT)
Received: by 10.214.45.6 with SMTP id s6mr5463207qas.83.1217444708411;
        Wed, 30 Jul 2008 12:05:08 -0700 (PDT)
Received: from ?10.17.4.4? ( [72.93.214.93])
        by mx.google.com with ESMTPS id p27sm716296ele.6.2008.07.30.12.05.07
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Wed, 30 Jul 2008 12:05:07 -0700 (PDT)
Message-Id: <7B1D78F8-51B3-4E69-AF98-2FDD22A5E7F9@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <6e3ae6310807301143i7c673870x41a9f265db684d59@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: Bug in Sun's 1.6 hotspot compiler that can cause index corruption
Date: Wed, 30 Jul 2008 15:05:06 -0400
References: <4D46501D-8E3C-42DF-9DCE-FAFBC9296E83@mikemccandless.com> <6e3ae6310807301143i7c673870x41a9f265db684d59@mail.gmail.com>
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org


You're welcome!  I'm glad it saved you future problems.

Mike

Chris Lu wrote:

> Thanks!!! This would really save us a lot of efforts!
>
> --  
> Chris Lu
> -------------------------
> Instant Scalable Full-Text Search On Any Database/Application
> site: http://www.dbsight.net
> demo: http://search.dbsight.com
> Lucene Database Search in 3 minutes:
> http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_minutes
> DBSight customer, a shopping comparison site, (anonymous per  
> request) got
> 2.6 Million Euro funding!
>
> On Wed, Jul 30, 2008 at 11:09 AM, Michael McCandless <
> lucene@mikemccandless.com> wrote:
>
>>
>> FYI -- there is a nasty bug that affects Lucene in Sun's 1.6 hotspot
>> compiler, starting with 1.6.0_04.  At least 3 known cases have been
>> seen on this list.
>>
>> Details are here:
>>
>> https://issues.apache.org/jira/browse/LUCENE-1282
>>
>> The bug causes silent index corruption during merging, such that the
>> merge completes successfully but in fact has introduced corruption
>> into the index that goes undetected until you open an IndexReader on
>> it.
>>
>> Sun has now fixed the bug as of build 28 of the 1.6 JRE update 10  
>> beta
>> (1.6.0_10-rc-b28), here:
>>
>> http://download.java.net/jdk6/binaries
>>
>> If you are using 1.6.0_04 or higher, you should consider upgrading to
>> this JRE release, or, upgrading once it's an official release (it's  
>> beta
>> now)!
>>
>> Mike
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35225-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 30 19:42:33 2008
Return-Path: <java-user-return-35225-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35727 invoked from network); 30 Jul 2008 19:42:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Jul 2008 19:42:33 -0000
Received: (qmail 74573 invoked by uid 500); 30 Jul 2008 19:42:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74542 invoked by uid 500); 30 Jul 2008 19:42:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74531 invoked by uid 99); 30 Jul 2008 19:42:26 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Jul 2008 12:42:26 -0700
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=SPF_PASS,URIBL_GREY
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of marcelo.ochoa@gmail.com designates 209.85.146.181 as permitted sender)
Received: from [209.85.146.181] (HELO wa-out-1112.google.com) (209.85.146.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Jul 2008 19:41:29 +0000
Received: by wa-out-1112.google.com with SMTP id l24so96988waf.11
        for <java-user@lucene.apache.org>; Wed, 30 Jul 2008 12:41:55 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references;
        bh=MMFwKB/gOPu0PwTwnp/iPQ6z5ubn+5SRQCs0ECgq2hA=;
        b=laM/cRz+lTI7bQDUdyc26B072v9S0UoNckfyCZ9LvkvDsQlSqxuTWqL3JzGnnQwjuC
         RT5YVIk6aJDn+VAUxnHZw2Cg5QXf+vh197GXJsGUkcrwTXlm8LH51SNPMRbQGeeqWjXn
         cyzstB/O0ZNJEopiinPkwXpnIeHh/HmUUIdn0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references;
        b=IZPjJ8mvR5wYlPaMckLJHj+pO1ijurdMyYcxSfIEbs22iluNs4xdmcyddoamEA/3An
         Zim+zqIrEJ5AGPSm3viB1ePJqYkKSzofx+ppfrzBfLDaP8YHisRzC8uTUo/HU0majL0p
         B6IjJne8EhcXf0DuZXKJgSmbixaD4SzeNO7gg=
Received: by 10.114.79.18 with SMTP id c18mr9150624wab.86.1217446912771;
        Wed, 30 Jul 2008 12:41:52 -0700 (PDT)
Received: by 10.151.109.1 with HTTP; Wed, 30 Jul 2008 12:41:52 -0700 (PDT)
Message-ID: <126142c0807301241y28a150daj74cdfb0ec9325428@mail.gmail.com>
Date: Wed, 30 Jul 2008 16:41:52 -0300
From: "Marcelo Ochoa" <marcelo.ochoa@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Using lucene as a database... good idea or bad idea?
In-Reply-To: <6f7ea56f0807281853k1f898f5atc6beaf209e03f609@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <6f7ea56f0807281853k1f898f5atc6beaf209e03f609@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi John:
  Did you test/know Lucene Domain Index for Oracle database?
http://marceloochoa.blogspot.com/2007/09/running-lucene-inside-your-oracle-jvm.html
  If you are using Oracle 10g/11g is completed integrated in Oracle
memory space like Oracle Text but based in  Lucene.
  No network round trip is involved during indexing/querying time and
Lucene store is replaced by BLOB database storage.
  Also you can query your Oracle text store direct by SQL and two new
operators, lcontains and lscore based and Lucene and directly
integrated with the Oracle execution plan.
  Best regards, Marcelo.

On Mon, Jul 28, 2008 at 10:53 PM, John Evans <john@jpevans.com> wrote:
> Hi All,
>
> I have successfully used Lucene in the "tradtiional" way to provide
> full-text search for various websites.  Now I am tasked with developing a
> data-store to back a web crawler.  The crawler can be configured to retrieve
> arbitrary fields from arbitrary pages, so the result is that each document
> may have a random assortment of fields.  It seems like Lucene may be a
> natural fit for this scenario since you can obviously add arbitrary fields
> to each document and you can store the actually data in the database. I've
> done some research to make sure that it would meet all of our individual
> requirements (that we can iterate over documents, update (delete/replace)
> documents, etc.) and everything looks good.  I've also seen a couple of
> references around the net to other people trying similar things... however,
> I know it's not meant to be used this way, so I thought I would post here
> and ask for guidance?  Has anyone done something similar?  Is there any
> specific reason to think this is a bad idea?
>
> The one thing that I am least certain about his how well it will scale.  We
> may reach the point where we have tens of millions of documents and a high
> percentage of those documents may be relatively large (10k-50k each).  We
> actually would NOT be expecting/needing Lucene's normal extreme fast text
> search times for this, but we would need reasonable times for adding new
> documents to the index, retrieving documents by ID (for iterating over all
> documents), optimizing the index after a series of changes, etc.
>
> Any advice/input/theories anyone can contribute would be greatly
> appreciated.
>
> Thanks,
> -
> John
>



-- 
Marcelo F. Ochoa
http://marceloochoa.blogspot.com/
http://marcelo.ochoa.googlepages.com/home
______________
Do you Know DBPrism? Look @ DB Prism's Web Site
http://www.dbprism.com.ar/index.html
More info?
Chapter 17 of the book "Programming the Oracle Database using Java &
Web Services"
http://www.amazon.com/gp/product/1555583296/
Chapter 21 of the book "Professional XML Databases" - Wrox Press
http://www.amazon.com/gp/product/1861003587/
Chapter 8 of the book "Oracle & Open Source" - O'Reilly
http://www.oreilly.com/catalog/oracleopen/

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35226-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 30 20:45:36 2008
Return-Path: <java-user-return-35226-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 83290 invoked from network); 30 Jul 2008 20:45:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Jul 2008 20:45:36 -0000
Received: (qmail 59444 invoked by uid 500); 30 Jul 2008 20:45:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59416 invoked by uid 500); 30 Jul 2008 20:45:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59405 invoked by uid 99); 30 Jul 2008 20:45:29 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Jul 2008 13:45:29 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of jason.rutherglen@gmail.com designates 74.125.46.31 as permitted sender)
Received: from [74.125.46.31] (HELO yw-out-2324.google.com) (74.125.46.31)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Jul 2008 20:44:34 +0000
Received: by yw-out-2324.google.com with SMTP id 3so109494ywj.5
        for <java-user@lucene.apache.org>; Wed, 30 Jul 2008 13:44:50 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=cT+SZLR51fGRUWkERO2tzRfzjBbWhZI0tJKSTbq7sww=;
        b=Q4/EuTwsEnyEL8IkWMU1bgIIJgDV6T5EtxfEKm1VREiDwARaMcANG/vSfIzmhw5mpu
         0SbWghmo+NruP4U3lvMEj1A7nj+tA0AtvnbSEFAhdivaGp874gHrTsNv64UllBZMRef/
         B326HXerFTkqArufqtN90g+Ga1Hl/VgQ5ryT8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=A3+f6AbHJgh2tCQKJ9BJnGlDz37cRJzUG34Mgh93DwnBdiDsKws4bJynh5TmKYD5wc
         RvXSLJnr/Pqi70asP3OSD0rJ9FDDB7pgFam2QzMWHYF8fi3HLutFWwLWkSKoloXN++9q
         Jt9HRm1vWWafxgnPg21tX8QuXYVjRDIGMw9Eg=
Received: by 10.114.38.2 with SMTP id l2mr9216734wal.200.1217450689619;
        Wed, 30 Jul 2008 13:44:49 -0700 (PDT)
Received: by 10.151.112.11 with HTTP; Wed, 30 Jul 2008 13:44:49 -0700 (PDT)
Message-ID: <85d3c3b60807301344w22729a1ci7f3f5073d30b0bc1@mail.gmail.com>
Date: Wed, 30 Jul 2008 16:44:49 -0400
From: "Jason Rutherglen" <jason.rutherglen@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Using lucene as a database... good idea or bad idea?
In-Reply-To: <6f7ea56f0807281853k1f898f5atc6beaf209e03f609@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_53805_32907455.1217450689596"
References: <6f7ea56f0807281853k1f898f5atc6beaf209e03f609@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_53805_32907455.1217450689596
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

A possible open source solution using a page based database would be to
store the documents in http://jdbm.sourceforge.net/ which offers BTree,
Hash, and raw page based access.  One would use a primary key type of
persistent ID to lookup the document data from JDBM.

Would be a good Lucene project to implement and I think a good solution for
Ocean LUCENE-1313.  Storing documents in Lucene is fine but for a realtime
search index with many documents being deleted a lot of garbage builds up.
Frequent merging of documents files becomes IO intensive.

Of course one issue with JDBM which I am not sure other SQL page based
systems do is load individual fields directly from disk rather than load the
entire page into RAM first, then load the pages. Maybe it does not matter.

On Mon, Jul 28, 2008 at 9:53 PM, John Evans <john@jpevans.com> wrote:

> Hi All,
>
> I have successfully used Lucene in the "tradtiional" way to provide
> full-text search for various websites.  Now I am tasked with developing a
> data-store to back a web crawler.  The crawler can be configured to
> retrieve
> arbitrary fields from arbitrary pages, so the result is that each document
> may have a random assortment of fields.  It seems like Lucene may be a
> natural fit for this scenario since you can obviously add arbitrary fields
> to each document and you can store the actually data in the database. I've
> done some research to make sure that it would meet all of our individual
> requirements (that we can iterate over documents, update (delete/replace)
> documents, etc.) and everything looks good.  I've also seen a couple of
> references around the net to other people trying similar things... however,
> I know it's not meant to be used this way, so I thought I would post here
> and ask for guidance?  Has anyone done something similar?  Is there any
> specific reason to think this is a bad idea?
>
> The one thing that I am least certain about his how well it will scale.  We
> may reach the point where we have tens of millions of documents and a high
> percentage of those documents may be relatively large (10k-50k each).  We
> actually would NOT be expecting/needing Lucene's normal extreme fast text
> search times for this, but we would need reasonable times for adding new
> documents to the index, retrieving documents by ID (for iterating over all
> documents), optimizing the index after a series of changes, etc.
>
> Any advice/input/theories anyone can contribute would be greatly
> appreciated.
>
> Thanks,
> -
> John
>

------=_Part_53805_32907455.1217450689596--

From java-user-return-35227-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 30 21:46:22 2008
Return-Path: <java-user-return-35227-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21605 invoked from network); 30 Jul 2008 21:46:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Jul 2008 21:46:22 -0000
Received: (qmail 46163 invoked by uid 500); 30 Jul 2008 21:46:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46137 invoked by uid 500); 30 Jul 2008 21:46:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46126 invoked by uid 99); 30 Jul 2008 21:46:15 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Jul 2008 14:46:15 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of dragon-fly999@hotmail.com designates 65.55.111.92 as permitted sender)
Received: from [65.55.111.92] (HELO blu0-omc2-s17.blu0.hotmail.com) (65.55.111.92)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Jul 2008 21:45:17 +0000
Received: from BLU149-W52 ([65.55.111.72]) by blu0-omc2-s17.blu0.hotmail.com with Microsoft SMTPSVC(6.0.3790.3959);
	 Wed, 30 Jul 2008 14:45:43 -0700
Message-ID: <BLU149-W5245951781BF1E75048B49B97D0@phx.gbl>
Content-Type: multipart/alternative;
	boundary="_f8a58289-dbfd-45b4-88ee-51f2b3c901bd_"
X-Originating-IP: [137.103.1.90]
From: Dragon Fly <dragon-fly999@hotmail.com>
To: <java-user@lucene.apache.org>
Subject: RE: Index optimization ...
Date: Wed, 30 Jul 2008 17:45:43 -0400
Importance: Normal
In-Reply-To: <2A2BA5F2-A746-4B63-95CC-635405CFA38E@apache.org>
References: <BLU149-W70E21A40B150D13EBB9733B9830@phx.gbl>
 <D582935BCF154751AD4F67A17F2E2963@desktop>
 <20080729063246.GC12841@stud.ntnu.no>
 <BLU149-W11F6E544515FA16F675DA7B97D0@phx.gbl>
 <2A2BA5F2-A746-4B63-95CC-635405CFA38E@apache.org>
MIME-Version: 1.0
X-OriginalArrivalTime: 30 Jul 2008 21:45:43.0183 (UTC) FILETIME=[9DCD09F0:01C8F28D]
X-Virus-Checked: Checked by ClamAV on apache.org

--_f8a58289-dbfd-45b4-88ee-51f2b3c901bd_
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

I'll run some tests.  Thank you.

> From: gsingers@apache.org
> To: java-user@lucene.apache.org
> Subject: Re: Index optimization ...
> Date: Wed=2C 30 Jul 2008 11:12:28 -0400
>=20
> What version of Lucene are you using?  What is your current =20
> mergeFactor?  Lowering this (minimum is 2) will result in an index =20
> that is closer to "optimal" since an optimized index is just one that =20
> has all the segments merged into a single segment and a mergeFactor of =20
> 2 just means there are only ever 2 segments (the docs could make this =20
> clearer).  The tradeoff is that you may need to do merges more often.  =20
> If you are using Lucene 2.3.x these merges can now take place in the =20
> background=2C so this may not be as big a penalty as it once was.  =20
> Still=2C the fact is=2C optimize has to go through=2C in the end=2C and m=
erge =20
> your segments into one big segment.  This is a lengthy undertaking on =20
> a large index.
>=20
> I'm not sure=2C however=2C if any of this will reduce your overall time. =
 =20
> I suppose it depends somewhat on your update rate.  It is possible =20
> that the slower indexing could offset any gains had by a faster =20
> optimize.  Another option may be to keep the mergeFactor higher=2C but =20
> then every so often do partial optimizes to keep your index closer to =20
> optimal such that a final optimize may be speed up
>=20
> Another question is have you measured your query performance on an =20
> unoptimized index?  Is it acceptable?  Are you only adding new =20
> documents or are you also deleting docs in that 4 hour time period?
>=20
> Bottom line=2C though=2C is you need to test out the various knobs =20
> (mergeFactor=2C RAMBufferSizeMB=2C etc.) and see.  You may find the =20
> contrib/benchmark program helpful for running experiments=2C although it =
=20
> isn't a substitute for your actual data.
>=20
> -Grant
>=20
>=20
> On Jul 30=2C 2008=2C at 9:46 AM=2C Dragon Fly wrote:
>=20
> > Perhaps I didn't explain myself clearly so please let me try it =20
> > again.  I'm happy with the search/indexing performance.   However=2C =20
> > my index gets fully optimized every 4 hours and the time it takes to =20
> > fully optimize the index is longer than I like.  Is there anything =20
> > that I can do to speed up the optimization? I don't fully understand =20
> > the different parameters (e.g. merge factor).  If I decrease the =20
> > merge factor=2C would it make the indexing slower (which I'm OK with) =
=20
> > but the optimization faster? Thank you.
> >
> >> Date: Tue=2C 29 Jul 2008 08:32:46 +0200
> >> From: asbjorn@fellinghaug.com
> >> To: java-user@lucene.apache.org
> >> Subject: Re: Index optimization ...
> >>
> >> John Griffin:
> >>> Use IndexWriter.setRAMBufferSizeMB(double mb) and you won't have to
> >>> sacrifice anything. It defaults to 16.0 MB so depending on the =20
> >>> size of your
> >>> index you may want to make it larger. Do some testing at various =20
> >>> values to
> >>> see where the sweet spot is.
> >>>
> >>
> >> Also=2C have a look at
> >> http://wiki.apache.org/lucene-java/ImproveIndexingSpeed=2C which =20
> >> provides
> >> a range of helping advices in terms of enhanced indexing speed.
> >>
> >> --=20
> >> Asbj=F8rn A. Fellinghaug
> >> asbjorn@fellinghaug.com
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe=2C e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands=2C e-mail: java-user-help@lucene.apache.org
> >>
> >
> > _________________________________________________________________
> > With Windows Live for mobile=2C your contacts travel with you.
> > http://www.windowslive.com/mobile/overview.html?ocid=3DTXT_TAGLM_WL_mob=
ile_072008
>=20
> --------------------------
> Grant Ingersoll
> http://www.lucidimagination.com
>=20
> Lucene Helpful Hints:
> http://wiki.apache.org/lucene-java/BasicsOfPerformance
> http://wiki.apache.org/lucene-java/LuceneFAQ
>=20
>=20
>=20
>=20
>=20
>=20
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe=2C e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands=2C e-mail: java-user-help@lucene.apache.org
>=20

_________________________________________________________________
Use video conversation to talk face-to-face with Windows Live Messenger.
http://www.windowslive.com/messenger/connect_your_way.html?ocid=3DTXT_TAGLM=
_WL_Refresh_messenger_video_072008=

--_f8a58289-dbfd-45b4-88ee-51f2b3c901bd_--

From java-user-return-35228-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 30 22:45:17 2008
Return-Path: <java-user-return-35228-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63483 invoked from network); 30 Jul 2008 22:45:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Jul 2008 22:45:17 -0000
Received: (qmail 24326 invoked by uid 500); 30 Jul 2008 22:45:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24289 invoked by uid 500); 30 Jul 2008 22:45:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24278 invoked by uid 99); 30 Jul 2008 22:45:10 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Jul 2008 15:45:10 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Jul 2008 22:44:15 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id 9D29971C3A4; Wed, 30 Jul 2008 15:44:11 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id 99C4471C211
	for <java-user@lucene.apache.org>; Wed, 30 Jul 2008 15:44:11 -0700 (PDT)
Date: Wed, 30 Jul 2008 15:44:11 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: RE: Index optimization ...
In-Reply-To: <BLU149-W52F357CAE91A172B694C69B97D0@phx.gbl>
Message-ID: <Pine.LNX.4.62.0807301539060.23205@radix.cryptio.net>
References: <BLU149-W70E21A40B150D13EBB9733B9830@phx.gbl> 
 <D582935BCF154751AD4F67A17F2E2963@desktop>   <20080729063246.GC12841@stud.ntnu.no>
   <BLU149-W11F6E544515FA16F675DA7B97D0@phx.gbl>  
 <8c4e68610807300654n526ad151yb8ba8a863d3df67a@mail.gmail.com>  
 <BLU149-W77772BAF8CEB97EB089D7AB97D0@phx.gbl> 
 <8c4e68610807300703l2244136aj103b23f74b62c9e9@mail.gmail.com>
 <BLU149-W52F357CAE91A172B694C69B97D0@phx.gbl>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: My understanding is that an optimized index gives the best search 

there is an inherent inconsistency in your question -- yo usay you 
optimize your index before using it becuase you heard thta makes searches 
faster, but in your orriginal question you said...

> I'd like to shorten the time it takes to optimize my index and am 
> willing to sacrifice search and indexing performance.  Which parameters 

...if you are willing to sacrifice search performacne, why don't you just 
stop optimizing altogether?

there's very little point to optimizing unless you don't pln on 
updating the index for a while afterwards, and are trying to squeeze 
every little bit of speed out of each search.  if the time it takes to do 
the optimize is prohibitive, and you don't care if searches get a *little*
slower (and i really do suspect the difference will be fairly small, some 
really great improvements were made to searching with multiple segments a 
few point revs back) then you don't need it.


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35229-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 31 03:58:32 2008
Return-Path: <java-user-return-35229-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96332 invoked from network); 31 Jul 2008 03:58:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Jul 2008 03:58:31 -0000
Received: (qmail 31373 invoked by uid 500); 31 Jul 2008 03:58:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31342 invoked by uid 500); 31 Jul 2008 03:58:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31331 invoked by uid 99); 31 Jul 2008 03:58:25 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 30 Jul 2008 20:58:25 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of adb@teamware.com designates 212.226.92.15 as permitted sender)
Received: from [212.226.92.15] (HELO monkey.teamware.com) (212.226.92.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Jul 2008 03:57:30 +0000
Received: from intrepid.teamw.com (intrepid.teamw.com [10.142.128.11])
	by monkey.teamware.com (8.13.1/8.13.1) with ESMTP id m6V3tlco021244
	for <java-user@lucene.apache.org>; Thu, 31 Jul 2008 06:55:47 +0300
Received: from [10.142.3.10] ([10.142.3.10]) by nimitz.teamw.com with ESMTP
	 id mgs8tdlt; 31 Jul 2008 06:55:00 +0300
Message-ID: <489137C0.2080100@teamware.com>
Date: Thu, 31 Jul 2008 13:55:44 +1000
From: Antony Bowesman <adb@teamware.com>
Organization: Teamware Group
User-Agent: Thunderbird 2.0.0.12 (Windows/20080213)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Modifying a document by updating a payloads?
References: <48904A73.4000706@teamware.com> <B4AD0010-DA32-460B-85D2-B8B9742DB163@mikemccandless.com>
In-Reply-To: <B4AD0010-DA32-460B-85D2-B8B9742DB163@mikemccandless.com>
X-TWG-MDN: never
Content-Type: text/plain; charset=windows-1252; format=flowed
Content-Transfer-Encoding: 8bit
X-Greylist: Sender IP whitelisted, not delayed by milter-greylist-1.6 (monkey.teamware.com [212.226.92.15]); Thu, 31 Jul 2008 06:55:47 +0300 (EEST)
X-TWG-MailScanner-Information: See www.mailscanner.info for information
X-TWG-MailScanner: Found to be clean
X-TWG-MailScanner-SpamCheck: not spam, SpamAssassin (score=0, required 5,
	autolearn=not spam)
X-MailScanner-From: adb@teamware.com
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Mike,

> Unfortunately you will have to delete the old doc, then reindex a new 
> doc, in order to change any payloads in the document's Tokens.
> 
> This issue:
> 
>     https://issues.apache.org/jira/browse/LUCENE-1231
> 
> which is still in progress, could make updating stored (but not indexed) 
> fields a much lower cost operation, but that's not for sure and it's not 
> clear when that issue will be done.

Michael Busch's Apache Con (2006/7??) presentation summarized with the bullet

"Per-document Payloads  updateable"

Is making a document 'updatable' (in _some_ way) something still seen as a long 
term goal for Lucene?

As far as implementation is concerned, if a stored (not indexed) field may be 
updatable with 1231, is there some difficulty with making payloads, which from 
my understanding are attributed to a posting of an indexed field, updatable.  I 
guess they ultimately equate to the same thing - i.e. using a stored field to 
hold the document's "payload", but it would be an extra field to load.

Antony





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35230-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 31 08:55:09 2008
Return-Path: <java-user-return-35230-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48451 invoked from network); 31 Jul 2008 08:55:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Jul 2008 08:55:06 -0000
Received: (qmail 87735 invoked by uid 500); 31 Jul 2008 08:54:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87702 invoked by uid 500); 31 Jul 2008 08:54:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87691 invoked by uid 99); 31 Jul 2008 08:54:59 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Jul 2008 01:54:59 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Jul 2008 08:54:03 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KOTvZ-00059s-8B
	for java-user@lucene.apache.org; Thu, 31 Jul 2008 01:54:29 -0700
Message-ID: <18750334.post@talk.nabble.com>
Date: Thu, 31 Jul 2008 01:54:29 -0700 (PDT)
From: "Karsten F." <karsten-lucene@fiz-technik.de>
To: java-user@lucene.apache.org
Subject: Re: Using lucene as a database... good idea or bad idea?
In-Reply-To: <70A670C6-E5DB-4FBA-97F3-6FD00049441D@apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: karsten-lucene@fiz-technik.de
References: <6f7ea56f0807281853k1f898f5atc6beaf209e03f609@mail.gmail.com> <8c4e68610807290148h6595611dla895dd22e8af4548@mail.gmail.com> <006a01c8f15e$3f2e2df0$610cc30a@sv.us.sonicwall.com> <70A670C6-E5DB-4FBA-97F3-6FD00049441D@apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org


Hi Grant,

you made mention of jackrabbit as example of storing data in lucene.
I did not find something like that in source-code. I found 
"LocalFileSystem" and "DatabaseFileSystem".
(I found lucene for indexing and searching.)

Have I overlooked something?

Best regards
   Karsten

 

Grant Ingersoll-6 wrote:
> 
> I think the answer is it can be done and probably quite well.  I also  
> think it's informative that Nutch does not use Lucene for this  
> function, as I understand it, but that shouldn't stop you either.  You  
> might also have a look at Apache Jackrabbit, which uses Lucene  
> underneath as a content repository.
> 
> -Grant
> 
> 
-- 
View this message in context: http://www.nabble.com/Using-lucene-as-a-database...-good-idea-or-bad-idea--tp18703473p18750334.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35231-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 31 09:34:38 2008
Return-Path: <java-user-return-35231-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65275 invoked from network); 31 Jul 2008 09:34:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Jul 2008 09:34:37 -0000
Received: (qmail 28637 invoked by uid 500); 31 Jul 2008 09:34:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28596 invoked by uid 500); 31 Jul 2008 09:34:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28585 invoked by uid 99); 31 Jul 2008 09:34:29 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Jul 2008 02:34:29 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.132.246] (HELO an-out-0708.google.com) (209.85.132.246)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Jul 2008 09:33:32 +0000
Received: by an-out-0708.google.com with SMTP id c37so459063anc.49
        for <java-user@lucene.apache.org>; Thu, 31 Jul 2008 02:33:57 -0700 (PDT)
Received: by 10.100.14.17 with SMTP id 17mr9571436ann.54.1217496837429;
        Thu, 31 Jul 2008 02:33:57 -0700 (PDT)
Received: from ?10.17.4.4? ( [72.93.214.93])
        by mx.google.com with ESMTPS id d12sm4396580and.6.2008.07.31.02.33.56
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Thu, 31 Jul 2008 02:33:56 -0700 (PDT)
Message-Id: <291F0075-0F85-4009-B8A7-0CD0C0E61FC5@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <489137C0.2080100@teamware.com>
Content-Type: text/plain; charset=WINDOWS-1252; format=flowed; delsp=yes
Content-Transfer-Encoding: quoted-printable
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: Modifying a document by updating a payloads?
Date: Thu, 31 Jul 2008 05:33:55 -0400
References: <48904A73.4000706@teamware.com> <B4AD0010-DA32-460B-85D2-B8B9742DB163@mikemccandless.com> <489137C0.2080100@teamware.com>
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org


Antony Bowesman wrote:

> Hi Mike,
>
>> Unfortunately you will have to delete the old doc, then reindex a =20
>> new doc, in order to change any payloads in the document's Tokens.
>> This issue:
>>    https://issues.apache.org/jira/browse/LUCENE-1231
>> which is still in progress, could make updating stored (but not =20
>> indexed) fields a much lower cost operation, but that's not for =20
>> sure and it's not clear when that issue will be done.
>
> Michael Busch's Apache Con (2006/7??) presentation summarized with =20
> the bullet
>
> "Per-document Payloads =96 updateable"

Ahh -- this is just another name for "column-stride fields" (which is =20=

the above issue I linked to).

Normal payloads are per term occurrence, ie, every position in the =20
document can have its own payload.

Whereas "per-document payloads" means there is a single payload per =20
field in the document, which logically is no different than a stored =20
field, except the underly storage would be more efficient (column-=20
stride, where that field's value for all docs is stored together vs =20
the normal row-stride used by current stored fields, where all field =20
values for a single document are stored together).

> Is making a document 'updatable' (in _some_ way) something still =20
> seen as a long term goal for Lucene?

I would say it is a goal in that there is alot of interest and =20
discussion around how to do this.  I think LUCENE-1231 is the most =20
concrete recent effort & most likely to be the first path that makes =20
updating documents possible.

> As far as implementation is concerned, if a stored (not indexed) =20
> field may be updatable with 1231, is there some difficulty with =20
> making payloads, which from my understanding are attributed to a =20
> posting of an indexed field, updatable.  I guess they ultimately =20
> equate to the same thing - i.e. using a stored field to hold the =20
> document's "payload", but it would be an extra field to load.

Updating the postings lists (freq/prx&payloads) is unfortunately quite =20=

a bit trickier than updating a column-stride or row-stride stored =20
fields.

I think the approach we need to eventually take is to allow "patches" =20=

onto a segments posting lists.

For example, segment _X would have the original large _X.frq/prx but =20
then could have say _X_1.frq/prx which is a much smaller file =20
containing postings for those docs that have been updated since the =20
segment was originally created.  If more docs are updated that would =20
produce _X_2.frq/prx, etc.

IndexReaders would then need to hold open all of these postings and =20
dynamically "apply" the patch such that a doc's postings are iterated =20=

from the newest frq/prx file that it exists in.  Optimize() and =20
partial optimize() would then coalesce these files back into 1 (or =20
maybe a few) frq/prx files.

At least that's my current thinking on how we would approach updating =20=

postings... but realistically these are just thoughts and are quite a =20=

ways off from becoming a reality!

Mike=

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35232-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 31 09:53:33 2008
Return-Path: <java-user-return-35232-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 74853 invoked from network); 31 Jul 2008 09:53:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Jul 2008 09:53:33 -0000
Received: (qmail 46738 invoked by uid 500); 31 Jul 2008 09:53:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46699 invoked by uid 500); 31 Jul 2008 09:53:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46687 invoked by uid 99); 31 Jul 2008 09:53:26 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Jul 2008 02:53:26 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=SPF_NEUTRAL,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.66] (HELO spunkymail-a9.g.dreamhost.com) (208.97.132.66)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Jul 2008 09:52:29 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a9.g.dreamhost.com (Postfix) with ESMTP id 54CE1213F2
	for <java-user@lucene.apache.org>; Thu, 31 Jul 2008 02:52:24 -0700 (PDT)
Message-Id: <151B185F-C80F-4320-903F-2A1FF49EA3F2@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <18750334.post@talk.nabble.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: Using lucene as a database... good idea or bad idea?
Date: Thu, 31 Jul 2008 05:52:23 -0400
References: <6f7ea56f0807281853k1f898f5atc6beaf209e03f609@mail.gmail.com> <8c4e68610807290148h6595611dla895dd22e8af4548@mail.gmail.com> <006a01c8f15e$3f2e2df0$610cc30a@sv.us.sonicwall.com> <70A670C6-E5DB-4FBA-97F3-6FD00049441D@apache.org> <18750334.post@talk.nabble.com>
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org

Hmmm, I thought it did.  Can't say I've studied the code though, so  
I'll take your word for it.

Never mind on the Jackrabbit suggestion :-)

Cheers,
Grant

On Jul 31, 2008, at 4:54 AM, Karsten F. wrote:

>
> Hi Grant,
>
> you made mention of jackrabbit as example of storing data in lucene.
> I did not find something like that in source-code. I found
> "LocalFileSystem" and "DatabaseFileSystem".
> (I found lucene for indexing and searching.)
>
> Have I overlooked something?
>
> Best regards
>   Karsten
>
>
>
> Grant Ingersoll-6 wrote:
>>
>> I think the answer is it can be done and probably quite well.  I also
>> think it's informative that Nutch does not use Lucene for this
>> function, as I understand it, but that shouldn't stop you either.   
>> You
>> might also have a look at Apache Jackrabbit, which uses Lucene
>> underneath as a content repository.
>>
>> -Grant
>>
>>
> -- 
> View this message in context: http://www.nabble.com/Using-lucene-as-a-database...-good-idea-or-bad-idea--tp18703473p18750334.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35233-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 31 11:33:27 2008
Return-Path: <java-user-return-35233-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20715 invoked from network); 31 Jul 2008 11:33:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Jul 2008 11:33:24 -0000
Received: (qmail 40956 invoked by uid 500); 31 Jul 2008 11:33:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40925 invoked by uid 500); 31 Jul 2008 11:33:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40914 invoked by uid 99); 31 Jul 2008 11:33:17 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Jul 2008 04:33:17 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ian.lea@gmail.com designates 209.85.198.235 as permitted sender)
Received: from [209.85.198.235] (HELO rv-out-0506.google.com) (209.85.198.235)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Jul 2008 11:32:20 +0000
Received: by rv-out-0506.google.com with SMTP id f6so508936rvb.5
        for <java-user@lucene.apache.org>; Thu, 31 Jul 2008 04:32:47 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references;
        bh=GAt3YoDS67E+nwrLhovQAWP5lhXyLigkWhzth6SDdCs=;
        b=EQ02IFLKZr+w1swi17Wx8+fhp1bVL/PJUxr1WgXDN0dsPj8cGlsEgQ4QFExStcGscb
         THAmathl5xljaUOHnBETs5X1EWz8FCFJ6xUJcDOfvGuPoVv9JywllDUxYqYy7ORpkDlZ
         VgUgifzTAi2iiCGe0fVabZK8vVWZDMODyJK+A=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references;
        b=Iuv/1f1fv6Emr4cBC9RkVTngAjrUyOR+SOB9tPVYhVtbNXsHKt4HB98xFTRWJ198ze
         6c/wrpHlSiz4CnteS2g0XVHyBEvM8rW2D0LFm4lQSVFRtr5cUfT6bMvWIIGF/oII+vA7
         eiTR7kTqT2fnpypcWZyivwv9wS5ghmgRi1+3U=
Received: by 10.114.177.1 with SMTP id z1mr9961373wae.37.1217503967070;
        Thu, 31 Jul 2008 04:32:47 -0700 (PDT)
Received: by 10.114.15.5 with HTTP; Thu, 31 Jul 2008 04:32:47 -0700 (PDT)
Message-ID: <8c4e68610807310432w44bce1f2wa4b7b44c39bc7762@mail.gmail.com>
Date: Thu, 31 Jul 2008 12:32:47 +0100
From: "Ian Lea" <ian.lea@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Bug in Sun's 1.6 hotspot compiler that can cause index corruption
In-Reply-To: <4D46501D-8E3C-42DF-9DCE-FAFBC9296E83@mikemccandless.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <4D46501D-8E3C-42DF-9DCE-FAFBC9296E83@mikemccandless.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Excellent.  And to confirm - my always-fails index load runs to
successful completion on this release.

Thanks Mike.


--
Ian.


On Wed, Jul 30, 2008 at 7:09 PM, Michael McCandless
<lucene@mikemccandless.com> wrote:
>
> FYI -- there is a nasty bug that affects Lucene in Sun's 1.6 hotspot
> compiler, starting with 1.6.0_04.  At least 3 known cases have been
> seen on this list.
>
> Details are here:
>
>  https://issues.apache.org/jira/browse/LUCENE-1282
>
> The bug causes silent index corruption during merging, such that the
> merge completes successfully but in fact has introduced corruption
> into the index that goes undetected until you open an IndexReader on
> it.
>
> Sun has now fixed the bug as of build 28 of the 1.6 JRE update 10 beta
> (1.6.0_10-rc-b28), here:
>
>  http://download.java.net/jdk6/binaries
>
> If you are using 1.6.0_04 or higher, you should consider upgrading to
> this JRE release, or, upgrading once it's an official release (it's beta
> now)!
>
> Mike
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35234-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 31 11:50:29 2008
Return-Path: <java-user-return-35234-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 29789 invoked from network); 31 Jul 2008 11:50:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Jul 2008 11:50:29 -0000
Received: (qmail 56208 invoked by uid 500); 31 Jul 2008 11:50:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56172 invoked by uid 500); 31 Jul 2008 11:50:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56161 invoked by uid 99); 31 Jul 2008 11:50:21 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Jul 2008 04:50:21 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.132.242] (HELO an-out-0708.google.com) (209.85.132.242)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Jul 2008 11:49:24 +0000
Received: by an-out-0708.google.com with SMTP id c37so539332anc.49
        for <java-user@lucene.apache.org>; Thu, 31 Jul 2008 04:49:32 -0700 (PDT)
Received: by 10.101.69.10 with SMTP id w10mr14612365ank.30.1217504971947;
        Thu, 31 Jul 2008 04:49:31 -0700 (PDT)
Received: from ?10.17.4.4? ( [72.93.214.93])
        by mx.google.com with ESMTPS id 14sm3173983wrl.26.2008.07.31.04.49.30
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Thu, 31 Jul 2008 04:49:31 -0700 (PDT)
Message-Id: <A6C30FB1-B562-4940-A675-05BB19D906A0@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <8c4e68610807310432w44bce1f2wa4b7b44c39bc7762@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Re: Bug in Sun's 1.6 hotspot compiler that can cause index corruption
Date: Thu, 31 Jul 2008 07:49:28 -0400
References: <4D46501D-8E3C-42DF-9DCE-FAFBC9296E83@mikemccandless.com> <8c4e68610807310432w44bce1f2wa4b7b44c39bc7762@mail.gmail.com>
X-Mailer: Apple Mail (2.926)
X-Virus-Checked: Checked by ClamAV on apache.org


Excellent!

Thank you for originally raising this issue; I think you were first to  
stumble on this unfortunate bug.  Because you raised it here, and  
iterated like crazy to narrow it down, we were able to eventually  
track it down & resolve it.  Lucene progress would not happen without  
such active/involved users like you!

Mike

Ian Lea wrote:

> Excellent.  And to confirm - my always-fails index load runs to
> successful completion on this release.
>
> Thanks Mike.
>
>
> --
> Ian.
>
>
> On Wed, Jul 30, 2008 at 7:09 PM, Michael McCandless
> <lucene@mikemccandless.com> wrote:
>>
>> FYI -- there is a nasty bug that affects Lucene in Sun's 1.6 hotspot
>> compiler, starting with 1.6.0_04.  At least 3 known cases have been
>> seen on this list.
>>
>> Details are here:
>>
>> https://issues.apache.org/jira/browse/LUCENE-1282
>>
>> The bug causes silent index corruption during merging, such that the
>> merge completes successfully but in fact has introduced corruption
>> into the index that goes undetected until you open an IndexReader on
>> it.
>>
>> Sun has now fixed the bug as of build 28 of the 1.6 JRE update 10  
>> beta
>> (1.6.0_10-rc-b28), here:
>>
>> http://download.java.net/jdk6/binaries
>>
>> If you are using 1.6.0_04 or higher, you should consider upgrading to
>> this JRE release, or, upgrading once it's an official release (it's  
>> beta
>> now)!
>>
>> Mike
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35235-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 31 12:00:42 2008
Return-Path: <java-user-return-35235-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36804 invoked from network); 31 Jul 2008 12:00:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Jul 2008 12:00:42 -0000
Received: (qmail 71959 invoked by uid 500); 31 Jul 2008 12:00:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71139 invoked by uid 500); 31 Jul 2008 12:00:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71128 invoked by uid 99); 31 Jul 2008 12:00:35 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Jul 2008 05:00:35 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=SPF_NEUTRAL,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.191.84.166] (HELO smtp117.mail.mud.yahoo.com) (209.191.84.166)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 31 Jul 2008 11:59:36 +0000
Received: (qmail 73221 invoked from network); 31 Jul 2008 11:59:01 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.in;
  h=Received:X-YMail-OSG:X-Yahoo-Newman-Property:Message-ID:From:To:References:Subject:Date:MIME-Version:Content-Type:Content-Transfer-Encoding:X-Priority:X-MSMail-Priority:X-Mailer:X-MimeOLE;
  b=voQ7xASpRgpi3SYKI3s12pH6EYCB+jzIAC1myE94fk160NnAbhuG28vpD7U96ovCxDYNb8NtZGcOn2hcQLJkGBZFt0oxnOpi4r0g126Zmh5YJt1qUWmMIGjPEc21kGJAkSrjC4BWadYNKiITvc3HIoIMxu9BExF4p1Qil+/l+Pk=  ;
Received: from unknown (HELO GaneshM) (emailgane@203.98.194.130 with login)
  by smtp117.mail.mud.yahoo.com with SMTP; 31 Jul 2008 11:59:00 -0000
X-YMail-OSG: R_9habwVM1lNAHY2_CEnHN7zQCGHFt0voh0jmstNDvTJqXHGvtt3rqCdjklRtn1GiJDg9DqFzxFBf4DpVZLk5gGAZq_nMGsi1cT2cLXWYH.tjNVzqpOSi5cR4lTD61Q-
X-Yahoo-Newman-Property: ymail-3
Message-ID: <01a501c8f304$d1d70e90$610cc30a@sv.us.sonicwall.com>
From: "Ganesh - yahoo" <emailgane@yahoo.co.in>
To: <java-user@lucene.apache.org>
References: <6f7ea56f0807281853k1f898f5atc6beaf209e03f609@mail.gmail.com> <8c4e68610807290148h6595611dla895dd22e8af4548@mail.gmail.com> <006a01c8f15e$3f2e2df0$610cc30a@sv.us.sonicwall.com> <70A670C6-E5DB-4FBA-97F3-6FD00049441D@apache.org> <18750334.post@talk.nabble.com> <151B185F-C80F-4320-903F-2A1FF49EA3F2@apache.org>
Subject: Re: Using lucene as a database... good idea or bad idea?
Date: Thu, 31 Jul 2008 17:28:57 +0530
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="iso-8859-1";
	reply-type=response
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.3138
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3138
X-Virus-Checked: Checked by ClamAV on apache.org

which one will be the best to use as storage server. Lucene or Jackrabbit.

My requirement is to provide support to
1) Archive the documents
2) Do full text search on the documents.
3) Do backup the index store and archive store. [periodical basis]
4) Remove the documents after certain period [rentention policy]

Whether Lucene could be used as archival store. Most of them in this mailing 
list said 'yes'. If so going for separate database to archive the data and 
separate database to index it, will be better option or one database to be 
used as archive and index.

One more idea from this list is to use Jackrabbit / JDBM / My SQL to archive 
the data. Which will be the best?

I am in desiging phase and i have time to explore and prototype any other 
products. Please do suggest me a good one.

Regards
Ganesh


----- Original Message ----- 
From: "Grant Ingersoll" <gsingers@apache.org>
To: <java-user@lucene.apache.org>
Sent: Thursday, July 31, 2008 3:22 PM
Subject: Re: Using lucene as a database... good idea or bad idea?


> Hmmm, I thought it did.  Can't say I've studied the code though, so  I'll 
> take your word for it.
>
> Never mind on the Jackrabbit suggestion :-)
>
> Cheers,
> Grant
>
> On Jul 31, 2008, at 4:54 AM, Karsten F. wrote:
>
>>
>> Hi Grant,
>>
>> you made mention of jackrabbit as example of storing data in lucene.
>> I did not find something like that in source-code. I found
>> "LocalFileSystem" and "DatabaseFileSystem".
>> (I found lucene for indexing and searching.)
>>
>> Have I overlooked something?
>>
>> Best regards
>>   Karsten
>>
>>
>>
>> Grant Ingersoll-6 wrote:
>>>
>>> I think the answer is it can be done and probably quite well.  I also
>>> think it's informative that Nutch does not use Lucene for this
>>> function, as I understand it, but that shouldn't stop you either.   You
>>> might also have a look at Apache Jackrabbit, which uses Lucene
>>> underneath as a content repository.
>>>
>>> -Grant
>>>
>>>
>> -- 
>> View this message in context: 
>> http://www.nabble.com/Using-lucene-as-a-database...-good-idea-or-bad-idea--tp18703473p18750334.html
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 

Send instant messages to your online friends http://in.messenger.yahoo.com 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35236-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 31 13:13:05 2008
Return-Path: <java-user-return-35236-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77920 invoked from network); 31 Jul 2008 13:13:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Jul 2008 13:13:05 -0000
Received: (qmail 60507 invoked by uid 500); 31 Jul 2008 13:12:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60477 invoked by uid 500); 31 Jul 2008 13:12:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60466 invoked by uid 99); 31 Jul 2008 13:12:57 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Jul 2008 06:12:57 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Jul 2008 13:12:01 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KOXxD-0005n7-KO
	for java-user@lucene.apache.org; Thu, 31 Jul 2008 06:12:27 -0700
Message-ID: <18754258.post@talk.nabble.com>
Date: Thu, 31 Jul 2008 06:12:27 -0700 (PDT)
From: "Karsten F." <karsten-lucene@fiz-technik.de>
To: java-user@lucene.apache.org
Subject: Re: Using lucene as a database... good idea or bad idea?
In-Reply-To: <01a501c8f304$d1d70e90$610cc30a@sv.us.sonicwall.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: karsten-lucene@fiz-technik.de
References: <6f7ea56f0807281853k1f898f5atc6beaf209e03f609@mail.gmail.com> <8c4e68610807290148h6595611dla895dd22e8af4548@mail.gmail.com> <006a01c8f15e$3f2e2df0$610cc30a@sv.us.sonicwall.com> <70A670C6-E5DB-4FBA-97F3-6FD00049441D@apache.org> <18750334.post@talk.nabble.com> <151B185F-C80F-4320-903F-2A1FF49EA3F2@apache.org> <01a501c8f304$d1d70e90$610cc30a@sv.us.sonicwall.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Hi Ganesh,

in this Thread nobody said, that lucene is a good storage server.
Only "it could be used as storage server" (Grant: Connect data storage with
simple, fast lookup and Lucene..)

I don't now about automatic rentention.
But for the rest in your list of features I suggest to take a deep look to
 - Jackrabbit (Standard jcr jsr170 implemention, I like the webDAV support)
 - dSpace (real working content repository software, with good permissions
management)

Both use lucene for searching

Best regards
    Karsten


Ganesh - yahoo wrote:
> 
> which one will be the best to use as storage server. Lucene or Jackrabbit.
> 
> My requirement is to provide support to
> 1) Archive the documents
> 2) Do full text search on the documents.
> 3) Do backup the index store and archive store. [periodical basis]
> 4) Remove the documents after certain period [rentention policy]
> 
> Whether Lucene could be used as archival store. Most of them in this
> mailing 
> list said 'yes'. If so going for separate database to archive the data and 
> separate database to index it, will be better option or one database to be 
> used as archive and index.
> 
> One more idea from this list is to use Jackrabbit / JDBM / My SQL to
> archive 
> the data. Which will be the best?
> 
> I am in desiging phase and i have time to explore and prototype any other 
> products. Please do suggest me a good one.
> 
> Regards
> Ganesh
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/Using-lucene-as-a-database...-good-idea-or-bad-idea--tp18703473p18754258.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35237-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 31 14:37:08 2008
Return-Path: <java-user-return-35237-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30209 invoked from network); 31 Jul 2008 14:37:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Jul 2008 14:37:08 -0000
Received: (qmail 98171 invoked by uid 500); 31 Jul 2008 14:37:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98147 invoked by uid 500); 31 Jul 2008 14:37:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98136 invoked by uid 99); 31 Jul 2008 14:37:00 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Jul 2008 07:37:00 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ksmmlist@gmail.com designates 72.14.220.156 as permitted sender)
Received: from [72.14.220.156] (HELO fg-out-1718.google.com) (72.14.220.156)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Jul 2008 14:36:05 +0000
Received: by fg-out-1718.google.com with SMTP id l27so324667fgb.27
        for <java-user@lucene.apache.org>; Thu, 31 Jul 2008 07:36:31 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:date:to:subject:from
         :content-type:mime-version:content-transfer-encoding:message-id
         :user-agent;
        bh=/ZydHFZLZz0LC/+y677p7iSjpoewkF4SLPDIs/83OI8=;
        b=salOZ58sDcHdumPfopVoQuuDKL0KBqT5XFsR4b/tRfUGZSgpDQMQw9/VkWCFfcFzz1
         9fnFBT4cPDvWuazlIbt1+AVwr2uGgzb4OlDg20VwWLQq5yUZXLwZ7muIkX/HIz17xZwd
         QX2tSLITZQlMNoAKsp+W2Moz7gso6lYJfAIfo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=date:to:subject:from:content-type:mime-version
         :content-transfer-encoding:message-id:user-agent;
        b=VDgTKARxa5MYTKGGU5s3Fu5mpMsqQYcI7wR2uajJ/8Vy+pQRnC5z7XZPT7NS6kEl8u
         9mv3g9ZdcG/GE6ckg2X7BOE8CzhzUL32yiKmzs5g97p8C4CMRdKmXJHtnP3r9quHzTV7
         lpwdPW1UGxftSZj5yLaLoscCJz0R5tin7/pWM=
Received: by 10.86.87.5 with SMTP id k5mr6130735fgb.59.1217514990939;
        Thu, 31 Jul 2008 07:36:30 -0700 (PDT)
Received: from sj-desktop ( [92.112.9.157])
        by mx.google.com with ESMTPS id 3sm1213223fge.3.2008.07.31.07.36.28
        (version=SSLv3 cipher=RC4-MD5);
        Thu, 31 Jul 2008 07:36:29 -0700 (PDT)
Date: Thu, 31 Jul 2008 17:36:27 +0300
To: "Lucene user list" <java-user@lucene.apache.org>
Subject: The best strategy  to "How   store multiple fields of same document"
From: "Sergey Kabashnyuk" <ksmmlist@gmail.com>
Content-Type: text/plain; format=flowed; delsp=yes; charset=utf-8
MIME-Version: 1.0
Content-Transfer-Encoding: 8bit
Message-ID: <op.ue5uu0ot2ic4zu@sj-desktop>
User-Agent: Opera Mail/9.51 (Linux)
X-Virus-Checked: Checked by ClamAV on apache.org

The best strategy.

Hello.
I want to ask you opinion about to "How
store multiple fields of same document".

I see now two possibility's.
1. Multiple fields in document
2. One filed: for example named PROPERTIES, with multiple instances.
  And values combined with name for example name@value

What choice the best for search speed and resource usage?

Thanks.

Sergey Kabashnyuk
eXo Platform SAS

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35238-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 31 14:47:29 2008
Return-Path: <java-user-return-35238-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38678 invoked from network); 31 Jul 2008 14:47:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Jul 2008 14:47:29 -0000
Received: (qmail 31129 invoked by uid 500); 31 Jul 2008 14:47:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31101 invoked by uid 500); 31 Jul 2008 14:47:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31090 invoked by uid 99); 31 Jul 2008 14:47:21 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Jul 2008 07:47:21 -0700
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of andyliu1227@gmail.com designates 209.85.200.174 as permitted sender)
Received: from [209.85.200.174] (HELO wf-out-1314.google.com) (209.85.200.174)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Jul 2008 14:46:25 +0000
Received: by wf-out-1314.google.com with SMTP id 28so483374wfc.20
        for <java-user@lucene.apache.org>; Thu, 31 Jul 2008 07:46:34 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=VmxK8tMPYr4vjyghSSxCa5WkLNWoVQNnGWUUOf5jJ3A=;
        b=Dxf5y0NqQQkkLNqzUSsAG9vLnLN01Hzvb0tUy/zbOVMBT5rzeMHMHoZsksrx/pez71
         5H5LCzHoyCZH3DCWoiCgumBCYgOcEa2IhoUDlJAk+nsKgobTUILI/MYjNIHofqMxpXFl
         8ZrU71J3k79thSrwDknsyqV9ro3GhmdRijUhY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=IY8vjBTG2GXcCbNep9HFvxIYSYFJd2UilVqslPWwlvbATZbo0pCTfMvvdwiYnmuInR
         vpljWBmQYeVLKcxgfe0Tk3xP/h+pj/O/teSlZRAuhrHnxDIifTVM4aI5byKpp2u3C4V4
         P63g3gZIpaUjIKS+OwmQmS1a62M9lTDhnt1G0=
Received: by 10.143.31.4 with SMTP id i4mr3294726wfj.87.1217515594866;
        Thu, 31 Jul 2008 07:46:34 -0700 (PDT)
Received: by 10.142.231.15 with HTTP; Thu, 31 Jul 2008 07:46:34 -0700 (PDT)
Message-ID: <32dca9ed0807310746t2d414517i77cbd28cf755070c@mail.gmail.com>
Date: Thu, 31 Jul 2008 10:46:34 -0400
From: "Andy Liu" <andyliu1227@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Using lucene as a database... good idea or bad idea?
In-Reply-To: <18754258.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_64985_3589348.1217515594863"
References: <6f7ea56f0807281853k1f898f5atc6beaf209e03f609@mail.gmail.com>
	 <8c4e68610807290148h6595611dla895dd22e8af4548@mail.gmail.com>
	 <006a01c8f15e$3f2e2df0$610cc30a@sv.us.sonicwall.com>
	 <70A670C6-E5DB-4FBA-97F3-6FD00049441D@apache.org>
	 <18750334.post@talk.nabble.com>
	 <151B185F-C80F-4320-903F-2A1FF49EA3F2@apache.org>
	 <01a501c8f304$d1d70e90$610cc30a@sv.us.sonicwall.com>
	 <18754258.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_64985_3589348.1217515594863
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

If essentially all you need is key-value storage, Berkeley DB for Java works
well.  Lookup by ID is fast, can iterate through documents, supports
secondary keys, updates, etc.

Lucene would work relatively well for this, although inserting documents
might not be as fast, because segments need to be merged and data ends up
getting copied over again at certain points.  So if you're running a batch
process with a lot of inserts, you might get better throughput with BDB as
opposed to Lucene, but, of course, benchmark to confirm ;)

Andy

On Thu, Jul 31, 2008 at 9:12 AM, Karsten F.
<karsten-lucene@fiz-technik.de>wrote:

>
> Hi Ganesh,
>
> in this Thread nobody said, that lucene is a good storage server.
> Only "it could be used as storage server" (Grant: Connect data storage with
> simple, fast lookup and Lucene..)
>
> I don't now about automatic rentention.
> But for the rest in your list of features I suggest to take a deep look to
>  - Jackrabbit (Standard jcr jsr170 implemention, I like the webDAV support)
>  - dSpace (real working content repository software, with good permissions
> management)
>
> Both use lucene for searching
>
> Best regards
>    Karsten
>
>
> Ganesh - yahoo wrote:
> >
> > which one will be the best to use as storage server. Lucene or
> Jackrabbit.
> >
> > My requirement is to provide support to
> > 1) Archive the documents
> > 2) Do full text search on the documents.
> > 3) Do backup the index store and archive store. [periodical basis]
> > 4) Remove the documents after certain period [rentention policy]
> >
> > Whether Lucene could be used as archival store. Most of them in this
> > mailing
> > list said 'yes'. If so going for separate database to archive the data
> and
> > separate database to index it, will be better option or one database to
> be
> > used as archive and index.
> >
> > One more idea from this list is to use Jackrabbit / JDBM / My SQL to
> > archive
> > the data. Which will be the best?
> >
> > I am in desiging phase and i have time to explore and prototype any other
> > products. Please do suggest me a good one.
> >
> > Regards
> > Ganesh
> >
> >
> >
>
> --
> View this message in context:
> http://www.nabble.com/Using-lucene-as-a-database...-good-idea-or-bad-idea--tp18703473p18754258.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_64985_3589348.1217515594863--

From java-user-return-35239-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 31 14:50:40 2008
Return-Path: <java-user-return-35239-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40804 invoked from network); 31 Jul 2008 14:50:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Jul 2008 14:50:40 -0000
Received: (qmail 44949 invoked by uid 500); 31 Jul 2008 14:50:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44920 invoked by uid 500); 31 Jul 2008 14:50:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44909 invoked by uid 99); 31 Jul 2008 14:50:32 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Jul 2008 07:50:32 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.198.239 as permitted sender)
Received: from [209.85.198.239] (HELO rv-out-0506.google.com) (209.85.198.239)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Jul 2008 14:49:37 +0000
Received: by rv-out-0506.google.com with SMTP id f6so590631rvb.5
        for <java-user@lucene.apache.org>; Thu, 31 Jul 2008 07:50:03 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=tWxnw4sZj+yWykXl37cJQhnWYRfQpGvB1CjHPcewZxY=;
        b=Ed+I9j+8KoYWIsn7HNMX51tTHurA5QcSd87rGUqIYgJR6KGzgOmzGylNUfLHBiGRKa
         q8QUFhJIF9tXWv7tIjMgqqH+LTG8I4ruXGDiAGww1Ivkc7nCxrBK3+gPdmgl1ZU5PaB7
         hHQx5Xs+wijZ3WMvL1ALXypDRYXUZdPYSig2Q=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=d7wl66762EbIh4ZUkRqNJsxJEQZKx6ztERMAMF/y8QznjaKGYVyMqrHkhI4ZzuINEX
         GdpXYWDVuWoxVOZ+bGFGMMlKP+eWsJCx6pW8gYqVZ5iDvabdBWqbXw/Hk9wN2aIhAZKw
         J5GsUKiNNE5XfBr8yrfYj09/zOF/tV578KGB8=
Received: by 10.140.193.16 with SMTP id q16mr5333856rvf.109.1217515803892;
        Thu, 31 Jul 2008 07:50:03 -0700 (PDT)
Received: by 10.140.200.1 with HTTP; Thu, 31 Jul 2008 07:50:03 -0700 (PDT)
Message-ID: <359a92830807310750n4f98ffb7k2d6f9ec46a7872bb@mail.gmail.com>
Date: Thu, 31 Jul 2008 10:50:03 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: The best strategy to "How store multiple fields of same document"
In-Reply-To: <op.ue5uu0ot2ic4zu@sj-desktop>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_70731_30741579.1217515803881"
References: <op.ue5uu0ot2ic4zu@sj-desktop>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_70731_30741579.1217515803881
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I'd go with option 1 unless and until you could demonstrate performance
problems. Speaking of which, you'd get a more informed answer if you
provided a bit more data, like how many fields are we talking, how many
documents, etc. If you're indexing 10,000 documents, go with the simplest.
If you're indexing 1,000,000,000 documents, more thought is required <G>..
Do you expect 3 fields/doc or 30,000 fields/doc?

But the reason I'd go with <1> is that your second option has some issues.
1> how to tokenize? You'll probably have to write a custom one or risk
    getting tokens "name" "value" rather than "name@value".
2> Forming queries is, I believe, equally complex in both cases, so
    choose the conceptually simplest one. Let's say you have
    to search on foo1:val1  and foo2:val2. In the first case this is
    simple +foo1:val1 +foo2:val2. For your second case, you get
    +bigfield:foo1@val1 + bigfield:foo2@val2. There's not much
    difference between the two.
3> Back to my initial comment about resource usage: we don't
    have enough data to answer whether it makes any difference.
    But even if we did, you'd find the response a variation of
    "you'll have to try it and see" since there are so many
    variables.

But I'll repeat that I always go with the simplest approach unless and
until I'm certain there's a problem...

Best
Erick

On Thu, Jul 31, 2008 at 10:36 AM, Sergey Kabashnyuk <ksmmlist@gmail.com>wrote:

> The best strategy.
>
> Hello.
> I want to ask you opinion about to "How
> store multiple fields of same document".
>
> I see now two possibility's.
> 1. Multiple fields in document
> 2. One filed: for example named PROPERTIES, with multiple instances.
>  And values combined with name for example "name@value"
>
> What choice the best for search speed and resource usage?
>
> Thanks.
>
> Sergey Kabashnyuk
> eXo Platform SAS
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_70731_30741579.1217515803881--

From java-user-return-35240-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 31 15:30:22 2008
Return-Path: <java-user-return-35240-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72552 invoked from network); 31 Jul 2008 15:30:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Jul 2008 15:30:22 -0000
Received: (qmail 38060 invoked by uid 500); 31 Jul 2008 15:30:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38033 invoked by uid 500); 31 Jul 2008 15:30:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38022 invoked by uid 99); 31 Jul 2008 15:30:14 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Jul 2008 08:30:14 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ksmmlist@gmail.com designates 72.14.220.155 as permitted sender)
Received: from [72.14.220.155] (HELO fg-out-1718.google.com) (72.14.220.155)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Jul 2008 15:29:18 +0000
Received: by fg-out-1718.google.com with SMTP id l27so338777fgb.27
        for <java-user@lucene.apache.org>; Thu, 31 Jul 2008 08:29:44 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:date:to:subject:from
         :content-type:mime-version:references:content-transfer-encoding
         :message-id:in-reply-to:user-agent;
        bh=AM64+4udwdFpw9whtn0Beu8SnP7q4Z24H7MZlBEN9g4=;
        b=pKsnxCNyKWpQnwzdVWpHJCUuxS3TAIrZYivptGH3heEmX6Jb1WI9lUGMomhlkCmNRo
         CADyJZxp1Bbmdax9uPimf3v4XYVVFz0U8HzCuxqgQ0fbQooqSnD3fLZQAD8Zdp1Ido3n
         Uepz0X78PMjIUeD7DlgOef4ZGoEC4nvme+fZM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=date:to:subject:from:content-type:mime-version:references
         :content-transfer-encoding:message-id:in-reply-to:user-agent;
        b=WD2JUuXAX0tXuMTSaXk9C9DzovStrP8rqnR5NdsnLZDA+9yuiOQcdrvB9A0IefD93i
         byBMuZDiTGwHTCzuot/jFNJmfldSGXKR8xrX9L4sKEFIBbDDRVbNOf3hMeZ7DENhlGY/
         TSTg39H1K8vTANturw5NjqXfBtst7/VtMeUFc=
Received: by 10.86.33.10 with SMTP id g10mr6223338fgg.14.1217518183927;
        Thu, 31 Jul 2008 08:29:43 -0700 (PDT)
Received: from sj-desktop ( [92.112.9.157])
        by mx.google.com with ESMTPS id e20sm3019906fga.1.2008.07.31.08.29.41
        (version=SSLv3 cipher=RC4-MD5);
        Thu, 31 Jul 2008 08:29:42 -0700 (PDT)
Date: Thu, 31 Jul 2008 18:29:40 +0300
To: java-user@lucene.apache.org
Subject: Re: The best strategy to "How store multiple fields of same document"
From: "Sergey Kabashnyuk" <ksmmlist@gmail.com>
Content-Type: text/plain; format=flowed; delsp=yes; charset=utf-8
MIME-Version: 1.0
References: <op.ue5uu0ot2ic4zu@sj-desktop>
 <359a92830807310750n4f98ffb7k2d6f9ec46a7872bb@mail.gmail.com>
Content-Transfer-Encoding: 7bit
Message-ID: <op.ue5xbqa72ic4zu@sj-desktop>
In-Reply-To: <359a92830807310750n4f98ffb7k2d6f9ec46a7872bb@mail.gmail.com>
User-Agent: Opera Mail/9.51 (Linux)
X-Virus-Checked: Checked by ClamAV on apache.org

Thank you Erick.
	
I'm talking about more then 10,000 documents and 95% less then 10 fields.
Maximum number of fields per document is unlimited.
But in practice it's no more the 20.


I'm interesting: does Lucene have any internal optimization,
which depend of the fields count or fields size, as database do?
I mean to determinate position of row X in index:

positionX = sum(fieldsize[1]+...fieldsize[i])*(X-1)

Sergey Kabashnyuk
eXo Platform SAS


> I'd go with option 1 unless and until you could demonstrate performance
> problems. Speaking of which, you'd get a more informed answer if you
> provided a bit more data, like how many fields are we talking, how many
> documents, etc. If you're indexing 10,000 documents, go with the  
> simplest.
> If you're indexing 1,000,000,000 documents, more thought is required  
> <G>..
> Do you expect 3 fields/doc or 30,000 fields/doc?
>
> But the reason I'd go with <1> is that your second option has some  
> issues.
> 1> how to tokenize? You'll probably have to write a custom one or risk
>     getting tokens "name" "value" rather than "name@value".
> 2> Forming queries is, I believe, equally complex in both cases, so
>     choose the conceptually simplest one. Let's say you have
>     to search on foo1:val1  and foo2:val2. In the first case this is
>     simple +foo1:val1 +foo2:val2. For your second case, you get
>     +bigfield:foo1@val1 + bigfield:foo2@val2. There's not much
>     difference between the two.
> 3> Back to my initial comment about resource usage: we don't
>     have enough data to answer whether it makes any difference.
>     But even if we did, you'd find the response a variation of
>     "you'll have to try it and see" since there are so many
>     variables.
>
> But I'll repeat that I always go with the simplest approach unless and
> until I'm certain there's a problem...
>
> Best
> Erick
>
> On Thu, Jul 31, 2008 at 10:36 AM, Sergey Kabashnyuk  
> <ksmmlist@gmail.com>wrote:
>
>> The best strategy.
>>
>> Hello.
>> I want to ask you opinion about to "How
>> store multiple fields of same document".
>>
>> I see now two possibility's.
>> 1. Multiple fields in document
>> 2. One filed: for example named PROPERTIES, with multiple instances.
>>  And values combined with name for example "name@value"
>>
>> What choice the best for search speed and resource usage?
>>
>> Thanks.
>>
>> Sergey Kabashnyuk
>> eXo Platform SAS
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35241-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 31 19:05:35 2008
Return-Path: <java-user-return-35241-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32442 invoked from network); 31 Jul 2008 19:05:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Jul 2008 19:05:35 -0000
Received: (qmail 32851 invoked by uid 500); 31 Jul 2008 19:05:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32780 invoked by uid 500); 31 Jul 2008 19:05:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32685 invoked by uid 99); 31 Jul 2008 19:05:28 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Jul 2008 12:05:27 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Jul 2008 19:04:33 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id A785171C434; Thu, 31 Jul 2008 12:04:59 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id A360271C049
	for <java-user@lucene.apache.org>; Thu, 31 Jul 2008 12:04:59 -0700 (PDT)
Date: Thu, 31 Jul 2008 12:04:59 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: RE: too many clause exception when using a filter
In-Reply-To: <9294E20AED46934EA459020706463F94C59DA4@SUEXCL-02.ad.syr.edu>
Message-ID: <Pine.LNX.4.62.0807311202550.30972@radix.cryptio.net>
References: <9294E20AED46934EA459020706463F94C59DA4@SUEXCL-02.ad.syr.edu>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: Or, to avoid the clause limit issue altogether, you could use a 
: PrefixFilter instead of a QueryWrapperFilter around a 
: {Wildcard,Prefix}Query:

right ... the missconception here seems to be that if you use a Filter, 
all your Too Many Clauses problems are sovled -- but if that Filter is 
just a wrapper arround a query, the problem is still there.





-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-35242-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 31 19:44:24 2008
Return-Path: <java-user-return-35242-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62484 invoked from network); 31 Jul 2008 19:44:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Jul 2008 19:44:23 -0000
Received: (qmail 1985 invoked by uid 500); 31 Jul 2008 19:44:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 1956 invoked by uid 500); 31 Jul 2008 19:44:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 1945 invoked by uid 99); 31 Jul 2008 19:44:16 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Jul 2008 12:44:16 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.198.237 as permitted sender)
Received: from [209.85.198.237] (HELO rv-out-0506.google.com) (209.85.198.237)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Jul 2008 19:43:22 +0000
Received: by rv-out-0506.google.com with SMTP id f6so712728rvb.5
        for <java-user@lucene.apache.org>; Thu, 31 Jul 2008 12:43:48 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=BH6t23COOtQLgNsr3ff6slIIQExvswLQXIl7bcYc6bU=;
        b=We+wasZPKQPb+1UW+ASZ8xGqTTcW3E57UIEAwIDL3/xqoKDBSfhSsyByr4DkUHoE3b
         grZU69PLeChZQXifVmxZgMLjWw1lXcKEYcIvvJ/aDbfja3qTnB8Zmgq+cHyHqoz5+pgW
         CLm3j8Dxe420wK8aYkjNwYgTmvVykPrPFSNjc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=Vh9CDb5hZGjUtMZkG7GhRCGLDuy3cKSigMRF7mkoFccbhezgFlPPTM1RVGlDQCBksf
         Y40Bj5hyhlDG84ORrFXdar3lQA/dyPAPAtsealTXn/yypkr6EjD0XoRzDaVrU3/7pL1h
         +QivhqyDIjGpscsxiYEUaDfRTF6d58ebr6JHE=
Received: by 10.140.170.12 with SMTP id s12mr5506015rve.83.1217533428832;
        Thu, 31 Jul 2008 12:43:48 -0700 (PDT)
Received: by 10.140.200.1 with HTTP; Thu, 31 Jul 2008 12:43:48 -0700 (PDT)
Message-ID: <359a92830807311243g2974bd61n6f03d538be1f706a@mail.gmail.com>
Date: Thu, 31 Jul 2008 15:43:48 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: The best strategy to "How store multiple fields of same document"
In-Reply-To: <op.ue5xbqa72ic4zu@sj-desktop>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_74998_14762780.1217533428819"
References: <op.ue5uu0ot2ic4zu@sj-desktop>
	 <359a92830807310750n4f98ffb7k2d6f9ec46a7872bb@mail.gmail.com>
	 <op.ue5xbqa72ic4zu@sj-desktop>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_74998_14762780.1217533428819
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Haven't a clue <G>.

Erick

On Thu, Jul 31, 2008 at 11:29 AM, Sergey Kabashnyuk <ksmmlist@gmail.com>wrote:

> Thank you Erick.
>
> I'm talking about more then 10,000 documents and 95% less then 10 fields.
> Maximum number of fields per document is unlimited.
> But in practice it's no more the 20.
>
>
> I'm interesting: does Lucene have any internal optimization,
> which depend of the fields count or fields size, as database do?
> I mean to determinate position of row X in index:
>
> positionX = sum(fieldsize[1]+...fieldsize[i])*(X-1)
>
>
> Sergey Kabashnyuk
> eXo Platform SAS
>
>
>  I'd go with option 1 unless and until you could demonstrate performance
>> problems. Speaking of which, you'd get a more informed answer if you
>> provided a bit more data, like how many fields are we talking, how many
>> documents, etc. If you're indexing 10,000 documents, go with the simplest.
>> If you're indexing 1,000,000,000 documents, more thought is required <G>..
>> Do you expect 3 fields/doc or 30,000 fields/doc?
>>
>> But the reason I'd go with <1> is that your second option has some issues.
>> 1> how to tokenize? You'll probably have to write a custom one or risk
>>    getting tokens "name" "value" rather than "name@value".
>> 2> Forming queries is, I believe, equally complex in both cases, so
>>    choose the conceptually simplest one. Let's say you have
>>    to search on foo1:val1  and foo2:val2. In the first case this is
>>    simple +foo1:val1 +foo2:val2. For your second case, you get
>>    +bigfield:foo1@val1 + bigfield:foo2@val2. There's not much
>>    difference between the two.
>> 3> Back to my initial comment about resource usage: we don't
>>    have enough data to answer whether it makes any difference.
>>    But even if we did, you'd find the response a variation of
>>    "you'll have to try it and see" since there are so many
>>    variables.
>>
>> But I'll repeat that I always go with the simplest approach unless and
>> until I'm certain there's a problem...
>>
>> Best
>> Erick
>>
>> On Thu, Jul 31, 2008 at 10:36 AM, Sergey Kabashnyuk <ksmmlist@gmail.com
>> >wrote:
>>
>>  The best strategy.
>>>
>>> Hello.
>>> I want to ask you opinion about to "How
>>> store multiple fields of same document".
>>>
>>> I see now two possibility's.
>>> 1. Multiple fields in document
>>> 2. One filed: for example named PROPERTIES, with multiple instances.
>>>  And values combined with name for example "name@value"
>>>
>>> What choice the best for search speed and resource usage?
>>>
>>> Thanks.
>>>
>>> Sergey Kabashnyuk
>>> eXo Platform SAS
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_74998_14762780.1217533428819--

From java-user-return-35243-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 31 20:13:49 2008
Return-Path: <java-user-return-35243-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84862 invoked from network); 31 Jul 2008 20:13:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Jul 2008 20:13:48 -0000
Received: (qmail 46275 invoked by uid 500); 31 Jul 2008 20:13:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46244 invoked by uid 500); 31 Jul 2008 20:13:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46220 invoked by uid 99); 31 Jul 2008 20:13:40 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Jul 2008 13:13:40 -0700
X-ASF-Spam-Status: No, hits=-2.0 required=10.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of daizhoul@cn.ibm.com designates 202.81.18.163 as permitted sender)
Received: from [202.81.18.163] (HELO e23smtp02.au.ibm.com) (202.81.18.163)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Jul 2008 20:12:43 +0000
Received: from sd0109e.au.ibm.com (d23rh905.au.ibm.com [202.81.18.225])
	by e23smtp02.au.ibm.com (8.13.1/8.13.1) with ESMTP id m6VK6RLC029424
	for <java-user@lucene.apache.org>; Fri, 1 Aug 2008 06:06:27 +1000
Received: from d23av03.au.ibm.com (d23av03.au.ibm.com [9.190.234.97])
	by sd0109e.au.ibm.com (8.13.8/8.13.8/NCO v9.0) with ESMTP id m6VK6mXW243152
	for <java-user@lucene.apache.org>; Fri, 1 Aug 2008 06:06:49 +1000
Received: from d23av03.au.ibm.com (loopback [127.0.0.1])
	by d23av03.au.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id m6VK6mOF003998
	for <java-user@lucene.apache.org>; Fri, 1 Aug 2008 06:06:48 +1000
Received: from d23m0016.cn.ibm.com (d23m0016.cn.ibm.com [9.181.32.76])
	by d23av03.au.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id m6VK6m2O003982
	for <java-user@lucene.apache.org>; Fri, 1 Aug 2008 06:06:48 +1000
Subject: AUTO: Zhou Lin Dai is out of the office. (returning 2008-08-07)
From: Zhou Lin Dai <daizhoul@cn.ibm.com>
To: java-user@lucene.apache.org
Message-ID: <OF6FDF1BFC.611B8DCB-ON48257497.006E17DD-48257497.006E17DD@cn.ibm.com>
Date: Fri, 1 Aug 2008 04:02:30 +0800
X-MIMETrack: Serialize by Router on d23m0016/23/M/IBM(Release 7.0.2FP2HF178 | August 10, 2007) at
 01/08/2008 04:02:31
MIME-Version: 1.0
Content-type: multipart/alternative; 
	Boundary="0__=C7BBFE04DFFD914D8f9e8a93df938690918cC7BBFE04DFFD914D"
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org

--0__=C7BBFE04DFFD914D8f9e8a93df938690918cC7BBFE04DFFD914D
Content-type: text/plain; charset=US-ASCII
Content-transfer-encoding: quoted-printable



I am out of the office until 2008-08-07..

I will take vacation and will not return until Aug.7. Raja (He Kun Wang=
)
will be my backup during my leave. I will check emails at night. For
anything emergent, you can call my cell phone (86) 131 6290 0375.


Note: This is an automated response to your message Re: Using lucene as=
 a
database... good idea or bad idea? sent on 31/7/08 22:46:34.
This is the only notification you will receive while this person is awa=
y.=

--0__=C7BBFE04DFFD914D8f9e8a93df938690918cC7BBFE04DFFD914D--


