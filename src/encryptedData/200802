From java-user-return-32330-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 01 01:23:12 2008
Return-Path: <java-user-return-32330-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36784 invoked from network); 1 Feb 2008 01:23:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Feb 2008 01:23:10 -0000
Received: (qmail 35024 invoked by uid 500); 1 Feb 2008 01:22:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34984 invoked by uid 500); 1 Feb 2008 01:22:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34973 invoked by uid 99); 1 Feb 2008 01:22:54 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Jan 2008 17:22:54 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of cedric.ho@gmail.com designates 209.85.146.179 as permitted sender)
Received: from [209.85.146.179] (HELO wa-out-1112.google.com) (209.85.146.179)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Feb 2008 01:22:39 +0000
Received: by wa-out-1112.google.com with SMTP id j40so256970wah.11
        for <java-user@lucene.apache.org>; Thu, 31 Jan 2008 17:22:31 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        bh=FH2xuKsjoS0bomYbmtQEoWk5SYqsBA2F0xwqpkBXZs0=;
        b=EoE6rokcmQHnleuBSj+l/+Rz64nQblDgmNtdykQueP9N7APMsOLfoFITbF5dR5tLlNyskH//dJd+0DEZtTWU4l6X0lCTMEVaEYUOFs9AQhDv0XEp2fzxqDQNBKmR4+sFzX5JRyFAlFB71wzN53Cwxdke4+u/G0vYQx25OFT9wgQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=Y9DiTUZHw1i442nQT8G4N4i38mhk+doBMIhjC+4Jr237edIEMmjY7R4zN84jup99zFx6QU1ccudxAl7pjEV+AKfmk4v02WAF+qY6YD7URLWo47KBTb6G7tk7ET87z9Hgkoz0KPtmcYPwtLK1FUs3HCT01dWQszhWc33thJxoH44=
Received: by 10.114.177.1 with SMTP id z1mr3308214wae.7.1201828950244;
        Thu, 31 Jan 2008 17:22:30 -0800 (PST)
Received: by 10.114.156.18 with HTTP; Thu, 31 Jan 2008 17:22:30 -0800 (PST)
Message-ID: <839ba01c0801311722t501aca37o31de58a861937e1f@mail.gmail.com>
Date: Fri, 1 Feb 2008 09:22:30 +0800
From: "Cedric Ho" <cedric.ho@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Distributed Lucene Directory
In-Reply-To: <9685323D-F2EC-4AD9-B6FB-865BD8EA3277@gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <839ba01c0801310042r7597c790w34a52f701e46b9b@mail.gmail.com>
	 <9685323D-F2EC-4AD9-B6FB-865BD8EA3277@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Yes, I am aware of the RemoteSearchable and ParallelSearcher. And I am
doing something similiar now. i.e. split the index on multiple
machines.

But managing such a set of indexes is not trivial. Especially when
need to add redundancies for reliability and update frequently.

I bumped into this a while ago:

http://www.kimchy.org/compasslucene-and-datagrids/

also I've heard there is a Directory implemented for the HDFS but is
unfortunately very slow. which makes me wonder whether this type of
approach is practical (i.e. having good performance, can update index
easily, optimization won't takes too long, etc)

Cedric


On Jan 31, 2008 6:59 PM, Karl Wettin <karl.wettin@gmail.com> wrote:
> 31 jan 2008 kl. 09.42 skrev Cedric Ho:
>
> > I am wondering if there exist any implemenation of
> > org.apache.lucene.store.Directory which can be distributed across
> > multiple machines with comparable performance to a local FSDirectory
> > index, or is such an idea feasible in the first place.
> >
> > By comparable performance I mean a 100G index distributed in 10
> > machines should achieve the same performance as a 10G index on a local
> > FSDirectory.
>
> I never used these things and don't know about their caveats, but
> perhaps a combination of
>
> <http://lucene.apache.org/java/2_3_0/api/org/apache/lucene/search/RemoteSearchable.html
>  >
>
> and
>
> <http://lucene.apache.org/java/2_3_0/api/org/apache/lucene/search/ParallelMultiSearcher.html
>  >
>
> can help you?
>
>
>    karl
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32331-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 01 01:48:58 2008
Return-Path: <java-user-return-32331-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42413 invoked from network); 1 Feb 2008 01:48:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Feb 2008 01:48:57 -0000
Received: (qmail 47107 invoked by uid 500); 1 Feb 2008 01:48:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47072 invoked by uid 500); 1 Feb 2008 01:48:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47061 invoked by uid 99); 1 Feb 2008 01:48:42 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Jan 2008 17:48:42 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of markrmiller@gmail.com designates 72.14.220.153 as permitted sender)
Received: from [72.14.220.153] (HELO fg-out-1718.google.com) (72.14.220.153)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Feb 2008 01:48:14 +0000
Received: by fg-out-1718.google.com with SMTP id d23so912415fga.27
        for <java-user@lucene.apache.org>; Thu, 31 Jan 2008 17:48:20 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        bh=AACeij3hur+HPvYpHe/F4EqZiHvV+trANlgbNo/s1DU=;
        b=cQN236FUjATVAZnVuxqCyism/6GnWTl7t6DtGsIkF94plGeRjzHUzlaqfE+t8TWgYbLmwgWlEv29a90IBHg7NQ5UUgFl5owbMpv5xNerXxvRbV3lSSb/HwkcjuZyj2qPX/sU/b4UA9/54q8ld6XIl2RhKScZRXtIfvGv7Zxnqic=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=XxU61YbpKxr6ra/i58iVj6iW3RoAZuAwBG5tawWtyTEclf4eceWw0SJdJpfnuogo8SBJ6HIXQrmwfz/4OawY3YwL4KL7cjhd+D2uIkw46jBPYPOJdE6FU1kFWKJF0im3OnVapaL+aCQy8eBbx9iwc2r0DJUm0olHNy+T18PTsNQ=
Received: by 10.86.87.5 with SMTP id k5mr2609636fgb.51.1201830500354;
        Thu, 31 Jan 2008 17:48:20 -0800 (PST)
Received: from ?192.168.1.118? ( [69.124.234.183])
        by mx.google.com with ESMTPS id l19sm2576500fgb.0.2008.01.31.17.48.17
        (version=SSLv3 cipher=RC4-MD5);
        Thu, 31 Jan 2008 17:48:18 -0800 (PST)
Message-ID: <47A27A3F.6000701@gmail.com>
Date: Thu, 31 Jan 2008 20:47:43 -0500
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.9 (Windows/20071031)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Distributed Lucene Directory
References: <839ba01c0801310042r7597c790w34a52f701e46b9b@mail.gmail.com>	 <9685323D-F2EC-4AD9-B6FB-865BD8EA3277@gmail.com> <839ba01c0801311722t501aca37o31de58a861937e1f@mail.gmail.com>
In-Reply-To: <839ba01c0801311722t501aca37o31de58a861937e1f@mail.gmail.com>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org


Cedric Ho wrote:
>
> But managing such a set of indexes is not trivial. Especially when
> need to add redundancies for reliability and update frequently.
>   
Agreed. Apparently the Solr guys are working on this now. Certainly not 
trivial to do right. You might want to check out that work.

I want to start a project for this functionality myself soon - but just 
with Lucene. Personally, I think the only way to go is to use Jini, but 
I am waiting for the first release of Apache River before getting 
started (*very* soon I hope). That gets you through the 8 fallacies of 
distributed computing with almost no work right off the bat. Self 
discovery, leasing, redundancy, etc with minimal effort. Hopefully I 
will be able to recruit some help with this. From what I can tell, there 
is a lot of roll your own for this type of thing out there...it would be 
nice to focus some work on a system that can be used by all.

- Mark

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32332-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 01 06:13:52 2008
Return-Path: <java-user-return-32332-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72388 invoked from network); 1 Feb 2008 06:13:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Feb 2008 06:13:52 -0000
Received: (qmail 63521 invoked by uid 500); 1 Feb 2008 06:13:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63491 invoked by uid 500); 1 Feb 2008 06:13:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63480 invoked by uid 99); 1 Feb 2008 06:13:36 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Jan 2008 22:13:36 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Feb 2008 06:13:21 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1JKp9F-0003ki-Qf
	for java-user@lucene.apache.org; Thu, 31 Jan 2008 22:13:13 -0800
Message-ID: <15221338.post@talk.nabble.com>
Date: Thu, 31 Jan 2008 22:13:13 -0800 (PST)
From: ajay_garg <garg.jeena.isi.ka.naam.hai@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Query in Lucene 2.3.0
In-Reply-To: <96AD48A6-1B37-475D-8D0B-50610240AEBF@mikemccandless.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: garg.jeena.isi.ka.naam.hai@gmail.com
References: <15175141.post@talk.nabble.com> <B34CBCE4-24B0-4CB7-BC78-F926D9E15D67@mikemccandless.com> <15197794.post@talk.nabble.com> <c68e39170801302056p7c21d3akbb372d35bae12b32@mail.gmail.com> <15198783.post@talk.nabble.com> <96AD48A6-1B37-475D-8D0B-50610240AEBF@mikemccandless.com>
X-Virus-Checked: Checked by ClamAV on apache.org


@Mike.

Thanks for the reply. But I had thought that write.lock is there to prevent
multiple additions/updates/deleteDocuments. 

Has there been a change recently in this regard ?

Thanks
Ajay Garg



Michael McCandless-2 wrote:
> 
> 
> That's right.
> 
> Each thread can enter IndexWriter.add/update/deleteDocument(s) in  
> parallel.  There are some parts inside IndexWriter that are  
> synchronized but they are kept to a minimum to keep good thread  
> concurrency.  As you add threads it's best to increase the RAM buffer  
> at the same time to get better performance.
> 
> Mike
> 
> ajay_garg wrote:
> 
>>
>> @Yonik
>>
>> So you mean to say, that if two threads have the same instance of an
>> IndexWriter passed to both of them, and both these threads run on two
>> different CPUs, then they can write to the index at the same time ?
>>
>>
>>
>> Yonik Seeley wrote:
>>>
>>> On Jan 30, 2008 10:59 PM, ajay_garg
>>> <garg.jeena.isi.ka.naam.hai@gmail.com> wrote:
>>>>
>>>> Thanks Mike for your directions.
>>>>
>>>> Yes, I am in fact using a single computer for my application, and  
>>>> your
>>>> saying that in this case, multiple threads with a single  
>>>> IndexWriter wll
>>>> give a better performance. Hmmm. I just wonder that since each
>>>> IndexWriter
>>>> has a single write.lock, this means that sitting on the CPU, we  
>>>> observe
>>>> that
>>>> at a particular instant, only a single thread is using the CPU,
>>>
>>> The write.lock is to protect against other IndexWriter instances,
>>> *not* against other threads.
>>> Using multiple threads on a single IndexWriter should utilize  
>>> multiple
>>> CPUs.
>>>
>>> -Yonik
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>>
>>
>> -- 
>> View this message in context: http://www.nabble.com/Query-in- 
>> Lucene-2.3.0-tp15175141p15198783.html
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/Query-in-Lucene-2.3.0-tp15175141p15221338.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32333-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 01 06:38:23 2008
Return-Path: <java-user-return-32333-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85666 invoked from network); 1 Feb 2008 06:38:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Feb 2008 06:38:23 -0000
Received: (qmail 84803 invoked by uid 500); 1 Feb 2008 06:38:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84779 invoked by uid 500); 1 Feb 2008 06:38:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 84768 invoked by uid 99); 1 Feb 2008 06:38:08 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Jan 2008 22:38:08 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [130.107.64.135] (HELO Balboa.AI.SRI.COM) (130.107.64.135)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Feb 2008 06:37:40 +0000
Received: from Balboa.AI.SRI.COM (localhost [127.0.0.1])
	by Balboa.AI.SRI.COM (8.11.7p2+Sun/8.10.1) with SMTP id m116bk104288
	for <java-user@lucene.apache.org>; Thu, 31 Jan 2008 22:37:46 -0800 (PST)
Received: from Salt.AI.SRI.COM ([130.107.65.211])
 by Balboa.AI.SRI.COM (SMSSMTP 4.1.9.35) with SMTP id M2008013122374620689
 for <java-user@lucene.apache.org>; Thu, 31 Jan 2008 22:37:46 -0800
Received: from localhost.ai.sri.com
	([127.0.0.1] helo=[192.168.1.147] ident=root)
	by Salt.AI.SRI.COM with asmtp (Exim 3.35 #1 (Debian))
	id 1JKpX0-0001h1-00
	for <java-user@lucene.apache.org>; Thu, 31 Jan 2008 22:37:46 -0800
Message-ID: <47A2BF12.3000205@ai.sri.com>
Date: Thu, 31 Jan 2008 22:41:22 -0800
From: yu <yu@AI.SRI.COM>
User-Agent: Thunderbird 2.0.0.9 (Windows/20071031)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Reuse single document and fields
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

I am trying to use the latest 2.3 API on  Field to improve the indexing 
performance by reusing Documents and  Fields. 
After reading lucene-java wiki and the java doc on Field, I have a 
couple of questions about the comment in Field.setValue(), namely,
"Note that you should only use this method after the Field has been 
consumed (ie, the Document  containing this Field has been added to the 
index)":

1. Does "consumed" here  include IndexWriter.deleteDocument(...) and 
IndexWriter.updateDocument(...)?

2.  Why does it require that the  Field has been consumed first before 
it can be modified? For example, I may pre-allocate in a constructor  a 
Document and related fields with some default values but do not (or 
cannot) add the document. Before I add my first document, I need to set 
the fields with valid values.
It looks like the new Lucene core would null some of the fields if I do 
so.  I do not understand the logic behind the requirement.

I wonder if any expert can elaborate this new API in more details here?

Thanks!

Jay  

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32334-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 01 07:30:43 2008
Return-Path: <java-user-return-32334-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96253 invoked from network); 1 Feb 2008 07:30:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Feb 2008 07:30:43 -0000
Received: (qmail 23983 invoked by uid 500); 1 Feb 2008 07:30:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23933 invoked by uid 500); 1 Feb 2008 07:30:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23917 invoked by uid 99); 1 Feb 2008 07:30:28 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Jan 2008 23:30:28 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Feb 2008 07:30:13 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1JKqLd-0005p0-SR
	for java-user@lucene.apache.org; Thu, 31 Jan 2008 23:30:05 -0800
Message-ID: <15221929.post@talk.nabble.com>
Date: Thu, 31 Jan 2008 23:30:05 -0800 (PST)
From: jjlarrea <jjl@panix.com>
To: java-user@lucene.apache.org
Subject: Re: How to rename fields in an index
In-Reply-To: <46CD3290.1070202@getopt.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: jjl@panix.com
References: <68D086C2-DB43-4CF4-8914-68C8DE709A65@taktik.be> <EAAF003CE5E5094DB92052DD646CAD8E018E2028@CTSCNSHNSXUA.cts.com> <56583697-493C-47ED-A8BF-846DAE92B30B@taktik.be> <46CC2621.7070508@getopt.org> <EAAF003CE5E5094DB92052DD646CAD8E018E224A@CTSCNSHNSXUA.cts.com> <46CD3290.1070202@getopt.org>
X-Virus-Checked: Checked by ClamAV on apache.org


Did anyone ever post a packaged solution for simple field renaming?  Since I
didn't see one, I offer (link below) a beanshell script 'fieldrename' which
uses the Lucene API to run through the segments, gather fieldnames, pass
then through a user-supplied regular-expression transformation, and rewrite
the .fnm file.  For example,

    fieldrename /path/to/index  ^Abstract$ Summary
        (renaming of a single field via exact match: Abstract -> Summary)
    fieldrename /path/to/index  Number Code
        (change substring within every fieldname: ProductNumber ->
ProductCode, etc.)

It does save the original .fnm files as .fnm.bak just in case, but caveat
emptor: Used incorrectly it can destroy a good index in a flash, so always
use on a backup index.

It works under Lucene 2.2 but has not been tested with 2.3, and it needs a
few more lines of code to work with compound-file indexes (which I'd be
happy to add if someone were actually interested in using it).
FYI I used beanshell rather than Java not only for rapid prototyping, but
also because it allows access to a non-public method in the Lucene API.

Go wild,
J.J. Larrea   

http://www.nabble.com/file/p15221929/fieldrename fieldrename 


Andrzej Bialecki wrote:
> 
> Jun.Chen@cognizant.com wrote:
>> Dear Andrzej Bialecki
>> 
>> Can we change the field name in *.fnm directly by hand?
> 
> Yes, but you need to be consistent about it, i.e. change it the same way 
> for every segment that the index consists of. Also, fnm files are binary 
> files, so you need to know the format (unless you preserve the length of 
> the name, e.g. "secret" -> "public", then you can do it with a binary 
> editor).
> 

-- 
View this message in context: http://www.nabble.com/How-to-rename-fields-in-an-index-tp12269902p15221929.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32335-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 01 07:54:43 2008
Return-Path: <java-user-return-32335-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 621 invoked from network); 1 Feb 2008 07:54:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Feb 2008 07:54:43 -0000
Received: (qmail 41193 invoked by uid 500); 1 Feb 2008 07:54:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41158 invoked by uid 500); 1 Feb 2008 07:54:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41147 invoked by uid 99); 1 Feb 2008 07:54:28 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 31 Jan 2008 23:54:28 -0800
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=SPF_NEUTRAL,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [72.14.204.230] (HELO qb-out-0506.google.com) (72.14.204.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Feb 2008 07:53:58 +0000
Received: by qb-out-0506.google.com with SMTP id o21so743903qba.9
        for <java-user@lucene.apache.org>; Thu, 31 Jan 2008 23:54:02 -0800 (PST)
Received: by 10.115.54.1 with SMTP id g1mr3637029wak.132.1201852440743;
        Thu, 31 Jan 2008 23:54:00 -0800 (PST)
Received: from ?10.17.4.4? ( [71.174.108.74])
        by mx.google.com with ESMTPS id 25sm4800366wra.31.2008.01.31.23.54.00
        (version=TLSv1/SSLv3 cipher=OTHER);
        Thu, 31 Jan 2008 23:54:00 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v753)
In-Reply-To: <15221338.post@talk.nabble.com>
References: <15175141.post@talk.nabble.com> <B34CBCE4-24B0-4CB7-BC78-F926D9E15D67@mikemccandless.com> <15197794.post@talk.nabble.com> <c68e39170801302056p7c21d3akbb372d35bae12b32@mail.gmail.com> <15198783.post@talk.nabble.com> <96AD48A6-1B37-475D-8D0B-50610240AEBF@mikemccandless.com> <15221338.post@talk.nabble.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <2B85971E-5500-415A-8121-46C740AC10E2@mikemccandless.com>
Content-Transfer-Encoding: 7bit
From: Michael McCandless <lucene@mikemccandless.com>
Subject: Re: Query in Lucene 2.3.0
Date: Fri, 1 Feb 2008 02:54:33 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.753)
X-Virus-Checked: Checked by ClamAV on apache.org


The write.lock has always been to prevent multiple instances of  
IndexWriter (or, IndexReader doing deletes) from operating on the  
same index at a time.

Many threads sharing a single instance of these classes has always  
been fine.

Mike

ajay_garg wrote:

>
> @Mike.
>
> Thanks for the reply. But I had thought that write.lock is there to  
> prevent
> multiple additions/updates/deleteDocuments.
>
> Has there been a change recently in this regard ?
>
> Thanks
> Ajay Garg
>
>
>
> Michael McCandless-2 wrote:
>>
>>
>> That's right.
>>
>> Each thread can enter IndexWriter.add/update/deleteDocument(s) in
>> parallel.  There are some parts inside IndexWriter that are
>> synchronized but they are kept to a minimum to keep good thread
>> concurrency.  As you add threads it's best to increase the RAM buffer
>> at the same time to get better performance.
>>
>> Mike
>>
>> ajay_garg wrote:
>>
>>>
>>> @Yonik
>>>
>>> So you mean to say, that if two threads have the same instance of an
>>> IndexWriter passed to both of them, and both these threads run on  
>>> two
>>> different CPUs, then they can write to the index at the same time ?
>>>
>>>
>>>
>>> Yonik Seeley wrote:
>>>>
>>>> On Jan 30, 2008 10:59 PM, ajay_garg
>>>> <garg.jeena.isi.ka.naam.hai@gmail.com> wrote:
>>>>>
>>>>> Thanks Mike for your directions.
>>>>>
>>>>> Yes, I am in fact using a single computer for my application, and
>>>>> your
>>>>> saying that in this case, multiple threads with a single
>>>>> IndexWriter wll
>>>>> give a better performance. Hmmm. I just wonder that since each
>>>>> IndexWriter
>>>>> has a single write.lock, this means that sitting on the CPU, we
>>>>> observe
>>>>> that
>>>>> at a particular instant, only a single thread is using the CPU,
>>>>
>>>> The write.lock is to protect against other IndexWriter instances,
>>>> *not* against other threads.
>>>> Using multiple threads on a single IndexWriter should utilize
>>>> multiple
>>>> CPUs.
>>>>
>>>> -Yonik
>>>>
>>>> ------------------------------------------------------------------- 
>>>> --
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>>
>>>
>>> -- 
>>> View this message in context: http://www.nabble.com/Query-in-
>>> Lucene-2.3.0-tp15175141p15198783.html
>>> Sent from the Lucene - Java Users mailing list archive at  
>>> Nabble.com.
>>>
>>>
>>> -------------------------------------------------------------------- 
>>> -
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>
> -- 
> View this message in context: http://www.nabble.com/Query-in- 
> Lucene-2.3.0-tp15175141p15221338.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ------------------------------------------------------------


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32336-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 01 08:03:46 2008
Return-Path: <java-user-return-32336-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4005 invoked from network); 1 Feb 2008 08:03:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Feb 2008 08:03:45 -0000
Received: (qmail 49002 invoked by uid 500); 1 Feb 2008 08:03:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48961 invoked by uid 500); 1 Feb 2008 08:03:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48950 invoked by uid 99); 1 Feb 2008 08:03:29 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Feb 2008 00:03:29 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of john.wang@gmail.com designates 72.14.214.224 as permitted sender)
Received: from [72.14.214.224] (HELO hu-out-0506.google.com) (72.14.214.224)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Feb 2008 08:03:02 +0000
Received: by hu-out-0506.google.com with SMTP id 27so986303hub.15
        for <java-user@lucene.apache.org>; Fri, 01 Feb 2008 00:03:07 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=EcmRRWZn45VLhdEEhdmF9tyeBgaSopZz0pihPMdiVmQ=;
        b=M18l4ZfjXDXxO6M9NTSR9VZ5gQEOUprCiOhnIN4NBCXDjqoELlV10qUv+N1LIWfFzl0zAzn+AmajS3EUt7hzqYoa2jsb2oEtLvlZEjmHL+lreiKDAufu0AEV0Esm4+5TeuN4yR32TQkbOzxCaTDdlhJtowtz136QTNCFcuYCXic=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=W9HSCOQDfnj+oRycdEGtOnsa+LiMrRNj8UQjhNIVbAFM3+WHjhxdjucWqqmmhMyhJgwBwLzM3jLXuKVBJRfNV+I3YooW855lzt1EbTNscpGJt3VImIquibh1bSkfRf5YJh7BX0LbrS8sXDpRt5Bf+u75LmqpCa180Qh9RlCGMag=
Received: by 10.86.89.4 with SMTP id m4mr2920327fgb.14.1201852987614;
        Fri, 01 Feb 2008 00:03:07 -0800 (PST)
Received: by 10.86.31.3 with HTTP; Fri, 1 Feb 2008 00:03:07 -0800 (PST)
Message-ID: <8837fb770802010003h3095f7f5he58d90ad6df7fb3f@mail.gmail.com>
Date: Fri, 1 Feb 2008 00:03:07 -0800
From: "John Wang" <john.wang@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: appending field to an existing index
In-Reply-To: <Pine.LNX.4.62.0801311356200.24422@radix.cryptio.net>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_21535_27940898.1201852987607"
References: <8837fb770801301642q23e2cc74vca270efe5c9ef9fd@mail.gmail.com>
	 <e05f0fd10801310123y67555f6ne6ecb47e97d5ff22@mail.gmail.com>
	 <8D4597E5-EBAC-4D30-974C-F79C057DC1CD@mikemccandless.com>
	 <8837fb770801310928o22ad6bbanefbc5831ba951974@mail.gmail.com>
	 <Pine.LNX.4.62.0801311356200.24422@radix.cryptio.net>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_21535_27940898.1201852987607
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Thanks Chris! This works with lucene2.1 and greater (breaks with lucene2.0)

A follow up question, anyway to rename and to delete a field.

Rename field: I tried to use a hex editor to edit the .fnm file (screwed up
my index, but I was careful and followed the index format)
Deleting a field: ideas?

Thanks

-John

On Jan 31, 2008 2:02 PM, Chris Hostetter <hossman_lucene@fucit.org> wrote:

>
> : I have to keep one index though. Is there a way to reproduce an index
> from
> : an indexReader?
>
> asuming you have indexes that work in conjunction with eachther they
> way you want when using ParallelReader, you should (in theory) be able to
> use...
>
>   ParallelReader r = ...;
>   IndexWriter w = new IndexWRiter(...);
>   w.addIndexes(new IndexReader[] { r });
>   w.close();
>
> ...to "combine" those indexes into a single physical index.  but i've
> never personally tried it.  there may be quirks about ParallelReader that
> prevent this from working.
>
>
> -Hoss
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_21535_27940898.1201852987607--

From java-user-return-32337-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 01 08:04:46 2008
Return-Path: <java-user-return-32337-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4488 invoked from network); 1 Feb 2008 08:04:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Feb 2008 08:04:46 -0000
Received: (qmail 51898 invoked by uid 500); 1 Feb 2008 08:04:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 51331 invoked by uid 500); 1 Feb 2008 08:04:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 51320 invoked by uid 99); 1 Feb 2008 08:04:31 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Feb 2008 00:04:31 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of jpstotz@gmx.de designates 213.165.64.20 as permitted sender)
Received: from [213.165.64.20] (HELO mail.gmx.net) (213.165.64.20)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 01 Feb 2008 08:04:16 +0000
Received: (qmail invoked by alias); 01 Feb 2008 08:04:09 -0000
Received: from sito1_56.sit.fraunhofer.de (EHLO [141.12.89.102]) [141.12.66.56]
  by mail.gmx.net (mp001) with SMTP; 01 Feb 2008 09:04:09 +0100
X-Authenticated: #352958
X-Provags-ID: V01U2FsdGVkX1/ITKtwbNPIJHpakgpvfwKWX/17YI7SrUr0yHSaer
	OOtu1EB5Zk5mfZ
Message-ID: <47A2D262.6030306@gmx.de>
Date: Fri, 01 Feb 2008 09:03:46 +0100
From: Jan Peter Stotz <jpstotz@gmx.de>
User-Agent: Thunderbird 2.0.0.9 (Windows/20071031)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Using a QueryParser with an untokenized field?
References: <alpine.DEB.1.00.0801312335490.16858@tugela.dsl.local>
In-Reply-To: <alpine.DEB.1.00.0801312335490.16858@tugela.dsl.local>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Y-GMX-Trusted: 0
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Eleanor.

> In my Lucene index there's a field that contains the local names of XML 
> elements, one name per document.  Users can enter arbitrary queries for 
> this field, so I'm using a QueryParser.

> From reading around it looks as if the field needs to be tokenized, but 
> since the field's content is always a single term, is this really 
> necessary?  

You are right, your field is already tokenized, but from what I know the 
main difference is that untokenized fields do not pass your selected 
analyzer when being added to the index. If your analyzer for example 
incorporates the LowerCaseFilter,  the field will be converted into 
lower case before it is indexed. When using the same analyzer for your 
QueryParser this will allow you to perform case insensitive query.

If you add the field untokenized and your Analyzer (at query time) 
incorporates the LowerCaseFilter, you will be unable find elements that 
contain upper characters.

Jan

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32338-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 01 08:16:14 2008
Return-Path: <java-user-return-32338-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8460 invoked from network); 1 Feb 2008 08:16:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Feb 2008 08:16:14 -0000
Received: (qmail 63403 invoked by uid 500); 1 Feb 2008 08:15:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63369 invoked by uid 500); 1 Feb 2008 08:15:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63358 invoked by uid 99); 1 Feb 2008 08:15:58 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Feb 2008 00:15:58 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [66.249.82.235] (HELO wx-out-0506.google.com) (66.249.82.235)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Feb 2008 08:15:30 +0000
Received: by wx-out-0506.google.com with SMTP id i28so994735wxd.20
        for <java-user@lucene.apache.org>; Fri, 01 Feb 2008 00:15:35 -0800 (PST)
Received: by 10.150.185.14 with SMTP id i14mr1186634ybf.19.1201853735298;
        Fri, 01 Feb 2008 00:15:35 -0800 (PST)
Received: from ?10.17.4.4? ( [71.174.108.74])
        by mx.google.com with ESMTPS id f3sm7579379nfh.15.2008.02.01.00.15.33
        (version=TLSv1/SSLv3 cipher=OTHER);
        Fri, 01 Feb 2008 00:15:34 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v753)
In-Reply-To: <Pine.LNX.4.62.0801311356200.24422@radix.cryptio.net>
References: <8837fb770801301642q23e2cc74vca270efe5c9ef9fd@mail.gmail.com>  <e05f0fd10801310123y67555f6ne6ecb47e97d5ff22@mail.gmail.com>  <8D4597E5-EBAC-4D30-974C-F79C057DC1CD@mikemccandless.com> <8837fb770801310928o22ad6bbanefbc5831ba951974@mail.gmail.com> <Pine.LNX.4.62.0801311356200.24422@radix.cryptio.net>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <8D824EB9-719A-4250-BDCA-F794AB2B45D5@mikemccandless.com>
Content-Transfer-Encoding: 7bit
From: Michael McCandless <lucene@mikemccandless.com>
Subject: Re: appending field to an existing index
Date: Fri, 1 Feb 2008 03:16:06 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.753)
X-Virus-Checked: Checked by ClamAV on apache.org


I don't think this will do the right thing in this case, because  
addIndexes "appends" the documents from all indices together.

Whereas John wants to "merge in" a new field into all docs in an  
existing index.

Really what we need is a new "addParallellIndices" method.  I think,  
conceptually, it's really not that hard to do ("it's just software"),  
especially if the fields are completely orthogonal (which is the case  
here, I think)?  We would need a variant of SegmentMerger, that  
instead of appending everything, would "splice" the indices together,  
doc by doc.  The posting lists should be especially simple since each  
field is contiguous in the prx/frq files.

Mike

Chris Hostetter wrote:

>
> : I have to keep one index though. Is there a way to reproduce an  
> index from
> : an indexReader?
>
> asuming you have indexes that work in conjunction with eachther they
> way you want when using ParallelReader, you should (in theory) be  
> able to
> use...
>
>    ParallelReader r = ...;
>    IndexWriter w = new IndexWRiter(...);
>    w.addIndexes(new IndexReader[] { r });
>    w.close();
>
> ...to "combine" those indexes into a single physical index.  but i've
> never personally tried it.  there may be quirks about  
> ParallelReader that
> prevent this from working.
>
>
> -Hoss
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32339-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 01 08:19:54 2008
Return-Path: <java-user-return-32339-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 9304 invoked from network); 1 Feb 2008 08:19:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Feb 2008 08:19:54 -0000
Received: (qmail 67051 invoked by uid 500); 1 Feb 2008 08:19:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67021 invoked by uid 500); 1 Feb 2008 08:19:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67010 invoked by uid 99); 1 Feb 2008 08:19:39 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Feb 2008 00:19:39 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [72.14.220.159] (HELO fg-out-1718.google.com) (72.14.220.159)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Feb 2008 08:19:09 +0000
Received: by fg-out-1718.google.com with SMTP id d23so1047039fga.27
        for <java-user@lucene.apache.org>; Fri, 01 Feb 2008 00:19:14 -0800 (PST)
Received: by 10.78.170.17 with SMTP id s17mr5562840hue.35.1201853953815;
        Fri, 01 Feb 2008 00:19:13 -0800 (PST)
Received: from ?10.17.4.4? ( [71.174.108.74])
        by mx.google.com with ESMTPS id t2sm14010107gve.3.2008.02.01.00.19.11
        (version=TLSv1/SSLv3 cipher=OTHER);
        Fri, 01 Feb 2008 00:19:12 -0800 (PST)
In-Reply-To: <8D824EB9-719A-4250-BDCA-F794AB2B45D5@mikemccandless.com>
References: <8837fb770801301642q23e2cc74vca270efe5c9ef9fd@mail.gmail.com>  <e05f0fd10801310123y67555f6ne6ecb47e97d5ff22@mail.gmail.com>  <8D4597E5-EBAC-4D30-974C-F79C057DC1CD@mikemccandless.com> <8837fb770801310928o22ad6bbanefbc5831ba951974@mail.gmail.com> <Pine.LNX.4.62.0801311356200.24422@radix.cryptio.net> <8D824EB9-719A-4250-BDCA-F794AB2B45D5@mikemccandless.com>
Mime-Version: 1.0 (Apple Message framework v753)
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <0E09057C-797B-47BF-B895-3642CA003A7D@mikemccandless.com>
Cc: java-user@lucene.apache.org
Content-Transfer-Encoding: 7bit
From: Michael McCandless <lucene@mikemccandless.com>
Subject: Re: appending field to an existing index
Date: Fri, 1 Feb 2008 03:19:43 -0500
To: Michael McCandless <lucene@mikemccandless.com>
X-Mailer: Apple Mail (2.753)
X-Virus-Checked: Checked by ClamAV on apache.org


Woops -- disregard this!  Chris' approach will work.  And, we don't  
need addParallelIndices!

Mike

Michael McCandless wrote:

>
> I don't think this will do the right thing in this case, because  
> addIndexes "appends" the documents from all indices together.
>
> Whereas John wants to "merge in" a new field into all docs in an  
> existing index.
>
> Really what we need is a new "addParallellIndices" method.  I  
> think, conceptually, it's really not that hard to do ("it's just  
> software"), especially if the fields are completely orthogonal  
> (which is the case here, I think)?  We would need a variant of  
> SegmentMerger, that instead of appending everything, would "splice"  
> the indices together, doc by doc.  The posting lists should be  
> especially simple since each field is contiguous in the prx/frq files.
>
> Mike
>
> Chris Hostetter wrote:
>
>>
>> : I have to keep one index though. Is there a way to reproduce an  
>> index from
>> : an indexReader?
>>
>> asuming you have indexes that work in conjunction with eachther they
>> way you want when using ParallelReader, you should (in theory) be  
>> able to
>> use...
>>
>>    ParallelReader r = ...;
>>    IndexWriter w = new IndexWRiter(...);
>>    w.addIndexes(new IndexReader[] { r });
>>    w.close();
>>
>> ...to "combine" those indexes into a single physical index.  but i've
>> never personally tried it.  there may be quirks about  
>> ParallelReader that
>> prevent this from working.
>>
>>
>> -Hoss
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32340-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 01 08:32:03 2008
Return-Path: <java-user-return-32340-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 13539 invoked from network); 1 Feb 2008 08:32:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Feb 2008 08:32:02 -0000
Received: (qmail 86054 invoked by uid 500); 1 Feb 2008 08:31:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86016 invoked by uid 500); 1 Feb 2008 08:31:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86005 invoked by uid 99); 1 Feb 2008 08:31:47 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Feb 2008 00:31:47 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.132.248] (HELO an-out-0708.google.com) (209.85.132.248)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Feb 2008 08:31:18 +0000
Received: by an-out-0708.google.com with SMTP id c5so256220anc.49
        for <java-user@lucene.apache.org>; Fri, 01 Feb 2008 00:31:22 -0800 (PST)
Received: by 10.100.123.4 with SMTP id v4mr6771680anc.14.1201854682470;
        Fri, 01 Feb 2008 00:31:22 -0800 (PST)
Received: from ?10.17.4.4? ( [71.174.108.74])
        by mx.google.com with ESMTPS id f13sm14184851gvd.9.2008.02.01.00.31.20
        (version=TLSv1/SSLv3 cipher=OTHER);
        Fri, 01 Feb 2008 00:31:21 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v753)
In-Reply-To: <8837fb770802010003h3095f7f5he58d90ad6df7fb3f@mail.gmail.com>
References: <8837fb770801301642q23e2cc74vca270efe5c9ef9fd@mail.gmail.com> <e05f0fd10801310123y67555f6ne6ecb47e97d5ff22@mail.gmail.com> <8D4597E5-EBAC-4D30-974C-F79C057DC1CD@mikemccandless.com> <8837fb770801310928o22ad6bbanefbc5831ba951974@mail.gmail.com> <Pine.LNX.4.62.0801311356200.24422@radix.cryptio.net> <8837fb770802010003h3095f7f5he58d90ad6df7fb3f@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <41905A90-5593-46EB-A535-87D9D69A253F@mikemccandless.com>
Content-Transfer-Encoding: 7bit
From: Michael McCandless <lucene@mikemccandless.com>
Subject: Re: appending field to an existing index
Date: Fri, 1 Feb 2008 03:31:53 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.753)
X-Virus-Checked: Checked by ClamAV on apache.org


John Wang wrote:

> Thanks Chris! This works with lucene2.1 and greater (breaks with  
> lucene2.0)
>
> A follow up question, anyway to rename and to delete a field.
>
> Rename field: I tried to use a hex editor to edit the .fnm file  
> (screwed up
> my index, but I was careful and followed the index format)
> Deleting a field: ideas?

Maybe this?

     http://www.markmail.org/message/vaohqx6bmh3smkrk

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32341-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 01 08:42:29 2008
Return-Path: <java-user-return-32341-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 16749 invoked from network); 1 Feb 2008 08:42:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Feb 2008 08:42:29 -0000
Received: (qmail 3920 invoked by uid 500); 1 Feb 2008 08:42:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3891 invoked by uid 500); 1 Feb 2008 08:42:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3880 invoked by uid 99); 1 Feb 2008 08:42:13 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Feb 2008 00:42:13 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.146.180] (HELO wa-out-1112.google.com) (209.85.146.180)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Feb 2008 08:41:45 +0000
Received: by wa-out-1112.google.com with SMTP id j40so473070wah.11
        for <java-user@lucene.apache.org>; Fri, 01 Feb 2008 00:41:50 -0800 (PST)
Received: by 10.114.154.1 with SMTP id b1mr3723848wae.34.1201855310707;
        Fri, 01 Feb 2008 00:41:50 -0800 (PST)
Received: from ?10.17.4.4? ( [71.174.108.74])
        by mx.google.com with ESMTPS id i33sm6075066rng.3.2008.02.01.00.41.50
        (version=TLSv1/SSLv3 cipher=OTHER);
        Fri, 01 Feb 2008 00:41:50 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v753)
In-Reply-To: <47A2BF12.3000205@ai.sri.com>
References: <47A2BF12.3000205@ai.sri.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <3A7AAC32-F75C-4BD3-8F0A-BA584AF5134D@mikemccandless.com>
Content-Transfer-Encoding: 7bit
From: Michael McCandless <lucene@mikemccandless.com>
Subject: Re: Reuse single document and fields
Date: Fri, 1 Feb 2008 03:42:24 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.753)
X-Virus-Checked: Checked by ClamAV on apache.org


yu wrote:

> Hi,
>
> I am trying to use the latest 2.3 API on  Field to improve the  
> indexing performance by reusing Documents and  Fields. After  
> reading lucene-java wiki and the java doc on Field, I have a couple  
> of questions about the comment in Field.setValue(), namely,
> "Note that you should only use this method after the Field has been  
> consumed (ie, the Document  containing this Field has been added to  
> the index)":
>
> 1. Does "consumed" here  include IndexWriter.deleteDocument(...)  
> and IndexWriter.updateDocument(...)?

Yes.  Actually, just add/updateDocument.

> 2.  Why does it require that the  Field has been consumed first  
> before it can be modified? For example, I may pre-allocate in a  
> constructor  a Document and related fields with some default values  
> but do not (or cannot) add the document. Before I add my first  
> document, I need to set the fields with valid values.
> It looks like the new Lucene core would null some of the fields if  
> I do so.  I do not understand the logic behind the requirement.

That use case is fine.  You can absolutely change its value before  
it's consumed when the un-consumed value doesn't matter to you.  That  
pre-allocation is a normal & fine use case, and fields should not be  
null'd by Lucene.

The warning should instead state that "if the field holds a real  
value, then make sure it's consumed first before you change it".

So, for example, if you add docs to a queue, and then use a thread  
pool to pull docs from that queue and call addDocument on them, you  
can't re-use the fields in the Document until a thread has added it  
to the index.

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32342-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 01 08:59:09 2008
Return-Path: <java-user-return-32342-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21242 invoked from network); 1 Feb 2008 08:59:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Feb 2008 08:59:08 -0000
Received: (qmail 22442 invoked by uid 500); 1 Feb 2008 08:58:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22411 invoked by uid 500); 1 Feb 2008 08:58:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 22400 invoked by uid 99); 1 Feb 2008 08:58:51 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Feb 2008 00:58:51 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of cedric.ho@gmail.com designates 209.85.146.180 as permitted sender)
Received: from [209.85.146.180] (HELO wa-out-1112.google.com) (209.85.146.180)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Feb 2008 08:58:24 +0000
Received: by wa-out-1112.google.com with SMTP id j40so481115wah.11
        for <java-user@lucene.apache.org>; Fri, 01 Feb 2008 00:58:31 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        bh=jEF0G5tCQ9+3SA+3mFBTK5jf06Fke2+DqBK54O1uxFo=;
        b=ArX2rW9Zlpyujv2Fm1hVXK9fcsOTX1KU2sbjgyJNovoEdmTjipSM0rHS5x1ZkzYx8poKOBL2fhi1jF1ryRE72PNmIyoVUEnldKDrV4IK3/d4oFvjdhUguqlIYy789clzcKnctC1YvwK4QOkHAlKPSy6NxwZ5iXGU7rzbYAiuzBI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=swdx17Thg04dkPzKsWCKhm/iMjTOWd1RqiqZ4xOq4D30BLAKeMRf71ys9COkceISCiVjt33KxP+ykSFsGUBNqsHI3CCgjrm1DXe1u7V7OR06OrVy4wP31Wr72FPmlr/WBoF23Dq46+mMDDi2T/PDIdQdfysRbpnbf+pdiK30VX4=
Received: by 10.114.178.1 with SMTP id a1mr3698505waf.135.1201856311391;
        Fri, 01 Feb 2008 00:58:31 -0800 (PST)
Received: by 10.114.156.18 with HTTP; Fri, 1 Feb 2008 00:58:31 -0800 (PST)
Message-ID: <839ba01c0802010058s35a7875l7ee2a3d4f9055ac1@mail.gmail.com>
Date: Fri, 1 Feb 2008 16:58:31 +0800
From: "Cedric Ho" <cedric.ho@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Distributed Lucene Directory
In-Reply-To: <47A27A3F.6000701@gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <839ba01c0801310042r7597c790w34a52f701e46b9b@mail.gmail.com>
	 <9685323D-F2EC-4AD9-B6FB-865BD8EA3277@gmail.com>
	 <839ba01c0801311722t501aca37o31de58a861937e1f@mail.gmail.com>
	 <47A27A3F.6000701@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

On Feb 1, 2008 9:47 AM, Mark Miller <markrmiller@gmail.com> wrote:
>
> Cedric Ho wrote:
> >
> > But managing such a set of indexes is not trivial. Especially when
> > need to add redundancies for reliability and update frequently.
> >
> Agreed. Apparently the Solr guys are working on this now. Certainly not
> trivial to do right. You might want to check out that work.

do you mean this? (SOLR-303) Distributed Search over HTTP. It seems
quite complicated and is not ready for use yet.
As for Solr, let's just say It provides a lot of great functionalities
that I don't need, and a lot of functionalities that I need is not
there. So I eventually stick with Lucene only.

>
> I want to start a project for this functionality myself soon - but just
> with Lucene. Personally, I think the only way to go is to use Jini, but
> I am waiting for the first release of Apache River before getting
> started (*very* soon I hope). That gets you through the 8 fallacies of
> distributed computing with almost no work right off the bat. Self
> discovery, leasing, redundancy, etc with minimal effort. Hopefully I
> will be able to recruit some help with this. From what I can tell, there
> is a lot of roll your own for this type of thing out there...it would be
> nice to focus some work on a system that can be used by all.

I don't know much about Jini. But I'd be willing to help if you need any. =)


>
> - Mark
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32343-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 01 11:46:51 2008
Return-Path: <java-user-return-32343-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80618 invoked from network); 1 Feb 2008 11:46:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Feb 2008 11:46:51 -0000
Received: (qmail 79247 invoked by uid 500); 1 Feb 2008 11:46:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79208 invoked by uid 500); 1 Feb 2008 11:46:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79197 invoked by uid 99); 1 Feb 2008 11:46:34 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Feb 2008 03:46:34 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Feb 2008 11:46:19 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1JKuLU-0005sS-9a
	for java-user@lucene.apache.org; Fri, 01 Feb 2008 03:46:12 -0800
Message-ID: <15224916.post@talk.nabble.com>
Date: Fri, 1 Feb 2008 03:46:12 -0800 (PST)
From: Lisa Lee <cococct@hanmail.net>
To: java-user@lucene.apache.org
Subject: How can I get document's top n raw score?
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: cococct@hanmail.net
X-Virus-Checked: Checked by ClamAV on apache.org


I need know document's top n raw score & term.

For example,

If one document have {apple, banana, coconut} terms, and I need top 2 score
in the document.

Simple way is just search all term in the document and sort the score - like
as below.

first, search about 'apple' term then write the score using IndexSearcher,
Query, Hits, Document and Explanation class.
second, as same way, search about term 'banana'.
third, as same way, search about term 'coconut'. 
last, compare these score and find out top 2 high score term and score.

It is no problem if number of documents are small.
But, I handle over the 1,000,000 documents and over the 20,000,000 terms.

Is there any way solve this problem more quickly?

I use 2.2.0 ver lucene.
-- 
View this message in context: http://www.nabble.com/How-can-I-get-document%27s-top-n-raw-score--tp15224916p15224916.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32344-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 01 12:47:14 2008
Return-Path: <java-user-return-32344-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 2184 invoked from network); 1 Feb 2008 12:47:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Feb 2008 12:47:14 -0000
Received: (qmail 65846 invoked by uid 500); 1 Feb 2008 12:46:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65808 invoked by uid 500); 1 Feb 2008 12:46:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65797 invoked by uid 99); 1 Feb 2008 12:46:58 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Feb 2008 04:46:58 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [87.194.172.100] (HELO knox.decisionsoft.com) (87.194.172.100)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Feb 2008 12:46:40 +0000
Received: from valency.dsl.local ([10.0.0.19])
	by knox.decisionsoft.com with esmtp (Exim 4.63)
	(envelope-from <ejj@decisionsoft.com>)
	id 1JKvHp-00058A-H2
	for java-user@lucene.apache.org; Fri, 01 Feb 2008 12:46:30 +0000
Message-ID: <47A314A5.3000206@decisionsoft.com>
Date: Fri, 01 Feb 2008 12:46:29 +0000
From: Eleanor Joslin <ejj@decisionsoft.com>
User-Agent: Thunderbird 1.5.0.12 (X11/20070530)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Using a QueryParser with an untokenized field?
References: <alpine.DEB.1.00.0801312335490.16858@tugela.dsl.local> <47A2D262.6030306@gmx.de>
In-Reply-To: <47A2D262.6030306@gmx.de>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-SA-Exim-Connect-IP: 10.0.0.19
X-SA-Exim-Mail-From: ejj@decisionsoft.com
X-SA-Exim-Scanned: No (on knox.decisionsoft.com); SAEximRunCond expanded to false
X-SystemFilter-new-T: not expanding
X-SystemFilter-new-S:  not expanding
X-SystemFilter-new-F:  not expanding
X-Virus-Checked: Checked by ClamAV on apache.org

Thank you, this was exactly what I needed.  So "tokenizing" really 
denotes a more general process that can involve normalizing the case or 
whatever else can be done with a filter.  This is where I was confused.

Eleanor

Jan Peter Stotz wrote:
> Hi Eleanor.
> 
>> In my Lucene index there's a field that contains the local names of 
>> XML elements, one name per document.  Users can enter arbitrary 
>> queries for this field, so I'm using a QueryParser.
> 
>> From reading around it looks as if the field needs to be tokenized, 
>> but since the field's content is always a single term, is this really 
>> necessary?  
> 
> You are right, your field is already tokenized, but from what I know the 
> main difference is that untokenized fields do not pass your selected 
> analyzer when being added to the index. If your analyzer for example 
> incorporates the LowerCaseFilter,  the field will be converted into 
> lower case before it is indexed. When using the same analyzer for your 
> QueryParser this will allow you to perform case insensitive query.
> 
> If you add the field untokenized and your Analyzer (at query time) 
> incorporates the LowerCaseFilter, you will be unable find elements that 
> contain upper characters.
> 
> Jan
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 


-- 
Eleanor Joslin, Software Development   DecisionSoft Ltd.
Telephone: +44-1865-203192             http://www.decisionsoft.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32345-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 01 13:03:47 2008
Return-Path: <java-user-return-32345-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 6911 invoked from network); 1 Feb 2008 13:03:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Feb 2008 13:03:47 -0000
Received: (qmail 3921 invoked by uid 500); 1 Feb 2008 13:03:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3738 invoked by uid 500); 1 Feb 2008 13:03:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3727 invoked by uid 99); 1 Feb 2008 13:03:22 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Feb 2008 05:03:22 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [208.97.132.83] (HELO spunkymail-a13.g.dreamhost.com) (208.97.132.83)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Feb 2008 13:03:06 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a13.g.dreamhost.com (Postfix) with ESMTP id EC373129B34
	for <java-user@lucene.apache.org>; Fri,  1 Feb 2008 05:02:57 -0800 (PST)
Message-Id: <6DF4A122-877C-44A6-8FC2-CF861C1E6732@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <295da8fe0801311149p23bfdfa4vcf87d5cfcfd44ba@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v915)
Subject: Re: Different levels of negative boosting
Date: Fri, 1 Feb 2008 08:02:51 -0500
References: <295da8fe0801311149p23bfdfa4vcf87d5cfcfd44ba@mail.gmail.com>
X-Mailer: Apple Mail (2.915)
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Prabin,

Can you give an example of what you would like a query to look like?   
Lucene doesn't do negative boosts (ok, w/ a patch, I think it can,  
but...)  At any rate, the boosts are relative, so perhaps you just  
lower the boost to be very small for the "bad" terms and raise it  
higher for the good terms.

What is the end goal of what you are trying to find?  Perhaps there  
are some alternatives.

-Grant

On Jan 31, 2008, at 2:49 PM, prabin meitei wrote:

> Hi,  I want to give different levels of negative boost (reduce the  
> score) to
> documents for different matching queries. How it can be done??  
> Googling I
> found out this link
> http://wiki.apache.org/jakarta-lucene/CommunityContributions  but   
> it just
> gives the option of giving single level negative boost.
> is there any way of having multiple matching queries and give them  
> different
> negative boosts???
>
>
> Regards,
> Prabin

--------------------------
Grant Ingersoll
http://lucene.grantingersoll.com
http://www.lucenebootcamp.com

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32346-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 01 13:41:56 2008
Return-Path: <java-user-return-32346-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 18574 invoked from network); 1 Feb 2008 13:41:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Feb 2008 13:41:56 -0000
Received: (qmail 63009 invoked by uid 500); 1 Feb 2008 13:41:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62973 invoked by uid 500); 1 Feb 2008 13:41:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62962 invoked by uid 99); 1 Feb 2008 13:41:37 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Feb 2008 05:41:37 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of prabin.meitei@gmail.com designates 72.14.214.231 as permitted sender)
Received: from [72.14.214.231] (HELO hu-out-0506.google.com) (72.14.214.231)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Feb 2008 13:41:09 +0000
Received: by hu-out-0506.google.com with SMTP id 27so1087754hub.15
        for <java-user@lucene.apache.org>; Fri, 01 Feb 2008 05:41:14 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=vZ3YrfLWeCWPGPTQ21HK7aghJE+CfPbu5T6lsCWDUIs=;
        b=xrTfGqN6ReGAmmpwg6iAfVaTnig54qHQDQcMRSIbNa8LBXS1Au8qgPxaJUOfI1ul09SGAsWnKvNjTgOgnnOJe9Z16JnDmu9W0qY+tI3d1xhdq69gnjlMB8EKoFbshSUFBxHoxvsUKiBqIRTxvUTqNAKkVOcPKU5jZteuCYTPxHU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=Wt2NXBd1d02rszh/x6eineUtmAazoZNFRJd/xTQJoBGv635k9JHHjnrrSvR8k+xf+h7P1EsnZrzETCLynXUjqMfv7XxP03pPvLNZWgqHoOo4+Vw4O6ExshUl0WE2YUlafvybZx90h6VjN/aZ3aVxvFotgH7m6mkSWIHSvboHc90=
Received: by 10.78.166.7 with SMTP id o7mr6135389hue.31.1201873273387;
        Fri, 01 Feb 2008 05:41:13 -0800 (PST)
Received: by 10.78.172.17 with HTTP; Fri, 1 Feb 2008 05:41:13 -0800 (PST)
Message-ID: <295da8fe0802010541l740334fj70f4825e186113bb@mail.gmail.com>
Date: Fri, 1 Feb 2008 19:11:13 +0530
From: "prabin meitei" <prabin.meitei@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Different levels of negative boosting
In-Reply-To: <6DF4A122-877C-44A6-8FC2-CF861C1E6732@apache.org>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_25632_21859870.1201873273390"
References: <295da8fe0801311149p23bfdfa4vcf87d5cfcfd44ba@mail.gmail.com>
	 <6DF4A122-877C-44A6-8FC2-CF861C1E6732@apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_25632_21859870.1201873273390
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi Grant,
    I have an index for articles containing fields 'id' , 'body' and others

BooleanQuery query = new BooleanQuery;
queryParser = new QueryParser("body", new StandardAnalyzer());
query.add(queryParser.parse("keywords"), Occur.MUST);

if i query at this level then i get all the articles I want. But I want to
de-boost some of them if they matches another term
.
BooleanQuery q1 = new BooleanQuery;
BooleanQuery q2 = new BooleanQuery;
queryParser = new QueryParser("body", new StandardAnalyzer());
q1.add(queryParser.parse("body"), Occur.SHOULD);
queryParser = new QueryParser("some field", new StandardAnalyzer());
q2.add(queryParser.parse("keywords2"), Occur.SHOULD);

q1.setBoost(0.1);
q2.setBoost(0.3);
query.add(q1, Occur.SHOULD);
query.add(q2, Occur.SHOULD);
### what I want here is that any document matching the queries q1 and q2
will be boosted negatively(reducing their score but *not eliminating from
the search result*)
# puting values less than 1.0 (as I tried doing) did not help (lucene seems
to assume it as 1)
# if there was only one query then I could do it as I wrote in my last mail.
But the problem is when there a multiple queries to reduce the score by
multiple levels.

or am I going in a wrong direction?? It wud be nice if you have some
suggestion.

Prabin

On Feb 1, 2008 6:32 PM, Grant Ingersoll <gsingers@apache.org> wrote:

> Hi Prabin,
>
> Can you give an example of what you would like a query to look like?
> Lucene doesn't do negative boosts (ok, w/ a patch, I think it can,
> but...)  At any rate, the boosts are relative, so perhaps you just
> lower the boost to be very small for the "bad" terms and raise it
> higher for the good terms.
>
> What is the end goal of what you are trying to find?  Perhaps there
> are some alternatives.
>
> -Grant
>
> On Jan 31, 2008, at 2:49 PM, prabin meitei wrote:
>
> > Hi,  I want to give different levels of negative boost (reduce the
> > score) to
> > documents for different matching queries. How it can be done??
> > Googling I
> > found out this link
> > http://wiki.apache.org/jakarta-lucene/CommunityContributions  but
> > it just
> > gives the option of giving single level negative boost.
> > is there any way of having multiple matching queries and give them
> > different
> > negative boosts???
> >
> >
> > Regards,
> > Prabin
>
> --------------------------
> Grant Ingersoll
> http://lucene.grantingersoll.com
> http://www.lucenebootcamp.com
>
> Lucene Helpful Hints:
> http://wiki.apache.org/lucene-java/BasicsOfPerformance
> http://wiki.apache.org/lucene-java/LuceneFAQ
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_25632_21859870.1201873273390--

From java-user-return-32347-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 01 18:52:19 2008
Return-Path: <java-user-return-32347-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 13583 invoked from network); 1 Feb 2008 18:52:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Feb 2008 18:52:19 -0000
Received: (qmail 46094 invoked by uid 500); 1 Feb 2008 18:52:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46061 invoked by uid 500); 1 Feb 2008 18:52:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46049 invoked by uid 99); 1 Feb 2008 18:52:03 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Feb 2008 10:52:03 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [130.107.64.135] (HELO Balboa.AI.SRI.COM) (130.107.64.135)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Feb 2008 18:51:34 +0000
Received: from Balboa.AI.SRI.COM (localhost [127.0.0.1])
	by Balboa.AI.SRI.COM (8.11.7p2+Sun/8.10.1) with SMTP id m11Ipf126790
	for <java-user@lucene.apache.org>; Fri, 1 Feb 2008 10:51:41 -0800 (PST)
Received: from Salt.AI.SRI.COM ([130.107.65.211])
 by Balboa.AI.SRI.COM (SMSSMTP 4.1.9.35) with SMTP id M2008020110514010855
 for <java-user@lucene.apache.org>; Fri, 01 Feb 2008 10:51:40 -0800
Received: from localhost.ai.sri.com
	([127.0.0.1] helo=[130.107.65.199] ident=root)
	by Salt.AI.SRI.COM with asmtp (Exim 3.35 #1 (Debian))
	id 1JL0zE-00060p-00
	for <java-user@lucene.apache.org>; Fri, 01 Feb 2008 10:51:40 -0800
Message-ID: <47A36A3C.4070907@ai.sri.com>
Date: Fri, 01 Feb 2008 10:51:40 -0800
From: Jay <yu@AI.SRI.COM>
User-Agent: Thunderbird 2.0.0.9 (Windows/20071031)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Reuse single document and fields
References: <47A2BF12.3000205@ai.sri.com> <3A7AAC32-F75C-4BD3-8F0A-BA584AF5134D@mikemccandless.com>
In-Reply-To: <3A7AAC32-F75C-4BD3-8F0A-BA584AF5134D@mikemccandless.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks, Michael, for your quick reply and explanation.
One related question: is it true that Lucene indexer will reject a field 
  that has the empty string value? (I saw an IllegalArgumentException).
Will be nice if lucene just skip such a field silently, esp, for the new 
2.3 api.

Jay
Michael McCandless wrote:
> 
> yu wrote:
> 
>> Hi,
>>
>> I am trying to use the latest 2.3 API on  Field to improve the 
>> indexing performance by reusing Documents and  Fields. After reading 
>> lucene-java wiki and the java doc on Field, I have a couple of 
>> questions about the comment in Field.setValue(), namely,
>> "Note that you should only use this method after the Field has been 
>> consumed (ie, the Document  containing this Field has been added to 
>> the index)":
>>
>> 1. Does "consumed" here  include IndexWriter.deleteDocument(...) and 
>> IndexWriter.updateDocument(...)?
> 
> Yes.  Actually, just add/updateDocument.
> 
>> 2.  Why does it require that the  Field has been consumed first before 
>> it can be modified? For example, I may pre-allocate in a constructor  
>> a Document and related fields with some default values but do not (or 
>> cannot) add the document. Before I add my first document, I need to 
>> set the fields with valid values.
>> It looks like the new Lucene core would null some of the fields if I 
>> do so.  I do not understand the logic behind the requirement.
> 
> That use case is fine.  You can absolutely change its value before it's 
> consumed when the un-consumed value doesn't matter to you.  That 
> pre-allocation is a normal & fine use case, and fields should not be 
> null'd by Lucene.
> 
> The warning should instead state that "if the field holds a real value, 
> then make sure it's consumed first before you change it".
> 
> So, for example, if you add docs to a queue, and then use a thread pool 
> to pull docs from that queue and call addDocument on them, you can't 
> re-use the fields in the Document until a thread has added it to the index.
> 
> Mike
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32348-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 01 19:01:40 2008
Return-Path: <java-user-return-32348-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 18914 invoked from network); 1 Feb 2008 19:01:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Feb 2008 19:01:40 -0000
Received: (qmail 80950 invoked by uid 500); 1 Feb 2008 19:01:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80920 invoked by uid 500); 1 Feb 2008 19:01:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80841 invoked by uid 99); 1 Feb 2008 19:01:22 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Feb 2008 11:01:22 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [62.213.161.134] (HELO pmx.sirma.bg) (62.213.161.134)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Feb 2008 19:01:08 +0000
X-Virus-Scanned: Sirma Antivirus System
Received: from [192.168.128.140] (ivasilev.sirma.int [192.168.128.140])
	by pmx.sirma.bg (Sirma mail system) with ESMTP id E9B5024001
	for <java-user@lucene.apache.org>; Fri,  1 Feb 2008 21:01:00 +0200 (EET)
Message-ID: <47A36C6A.9050304@sirma.bg>
Date: Fri, 01 Feb 2008 21:00:58 +0200
From: Ivan Vasilev <ivasilev@sirma.bg>
User-Agent: Thunderbird 2.0.0.9 (Windows/20071031)
MIME-Version: 1.0
To: LUCENE MAIL LIST <java-user@lucene.apache.org>
Subject: Lucene File Formats web page
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Guys,

In the File Formats web page 
(http://lucene.apache.org/java/2_3_0/fileformats.html) there is section 
describing Segments File, where we read:

Segments --> Format, Version, NameCounter, ...
...
Format is -1 as of Lucene 1.4 and -3 
(SemgentInfos.FORMAT_SINGLE_NORM_FILE) as of Lucene 2.1.
...

On my opinion the last sentence is not completely right. I mean it 
should contain addition somthing like this:
1) "and -4 (SemgentInfos.FORMAT_SHARED_DOC_STORE) as of Lucene 2.3."
or like this:
2) "and as of Lucene 2.3 -4 (SemgentInfos.FORMAT_SHARED_DOC_STORE) in 
cases when shared stored fields and term vectors exist or -3 
(SemgentInfos.FORMAT_SINGLE_NORM_FILE) when no sharing exists."

So my question is what of the two suggestions is correct?
According to my tests with our IndexRecoverer tool the 1) is correct. 
Here I will have to mention what does this tool. It creates segments 
file out of given set of segments. I did not made a lot of tests yet but 
in one single case when I created segments file for a segments set that 
does not contain any shared data when I use 
Format=SemgentInfos.FORMAT_SINGLE_NORM_FILE Luke can not open it using 
Lucene 2.3, but when Format=SemgentInfos.FORMAT_SHARED_DOC_STORE it 
opens it correctly.

Best Regards,
Ivan


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32349-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 01 19:36:49 2008
Return-Path: <java-user-return-32349-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32253 invoked from network); 1 Feb 2008 19:36:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Feb 2008 19:36:49 -0000
Received: (qmail 33383 invoked by uid 500); 1 Feb 2008 19:36:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33349 invoked by uid 500); 1 Feb 2008 19:36:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33338 invoked by uid 99); 1 Feb 2008 19:36:34 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Feb 2008 11:36:34 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [66.249.82.232] (HELO wx-out-0506.google.com) (66.249.82.232)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Feb 2008 19:36:06 +0000
Received: by wx-out-0506.google.com with SMTP id i28so1204538wxd.20
        for <java-user@lucene.apache.org>; Fri, 01 Feb 2008 11:36:12 -0800 (PST)
Received: by 10.110.62.14 with SMTP id k14mr2423085tia.18.1201894570612;
        Fri, 01 Feb 2008 11:36:10 -0800 (PST)
Received: from ?10.17.4.4? ( [71.174.108.74])
        by mx.google.com with ESMTPS id h36sm403116wxd.29.2008.02.01.11.35.58
        (version=TLSv1/SSLv3 cipher=OTHER);
        Fri, 01 Feb 2008 11:36:05 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v753)
In-Reply-To: <47A36C6A.9050304@sirma.bg>
References: <47A36C6A.9050304@sirma.bg>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <E375D7F4-43CF-4883-B935-A0F602C518D0@mikemccandless.com>
Content-Transfer-Encoding: 7bit
From: Michael McCandless <lucene@mikemccandless.com>
Subject: Re: Lucene File Formats web page
Date: Fri, 1 Feb 2008 14:36:21 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.753)
X-Virus-Checked: Checked by ClamAV on apache.org


Woops, you are correct, the file formats doc is out of date.

It should be #1.

I'll fix it -- thank you for raising it!

Mike

Ivan Vasilev wrote:

> Hi Guys,
>
> In the File Formats web page (http://lucene.apache.org/java/2_3_0/ 
> fileformats.html) there is section describing Segments File, where  
> we read:
>
> Segments --> Format, Version, NameCounter, ...
> ...
> Format is -1 as of Lucene 1.4 and -3  
> (SemgentInfos.FORMAT_SINGLE_NORM_FILE) as of Lucene 2.1.
> ...
>
> On my opinion the last sentence is not completely right. I mean it  
> should contain addition somthing like this:
> 1) "and -4 (SemgentInfos.FORMAT_SHARED_DOC_STORE) as of Lucene 2.3."
> or like this:
> 2) "and as of Lucene 2.3 -4 (SemgentInfos.FORMAT_SHARED_DOC_STORE)  
> in cases when shared stored fields and term vectors exist or -3  
> (SemgentInfos.FORMAT_SINGLE_NORM_FILE) when no sharing exists."
>
> So my question is what of the two suggestions is correct?
> According to my tests with our IndexRecoverer tool the 1) is  
> correct. Here I will have to mention what does this tool. It  
> creates segments file out of given set of segments. I did not made  
> a lot of tests yet but in one single case when I created segments  
> file for a segments set that does not contain any shared data when  
> I use Format=SemgentInfos.FORMAT_SINGLE_NORM_FILE Luke can not open  
> it using Lucene 2.3, but when  
> Format=SemgentInfos.FORMAT_SHARED_DOC_STORE it opens it correctly.
>
> Best Regards,
> Ivan
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32350-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 01 19:38:31 2008
Return-Path: <java-user-return-32350-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32622 invoked from network); 1 Feb 2008 19:38:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Feb 2008 19:38:31 -0000
Received: (qmail 35459 invoked by uid 500); 1 Feb 2008 19:38:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 35419 invoked by uid 500); 1 Feb 2008 19:38:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 35406 invoked by uid 99); 1 Feb 2008 19:38:16 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Feb 2008 11:38:16 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [72.14.204.224] (HELO qb-out-0506.google.com) (72.14.204.224)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Feb 2008 19:37:47 +0000
Received: by qb-out-0506.google.com with SMTP id o21so1042144qba.9
        for <java-user@lucene.apache.org>; Fri, 01 Feb 2008 11:37:53 -0800 (PST)
Received: by 10.70.70.12 with SMTP id s12mr1589953wxa.44.1201894673364;
        Fri, 01 Feb 2008 11:37:53 -0800 (PST)
Received: from ?10.17.4.4? ( [71.174.108.74])
        by mx.google.com with ESMTPS id i38sm573062wxd.16.2008.02.01.11.37.43
        (version=TLSv1/SSLv3 cipher=OTHER);
        Fri, 01 Feb 2008 11:37:48 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v753)
In-Reply-To: <47A36A3C.4070907@ai.sri.com>
References: <47A2BF12.3000205@ai.sri.com> <3A7AAC32-F75C-4BD3-8F0A-BA584AF5134D@mikemccandless.com> <47A36A3C.4070907@ai.sri.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <15BA9EF3-1DDF-4A0C-BE00-094FBF41D88D@mikemccandless.com>
Content-Transfer-Encoding: 7bit
From: Michael McCandless <lucene@mikemccandless.com>
Subject: Re: Reuse single document and fields
Date: Fri, 1 Feb 2008 14:38:07 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.753)
X-Virus-Checked: Checked by ClamAV on apache.org


As far as I know, Lucene should accept a field with an empty string  
value -- how did you hit the IllegalArgumentException?

Mike

Jay wrote:

> Thanks, Michael, for your quick reply and explanation.
> One related question: is it true that Lucene indexer will reject a  
> field  that has the empty string value? (I saw an  
> IllegalArgumentException).
> Will be nice if lucene just skip such a field silently, esp, for  
> the new 2.3 api.
>
> Jay
> Michael McCandless wrote:
>> yu wrote:
>>> Hi,
>>>
>>> I am trying to use the latest 2.3 API on  Field to improve the  
>>> indexing performance by reusing Documents and  Fields. After  
>>> reading lucene-java wiki and the java doc on Field, I have a  
>>> couple of questions about the comment in Field.setValue(), namely,
>>> "Note that you should only use this method after the Field has  
>>> been consumed (ie, the Document  containing this Field has been  
>>> added to the index)":
>>>
>>> 1. Does "consumed" here  include IndexWriter.deleteDocument(...)  
>>> and IndexWriter.updateDocument(...)?
>> Yes.  Actually, just add/updateDocument.
>>> 2.  Why does it require that the  Field has been consumed first  
>>> before it can be modified? For example, I may pre-allocate in a  
>>> constructor  a Document and related fields with some default  
>>> values but do not (or cannot) add the document. Before I add my  
>>> first document, I need to set the fields with valid values.
>>> It looks like the new Lucene core would null some of the fields  
>>> if I do so.  I do not understand the logic behind the requirement.
>> That use case is fine.  You can absolutely change its value before  
>> it's consumed when the un-consumed value doesn't matter to you.   
>> That pre-allocation is a normal & fine use case, and fields should  
>> not be null'd by Lucene.
>> The warning should instead state that "if the field holds a real  
>> value, then make sure it's consumed first before you change it".
>> So, for example, if you add docs to a queue, and then use a thread  
>> pool to pull docs from that queue and call addDocument on them,  
>> you can't re-use the fields in the Document until a thread has  
>> added it to the index.
>> Mike
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32351-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 01 22:05:09 2008
Return-Path: <java-user-return-32351-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97409 invoked from network); 1 Feb 2008 22:05:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Feb 2008 22:05:09 -0000
Received: (qmail 84089 invoked by uid 500); 1 Feb 2008 22:04:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83517 invoked by uid 500); 1 Feb 2008 22:04:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83506 invoked by uid 99); 1 Feb 2008 22:04:54 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Feb 2008 14:04:54 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Feb 2008 22:04:26 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1JL3zt-00048B-4y
	for java-user@lucene.apache.org; Fri, 01 Feb 2008 14:04:33 -0800
Message-ID: <15234463.post@talk.nabble.com>
Date: Fri, 1 Feb 2008 14:04:33 -0800 (PST)
From: codetester <infinitelimittester@gmail.com>
To: java-user@lucene.apache.org
Subject: Concurrent Indexing + Searching
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: infinitelimittester@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hi All,

A newbie out here.... I am using lucene 2.3.0. I need to use lucene to
perform live searching and indexing. To achieve that, I tried the following

FSDirectory directory = FSDirectory.getDirectory(location);
IndexReader reader = IndexReader.open(directory );
IndexWriter writer = new IndexWriter(directory , new SimpleAnalyzer(),
true); // <- I want to recreate the index every time
IndexSearcher searcher = new IndexSearcher( reader );

For Searching, I have the following code
QueryParser queryParser = new QueryParser("xyz", new StandardAnalyzer());
Hits hits = searcher .search(queryParser.parse(displayName + "*"));

And for adding records, I have the following code
 // Create doc object
 writer.addDocument(doc);

 IndexReader newIndexReader = reader.reopen() ;
 if ( newIndexReader != reader ) {
       reader.close() ;
 }
 reader = newIndexReader ;
 searcher.close() ;
 searcher = new IndexSearcher(reader );
        
So the issues that I face are 

1) The addition of new record is not reflected in the search ( even though I
have reinited IndexSearcher )

2) Obviously, the add record code is not thread safe. I am trying to close
and update the reference to IndexSearcher object. I could add a sync block,
but the bigger question would be that what is the ideal way to achieve this
case where I need to add and search record real-time ?

Thanks !




-- 
View this message in context: http://www.nabble.com/Concurrent-Indexing-%2B-Searching-tp15234463p15234463.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32352-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 01 22:10:31 2008
Return-Path: <java-user-return-32352-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98702 invoked from network); 1 Feb 2008 22:10:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Feb 2008 22:10:30 -0000
Received: (qmail 96891 invoked by uid 500); 1 Feb 2008 22:10:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96852 invoked by uid 500); 1 Feb 2008 22:10:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96841 invoked by uid 99); 1 Feb 2008 22:10:15 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Feb 2008 14:10:15 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Feb 2008 22:10:01 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1JL453-0004Gh-Oy
	for java-user@lucene.apache.org; Fri, 01 Feb 2008 14:09:53 -0800
Message-ID: <15234463.post@talk.nabble.com>
Date: Fri, 1 Feb 2008 14:09:53 -0800 (PST)
From: codetester <infinitelimittester@gmail.com>
To: java-user@lucene.apache.org
Subject: Concurrent Indexing + Searching
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: infinitelimittester@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hi All,

A newbie out here.... I am using lucene 2.3.0. I need to use lucene to
perform live searching and indexing. To achieve that, I tried the following

FSDirectory directory = FSDirectory.getDirectory(location);
IndexReader reader = IndexReader.open(directory );
IndexWriter writer = new IndexWriter(directory , new SimpleAnalyzer(),
true); // <- I want to recreate the index every time
IndexSearcher searcher = new IndexSearcher( reader );

For Searching, I have the following code
QueryParser queryParser = new QueryParser("xyz", new StandardAnalyzer());
Hits hits = searcher .search(queryParser.parse(displayName + "*"));

And for adding records, I have the following code
 // Create doc object
 writer.addDocument(doc);

 IndexReader newIndexReader = reader.reopen() ;
 if ( newIndexReader != reader ) {
       reader.close() ;
 }
 reader = newIndexReader ;
 searcher.close() ;
 searcher = new IndexSearcher(reader );
        
So the issues that I face are 

1) The addition of new record is not reflected in the search ( even though I
have reinited IndexSearcher )

2) Obviously, the add record code is not thread safe. I am trying to close
and update the reference to IndexSearcher object. I could add a sync block,
but the bigger question would be that what is the ideal way to achieve this
case where I need to add and search record real-time ? 

Thanks !




-- 
View this message in context: http://www.nabble.com/Concurrent-Indexing-%2B-Searching-tp15234463p15234463.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32353-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 01 22:12:27 2008
Return-Path: <java-user-return-32353-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99478 invoked from network); 1 Feb 2008 22:12:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Feb 2008 22:12:27 -0000
Received: (qmail 3162 invoked by uid 500); 1 Feb 2008 22:12:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3134 invoked by uid 500); 1 Feb 2008 22:12:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3123 invoked by uid 99); 1 Feb 2008 22:12:12 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Feb 2008 14:12:12 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of markrmiller@gmail.com designates 64.233.166.177 as permitted sender)
Received: from [64.233.166.177] (HELO py-out-1112.google.com) (64.233.166.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Feb 2008 22:11:44 +0000
Received: by py-out-1112.google.com with SMTP id a73so1506785pye.9
        for <java-user@lucene.apache.org>; Fri, 01 Feb 2008 14:11:51 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        bh=fHpnGiRNmQzUab2w4c/xTyI9CX1BC9cil1abzES/V7w=;
        b=TODqLlsKvoVwtfVNTeiGs0lT5b3vEzG2LQ6rHRzXwpqZsA2LsazEghx7bbpimN9TZA8EhWwPDpmFql3aoEyMnwio4Az+AcqJXevk5mt4CISiln9QyWek3iNLzi0YqhRVbyisaVAMq3lEPRgscZdEeVud/fH3ahevXdnydCfZJAg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=Mp+QxS0y5S5yKFJuDtFqyv6v7Ahed3RVKeNDP6WlHmf2qtWxIy2nvdVvL/IKDcGowRumq3WqGUBuB0WvBXnzaEfsYT/Uw7I+Tj28lg9oIegOwA5Cm8OD5QVws5zKFJfwQ3LbrVXNxJTU9zi3DmwpPig0VamxAApCBn8gT6qu3Fo=
Received: by 10.65.191.3 with SMTP id t3mr6624525qbp.0.1201903910487;
        Fri, 01 Feb 2008 14:11:50 -0800 (PST)
Received: from ?192.168.1.118? ( [69.124.234.183])
        by mx.google.com with ESMTPS id e10sm2735681qbe.12.2008.02.01.14.11.49
        (version=SSLv3 cipher=RC4-MD5);
        Fri, 01 Feb 2008 14:11:49 -0800 (PST)
Message-ID: <47A39901.7040107@gmail.com>
Date: Fri, 01 Feb 2008 17:11:13 -0500
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.9 (Windows/20071031)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Concurrent Indexing + Searching
References: <15234463.post@talk.nabble.com>
In-Reply-To: <15234463.post@talk.nabble.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

You are not seeing the doc because you need to close the IndexWriter first.

To have an interactive index you can:

A: roll your own.
B: use Solr.
C: use the original LuceneIndexAccessor 
https://issues.apache.org/jira/browse/LUCENE-390
D: use my updated IndexAccessor 
https://issues.apache.org/jira/browse/LUCENE-1026

I have actually just added the ability to warm searchers before putting 
them into to use for option D, but i havn't gotten around to posting the 
new code yet.


- Mark Miller




codetester wrote:
> Hi All,
>
> A newbie out here.... I am using lucene 2.3.0. I need to use lucene to
> perform live searching and indexing. To achieve that, I tried the following
>
> FSDirectory directory = FSDirectory.getDirectory(location);
> IndexReader reader = IndexReader.open(directory );
> IndexWriter writer = new IndexWriter(directory , new SimpleAnalyzer(),
> true); // <- I want to recreate the index every time
> IndexSearcher searcher = new IndexSearcher( reader );
>
> For Searching, I have the following code
> QueryParser queryParser = new QueryParser("xyz", new StandardAnalyzer());
> Hits hits = searcher .search(queryParser.parse(displayName + "*"));
>
> And for adding records, I have the following code
>  // Create doc object
>  writer.addDocument(doc);
>
>  IndexReader newIndexReader = reader.reopen() ;
>  if ( newIndexReader != reader ) {
>        reader.close() ;
>  }
>  reader = newIndexReader ;
>  searcher.close() ;
>  searcher = new IndexSearcher(reader );
>         
> So the issues that I face are 
>
> 1) The addition of new record is not reflected in the search ( even though I
> have reinited IndexSearcher )
>
> 2) Obviously, the add record code is not thread safe. I am trying to close
> and update the reference to IndexSearcher object. I could add a sync block,
> but the bigger question would be that what is the ideal way to achieve this
> case where I need to add and search record real-time ?
>
> Thanks !
>
>
>
>
>   

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32354-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 01 22:13:12 2008
Return-Path: <java-user-return-32354-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99727 invoked from network); 1 Feb 2008 22:13:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Feb 2008 22:13:11 -0000
Received: (qmail 6676 invoked by uid 500); 1 Feb 2008 22:12:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6645 invoked by uid 500); 1 Feb 2008 22:12:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6628 invoked by uid 99); 1 Feb 2008 22:12:56 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Feb 2008 14:12:56 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [130.107.64.135] (HELO Balboa.AI.SRI.COM) (130.107.64.135)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Feb 2008 22:12:28 +0000
Received: from Balboa.AI.SRI.COM (localhost [127.0.0.1])
	by Balboa.AI.SRI.COM (8.11.7p2+Sun/8.10.1) with SMTP id m11MCZ124609
	for <java-user@lucene.apache.org>; Fri, 1 Feb 2008 14:12:35 -0800 (PST)
Received: from Salt.AI.SRI.COM ([130.107.65.211])
 by Balboa.AI.SRI.COM (SMSSMTP 4.1.9.35) with SMTP id M2008020114123527441
 for <java-user@lucene.apache.org>; Fri, 01 Feb 2008 14:12:35 -0800
Received: from localhost.ai.sri.com
	([127.0.0.1] helo=[130.107.65.199] ident=root)
	by Salt.AI.SRI.COM with asmtp (Exim 3.35 #1 (Debian))
	id 1JL47f-0007q4-00
	for <java-user@lucene.apache.org>; Fri, 01 Feb 2008 14:12:35 -0800
Message-ID: <47A39953.7020606@ai.sri.com>
Date: Fri, 01 Feb 2008 14:12:35 -0800
From: Jay <yu@AI.SRI.COM>
User-Agent: Thunderbird 2.0.0.9 (Windows/20071031)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Reuse single document and fields
References: <47A2BF12.3000205@ai.sri.com> <3A7AAC32-F75C-4BD3-8F0A-BA584AF5134D@mikemccandless.com> <47A36A3C.4070907@ai.sri.com> <15BA9EF3-1DDF-4A0C-BE00-094FBF41D88D@mikemccandless.com>
In-Reply-To: <15BA9EF3-1DDF-4A0C-BE00-094FBF41D88D@mikemccandless.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

You are right, Lucene only gives IllegalArgumentException when the value 
is null. I assume it won't skip the field is the value is empty or null?

Thanks!

Jay

Michael McCandless wrote:
> 
> As far as I know, Lucene should accept a field with an empty string 
> value -- how did you hit the IllegalArgumentException?
> 
> Mike
> 
> Jay wrote:
> 
>> Thanks, Michael, for your quick reply and explanation.
>> One related question: is it true that Lucene indexer will reject a 
>> field  that has the empty string value? (I saw an 
>> IllegalArgumentException).
>> Will be nice if lucene just skip such a field silently, esp, for the 
>> new 2.3 api.
>>
>> Jay
>> Michael McCandless wrote:
>>> yu wrote:
>>>> Hi,
>>>>
>>>> I am trying to use the latest 2.3 API on  Field to improve the 
>>>> indexing performance by reusing Documents and  Fields. After reading 
>>>> lucene-java wiki and the java doc on Field, I have a couple of 
>>>> questions about the comment in Field.setValue(), namely,
>>>> "Note that you should only use this method after the Field has been 
>>>> consumed (ie, the Document  containing this Field has been added to 
>>>> the index)":
>>>>
>>>> 1. Does "consumed" here  include IndexWriter.deleteDocument(...) and 
>>>> IndexWriter.updateDocument(...)?
>>> Yes.  Actually, just add/updateDocument.
>>>> 2.  Why does it require that the  Field has been consumed first 
>>>> before it can be modified? For example, I may pre-allocate in a 
>>>> constructor  a Document and related fields with some default values 
>>>> but do not (or cannot) add the document. Before I add my first 
>>>> document, I need to set the fields with valid values.
>>>> It looks like the new Lucene core would null some of the fields if I 
>>>> do so.  I do not understand the logic behind the requirement.
>>> That use case is fine.  You can absolutely change its value before 
>>> it's consumed when the un-consumed value doesn't matter to you.  That 
>>> pre-allocation is a normal & fine use case, and fields should not be 
>>> null'd by Lucene.
>>> The warning should instead state that "if the field holds a real 
>>> value, then make sure it's consumed first before you change it".
>>> So, for example, if you add docs to a queue, and then use a thread 
>>> pool to pull docs from that queue and call addDocument on them, you 
>>> can't re-use the fields in the Document until a thread has added it 
>>> to the index.
>>> Mike
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32355-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 01 22:47:34 2008
Return-Path: <java-user-return-32355-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 13836 invoked from network); 1 Feb 2008 22:47:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Feb 2008 22:47:33 -0000
Received: (qmail 53627 invoked by uid 500); 1 Feb 2008 22:47:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53596 invoked by uid 500); 1 Feb 2008 22:47:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53585 invoked by uid 99); 1 Feb 2008 22:47:18 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Feb 2008 14:47:18 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of infinitelimittester@gmail.com designates 72.14.204.226 as permitted sender)
Received: from [72.14.204.226] (HELO qb-out-0506.google.com) (72.14.204.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Feb 2008 22:46:51 +0000
Received: by qb-out-0506.google.com with SMTP id o21so1113135qba.9
        for <java-user@lucene.apache.org>; Fri, 01 Feb 2008 14:46:58 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=0/uTM+y9noOfMwbYc7syubwADIBn+uPiqyrhgAJtL80=;
        b=ZbjHoY3ShLvFY+RR8McDHrGL3xcBz2CKdcfEHn0SCzgJ086Mtt8ALTE8/Ct10tp8IWV14ddNOXgKdb07SCeTK0TMx6LP6c+uE5zuzLw10/VzE0v29mY3nknsoxoL/tZLDm7nw/MtvQCpK0dJT7el3oqHSYuMolN4GvRHij7M5T8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=spXHTxSZh2J3J50GTusAVLUKe+AGgjQC/kogyuIX3frYnzDJCoqMvMVAHz93yqvR5+xIGOwLDDQlRR/TaDnYph2LXdZ4a5oKhKrHP2ke1K/E1jiSFLp5LNysdDwShmLZjFfOXZ4Qyh4VTskhmtnhGyEyBaLXqZICniJX/ZsOrBc=
Received: by 10.142.222.21 with SMTP id u21mr2610502wfg.231.1201906017322;
        Fri, 01 Feb 2008 14:46:57 -0800 (PST)
Received: by 10.142.86.4 with HTTP; Fri, 1 Feb 2008 14:46:57 -0800 (PST)
Message-ID: <32b760170802011446k6823d360l4956e3db9d4f3ce6@mail.gmail.com>
Date: Sat, 2 Feb 2008 04:16:57 +0530
From: "Infinite Tester" <infinitelimittester@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Concurrent Indexing + Searching
In-Reply-To: <47A39901.7040107@gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_30548_8718804.1201906017316"
References: <15234463.post@talk.nabble.com> <47A39901.7040107@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_30548_8718804.1201906017316
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Thanks Mark!

Option D looks great. Regarding that option,  I have couple of questions
based on my first glance at the code ( more specifically SimpleSearchServer
)

1) I should be calling release of writer and searcher after every call. Is
it always mandatory in cases like searcher, when I am sure that I havn't
written anything since the last search ?

2) Based on 1), is it okay to cache the instance of writer and Searcher
object locally ?

3) Are there any plans to push these to the trunk? Also, are there any
blocking/critical issues  before we can start using it in production ?


Thanks!



On Feb 2, 2008 3:41 AM, Mark Miller <markrmiller@gmail.com> wrote:

> You are not seeing the doc because you need to close the IndexWriter
> first.
>
> To have an interactive index you can:
>
> A: roll your own.
> B: use Solr.
> C: use the original LuceneIndexAccessor
> https://issues.apache.org/jira/browse/LUCENE-390
> D: use my updated IndexAccessor
> https://issues.apache.org/jira/browse/LUCENE-1026
>
> I have actually just added the ability to warm searchers before putting
> them into to use for option D, but i havn't gotten around to posting the
> new code yet.
>
>
> - Mark Miller
>
>
>
>
> codetester wrote:
> > Hi All,
> >
> > A newbie out here.... I am using lucene 2.3.0. I need to use lucene to
> > perform live searching and indexing. To achieve that, I tried the
> following
> >
> > FSDirectory directory = FSDirectory.getDirectory(location);
> > IndexReader reader = IndexReader.open(directory );
> > IndexWriter writer = new IndexWriter(directory , new SimpleAnalyzer(),
> > true); // <- I want to recreate the index every time
> > IndexSearcher searcher = new IndexSearcher( reader );
> >
> > For Searching, I have the following code
> > QueryParser queryParser = new QueryParser("xyz", new
> StandardAnalyzer());
> > Hits hits = searcher .search(queryParser.parse(displayName + "*"));
> >
> > And for adding records, I have the following code
> >  // Create doc object
> >  writer.addDocument(doc);
> >
> >  IndexReader newIndexReader = reader.reopen() ;
> >  if ( newIndexReader != reader ) {
> >        reader.close() ;
> >  }
> >  reader = newIndexReader ;
> >  searcher.close() ;
> >  searcher = new IndexSearcher(reader );
> >
> > So the issues that I face are
> >
> > 1) The addition of new record is not reflected in the search ( even
> though I
> > have reinited IndexSearcher )
> >
> > 2) Obviously, the add record code is not thread safe. I am trying to
> close
> > and update the reference to IndexSearcher object. I could add a sync
> block,
> > but the bigger question would be that what is the ideal way to achieve
> this
> > case where I need to add and search record real-time ?
> >
> > Thanks !
> >
> >
> >
> >
> >
>
>  ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_30548_8718804.1201906017316--

From java-user-return-32356-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 01 23:20:46 2008
Return-Path: <java-user-return-32356-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81465 invoked from network); 1 Feb 2008 23:20:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Feb 2008 23:20:46 -0000
Received: (qmail 87785 invoked by uid 500); 1 Feb 2008 23:20:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87754 invoked by uid 500); 1 Feb 2008 23:20:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87741 invoked by uid 99); 1 Feb 2008 23:20:31 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Feb 2008 15:20:31 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of markrmiller@gmail.com designates 64.233.166.177 as permitted sender)
Received: from [64.233.166.177] (HELO py-out-1112.google.com) (64.233.166.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Feb 2008 23:20:03 +0000
Received: by py-out-1112.google.com with SMTP id a73so1530334pye.9
        for <java-user@lucene.apache.org>; Fri, 01 Feb 2008 15:20:10 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        bh=ngmREi7bQlsbmaZQEZebr2nYBf395mzx8SuKh77FyP4=;
        b=uxY8FzF5aLh42nN72FvucmupTbsZo0Vy0+Y5s62u5ZvgC3xmnCL9KzAVSrals5RNVsR8MZxUgMo/yW345Kyj38lm8/FRh2DmNcygh6sz31mVxDpfM/5mBAKVEw3Vf7Gq5p23dyYeM5G6+88r+tvvIVzxYE3Qm3ihv23qjcvhSdA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=IA6hv821k2U1kwI+j4MGZYRHkZoxVif/rJX1n1yH9w0YVQHVv0raiywCDsV+pWtUt5hbgKGHmlqthqHNSefxD0UmV3OwkvALI/9SLTnbjHaS4Dy6iV4ro+9C5cT96vsm4FzRDH0zg9b06VkQ23bO/bzvc56ryGvNX7XUjygiwSk=
Received: by 10.65.234.2 with SMTP id l2mr6744607qbr.18.1201908009458;
        Fri, 01 Feb 2008 15:20:09 -0800 (PST)
Received: from ?192.168.1.118? ( [69.124.234.183])
        by mx.google.com with ESMTPS id q16sm6881104qbq.0.2008.02.01.15.20.08
        (version=SSLv3 cipher=RC4-MD5);
        Fri, 01 Feb 2008 15:20:08 -0800 (PST)
Message-ID: <47A3A904.4060002@gmail.com>
Date: Fri, 01 Feb 2008 18:19:32 -0500
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.9 (Windows/20071031)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Concurrent Indexing + Searching
References: <15234463.post@talk.nabble.com> <47A39901.7040107@gmail.com> <32b760170802011446k6823d360l4956e3db9d4f3ce6@mail.gmail.com>
In-Reply-To: <32b760170802011446k6823d360l4956e3db9d4f3ce6@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org


> 1) I should be calling release of writer and searcher after every call. Is
> it always mandatory in cases like searcher, when I am sure that I havn't
> written anything since the last search ?
>   
You have to be careful here. It works like this: a single searcher is 
cached and returned every time. Once all references to the cached Writer 
are returned, all of the cached Searchers (one per Similarity your 
using) are reopened -- but only after all the Searcher references are 
returned. So you must return the Searcher as soon as you are done with 
the search...otherwise when you return the last reference to the cached 
Writer it will wait around until you do return that Searcher. Use it and 
return it as quick as you can. The cost is very small, its just a 
reference count decrement to release. You do have to pay the sync cost, 
but thats the cost of sharing resources across threads. Test for speed 
if your worried...its beyond anything I have needed.

Be careful with the Writer -- you want to return it fairly often as 
well, but you will will want to batch load if you are adding a lot of 
docs at once. Get the Writer, add all the docs, release the Writer. But 
keep in mind that you won't see the added docs until the # of threads 
referencing the Writer hits 0 -- you might want to release it every 50 
docs or something (arbitrary there). If your just updating a doc or 
adding a doc randomly, get it, update/add, release it.

Always release the Writers and Searchers in a finally block to ensure 
they get released regardless of exceptions.
> 2) Based on 1), is it okay to cache the instance of writer and Searcher
> object locally ?
>   
I wouldn't, but you can. You will hold things up though...everything 
works based on them getting released. The IndexAccessor code properly 
caches them for you. That one of its main goals...properly caching 
Writers/Searchers and reopening Searchers when a Writer has made a 
change. If you hold a Searcher out, when a Writer is released by the 
last thread that had a reference to it, the thread that released the 
Writer will be hung up waiting around for that Searcher to get released. 
You wouldnt want this to be a long time.
> 3) Are there any plans to push these to the trunk? Also, are there any
> blocking/critical issues  before we can start using it in production ?
>   
Its doubtful. The original code has been around for years and has yet to 
see any trunk excitement. I think the commiters prefer to keep this type 
of thing out of the core and generally prefer Solr. I think that since 
many of the committers work on/use Solr, there hasn't been much 
incentive for them to use LuceneIndexAccessor. Who knows really though. 
I only know that I have no say in the matter <g>

No blocking or critical issues that I know of. This is based on work I 
did over a year ago (based on the original LuceneIndexAcessor code of 
course), and while its not the same code, I have been using that code at 
6 24/7 sites for about a year now on index sizes ranging from 200,000 to 
3 million article sized documents. I did this based on my experience 
with that.

This is the code that I plan to use for any future projects, so feel 
free to email me with any questions or suggestions. I have had a great 
experience with this model of operating an interactive, multi-threaded, 
Lucene index. I'll be on any bugs like white on rice <g> I am very 
confident in the code though. Feel free to extend the test classes if 
you are worried about anything in particular.

- Mark
>
> Thanks!
>
>
>
> On Feb 2, 2008 3:41 AM, Mark Miller <markrmiller@gmail.com> wrote:
>
>   
>> You are not seeing the doc because you need to close the IndexWriter
>> first.
>>
>> To have an interactive index you can:
>>
>> A: roll your own.
>> B: use Solr.
>> C: use the original LuceneIndexAccessor
>> https://issues.apache.org/jira/browse/LUCENE-390
>> D: use my updated IndexAccessor
>> https://issues.apache.org/jira/browse/LUCENE-1026
>>
>> I have actually just added the ability to warm searchers before putting
>> them into to use for option D, but i havn't gotten around to posting the
>> new code yet.
>>
>>
>> - Mark Miller
>>
>>
>>
>>
>> codetester wrote:
>>     
>>> Hi All,
>>>
>>> A newbie out here.... I am using lucene 2.3.0. I need to use lucene to
>>> perform live searching and indexing. To achieve that, I tried the
>>>       
>> following
>>     
>>> FSDirectory directory = FSDirectory.getDirectory(location);
>>> IndexReader reader = IndexReader.open(directory );
>>> IndexWriter writer = new IndexWriter(directory , new SimpleAnalyzer(),
>>> true); // <- I want to recreate the index every time
>>> IndexSearcher searcher = new IndexSearcher( reader );
>>>
>>> For Searching, I have the following code
>>> QueryParser queryParser = new QueryParser("xyz", new
>>>       
>> StandardAnalyzer());
>>     
>>> Hits hits = searcher .search(queryParser.parse(displayName + "*"));
>>>
>>> And for adding records, I have the following code
>>>  // Create doc object
>>>  writer.addDocument(doc);
>>>
>>>  IndexReader newIndexReader = reader.reopen() ;
>>>  if ( newIndexReader != reader ) {
>>>        reader.close() ;
>>>  }
>>>  reader = newIndexReader ;
>>>  searcher.close() ;
>>>  searcher = new IndexSearcher(reader );
>>>
>>> So the issues that I face are
>>>
>>> 1) The addition of new record is not reflected in the search ( even
>>>       
>> though I
>>     
>>> have reinited IndexSearcher )
>>>
>>> 2) Obviously, the add record code is not thread safe. I am trying to
>>>       
>> close
>>     
>>> and update the reference to IndexSearcher object. I could add a sync
>>>       
>> block,
>>     
>>> but the bigger question would be that what is the ideal way to achieve
>>>       
>> this
>>     
>>> case where I need to add and search record real-time ?
>>>
>>> Thanks !
>>>
>>>
>>>
>>>
>>>
>>>       
>>  ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>     
>
>   

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32357-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Feb 02 00:29:34 2008
Return-Path: <java-user-return-32357-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10101 invoked from network); 2 Feb 2008 00:29:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Feb 2008 00:29:34 -0000
Received: (qmail 75677 invoked by uid 500); 2 Feb 2008 00:29:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75645 invoked by uid 500); 2 Feb 2008 00:29:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75628 invoked by uid 99); 2 Feb 2008 00:29:19 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Feb 2008 16:29:19 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [72.14.204.224] (HELO qb-out-0506.google.com) (72.14.204.224)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 02 Feb 2008 00:28:51 +0000
Received: by qb-out-0506.google.com with SMTP id o21so1146070qba.9
        for <java-user@lucene.apache.org>; Fri, 01 Feb 2008 16:28:57 -0800 (PST)
Received: by 10.114.73.1 with SMTP id v1mr4750716waa.16.1201912136778;
        Fri, 01 Feb 2008 16:28:56 -0800 (PST)
Received: from ?10.17.4.4? ( [71.174.108.74])
        by mx.google.com with ESMTPS id g5sm7069921wra.36.2008.02.01.16.28.56
        (version=TLSv1/SSLv3 cipher=OTHER);
        Fri, 01 Feb 2008 16:28:56 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v753)
In-Reply-To: <47A39953.7020606@ai.sri.com>
References: <47A2BF12.3000205@ai.sri.com> <3A7AAC32-F75C-4BD3-8F0A-BA584AF5134D@mikemccandless.com> <47A36A3C.4070907@ai.sri.com> <15BA9EF3-1DDF-4A0C-BE00-094FBF41D88D@mikemccandless.com> <47A39953.7020606@ai.sri.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <73FE4287-4981-4233-965B-AFD4F76A7DB1@mikemccandless.com>
Content-Transfer-Encoding: 7bit
From: Michael McCandless <lucene@mikemccandless.com>
Subject: Re: Reuse single document and fields
Date: Fri, 1 Feb 2008 19:29:31 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.753)
X-Virus-Checked: Checked by ClamAV on apache.org


Right, the value in a Field cannot be null.

Mike

Jay wrote:

> You are right, Lucene only gives IllegalArgumentException when the  
> value is null. I assume it won't skip the field is the value is  
> empty or null?
>
> Thanks!
>
> Jay
>
> Michael McCandless wrote:
>> As far as I know, Lucene should accept a field with an empty  
>> string value -- how did you hit the IllegalArgumentException?
>> Mike
>> Jay wrote:
>>> Thanks, Michael, for your quick reply and explanation.
>>> One related question: is it true that Lucene indexer will reject  
>>> a field  that has the empty string value? (I saw an  
>>> IllegalArgumentException).
>>> Will be nice if lucene just skip such a field silently, esp, for  
>>> the new 2.3 api.
>>>
>>> Jay
>>> Michael McCandless wrote:
>>>> yu wrote:
>>>>> Hi,
>>>>>
>>>>> I am trying to use the latest 2.3 API on  Field to improve the  
>>>>> indexing performance by reusing Documents and  Fields. After  
>>>>> reading lucene-java wiki and the java doc on Field, I have a  
>>>>> couple of questions about the comment in Field.setValue(), namely,
>>>>> "Note that you should only use this method after the Field has  
>>>>> been consumed (ie, the Document  containing this Field has been  
>>>>> added to the index)":
>>>>>
>>>>> 1. Does "consumed" here  include IndexWriter.deleteDocument 
>>>>> (...) and IndexWriter.updateDocument(...)?
>>>> Yes.  Actually, just add/updateDocument.
>>>>> 2.  Why does it require that the  Field has been consumed first  
>>>>> before it can be modified? For example, I may pre-allocate in a  
>>>>> constructor  a Document and related fields with some default  
>>>>> values but do not (or cannot) add the document. Before I add my  
>>>>> first document, I need to set the fields with valid values.
>>>>> It looks like the new Lucene core would null some of the fields  
>>>>> if I do so.  I do not understand the logic behind the requirement.
>>>> That use case is fine.  You can absolutely change its value  
>>>> before it's consumed when the un-consumed value doesn't matter  
>>>> to you.  That pre-allocation is a normal & fine use case, and  
>>>> fields should not be null'd by Lucene.
>>>> The warning should instead state that "if the field holds a real  
>>>> value, then make sure it's consumed first before you change it".
>>>> So, for example, if you add docs to a queue, and then use a  
>>>> thread pool to pull docs from that queue and call addDocument on  
>>>> them, you can't re-use the fields in the Document until a thread  
>>>> has added it to the index.
>>>> Mike
>>>> ------------------------------------------------------------------- 
>>>> --
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>> -------------------------------------------------------------------- 
>>> -
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32358-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Feb 03 03:54:09 2008
Return-Path: <java-user-return-32358-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48870 invoked from network); 3 Feb 2008 03:54:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Feb 2008 03:54:09 -0000
Received: (qmail 67488 invoked by uid 500); 3 Feb 2008 03:53:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67330 invoked by uid 500); 3 Feb 2008 03:53:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 47716 invoked by uid 99); 30 Jan 2008 18:43:27 -0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of dipsykapoor@gmail.com designates 64.233.170.189 as permitted sender)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        bh=lLlJgmr6Ur20mUybbcXGQ5FWyvKHlfSzuMwQAhc+6mU=;
        b=BEJhAD9CQn49Hf68+qyIwJII20xr9mkScVXFz5rV/U0Mqhh/KzraLeubI0iOgB4k1fsAoRM3JkhggtgBuSpBVhxNb1Bfe3kdj/72qdlrVMSB0zGZjDPaTRcQuPqbr9jC+l34SxN7gWED15d0kz7PwmHDnsUynewythgT5ausuoY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=Nvlo5sNuKhGuS6i69e5Re2UOAhRvwkdIaJgxP2hV8YPLT5dJppIByQs3KW99Y2XzzRiXKJI6FGoqgiCqpB9qfiVOK1upgZ1SXnBsp+uOm9EBkMY62GrRSt2G1xidGZ96opawZQEHzggJHxx5SL+wLi+llk1BaZ5wuHFWbVJlWV4=
Message-ID: <42861c9a0801301043h4a249b12h87f05cd93b7885a1@mail.gmail.com>
Date: Wed, 30 Jan 2008 10:43:06 -0800
From: "Dipsy Kapoor" <dipsykapoor@gmail.com>
To: java-user@lucene.apache.org
Subject: Retrieving documents that match atleast n query terms
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

I am using a BooleanQuery of the form:
   T1 OR T2 OR T3 OR ...... Tn
to search on a  field in Lucene.

Is there a way to force the search to return documents that match at
least say 5 of the query Terms?

Thanks,
Dipsy Kapoor

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32359-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Feb 03 03:54:19 2008
Return-Path: <java-user-return-32359-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48967 invoked from network); 3 Feb 2008 03:54:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Feb 2008 03:54:19 -0000
Received: (qmail 68247 invoked by uid 500); 3 Feb 2008 03:53:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68210 invoked by uid 500); 3 Feb 2008 03:53:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68187 invoked by uid 99); 3 Feb 2008 03:53:56 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 02 Feb 2008 19:53:56 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 03 Feb 2008 03:53:27 +0000
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 4E8A530EFC2E; Sat,  2 Feb 2008 20:53:34 -0700 (MST)
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on javelina
X-Spam-Level: 
Received: from [10.0.1.198] (va-71-53-211-181.dyn.embarqhsd.net [71.53.211.181])
	by ehatchersolutions.com (Postfix) with ESMTP id 7694230EFC18
	for <java-user@lucene.apache.org>; Sat,  2 Feb 2008 20:53:25 -0700 (MST)
Mime-Version: 1.0 (Apple Message framework v753)
In-Reply-To: <8837fb770801301642q23e2cc74vca270efe5c9ef9fd@mail.gmail.com>
References: <8837fb770801301642q23e2cc74vca270efe5c9ef9fd@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <97FBC0F1-0715-4B5F-95B3-F64FED60F661@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: appending field to an existing index
Date: Wed, 30 Jan 2008 23:19:44 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.753)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-0.5 required=5.0 tests=AWL,BAYES_00,
	DATE_IN_PAST_48_96,RCVD_IN_SORBS_DUL autolearn=no version=3.1.1

One option is to index the new field in sync (same index order) into  
a new index, and search using a ParallelIndexReader.

	Erik


On Jan 30, 2008, at 7:42 PM, John Wang wrote:

> Hi all:
>
>     We have a large index and it is difficult to reindex.
>
>     We want to add another field to the index without reindexing,  
> e.g. just
> create a new inverted index, dictionary files etc.
>
>     How feasible is it to add this to lucene?
>
>
> Thanks
>
> -John


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32360-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Feb 03 16:45:22 2008
Return-Path: <java-user-return-32360-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22291 invoked from network); 3 Feb 2008 16:45:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Feb 2008 16:45:22 -0000
Received: (qmail 7969 invoked by uid 500); 3 Feb 2008 16:45:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6936 invoked by uid 500); 3 Feb 2008 16:45:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6925 invoked by uid 99); 3 Feb 2008 16:45:06 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 03 Feb 2008 08:45:06 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 03 Feb 2008 16:44:37 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1JLhxU-0001Lx-7K
	for java-user@lucene.apache.org; Sun, 03 Feb 2008 08:44:44 -0800
Message-ID: <15255268.post@talk.nabble.com>
Date: Sun, 3 Feb 2008 08:44:44 -0800 (PST)
From: ajay_garg <garg.jeena.isi.ka.naam.hai@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Query in Lucene 2.3.0
In-Reply-To: <2B85971E-5500-415A-8121-46C740AC10E2@mikemccandless.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: garg.jeena.isi.ka.naam.hai@gmail.com
References: <15175141.post@talk.nabble.com> <B34CBCE4-24B0-4CB7-BC78-F926D9E15D67@mikemccandless.com> <15197794.post@talk.nabble.com> <c68e39170801302056p7c21d3akbb372d35bae12b32@mail.gmail.com> <15198783.post@talk.nabble.com> <96AD48A6-1B37-475D-8D0B-50610240AEBF@mikemccandless.com> <15221338.post@talk.nabble.com> <2B85971E-5500-415A-8121-46C740AC10E2@mikemccandless.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Thanks again Mike. 
In fact, I have just finished going throught the CHANGE.TXT file, that
mentions the entire journey details of Lucene, right from 1.4 to 2.3. And of
course, got to know many more things.

Just a couple of issues more.

Firstly, in the 2.3 optimizations, point 4 says ::
" 4. LUCENE-959: Remove synchronization in Document (yonik)".

Well, what does that mean, since it has already been assured that multiple
adds, deletes, updates CAN be done by multiple threads on a single
IndexWriter instance.



Secondly, this multiple-threads-doing-simultaneous-adds-deletes-modifies
works for me in 2.3; moreover, the source code has also confirmed this ( in
the IndexWriter.java file). However, does this hold true to prior 2.3
versions also ( I see that you state that multiple threads using same
instances has "always" been fine, but just want to confirm it once again, as
to exactly from when on .. ).

Sorry, if I sound a little too demanding, but the fact is that I have just
completed my multi-threader project using 2.3.0 jar after a lot of
head-banging, and wish to know, that will everthing go well prior to 2.3.0,
as far as
multiple-threads-involved-in-multiple-simultaneous-adds/deletes/modofies-on-a-single-indexwriter-instance
is concerned.

Thanks
Ajay Garg

Michael McCandless-2 wrote:
> 
> 
> The write.lock has always been to prevent multiple instances of  
> IndexWriter (or, IndexReader doing deletes) from operating on the  
> same index at a time.
> 
> Many threads sharing a single instance of these classes has always  
> been fine.
> 
> Mike
> 
> ajay_garg wrote:
> 
>>
>> @Mike.
>>
>> Thanks for the reply. But I had thought that write.lock is there to  
>> prevent
>> multiple additions/updates/deleteDocuments.
>>
>> Has there been a change recently in this regard ?
>>
>> Thanks
>> Ajay Garg
>>
>>
>>
>> Michael McCandless-2 wrote:
>>>
>>>
>>> That's right.
>>>
>>> Each thread can enter IndexWriter.add/update/deleteDocument(s) in
>>> parallel.  There are some parts inside IndexWriter that are
>>> synchronized but they are kept to a minimum to keep good thread
>>> concurrency.  As you add threads it's best to increase the RAM buffer
>>> at the same time to get better performance.
>>>
>>> Mike
>>>
>>> ajay_garg wrote:
>>>
>>>>
>>>> @Yonik
>>>>
>>>> So you mean to say, that if two threads have the same instance of an
>>>> IndexWriter passed to both of them, and both these threads run on  
>>>> two
>>>> different CPUs, then they can write to the index at the same time ?
>>>>
>>>>
>>>>
>>>> Yonik Seeley wrote:
>>>>>
>>>>> On Jan 30, 2008 10:59 PM, ajay_garg
>>>>> <garg.jeena.isi.ka.naam.hai@gmail.com> wrote:
>>>>>>
>>>>>> Thanks Mike for your directions.
>>>>>>
>>>>>> Yes, I am in fact using a single computer for my application, and
>>>>>> your
>>>>>> saying that in this case, multiple threads with a single
>>>>>> IndexWriter wll
>>>>>> give a better performance. Hmmm. I just wonder that since each
>>>>>> IndexWriter
>>>>>> has a single write.lock, this means that sitting on the CPU, we
>>>>>> observe
>>>>>> that
>>>>>> at a particular instant, only a single thread is using the CPU,
>>>>>
>>>>> The write.lock is to protect against other IndexWriter instances,
>>>>> *not* against other threads.
>>>>> Using multiple threads on a single IndexWriter should utilize
>>>>> multiple
>>>>> CPUs.
>>>>>
>>>>> -Yonik
>>>>>
>>>>> ------------------------------------------------------------------- 
>>>>> --
>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>
>>>>>
>>>>>
>>>>
>>>> -- 
>>>> View this message in context: http://www.nabble.com/Query-in-
>>>> Lucene-2.3.0-tp15175141p15198783.html
>>>> Sent from the Lucene - Java Users mailing list archive at  
>>>> Nabble.com.
>>>>
>>>>
>>>> -------------------------------------------------------------------- 
>>>> -
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>>
>>
>> -- 
>> View this message in context: http://www.nabble.com/Query-in- 
>> Lucene-2.3.0-tp15175141p15221338.html
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>
>>
>> ------------------------------------------------------------
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/Query-in-Lucene-2.3.0-tp15175141p15255268.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32361-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Feb 03 16:54:53 2008
Return-Path: <java-user-return-32361-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26355 invoked from network); 3 Feb 2008 16:54:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Feb 2008 16:54:53 -0000
Received: (qmail 15181 invoked by uid 500); 3 Feb 2008 16:54:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15143 invoked by uid 500); 3 Feb 2008 16:54:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15132 invoked by uid 99); 3 Feb 2008 16:54:38 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 03 Feb 2008 08:54:38 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 03 Feb 2008 16:54:23 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1JLi6i-0001dr-41
	for java-user@lucene.apache.org; Sun, 03 Feb 2008 08:54:16 -0800
Message-ID: <15255394.post@talk.nabble.com>
Date: Sun, 3 Feb 2008 08:54:16 -0800 (PST)
From: ajay_garg <garg.jeena.isi.ka.naam.hai@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Concurrent Indexing + Searching
In-Reply-To: <15234463.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: garg.jeena.isi.ka.naam.hai@gmail.com
References: <15234463.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Hi. Sorry if I seem a stranger in this thread, but there is something that I
can't resist clearing myself on.

Mark, you say that the additional documents added to a index, won't show up
until the # of threads accessing the index hits 0; and subsequently the
indexwriter instance is closed.

But I suppose that the autocommit=true, asserts that all flushed (Added)
documents are immediately committed ( and hence visible ) in the index, and
no explicit cclosing ( releasiing ) of the Indexwriter instance is required.
( Of course, re-opening an IndexSearcher instance is required ).

Am I being dumb ?

Looking eagerly for you to shed some light on my doubt.

Thanks
Ajay Garg


codetester wrote:
> 
> Hi All,
> 
> A newbie out here.... I am using lucene 2.3.0. I need to use lucene to
> perform live searching and indexing. To achieve that, I tried the
> following
> 
> FSDirectory directory = FSDirectory.getDirectory(location);
> IndexReader reader = IndexReader.open(directory );
> IndexWriter writer = new IndexWriter(directory , new SimpleAnalyzer(),
> true); // <- I want to recreate the index every time
> IndexSearcher searcher = new IndexSearcher( reader );
> 
> For Searching, I have the following code
> QueryParser queryParser = new QueryParser("xyz", new StandardAnalyzer());
> Hits hits = searcher .search(queryParser.parse(displayName + "*"));
> 
> And for adding records, I have the following code
>  // Create doc object
>  writer.addDocument(doc);
> 
>  IndexReader newIndexReader = reader.reopen() ;
>  if ( newIndexReader != reader ) {
>        reader.close() ;
>  }
>  reader = newIndexReader ;
>  searcher.close() ;
>  searcher = new IndexSearcher(reader );
>         
> So the issues that I face are 
> 
> 1) The addition of new record is not reflected in the search ( even though
> I have reinited IndexSearcher )
> 
> 2) Obviously, the add record code is not thread safe. I am trying to close
> and update the reference to IndexSearcher object. I could add a sync
> block, but the bigger question would be that what is the ideal way to
> achieve this case where I need to add and search record real-time ? 
> 
> Thanks !
> 
> 
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/Concurrent-Indexing-%2B-Searching-tp15234463p15255394.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32362-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Feb 03 16:58:39 2008
Return-Path: <java-user-return-32362-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 27839 invoked from network); 3 Feb 2008 16:58:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Feb 2008 16:58:38 -0000
Received: (qmail 22146 invoked by uid 500); 3 Feb 2008 16:58:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22113 invoked by uid 500); 3 Feb 2008 16:58:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 22102 invoked by uid 99); 3 Feb 2008 16:58:24 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 03 Feb 2008 08:58:24 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of yseeley@gmail.com designates 64.233.178.240 as permitted sender)
Received: from [64.233.178.240] (HELO hs-out-2122.google.com) (64.233.178.240)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 03 Feb 2008 16:57:56 +0000
Received: by hs-out-2122.google.com with SMTP id 54so1637711hsz.5
        for <java-user@lucene.apache.org>; Sun, 03 Feb 2008 08:58:00 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        bh=VLllfbGf1QqvUUkhoCDokegMl570Je7hsjo87oS40gY=;
        b=T2AOT+qqAllbZ9DnJwj3/k2NEbMe7Lh7qlCTSJ8N5ZeT5RqfEP1TQiXa1Nn/eEotTMHv/FoI3XfepGAr7Y4DcOco+glLBjKw56tginzcGrkETk4K0AUFQiyZKG/72xWD8+Ii9XDw7B61t0k04WcCw8ToDhUFUsC8u8P2LoabSZY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=lhHlPJq4rvM9+5Z3borrkhswoDBu1S8lz68AVb2tUMFnpWgg96SCWfGwK+2UklZ1uy5r+5GrX/D77CEh2PHQefjGELLUZsctoJ52Cmx/Kz6Dzr48tjb9nPqpalzWR3bYg2KR7J9oin37XLleGlbt82zTA+rE20hI+yHxuPKQ56w=
Received: by 10.142.97.20 with SMTP id u20mr2978666wfb.203.1202057879055;
        Sun, 03 Feb 2008 08:57:59 -0800 (PST)
Received: by 10.143.119.5 with HTTP; Sun, 3 Feb 2008 08:57:58 -0800 (PST)
Message-ID: <c68e39170802030857s5dbef7dq35f773c3e7124988@mail.gmail.com>
Date: Sun, 3 Feb 2008 11:57:59 -0500
From: "Yonik Seeley" <yonik@apache.org>
Sender: yseeley@gmail.com
To: java-user@lucene.apache.org
Subject: Re: Query in Lucene 2.3.0
In-Reply-To: <15255268.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <15175141.post@talk.nabble.com>
	 <B34CBCE4-24B0-4CB7-BC78-F926D9E15D67@mikemccandless.com>
	 <15197794.post@talk.nabble.com>
	 <c68e39170801302056p7c21d3akbb372d35bae12b32@mail.gmail.com>
	 <15198783.post@talk.nabble.com>
	 <96AD48A6-1B37-475D-8D0B-50610240AEBF@mikemccandless.com>
	 <15221338.post@talk.nabble.com>
	 <2B85971E-5500-415A-8121-46C740AC10E2@mikemccandless.com>
	 <15255268.post@talk.nabble.com>
X-Google-Sender-Auth: 190a4a2666115946
X-Virus-Checked: Checked by ClamAV on apache.org

On Feb 3, 2008 11:44 AM, ajay_garg <garg.jeena.isi.ka.naam.hai@gmail.com> wrote:
> Firstly, in the 2.3 optimizations, point 4 says ::
> " 4. LUCENE-959: Remove synchronization in Document (yonik)".
>
> Well, what does that mean, since it has already been assured that multiple
> adds, deletes, updates CAN be done by multiple threads on a single
> IndexWriter instance.

That was simply changing the list of fields in a single Document from
Vector to ArrayList (after all, who uses multiple threads to construct
a single document?)

> Secondly, this multiple-threads-doing-simultaneous-adds-deletes-modifies
> works for me in 2.3; moreover, the source code has also confirmed this ( in
> the IndexWriter.java file). However, does this hold true to prior 2.3
> versions also ( I see that you state that multiple threads using same
> instances has "always" been fine, but just want to confirm it once again, as
> to exactly from when on .. ).

Yes, it has always been fine to add multiple documents to a single
IndexWriter via multiple threads (at least back to 1.4 when I started
hacking on Lucene).

-Yonik

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32363-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Feb 03 18:09:09 2008
Return-Path: <java-user-return-32363-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44610 invoked from network); 3 Feb 2008 18:09:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Feb 2008 18:09:08 -0000
Received: (qmail 72578 invoked by uid 500); 3 Feb 2008 18:08:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72543 invoked by uid 500); 3 Feb 2008 18:08:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72532 invoked by uid 99); 3 Feb 2008 18:08:54 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 03 Feb 2008 10:08:54 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of markrmiller@gmail.com designates 72.14.220.155 as permitted sender)
Received: from [72.14.220.155] (HELO fg-out-1718.google.com) (72.14.220.155)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 03 Feb 2008 18:08:26 +0000
Received: by fg-out-1718.google.com with SMTP id d23so2241576fga.27
        for <java-user@lucene.apache.org>; Sun, 03 Feb 2008 10:08:28 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        bh=C5gPPD3EhJGAP7eXhE+8c+wbsp2NdzV7b5KhTIFE+a0=;
        b=hltNAXQymPzXhFswX7F/svkBovqXC+npnPQIAqGreDRFfyXV8V/X87/F6hld2cuGmtTOImYQX2vAshooRYSYUUl4bHRw7GPYoDRQbdouM58Hxfx8D02xnkFaTQaIaiwc/r6q1Zwy4Be/8Pq7I6DbMkl1MT7TCvWzJzyfG9EJbRA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=gWGor+JZLhVw5CgtRoETzqq34XGPTQcHGejC4rrEGej1qi+s/l5zhj/ep78IrwmjpwLbDxhawulO4s/m+07zuRUCcPgqV7PB4mzTK+tbTz7TRVEHxO9veza7zyuIvxRsqESs6xuia4W5g721BxWtglu7lq7Sr4flmf3KaIF99rs=
Received: by 10.82.172.10 with SMTP id u10mr11264458bue.14.1202062108147;
        Sun, 03 Feb 2008 10:08:28 -0800 (PST)
Received: from ?192.168.1.118? ( [216.66.119.110])
        by mx.google.com with ESMTPS id u14sm5018841gvf.1.2008.02.03.10.08.25
        (version=SSLv3 cipher=RC4-MD5);
        Sun, 03 Feb 2008 10:08:27 -0800 (PST)
Message-ID: <47A60308.4040300@gmail.com>
Date: Sun, 03 Feb 2008 13:08:08 -0500
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.9 (Windows/20071031)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Concurrent Indexing + Searching
References: <15234463.post@talk.nabble.com> <15255394.post@talk.nabble.com>
In-Reply-To: <15255394.post@talk.nabble.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

You are correct that autocommit=false means that docs will be in the 
index before the last thread releases its concurrent hold on a Writer, 
*but because IndexAccessor controls* *when the IndexSearchers are 
reopened*, those docs will still not be visible until the last thread 
holding a Writer releases it...that is when the reopening of Searchers 
occurs as well as when the Writer is closed.

- Mark

ajay_garg wrote:
> Hi. Sorry if I seem a stranger in this thread, but there is something that I
> can't resist clearing myself on.
>
> Mark, you say that the additional documents added to a index, won't show up
> until the # of threads accessing the index hits 0; and subsequently the
> indexwriter instance is closed.
>
> But I suppose that the autocommit=true, asserts that all flushed (Added)
> documents are immediately committed ( and hence visible ) in the index, and
> no explicit cclosing ( releasiing ) of the Indexwriter instance is required.
> ( Of course, re-opening an IndexSearcher instance is required ).
>
> Am I being dumb ?
>
> Looking eagerly for you to shed some light on my doubt.
>
> Thanks
> Ajay Garg
>
>
> codetester wrote:
>   
>> Hi All,
>>
>> A newbie out here.... I am using lucene 2.3.0. I need to use lucene to
>> perform live searching and indexing. To achieve that, I tried the
>> following
>>
>> FSDirectory directory = FSDirectory.getDirectory(location);
>> IndexReader reader = IndexReader.open(directory );
>> IndexWriter writer = new IndexWriter(directory , new SimpleAnalyzer(),
>> true); // <- I want to recreate the index every time
>> IndexSearcher searcher = new IndexSearcher( reader );
>>
>> For Searching, I have the following code
>> QueryParser queryParser = new QueryParser("xyz", new StandardAnalyzer());
>> Hits hits = searcher .search(queryParser.parse(displayName + "*"));
>>
>> And for adding records, I have the following code
>>  // Create doc object
>>  writer.addDocument(doc);
>>
>>  IndexReader newIndexReader = reader.reopen() ;
>>  if ( newIndexReader != reader ) {
>>        reader.close() ;
>>  }
>>  reader = newIndexReader ;
>>  searcher.close() ;
>>  searcher = new IndexSearcher(reader );
>>         
>> So the issues that I face are 
>>
>> 1) The addition of new record is not reflected in the search ( even though
>> I have reinited IndexSearcher )
>>
>> 2) Obviously, the add record code is not thread safe. I am trying to close
>> and update the reference to IndexSearcher object. I could add a sync
>> block, but the bigger question would be that what is the ideal way to
>> achieve this case where I need to add and search record real-time ? 
>>
>> Thanks !
>>
>>
>>
>>
>>
>>     
>
>   

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32364-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Feb 03 19:58:06 2008
Return-Path: <java-user-return-32364-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71942 invoked from network); 3 Feb 2008 19:58:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Feb 2008 19:58:06 -0000
Received: (qmail 65350 invoked by uid 500); 3 Feb 2008 19:57:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65322 invoked by uid 500); 3 Feb 2008 19:57:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65311 invoked by uid 99); 3 Feb 2008 19:57:52 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 03 Feb 2008 11:57:52 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of jake.mannix@gmail.com designates 209.85.132.244 as permitted sender)
Received: from [209.85.132.244] (HELO an-out-0708.google.com) (209.85.132.244)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 03 Feb 2008 19:57:24 +0000
Received: by an-out-0708.google.com with SMTP id c5so454322anc.49
        for <java-user@lucene.apache.org>; Sun, 03 Feb 2008 11:57:28 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        bh=1cntO/dKduvn/J9iBWuIJXkYwnHR61SzpGJMonb01L0=;
        b=fOfiu/hNgBjngNYaFKksAEJ7UfTg2OtPrM418vtNG0VuJYhHGW3fqOgE2RthKujr1KXbd69JBngUKFmJHk+JOwOdrsHNPhkUvUZ1h/msbpceKWYaDKqwawSjaUkwcgVu7nqYiCAFJETIKfG5zQZU5rIbAw36eLYj+OFdU6R2+mQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=eQunPZ8J4XDFKVyDF4eROaxuZOYmK9ap5eJM2VTu2TqRp97xORavQswOlHraGfuudoVQJMas6HhdnYkBZkkApaZCY9pSboe1t6rCoHSioNYzRqeBUywKQhOo9LaTC8Dc9o1YHrPA9tDWaPFcxR5gsgxyxGsMdbPycDE0QV7BQhk=
Received: by 10.100.127.18 with SMTP id z18mr13257158anc.39.1202068648670;
        Sun, 03 Feb 2008 11:57:28 -0800 (PST)
Received: by 10.100.43.15 with HTTP; Sun, 3 Feb 2008 11:57:28 -0800 (PST)
Message-ID: <4b124c310802031157l2e7790b9oe1608beb6c5a6dd6@mail.gmail.com>
Date: Sun, 3 Feb 2008 11:57:28 -0800
From: "Jake Mannix" <jake.mannix@gmail.com>
To: java-user@lucene.apache.org, te@statsbiblioteket.dk
Subject: Indexing Speed: 2.3 vs 2.2 (real world numbers)
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_2404_4279192.1202068648663"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_2404_4279192.1202068648663
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hello all,
  I know you lucene devs did a lot of work on indexing performance in 2.3,
and I just tested it out last thursday, so I thought I'd let you know how it
fared:

  On a 2.17 million document index, a recent test gave indexing time to be:

    * lucene 2.2: 4.83 hours
    * lucene 2.3: 26 minutes

  About a factor of 11 speedup.  Holy smokes!  Great work folks.


  -jake

------=_Part_2404_4279192.1202068648663--

From java-user-return-32365-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Feb 03 22:11:34 2008
Return-Path: <java-user-return-32365-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3630 invoked from network); 3 Feb 2008 22:11:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Feb 2008 22:11:34 -0000
Received: (qmail 34733 invoked by uid 500); 3 Feb 2008 22:11:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34709 invoked by uid 500); 3 Feb 2008 22:11:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34698 invoked by uid 99); 3 Feb 2008 22:11:19 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 03 Feb 2008 14:11:19 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.132.241] (HELO an-out-0708.google.com) (209.85.132.241)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 03 Feb 2008 22:10:50 +0000
Received: by an-out-0708.google.com with SMTP id c5so461873anc.49
        for <java-user@lucene.apache.org>; Sun, 03 Feb 2008 14:10:55 -0800 (PST)
Received: by 10.100.139.20 with SMTP id m20mr13437680and.102.1202076655858;
        Sun, 03 Feb 2008 14:10:55 -0800 (PST)
Received: from ?10.17.4.4? ( [71.174.108.74])
        by mx.google.com with ESMTPS id b37sm11211957ana.23.2008.02.03.14.10.55
        (version=TLSv1/SSLv3 cipher=OTHER);
        Sun, 03 Feb 2008 14:10:55 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v753)
In-Reply-To: <4b124c310802031157l2e7790b9oe1608beb6c5a6dd6@mail.gmail.com>
References: <4b124c310802031157l2e7790b9oe1608beb6c5a6dd6@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <E142FB18-3A38-489F-90AA-BB6F0AB2C9B7@mikemccandless.com>
Content-Transfer-Encoding: 7bit
From: Michael McCandless <lucene@mikemccandless.com>
Subject: Re: Indexing Speed: 2.3 vs 2.2 (real world numbers)
Date: Sun, 3 Feb 2008 17:11:30 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.753)
X-Virus-Checked: Checked by ClamAV on apache.org


Awesome!  We are glad to hear that :)

You might be able to make it even faster with the steps here:

     http://wiki.apache.org/lucene-java/ImproveIndexingSpeed

Mike

Jake Mannix wrote:

> Hello all,
>   I know you lucene devs did a lot of work on indexing performance  
> in 2.3,
> and I just tested it out last thursday, so I thought I'd let you  
> know how it
> fared:
>
>   On a 2.17 million document index, a recent test gave indexing  
> time to be:
>
>     * lucene 2.2: 4.83 hours
>     * lucene 2.3: 26 minutes
>
>   About a factor of 11 speedup.  Holy smokes!  Great work folks.
>
>
>   -jake


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32366-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Feb 03 22:11:57 2008
Return-Path: <java-user-return-32366-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3775 invoked from network); 3 Feb 2008 22:11:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Feb 2008 22:11:57 -0000
Received: (qmail 36321 invoked by uid 500); 3 Feb 2008 22:11:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36297 invoked by uid 500); 3 Feb 2008 22:11:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36286 invoked by uid 99); 3 Feb 2008 22:11:42 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 03 Feb 2008 14:11:42 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of acidbriggs@gmail.com designates 209.85.198.191 as permitted sender)
Received: from [209.85.198.191] (HELO rv-out-0910.google.com) (209.85.198.191)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 03 Feb 2008 22:11:15 +0000
Received: by rv-out-0910.google.com with SMTP id k20so1428790rvb.5
        for <java-user@lucene.apache.org>; Sun, 03 Feb 2008 14:11:22 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        bh=0EezW7BV1ltLB3MxZM6dJ7U6MuRlpqjI3vLL17F2yqk=;
        b=tG3bFnS4shWJbA+Sqa6WvN7oLsVU4SzPp1hjSmXbpfA+dwhbH0zfw68Ji1AxdwvcnX/nWzM0XDp/5TPjlMMkYAx3DokxBlZBt2gIpCUxutMQgPdofW4Qc8Kw1OQ08qVAyn9LpIUDD5b6hFF4HugiQOIFwU3vLMmpW818J+9JtQY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=CkihFInHqa9mAEb2E1zSZB1XG4nqUnNbKIbXvjMWFUnBhbfc+Kn3I85VsQvAv6ti4hk8xgDahQWdpUxr1tOdt5d0tkJgFBwM1WCfGHUl/3TYEasIq++IvekVmhjeAxzjd4fjBrDF8r2/Ai3cP5GjEjMyTUyGJbliVtJNv+jXy60=
Received: by 10.140.193.16 with SMTP id q16mr4225178rvf.109.1202076682519;
        Sun, 03 Feb 2008 14:11:22 -0800 (PST)
Received: by 10.141.116.14 with HTTP; Sun, 3 Feb 2008 14:11:22 -0800 (PST)
Message-ID: <1c0e93080802031411m3712ab17s804a35c7f5eb05dc@mail.gmail.com>
Date: Sun, 3 Feb 2008 17:11:22 -0500
From: Briggs <acidbriggs@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Indexing Speed: 2.3 vs 2.2 (real world numbers)
In-Reply-To: <4b124c310802031157l2e7790b9oe1608beb6c5a6dd6@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <4b124c310802031157l2e7790b9oe1608beb6c5a6dd6@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Damn, really?  I haven't had the opportunity to test this yet.  Has
anyone else seen this kind of improvement?



On Feb 3, 2008 2:57 PM, Jake Mannix <jake.mannix@gmail.com> wrote:
> Hello all,
>   I know you lucene devs did a lot of work on indexing performance in 2.3,
> and I just tested it out last thursday, so I thought I'd let you know how it
> fared:
>
>   On a 2.17 million document index, a recent test gave indexing time to be:
>
>     * lucene 2.2: 4.83 hours
>     * lucene 2.3: 26 minutes
>
>   About a factor of 11 speedup.  Holy smokes!  Great work folks.
>
>
>   -jake
>



-- 
"Conscious decisions by conscious minds are what make reality real"

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32367-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 04 00:47:55 2008
Return-Path: <java-user-return-32367-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44135 invoked from network); 4 Feb 2008 00:47:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Feb 2008 00:47:54 -0000
Received: (qmail 23939 invoked by uid 500); 4 Feb 2008 00:47:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23897 invoked by uid 500); 4 Feb 2008 00:47:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23886 invoked by uid 99); 4 Feb 2008 00:47:40 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 03 Feb 2008 16:47:40 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of jake.mannix@gmail.com designates 72.14.246.249 as permitted sender)
Received: from [72.14.246.249] (HELO ag-out-0708.google.com) (72.14.246.249)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Feb 2008 00:47:12 +0000
Received: by ag-out-0708.google.com with SMTP id 35so755235aga.11
        for <java-user@lucene.apache.org>; Sun, 03 Feb 2008 16:47:18 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=P9+9F5U1yz2GkevZiXHcAlvaVx720GyKhknvrBmbllU=;
        b=HaLC+L1ITyKt9XoK4F5k0mJFkpKqiT+8qlCasJ+A6zn8Ap599FxXk5h0g3w5qTqT8JocK6cfvNk+HTmfirvcgRT9ol8YD1Sv6hbz+pRsN8Hbn8swesOMm+Plrltvwkvg8acrCeSg6u2rtHf/cbQQmGxlH9bVgEA0Ln3pPF4CW7w=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=uCpSfRMmbQl/xUOjmza8KRp26gX0Dyxmxj81lvYjwWKRrJr7aKpJAATzalmToEJLAZIby/kQiS6fXOnBQFo1sh3ADxzVcRkV/CL2vDQK0rWJXDarq3DbhbuKrT9t2AxU9D8JB1qMtsIzr+UNlk+jRCzEF+HLOkWj1QnOSnGwyG0=
Received: by 10.100.209.11 with SMTP id h11mr13733559ang.52.1202085119470;
        Sun, 03 Feb 2008 16:31:59 -0800 (PST)
Received: by 10.100.43.15 with HTTP; Sun, 3 Feb 2008 16:31:59 -0800 (PST)
Message-ID: <4b124c310802031631x11fc3d1ah82f6d6b506b1e4b5@mail.gmail.com>
Date: Sun, 3 Feb 2008 16:31:59 -0800
From: "Jake Mannix" <jake.mannix@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Indexing Speed: 2.3 vs 2.2 (real world numbers)
In-Reply-To: <E142FB18-3A38-489F-90AA-BB6F0AB2C9B7@mikemccandless.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_3131_6914601.1202085119461"
References: <4b124c310802031157l2e7790b9oe1608beb6c5a6dd6@mail.gmail.com>
	 <E142FB18-3A38-489F-90AA-BB6F0AB2C9B7@mikemccandless.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_3131_6914601.1202085119461
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Yeah, I should have mentioned - this was merely with a jar replacement, we
haven't gotten around to doing fun 2.3-related stuff like making sure our
domain-specific tokenizers use the next(Token), as well as making sure set
all of our buffersizes by RAM used.

We tried multithreading the process, as we have a multi-core, multi-disk
architecture, but for some reason we never saw more than 99% (of one core)
cpu usage during indexing, as if some internal synchronization was getting
hit... I should try it again through the profiler and see if I can pinpoint
where it was getting tripped up.   On the other hand, I'm not sure if we
*need* faster than 26 minute indexing, so once we're sure we can move up to
2.3 for production, that may just solve our indexing perf issues.

Now if I can just figure out how to speed up our query performance too, I'll
be in an even *better* mood. :)

  -jake

On Feb 3, 2008 2:11 PM, Michael McCandless <lucene@mikemccandless.com>
wrote:

>
> Awesome!  We are glad to hear that :)
>
> You might be able to make it even faster with the steps here:
>
>     http://wiki.apache.org/lucene-java/ImproveIndexingSpeed
>
> Mike
>
> Jake Mannix wrote:
>
> > Hello all,
> >   I know you lucene devs did a lot of work on indexing performance
> > in 2.3,
> > and I just tested it out last thursday, so I thought I'd let you
> > know how it
> > fared:
> >
> >   On a 2.17 million document index, a recent test gave indexing
> > time to be:
> >
> >     * lucene 2.2: 4.83 hours
> >     * lucene 2.3: 26 minutes
> >
> >   About a factor of 11 speedup.  Holy smokes!  Great work folks.
> >
> >
> >   -jake
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_3131_6914601.1202085119461--

From java-user-return-32368-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 04 01:48:02 2008
Return-Path: <java-user-return-32368-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54922 invoked from network); 4 Feb 2008 01:48:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Feb 2008 01:48:02 -0000
Received: (qmail 49234 invoked by uid 500); 4 Feb 2008 01:47:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49200 invoked by uid 500); 4 Feb 2008 01:47:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49189 invoked by uid 99); 4 Feb 2008 01:47:47 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 03 Feb 2008 17:47:47 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.202] (HELO spunkymail-a20.g.dreamhost.com) (208.97.132.202)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Feb 2008 01:47:17 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a20.g.dreamhost.com (Postfix) with ESMTP id E7AA3E24ED
	for <java-user@lucene.apache.org>; Sun,  3 Feb 2008 17:47:23 -0800 (PST)
Message-Id: <9C49934D-68A2-459A-AB0C-B577AD53FE15@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <295da8fe0802010541l740334fj70f4825e186113bb@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v915)
Subject: Re: Different levels of negative boosting
Date: Sun, 3 Feb 2008 20:47:22 -0500
References: <295da8fe0801311149p23bfdfa4vcf87d5cfcfd44ba@mail.gmail.com> <6DF4A122-877C-44A6-8FC2-CF861C1E6732@apache.org> <295da8fe0802010541l740334fj70f4825e186113bb@mail.gmail.com>
X-Mailer: Apple Mail (2.915)
X-Virus-Checked: Checked by ClamAV on apache.org

What are the other parts of your queries like?  And why the need for  
the separate instantiations of the QueryParser?

You might try something like:   good^2 badA^0.1 badB^0.3 or some other  
bigger separation of the boost value between the good terms and the  
bad terms.

The other thing to do is use the explain() method to see how the  
individual terms are being scored.

-Grant
On Feb 1, 2008, at 8:41 AM, prabin meitei wrote:

> Hi Grant,
>    I have an index for articles containing fields 'id' , 'body' and  
> others
>
> BooleanQuery query = new BooleanQuery;
> queryParser = new QueryParser("body", new StandardAnalyzer());
> query.add(queryParser.parse("keywords"), Occur.MUST);
>
> if i query at this level then i get all the articles I want. But I  
> want to
> de-boost some of them if they matches another term
> .
> BooleanQuery q1 = new BooleanQuery;
> BooleanQuery q2 = new BooleanQuery;
> queryParser = new QueryParser("body", new StandardAnalyzer());
> q1.add(queryParser.parse("body"), Occur.SHOULD);
> queryParser = new QueryParser("some field", new StandardAnalyzer());
> q2.add(queryParser.parse("keywords2"), Occur.SHOULD);
>
> q1.setBoost(0.1);
> q2.setBoost(0.3);
> query.add(q1, Occur.SHOULD);
> query.add(q2, Occur.SHOULD);
> ### what I want here is that any document matching the queries q1  
> and q2
> will be boosted negatively(reducing their score but *not eliminating  
> from
> the search result*)
> # puting values less than 1.0 (as I tried doing) did not help  
> (lucene seems
> to assume it as 1)
> # if there was only one query then I could do it as I wrote in my  
> last mail.
> But the problem is when there a multiple queries to reduce the score  
> by
> multiple levels.
>
> or am I going in a wrong direction?? It wud be nice if you have some
> suggestion.
>
> Prabin
>
> On Feb 1, 2008 6:32 PM, Grant Ingersoll <gsingers@apache.org> wrote:
>
>> Hi Prabin,
>>
>> Can you give an example of what you would like a query to look like?
>> Lucene doesn't do negative boosts (ok, w/ a patch, I think it can,
>> but...)  At any rate, the boosts are relative, so perhaps you just
>> lower the boost to be very small for the "bad" terms and raise it
>> higher for the good terms.
>>
>> What is the end goal of what you are trying to find?  Perhaps there
>> are some alternatives.
>>
>> -Grant
>>
>> On Jan 31, 2008, at 2:49 PM, prabin meitei wrote:
>>
>>> Hi,  I want to give different levels of negative boost (reduce the
>>> score) to
>>> documents for different matching queries. How it can be done??
>>> Googling I
>>> found out this link
>>> http://wiki.apache.org/jakarta-lucene/CommunityContributions  but
>>> it just
>>> gives the option of giving single level negative boost.
>>> is there any way of having multiple matching queries and give them
>>> different
>>> negative boosts???
>>>
>>>
>>> Regards,
>>> Prabin
>>
>> --------------------------
>> Grant Ingersoll
>> http://lucene.grantingersoll.com
>> http://www.lucenebootcamp.com
>>
>> Lucene Helpful Hints:
>> http://wiki.apache.org/lucene-java/BasicsOfPerformance
>> http://wiki.apache.org/lucene-java/LuceneFAQ
>>
>>
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>

--------------------------
Grant Ingersoll
http://lucene.grantingersoll.com
http://www.lucenebootcamp.com

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32369-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 04 02:03:25 2008
Return-Path: <java-user-return-32369-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60371 invoked from network); 4 Feb 2008 02:03:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Feb 2008 02:03:25 -0000
Received: (qmail 54977 invoked by uid 500); 4 Feb 2008 02:03:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54943 invoked by uid 500); 4 Feb 2008 02:03:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54932 invoked by uid 99); 4 Feb 2008 02:03:11 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 03 Feb 2008 18:03:11 -0800
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=SPF_NEUTRAL,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [208.97.132.66] (HELO spunkymail-a17.g.dreamhost.com) (208.97.132.66)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Feb 2008 02:02:54 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a17.g.dreamhost.com (Postfix) with ESMTP id B761A74FEF
	for <java-user@lucene.apache.org>; Sun,  3 Feb 2008 18:02:44 -0800 (PST)
Message-Id: <8BF9ADB5-9A1C-46A1-8D40-0B99A4D969CF@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <15224916.post@talk.nabble.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v915)
Subject: Re: How can I get document's top n raw score?
Date: Sun, 3 Feb 2008 21:02:43 -0500
References: <15224916.post@talk.nabble.com>
X-Mailer: Apple Mail (2.915)
X-Virus-Checked: Checked by ClamAV on apache.org

I'm not sure I understand what you are asking, but, you can get non- 
normalized scores by using the lower-level non-Hits based search like  
the TopDocs, etc.

However, scores are not really all that comparable across queries.

-Grant

On Feb 1, 2008, at 6:46 AM, Lisa Lee wrote:

>
> I need know document's top n raw score & term.
>
> For example,
>
> If one document have {apple, banana, coconut} terms, and I need top  
> 2 score
> in the document.
>
> Simple way is just search all term in the document and sort the  
> score - like
> as below.
>
> first, search about 'apple' term then write the score using  
> IndexSearcher,
> Query, Hits, Document and Explanation class.
> second, as same way, search about term 'banana'.
> third, as same way, search about term 'coconut'.
> last, compare these score and find out top 2 high score term and  
> score.
>
> It is no problem if number of documents are small.
> But, I handle over the 1,000,000 documents and over the 20,000,000  
> terms.
>
> Is there any way solve this problem more quickly?
>
> I use 2.2.0 ver lucene.
> -- 
> View this message in context: http://www.nabble.com/How-can-I-get-document%27s-top-n-raw-score--tp15224916p15224916.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

--------------------------
Grant Ingersoll
http://lucene.grantingersoll.com
http://www.lucenebootcamp.com

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32370-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 04 04:21:38 2008
Return-Path: <java-user-return-32370-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98397 invoked from network); 4 Feb 2008 04:21:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Feb 2008 04:21:36 -0000
Received: (qmail 19864 invoked by uid 500); 4 Feb 2008 04:21:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19814 invoked by uid 500); 4 Feb 2008 04:21:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19803 invoked by uid 99); 4 Feb 2008 04:21:22 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 03 Feb 2008 20:21:22 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of stopman@gmail.com designates 72.14.220.156 as permitted sender)
Received: from [72.14.220.156] (HELO fg-out-1718.google.com) (72.14.220.156)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Feb 2008 04:20:54 +0000
Received: by fg-out-1718.google.com with SMTP id d23so2445024fga.27
        for <java-user@lucene.apache.org>; Sun, 03 Feb 2008 20:21:00 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        bh=nhjz8ntUaSlBc5BgG8wFIOHoh3JvkZV1iLYUVJ+LSJw=;
        b=jB5uO0rf/4fuOn9Rw5Ja7Kg75Pr76ZKX7pZ72bIUSI5T3CxokwfciSEEt2IA6NxaBMlz4C/3fy+OTac9P7JZH/j7zf+D3Oz8ETD3Ee6cbUgwuXaQmMf72rKz2G/WGMyFunoMP2WWDwUIRw254Ap7d4t43vstzpKVuBjmQeShT/A=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=s0PfA6h32eSG/F3RdFCbaXx4L29gnv/LhrC72TZmur01hdOycWqSdEGLkDk74LZzP1dUkKnNeJpuxA0hupX2ye7q1ksiXiiVaadTzg+lgVLLnnyUHhAJrDGc4lsBas5lRi0qF03uiethUb3YxZwv2Y+5OFrsuIeuRgRYr6V2XiY=
Received: by 10.82.108.9 with SMTP id g9mr12189358buc.34.1202098860241;
        Sun, 03 Feb 2008 20:21:00 -0800 (PST)
Received: by 10.82.139.19 with HTTP; Sun, 3 Feb 2008 20:21:00 -0800 (PST)
Message-ID: <652776090802032021w6bb5ac23q9d95f661269cb92@mail.gmail.com>
Date: Sun, 3 Feb 2008 20:21:00 -0800
From: "Michael Stoppelman" <stopman@gmail.com>
To: java-user@lucene.apache.org
Subject: Boosting using an external data source
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_3166_30674941.1202098860238"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_3166_30674941.1202098860238
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I've created a mapping of query terms to clusters with corresponding
strength values that I want to integrate into lucene
scoring so I can boost documents that match the clusters. I would like to
give a boost based on the normalized score.
In my setup, each document has a field with the clusters their assigned to
which is a string that contains numbers
separated by spaces. I was looking at using ValueSourceQuery but didn't
really understand how I should really deal
with the FieldScoreQuery since the field I need to look up on isn't one of
the defined types. Is there a simpler way I
should be going about this?

I'm using lucene 2.2.0.

Thanks for your help as always,
M

------=_Part_3166_30674941.1202098860238--

From java-user-return-32371-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 04 05:00:01 2008
Return-Path: <java-user-return-32371-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 11066 invoked from network); 4 Feb 2008 05:00:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Feb 2008 05:00:00 -0000
Received: (qmail 39401 invoked by uid 500); 4 Feb 2008 04:59:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39367 invoked by uid 500); 4 Feb 2008 04:59:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39356 invoked by uid 99); 4 Feb 2008 04:59:46 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 03 Feb 2008 20:59:46 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Feb 2008 04:59:17 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1JLtQS-00060x-OT
	for java-user@lucene.apache.org; Sun, 03 Feb 2008 20:59:24 -0800
Message-ID: <15262193.post@talk.nabble.com>
Date: Sun, 3 Feb 2008 20:59:24 -0800 (PST)
From: ajay_garg <garg.jeena.isi.ka.naam.hai@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Query in Lucene 2.3.0
In-Reply-To: <c68e39170802030857s5dbef7dq35f773c3e7124988@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: garg.jeena.isi.ka.naam.hai@gmail.com
References: <15175141.post@talk.nabble.com> <B34CBCE4-24B0-4CB7-BC78-F926D9E15D67@mikemccandless.com> <15197794.post@talk.nabble.com> <c68e39170801302056p7c21d3akbb372d35bae12b32@mail.gmail.com> <15198783.post@talk.nabble.com> <96AD48A6-1B37-475D-8D0B-50610240AEBF@mikemccandless.com> <15221338.post@talk.nabble.com> <2B85971E-5500-415A-8121-46C740AC10E2@mikemccandless.com> <15255268.post@talk.nabble.com> <c68e39170802030857s5dbef7dq35f773c3e7124988@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Thanks Yonik for the clarifications, and for the prompt replies. Now, God
forbidding, I should be fine, and shouldn't be losing my sleep :-)

Thanks again to Yonik and Mike.

Ajay Garg

Yonik Seeley wrote:
> 
> On Feb 3, 2008 11:44 AM, ajay_garg <garg.jeena.isi.ka.naam.hai@gmail.com>
> wrote:
>> Firstly, in the 2.3 optimizations, point 4 says ::
>> " 4. LUCENE-959: Remove synchronization in Document (yonik)".
>>
>> Well, what does that mean, since it has already been assured that
>> multiple
>> adds, deletes, updates CAN be done by multiple threads on a single
>> IndexWriter instance.
> 
> That was simply changing the list of fields in a single Document from
> Vector to ArrayList (after all, who uses multiple threads to construct
> a single document?)
> 
>> Secondly, this multiple-threads-doing-simultaneous-adds-deletes-modifies
>> works for me in 2.3; moreover, the source code has also confirmed this (
>> in
>> the IndexWriter.java file). However, does this hold true to prior 2.3
>> versions also ( I see that you state that multiple threads using same
>> instances has "always" been fine, but just want to confirm it once again,
>> as
>> to exactly from when on .. ).
> 
> Yes, it has always been fine to add multiple documents to a single
> IndexWriter via multiple threads (at least back to 1.4 when I started
> hacking on Lucene).
> 
> -Yonik
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/Query-in-Lucene-2.3.0-tp15175141p15262193.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32372-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 04 05:02:42 2008
Return-Path: <java-user-return-32372-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 11532 invoked from network); 4 Feb 2008 05:02:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Feb 2008 05:02:41 -0000
Received: (qmail 42431 invoked by uid 500); 4 Feb 2008 05:02:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42399 invoked by uid 500); 4 Feb 2008 05:02:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42388 invoked by uid 99); 4 Feb 2008 05:02:27 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 03 Feb 2008 21:02:27 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Feb 2008 05:02:12 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1JLtT3-0006GG-BC
	for java-user@lucene.apache.org; Sun, 03 Feb 2008 21:02:05 -0800
Message-ID: <15262216.post@talk.nabble.com>
Date: Sun, 3 Feb 2008 21:02:05 -0800 (PST)
From: ajay_garg <garg.jeena.isi.ka.naam.hai@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Indexing Speed: 2.3 vs 2.2 (real world numbers)
In-Reply-To: <4b124c310802031157l2e7790b9oe1608beb6c5a6dd6@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: garg.jeena.isi.ka.naam.hai@gmail.com
References: <4b124c310802031157l2e7790b9oe1608beb6c5a6dd6@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Hi Jake. 

Was the test conducted with a single indexing thread, or multiple ones ?


Jake Mannix wrote:
> 
> Hello all,
>   I know you lucene devs did a lot of work on indexing performance in 2.3,
> and I just tested it out last thursday, so I thought I'd let you know how
> it
> fared:
> 
>   On a 2.17 million document index, a recent test gave indexing time to
> be:
> 
>     * lucene 2.2: 4.83 hours
>     * lucene 2.3: 26 minutes
> 
>   About a factor of 11 speedup.  Holy smokes!  Great work folks.
> 
> 
>   -jake
> 
> 

-- 
View this message in context: http://www.nabble.com/Indexing-Speed%3A-2.3-vs-2.2-%28real-world-numbers%29-tp15257512p15262216.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32373-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 04 05:15:59 2008
Return-Path: <java-user-return-32373-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 13505 invoked from network); 4 Feb 2008 05:15:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Feb 2008 05:15:59 -0000
Received: (qmail 49506 invoked by uid 500); 4 Feb 2008 05:15:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49469 invoked by uid 500); 4 Feb 2008 05:15:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49458 invoked by uid 99); 4 Feb 2008 05:15:45 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 03 Feb 2008 21:15:45 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Feb 2008 05:15:29 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1JLtfu-0006aK-2R
	for java-user@lucene.apache.org; Sun, 03 Feb 2008 21:15:22 -0800
Message-ID: <15262305.post@talk.nabble.com>
Date: Sun, 3 Feb 2008 21:15:22 -0800 (PST)
From: ajay_garg <garg.jeena.isi.ka.naam.hai@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Concurrent Indexing + Searching
In-Reply-To: <47A60308.4040300@gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: garg.jeena.isi.ka.naam.hai@gmail.com
References: <15234463.post@talk.nabble.com> <15255394.post@talk.nabble.com> <47A60308.4040300@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


@Mark.

I am sorry, but I need a bit more of explanation. So you mean to say ::

"If auto-commit is false, then of course, docs will not be visible in the
index, until all the threads release themselves out of a particular
IndexWriter instance, and close() the IndexWriter instance.
If auto-commit is true, even then the above holds true. In particular, let's
say iI need an application 
with the following requirements ::

a) There are multiple indexer threads indexing on a SINGLE indexwriter
instance with auto-commit true
b) Each thread 'flushes' according to a pre-defined criteria at some point
of time.
c) The index should be updated immediately, that is, if any user re-opens
the IndexSearcher, then the 
    documents added till-that-snapshot-of-index must be visible. Note that
the IndexWriter instance hasn't 
    been closed as yet, the indexer threads will be indexing till eternity,
so that IndexWriter instance will 
    never be closed.

So, you presume that building an application with the above requirements is
impossible, even with auto-commit set to true. "

( If I sound ambiguous at any point, kindly forgive me for my lack of
language skills. I will try to explain better, if need arises ).

Looking forward to a reply
Ajay Garg

markrmiller wrote:
> 
> You are correct that autocommit=false means that docs will be in the 
> index before the last thread releases its concurrent hold on a Writer, 
> *but because IndexAccessor controls* *when the IndexSearchers are 
> reopened*, those docs will still not be visible until the last thread 
> holding a Writer releases it...that is when the reopening of Searchers 
> occurs as well as when the Writer is closed.
> 
> - Mark
> 
> ajay_garg wrote:
>> Hi. Sorry if I seem a stranger in this thread, but there is something
>> that I
>> can't resist clearing myself on.
>>
>> Mark, you say that the additional documents added to a index, won't show
>> up
>> until the # of threads accessing the index hits 0; and subsequently the
>> indexwriter instance is closed.
>>
>> But I suppose that the autocommit=true, asserts that all flushed (Added)
>> documents are immediately committed ( and hence visible ) in the index,
>> and
>> no explicit cclosing ( releasiing ) of the Indexwriter instance is
>> required.
>> ( Of course, re-opening an IndexSearcher instance is required ).
>>
>> Am I being dumb ?
>>
>> Looking eagerly for you to shed some light on my doubt.
>>
>> Thanks
>> Ajay Garg
>>
>>
>> codetester wrote:
>>   
>>> Hi All,
>>>
>>> A newbie out here.... I am using lucene 2.3.0. I need to use lucene to
>>> perform live searching and indexing. To achieve that, I tried the
>>> following
>>>
>>> FSDirectory directory = FSDirectory.getDirectory(location);
>>> IndexReader reader = IndexReader.open(directory );
>>> IndexWriter writer = new IndexWriter(directory , new SimpleAnalyzer(),
>>> true); // <- I want to recreate the index every time
>>> IndexSearcher searcher = new IndexSearcher( reader );
>>>
>>> For Searching, I have the following code
>>> QueryParser queryParser = new QueryParser("xyz", new
>>> StandardAnalyzer());
>>> Hits hits = searcher .search(queryParser.parse(displayName + "*"));
>>>
>>> And for adding records, I have the following code
>>>  // Create doc object
>>>  writer.addDocument(doc);
>>>
>>>  IndexReader newIndexReader = reader.reopen() ;
>>>  if ( newIndexReader != reader ) {
>>>        reader.close() ;
>>>  }
>>>  reader = newIndexReader ;
>>>  searcher.close() ;
>>>  searcher = new IndexSearcher(reader );
>>>         
>>> So the issues that I face are 
>>>
>>> 1) The addition of new record is not reflected in the search ( even
>>> though
>>> I have reinited IndexSearcher )
>>>
>>> 2) Obviously, the add record code is not thread safe. I am trying to
>>> close
>>> and update the reference to IndexSearcher object. I could add a sync
>>> block, but the bigger question would be that what is the ideal way to
>>> achieve this case where I need to add and search record real-time ? 
>>>
>>> Thanks !
>>>
>>>
>>>
>>>
>>>
>>>     
>>
>>   
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/Concurrent-Indexing-%2B-Searching-tp15234463p15262305.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32374-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 04 05:24:39 2008
Return-Path: <java-user-return-32374-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 14590 invoked from network); 4 Feb 2008 05:24:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Feb 2008 05:24:38 -0000
Received: (qmail 53376 invoked by uid 500); 4 Feb 2008 05:24:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53346 invoked by uid 500); 4 Feb 2008 05:24:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53335 invoked by uid 99); 4 Feb 2008 05:24:24 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 03 Feb 2008 21:24:24 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of jake.mannix@gmail.com designates 72.14.246.241 as permitted sender)
Received: from [72.14.246.241] (HELO ag-out-0708.google.com) (72.14.246.241)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Feb 2008 05:23:55 +0000
Received: by ag-out-0708.google.com with SMTP id 35so966471aga.11
        for <java-user@lucene.apache.org>; Sun, 03 Feb 2008 21:24:02 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=/Vy7Hn6AkWa8ek6gT8TsvZ3LWqONtVNoA0DBmR+FwW8=;
        b=ciDJdnzTEtuvlb/opvdlw+FgU2qXWY+22f/SbuXn37/+w5x1QxpCJfVEplGb3EjKr0mFKJSRvN0QTHFFp+ooEn3VdfzwQVyDc5Hg4RMIen9aZxhwSdmmNjeIy0777PvoOkfiGlfEzVxbLZG1F4EpH45cQQLzZ1L412E8IydtVsg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=AmP60ChpBhrd3GdOFRsp1KkRW6VWplpQt5o+E8t6lk+JivFGReCuIjr5o2oiEEea+0A51koTFCVsmXXbIoONmEjqXm5aJTgRrm+jqi/CKY8OyoEtv4ZHinJEahXTPXUgsl1jHiRPm8M7kV9PQZMkO+oPheqUfqa2H9TfOc879lI=
Received: by 10.100.249.9 with SMTP id w9mr14196311anh.105.1202102642094;
        Sun, 03 Feb 2008 21:24:02 -0800 (PST)
Received: by 10.100.43.15 with HTTP; Sun, 3 Feb 2008 21:24:02 -0800 (PST)
Message-ID: <4b124c310802032124qbf7ae88p2296d7527989bc53@mail.gmail.com>
Date: Sun, 3 Feb 2008 21:24:02 -0800
From: "Jake Mannix" <jake.mannix@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Indexing Speed: 2.3 vs 2.2 (real world numbers)
In-Reply-To: <15262216.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_3862_23986701.1202102642086"
References: <4b124c310802031157l2e7790b9oe1608beb6c5a6dd6@mail.gmail.com>
	 <15262216.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_3862_23986701.1202102642086
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

The test in which we got the 11X speedup?  That was single threaded.  I
haven't yet found a way to make multithreaded (shared IndexWriter) indexing
perform with any better speed than singlethreaded, so that code is not
enabled in our tests.  Do you think that 2.3 would better take advantage of
multiple threads / cores?  If so, I could rerun it again multithreaded and
see if that's even better...

  -jake

On Feb 3, 2008 9:02 PM, ajay_garg <garg.jeena.isi.ka.naam.hai@gmail.com>
wrote:

>
> Hi Jake.
>
> Was the test conducted with a single indexing thread, or multiple ones ?
>
>
> Jake Mannix wrote:
> >
> > Hello all,
> >   I know you lucene devs did a lot of work on indexing performance in
> 2.3,
> > and I just tested it out last thursday, so I thought I'd let you know
> how
> > it
> > fared:
> >
> >   On a 2.17 million document index, a recent test gave indexing time to
> > be:
> >
> >     * lucene 2.2: 4.83 hours
> >     * lucene 2.3: 26 minutes
> >
> >   About a factor of 11 speedup.  Holy smokes!  Great work folks.
> >
> >
> >   -jake
> >
> >
>
> --
> View this message in context:
> http://www.nabble.com/Indexing-Speed%3A-2.3-vs-2.2-%28real-world-numbers%29-tp15257512p15262216.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_3862_23986701.1202102642086--

From java-user-return-32375-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 04 05:26:55 2008
Return-Path: <java-user-return-32375-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 15421 invoked from network); 4 Feb 2008 05:26:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Feb 2008 05:26:55 -0000
Received: (qmail 55510 invoked by uid 500); 4 Feb 2008 05:26:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55477 invoked by uid 500); 4 Feb 2008 05:26:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55466 invoked by uid 99); 4 Feb 2008 05:26:41 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 03 Feb 2008 21:26:41 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of jake.mannix@gmail.com designates 72.14.246.245 as permitted sender)
Received: from [72.14.246.245] (HELO ag-out-0708.google.com) (72.14.246.245)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Feb 2008 05:26:13 +0000
Received: by ag-out-0708.google.com with SMTP id 35so968021aga.11
        for <java-user@lucene.apache.org>; Sun, 03 Feb 2008 21:26:20 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=f5RgmWYgviHMVs3VU6JNDWTddIWhUPdPIG7ZXk8fT3I=;
        b=iwM10WMIxiAlnYbeeEKAYSCygHnL4bHngAu7IJmRCQKV14qDrVTTEOgSXZ5Oa6QUqHUNdWiIanjBb9qoXGtA5E0c+65kk9oirSuaCZUVlm7DzyBYnE7kQiFJT5IF+S8QmLxZyn+UeknBEbW1IErr/WfWR82n+koY6uA09DePnT4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=eDy7oyAPBJx6BSRl8R08zdVL/sljhtfr4RGf6Xuv16DK0Zl56YgCGMVUM6AuezbRS95wPnpcrW9474Oq+fL1GQ2PJ8fVe3cykInT3gTaBXfMKeNDlpJVIjRZ4EItfOgfbWClkAPX5K5LqKZ1DVBBw97SrMeSQJ+jIg23TjSGWg0=
Received: by 10.100.153.6 with SMTP id a6mr14293021ane.18.1202102779958;
        Sun, 03 Feb 2008 21:26:19 -0800 (PST)
Received: by 10.100.43.15 with HTTP; Sun, 3 Feb 2008 21:26:19 -0800 (PST)
Message-ID: <4b124c310802032126q24975075t5c9ee4d2db3695cc@mail.gmail.com>
Date: Sun, 3 Feb 2008 21:26:19 -0800
From: "Jake Mannix" <jake.mannix@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Indexing Speed: 2.3 vs 2.2 (real world numbers)
In-Reply-To: <1c0e93080802031411m3712ab17s804a35c7f5eb05dc@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_3876_27887926.1202102779945"
References: <4b124c310802031157l2e7790b9oe1608beb6c5a6dd6@mail.gmail.com>
	 <1c0e93080802031411m3712ab17s804a35c7f5eb05dc@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_3876_27887926.1202102779945
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Note that in particular, we use the StandardTokenizer as part of our
analyzer
chain, which means it has the switch from the JavaCC version to the JFlex
based
code, which I'm betting is a substantial part of that speedup.

  -jake

On Feb 3, 2008 2:11 PM, Briggs <acidbriggs@gmail.com> wrote:

> Damn, really?  I haven't had the opportunity to test this yet.  Has
> anyone else seen this kind of improvement?
>
>
>
> On Feb 3, 2008 2:57 PM, Jake Mannix <jake.mannix@gmail.com> wrote:
> > Hello all,
> >   I know you lucene devs did a lot of work on indexing performance in
> 2.3,
> > and I just tested it out last thursday, so I thought I'd let you know
> how it
> > fared:
> >
> >   On a 2.17 million document index, a recent test gave indexing time to
> be:
> >
> >     * lucene 2.2: 4.83 hours
> >     * lucene 2.3: 26 minutes
> >
> >   About a factor of 11 speedup.  Holy smokes!  Great work folks.
> >
> >
> >   -jake
> >
>
>
>
> --
> "Conscious decisions by conscious minds are what make reality real"
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_3876_27887926.1202102779945--

From java-user-return-32376-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 04 08:19:48 2008
Return-Path: <java-user-return-32376-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 18610 invoked from network); 4 Feb 2008 08:19:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Feb 2008 08:19:48 -0000
Received: (qmail 69083 invoked by uid 500); 4 Feb 2008 08:19:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69046 invoked by uid 500); 4 Feb 2008 08:19:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69035 invoked by uid 99); 4 Feb 2008 08:19:34 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Feb 2008 00:19:34 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [69.44.16.11] (HELO getopt.org) (69.44.16.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Feb 2008 08:19:04 +0000
Received: from [192.168.1.100] ([81.219.54.251])
	(authenticated)
	by getopt.org (8.11.6/8.11.6) with ESMTP id m148JBT31218
	for <java-user@lucene.apache.org>; Mon, 4 Feb 2008 02:19:11 -0600
Message-ID: <47A6CA7C.6050006@getopt.org>
Date: Mon, 04 Feb 2008 09:19:08 +0100
From: Andrzej Bialecki <ab@getopt.org>
User-Agent: Thunderbird 2.0.0.9 (Windows/20071031)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: appending field to an existing index
References: <8837fb770801301642q23e2cc74vca270efe5c9ef9fd@mail.gmail.com>	 <e05f0fd10801310123y67555f6ne6ecb47e97d5ff22@mail.gmail.com>	 <8D4597E5-EBAC-4D30-974C-F79C057DC1CD@mikemccandless.com>	 <8837fb770801310928o22ad6bbanefbc5831ba951974@mail.gmail.com> <359a92830801310936l4355ab96k23c6c475387a19aa@mail.gmail.com>
In-Reply-To: <359a92830801310936l4355ab96k23c6c475387a19aa@mail.gmail.com>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Erick Erickson wrote:
> As always, "it depends". You can try to reconstruct the doc from an index,
> see Luke. But depending upon you you indexed things, it may be more
> or less lossy. I remember this was discussed recently, you might have
> some luck if you search the archive.
> 
> But it may be very, very expensive to reconstruct all the docs from an
> index, see how long Luke takes to do this on your index.....

It wouldn't be much more expensive to reconstruct all unstored fields in 
all docs - Luke has to traverse all posting lists anyway. This "bulk 
restore" is not implemented (yet?).

-- 
Best regards,
Andrzej Bialecki     <><
  ___. ___ ___ ___ _ _   __________________________________
[__ || __|__/|__||\/|  Information Retrieval, Semantic Web
___|||__||  \|  ||  |  Embedded Unix, System Integration
http://www.sigram.com  Contact: info at sigram dot com


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32377-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 04 10:51:47 2008
Return-Path: <java-user-return-32377-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59533 invoked from network); 4 Feb 2008 10:51:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Feb 2008 10:51:47 -0000
Received: (qmail 465 invoked by uid 500); 4 Feb 2008 10:51:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 99540 invoked by uid 500); 4 Feb 2008 10:51:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 99529 invoked by uid 99); 4 Feb 2008 10:51:32 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Feb 2008 02:51:32 -0800
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=SPF_NEUTRAL,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [72.14.214.230] (HELO hu-out-0506.google.com) (72.14.214.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Feb 2008 10:51:02 +0000
Received: by hu-out-0506.google.com with SMTP id 27so2078514hub.15
        for <java-user@lucene.apache.org>; Mon, 04 Feb 2008 02:51:05 -0800 (PST)
Received: by 10.78.200.20 with SMTP id x20mr11896799huf.43.1202122265371;
        Mon, 04 Feb 2008 02:51:05 -0800 (PST)
Received: from ?10.17.4.4? ( [71.174.108.74])
        by mx.google.com with ESMTPS id g9sm21333131gvc.4.2008.02.04.02.51.03
        (version=TLSv1/SSLv3 cipher=OTHER);
        Mon, 04 Feb 2008 02:51:04 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v753)
In-Reply-To: <4b124c310802032124qbf7ae88p2296d7527989bc53@mail.gmail.com>
References: <4b124c310802031157l2e7790b9oe1608beb6c5a6dd6@mail.gmail.com> <15262216.post@talk.nabble.com> <4b124c310802032124qbf7ae88p2296d7527989bc53@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <229245E2-6D37-49EB-A009-2C8C0C77762F@mikemccandless.com>
Content-Transfer-Encoding: 7bit
From: Michael McCandless <lucene@mikemccandless.com>
Subject: Re: Indexing Speed: 2.3 vs 2.2 (real world numbers)
Date: Mon, 4 Feb 2008 05:51:39 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.753)
X-Virus-Checked: Checked by ClamAV on apache.org


Even pre-2.3, you should have seen gains by adding threads, if indeed  
your hardware has good concurrency.

And definitely with the changes in 2.3, you should see gains by  
adding threads.

Note that as you add threads, the "sweet spot" for RAM buffer size  
increases.  Ie, make the RAM buffer bigger as you add more threads.

I think the only major thing that's single-threaded is flushing a new  
segment to disk.  Only one thread can do that, and while that thread  
is doing so, other threads must wait.

Mike

Jake Mannix wrote:

> ------=_Part_3862_23986701.1202102642086
> Content-Type: text/plain; charset=ISO-8859-1
> Content-Transfer-Encoding: 7bit
> Content-Disposition: inline
>
> The test in which we got the 11X speedup?  That was single  
> threaded.  I
> haven't yet found a way to make multithreaded (shared IndexWriter)  
> indexing
> perform with any better speed than singlethreaded, so that code is not
> enabled in our tests.  Do you think that 2.3 would better take  
> advantage of
> multiple threads / cores?  If so, I could rerun it again  
> multithreaded and
> see if that's even better...
>
>   -jake
>
> On Feb 3, 2008 9:02 PM, ajay_garg  
> <garg.jeena.isi.ka.naam.hai@gmail.com>
> wrote:
>
>>
>> Hi Jake.
>>
>> Was the test conducted with a single indexing thread, or multiple  
>> ones ?
>>
>>
>> Jake Mannix wrote:
>>>
>>> Hello all,
>>>   I know you lucene devs did a lot of work on indexing  
>>> performance in
>> 2.3,
>>> and I just tested it out last thursday, so I thought I'd let you  
>>> know
>> how
>>> it
>>> fared:
>>>
>>>   On a 2.17 million document index, a recent test gave indexing  
>>> time to
>>> be:
>>>
>>>     * lucene 2.2: 4.83 hours
>>>     * lucene 2.3: 26 minutes
>>>
>>>   About a factor of 11 speedup.  Holy smokes!  Great work folks.
>>>
>>>
>>>   -jake
>>>
>>>
>>
>> --
>> View this message in context:
>> http://www.nabble.com/Indexing-Speed%3A-2.3-vs-2.2-%28real-world- 
>> numbers%29-tp15257512p15262216.html
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32378-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 04 11:13:50 2008
Return-Path: <java-user-return-32378-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64841 invoked from network); 4 Feb 2008 11:13:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Feb 2008 11:13:50 -0000
Received: (qmail 23884 invoked by uid 500); 4 Feb 2008 11:13:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23844 invoked by uid 500); 4 Feb 2008 11:13:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23833 invoked by uid 99); 4 Feb 2008 11:13:34 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Feb 2008 03:13:34 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [192.115.104.87] (HELO m7.bezeqint.net) (192.115.104.87)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Feb 2008 11:13:06 +0000
Received: from your0548c161e1 ([82.102.182.220])
	by m7.bezeqint.net (MOS 3.8.5-GA)
	with ESMTP id BJC31808 (AUTH sf_ita_s);
	Mon, 4 Feb 2008 12:56:33 +0200 (IST)
X-FEAS-DEEPHEADER-FortiMail-2000-partnergsm.co.il:  No untrusted public ip! 
Message-Id: <20080204104849.31785@partnergsm.co.il>
From: "Itamar Syn-Hershko" <itamar@divrei-tora.com>
To: <java-user@lucene.apache.org>
Subject: RE: Retrieving documents that match atleast n query terms
Date: Mon, 4 Feb 2008 12:56:24 +0200
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook, Build 11.0.5510
thread-index: AchmGGr4mUnl5M8SRTeJRCSyk/WznQBA0qXA
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3198
In-Reply-To: <42861c9a0801301043h4a249b12h87f05cd93b7885a1@mail.gmail.com>
X-Junkmail-Status: score=10/50, host=m7.bezeqint.net
X-Junkmail-SD-Raw: score=unknown,
	refid=str=0001.0A090206.47A6EF64.002B,ss=1,fgs=0,
	ip=82.102.182.220,
	so=2007-07-31 18:51:00,
	dmn=5.4.3/2008-02-01
X-Virus-Checked: Checked by ClamAV on apache.org

I'm not 100% sure, but I think you could use Lucene's scoring for this. So
if you ran your query and received N results, loop through them and check
the scoring explanation (which I'm not quite sure how to acquire). This
should tell you how many terms out of the query were found. This approach
should work fine if all terms have the same frequency throughout the docs.
If there is one term which is highly frequent in one of the docs, this might
fail.

But again, I'm no Lucene pro. I would love to hear an answer myself from one
of the Lucene wiz-es.

Itamar.

-----Original Message-----
From: Dipsy Kapoor [mailto:dipsykapoor@gmail.com] 
Sent: Wednesday, January 30, 2008 8:43 PM
To: java-user@lucene.apache.org
Subject: Retrieving documents that match atleast n query terms

Hi,

I am using a BooleanQuery of the form:
   T1 OR T2 OR T3 OR ...... Tn
to search on a  field in Lucene.

Is there a way to force the search to return documents that match at least
say 5 of the query Terms?

Thanks,
Dipsy Kapoor

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32379-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 04 11:37:55 2008
Return-Path: <java-user-return-32379-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 68924 invoked from network); 4 Feb 2008 11:37:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Feb 2008 11:37:54 -0000
Received: (qmail 48926 invoked by uid 500); 4 Feb 2008 11:37:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48894 invoked by uid 500); 4 Feb 2008 11:37:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48883 invoked by uid 99); 4 Feb 2008 11:37:40 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Feb 2008 03:37:40 -0800
X-ASF-Spam-Status: No, hits=3.2 required=10.0
	tests=DNS_FROM_DOB,HTML_MESSAGE,RCVD_IN_DOB,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of Juerg.Meier@ctp-consulting.com designates 213.173.176.198 as permitted sender)
Received: from [213.173.176.198] (HELO cronos.ctp-consulting.com) (213.173.176.198)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 04 Feb 2008 11:37:12 +0000
Received: from hermes.ctp-consulting.com (unknown [10.170.128.12])
	by cronos.ctp-consulting.com (Postfix) with ESMTP id 2C521A6C0FA
	for <java-user@lucene.apache.org>; Mon,  4 Feb 2008 12:37:18 +0100 (CET)
Received: from hermes.ctp.com ([10.170.128.12]) by hermes.ctp.com
 ([10.170.128.12]) with mapi; Mon, 4 Feb 2008 12:37:51 +0100
From: Juerg Meier <Juerg.Meier@ctp-consulting.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Mon, 4 Feb 2008 12:37:51 +0100
Subject: Random selection of files
Thread-Topic: Random selection of files
Thread-Index: AQHIZyJfAeOwZFDLa0Ch7NHuUFCang==
Message-ID: <2F77E293C046E7469D72240E09A2FB100E782C25@hermes.ctp.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: multipart/alternative;
	boundary="_000_2F77E293C046E7469D72240E09A2FB100E782C25hermesctpcom_"
MIME-Version: 1.0
X-Virus-Checked: Checked by ClamAV on apache.org

--_000_2F77E293C046E7469D72240E09A2FB100E782C25hermesctpcom_
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

Hi,

We have the requirement for an "i'm feeling lucky" button, at least sort of=
. Whereas google just delivers the first record in a result set, we should =
deliver 10 arbitrary hits chosen out of, let's say, 1000. All of these docu=
ments have the same importance i.e. have the same weight.

So, is there an elegant way with the Lucene API to achieve this? Or do we n=
eed to retrieve all 1000 docs first, to do a random selection on our own af=
terwards? That appears to be quite expensive.

Thanks for any hint,
-- Juerg

--_000_2F77E293C046E7469D72240E09A2FB100E782C25hermesctpcom_--

From java-user-return-32380-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 04 11:43:25 2008
Return-Path: <java-user-return-32380-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70233 invoked from network); 4 Feb 2008 11:43:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Feb 2008 11:43:25 -0000
Received: (qmail 58433 invoked by uid 500); 4 Feb 2008 11:43:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58398 invoked by uid 500); 4 Feb 2008 11:43:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58387 invoked by uid 99); 4 Feb 2008 11:43:11 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Feb 2008 03:43:11 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ian.lea@gmail.com designates 209.85.146.182 as permitted sender)
Received: from [209.85.146.182] (HELO wa-out-1112.google.com) (209.85.146.182)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Feb 2008 11:42:43 +0000
Received: by wa-out-1112.google.com with SMTP id j40so2522872wah.11
        for <java-user@lucene.apache.org>; Mon, 04 Feb 2008 03:42:50 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        bh=78LfD4EFQwNPZeWcmLEuA/z7FOzFXRLmJxgorVyygfw=;
        b=Q9kMdRcCDKwFiR+zvVHTKeae7ecB1NQCEv6FQoVYFmVnLAzGlzPS2gQj7DGnQfJLTNBDwoQiHZE4+XWsOmOHJkEw+zrwBMgzmLAtKDdNk8HObOBVBjqT0O3UcCtFSjJh/zt32wOHJM/IvA3t4utTM+R0dMxi98WekQeSHZVZGaI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=W3yyHLmRe9OUdK6As4q6HqXFoDJqFJNTLmMQCqjftMCu+w6aRjE6ss0BbjK5rv4sHua0SlKyeHgrDmHlXzs9qC772u4h7I5HUrT0OvceWIGR7UAC0ktZnlkSPljpydus3ZtpSJDzqMuAJk16/d9tgqeiTrHN/YrM2tPkc+tBIvo=
Received: by 10.115.50.5 with SMTP id c5mr1151561wak.109.1202125370269;
        Mon, 04 Feb 2008 03:42:50 -0800 (PST)
Received: by 10.114.210.9 with HTTP; Mon, 4 Feb 2008 03:42:50 -0800 (PST)
Message-ID: <8c4e68610802040342i75bbacct5ba49b737abf5644@mail.gmail.com>
Date: Mon, 4 Feb 2008 11:42:50 +0000
From: "Ian Lea" <ian.lea@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Random selection of files
In-Reply-To: <2F77E293C046E7469D72240E09A2FB100E782C25@hermes.ctp.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <2F77E293C046E7469D72240E09A2FB100E782C25@hermes.ctp.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi


I think you would need to do the search to get list of 1000 doc ids,
but wouldn't need to retrieve all 1000.  Just pick your random 10 from
the list and retrieve them.


--
Ian.
ian.lea@gmail.com


On Feb 4, 2008 11:37 AM, Juerg Meier <Juerg.Meier@ctp-consulting.com> wrote:
> Hi,
>
> We have the requirement for an "i'm feeling lucky" button, at least sort of. Whereas google just delivers the first record in a result set, we should deliver 10 arbitrary hits chosen out of, let's say, 1000. All of these documents have the same importance i.e. have the same weight.
>
> So, is there an elegant way with the Lucene API to achieve this? Or do we need to retrieve all 1000 docs first, to do a random selection on our own afterwards? That appears to be quite expensive.
>
> Thanks for any hint,
> -- Juerg
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32381-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 04 11:45:30 2008
Return-Path: <java-user-return-32381-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70899 invoked from network); 4 Feb 2008 11:45:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Feb 2008 11:45:30 -0000
Received: (qmail 61968 invoked by uid 500); 4 Feb 2008 11:45:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61934 invoked by uid 500); 4 Feb 2008 11:45:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61923 invoked by uid 99); 4 Feb 2008 11:45:15 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Feb 2008 03:45:15 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ian.lea@gmail.com designates 209.85.146.177 as permitted sender)
Received: from [209.85.146.177] (HELO wa-out-1112.google.com) (209.85.146.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Feb 2008 11:44:47 +0000
Received: by wa-out-1112.google.com with SMTP id j40so2523703wah.11
        for <java-user@lucene.apache.org>; Mon, 04 Feb 2008 03:44:54 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        bh=xuNoMwdSG9aqy/Fv6AjmUaXRhfkFgOR2FTbnsGL27cY=;
        b=O6tF1/19jQUZSOvErBSA8++XpxyUL1An/TtWvkSRzv6meFo1+kkBy5dzoiaQqxEYHHvcVCKK6f4T8tZDfUbMG6C2iSFV3QB0dPjn8OGcxzjR+MI9m6r/8XB4OAsDFQ5Vu1rv2WqQ0X/ienHpRciRHlpbqCRjJ/rvGBujFTltrN8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=Xoz6c/bWNu8y685A8DaBsos+cJt41ZpL+GulwPblN/34DIih5jSrw3uvtBr5ZfVNytjGgCfladd08GdajCEz3bFoN14ezF26IhgujAHawgM8PzUIm0RBg/mnH2yhqlsdIjXpUJVlTZAIuhd08wqP2n83ld6fuHczSpEfI4277Kk=
Received: by 10.114.195.19 with SMTP id s19mr6797299waf.57.1202125494380;
        Mon, 04 Feb 2008 03:44:54 -0800 (PST)
Received: by 10.114.210.9 with HTTP; Mon, 4 Feb 2008 03:44:54 -0800 (PST)
Message-ID: <8c4e68610802040344y100597a0if366a2428391351@mail.gmail.com>
Date: Mon, 4 Feb 2008 11:44:54 +0000
From: "Ian Lea" <ian.lea@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Retrieving documents that match atleast n query terms
In-Reply-To: <42861c9a0801301043h4a249b12h87f05cd93b7885a1@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <42861c9a0801301043h4a249b12h87f05cd93b7885a1@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

BooleanQuery.setMinimumNumberShouldMatch(int min) sounds exactly what you need.


--
Ian.
ian.lea@gmail.com


On Jan 30, 2008 6:43 PM, Dipsy Kapoor <dipsykapoor@gmail.com> wrote:
> Hi,
>
> I am using a BooleanQuery of the form:
>    T1 OR T2 OR T3 OR ...... Tn
> to search on a  field in Lucene.
>
> Is there a way to force the search to return documents that match at
> least say 5 of the query Terms?
>
> Thanks,
> Dipsy Kapoor
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32382-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 04 12:11:15 2008
Return-Path: <java-user-return-32382-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77513 invoked from network); 4 Feb 2008 12:11:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Feb 2008 12:11:15 -0000
Received: (qmail 98520 invoked by uid 500); 4 Feb 2008 12:11:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98482 invoked by uid 500); 4 Feb 2008 12:11:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98471 invoked by uid 99); 4 Feb 2008 12:11:00 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Feb 2008 04:11:00 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of cambazz@gmail.com designates 72.14.214.231 as permitted sender)
Received: from [72.14.214.231] (HELO hu-out-0506.google.com) (72.14.214.231)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Feb 2008 12:10:32 +0000
Received: by hu-out-0506.google.com with SMTP id 27so2143399hub.15
        for <java-user@lucene.apache.org>; Mon, 04 Feb 2008 04:10:38 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=dLLudja0ITtc4F3FmM0r5yV6wb9nRGpuhuGrCEhufuw=;
        b=QqVpDlaYCbfWFxPbA2GgenGSWje3L/EXCauwTb0zEkyIJKVir7aDv0tWRQ5uWt9EI8lYqj1G7IC9SCpyFc7Y5ETUZGN9BXLHMuaT9PoJdGNusOaRbys7D/9Ir4lX8T1VPkFnEqY2mnKNVbG4GSWRNqHHPgcQNVNovo3XeEBJw08=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=lO0SZFVYsidnakf6RbMoxRYHMxcVh+1MJTGT7MonoKt+lkpnpBksAIyh7tHbe2Dw2qt1Fdon2LUKDwCIlUttOn6NfGLz7B8TJ5cwQralTfrShIB7IcFTvmHuu2loQ8vsc4+2oGqVBkzXHYFYnphf5A09VlxEjYWDq+kdHUtynMg=
Received: by 10.82.187.2 with SMTP id k2mr12904690buf.19.1202127037951;
        Mon, 04 Feb 2008 04:10:37 -0800 (PST)
Received: by 10.82.145.2 with HTTP; Mon, 4 Feb 2008 04:10:37 -0800 (PST)
Message-ID: <1bcb7c7f0802040410q73315e9fp2e65c12bb6d17c92@mail.gmail.com>
Date: Mon, 4 Feb 2008 14:10:37 +0200
From: "Cam Bazz" <cambazz@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: appending field to an existing index
In-Reply-To: <Pine.LNX.4.62.0801311356200.24422@radix.cryptio.net>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_4865_4811413.1202127037749"
References: <8837fb770801301642q23e2cc74vca270efe5c9ef9fd@mail.gmail.com>
	 <e05f0fd10801310123y67555f6ne6ecb47e97d5ff22@mail.gmail.com>
	 <8D4597E5-EBAC-4D30-974C-F79C057DC1CD@mikemccandless.com>
	 <8837fb770801310928o22ad6bbanefbc5831ba951974@mail.gmail.com>
	 <Pine.LNX.4.62.0801311356200.24422@radix.cryptio.net>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_4865_4811413.1202127037749
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hello,

I have read the parallel reader doc. It says it must have the same number of
documents as the other index.
When we are using a writer - searcher combination, how can we integrate this
parallel reader into game.

Simply, I have some documents, and I just like to mark them, in an efficient
way. is there a way?
I was having problem with deletes from my index, since I could not delete by
a query, I had to store an extra field that was the combination of the two
fields I had to delete with.

So I was thinking of integrating another index for marking them. but it
appears this parallel reader is kind of heavy for the job, since it has to
contain the same number of documents as the original index.

Best.

On Feb 1, 2008 12:02 AM, Chris Hostetter <hossman_lucene@fucit.org> wrote:

>
> : I have to keep one index though. Is there a way to reproduce an index
> from
> : an indexReader?
>
> asuming you have indexes that work in conjunction with eachther they
> way you want when using ParallelReader, you should (in theory) be able to
> use...
>
>   ParallelReader r = ...;
>   IndexWriter w = new IndexWRiter(...);
>   w.addIndexes(new IndexReader[] { r });
>   w.close();
>
> ...to "combine" those indexes into a single physical index.  but i've
> never personally tried it.  there may be quirks about ParallelReader that
> prevent this from working.
>
>
> -Hoss
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_4865_4811413.1202127037749--

From java-user-return-32383-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 04 12:16:36 2008
Return-Path: <java-user-return-32383-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78923 invoked from network); 4 Feb 2008 12:16:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Feb 2008 12:16:36 -0000
Received: (qmail 4501 invoked by uid 500); 4 Feb 2008 12:16:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4468 invoked by uid 500); 4 Feb 2008 12:16:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4457 invoked by uid 99); 4 Feb 2008 12:16:21 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Feb 2008 04:16:21 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of cambazz@gmail.com designates 72.14.220.154 as permitted sender)
Received: from [72.14.220.154] (HELO fg-out-1718.google.com) (72.14.220.154)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Feb 2008 12:15:53 +0000
Received: by fg-out-1718.google.com with SMTP id d23so2587019fga.27
        for <java-user@lucene.apache.org>; Mon, 04 Feb 2008 04:15:58 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        bh=BJZuFNVi1p85WYTnpBRAIkyVoDBPrf9ne/kWXyeI2CA=;
        b=TvIycFYB2thUYjhdz0gQ1l1YKcZ+2/ogBbSuHBfxOTFEwy9/Rv/bbBXmM6XPyWaUOMe8TGzCwl2Q+q4X0z4KWjXtV+G18crdjYT/j9FoMk/8FPNpEgmOF0VSlpxwEgAxeQgTON4vPFyFyOgWtFROdYyGOcjb/YTy9bkH9LIcBGY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=gXS9brxZjAuSMFvVS/iGIN7a3bOEu7DiMf3WyGd6T4Xj/GYs/R9mSTsVocvnecqwjERNyjmh6yfTrR7YOavK1tYb6eCUdKe7QYYYtEFonNa3ua1MhcK1evtlLsA00fv4oi+UFUVbzRvfPvGeOLO6yeVv0LlVY5QfudwXKsk5E5M=
Received: by 10.82.187.2 with SMTP id k2mr12912875buf.16.1202127358296;
        Mon, 04 Feb 2008 04:15:58 -0800 (PST)
Received: by 10.82.145.2 with HTTP; Mon, 4 Feb 2008 04:15:58 -0800 (PST)
Message-ID: <1bcb7c7f0802040415m62c83028nc63adbee745324c0@mail.gmail.com>
Date: Mon, 4 Feb 2008 14:15:58 +0200
From: "Cam Bazz" <cambazz@gmail.com>
To: java-user@lucene.apache.org
Subject: ParallelReader question
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_4884_9802794.1202127358292"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_4884_9802794.1202127358292
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hello,

When using a parallel reader with two indexes lets say, when we call a
document with id,
is it the combined fields of a document from the two indexes that return?

The documentation was not clear on that one, except the document(int n,
FieldSelector fs) method.

Best,
-C.B.

------=_Part_4884_9802794.1202127358292--

From java-user-return-32384-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 04 12:43:32 2008
Return-Path: <java-user-return-32384-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93910 invoked from network); 4 Feb 2008 12:43:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Feb 2008 12:43:32 -0000
Received: (qmail 29069 invoked by uid 500); 4 Feb 2008 12:43:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29036 invoked by uid 500); 4 Feb 2008 12:43:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29025 invoked by uid 99); 4 Feb 2008 12:43:17 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Feb 2008 04:43:17 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of markrmiller@gmail.com designates 64.233.166.178 as permitted sender)
Received: from [64.233.166.178] (HELO py-out-1112.google.com) (64.233.166.178)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Feb 2008 12:42:48 +0000
Received: by py-out-1112.google.com with SMTP id a73so2600506pye.9
        for <java-user@lucene.apache.org>; Mon, 04 Feb 2008 04:42:54 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        bh=BnbwZgMWNX9z4y7SCRUBNDHpzaGtf2HOa+lSjYMKLA8=;
        b=kAt1mTPFiMHvbSgZvR9VOwIYWpkm35fGTzg0tOa8zRi7rodHCj6hwxlAurfLqngi72cDRiwstNQVJNSzA+kWo2A1eBEIlJsDOidSRpzjuuveB0L/Moib61Kn50q/W7R0HFMn7+Vbl2Ay8T8BlodpN5oZCgpLzlEfsA6EXaD7OrI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=DNw6xUt00q8EZdZbAB/t6F3sf27vfiDEUV/HhGHSIuOCjhBOZat90NSmULkk7HPKP1QDhAfVf7YcLkI18jzU1tqwgtyIEweScXa9RbmQHGp4ekMjzskFsdrlHWcgfKGjCMOopB2JI18eqWhfWISj+0yLx3jCY8ItOXf1bf3VcOo=
Received: by 10.64.233.12 with SMTP id f12mr12732849qbh.34.1202128973843;
        Mon, 04 Feb 2008 04:42:53 -0800 (PST)
Received: from ?192.168.1.118? ( [69.124.234.183])
        by mx.google.com with ESMTPS id e13sm5404799qba.37.2008.02.04.04.42.50
        (version=SSLv3 cipher=RC4-MD5);
        Mon, 04 Feb 2008 04:42:51 -0800 (PST)
Message-ID: <47A70844.8030806@gmail.com>
Date: Mon, 04 Feb 2008 07:42:44 -0500
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.9 (Windows/20071031)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Concurrent Indexing + Searching
References: <15234463.post@talk.nabble.com> <15255394.post@talk.nabble.com> <47A60308.4040300@gmail.com> <15262305.post@talk.nabble.com>
In-Reply-To: <15262305.post@talk.nabble.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

You are right that if auto-commit=true and a user reopens an 
IndexReader, the docs will absolutely be visible as they are flushed. I 
think the part you are missing is that you need to be cooperating with 
the IndexAccessor: a user should not be reopening an IndexReader. The 
whole point of IndexAccessor is to coordinate these things...when a 
Writer is released, we know the index has changed, so that is when the 
IndexReaders are reopened for you. Because the IndexWriter is cached and 
shared by Threads, a thread might release the Writer while another is 
still using it...that is why things are not reopened and the Writer not 
closed until the last thread releases its reference to it. Essentially, 
IndexAccessor control visibility by controlling how current the view of 
the Readers is, by controlling their reopening -- a user should agree 
not to reopen -- just like he must agree not to use a ReadingWriter to 
delete.

If you want to just set an IndexWriter to indexing for eternity and then 
have some Readers that you occasionally reopen, you don't need 
IndexAccessor. Its purpose is to coordinate ReaderReaders, 
WritingReaders, Searchers, and Writers for you. You are proposing to 
coordinate them yourself. IndexAccess reopens Readers for you after a 
Writer has been used, and enforces Lucene requirements, like a 
WritingReader cannot be used at the same time as a Writer...etc.

Technically, IndexAccessor could reopen the readers every 2 
seconds...and then you would see your changes...instead it only tries to 
reopen them if a change has been made to the index...and it does not 
want to get greedy if a Writer is batch loading, so it waits for you to 
release the Writer. You can control how often the 'view' is updated by 
releasing the Writer more often -- say every 50 docs. Write 50 docs, 
release, get, write 50 docs.

- Mark

ajay_garg wrote:
> @Mark.
>
> I am sorry, but I need a bit more of explanation. So you mean to say ::
>
> "If auto-commit is false, then of course, docs will not be visible in the
> index, until all the threads release themselves out of a particular
> IndexWriter instance, and close() the IndexWriter instance.
> If auto-commit is true, even then the above holds true. In particular, let's
> say iI need an application 
> with the following requirements ::
>
> a) There are multiple indexer threads indexing on a SINGLE indexwriter
> instance with auto-commit true
> b) Each thread 'flushes' according to a pre-defined criteria at some point
> of time.
> c) The index should be updated immediately, that is, if any user re-opens
> the IndexSearcher, then the 
>     documents added till-that-snapshot-of-index must be visible. Note that
> the IndexWriter instance hasn't 
>     been closed as yet, the indexer threads will be indexing till eternity,
> so that IndexWriter instance will 
>     never be closed.
>
> So, you presume that building an application with the above requirements is
> impossible, even with auto-commit set to true. "
>
> ( If I sound ambiguous at any point, kindly forgive me for my lack of
> language skills. I will try to explain better, if need arises ).
>
> Looking forward to a reply
> Ajay Garg
>
> markrmiller wrote:
>   
>> You are correct that autocommit=false means that docs will be in the 
>> index before the last thread releases its concurrent hold on a Writer, 
>> *but because IndexAccessor controls* *when the IndexSearchers are 
>> reopened*, those docs will still not be visible until the last thread 
>> holding a Writer releases it...that is when the reopening of Searchers 
>> occurs as well as when the Writer is closed.
>>
>> - Mark
>>
>> ajay_garg wrote:
>>     
>>> Hi. Sorry if I seem a stranger in this thread, but there is something
>>> that I
>>> can't resist clearing myself on.
>>>
>>> Mark, you say that the additional documents added to a index, won't show
>>> up
>>> until the # of threads accessing the index hits 0; and subsequently the
>>> indexwriter instance is closed.
>>>
>>> But I suppose that the autocommit=true, asserts that all flushed (Added)
>>> documents are immediately committed ( and hence visible ) in the index,
>>> and
>>> no explicit cclosing ( releasiing ) of the Indexwriter instance is
>>> required.
>>> ( Of course, re-opening an IndexSearcher instance is required ).
>>>
>>> Am I being dumb ?
>>>
>>> Looking eagerly for you to shed some light on my doubt.
>>>
>>> Thanks
>>> Ajay Garg
>>>
>>>
>>> codetester wrote:
>>>   
>>>       
>>>> Hi All,
>>>>
>>>> A newbie out here.... I am using lucene 2.3.0. I need to use lucene to
>>>> perform live searching and indexing. To achieve that, I tried the
>>>> following
>>>>
>>>> FSDirectory directory = FSDirectory.getDirectory(location);
>>>> IndexReader reader = IndexReader.open(directory );
>>>> IndexWriter writer = new IndexWriter(directory , new SimpleAnalyzer(),
>>>> true); // <- I want to recreate the index every time
>>>> IndexSearcher searcher = new IndexSearcher( reader );
>>>>
>>>> For Searching, I have the following code
>>>> QueryParser queryParser = new QueryParser("xyz", new
>>>> StandardAnalyzer());
>>>> Hits hits = searcher .search(queryParser.parse(displayName + "*"));
>>>>
>>>> And for adding records, I have the following code
>>>>  // Create doc object
>>>>  writer.addDocument(doc);
>>>>
>>>>  IndexReader newIndexReader = reader.reopen() ;
>>>>  if ( newIndexReader != reader ) {
>>>>        reader.close() ;
>>>>  }
>>>>  reader = newIndexReader ;
>>>>  searcher.close() ;
>>>>  searcher = new IndexSearcher(reader );
>>>>         
>>>> So the issues that I face are 
>>>>
>>>> 1) The addition of new record is not reflected in the search ( even
>>>> though
>>>> I have reinited IndexSearcher )
>>>>
>>>> 2) Obviously, the add record code is not thread safe. I am trying to
>>>> close
>>>> and update the reference to IndexSearcher object. I could add a sync
>>>> block, but the bigger question would be that what is the ideal way to
>>>> achieve this case where I need to add and search record real-time ? 
>>>>
>>>> Thanks !
>>>>
>>>>
>>>>
>>>>
>>>>
>>>>     
>>>>         
>>>   
>>>       
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>>     
>
>   

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32385-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 04 12:50:36 2008
Return-Path: <java-user-return-32385-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97071 invoked from network); 4 Feb 2008 12:50:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Feb 2008 12:50:36 -0000
Received: (qmail 36190 invoked by uid 500); 4 Feb 2008 12:50:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36161 invoked by uid 500); 4 Feb 2008 12:50:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36150 invoked by uid 99); 4 Feb 2008 12:50:22 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Feb 2008 04:50:22 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of cambazz@gmail.com designates 72.14.214.229 as permitted sender)
Received: from [72.14.214.229] (HELO hu-out-0506.google.com) (72.14.214.229)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Feb 2008 12:49:54 +0000
Received: by hu-out-0506.google.com with SMTP id 27so2180201hub.15
        for <java-user@lucene.apache.org>; Mon, 04 Feb 2008 04:50:00 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        bh=so9DoOq+7wG+0IA053zy+X3SIPDc/AEssOm5OMtJK28=;
        b=IabmMBo9JZgDe2BITgKoSd0ZPWqkPXgWXDLpyoTr0ewr41FJMkX9tkgORO02AjszxFMU77VeMTAXxNI5/cQQEOMVilsvVLXnfyKo+cnyBFKaAPc24B4f+MCatzlPuEP5EP4mM5jSaibi3ii/Soc9bYDdp3pjxCE4VRYClNvWjQ8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=j+z8st2ARngh0YgfOhazzoC1HLvaxyFpqnCBFFe7vvkknlRQ2CPkvlrukNnIjMy05aQGCyHDsAr/bvzNGLwW7a3SWJc44hnPeil0S7K5Z9oLVXysyE3lAiblwXO4utexTuyOGDfF4e9J7bBMaDpzzH5Uuhl0cA0gPRbwAX/+RXc=
Received: by 10.82.158.12 with SMTP id g12mr12991691bue.18.1202129400312;
        Mon, 04 Feb 2008 04:50:00 -0800 (PST)
Received: by 10.82.145.2 with HTTP; Mon, 4 Feb 2008 04:50:00 -0800 (PST)
Message-ID: <1bcb7c7f0802040450k1ca47982v66894276f1c20c2b@mail.gmail.com>
Date: Mon, 4 Feb 2008 14:50:00 +0200
From: "Cam Bazz" <cambazz@gmail.com>
To: java-user@lucene.apache.org
Subject: DefaultIndexAccessor
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_4987_20677611.1202129400305"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_4987_20677611.1202129400305
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hello,

Regarding https://issues.apache.org/jira/browse/LUCENE-1026 , this seems
very interesting. I have read the discussion on the page, but I could not
figure out which set of files is the latest.
Is it the IndexAccessor-1.26.2008.zip file?

I will read through the code, make my own tests, and send some feedback.

Best.
-C.B.

------=_Part_4987_20677611.1202129400305--

From java-user-return-32386-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 04 13:07:30 2008
Return-Path: <java-user-return-32386-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 2971 invoked from network); 4 Feb 2008 13:07:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Feb 2008 13:07:30 -0000
Received: (qmail 48808 invoked by uid 500); 4 Feb 2008 13:07:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48778 invoked by uid 500); 4 Feb 2008 13:07:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48767 invoked by uid 99); 4 Feb 2008 13:07:15 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Feb 2008 05:07:15 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of markrmiller@gmail.com designates 64.233.166.181 as permitted sender)
Received: from [64.233.166.181] (HELO py-out-1112.google.com) (64.233.166.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Feb 2008 13:06:46 +0000
Received: by py-out-1112.google.com with SMTP id a73so2607460pye.9
        for <java-user@lucene.apache.org>; Mon, 04 Feb 2008 05:06:53 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        bh=GulGf/w49+Xs8L96Czacm8texScV/vEu70k+owboNVU=;
        b=bJ/GTiPUzBMLvkwCql6mFgOt6qk8yFUrZbLM/z57XMAWjSA12YQjOyTuYYg0+UrdiXTHlyf8pljcBCS41OnIy50AEKZyjxBeF46EEjRWgbWUUwxYWxgJDJ42Pch1Q5a1/ny+oeEA82xmTrGQSMVG2vBh+tkmAcWS2QuYLpRCg5s=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=COCBF86AeeZhd/ugk8qMKNptQNBJH+jEYZcQua3hwujk6fNj3scPTD5KZ3HgowjGLJmULTPu/ZsJnucmBHM1Mpqr+509qDsF7vOTUJsKilpj1oSnQFo0FRtn8hFGg0ChLZIVQP375imcnd+VJAJ1W1bGCUJbkR0nVB5zBzd3W6E=
Received: by 10.65.212.3 with SMTP id o3mr12779648qbq.30.1202130412353;
        Mon, 04 Feb 2008 05:06:52 -0800 (PST)
Received: from ?192.168.1.118? ( [69.124.234.183])
        by mx.google.com with ESMTPS id q15sm5453787qbq.0.2008.02.04.05.06.49
        (version=SSLv3 cipher=RC4-MD5);
        Mon, 04 Feb 2008 05:06:50 -0800 (PST)
Message-ID: <47A70DE3.50202@gmail.com>
Date: Mon, 04 Feb 2008 08:06:43 -0500
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.9 (Windows/20071031)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: DefaultIndexAccessor
References: <1bcb7c7f0802040450k1ca47982v66894276f1c20c2b@mail.gmail.com>
In-Reply-To: <1bcb7c7f0802040450k1ca47982v66894276f1c20c2b@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

IndexAccessor-1.26.2008.zip is the latest one. I will be dating a zip fro=
m now on.

I hope to post new code with the warming either tonight or tomorrow night=
=2E I would be ecstatic to have some help vetting that.

Also, I am thinking of making a change so that when you release the Write=
r the thread that releases does not block until reopen. I think the origi=
nal author did this so that if you add a doc with a thread and then immed=
iately search from the same thread, you are guaranteed to find the doc. H=
owever, this gaurentee did not hold -- if another thread had a reference =
to the Writer and a new thread grabbed a Writer and then quicly released =
before the first thread, you will have added a doc but it will not be vis=
ible until the first thread releases its reference to the Writer...since =
the concept is not enforced anyway, you might as well not block for the f=
inal thread that releases the Writer either. Instead I will grab a thread=
 from a thread pool to do the reopening with that thread, and return righ=
t after closing the Writer. The result is that you cannot add a doc and s=
earch and expect to find it without waiting a second or too. But this way=
 things will be consistent, and an app that adds docs will be a bit more =
responsive....eg it wont hang as Readers are being reopened.

I also have to bring the AccessProvider classes back. No easy way to use =
your own custom Readers without it...I shouldn't have stripped it out.

- Mark



Cam Bazz wrote:
> Hello,
>
> Regarding https://issues.apache.org/jira/browse/LUCENE-1026 , this seem=
s
> very interesting. I have read the discussion on the page, but I could n=
ot
> figure out which set of files is the latest.
> Is it the IndexAccessor-1.26.2008.zip file?
>
> I will read through the code, make my own tests, and send some feedback=
=2E
>
> Best.
> -C.B.
>
>  =20


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32387-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 04 14:13:19 2008
Return-Path: <java-user-return-32387-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31246 invoked from network); 4 Feb 2008 14:13:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Feb 2008 14:13:18 -0000
Received: (qmail 13095 invoked by uid 500); 4 Feb 2008 14:13:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13057 invoked by uid 500); 4 Feb 2008 14:13:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13046 invoked by uid 99); 4 Feb 2008 14:13:04 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Feb 2008 06:13:04 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of cambazz@gmail.com designates 72.14.214.236 as permitted sender)
Received: from [72.14.214.236] (HELO hu-out-0506.google.com) (72.14.214.236)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Feb 2008 14:12:36 +0000
Received: by hu-out-0506.google.com with SMTP id 27so2271796hub.15
        for <java-user@lucene.apache.org>; Mon, 04 Feb 2008 06:12:42 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=ikVR/xY4a2PqPpIhJIO1HxF9U5hAVNZN6Yieu1qjzm0=;
        b=oaKelsyx0c+9IDGeRXPDv0I4pGTh0wZhl15wKg46kAh4OlZYAJhxXBEJm4E0yEdvxtokiXuHgyy4zVCaGLINIt9S/8Tt5w2VsVsgOW6iIFcLjH8Di8RnEr/v9ZHUAifhEAZgWr2Sz0tkewf+ogT7qm+HoTK9AtNX8BGa9Dj0m7M=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=icZWEhpZIvlXmbTiw8P3U27fsOxmr2pilTPRosT/svcUzW0NQCXlNsPba3qq20UW8z/BJ1Prftr0k9bIPOzuHH5O4aVmfCcn/N6R26RsE2UjDp+j9HzwnRiDSlzzuDbUI5aP+Gt83QaNDsJ5ITc1C3PzQjlnyfnupSPdzTOmf+A=
Received: by 10.82.145.7 with SMTP id s7mr13139092bud.7.1202134362316;
        Mon, 04 Feb 2008 06:12:42 -0800 (PST)
Received: by 10.82.145.2 with HTTP; Mon, 4 Feb 2008 06:12:42 -0800 (PST)
Message-ID: <1bcb7c7f0802040612m1e2bdc07h9a2eaa531fc3dd5@mail.gmail.com>
Date: Mon, 4 Feb 2008 16:12:42 +0200
From: "Cam Bazz" <cambazz@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: DefaultIndexAccessor
In-Reply-To: <47A70DE3.50202@gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_5379_30791427.1202134362312"
References: <1bcb7c7f0802040450k1ca47982v66894276f1c20c2b@mail.gmail.com>
	 <47A70DE3.50202@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_5379_30791427.1202134362312
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hello Mark,

I have been reading the code - and honestly I have not understood how it
works. I was hoping that this was a solution to the case when you are adding
documents - in a multithreaded way, it allows other non-writer threads to be
able to see documents added without refreshing the indexsearcher - by using
some caching mechanism.

Could you elaborate what IndexAccessor does and how it does it a little bit
more?

Best Regards,
-C.B.

On Feb 4, 2008 3:06 PM, Mark Miller <markrmiller@gmail.com> wrote:

> IndexAccessor-1.26.2008.zip is the latest one. I will be dating a zip from
> now on.
>
> I hope to post new code with the warming either tonight or tomorrow night.
> I would be ecstatic to have some help vetting that.
>
> Also, I am thinking of making a change so that when you release the Writer
> the thread that releases does not block until reopen. I think the original
> author did this so that if you add a doc with a thread and then immediately
> search from the same thread, you are guaranteed to find the doc. However,
> this gaurentee did not hold -- if another thread had a reference to the
> Writer and a new thread grabbed a Writer and then quicly released before the
> first thread, you will have added a doc but it will not be visible until the
> first thread releases its reference to the Writer...since the concept is not
> enforced anyway, you might as well not block for the final thread that
> releases the Writer either. Instead I will grab a thread from a thread pool
> to do the reopening with that thread, and return right after closing the
> Writer. The result is that you cannot add a doc and search and expect to
> find it without waiting a second or too. But this way things will be
> consistent, and an app that adds docs will be a bit more responsive....eg it
> wont hang as Readers are being reopened.
>
> I also have to bring the AccessProvider classes back. No easy way to use
> your own custom Readers without it...I shouldn't have stripped it out.
>
> - Mark
>
>
>
> Cam Bazz wrote:
> > Hello,
> >
> > Regarding https://issues.apache.org/jira/browse/LUCENE-1026 , this seems
> > very interesting. I have read the discussion on the page, but I could
> not
> > figure out which set of files is the latest.
> > Is it the IndexAccessor-1.26.2008.zip file?
> >
> > I will read through the code, make my own tests, and send some feedback.
> >
> > Best.
> > -C.B.
> >
> >
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_5379_30791427.1202134362312--

From java-user-return-32388-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 04 14:35:47 2008
Return-Path: <java-user-return-32388-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44305 invoked from network); 4 Feb 2008 14:35:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Feb 2008 14:35:47 -0000
Received: (qmail 56168 invoked by uid 500); 4 Feb 2008 14:35:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56144 invoked by uid 500); 4 Feb 2008 14:35:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56133 invoked by uid 99); 4 Feb 2008 14:35:32 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Feb 2008 06:35:32 -0800
X-ASF-Spam-Status: No, hits=1.0 required=10.0
	tests=EXTRA_MPART_TYPE,HTML_MESSAGE,RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [216.251.50.9] (HELO SFOVWL03.infosys.com) (216.251.50.9)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Feb 2008 14:35:17 +0000
Received: from indhubbhs01.ad.infosys.com ([192.168.200.81]) by SFOVWL03.infosys.com with InterScan Message Security Suite; Mon, 04 Feb 2008 06:33:15 -0800
Received: from blrkechub04.ad.infosys.com ([10.66.236.44]) by indhubbhs01.ad.infosys.com with Microsoft SMTPSVC(6.0.3790.3959);
	 Mon, 4 Feb 2008 20:04:52 +0530
Received: from BLRKECMBX06.ad.infosys.com ([10.66.236.32]) by
 blrkechub04.ad.infosys.com ([10.66.236.44]) with mapi; Mon, 4 Feb 2008
 20:04:51 +0530
From: Allahbaksh Mohammedali Asadullah <Allahbaksh_Asadullah@infosys.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Mon, 4 Feb 2008 20:04:51 +0530
Subject: Lucene 
Thread-Topic: Lucene 
Thread-Index: AchnOxnVK+lOcUjbSja8gQYFg48BOA==
Message-ID: <68959F25CDEBCB4F917D5A253291D73E07CD97AE32@BLRKECMBX06.ad.infosys.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach: yes
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: multipart/related;
	boundary="_004_68959F25CDEBCB4F917D5A253291D73E07CD97AE32BLRKECMBX06ad_";
	type="multipart/alternative"
MIME-Version: 1.0
X-OriginalArrivalTime: 04 Feb 2008 14:34:52.0226 (UTC) FILETIME=[1A504A20:01C8673B]
X-Virus-Checked: Checked by ClamAV on apache.org

--_004_68959F25CDEBCB4F917D5A253291D73E07CD97AE32BLRKECMBX06ad_
Content-Type: multipart/alternative;
	boundary="_000_68959F25CDEBCB4F917D5A253291D73E07CD97AE32BLRKECMBX06ad_"

--_000_68959F25CDEBCB4F917D5A253291D73E07CD97AE32BLRKECMBX06ad_
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable


Hi,
I have following requirement


                        Value           Match Extent
Fieldname1       c1                     23
Fieldname2       c2                     26
Filedname3       c8                     85

Can I use lucene for the same. If yes what is easiest and the best way to=
 use.

Regards,
Allahbaksh

Allahbaksh Mohammedali Asadullah,
Software Engineering & Technology Labs,
Infosys Technolgies Limited, Electronics City,
Hosur Road, Bangalore 560 100, India.
*Board: +91-80-28520261 | Extn: 53915 | Direct: 41173915.
Fax: +91-80-28520362 | Mobile: +91-9845505322.
[cid:image001.jpg@01C86769.3388CED0]



**************** CAUTION - Disclaimer *****************
This e-mail contains PRIVILEGED AND CONFIDENTIAL INFORMATION intended=
 solely for the use of the addressee(s). If you are not the intended=
 recipient, please notify the sender by e-mail and delete the original=
 message. Further, you are not to copy, disclose, or distribute this e-mail=
 or its contents to any other person and any such actions are unlawful.=
 This e-mail may contain viruses. Infosys has taken every reasonable=
 precaution to minimize this risk, but is not liable for any damage you may=
 sustain as a result of any virus in this e-mail. You should carry out your=
 own virus checks before opening the e-mail or attachment. Infosys reserves=
 the right to monitor and review the content of all messages sent to or=
 from this e-mail address. Messages sent to or from this e-mail address may=
 be stored on the Infosys e-mail system.
***INFOSYS******** End of Disclaimer ********INFOSYS***
--_000_68959F25CDEBCB4F917D5A253291D73E07CD97AE32BLRKECMBX06ad_
Content-Type: text/html; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

<html xmlns:v=3D"urn:schemas-microsoft-com:vml" xmlns:o=
=3D"urn:schemas-microsoft-com:office:office" xmlns:w=
=3D"urn:schemas-microsoft-com:office:word" xmlns:st1=
=3D"urn:schemas-microsoft-com:office:smarttags" xmlns=
=3D"http://www.w3.org/TR/REC-html40">

<head>
<META HTTP-EQUIV=3D"Content-Type" CONTENT=3D"text/html; charset=
=3Dus-ascii">
<meta name=3DGenerator content=3D"Microsoft Word 11 (filtered medium)">
<!--[if !mso]>
<style>
v\:* {behavior:url(#default#VML);}
o\:* {behavior:url(#default#VML);}
w\:* {behavior:url(#default#VML);}
.shape {behavior:url(#default#VML);}
</style>
<![endif]--><o:SmartTagType
 namespaceuri=3D"urn:schemas-microsoft-com:office:smarttags" name=
=3D"country-region"/>
<o:SmartTagType namespaceuri=3D"urn:schemas-microsoft-com:office:smarttags"
 name=3D"address"/>
<o:SmartTagType namespaceuri=3D"urn:schemas-microsoft-com:office:smarttags"
 name=3D"City"/>
<o:SmartTagType namespaceuri=3D"urn:schemas-microsoft-com:office:smarttags"
 name=3D"Street"/>
<o:SmartTagType namespaceuri=3D"urn:schemas-microsoft-com:office:smarttags"
 name=3D"place"/>
<o:SmartTagType namespaceuri=3D"urn:schemas-microsoft-com:office:smarttags"
 name=3D"PlaceName"/>
<!--[if !mso]>
<style>
st1\:*{behavior:url(#default#ieooui) }
</style>
<![endif]-->
<style>
<!--
 /* Font Definitions */
 @font-face
	{font-family:Wingdings;
	panose-1:5 0 0 0 0 0 0 0 0 0;}
 /* Style Definitions */
 p.MsoNormal, li.MsoNormal, div.MsoNormal
	{margin:0in;
	margin-bottom:.0001pt;
	font-size:12.0pt;
	font-family:"Times New Roman";}
a:link, span.MsoHyperlink
	{color:blue;
	text-decoration:underline;}
a:visited, span.MsoHyperlinkFollowed
	{color:purple;
	text-decoration:underline;}
span.EmailStyle17
	{mso-style-type:personal-compose;
	font-family:Arial;
	color:windowtext;}
@page Section1
	{size:8.5in 11.0in;
	margin:1.0in 1.25in 1.0in 1.25in;}
div.Section1
	{page:Section1;}
-->
</style>

</head>

<body lang=3DEN-US link=3Dblue vlink=3Dpurple>

<div class=3DSection1>

<p class=3DMsoNormal><font size=3D2 face=3DArial><span style=
=3D'font-size:10.0pt;
font-family:Arial'>Hi,<o:p></o:p></span></font></p>

<p class=3DMsoNormal><font size=3D2 face=3DArial><span style=
=3D'font-size:10.0pt;
font-family:Arial'>I have following=
 requirement<o:p></o:p></span></font></p>

<p class=3DMsoNormal><font size=3D2 face=3DArial><span style=
=3D'font-size:10.0pt;
font-family:Arial'><o:p>&nbsp;</o:p></span></font></p>

<p class=3DMsoNormal><font size=3D2 face=3DArial><span style=
=3D'font-size:10.0pt;
font-family:Arial'><o:p>&nbsp;</o:p></span></font></p>

<p class=3DMsoNormal><font size=3D2 face=3DArial><span style=
=3D'font-size:10.0pt;
font-family:Arial'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&n=
bsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp=
;&nbsp; Value&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Match=
 Extent<o:p></o:p></span></font></p>

<p class=3DMsoNormal><font size=3D2 face=3DArial><span style=
=3D'font-size:10.0pt;
font-family:Arial'>Fieldname1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
 c1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
 23<o:p></o:p></span></font></p>

<p class=3DMsoNormal><font size=3D2 face=3DArial><span style=
=3D'font-size:10.0pt;
font-family:Arial'>Fieldname2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
 c2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
 26<o:p></o:p></span></font></p>

<p class=3DMsoNormal><font size=3D2 face=3DArial><span style=
=3D'font-size:10.0pt;
font-family:Arial'>Filedname3&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
 c8&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
 85<o:p></o:p></span></font></p>

<p class=3DMsoNormal><font size=3D2 face=3DArial><span style=
=3D'font-size:10.0pt;
font-family:Arial'><o:p>&nbsp;</o:p></span></font></p>

<p class=3DMsoNormal><font size=3D2 face=3DArial><span style=
=3D'font-size:10.0pt;
font-family:Arial'>Can I use lucene for the same. If yes what is easiest=
 and the
best way to use.<o:p></o:p></span></font></p>

<p class=3DMsoNormal><font size=3D2 face=3DArial><span style=
=3D'font-size:10.0pt;
font-family:Arial'><o:p>&nbsp;</o:p></span></font></p>

<p class=3DMsoNormal><font size=3D2 face=3DArial><span style=
=3D'font-size:10.0pt;
font-family:Arial'>Regards,<o:p></o:p></span></font></p>

<p class=3DMsoNormal><font size=3D2 face=3DArial><span style=
=3D'font-size:10.0pt;
font-family:Arial'>Allahbaksh<o:p></o:p></span></font></p>

<p class=3DMsoNormal><font size=3D2 face=3DArial><span style=
=3D'font-size:10.0pt;
font-family:Arial'><o:p>&nbsp;</o:p></span></font></p>

<p class=3DMsoNormal><font size=3D3 color=3Dblue face=3D"Times New=
 Roman"><span
style=3D'font-size:12.0pt;color:blue'>Allahbaksh Mohammedali=
 Asadullah,<o:p></o:p></span></font></p>

<p class=3DMsoNormal><strong><b><font size=3D2 color=3Dnavy face=3D"Times=
 New Roman"><span
style=3D'font-size:10.0pt;color:navy'>S</span></font></b></strong><font=
 size=3D2
color=3Dnavy><span style=3D'font-size:10.0pt;color:navy'>oftware=
 <strong><b><font
face=3D"Times New Roman">E</font></b></strong>ngineering &amp;=
 <strong><b><font
face=3D"Times New Roman">T</font></b></strong>echnology <strong><b><font
face=3D"Times New Roman">L</font></b></strong>abs,</span></font><font color=
=3Dblue><span
style=3D'color:blue'><o:p></o:p></span></font></p>

<p class=3DMsoNormal><font size=3D2 color=3Dnavy face=3D"Times New=
 Roman"><span
style=3D'font-size:10.0pt;color:navy'>Infosys Technolgies Limited,=
 <u1:place u2:st=3D"on"><u1:PlaceName u2:st=3D"on"><st1:place
w:st=3D"on"><st1:PlaceName w:st=
=3D"on">Electronics</u1:PlaceName></st1:PlaceName></st1:place>
<u1:PlaceType u2:st=
=3D"on">City</u1:PlaceType></u1:PlaceType></u1:place>,</span></font><font
color=3Dblue><span style=3D'color:blue'><o:p></o:p></span></font></p>

<p class=3DMsoNormal><u1:address style=3D"BACKGROUND-POSITION: left bottom;=
 BACKGROUND-IMAGE: url(res://ietag.dll/#34/#1001); BACKGROUND-REPEAT:=
 repeat-x" tabIndex=3D"0" u2:st=3D"on"><u1:Street u2:st=3D"on"><st1:address
w:st=3D"on"><st1:Street w:st=3D"on"><font size=3D2 color=3Dnavy face=
=3D"Times New Roman"><span
  style=3D'font-size:10.0pt;color:navy'>Hosur=
 Road</span></font></st1:Street><font
 size=3D2 color=3Dnavy><span style=
=3D'font-size:10.0pt;color:navy'></u1:address></u1:Street>,
 <u1:City u2:st=3D"on"><st1:City w:st=
=3D"on">Bangalore</u1:City></st1:City></span></font></st1:address><font
size=3D2 color=3Dnavy><span style=3D'font-size:10.0pt;color:navy'> 560 100,=
 <u1:place u2:st=3D"on"><u1:country-region u2:st=3D"on"><st1:country-region
w:st=3D"on"><st1:place w:st=
=3D"on">India</u1:country-region></u1:country-region></u1:place></st1:place=
></st1:country-region>.</span></font><font
color=3Dblue><span style=3D'color:blue'><o:p></o:p></span></font></p>

<p class=3DMsoNormal><font size=3D2 color=3Dnavy face=3DWingdings><span
style=
=3D'font-size:10.0pt;font-family:Wingdings;color:navy'>(</span></font><font
size=3D2 color=3Dnavy><span style=3D'font-size:10.0pt;color:navy'>Board:
+91-80-28520261 | Extn:&nbsp;53915 | Direct: 41173915.</span></font><font
color=3Dblue><span style=3D'color:blue'><o:p></o:p></span></font></p>

<p class=3DMsoNormal><font size=3D2 color=3Dnavy face=3D"Times New=
 Roman"><span
style=3D'font-size:10.0pt;color:navy'>Fax: +91-80-28520362 | Mobile:
+91-9845505322.<o:p></o:p></span></font></p>

<p class=3DMsoNormal><font size=3D3 color=3Dblue face=3D"Times New=
 Roman"><span
style=3D'font-size:12.0pt;color:blue'><img width=3D185 height=3D48 id=
=3D"_x0000_i1025"
src=3D"cid:image001.jpg@01C86769.3388CED0" border=
=3D0></span><o:p></o:p></font></p>

<p class=3DMsoNormal><font size=3D3 face=3D"Times New Roman"><span style=
=3D'font-size:
12.0pt'><o:p>&nbsp;</o:p></span></font></p>

</div>

</body>

</html>

<table><tr><td bgcolor=3D#ffffff><font color=3D#000000>****************=
 CAUTION - Disclaimer *****************<br>
This e-mail contains PRIVILEGED AND CONFIDENTIAL INFORMATION intended=
 solely for the use of the addressee(s). If you are not the intended=
 recipient, please notify the sender by e-mail and delete the original=
 message. Further, you are not to copy, disclose, or distribute this e-mail=
 or its contents to any other person and any such actions are unlawful.=
 This e-mail may contain viruses. Infosys has taken every reasonable=
 precaution to minimize this risk, but is not liable for any damage you may=
 sustain as a result of any virus in this e-mail. You should carry out your=
 own virus checks before opening the e-mail or attachment. Infosys reserves=
 the right to monitor and review the content of all messages sent to or=
 from this e-mail address. Messages sent to or from this e-mail address may=
 be stored on the Infosys e-mail system.<br>
***INFOSYS******** End of Disclaimer ********INFOSYS***<br>
</font></td></tr></table>
--_000_68959F25CDEBCB4F917D5A253291D73E07CD97AE32BLRKECMBX06ad_--

--_004_68959F25CDEBCB4F917D5A253291D73E07CD97AE32BLRKECMBX06ad_--


From java-user-return-32389-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 04 15:11:12 2008
Return-Path: <java-user-return-32389-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25748 invoked from network); 4 Feb 2008 15:11:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Feb 2008 15:11:12 -0000
Received: (qmail 95456 invoked by uid 500); 4 Feb 2008 15:10:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95406 invoked by uid 500); 4 Feb 2008 15:10:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95395 invoked by uid 99); 4 Feb 2008 15:10:58 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Feb 2008 07:10:58 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.134.188 as permitted sender)
Received: from [209.85.134.188] (HELO mu-out-0910.google.com) (209.85.134.188)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Feb 2008 15:10:30 +0000
Received: by mu-out-0910.google.com with SMTP id g7so1501847muf.0
        for <java-user@lucene.apache.org>; Mon, 04 Feb 2008 07:10:35 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=evkIcyUsol0bIGBkxUVjp2uZ4/yXapJHJXi5Kju3A00=;
        b=M+jH+R1VVEYEzQe0zitpqroxJDzUbqzYYH3cdyQ7ASV1CFvx0P4HSEoQtdj3NhdQoPNZQttZXDA2+zSxspPYsPz8It0bmIpUlj1pQ7eiqtXZyiA++mYu/KPJSWdjT8pLxI2NBz6tWtclJ6RXMTte45lqOIpt+dOLxHX4GP2wbCo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=rdNwIcy2dnQZpc7H5MtEr1yQF9loa82bbhPGKZZ6muBPRWDgae6TacmaMzdzOBVMTI9TmYWXbIdsh6PRjpywwJmMguctuTFygzgfHP2N5ub1Vvx9mQg9huIiSqc66KQNRXPvb8ihNdsCTDyq20POmWODsk43ET+WEZNPsS6Ycgs=
Received: by 10.82.181.7 with SMTP id d7mr13229476buf.8.1202137833665;
        Mon, 04 Feb 2008 07:10:33 -0800 (PST)
Received: by 10.82.151.7 with HTTP; Mon, 4 Feb 2008 07:10:33 -0800 (PST)
Message-ID: <359a92830802040710m4b327565j1a2bd1915b43aa6f@mail.gmail.com>
Date: Mon, 4 Feb 2008 10:10:33 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Random selection of files
In-Reply-To: <2F77E293C046E7469D72240E09A2FB100E782C25@hermes.ctp.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_3833_11569352.1202137833636"
References: <2F77E293C046E7469D72240E09A2FB100E782C25@hermes.ctp.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_3833_11569352.1202137833636
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Well, assuming that by "same weight" you are referring to the document
scores (relevance), you certainly have to do the search first. But you can
use TopDocs to get a list of the document IDs arranged by decreasing
score i.e. sorted by relevance.

But "same weight" is tricky. It's virtually certain that your first 1,000
documents
will NOT have the same relevance score. Whether they differ by a little or a
lot
is entirely dependent upon the query and your corpus. Note that TopDocs
scores
are NOT normalized, although you can normalize them because TopDocs will
max score of any doc in this search. Si O assume you'll have to make a
decision
how many of the docs constitute the set relevant enough to have in your set
of choices.

So, it should be pretty straightforward to get a list of the top N document
IDs.
If speed is an issue, think about lazy loading the fields you need to
extract
from each document.

But you certainly don't want to do this with a Hits object for any number
greater
than about 100, since the Hits object will re-execute the query every 100
docs or
so.

Best
Erick


On Feb 4, 2008 6:37 AM, Juerg Meier <Juerg.Meier@ctp-consulting.com> wrote:

> Hi,
>
> We have the requirement for an "i'm feeling lucky" button, at least sort
> of. Whereas google just delivers the first record in a result set, we should
> deliver 10 arbitrary hits chosen out of, let's say, 1000. All of these
> documents have the same importance i.e. have the same weight.
>
> So, is there an elegant way with the Lucene API to achieve this? Or do we
> need to retrieve all 1000 docs first, to do a random selection on our own
> afterwards? That appears to be quite expensive.
>
> Thanks for any hint,
> -- Juerg
>

------=_Part_3833_11569352.1202137833636--

From java-user-return-32390-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 04 15:14:33 2008
Return-Path: <java-user-return-32390-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 27373 invoked from network); 4 Feb 2008 15:14:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Feb 2008 15:14:30 -0000
Received: (qmail 3090 invoked by uid 500); 4 Feb 2008 15:14:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2853 invoked by uid 500); 4 Feb 2008 15:14:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2842 invoked by uid 99); 4 Feb 2008 15:14:16 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Feb 2008 07:14:16 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.128.186 as permitted sender)
Received: from [209.85.128.186] (HELO fk-out-0910.google.com) (209.85.128.186)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Feb 2008 15:13:48 +0000
Received: by fk-out-0910.google.com with SMTP id z23so1973077fkz.5
        for <java-user@lucene.apache.org>; Mon, 04 Feb 2008 07:13:54 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=0Zd0L+C+Bnf7LI0AaKE4LJRbS5/EeQ8NqoSHwS3FLzI=;
        b=ttLcGemUrs4v90qaJ8NoZim341/LTzjxeosZPjVCnMRqVgUzK2qVa4Y4MU4rjMmkof6gb+/CVhRfT4fadk03IRAdkTWnUpK7qyqvlmgwdnO+cPSoQceMYTi6UXCUv4LNVn6porOzkBlvhnpeq0fXFFxfQ6UILEGEqkFUf0TbMxQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=Qs4RJlePag6XM+FGRBINKwfWIIHmPGs+nmWY/y0r4QgkqaQT4ll7Vs+ErK3HHhHtKlO9ZdEJrqTID5Jd3aWQh7FY6uxvoGcdToO3rB+7oabyEsc5qwBQDCVJ0vClkx4X3O8j2Ek9AFw0faLrGw/bM772o2A/gAWGrw904ZHaej0=
Received: by 10.82.150.20 with SMTP id x20mr13194025bud.37.1202138033738;
        Mon, 04 Feb 2008 07:13:53 -0800 (PST)
Received: by 10.82.151.7 with HTTP; Mon, 4 Feb 2008 07:13:53 -0800 (PST)
Message-ID: <359a92830802040713n69605f46o3ab01341705d669a@mail.gmail.com>
Date: Mon, 4 Feb 2008 10:13:53 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene
In-Reply-To: <68959F25CDEBCB4F917D5A253291D73E07CD97AE32@BLRKECMBX06.ad.infosys.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_3843_6591938.1202138033728"
References: <68959F25CDEBCB4F917D5A253291D73E07CD97AE32@BLRKECMBX06.ad.infosys.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_3843_6591938.1202138033728
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I don't understand what you're trying to do with "match extent". Perhaps
a bit more explanation of the problem you're trying to solve would get
you more helpful answers <G>...

Best
Erick

On Feb 4, 2008 9:34 AM, Allahbaksh Mohammedali Asadullah <
Allahbaksh_Asadullah@infosys.com> wrote:

>  Hi,
>
> I have following requirement
>
>
>
>
>
>                         Value           Match Extent
>
> Fieldname1       c1                     23
>
> Fieldname2       c2                     26
>
> Filedname3       c8                     85
>
>
>
> Can I use lucene for the same. If yes what is easiest and the best way to
> use.
>
>
>
> Regards,
>
> Allahbaksh
>
>
>
> Allahbaksh Mohammedali Asadullah,
>
> *S*oftware *E*ngineering & *T*echnology *L*abs,
>
> Infosys Technolgies Limited, Electronics City,
>
> Hosur Road, Bangalore 560 100, India.
>
> (Board: +91-80-28520261 | Extn: 53915 | Direct: 41173915.
>
> Fax: +91-80-28520362 | Mobile: +91-9845505322.
>
>
>  **************** CAUTION - Disclaimer *****************
> This e-mail contains PRIVILEGED AND CONFIDENTIAL INFORMATION intended
> solely for the use of the addressee(s). If you are not the intended
> recipient, please notify the sender by e-mail and delete the original
> message. Further, you are not to copy, disclose, or distribute this e-mail
> or its contents to any other person and any such actions are unlawful. This
> e-mail may contain viruses. Infosys has taken every reasonable precaution to
> minimize this risk, but is not liable for any damage you may sustain as a
> result of any virus in this e-mail. You should carry out your own virus
> checks before opening the e-mail or attachment. Infosys reserves the right
> to monitor and review the content of all messages sent to or from this
> e-mail address. Messages sent to or from this e-mail address may be stored
> on the Infosys e-mail system.
> ***INFOSYS******** End of Disclaimer ********INFOSYS***
>

------=_Part_3843_6591938.1202138033728--

From java-user-return-32391-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 04 15:25:44 2008
Return-Path: <java-user-return-32391-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33620 invoked from network); 4 Feb 2008 15:25:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Feb 2008 15:25:44 -0000
Received: (qmail 25629 invoked by uid 500); 4 Feb 2008 15:25:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25599 invoked by uid 500); 4 Feb 2008 15:25:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25582 invoked by uid 99); 4 Feb 2008 15:25:29 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Feb 2008 07:25:29 -0800
X-ASF-Spam-Status: No, hits=-4.0 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [216.251.50.9] (HELO SFOVWL03.infosys.com) (216.251.50.9)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Feb 2008 15:25:01 +0000
Received: from INDHUBBHS02.ad.infosys.com ([192.168.200.82]) by SFOVWL03.infosys.com with InterScan Message Security Suite; Mon, 04 Feb 2008 07:23:14 -0800
Received: from blrkechub02.ad.infosys.com ([10.66.236.42]) by INDHUBBHS02.ad.infosys.com with Microsoft SMTPSVC(6.0.3790.3959);
	 Mon, 4 Feb 2008 20:55:00 +0530
Received: from BLRKECMBX06.ad.infosys.com ([10.66.236.32]) by
 blrkechub02.ad.infosys.com ([10.66.236.42]) with mapi; Mon, 4 Feb 2008
 20:54:59 +0530
From: Allahbaksh Mohammedali Asadullah <Allahbaksh_Asadullah@infosys.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Mon, 4 Feb 2008 20:54:59 +0530
Subject: RE: Lucene
Thread-Topic: Lucene
Thread-Index: AchnQKbEst4rsSqsRLm4jSoO17cYKgAAFeWA
Message-ID: <68959F25CDEBCB4F917D5A253291D73E07CD97AE62@BLRKECMBX06.ad.infosys.com>
References: <68959F25CDEBCB4F917D5A253291D73E07CD97AE32@BLRKECMBX06.ad.infosys.com>
 <359a92830802040713n69605f46o3ab01341705d669a@mail.gmail.com>
In-Reply-To: <359a92830802040713n69605f46o3ab01341705d669a@mail.gmail.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0
X-OriginalArrivalTime: 04 Feb 2008 15:25:00.0057 (UTC) FILETIME=[1B1EE090:01C86742]
X-Virus-Checked: Checked by ClamAV on apache.org

First I want to search document which have values c1 then search document w=
hich has c1 as one of field value. I know we can use Term Query but is it t=
he way we should do?
Can't we save something like this filedname1: c1-23 and while parsing get c=
1 and 23 as two fields. I should also able to query filedname1 with range q=
uery.
If you can provide your telephone number I can explain the same to you.
Regards,
Allahbaksh
-----Original Message-----
From: Erick Erickson [mailto:erickerickson@gmail.com]
Sent: Monday, February 04, 2008 8:44 PM
To: java-user@lucene.apache.org
Subject: Re: Lucene

I don't understand what you're trying to do with "match extent". Perhaps
a bit more explanation of the problem you're trying to solve would get
you more helpful answers <G>...

Best
Erick

On Feb 4, 2008 9:34 AM, Allahbaksh Mohammedali Asadullah <
Allahbaksh_Asadullah@infosys.com> wrote:

>  Hi,
>
> I have following requirement
>
>
>
>
>
>                         Value           Match Extent
>
> Fieldname1       c1                     23
>
> Fieldname2       c2                     26
>
> Filedname3       c8                     85
>
>
>
> Can I use lucene for the same. If yes what is easiest and the best way to
> use.
>
>
>
> Regards,
>
> Allahbaksh
>
>
>
> Allahbaksh Mohammedali Asadullah,
>
> *S*oftware *E*ngineering & *T*echnology *L*abs,
>
> Infosys Technolgies Limited, Electronics City,
>
> Hosur Road, Bangalore 560 100, India.
>
> (Board: +91-80-28520261 | Extn: 53915 | Direct: 41173915.
>
> Fax: +91-80-28520362 | Mobile: +91-9845505322.
>
>
>  **************** CAUTION - Disclaimer *****************
> This e-mail contains PRIVILEGED AND CONFIDENTIAL INFORMATION intended
> solely for the use of the addressee(s). If you are not the intended
> recipient, please notify the sender by e-mail and delete the original
> message. Further, you are not to copy, disclose, or distribute this e-mai=
l
> or its contents to any other person and any such actions are unlawful. Th=
is
> e-mail may contain viruses. Infosys has taken every reasonable precaution=
 to
> minimize this risk, but is not liable for any damage you may sustain as a
> result of any virus in this e-mail. You should carry out your own virus
> checks before opening the e-mail or attachment. Infosys reserves the righ=
t
> to monitor and review the content of all messages sent to or from this
> e-mail address. Messages sent to or from this e-mail address may be store=
d
> on the Infosys e-mail system.
> ***INFOSYS******** End of Disclaimer ********INFOSYS***
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32392-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 04 15:26:02 2008
Return-Path: <java-user-return-32392-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33699 invoked from network); 4 Feb 2008 15:26:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Feb 2008 15:26:02 -0000
Received: (qmail 27207 invoked by uid 500); 4 Feb 2008 15:25:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27177 invoked by uid 500); 4 Feb 2008 15:25:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27166 invoked by uid 99); 4 Feb 2008 15:25:48 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Feb 2008 07:25:47 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of rsk.sen@gmail.com designates 64.233.184.226 as permitted sender)
Received: from [64.233.184.226] (HELO wr-out-0506.google.com) (64.233.184.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Feb 2008 15:25:20 +0000
Received: by wr-out-0506.google.com with SMTP id c55so1577102wra.11
        for <java-user@lucene.apache.org>; Mon, 04 Feb 2008 07:25:27 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        bh=x1/sOgF0abXFGIUq6mD4CTPNHBI4o6fgNiSrvL79gk8=;
        b=xjs71i5Mo2+x6s0/ERAddnyrldz5NVPKW8HA0TC6bzzgt3JO0+jIpqmDlPmg7mMv0mthrshg47CI/AyhcnK3Nj58hhQuUKWjiF+eKRXkqLOllin0z0yjgKrOrG7GxyCP5XY4bh4EmA9JvwBz79QKBoyCUkYFaiu6iJHtw3pbF1Q=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=KGZfQnZMRYsnNsxcDvphiUFHEB5Au8OoTVHpctR9JOC47fugb5WhS7LfwWWph+w5aXlU9gik3wVdmlARQF8UqsHIyS56I97F5RPS+8YdpYYnix3I8jJPZ954Kb7LcEQi9ID1ZQGXYkFnyaoEfbs3HdUqXGZAz3qy1Z+lktsbVKs=
Received: by 10.142.73.8 with SMTP id v8mr3509903wfa.68.1202138725907;
        Mon, 04 Feb 2008 07:25:25 -0800 (PST)
Received: by 10.142.237.15 with HTTP; Mon, 4 Feb 2008 07:25:25 -0800 (PST)
Message-ID: <4628d2a90802040725v33ffd76x3638e0c34343190@mail.gmail.com>
Date: Mon, 4 Feb 2008 20:55:25 +0530
From: "SK R" <rsk.sen@gmail.com>
To: java-user@lucene.apache.org
Subject: outof memory error
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_7957_9476515.1202138725899"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_7957_9476515.1202138725899
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi,
   I got outof memory exception while  indexing  huge documents (~1GB) in
one thread and optimizing some other (2 to 3) indexes in different threads.
Max JVM heap size is 512MB. I'm using lucene2.3.0.

   Please suggest a way to avoid this exception.

Regards
  RSK

------=_Part_7957_9476515.1202138725899--

From java-user-return-32393-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 04 15:53:41 2008
Return-Path: <java-user-return-32393-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 49791 invoked from network); 4 Feb 2008 15:53:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Feb 2008 15:53:41 -0000
Received: (qmail 71083 invoked by uid 500); 4 Feb 2008 15:53:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70106 invoked by uid 500); 4 Feb 2008 15:53:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70095 invoked by uid 99); 4 Feb 2008 15:53:27 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Feb 2008 07:53:27 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.128.189 as permitted sender)
Received: from [209.85.128.189] (HELO fk-out-0910.google.com) (209.85.128.189)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Feb 2008 15:52:59 +0000
Received: by fk-out-0910.google.com with SMTP id z23so1984727fkz.5
        for <java-user@lucene.apache.org>; Mon, 04 Feb 2008 07:53:05 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=10Mvwg/vS5VZYoP3T3UZxc3ETI1/liovUVq1te506iU=;
        b=IvumYo+OBmXwm/WrXd/qEjON4Oz1bRYCaYUh5tQse/rx7fuazJb7rCoPdz83wFa+OcBCZf6xMEyuyeRy3D4UvDvptXM0fghf2ThuSr/cQTLFkSJFFeAuZLyWgPap22fKVJ9gziBay2biBfnSMalUFP7KgZQXMCFP7gGw5JSJiWw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=PkhQGcHvzn3eDk1cLn0i+96DhHpY0IRKliEX23kc3wHfqZ+waeRmW5Pd/3KeOdb36GsXBBuVw1edn4s6aZ3/3x/lRCYPDPL50dn3xFcnhMttAYrTE1jcuaUszZP45MshimsMak0E9NewWRuuUeJEXTyXCpmqCe06xSny8Jiw7Us=
Received: by 10.82.107.15 with SMTP id f15mr13337494buc.0.1202140384999;
        Mon, 04 Feb 2008 07:53:04 -0800 (PST)
Received: by 10.82.151.7 with HTTP; Mon, 4 Feb 2008 07:53:04 -0800 (PST)
Message-ID: <359a92830802040753g6f691030pa1221ac727d8a3be@mail.gmail.com>
Date: Mon, 4 Feb 2008 10:53:04 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: outof memory error
In-Reply-To: <4628d2a90802040725v33ffd76x3638e0c34343190@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_3994_21775820.1202140384990"
References: <4628d2a90802040725v33ffd76x3638e0c34343190@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_3994_21775820.1202140384990
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

ummmm index smaller documents? <G>

You cannot expect to index a 1G doc with 512M of memory in the JVM.
The first thing I'd try is upping your JVM memory to the max your machine
will accept.

Make sure you flush your IndexWriter before attempting to index this
document.

But I would not be surprised if this failed to solve the problem. What's in
this massive document? Would it be possible to break it up into
smaller segments and index many sub-documents for this massive doc?
I also wonder what problem you're trying to solve by indexing this doc.
Is it a log file? I can't imagine a text document that big. That's like a
100 volume encyclopedia, and I can't help but wonder whether your users
would be better served by indexing it in pieces.

Best
Erick

On Feb 4, 2008 10:25 AM, SK R <rsk.sen@gmail.com> wrote:

> Hi,
>   I got outof memory exception while  indexing  huge documents (~1GB) in
> one thread and optimizing some other (2 to 3) indexes in different
> threads.
> Max JVM heap size is 512MB. I'm using lucene2.3.0.
>
>   Please suggest a way to avoid this exception.
>
> Regards
>  RSK
>

------=_Part_3994_21775820.1202140384990--

From java-user-return-32394-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 04 17:16:44 2008
Return-Path: <java-user-return-32394-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93549 invoked from network); 4 Feb 2008 17:16:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Feb 2008 17:16:44 -0000
Received: (qmail 92880 invoked by uid 500); 4 Feb 2008 17:16:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92838 invoked by uid 500); 4 Feb 2008 17:16:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92827 invoked by uid 99); 4 Feb 2008 17:16:28 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Feb 2008 09:16:28 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of markrmiller@gmail.com designates 72.14.204.235 as permitted sender)
Received: from [72.14.204.235] (HELO qb-out-0506.google.com) (72.14.204.235)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Feb 2008 17:15:59 +0000
Received: by qb-out-0506.google.com with SMTP id o21so2518796qba.9
        for <java-user@lucene.apache.org>; Mon, 04 Feb 2008 09:16:06 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        bh=5eMqEHrdFggXEJNcNx9mTtHGN9XPIcHo6NLaMAwuQNo=;
        b=bb3arIXOjJ7NXVaGA4uH0qLxDg029/4ac7fTBWj3Rb2OWZJvJzV5/1K6w2uhFb4L/kAW/+a73pydMgz8g8OieQ1v45NjTm14Hr6L16E96JMfd3s13Hw3uMRpgqj13SLqsjYstBx5Bnn1FKQZF7st4tkpu/GdlxKbEPhMwzYfvt4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=WZEkn/qLhs6TWXvMMO3l5p+6TQnx1cfjsXy874mstFnrXD0VPfABDKQgIeEeX4hn/kK919YDjC8sY1Ja0x5svdwqYwhwAM2YCZTT0S4vAa6baYp/mHfH/MuBfuIy5ruOrA/wgEMeNayCnBsUc6uBPy9/YKDlgam56jT755IWXFA=
Received: by 10.114.169.2 with SMTP id r2mr1691862wae.76.1202145364577;
        Mon, 04 Feb 2008 09:16:04 -0800 (PST)
Received: from ?192.168.1.118? ( [69.124.234.183])
        by mx.google.com with ESMTPS id d2sm5686890qbc.36.2008.02.04.09.16.03
        (version=SSLv3 cipher=RC4-MD5);
        Mon, 04 Feb 2008 09:16:03 -0800 (PST)
Message-ID: <47A74849.3050005@gmail.com>
Date: Mon, 04 Feb 2008 12:15:53 -0500
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.9 (Windows/20071031)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: DefaultIndexAccessor
References: <1bcb7c7f0802040450k1ca47982v66894276f1c20c2b@mail.gmail.com>	 <47A70DE3.50202@gmail.com> <1bcb7c7f0802040612m1e2bdc07h9a2eaa531fc3dd5@mail.gmail.com>
In-Reply-To: <1bcb7c7f0802040612m1e2bdc07h9a2eaa531fc3dd5@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

The purpose of IndexAccessor is to coordinate Readers/Writers for a 
Lucene index. Readers and Writers in Lucene are multi-threaded in that 
multiple threads may use them at the same time, but they must/should be 
shared and there are special rules (You cannot delete with a Reader 
while a Writer is working on the index). Also, you need to refresh 
Reader views every so often; this is expensive (though usually much less 
so with the new reopen method).

IndexAccessor enforces the rules and controls Reader refreshing. Instead 
of worrying about caching or index interaction rules, you just ask for 
your Reader/Writer, use it to search or add a doc, and then return it. 
The rest is taken care of for you.

This is done by keeping a cached Writer and Searcher(s) that all threads 
share. References to the Searchers are counted so that after a Writer is 
returned (and no other thread has a reference to the Writer), 
IndexAccessor waits for all of the current Searchers to come back and 
then reopens their Readers.

In this regard, you get a  similar setup to what Solr might give: from 
any thread you just add docs and run searches -- you don't have to worry 
about refreshing Readers or sharing Writers/Readers or one thread 
deleting with a Reader while another thread tries to write with a Writer.

This setup allows you to do other cool things, like warm Searchers 
before putting them into action. Thats what the code I am posting soon 
is be capable of - when the Readers are reopened, search requests will 
still be handled by the old Readers while the new Searchers run a sample 
query with optional sort fields. This will make sure the Reader is open 
and its sort caches are loaded before the first thread tries to use it. 
Much faster response to applications.

You must  open a new Reader or reopen a Reader to see recently added 
docs...IndexAccessor provides no real way around that. But it does make 
the reopening much easier -- and your application that just wants to add 
docs and search at will from multiple threads, won't have to worry about it.

You can bail out here, or if you want further clarification I will 
include an alternate attempt at what IndexAccessor is below.

- Mark

----------------------------------------------------------------------------------------------------
When accessing a Lucene index from multiple threads, there are a variety 
of issues that you must address.

1. The Readers/Writer should be shared across threads.
2. Readers must periodically be refreshed, either be creating new 
instances or using the new reopen method.
3. A Reader that writes needs to be properly coordinated with a Writer 
eg they cannot be used at the same time.

IndexAccessor addresses each of these issues.

How it works:

A single Writer is shared among threads that try to concurrently 
retrieve and use a Writer. Once all of these threads release their 
reference
to the Writer, it is closed and upon the next request a new one is created.

A single Searcher for each Similarity is also shared across threads. 
Upon first request, a new Searcher is created. This Searcher is then 
returned
upon every request. A count of every Searcher reference retrieved is 
maintained.

When all references to a Writer are released, the Writer is closed and 
after waiting for all of the Searchers to be returned, the Searchers are
reopened. Without warming enabled, new requests for Searchers/Readers 
must wait for this reopen to complete. If warming is enabled, the old
Searchers/Readers continue handling Searcher requests until the Readers 
have been reopened and any requested sort caches have been loaded.

If you ask for a writing Reader, you will not get it until a Writer is 
released and vice versa.

The result is that you can freely use Writers/Readers/Searchers from any 
thread without considering thread interactions. ***

If you want to add docs, just ask for a Writer, add the docs, and 
release the Writer. If you want to search, get a Searcher, search,
and release the Searcher. You don't have to worry about reopening 
Readers or coordinating access.


***
You still do have to consider things like hogging the Writer/Readers - 
if you don't occasionally release them, things will not stay very 
interactive.
The best method is to just get the object, use it, and then return it in 
a finally block. Batch load multiple docs, but if your just randomly adding
a doc, get the Writer, add it, and then release the Writer in a finally 
block. If you are batch loading a million docs and you want to be able 
to see them
as they are added: get the writer and add 10,000 docs (or something), 
release the Writer, get the Writer and add 10,000 docs, etc.

Cam Bazz wrote:
> Hello Mark,
>
> I have been reading the code - and honestly I have not understood how it
> works. I was hoping that this was a solution to the case when you are adding
> documents - in a multithreaded way, it allows other non-writer threads to be
> able to see documents added without refreshing the indexsearcher - by using
> some caching mechanism.
>
> Could you elaborate what IndexAccessor does and how it does it a little bit
> more?
>
> Best Regards,
> -C.B.
>
> On Feb 4, 2008 3:06 PM, Mark Miller <markrmiller@gmail.com> wrote:
>
>   
>> IndexAccessor-1.26.2008.zip is the latest one. I will be dating a zip from
>> now on.
>>
>> I hope to post new code with the warming either tonight or tomorrow night.
>> I would be ecstatic to have some help vetting that.
>>
>> Also, I am thinking of making a change so that when you release the Writer
>> the thread that releases does not block until reopen. I think the original
>> author did this so that if you add a doc with a thread and then immediately
>> search from the same thread, you are guaranteed to find the doc. However,
>> this gaurentee did not hold -- if another thread had a reference to the
>> Writer and a new thread grabbed a Writer and then quicly released before the
>> first thread, you will have added a doc but it will not be visible until the
>> first thread releases its reference to the Writer...since the concept is not
>> enforced anyway, you might as well not block for the final thread that
>> releases the Writer either. Instead I will grab a thread from a thread pool
>> to do the reopening with that thread, and return right after closing the
>> Writer. The result is that you cannot add a doc and search and expect to
>> find it without waiting a second or too. But this way things will be
>> consistent, and an app that adds docs will be a bit more responsive....eg it
>> wont hang as Readers are being reopened.
>>
>> I also have to bring the AccessProvider classes back. No easy way to use
>> your own custom Readers without it...I shouldn't have stripped it out.
>>
>> - Mark
>>
>>
>>
>> Cam Bazz wrote:
>>     
>>> Hello,
>>>
>>> Regarding https://issues.apache.org/jira/browse/LUCENE-1026 , this seems
>>> very interesting. I have read the discussion on the page, but I could
>>>       
>> not
>>     
>>> figure out which set of files is the latest.
>>> Is it the IndexAccessor-1.26.2008.zip file?
>>>
>>> I will read through the code, make my own tests, and send some feedback.
>>>
>>> Best.
>>> -C.B.
>>>
>>>
>>>       
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>     
>
>   

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32395-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 04 17:18:59 2008
Return-Path: <java-user-return-32395-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95439 invoked from network); 4 Feb 2008 17:18:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Feb 2008 17:18:59 -0000
Received: (qmail 97747 invoked by uid 500); 4 Feb 2008 17:18:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96812 invoked by uid 500); 4 Feb 2008 17:18:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96801 invoked by uid 99); 4 Feb 2008 17:18:45 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Feb 2008 09:18:45 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erica.mitchell@iona.com designates 62.221.12.55 as permitted sender)
Received: from [62.221.12.55] (HELO emea-mx1.iona.com) (62.221.12.55)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Feb 2008 17:18:17 +0000
X-IronPort-AV: E=Sophos;i="4.25,303,1199664000"; 
   d="scan'208";a="1142164"
Received: from emea-ems1.ionaglobal.com ([10.2.1.125])
  by emea-mx1.iona.com with ESMTP; 04 Feb 2008 17:18:20 +0000
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Subject: Luke error browsing to a lucene index
Date: Mon, 4 Feb 2008 17:18:20 -0000
Message-ID: <E91104197DA2654DA833B6EB53B6C488032F7B32@emea-ems1.IONAGLOBAL.COM>
In-Reply-To: <15262216.post@talk.nabble.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Luke error browsing to a lucene index
Thread-Index: Achm6yx6vNimiHIASOanLN8wBfXYdwAZnDGQ
From: "Mitchell, Erica" <Erica.Mitchell@iona.com>
To: <java-user@lucene.apache.org>
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

I'm trying to test out Luke and I get an error saying unknown format
error:-4
The index I'm trying to point to is the one built by the demo in the
documentation for getting started with lucene.

Can anyone please tell me what this error might mean.

Thanks
Erica

----------------------------
IONA Technologies PLC (registered in Ireland)
Registered Number: 171387
Registered Address: The IONA Building, Shelbourne Road, Dublin 4, Ireland

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32396-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 04 18:01:29 2008
Return-Path: <java-user-return-32396-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12477 invoked from network); 4 Feb 2008 18:01:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Feb 2008 18:01:29 -0000
Received: (qmail 65695 invoked by uid 500); 4 Feb 2008 18:01:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65665 invoked by uid 500); 4 Feb 2008 18:01:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65654 invoked by uid 99); 4 Feb 2008 18:01:15 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Feb 2008 10:01:15 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.128.185 as permitted sender)
Received: from [209.85.128.185] (HELO fk-out-0910.google.com) (209.85.128.185)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Feb 2008 18:00:47 +0000
Received: by fk-out-0910.google.com with SMTP id z23so2020232fkz.5
        for <java-user@lucene.apache.org>; Mon, 04 Feb 2008 10:00:54 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=XDEyclxZvkVKHOwe3ufJWjr2isHfoeJnW79eoOTCi+M=;
        b=FMe+qsoj9NkfmA2BKiBzZmM0P41loIN5HtsO3fkzOUlgYFXFWgUl+Va+3LqPB7sGyk5wZ5AYoiTowV13+EoHbC/PbRkU4nVTVrorIDMJBgBfHAK2MayZkNMcV1qZlgisXQUkl95/JiQy2sHsa2sn+Mr7Ou3eGe6mXWOrBYE5Wew=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=Map6SzhzAFPzKI22QbAv4ejyVp0o8segHYlj0Gd6n16LtGS6F5vuAVQ8LqygplOmaHADkHYlHksR+08zfkYpcMAp2/91nhhqHgMmLwSyP8VooWfWzyz7EdZxoHNboD3Qz5HzCGIX8dVcv4DTEdLdsAk91UhmkUcKn/OAczxjC2U=
Received: by 10.82.172.10 with SMTP id u10mr13537700bue.14.1202148053380;
        Mon, 04 Feb 2008 10:00:53 -0800 (PST)
Received: by 10.82.151.7 with HTTP; Mon, 4 Feb 2008 10:00:53 -0800 (PST)
Message-ID: <359a92830802041000k17a8f16dk4ce11d141cbddb78@mail.gmail.com>
Date: Mon, 4 Feb 2008 13:00:53 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Luke error browsing to a lucene index
In-Reply-To: <E91104197DA2654DA833B6EB53B6C488032F7B32@emea-ems1.IONAGLOBAL.COM>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_4747_27457693.1202148053364"
References: <15262216.post@talk.nabble.com>
	 <E91104197DA2654DA833B6EB53B6C488032F7B32@emea-ems1.IONAGLOBAL.COM>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_4747_27457693.1202148053364
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

What versions of Luene and Luke are you using? Using the most
recent ones is usually a good place to start....

Best
Erick

On Feb 4, 2008 12:18 PM, Mitchell, Erica <Erica.Mitchell@iona.com> wrote:

> Hi,
>
> I'm trying to test out Luke and I get an error saying unknown format
> error:-4
> The index I'm trying to point to is the one built by the demo in the
> documentation for getting started with lucene.
>
> Can anyone please tell me what this error might mean.
>
> Thanks
> Erica
>
> ----------------------------
> IONA Technologies PLC (registered in Ireland)
> Registered Number: 171387
> Registered Address: The IONA Building, Shelbourne Road, Dublin 4, Ireland
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_4747_27457693.1202148053364--

From java-user-return-32397-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 04 18:02:21 2008
Return-Path: <java-user-return-32397-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12862 invoked from network); 4 Feb 2008 18:02:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Feb 2008 18:02:21 -0000
Received: (qmail 69101 invoked by uid 500); 4 Feb 2008 18:02:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69074 invoked by uid 500); 4 Feb 2008 18:02:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69057 invoked by uid 99); 4 Feb 2008 18:02:05 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Feb 2008 10:02:05 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of cambazz@gmail.com designates 72.14.214.228 as permitted sender)
Received: from [72.14.214.228] (HELO hu-out-0506.google.com) (72.14.214.228)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Feb 2008 18:01:37 +0000
Received: by hu-out-0506.google.com with SMTP id 27so2487458hub.15
        for <java-user@lucene.apache.org>; Mon, 04 Feb 2008 10:01:43 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=YF6Gs3JYnaaiWG9NZKsf8aOS5JEPRu6+Ty/Xnwp/pks=;
        b=pv2HAsoNSkkbAHhfK07mWrq/hDHYQVTof4SagY7XLD7ow6hBhIrK1zDY3gFha5WrjwpdqDa3vFsdAeMc16n2O+X1SjxqFKOJuV1dBcv8brtxSBBDCQkAdf0lXIZ9ju0PfETx+6cVR79pgrboHt+lWbUHKRfXq8UyFeT3SnkPJiM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=qE/1CSnGeUN6+e85pbUkxiYbte/gQfaZaRBM/KnsOs6+98FFCdfnGzbpBwvbaQIdiDse7e7lGB9D/ScuKGdarlLy5rY+gV2j3ZTcznh3bYqv+2OoCh5zPTlCBkh93hmq5D7JrgzwuFZljuvcWBjzN5qv52hrQCfxYi9lz4B7Gq4=
Received: by 10.82.112.3 with SMTP id k3mr13528083buc.31.1202148102985;
        Mon, 04 Feb 2008 10:01:42 -0800 (PST)
Received: by 10.82.145.2 with HTTP; Mon, 4 Feb 2008 10:01:42 -0800 (PST)
Message-ID: <1bcb7c7f0802041001k165bd530n75e692e635971182@mail.gmail.com>
Date: Mon, 4 Feb 2008 20:01:42 +0200
From: "Cam Bazz" <cambazz@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: DefaultIndexAccessor
In-Reply-To: <47A74849.3050005@gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_7138_3676389.1202148102977"
References: <1bcb7c7f0802040450k1ca47982v66894276f1c20c2b@mail.gmail.com>
	 <47A70DE3.50202@gmail.com>
	 <1bcb7c7f0802040612m1e2bdc07h9a2eaa531fc3dd5@mail.gmail.com>
	 <47A74849.3050005@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_7138_3676389.1202148102977
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hello Mark,

Thank you for your lengthy and valuable clarification. I have the case -
before adding to the index, i must check if a document exist with the
same key (actually, double key) - or before deleting a document - I must
ensure it exists in the index.

Currently I am doing it with my custom caching routine. It works quite well
upto 32M documents. but after that something happens and it really slows
down.

I will experiment with your implementation, as soon as I can. It is very
cool by the way. Will it be included in the next release?

Best,
-C.B.

On Feb 4, 2008 7:15 PM, Mark Miller <markrmiller@gmail.com> wrote:

> The purpose of IndexAccessor is to coordinate Readers/Writers for a
> Lucene index. Readers and Writers in Lucene are multi-threaded in that
> multiple threads may use them at the same time, but they must/should be
> shared and there are special rules (You cannot delete with a Reader
> while a Writer is working on the index). Also, you need to refresh
> Reader views every so often; this is expensive (though usually much less
> so with the new reopen method).
>
> IndexAccessor enforces the rules and controls Reader refreshing. Instead
> of worrying about caching or index interaction rules, you just ask for
> your Reader/Writer, use it to search or add a doc, and then return it.
> The rest is taken care of for you.
>
> This is done by keeping a cached Writer and Searcher(s) that all threads
> share. References to the Searchers are counted so that after a Writer is
> returned (and no other thread has a reference to the Writer),
> IndexAccessor waits for all of the current Searchers to come back and
> then reopens their Readers.
>
> In this regard, you get a  similar setup to what Solr might give: from
> any thread you just add docs and run searches -- you don't have to worry
> about refreshing Readers or sharing Writers/Readers or one thread
> deleting with a Reader while another thread tries to write with a Writer.
>
> This setup allows you to do other cool things, like warm Searchers
> before putting them into action. Thats what the code I am posting soon
> is be capable of - when the Readers are reopened, search requests will
> still be handled by the old Readers while the new Searchers run a sample
> query with optional sort fields. This will make sure the Reader is open
> and its sort caches are loaded before the first thread tries to use it.
> Much faster response to applications.
>
> You must  open a new Reader or reopen a Reader to see recently added
> docs...IndexAccessor provides no real way around that. But it does make
> the reopening much easier -- and your application that just wants to add
> docs and search at will from multiple threads, won't have to worry about
> it.
>
> You can bail out here, or if you want further clarification I will
> include an alternate attempt at what IndexAccessor is below.
>
> - Mark
>
>
> ----------------------------------------------------------------------------------------------------
> When accessing a Lucene index from multiple threads, there are a variety
> of issues that you must address.
>
> 1. The Readers/Writer should be shared across threads.
> 2. Readers must periodically be refreshed, either be creating new
> instances or using the new reopen method.
> 3. A Reader that writes needs to be properly coordinated with a Writer
> eg they cannot be used at the same time.
>
> IndexAccessor addresses each of these issues.
>
> How it works:
>
> A single Writer is shared among threads that try to concurrently
> retrieve and use a Writer. Once all of these threads release their
> reference
> to the Writer, it is closed and upon the next request a new one is
> created.
>
> A single Searcher for each Similarity is also shared across threads.
> Upon first request, a new Searcher is created. This Searcher is then
> returned
> upon every request. A count of every Searcher reference retrieved is
> maintained.
>
> When all references to a Writer are released, the Writer is closed and
> after waiting for all of the Searchers to be returned, the Searchers are
> reopened. Without warming enabled, new requests for Searchers/Readers
> must wait for this reopen to complete. If warming is enabled, the old
> Searchers/Readers continue handling Searcher requests until the Readers
> have been reopened and any requested sort caches have been loaded.
>
> If you ask for a writing Reader, you will not get it until a Writer is
> released and vice versa.
>
> The result is that you can freely use Writers/Readers/Searchers from any
> thread without considering thread interactions. ***
>
> If you want to add docs, just ask for a Writer, add the docs, and
> release the Writer. If you want to search, get a Searcher, search,
> and release the Searcher. You don't have to worry about reopening
> Readers or coordinating access.
>
>
> ***
> You still do have to consider things like hogging the Writer/Readers -
> if you don't occasionally release them, things will not stay very
> interactive.
> The best method is to just get the object, use it, and then return it in
> a finally block. Batch load multiple docs, but if your just randomly
> adding
> a doc, get the Writer, add it, and then release the Writer in a finally
> block. If you are batch loading a million docs and you want to be able
> to see them
> as they are added: get the writer and add 10,000 docs (or something),
> release the Writer, get the Writer and add 10,000 docs, etc.
>
> Cam Bazz wrote:
> > Hello Mark,
> >
> > I have been reading the code - and honestly I have not understood how it
> > works. I was hoping that this was a solution to the case when you are
> adding
> > documents - in a multithreaded way, it allows other non-writer threads
> to be
> > able to see documents added without refreshing the indexsearcher - by
> using
> > some caching mechanism.
> >
> > Could you elaborate what IndexAccessor does and how it does it a little
> bit
> > more?
> >
> > Best Regards,
> > -C.B.
> >
> > On Feb 4, 2008 3:06 PM, Mark Miller <markrmiller@gmail.com> wrote:
> >
> >
> >> IndexAccessor-1.26.2008.zip is the latest one. I will be dating a zip
> from
> >> now on.
> >>
> >> I hope to post new code with the warming either tonight or tomorrow
> night.
> >> I would be ecstatic to have some help vetting that.
> >>
> >> Also, I am thinking of making a change so that when you release the
> Writer
> >> the thread that releases does not block until reopen. I think the
> original
> >> author did this so that if you add a doc with a thread and then
> immediately
> >> search from the same thread, you are guaranteed to find the doc.
> However,
> >> this gaurentee did not hold -- if another thread had a reference to the
> >> Writer and a new thread grabbed a Writer and then quicly released
> before the
> >> first thread, you will have added a doc but it will not be visible
> until the
> >> first thread releases its reference to the Writer...since the concept
> is not
> >> enforced anyway, you might as well not block for the final thread that
> >> releases the Writer either. Instead I will grab a thread from a thread
> pool
> >> to do the reopening with that thread, and return right after closing
> the
> >> Writer. The result is that you cannot add a doc and search and expect
> to
> >> find it without waiting a second or too. But this way things will be
> >> consistent, and an app that adds docs will be a bit more
> responsive....eg it
> >> wont hang as Readers are being reopened.
> >>
> >> I also have to bring the AccessProvider classes back. No easy way to
> use
> >> your own custom Readers without it...I shouldn't have stripped it out.
> >>
> >> - Mark
> >>
> >>
> >>
> >> Cam Bazz wrote:
> >>
> >>> Hello,
> >>>
> >>> Regarding https://issues.apache.org/jira/browse/LUCENE-1026 , this
> seems
> >>> very interesting. I have read the discussion on the page, but I could
> >>>
> >> not
> >>
> >>> figure out which set of files is the latest.
> >>> Is it the IndexAccessor-1.26.2008.zip file?
> >>>
> >>> I will read through the code, make my own tests, and send some
> feedback.
> >>>
> >>> Best.
> >>> -C.B.
> >>>
> >>>
> >>>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >>
> >
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_7138_3676389.1202148102977--

From java-user-return-32398-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 04 18:44:25 2008
Return-Path: <java-user-return-32398-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 41417 invoked from network); 4 Feb 2008 18:44:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Feb 2008 18:44:24 -0000
Received: (qmail 48191 invoked by uid 500); 4 Feb 2008 18:44:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48162 invoked by uid 500); 4 Feb 2008 18:44:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48151 invoked by uid 99); 4 Feb 2008 18:44:10 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Feb 2008 10:44:10 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ryanackley@gmail.com designates 66.249.82.224 as permitted sender)
Received: from [66.249.82.224] (HELO wx-out-0506.google.com) (66.249.82.224)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Feb 2008 18:43:39 +0000
Received: by wx-out-0506.google.com with SMTP id i28so1947137wxd.20
        for <java-user@lucene.apache.org>; Mon, 04 Feb 2008 10:43:46 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        bh=OM/pONa2ipKfG3dep8Ta8oeWYDcJ8CafFRdI4qTvQ20=;
        b=onliZzOavOiei1I1uAMKeB+XKoA60uEMWI3KFjXSLrcJK6HbtHjFtm5gAR8SXT2lWBAWosGi4pMpLJgTwy4yagqkqGrTfE4eYmcTkqXCkbYZUbr6ivn6iace6SCU612lSRNkmcROU1ypdCGDCfLr6KmTMq1EQzVS7CKRmjo4rAE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=jNdsvm/EqcznKE60pM8knPPsloiuBRBTm3AnRN27Ck/h+sxNM1m0VMXZk4BTZD71cRO1DuHfp3F4RUwJqlsXQ//G4P8KTBIr8rjpSVv+LK3xgBDgQp2B6HaJg6xFNCIjUvhzxNZmE8XB8dfq/MTOdSUc3BUfewE3g+uISgEzTkI=
Received: by 10.114.110.1 with SMTP id i1mr1608989wac.112.1202150624020;
        Mon, 04 Feb 2008 10:43:44 -0800 (PST)
Received: by 10.115.93.1 with HTTP; Mon, 4 Feb 2008 10:43:44 -0800 (PST)
Message-ID: <e15c52dc0802041043g452ab98cg549ce7391a94db1f@mail.gmail.com>
Date: Mon, 4 Feb 2008 13:43:44 -0500
From: "Ryan Ackley" <ryanackley@gmail.com>
To: java-user@lucene.apache.org
Subject: ANN: Textmining.org extractor library v1.0 released
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org

FYI, I just updated the textmining.org homepage with the following info.

The tm-extractors library has a new release! v1.0. You can download it here:

http://text-mining.googlecode.com/files/tm-extractors-1.0.jar

The tm-extractors library is a pure java library for extracting text
from Word documents. Notable improvements in this release:

* Support for fast-saved Word documents
* Many misc bug fixes
* Removal of dependencies on legacy HWPF code
* Support for older versions of Word for Windows (1.0, 2.0, and 4.0)
* Unit tests added
* Build file added
* Source moved to public subversion repository

The source is hosted by google project hosting. You can find info on
how to access the svn repository at the url:
http://code.google.com/p/text-mining/source/checkout. Watch
http://www.textmining.org for documentation and more helpful info in
the coming weeks. I just wanted to get this out asap.

This latest release was brought to you by Benryan Software Inc.
(http://www.benryan.com)

Please note that the license has changed to LGPL beginning with this
release and moving forward.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32399-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 04 19:53:20 2008
Return-Path: <java-user-return-32399-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76635 invoked from network); 4 Feb 2008 19:53:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Feb 2008 19:53:20 -0000
Received: (qmail 56121 invoked by uid 500); 4 Feb 2008 19:53:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56088 invoked by uid 500); 4 Feb 2008 19:53:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56077 invoked by uid 99); 4 Feb 2008 19:53:06 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Feb 2008 11:53:06 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of john.wang@gmail.com designates 66.249.92.170 as permitted sender)
Received: from [66.249.92.170] (HELO ug-out-1314.google.com) (66.249.92.170)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Feb 2008 19:52:38 +0000
Received: by ug-out-1314.google.com with SMTP id u40so64495ugc.29
        for <java-user@lucene.apache.org>; Mon, 04 Feb 2008 11:52:44 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        bh=i3BS+98brvzDGJm1nYsVCRkv4aFRMsID2RAs0aKMnKc=;
        b=g/m0kyjr+CzwQ2TzLmrAk/ilPZWxdpfsVufF9nEkEqe1fbve3Qznt7nDp0/xzjeTOyOz6prj7QL+plNScp4cedUbJn8WI/pXdbCx9nZ/30RHMoSHdiDc59eKiOaOV+kSiSRbhGzuo7fyPIFfSPCBYPMYN2rzUhPKJVJhEqzCnHI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=P9rO1njJIgMyVJGxExvBpwMeTqVJN9yCYbaZjZyulMb3k8nYeo1RtLY8BqImKy0LfLyPjbfUxVY5utCACAbErdbxZJvGWb2yu8Wn0v4XM+hP4Ub7qmloPp65s8QsPXfg1CdmvNDuDi9c8uFwqwgnBDxl3pbwbieppIe7VQUWn3g=
Received: by 10.67.122.12 with SMTP id z12mr398075ugm.18.1202154764562;
        Mon, 04 Feb 2008 11:52:44 -0800 (PST)
Received: by 10.86.31.3 with HTTP; Mon, 4 Feb 2008 11:52:44 -0800 (PST)
Message-ID: <8837fb770802041152v13e06225g9ead2bf3d7a61aa@mail.gmail.com>
Date: Mon, 4 Feb 2008 11:52:44 -0800
From: "John Wang" <john.wang@gmail.com>
To: java-user@lucene.apache.org
Subject: lucene 2.3 in production
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_7399_4621782.1202154764560"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_7399_4621782.1202154764560
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi:

   Is there anyone running a full production deployment on lucene 2.3 (with
high traffic, large index and frequent updates)? We are thinking of doing
this but wanted to get some feedback.

Thanks

-John

------=_Part_7399_4621782.1202154764560--

From java-user-return-32400-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 04 20:18:38 2008
Return-Path: <java-user-return-32400-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90166 invoked from network); 4 Feb 2008 20:18:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Feb 2008 20:18:38 -0000
Received: (qmail 92963 invoked by uid 500); 4 Feb 2008 20:18:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92934 invoked by uid 500); 4 Feb 2008 20:18:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92923 invoked by uid 99); 4 Feb 2008 20:18:22 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Feb 2008 12:18:22 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of markrmiller@gmail.com designates 64.233.166.179 as permitted sender)
Received: from [64.233.166.179] (HELO py-out-1112.google.com) (64.233.166.179)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Feb 2008 20:17:52 +0000
Received: by py-out-1112.google.com with SMTP id a73so2744515pye.9
        for <java-user@lucene.apache.org>; Mon, 04 Feb 2008 12:17:58 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        bh=rM3EpRBhN1kaPCUkuK4u9oKa7MwO/gcoI7ywJBqfb+g=;
        b=nvFcxlNHHkI3TV67GBj4WoS3lx0wXvS99SUY4YHBEdEq/14QsWWyU+8J9mnXjCcCgcEX+92BGUTw/noruuOXrle+Xo0ZCvpz9cAgV4AWsUESoOAVaH7PawmxeTuAKKLmD6YD+/orcbDN2OpoR4EI5VHwu07bg3bwhNQNOzm/ZDo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=sV9gYeLAd6FEoQl7DkmoFch9Zc2qwpUUSpVKgSq7dk2MIYp1NQhCOSyMpt6UShT6tOGD6sskOpDiXgq+zDB5UDYCic3HkDJdzSDCyoNB1sWCBsuT5uGYpMb4dhr1lHF4zPPgJ3Df2LT0euhHIdRPvKnvyeNU3QPrMl4YOUYr80U=
Received: by 10.64.156.2 with SMTP id d2mr13633138qbe.54.1202156278350;
        Mon, 04 Feb 2008 12:17:58 -0800 (PST)
Received: from ?192.168.1.118? ( [69.124.234.183])
        by mx.google.com with ESMTPS id d12sm5849379qbc.3.2008.02.04.12.17.57
        (version=SSLv3 cipher=RC4-MD5);
        Mon, 04 Feb 2008 12:17:57 -0800 (PST)
Message-ID: <47A772E5.7020405@gmail.com>
Date: Mon, 04 Feb 2008 15:17:41 -0500
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.9 (Windows/20071031)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: lucene 2.3 in production
References: <8837fb770802041152v13e06225g9ead2bf3d7a61aa@mail.gmail.com>
In-Reply-To: <8837fb770802041152v13e06225g9ead2bf3d7a61aa@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

You still have to be careful if you want to alternate a search and 
write. If you are loading a lot of docs this way, you would want to hold 
the Writer to batch the docs, but while you are holding it, you will not 
have a fresh view of the index - so you could add the same doc twice if 
it came twice in a batch. The only way to be sure you avoid this is to 
reopen readers after you add every doc. This is just not going to be a 
fast way of doing things...but if you have a high mergefactor, the new 
reopen method will prob make it *much* faster. Or if you are sure that 
the batch won't contain duplicates, you can batch load.


John Wang wrote:
> Hi:
>
>    Is there anyone running a full production deployment on lucene 2.3 (with
> high traffic, large index and frequent updates)? We are thinking of doing
> this but wanted to get some feedback.
>
> Thanks
>
> -John
>
>   

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32401-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 04 23:08:01 2008
Return-Path: <java-user-return-32401-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72511 invoked from network); 4 Feb 2008 23:08:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Feb 2008 23:08:01 -0000
Received: (qmail 66733 invoked by uid 500); 4 Feb 2008 23:07:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66689 invoked by uid 500); 4 Feb 2008 23:07:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66678 invoked by uid 99); 4 Feb 2008 23:07:47 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Feb 2008 15:07:47 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Feb 2008 23:07:32 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id 796E271C366; Mon,  4 Feb 2008 15:07:24 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id 7701771C199
	for <java-user@lucene.apache.org>; Mon,  4 Feb 2008 15:07:24 -0800 (PST)
Date: Mon, 4 Feb 2008 15:07:24 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Performance guarantees and index format
In-Reply-To: <47A22193.40906@getopt.org>
Message-ID: <Pine.LNX.4.62.0802041459500.6477@radix.cryptio.net>
References: <47699a8d0801311050k22cc9e0fu7142590514319e6b@mail.gmail.com>
 <47A219C4.3060005@gmail.com> <47A22193.40906@getopt.org>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: What this issue doesn't discuss is what to do with partial results obtained
: when a timeout occurred. As the original poster points out, document lists are
: traversed in the order they were added and not the order of their importance,
: which introduces a bias to partial results in that they reflect results from a
: random sample (which is likely not the most relevant, i.e. there could have
: been more relevant results later in the traversal order).
: 
: The answer to this issue is org.apache.nutch.indexer.IndexSorter, which

skimming this it doesn't seem like a refactored version that was less 
nutch specific cold make a handy contrib ... but it also seems like there 
may be a simpler approach for the (i assume) common case of prefering docs 
that were indexed later....

if we eliminate the requirement for *strict* preference of recent 
documents and make that a more loose desire, then we coulnd't we do a 
pretty good job if we just changed Segment merging to reorder reverse the 
order of the segments before each merge?  it wouldn't be very useful to 
start doing this on an index that's already a decent size, but if this was 
happening on every merge right from the very begining, then the most 
recent documents would percollate to the front of the index right?

The only downside i can think of would be that docids would frequently 
(not not very predictably) change even if there were no deletions .. but 
you'd pay that same penalty with something like the nutch's IndexSorter.

I'm not much of an expert on segment merging.. but with the exception of 
docid order i can'tthink of many reasons why there couldn't be a merger 
that revesed the order of hte segments.


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32402-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 05 00:06:40 2008
Return-Path: <java-user-return-32402-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94204 invoked from network); 5 Feb 2008 00:06:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Feb 2008 00:06:40 -0000
Received: (qmail 60202 invoked by uid 500); 5 Feb 2008 00:06:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60170 invoked by uid 500); 5 Feb 2008 00:06:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60155 invoked by uid 99); 5 Feb 2008 00:06:25 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Feb 2008 16:06:25 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of stopman@gmail.com designates 209.85.128.187 as permitted sender)
Received: from [209.85.128.187] (HELO fk-out-0910.google.com) (209.85.128.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Feb 2008 00:05:57 +0000
Received: by fk-out-0910.google.com with SMTP id z23so2119177fkz.5
        for <java-user@lucene.apache.org>; Mon, 04 Feb 2008 16:06:03 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=L+ClR2iLpCITvlsNyonZWQVpPw/xHCv8BlawnvjaNgg=;
        b=iwjWct8JR2M5E/VRnGRzYWjP1xnBwHmL2SmItYFCUG0AeACfoecFp3pbdPwLnnya4wAgRUrntO44pkP0bZtOi/Ze0TkxdWIj/H954TWfrhdmy3V86yelrL3Kxa8zAtkC0kCZDQYP/BOhhzVM9lOIYGoU3jRIQjrVxXzaeMrTR1U=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=vansKTZ4kw7qPQx5jq9wX2Hm/M3NGEHVb9Ezqxx/UyjlkR7h2GcGszQ1JDu7ioaDzJQK/ybTc8iPKRW8+rXRKEP0ww+WgdAWbNgcdrQ22eWPqgJ0v7v3mgpF2tSx8cvcGg2OKhi2XiNjByiRSOXfDRs2UWFNekBHTouc+SuTomM=
Received: by 10.82.174.20 with SMTP id w20mr14099524bue.28.1202169960665;
        Mon, 04 Feb 2008 16:06:00 -0800 (PST)
Received: by 10.82.139.19 with HTTP; Mon, 4 Feb 2008 16:06:00 -0800 (PST)
Message-ID: <652776090802041606j2ba921a7m14e8bfb65726e8a1@mail.gmail.com>
Date: Mon, 4 Feb 2008 16:06:00 -0800
From: "Michael Stoppelman" <stopman@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Boosting using an external data source
In-Reply-To: <652776090802032021w6bb5ac23q9d95f661269cb92@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_7819_777138.1202169960406"
References: <652776090802032021w6bb5ac23q9d95f661269cb92@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_7819_777138.1202169960406
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

If anyone was wondering how I dealt with this I ended up extending the
TermQuery class and overridding the tf() and idf() functions
like in FuzzyLikeThisQuery.

See FuzzyTermQuery for how they use the SimilarityDelegator object:
contrib/queries/src/java/org/apache/lucene/search/FuzzyLikeThisQuery.java

-M

On Feb 3, 2008 8:21 PM, Michael Stoppelman <stopman@gmail.com> wrote:

> I've created a mapping of query terms to clusters with corresponding
> strength values that I want to integrate into lucene
> scoring so I can boost documents that match the clusters. I would like to
> give a boost based on the normalized score.
> In my setup, each document has a field with the clusters their assigned to
> which is a string that contains numbers
> separated by spaces. I was looking at using ValueSourceQuery but didn't
> really understand how I should really deal
> with the FieldScoreQuery since the field I need to look up on isn't one of
> the defined types. Is there a simpler way I
> should be going about this?
>
> I'm using lucene 2.2.0.
>
> Thanks for your help as always,
> M
>
>
>

------=_Part_7819_777138.1202169960406--

From java-user-return-32403-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 05 00:38:43 2008
Return-Path: <java-user-return-32403-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10850 invoked from network); 5 Feb 2008 00:38:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Feb 2008 00:38:43 -0000
Received: (qmail 5977 invoked by uid 500); 5 Feb 2008 00:38:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5939 invoked by uid 500); 5 Feb 2008 00:38:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5928 invoked by uid 99); 5 Feb 2008 00:38:28 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Feb 2008 16:38:28 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of markrmiller@gmail.com designates 64.233.166.183 as permitted sender)
Received: from [64.233.166.183] (HELO py-out-1112.google.com) (64.233.166.183)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Feb 2008 00:37:59 +0000
Received: by py-out-1112.google.com with SMTP id a73so2825115pye.9
        for <java-user@lucene.apache.org>; Mon, 04 Feb 2008 16:38:05 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        bh=RcCGGTiDKzAjA+EVF6I/pbcHBgDCG8QagpfcXltAuec=;
        b=fKVhx4VEx9t4en5K0+w6fWaY6ipboKFaU42SqtJqdHRh5+eopcDwcoSSL8Szjvi0CsZIPmYkUDQnFOR5xJAI2cjnRS+Xuikqg6HKfUWh4xXm5RZg20z1+fZOVseuiUbMOR8NSl+RfW1SddnPBcVjqPH50StAEOv+ezqWwm3SEAg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=ElW3Qq7m7JlLeZdKL4901PZzA8MygdqPwUDoEauzGmyz0JEN+YlkMLU3tX/pK6vl8ObRUEG67xG/bXk8FPgUfPO/SCd4fIdYMRMuZ4ogrDn1MEw46F+xyS+9oLCUYXc8gmfEi/P2vMhMFmygWiUQBXaYjEg8cX8U/OARVNLMlr8=
Received: by 10.65.233.16 with SMTP id k16mr14158115qbr.43.1202171884893;
        Mon, 04 Feb 2008 16:38:04 -0800 (PST)
Received: from ?192.168.1.118? ( [69.124.234.183])
        by mx.google.com with ESMTPS id e19sm6109559qba.13.2008.02.04.16.38.03
        (version=SSLv3 cipher=RC4-MD5);
        Mon, 04 Feb 2008 16:38:03 -0800 (PST)
Message-ID: <47A7AFD4.5040908@gmail.com>
Date: Mon, 04 Feb 2008 19:37:40 -0500
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.9 (Windows/20071031)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: DefaultIndexAccessor
References: <1bcb7c7f0802040450k1ca47982v66894276f1c20c2b@mail.gmail.com>	 <47A70DE3.50202@gmail.com>	 <1bcb7c7f0802040612m1e2bdc07h9a2eaa531fc3dd5@mail.gmail.com>	 <47A74849.3050005@gmail.com> <1bcb7c7f0802041001k165bd530n75e692e635971182@mail.gmail.com>
In-Reply-To: <1bcb7c7f0802041001k165bd530n75e692e635971182@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

For anyone following this thread who would like to check this out, I put 
up the new code with the warming capability:

https://issues.apache.org/jira/browse/LUCENE-1026
<https://issues.apache.org/jira/secure/attachment/12374729/IndexAccessor-02.04.2008.zip> 
IndexAccessor-02.04.2008.zip 
<https://issues.apache.org/jira/secure/attachment/12374729/IndexAccessor-02.04.2008.zip> 
(32 kb)

See the comment at the bottom.

Cam Bazz wrote:
> Hello Mark,
>
> Thank you for your lengthy and valuable clarification. I have the case -
> before adding to the index, i must check if a document exist with the
> same key (actually, double key) - or before deleting a document - I must
> ensure it exists in the index.
>
> Currently I am doing it with my custom caching routine. It works quite well
> upto 32M documents. but after that something happens and it really slows
> down.
>
> I will experiment with your implementation, as soon as I can. It is very
> cool by the way. Will it be included in the next release?
>
> Best,
> -C.B.
>
> On Feb 4, 2008 7:15 PM, Mark Miller <markrmiller@gmail.com> wrote:
>
>   
>> The purpose of IndexAccessor is to coordinate Readers/Writers for a
>> Lucene index. Readers and Writers in Lucene are multi-threaded in that
>> multiple threads may use them at the same time, but they must/should be
>> shared and there are special rules (You cannot delete with a Reader
>> while a Writer is working on the index). Also, you need to refresh
>> Reader views every so often; this is expensive (though usually much less
>> so with the new reopen method).
>>
>> IndexAccessor enforces the rules and controls Reader refreshing. Instead
>> of worrying about caching or index interaction rules, you just ask for
>> your Reader/Writer, use it to search or add a doc, and then return it.
>> The rest is taken care of for you.
>>
>> This is done by keeping a cached Writer and Searcher(s) that all threads
>> share. References to the Searchers are counted so that after a Writer is
>> returned (and no other thread has a reference to the Writer),
>> IndexAccessor waits for all of the current Searchers to come back and
>> then reopens their Readers.
>>
>> In this regard, you get a  similar setup to what Solr might give: from
>> any thread you just add docs and run searches -- you don't have to worry
>> about refreshing Readers or sharing Writers/Readers or one thread
>> deleting with a Reader while another thread tries to write with a Writer.
>>
>> This setup allows you to do other cool things, like warm Searchers
>> before putting them into action. Thats what the code I am posting soon
>> is be capable of - when the Readers are reopened, search requests will
>> still be handled by the old Readers while the new Searchers run a sample
>> query with optional sort fields. This will make sure the Reader is open
>> and its sort caches are loaded before the first thread tries to use it.
>> Much faster response to applications.
>>
>> You must  open a new Reader or reopen a Reader to see recently added
>> docs...IndexAccessor provides no real way around that. But it does make
>> the reopening much easier -- and your application that just wants to add
>> docs and search at will from multiple threads, won't have to worry about
>> it.
>>
>> You can bail out here, or if you want further clarification I will
>> include an alternate attempt at what IndexAccessor is below.
>>
>> - Mark
>>
>>
>> ----------------------------------------------------------------------------------------------------
>> When accessing a Lucene index from multiple threads, there are a variety
>> of issues that you must address.
>>
>> 1. The Readers/Writer should be shared across threads.
>> 2. Readers must periodically be refreshed, either be creating new
>> instances or using the new reopen method.
>> 3. A Reader that writes needs to be properly coordinated with a Writer
>> eg they cannot be used at the same time.
>>
>> IndexAccessor addresses each of these issues.
>>
>> How it works:
>>
>> A single Writer is shared among threads that try to concurrently
>> retrieve and use a Writer. Once all of these threads release their
>> reference
>> to the Writer, it is closed and upon the next request a new one is
>> created.
>>
>> A single Searcher for each Similarity is also shared across threads.
>> Upon first request, a new Searcher is created. This Searcher is then
>> returned
>> upon every request. A count of every Searcher reference retrieved is
>> maintained.
>>
>> When all references to a Writer are released, the Writer is closed and
>> after waiting for all of the Searchers to be returned, the Searchers are
>> reopened. Without warming enabled, new requests for Searchers/Readers
>> must wait for this reopen to complete. If warming is enabled, the old
>> Searchers/Readers continue handling Searcher requests until the Readers
>> have been reopened and any requested sort caches have been loaded.
>>
>> If you ask for a writing Reader, you will not get it until a Writer is
>> released and vice versa.
>>
>> The result is that you can freely use Writers/Readers/Searchers from any
>> thread without considering thread interactions. ***
>>
>> If you want to add docs, just ask for a Writer, add the docs, and
>> release the Writer. If you want to search, get a Searcher, search,
>> and release the Searcher. You don't have to worry about reopening
>> Readers or coordinating access.
>>
>>
>> ***
>> You still do have to consider things like hogging the Writer/Readers -
>> if you don't occasionally release them, things will not stay very
>> interactive.
>> The best method is to just get the object, use it, and then return it in
>> a finally block. Batch load multiple docs, but if your just randomly
>> adding
>> a doc, get the Writer, add it, and then release the Writer in a finally
>> block. If you are batch loading a million docs and you want to be able
>> to see them
>> as they are added: get the writer and add 10,000 docs (or something),
>> release the Writer, get the Writer and add 10,000 docs, etc.
>>
>> Cam Bazz wrote:
>>     
>>> Hello Mark,
>>>
>>> I have been reading the code - and honestly I have not understood how it
>>> works. I was hoping that this was a solution to the case when you are
>>>       
>> adding
>>     
>>> documents - in a multithreaded way, it allows other non-writer threads
>>>       
>> to be
>>     
>>> able to see documents added without refreshing the indexsearcher - by
>>>       
>> using
>>     
>>> some caching mechanism.
>>>
>>> Could you elaborate what IndexAccessor does and how it does it a little
>>>       
>> bit
>>     
>>> more?
>>>
>>> Best Regards,
>>> -C.B.
>>>
>>> On Feb 4, 2008 3:06 PM, Mark Miller <markrmiller@gmail.com> wrote:
>>>
>>>
>>>       
>>>> IndexAccessor-1.26.2008.zip is the latest one. I will be dating a zip
>>>>         
>> from
>>     
>>>> now on.
>>>>
>>>> I hope to post new code with the warming either tonight or tomorrow
>>>>         
>> night.
>>     
>>>> I would be ecstatic to have some help vetting that.
>>>>
>>>> Also, I am thinking of making a change so that when you release the
>>>>         
>> Writer
>>     
>>>> the thread that releases does not block until reopen. I think the
>>>>         
>> original
>>     
>>>> author did this so that if you add a doc with a thread and then
>>>>         
>> immediately
>>     
>>>> search from the same thread, you are guaranteed to find the doc.
>>>>         
>> However,
>>     
>>>> this gaurentee did not hold -- if another thread had a reference to the
>>>> Writer and a new thread grabbed a Writer and then quicly released
>>>>         
>> before the
>>     
>>>> first thread, you will have added a doc but it will not be visible
>>>>         
>> until the
>>     
>>>> first thread releases its reference to the Writer...since the concept
>>>>         
>> is not
>>     
>>>> enforced anyway, you might as well not block for the final thread that
>>>> releases the Writer either. Instead I will grab a thread from a thread
>>>>         
>> pool
>>     
>>>> to do the reopening with that thread, and return right after closing
>>>>         
>> the
>>     
>>>> Writer. The result is that you cannot add a doc and search and expect
>>>>         
>> to
>>     
>>>> find it without waiting a second or too. But this way things will be
>>>> consistent, and an app that adds docs will be a bit more
>>>>         
>> responsive....eg it
>>     
>>>> wont hang as Readers are being reopened.
>>>>
>>>> I also have to bring the AccessProvider classes back. No easy way to
>>>>         
>> use
>>     
>>>> your own custom Readers without it...I shouldn't have stripped it out.
>>>>
>>>> - Mark
>>>>
>>>>
>>>>
>>>> Cam Bazz wrote:
>>>>
>>>>         
>>>>> Hello,
>>>>>
>>>>> Regarding https://issues.apache.org/jira/browse/LUCENE-1026 , this
>>>>>           
>> seems
>>     
>>>>> very interesting. I have read the discussion on the page, but I could
>>>>>
>>>>>           
>>>> not
>>>>
>>>>         
>>>>> figure out which set of files is the latest.
>>>>> Is it the IndexAccessor-1.26.2008.zip file?
>>>>>
>>>>> I will read through the code, make my own tests, and send some
>>>>>           
>> feedback.
>>     
>>>>> Best.
>>>>> -C.B.
>>>>>
>>>>>
>>>>>
>>>>>           
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>>
>>>>         
>>>       
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>     
>
>   

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32404-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 05 00:47:26 2008
Return-Path: <java-user-return-32404-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12667 invoked from network); 5 Feb 2008 00:47:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Feb 2008 00:47:26 -0000
Received: (qmail 12036 invoked by uid 500); 5 Feb 2008 00:47:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12006 invoked by uid 500); 5 Feb 2008 00:47:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11995 invoked by uid 99); 5 Feb 2008 00:47:12 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Feb 2008 16:47:12 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of markrmiller@gmail.com designates 64.233.166.180 as permitted sender)
Received: from [64.233.166.180] (HELO py-out-1112.google.com) (64.233.166.180)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Feb 2008 00:46:42 +0000
Received: by py-out-1112.google.com with SMTP id a73so2827731pye.9
        for <java-user@lucene.apache.org>; Mon, 04 Feb 2008 16:46:49 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        bh=Fho9+Xb7xPtF8plaXrJYRoan4fx5grjDCc/vdLWb7Ko=;
        b=wjQmRO6xfUa3GqTtvzKNkL6n1IZNiiBEACv7/zRRfDMYREsjOjgvVIfrpHNKdGIcr9g2AUM/3LeOm/MvRDLRQah26zNUGOz6yhTjqOa4g5vDDcWheAsmdL0uPKnV5dyayFytWQCUk3cplubJUARMoSQAIGXn2P4lnMTORLe1c+o=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=B9+mYzK79y4ACfU5AwQbZlPvhRtxyEFoUENorclN0C06th72aNIN/pLkY5NPpZKGHyY2MgmiFBULgi+VdEjPdXX3DFja9hV1LneKTA++OummIgBv8GCUO9wp14ghqxVtxPmxR+xwMOSueqbzHL1FvJsshFOlHMNVTqFSj3aeJL8=
Received: by 10.65.211.16 with SMTP id n16mr14115877qbq.86.1202172408801;
        Mon, 04 Feb 2008 16:46:48 -0800 (PST)
Received: from ?192.168.1.118? ( [69.124.234.183])
        by mx.google.com with ESMTPS id q15sm6115173qbq.0.2008.02.04.16.46.47
        (version=SSLv3 cipher=RC4-MD5);
        Mon, 04 Feb 2008 16:46:47 -0800 (PST)
Message-ID: <47A7B1E0.8060406@gmail.com>
Date: Mon, 04 Feb 2008 19:46:24 -0500
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.9 (Windows/20071031)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: DefaultIndexAccessor
References: <1bcb7c7f0802040450k1ca47982v66894276f1c20c2b@mail.gmail.com>	 <47A70DE3.50202@gmail.com>	 <1bcb7c7f0802040612m1e2bdc07h9a2eaa531fc3dd5@mail.gmail.com>	 <47A74849.3050005@gmail.com> <1bcb7c7f0802041001k165bd530n75e692e635971182@mail.gmail.com>
In-Reply-To: <1bcb7c7f0802041001k165bd530n75e692e635971182@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

I replied to the wrong thread -- sorry about that:

You still have to be careful if you want to alternate a search and 
write. If you are loading a lot of docs this way, you would want to hold 
the Writer to batch the docs, but while you are holding it, you will not 
have a fresh view of the index - so you could add the same doc twice if 
it came twice in a batch. The only way to be sure you avoid this is to 
reopen readers after you add every doc. This is just not going to be a 
fast way of doing things...but if you have a high mergefactor, the new 
reopen method will prob make it *much* faster. Or if you are sure that 
the batch won't contain duplicates, you can batch load.

Cam Bazz wrote:
> Hello Mark,
>
> Thank you for your lengthy and valuable clarification. I have the case -
> before adding to the index, i must check if a document exist with the
> same key (actually, double key) - or before deleting a document - I must
> ensure it exists in the index.
>
> Currently I am doing it with my custom caching routine. It works quite well
> upto 32M documents. but after that something happens and it really slows
> down.
>
> I will experiment with your implementation, as soon as I can. It is very
> cool by the way. Will it be included in the next release?
>
> Best,
> -C.B.
>
> On Feb 4, 2008 7:15 PM, Mark Miller <markrmiller@gmail.com> wrote:
>
>   
>> The purpose of IndexAccessor is to coordinate Readers/Writers for a
>> Lucene index. Readers and Writers in Lucene are multi-threaded in that
>> multiple threads may use them at the same time, but they must/should be
>> shared and there are special rules (You cannot delete with a Reader
>> while a Writer is working on the index). Also, you need to refresh
>> Reader views every so often; this is expensive (though usually much less
>> so with the new reopen method).
>>
>> IndexAccessor enforces the rules and controls Reader refreshing. Instead
>> of worrying about caching or index interaction rules, you just ask for
>> your Reader/Writer, use it to search or add a doc, and then return it.
>> The rest is taken care of for you.
>>
>> This is done by keeping a cached Writer and Searcher(s) that all threads
>> share. References to the Searchers are counted so that after a Writer is
>> returned (and no other thread has a reference to the Writer),
>> IndexAccessor waits for all of the current Searchers to come back and
>> then reopens their Readers.
>>
>> In this regard, you get a  similar setup to what Solr might give: from
>> any thread you just add docs and run searches -- you don't have to worry
>> about refreshing Readers or sharing Writers/Readers or one thread
>> deleting with a Reader while another thread tries to write with a Writer.
>>
>> This setup allows you to do other cool things, like warm Searchers
>> before putting them into action. Thats what the code I am posting soon
>> is be capable of - when the Readers are reopened, search requests will
>> still be handled by the old Readers while the new Searchers run a sample
>> query with optional sort fields. This will make sure the Reader is open
>> and its sort caches are loaded before the first thread tries to use it.
>> Much faster response to applications.
>>
>> You must  open a new Reader or reopen a Reader to see recently added
>> docs...IndexAccessor provides no real way around that. But it does make
>> the reopening much easier -- and your application that just wants to add
>> docs and search at will from multiple threads, won't have to worry about
>> it.
>>
>> You can bail out here, or if you want further clarification I will
>> include an alternate attempt at what IndexAccessor is below.
>>
>> - Mark
>>
>>
>> ----------------------------------------------------------------------------------------------------
>> When accessing a Lucene index from multiple threads, there are a variety
>> of issues that you must address.
>>
>> 1. The Readers/Writer should be shared across threads.
>> 2. Readers must periodically be refreshed, either be creating new
>> instances or using the new reopen method.
>> 3. A Reader that writes needs to be properly coordinated with a Writer
>> eg they cannot be used at the same time.
>>
>> IndexAccessor addresses each of these issues.
>>
>> How it works:
>>
>> A single Writer is shared among threads that try to concurrently
>> retrieve and use a Writer. Once all of these threads release their
>> reference
>> to the Writer, it is closed and upon the next request a new one is
>> created.
>>
>> A single Searcher for each Similarity is also shared across threads.
>> Upon first request, a new Searcher is created. This Searcher is then
>> returned
>> upon every request. A count of every Searcher reference retrieved is
>> maintained.
>>
>> When all references to a Writer are released, the Writer is closed and
>> after waiting for all of the Searchers to be returned, the Searchers are
>> reopened. Without warming enabled, new requests for Searchers/Readers
>> must wait for this reopen to complete. If warming is enabled, the old
>> Searchers/Readers continue handling Searcher requests until the Readers
>> have been reopened and any requested sort caches have been loaded.
>>
>> If you ask for a writing Reader, you will not get it until a Writer is
>> released and vice versa.
>>
>> The result is that you can freely use Writers/Readers/Searchers from any
>> thread without considering thread interactions. ***
>>
>> If you want to add docs, just ask for a Writer, add the docs, and
>> release the Writer. If you want to search, get a Searcher, search,
>> and release the Searcher. You don't have to worry about reopening
>> Readers or coordinating access.
>>
>>
>> ***
>> You still do have to consider things like hogging the Writer/Readers -
>> if you don't occasionally release them, things will not stay very
>> interactive.
>> The best method is to just get the object, use it, and then return it in
>> a finally block. Batch load multiple docs, but if your just randomly
>> adding
>> a doc, get the Writer, add it, and then release the Writer in a finally
>> block. If you are batch loading a million docs and you want to be able
>> to see them
>> as they are added: get the writer and add 10,000 docs (or something),
>> release the Writer, get the Writer and add 10,000 docs, etc.
>>
>> Cam Bazz wrote:
>>     
>>> Hello Mark,
>>>
>>> I have been reading the code - and honestly I have not understood how it
>>> works. I was hoping that this was a solution to the case when you are
>>>       
>> adding
>>     
>>> documents - in a multithreaded way, it allows other non-writer threads
>>>       
>> to be
>>     
>>> able to see documents added without refreshing the indexsearcher - by
>>>       
>> using
>>     
>>> some caching mechanism.
>>>
>>> Could you elaborate what IndexAccessor does and how it does it a little
>>>       
>> bit
>>     
>>> more?
>>>
>>> Best Regards,
>>> -C.B.
>>>
>>> On Feb 4, 2008 3:06 PM, Mark Miller <markrmiller@gmail.com> wrote:
>>>
>>>
>>>       
>>>> IndexAccessor-1.26.2008.zip is the latest one. I will be dating a zip
>>>>         
>> from
>>     
>>>> now on.
>>>>
>>>> I hope to post new code with the warming either tonight or tomorrow
>>>>         
>> night.
>>     
>>>> I would be ecstatic to have some help vetting that.
>>>>
>>>> Also, I am thinking of making a change so that when you release the
>>>>         
>> Writer
>>     
>>>> the thread that releases does not block until reopen. I think the
>>>>         
>> original
>>     
>>>> author did this so that if you add a doc with a thread and then
>>>>         
>> immediately
>>     
>>>> search from the same thread, you are guaranteed to find the doc.
>>>>         
>> However,
>>     
>>>> this gaurentee did not hold -- if another thread had a reference to the
>>>> Writer and a new thread grabbed a Writer and then quicly released
>>>>         
>> before the
>>     
>>>> first thread, you will have added a doc but it will not be visible
>>>>         
>> until the
>>     
>>>> first thread releases its reference to the Writer...since the concept
>>>>         
>> is not
>>     
>>>> enforced anyway, you might as well not block for the final thread that
>>>> releases the Writer either. Instead I will grab a thread from a thread
>>>>         
>> pool
>>     
>>>> to do the reopening with that thread, and return right after closing
>>>>         
>> the
>>     
>>>> Writer. The result is that you cannot add a doc and search and expect
>>>>         
>> to
>>     
>>>> find it without waiting a second or too. But this way things will be
>>>> consistent, and an app that adds docs will be a bit more
>>>>         
>> responsive....eg it
>>     
>>>> wont hang as Readers are being reopened.
>>>>
>>>> I also have to bring the AccessProvider classes back. No easy way to
>>>>         
>> use
>>     
>>>> your own custom Readers without it...I shouldn't have stripped it out.
>>>>
>>>> - Mark
>>>>
>>>>
>>>>
>>>> Cam Bazz wrote:
>>>>
>>>>         
>>>>> Hello,
>>>>>
>>>>> Regarding https://issues.apache.org/jira/browse/LUCENE-1026 , this
>>>>>           
>> seems
>>     
>>>>> very interesting. I have read the discussion on the page, but I could
>>>>>
>>>>>           
>>>> not
>>>>
>>>>         
>>>>> figure out which set of files is the latest.
>>>>> Is it the IndexAccessor-1.26.2008.zip file?
>>>>>
>>>>> I will read through the code, make my own tests, and send some
>>>>>           
>> feedback.
>>     
>>>>> Best.
>>>>> -C.B.
>>>>>
>>>>>
>>>>>
>>>>>           
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>>
>>>>         
>>>       
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>     
>
>   

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32405-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 05 00:51:07 2008
Return-Path: <java-user-return-32405-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 13394 invoked from network); 5 Feb 2008 00:51:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Feb 2008 00:51:07 -0000
Received: (qmail 17692 invoked by uid 500); 5 Feb 2008 00:50:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17661 invoked by uid 500); 5 Feb 2008 00:50:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17650 invoked by uid 99); 5 Feb 2008 00:50:52 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Feb 2008 16:50:52 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of markrmiller@gmail.com designates 64.233.166.180 as permitted sender)
Received: from [64.233.166.180] (HELO py-out-1112.google.com) (64.233.166.180)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Feb 2008 00:50:37 +0000
Received: by py-out-1112.google.com with SMTP id a73so2828796pye.9
        for <java-user@lucene.apache.org>; Mon, 04 Feb 2008 16:50:29 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        bh=85DoDRpzs0SMcGxcIX2nfnv3d2EGbnECp5f1xoEFAIg=;
        b=PUIQ3OnJz1s5II3qKl9bP1ECJXtKJ529FEDlbKJ6KcBmIfyrG4jVgO3VcZkOP8TL4Q5OM0wat5kbzjNht2X9BO+cGuDss4xLYqXlE9c2ofH5px2XBMRZ24IwDRQiTyqwDBXB6fqCK19OrR/Fly5SCYpR2WGzzBn9q8+0PttY/tU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=CbRYkDJCgpVGtGd6JCFWkGXgNEtiAzHBIiDTS0Tac4nJpzvKufegiBT2Am4rjiUK+k8Y8Wsr+YseVs2BO/+38wEeyQgZzbjQSf8t7uhrsVL6L7Qv/v6YSfiG9iS/EzSJ0BHZJdp3zJTUaWG78CA/8ttjLh/hbEvwwFSQCbEaDT8=
Received: by 10.65.191.3 with SMTP id t3mr14221285qbp.0.1202172629267;
        Mon, 04 Feb 2008 16:50:29 -0800 (PST)
Received: from ?192.168.1.118? ( [69.124.234.183])
        by mx.google.com with ESMTPS id e19sm6038950qbe.6.2008.02.04.16.50.27
        (version=SSLv3 cipher=RC4-MD5);
        Mon, 04 Feb 2008 16:50:28 -0800 (PST)
Message-ID: <47A7B2BC.6020600@gmail.com>
Date: Mon, 04 Feb 2008 19:50:04 -0500
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.9 (Windows/20071031)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: lucene 2.3 in production
References: <8837fb770802041152v13e06225g9ead2bf3d7a61aa@mail.gmail.com>
In-Reply-To: <8837fb770802041152v13e06225g9ead2bf3d7a61aa@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Replied to the wrong thread - sorry about that.

But to make up for it, I have been using 2.3 even before it was 
released. I have so many tests for my app that I am pretty confident 
running things off the trunk if all tests are a go, and there where so 
many goodies for 2.3 that I jumped on pretty early.

I have not had a single issue. Very frequent updates, 200k-3 million 
docs, not insane traffic - but continuous traffic from a limited set of 
users (a couple constantly updating, and 10-30 constantly searching at 
each site).

John Wang wrote:
> Hi:
>
>    Is there anyone running a full production deployment on lucene 2.3 (with
> high traffic, large index and frequent updates)? We are thinking of doing
> this but wanted to get some feedback.
>
> Thanks
>
> -John
>
>   

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32406-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 05 02:24:13 2008
Return-Path: <java-user-return-32406-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40732 invoked from network); 5 Feb 2008 02:24:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Feb 2008 02:24:13 -0000
Received: (qmail 63986 invoked by uid 500); 5 Feb 2008 02:23:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63949 invoked by uid 500); 5 Feb 2008 02:23:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63938 invoked by uid 99); 5 Feb 2008 02:23:59 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Feb 2008 18:23:59 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of john.wang@gmail.com designates 72.14.220.156 as permitted sender)
Received: from [72.14.220.156] (HELO fg-out-1718.google.com) (72.14.220.156)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Feb 2008 02:23:31 +0000
Received: by fg-out-1718.google.com with SMTP id d23so2744662fga.27
        for <java-user@lucene.apache.org>; Mon, 04 Feb 2008 18:23:37 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=DPKlYje0KqgjNNOVgfOeizgidp8NgVIqmL3OtATPbhQ=;
        b=u+xDutz4aTQAnp7Caw4PrWUpwpuwMmN81d2zDlSlStJpOyBweapQpaEJUvw0lJmwOQoRJc0Rp0fZ4zn2++RLbN+mGjaW2jCWOmpa7F+mQuPE05KqJHqyxVQ3laSrNMetscAmJXPwWQzDJtWuhMHP+wqAvgCePGFZ82XFTC8iEwA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=M2OF9unyWWS+g3BEAAoJ027bZFVHTIEf9bc8wfUHHoj0lmQQ0+wIz9WsnNFoQ2FsPDJnTd5pTDm8jx0txZ9ocFxSCkY1VcHdkGiJORhO0QzueoFM5Qu4opnhUr+9CyAM91xhftzijhA16U4vCIguwekFnvCTxEI8K1hodmvHSi4=
Received: by 10.86.62.3 with SMTP id k3mr7276586fga.24.1202178217263;
        Mon, 04 Feb 2008 18:23:37 -0800 (PST)
Received: by 10.86.31.3 with HTTP; Mon, 4 Feb 2008 18:23:37 -0800 (PST)
Message-ID: <8837fb770802041823g6604f032q8546cb7d1e736b93@mail.gmail.com>
Date: Mon, 4 Feb 2008 18:23:37 -0800
From: "John Wang" <john.wang@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: lucene 2.3 in production
In-Reply-To: <47A7B2BC.6020600@gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_9295_28730813.1202178217263"
References: <8837fb770802041152v13e06225g9ead2bf3d7a61aa@mail.gmail.com>
	 <47A7B2BC.6020600@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_9295_28730813.1202178217263
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Thanks Mark for the datapoint!

-John

On Feb 4, 2008 4:50 PM, Mark Miller <markrmiller@gmail.com> wrote:

> Replied to the wrong thread - sorry about that.
>
> But to make up for it, I have been using 2.3 even before it was
> released. I have so many tests for my app that I am pretty confident
> running things off the trunk if all tests are a go, and there where so
> many goodies for 2.3 that I jumped on pretty early.
>
> I have not had a single issue. Very frequent updates, 200k-3 million
> docs, not insane traffic - but continuous traffic from a limited set of
> users (a couple constantly updating, and 10-30 constantly searching at
> each site).
>
> John Wang wrote:
> > Hi:
> >
> >    Is there anyone running a full production deployment on lucene 2.3(with
> > high traffic, large index and frequent updates)? We are thinking of
> doing
> > this but wanted to get some feedback.
> >
> > Thanks
> >
> > -John
> >
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_9295_28730813.1202178217263--

From java-user-return-32407-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 05 02:45:43 2008
Return-Path: <java-user-return-32407-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47317 invoked from network); 5 Feb 2008 02:45:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Feb 2008 02:45:43 -0000
Received: (qmail 82616 invoked by uid 500); 5 Feb 2008 02:45:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82579 invoked by uid 500); 5 Feb 2008 02:45:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82568 invoked by uid 99); 5 Feb 2008 02:45:29 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Feb 2008 18:45:29 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [69.44.16.11] (HELO getopt.org) (69.44.16.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Feb 2008 02:45:13 +0000
Received: from [192.168.1.100] ([81.219.54.251])
	(authenticated)
	by getopt.org (8.11.6/8.11.6) with ESMTP id m152jOm03752
	for <java-user@lucene.apache.org>; Mon, 4 Feb 2008 20:45:24 -0600
Message-ID: <47A7CDAE.9070005@getopt.org>
Date: Tue, 05 Feb 2008 03:45:02 +0100
From: Andrzej Bialecki <ab@getopt.org>
User-Agent: Thunderbird 2.0.0.9 (Windows/20071031)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Performance guarantees and index format
References: <47699a8d0801311050k22cc9e0fu7142590514319e6b@mail.gmail.com> <47A219C4.3060005@gmail.com> <47A22193.40906@getopt.org> <Pine.LNX.4.62.0802041459500.6477@radix.cryptio.net>
In-Reply-To: <Pine.LNX.4.62.0802041459500.6477@radix.cryptio.net>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Chris Hostetter wrote:
> : What this issue doesn't discuss is what to do with partial results obtained
> : when a timeout occurred. As the original poster points out, document lists are
> : traversed in the order they were added and not the order of their importance,
> : which introduces a bias to partial results in that they reflect results from a
> : random sample (which is likely not the most relevant, i.e. there could have
> : been more relevant results later in the traversal order).
> : 
> : The answer to this issue is org.apache.nutch.indexer.IndexSorter, which
> 
> skimming this it doesn't seem like a refactored version that was less 
> nutch specific cold make a handy contrib ... but it also seems like there 
> may be a simpler approach for the (i assume) common case of prefering docs 
> that were indexed later....
> 
> if we eliminate the requirement for *strict* preference of recent 
> documents and make that a more loose desire, then we coulnd't we do a 
> pretty good job if we just changed Segment merging to reorder reverse the 
> order of the segments before each merge?  it wouldn't be very useful to 
> start doing this on an index that's already a decent size, but if this was 
> happening on every merge right from the very begining, then the most 
> recent documents would percollate to the front of the index right?
> 
> The only downside i can think of would be that docids would frequently 
> (not not very predictably) change even if there were no deletions .. but 
> you'd pay that same penalty with something like the nutch's IndexSorter.
> 
> I'm not much of an expert on segment merging.. but with the exception of 
> docid order i can'tthink of many reasons why there couldn't be a merger 
> that revesed the order of hte segments.

I think this would be too messy - currently we can be sure of the simple 
rule that documents added to the index get incrementally higher docids, 
i.e. the higher the docid the more recent is the document. I think it 
would be much simpler to write a FilterIndexReader that simply reverses 
the order of docids.

The issue with Nutch's IndexSorter is that it allows you to reorder 
docids in an arbitrary manner, using a user-supplied mapping between old 
and new docids, which can be based on values retrieved from the current 
index or from any other source. So I think this would be the main value 
of this class applicable to various scenarios.

-- 
Best regards,
Andrzej Bialecki     <><
  ___. ___ ___ ___ _ _   __________________________________
[__ || __|__/|__||\/|  Information Retrieval, Semantic Web
___|||__||  \|  ||  |  Embedded Unix, System Integration
http://www.sigram.com  Contact: info at sigram dot com


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32408-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 05 04:18:02 2008
Return-Path: <java-user-return-32408-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72134 invoked from network); 5 Feb 2008 04:18:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Feb 2008 04:18:01 -0000
Received: (qmail 44884 invoked by uid 500); 5 Feb 2008 04:17:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44831 invoked by uid 500); 5 Feb 2008 04:17:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44811 invoked by uid 99); 5 Feb 2008 04:17:43 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Feb 2008 20:17:43 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [69.44.16.11] (HELO getopt.org) (69.44.16.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Feb 2008 04:17:12 +0000
Received: from [192.168.1.100] ([81.219.54.251])
	(authenticated)
	by getopt.org (8.11.6/8.11.6) with ESMTP id m154Hd403064;
	Mon, 4 Feb 2008 22:17:40 -0600
Message-ID: <47A7E34C.3040503@getopt.org>
Date: Tue, 05 Feb 2008 05:17:16 +0100
From: Andrzej Bialecki <ab@getopt.org>
User-Agent: Thunderbird 2.0.0.9 (Windows/20071031)
MIME-Version: 1.0
To: java-user@lucene.apache.org, java-dev@lucene.apache.org
Subject: [ANN] Luke 0.8 released
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi all,

I just released Luke 0.8, the Lucene Index Toolbox. As usually, you
can get it here:

	http://www.getopt.org/luke/

This release upgrades to the official Lucene 2.3.0 release JARs.
NOTE: this version of Luke requires Java 1.5 or higher.

The following changes have been made in this release:

New features and improvements:
------------------------------
* Added ability to show full text of a field in a popup dialog,
   both in plain text and as a hexadecimal dump.

* It's also possible to save the content of a single field to an
   external file. This is useful for saving binary fields, or examining
   exact byte content of a field.

* Added an option to load the index to RAMDirectory. NOTE: obviously
   you should take into account the index size vs. the available heap
   size ... ;)

* GrowableStringArray is a separate public class now - perhaps some
   day I'll use it to implement a bulk document reconstruct function.

* Luke remembers now the last Analyzer and last field used in a previous
   session.

Bug fixes:
----------
Neither the document nor the field details have the "Boost" column 
anymore, it's always 1.0f in documents retrieved from an index. Instead 
this column now reads "Norms" and shows the fieldNorm value of a field.


Have fun!

-- 
Best regards,
Andrzej Bialecki     <><
  ___. ___ ___ ___ _ _   __________________________________
[__ || __|__/|__||\/|  Information Retrieval, Semantic Web
___|||__||  \|  ||  |  Embedded Unix, System Integration
http://www.sigram.com  Contact: info at sigram dot com


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32409-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 05 04:25:51 2008
Return-Path: <java-user-return-32409-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 74793 invoked from network); 5 Feb 2008 04:25:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Feb 2008 04:25:51 -0000
Received: (qmail 53364 invoked by uid 500); 5 Feb 2008 04:25:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52797 invoked by uid 500); 5 Feb 2008 04:25:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52786 invoked by uid 99); 5 Feb 2008 04:25:37 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Feb 2008 20:25:37 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.191.106.146] (HELO smtp115.plus.mail.mud.yahoo.com) (209.191.106.146)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 05 Feb 2008 04:25:19 +0000
Received: (qmail 12469 invoked from network); 5 Feb 2008 04:25:10 -0000
Received: from unknown (HELO ?192.168.1.101?) (nhira@cognocys.com@75.168.21.119 with plain)
  by smtp115.plus.mail.mud.yahoo.com with SMTP; 5 Feb 2008 04:25:09 -0000
X-YMail-OSG: KZVBhn0VM1mN9FvrdJEObSqbrmLVpQEnEfxftCwC_NzX0MPhOoP3ildc1kouUhEdlOpq4Jlb35BS0l9u6kNLj.3qvrGpGEBoBZYfDuzGd3egN0EKdoc-
X-Yahoo-Newman-Property: ymail-3
In-Reply-To: <47A7E34C.3040503@getopt.org>
References: <47A7E34C.3040503@getopt.org>
Mime-Version: 1.0 (Apple Message framework v753)
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <4F019415-858E-4021-B186-54B58FDA1EC6@cognocys.com>
Cc: java-dev@lucene.apache.org
Content-Transfer-Encoding: 7bit
From: "N. Hira" <nhira@cognocys.com>
Subject: Re: [ANN] Luke 0.8 released
Date: Mon, 4 Feb 2008 22:25:07 -0600
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.753)
X-Virus-Checked: Checked by ClamAV on apache.org

Thank you for this.  Luke has been *extremely* helpful.

-h
----------------------------------------------------------------------
Hira, N.R.
Solutions Architect
Cognocys, Inc.


On 04-Feb-2008, at 10:17 PM, Andrzej Bialecki wrote:

> Hi all,
>
> I just released Luke 0.8, the Lucene Index Toolbox. As usually, you
> can get it here:
>
> 	http://www.getopt.org/luke/
>
> This release upgrades to the official Lucene 2.3.0 release JARs.
> NOTE: this version of Luke requires Java 1.5 or higher.
>
> The following changes have been made in this release:
>
> New features and improvements:
> ------------------------------
> * Added ability to show full text of a field in a popup dialog,
>   both in plain text and as a hexadecimal dump.
>
> * It's also possible to save the content of a single field to an
>   external file. This is useful for saving binary fields, or examining
>   exact byte content of a field.
>
> * Added an option to load the index to RAMDirectory. NOTE: obviously
>   you should take into account the index size vs. the available heap
>   size ... ;)
>
> * GrowableStringArray is a separate public class now - perhaps some
>   day I'll use it to implement a bulk document reconstruct function.
>
> * Luke remembers now the last Analyzer and last field used in a  
> previous
>   session.
>
> Bug fixes:
> ----------
> Neither the document nor the field details have the "Boost" column  
> anymore, it's always 1.0f in documents retrieved from an index.  
> Instead this column now reads "Norms" and shows the fieldNorm value  
> of a field.
>
>
> Have fun!
>
> -- 
> Best regards,
> Andrzej Bialecki     <><
>  ___. ___ ___ ___ _ _   __________________________________
> [__ || __|__/|__||\/|  Information Retrieval, Semantic Web
> ___|||__||  \|  ||  |  Embedded Unix, System Integration
> http://www.sigram.com  Contact: info at sigram dot com
>



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32410-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 05 04:59:44 2008
Return-Path: <java-user-return-32410-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86244 invoked from network); 5 Feb 2008 04:59:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Feb 2008 04:59:44 -0000
Received: (qmail 75055 invoked by uid 500); 5 Feb 2008 04:59:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75024 invoked by uid 500); 5 Feb 2008 04:59:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75013 invoked by uid 99); 5 Feb 2008 04:59:29 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Feb 2008 20:59:29 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [203.217.22.128] (HELO file1.syd.nuix.com.au) (203.217.22.128)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Feb 2008 04:59:01 +0000
Received: from host68.syd.nuix.com.au (host68.syd.nuix.com.au [192.168.222.68])
	by file1.syd.nuix.com.au (Postfix) with ESMTP id 3B4924A81AE
	for <java-user@lucene.apache.org>; Tue,  5 Feb 2008 15:58:05 +1100 (EST)
From: Daniel Noll <daniel@nuix.com>
Organization: Nuix Pty Ltd
To: java-user@lucene.apache.org
Subject: Re: Indexing Speed: 2.3 vs 2.2 (real world numbers)
Date: Tue, 5 Feb 2008 15:56:37 +1100
User-Agent: KMail/1.9.6 (enterprise 0.20070907.709405)
References: <4b124c310802031157l2e7790b9oe1608beb6c5a6dd6@mail.gmail.com> <4b124c310802032124qbf7ae88p2296d7527989bc53@mail.gmail.com> <229245E2-6D37-49EB-A009-2C8C0C77762F@mikemccandless.com>
In-Reply-To: <229245E2-6D37-49EB-A009-2C8C0C77762F@mikemccandless.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200802051556.38079.daniel@nuix.com>
X-Virus-Checked: Checked by ClamAV on apache.org

On Monday 04 February 2008 21:51:39 Michael McCandless wrote:
> Even pre-2.3, you should have seen gains by adding threads, if indeed
> your hardware has good concurrency.
>
> And definitely with the changes in 2.3, you should see gains by
> adding threads.

With regards to this, I have been wondering: are there still huge performance 
benefits with using N threads on N IndexWriters, vs. using N threads on a 
single IndexWriter?  Or have the optimisations in version 2.3 closed the gap 
for this?

Daniel

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32411-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 05 05:24:33 2008
Return-Path: <java-user-return-32411-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91987 invoked from network); 5 Feb 2008 05:24:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Feb 2008 05:24:33 -0000
Received: (qmail 89183 invoked by uid 500); 5 Feb 2008 05:24:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89155 invoked by uid 500); 5 Feb 2008 05:24:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89144 invoked by uid 99); 5 Feb 2008 05:24:19 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Feb 2008 21:24:19 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Feb 2008 05:24:04 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1JMGHk-0005bK-Oe
	for java-user@lucene.apache.org; Mon, 04 Feb 2008 21:23:56 -0800
Message-ID: <15283742.post@talk.nabble.com>
Date: Mon, 4 Feb 2008 21:23:56 -0800 (PST)
From: GokulAnand <gokulanand@gmail.com>
To: java-user@lucene.apache.org
Subject: Lucene Search with relational operators
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: gokulanand@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hi all,

When i do a search ( lucene ) with the combination of relational operators,
it does not get the required result.
ie, when the query is like  :: 

i) A and B or C,  it fetches the records for only (A and B) combination
rejecting C ( OR operator )
ii) A or B and C, it fetches the records for only (B and C) combination
rejecting A ( OR operator )

Why is that behaving tlike this ??
-- 
View this message in context: http://www.nabble.com/Lucene-Search-with-relational-operators-tp15283742p15283742.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32412-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 05 05:34:19 2008
Return-Path: <java-user-return-32412-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93310 invoked from network); 5 Feb 2008 05:34:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Feb 2008 05:34:19 -0000
Received: (qmail 95056 invoked by uid 500); 5 Feb 2008 05:34:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94330 invoked by uid 500); 5 Feb 2008 05:34:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94316 invoked by uid 99); 5 Feb 2008 05:34:05 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Feb 2008 21:34:05 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Feb 2008 05:33:48 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1JMGRB-0005o3-Fx
	for java-user@lucene.apache.org; Mon, 04 Feb 2008 21:33:41 -0800
Message-ID: <15283746.post@talk.nabble.com>
Date: Mon, 4 Feb 2008 21:33:41 -0800 (PST)
From: GokulAnand <gokulanand@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: lucene 2.3 in production
In-Reply-To: <47A772E5.7020405@gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: gokulanand@gmail.com
References: <8837fb770802041152v13e06225g9ead2bf3d7a61aa@mail.gmail.com> <47A772E5.7020405@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Can some one get me the link to get lucene 2.3 jars.
Thanks in advance


markrmiller wrote:
> 
> You still have to be careful if you want to alternate a search and 
> write. If you are loading a lot of docs this way, you would want to hold 
> the Writer to batch the docs, but while you are holding it, you will not 
> have a fresh view of the index - so you could add the same doc twice if 
> it came twice in a batch. The only way to be sure you avoid this is to 
> reopen readers after you add every doc. This is just not going to be a 
> fast way of doing things...but if you have a high mergefactor, the new 
> reopen method will prob make it *much* faster. Or if you are sure that 
> the batch won't contain duplicates, you can batch load.
> 
> 
> John Wang wrote:
>> Hi:
>>
>>    Is there anyone running a full production deployment on lucene 2.3
>> (with
>> high traffic, large index and frequent updates)? We are thinking of doing
>> this but wanted to get some feedback.
>>
>> Thanks
>>
>> -John
>>
>>   
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/lucene-2.3-in-production-tp15276078p15283746.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32413-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 05 09:48:41 2008
Return-Path: <java-user-return-32413-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 28725 invoked from network); 5 Feb 2008 09:48:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Feb 2008 09:48:41 -0000
Received: (qmail 25084 invoked by uid 500); 5 Feb 2008 09:48:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24286 invoked by uid 500); 5 Feb 2008 09:48:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24275 invoked by uid 99); 5 Feb 2008 09:48:27 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Feb 2008 01:48:27 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of jmuguruza@gmail.com designates 66.249.82.239 as permitted sender)
Received: from [66.249.82.239] (HELO wx-out-0506.google.com) (66.249.82.239)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Feb 2008 09:47:58 +0000
Received: by wx-out-0506.google.com with SMTP id i28so2218620wxd.20
        for <java-user@lucene.apache.org>; Tue, 05 Feb 2008 01:48:05 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        bh=elVNACsOhL/jAfl3kM4J/vocu7xgFkB0dLRyqVpiOsY=;
        b=FZz9e6m/o+OT9E9+71LrKhuEPK8k3G0PpBZ4nR6Hxkplx/BDiBfPxjDy2bciH86Z8JhViO3RVD7j62rVi8X5V6N0ihalJqrWeMz7aWrq7KOkhXwpHKpRCnSfB1VntN8rDzQg12eW4xfuusmdZDE6Vd/RBM0J93MODdAedGvWnzs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=XNBGzjWrjXzMQED7jkxn3yROtsTzsJfKf7C18llA4zjU/z7cmzr+TBdpdloT5CS01nrhLfDdQoOAlRdjU7gj/556bCjlp/AuUnIz/cuEH4tn/Ndv9PbHjraRQbG4idfe1V7W2YHpOqjF95+J38JIJ5iUrno8tvHffE0PN4dze9k=
Received: by 10.142.108.14 with SMTP id g14mr4091504wfc.52.1202204884467;
        Tue, 05 Feb 2008 01:48:04 -0800 (PST)
Received: by 10.142.161.8 with HTTP; Tue, 5 Feb 2008 01:48:04 -0800 (PST)
Message-ID: <f071061b0802050148y7fd68e33wa4531e1f6f0e8a2@mail.gmail.com>
Date: Tue, 5 Feb 2008 10:48:04 +0100
From: jm <jmuguruza@gmail.com>
To: java-user@lucene.apache.org
Subject: SnapshotDeletionPolicy usage
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org

Hi guys,

I want to make use of the possibylity of hot backups in 2.3. If i
understand correctly, the only thing i need to do is to open the
writers with SnapshotDeletionPolicy, is that correct?

SnapshotDeletionPolicy dp = new SnapshotDeletionPolicy(new
KeepOnlyLastCommitDeletionPolicy());
final IndexWriter writer = new IndexWriter(dir, true, new
StandardAnalyzer(), dp);

And what would be the trade off of using this policy versus the
default (performance wise)? I have frenquently updating indexes (up to
tens every second) that i close periodically, and much less freqent
readers.

thanks
javi

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32414-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 05 10:20:14 2008
Return-Path: <java-user-return-32414-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 39146 invoked from network); 5 Feb 2008 10:20:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Feb 2008 10:20:14 -0000
Received: (qmail 62639 invoked by uid 500); 5 Feb 2008 10:20:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62604 invoked by uid 500); 5 Feb 2008 10:20:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62593 invoked by uid 99); 5 Feb 2008 10:20:00 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Feb 2008 02:20:00 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erica.mitchell@iona.com designates 62.221.12.55 as permitted sender)
Received: from [62.221.12.55] (HELO emea-mx1.iona.com) (62.221.12.55)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Feb 2008 10:19:31 +0000
X-IronPort-AV: E=Sophos;i="4.25,306,1199664000"; 
   d="scan'208";a="1143172"
Received: from emea-ems1.ionaglobal.com ([10.2.1.125])
  by emea-mx1.iona.com with ESMTP; 05 Feb 2008 10:19:37 +0000
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Subject: RE: Luke error browsing to a lucene index
Date: Tue, 5 Feb 2008 10:19:37 -0000
Message-ID: <E91104197DA2654DA833B6EB53B6C488032F7B3E@emea-ems1.IONAGLOBAL.COM>
In-Reply-To: <359a92830802041000k17a8f16dk4ce11d141cbddb78@mail.gmail.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Luke error browsing to a lucene index
Thread-Index: AchnV/+h9hgSoBwORu2drwm9YO+RIwAiHM1w
From: "Mitchell, Erica" <Erica.Mitchell@iona.com>
To: <java-user@lucene.apache.org>
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Erick

The version of Lucene is 2.3.0 and Luke is  0.7.1 from the web site that
I was using.
I'll give the 0.8 luke version a shot.

Thanks
erica=20

-----Original Message-----
From: Erick Erickson [mailto:erickerickson@gmail.com]=20
Sent: 04 February 2008 18:01
To: java-user@lucene.apache.org
Subject: Re: Luke error browsing to a lucene index

What versions of Luene and Luke are you using? Using the most recent
ones is usually a good place to start....

Best
Erick

On Feb 4, 2008 12:18 PM, Mitchell, Erica <Erica.Mitchell@iona.com>
wrote:

> Hi,
>
> I'm trying to test out Luke and I get an error saying unknown format
> error:-4
> The index I'm trying to point to is the one built by the demo in the=20
> documentation for getting started with lucene.
>
> Can anyone please tell me what this error might mean.
>
> Thanks
> Erica
>
> ----------------------------
> IONA Technologies PLC (registered in Ireland) Registered Number:=20
> 171387 Registered Address: The IONA Building, Shelbourne Road, Dublin=20
> 4, Ireland
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

----------------------------
IONA Technologies PLC (registered in Ireland)
Registered Number: 171387
Registered Address: The IONA Building, Shelbourne Road, Dublin 4, Ireland

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32415-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 05 11:07:54 2008
Return-Path: <java-user-return-32415-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 52587 invoked from network); 5 Feb 2008 11:07:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Feb 2008 11:07:54 -0000
Received: (qmail 33036 invoked by uid 500); 5 Feb 2008 11:07:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33008 invoked by uid 500); 5 Feb 2008 11:07:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32997 invoked by uid 99); 5 Feb 2008 11:07:38 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Feb 2008 03:07:37 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [64.233.184.233] (HELO wr-out-0506.google.com) (64.233.184.233)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Feb 2008 11:07:08 +0000
Received: by wr-out-0506.google.com with SMTP id c55so2068189wra.11
        for <java-user@lucene.apache.org>; Tue, 05 Feb 2008 03:07:12 -0800 (PST)
Received: by 10.142.240.9 with SMTP id n9mr4145707wfh.79.1202209628595;
        Tue, 05 Feb 2008 03:07:08 -0800 (PST)
Received: from ?10.17.4.4? ( [71.174.108.74])
        by mx.google.com with ESMTPS id a68sm17359289rnc.14.2008.02.05.03.07.07
        (version=TLSv1/SSLv3 cipher=OTHER);
        Tue, 05 Feb 2008 03:07:08 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v753)
In-Reply-To: <f071061b0802050148y7fd68e33wa4531e1f6f0e8a2@mail.gmail.com>
References: <f071061b0802050148y7fd68e33wa4531e1f6f0e8a2@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <CE5474A5-747A-487D-BB2B-5138D4074BC7@mikemccandless.com>
Content-Transfer-Encoding: 7bit
From: Michael McCandless <lucene@mikemccandless.com>
Subject: Re: SnapshotDeletionPolicy usage
Date: Tue, 5 Feb 2008 06:07:46 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.753)
X-Virus-Checked: Checked by ClamAV on apache.org


jm wrote:

> Hi guys,
>
> I want to make use of the possibylity of hot backups in 2.3. If i
> understand correctly, the only thing i need to do is to open the
> writers with SnapshotDeletionPolicy, is that correct?

Right.

> SnapshotDeletionPolicy dp = new SnapshotDeletionPolicy(new
> KeepOnlyLastCommitDeletionPolicy());
> final IndexWriter writer = new IndexWriter(dir, true, new
> StandardAnalyzer(), dp);

You can also wrap any other deletion policy (it doesn't have to be  
KeepOnlyLastCommit).

When you want to do a backup, make sure to do try/finally, ie:

   IndexCommitPoint cp = dp.snapshot();
   try {
     Collection files = cp.getFileNames();
     <do copying here>
   } finally {
     dp.release();
   }

> And what would be the trade off of using this policy versus the
> default (performance wise)? I have frenquently updating indexes (up to
> tens every second) that i close periodically, and much less freqent
> readers.

There should be no performance loss as far as indexing throughput goes.

Though obviously while a backup is running, if you are taxing your IO  
system, then flushing/merging by the writer may take longer to run...  
however, it's safe (and maybe a good idea) to throttle the IO of your  
backup so you don't adversely affect ongoing indexing & searching.   
It just means you hold the commit point open for longer...

There is a transient cost in disk space: while a backup is running,  
the writer will not delete any segment files referenced by the commit  
point you have open.  So, if the writer goes and merges away some of  
these segments while your backup is running, this will consume some  
extra disk space.  Once you release the snapshot, the disk space will  
be reclaimed the next time the writer flushes, merges or is closed.

Mike


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32416-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 05 11:43:44 2008
Return-Path: <java-user-return-32416-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60251 invoked from network); 5 Feb 2008 11:43:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Feb 2008 11:43:44 -0000
Received: (qmail 87793 invoked by uid 500); 5 Feb 2008 11:43:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87758 invoked by uid 500); 5 Feb 2008 11:43:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87743 invoked by uid 99); 5 Feb 2008 11:43:29 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Feb 2008 03:43:29 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Feb 2008 11:43:14 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1JMMCg-000105-7S
	for java-user@lucene.apache.org; Tue, 05 Feb 2008 03:43:06 -0800
Message-ID: <15288452.post@talk.nabble.com>
Date: Tue, 5 Feb 2008 03:43:06 -0800 (PST)
From: ajay_garg <garg.jeena.isi.ka.naam.hai@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Concurrent Indexing + Searching
In-Reply-To: <47A70844.8030806@gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: garg.jeena.isi.ka.naam.hai@gmail.com
References: <15234463.post@talk.nabble.com> <15255394.post@talk.nabble.com> <47A60308.4040300@gmail.com> <15262305.post@talk.nabble.com> <47A70844.8030806@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Thanks Mark.

Ok, I got your point. So it happens like this :

a) If it is me, who is re-opening an IndxReader, at any time, but
"manually-programmatically". That is, I don't want
a-sort-of-automatic-reopening-of-IndexWriter, then I am fine.

b) If I do wish this automatic-reopening of index (using IndexAccessor),
then I am forced to rely on all the indexer threads releasing the reference
to IndexWriter, which by the way, as a developer, can never be sure of (that
is, I don't have any control, as to when exactly all the threads leave the
reference ).

Will be obliged if you could give a confirmation to my understanding.

Thanks
Ajay Garg

markrmiller wrote:
> 
> You are right that if auto-commit=true and a user reopens an 
> IndexReader, the docs will absolutely be visible as they are flushed. I 
> think the part you are missing is that you need to be cooperating with 
> the IndexAccessor: a user should not be reopening an IndexReader. The 
> whole point of IndexAccessor is to coordinate these things...when a 
> Writer is released, we know the index has changed, so that is when the 
> IndexReaders are reopened for you. Because the IndexWriter is cached and 
> shared by Threads, a thread might release the Writer while another is 
> still using it...that is why things are not reopened and the Writer not 
> closed until the last thread releases its reference to it. Essentially, 
> IndexAccessor control visibility by controlling how current the view of 
> the Readers is, by controlling their reopening -- a user should agree 
> not to reopen -- just like he must agree not to use a ReadingWriter to 
> delete.
> 
> If you want to just set an IndexWriter to indexing for eternity and then 
> have some Readers that you occasionally reopen, you don't need 
> IndexAccessor. Its purpose is to coordinate ReaderReaders, 
> WritingReaders, Searchers, and Writers for you. You are proposing to 
> coordinate them yourself. IndexAccess reopens Readers for you after a 
> Writer has been used, and enforces Lucene requirements, like a 
> WritingReader cannot be used at the same time as a Writer...etc.
> 
> Technically, IndexAccessor could reopen the readers every 2 
> seconds...and then you would see your changes...instead it only tries to 
> reopen them if a change has been made to the index...and it does not 
> want to get greedy if a Writer is batch loading, so it waits for you to 
> release the Writer. You can control how often the 'view' is updated by 
> releasing the Writer more often -- say every 50 docs. Write 50 docs, 
> release, get, write 50 docs.
> 
> - Mark
> 
> ajay_garg wrote:
>> @Mark.
>>
>> I am sorry, but I need a bit more of explanation. So you mean to say ::
>>
>> "If auto-commit is false, then of course, docs will not be visible in the
>> index, until all the threads release themselves out of a particular
>> IndexWriter instance, and close() the IndexWriter instance.
>> If auto-commit is true, even then the above holds true. In particular,
>> let's
>> say iI need an application 
>> with the following requirements ::
>>
>> a) There are multiple indexer threads indexing on a SINGLE indexwriter
>> instance with auto-commit true
>> b) Each thread 'flushes' according to a pre-defined criteria at some
>> point
>> of time.
>> c) The index should be updated immediately, that is, if any user re-opens
>> the IndexSearcher, then the 
>>     documents added till-that-snapshot-of-index must be visible. Note
>> that
>> the IndexWriter instance hasn't 
>>     been closed as yet, the indexer threads will be indexing till
>> eternity,
>> so that IndexWriter instance will 
>>     never be closed.
>>
>> So, you presume that building an application with the above requirements
>> is
>> impossible, even with auto-commit set to true. "
>>
>> ( If I sound ambiguous at any point, kindly forgive me for my lack of
>> language skills. I will try to explain better, if need arises ).
>>
>> Looking forward to a reply
>> Ajay Garg
>>
>> markrmiller wrote:
>>   
>>> You are correct that autocommit=false means that docs will be in the 
>>> index before the last thread releases its concurrent hold on a Writer, 
>>> *but because IndexAccessor controls* *when the IndexSearchers are 
>>> reopened*, those docs will still not be visible until the last thread 
>>> holding a Writer releases it...that is when the reopening of Searchers 
>>> occurs as well as when the Writer is closed.
>>>
>>> - Mark
>>>
>>> ajay_garg wrote:
>>>     
>>>> Hi. Sorry if I seem a stranger in this thread, but there is something
>>>> that I
>>>> can't resist clearing myself on.
>>>>
>>>> Mark, you say that the additional documents added to a index, won't
>>>> show
>>>> up
>>>> until the # of threads accessing the index hits 0; and subsequently the
>>>> indexwriter instance is closed.
>>>>
>>>> But I suppose that the autocommit=true, asserts that all flushed
>>>> (Added)
>>>> documents are immediately committed ( and hence visible ) in the index,
>>>> and
>>>> no explicit cclosing ( releasiing ) of the Indexwriter instance is
>>>> required.
>>>> ( Of course, re-opening an IndexSearcher instance is required ).
>>>>
>>>> Am I being dumb ?
>>>>
>>>> Looking eagerly for you to shed some light on my doubt.
>>>>
>>>> Thanks
>>>> Ajay Garg
>>>>
>>>>
>>>> codetester wrote:
>>>>   
>>>>       
>>>>> Hi All,
>>>>>
>>>>> A newbie out here.... I am using lucene 2.3.0. I need to use lucene to
>>>>> perform live searching and indexing. To achieve that, I tried the
>>>>> following
>>>>>
>>>>> FSDirectory directory = FSDirectory.getDirectory(location);
>>>>> IndexReader reader = IndexReader.open(directory );
>>>>> IndexWriter writer = new IndexWriter(directory , new SimpleAnalyzer(),
>>>>> true); // <- I want to recreate the index every time
>>>>> IndexSearcher searcher = new IndexSearcher( reader );
>>>>>
>>>>> For Searching, I have the following code
>>>>> QueryParser queryParser = new QueryParser("xyz", new
>>>>> StandardAnalyzer());
>>>>> Hits hits = searcher .search(queryParser.parse(displayName + "*"));
>>>>>
>>>>> And for adding records, I have the following code
>>>>>  // Create doc object
>>>>>  writer.addDocument(doc);
>>>>>
>>>>>  IndexReader newIndexReader = reader.reopen() ;
>>>>>  if ( newIndexReader != reader ) {
>>>>>        reader.close() ;
>>>>>  }
>>>>>  reader = newIndexReader ;
>>>>>  searcher.close() ;
>>>>>  searcher = new IndexSearcher(reader );
>>>>>         
>>>>> So the issues that I face are 
>>>>>
>>>>> 1) The addition of new record is not reflected in the search ( even
>>>>> though
>>>>> I have reinited IndexSearcher )
>>>>>
>>>>> 2) Obviously, the add record code is not thread safe. I am trying to
>>>>> close
>>>>> and update the reference to IndexSearcher object. I could add a sync
>>>>> block, but the bigger question would be that what is the ideal way to
>>>>> achieve this case where I need to add and search record real-time ? 
>>>>>
>>>>> Thanks !
>>>>>
>>>>>
>>>>>
>>>>>
>>>>>
>>>>>     
>>>>>         
>>>>   
>>>>       
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>>
>>>     
>>
>>   
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/Concurrent-Indexing-%2B-Searching-tp15234463p15288452.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32417-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 05 12:23:43 2008
Return-Path: <java-user-return-32417-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76486 invoked from network); 5 Feb 2008 12:23:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Feb 2008 12:23:43 -0000
Received: (qmail 38279 invoked by uid 500); 5 Feb 2008 12:23:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37412 invoked by uid 500); 5 Feb 2008 12:23:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37401 invoked by uid 99); 5 Feb 2008 12:23:28 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Feb 2008 04:23:28 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of markrmiller@gmail.com designates 64.233.166.180 as permitted sender)
Received: from [64.233.166.180] (HELO py-out-1112.google.com) (64.233.166.180)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Feb 2008 12:22:59 +0000
Received: by py-out-1112.google.com with SMTP id a73so3030033pye.9
        for <java-user@lucene.apache.org>; Tue, 05 Feb 2008 04:23:06 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        bh=UGLXBT6oY0U+3N8tzLmOlAbw43Ym18JdiZTDYWKUrc4=;
        b=bl2aTHG8wMGlEAfFALLmZ5asOXmzunFfdMMnEDeJU1rnT4N+RRXcURXVl1uIxP6JHi+pFDKFRWqUZ+dTCZVhhfrltVUT681TU/rQYM1gh76HwckQonzMaDjZzSS2xBzmSSrcPWbcTK/LRaTy7RS5NQCLUzJypwj6CqpkDr5mz+c=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=FBZEmPbp9wQHCFUTAurftjLFmPzmBKKnMFjif5l/u5t9CtTf8nhg7gH1iG5vvUsRD2oBHQVXgDtLJqTO4HawT2mym5Uu2DyaHiZRSKcV4nIdvjySH0gAzMTRn0CzJMYL02cI5J4fQ/dOFdE1iJ4Pkzkszz5PWVg7Xwb95hIS/wg=
Received: by 10.65.222.11 with SMTP id z11mr15467742qbq.39.1202214186151;
        Tue, 05 Feb 2008 04:23:06 -0800 (PST)
Received: from ?192.168.1.118? ( [69.124.234.183])
        by mx.google.com with ESMTPS id e17sm6766157qbe.1.2008.02.05.04.23.04
        (version=SSLv3 cipher=RC4-MD5);
        Tue, 05 Feb 2008 04:23:05 -0800 (PST)
Message-ID: <47A85527.6060207@gmail.com>
Date: Tue, 05 Feb 2008 07:23:03 -0500
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.9 (Windows/20071031)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Concurrent Indexing + Searching
References: <15234463.post@talk.nabble.com> <15255394.post@talk.nabble.com> <47A60308.4040300@gmail.com> <15262305.post@talk.nabble.com> <47A70844.8030806@gmail.com> <15288452.post@talk.nabble.com>
In-Reply-To: <15288452.post@talk.nabble.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org



ajay_garg wrote:
> Thanks Mark.
>
> Ok, I got your point. So it happens like this :
>
> a) If it is me, who is re-opening an IndxReader, at any time, but
> "manually-programmatically". That is, I don't want
> a-sort-of-automatic-reopening-of-IndexWriter, then I am fine.
>   
Sure...your kind of doing what IndexAccessor does...choosing when to 
reopen the views using some metric. Just follow Lucene access rules (no 
writing ops with a Reader while another thread uses a Writer etc.) Also, 
you want to share Searchers and Writers across threads.
> b) If I do wish this automatic-reopening of index (using IndexAccessor),
> then I am forced to rely on all the indexer threads releasing the reference
> to IndexWriter, which by the way, as a developer, can never be sure of (that
> is, I don't have any control, as to when exactly all the threads leave the
> reference ).
>   
You have fairly decent control...its all running on the server. A client 
would be making a call to the server, which would run the code. To 
start, release in a finally block, and second, avoid any infinite loops 
or what not, and you have a fair amount of control here. As long as your 
computer can compute and make forward progress, even if any exception is 
thrown, things will get released. One year plus at many sites and I have 
never seen anything not get released unless the whole server went down, 
in which case I cannot do anything anyway. Now if your constantly 
bombarded with write operations that just never let up...sure - but your 
still the code behind the curtain...you can write some code that looks 
for such a bombardment. I think the control is pretty good. I guess the 
point is that the client is not whats using IndexAccessor...its making a 
request to the server which then uses IndexAccessor.
> Will be obliged if you could give a confirmation to my understanding.
>
> Thanks
> Ajay Garg
>
> markrmiller wrote:
>   
>> You are right that if auto-commit=true and a user reopens an 
>> IndexReader, the docs will absolutely be visible as they are flushed. I 
>> think the part you are missing is that you need to be cooperating with 
>> the IndexAccessor: a user should not be reopening an IndexReader. The 
>> whole point of IndexAccessor is to coordinate these things...when a 
>> Writer is released, we know the index has changed, so that is when the 
>> IndexReaders are reopened for you. Because the IndexWriter is cached and 
>> shared by Threads, a thread might release the Writer while another is 
>> still using it...that is why things are not reopened and the Writer not 
>> closed until the last thread releases its reference to it. Essentially, 
>> IndexAccessor control visibility by controlling how current the view of 
>> the Readers is, by controlling their reopening -- a user should agree 
>> not to reopen -- just like he must agree not to use a ReadingWriter to 
>> delete.
>>
>> If you want to just set an IndexWriter to indexing for eternity and then 
>> have some Readers that you occasionally reopen, you don't need 
>> IndexAccessor. Its purpose is to coordinate ReaderReaders, 
>> WritingReaders, Searchers, and Writers for you. You are proposing to 
>> coordinate them yourself. IndexAccess reopens Readers for you after a 
>> Writer has been used, and enforces Lucene requirements, like a 
>> WritingReader cannot be used at the same time as a Writer...etc.
>>
>> Technically, IndexAccessor could reopen the readers every 2 
>> seconds...and then you would see your changes...instead it only tries to 
>> reopen them if a change has been made to the index...and it does not 
>> want to get greedy if a Writer is batch loading, so it waits for you to 
>> release the Writer. You can control how often the 'view' is updated by 
>> releasing the Writer more often -- say every 50 docs. Write 50 docs, 
>> release, get, write 50 docs.
>>
>> - Mark
>>
>> ajay_garg wrote:
>>     
>>> @Mark.
>>>
>>> I am sorry, but I need a bit more of explanation. So you mean to say ::
>>>
>>> "If auto-commit is false, then of course, docs will not be visible in the
>>> index, until all the threads release themselves out of a particular
>>> IndexWriter instance, and close() the IndexWriter instance.
>>> If auto-commit is true, even then the above holds true. In particular,
>>> let's
>>> say iI need an application 
>>> with the following requirements ::
>>>
>>> a) There are multiple indexer threads indexing on a SINGLE indexwriter
>>> instance with auto-commit true
>>> b) Each thread 'flushes' according to a pre-defined criteria at some
>>> point
>>> of time.
>>> c) The index should be updated immediately, that is, if any user re-opens
>>> the IndexSearcher, then the 
>>>     documents added till-that-snapshot-of-index must be visible. Note
>>> that
>>> the IndexWriter instance hasn't 
>>>     been closed as yet, the indexer threads will be indexing till
>>> eternity,
>>> so that IndexWriter instance will 
>>>     never be closed.
>>>
>>> So, you presume that building an application with the above requirements
>>> is
>>> impossible, even with auto-commit set to true. "
>>>
>>> ( If I sound ambiguous at any point, kindly forgive me for my lack of
>>> language skills. I will try to explain better, if need arises ).
>>>
>>> Looking forward to a reply
>>> Ajay Garg
>>>
>>> markrmiller wrote:
>>>   
>>>       
>>>> You are correct that autocommit=false means that docs will be in the 
>>>> index before the last thread releases its concurrent hold on a Writer, 
>>>> *but because IndexAccessor controls* *when the IndexSearchers are 
>>>> reopened*, those docs will still not be visible until the last thread 
>>>> holding a Writer releases it...that is when the reopening of Searchers 
>>>> occurs as well as when the Writer is closed.
>>>>
>>>> - Mark
>>>>
>>>> ajay_garg wrote:
>>>>     
>>>>         
>>>>> Hi. Sorry if I seem a stranger in this thread, but there is something
>>>>> that I
>>>>> can't resist clearing myself on.
>>>>>
>>>>> Mark, you say that the additional documents added to a index, won't
>>>>> show
>>>>> up
>>>>> until the # of threads accessing the index hits 0; and subsequently the
>>>>> indexwriter instance is closed.
>>>>>
>>>>> But I suppose that the autocommit=true, asserts that all flushed
>>>>> (Added)
>>>>> documents are immediately committed ( and hence visible ) in the index,
>>>>> and
>>>>> no explicit cclosing ( releasiing ) of the Indexwriter instance is
>>>>> required.
>>>>> ( Of course, re-opening an IndexSearcher instance is required ).
>>>>>
>>>>> Am I being dumb ?
>>>>>
>>>>> Looking eagerly for you to shed some light on my doubt.
>>>>>
>>>>> Thanks
>>>>> Ajay Garg
>>>>>
>>>>>
>>>>> codetester wrote:
>>>>>   
>>>>>       
>>>>>           
>>>>>> Hi All,
>>>>>>
>>>>>> A newbie out here.... I am using lucene 2.3.0. I need to use lucene to
>>>>>> perform live searching and indexing. To achieve that, I tried the
>>>>>> following
>>>>>>
>>>>>> FSDirectory directory = FSDirectory.getDirectory(location);
>>>>>> IndexReader reader = IndexReader.open(directory );
>>>>>> IndexWriter writer = new IndexWriter(directory , new SimpleAnalyzer(),
>>>>>> true); // <- I want to recreate the index every time
>>>>>> IndexSearcher searcher = new IndexSearcher( reader );
>>>>>>
>>>>>> For Searching, I have the following code
>>>>>> QueryParser queryParser = new QueryParser("xyz", new
>>>>>> StandardAnalyzer());
>>>>>> Hits hits = searcher .search(queryParser.parse(displayName + "*"));
>>>>>>
>>>>>> And for adding records, I have the following code
>>>>>>  // Create doc object
>>>>>>  writer.addDocument(doc);
>>>>>>
>>>>>>  IndexReader newIndexReader = reader.reopen() ;
>>>>>>  if ( newIndexReader != reader ) {
>>>>>>        reader.close() ;
>>>>>>  }
>>>>>>  reader = newIndexReader ;
>>>>>>  searcher.close() ;
>>>>>>  searcher = new IndexSearcher(reader );
>>>>>>         
>>>>>> So the issues that I face are 
>>>>>>
>>>>>> 1) The addition of new record is not reflected in the search ( even
>>>>>> though
>>>>>> I have reinited IndexSearcher )
>>>>>>
>>>>>> 2) Obviously, the add record code is not thread safe. I am trying to
>>>>>> close
>>>>>> and update the reference to IndexSearcher object. I could add a sync
>>>>>> block, but the bigger question would be that what is the ideal way to
>>>>>> achieve this case where I need to add and search record real-time ? 
>>>>>>
>>>>>> Thanks !
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>     
>>>>>>         
>>>>>>             
>>>>>   
>>>>>       
>>>>>           
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>>
>>>>     
>>>>         
>>>   
>>>       
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>>     
>
>   

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32418-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 05 12:32:12 2008
Return-Path: <java-user-return-32418-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91997 invoked from network); 5 Feb 2008 12:32:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Feb 2008 12:32:12 -0000
Received: (qmail 51544 invoked by uid 500); 5 Feb 2008 12:31:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 51512 invoked by uid 500); 5 Feb 2008 12:31:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 51500 invoked by uid 99); 5 Feb 2008 12:31:58 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Feb 2008 04:31:58 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of markrmiller@gmail.com designates 64.233.166.176 as permitted sender)
Received: from [64.233.166.176] (HELO py-out-1112.google.com) (64.233.166.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Feb 2008 12:31:28 +0000
Received: by py-out-1112.google.com with SMTP id a73so3032561pye.9
        for <java-user@lucene.apache.org>; Tue, 05 Feb 2008 04:31:34 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        bh=qjkWe/ay51abPhSbi7iW8z+d1aBLnFcIgA9nIqW6XAk=;
        b=OBCeTOo5dfU+tzUEBTsfw9N0/nrs1y7std502vKU+jga64jMnaN/0kMVJkW8a/o4oV2sminVCBjVn5KYUGmp1+6s6KK8XuQY4JDIAVEl5mJ9ApgvZEuDgfaTX6JxOjIlEcY9A6bYitmw89vW2Y+xvMv+H93+PwPXSbx/ajx+t5o=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=V/22U32Puq+8ikavP/+KLtJbzRqyd4LZPHxnESZ1RjSelL47AeqwYMEzSeAoqB3C8neHN1xFvPnoxfcWXxHbDe+UkVkD0Ed36kxeWEJ/eJKwBZsoozXiYQNRyocLvIDJ30ejRAO4cMXG/AKdGeKZqj03KukPKcZKH80Khsi5SQs=
Received: by 10.64.150.18 with SMTP id x18mr15419024qbd.87.1202214694493;
        Tue, 05 Feb 2008 04:31:34 -0800 (PST)
Received: from ?192.168.1.118? ( [69.124.234.183])
        by mx.google.com with ESMTPS id e17sm6774177qbe.1.2008.02.05.04.31.32
        (version=SSLv3 cipher=RC4-MD5);
        Tue, 05 Feb 2008 04:31:33 -0800 (PST)
Message-ID: <47A85723.7010109@gmail.com>
Date: Tue, 05 Feb 2008 07:31:31 -0500
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.9 (Windows/20071031)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Concurrent Indexing + Searching
References: <15234463.post@talk.nabble.com> <15255394.post@talk.nabble.com> <47A60308.4040300@gmail.com> <15262305.post@talk.nabble.com> <47A70844.8030806@gmail.com> <15288452.post@talk.nabble.com>
In-Reply-To: <15288452.post@talk.nabble.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

P.S.

About that write bombardment...its still very difficult for that to be a 
problem. Take a look at the tests. I start a bunch of threads searching 
as fast as they can, and a bunch of threads writing as fast as they can 
- nonstop. And still there are plenty of moments where the references 
hit 0 and things refresh. You would basically have to be getting DOS'd 
for this to matter that much.

ajay_garg wrote:
> Thanks Mark.
>
> Ok, I got your point. So it happens like this :
>
> a) If it is me, who is re-opening an IndxReader, at any time, but
> "manually-programmatically". That is, I don't want
> a-sort-of-automatic-reopening-of-IndexWriter, then I am fine.
>
> b) If I do wish this automatic-reopening of index (using IndexAccessor),
> then I am forced to rely on all the indexer threads releasing the reference
> to IndexWriter, which by the way, as a developer, can never be sure of (that
> is, I don't have any control, as to when exactly all the threads leave the
> reference ).
>
> Will be obliged if you could give a confirmation to my understanding.
>
> Thanks
> Ajay Garg
>
> markrmiller wrote:
>   
>> You are right that if auto-commit=true and a user reopens an 
>> IndexReader, the docs will absolutely be visible as they are flushed. I 
>> think the part you are missing is that you need to be cooperating with 
>> the IndexAccessor: a user should not be reopening an IndexReader. The 
>> whole point of IndexAccessor is to coordinate these things...when a 
>> Writer is released, we know the index has changed, so that is when the 
>> IndexReaders are reopened for you. Because the IndexWriter is cached and 
>> shared by Threads, a thread might release the Writer while another is 
>> still using it...that is why things are not reopened and the Writer not 
>> closed until the last thread releases its reference to it. Essentially, 
>> IndexAccessor control visibility by controlling how current the view of 
>> the Readers is, by controlling their reopening -- a user should agree 
>> not to reopen -- just like he must agree not to use a ReadingWriter to 
>> delete.
>>
>> If you want to just set an IndexWriter to indexing for eternity and then 
>> have some Readers that you occasionally reopen, you don't need 
>> IndexAccessor. Its purpose is to coordinate ReaderReaders, 
>> WritingReaders, Searchers, and Writers for you. You are proposing to 
>> coordinate them yourself. IndexAccess reopens Readers for you after a 
>> Writer has been used, and enforces Lucene requirements, like a 
>> WritingReader cannot be used at the same time as a Writer...etc.
>>
>> Technically, IndexAccessor could reopen the readers every 2 
>> seconds...and then you would see your changes...instead it only tries to 
>> reopen them if a change has been made to the index...and it does not 
>> want to get greedy if a Writer is batch loading, so it waits for you to 
>> release the Writer. You can control how often the 'view' is updated by 
>> releasing the Writer more often -- say every 50 docs. Write 50 docs, 
>> release, get, write 50 docs.
>>
>> - Mark
>>
>> ajay_garg wrote:
>>     
>>> @Mark.
>>>
>>> I am sorry, but I need a bit more of explanation. So you mean to say ::
>>>
>>> "If auto-commit is false, then of course, docs will not be visible in the
>>> index, until all the threads release themselves out of a particular
>>> IndexWriter instance, and close() the IndexWriter instance.
>>> If auto-commit is true, even then the above holds true. In particular,
>>> let's
>>> say iI need an application 
>>> with the following requirements ::
>>>
>>> a) There are multiple indexer threads indexing on a SINGLE indexwriter
>>> instance with auto-commit true
>>> b) Each thread 'flushes' according to a pre-defined criteria at some
>>> point
>>> of time.
>>> c) The index should be updated immediately, that is, if any user re-opens
>>> the IndexSearcher, then the 
>>>     documents added till-that-snapshot-of-index must be visible. Note
>>> that
>>> the IndexWriter instance hasn't 
>>>     been closed as yet, the indexer threads will be indexing till
>>> eternity,
>>> so that IndexWriter instance will 
>>>     never be closed.
>>>
>>> So, you presume that building an application with the above requirements
>>> is
>>> impossible, even with auto-commit set to true. "
>>>
>>> ( If I sound ambiguous at any point, kindly forgive me for my lack of
>>> language skills. I will try to explain better, if need arises ).
>>>
>>> Looking forward to a reply
>>> Ajay Garg
>>>
>>> markrmiller wrote:
>>>   
>>>       
>>>> You are correct that autocommit=false means that docs will be in the 
>>>> index before the last thread releases its concurrent hold on a Writer, 
>>>> *but because IndexAccessor controls* *when the IndexSearchers are 
>>>> reopened*, those docs will still not be visible until the last thread 
>>>> holding a Writer releases it...that is when the reopening of Searchers 
>>>> occurs as well as when the Writer is closed.
>>>>
>>>> - Mark
>>>>
>>>> ajay_garg wrote:
>>>>     
>>>>         
>>>>> Hi. Sorry if I seem a stranger in this thread, but there is something
>>>>> that I
>>>>> can't resist clearing myself on.
>>>>>
>>>>> Mark, you say that the additional documents added to a index, won't
>>>>> show
>>>>> up
>>>>> until the # of threads accessing the index hits 0; and subsequently the
>>>>> indexwriter instance is closed.
>>>>>
>>>>> But I suppose that the autocommit=true, asserts that all flushed
>>>>> (Added)
>>>>> documents are immediately committed ( and hence visible ) in the index,
>>>>> and
>>>>> no explicit cclosing ( releasiing ) of the Indexwriter instance is
>>>>> required.
>>>>> ( Of course, re-opening an IndexSearcher instance is required ).
>>>>>
>>>>> Am I being dumb ?
>>>>>
>>>>> Looking eagerly for you to shed some light on my doubt.
>>>>>
>>>>> Thanks
>>>>> Ajay Garg
>>>>>
>>>>>
>>>>> codetester wrote:
>>>>>   
>>>>>       
>>>>>           
>>>>>> Hi All,
>>>>>>
>>>>>> A newbie out here.... I am using lucene 2.3.0. I need to use lucene to
>>>>>> perform live searching and indexing. To achieve that, I tried the
>>>>>> following
>>>>>>
>>>>>> FSDirectory directory = FSDirectory.getDirectory(location);
>>>>>> IndexReader reader = IndexReader.open(directory );
>>>>>> IndexWriter writer = new IndexWriter(directory , new SimpleAnalyzer(),
>>>>>> true); // <- I want to recreate the index every time
>>>>>> IndexSearcher searcher = new IndexSearcher( reader );
>>>>>>
>>>>>> For Searching, I have the following code
>>>>>> QueryParser queryParser = new QueryParser("xyz", new
>>>>>> StandardAnalyzer());
>>>>>> Hits hits = searcher .search(queryParser.parse(displayName + "*"));
>>>>>>
>>>>>> And for adding records, I have the following code
>>>>>>  // Create doc object
>>>>>>  writer.addDocument(doc);
>>>>>>
>>>>>>  IndexReader newIndexReader = reader.reopen() ;
>>>>>>  if ( newIndexReader != reader ) {
>>>>>>        reader.close() ;
>>>>>>  }
>>>>>>  reader = newIndexReader ;
>>>>>>  searcher.close() ;
>>>>>>  searcher = new IndexSearcher(reader );
>>>>>>         
>>>>>> So the issues that I face are 
>>>>>>
>>>>>> 1) The addition of new record is not reflected in the search ( even
>>>>>> though
>>>>>> I have reinited IndexSearcher )
>>>>>>
>>>>>> 2) Obviously, the add record code is not thread safe. I am trying to
>>>>>> close
>>>>>> and update the reference to IndexSearcher object. I could add a sync
>>>>>> block, but the bigger question would be that what is the ideal way to
>>>>>> achieve this case where I need to add and search record real-time ? 
>>>>>>
>>>>>> Thanks !
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>     
>>>>>>         
>>>>>>             
>>>>>   
>>>>>       
>>>>>           
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>>
>>>>     
>>>>         
>>>   
>>>       
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>>     
>
>   

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32419-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 05 12:39:57 2008
Return-Path: <java-user-return-32419-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94286 invoked from network); 5 Feb 2008 12:39:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Feb 2008 12:39:57 -0000
Received: (qmail 67386 invoked by uid 500); 5 Feb 2008 12:39:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67328 invoked by uid 500); 5 Feb 2008 12:39:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67316 invoked by uid 99); 5 Feb 2008 12:39:42 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Feb 2008 04:39:42 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Feb 2008 12:39:13 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1JMN56-00033r-7I
	for java-user@lucene.apache.org; Tue, 05 Feb 2008 04:39:20 -0800
Message-ID: <15289328.post@talk.nabble.com>
Date: Tue, 5 Feb 2008 04:39:20 -0800 (PST)
From: ajay_garg <garg.jeena.isi.ka.naam.hai@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Concurrent Indexing + Searching
In-Reply-To: <47A85527.6060207@gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: garg.jeena.isi.ka.naam.hai@gmail.com
References: <15234463.post@talk.nabble.com> <15255394.post@talk.nabble.com> <47A60308.4040300@gmail.com> <15262305.post@talk.nabble.com> <47A70844.8030806@gmail.com> <15288452.post@talk.nabble.com> <47A85527.6060207@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Thanks Mark. 

Just one last thing, this issue seems to be similar to the case, where the
Lucene source code says, that if an explicit "flush" method is called on an
IndexWriter instance, then again, it will wait for all the indexerThreads to
release the writer, and only then will the flush happen. Again, if the
indexerThreads are bombarding the writer continuously, then the moment, when
no indexer is accessing the writer, may never come. Thus, I invested some of
my time, and wrote my own code, to control the sleeping of indexerThreads.

Thanks Mark for your help.

Ajay Garg

markrmiller wrote:
> 
> 
> 
> ajay_garg wrote:
>> Thanks Mark.
>>
>> Ok, I got your point. So it happens like this :
>>
>> a) If it is me, who is re-opening an IndxReader, at any time, but
>> "manually-programmatically". That is, I don't want
>> a-sort-of-automatic-reopening-of-IndexWriter, then I am fine.
>>   
> Sure...your kind of doing what IndexAccessor does...choosing when to 
> reopen the views using some metric. Just follow Lucene access rules (no 
> writing ops with a Reader while another thread uses a Writer etc.) Also, 
> you want to share Searchers and Writers across threads.
>> b) If I do wish this automatic-reopening of index (using IndexAccessor),
>> then I am forced to rely on all the indexer threads releasing the
>> reference
>> to IndexWriter, which by the way, as a developer, can never be sure of
>> (that
>> is, I don't have any control, as to when exactly all the threads leave
>> the
>> reference ).
>>   
> You have fairly decent control...its all running on the server. A client 
> would be making a call to the server, which would run the code. To 
> start, release in a finally block, and second, avoid any infinite loops 
> or what not, and you have a fair amount of control here. As long as your 
> computer can compute and make forward progress, even if any exception is 
> thrown, things will get released. One year plus at many sites and I have 
> never seen anything not get released unless the whole server went down, 
> in which case I cannot do anything anyway. Now if your constantly 
> bombarded with write operations that just never let up...sure - but your 
> still the code behind the curtain...you can write some code that looks 
> for such a bombardment. I think the control is pretty good. I guess the 
> point is that the client is not whats using IndexAccessor...its making a 
> request to the server which then uses IndexAccessor.
>> Will be obliged if you could give a confirmation to my understanding.
>>
>> Thanks
>> Ajay Garg
>>
>> markrmiller wrote:
>>   
>>> You are right that if auto-commit=true and a user reopens an 
>>> IndexReader, the docs will absolutely be visible as they are flushed. I 
>>> think the part you are missing is that you need to be cooperating with 
>>> the IndexAccessor: a user should not be reopening an IndexReader. The 
>>> whole point of IndexAccessor is to coordinate these things...when a 
>>> Writer is released, we know the index has changed, so that is when the 
>>> IndexReaders are reopened for you. Because the IndexWriter is cached and 
>>> shared by Threads, a thread might release the Writer while another is 
>>> still using it...that is why things are not reopened and the Writer not 
>>> closed until the last thread releases its reference to it. Essentially, 
>>> IndexAccessor control visibility by controlling how current the view of 
>>> the Readers is, by controlling their reopening -- a user should agree 
>>> not to reopen -- just like he must agree not to use a ReadingWriter to 
>>> delete.
>>>
>>> If you want to just set an IndexWriter to indexing for eternity and then 
>>> have some Readers that you occasionally reopen, you don't need 
>>> IndexAccessor. Its purpose is to coordinate ReaderReaders, 
>>> WritingReaders, Searchers, and Writers for you. You are proposing to 
>>> coordinate them yourself. IndexAccess reopens Readers for you after a 
>>> Writer has been used, and enforces Lucene requirements, like a 
>>> WritingReader cannot be used at the same time as a Writer...etc.
>>>
>>> Technically, IndexAccessor could reopen the readers every 2 
>>> seconds...and then you would see your changes...instead it only tries to 
>>> reopen them if a change has been made to the index...and it does not 
>>> want to get greedy if a Writer is batch loading, so it waits for you to 
>>> release the Writer. You can control how often the 'view' is updated by 
>>> releasing the Writer more often -- say every 50 docs. Write 50 docs, 
>>> release, get, write 50 docs.
>>>
>>> - Mark
>>>
>>> ajay_garg wrote:
>>>     
>>>> @Mark.
>>>>
>>>> I am sorry, but I need a bit more of explanation. So you mean to say ::
>>>>
>>>> "If auto-commit is false, then of course, docs will not be visible in
>>>> the
>>>> index, until all the threads release themselves out of a particular
>>>> IndexWriter instance, and close() the IndexWriter instance.
>>>> If auto-commit is true, even then the above holds true. In particular,
>>>> let's
>>>> say iI need an application 
>>>> with the following requirements ::
>>>>
>>>> a) There are multiple indexer threads indexing on a SINGLE indexwriter
>>>> instance with auto-commit true
>>>> b) Each thread 'flushes' according to a pre-defined criteria at some
>>>> point
>>>> of time.
>>>> c) The index should be updated immediately, that is, if any user
>>>> re-opens
>>>> the IndexSearcher, then the 
>>>>     documents added till-that-snapshot-of-index must be visible. Note
>>>> that
>>>> the IndexWriter instance hasn't 
>>>>     been closed as yet, the indexer threads will be indexing till
>>>> eternity,
>>>> so that IndexWriter instance will 
>>>>     never be closed.
>>>>
>>>> So, you presume that building an application with the above
>>>> requirements
>>>> is
>>>> impossible, even with auto-commit set to true. "
>>>>
>>>> ( If I sound ambiguous at any point, kindly forgive me for my lack of
>>>> language skills. I will try to explain better, if need arises ).
>>>>
>>>> Looking forward to a reply
>>>> Ajay Garg
>>>>
>>>> markrmiller wrote:
>>>>   
>>>>       
>>>>> You are correct that autocommit=false means that docs will be in the 
>>>>> index before the last thread releases its concurrent hold on a Writer, 
>>>>> *but because IndexAccessor controls* *when the IndexSearchers are 
>>>>> reopened*, those docs will still not be visible until the last thread 
>>>>> holding a Writer releases it...that is when the reopening of Searchers 
>>>>> occurs as well as when the Writer is closed.
>>>>>
>>>>> - Mark
>>>>>
>>>>> ajay_garg wrote:
>>>>>     
>>>>>         
>>>>>> Hi. Sorry if I seem a stranger in this thread, but there is something
>>>>>> that I
>>>>>> can't resist clearing myself on.
>>>>>>
>>>>>> Mark, you say that the additional documents added to a index, won't
>>>>>> show
>>>>>> up
>>>>>> until the # of threads accessing the index hits 0; and subsequently
>>>>>> the
>>>>>> indexwriter instance is closed.
>>>>>>
>>>>>> But I suppose that the autocommit=true, asserts that all flushed
>>>>>> (Added)
>>>>>> documents are immediately committed ( and hence visible ) in the
>>>>>> index,
>>>>>> and
>>>>>> no explicit cclosing ( releasiing ) of the Indexwriter instance is
>>>>>> required.
>>>>>> ( Of course, re-opening an IndexSearcher instance is required ).
>>>>>>
>>>>>> Am I being dumb ?
>>>>>>
>>>>>> Looking eagerly for you to shed some light on my doubt.
>>>>>>
>>>>>> Thanks
>>>>>> Ajay Garg
>>>>>>
>>>>>>
>>>>>> codetester wrote:
>>>>>>   
>>>>>>       
>>>>>>           
>>>>>>> Hi All,
>>>>>>>
>>>>>>> A newbie out here.... I am using lucene 2.3.0. I need to use lucene
>>>>>>> to
>>>>>>> perform live searching and indexing. To achieve that, I tried the
>>>>>>> following
>>>>>>>
>>>>>>> FSDirectory directory = FSDirectory.getDirectory(location);
>>>>>>> IndexReader reader = IndexReader.open(directory );
>>>>>>> IndexWriter writer = new IndexWriter(directory , new
>>>>>>> SimpleAnalyzer(),
>>>>>>> true); // <- I want to recreate the index every time
>>>>>>> IndexSearcher searcher = new IndexSearcher( reader );
>>>>>>>
>>>>>>> For Searching, I have the following code
>>>>>>> QueryParser queryParser = new QueryParser("xyz", new
>>>>>>> StandardAnalyzer());
>>>>>>> Hits hits = searcher .search(queryParser.parse(displayName + "*"));
>>>>>>>
>>>>>>> And for adding records, I have the following code
>>>>>>>  // Create doc object
>>>>>>>  writer.addDocument(doc);
>>>>>>>
>>>>>>>  IndexReader newIndexReader = reader.reopen() ;
>>>>>>>  if ( newIndexReader != reader ) {
>>>>>>>        reader.close() ;
>>>>>>>  }
>>>>>>>  reader = newIndexReader ;
>>>>>>>  searcher.close() ;
>>>>>>>  searcher = new IndexSearcher(reader );
>>>>>>>         
>>>>>>> So the issues that I face are 
>>>>>>>
>>>>>>> 1) The addition of new record is not reflected in the search ( even
>>>>>>> though
>>>>>>> I have reinited IndexSearcher )
>>>>>>>
>>>>>>> 2) Obviously, the add record code is not thread safe. I am trying to
>>>>>>> close
>>>>>>> and update the reference to IndexSearcher object. I could add a sync
>>>>>>> block, but the bigger question would be that what is the ideal way
>>>>>>> to
>>>>>>> achieve this case where I need to add and search record real-time ? 
>>>>>>>
>>>>>>> Thanks !
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>     
>>>>>>>         
>>>>>>>             
>>>>>>   
>>>>>>       
>>>>>>           
>>>>> ---------------------------------------------------------------------
>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>
>>>>>
>>>>>
>>>>>     
>>>>>         
>>>>   
>>>>       
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>>
>>>     
>>
>>   
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/Concurrent-Indexing-%2B-Searching-tp15234463p15289328.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32420-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 05 14:52:11 2008
Return-Path: <java-user-return-32420-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37237 invoked from network); 5 Feb 2008 14:52:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Feb 2008 14:52:11 -0000
Received: (qmail 60783 invoked by uid 500); 5 Feb 2008 14:51:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60252 invoked by uid 500); 5 Feb 2008 14:51:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60240 invoked by uid 99); 5 Feb 2008 14:51:57 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Feb 2008 06:51:57 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of rsk.sen@gmail.com designates 209.85.162.183 as permitted sender)
Received: from [209.85.162.183] (HELO el-out-1112.google.com) (209.85.162.183)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Feb 2008 14:51:29 +0000
Received: by el-out-1112.google.com with SMTP id m34so836699ele.11
        for <java-user@lucene.apache.org>; Tue, 05 Feb 2008 06:51:34 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=OlfgHAqXwcoVQxdQdvjiEsL4Bam9ySAZv26H9l3J+ok=;
        b=aWE4lFCODv7NKhiNrjoiSV7aEkrxPgc/hq90ByiX3+jnHhqDNsFnP6nbYDZ4gTWwKbz371R6Hl1Yey8rZ3vs/GyHd8MZRnkSXFcW5I5068xtas/tRSomJriC7cK3ECxydmBgeGiTSKpoB//BUpymy52y+RbGXEHv42W9t598Cpw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=qbdmz12vmHg/kMwvd/fwl+4ePHMJxoKm7hDvfuCRbZy6cBH14lSdWMW/KpA86d92dDqfDqp4ENlzUdA2COu3+rwaDVQwSwBoBlJ//vC+Yw2f7KeQYbZky+9Dx+Uobmw7OZgK3HP2RMI2iSrIhTO2EDFsWQFFFSha9BkC6FkswDc=
Received: by 10.142.188.4 with SMTP id l4mr4320904wff.92.1202222491754;
        Tue, 05 Feb 2008 06:41:31 -0800 (PST)
Received: by 10.142.237.15 with HTTP; Tue, 5 Feb 2008 06:41:31 -0800 (PST)
Message-ID: <4628d2a90802050641t6d1ea319k547d1ddd88eeeb13@mail.gmail.com>
Date: Tue, 5 Feb 2008 20:11:31 +0530
From: "SK R" <rsk.sen@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: outof memory error
In-Reply-To: <359a92830802040753g6f691030pa1221ac727d8a3be@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_13199_19670112.1202222491746"
References: <4628d2a90802040725v33ffd76x3638e0c34343190@mail.gmail.com>
	 <359a92830802040753g6f691030pa1221ac727d8a3be@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_13199_19670112.1202222491746
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi,
   Thanks for your help Erick.

   I changed my code to flush writer before document add which helps to
reduce memory usage.
   Also reducing mergefactor and max buffered docs to some level help me to
avoid this OOM error (eventhough index size is ~1GB).

But please clarify below doubts

Make sure you flush your IndexWriter before attempting to index this
document.

 - Is it good to call writer.flush() before adding every document into
writer? Doesn't it affect performance of indexing or search? Whether it's
also similar to setting MaxBufferDocs=1?

    Also guide me which one is relatively good (take less time & memory)
among this
        (i) create 4 indexes each of 250MB and merge them to single index
file by using writer.addIndexes(..)
        (ii) create a 1GB index & optimize it?

Thanks & Regards
RSK



On Feb 4, 2008 9:23 PM, Erick Erickson <erickerickson@gmail.com> wrote:

> ummmm index smaller documents? <G>
>
> You cannot expect to index a 1G doc with 512M of memory in the JVM.
> The first thing I'd try is upping your JVM memory to the max your machine
> will accept.
>
> Make sure you flush your IndexWriter before attempting to index this
> document.
>
> But I would not be surprised if this failed to solve the problem. What's
> in
> this massive document? Would it be possible to break it up into
> smaller segments and index many sub-documents for this massive doc?
> I also wonder what problem you're trying to solve by indexing this doc.
> Is it a log file? I can't imagine a text document that big. That's like a
> 100 volume encyclopedia, and I can't help but wonder whether your users
> would be better served by indexing it in pieces.
>
> Best
> Erick
>
> On Feb 4, 2008 10:25 AM, SK R <rsk.sen@gmail.com> wrote:
>
> > Hi,
> >   I got outof memory exception while  indexing  huge documents (~1GB) in
> > one thread and optimizing some other (2 to 3) indexes in different
> > threads.
> > Max JVM heap size is 512MB. I'm using lucene2.3.0.
> >
> >   Please suggest a way to avoid this exception.
> >
> > Regards
> >  RSK
> >
>

------=_Part_13199_19670112.1202222491746--

From java-user-return-32421-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 05 15:02:26 2008
Return-Path: <java-user-return-32421-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60581 invoked from network); 5 Feb 2008 15:02:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Feb 2008 15:02:24 -0000
Received: (qmail 75100 invoked by uid 500); 5 Feb 2008 15:02:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75061 invoked by uid 500); 5 Feb 2008 15:02:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75050 invoked by uid 99); 5 Feb 2008 15:02:10 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Feb 2008 07:02:10 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of markrmiller@gmail.com designates 64.233.166.180 as permitted sender)
Received: from [64.233.166.180] (HELO py-out-1112.google.com) (64.233.166.180)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Feb 2008 15:01:41 +0000
Received: by py-out-1112.google.com with SMTP id a73so3078767pye.9
        for <java-user@lucene.apache.org>; Tue, 05 Feb 2008 07:01:45 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        bh=DuttvAYsiHmwbGyQovyuA79antN1/bCq14fsZK6Sucw=;
        b=B4Um17ZUipRIl7y/88JpuI5IOPRkPihNSS6VDFni9iAd3V2HhW0VeTeVfxBVnZVQ+KHVGhuqK1sU4vqyaLKozplNUAuwJPmQYrvlmqzZzXBLB3uJSBeeQ5B69X7nobgrhJfUahbIS/BSnV01fQEbSrotx9ciC8PXoAimM6+WwYk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=PPWuef7pBV5Cacp+IfIA7WJ7meY7RiEbbfeQqiX311/OtxmVvk0DGsvDpMCMLw3cz44BJhdJB4wsHBweEHS+c0NjYipVxLpR1cNUySR2krsKhwMIH7UKi9KxP6/4IeGonO7VR4E8/wLqyI2/Yhe4vkSVjdD4KJRh852He7A1k90=
Received: by 10.65.213.4 with SMTP id p4mr15844554qbq.7.1202223704508;
        Tue, 05 Feb 2008 07:01:44 -0800 (PST)
Received: from ?192.168.1.118? ( [69.124.234.183])
        by mx.google.com with ESMTPS id f18sm6836745qba.14.2008.02.05.07.01.42
        (version=SSLv3 cipher=RC4-MD5);
        Tue, 05 Feb 2008 07:01:43 -0800 (PST)
Message-ID: <47A87A50.1080709@gmail.com>
Date: Tue, 05 Feb 2008 10:01:36 -0500
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.9 (Windows/20071031)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Concurrent Indexing + Searching
References: <15234463.post@talk.nabble.com> <15255394.post@talk.nabble.com> <47A60308.4040300@gmail.com> <15262305.post@talk.nabble.com> <47A70844.8030806@gmail.com> <15288452.post@talk.nabble.com> <47A85527.6060207@gmail.com> <15289328.post@talk.nabble.com>
In-Reply-To: <15289328.post@talk.nabble.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org


>  Again, if the
> indexerThreads are bombarding the writer continuously, then the moment, when
> no indexer is accessing the writer, may never come. Thus, I invested some of
> my time, and wrote my own code, to control the sleeping of indexerThreads.
>   
I don't know how much of a concern this is. All you can really do is 
juggle the capabilities of Lucene, and Lucene was not designed to allow 
continuous writes to the database that are instantly available. That is 
one of the compromises of doing full text search over db. If you reopen 
the index in the face of constant write bombardment, it will already 
need to be reopened again immediately, and so on. You still need to 
consider the cost of reopening huge indexes...its not going to be fast 
enough to keep up with this kind of bombardment. I think you have to 
limit the use case.

I suppose you could refresh the readers occasionally in a long line of 
Writer get/release bombardment, but Lucene is just not in a position to 
handle such an interactive index, and I don't think it will be too 
fruitful trying to force it. If you correctly batch load, this is not 
that big of a limitation. Updates generally come in two ways...random 
updates here and there or a batch of updates at once - neither of these 
cases will cause bombardment.

- Mark

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32422-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 05 15:28:52 2008
Return-Path: <java-user-return-32422-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 16812 invoked from network); 5 Feb 2008 15:28:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Feb 2008 15:28:52 -0000
Received: (qmail 23168 invoked by uid 500); 5 Feb 2008 15:28:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23146 invoked by uid 500); 5 Feb 2008 15:28:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23135 invoked by uid 99); 5 Feb 2008 15:28:37 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Feb 2008 07:28:37 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of jmuguruza@gmail.com designates 64.233.170.186 as permitted sender)
Received: from [64.233.170.186] (HELO rn-out-0910.google.com) (64.233.170.186)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Feb 2008 15:28:09 +0000
Received: by rn-out-0910.google.com with SMTP id v46so911848rnb.14
        for <java-user@lucene.apache.org>; Tue, 05 Feb 2008 07:28:14 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        bh=RzEE/GgDncDbg6IrSNChVIztigJc94Z+TTsSxCkKLtE=;
        b=tvLQWVOUe5yO4x8vQRhlnnY8hzZ9vTiCEFjG6COR/ZzR+QTsLN20sKOv2/roeJnjvAulSpbLNmN4UuUjF2KUs5L+WrHYAdvH5Pg1m1CHuMHYB4kt8daWprDNpyDGnayMVg2xOn6tH3qBdCrHfedVkr3FAIzN5WvfTNXr+OKV0HQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=A3CLBfr8CnApa0dsUj4JKeQWr8YcxmNKtqTFSNvRlWemk64KLCYmdV3283oJ/8xToumO4lIG99Vck6IKjk206zR/cIOlC3foDLdbhp0eBWzHqygNtYWr4d+LAFsSvnIt/g0b/Y4GNKmLgHSY2vboV1kvrnggOTBQze/f1+gjRG8=
Received: by 10.142.113.17 with SMTP id l17mr4348000wfc.188.1202224910336;
        Tue, 05 Feb 2008 07:21:50 -0800 (PST)
Received: by 10.142.161.8 with HTTP; Tue, 5 Feb 2008 07:21:50 -0800 (PST)
Message-ID: <f071061b0802050721g2d4e4b50rbfb81adfbcb6b6b@mail.gmail.com>
Date: Tue, 5 Feb 2008 16:21:50 +0100
From: jm <jmuguruza@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: SnapshotDeletionPolicy usage
In-Reply-To: <CE5474A5-747A-487D-BB2B-5138D4074BC7@mikemccandless.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <f071061b0802050148y7fd68e33wa4531e1f6f0e8a2@mail.gmail.com>
	 <CE5474A5-747A-487D-BB2B-5138D4074BC7@mikemccandless.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks for the reply Mike.

> You can also wrap any other deletion policy (it doesn't have to be
> KeepOnlyLastCommit).
>
> When you want to do a backup, make sure to do try/finally, ie:
>
>    IndexCommitPoint cp = dp.snapshot();
>    try {
>      Collection files = cp.getFileNames();
>      <do copying here>
>    } finally {
>      dp.release();
>    }

Ohhh, I was hoping that by using that policy any _external_ process (a
commercial backup tool) would be able to backup the index files in a
consistent way...I am afraid I was asking too much.

If I manage to coordinate with the external process so it signals it
wants to do a backup, I take the snapshot in the indexing process, and
it then copies the files, and then I release the snapshot that will
work no?

javi

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32423-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 05 15:35:31 2008
Return-Path: <java-user-return-32423-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19207 invoked from network); 5 Feb 2008 15:35:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Feb 2008 15:35:31 -0000
Received: (qmail 34122 invoked by uid 500); 5 Feb 2008 15:35:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33606 invoked by uid 500); 5 Feb 2008 15:35:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33595 invoked by uid 99); 5 Feb 2008 15:35:16 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Feb 2008 07:35:16 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.128.186] (HELO fk-out-0910.google.com) (209.85.128.186)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Feb 2008 15:34:47 +0000
Received: by fk-out-0910.google.com with SMTP id z23so2341225fkz.5
        for <java-user@lucene.apache.org>; Tue, 05 Feb 2008 07:34:51 -0800 (PST)
Received: by 10.82.187.2 with SMTP id k2mr15600655buf.19.1202225690772;
        Tue, 05 Feb 2008 07:34:50 -0800 (PST)
Received: from ?10.17.4.4? ( [71.174.108.74])
        by mx.google.com with ESMTPS id 4sm7008478fgg.4.2008.02.05.07.34.49
        (version=TLSv1/SSLv3 cipher=OTHER);
        Tue, 05 Feb 2008 07:34:50 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v753)
In-Reply-To: <f071061b0802050721g2d4e4b50rbfb81adfbcb6b6b@mail.gmail.com>
References: <f071061b0802050148y7fd68e33wa4531e1f6f0e8a2@mail.gmail.com> <CE5474A5-747A-487D-BB2B-5138D4074BC7@mikemccandless.com> <f071061b0802050721g2d4e4b50rbfb81adfbcb6b6b@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <905EBCCC-E37F-4C8F-9405-495047CFB819@mikemccandless.com>
Content-Transfer-Encoding: 7bit
From: Michael McCandless <lucene@mikemccandless.com>
Subject: Re: SnapshotDeletionPolicy usage
Date: Tue, 5 Feb 2008 10:35:26 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.753)
X-Virus-Checked: Checked by ClamAV on apache.org


jm wrote:

> Thanks for the reply Mike.
>
>> You can also wrap any other deletion policy (it doesn't have to be
>> KeepOnlyLastCommit).
>>
>> When you want to do a backup, make sure to do try/finally, ie:
>>
>>    IndexCommitPoint cp = dp.snapshot();
>>    try {
>>      Collection files = cp.getFileNames();
>>      <do copying here>
>>    } finally {
>>      dp.release();
>>    }
>
> Ohhh, I was hoping that by using that policy any _external_ process (a
> commercial backup tool) would be able to backup the index files in a
> consistent way...I am afraid I was asking too much.

Well, an external process doesn't have enough information.

EG if you have a reader on the index, it could be keeping files  
around (because it has them open) that are not actually referenced by  
the most recent commit to the index.  You don't need to back up those  
files.  So you really need to use the current writer to have it tell  
you which files are referenced.

And, if you keep adding docs via the writer, and merges complete, the  
index files will be changing while you're doing the backup (but, not  
the files referenced by your snapshot).

> If I manage to coordinate with the external process so it signals it
> wants to do a backup, I take the snapshot in the indexing process, and
> it then copies the files, and then I release the snapshot that will
> work no?

Yes, that will work.  Once you have the list of files, you can send  
it to any external  tool (rsync, tar, robocopy, cp, etc.) to have  
them actually do the copying.

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32424-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 05 15:48:06 2008
Return-Path: <java-user-return-32424-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22129 invoked from network); 5 Feb 2008 15:48:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Feb 2008 15:48:06 -0000
Received: (qmail 49274 invoked by uid 500); 5 Feb 2008 15:47:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49247 invoked by uid 500); 5 Feb 2008 15:47:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49235 invoked by uid 99); 5 Feb 2008 15:47:52 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Feb 2008 07:47:52 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of erickerickson@gmail.com designates 209.85.134.188 as permitted sender)
Received: from [209.85.134.188] (HELO mu-out-0910.google.com) (209.85.134.188)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Feb 2008 15:47:35 +0000
Received: by mu-out-0910.google.com with SMTP id i10so2508014mue.5
        for <java-user@lucene.apache.org>; Tue, 05 Feb 2008 07:47:18 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=HDdJ5aSgPTmr7hSTVGWohEhqiCGw02WrMYwiDOHxB8s=;
        b=lRQh2NfcvhUgOhbiT88hPnlc1ff6Ui4qCdPhxVeTmOsFZLM17otk0KvsKiBdE+fMElf2w9IF1x18ZX70u+MDZrk7d/y/Dix/2qT+6+yVwbEeqmKBa8LmCpjZCmvYn9rY1wvuD9WogiDtIQpYKtzpf1hMSC97LJA8j83RwZovyDk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=V37DaxgVttVX8LOd2pU8L7ayqqrydJBHHevZvyiUC608wZf6LF0xbJFkuQeMEwtM7sHFfYnoeod6sZ1lT7oBSs/QMNF8X6XDAeJ8kLeUGpOywd+fZdsfxA4ZSsDb/45hdih5pInaERu4vSuSAFjNoz7uyNt8uT14QeCnbp5yT7g=
Received: by 10.82.116.15 with SMTP id o15mr15682685buc.3.1202226438649;
        Tue, 05 Feb 2008 07:47:18 -0800 (PST)
Received: by 10.82.151.7 with HTTP; Tue, 5 Feb 2008 07:47:18 -0800 (PST)
Message-ID: <359a92830802050747u7f7d0544w7a9889f740e7e114@mail.gmail.com>
Date: Tue, 5 Feb 2008 10:47:18 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene Search with relational operators
In-Reply-To: <15283742.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_8653_28043170.1202226438648"
References: <15283742.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_8653_28043170.1202226438648
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Did you see this page on the Wiki?

http://wiki.apache.org/lucene-java/BooleanQuerySyntax

Best
Erick

On Feb 5, 2008 12:23 AM, GokulAnand <gokulanand@gmail.com> wrote:

>
> Hi all,
>
> When i do a search ( lucene ) with the combination of relational
> operators,
> it does not get the required result.
> ie, when the query is like  ::
>
> i) A and B or C,  it fetches the records for only (A and B) combination
> rejecting C ( OR operator )
> ii) A or B and C, it fetches the records for only (B and C) combination
> rejecting A ( OR operator )
>
> Why is that behaving tlike this ??
> --
> View this message in context:
> http://www.nabble.com/Lucene-Search-with-relational-operators-tp15283742p15283742.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_8653_28043170.1202226438648--

From java-user-return-32425-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 05 15:55:26 2008
Return-Path: <java-user-return-32425-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 24277 invoked from network); 5 Feb 2008 15:55:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Feb 2008 15:55:26 -0000
Received: (qmail 62636 invoked by uid 500); 5 Feb 2008 15:55:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62607 invoked by uid 500); 5 Feb 2008 15:55:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62591 invoked by uid 99); 5 Feb 2008 15:55:05 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Feb 2008 07:55:05 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of erickerickson@gmail.com designates 209.85.134.190 as permitted sender)
Received: from [209.85.134.190] (HELO mu-out-0910.google.com) (209.85.134.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Feb 2008 15:54:50 +0000
Received: by mu-out-0910.google.com with SMTP id i10so2510143mue.5
        for <java-user@lucene.apache.org>; Tue, 05 Feb 2008 07:54:43 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=hHpse4Yr/cZj8h7MTC2fvhiZeRNuhW+NHKBj7x1jF3k=;
        b=q9/WO0zfPoAlEylur7acQL4psw2m1sWerb/acBFRg42h9oCj2Gdfv08XxZexKW1pVPLJgTgGGHieh9QtJZ3tjpOFyRhho1AwCc3xl/GYy6pYP6LQ/MunNEHuCECptGDnKokxVLLoSmS7Xo8sobufc32b/hKgU2DBbdROf9waE28=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=l6jPtoO01U2Yh2C9cfrdZDPHA1JjKeDxyW6VsptOVf51wTXFz9ry+JFfQ+0LxOWPrENnc3X+zLRG3GB8ZnAS5AwkJtOoSHg46UxHMEZrY45m8hJYA2DyDGWB/RWv0Uz/CxMhiqqFn3eZ6VkFjYObF2UotM4g43fkTH1fPLczkVo=
Received: by 10.82.114.3 with SMTP id m3mr15659361buc.24.1202226883610;
        Tue, 05 Feb 2008 07:54:43 -0800 (PST)
Received: by 10.82.151.7 with HTTP; Tue, 5 Feb 2008 07:54:43 -0800 (PST)
Message-ID: <359a92830802050754m2c833a9fu80a4f6d02395d500@mail.gmail.com>
Date: Tue, 5 Feb 2008 10:54:43 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: outof memory error
In-Reply-To: <4628d2a90802050641t6d1ea319k547d1ddd88eeeb13@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_8677_4580188.1202226883604"
References: <4628d2a90802040725v33ffd76x3638e0c34343190@mail.gmail.com>
	 <359a92830802040753g6f691030pa1221ac727d8a3be@mail.gmail.com>
	 <4628d2a90802050641t6d1ea319k547d1ddd88eeeb13@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_8677_4580188.1202226883604
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

See below:

On Feb 5, 2008 9:41 AM, SK R <rsk.sen@gmail.com> wrote:

> Hi,
>   Thanks for your help Erick.
>
>   I changed my code to flush writer before document add which helps to
> reduce memory usage.
>   Also reducing mergefactor and max buffered docs to some level help me to
> avoid this OOM error (eventhough index size is ~1GB).
>
> But please clarify below doubts
>
> Make sure you flush your IndexWriter before attempting to index this
> document.
>
>  - Is it good to call writer.flush() before adding every document into
> writer? Doesn't it affect performance of indexing or search? Whether it's
> also similar to setting MaxBufferDocs=1?
>

No, this is not a good idea. I'd expect this to slow down indexing
significantly.
What I was assuming is that you'd have something like:

if (incoming document is huge) flush index writer

just to free up all the memory you can.


>
>    Also guide me which one is relatively good (take less time & memory)
> among this
>        (i) create 4 indexes each of 250MB and merge them to single index
> file by using writer.addIndexes(..)
>        (ii) create a 1GB index & optimize it?
>

Don't know. You have to measure your particular situation. There's some
discussion
(search the archives) about using several threads to speed up indexing.
Also, there's
the wiki page, see

http://wiki.apache.org/lucene-java/ImproveIndexingSpeed

The first bullet point is important here. Do you really need to improve
indexing speed?
How long does it take and how often to you build it?

But perhaps I mis-read your original post. I *thought* you were talking
about
indexing a 1G *document*. The size of the index shouldn't matter as far as
an OOM error. But now that I re-read your original post, I should have also
suggested that you optimize in different processes than you index since the
implication is that they are separate indexes anyway.

Best
Erick


>
> Thanks & Regards
> RSK
>
>
>
> On Feb 4, 2008 9:23 PM, Erick Erickson <erickerickson@gmail.com> wrote:
>
> > ummmm index smaller documents? <G>
> >
> > You cannot expect to index a 1G doc with 512M of memory in the JVM.
> > The first thing I'd try is upping your JVM memory to the max your
> machine
> > will accept.
> >
> > Make sure you flush your IndexWriter before attempting to index this
> > document.
> >
> > But I would not be surprised if this failed to solve the problem. What's
> > in
> > this massive document? Would it be possible to break it up into
> > smaller segments and index many sub-documents for this massive doc?
> > I also wonder what problem you're trying to solve by indexing this doc.
> > Is it a log file? I can't imagine a text document that big. That's like
> a
> > 100 volume encyclopedia, and I can't help but wonder whether your users
> > would be better served by indexing it in pieces.
> >
> > Best
> > Erick
> >
> > On Feb 4, 2008 10:25 AM, SK R <rsk.sen@gmail.com> wrote:
> >
> > > Hi,
> > >   I got outof memory exception while  indexing  huge documents (~1GB)
> in
> > > one thread and optimizing some other (2 to 3) indexes in different
> > > threads.
> > > Max JVM heap size is 512MB. I'm using lucene2.3.0.
> > >
> > >   Please suggest a way to avoid this exception.
> > >
> > > Regards
> > >  RSK
> > >
> >
>

------=_Part_8677_4580188.1202226883604--

From java-user-return-32426-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 05 16:16:28 2008
Return-Path: <java-user-return-32426-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30526 invoked from network); 5 Feb 2008 16:16:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Feb 2008 16:16:28 -0000
Received: (qmail 195 invoked by uid 500); 5 Feb 2008 16:16:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 99935 invoked by uid 500); 5 Feb 2008 16:16:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 99924 invoked by uid 99); 5 Feb 2008 16:16:13 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Feb 2008 08:16:13 -0800
X-ASF-Spam-Status: No, hits=-3.8 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [128.230.108.46] (HELO SUEXCL-02.ad.syr.edu) (128.230.108.46)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Feb 2008 16:15:52 +0000
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: RE: lucene 2.3 in production
Date: Tue, 5 Feb 2008 11:14:58 -0500
Message-ID: <9294E20AED46934EA459020706463F947EB7E8@SUEXCL-02.ad.syr.edu>
In-Reply-To: <15283746.post@talk.nabble.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: lucene 2.3 in production
Thread-Index: AchnuMKm8GmruBHaTKWAZrBEpSv+3gAVyv5Q
From: "Steven A Rowe" <sarowe@syr.edu>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi GokulAnand,

On 02/05/2008 at 12:33 AM, GokulAnand wrote:
> Can some one get me the link to get lucene 2.3 jars.

It is considered bad form on this list to reply to an existing thread =
with a message on a different topic than the one already being discussed =
- this is called "thread hijacking".  If you have a question not =
directly related to an existing thread, you should start a new thread =
rather than replying to an existing one, just like you did with your =
message with the subject "Lucene Search with relational operators".

It is also considered bad form to not at least make an attempt to answer =
your question for yourself using available resources.  In your case, it =
is evident that you have not even looked at the front page of the Lucene =
Java website.

Go to the main Lucene Java page:

   <http://lucene.apache.org/java/>

The project description, just under the table of contents, contains a =
link to download Lucene from the text "free download".

Also, the first News item "24 January 2008 - Lucene Java 2.3.0 =
available" contains download links.

Steve

>=20
>=20
> markrmiller wrote:
> >=20
> > You still have to be careful if you want to alternate a search and
> > write. If you are loading a lot of docs this way, you would want to
> > hold the Writer to batch the docs, but while you are holding it, you
> > will not have a fresh view of the index - so you could add the same =
doc
> > twice if it came twice in a batch. The only way to be sure you avoid
> > this is to reopen readers after you add every doc. This is just not
> > going to be a fast way of doing things...but if you have a high
> > mergefactor, the new reopen method will prob make it *much* faster. =
Or
> > if you are sure that the batch won't contain duplicates, you can =
batch
> > load.
> >=20
> >=20
> > John Wang wrote:
> > > Hi:
> > >=20
> > >    Is there anyone running a full production deployment on
> lucene 2.3
> > > (with high traffic, large index and frequent updates)? We are =
thinking
> > > of doing this but wanted to get some feedback.
> > >=20
> > > Thanks
> > >=20
> > > -John
> > >=20
> > >=20
> >=20
> >=20
> > =
---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org For
> > additional commands, e-mail: java-user-help@lucene.apache.org
> >=20
> >=20
> >=20
>=20
> -- View this message in context:
> http://www.nabble.com/lucene-2.3-in-production-tp15276078p1528 =
3746.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>=20
>=20
> --------------------------------------------------------------------- =
To
> unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org For
> additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>

=20


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32427-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 05 20:03:57 2008
Return-Path: <java-user-return-32427-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12621 invoked from network); 5 Feb 2008 20:03:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Feb 2008 20:03:57 -0000
Received: (qmail 15342 invoked by uid 500); 5 Feb 2008 20:03:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15307 invoked by uid 500); 5 Feb 2008 20:03:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15292 invoked by uid 99); 5 Feb 2008 20:03:42 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Feb 2008 12:03:42 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of spencertickner@gmail.com designates 66.249.92.169 as permitted sender)
Received: from [66.249.92.169] (HELO ug-out-1314.google.com) (66.249.92.169)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Feb 2008 20:03:14 +0000
Received: by ug-out-1314.google.com with SMTP id u40so248737ugc.29
        for <java-user@lucene.apache.org>; Tue, 05 Feb 2008 12:03:19 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        bh=ZZ1hKumBB0EUo3Fb5knkHdIHhtkeRhpD8K1huAGys2g=;
        b=xS5HWyfWCW5oe6bFy20qrTccne+vhNgAzSb+9NewvzKiFMQEDaopzTrVl+GNZs+1b24rMVHVGTxraAhw8+oETM4qr7sa7q7fWEB8nwnckg1SmxGIbdugApnzIBFpZqvFXiWQ5BwxoOlc3riwldjEPX8dSG3RYNr1rZoDSSpoNWI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=jIEURD2FNc3GsgtcHUEgKKV/O2DQ7r4mJ5vB4M+VWQb1bTv+Qy0dL2ve8glS1Vq5aSPwcK9R7yRDOjUoOlNaB812nqhB7bYp6hsES0/2EOrqCQzxDrXi3LUo0zTCebqaMkArkK6JrkrPhc/T4hD7VlR4ZWsA2K+DyPitRVi7J00=
Received: by 10.78.193.19 with SMTP id q19mr15652123huf.69.1202241799017;
        Tue, 05 Feb 2008 12:03:19 -0800 (PST)
Received: by 10.78.184.15 with HTTP; Tue, 5 Feb 2008 12:03:19 -0800 (PST)
Message-ID: <2d72c9c50802051203v72b84bd6ic42a4b968947c6d3@mail.gmail.com>
Date: Tue, 5 Feb 2008 12:03:19 -0800
From: "Spencer Tickner" <spencertickner@gmail.com>
To: java-user@lucene.apache.org
Subject: Extracting terms from a query splitting a phrase.
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org

Hi List,

Thanks in advance for the help. I'm trying to extract terms from a
query. From the reading I've done a phrase such as "General Act" is
considered a term.
http://lucene.apache.org/java/docs/queryparsersyntax.html#Terms .
However when I'm doing testing to get the extractTerms of my query it
splits this into General and Act. I'm wondering if I'm missing or not
understanding something.

My test Java code is:

        private String FIELD_NAME = "rr_root";
        private Query query;
        private Hits hits = null;

	public void testSearch() throws Exception
	{
		doSearching("\"General Act\"");
		HashSet terms = new HashSet();
		query.extractTerms(terms);
		int i = 0;
		for (Iterator iter = terms.iterator(); iter.hasNext();)
		{
			i++;
			Term term = (Term)iter.next();
			System.out.println(i + " " + "term-" + term.text() + " field-" +
term.field());
		}
         }

	public void doSearching(String queryString) throws Exception
	{
		QueryParser parser=new QueryParser(FIELD_NAME, new WhitespaceAnalyzer());
		query = parser.parse(queryString);
		doSearching(query);
	}
	public void doSearching(Query unReWrittenQuery) throws Exception
	{
		searcher = aspect.getSearcher(); // searcher comming from a cahed class
		query=unReWrittenQuery.rewrite(aspect.getReader()); // reader
comming from a cached class
		System.out.println("Searching for: " + query.toString(FIELD_NAME));
		hits = searcher.search(query);
	}

The current output is:

Searching for: "General Act"
1 term-General field-rr_root
2 term-Act field-rr_root

The output I expect is:

Searching for: "General Act"
1 term-General Act field-rr_root

Thanks for any help.

Spencer

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32428-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 05 20:20:25 2008
Return-Path: <java-user-return-32428-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20558 invoked from network); 5 Feb 2008 20:20:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Feb 2008 20:20:24 -0000
Received: (qmail 54229 invoked by uid 500); 5 Feb 2008 20:20:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54199 invoked by uid 500); 5 Feb 2008 20:20:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54188 invoked by uid 99); 5 Feb 2008 20:20:10 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Feb 2008 12:20:10 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.128.189 as permitted sender)
Received: from [209.85.128.189] (HELO fk-out-0910.google.com) (209.85.128.189)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Feb 2008 20:19:41 +0000
Received: by fk-out-0910.google.com with SMTP id z23so2422767fkz.5
        for <java-user@lucene.apache.org>; Tue, 05 Feb 2008 12:19:46 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=/8mLaqD44CAwjzx8u1bUiiOlcbE++sXmPLsAs6wbu4A=;
        b=b/Ym4Et/FE5qjliivpHm03Wnr1WnZ0PWIuFy9KYG3M++AJT2/ZwpmNXZd0LI9gvxG82NjXtZzewtKO707983ZtVMptk0V/oazfWg4ehQF1CGuHPZvJrLaWt/2uI6oWCMlJE2+fop00U5qLqBcQ8N7cfPAOOL/RqXKI0mplpdRtc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=o/L/wduIaS1rxBnkkdHwq2MCxQsWMc71/YN1zop0YlFNbrfKKAiEDO7QC8RXoE0VcbSO40WtRFSN5XKyDfHnc87oTdIqppar5bYgrZyb6CB7PYSUq1AmWl3nq8yyaCMvcpQ13ZcUlKE8OgqYADLm0gamNlAcddoMrpcYU8HqlOE=
Received: by 10.82.138.6 with SMTP id l6mr16246891bud.13.1202242785704;
        Tue, 05 Feb 2008 12:19:45 -0800 (PST)
Received: by 10.82.151.7 with HTTP; Tue, 5 Feb 2008 12:19:45 -0800 (PST)
Message-ID: <359a92830802051219n121f843dt7d8bb9b3aa6a1051@mail.gmail.com>
Date: Tue, 5 Feb 2008 15:19:45 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Extracting terms from a query splitting a phrase.
In-Reply-To: <2d72c9c50802051203v72b84bd6ic42a4b968947c6d3@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_9796_4369939.1202242785698"
References: <2d72c9c50802051203v72b84bd6ic42a4b968947c6d3@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_9796_4369939.1202242785698
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I don't think WhitespaceAnalyzer is doing what you think it is. From
the Javadoc...

public class *WhitespaceTokenizer*extends
CharTokenizer<file:///C:/lucene-2.1.0/docs/api/org/apache/lucene/analysis/CharTokenizer.html>

A WhitespaceTokenizer is a tokenizer that divides text at
whitespace. Adjacent sequences of non-Whitespace characters form tokens.

 ------------------------------

 CharacterTokenizer
An abstract base class for simple, character-oriented tokenizers.

So I'm pretty sure that CharacterTokenizer is throwing out all the
non-character data (i.e. your double quotes), then WhitespaceTokenizer
is breaking on the space.

What is it that you want to have happen? If you're searching for
"General" right next to "Act", you can use a SpanNearQuery with
two SpanTermQuerys and a slop of 0.

The other thing to be aware of with WhitespaceAnalyzer is that
it doesn't lower case anything, so whether you'll get any hits
in your index depends upon the analyzers you used to index with
and whether case matches exactly.

Best
Erick

On Feb 5, 2008 3:03 PM, Spencer Tickner <spencertickner@gmail.com> wrote:

> Hi List,
>
> Thanks in advance for the help. I'm trying to extract terms from a
> query. From the reading I've done a phrase such as "General Act" is
> considered a term.
> http://lucene.apache.org/java/docs/queryparsersyntax.html#Terms .
> However when I'm doing testing to get the extractTerms of my query it
> splits this into General and Act. I'm wondering if I'm missing or not
> understanding something.
>
> My test Java code is:
>
>        private String FIELD_NAME = "rr_root";
>        private Query query;
>        private Hits hits = null;
>
>        public void testSearch() throws Exception
>        {
>                doSearching("\"General Act\"");
>                HashSet terms = new HashSet();
>                query.extractTerms(terms);
>                int i = 0;
>                for (Iterator iter = terms.iterator(); iter.hasNext();)
>                {
>                        i++;
>                        Term term = (Term)iter.next();
>                        System.out.println(i + " " + "term-" + term.text()
> + " field-" +
> term.field());
>                }
>         }
>
>        public void doSearching(String queryString) throws Exception
>        {
>                QueryParser parser=new QueryParser(FIELD_NAME, new
> WhitespaceAnalyzer());
>                query = parser.parse(queryString);
>                doSearching(query);
>        }
>        public void doSearching(Query unReWrittenQuery) throws Exception
>        {
>                searcher = aspect.getSearcher(); // searcher comming from a
> cahed class
>                query=unReWrittenQuery.rewrite(aspect.getReader()); //
> reader
> comming from a cached class
>                System.out.println("Searching for: " + query.toString
> (FIELD_NAME));
>                hits = searcher.search(query);
>        }
>
> The current output is:
>
> Searching for: "General Act"
> 1 term-General field-rr_root
> 2 term-Act field-rr_root
>
> The output I expect is:
>
> Searching for: "General Act"
> 1 term-General Act field-rr_root
>
> Thanks for any help.
>
> Spencer
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_9796_4369939.1202242785698--

From java-user-return-32429-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 05 20:51:27 2008
Return-Path: <java-user-return-32429-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 39814 invoked from network); 5 Feb 2008 20:51:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Feb 2008 20:51:27 -0000
Received: (qmail 92211 invoked by uid 500); 5 Feb 2008 20:51:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92181 invoked by uid 500); 5 Feb 2008 20:51:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92170 invoked by uid 99); 5 Feb 2008 20:51:13 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Feb 2008 12:51:13 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of spencertickner@gmail.com designates 66.249.92.168 as permitted sender)
Received: from [66.249.92.168] (HELO ug-out-1314.google.com) (66.249.92.168)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Feb 2008 20:50:44 +0000
Received: by ug-out-1314.google.com with SMTP id u40so259512ugc.29
        for <java-user@lucene.apache.org>; Tue, 05 Feb 2008 12:50:49 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        bh=xqGLfbUQuefHxyo4TESfrfw3Dh8qHNckFCnjurPKk1Q=;
        b=UThLAZtWDKtHV+elsNs1Rz10d2f72wv1pLW8Lr9z0ZeYvRHMFRpSwxXFuxGW8PpSxa/3uiB+hipibJTChbI/YmzNQZL1YR5uwlb5C7bCDpk+3PA625jwLYoDqpUZBImbSikL2v8Yjy5tClbS0zq2iHSeyod6hu1fJoztmZdDZ14=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=Y9RNwGD/NZeTUbq7Y35hgiZaQC64f7BhLRwtQIqQ5CqtWwn7JlUiJC9q7yE51Ed/YGriI8TZLIDNrR5bPpXhchX+Mp7gJTrqcinJyQxfWUgMHD757216E0fjDLE1YWRNnbEGjmpX5/lX0OFt0HCwsjUSOAZyNxsQFMEfQaKIG8E=
Received: by 10.78.204.7 with SMTP id b7mr15759784hug.54.1202244648648;
        Tue, 05 Feb 2008 12:50:48 -0800 (PST)
Received: by 10.78.184.15 with HTTP; Tue, 5 Feb 2008 12:50:48 -0800 (PST)
Message-ID: <2d72c9c50802051250n499fe7edrf3f0913153ab0593@mail.gmail.com>
Date: Tue, 5 Feb 2008 12:50:48 -0800
From: "Spencer Tickner" <spencertickner@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Extracting terms from a query splitting a phrase.
In-Reply-To: <359a92830802051219n121f843dt7d8bb9b3aa6a1051@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <2d72c9c50802051203v72b84bd6ic42a4b968947c6d3@mail.gmail.com>
	 <359a92830802051219n121f843dt7d8bb9b3aa6a1051@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Erick,

Thanks for your response. I think you're right about the Whitespace
anlayzer. I was actually useing the StandardAnalyzer before and tried
the Whitespace analyzer to see if the StandardAnalyzer was pulling off
the quotes. I guess what I'm trying to mimic is the information found:

http://lucene.apache.org/java/docs/queryparsersyntax.html

What analyzer would you suggest when parsing a query like:

title:"The Right Way" AND text:go

Or will I have to pull apart a user entered query using regular
expressions, or whatever, and use different Queries (such as the
SpanNearQuery) to get the extracted terms?

Thanks for any advice.

Spencer


On Feb 5, 2008 12:19 PM, Erick Erickson <erickerickson@gmail.com> wrote:
> I don't think WhitespaceAnalyzer is doing what you think it is. From
> the Javadoc...
>
> public class *WhitespaceTokenizer*extends
> CharTokenizer<file:///C:/lucene-2.1.0/docs/api/org/apache/lucene/analysis/CharTokenizer.html>
>
> A WhitespaceTokenizer is a tokenizer that divides text at
> whitespace. Adjacent sequences of non-Whitespace characters form tokens.
>
>  ------------------------------
>
>  CharacterTokenizer
> An abstract base class for simple, character-oriented tokenizers.
>
> So I'm pretty sure that CharacterTokenizer is throwing out all the
> non-character data (i.e. your double quotes), then WhitespaceTokenizer
> is breaking on the space.
>
> What is it that you want to have happen? If you're searching for
> "General" right next to "Act", you can use a SpanNearQuery with
> two SpanTermQuerys and a slop of 0.
>
> The other thing to be aware of with WhitespaceAnalyzer is that
> it doesn't lower case anything, so whether you'll get any hits
> in your index depends upon the analyzers you used to index with
> and whether case matches exactly.
>
> Best
> Erick
>
>
> On Feb 5, 2008 3:03 PM, Spencer Tickner <spencertickner@gmail.com> wrote:
>
> > Hi List,
> >
> > Thanks in advance for the help. I'm trying to extract terms from a
> > query. From the reading I've done a phrase such as "General Act" is
> > considered a term.
> > http://lucene.apache.org/java/docs/queryparsersyntax.html#Terms .
> > However when I'm doing testing to get the extractTerms of my query it
> > splits this into General and Act. I'm wondering if I'm missing or not
> > understanding something.
> >
> > My test Java code is:
> >
> >        private String FIELD_NAME = "rr_root";
> >        private Query query;
> >        private Hits hits = null;
> >
> >        public void testSearch() throws Exception
> >        {
> >                doSearching("\"General Act\"");
> >                HashSet terms = new HashSet();
> >                query.extractTerms(terms);
> >                int i = 0;
> >                for (Iterator iter = terms.iterator(); iter.hasNext();)
> >                {
> >                        i++;
> >                        Term term = (Term)iter.next();
> >                        System.out.println(i + " " + "term-" + term.text()
> > + " field-" +
> > term.field());
> >                }
> >         }
> >
> >        public void doSearching(String queryString) throws Exception
> >        {
> >                QueryParser parser=new QueryParser(FIELD_NAME, new
> > WhitespaceAnalyzer());
> >                query = parser.parse(queryString);
> >                doSearching(query);
> >        }
> >        public void doSearching(Query unReWrittenQuery) throws Exception
> >        {
> >                searcher = aspect.getSearcher(); // searcher comming from a
> > cahed class
> >                query=unReWrittenQuery.rewrite(aspect.getReader()); //
> > reader
> > comming from a cached class
> >                System.out.println("Searching for: " + query.toString
> > (FIELD_NAME));
> >                hits = searcher.search(query);
> >        }
> >
> > The current output is:
> >
> > Searching for: "General Act"
> > 1 term-General field-rr_root
> > 2 term-Act field-rr_root
> >
> > The output I expect is:
> >
> > Searching for: "General Act"
> > 1 term-General Act field-rr_root
> >
> > Thanks for any help.
> >
> > Spencer
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32430-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 05 21:54:07 2008
Return-Path: <java-user-return-32430-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69030 invoked from network); 5 Feb 2008 21:54:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Feb 2008 21:54:07 -0000
Received: (qmail 95574 invoked by uid 500); 5 Feb 2008 21:53:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95542 invoked by uid 500); 5 Feb 2008 21:53:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95531 invoked by uid 99); 5 Feb 2008 21:53:52 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Feb 2008 13:53:52 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of spencertickner@gmail.com designates 66.249.92.170 as permitted sender)
Received: from [66.249.92.170] (HELO ug-out-1314.google.com) (66.249.92.170)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Feb 2008 21:53:24 +0000
Received: by ug-out-1314.google.com with SMTP id u40so274695ugc.29
        for <java-user@lucene.apache.org>; Tue, 05 Feb 2008 13:53:22 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        bh=iA9n78OHSjuAMjOUrRd/dgEXTBugQhuEaWtOaOpqm4o=;
        b=oWMhVeekG8jtjSHHJGyuE6PXWlDdVa40eX5b98eMnKRxj6Yajnd1S1Yzm5d6zm+LXNScbDuTCE6TnUyuIwykFkJ7gV8nHzDI2BZ02aMoMpg0pRIfQor5CjTjjiIurZS1aghfqXHGvguAAOsdeRnpZAm0wolBSiMKbMqutOQLtRE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=eXFwaSCv1UIvnTFPunzIhGj8zBPC1Z9Ze84DKqN2orwznDahuvSz3/HlcgJznxjqhIm/qRc0xUMwXIN/Q94h4B+LwManMrHYjJFd+Cw5hi6ugrzU7Nv0O4ESpvDGEkyDClzHk3lXdWJ6gHUOdYRS4mheXlyEvmnqqeWECy2zR30=
Received: by 10.78.136.9 with SMTP id j9mr15916415hud.46.1202248401351;
        Tue, 05 Feb 2008 13:53:21 -0800 (PST)
Received: by 10.78.184.15 with HTTP; Tue, 5 Feb 2008 13:53:21 -0800 (PST)
Message-ID: <2d72c9c50802051353r4c07dd67u5627a0a2566f3aac@mail.gmail.com>
Date: Tue, 5 Feb 2008 13:53:21 -0800
From: "Spencer Tickner" <spencertickner@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Extracting terms from a query splitting a phrase.
In-Reply-To: <2d72c9c50802051250n499fe7edrf3f0913153ab0593@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <2d72c9c50802051203v72b84bd6ic42a4b968947c6d3@mail.gmail.com>
	 <359a92830802051219n121f843dt7d8bb9b3aa6a1051@mail.gmail.com>
	 <2d72c9c50802051250n499fe7edrf3f0913153ab0593@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

I guess to be move concise I'm looking to get all the terms that were
searched for so I can highlight them in the original document. After
looking through the highlighter contrib class I figure I had found my
solution with query.extractTerms. Works great for searches like:

genera* -> generally, general
ac? -> act
General Act -> general, act

and a bunch of others I've tested.. So it's almost perfect except when
searching for a Phrase. If someone searched for "General Act" I
wouldn't want General and Act highlighted unless they were right
beside each other.

Thanks,

Spencer

On Feb 5, 2008 12:50 PM, Spencer Tickner <spencertickner@gmail.com> wrote:
> Hi Erick,
>
> Thanks for your response. I think you're right about the Whitespace
> anlayzer. I was actually useing the StandardAnalyzer before and tried
> the Whitespace analyzer to see if the StandardAnalyzer was pulling off
> the quotes. I guess what I'm trying to mimic is the information found:
>
> http://lucene.apache.org/java/docs/queryparsersyntax.html
>
> What analyzer would you suggest when parsing a query like:
>
> title:"The Right Way" AND text:go
>
> Or will I have to pull apart a user entered query using regular
> expressions, or whatever, and use different Queries (such as the
> SpanNearQuery) to get the extracted terms?
>
> Thanks for any advice.
>
> Spencer
>
>
>
> On Feb 5, 2008 12:19 PM, Erick Erickson <erickerickson@gmail.com> wrote:
> > I don't think WhitespaceAnalyzer is doing what you think it is. From
> > the Javadoc...
> >
> > public class *WhitespaceTokenizer*extends
> > CharTokenizer<file:///C:/lucene-2.1.0/docs/api/org/apache/lucene/analysis/CharTokenizer.html>
> >
> > A WhitespaceTokenizer is a tokenizer that divides text at
> > whitespace. Adjacent sequences of non-Whitespace characters form tokens.
> >
> >  ------------------------------
> >
> >  CharacterTokenizer
> > An abstract base class for simple, character-oriented tokenizers.
> >
> > So I'm pretty sure that CharacterTokenizer is throwing out all the
> > non-character data (i.e. your double quotes), then WhitespaceTokenizer
> > is breaking on the space.
> >
> > What is it that you want to have happen? If you're searching for
> > "General" right next to "Act", you can use a SpanNearQuery with
> > two SpanTermQuerys and a slop of 0.
> >
> > The other thing to be aware of with WhitespaceAnalyzer is that
> > it doesn't lower case anything, so whether you'll get any hits
> > in your index depends upon the analyzers you used to index with
> > and whether case matches exactly.
> >
> > Best
> > Erick
> >
> >
> > On Feb 5, 2008 3:03 PM, Spencer Tickner <spencertickner@gmail.com> wrote:
> >
> > > Hi List,
> > >
> > > Thanks in advance for the help. I'm trying to extract terms from a
> > > query. From the reading I've done a phrase such as "General Act" is
> > > considered a term.
> > > http://lucene.apache.org/java/docs/queryparsersyntax.html#Terms .
> > > However when I'm doing testing to get the extractTerms of my query it
> > > splits this into General and Act. I'm wondering if I'm missing or not
> > > understanding something.
> > >
> > > My test Java code is:
> > >
> > >        private String FIELD_NAME = "rr_root";
> > >        private Query query;
> > >        private Hits hits = null;
> > >
> > >        public void testSearch() throws Exception
> > >        {
> > >                doSearching("\"General Act\"");
> > >                HashSet terms = new HashSet();
> > >                query.extractTerms(terms);
> > >                int i = 0;
> > >                for (Iterator iter = terms.iterator(); iter.hasNext();)
> > >                {
> > >                        i++;
> > >                        Term term = (Term)iter.next();
> > >                        System.out.println(i + " " + "term-" + term.text()
> > > + " field-" +
> > > term.field());
> > >                }
> > >         }
> > >
> > >        public void doSearching(String queryString) throws Exception
> > >        {
> > >                QueryParser parser=new QueryParser(FIELD_NAME, new
> > > WhitespaceAnalyzer());
> > >                query = parser.parse(queryString);
> > >                doSearching(query);
> > >        }
> > >        public void doSearching(Query unReWrittenQuery) throws Exception
> > >        {
> > >                searcher = aspect.getSearcher(); // searcher comming from a
> > > cahed class
> > >                query=unReWrittenQuery.rewrite(aspect.getReader()); //
> > > reader
> > > comming from a cached class
> > >                System.out.println("Searching for: " + query.toString
> > > (FIELD_NAME));
> > >                hits = searcher.search(query);
> > >        }
> > >
> > > The current output is:
> > >
> > > Searching for: "General Act"
> > > 1 term-General field-rr_root
> > > 2 term-Act field-rr_root
> > >
> > > The output I expect is:
> > >
> > > Searching for: "General Act"
> > > 1 term-General Act field-rr_root
> > >
> > > Thanks for any help.
> > >
> > > Spencer
> > >
> > > ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > >
> > >
> >
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32431-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 06 04:09:56 2008
Return-Path: <java-user-return-32431-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5681 invoked from network); 6 Feb 2008 04:09:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Feb 2008 04:09:56 -0000
Received: (qmail 1129 invoked by uid 500); 6 Feb 2008 04:09:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 1095 invoked by uid 500); 6 Feb 2008 04:09:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 1082 invoked by uid 99); 6 Feb 2008 04:09:41 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Feb 2008 20:09:41 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Feb 2008 04:09:12 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1JMbb5-0004YR-93
	for java-user@lucene.apache.org; Tue, 05 Feb 2008 20:09:19 -0800
Message-ID: <15305064.post@talk.nabble.com>
Date: Tue, 5 Feb 2008 20:09:19 -0800 (PST)
From: ajay_garg <garg.jeena.isi.ka.naam.hai@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Concurrent Indexing + Searching
In-Reply-To: <47A87A50.1080709@gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: garg.jeena.isi.ka.naam.hai@gmail.com
References: <15234463.post@talk.nabble.com> <15255394.post@talk.nabble.com> <47A60308.4040300@gmail.com> <15262305.post@talk.nabble.com> <47A70844.8030806@gmail.com> <15288452.post@talk.nabble.com> <47A85527.6060207@gmail.com> <15289328.post@talk.nabble.com> <47A87A50.1080709@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Thanks a ton Mark. I am really obliged to interact with you, who is never
hesistant to reply on the slightest of queries.

Thanks again.
Ajay Garg

markrmiller wrote:
> 
> 
>>  Again, if the
>> indexerThreads are bombarding the writer continuously, then the moment,
>> when
>> no indexer is accessing the writer, may never come. Thus, I invested some
>> of
>> my time, and wrote my own code, to control the sleeping of
>> indexerThreads.
>>   
> I don't know how much of a concern this is. All you can really do is 
> juggle the capabilities of Lucene, and Lucene was not designed to allow 
> continuous writes to the database that are instantly available. That is 
> one of the compromises of doing full text search over db. If you reopen 
> the index in the face of constant write bombardment, it will already 
> need to be reopened again immediately, and so on. You still need to 
> consider the cost of reopening huge indexes...its not going to be fast 
> enough to keep up with this kind of bombardment. I think you have to 
> limit the use case.
> 
> I suppose you could refresh the readers occasionally in a long line of 
> Writer get/release bombardment, but Lucene is just not in a position to 
> handle such an interactive index, and I don't think it will be too 
> fruitful trying to force it. If you correctly batch load, this is not 
> that big of a limitation. Updates generally come in two ways...random 
> updates here and there or a batch of updates at once - neither of these 
> cases will cause bombardment.
> 
> - Mark
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/Concurrent-Indexing-%2B-Searching-tp15234463p15305064.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32432-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 06 05:35:48 2008
Return-Path: <java-user-return-32432-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35277 invoked from network); 6 Feb 2008 05:35:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Feb 2008 05:35:48 -0000
Received: (qmail 64069 invoked by uid 500); 6 Feb 2008 05:35:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64027 invoked by uid 500); 6 Feb 2008 05:35:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64010 invoked by uid 99); 6 Feb 2008 05:35:34 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Feb 2008 21:35:34 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [130.107.64.135] (HELO Balboa.AI.SRI.COM) (130.107.64.135)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Feb 2008 05:35:17 +0000
Received: from Balboa.AI.SRI.COM (localhost [127.0.0.1])
	by Balboa.AI.SRI.COM (8.11.7p2+Sun/8.10.1) with SMTP id m165Z7112173
	for <java-user@lucene.apache.org>; Tue, 5 Feb 2008 21:35:07 -0800 (PST)
Received: from Salt.AI.SRI.COM ([130.107.65.211])
 by Balboa.AI.SRI.COM (SMSSMTP 4.1.9.35) with SMTP id M2008020521350605684
 for <java-user@lucene.apache.org>; Tue, 05 Feb 2008 21:35:06 -0800
Received: from localhost.ai.sri.com
	([127.0.0.1] helo=[130.107.65.199] ident=root)
	by Salt.AI.SRI.COM with asmtp (Exim 3.35 #1 (Debian))
	id 1JMcw6-0001yC-00
	for <java-user@lucene.apache.org>; Tue, 05 Feb 2008 21:35:06 -0800
Message-ID: <47A9470A.4020500@ai.sri.com>
Date: Tue, 05 Feb 2008 21:35:06 -0800
From: Jay <yu@AI.SRI.COM>
User-Agent: Thunderbird 2.0.0.9 (Windows/20071031)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: DefaultIndexAccessor
References: <1bcb7c7f0802040450k1ca47982v66894276f1c20c2b@mail.gmail.com>	 <47A70DE3.50202@gmail.com>	 <1bcb7c7f0802040612m1e2bdc07h9a2eaa531fc3dd5@mail.gmail.com>	 <47A74849.3050005@gmail.com> <1bcb7c7f0802041001k165bd530n75e692e635971182@mail.gmail.com> <47A7AFD4.5040908@gmail.com>
In-Reply-To: <47A7AFD4.5040908@gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Great effort for much improved indexaccessor, Mark!
A couple questions and observations:

1. In release(Searcher), you removed a check if the given searcher is 
the cached one from an earlier version. This could potentially  cause 
problems for some people.
2. The createdSearchers variable is not really used: you just populate 
it and print it out. What's the purpose for it?
3. The variable numSearchersForRetirment is  used in 
WarmingIndexAccessor not DefaultIndexAccessor.
4. I wish that in the next release of Lucene, they will add searcher 
reopen api so that we do not have to wor around it.
5. Although currently IndexSearcher.close() does almost nothing except 
to close the internal index reader, it might be a safer to close 
searcher itself as well in closeCachedSearcher(), just in case, the 
searcher may have other resources to release in the future version of 
Lucene.

Thanks!

Jay
Mark Miller wrote:
> For anyone following this thread who would like to check this out, I put 
> up the new code with the warming capability:
> 
> https://issues.apache.org/jira/browse/LUCENE-1026
> <https://issues.apache.org/jira/secure/attachment/12374729/IndexAccessor-02.04.2008.zip> 
> IndexAccessor-02.04.2008.zip 
> <https://issues.apache.org/jira/secure/attachment/12374729/IndexAccessor-02.04.2008.zip> 
> (32 kb)
> 
> See the comment at the bottom.
> 
> Cam Bazz wrote:
>> Hello Mark,
>>
>> Thank you for your lengthy and valuable clarification. I have the case -
>> before adding to the index, i must check if a document exist with the
>> same key (actually, double key) - or before deleting a document - I must
>> ensure it exists in the index.
>>
>> Currently I am doing it with my custom caching routine. It works quite 
>> well
>> upto 32M documents. but after that something happens and it really slows
>> down.
>>
>> I will experiment with your implementation, as soon as I can. It is very
>> cool by the way. Will it be included in the next release?
>>
>> Best,
>> -C.B.
>>
>> On Feb 4, 2008 7:15 PM, Mark Miller <markrmiller@gmail.com> wrote:
>>
>>  
>>> The purpose of IndexAccessor is to coordinate Readers/Writers for a
>>> Lucene index. Readers and Writers in Lucene are multi-threaded in that
>>> multiple threads may use them at the same time, but they must/should be
>>> shared and there are special rules (You cannot delete with a Reader
>>> while a Writer is working on the index). Also, you need to refresh
>>> Reader views every so often; this is expensive (though usually much less
>>> so with the new reopen method).
>>>
>>> IndexAccessor enforces the rules and controls Reader refreshing. Instead
>>> of worrying about caching or index interaction rules, you just ask for
>>> your Reader/Writer, use it to search or add a doc, and then return it.
>>> The rest is taken care of for you.
>>>
>>> This is done by keeping a cached Writer and Searcher(s) that all threads
>>> share. References to the Searchers are counted so that after a Writer is
>>> returned (and no other thread has a reference to the Writer),
>>> IndexAccessor waits for all of the current Searchers to come back and
>>> then reopens their Readers.
>>>
>>> In this regard, you get a  similar setup to what Solr might give: from
>>> any thread you just add docs and run searches -- you don't have to worry
>>> about refreshing Readers or sharing Writers/Readers or one thread
>>> deleting with a Reader while another thread tries to write with a 
>>> Writer.
>>>
>>> This setup allows you to do other cool things, like warm Searchers
>>> before putting them into action. Thats what the code I am posting soon
>>> is be capable of - when the Readers are reopened, search requests will
>>> still be handled by the old Readers while the new Searchers run a sample
>>> query with optional sort fields. This will make sure the Reader is open
>>> and its sort caches are loaded before the first thread tries to use it.
>>> Much faster response to applications.
>>>
>>> You must  open a new Reader or reopen a Reader to see recently added
>>> docs...IndexAccessor provides no real way around that. But it does make
>>> the reopening much easier -- and your application that just wants to add
>>> docs and search at will from multiple threads, won't have to worry about
>>> it.
>>>
>>> You can bail out here, or if you want further clarification I will
>>> include an alternate attempt at what IndexAccessor is below.
>>>
>>> - Mark
>>>
>>>
>>> ---------------------------------------------------------------------------------------------------- 
>>>
>>> When accessing a Lucene index from multiple threads, there are a variety
>>> of issues that you must address.
>>>
>>> 1. The Readers/Writer should be shared across threads.
>>> 2. Readers must periodically be refreshed, either be creating new
>>> instances or using the new reopen method.
>>> 3. A Reader that writes needs to be properly coordinated with a Writer
>>> eg they cannot be used at the same time.
>>>
>>> IndexAccessor addresses each of these issues.
>>>
>>> How it works:
>>>
>>> A single Writer is shared among threads that try to concurrently
>>> retrieve and use a Writer. Once all of these threads release their
>>> reference
>>> to the Writer, it is closed and upon the next request a new one is
>>> created.
>>>
>>> A single Searcher for each Similarity is also shared across threads.
>>> Upon first request, a new Searcher is created. This Searcher is then
>>> returned
>>> upon every request. A count of every Searcher reference retrieved is
>>> maintained.
>>>
>>> When all references to a Writer are released, the Writer is closed and
>>> after waiting for all of the Searchers to be returned, the Searchers are
>>> reopened. Without warming enabled, new requests for Searchers/Readers
>>> must wait for this reopen to complete. If warming is enabled, the old
>>> Searchers/Readers continue handling Searcher requests until the Readers
>>> have been reopened and any requested sort caches have been loaded.
>>>
>>> If you ask for a writing Reader, you will not get it until a Writer is
>>> released and vice versa.
>>>
>>> The result is that you can freely use Writers/Readers/Searchers from any
>>> thread without considering thread interactions. ***
>>>
>>> If you want to add docs, just ask for a Writer, add the docs, and
>>> release the Writer. If you want to search, get a Searcher, search,
>>> and release the Searcher. You don't have to worry about reopening
>>> Readers or coordinating access.
>>>
>>>
>>> ***
>>> You still do have to consider things like hogging the Writer/Readers -
>>> if you don't occasionally release them, things will not stay very
>>> interactive.
>>> The best method is to just get the object, use it, and then return it in
>>> a finally block. Batch load multiple docs, but if your just randomly
>>> adding
>>> a doc, get the Writer, add it, and then release the Writer in a finally
>>> block. If you are batch loading a million docs and you want to be able
>>> to see them
>>> as they are added: get the writer and add 10,000 docs (or something),
>>> release the Writer, get the Writer and add 10,000 docs, etc.
>>>
>>> Cam Bazz wrote:
>>>    
>>>> Hello Mark,
>>>>
>>>> I have been reading the code - and honestly I have not understood 
>>>> how it
>>>> works. I was hoping that this was a solution to the case when you are
>>>>       
>>> adding
>>>    
>>>> documents - in a multithreaded way, it allows other non-writer threads
>>>>       
>>> to be
>>>    
>>>> able to see documents added without refreshing the indexsearcher - by
>>>>       
>>> using
>>>    
>>>> some caching mechanism.
>>>>
>>>> Could you elaborate what IndexAccessor does and how it does it a little
>>>>       
>>> bit
>>>    
>>>> more?
>>>>
>>>> Best Regards,
>>>> -C.B.
>>>>
>>>> On Feb 4, 2008 3:06 PM, Mark Miller <markrmiller@gmail.com> wrote:
>>>>
>>>>
>>>>      
>>>>> IndexAccessor-1.26.2008.zip is the latest one. I will be dating a zip
>>>>>         
>>> from
>>>    
>>>>> now on.
>>>>>
>>>>> I hope to post new code with the warming either tonight or tomorrow
>>>>>         
>>> night.
>>>    
>>>>> I would be ecstatic to have some help vetting that.
>>>>>
>>>>> Also, I am thinking of making a change so that when you release the
>>>>>         
>>> Writer
>>>    
>>>>> the thread that releases does not block until reopen. I think the
>>>>>         
>>> original
>>>    
>>>>> author did this so that if you add a doc with a thread and then
>>>>>         
>>> immediately
>>>    
>>>>> search from the same thread, you are guaranteed to find the doc.
>>>>>         
>>> However,
>>>    
>>>>> this gaurentee did not hold -- if another thread had a reference to 
>>>>> the
>>>>> Writer and a new thread grabbed a Writer and then quicly released
>>>>>         
>>> before the
>>>    
>>>>> first thread, you will have added a doc but it will not be visible
>>>>>         
>>> until the
>>>    
>>>>> first thread releases its reference to the Writer...since the concept
>>>>>         
>>> is not
>>>    
>>>>> enforced anyway, you might as well not block for the final thread that
>>>>> releases the Writer either. Instead I will grab a thread from a thread
>>>>>         
>>> pool
>>>    
>>>>> to do the reopening with that thread, and return right after closing
>>>>>         
>>> the
>>>    
>>>>> Writer. The result is that you cannot add a doc and search and expect
>>>>>         
>>> to
>>>    
>>>>> find it without waiting a second or too. But this way things will be
>>>>> consistent, and an app that adds docs will be a bit more
>>>>>         
>>> responsive....eg it
>>>    
>>>>> wont hang as Readers are being reopened.
>>>>>
>>>>> I also have to bring the AccessProvider classes back. No easy way to
>>>>>         
>>> use
>>>    
>>>>> your own custom Readers without it...I shouldn't have stripped it out.
>>>>>
>>>>> - Mark
>>>>>
>>>>>
>>>>>
>>>>> Cam Bazz wrote:
>>>>>
>>>>>        
>>>>>> Hello,
>>>>>>
>>>>>> Regarding https://issues.apache.org/jira/browse/LUCENE-1026 , this
>>>>>>           
>>> seems
>>>    
>>>>>> very interesting. I have read the discussion on the page, but I could
>>>>>>
>>>>>>           
>>>>> not
>>>>>
>>>>>        
>>>>>> figure out which set of files is the latest.
>>>>>> Is it the IndexAccessor-1.26.2008.zip file?
>>>>>>
>>>>>> I will read through the code, make my own tests, and send some
>>>>>>           
>>> feedback.
>>>    
>>>>>> Best.
>>>>>> -C.B.
>>>>>>
>>>>>>
>>>>>>
>>>>>>           
>>>>> ---------------------------------------------------------------------
>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>
>>>>>
>>>>>
>>>>>         
>>>>       
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>>     
>>
>>   
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32433-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 06 09:55:39 2008
Return-Path: <java-user-return-32433-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63490 invoked from network); 6 Feb 2008 09:55:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Feb 2008 09:55:39 -0000
Received: (qmail 42945 invoked by uid 500); 6 Feb 2008 09:55:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42913 invoked by uid 500); 6 Feb 2008 09:55:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42856 invoked by uid 99); 6 Feb 2008 09:55:24 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Feb 2008 01:55:24 -0800
X-ASF-Spam-Status: No, hits=-2.0 required=10.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [216.251.50.9] (HELO SFOVWL03.infosys.com) (216.251.50.9)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Feb 2008 09:54:55 +0000
Received: from indhubbhs01.ad.infosys.com ([192.168.200.81]) by SFOVWL03.infosys.com with InterScan Message Security Suite; Wed, 06 Feb 2008 01:53:07 -0800
Received: from blrkechub01.ad.infosys.com ([10.66.236.41]) by indhubbhs01.ad.infosys.com with Microsoft SMTPSVC(6.0.3790.3959);
	 Wed, 6 Feb 2008 15:24:58 +0530
Received: from BLRKECMBX06.ad.infosys.com ([10.66.236.32]) by
 blrkechub01.ad.infosys.com ([10.66.236.41]) with mapi; Wed, 6 Feb 2008
 15:24:58 +0530
From: Allahbaksh Mohammedali Asadullah <Allahbaksh_Asadullah@infosys.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Wed, 6 Feb 2008 15:24:57 +0530
Subject: Payload basic query
Thread-Topic: Payload basic query
Thread-Index: AchoplSqQ8VAb3vwQDe7qLwE//zVbw==
Message-ID: <68959F25CDEBCB4F917D5A253291D73E07CD9F3052@BLRKECMBX06.ad.infosys.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: multipart/alternative;
	boundary="_000_68959F25CDEBCB4F917D5A253291D73E07CD9F3052BLRKECMBX06ad_"
MIME-Version: 1.0
X-OriginalArrivalTime: 06 Feb 2008 09:54:58.0804 (UTC) FILETIME=[557AF340:01C868A6]
X-Virus-Checked: Checked by ClamAV on apache.org

--_000_68959F25CDEBCB4F917D5A253291D73E07CD9F3052BLRKECMBX06ad_
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable


Hi All,
I want to store information in Payload. How do I write Payload value to=
 Index. How to I sort value depending upon the Payload?
I could not find any method in Document class which takes Payload as=
 argument.

Regards,
Allahbaksh





**************** CAUTION - Disclaimer *****************
This e-mail contains PRIVILEGED AND CONFIDENTIAL INFORMATION intended=
 solely for the use of the addressee(s). If you are not the intended=
 recipient, please notify the sender by e-mail and delete the original=
 message. Further, you are not to copy, disclose, or distribute this e-mail=
 or its contents to any other person and any such actions are unlawful.=
 This e-mail may contain viruses. Infosys has taken every reasonable=
 precaution to minimize this risk, but is not liable for any damage you may=
 sustain as a result of any virus in this e-mail. You should carry out your=
 own virus checks before opening the e-mail or attachment. Infosys reserves=
 the right to monitor and review the content of all messages sent to or=
 from this e-mail address. Messages sent to or from this e-mail address may=
 be stored on the Infosys e-mail system.
***INFOSYS******** End of Disclaimer ********INFOSYS***
--_000_68959F25CDEBCB4F917D5A253291D73E07CD9F3052BLRKECMBX06ad_--


From java-user-return-32434-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 06 12:59:29 2008
Return-Path: <java-user-return-32434-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 27320 invoked from network); 6 Feb 2008 12:59:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Feb 2008 12:59:29 -0000
Received: (qmail 36957 invoked by uid 500); 6 Feb 2008 12:59:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36932 invoked by uid 500); 6 Feb 2008 12:59:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36921 invoked by uid 99); 6 Feb 2008 12:59:14 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Feb 2008 04:59:14 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of markrmiller@gmail.com designates 64.233.166.179 as permitted sender)
Received: from [64.233.166.179] (HELO py-out-1112.google.com) (64.233.166.179)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Feb 2008 12:58:44 +0000
Received: by py-out-1112.google.com with SMTP id a73so3489827pye.9
        for <java-user@lucene.apache.org>; Wed, 06 Feb 2008 04:58:51 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        bh=prjaByAS55qNBBtN/3GQm5LdesWvywq4yErzW2rl+gQ=;
        b=azF7QGIhFf8wUqcOTWfuQ6pqh9P7BpG6C079Rb85J8Gmm1DZXNX7pXHoCW4LZDsFIOioJkvdOmptP7WLgoL9UlyTUP2YgHidnd0CDucG8VhKt+M7WVYW15zcUBwLMvk1RpCprxpfHQaupbVAoaDnMwsQp1VnNByEWPAI5+k+LNo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=CW7tEdIU2azqAi4UM4PPtY67Xr0q+2bF2t3r/k6XADNW3L7vma1gqrfapAbF1G3zfRaCBl9LNZOUySTUIlxnxnP0XvNfZx99PS+tvENwznCKQ2a0FIUc90UIvGwIYKG9rEz2njK/Xoj6SQTS9SGLKfPwq/e8TKrkq9SVOC68qhE=
Received: by 10.64.249.20 with SMTP id w20mr18508588qbh.44.1202302730781;
        Wed, 06 Feb 2008 04:58:50 -0800 (PST)
Received: from ?192.168.1.118? ( [69.124.234.183])
        by mx.google.com with ESMTPS id e13sm8137784qba.37.2008.02.06.04.58.49
        (version=SSLv3 cipher=RC4-MD5);
        Wed, 06 Feb 2008 04:58:49 -0800 (PST)
Message-ID: <47A9AEE8.9050700@gmail.com>
Date: Wed, 06 Feb 2008 07:58:16 -0500
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.9 (Windows/20071031)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: DefaultIndexAccessor
References: <1bcb7c7f0802040450k1ca47982v66894276f1c20c2b@mail.gmail.com>	 <47A70DE3.50202@gmail.com>	 <1bcb7c7f0802040612m1e2bdc07h9a2eaa531fc3dd5@mail.gmail.com>	 <47A74849.3050005@gmail.com> <1bcb7c7f0802041001k165bd530n75e692e635971182@mail.gmail.com> <47A7AFD4.5040908@gmail.com> <47A9470A.4020500@ai.sri.com>
In-Reply-To: <47A9470A.4020500@ai.sri.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks for the feedback jay. One at a time:

Jay wrote:
> Great effort for much improved indexaccessor, Mark!
> A couple questions and observations:
>
> 1. In release(Searcher), you removed a check if the given searcher is 
> the cached one from an earlier version. This could potentially  cause 
> problems for some people.
This is something that I meant to come back to. The problem is that the 
Searcher you are returning may have already been replaced in the 
Searcher cache...so retired searchers must be checked too. Will consider 
again.
> 2. The createdSearchers variable is not really used: you just populate 
> it and print it out. What's the purpose for it?
This was a debug check that I had been using. Will cleanup.
> 3. The variable numSearchersForRetirment is  used in 
> WarmingIndexAccessor not DefaultIndexAccessor.
Thanks. Will move.
> 4. I wish that in the next release of Lucene, they will add searcher 
> reopen api so that we do not have to wor around it.
Not sure how this would play out, but an interesting thought...
> 5. Although currently IndexSearcher.close() does almost nothing except 
> to close the internal index reader, it might be a safer to close 
> searcher itself as well in closeCachedSearcher(), just in case, the 
> searcher may have other resources to release in the future version of 
> Lucene.
The problem is that because I am supplying the reader, calling 
Searcher.close() won't close it. The Searcher has to be created without 
a supplied Reader for it to be able to close itself. I got the same itch 
though...
>
> Thanks!
>
> Jay
I appreciate the feedback! I'll be working more on this. I think more 
can be done.

- Mark

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32435-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 06 13:04:49 2008
Return-Path: <java-user-return-32435-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30083 invoked from network); 6 Feb 2008 13:04:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Feb 2008 13:04:49 -0000
Received: (qmail 45306 invoked by uid 500); 6 Feb 2008 13:04:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45261 invoked by uid 500); 6 Feb 2008 13:04:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45250 invoked by uid 99); 6 Feb 2008 13:04:35 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Feb 2008 05:04:35 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.5] (HELO spunkymail-a3.g.dreamhost.com) (208.97.132.5)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Feb 2008 13:04:04 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a3.g.dreamhost.com (Postfix) with ESMTP id 6F09215D4EA
	for <java-user@lucene.apache.org>; Wed,  6 Feb 2008 05:04:10 -0800 (PST)
Message-Id: <1006F060-98C7-4CAF-8B6B-8B9F5707C7FA@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <68959F25CDEBCB4F917D5A253291D73E07CD9F3052@BLRKECMBX06.ad.infosys.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v915)
Subject: Re: Payload basic query
Date: Wed, 6 Feb 2008 08:04:09 -0500
References: <68959F25CDEBCB4F917D5A253291D73E07CD9F3052@BLRKECMBX06.ad.infosys.com>
X-Mailer: Apple Mail (2.915)
X-Virus-Checked: Checked by ClamAV on apache.org

Payloads are added during analysis onto the Token.  Have a look in the  
contrib/analyzers module in 2.3 or the trunk version of Lucene.  There  
are a couple of examples in there that add payloads to tokens (see the  
payloads package at
http://lucene.apache.org/java/2_3_0/api/contrib-analyzers/org/apache/lucene/analysis/payloads/package-summary.html) 
.    You can use the BoostingTermQuery to use the payload as a factor  
in scoring, or, you might be able to write your own custom Sort, but I  
haven't thought that all the way through just yet.

Michael B. also has an excellent talk from last year's ApacheCon that  
covers payloads at http://people.apache.org/~buschmi/apachecon/AdvancedIndexingLuceneAtlanta07.ppt

-Grant

On Feb 6, 2008, at 4:54 AM, Allahbaksh Mohammedali Asadullah wrote:

>
> Hi All,
> I want to store information in Payload. How do I write Payload value  
> to Index. How to I sort value depending upon the Payload?
> I could not find any method in Document class which takes Payload as  
> argument.
>
> Regards,
> Allahbaksh
>
>
>
>
>
> **************** CAUTION - Disclaimer *****************
> This e-mail contains PRIVILEGED AND CONFIDENTIAL INFORMATION  
> intended solely for the use of the addressee(s). If you are not the  
> intended recipient, please notify the sender by e-mail and delete  
> the original message. Further, you are not to copy, disclose, or  
> distribute this e-mail or its contents to any other person and any  
> such actions are unlawful. This e-mail may contain viruses. Infosys  
> has taken every reasonable precaution to minimize this risk, but is  
> not liable for any damage you may sustain as a result of any virus  
> in this e-mail. You should carry out your own virus checks before  
> opening the e-mail or attachment. Infosys reserves the right to  
> monitor and review the content of all messages sent to or from this  
> e-mail address. Messages sent to or from this e-mail address may be  
> stored on the Infosys e-mail system.
> ***INFOSYS******** End of Disclaimer ********INFOSYS***

--------------------------
Grant Ingersoll
http://lucene.grantingersoll.com
http://www.lucenebootcamp.com

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32436-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 06 13:07:33 2008
Return-Path: <java-user-return-32436-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30763 invoked from network); 6 Feb 2008 13:07:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Feb 2008 13:07:33 -0000
Received: (qmail 47884 invoked by uid 500); 6 Feb 2008 13:07:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47853 invoked by uid 500); 6 Feb 2008 13:07:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47842 invoked by uid 99); 6 Feb 2008 13:07:19 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Feb 2008 05:07:19 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of markrmiller@gmail.com designates 64.233.166.182 as permitted sender)
Received: from [64.233.166.182] (HELO py-out-1112.google.com) (64.233.166.182)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Feb 2008 13:06:49 +0000
Received: by py-out-1112.google.com with SMTP id a73so3492447pye.9
        for <java-user@lucene.apache.org>; Wed, 06 Feb 2008 05:06:56 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        bh=QV6wa8xmjG6A9ma9ePBgeC/MQyce7KDXEj+3OCfbwt0=;
        b=Vb9Wq0u+P/IV6YFprtuzSHPL49PwaiMursY84YwG2n6dotasFC8qRTjFh2D9OT19G0KH2VCufo/obIMENrQ/dcOAUSB3gDwAqgCksyRRcn4QCL6ct3ln4heAd0iv++3883KGBAZdWq1NxDSxHar18Pr6jh80qv0kh8KoJZxbB14=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=W+2SnGTNfoFm22drn+4Pz2/xCYgsykq42aP3DIG30466jXazCjOeJf/syDPzz3KaoAxg4jcrHZ79zUfFr8yWEASEBzOKYqNfiPKVJq69k9BMhEdMNlxvn6A5KVZNSZAUsJ//KLWtlfPkYtqU5Bjf06MimCiJ1LCG41uTMN2PfWU=
Received: by 10.65.204.7 with SMTP id g7mr18499394qbq.73.1202303215415;
        Wed, 06 Feb 2008 05:06:55 -0800 (PST)
Received: from ?192.168.1.118? ( [69.124.234.183])
        by mx.google.com with ESMTPS id e18sm8175637qbe.29.2008.02.06.05.06.53
        (version=SSLv3 cipher=RC4-MD5);
        Wed, 06 Feb 2008 05:06:54 -0800 (PST)
Message-ID: <47A9B0CC.1000809@gmail.com>
Date: Wed, 06 Feb 2008 08:06:20 -0500
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.9 (Windows/20071031)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: DefaultIndexAccessor
References: <1bcb7c7f0802040450k1ca47982v66894276f1c20c2b@mail.gmail.com>	 <47A70DE3.50202@gmail.com>	 <1bcb7c7f0802040612m1e2bdc07h9a2eaa531fc3dd5@mail.gmail.com>	 <47A74849.3050005@gmail.com> <1bcb7c7f0802041001k165bd530n75e692e635971182@mail.gmail.com> <47A7AFD4.5040908@gmail.com> <47A9470A.4020500@ai.sri.com>
In-Reply-To: <47A9470A.4020500@ai.sri.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org


>  
> 5. Although currently IndexSearcher.close() does almost nothing except 
> to close the internal index reader, it might be a safer to close 
> searcher itself as well in closeCachedSearcher(), just in case, the 
> searcher may have other resources to release in the future version of 
> Lucene.
Didn't catch that "as well". You are right, great idea Jay, thanks.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32437-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 06 16:38:27 2008
Return-Path: <java-user-return-32437-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85892 invoked from network); 6 Feb 2008 16:38:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Feb 2008 16:38:27 -0000
Received: (qmail 94563 invoked by uid 500); 6 Feb 2008 16:38:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94534 invoked by uid 500); 6 Feb 2008 16:38:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94523 invoked by uid 99); 6 Feb 2008 16:38:13 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Feb 2008 08:38:13 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [130.107.64.135] (HELO Balboa.AI.SRI.COM) (130.107.64.135)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Feb 2008 16:37:44 +0000
Received: from Balboa.AI.SRI.COM (localhost [127.0.0.1])
	by Balboa.AI.SRI.COM (8.11.7p2+Sun/8.10.1) with SMTP id m16Gbn124031
	for <java-user@lucene.apache.org>; Wed, 6 Feb 2008 08:37:51 -0800 (PST)
Received: from Salt.AI.SRI.COM ([130.107.65.211])
 by Balboa.AI.SRI.COM (SMSSMTP 4.1.9.35) with SMTP id M2008020608374802617
 for <java-user@lucene.apache.org>; Wed, 06 Feb 2008 08:37:48 -0800
Received: from localhost.ai.sri.com
	([127.0.0.1] helo=[130.107.65.199] ident=root)
	by Salt.AI.SRI.COM with asmtp (Exim 3.35 #1 (Debian))
	id 1JMnHQ-0005XU-00
	for <java-user@lucene.apache.org>; Wed, 06 Feb 2008 08:37:48 -0800
Message-ID: <47A9E258.7020400@ai.sri.com>
Date: Wed, 06 Feb 2008 08:37:44 -0800
From: Jay <yu@AI.SRI.COM>
User-Agent: Thunderbird 2.0.0.9 (Windows/20071031)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: DefaultIndexAccessor
References: <1bcb7c7f0802040450k1ca47982v66894276f1c20c2b@mail.gmail.com>	 <47A70DE3.50202@gmail.com>	 <1bcb7c7f0802040612m1e2bdc07h9a2eaa531fc3dd5@mail.gmail.com>	 <47A74849.3050005@gmail.com> <1bcb7c7f0802041001k165bd530n75e692e635971182@mail.gmail.com> <47A7AFD4.5040908@gmail.com> <47A9470A.4020500@ai.sri.com> <47A9B0CC.1000809@gmail.com>
In-Reply-To: <47A9B0CC.1000809@gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks for your clarifications, Mark!


Jay

Mark Miller wrote:
> 
>>  
>> 5. Although currently IndexSearcher.close() does almost nothing except 
>> to close the internal index reader, it might be a safer to close 
>> searcher itself as well in closeCachedSearcher(), just in case, the 
>> searcher may have other resources to release in the future version of 
>> Lucene.
> Didn't catch that "as well". You are right, great idea Jay, thanks.
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32438-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 06 20:45:55 2008
Return-Path: <java-user-return-32438-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 43895 invoked from network); 6 Feb 2008 20:45:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Feb 2008 20:45:55 -0000
Received: (qmail 53811 invoked by uid 500); 6 Feb 2008 20:45:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53778 invoked by uid 500); 6 Feb 2008 20:45:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53767 invoked by uid 99); 6 Feb 2008 20:45:41 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Feb 2008 12:45:41 -0800
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Feb 2008 20:45:24 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id 0A57871C289; Wed,  6 Feb 2008 12:45:16 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id 0169671C258
	for <java-user@lucene.apache.org>; Wed,  6 Feb 2008 12:45:15 -0800 (PST)
Date: Wed, 6 Feb 2008 12:45:15 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Problem with tokenStreamValue() method in Field class
In-Reply-To: <15048591.post@talk.nabble.com>
Message-ID: <Pine.LNX.4.62.0802061241190.14021@radix.cryptio.net>
References: <15048591.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


you are running into one of hte problems relating to "Field" being reused 
by both the indexing code and the searching code.

things like the tokenStreamValue() and readerValue() only have meaning on 
Fields that are about to be indexed ... Field objects returned from 
searches will never return data from those methods.

Field objects returned from a search will only ever have the "stored" 
value of a Field, which is available from stringValue() 

: I am slightly confused.
: The following code generates the output below.
: 
: Document doc = hits.doc(i);
: System.out.println(doc.getFields());
: Field f = doc.getField("Text");
: System.out.println(f);
: TokenStream ts = f.tokenStreamValue();
: System.out.println(ts);
: while (true){
: 	Token token = ts.next();
: 	if (token==null) break;
: 	System.out.print(token+" ");
: }
: System.out.println();
: 
: 
: [stored/uncompressed,indexed,tokenized<Title:Infrared Data Association>,
: stored/uncompressed,indexed,tokenized<Type:Text>,
: stored/uncompressed,indexed,tokenized<Text:This is a test>]
: stored/uncompressed,indexed,tokenized<Text:This is a test>
: null
: java.lang.NullPointerException
: at ... (IndexQuerier.java:86)
: ...
: 
: So I am accessing a field which is displayed as "tokenized", but I still
: can't access its "tokenStreamValue()"? Why is that? Is there some way to get
: to tokens? Or did I do something wrong during indexing?
: 
: 
: Regards,
: Mika 
: -- 
: View this message in context: http://www.nabble.com/Problem-with-tokenStreamValue%28%29-method-in-Field-class-tp15048591p15048591.html
: Sent from the Lucene - Java Users mailing list archive at Nabble.com.
: 
: 
: ---------------------------------------------------------------------
: To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
: For additional commands, e-mail: java-user-help@lucene.apache.org
: 



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32439-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 06 20:46:41 2008
Return-Path: <java-user-return-32439-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44563 invoked from network); 6 Feb 2008 20:46:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Feb 2008 20:46:40 -0000
Received: (qmail 57087 invoked by uid 500); 6 Feb 2008 20:46:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56917 invoked by uid 500); 6 Feb 2008 20:46:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56906 invoked by uid 99); 6 Feb 2008 20:46:26 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Feb 2008 12:46:26 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Feb 2008 20:45:56 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1JMr9g-0006pM-3T
	for java-user@lucene.apache.org; Wed, 06 Feb 2008 12:46:04 -0800
Message-ID: <15312692.post@talk.nabble.com>
Date: Wed, 6 Feb 2008 12:46:04 -0800 (PST)
From: Sirish Vadala <vsirishreddy@yahoo.co.in>
To: java-user@lucene.apache.org
Subject: Out Of Memory during Indexing
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: vsirishreddy@yahoo.co.in
X-Virus-Checked: Checked by ClamAV on apache.org


I am facing an Out Of Memory error during indexing my files. It doesn't
happen consistently. I had read through some previous posts and
documentation and came up with a solution. Appreciate if some one can let me
know if its the right approach.

my code goes as below; the text in bold is the code added by me:

... ... ... ... ...
//get the documents to be indexed into a list
... ... ... ... ...
... ... ... ... ...
indexWriter = new IndexWriter(directory, this.analyzer, createIndex);
indexWriter.setMaxFieldLength(Integer.MAX_VALUE);
indexWriter.setMergeFactor(new Integer(5));
indexWriter.setMaxBufferedDocs(new Integer(5));

//for loop begins
for(int docIndex = 0; docIndex < docsToAdd.size(); docIndex++){
       if(indexWriter.ramSizeInBytes() > 500000){
             indexWriter.flush();
       }
       indexWriter.addDocument((Document) docsToAdd.get(docIndex));
}
//for loop ends
... ... ... ... ...

Things work well, but not sure if there is any other better way to solve
this problem. Thanks.

Sirish
-- 
View this message in context: http://www.nabble.com/Out-Of-Memory-during-Indexing-tp15312692p15312692.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32440-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 06 20:51:34 2008
Return-Path: <java-user-return-32440-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48181 invoked from network); 6 Feb 2008 20:51:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Feb 2008 20:51:34 -0000
Received: (qmail 66167 invoked by uid 500); 6 Feb 2008 20:51:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66134 invoked by uid 500); 6 Feb 2008 20:51:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66123 invoked by uid 99); 6 Feb 2008 20:51:20 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Feb 2008 12:51:20 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Feb 2008 20:51:05 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id 2583171C289; Wed,  6 Feb 2008 12:50:58 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id 22E0F71C060
	for <java-user@lucene.apache.org>; Wed,  6 Feb 2008 12:50:58 -0800 (PST)
Date: Wed, 6 Feb 2008 12:50:58 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: field:* query type, and prefix queries
In-Reply-To: <200801241223.33482.daniel@nuix.com>
Message-ID: <Pine.LNX.4.62.0802061245200.14021@radix.cryptio.net>
References: <200801241223.33482.daniel@nuix.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: Just out of interest, why does field:* go via getWildcardQuery instead of 
: getPrefixQuery?  It seems to me that it should be treated as a prefix of "", 
: but am I missing something important?

i think it's just an artifact of the grammer ... the first character of 
"the string" is a wildcard character, therefore it's a wildcard query.

: Also, I've noticed that although RangeQuery was optimised in a recent version 
: of Lucene, PrefixQuery is still quite slow even though any prefix query and 
: range query both walk through a list of adjacent terms.  I would expect them 
: to take about the same amount of time to run if covering the same terms.

"optomized" is not a self contained concept you optimize for some 
measurement ... ConstantScoreRangeQuery was "optomized for memorey" in 
that a RangeQuery can balloon up into a large number of TermQueries and 
ConstantScoreRangeQuery can't, the trade off being that it scores each 
match with a constnat score (whereas RangeQuery scored each match relative 
to the idf of the term that matches).  the default 
in QueryParser was changed to ConstantScoreRangeQuery because people 
typically don't expect "range queries" to matter which "term" in the range 
matches (i would guess 90% of the time people are using range queries for 
something numeric)

with a "prefix query" on the other hand, having the idf influence the 
score does still frequently make sense -- so there hasn't been as much of 
a push to change the QueryParser to use a "ConstantScoringPrefixQuery" ... 
but it is still easy to do yourself: just make a ConstantScoreQuery 
arround the PrefixFilter.  (ConstantScoreRangeQuery is just a 
ConstantScoreQuery wrapped arround a RangeFilter)

-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32441-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 06 21:35:25 2008
Return-Path: <java-user-return-32441-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 87301 invoked from network); 6 Feb 2008 21:35:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Feb 2008 21:35:25 -0000
Received: (qmail 70993 invoked by uid 500); 6 Feb 2008 21:35:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70959 invoked by uid 500); 6 Feb 2008 21:35:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70948 invoked by uid 99); 6 Feb 2008 21:35:11 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Feb 2008 13:35:11 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Feb 2008 21:34:41 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1JMruq-0000NW-Ts
	for java-user@lucene.apache.org; Wed, 06 Feb 2008 13:34:48 -0800
Message-ID: <15312692.post@talk.nabble.com>
Date: Wed, 6 Feb 2008 13:34:48 -0800 (PST)
From: Sirish Vadala <vsirishreddy@yahoo.co.in>
To: java-user@lucene.apache.org
Subject: Out Of Memory during Indexing
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: vsirishreddy@yahoo.co.in
X-Virus-Checked: Checked by ClamAV on apache.org


I am facing an Out Of Memory error during indexing my files. It doesn't
happen consistently. I had read through some previous posts and
documentation and came up with a solution. Appreciate if some one can let me
know if its the right approach.

my code goes as below; the text in bold is the code added by me:

... ... ... ... ...
//get the documents to be indexed into a list
... ... ... ... ...
... ... ... ... ...
indexWriter = new IndexWriter(directory, this.analyzer, createIndex);
indexWriter.setMaxFieldLength(Integer.MAX_VALUE);
indexWriter.setMergeFactor(new Integer(5));
indexWriter.setMaxBufferedDocs(new Integer(5));

//for loop begins
for(int docIndex = 0; docIndex < docsToAdd.size(); docIndex++){
       if(indexWriter.ramSizeInBytes() > 500000){
             indexWriter.flush();
       }
       indexWriter.addDocument((Document) docsToAdd.get(docIndex));
}
//for loop ends
... ... ... ... ...

Things work well, but not sure if there is any other better way to solve
this problem. Thanks.

Sirish
-- 
View this message in context: http://www.nabble.com/Out-Of-Memory-during-Indexing-tp15312692p15312692.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32442-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 06 22:10:00 2008
Return-Path: <java-user-return-32442-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 24445 invoked from network); 6 Feb 2008 22:09:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Feb 2008 22:09:59 -0000
Received: (qmail 48700 invoked by uid 500); 6 Feb 2008 22:09:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48660 invoked by uid 500); 6 Feb 2008 22:09:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48649 invoked by uid 99); 6 Feb 2008 22:09:46 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Feb 2008 14:09:46 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Feb 2008 22:09:16 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1JMsSJ-0001qZ-LT
	for java-user@lucene.apache.org; Wed, 06 Feb 2008 14:09:23 -0800
Message-ID: <15312692.post@talk.nabble.com>
Date: Wed, 6 Feb 2008 14:09:23 -0800 (PST)
From: Sirish Vadala <vsirishreddy@yahoo.co.in>
To: java-user@lucene.apache.org
Subject: Out Of Memory during Indexing
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: vsirishreddy@yahoo.co.in
X-Virus-Checked: Checked by ClamAV on apache.org


I am facing an Out Of Memory error during indexing my files. It doesn't
happen consistently. I had read through some previous posts and
documentation and came up with a solution. Appreciate if some one can let me
know if its the right approach.

my code goes as below; the text in bold is the code added by me:

... ... ... ... ...
//get the documents to be indexed into a list
... ... ... ... ...
... ... ... ... ...
indexWriter = new IndexWriter(directory, this.analyzer, createIndex);
indexWriter.setMaxFieldLength(Integer.MAX_VALUE);
indexWriter.setMergeFactor(new Integer(5));
indexWriter.setMaxBufferedDocs(new Integer(5));

//for loop begins
for(int docIndex = 0; docIndex < docsToAdd.size(); docIndex++){
       if(indexWriter.ramSizeInBytes() > 500000){
             indexWriter.flush();
       }
       indexWriter.addDocument((Document) docsToAdd.get(docIndex));
}
//for loop ends
... ... ... ... ...

Things work well, but not sure if there is any other better way to solve
this problem. Thanks.

Sirish
-- 
View this message in context: http://www.nabble.com/Out-Of-Memory-during-Indexing-tp15312692p15312692.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32443-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 06 22:11:34 2008
Return-Path: <java-user-return-32443-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25690 invoked from network); 6 Feb 2008 22:11:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Feb 2008 22:11:34 -0000
Received: (qmail 50845 invoked by uid 500); 6 Feb 2008 22:11:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50808 invoked by uid 500); 6 Feb 2008 22:11:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50797 invoked by uid 99); 6 Feb 2008 22:11:20 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Feb 2008 14:11:20 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [69.12.216.205] (HELO theronge.com) (69.12.216.205)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Feb 2008 22:10:51 +0000
Received: from mobile161-193.near.uiuc.edu (mobile161-193.near.uiuc.edu [192.17.161.193])
	(Authenticated sender: mronge)
	by theronge.com (Postfix) with ESMTP id 02E3263CDF
	for <java-user@lucene.apache.org>; Wed,  6 Feb 2008 14:10:57 -0800 (PST)
Message-Id: <46CBB02C-726E-470B-BE30-FCB5BD2EAA21@theronge.com>
From: Matt Ronge <mronge@theronge.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v915)
Subject: Faceting with payloads
Date: Wed, 6 Feb 2008 16:10:56 -0600
X-Mailer: Apple Mail (2.915)
X-Virus-Checked: Checked by ClamAV on apache.org

Hi all,

I'm using the new payloads feature to assign types to tokens as I  
index. The type is based on the surrounding text in the document, and  
I want to filter my searches based on this token type.

For example, I may index the token "house" maybe found in different  
places with different types. If the user query contains house, I want  
to report the number of instances of the token house of type A, type B  
and so on.

Should I be using payloads for this? If so, I'd like to be able to  
count up all the instances of for each type. Then I can show the  
results, along with TypeA (100 hits), TypeB (1000 hits) so on.

If I could use something like HitCollector that was passed in the  
token payload, that would be perfect, but it doesn't support that. Any  
thoughts on how to go about this? Also, if I want to only allow tokens  
of TypeB, how can I efficiently filter by TypeB; using a Similarity  
subclass seems like a hack.

Thanks in advance,
--
Matt

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32444-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 06 22:24:22 2008
Return-Path: <java-user-return-32444-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 34177 invoked from network); 6 Feb 2008 22:24:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Feb 2008 22:24:22 -0000
Received: (qmail 67116 invoked by uid 500); 6 Feb 2008 22:24:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67090 invoked by uid 500); 6 Feb 2008 22:24:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67079 invoked by uid 99); 6 Feb 2008 22:24:08 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Feb 2008 14:24:08 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Feb 2008 22:23:39 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id D6F1271C2C0; Wed,  6 Feb 2008 14:23:46 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id D35B071C2B8
	for <java-user@lucene.apache.org>; Wed,  6 Feb 2008 14:23:46 -0800 (PST)
Date: Wed, 6 Feb 2008 14:23:46 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Using a QueryParser with an untokenized field?
In-Reply-To: <47A314A5.3000206@decisionsoft.com>
Message-ID: <Pine.LNX.4.62.0802061422510.22955@radix.cryptio.net>
References: <alpine.DEB.1.00.0801312335490.16858@tugela.dsl.local>
 <47A2D262.6030306@gmx.de> <47A314A5.3000206@decisionsoft.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: Thank you, this was exactly what I needed.  So "tokenizing" really denotes a
: more general process that can involve normalizing the case or whatever else
: can be done with a filter.  This is where I was confused.

When constructing a Document/Field "TOKENIZED" really referes to the 
broader sense of "Analysis" (ie: should the Analyzer be used on the value)



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32445-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 07 10:16:10 2008
Return-Path: <java-user-return-32445-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 52449 invoked from network); 7 Feb 2008 10:16:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Feb 2008 10:16:10 -0000
Received: (qmail 17293 invoked by uid 500); 7 Feb 2008 10:15:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17032 invoked by uid 500); 7 Feb 2008 10:15:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17021 invoked by uid 99); 7 Feb 2008 10:15:55 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Feb 2008 02:15:55 -0800
X-ASF-Spam-Status: No, hits=-1.0 required=10.0
	tests=RCVD_IN_DNSWL_LOW,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of daniel.rosher@hotonline.com designates 85.115.41.190 as permitted sender)
Received: from [85.115.41.190] (HELO cluster-g.mailcontrol.com) (85.115.41.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Feb 2008 10:15:37 +0000
Received: from mail.workthing.com (mail.workthing.com [195.224.106.50])
	by rly03g.srv.mailcontrol.com (MailControl) with ESMTP id m17AF01b029610
	for <java-user@lucene.apache.org>; Thu, 7 Feb 2008 10:15:25 GMT
thread-index: AchpcjE/7KF6bnICTvyUoyuhg8J6Rw==
Content-Class: urn:content-classes:message
Importance: normal
Priority: normal
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.3790.2929
Received: from [192.168.222.5] ([192.168.222.5] RDNS failed) by mail.workthing.com with Microsoft SMTPSVC(6.0.3790.1830); Thu, 7 Feb 2008 10:14:15 +0000
Subject: Lucene scoring and short fields
From: "daniel rosher" <daniel.rosher@hotonline.com>
To: "java-user" <java-user@lucene.apache.org>
Content-Type: text/plain;
	charset="utf-8"
Date: Thu, 07 Feb 2008 10:15:28 +0000
Message-ID: <1202379328.7737.23.camel@rosher.org>
MIME-Version: 1.0
X-Mailer: Evolution 2.10.1 
Content-Transfer-Encoding: quoted-printable
X-OriginalArrivalTime: 07 Feb 2008 10:14:15.0162 (UTC) FILETIME=[3122EDA0:01C86972]
X-Scanned-By: MailControl A-06-00-00 (www.mailcontrol.com) on 10.71.0.113
X-Virus-Checked: Checked by ClamAV on apache.org

Hi All,

Given that Lucene scoring can favour shorter fields in documents, in the
past we've had to pad out 'unreasonably' short fields to a set minimum
(with basically nonsense words), I'm wondering how others might have
dealt with this issue.

Another option is to have a custom Similarity class with an altered
lengthNorm method?

Cheers,
Dan

-=3D-=3D-=3D-=3D-=3D-=3D-=3D-=3D-=3D-=3D-=3D-=3D-=3D-=3D-=3D-=3D-=3D-=3D-=
=3D-=3D-=3D-=3D-=3D-=3D-=3D-=3D-=3D-=3D-=3D-=3D-=3D-=3D-=3D-=3D-

From:
http://hudson.zones.apache.org/hudson/job/Lucene-trunk/javadoc//org/apache/=
lucene/search/Similarity.html
score(q,d)   =3D  coord(q,d)  =C2=B7  queryNorm(q)  =C2=B7  SUM(  tf(t in d=
)  =C2=B7
idf(t)2  =C2=B7  t.getBoost() =C2=B7  norm(t,d)  )

Given one term query, and the term found in two documents doc{a},
doc{b}(with no boost on field, doc or query term)

score(q,d)   =3D~  SUM (  tf(t in d)  =C2=B7  norm(t,d)  )

and for one term:
score(q,d)   =3D~   tf(t in d)  =C2=B7  norm(t,d)=20=20

also:
norm(t,d) =3D~ lengthNorm(field)=20

lengthNorm(field) :
computed when the document is added to the index in accordance with the
number of tokens of this field in the document, so that shorter fields
contribute more to the score

in DefaultSimilarity.java

lengthNorm(field)  =3D 1/sqrt(num_terms_in_field)

doc{a} field{a} num_terms_in_field =3D 100, term appears 10 times in
field{a},doc{a}
score =3D~ 10/sqrt(100) =3D 1
doc{b} field{a} num_terms_in_field =3D 300, term appears 10 times in
field{a},doc{a}
score =3D~ 10/sqrt(300) =3D 0.577350269
Daniel Rosher
Developer


d: 0207 3489 912
t: 0870 2020 121
f: 0870 2020 131
m:=20
http://www.hotonline.com/






- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -=
 - - - - - - - - - - - - - - - - -
This message is sent in confidence for the addressee only. It may contain p=
rivileged=20
information. The contents are not to be disclosed to anyone other than the =
addressee.=20
Unauthorised recipients are requested to preserve this confidentiality and =
to advise=20
us of any errors in transmission. Thank you.

hotonline ltd is registered in England & Wales. Registered office: One Cana=
da Square,=20
Canary Wharf, London E14 5AP. Registered No: 1904765.


This message has been scanned for viruses by BlackSpider MailControl - www.=
blackspider.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32446-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 07 20:11:17 2008
Return-Path: <java-user-return-32446-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 23645 invoked from network); 7 Feb 2008 20:11:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Feb 2008 20:11:17 -0000
Received: (qmail 76623 invoked by uid 500); 7 Feb 2008 20:11:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76592 invoked by uid 500); 7 Feb 2008 20:11:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76580 invoked by uid 99); 7 Feb 2008 20:11:03 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Feb 2008 12:11:03 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Feb 2008 20:10:48 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id 2B05771C150; Thu,  7 Feb 2008 12:10:41 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id 2784971C09B
	for <java-user@lucene.apache.org>; Thu,  7 Feb 2008 12:10:41 -0800 (PST)
Date: Thu, 7 Feb 2008 12:10:41 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user <java-user@lucene.apache.org>
Subject: Re: Lucene scoring and short fields
In-Reply-To: <1202379328.7737.23.camel@rosher.org>
Message-ID: <Pine.LNX.4.62.0802071208330.29304@radix.cryptio.net>
References: <1202379328.7737.23.camel@rosher.org>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: (with basically nonsense words), I'm wondering how others might have
: dealt with this issue.
: 
: Another option is to have a custom Similarity class with an altered
: lengthNorm method?

that is what i would recommend ... it's exactly what SweetSpotSimilarity 
does (you define a "platuea" of lengths that ar all treated equally, and 
anything shorter or longer then that drops off with lower lengthNorm 
values.


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32447-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 07 20:17:19 2008
Return-Path: <java-user-return-32447-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26555 invoked from network); 7 Feb 2008 20:17:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Feb 2008 20:17:19 -0000
Received: (qmail 86737 invoked by uid 500); 7 Feb 2008 20:17:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86714 invoked by uid 500); 7 Feb 2008 20:17:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86703 invoked by uid 99); 7 Feb 2008 20:17:05 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Feb 2008 12:17:05 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of rsivak@istandfor.com designates 72.3.240.46 as permitted sender)
Received: from [72.3.240.46] (HELO mail.istandfor.com) (72.3.240.46)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Feb 2008 20:16:49 +0000
Received: from [192.168.1.101] (dsl254-071-128.nyc1.dsl.speakeasy.net [216.254.71.128])
	(authenticated bits=0)
	by mail.istandfor.com (8.12.11.20060308/8.12.11) with ESMTP id m17KGeaU031490
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <java-user@lucene.apache.org>; Thu, 7 Feb 2008 14:16:40 -0600
Message-ID: <47AB66AD.2020009@istandfor.com>
Date: Thu, 07 Feb 2008 15:14:37 -0500
From: Ruslan Sivak <rsivak@istandfor.com>
User-Agent: Thunderbird 2.0.0.9 (Windows/20071031)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Distributed Indexes
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

I'm wondering if this is a problem that lucene users have already 
tackled.  I have four copies of the application using a lucene index.  
They are located on two physical servers with two copies on each server 
accessing two copies of the lucene index.  I use Windows FRS (File 
Replication Service) to replicate the index between the two servers. 

Things work well most of the time, but sometimes, I believe under load, 
the index doesn't get a chance to propagate before another write takes 
place and it gets corrupted. 

What would you recommend I use to keep the index in sync between the 
four copies of the app?

Russ

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32448-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 07 20:25:41 2008
Return-Path: <java-user-return-32448-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31089 invoked from network); 7 Feb 2008 20:25:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Feb 2008 20:25:41 -0000
Received: (qmail 334 invoked by uid 500); 7 Feb 2008 20:25:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 310 invoked by uid 500); 7 Feb 2008 20:25:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 299 invoked by uid 99); 7 Feb 2008 20:25:27 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Feb 2008 12:25:27 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of spring@gmx.eu designates 213.165.64.20 as permitted sender)
Received: from [213.165.64.20] (HELO mail.gmx.net) (213.165.64.20)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 07 Feb 2008 20:25:11 +0000
Received: (qmail invoked by alias); 07 Feb 2008 20:25:04 -0000
Received: from e178118137.adsl.alicedsl.de (EHLO msrvcn04) [85.178.118.137]
  by mail.gmx.net (mp029) with SMTP; 07 Feb 2008 21:25:04 +0100
X-Authenticated: #2635966
X-Provags-ID: V01U2FsdGVkX18InTJMf/sIiRjcu3D/mVZaMbgtX8pjlq/eq9GqU1
	SXoh3A0gE4O5Wv
From: <spring@gmx.eu>
To: <java-user@lucene.apache.org>
Subject: Which analyzer
Date: Thu, 7 Feb 2008 21:25:19 +0100
Message-ID: <07D8B4C3BB13449B9CD18113CAA7A5E6@msrvcn04>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.3790.4133
Thread-Index: Achpx0Vns3CVuuMIRLygH/AedOTtjg==
X-Y-GMX-Trusted: 0
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

I have a huge number of documents which contain mainly numbers and dates
(german format dd.MM.yyyy), like this:

Tgr. gilt ab           01.01.99 01.01.99 01.01.99 01.01.99 01.01.99 01.01.99
01.01.99 01.01.99 01.01.99 01.01.99 01.01.99 01.01.99  46X0     01
0000048010108    0512070010
 Gefahrenklass                01       01       01       01       01
01       01       01       01       01       01       01  46X0     01
0000049010108    0512070010
 Bezahlte Std.            152,25   152,25   152,25   152,25   152,25
152,25   152,25   152,25   152,25   152,25   152,25   152,25  46X0     01
0000050010108    0512070010
 Woech.Arbzeit             35,00    35,00    35,00    35,00    35,00
35,00    35,00    35,00    35,00    35,00    35,00    35,00  46X0     01
0000051010108    0512070010
 Monatl.Arbzt.            152,25   152,25   152,25   152,25   152,25
152,25   152,25   152,25   152,25   152,25   152,25   152,25  

Which anlyzer should I use when someone searches for a certain number or
date?

Thank you.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32449-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 07 20:59:40 2008
Return-Path: <java-user-return-32449-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48893 invoked from network); 7 Feb 2008 20:59:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Feb 2008 20:59:40 -0000
Received: (qmail 63112 invoked by uid 500); 7 Feb 2008 20:59:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63086 invoked by uid 500); 7 Feb 2008 20:59:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63075 invoked by uid 99); 7 Feb 2008 20:59:25 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Feb 2008 12:59:25 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [72.14.220.154] (HELO fg-out-1718.google.com) (72.14.220.154)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Feb 2008 20:58:55 +0000
Received: by fg-out-1718.google.com with SMTP id d23so3435898fga.27
        for <java-user@lucene.apache.org>; Thu, 07 Feb 2008 12:58:52 -0800 (PST)
Received: by 10.86.28.5 with SMTP id b5mr10834674fgb.79.1202417932585;
        Thu, 07 Feb 2008 12:58:52 -0800 (PST)
Received: from ?10.17.4.4? ( [71.174.108.74])
        by mx.google.com with ESMTPS id 4sm6714612fgg.4.2008.02.07.12.58.50
        (version=TLSv1/SSLv3 cipher=OTHER);
        Thu, 07 Feb 2008 12:58:51 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v753)
In-Reply-To: <47AB66AD.2020009@istandfor.com>
References: <47AB66AD.2020009@istandfor.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <3056F9B6-ADCE-4FA1-B3FF-DA782E8A96D8@mikemccandless.com>
Content-Transfer-Encoding: 7bit
From: Michael McCandless <lucene@mikemccandless.com>
Subject: Re: Distributed Indexes
Date: Thu, 7 Feb 2008 15:59:29 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.753)
X-Virus-Checked: Checked by ClamAV on apache.org


If you're able to tell Windows FRS which specific files to copy, then  
SnapshotDeletionPolicy (in 2.3) should work for this.

It basically protects a consistent snapshot of your index, ensuring  
those files will not be deleted, while not blocking further updates  
to the index.

Mike

Ruslan Sivak wrote:

> I'm wondering if this is a problem that lucene users have already  
> tackled.  I have four copies of the application using a lucene  
> index.  They are located on two physical servers with two copies on  
> each server accessing two copies of the lucene index.  I use  
> Windows FRS (File Replication Service) to replicate the index  
> between the two servers.
> Things work well most of the time, but sometimes, I believe under  
> load, the index doesn't get a chance to propagate before another  
> write takes place and it gets corrupted.
> What would you recommend I use to keep the index in sync between  
> the four copies of the app?
>
> Russ
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32450-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 07 21:53:39 2008
Return-Path: <java-user-return-32450-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 68583 invoked from network); 7 Feb 2008 21:53:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Feb 2008 21:53:38 -0000
Received: (qmail 39370 invoked by uid 500); 7 Feb 2008 21:53:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38902 invoked by uid 500); 7 Feb 2008 21:53:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38888 invoked by uid 99); 7 Feb 2008 21:53:24 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Feb 2008 13:53:24 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of rsivak@istandfor.com designates 72.3.240.46 as permitted sender)
Received: from [72.3.240.46] (HELO mail.istandfor.com) (72.3.240.46)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Feb 2008 21:52:54 +0000
Received: from [192.168.1.101] (dsl254-071-128.nyc1.dsl.speakeasy.net [216.254.71.128])
	(authenticated bits=0)
	by mail.istandfor.com (8.12.11.20060308/8.12.11) with ESMTP id m17Lr01x011957
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <java-user@lucene.apache.org>; Thu, 7 Feb 2008 15:53:01 -0600
Message-ID: <47AB7D41.50106@istandfor.com>
Date: Thu, 07 Feb 2008 16:50:57 -0500
From: Ruslan Sivak <rsivak@istandfor.com>
User-Agent: Thunderbird 2.0.0.9 (Windows/20071031)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Distributed Indexes
References: <47AB66AD.2020009@istandfor.com> <3056F9B6-ADCE-4FA1-B3FF-DA782E8A96D8@mikemccandless.com>
In-Reply-To: <3056F9B6-ADCE-4FA1-B3FF-DA782E8A96D8@mikemccandless.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

No, FRS copies the whole directory.  It's fairly fast, but if there is a 
modification on both servers at the same time, there will be issues. 

Russ

Michael McCandless wrote:
>
> If you're able to tell Windows FRS which specific files to copy, then 
> SnapshotDeletionPolicy (in 2.3) should work for this.
>
> It basically protects a consistent snapshot of your index, ensuring 
> those files will not be deleted, while not blocking further updates to 
> the index.
>
> Mike
>
> Ruslan Sivak wrote:
>
>> I'm wondering if this is a problem that lucene users have already 
>> tackled.  I have four copies of the application using a lucene 
>> index.  They are located on two physical servers with two copies on 
>> each server accessing two copies of the lucene index.  I use Windows 
>> FRS (File Replication Service) to replicate the index between the two 
>> servers.
>> Things work well most of the time, but sometimes, I believe under 
>> load, the index doesn't get a chance to propagate before another 
>> write takes place and it gets corrupted.
>> What would you recommend I use to keep the index in sync between the 
>> four copies of the app?
>>
>> Russ
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32451-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 07 21:55:25 2008
Return-Path: <java-user-return-32451-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69019 invoked from network); 7 Feb 2008 21:55:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Feb 2008 21:55:25 -0000
Received: (qmail 43325 invoked by uid 500); 7 Feb 2008 21:55:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43035 invoked by uid 500); 7 Feb 2008 21:55:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43024 invoked by uid 99); 7 Feb 2008 21:55:11 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Feb 2008 13:55:11 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of rsivak@istandfor.com designates 72.3.240.46 as permitted sender)
Received: from [72.3.240.46] (HELO mail.istandfor.com) (72.3.240.46)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Feb 2008 21:54:41 +0000
Received: from [192.168.1.101] (dsl254-071-128.nyc1.dsl.speakeasy.net [216.254.71.128])
	(authenticated bits=0)
	by mail.istandfor.com (8.12.11.20060308/8.12.11) with ESMTP id m17LsmRJ012264
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <java-user@lucene.apache.org>; Thu, 7 Feb 2008 15:54:48 -0600
Message-ID: <47AB7DAD.9010109@istandfor.com>
Date: Thu, 07 Feb 2008 16:52:45 -0500
From: Ruslan Sivak <rsivak@istandfor.com>
User-Agent: Thunderbird 2.0.0.9 (Windows/20071031)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Distributed Indexes
References: <47AB66AD.2020009@istandfor.com> <3056F9B6-ADCE-4FA1-B3FF-DA782E8A96D8@mikemccandless.com>
In-Reply-To: <3056F9B6-ADCE-4FA1-B3FF-DA782E8A96D8@mikemccandless.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

My index is only 4mb.  Is there a SQL backend for Lucene?

Russ

Michael McCandless wrote:
>
> If you're able to tell Windows FRS which specific files to copy, then 
> SnapshotDeletionPolicy (in 2.3) should work for this.
>
> It basically protects a consistent snapshot of your index, ensuring 
> those files will not be deleted, while not blocking further updates to 
> the index.
>
> Mike
>
> Ruslan Sivak wrote:
>
>> I'm wondering if this is a problem that lucene users have already 
>> tackled.  I have four copies of the application using a lucene 
>> index.  They are located on two physical servers with two copies on 
>> each server accessing two copies of the lucene index.  I use Windows 
>> FRS (File Replication Service) to replicate the index between the two 
>> servers.
>> Things work well most of the time, but sometimes, I believe under 
>> load, the index doesn't get a chance to propagate before another 
>> write takes place and it gets corrupted.
>> What would you recommend I use to keep the index in sync between the 
>> four copies of the app?
>>
>> Russ
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32452-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 07 22:22:41 2008
Return-Path: <java-user-return-32452-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77846 invoked from network); 7 Feb 2008 22:22:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Feb 2008 22:22:41 -0000
Received: (qmail 84496 invoked by uid 500); 7 Feb 2008 22:22:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84467 invoked by uid 500); 7 Feb 2008 22:22:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 84456 invoked by uid 99); 7 Feb 2008 22:22:27 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Feb 2008 14:22:27 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Feb 2008 22:21:57 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id 35A1371C322; Thu,  7 Feb 2008 14:22:05 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id 3269471C291
	for <java-user@lucene.apache.org>; Thu,  7 Feb 2008 14:22:05 -0800 (PST)
Date: Thu, 7 Feb 2008 14:22:05 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Performance guarantees and index format
In-Reply-To: <47A7CDAE.9070005@getopt.org>
Message-ID: <Pine.LNX.4.62.0802071405230.14980@radix.cryptio.net>
References: <47699a8d0801311050k22cc9e0fu7142590514319e6b@mail.gmail.com>
 <47A219C4.3060005@gmail.com> <47A22193.40906@getopt.org>
 <Pine.LNX.4.62.0802041459500.6477@radix.cryptio.net> <47A7CDAE.9070005@getopt.org>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: I think this would be too messy - currently we can be sure of the simple rule
: that documents added to the index get incrementally higher docids, i.e. the
: higher the docid the more recent is the document. I think it would be much
: simpler to write a FilterIndexReader that simply reverses the order of docids.

First off: you only have that garuntee while indexing ... if you 
frequently reorder docs using something like the IndexSorter then that 
rule no longer applies (and you must not care or you wouldn't have 
reordered everything)

Second: using IndexSorter after an index is completley built is definitely 
a simpler, clearner, way of accomplishing something like this -- but it 
only seems adequate for situations in which "index building" is seperate 
and distinct from "index searching" ... I can't see how it would work very 
easily in situations where you are continuously performing incremental 
updates while searches are taking place.

: The issue with Nutch's IndexSorter is that it allows you to reorder docids in
: an arbitrary manner, using a user-supplied mapping between old and new docids,
: which can be based on values retrieved from the current index or from any
: other source. So I think this would be the main value of this class applicable
: to various scenarios.

No Argument what-so-ever.  IndexSorter seems like a sweet tool to have in 
the Lucene toolbox for letting people reordering the docs in an index by 
arbitrary criteria ... but for people with the specific case of 
*prefering* that recently added docs be in front of older docs, automatic 
segment reordering seems like it would also be a handy tool to have in the 
toolbox so that documents could "bubble up" gradually.  (maybe as a new 
MergePolicy? ... probably need some API changes to allow order to be 
specified)

There would definitley be trade offs people would need to consdier before 
using it -- but those tradeoffs would probably also apply if they wanted 
to use IndexSorter.



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32453-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 07 23:20:24 2008
Return-Path: <java-user-return-32453-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94043 invoked from network); 7 Feb 2008 23:20:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Feb 2008 23:20:24 -0000
Received: (qmail 58675 invoked by uid 500); 7 Feb 2008 23:20:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58081 invoked by uid 500); 7 Feb 2008 23:20:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58070 invoked by uid 99); 7 Feb 2008 23:20:10 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Feb 2008 15:20:10 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of erickerickson@gmail.com designates 209.85.128.185 as permitted sender)
Received: from [209.85.128.185] (HELO fk-out-0910.google.com) (209.85.128.185)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Feb 2008 23:19:54 +0000
Received: by fk-out-0910.google.com with SMTP id z23so3213667fkz.5
        for <java-user@lucene.apache.org>; Thu, 07 Feb 2008 15:19:38 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=UhKUALzqaAASnjSmztWLM84t/Hs+G2H5qgWrbCqRkRM=;
        b=sjnP3a/5UJFypepnUUmGRCBMkvw/2rQdrJoNr9JUYGk1iHQ9UImQ028RoCggnQ6I1YuaBhk6gYQ1kJfS0XZsuPCgxHzIjy15YI5ixcY0EOzf+kI/pQqVsLIlnvFXVFLhwHBhRyNy5hDvtl3KU0dg4xWiZGFwCfXD50hzZPKz7b0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=oDX4a/XUG38c9cNEYhcKAmpb7JAIxqBYn8IpyanVmcOSAdR5rZkzdvBsJIoUtvCO+POTzy52ba35Cd/bsi9VD5umuDEmAGDncNQI/V+mLFEkeWr/LSFYjrnt62mX7CFE3Di78yfa/LUZFnSjKrY8hf0E60b3UQ1VXlzS/tuaRa8=
Received: by 10.82.121.15 with SMTP id t15mr21667144buc.26.1202426378274;
        Thu, 07 Feb 2008 15:19:38 -0800 (PST)
Received: by 10.82.151.7 with HTTP; Thu, 7 Feb 2008 15:19:38 -0800 (PST)
Message-ID: <359a92830802071519x56d067bdqc1aa052e68484b9e@mail.gmail.com>
Date: Thu, 7 Feb 2008 18:19:38 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Which analyzer
In-Reply-To: <07D8B4C3BB13449B9CD18113CAA7A5E6@msrvcn04>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_18068_14213260.1202426378266"
References: <07D8B4C3BB13449B9CD18113CAA7A5E6@msrvcn04>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_18068_14213260.1202426378266
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

*How* do you want to search them? If it's simply exact matches, then
WhitespaceAnalyzer should work fine.

But if you want to, for example, look at date ranges or number
ranges, you'll have to be more clever.

What do you want to accomplish?

Best
Erick

On Feb 7, 2008 3:25 PM, <spring@gmx.eu> wrote:

> Hi,
>
> I have a huge number of documents which contain mainly numbers and dates
> (german format dd.MM.yyyy), like this:
>
> Tgr. gilt ab           01.01.99 01.01.99 01.01.99 01.01.99 01.01.99
> 01.01.99
> 01.01.99 01.01.99 01.01.99 01.01.99 01.01.99 01.01.99  46X0     01
> 0000048010108    0512070010
>  Gefahrenklass                01       01       01       01       01
> 01       01       01       01       01       01       01  46X0     01
> 0000049010108    0512070010
>  Bezahlte Std.            152,25   152,25   152,25   152,25   152,25
> 152,25   152,25   152,25   152,25   152,25   152,25   152,25  46X0     01
> 0000050010108    0512070010
>  Woech.Arbzeit             35,00    35,00    35,00    35,00    35,00
> 35,00    35,00    35,00    35,00    35,00    35,00    35,00  46X0     01
> 0000051010108    0512070010
>  Monatl.Arbzt.            152,25   152,25   152,25   152,25   152,25
> 152,25   152,25   152,25   152,25   152,25   152,25   152,25
>
> Which anlyzer should I use when someone searches for a certain number or
> date?
>
> Thank you.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_18068_14213260.1202426378266--

From java-user-return-32454-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 07 23:41:41 2008
Return-Path: <java-user-return-32454-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3614 invoked from network); 7 Feb 2008 23:41:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Feb 2008 23:41:41 -0000
Received: (qmail 93872 invoked by uid 500); 7 Feb 2008 23:41:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93795 invoked by uid 500); 7 Feb 2008 23:41:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93726 invoked by uid 99); 7 Feb 2008 23:41:24 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Feb 2008 15:41:24 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.128.187 as permitted sender)
Received: from [209.85.128.187] (HELO fk-out-0910.google.com) (209.85.128.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Feb 2008 23:40:55 +0000
Received: by fk-out-0910.google.com with SMTP id z23so3220704fkz.5
        for <java-user@lucene.apache.org>; Thu, 07 Feb 2008 15:40:44 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=xvEoj5g0RPDAQG68U3vz+6BCoVFPxQtfA7chsxXtCVc=;
        b=EouOG0dLo88IEBWgMBuPrZWW+aLSQ0oOr4sXRFceBNp9Ea9DlPOcOkXPawgtcigdyVmi1CPEMPBvXt6ms0Xkt6llJqkJA/WMJGElrs7SWw4OUesFmlU37+F67StxdMTnZHeXrN3x73RTgi4zAQ3xng4KipkM3j0ldg7+m7wBJng=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=x3oPUFy/TTRbEIp++WQegmt5ENvSxU00A+Bh990gOvE10THK2yDw4I7ok9NO2Q6ipWaMS6bL8MBoZDO6l0dcvMJSNMGjQKSLllIRWa6W9RJz5R9jTugzKEh0Fpk7LPFCfNSBP454+Yi//z2IvEbWhH7OhbRBZ0QS/4Jhd+AG+fc=
Received: by 10.82.145.7 with SMTP id s7mr21737291bud.7.1202427644135;
        Thu, 07 Feb 2008 15:40:44 -0800 (PST)
Received: by 10.82.151.7 with HTTP; Thu, 7 Feb 2008 15:40:44 -0800 (PST)
Message-ID: <359a92830802071540m38075cd7l9c628dc1d565aac2@mail.gmail.com>
Date: Thu, 7 Feb 2008 18:40:44 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Distributed Indexes
In-Reply-To: <47AB7DAD.9010109@istandfor.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_18121_20482102.1202427644122"
References: <47AB66AD.2020009@istandfor.com>
	 <3056F9B6-ADCE-4FA1-B3FF-DA782E8A96D8@mikemccandless.com>
	 <47AB7DAD.9010109@istandfor.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_18121_20482102.1202427644122
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

With an index that small, I wonder why you bother with so many copies?
What kind of load are you hitting it with and how complex are the queries?

Because unless you have *very* high query rate, I'd look at why my queries
were
taking so long before complexifying things this way.

Best
Erick

On Feb 7, 2008 4:52 PM, Ruslan Sivak <rsivak@istandfor.com> wrote:

> My index is only 4mb.  Is there a SQL backend for Lucene?
>
> Russ
>
> Michael McCandless wrote:
> >
> > If you're able to tell Windows FRS which specific files to copy, then
> > SnapshotDeletionPolicy (in 2.3) should work for this.
> >
> > It basically protects a consistent snapshot of your index, ensuring
> > those files will not be deleted, while not blocking further updates to
> > the index.
> >
> > Mike
> >
> > Ruslan Sivak wrote:
> >
> >> I'm wondering if this is a problem that lucene users have already
> >> tackled.  I have four copies of the application using a lucene
> >> index.  They are located on two physical servers with two copies on
> >> each server accessing two copies of the lucene index.  I use Windows
> >> FRS (File Replication Service) to replicate the index between the two
> >> servers.
> >> Things work well most of the time, but sometimes, I believe under
> >> load, the index doesn't get a chance to propagate before another
> >> write takes place and it gets corrupted.
> >> What would you recommend I use to keep the index in sync between the
> >> four copies of the app?
> >>
> >> Russ
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_18121_20482102.1202427644122--

From java-user-return-32455-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 08 04:48:43 2008
Return-Path: <java-user-return-32455-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22204 invoked from network); 8 Feb 2008 04:48:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Feb 2008 04:48:43 -0000
Received: (qmail 31273 invoked by uid 500); 8 Feb 2008 04:48:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31239 invoked by uid 500); 8 Feb 2008 04:48:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31228 invoked by uid 99); 8 Feb 2008 04:48:30 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Feb 2008 20:48:30 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of nileshbansal@gmail.com designates 209.85.146.176 as permitted sender)
Received: from [209.85.146.176] (HELO wa-out-1112.google.com) (209.85.146.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Feb 2008 04:48:01 +0000
Received: by wa-out-1112.google.com with SMTP id j40so202115wah.11
        for <java-user@lucene.apache.org>; Thu, 07 Feb 2008 20:48:08 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        bh=Xb7IcxbReFo8j+VxtHy5h8x48OyUtpHrTFQ6NM4k2Mw=;
        b=BTAonvvEAsN35dUFTGjbURC4iMRCgj/DKz1z/9EUD7qApyLroryYpXXdzD7zFMQJAtivu6eItFrkL8/i07c8BvavwLTyFs1kLZUgHWfrOTGYN1z8TT/2sAzlezkwEaLbZvDRRdHa3AiqBqiuzLafkJcxfdGYEwHtYi8/yLMiDqI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=th7NfV7W5KVx6TrfgXWYvdQPzwemWtS63w7P0ktiCXDellT0nJudg5s1U6tUV2nhK0Ho4lE3Lol3jEEASzgohuvaubaV5dPax373+tZLSQuCCh2QypdudypWaXdbdW3j5o4Av7FkL8MxcsoRbWZFhwmh+VLqd1iMXJimeVE47b8=
Received: by 10.114.144.1 with SMTP id r1mr5024458wad.53.1202446088484;
        Thu, 07 Feb 2008 20:48:08 -0800 (PST)
Received: by 10.114.194.20 with HTTP; Thu, 7 Feb 2008 20:48:08 -0800 (PST)
Message-ID: <f36128690802072048y20c51242k5fd716840efb1f3f@mail.gmail.com>
Date: Thu, 7 Feb 2008 23:48:08 -0500
From: "Nilesh Bansal" <nileshbansal@gmail.com>
To: java-user@lucene.apache.org
Subject: Lucene syntax query matched against a string content
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

I want to create a function, which takes in a query string (in lucene
syntax), and a string as content and returns back if the query matches
the content or not. This would mean,

query = +(apache) +(lucene OR httpd)

will match

content = HTTPD by Apache foundation is one of the most popular open
source projects

and will not match

content = Lucene and httpd are projects from same open source foundation

Basically, I need to fill in the contents of the following Java
function. This should be easy to do, but I don't know how. I obviously
don't want to create a dummy lucene index in memory with a single
document and then search for the query against that (for performance
reasons).

public static boolean isRelevant(String luceneQuery, String contents) {
  // TODO fill in
}

Instead of boolean, it could return a relevance score, which will be
zero if the query is not relevant to the document.

Any help will be appreciated.

thanks
Nilesh

-- 
Nilesh Bansal

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32456-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 08 08:52:48 2008
Return-Path: <java-user-return-32456-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79060 invoked from network); 8 Feb 2008 08:52:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Feb 2008 08:52:48 -0000
Received: (qmail 10180 invoked by uid 500); 8 Feb 2008 08:52:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9958 invoked by uid 500); 8 Feb 2008 08:52:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9947 invoked by uid 99); 8 Feb 2008 08:52:34 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Feb 2008 00:52:34 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [194.109.24.31] (HELO smtp-vbr11.xs4all.nl) (194.109.24.31)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Feb 2008 08:52:18 +0000
Received: from k8u.lan (porta.xs4all.nl [80.127.24.69])
	by smtp-vbr11.xs4all.nl (8.13.8/8.13.8) with ESMTP id m188qBSP005861
	for <java-user@lucene.apache.org>; Fri, 8 Feb 2008 09:52:11 +0100 (CET)
	(envelope-from paul.elschot@xs4all.nl)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: java-user@lucene.apache.org
Subject: Re: Lucene syntax query matched against a string content
Date: Fri, 8 Feb 2008 09:52:12 +0100
User-Agent: KMail/1.9.6 (enterprise 0.20070907.709405)
References: <f36128690802072048y20c51242k5fd716840efb1f3f@mail.gmail.com>
In-Reply-To: <f36128690802072048y20c51242k5fd716840efb1f3f@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="utf-8"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200802080952.12463.paul.elschot@xs4all.nl>
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org

Without using a RAMDirectory index it would be necessary to
implement all Scorers used by the query directly top of the token
stream that normally goes into the index. This is possible, but
Lucene is not designed to do this, so it won't be easy.

But especially for more preparsed queries against a small set of
new documents, this might be nice to have. Still, even for that
case, it would only gain performance over using RAMDirectory
when the queries can be evaluated from the ground up,
sharing as many subqueries as possible. And that is
just the opposite of the top down way query search is
currently implemented on a prebuilt index.

The basic design for this would be to start from a set of queries
to be 'analyzed' to make them share as many subqueries
as possible, building a query graph.
Then this query graph would be fed the new documents
one by one, resulting in a score for each matching query
that was added to the query graph.
It is possible, but it would be quite a bit of work.

And then someone will come along with the requirement
to match an existing index against such a query graph,
which is not a bad idea either, but it might need yet another
way of collecting the results.

Regards,
Paul Elschot

Op Friday 08 February 2008 05:48:08 schreef Nilesh Bansal:
> Hi,
> 
> I want to create a function, which takes in a query string (in lucene
> syntax), and a string as content and returns back if the query matches
> the content or not. This would mean,
> 
> query = +(apache) +(lucene OR httpd)
> 
> will match
> 
> content = HTTPD by Apache foundation is one of the most popular open
> source projects
> 
> and will not match
> 
> content = Lucene and httpd are projects from same open source foundation
> 
> Basically, I need to fill in the contents of the following Java
> function. This should be easy to do, but I don't know how. I obviously
> don't want to create a dummy lucene index in memory with a single
> document and then search for the query against that (for performance
> reasons).
> 
> public static boolean isRelevant(String luceneQuery, String contents) {
>   // TODO fill in
> }
> 
> Instead of boolean, it could return a relevance score, which will be
> zero if the query is not relevant to the document.
> 
> Any help will be appreciated.
> 
> thanks
> Nilesh
> 



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32457-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 08 09:41:20 2008
Return-Path: <java-user-return-32457-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95634 invoked from network); 8 Feb 2008 09:41:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Feb 2008 09:41:20 -0000
Received: (qmail 41762 invoked by uid 500); 8 Feb 2008 09:41:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41723 invoked by uid 500); 8 Feb 2008 09:41:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41707 invoked by uid 99); 8 Feb 2008 09:41:07 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Feb 2008 01:41:07 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of spring@gmx.eu designates 213.165.64.20 as permitted sender)
Received: from [213.165.64.20] (HELO mail.gmx.net) (213.165.64.20)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 08 Feb 2008 09:40:37 +0000
Received: (qmail invoked by alias); 08 Feb 2008 09:40:42 -0000
Received: from e178102185.adsl.alicedsl.de (EHLO msrvcn04) [85.178.102.185]
  by mail.gmx.net (mp044) with SMTP; 08 Feb 2008 10:40:42 +0100
X-Authenticated: #2635966
X-Provags-ID: V01U2FsdGVkX18QVAkkwWsQIClj/4cNUB0oNwd7K0PFhfn9TOdCnJ
	oerYnXoyL0AhtM
From: <spring@gmx.eu>
To: <java-user@lucene.apache.org>
References: <07D8B4C3BB13449B9CD18113CAA7A5E6@msrvcn04> <359a92830802071519x56d067bdqc1aa052e68484b9e@mail.gmail.com>
Subject: RE: Which analyzer
Date: Fri, 8 Feb 2008 10:40:52 +0100
Message-ID: <E017E3EDA46645888FBFB56C18292686@msrvcn04>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.3790.4133
In-Reply-To: <359a92830802071519x56d067bdqc1aa052e68484b9e@mail.gmail.com>
Thread-Index: Achp4ANbcpch2K/jQmObX7h1PlTEgwAVj77g
X-Y-GMX-Trusted: 0
X-Virus-Checked: Checked by ClamAV on apache.org

Hello,

lets say the document contains

01.02.1999

and

152,45

Then I want to search for:

01.02.1999 AND 152,45
01.02.1999
152,45
1999
152

Thank you.

> -----Original Message-----
> From: Erick Erickson [mailto:erickerickson@gmail.com] 
> Sent: Freitag, 8. Februar 2008 00:20
> To: java-user@lucene.apache.org
> Subject: Re: Which analyzer
> 
> *How* do you want to search them? If it's simply exact matches, then
> WhitespaceAnalyzer should work fine.
> 
> But if you want to, for example, look at date ranges or number
> ranges, you'll have to be more clever.
> 
> What do you want to accomplish?
> 
> Best
> Erick
> 
> On Feb 7, 2008 3:25 PM, <spring@gmx.eu> wrote:
> 
> > Hi,
> >
> > I have a huge number of documents which contain mainly 
> numbers and dates
> > (german format dd.MM.yyyy), like this:
> >
> > Tgr. gilt ab           01.01.99 01.01.99 01.01.99 01.01.99 01.01.99
> > 01.01.99
> > 01.01.99 01.01.99 01.01.99 01.01.99 01.01.99 01.01.99  46X0     01
> > 0000048010108    0512070010
> >  Gefahrenklass                01       01       01       01       01
> > 01       01       01       01       01       01       01  
> 46X0     01
> > 0000049010108    0512070010
> >  Bezahlte Std.            152,25   152,25   152,25   152,25   152,25
> > 152,25   152,25   152,25   152,25   152,25   152,25   
> 152,25  46X0     01
> > 0000050010108    0512070010
> >  Woech.Arbzeit             35,00    35,00    35,00    35,00    35,00
> > 35,00    35,00    35,00    35,00    35,00    35,00    35,00 
>  46X0     01
> > 0000051010108    0512070010
> >  Monatl.Arbzt.            152,25   152,25   152,25   152,25   152,25
> > 152,25   152,25   152,25   152,25   152,25   152,25   152,25
> >
> > Which anlyzer should I use when someone searches for a 
> certain number or
> > date?
> >
> > Thank you.
> >
> >
> > 
> ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32458-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 08 11:32:22 2008
Return-Path: <java-user-return-32458-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 23272 invoked from network); 8 Feb 2008 11:32:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Feb 2008 11:32:22 -0000
Received: (qmail 55712 invoked by uid 500); 8 Feb 2008 11:32:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55686 invoked by uid 500); 8 Feb 2008 11:32:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55675 invoked by uid 99); 8 Feb 2008 11:32:08 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Feb 2008 03:32:08 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erica.mitchell@iona.com designates 62.221.12.55 as permitted sender)
Received: from [62.221.12.55] (HELO emea-mx1.iona.com) (62.221.12.55)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Feb 2008 11:31:34 +0000
X-IronPort-AV: E=Sophos;i="4.25,321,1199664000"; 
   d="scan'208";a="1152107"
Received: from emea-ems1.ionaglobal.com ([10.2.1.125])
  by emea-mx1.iona.com with ESMTP; 08 Feb 2008 11:31:39 +0000
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Subject: Searching the backlog of mailing list for lucene java users
Date: Fri, 8 Feb 2008 11:31:38 -0000
Message-ID: <E91104197DA2654DA833B6EB53B6C488032F7B85@emea-ems1.IONAGLOBAL.COM>
In-Reply-To: <E017E3EDA46645888FBFB56C18292686@msrvcn04>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Searching the backlog of mailing list for lucene java users
Thread-Index: Achp4ANbcpch2K/jQmObX7h1PlTEgwAVj77gAAPTvZA=
From: "Mitchell, Erica" <Erica.Mitchell@iona.com>
To: <java-user@lucene.apache.org>
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

I've found this link to trawl through the backlog of questions and
answers from this mailing list.

I'm new to lucene and don't want to send questions that have already
been answered in the list.
Is there other link to search previous entries rather than clicking the
the Prev and Next links looking through the titles of the threads.

http://readlist.com/lists/lucene.apache.org/java-user/4/20264.html


Thanks,
erica

----------------------------
IONA Technologies PLC (registered in Ireland)
Registered Number: 171387
Registered Address: The IONA Building, Shelbourne Road, Dublin 4, Ireland

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32459-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 08 13:11:19 2008
Return-Path: <java-user-return-32459-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59434 invoked from network); 8 Feb 2008 13:11:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Feb 2008 13:11:19 -0000
Received: (qmail 63902 invoked by uid 500); 8 Feb 2008 13:11:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63878 invoked by uid 500); 8 Feb 2008 13:11:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63867 invoked by uid 99); 8 Feb 2008 13:11:05 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Feb 2008 05:11:05 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [208.97.132.74] (HELO spunkymail-a1.g.dreamhost.com) (208.97.132.74)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Feb 2008 13:10:48 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a1.g.dreamhost.com (Postfix) with ESMTP id D5E3710007C
	for <java-user@lucene.apache.org>; Fri,  8 Feb 2008 05:10:39 -0800 (PST)
Message-Id: <D7692A28-D73A-4E2C-A34D-0F93D643AF71@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <E91104197DA2654DA833B6EB53B6C488032F7B85@emea-ems1.IONAGLOBAL.COM>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v915)
Subject: Re: Searching the backlog of mailing list for lucene java users
Date: Fri, 8 Feb 2008 08:10:39 -0500
References: <E91104197DA2654DA833B6EB53B6C488032F7B85@emea-ems1.IONAGLOBAL.COM>
X-Mailer: Apple Mail (2.915)
X-Virus-Checked: Checked by ClamAV on apache.org

http://wiki.apache.org/lucene-java/MailingListArchives has a variety  
of options (although the readlist one is not listed)


On Feb 8, 2008, at 6:31 AM, Mitchell, Erica wrote:

> Hi,
>
> I've found this link to trawl through the backlog of questions and
> answers from this mailing list.
>
> I'm new to lucene and don't want to send questions that have already
> been answered in the list.
> Is there other link to search previous entries rather than clicking  
> the
> the Prev and Next links looking through the titles of the threads.
>
> http://readlist.com/lists/lucene.apache.org/java-user/4/20264.html
>
>
> Thanks,
> erica
>
> ----------------------------
> IONA Technologies PLC (registered in Ireland)
> Registered Number: 171387
> Registered Address: The IONA Building, Shelbourne Road, Dublin 4,  
> Ireland
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32460-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 08 13:17:26 2008
Return-Path: <java-user-return-32460-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60963 invoked from network); 8 Feb 2008 13:17:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Feb 2008 13:17:26 -0000
Received: (qmail 73964 invoked by uid 500); 8 Feb 2008 13:17:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73925 invoked by uid 500); 8 Feb 2008 13:17:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73900 invoked by uid 99); 8 Feb 2008 13:17:13 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Feb 2008 05:17:13 -0800
X-ASF-Spam-Status: No, hits=-4.0 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [128.230.108.46] (HELO SUEXCL-02.ad.syr.edu) (128.230.108.46)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Feb 2008 13:16:56 +0000
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Searching the backlog of mailing list for lucene java users
Date: Fri, 8 Feb 2008 08:16:00 -0500
Message-ID: <9294E20AED46934EA459020706463F947EB8B5@SUEXCL-02.ad.syr.edu>
In-Reply-To: <D7692A28-D73A-4E2C-A34D-0F93D643AF71@apache.org>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Searching the backlog of mailing list for lucene java users
Thread-Index: AchqVBq/aumcYBjqRqK9nEfVG3ZIOgAAHJJg
From: "Steven A Rowe" <sarowe@syr.edu>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Erica,

Another good place to look is at the FAQ:

   <http://wiki.apache.org/lucene-java/LuceneFAQ>

Steve

On 02/08/2008 at 8:10 AM, Grant Ingersoll wrote:
> http://wiki.apache.org/lucene-java/MailingListArchives has a variety
> of options (although the readlist one is not listed)
>=20
> On Feb 8, 2008, at 6:31 AM, Mitchell, Erica wrote:
>=20
> > Hi,
> >=20
> > I've found this link to trawl through the backlog of questions and
> > answers from this mailing list.
> >=20
> > I'm new to lucene and don't want to send questions that have already
> > been answered in the list. Is there other link to search previous
> > entries rather than clicking the the Prev and Next links looking
> > through the titles of the threads.
> >=20
> > http://readlist.com/lists/lucene.apache.org/java-user/4/20264.html
> >=20
> >=20
> > Thanks,
> > erica
> >=20
> > ----------------------------
> > IONA Technologies PLC (registered in Ireland)
> > Registered Number: 171387
> > Registered Address: The IONA Building, Shelbourne Road, Dublin 4,
> > Ireland

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32461-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 08 13:23:43 2008
Return-Path: <java-user-return-32461-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62123 invoked from network); 8 Feb 2008 13:23:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Feb 2008 13:23:42 -0000
Received: (qmail 79627 invoked by uid 500); 8 Feb 2008 13:23:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79596 invoked by uid 500); 8 Feb 2008 13:23:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79584 invoked by uid 99); 8 Feb 2008 13:23:30 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Feb 2008 05:23:30 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 72.14.220.154 as permitted sender)
Received: from [72.14.220.154] (HELO fg-out-1718.google.com) (72.14.220.154)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Feb 2008 13:23:00 +0000
Received: by fg-out-1718.google.com with SMTP id d23so3633580fga.27
        for <java-user@lucene.apache.org>; Fri, 08 Feb 2008 05:23:07 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=DXapeGSwTUrOXOjJHSYIrvKjBlXL/hn44yLsA+u4Kac=;
        b=OGYFYFPajTk8l7u9hwm8CXpWwUmwzOYAajtI0ehDyOD96c4ivUe1j7Qkp30gYd8F4W/L2zfcfyPRnJxjRopwufAHpICxgi0SRuzgK6mrrjxWYsmRYRVIIU1ILQKNSQFrz2qKardkLnQDtYj35LKmGW5EsQdCqe39FapYpc2A7UQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=Wb0lCL0RyQIWQ/90eeGaEDN+tFCSBVNmVqLVf1E2DAV3pAvkPrRx2beYHeEhPnlzDkSuW+07UXpl2Su1oPTny/B3UiLXbQyT4s4in2a7EePJ0aNMYOGyGrkbmQZrELQLLtLjAeAdD6bIGLMl8Qj/ho+WoEXo1K1Xo0xPpdEC9Ao=
Received: by 10.82.174.20 with SMTP id w20mr22985580bue.21.1202476983268;
        Fri, 08 Feb 2008 05:23:03 -0800 (PST)
Received: by 10.82.151.7 with HTTP; Fri, 8 Feb 2008 05:23:03 -0800 (PST)
Message-ID: <359a92830802080523g65d70647sf3cb381aec089989@mail.gmail.com>
Date: Fri, 8 Feb 2008 08:23:03 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene syntax query matched against a string content
In-Reply-To: <f36128690802072048y20c51242k5fd716840efb1f3f@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_19284_13176696.1202476983262"
References: <f36128690802072048y20c51242k5fd716840efb1f3f@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_19284_13176696.1202476983262
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

You might want to check out MemoryIndex before rejecting putting a single
doc in memory and searching against it. It's quite fast, although whether
it'll
work in your situation only measurement will tell. It's in contrib as I
remember.

Erick

On Feb 7, 2008 11:48 PM, Nilesh Bansal <nileshbansal@gmail.com> wrote:

> Hi,
>
> I want to create a function, which takes in a query string (in lucene
> syntax), and a string as content and returns back if the query matches
> the content or not. This would mean,
>
> query = +(apache) +(lucene OR httpd)
>
> will match
>
> content = HTTPD by Apache foundation is one of the most popular open
> source projects
>
> and will not match
>
> content = Lucene and httpd are projects from same open source foundation
>
> Basically, I need to fill in the contents of the following Java
> function. This should be easy to do, but I don't know how. I obviously
> don't want to create a dummy lucene index in memory with a single
> document and then search for the query against that (for performance
> reasons).
>
> public static boolean isRelevant(String luceneQuery, String contents) {
>  // TODO fill in
> }
>
> Instead of boolean, it could return a relevance score, which will be
> zero if the query is not relevant to the document.
>
> Any help will be appreciated.
>
> thanks
> Nilesh
>
> --
> Nilesh Bansal
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_19284_13176696.1202476983262--

From java-user-return-32462-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 08 13:25:31 2008
Return-Path: <java-user-return-32462-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62603 invoked from network); 8 Feb 2008 13:25:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Feb 2008 13:25:30 -0000
Received: (qmail 81950 invoked by uid 500); 8 Feb 2008 13:25:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81912 invoked by uid 500); 8 Feb 2008 13:25:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81901 invoked by uid 99); 8 Feb 2008 13:25:17 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Feb 2008 05:25:17 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of erickerickson@gmail.com designates 209.85.128.190 as permitted sender)
Received: from [209.85.128.190] (HELO fk-out-0910.google.com) (209.85.128.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Feb 2008 13:25:02 +0000
Received: by fk-out-0910.google.com with SMTP id z23so3465550fkz.5
        for <java-user@lucene.apache.org>; Fri, 08 Feb 2008 05:24:55 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=zkfPwybVAL5a16y8zP2z6GrvBi835f1M+Iv2+9WmBHQ=;
        b=iJXZ3BrkpYT/hTkspxZv5XL9V3UguQVz3JGpDQSdnlz+5/F1W26NN8ou2Q26Y4Xk89NfSJvFbBmxP2fEcD3DD24QVi6IoYe3RAZZaC1ecl8qGM1MrVCPTqKEgLlV6T6csbNO7T0t9bi4XEZOC40DuwAC8DkQaV60OBYVxHHUQeY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=NqsTGgCC7LllIAXdDM4TaDK2Hys8dTIJAXfNWNHPHDLB7nm+D3DcudtSyBJMqJJk2hCKN+CTNFwUqOgiGJL1xoxl5DVWLKbIOR+g4al4rj10fZhwXTIJ5UgLwm4fvWPivsLlngzscyBampZJFhV0V8gs35pwm0155B9KvhT0DG0=
Received: by 10.82.116.15 with SMTP id o15mr23044655buc.3.1202477095583;
        Fri, 08 Feb 2008 05:24:55 -0800 (PST)
Received: by 10.82.151.7 with HTTP; Fri, 8 Feb 2008 05:24:55 -0800 (PST)
Message-ID: <359a92830802080524j3d1a0da9i3b19396b5b1f21b4@mail.gmail.com>
Date: Fri, 8 Feb 2008 08:24:55 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Which analyzer
In-Reply-To: <E017E3EDA46645888FBFB56C18292686@msrvcn04>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_19292_6725699.1202477095573"
References: <07D8B4C3BB13449B9CD18113CAA7A5E6@msrvcn04>
	 <359a92830802071519x56d067bdqc1aa052e68484b9e@mail.gmail.com>
	 <E017E3EDA46645888FBFB56C18292686@msrvcn04>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_19292_6725699.1202477095573
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

WhitespaceAnalyzer should do the trick. Give it a try...

My point was that RangeQuerys wouldn't work very well,
but since you're not trying to do that, WhitespaceAnalyzer
should handle your case.

Erick

On Feb 8, 2008 4:40 AM, <spring@gmx.eu> wrote:

> Hello,
>
> lets say the document contains
>
> 01.02.1999
>
> and
>
> 152,45
>
> Then I want to search for:
>
> 01.02.1999 AND 152,45
> 01.02.1999
> 152,45
> 1999
> 152
>
> Thank you.
>
> > -----Original Message-----
> > From: Erick Erickson [mailto:erickerickson@gmail.com]
> > Sent: Freitag, 8. Februar 2008 00:20
> > To: java-user@lucene.apache.org
> > Subject: Re: Which analyzer
> >
> > *How* do you want to search them? If it's simply exact matches, then
> > WhitespaceAnalyzer should work fine.
> >
> > But if you want to, for example, look at date ranges or number
> > ranges, you'll have to be more clever.
> >
> > What do you want to accomplish?
> >
> > Best
> > Erick
> >
> > On Feb 7, 2008 3:25 PM, <spring@gmx.eu> wrote:
> >
> > > Hi,
> > >
> > > I have a huge number of documents which contain mainly
> > numbers and dates
> > > (german format dd.MM.yyyy), like this:
> > >
> > > Tgr. gilt ab           01.01.99 01.01.99 01.01.99 01.01.99 01.01.99
> > > 01.01.99
> > > 01.01.99 01.01.99 01.01.99 01.01.99 01.01.99 01.01.99  46X0     01
> > > 0000048010108    0512070010
> > >  Gefahrenklass                01       01       01       01       01
> > > 01       01       01       01       01       01       01
> > 46X0     01
> > > 0000049010108    0512070010
> > >  Bezahlte Std.            152,25   152,25   152,25   152,25   152,25
> > > 152,25   152,25   152,25   152,25   152,25   152,25
> > 152,25  46X0     01
> > > 0000050010108    0512070010
> > >  Woech.Arbzeit             35,00    35,00    35,00    35,00    35,00
> > > 35,00    35,00    35,00    35,00    35,00    35,00    35,00
> >  46X0     01
> > > 0000051010108    0512070010
> > >  Monatl.Arbzt.            152,25   152,25   152,25   152,25   152,25
> > > 152,25   152,25   152,25   152,25   152,25   152,25   152,25
> > >
> > > Which anlyzer should I use when someone searches for a
> > certain number or
> > > date?
> > >
> > > Thank you.
> > >
> > >
> > >
> > ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > >
> > >
> >
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_19292_6725699.1202477095573--

From java-user-return-32463-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 08 14:54:16 2008
Return-Path: <java-user-return-32463-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97013 invoked from network); 8 Feb 2008 14:54:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Feb 2008 14:54:16 -0000
Received: (qmail 2986 invoked by uid 500); 8 Feb 2008 14:54:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2955 invoked by uid 500); 8 Feb 2008 14:54:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2934 invoked by uid 99); 8 Feb 2008 14:54:02 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Feb 2008 06:54:02 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of erica.mitchell@iona.com designates 62.221.12.55 as permitted sender)
Received: from [62.221.12.55] (HELO emea-mx1.iona.com) (62.221.12.55)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Feb 2008 14:53:47 +0000
X-IronPort-AV: E=Sophos;i="4.25,322,1199664000"; 
   d="scan'208";a="1153071"
Received: from emea-ems1.ionaglobal.com ([10.2.1.125])
  by emea-mx1.iona.com with ESMTP; 08 Feb 2008 14:53:38 +0000
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Subject: MultiFieldQueryParser question
Date: Fri, 8 Feb 2008 14:53:37 -0000
Message-ID: <E91104197DA2654DA833B6EB53B6C488032F7B87@emea-ems1.IONAGLOBAL.COM>
In-Reply-To: <359a92830802080524j3d1a0da9i3b19396b5b1f21b4@mail.gmail.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: MultiFieldQueryParser question
Thread-Index: AchqVhSQ32ufYdbhSRqX2NDeDoXSBAACpwkg
From: "Mitchell, Erica" <Erica.Mitchell@iona.com>
To: <java-user@lucene.apache.org>
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,


I'm trying to build up an index of fields to represent an
org.eclipse.emf.ecore.EObject;


So I'm adding these fields to my lucene doc

doc.add(new Field(NAME, cls.getName(), Field.Store.YES,
Field.Index.TOKENIZED));
doc.add(new Field(IDENTITY, obj.eGet(cls.getEIDAttribute()).toString(),
Field.Store.YES, Field.Index.TOKENIZED));

I then get the Eattributes from my Eobject and I want to add these to
the index

 for (Object o : cls.getEAllAttributes()) {
            if (o instanceof EAttribute) {
                EAttribute attribute =3D (EAttribute) o;
                String attributeName =3D attribute.getName();
       	    Strung attributeValue =3D obj.eGet(attribute).toString();

		    doc.add(new Field(attributeName , attributeValue ,
Field.Store.YES, Field.Index.TOKENIZED));
		}
 }


This is how I'm searching all fields for text containing "aaa"

        String[] searchFields =3D {IDENTITY, NAME, ATTRIBUTE};=20
           =20
        MultiFieldQueryParser multiparser =3D new
MultiFieldQueryParser(searchFields, new StandardAnalyzer());=20
        multiparser.setDefaultOperator(QueryParser.Operator.OR);=20
        Query query =3D multiparser.parse("aaa*");
        Hits hits =3D isearcher.search(query);


So using Luke I can see my index contains information like this

<id> aaa2
<id> aaa1

<guid> aaa2
<guid> pi4

<name> attribute
<name> poliyinstance


I'd like my query to return both the id fields and the guids.
The problem is the guid is added to the index by virtue of my
doc.addField(attributeName, attributeValue ...)=20

So for the query to return the attributes correctly, I'd need to pass in
the attributeName which I don't have.

Is the answer simply that I should be keeping an array of the
attributeName's returned, and passing these as part of the String[] into
searchFields?

Thanks a million,
Erica

----------------------------
IONA Technologies PLC (registered in Ireland)
Registered Number: 171387
Registered Address: The IONA Building, Shelbourne Road, Dublin 4, Ireland

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32464-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 08 15:10:31 2008
Return-Path: <java-user-return-32464-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75510 invoked from network); 8 Feb 2008 15:10:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Feb 2008 15:10:31 -0000
Received: (qmail 58076 invoked by uid 500); 8 Feb 2008 15:10:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58045 invoked by uid 500); 8 Feb 2008 15:10:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58033 invoked by uid 99); 8 Feb 2008 15:10:15 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Feb 2008 07:10:15 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of cdoronc@gmail.com designates 209.85.128.184 as permitted sender)
Received: from [209.85.128.184] (HELO fk-out-0910.google.com) (209.85.128.184)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Feb 2008 15:09:46 +0000
Received: by fk-out-0910.google.com with SMTP id z23so3497419fkz.5
        for <java-user@lucene.apache.org>; Fri, 08 Feb 2008 07:09:52 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=k18Pbs+EfyRqlX/xQ1q9GVk1a7nfllXbOyu2hFKkmEQ=;
        b=mqo3Czru3kRXGz4hHhGDe3b/q9TVVgz6qB3gMNy1aG6GwLjspIGQpsdCyUQD+PieD6ao1a/NQ6TmxwVS44hZceNmlx8gkn0XvlzjWS2xq3PO1OuIxvGqOCaxag/NnYUqCKAUKY247qWvHPkHX5GgizrkExiGI5XbcJ3B+teIHVA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=RSnXaUEh1jZ7AfTk9heAyXrhThnO/mt+LM22rpwa3q5w6izF5mD4CAxfAaXLxvV8Z2WAEeqoN1NP/eJYIBlvVlUz/oAw2F5TProJJOItltMqLjIEdL9LpJf8Sg/eK9FvpANQ7GCVKcYXQ3nrbCACRxHtZKodaqet1lf031sDvTk=
Received: by 10.82.148.7 with SMTP id v7mr23229305bud.10.1202483392570;
        Fri, 08 Feb 2008 07:09:52 -0800 (PST)
Received: by 10.86.87.18 with HTTP; Fri, 8 Feb 2008 07:09:52 -0800 (PST)
Message-ID: <e05f0fd10802080709t945728dic887b08e75a9dde9@mail.gmail.com>
Date: Fri, 8 Feb 2008 17:09:52 +0200
From: "Doron Cohen" <cdoronc@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Performance guarantees and index format
In-Reply-To: <Pine.LNX.4.62.0802071405230.14980@radix.cryptio.net>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_3806_6068224.1202483392542"
References: <47699a8d0801311050k22cc9e0fu7142590514319e6b@mail.gmail.com>
	 <47A219C4.3060005@gmail.com> <47A22193.40906@getopt.org>
	 <Pine.LNX.4.62.0802041459500.6477@radix.cryptio.net>
	 <47A7CDAE.9070005@getopt.org>
	 <Pine.LNX.4.62.0802071405230.14980@radix.cryptio.net>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_3806_6068224.1202483392542
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I was once involved in modified a search index
implementation (not Lucene) to write posting lists so that
they can be traversed (only) in reverse order. Docids
were preserved but you got higher IDs first. This was
a non-trivial code change.

Now the suggestion to (optionally) order merged
segments from new to old should be much simpler
to implement (I think) and would be an interesting add-on.

If in addition DocumentsWriter is modified to optionally
reverse the order of written docs, you get the docs
completely reversed.

Being optional, applications caring about docids
stability would not use this option.

On Fri, Feb 8, 2008 at 12:22 AM, Chris Hostetter <hossman_lucene@fucit.org>
wrote:

>
> : I think this would be too messy - currently we can be sure of the simple
> rule
> : that documents added to the index get incrementally higher docids, i.e.
> the
> : higher the docid the more recent is the document. I think it would be
> much
> : simpler to write a FilterIndexReader that simply reverses the order of
> docids.
>
> First off: you only have that garuntee while indexing ... if you
> frequently reorder docs using something like the IndexSorter then that
> rule no longer applies (and you must not care or you wouldn't have
> reordered everything)
>
> Second: using IndexSorter after an index is completley built is definitely
> a simpler, clearner, way of accomplishing something like this -- but it
> only seems adequate for situations in which "index building" is seperate
> and distinct from "index searching" ... I can't see how it would work very
> easily in situations where you are continuously performing incremental
> updates while searches are taking place.
>
> : The issue with Nutch's IndexSorter is that it allows you to reorder
> docids in
> : an arbitrary manner, using a user-supplied mapping between old and new
> docids,
> : which can be based on values retrieved from the current index or from
> any
> : other source. So I think this would be the main value of this class
> applicable
> : to various scenarios.
>
> No Argument what-so-ever.  IndexSorter seems like a sweet tool to have in
> the Lucene toolbox for letting people reordering the docs in an index by
> arbitrary criteria ... but for people with the specific case of
> *prefering* that recently added docs be in front of older docs, automatic
> segment reordering seems like it would also be a handy tool to have in the
> toolbox so that documents could "bubble up" gradually.  (maybe as a new
> MergePolicy? ... probably need some API changes to allow order to be
> specified)
>
> There would definitley be trade offs people would need to consdier before
> using it -- but those tradeoffs would probably also apply if they wanted
> to use IndexSorter.
>
>
>
> -Hoss
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_3806_6068224.1202483392542--

From java-user-return-32465-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 08 15:34:00 2008
Return-Path: <java-user-return-32465-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85457 invoked from network); 8 Feb 2008 15:34:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Feb 2008 15:34:00 -0000
Received: (qmail 96555 invoked by uid 500); 8 Feb 2008 15:33:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96534 invoked by uid 500); 8 Feb 2008 15:33:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96523 invoked by uid 99); 8 Feb 2008 15:33:46 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Feb 2008 07:33:46 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of spring@gmx.eu designates 213.165.64.20 as permitted sender)
Received: from [213.165.64.20] (HELO mail.gmx.net) (213.165.64.20)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 08 Feb 2008 15:33:29 +0000
Received: (qmail invoked by alias); 08 Feb 2008 15:33:23 -0000
Received: from e178102185.adsl.alicedsl.de (EHLO msrvcn04) [85.178.102.185]
  by mail.gmx.net (mp028) with SMTP; 08 Feb 2008 16:33:23 +0100
X-Authenticated: #2635966
X-Provags-ID: V01U2FsdGVkX1+DiYQ0PvmDOdsQsjexg22Eziw849HUQDd/nYsejj
	NIIPciwtKfQmq8
From: <spring@gmx.eu>
To: <java-user@lucene.apache.org>
References: <07D8B4C3BB13449B9CD18113CAA7A5E6@msrvcn04> <359a92830802071519x56d067bdqc1aa052e68484b9e@mail.gmail.com> <E017E3EDA46645888FBFB56C18292686@msrvcn04> <359a92830802080524j3d1a0da9i3b19396b5b1f21b4@mail.gmail.com>
Subject: RE: Which analyzer
Date: Fri, 8 Feb 2008 16:33:33 +0100
Message-ID: <EA15DDBCF63B41DAA9A48A33D25F2615@msrvcn04>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.3790.4133
In-Reply-To: <359a92830802080524j3d1a0da9i3b19396b5b1f21b4@mail.gmail.com>
Thread-Index: AchqVhTfVw4R9HmnSaWpJPMsjvHHGAAEdeqQ
X-Y-GMX-Trusted: 0
X-Virus-Checked: Checked by ClamAV on apache.org

OK, I will try it.
Thank you. 

> -----Original Message-----
> From: Erick Erickson [mailto:erickerickson@gmail.com] 
> Sent: Freitag, 8. Februar 2008 14:25
> To: java-user@lucene.apache.org
> Subject: Re: Which analyzer
> 
> WhitespaceAnalyzer should do the trick. Give it a try...
> 
> My point was that RangeQuerys wouldn't work very well,
> but since you're not trying to do that, WhitespaceAnalyzer
> should handle your case.
> 
> Erick
> 
> On Feb 8, 2008 4:40 AM, <spring@gmx.eu> wrote:
> 
> > Hello,
> >
> > lets say the document contains
> >
> > 01.02.1999
> >
> > and
> >
> > 152,45
> >
> > Then I want to search for:
> >
> > 01.02.1999 AND 152,45
> > 01.02.1999
> > 152,45
> > 1999
> > 152
> >
> > Thank you.
> >
> > > -----Original Message-----
> > > From: Erick Erickson [mailto:erickerickson@gmail.com]
> > > Sent: Freitag, 8. Februar 2008 00:20
> > > To: java-user@lucene.apache.org
> > > Subject: Re: Which analyzer
> > >
> > > *How* do you want to search them? If it's simply exact 
> matches, then
> > > WhitespaceAnalyzer should work fine.
> > >
> > > But if you want to, for example, look at date ranges or number
> > > ranges, you'll have to be more clever.
> > >
> > > What do you want to accomplish?
> > >
> > > Best
> > > Erick
> > >
> > > On Feb 7, 2008 3:25 PM, <spring@gmx.eu> wrote:
> > >
> > > > Hi,
> > > >
> > > > I have a huge number of documents which contain mainly
> > > numbers and dates
> > > > (german format dd.MM.yyyy), like this:
> > > >
> > > > Tgr. gilt ab           01.01.99 01.01.99 01.01.99 
> 01.01.99 01.01.99
> > > > 01.01.99
> > > > 01.01.99 01.01.99 01.01.99 01.01.99 01.01.99 01.01.99  
> 46X0     01
> > > > 0000048010108    0512070010
> > > >  Gefahrenklass                01       01       01      
>  01       01
> > > > 01       01       01       01       01       01       01
> > > 46X0     01
> > > > 0000049010108    0512070010
> > > >  Bezahlte Std.            152,25   152,25   152,25   
> 152,25   152,25
> > > > 152,25   152,25   152,25   152,25   152,25   152,25
> > > 152,25  46X0     01
> > > > 0000050010108    0512070010
> > > >  Woech.Arbzeit             35,00    35,00    35,00    
> 35,00    35,00
> > > > 35,00    35,00    35,00    35,00    35,00    35,00    35,00
> > >  46X0     01
> > > > 0000051010108    0512070010
> > > >  Monatl.Arbzt.            152,25   152,25   152,25   
> 152,25   152,25
> > > > 152,25   152,25   152,25   152,25   152,25   152,25   152,25
> > > >
> > > > Which anlyzer should I use when someone searches for a
> > > certain number or
> > > > date?
> > > >
> > > > Thank you.
> > > >
> > > >
> > > >
> > > 
> ---------------------------------------------------------------------
> > > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > > For additional commands, e-mail: 
> java-user-help@lucene.apache.org
> > > >
> > > >
> > >
> >
> >
> > 
> ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32466-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 08 15:52:51 2008
Return-Path: <java-user-return-32466-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95892 invoked from network); 8 Feb 2008 15:52:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Feb 2008 15:52:51 -0000
Received: (qmail 27538 invoked by uid 500); 8 Feb 2008 15:52:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27503 invoked by uid 500); 8 Feb 2008 15:52:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27492 invoked by uid 99); 8 Feb 2008 15:52:37 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Feb 2008 07:52:37 -0800
X-ASF-Spam-Status: No, hits=1.0 required=10.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of marc.dumontier@thomson.com designates 198.80.156.67 as permitted sender)
Received: from [198.80.156.67] (HELO mailout-tf.thomson.com) (198.80.156.67)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Feb 2008 15:52:07 +0000
Received: from mailout-tf.thomson.com (localhost [127.0.0.1])
	by mailout-tf.thomson.com (Switch-3.2.4/Switch-3.2.4) with ESMTP id m18FqCUg014343
	for <java-user@lucene.apache.org>; Fri, 8 Feb 2008 15:52:12 GMT
Received: from tfusmabosfe01.ERF.THOMSON.COM (tfusmabosfe01.erf.thomson.com [10.14.6.234])
	by mailout-tf.thomson.com (Switch-3.2.4/Switch-3.2.4) with ESMTP id m18Fq4NV014229
	for <java-user@lucene.apache.org>; Fri, 8 Feb 2008 15:52:12 GMT
Received: from tshusmnnadbh02.ERF.THOMSON.COM ([10.236.128.71]) by tfusmabosfe01.ERF.THOMSON.COM with Microsoft SMTPSVC(6.0.3790.3959);
	 Fri, 8 Feb 2008 10:52:07 -0500
Received: from tshuspaphimbx01.ERF.THOMSON.COM ([10.224.164.128]) by tshusmnnadbh02.ERF.THOMSON.COM with Microsoft SMTPSVC(6.0.3790.3959);
	 Fri, 8 Feb 2008 09:51:59 -0600
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C86A6A.87F91B53"
Subject: large term vectors
Date: Fri, 8 Feb 2008 10:51:44 -0500
Message-ID: <629CBB07E28C934D8CA87EF193170E4C01D65532@tshuspaphimbx01.ERF.THOMSON.COM>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: large term vectors
Thread-Index: AchqaoDVGQq1D+iPROOW9RNy3nMGUA==
From: <marc.dumontier@thomson.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 08 Feb 2008 15:51:59.0193 (UTC) FILETIME=[89DA6C90:01C86A6A]
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01C86A6A.87F91B53
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: quoted-printable

Hi,

=20

I have a large index which is around 275GB. As I search different parts
of the index, the memory footprint grows with large byte arrays being
stored. They never seem to get unloaded or GC'ed. Is there any way to
control this behavior so that I can periodically unload cached
information?

=20

The nature of the data being indexed doesn't allow me to reduce the
number of terms per field, although I might be able to reduce the number
of overall fields (I have some which aren't currently being searched
by).

=20

I've just begun investigating and profiling the problem, so I don't have
a lot of details at this time. Any support would be extremely welcome.

=20

Thanks,

=20

Marc Dumontier
Manager, Software Development
Thomson Scientific (Canada)
1 Yonge Street, Suite 1801
Toronto, Ontario M5E 1W7

=20

Direct +1 416 214 3448
Mobile +1 416 454 3147

=20


------_=_NextPart_001_01C86A6A.87F91B53--

From java-user-return-32467-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 08 15:58:01 2008
Return-Path: <java-user-return-32467-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98679 invoked from network); 8 Feb 2008 15:58:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Feb 2008 15:58:01 -0000
Received: (qmail 31908 invoked by uid 500); 8 Feb 2008 15:57:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31880 invoked by uid 500); 8 Feb 2008 15:57:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31869 invoked by uid 99); 8 Feb 2008 15:57:48 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Feb 2008 07:57:48 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of spring@gmx.eu designates 213.165.64.20 as permitted sender)
Received: from [213.165.64.20] (HELO mail.gmx.net) (213.165.64.20)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 08 Feb 2008 15:57:32 +0000
Received: (qmail invoked by alias); 08 Feb 2008 15:57:25 -0000
Received: from e178102185.adsl.alicedsl.de (EHLO msrvcn04) [85.178.102.185]
  by mail.gmx.net (mp007) with SMTP; 08 Feb 2008 16:57:25 +0100
X-Authenticated: #2635966
X-Provags-ID: V01U2FsdGVkX1/EMeQkyOzE/VT9FtEQ7B2RX5wBulw+WwzFP80p/p
	gIEopUKqs1lCm3
From: <spring@gmx.eu>
To: <java-user@lucene.apache.org>
Subject: IndexWriter: setRAMBufferSizeMB
Date: Fri, 8 Feb 2008 16:57:37 +0100
Message-ID: <3241C6045C914BC486B1283E6C9D5577@msrvcn04>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.3790.4133
Thread-Index: Achqa0ETOQdHRlCaSX6lfaNztfPv6w==
X-Y-GMX-Trusted: 0
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

if I understand this property correctly every time the ram buffer is full it
gets automaticaly written to disk. Something like a commit in a database.
Thus if my application dies, all docs in the buffer get lost. Right?

If so, is there any event/callback etc. which informs my application that
such a commit happend?

Thank you.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32468-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 08 16:09:53 2008
Return-Path: <java-user-return-32468-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4548 invoked from network); 8 Feb 2008 16:09:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Feb 2008 16:09:53 -0000
Received: (qmail 54863 invoked by uid 500); 8 Feb 2008 16:09:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54729 invoked by uid 500); 8 Feb 2008 16:09:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54717 invoked by uid 99); 8 Feb 2008 16:09:39 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Feb 2008 08:09:39 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of rsivak@istandfor.com designates 72.3.240.46 as permitted sender)
Received: from [72.3.240.46] (HELO mail.istandfor.com) (72.3.240.46)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Feb 2008 16:09:22 +0000
Received: from [192.168.1.101] (dsl254-071-128.nyc1.dsl.speakeasy.net [216.254.71.128])
	(authenticated bits=0)
	by mail.istandfor.com (8.12.11.20060308/8.12.11) with ESMTP id m18G9E8Z017212
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <java-user@lucene.apache.org>; Fri, 8 Feb 2008 10:09:15 -0600
Message-ID: <47AC7E2F.3010405@istandfor.com>
Date: Fri, 08 Feb 2008 11:07:11 -0500
From: Ruslan Sivak <rsivak@istandfor.com>
User-Agent: Thunderbird 2.0.0.9 (Windows/20071031)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Distributed Indexes
References: <47AB66AD.2020009@istandfor.com>	 <3056F9B6-ADCE-4FA1-B3FF-DA782E8A96D8@mikemccandless.com>	 <47AB7DAD.9010109@istandfor.com> <359a92830802071540m38075cd7l9c628dc1d565aac2@mail.gmail.com>
In-Reply-To: <359a92830802071540m38075cd7l9c628dc1d565aac2@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

The app does other things then search the index.  I'm basically using 
ColdFusion for the website and have four instances running on two 
servers for load balancing.  Each app does the searches, and the search 
times are small, the index is small, but it takes a long time to fully 
create the index (several minutes), and I would like the index to always 
be up to date (which is why i replicate the changes). 

I basically cache the index for several minutes in a RamDirectory, which 
works quite well for performance.  If I could store the index in a SQL 
Table or something, I can have a single place where the index lives and 
atomic updates. 

Is there a SQL Backend for the index, or should I just take the 
RamDirectory, serialize it and store it as a BLOB?

Russ

Erick Erickson wrote:
> With an index that small, I wonder why you bother with so many copies?
> What kind of load are you hitting it with and how complex are the queries?
>
> Because unless you have *very* high query rate, I'd look at why my queries
> were
> taking so long before complexifying things this way.
>
> Best
> Erick
>
> On Feb 7, 2008 4:52 PM, Ruslan Sivak <rsivak@istandfor.com> wrote:
>
>   
>> My index is only 4mb.  Is there a SQL backend for Lucene?
>>
>> Russ
>>
>> Michael McCandless wrote:
>>     
>>> If you're able to tell Windows FRS which specific files to copy, then
>>> SnapshotDeletionPolicy (in 2.3) should work for this.
>>>
>>> It basically protects a consistent snapshot of your index, ensuring
>>> those files will not be deleted, while not blocking further updates to
>>> the index.
>>>
>>> Mike
>>>
>>> Ruslan Sivak wrote:
>>>
>>>       
>>>> I'm wondering if this is a problem that lucene users have already
>>>> tackled.  I have four copies of the application using a lucene
>>>> index.  They are located on two physical servers with two copies on
>>>> each server accessing two copies of the lucene index.  I use Windows
>>>> FRS (File Replication Service) to replicate the index between the two
>>>> servers.
>>>> Things work well most of the time, but sometimes, I believe under
>>>> load, the index doesn't get a chance to propagate before another
>>>> write takes place and it gets corrupted.
>>>> What would you recommend I use to keep the index in sync between the
>>>> four copies of the app?
>>>>
>>>> Russ
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>         
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>       
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>     
>
>   


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32469-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 08 17:17:56 2008
Return-Path: <java-user-return-32469-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 41745 invoked from network); 8 Feb 2008 17:17:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Feb 2008 17:17:56 -0000
Received: (qmail 66338 invoked by uid 500); 8 Feb 2008 17:17:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66317 invoked by uid 500); 8 Feb 2008 17:17:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66295 invoked by uid 99); 8 Feb 2008 17:17:39 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Feb 2008 09:17:39 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: 194.109.24.28 is neither permitted nor denied by domain of karl.wettin@gmail.com)
Received: from [194.109.24.28] (HELO smtp-vbr8.xs4all.nl) (194.109.24.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Feb 2008 17:17:09 +0000
Received: from kodapan.lan (memnon.xs4all.nl [82.93.70.124])
	by smtp-vbr8.xs4all.nl (8.13.8/8.13.8) with ESMTP id m18HHFkq018130
	for <java-user@lucene.apache.org>; Fri, 8 Feb 2008 18:17:15 +0100 (CET)
	(envelope-from karl.wettin@gmail.com)
Message-Id: <198EF845-819A-48EF-ADE2-DEA45CBF9916@gmail.com>
From: Karl Wettin <karl.wettin@gmail.com>
To: java-user@lucene.apache.org
In-Reply-To: <46CBB02C-726E-470B-BE30-FCB5BD2EAA21@theronge.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v915)
Subject: Re: Faceting with payloads
Date: Fri, 8 Feb 2008 18:17:14 +0100
References: <46CBB02C-726E-470B-BE30-FCB5BD2EAA21@theronge.com>
X-Mailer: Apple Mail (2.915)
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org


6 feb 2008 kl. 23.10 skrev Matt Ronge:

> I may index the token "house" maybe found in different places with  
> different types. If the user query contains house, I want to report  
> the number of instances of the token house of type A, type B and so  
> on.
>
> Should I be using payloads for this? If so, I'd like to be able to  
> count up all the instances of for each type. Then I can show the  
> results, along with TypeA (100 hits), TypeB (1000 hits) so on.

Pehaps, what do you do with these numbers you extract?

> If I could use something like HitCollector that was passed in the  
> token payload, that would be perfect, but it doesn't support that.  
> Any thoughts on how to go about this? Also, if I want to only allow  
> tokens of TypeB, how can I efficiently filter by TypeB; using a  
> Similarity subclass seems like a hack.

I think you will have to hack the Query classes you want to use, and  
make their Weight share some counter thingy you can inspect after  
invoking a Query in the Searcher. But I'm not sure.



   karl

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32470-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 08 17:43:17 2008
Return-Path: <java-user-return-32470-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59569 invoked from network); 8 Feb 2008 17:43:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Feb 2008 17:43:17 -0000
Received: (qmail 16318 invoked by uid 500); 8 Feb 2008 17:43:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15896 invoked by uid 500); 8 Feb 2008 17:43:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15885 invoked by uid 99); 8 Feb 2008 17:43:03 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Feb 2008 09:43:03 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of erica.mitchell@iona.com designates 62.221.12.55 as permitted sender)
Received: from [62.221.12.55] (HELO emea-mx1.iona.com) (62.221.12.55)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Feb 2008 17:42:48 +0000
X-IronPort-AV: E=Sophos;i="4.25,322,1199664000"; 
   d="scan'208";a="1153486"
Received: from emea-ems1.ionaglobal.com ([10.2.1.125])
  by emea-mx1.iona.com with ESMTP; 08 Feb 2008 17:42:41 +0000
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Subject: RE: MultiFieldQueryParser question
Date: Fri, 8 Feb 2008 17:42:40 -0000
Message-ID: <E91104197DA2654DA833B6EB53B6C488032F7B89@emea-ems1.IONAGLOBAL.COM>
In-Reply-To: <E91104197DA2654DA833B6EB53B6C488032F7B87@emea-ems1.IONAGLOBAL.COM>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: MultiFieldQueryParser question
Thread-Index: AchqVhSQ32ufYdbhSRqX2NDeDoXSBAACpwkgAAYN/rA=
From: "Mitchell, Erica" <Erica.Mitchell@iona.com>
To: <java-user@lucene.apache.org>
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Solved it, for those who were wondering where I went wrong....

I've built up an ArrayList while adding my attributes to a lucence doc
and updated my multiquerySearchParser to contain all these attribute
names as follows

Object[] attributeNamesArray =3D (Object[]) attrList.toArray();
        String[] otherFieldsArray  =3D {IDENTITY, NAME};
        String[] searchFields =3D new String[attributeNamesArray.length +
otherFieldsArray.length];       =20
       =20
        System.arraycopy(attributeNamesArray, 0, searchFields, 0,
attributeNamesArray.length);
        System.arraycopy(otherFieldsArray, 0, searchFields,
attributeNamesArray.length, otherFieldsArray.length);
     =20
        MultiFieldQueryParser multiparser =3D new
MultiFieldQueryParser(searchFields, new StandardAnalyzer());
	  multiparser.setDefaultOperator(QueryParser.Operator.OR);=20
        Query query =3D multiparser.parse("aaa*");


When I call toString() on my query, the syntax looks correct

Query guid:aaa* name:aaa* value:aaa* id:aaa* name:aaa*=20

When I debug into the hits documents, I can see that only the 2 id
results are returned.
Its not finding the guid as a hit because its in the same document as
the id.
I discovered this by using Luke to inspect the documents.



-----Original Message-----
From: Mitchell, Erica [mailto:Erica.Mitchell@iona.com]=20
Sent: 08 February 2008 14:54
To: java-user@lucene.apache.org
Subject: MultiFieldQueryParser question

Hi,


I'm trying to build up an index of fields to represent an
org.eclipse.emf.ecore.EObject;


So I'm adding these fields to my lucene doc

doc.add(new Field(NAME, cls.getName(), Field.Store.YES,
Field.Index.TOKENIZED)); doc.add(new Field(IDENTITY,
obj.eGet(cls.getEIDAttribute()).toString(),
Field.Store.YES, Field.Index.TOKENIZED));

I then get the Eattributes from my Eobject and I want to add these to
the index

 for (Object o : cls.getEAllAttributes()) {
            if (o instanceof EAttribute) {
                EAttribute attribute =3D (EAttribute) o;
                String attributeName =3D attribute.getName();
       	    Strung attributeValue =3D obj.eGet(attribute).toString();

		    doc.add(new Field(attributeName , attributeValue ,
Field.Store.YES, Field.Index.TOKENIZED));
		}
 }


This is how I'm searching all fields for text containing "aaa"

        String[] searchFields =3D {IDENTITY, NAME, ATTRIBUTE};=20
           =20
        MultiFieldQueryParser multiparser =3D new
MultiFieldQueryParser(searchFields, new StandardAnalyzer());=20
        multiparser.setDefaultOperator(QueryParser.Operator.OR);=20
        Query query =3D multiparser.parse("aaa*");
        Hits hits =3D isearcher.search(query);


So using Luke I can see my index contains information like this

<id> aaa2
<id> aaa1

<guid> aaa2
<guid> pi4

<name> attribute
<name> poliyinstance


I'd like my query to return both the id fields and the guids.
The problem is the guid is added to the index by virtue of my
doc.addField(attributeName, attributeValue ...)=20

So for the query to return the attributes correctly, I'd need to pass in
the attributeName which I don't have.

Is the answer simply that I should be keeping an array of the
attributeName's returned, and passing these as part of the String[] into
searchFields?

Thanks a million,
Erica

----------------------------
IONA Technologies PLC (registered in Ireland) Registered Number: 171387
Registered Address: The IONA Building, Shelbourne Road, Dublin 4,
Ireland

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org

----------------------------
IONA Technologies PLC (registered in Ireland)
Registered Number: 171387
Registered Address: The IONA Building, Shelbourne Road, Dublin 4, Ireland

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32471-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 08 18:09:13 2008
Return-Path: <java-user-return-32471-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72806 invoked from network); 8 Feb 2008 18:09:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Feb 2008 18:09:13 -0000
Received: (qmail 51088 invoked by uid 500); 8 Feb 2008 18:09:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 51060 invoked by uid 500); 8 Feb 2008 18:09:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 51049 invoked by uid 99); 8 Feb 2008 18:09:00 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Feb 2008 10:09:00 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.145] (HELO spunkymail-a19.g.dreamhost.com) (208.97.132.145)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Feb 2008 18:08:30 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a19.g.dreamhost.com (Postfix) with ESMTP id 6927D11EF6
	for <java-user@lucene.apache.org>; Fri,  8 Feb 2008 10:08:37 -0800 (PST)
Message-Id: <1033326D-D7DE-4B0F-82D4-404890635EA3@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <198EF845-819A-48EF-ADE2-DEA45CBF9916@gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v915)
Subject: Re: Faceting with payloads
Date: Fri, 8 Feb 2008 13:08:35 -0500
References: <46CBB02C-726E-470B-BE30-FCB5BD2EAA21@theronge.com> <198EF845-819A-48EF-ADE2-DEA45CBF9916@gmail.com>
X-Mailer: Apple Mail (2.915)
X-Virus-Checked: Checked by ClamAV on apache.org


On Feb 8, 2008, at 12:17 PM, Karl Wettin wrote:

>
> 6 feb 2008 kl. 23.10 skrev Matt Ronge:
>
>> I may index the token "house" maybe found in different places with  
>> different types. If the user query contains house, I want to report  
>> the number of instances of the token house of type A, type B and so  
>> on.
>>
>> Should I be using payloads for this? If so, I'd like to be able to  
>> count up all the instances of for each type. Then I can show the  
>> results, along with TypeA (100 hits), TypeB (1000 hits) so on.
>
> Pehaps, what do you do with these numbers you extract?
>
>> If I could use something like HitCollector that was passed in the  
>> token payload, that would be perfect, but it doesn't support that.  
>> Any thoughts on how to go about this? Also, if I want to only allow  
>> tokens of TypeB, how can I efficiently filter by TypeB; using a  
>> Similarity subclass seems like a hack.
>
> I think you will have to hack the Query classes you want to use, and  
> make their Weight share some counter thingy you can inspect after  
> invoking a Query in the Searcher. But I'm not sure.

Yeah, I agree.  Sounds like a custom Query class.  Have a look at the  
BoostingTermQuery for an example of using payloads.  Not sure yet if  
there is a generalized way to do what you want, but it does seem  
useful.  Seems almost like an expansion of Spans, in that you not only  
want the hits, but you want their positions, and then expanding it, to  
give info about payload type.

I do have a JIRA issue open about adding Payloads access to spans, but  
I haven't implemented anything I am happy with yet.  With that, you  
could iterate the spanPayloads and do your counting, too.

-Grant

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32472-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 08 18:31:46 2008
Return-Path: <java-user-return-32472-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94623 invoked from network); 8 Feb 2008 18:31:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Feb 2008 18:31:45 -0000
Received: (qmail 71362 invoked by uid 500); 8 Feb 2008 18:31:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71329 invoked by uid 500); 8 Feb 2008 18:31:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71318 invoked by uid 99); 8 Feb 2008 18:31:31 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Feb 2008 10:31:31 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Feb 2008 18:31:13 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id 13B0B71C199; Fri,  8 Feb 2008 10:31:06 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id 1071871C11E
	for <java-user@lucene.apache.org>; Fri,  8 Feb 2008 10:31:06 -0800 (PST)
Date: Fri, 8 Feb 2008 10:31:06 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: MultiFieldQueryParser question
In-Reply-To: <E91104197DA2654DA833B6EB53B6C488032F7B87@emea-ems1.IONAGLOBAL.COM>
Message-ID: <Pine.LNX.4.62.0802081030000.11578@radix.cryptio.net>
References: <E91104197DA2654DA833B6EB53B6C488032F7B87@emea-ems1.IONAGLOBAL.COM>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: Subject: MultiFieldQueryParser question
: Date: Fri, 8 Feb 2008 14:53:37 -0000
: Message-ID:
:     <E91104197DA2654DA833B6EB53B6C488032F7B87@emea-ems1.IONAGLOBAL.COM>
: In-Reply-To: <359a92830802080524j3d1a0da9i3b19396b5b1f21b4@mail.gmail.com>

http://people.apache.org/~hossman/#threadhijack

Thread Hijacking on Mailing Lists

When starting a new discussion on a mailing list, please do not reply to 
an existing message, instead start a fresh email.  Even if you change the 
subject line of your email, other mail headers still track which thread 
you replied to and your question is "hidden" in that thread and gets less 
attention.   It makes following discussions in the mailing list archives 
particularly difficult.
See Also:  http://en.wikipedia.org/wiki/Thread_hijacking




-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32473-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 08 18:34:05 2008
Return-Path: <java-user-return-32473-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95767 invoked from network); 8 Feb 2008 18:34:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Feb 2008 18:34:05 -0000
Received: (qmail 78442 invoked by uid 500); 8 Feb 2008 18:33:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78059 invoked by uid 500); 8 Feb 2008 18:33:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78048 invoked by uid 99); 8 Feb 2008 18:33:51 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Feb 2008 10:33:51 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [72.14.220.153] (HELO fg-out-1718.google.com) (72.14.220.153)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Feb 2008 18:33:21 +0000
Received: by fg-out-1718.google.com with SMTP id d23so3696707fga.27
        for <java-user@lucene.apache.org>; Fri, 08 Feb 2008 10:33:25 -0800 (PST)
Received: by 10.86.58.3 with SMTP id g3mr11984734fga.38.1202495604921;
        Fri, 08 Feb 2008 10:33:24 -0800 (PST)
Received: from ?10.17.4.4? ( [71.174.108.74])
        by mx.google.com with ESMTPS id 12sm13903837fgg.6.2008.02.08.10.33.22
        (version=TLSv1/SSLv3 cipher=OTHER);
        Fri, 08 Feb 2008 10:33:23 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v753)
In-Reply-To: <3241C6045C914BC486B1283E6C9D5577@msrvcn04>
References: <3241C6045C914BC486B1283E6C9D5577@msrvcn04>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <CC1A713F-C527-46E6-8F72-926C851D3737@mikemccandless.com>
Content-Transfer-Encoding: 7bit
From: Michael McCandless <lucene@mikemccandless.com>
Subject: Re: IndexWriter: setRAMBufferSizeMB
Date: Fri, 8 Feb 2008 13:34:02 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.753)
X-Virus-Checked: Checked by ClamAV on apache.org

Well ... every time the RAM buffer is full, a new segment is flushed
to the Directory, but that is not necessarily a "commit" in that
an IndexReader would see the new segment, nor, that the segment would
survive if the machine suddenly crashed.

You should't rely on when specifically IndexWriter makes its changes
visible to readers.  The best way to be sure is to close the writer.

There is work underway now, in this issue:

   https://issues.apache.org/jira/browse/LUCENE-1044

that will add an explicit "commit" call, which you would use to 1)
make the changes visible to readers, and 2) sync the index such that
if the machine crashed (after commit returns) then your changes as of
the commit will survive.  But it's not committed yet ... it will be in
2.4.

One way for a reader to check if a new commit has happened is to
call the isCurrent method.  Maybe that helps?

Mike

<spring@gmx.eu> wrote:

> Hi,
>
> if I understand this property correctly every time the ram buffer  
> is full it
> gets automaticaly written to disk. Something like a commit in a  
> database.
> Thus if my application dies, all docs in the buffer get lost. Right?
>
> If so, is there any event/callback etc. which informs my  
> application that
> such a commit happend?
>
> Thank you.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32474-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 08 19:45:30 2008
Return-Path: <java-user-return-32474-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21760 invoked from network); 8 Feb 2008 19:45:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Feb 2008 19:45:30 -0000
Received: (qmail 66660 invoked by uid 500); 8 Feb 2008 19:45:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66631 invoked by uid 500); 8 Feb 2008 19:45:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66620 invoked by uid 99); 8 Feb 2008 19:45:15 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Feb 2008 11:45:15 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of spring@gmx.eu designates 213.165.64.20 as permitted sender)
Received: from [213.165.64.20] (HELO mail.gmx.net) (213.165.64.20)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 08 Feb 2008 19:44:45 +0000
Received: (qmail invoked by alias); 08 Feb 2008 19:44:50 -0000
Received: from e179037079.adsl.alicedsl.de (EHLO msrvcn04) [85.179.37.79]
  by mail.gmx.net (mp005) with SMTP; 08 Feb 2008 20:44:50 +0100
X-Authenticated: #2635966
X-Provags-ID: V01U2FsdGVkX1+oswcTOSioqwNhGvbMHX+P2LeseokQaUCw3hqdED
	IzTJ0Xx9EAaww5
From: <spring@gmx.eu>
To: <java-user@lucene.apache.org>
References: <3241C6045C914BC486B1283E6C9D5577@msrvcn04> <CC1A713F-C527-46E6-8F72-926C851D3737@mikemccandless.com>
Subject: RE: IndexWriter: setRAMBufferSizeMB
Date: Fri, 8 Feb 2008 20:44:51 +0100
Message-ID: <90CCAC5AF2684E1DA3F6710317E2F421@msrvcn04>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.3790.4133
In-Reply-To: <CC1A713F-C527-46E6-8F72-926C851D3737@mikemccandless.com>
Thread-Index: AchqgS5K8pxrPCyhQDer03+Sk8ezGwACDAkA
X-Y-GMX-Trusted: 0
X-Virus-Checked: Checked by ClamAV on apache.org

OK, so there is nothing in 2.3 besides IndexWriter.close to ensure that the
docs are written to disk and that the index will survive an application /
machine death? 

> -----Original Message-----
> From: Michael McCandless [mailto:lucene@mikemccandless.com] 
> Sent: Freitag, 8. Februar 2008 19:34
> To: java-user@lucene.apache.org
> Subject: Re: IndexWriter: setRAMBufferSizeMB
> 
> Well ... every time the RAM buffer is full, a new segment is flushed
> to the Directory, but that is not necessarily a "commit" in that
> an IndexReader would see the new segment, nor, that the segment would
> survive if the machine suddenly crashed.
> 
> You should't rely on when specifically IndexWriter makes its changes
> visible to readers.  The best way to be sure is to close the writer.
> 
> There is work underway now, in this issue:
> 
>    https://issues.apache.org/jira/browse/LUCENE-1044
> 
> that will add an explicit "commit" call, which you would use to 1)
> make the changes visible to readers, and 2) sync the index such that
> if the machine crashed (after commit returns) then your changes as of
> the commit will survive.  But it's not committed yet ... it will be in
> 2.4.
> 
> One way for a reader to check if a new commit has happened is to
> call the isCurrent method.  Maybe that helps?
> 
> Mike
> 
> <spring@gmx.eu> wrote:
> 
> > Hi,
> >
> > if I understand this property correctly every time the ram buffer  
> > is full it
> > gets automaticaly written to disk. Something like a commit in a  
> > database.
> > Thus if my application dies, all docs in the buffer get lost. Right?
> >
> > If so, is there any event/callback etc. which informs my  
> > application that
> > such a commit happend?
> >
> > Thank you.
> >
> >
> > 
> ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32475-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 08 20:01:02 2008
Return-Path: <java-user-return-32475-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26826 invoked from network); 8 Feb 2008 20:01:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Feb 2008 20:01:02 -0000
Received: (qmail 81256 invoked by uid 500); 8 Feb 2008 20:00:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80700 invoked by uid 500); 8 Feb 2008 20:00:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80689 invoked by uid 99); 8 Feb 2008 20:00:48 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Feb 2008 12:00:48 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.128.190] (HELO fk-out-0910.google.com) (209.85.128.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Feb 2008 20:00:18 +0000
Received: by fk-out-0910.google.com with SMTP id z23so3591651fkz.5
        for <java-user@lucene.apache.org>; Fri, 08 Feb 2008 12:00:22 -0800 (PST)
Received: by 10.82.108.9 with SMTP id g9mr23751957buc.34.1202500821433;
        Fri, 08 Feb 2008 12:00:21 -0800 (PST)
Received: from ?10.17.4.4? ( [71.174.108.74])
        by mx.google.com with ESMTPS id q9sm16910517gve.10.2008.02.08.12.00.19
        (version=TLSv1/SSLv3 cipher=OTHER);
        Fri, 08 Feb 2008 12:00:20 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v753)
In-Reply-To: <90CCAC5AF2684E1DA3F6710317E2F421@msrvcn04>
References: <3241C6045C914BC486B1283E6C9D5577@msrvcn04> <CC1A713F-C527-46E6-8F72-926C851D3737@mikemccandless.com> <90CCAC5AF2684E1DA3F6710317E2F421@msrvcn04>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <AD343CB0-8F07-46B5-A0BC-0D956F3A65AA@mikemccandless.com>
Content-Transfer-Encoding: 7bit
From: Michael McCandless <lucene@mikemccandless.com>
Subject: Re: IndexWriter: setRAMBufferSizeMB
Date: Fri, 8 Feb 2008 15:00:58 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.753)
X-Virus-Checked: Checked by ClamAV on apache.org


It's complicated.

In 2.3, you can use IW.flush to write docs to disk.  But that method  
will be deprecated in 2.4 and replaced with commit.  Or, you can close.

If application (jvm) dies or killed, the index will be fine but won't  
have any un-flushed buffered docs.

If machine dies (os crashes, power cord pulled) then there is a real  
risk that the index will become corrupt.  This is because Lucene has  
never explicitly sync()'d the files to ensure they are on stable  
storage.  LUCENE-1044 fixes that (adds syncs).

Mike

<spring@gmx.eu> wrote:

> OK, so there is nothing in 2.3 besides IndexWriter.close to ensure  
> that the
> docs are written to disk and that the index will survive an  
> application /
> machine death?
>
>> -----Original Message-----
>> From: Michael McCandless [mailto:lucene@mikemccandless.com]
>> Sent: Freitag, 8. Februar 2008 19:34
>> To: java-user@lucene.apache.org
>> Subject: Re: IndexWriter: setRAMBufferSizeMB
>>
>> Well ... every time the RAM buffer is full, a new segment is flushed
>> to the Directory, but that is not necessarily a "commit" in that
>> an IndexReader would see the new segment, nor, that the segment would
>> survive if the machine suddenly crashed.
>>
>> You should't rely on when specifically IndexWriter makes its changes
>> visible to readers.  The best way to be sure is to close the writer.
>>
>> There is work underway now, in this issue:
>>
>>    https://issues.apache.org/jira/browse/LUCENE-1044
>>
>> that will add an explicit "commit" call, which you would use to 1)
>> make the changes visible to readers, and 2) sync the index such that
>> if the machine crashed (after commit returns) then your changes as of
>> the commit will survive.  But it's not committed yet ... it will  
>> be in
>> 2.4.
>>
>> One way for a reader to check if a new commit has happened is to
>> call the isCurrent method.  Maybe that helps?
>>
>> Mike
>>
>> <spring@gmx.eu> wrote:
>>
>>> Hi,
>>>
>>> if I understand this property correctly every time the ram buffer
>>> is full it
>>> gets automaticaly written to disk. Something like a commit in a
>>> database.
>>> Thus if my application dies, all docs in the buffer get lost. Right?
>>>
>>> If so, is there any event/callback etc. which informs my
>>> application that
>>> such a commit happend?
>>>
>>> Thank you.
>>>
>>>
>>>
>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32476-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 08 23:54:03 2008
Return-Path: <java-user-return-32476-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19994 invoked from network); 8 Feb 2008 23:54:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Feb 2008 23:54:03 -0000
Received: (qmail 46808 invoked by uid 500); 8 Feb 2008 23:53:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46763 invoked by uid 500); 8 Feb 2008 23:53:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46752 invoked by uid 99); 8 Feb 2008 23:53:48 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Feb 2008 15:53:48 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [69.12.216.205] (HELO theronge.com) (69.12.216.205)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Feb 2008 23:53:32 +0000
Received: from Compie (adsl-76-227-76-97.dsl.chmpil.sbcglobal.net [76.227.76.97])
	(Authenticated sender: mronge)
	by theronge.com (Postfix) with ESMTP id DF7516437E
	for <java-user@lucene.apache.org>; Fri,  8 Feb 2008 15:53:19 -0800 (PST)
Message-Id: <81E4E4ED-0528-4994-84A0-7CFE03C1CCC3@theronge.com>
From: Matt Ronge <mronge@theronge.com>
To: java-user@lucene.apache.org
In-Reply-To: <198EF845-819A-48EF-ADE2-DEA45CBF9916@gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v915)
Subject: Re: Faceting with payloads
Date: Fri, 8 Feb 2008 17:53:18 -0600
References: <46CBB02C-726E-470B-BE30-FCB5BD2EAA21@theronge.com> <198EF845-819A-48EF-ADE2-DEA45CBF9916@gmail.com>
X-Mailer: Apple Mail (2.915)
X-Virus-Checked: Checked by ClamAV on apache.org


On Feb 8, 2008, at 11:17 AM, Karl Wettin wrote:

>
> 6 feb 2008 kl. 23.10 skrev Matt Ronge:
>
>> I may index the token "house" maybe found in different places with  
>> different types. If the user query contains house, I want to report  
>> the number of instances of the token house of type A, type B and so  
>> on.
>>
>> Should I be using payloads for this? If so, I'd like to be able to  
>> count up all the instances of for each type. Then I can show the  
>> results, along with TypeA (100 hits), TypeB (1000 hits) so on.
>
> Pehaps, what do you do with these numbers you extract?

I would like to display this to the user along with the search  
results. So then can see that there are 100 hits for TypeA, and then  
can specify to get results just of TypeA. So on top of being able to  
count hits based on the payload, I'll need to run a query that looks  
at the payloads.

--
Matt Ronge

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32477-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Feb 09 00:59:50 2008
Return-Path: <java-user-return-32477-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42012 invoked from network); 9 Feb 2008 00:59:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Feb 2008 00:59:50 -0000
Received: (qmail 8116 invoked by uid 500); 9 Feb 2008 00:59:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8084 invoked by uid 500); 9 Feb 2008 00:59:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8072 invoked by uid 99); 9 Feb 2008 00:59:37 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Feb 2008 16:59:37 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [66.163.178.135] (HELO web34303.mail.mud.yahoo.com) (66.163.178.135)
    by apache.org (qpsmtpd/0.29) with SMTP; Sat, 09 Feb 2008 00:59:06 +0000
Received: (qmail 79727 invoked by uid 60001); 9 Feb 2008 00:59:13 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=rzHUhxCgH8tlViIX3dRFJrCj4alKfFUN/STwMFubg/b4AmKnLpfHfRoVIPsY+OmqPYB7JIHXTkAQOYJOtaOboaVn+fHj5UqFrxB3Xoj1RZhjt4nKDzesl2MNbmpfWrlqChaEZKwx1tuoY8knHhHC2Ab6KY1M2WzUIaXFPt5B+Ys=;
X-YMail-OSG: aLJIQX0VM1nLMe0TcdNqw6.Geo6y6xs1r2aZNZvBn8WxV1TduUVB3AIin.bKVepknbrHhrmqMRApzEubPfMYxoVIhH61HfJwfMeWYW9SBPHOx39tZko-
Received: from [78.86.8.167] by web34303.mail.mud.yahoo.com via HTTP; Fri, 08 Feb 2008 16:59:12 PST
Date: Fri, 8 Feb 2008 16:59:12 -0800 (PST)
From: Panos Konstantinidis <girionis@yahoo.com>
Subject: recall/precision with lucene
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
Message-ID: <962871.76974.qm@web34303.mail.mud.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hello I am a new lucene user. I am trying to calculate the recall/precision of
a query and I was wondering if lucene provides an easy way to do it. 

Currently I have a number of documents that match a given query. Then I am
doing a search and I am getting back all the Hits. I then divide the number of
documents that came back from lucene (the Hits size) with the number of
documents that should have got. This is how I calculate the recall.

For precision I just get the hits.score() of each relevant document. I am not
sure if I am on the right track or if there is an easier/better way to do it. I
would appreciate any insigith into this.

Regards

Panos


      ____________________________________________________________________________________
Never miss a thing.  Make Yahoo your home page. 
http://www.yahoo.com/r/hs

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32478-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Feb 09 12:38:52 2008
Return-Path: <java-user-return-32478-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35874 invoked from network); 9 Feb 2008 12:38:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Feb 2008 12:38:52 -0000
Received: (qmail 72534 invoked by uid 500); 9 Feb 2008 12:38:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72506 invoked by uid 500); 9 Feb 2008 12:38:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72495 invoked by uid 99); 9 Feb 2008 12:38:39 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 09 Feb 2008 04:38:39 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of gshankar.sahu@gmail.com designates 209.85.132.242 as permitted sender)
Received: from [209.85.132.242] (HELO an-out-0708.google.com) (209.85.132.242)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 09 Feb 2008 12:38:09 +0000
Received: by an-out-0708.google.com with SMTP id c5so1006735anc.49
        for <java-user@lucene.apache.org>; Sat, 09 Feb 2008 04:38:15 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        bh=3augdoF4QkCBRzTxitx4zQykw5wgbOmCtAHJdbPazjs=;
        b=IzLUG1prm5O3StY7m2G1hvZ4VL6ov5s3+x0RPaDFPuTRhRtzAFEb3uKKaZwn2bU+rQnTSHBNKrwNghlZoXzxL7dOwdG5PK3r79A3TyF2GSW1U1uLK7dkyaNGGDLYGe9G9lfnVUMM/KbmtySWInPCAFFdIC8O72LPqqOYxUTqSSk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=R3Cn1swy2+cePfltox+3/U+F38TBeV/tp16GyUg8yaZu7Q6ONNbemnO8eEIQqavuPKZD7DCx0QcRtr6DgZwsnuMDhV1Zw/BNE/8y1K/+uIqlIYZ8vnIiLtPmv4qVsQpV86yUcafvYbAiySM6sveto7inAch+W9dWUO/jVjmNAOs=
Received: by 10.100.249.9 with SMTP id w9mr29273426anh.44.1202560694902;
        Sat, 09 Feb 2008 04:38:14 -0800 (PST)
Received: by 10.100.105.4 with HTTP; Sat, 9 Feb 2008 04:38:14 -0800 (PST)
Message-ID: <979a94470802090438h67b457dfuabd72e84d6fd7c2f@mail.gmail.com>
Date: Sat, 9 Feb 2008 18:08:14 +0530
From: "Gauri Shankar" <gshankar.sahu@gmail.com>
To: java-user@lucene.apache.org
Subject: how to get the programmatic control over index's document id
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_21754_3785175.1202560694347"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_21754_3785175.1202560694347
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi,

I would like to get the control over the docId field from my code. Can
anyone suggest some way for doing the same?


-- 
Warm Regards,
Gauri Shankar

------=_Part_21754_3785175.1202560694347--

From java-user-return-32479-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Feb 09 12:46:28 2008
Return-Path: <java-user-return-32479-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37076 invoked from network); 9 Feb 2008 12:46:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Feb 2008 12:46:28 -0000
Received: (qmail 77610 invoked by uid 500); 9 Feb 2008 12:46:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77578 invoked by uid 500); 9 Feb 2008 12:46:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77567 invoked by uid 99); 9 Feb 2008 12:46:15 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 09 Feb 2008 04:46:15 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of patrek@gmail.com designates 66.249.92.174 as permitted sender)
Received: from [66.249.92.174] (HELO ug-out-1314.google.com) (66.249.92.174)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 09 Feb 2008 12:45:46 +0000
Received: by ug-out-1314.google.com with SMTP id u40so49080ugc.29
        for <java-user@lucene.apache.org>; Sat, 09 Feb 2008 04:45:53 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        bh=5ciu1c/enE7qfy2VzZaZw7M9e6EEFpUZ+YQ6HzlV4Xg=;
        b=rsG7jqHD8Zfyr3AQeIyCDHW9mZAZAcRqxvb+1+aPHRl3ouRSk91zXSQ91rEu1ryo0YI7Y6RI/bqRoErWKgvjpcUYH9GGfK8gNhbX2os/stlmKm2vi/YcKltzu6IW5Ho483BRhQH1YQtWXm4ELyoOi+ylNxM6O/7G0DahxEogGJ0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=RcPzDpMkGNxxKK3A5XmYV7ad3moUkOAhIpAL/TGgrDCWlGLdbBMQ4PK5LvVa5fk3+ZmVThpRp+6lEU2SMji2mNH7lQSPmfnoVA4xvR3vkiu52sOBMMR3IO4BgrbQZAOxpNsVEF2iGX+C4yt/ad4N7kv88DeqZB0UlaVWhSYIZfI=
Received: by 10.67.30.3 with SMTP id h3mr5855042ugj.35.1202561153623;
        Sat, 09 Feb 2008 04:45:53 -0800 (PST)
Received: by 10.67.87.20 with HTTP; Sat, 9 Feb 2008 04:45:53 -0800 (PST)
Message-ID: <48b038c60802090445u45d60c75m1427c63888495063@mail.gmail.com>
Date: Sat, 9 Feb 2008 07:45:53 -0500
From: "Patrick Turcotte" <patrek@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: how to get the programmatic control over index's document id
In-Reply-To: <979a94470802090438h67b457dfuabd72e84d6fd7c2f@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <979a94470802090438h67b457dfuabd72e84d6fd7c2f@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Add a field to your document.

document.add(new Field("id", idString));

Or something like that. (Don't have the doc handy right now).

Hope this helps.

Patrick

On Feb 9, 2008 7:38 AM, Gauri Shankar <gshankar.sahu@gmail.com> wrote:
> Hi,
>
> I would like to get the control over the docId field from my code. Can
> anyone suggest some way for doing the same?
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32480-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Feb 09 15:41:28 2008
Return-Path: <java-user-return-32480-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44775 invoked from network); 9 Feb 2008 15:41:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Feb 2008 15:41:28 -0000
Received: (qmail 65925 invoked by uid 500); 9 Feb 2008 15:41:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65887 invoked by uid 500); 9 Feb 2008 15:41:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65875 invoked by uid 99); 9 Feb 2008 15:41:15 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 09 Feb 2008 07:41:15 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 72.14.220.152 as permitted sender)
Received: from [72.14.220.152] (HELO fg-out-1718.google.com) (72.14.220.152)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 09 Feb 2008 15:40:46 +0000
Received: by fg-out-1718.google.com with SMTP id d23so3945113fga.27
        for <java-user@lucene.apache.org>; Sat, 09 Feb 2008 07:40:53 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=r9fXta7vNrF3PAOh+pmGDQveAeB6//VuOdSOhNd1dT8=;
        b=yAugGC7Tvz+qLV9D/cCvV/ASReGot4DA9Of+fAvrrI2SP2l0wpZKrZqq6WnacU6Ofwl8I5mIJFzt48FGf7tlr5gzDEpAmvCR8qJT2fLvufqWK4dYn1YL+7CqsFGRZQ0xJKPAHo1bbmq+vLpMyAkpTrTwWZpIzmInVfbbOg2VonE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=cS6NaCCIqCq5nolFO/QseytSOpPgXDwdplUyfqGYv2DR/rDJJN9zbk0kxaQY+u93mmJtlb0QXGInhVbini9G+B0hKBqYgRnf3chqjF9uIcJLpUUBdIOR5PFp3vg0qi/1piMxpAGwIREBadkjmLSNVTXfQ/cy1uHLePw8ANBm8wM=
Received: by 10.82.148.7 with SMTP id v7mr25612240bud.10.1202571653290;
        Sat, 09 Feb 2008 07:40:53 -0800 (PST)
Received: by 10.82.151.7 with HTTP; Sat, 9 Feb 2008 07:40:53 -0800 (PST)
Message-ID: <359a92830802090740p3c658ab9qf413b70a3257a859@mail.gmail.com>
Date: Sat, 9 Feb 2008 10:40:53 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: how to get the programmatic control over index's document id
In-Reply-To: <979a94470802090438h67b457dfuabd72e84d6fd7c2f@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_22311_31222243.1202571653287"
References: <979a94470802090438h67b457dfuabd72e84d6fd7c2f@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_22311_31222243.1202571653287
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

If you're referring to the internally-assigned document id, I don't think
there is a way. Assuming you're trying to assign one yourself or some
such.

>From all the discussions I've seen, I don't think there's even a faint
possibility that controlling this will be added to Lucene. Note that
existing IDs change as your index changes.

Why do you care? What problem are you trying to solve? One common
suggestion is to create your own field (as Patrick suggests) that contains
your own unique ID. Using TermEnum/TermDocs will give you efficient
ways of going from your unique ID to a docID...

Best
Erick

On Feb 9, 2008 7:38 AM, Gauri Shankar <gshankar.sahu@gmail.com> wrote:

> Hi,
>
> I would like to get the control over the docId field from my code. Can
> anyone suggest some way for doing the same?
>
>
> --
> Warm Regards,
> Gauri Shankar
>

------=_Part_22311_31222243.1202571653287--

From java-user-return-32481-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Feb 09 19:03:30 2008
Return-Path: <java-user-return-32481-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88395 invoked from network); 9 Feb 2008 19:03:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Feb 2008 19:03:30 -0000
Received: (qmail 99135 invoked by uid 500); 9 Feb 2008 19:03:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 99106 invoked by uid 500); 9 Feb 2008 19:03:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 99095 invoked by uid 99); 9 Feb 2008 19:03:16 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 09 Feb 2008 11:03:16 -0800
X-ASF-Spam-Status: No, hits=3.7 required=10.0
	tests=DNS_FROM_OPENWHOIS,FORGED_HOTMAIL_RCVD2,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 09 Feb 2008 19:02:31 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1JNuyS-0006Jg-CD
	for java-user@lucene.apache.org; Sat, 09 Feb 2008 11:02:52 -0800
Message-ID: <15388068.post@talk.nabble.com>
Date: Sat, 9 Feb 2008 11:02:52 -0800 (PST)
From: Cesar Ronchese <ronchese@hotmail.com>
To: java-user@lucene.apache.org
Subject: Compiled Term Hightlighter
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: ronchese@hotmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hello guys.

I'm not a java developer, so I'm getting stuck on compiling the Term
Highlighter of source files acquired from the Lucene Sandbox. I got some
errors, well, I guess I'm not using the correct command line (it was javac
c:\dir\*.java, something like that).

Can someone post me the compiled version of this, OR even a compilable
package (with the correct command line to compile)?

Just another doubt, is the Term Highligther not really able to highlights
fuzzy terms (~)? As far I tested, I could not find any way to do that.

Thanks!
Cesar
-- 
View this message in context: http://www.nabble.com/Compiled-Term-Hightlighter-tp15388068p15388068.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32482-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Feb 09 19:28:50 2008
Return-Path: <java-user-return-32482-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92140 invoked from network); 9 Feb 2008 19:28:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Feb 2008 19:28:50 -0000
Received: (qmail 16387 invoked by uid 500); 9 Feb 2008 19:28:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16217 invoked by uid 500); 9 Feb 2008 19:28:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16206 invoked by uid 99); 9 Feb 2008 19:28:36 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 09 Feb 2008 11:28:36 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lucenelist2007@danielnaber.de designates 80.67.29.43 as permitted sender)
Received: from [80.67.29.43] (HELO smtprelay13.ispgateway.de) (80.67.29.43)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 09 Feb 2008 19:28:03 +0000
Received: from [84.191.194.62] (helo=p54bfc23e.dip.t-dialin.net)
	by smtprelay13.ispgateway.de with esmtpsa (TLSv1:AES256-SHA:256)
	(Exim 4.68)
	(envelope-from <lucenelist2007@danielnaber.de>)
	id 1JNvMu-0007nM-Hd
	for java-user@lucene.apache.org; Sat, 09 Feb 2008 20:28:08 +0100
From: Daniel Naber <lucenelist2007@danielnaber.de>
To: java-user@lucene.apache.org
Subject: Re: Compiled Term Hightlighter
Date: Sat, 9 Feb 2008 20:28:05 +0100
User-Agent: KMail/1.9.6 (enterprise 20070904.708012)
References: <15388068.post@talk.nabble.com>
In-Reply-To: <15388068.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="us-ascii"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200802092028.06184@danielnaber.de>
X-Df-Sender: 695637
X-Virus-Checked: Checked by ClamAV on apache.org

On Samstag, 9. Februar 2008, Cesar Ronchese wrote:

> I'm not a java developer, so I'm getting stuck on compiling the Term
> Highlighter of source files acquired from the Lucene Sandbox.

The highlighter is part of the release, in Lucene 2.3 it's 
under /build/contrib/highlighter/lucene-highlighter-2.3.jar, or are you 
looking for some other highlighter?

> Just another doubt, is the Term Highligther not really able to
> highlights fuzzy terms (~)? As far I tested, I could not find any way to
> do that.

You just need to use give the highlighter a query on which .rewrite() was 
called.

Regards
 Daniel

-- 
http://www.danielnaber.de

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32483-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Feb 09 20:43:02 2008
Return-Path: <java-user-return-32483-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21556 invoked from network); 9 Feb 2008 20:43:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Feb 2008 20:43:02 -0000
Received: (qmail 67067 invoked by uid 500); 9 Feb 2008 20:42:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67035 invoked by uid 500); 9 Feb 2008 20:42:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67019 invoked by uid 99); 9 Feb 2008 20:42:50 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 09 Feb 2008 12:42:50 -0800
X-ASF-Spam-Status: No, hits=3.7 required=10.0
	tests=DNS_FROM_OPENWHOIS,FORGED_HOTMAIL_RCVD2,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 09 Feb 2008 20:42:04 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1JNwWm-0000yl-UA
	for java-user@lucene.apache.org; Sat, 09 Feb 2008 12:42:24 -0800
Message-ID: <15389859.post@talk.nabble.com>
Date: Sat, 9 Feb 2008 12:42:24 -0800 (PST)
From: Cesar Ronchese <ronchese@hotmail.com>
To: java-user@lucene.apache.org
Subject: Re: Compiled Term Hightlighter
In-Reply-To: <200802092028.06184@danielnaber.de>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: ronchese@hotmail.com
References: <15388068.post@talk.nabble.com> <200802092028.06184@danielnaber.de>
X-Virus-Checked: Checked by ClamAV on apache.org


Cool! Thanks.

About the highlighter+fuzzy, after you wrote that, I checked my code. It was
wrong:

Wrong one:
objQuery.rewrite(objIndexReader)

Then I fixed to:
objQuery = objQuery.rewrite(objIndexReader)

[]s
Cesar




Daniel Naber-10 wrote:
> 
> On Samstag, 9. Februar 2008, Cesar Ronchese wrote:
> 
>> I'm not a java developer, so I'm getting stuck on compiling the Term
>> Highlighter of source files acquired from the Lucene Sandbox.
> 
> The highlighter is part of the release, in Lucene 2.3 it's 
> under /build/contrib/highlighter/lucene-highlighter-2.3.jar, or are you 
> looking for some other highlighter?
> 
>> Just another doubt, is the Term Highligther not really able to
>> highlights fuzzy terms (~)? As far I tested, I could not find any way to
>> do that.
> 
> You just need to use give the highlighter a query on which .rewrite() was 
> called.
> 
> Regards
>  Daniel
> 
> -- 
> http://www.danielnaber.de
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/Compiled-Term-Hightlighter-tp15388068p15389859.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32484-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Feb 09 22:00:50 2008
Return-Path: <java-user-return-32484-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47722 invoked from network); 9 Feb 2008 22:00:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Feb 2008 22:00:49 -0000
Received: (qmail 12415 invoked by uid 500); 9 Feb 2008 22:00:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12109 invoked by uid 500); 9 Feb 2008 22:00:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12097 invoked by uid 99); 9 Feb 2008 22:00:37 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 09 Feb 2008 14:00:37 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [194.109.24.30] (HELO smtp-vbr10.xs4all.nl) (194.109.24.30)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 09 Feb 2008 21:59:52 +0000
Received: from k8u.lan (porta.xs4all.nl [80.127.24.69])
	by smtp-vbr10.xs4all.nl (8.13.8/8.13.8) with ESMTP id m19M0DWq006382
	for <java-user@lucene.apache.org>; Sat, 9 Feb 2008 23:00:14 +0100 (CET)
	(envelope-from paul.elschot@xs4all.nl)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: java-user@lucene.apache.org
Subject: Re: recall/precision with lucene
Date: Sat, 9 Feb 2008 23:00:14 +0100
User-Agent: KMail/1.9.6 (enterprise 0.20070907.709405)
References: <962871.76974.qm@web34303.mail.mud.yahoo.com>
In-Reply-To: <962871.76974.qm@web34303.mail.mud.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200802092300.14761.paul.elschot@xs4all.nl>
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org

Op Saturday 09 February 2008 01:59:12 schreef Panos Konstantinidis:
> Hello I am a new lucene user. I am trying to calculate the recall/precision of
> a query and I was wondering if lucene provides an easy way to do it. 
> 
> Currently I have a number of documents that match a given query. Then I am
> doing a search and I am getting back all the Hits. I then divide the number of
> documents that came back from lucene (the Hits size) with the number of
> documents that should have got. This is how I calculate the recall.

Since you're going to use all hits for the query, it is normally better to avoid
Hits and use a HitCollector or a TopDocs.
 
> For precision I just get the hits.score() of each relevant document. I am not
> sure if I am on the right track or if there is an easier/better way to do it. I
> would appreciate any insigith into this.

To use the score value for precision one could define a cut off value for
the score value, but then the calculation for recall would also need to
be adapted. For this a HitCollector would be good.

In case you want the results sorted by decreasing score value have
a look at the search methods that return TopDocs. From this one
can make a precision/recall graph for the query by considering
the total results higher than a given score.

When a lot of such computations are needed, you may also want
to cache the values of a unique identifier field for all indexed docs,
have a look at FieldCache for this.

Regards,
Paul Elschot

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32485-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Feb 10 07:04:18 2008
Return-Path: <java-user-return-32485-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51996 invoked from network); 10 Feb 2008 07:04:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Feb 2008 07:04:17 -0000
Received: (qmail 32291 invoked by uid 500); 10 Feb 2008 07:04:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32255 invoked by uid 500); 10 Feb 2008 07:04:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32243 invoked by uid 99); 10 Feb 2008 07:04:04 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 09 Feb 2008 23:04:04 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of pvsaikrishna@gmail.com designates 209.85.198.190 as permitted sender)
Received: from [209.85.198.190] (HELO rv-out-0910.google.com) (209.85.198.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 10 Feb 2008 07:03:35 +0000
Received: by rv-out-0910.google.com with SMTP id k20so3245554rvb.5
        for <java-user@lucene.apache.org>; Sat, 09 Feb 2008 23:03:43 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        bh=p9o+xmqyjGZI+cjQiMTr1qdP0hVrKpOZDCDAOtjDeG4=;
        b=RQoYiaeCupNINc7bGXDPHXms4wwlvaJINAplPREAoQxt1B6KPYrx2wWIDyr665W1quBbkDWthCCmyyBWXDeKGXMCvBdzwtoGCLYFz/VTWNT4wCda1BFNgJWqfBdfQ5OsHfrGeMsKUiSKAusrhxI16zFTqsZYoEYurm3CWBiF2II=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=hY65fBD/0FG8kOOanv6vg4vshCXn8emK4v/Cy4UMOP+L7gHXkCYbdoYz9BPwL0x8HAC4BDnC9U2XbmNzUg7lgPyIJZCgszjACedqNKZoXLYw15IXpy8MpTVXpWR2Xg1l9Q+bcOlszFUwEX25OkHmKPGB9HMIyIdXFgsRbo2QHfs=
Received: by 10.141.33.21 with SMTP id l21mr9732793rvj.140.1202627023465;
        Sat, 09 Feb 2008 23:03:43 -0800 (PST)
Received: by 10.141.71.12 with HTTP; Sat, 9 Feb 2008 23:03:43 -0800 (PST)
Message-ID: <171dbfa60802092303p45112fe1l67925103d15158d7@mail.gmail.com>
Date: Sun, 10 Feb 2008 12:33:43 +0530
From: "saikrishna venkata pendyala" <pvsaikrishna@gmail.com>
To: java-user@lucene.apache.org
Subject: problem with Whitespace analyzer
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_20969_7262664.1202627023466"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_20969_7262664.1202627023466
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi,

I am facing a small problem, some one please help me,

I am using Whitespace analyzer, while both indexing and searching the files.

While indexing the analyzer is recognizing <token>Ajit_(Agarkar)</token>(I
found it using LUKE) as a single token.
But while searching{QueryParser parser = new QueryParser(field, analyzer);},
it is divided into two tokens <token>Ajit_</token>,<token>Agarkar</token>.

"""
Enter query:
Ajit_(Agarkar)
Searching for: Ajit_ Agarkar
0 total matching documents

"""


--Saikrishna.

------=_Part_20969_7262664.1202627023466--

From java-user-return-32486-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Feb 10 09:57:13 2008
Return-Path: <java-user-return-32486-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 74071 invoked from network); 10 Feb 2008 09:57:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Feb 2008 09:57:13 -0000
Received: (qmail 77720 invoked by uid 500); 10 Feb 2008 09:57:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77689 invoked by uid 500); 10 Feb 2008 09:57:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77678 invoked by uid 99); 10 Feb 2008 09:57:00 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 10 Feb 2008 01:57:00 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of cdoronc@gmail.com designates 72.14.220.157 as permitted sender)
Received: from [72.14.220.157] (HELO fg-out-1718.google.com) (72.14.220.157)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 10 Feb 2008 09:56:30 +0000
Received: by fg-out-1718.google.com with SMTP id d23so4155479fga.27
        for <java-user@lucene.apache.org>; Sun, 10 Feb 2008 01:56:32 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=uZZoVqmQr/UvvMsodVq53mfU+OZ5xlLv+/JyuyCgdaA=;
        b=qDH7TdY7flYuIaKMXOWSVsU9I9m613pCuBTH9Rk/Xy+jv71wJchuF8GHd/wRiXIEQoVFoOfXMEehMla8YGrgLxH9FtYT5AszzQ+A+z1Ap5UCSO4FfqLjXrXqeFJ1qDyv0RccGDzVGeelJpq4DaVFBZ4EwuoZAmtcscHCoci9pFE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=tosmxhSE13Cn1+t+twswQWxDVy3NA3ngt7AO4kdhdsZ1qsgV6SATk1jnXbW2TdhWm/NdV1gSAzGXsxRtgCjeksnqALaWqVkdTvde4XwbmBPyLc5tq+EyQUpplOIeBxe6yO/WxetOPsVhVZLRtvxBIZ7ayTjUKDeJoZ99hdFp3jE=
Received: by 10.86.73.17 with SMTP id v17mr13815320fga.67.1202637391922;
        Sun, 10 Feb 2008 01:56:31 -0800 (PST)
Received: by 10.86.87.18 with HTTP; Sun, 10 Feb 2008 01:56:31 -0800 (PST)
Message-ID: <e05f0fd10802100156h2b850441xa0808fbd6bc9c8f3@mail.gmail.com>
Date: Sun, 10 Feb 2008 11:56:31 +0200
From: "Doron Cohen" <cdoronc@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: recall/precision with lucene
In-Reply-To: <962871.76974.qm@web34303.mail.mud.yahoo.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_11773_29962357.1202637391925"
References: <962871.76974.qm@web34303.mail.mud.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_11773_29962357.1202637391925
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Take a look at the quality package under contrib/benchmark.

Regards,
Doron

On Sat, Feb 9, 2008 at 2:59 AM, Panos Konstantinidis <girionis@yahoo.com>
wrote:

> Hello I am a new lucene user. I am trying to calculate the
> recall/precision of
> a query and I was wondering if lucene provides an easy way to do it.
>
> Currently I have a number of documents that match a given query. Then I am
> doing a search and I am getting back all the Hits. I then divide the
> number of
> documents that came back from lucene (the Hits size) with the number of
> documents that should have got. This is how I calculate the recall.
>
> For precision I just get the hits.score() of each relevant document. I am
> not
> sure if I am on the right track or if there is an easier/better way to do
> it. I
> would appreciate any insigith into this.
>
> Regards
>
> Panos
>

------=_Part_11773_29962357.1202637391925--

From java-user-return-32487-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Feb 10 10:00:38 2008
Return-Path: <java-user-return-32487-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 74631 invoked from network); 10 Feb 2008 10:00:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Feb 2008 10:00:38 -0000
Received: (qmail 79841 invoked by uid 500); 10 Feb 2008 10:00:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79803 invoked by uid 500); 10 Feb 2008 10:00:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79792 invoked by uid 99); 10 Feb 2008 10:00:25 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 10 Feb 2008 02:00:25 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of cdoronc@gmail.com designates 72.14.220.152 as permitted sender)
Received: from [72.14.220.152] (HELO fg-out-1718.google.com) (72.14.220.152)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 10 Feb 2008 09:59:55 +0000
Received: by fg-out-1718.google.com with SMTP id d23so4156231fga.27
        for <java-user@lucene.apache.org>; Sun, 10 Feb 2008 02:00:02 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=Gx8pHN+v7iMff/offgttxDMnGtaWLVmW+XR1aT6DgJ4=;
        b=aCQoJWGRzNeCKVqlMGyuCkNhpdaCSOoe2ATdkSK+6cbNwO3wrGvWcqrRws/KMFMtLjIR97c0TO85N+JdYXBgpwdAzS3VzaFJf0hIa7OreC+GObnLcAUJIsYc5u5HEWQsujOsX/Tmjh3/aibrmZ59l/AEQ39LSgK+jJhC12y2qO4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=UXzQQKw5nXk9zsLVvjvBBwe/d6wj3979r7j/lv4z7uWEUyJIpgwfXS6oLXeuIVgIaGsaEI+dL3XximRJ98yMXqzSs66V8j5b+mr3nlpsyyxXlbf2b6gjGrKSKQqTqfIIgeObqTetHe09OL1V6CMkj2Ar0I4GgfguW/BEUALV9FQ=
Received: by 10.86.31.18 with SMTP id e18mr13841279fge.35.1202637602174;
        Sun, 10 Feb 2008 02:00:02 -0800 (PST)
Received: by 10.86.87.18 with HTTP; Sun, 10 Feb 2008 02:00:02 -0800 (PST)
Message-ID: <e05f0fd10802100200x3dbc9bc1yf24848530fd689c5@mail.gmail.com>
Date: Sun, 10 Feb 2008 12:00:02 +0200
From: "Doron Cohen" <cdoronc@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: problem with Whitespace analyzer
In-Reply-To: <171dbfa60802092303p45112fe1l67925103d15158d7@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_11780_25227434.1202637602150"
References: <171dbfa60802092303p45112fe1l67925103d15158d7@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_11780_25227434.1202637602150
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Should be the parenthesis which are part of the query syntax
Try escaping - \(   \)
Also see
http://lucene.apache.org/java/2_3_0/queryparsersyntax.html#Escaping%20Special%20Characters

Doron

On Sun, Feb 10, 2008 at 9:03 AM, saikrishna venkata pendyala <
pvsaikrishna@gmail.com> wrote:

> Hi,
>
> I am facing a small problem, some one please help me,
>
> I am using Whitespace analyzer, while both indexing and searching the
> files.
>
> While indexing the analyzer is recognizing <token>Ajit_(Agarkar)</token>(I
> found it using LUKE) as a single token.
> But while searching{QueryParser parser = new QueryParser(field,
> analyzer);},
> it is divided into two tokens <token>Ajit_</token>,<token>Agarkar</token>.
>
> """
> Enter query:
> Ajit_(Agarkar)
> Searching for: Ajit_ Agarkar
> 0 total matching documents
>
> """
>
>
> --Saikrishna.
>

------=_Part_11780_25227434.1202637602150--

From java-user-return-32488-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Feb 10 10:41:48 2008
Return-Path: <java-user-return-32488-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89809 invoked from network); 10 Feb 2008 10:41:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Feb 2008 10:41:47 -0000
Received: (qmail 6862 invoked by uid 500); 10 Feb 2008 10:41:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6824 invoked by uid 500); 10 Feb 2008 10:41:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6813 invoked by uid 99); 10 Feb 2008 10:41:33 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 10 Feb 2008 02:41:33 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of katya.volkova@gmail.com designates 66.249.92.169 as permitted sender)
Received: from [66.249.92.169] (HELO ug-out-1314.google.com) (66.249.92.169)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 10 Feb 2008 10:41:02 +0000
Received: by ug-out-1314.google.com with SMTP id u40so131276ugc.29
        for <java-user@lucene.apache.org>; Sun, 10 Feb 2008 02:41:08 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:date:from:to:subject:message-id:organization:x-mailer:mime-version:content-type:content-transfer-encoding;
        bh=AI+IxANP/6FY6zm//gorG5mmcedvlP22SXR5E3fe0kw=;
        b=qwDOlApWAnDL0omyh/z1bCvRa4vc4Qxnlh0RpG0e/fFnzzur6waDBewQ9jIaFPJeX59pbeqZV0pnVlhFANIqaXoqweo+35re2IjC2WKAXgwWt7e4iwwEYOEJ5SrKkEhtXV5X58AZFp9nM1uwpb7+LLrx/IztJFzDa9G9Hx5GgXY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=date:from:to:subject:message-id:organization:x-mailer:mime-version:content-type:content-transfer-encoding;
        b=WGZOKe311GnslHCwwc+UT5rQphpyX/f3KiZt3ZNhuhNzpB267Cx998ObbyqFIUNLkUCkaTJsBqv0dRDz0a4SOiEDNXD2OxAR9JO+xv+X3AphGUTgIMdRJUbd0fogfevRwpTFfZoMle5y5jzOOD/MgnqxOmP2V5cMAvuByzaB9kk=
Received: by 10.67.19.17 with SMTP id w17mr7720037ugi.33.1202640068922;
        Sun, 10 Feb 2008 02:41:08 -0800 (PST)
Received: from lynxie-laptop ( [88.66.238.60])
        by mx.google.com with ESMTPS id e23sm4127291ugd.56.2008.02.10.02.41.06
        (version=TLSv1/SSLv3 cipher=OTHER);
        Sun, 10 Feb 2008 02:41:06 -0800 (PST)
Date: Sun, 10 Feb 2008 11:41:04 +0100
From: Katya <katya.volkova@gmail.com>
To: java-user@lucene.apache.org
Subject: Offsets-highlight newbie question
Message-ID: <20080210114104.01e777d3@lynxie-laptop>
Organization: World
X-Mailer: Sylpheed-Claws 2.6.0 (GTK+ 2.10.11; i486-pc-linux-gnu)
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Dear All,

I'm relatively new to Java and especially new to Lucene. I study Computational
Linguistics and this term we are required to make projects using Lucene. 

My choice was to write a user-friendly application, which could allow user to
crate collections of text files and then search through them. 

Lucene works great! I create index, analyzer, send query, get hits...
The problem is that one of the text of the collection is always displayed in a
JTextArea, and I want to be able to highlight, mark out in color, the words
that match the query. 

Now, there is the Highlighter in Java, you need to give it offsets to highlight
a string, and I would be glad to do so if I could get the offsets!

I will give snippets of code here:
//read the index, store the terms

	try {
        	inread = IndexReader.open(pathToIndex);
        	terms = inread.terms();
        	
        } catch (IOException e) {
        	System.out.println(e.getMessage() + " IndexReader failed"); }

//then - get positions for a term

	try {
    		TermPositions pos =
inread.termPositions(aTerm));

    		while (pos.next()){
    			for (int i=0; i<pos.freq(); i++){
				//add position to a list
	    		}
    	} catch (IOException ex) {
    		System.out.println(ex.getMessage()); } 

	hilit.removeAllHighlights();
        
//and later

	try {
		//get text from the JTextArea 
        	String curText = text.getText();

		//start scanning it - okay, I guess there must be another way, 
		// but this is the only i could think of
        	Scanner in = new Scanner(curText);
        	int counter = 0;
		int point = 0;
		//yes, the while-loop looks ugly
       		while(in.hasNext() && counter!=curText.length()){
       			for (int i=0; i<positions.size();i++){
       				String word = in.next();
       				if (counter == positions.get(i)){
					hilit.addHighlight(curText.indexOf(word,
point), curText.indexOf(word, point)+wordlength,painter); 
				point = curText.indexOf(word)+l; }
        		}
        		counter++;
        	}
       	} catch (BadLocationException e) {
       		System.err.println("error"); 
       		e.printStackTrace();
       	}


I had thought it should have worked, but when I give it a text, say, "blah blah
blah a little text", and query for "blah", it gives me some strange numbers, not
0,1,2 or 1,2,3, and even not 0, 5, 11, what it gives me is 1, 5, 14! Where do
these numbers come from? Where can I retrieve "real" pointers into the text,
or find another way to highlight hits?

Please, give me advice, the project is due February, 14th, so I'm really
desperate. 

Best Regards, 
Katya

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32489-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Feb 10 13:10:58 2008
Return-Path: <java-user-return-32489-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 14030 invoked from network); 10 Feb 2008 13:10:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Feb 2008 13:10:57 -0000
Received: (qmail 62100 invoked by uid 500); 10 Feb 2008 13:10:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62053 invoked by uid 500); 10 Feb 2008 13:10:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62042 invoked by uid 99); 10 Feb 2008 13:10:44 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 10 Feb 2008 05:10:44 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=RCVD_IN_BL_SPAMCOP_NET,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of spring@gmx.eu designates 213.165.64.20 as permitted sender)
Received: from [213.165.64.20] (HELO mail.gmx.net) (213.165.64.20)
    by apache.org (qpsmtpd/0.29) with SMTP; Sun, 10 Feb 2008 13:09:59 +0000
Received: (qmail invoked by alias); 10 Feb 2008 13:10:20 -0000
Received: from e178122253.adsl.alicedsl.de (EHLO msrvcn04) [85.178.122.253]
  by mail.gmx.net (mp013) with SMTP; 10 Feb 2008 14:10:20 +0100
X-Authenticated: #2635966
X-Provags-ID: V01U2FsdGVkX19zeiJGy19zyv3AnHIq9Caqoyp4np2+qDUsxP9qcl
	Kd8cmSwGUQJ47Z
From: <spring@gmx.eu>
To: <java-user@lucene.apache.org>
References: <3241C6045C914BC486B1283E6C9D5577@msrvcn04> <CC1A713F-C527-46E6-8F72-926C851D3737@mikemccandless.com> <90CCAC5AF2684E1DA3F6710317E2F421@msrvcn04> <AD343CB0-8F07-46B5-A0BC-0D956F3A65AA@mikemccandless.com>
Subject: RE: IndexWriter: setRAMBufferSizeMB
Date: Sun, 10 Feb 2008 14:10:32 +0100
Message-ID: <E17DBE1721A8407AA4D7D6BB7E064877@msrvcn04>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
Thread-Index: AchqjVWnsGPJ/3e9QHORuM1EkHPwGwBWLUkg
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.3790.4133
In-Reply-To: <AD343CB0-8F07-46B5-A0BC-0D956F3A65AA@mikemccandless.com>
X-Y-GMX-Trusted: 0
X-Virus-Checked: Checked by ClamAV on apache.org

Thank you.
So I will call flush in 2.3 (and may lose data when machine dies) and
commit() in 2.4+ (here a sync() will save the data).

> -----Original Message-----
> From: Michael McCandless [mailto:lucene@mikemccandless.com] 
> Sent: Freitag, 8. Februar 2008 21:01
> To: java-user@lucene.apache.org
> Subject: Re: IndexWriter: setRAMBufferSizeMB
> 
> 
> It's complicated.
> 
> In 2.3, you can use IW.flush to write docs to disk.  But that method  
> will be deprecated in 2.4 and replaced with commit.  Or, you 
> can close.
> 
> If application (jvm) dies or killed, the index will be fine 
> but won't  
> have any un-flushed buffered docs.
> 
> If machine dies (os crashes, power cord pulled) then there is a real  
> risk that the index will become corrupt.  This is because Lucene has  
> never explicitly sync()'d the files to ensure they are on stable  
> storage.  LUCENE-1044 fixes that (adds syncs).
> 
> Mike
> 
> <spring@gmx.eu> wrote:
> 
> > OK, so there is nothing in 2.3 besides IndexWriter.close to ensure  
> > that the
> > docs are written to disk and that the index will survive an  
> > application /
> > machine death?
> >
> >> -----Original Message-----
> >> From: Michael McCandless [mailto:lucene@mikemccandless.com]
> >> Sent: Freitag, 8. Februar 2008 19:34
> >> To: java-user@lucene.apache.org
> >> Subject: Re: IndexWriter: setRAMBufferSizeMB
> >>
> >> Well ... every time the RAM buffer is full, a new segment 
> is flushed
> >> to the Directory, but that is not necessarily a "commit" in that
> >> an IndexReader would see the new segment, nor, that the 
> segment would
> >> survive if the machine suddenly crashed.
> >>
> >> You should't rely on when specifically IndexWriter makes 
> its changes
> >> visible to readers.  The best way to be sure is to close 
> the writer.
> >>
> >> There is work underway now, in this issue:
> >>
> >>    https://issues.apache.org/jira/browse/LUCENE-1044
> >>
> >> that will add an explicit "commit" call, which you would use to 1)
> >> make the changes visible to readers, and 2) sync the index 
> such that
> >> if the machine crashed (after commit returns) then your 
> changes as of
> >> the commit will survive.  But it's not committed yet ... it will  
> >> be in
> >> 2.4.
> >>
> >> One way for a reader to check if a new commit has happened is to
> >> call the isCurrent method.  Maybe that helps?
> >>
> >> Mike
> >>
> >> <spring@gmx.eu> wrote:
> >>
> >>> Hi,
> >>>
> >>> if I understand this property correctly every time the ram buffer
> >>> is full it
> >>> gets automaticaly written to disk. Something like a commit in a
> >>> database.
> >>> Thus if my application dies, all docs in the buffer get 
> lost. Right?
> >>>
> >>> If so, is there any event/callback etc. which informs my
> >>> application that
> >>> such a commit happend?
> >>>
> >>> Thank you.
> >>>
> >>>
> >>>
> >> 
> ---------------------------------------------------------------------
> >>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >>> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>>
> >>
> >>
> >> 
> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >
> >
> > 
> ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32490-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Feb 10 13:16:00 2008
Return-Path: <java-user-return-32490-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 15014 invoked from network); 10 Feb 2008 13:16:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Feb 2008 13:16:00 -0000
Received: (qmail 65816 invoked by uid 500); 10 Feb 2008 13:15:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65790 invoked by uid 500); 10 Feb 2008 13:15:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65779 invoked by uid 99); 10 Feb 2008 13:15:47 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 10 Feb 2008 05:15:47 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.146.182] (HELO wa-out-1112.google.com) (209.85.146.182)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 10 Feb 2008 13:15:16 +0000
Received: by wa-out-1112.google.com with SMTP id j40so1636340wah.11
        for <java-user@lucene.apache.org>; Sun, 10 Feb 2008 05:15:23 -0800 (PST)
Received: by 10.142.158.17 with SMTP id g17mr1962138wfe.106.1202649322450;
        Sun, 10 Feb 2008 05:15:22 -0800 (PST)
Received: from ?10.17.4.4? ( [71.174.108.74])
        by mx.google.com with ESMTPS id 62sm27629457wri.8.2008.02.10.05.15.21
        (version=TLSv1/SSLv3 cipher=OTHER);
        Sun, 10 Feb 2008 05:15:22 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v753)
In-Reply-To: <E17DBE1721A8407AA4D7D6BB7E064877@msrvcn04>
References: <3241C6045C914BC486B1283E6C9D5577@msrvcn04> <CC1A713F-C527-46E6-8F72-926C851D3737@mikemccandless.com> <90CCAC5AF2684E1DA3F6710317E2F421@msrvcn04> <AD343CB0-8F07-46B5-A0BC-0D956F3A65AA@mikemccandless.com> <E17DBE1721A8407AA4D7D6BB7E064877@msrvcn04>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <49E1AD6F-96D3-4735-994B-D73FDCF75240@mikemccandless.com>
Content-Transfer-Encoding: 7bit
From: Michael McCandless <lucene@mikemccandless.com>
Subject: Re: IndexWriter: setRAMBufferSizeMB
Date: Sun, 10 Feb 2008 08:16:06 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.753)
X-Virus-Checked: Checked by ClamAV on apache.org


Exactly!

Mike

<spring@gmx.eu> wrote:

> Thank you.
> So I will call flush in 2.3 (and may lose data when machine dies) and
> commit() in 2.4+ (here a sync() will save the data).
>
>> -----Original Message-----
>> From: Michael McCandless [mailto:lucene@mikemccandless.com]
>> Sent: Freitag, 8. Februar 2008 21:01
>> To: java-user@lucene.apache.org
>> Subject: Re: IndexWriter: setRAMBufferSizeMB
>>
>>
>> It's complicated.
>>
>> In 2.3, you can use IW.flush to write docs to disk.  But that method
>> will be deprecated in 2.4 and replaced with commit.  Or, you
>> can close.
>>
>> If application (jvm) dies or killed, the index will be fine
>> but won't
>> have any un-flushed buffered docs.
>>
>> If machine dies (os crashes, power cord pulled) then there is a real
>> risk that the index will become corrupt.  This is because Lucene has
>> never explicitly sync()'d the files to ensure they are on stable
>> storage.  LUCENE-1044 fixes that (adds syncs).
>>
>> Mike
>>
>> <spring@gmx.eu> wrote:
>>
>>> OK, so there is nothing in 2.3 besides IndexWriter.close to ensure
>>> that the
>>> docs are written to disk and that the index will survive an
>>> application /
>>> machine death?
>>>
>>>> -----Original Message-----
>>>> From: Michael McCandless [mailto:lucene@mikemccandless.com]
>>>> Sent: Freitag, 8. Februar 2008 19:34
>>>> To: java-user@lucene.apache.org
>>>> Subject: Re: IndexWriter: setRAMBufferSizeMB
>>>>
>>>> Well ... every time the RAM buffer is full, a new segment
>> is flushed
>>>> to the Directory, but that is not necessarily a "commit" in that
>>>> an IndexReader would see the new segment, nor, that the
>> segment would
>>>> survive if the machine suddenly crashed.
>>>>
>>>> You should't rely on when specifically IndexWriter makes
>> its changes
>>>> visible to readers.  The best way to be sure is to close
>> the writer.
>>>>
>>>> There is work underway now, in this issue:
>>>>
>>>>    https://issues.apache.org/jira/browse/LUCENE-1044
>>>>
>>>> that will add an explicit "commit" call, which you would use to 1)
>>>> make the changes visible to readers, and 2) sync the index
>> such that
>>>> if the machine crashed (after commit returns) then your
>> changes as of
>>>> the commit will survive.  But it's not committed yet ... it will
>>>> be in
>>>> 2.4.
>>>>
>>>> One way for a reader to check if a new commit has happened is to
>>>> call the isCurrent method.  Maybe that helps?
>>>>
>>>> Mike
>>>>
>>>> <spring@gmx.eu> wrote:
>>>>
>>>>> Hi,
>>>>>
>>>>> if I understand this property correctly every time the ram buffer
>>>>> is full it
>>>>> gets automaticaly written to disk. Something like a commit in a
>>>>> database.
>>>>> Thus if my application dies, all docs in the buffer get
>> lost. Right?
>>>>>
>>>>> If so, is there any event/callback etc. which informs my
>>>>> application that
>>>>> such a commit happend?
>>>>>
>>>>> Thank you.
>>>>>
>>>>>
>>>>>
>>>>
>> ---------------------------------------------------------------------
>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>
>>>>
>>>>
>>>>
>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>
>>>
>>>
>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32491-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Feb 10 15:49:27 2008
Return-Path: <java-user-return-32491-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 6883 invoked from network); 10 Feb 2008 15:49:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Feb 2008 15:49:27 -0000
Received: (qmail 34772 invoked by uid 500); 10 Feb 2008 15:49:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34744 invoked by uid 500); 10 Feb 2008 15:49:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34726 invoked by uid 99); 10 Feb 2008 15:49:14 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 10 Feb 2008 07:49:14 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 10 Feb 2008 15:48:43 +0000
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 14A4730EFC18; Sun, 10 Feb 2008 08:48:50 -0700 (MST)
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on javelina
X-Spam-Level: 
Received: from [10.0.1.2] (va-71-53-209-10.dyn.embarqhsd.net [71.53.209.10])
	by ehatchersolutions.com (Postfix) with ESMTP id 7967C30EFC16
	for <java-user@lucene.apache.org>; Sun, 10 Feb 2008 08:48:47 -0700 (MST)
Mime-Version: 1.0 (Apple Message framework v753)
In-Reply-To: <171dbfa60802092303p45112fe1l67925103d15158d7@mail.gmail.com>
References: <171dbfa60802092303p45112fe1l67925103d15158d7@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <EBC559FA-67E5-4BFE-93AF-B7EAA4791DDB@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: problem with Whitespace analyzer
Date: Sun, 10 Feb 2008 10:47:48 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.753)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-0.7 required=5.0 tests=AWL,BAYES_00,
	RCVD_IN_SORBS_DUL autolearn=no version=3.1.1

QueryParser uses special syntax, which can get in the way, for  
operators and grouping, etc.  Parenthesis are part of that special  
syntax, and need to be backslash escaped for QueryParser to skip  
treating them as grouping operators, for example: Ajit_\(Agarkar\)

	Erik



On Feb 10, 2008, at 2:03 AM, saikrishna venkata pendyala wrote:

> Hi,
>
> I am facing a small problem, some one please help me,
>
> I am using Whitespace analyzer, while both indexing and searching  
> the files.
>
> While indexing the analyzer is recognizing <token>Ajit_(Agarkar)</ 
> token>(I
> found it using LUKE) as a single token.
> But while searching{QueryParser parser = new QueryParser(field,  
> analyzer);},
> it is divided into two tokens <token>Ajit_</token>,<token>Agarkar</ 
> token>.
>
> """
> Enter query:
> Ajit_(Agarkar)
> Searching for: Ajit_ Agarkar
> 0 total matching documents
>
> """
>
>
> --Saikrishna.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32492-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Feb 10 17:07:00 2008
Return-Path: <java-user-return-32492-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19902 invoked from network); 10 Feb 2008 17:06:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Feb 2008 17:06:59 -0000
Received: (qmail 95934 invoked by uid 500); 10 Feb 2008 17:06:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95662 invoked by uid 500); 10 Feb 2008 17:06:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95647 invoked by uid 99); 10 Feb 2008 17:06:46 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 10 Feb 2008 09:06:46 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of cdoronc@gmail.com designates 72.14.220.155 as permitted sender)
Received: from [72.14.220.155] (HELO fg-out-1718.google.com) (72.14.220.155)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 10 Feb 2008 17:06:16 +0000
Received: by fg-out-1718.google.com with SMTP id d23so4246903fga.27
        for <java-user@lucene.apache.org>; Sun, 10 Feb 2008 09:06:22 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=1ckSyuyqHsr/2teq9pVemDbIcXApZk6t4cAXwAdaKMg=;
        b=VSAuIwF5yUOY+TxAoOB6IilvIlb563TGhJJBPsutgetkfKBRsR/gm2PyY+HUTA6bqGAffAFl0D2usJU6gFe6RGOuvpTCtYTZ828C604yGctr3/D7qbVa4k+TQakVk7Usil7PC84wsnHZnqM1cjAOjS3sMnk7wQsLxIcK3PPLU8U=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=eg94ex1f0qqDHSy4+1xBWYM1eeqYQ+ANa/1GeheaneQ62zBAIbMiBNgjG93xyBLs0bfASx1ZQ0TLmXg7YkSlnV5EAE6G7/bgHqy3Gwa/N3sWe62Fc/HlxaFR+UXf13zHpkv3pL460khm8+g/4Y6X2zpHVwt4UsUYGcDWGXfHIwU=
Received: by 10.86.4.2 with SMTP id 2mr3104267fgd.7.1202663182096;
        Sun, 10 Feb 2008 09:06:22 -0800 (PST)
Received: by 10.86.87.18 with HTTP; Sun, 10 Feb 2008 09:06:22 -0800 (PST)
Message-ID: <e05f0fd10802100906n1f5f3041nbb956de21c850b70@mail.gmail.com>
Date: Sun, 10 Feb 2008 19:06:22 +0200
From: "Doron Cohen" <cdoronc@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Extracting terms from a query splitting a phrase.
In-Reply-To: <2d72c9c50802051353r4c07dd67u5627a0a2566f3aac@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_1599_27550548.1202663182095"
References: <2d72c9c50802051203v72b84bd6ic42a4b968947c6d3@mail.gmail.com>
	 <359a92830802051219n121f843dt7d8bb9b3aa6a1051@mail.gmail.com>
	 <2d72c9c50802051250n499fe7edrf3f0913153ab0593@mail.gmail.com>
	 <2d72c9c50802051353r4c07dd67u5627a0a2566f3aac@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_1599_27550548.1202663182095
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

PhraseQuery.extractTerms() returns the terms making up the phrase,
and so it is not adequate for 'finding' a single term that represents
the phrase query, one that represents the searched entire text.

It seems you are trying to obtain a string that can be matched against
the displayed text for e.g. highlighting, and for that looks for a general
way to get that string from the query.

If so, then PhraseQuery.toString(field) will be quite near. You need
to provide the correct field, or remove it. The quotes need to
be removed as well. (A slop larger than 0 is problematic though.)

But (although I personally never used it), I would first try to use
contrib's highlighter.

Doron

On Feb 5, 2008 11:53 PM, Spencer Tickner <spencertickner@gmail.com> wrote:

> I guess to be move concise I'm looking to get all the terms that were
> searched for so I can highlight them in the original document. After
> looking through the highlighter contrib class I figure I had found my
> solution with query.extractTerms. Works great for searches like:
>
> genera* -> generally, general
> ac? -> act
> General Act -> general, act
>
> and a bunch of others I've tested.. So it's almost perfect except when
> searching for a Phrase. If someone searched for "General Act" I
> wouldn't want General and Act highlighted unless they were right
> beside each other.
>
> Thanks,
>
> Spencer
>
> On Feb 5, 2008 12:50 PM, Spencer Tickner <spencertickner@gmail.com> wrote:
> > Hi Erick,
> >
> > Thanks for your response. I think you're right about the Whitespace
> > anlayzer. I was actually useing the StandardAnalyzer before and tried
> > the Whitespace analyzer to see if the StandardAnalyzer was pulling off
> > the quotes. I guess what I'm trying to mimic is the information found:
> >
> > http://lucene.apache.org/java/docs/queryparsersyntax.html
> >
> > What analyzer would you suggest when parsing a query like:
> >
> > title:"The Right Way" AND text:go
> >
> > Or will I have to pull apart a user entered query using regular
> > expressions, or whatever, and use different Queries (such as the
> > SpanNearQuery) to get the extracted terms?
> >
> > Thanks for any advice.
> >
> > Spencer
> >
> >
> >
> > On Feb 5, 2008 12:19 PM, Erick Erickson <erickerickson@gmail.com> wrote:
> > > I don't think WhitespaceAnalyzer is doing what you think it is. From
> > > the Javadoc...
> > >
> > > public class *WhitespaceTokenizer*extends
> > > CharTokenizer<file:///C:/lucene-2.1.0
> /docs/api/org/apache/lucene/analysis/CharTokenizer.html>
> > >
> > > A WhitespaceTokenizer is a tokenizer that divides text at
> > > whitespace. Adjacent sequences of non-Whitespace characters form
> tokens.
> > >
> > >  ------------------------------
> > >
> > >  CharacterTokenizer
> > > An abstract base class for simple, character-oriented tokenizers.
> > >
> > > So I'm pretty sure that CharacterTokenizer is throwing out all the
> > > non-character data (i.e. your double quotes), then WhitespaceTokenizer
> > > is breaking on the space.
> > >
> > > What is it that you want to have happen? If you're searching for
> > > "General" right next to "Act", you can use a SpanNearQuery with
> > > two SpanTermQuerys and a slop of 0.
> > >
> > > The other thing to be aware of with WhitespaceAnalyzer is that
> > > it doesn't lower case anything, so whether you'll get any hits
> > > in your index depends upon the analyzers you used to index with
> > > and whether case matches exactly.
> > >
> > > Best
> > > Erick
> > >
> > >
> > > On Feb 5, 2008 3:03 PM, Spencer Tickner <spencertickner@gmail.com>
> wrote:
> > >
> > > > Hi List,
> > > >
> > > > Thanks in advance for the help. I'm trying to extract terms from a
> > > > query. From the reading I've done a phrase such as "General Act" is
> > > > considered a term.
> > > > http://lucene.apache.org/java/docs/queryparsersyntax.html#Terms .
> > > > However when I'm doing testing to get the extractTerms of my query
> it
> > > > splits this into General and Act. I'm wondering if I'm missing or
> not
> > > > understanding something.
> > > >
> > > > My test Java code is:
> > > >
> > > >        private String FIELD_NAME = "rr_root";
> > > >        private Query query;
> > > >        private Hits hits = null;
> > > >
> > > >        public void testSearch() throws Exception
> > > >        {
> > > >                doSearching("\"General Act\"");
> > > >                HashSet terms = new HashSet();
> > > >                query.extractTerms(terms);
> > > >                int i = 0;
> > > >                for (Iterator iter = terms.iterator(); iter.hasNext
> ();)
> > > >                {
> > > >                        i++;
> > > >                        Term term = (Term)iter.next();
> > > >                        System.out.println(i + " " + "term-" +
> term.text()
> > > > + " field-" +
> > > > term.field());
> > > >                }
> > > >         }
> > > >
> > > >        public void doSearching(String queryString) throws Exception
> > > >        {
> > > >                QueryParser parser=new QueryParser(FIELD_NAME, new
> > > > WhitespaceAnalyzer());
> > > >                query = parser.parse(queryString);
> > > >                doSearching(query);
> > > >        }
> > > >        public void doSearching(Query unReWrittenQuery) throws
> Exception
> > > >        {
> > > >                searcher = aspect.getSearcher(); // searcher comming
> from a
> > > > cahed class
> > > >                query=unReWrittenQuery.rewrite(aspect.getReader());
> //
> > > > reader
> > > > comming from a cached class
> > > >                System.out.println("Searching for: " + query.toString
> > > > (FIELD_NAME));
> > > >                hits = searcher.search(query);
> > > >        }
> > > >
> > > > The current output is:
> > > >
> > > > Searching for: "General Act"
> > > > 1 term-General field-rr_root
> > > > 2 term-Act field-rr_root
> > > >
> > > > The output I expect is:
> > > >
> > > > Searching for: "General Act"
> > > > 1 term-General Act field-rr_root
> > > >
> > > > Thanks for any help.
> > > >
> > > > Spencer
> > > >
> > > >
> ---------------------------------------------------------------------
> > > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > > >
> > > >
> > >
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_1599_27550548.1202663182095--

From java-user-return-32493-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Feb 10 17:56:17 2008
Return-Path: <java-user-return-32493-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26565 invoked from network); 10 Feb 2008 17:56:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Feb 2008 17:56:17 -0000
Received: (qmail 27535 invoked by uid 500); 10 Feb 2008 17:56:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27501 invoked by uid 500); 10 Feb 2008 17:56:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27490 invoked by uid 99); 10 Feb 2008 17:56:03 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 10 Feb 2008 09:56:03 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of rsivak@istandfor.com designates 72.32.36.243 as permitted sender)
Received: from [72.32.36.243] (HELO mx0.istandfor.com) (72.32.36.243)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 10 Feb 2008 17:55:18 +0000
Received: from [192.168.0.103] (ool-18b89ba7.dyn.optonline.net [24.184.155.167])
	(authenticated bits=0)
	by mail.istandfor.com (8.12.11.20060308/8.12.11) with ESMTP id m1AHtZo6014651
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <java-user@lucene.apache.org>; Sun, 10 Feb 2008 11:55:38 -0600
Message-ID: <47AF3A96.2030704@istandfor.com>
Date: Sun, 10 Feb 2008 12:55:34 -0500
From: Ruslan Sivak <rsivak@istandfor.com>
User-Agent: Thunderbird 2.0.0.9 (Windows/20071031)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Distributed Indexes
References: <47AB66AD.2020009@istandfor.com>	 <3056F9B6-ADCE-4FA1-B3FF-DA782E8A96D8@mikemccandless.com>	 <47AB7DAD.9010109@istandfor.com> <359a92830802071540m38075cd7l9c628dc1d565aac2@mail.gmail.com> <47AC7E2F.3010405@istandfor.com>
In-Reply-To: <47AC7E2F.3010405@istandfor.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

So nobody's run into anything like this before?  The need to share the 
index between many copies of the app possibly running on multiple servers?

Russ

Ruslan Sivak wrote:
> The app does other things then search the index.  I'm basically using 
> ColdFusion for the website and have four instances running on two 
> servers for load balancing.  Each app does the searches, and the 
> search times are small, the index is small, but it takes a long time 
> to fully create the index (several minutes), and I would like the 
> index to always be up to date (which is why i replicate the changes).
> I basically cache the index for several minutes in a RamDirectory, 
> which works quite well for performance.  If I could store the index in 
> a SQL Table or something, I can have a single place where the index 
> lives and atomic updates.
> Is there a SQL Backend for the index, or should I just take the 
> RamDirectory, serialize it and store it as a BLOB?
>
> Russ
>
> Erick Erickson wrote:
>> With an index that small, I wonder why you bother with so many copies?
>> What kind of load are you hitting it with and how complex are the 
>> queries?
>>
>> Because unless you have *very* high query rate, I'd look at why my 
>> queries
>> were
>> taking so long before complexifying things this way.
>>
>> Best
>> Erick
>>
>> On Feb 7, 2008 4:52 PM, Ruslan Sivak <rsivak@istandfor.com> wrote:
>>
>>  
>>> My index is only 4mb.  Is there a SQL backend for Lucene?
>>>
>>> Russ
>>>
>>> Michael McCandless wrote:
>>>    
>>>> If you're able to tell Windows FRS which specific files to copy, then
>>>> SnapshotDeletionPolicy (in 2.3) should work for this.
>>>>
>>>> It basically protects a consistent snapshot of your index, ensuring
>>>> those files will not be deleted, while not blocking further updates to
>>>> the index.
>>>>
>>>> Mike
>>>>
>>>> Ruslan Sivak wrote:
>>>>
>>>>      
>>>>> I'm wondering if this is a problem that lucene users have already
>>>>> tackled.  I have four copies of the application using a lucene
>>>>> index.  They are located on two physical servers with two copies on
>>>>> each server accessing two copies of the lucene index.  I use Windows
>>>>> FRS (File Replication Service) to replicate the index between the two
>>>>> servers.
>>>>> Things work well most of the time, but sometimes, I believe under
>>>>> load, the index doesn't get a chance to propagate before another
>>>>> write takes place and it gets corrupted.
>>>>> What would you recommend I use to keep the index in sync between the
>>>>> four copies of the app?
>>>>>
>>>>> Russ
>>>>>
>>>>> ---------------------------------------------------------------------
>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>
>>>>>         
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>       
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>>     
>>
>>   
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32494-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Feb 10 20:14:37 2008
Return-Path: <java-user-return-32494-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63745 invoked from network); 10 Feb 2008 20:14:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Feb 2008 20:14:37 -0000
Received: (qmail 50153 invoked by uid 500); 10 Feb 2008 20:14:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50118 invoked by uid 500); 10 Feb 2008 20:14:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50107 invoked by uid 99); 10 Feb 2008 20:14:24 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 10 Feb 2008 12:14:24 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: 194.109.24.33 is neither permitted nor denied by domain of karl.wettin@gmail.com)
Received: from [194.109.24.33] (HELO smtp-vbr13.xs4all.nl) (194.109.24.33)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 10 Feb 2008 20:13:40 +0000
Received: from kodapan.lan (memnon.xs4all.nl [82.93.70.124])
	by smtp-vbr13.xs4all.nl (8.13.8/8.13.8) with ESMTP id m1AKE1M4029229
	for <java-user@lucene.apache.org>; Sun, 10 Feb 2008 21:14:01 +0100 (CET)
	(envelope-from karl.wettin@gmail.com)
Message-Id: <8BFCE94A-E850-40A1-A49C-57D9825482D7@gmail.com>
From: Karl Wettin <karl.wettin@gmail.com>
To: java-user@lucene.apache.org
In-Reply-To: <81E4E4ED-0528-4994-84A0-7CFE03C1CCC3@theronge.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v915)
Subject: Re: Faceting with payloads
Date: Sun, 10 Feb 2008 21:14:00 +0100
References: <46CBB02C-726E-470B-BE30-FCB5BD2EAA21@theronge.com> <198EF845-819A-48EF-ADE2-DEA45CBF9916@gmail.com> <81E4E4ED-0528-4994-84A0-7CFE03C1CCC3@theronge.com>
X-Mailer: Apple Mail (2.915)
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org


9 feb 2008 kl. 00.53 skrev Matt Ronge:

>
> On Feb 8, 2008, at 11:17 AM, Karl Wettin wrote:
>
>>
>> 6 feb 2008 kl. 23.10 skrev Matt Ronge:
>>
>>> I may index the token "house" maybe found in different places with  
>>> different types. If the user query contains house, I want to  
>>> report the number of instances of the token house of type A, type  
>>> B and so on.
>>>
>>> Should I be using payloads for this? If so, I'd like to be able to  
>>> count up all the instances of for each type. Then I can show the  
>>> results, along with TypeA (100 hits), TypeB (1000 hits) so on.
>>
>> Pehaps, what do you do with these numbers you extract?
>
> I would like to display this to the user along with the search  
> results. So then can see that there are 100 hits for TypeA, and then  
> can specify to get results just of TypeA.

100 hits, does that explicitly mean 100 documents or could it be 4  
documents with 25 payloads each?

> So on top of being able to count hits based on the payload, I'll  
> need to run a query that looks at the payloads.


It is "not possible" to implement a query that search for payloads.

Are you aware of how facets usually are implemented with Lucene? There  
is a lot about it in the mail archives and Solr does it out of the box.

You probably want a second field indexed with your type  
classifications, and perhaps one field per type containing something  
like size for sort/search/store.



    karl

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32495-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 11 02:04:38 2008
Return-Path: <java-user-return-32495-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51771 invoked from network); 11 Feb 2008 02:04:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Feb 2008 02:04:38 -0000
Received: (qmail 41059 invoked by uid 500); 11 Feb 2008 02:04:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41031 invoked by uid 500); 11 Feb 2008 02:04:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41020 invoked by uid 99); 11 Feb 2008 02:04:25 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 10 Feb 2008 18:04:25 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of cedric.ho@gmail.com designates 209.85.146.182 as permitted sender)
Received: from [209.85.146.182] (HELO wa-out-1112.google.com) (209.85.146.182)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Feb 2008 02:03:55 +0000
Received: by wa-out-1112.google.com with SMTP id j40so1970475wah.11
        for <java-user@lucene.apache.org>; Sun, 10 Feb 2008 18:04:02 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        bh=/l1T4jUgqFGiI0C/ZO0nCaG+YOwnJk/oNv55oFtV8H0=;
        b=idw3VEWV6qe9LjcVeHZj3ts4zvgShy3BWGi1Vys37VLbmfuEPzsqMKB6IefdBcT8MfW4XzLBIjLIMfIYe+z/0nBjrkJ4JWQHq1HAN4KOhu1gwdKMiCAVG4VNjR+QjbpSR6kml76n2Yfe8c1SdBCOXPij7GreWebYMPlAVXbxQMI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=V5pcmWK4g6K2yAJMZCbpplRI9eH5yHlWeNIV6HNNUXU0AtxLR53jN9Vb0GF5PT41udwu/4dwqF1raH6SFT+umNmtHkxxAbHJUHrHKGxA10BjAtMF273LcBsZ8LDXxaU6ErXz5HQ9UgX4VAjt3ALkBWqDnI0ip84jgomuHTZKuq0=
Received: by 10.115.93.16 with SMTP id v16mr9110520wal.126.1202695442858;
        Sun, 10 Feb 2008 18:04:02 -0800 (PST)
Received: by 10.114.156.2 with HTTP; Sun, 10 Feb 2008 18:04:02 -0800 (PST)
Message-ID: <839ba01c0802101804p10e7f89fv9e19ca662907b070@mail.gmail.com>
Date: Mon, 11 Feb 2008 10:04:02 +0800
From: "Cedric Ho" <cedric.ho@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Distributed Indexes
In-Reply-To: <47AC7E2F.3010405@istandfor.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <47AB66AD.2020009@istandfor.com>
	 <3056F9B6-ADCE-4FA1-B3FF-DA782E8A96D8@mikemccandless.com>
	 <47AB7DAD.9010109@istandfor.com>
	 <359a92830802071540m38075cd7l9c628dc1d565aac2@mail.gmail.com>
	 <47AC7E2F.3010405@istandfor.com>
X-Virus-Checked: Checked by ClamAV on apache.org

On Feb 9, 2008 12:07 AM, Ruslan Sivak <rsivak@istandfor.com> wrote:
> The app does other things then search the index.  I'm basically using
> ColdFusion for the website and have four instances running on two
> servers for load balancing.  Each app does the searches, and the search
> times are small, the index is small, but it takes a long time to fully
> create the index (several minutes), and I would like the index to always
> be up to date (which is why i replicate the changes).
>
> I basically cache the index for several minutes in a RamDirectory, which
> works quite well for performance.  If I could store the index in a SQL
> Table or something, I can have a single place where the index lives and
> atomic updates.
>
> Is there a SQL Backend for the index, or should I just take the
> RamDirectory, serialize it and store it as a BLOB?

Can't you just store the index on a shared network file system? so all
the copies of your app can access it?
And load the index into a RamDirectory when need to do searching on it ?


Cedric

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32496-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 11 02:19:22 2008
Return-Path: <java-user-return-32496-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53457 invoked from network); 11 Feb 2008 02:19:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Feb 2008 02:19:22 -0000
Received: (qmail 46435 invoked by uid 500); 11 Feb 2008 02:19:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46402 invoked by uid 500); 11 Feb 2008 02:19:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46391 invoked by uid 99); 11 Feb 2008 02:19:10 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 10 Feb 2008 18:19:09 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of cedric.ho@gmail.com designates 209.85.146.178 as permitted sender)
Received: from [209.85.146.178] (HELO wa-out-1112.google.com) (209.85.146.178)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Feb 2008 02:18:39 +0000
Received: by wa-out-1112.google.com with SMTP id j40so1977153wah.11
        for <java-user@lucene.apache.org>; Sun, 10 Feb 2008 18:18:47 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        bh=7co3/CrwCIXH3DW0f/Ur3cSorzawpKsQ3VyFRT2z2bg=;
        b=HqsLBse7wiVbfv04oEugKL6at6K+vuvIO8zt2xTzrKtkxaZGwaJ1gGpUk+H7aIqRxvczQ/0NUWepBFCxzNb/vbXhE+fho7Am1sZkD6ryXZ4MgMnznGrXI10qMjMV8PXeR+/InFi6nJPdCqEgg5/ceZg2elDWCccwDSWsCApMLtc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=BxOZ88XTRVF9przAI5A2qjlDYP4QGZ/vQd5y0+cBjkFz+AXENgyDsx1i7y/PclWCzLahP0abJPLDDPtSM3RBeHAB+g71ACs6u5tDaXc7klEDYRwb377r8EKZtgzqEu8BwWN7iUPcdaRVoDjllSfuik6vFxSnm4l3y/L2oh7MDXI=
Received: by 10.115.111.1 with SMTP id o1mr5207440wam.87.1202696327384;
        Sun, 10 Feb 2008 18:18:47 -0800 (PST)
Received: by 10.114.156.2 with HTTP; Sun, 10 Feb 2008 18:18:47 -0800 (PST)
Message-ID: <839ba01c0802101818u59080c5fpe201763156ecf850@mail.gmail.com>
Date: Mon, 11 Feb 2008 10:18:47 +0800
From: "Cedric Ho" <cedric.ho@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: large term vectors
In-Reply-To: <629CBB07E28C934D8CA87EF193170E4C01D65532@tshuspaphimbx01.ERF.THOMSON.COM>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <AchqaoDVGQq1D+iPROOW9RNy3nMGUA==>
	 <629CBB07E28C934D8CA87EF193170E4C01D65532@tshuspaphimbx01.ERF.THOMSON.COM>
X-Virus-Checked: Checked by ClamAV on apache.org

Is it a single index ? My index is also in the 200G range, but I never
managed to get
a single index of size > 20G and still get acceptable performance (in
both searching and updating).
So I split my indexes into chunks of < 10G

I am curious as to how you manage such a single large index.

Cedric



On Feb 8, 2008 11:51 PM,  <marc.dumontier@thomson.com> wrote:
> Hi,
>
>
>
> I have a large index which is around 275GB. As I search different parts
> of the index, the memory footprint grows with large byte arrays being
> stored. They never seem to get unloaded or GC'ed. Is there any way to
> control this behavior so that I can periodically unload cached
> information?
>
>
>
> The nature of the data being indexed doesn't allow me to reduce the
> number of terms per field, although I might be able to reduce the number
> of overall fields (I have some which aren't currently being searched
> by).
>
>
>
> I've just begun investigating and profiling the problem, so I don't have
> a lot of details at this time. Any support would be extremely welcome.
>
>
>
> Thanks,
>
>
>
> Marc Dumontier
> Manager, Software Development
> Thomson Scientific (Canada)
> 1 Yonge Street, Suite 1801
> Toronto, Ontario M5E 1W7
>
>
>
> Direct +1 416 214 3448
> Mobile +1 416 454 3147
>
>
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32497-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 11 03:15:03 2008
Return-Path: <java-user-return-32497-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63006 invoked from network); 11 Feb 2008 03:15:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Feb 2008 03:15:02 -0000
Received: (qmail 68395 invoked by uid 500); 11 Feb 2008 03:14:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68362 invoked by uid 500); 11 Feb 2008 03:14:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68350 invoked by uid 99); 11 Feb 2008 03:14:50 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 10 Feb 2008 19:14:50 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of acidbriggs@gmail.com designates 209.85.198.190 as permitted sender)
Received: from [209.85.198.190] (HELO rv-out-0910.google.com) (209.85.198.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Feb 2008 03:14:20 +0000
Received: by rv-out-0910.google.com with SMTP id k20so3480008rvb.5
        for <java-user@lucene.apache.org>; Sun, 10 Feb 2008 19:14:28 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        bh=l3D6xQhb8fQaUWhl/GtJkDaKDDFojzJtRMoPrhM29yc=;
        b=k7X0ow+xJHk//siWlpNAV/9oUe9IWOIC/7mSi1eWGjJcZ45FAmhlGFQyyNQnY7n5Q9QxQpLq7rzDMZJpuGfDB5sY2GR9yqr/ZIauKCtfZtRYXmToRjy1tu5sC+WyjV9PnKyB9RX1juPDQX+2eUkkmorXWGqb10d8yg2plhNdE3U=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=lX6PN9SsYulkGXpLzb1IVttPYhu0s0NmpCltzFqN+w/J+rDs+yLgt4bK21FMLosEDWI7w6lR5SBJlpu3Og6BUOCT0IyDKwepiWZTEKiEPYb8MP/9iOsBn/7PmjBX2hjP19M+VWbvBDBhX0EnDF7L+938m7PWnTzglJnkgS/L1yw=
Received: by 10.140.192.9 with SMTP id p9mr10291046rvf.103.1202699668598;
        Sun, 10 Feb 2008 19:14:28 -0800 (PST)
Received: by 10.141.116.14 with HTTP; Sun, 10 Feb 2008 19:14:28 -0800 (PST)
Message-ID: <1c0e93080802101914o3504a531he82eb23c6aaeb980@mail.gmail.com>
Date: Sun, 10 Feb 2008 22:14:28 -0500
From: Briggs <acidbriggs@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: large term vectors
In-Reply-To: <839ba01c0802101818u59080c5fpe201763156ecf850@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <629CBB07E28C934D8CA87EF193170E4C01D65532@tshuspaphimbx01.ERF.THOMSON.COM>
	 <839ba01c0802101818u59080c5fpe201763156ecf850@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

So, I have a question about 'splitting indexes'.  I see people say
this all over, but how have people been handling this.  I'm going to
start a new thread, and there probably was one back in the day, but I
am going to fire it up again.   But, how did you do it?

On Feb 10, 2008 9:18 PM, Cedric Ho <cedric.ho@gmail.com> wrote:
> Is it a single index ? My index is also in the 200G range, but I never
> managed to get
> a single index of size > 20G and still get acceptable performance (in
> both searching and updating).
> So I split my indexes into chunks of < 10G
>
> I am curious as to how you manage such a single large index.
>
> Cedric
>
>
>
>
> On Feb 8, 2008 11:51 PM,  <marc.dumontier@thomson.com> wrote:
> > Hi,
> >
> >
> >
> > I have a large index which is around 275GB. As I search different parts
> > of the index, the memory footprint grows with large byte arrays being
> > stored. They never seem to get unloaded or GC'ed. Is there any way to
> > control this behavior so that I can periodically unload cached
> > information?
> >
> >
> >
> > The nature of the data being indexed doesn't allow me to reduce the
> > number of terms per field, although I might be able to reduce the number
> > of overall fields (I have some which aren't currently being searched
> > by).
> >
> >
> >
> > I've just begun investigating and profiling the problem, so I don't have
> > a lot of details at this time. Any support would be extremely welcome.
> >
> >
> >
> > Thanks,
> >
> >
> >
> > Marc Dumontier
> > Manager, Software Development
> > Thomson Scientific (Canada)
> > 1 Yonge Street, Suite 1801
> > Toronto, Ontario M5E 1W7
> >
> >
> >
> > Direct +1 416 214 3448
> > Mobile +1 416 454 3147
> >
> >
> >
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>



-- 
"Conscious decisions by conscious minds are what make reality real"

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32498-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 11 05:09:22 2008
Return-Path: <java-user-return-32498-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94342 invoked from network); 11 Feb 2008 05:09:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Feb 2008 05:09:22 -0000
Received: (qmail 28430 invoked by uid 500); 11 Feb 2008 05:09:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28394 invoked by uid 500); 11 Feb 2008 05:09:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28383 invoked by uid 99); 11 Feb 2008 05:09:09 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 10 Feb 2008 21:09:09 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of pvsaikrishna@gmail.com designates 209.85.198.191 as permitted sender)
Received: from [209.85.198.191] (HELO rv-out-0910.google.com) (209.85.198.191)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Feb 2008 05:08:39 +0000
Received: by rv-out-0910.google.com with SMTP id k20so3502464rvb.5
        for <java-user@lucene.apache.org>; Sun, 10 Feb 2008 21:08:46 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=fKlXRbUb+OP6zC0XwDFSH7cGvV8BYP7OQX9+9Em4eHk=;
        b=pyiqcWRmf8iyTp2LJWnM0in4do3EKX2BF2BF7STOgVwcFkib1C4I6E3SABfEuZ61C5bWdTAza/1OmpdckKvmruuLoSHNo4uKfkQdhwpYF8aUSGYLwEZgpNMrcWel1LPA8IvHk/EgtGIc9jdl3Gbmt9chlB9EmqPofpQK7bvrA0k=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=N+51zyHTeSuS6F0MGWr6mpH1NrorEcoCph5uApl/sGHEhVva7XrFMIZBVar3u2SebACx83NqmDCpLhqf4b7louk7MWR3EN1cC2FLV11Fx35s/m8RYD42KjXdAy2bY4lkgSBcWrl2hKrOCN2RHyEpFmhrOa+jill2l8RFH3JYFc4=
Received: by 10.140.158.4 with SMTP id g4mr10335868rve.64.1202706526053;
        Sun, 10 Feb 2008 21:08:46 -0800 (PST)
Received: by 10.141.71.12 with HTTP; Sun, 10 Feb 2008 21:08:46 -0800 (PST)
Message-ID: <171dbfa60802102108n10d78aaar4e948f070090d8dd@mail.gmail.com>
Date: Mon, 11 Feb 2008 10:38:46 +0530
From: "saikrishna venkata pendyala" <pvsaikrishna@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: problem with Whitespace analyzer
In-Reply-To: <EBC559FA-67E5-4BFE-93AF-B7EAA4791DDB@ehatchersolutions.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_21607_19073479.1202706526050"
References: <171dbfa60802092303p45112fe1l67925103d15158d7@mail.gmail.com>
	 <EBC559FA-67E5-4BFE-93AF-B7EAA4791DDB@ehatchersolutions.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_21607_19073479.1202706526050
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi,
Thanks a lot  Cohen and  Erik. Yes "\)" works, I tried it even before. But I
was wondering why the Whitespace analyzer is breaking the string at "(".
Now it's clear, thnks once again.

--Saikrishna.

On Feb 10, 2008 9:17 PM, Erik Hatcher <erik@ehatchersolutions.com> wrote:

> QueryParser uses special syntax, which can get in the way, for
> operators and grouping, etc.  Parenthesis are part of that special
> syntax, and need to be backslash escaped for QueryParser to skip
> treating them as grouping operators, for example: Ajit_\(Agarkar\)
>
>        Erik
>
>
>
> On Feb 10, 2008, at 2:03 AM, saikrishna venkata pendyala wrote:
>
> > Hi,
> >
> > I am facing a small problem, some one please help me,
> >
> > I am using Whitespace analyzer, while both indexing and searching
> > the files.
> >
> > While indexing the analyzer is recognizing <token>Ajit_(Agarkar)</
> > token>(I
> > found it using LUKE) as a single token.
> > But while searching{QueryParser parser = new QueryParser(field,
> > analyzer);},
> > it is divided into two tokens <token>Ajit_</token>,<token>Agarkar</
> > token>.
> >
> > """
> > Enter query:
> > Ajit_(Agarkar)
> > Searching for: Ajit_ Agarkar
> > 0 total matching documents
> >
> > """
> >
> >
> > --Saikrishna.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_21607_19073479.1202706526050--

From java-user-return-32499-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 11 06:34:54 2008
Return-Path: <java-user-return-32499-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85732 invoked from network); 11 Feb 2008 06:34:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Feb 2008 06:34:54 -0000
Received: (qmail 75494 invoked by uid 500); 11 Feb 2008 06:34:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75463 invoked by uid 500); 11 Feb 2008 06:34:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75452 invoked by uid 99); 11 Feb 2008 06:34:41 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 10 Feb 2008 22:34:41 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of cedric.ho@gmail.com designates 209.85.146.183 as permitted sender)
Received: from [209.85.146.183] (HELO wa-out-1112.google.com) (209.85.146.183)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Feb 2008 06:34:11 +0000
Received: by wa-out-1112.google.com with SMTP id j40so2094189wah.11
        for <java-user@lucene.apache.org>; Sun, 10 Feb 2008 22:34:19 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        bh=NUyYdDGgwYrOjwEkV6UPaUQs/17b49N39ao/fX/XGSU=;
        b=oAQHx7hYUTXqX1TrUcnQvj55t6fk0bGX92gCiDRbNEEnujQa/XFLPbdCEIiIzUMnh+dVZWuTAyIICkLwF9fiepGCb+vbUZk8w9iN0pqFc5i6B1LsT3aTN/zfx9U/zueGwsf+Tmb/LA8aX/mNiWI/6j24eNcZn6Bt1COggUFhFTY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=cjG6iT07QaV1seHX12pbjPf2t+72x/lIPb1ta0fhWNP5cTAQZSvf7cwozrEFqLgHnFzJZJJw2EDNghoAe4WrLETDtVGRTN+2fyeKJgolm4jMby9Qb8pvKEg3AANY/tk+gB2BCjww3et0KgW02O0fxFulpwPy5cfaa2SJaYpCADM=
Received: by 10.114.154.1 with SMTP id b1mr8849216wae.34.1202711657237;
        Sun, 10 Feb 2008 22:34:17 -0800 (PST)
Received: by 10.114.156.2 with HTTP; Sun, 10 Feb 2008 22:34:17 -0800 (PST)
Message-ID: <839ba01c0802102234o5993ab45j6002c32f5c51d656@mail.gmail.com>
Date: Mon, 11 Feb 2008 14:34:17 +0800
From: "Cedric Ho" <cedric.ho@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: large term vectors
In-Reply-To: <1c0e93080802101914o3504a531he82eb23c6aaeb980@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <629CBB07E28C934D8CA87EF193170E4C01D65532@tshuspaphimbx01.ERF.THOMSON.COM>
	 <839ba01c0802101818u59080c5fpe201763156ecf850@mail.gmail.com>
	 <1c0e93080802101914o3504a531he82eb23c6aaeb980@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

I guess it would be quite different for different apps.

For me, I do index update on a single machine: index each incoming
documents into one chunk according to some rule to ensure even
distribution. Then copy all the updated indexes to some other machines
for searching. Each machine will then reopen the updated index.

For searching you can look at RemoteSearchable + ParallelSearcher. But
if you need redundancy / failover, etc, you will probably need to do
it yourself.

Cedric


On Feb 11, 2008 11:14 AM, Briggs <acidbriggs@gmail.com> wrote:
> So, I have a question about 'splitting indexes'.  I see people say
> this all over, but how have people been handling this.  I'm going to
> start a new thread, and there probably was one back in the day, but I
> am going to fire it up again.   But, how did you do it?
>
>
> On Feb 10, 2008 9:18 PM, Cedric Ho <cedric.ho@gmail.com> wrote:
> > Is it a single index ? My index is also in the 200G range, but I never
> > managed to get
> > a single index of size > 20G and still get acceptable performance (in
> > both searching and updating).
> > So I split my indexes into chunks of < 10G
> >
> > I am curious as to how you manage such a single large index.
> >
> > Cedric
> >
> >
> >
> >
> > On Feb 8, 2008 11:51 PM,  <marc.dumontier@thomson.com> wrote:
> > > Hi,
> > >
> > >
> > >
> > > I have a large index which is around 275GB. As I search different parts
> > > of the index, the memory footprint grows with large byte arrays being
> > > stored. They never seem to get unloaded or GC'ed. Is there any way to
> > > control this behavior so that I can periodically unload cached
> > > information?
> > >
> > >
> > >
> > > The nature of the data being indexed doesn't allow me to reduce the
> > > number of terms per field, although I might be able to reduce the number
> > > of overall fields (I have some which aren't currently being searched
> > > by).
> > >
> > >
> > >
> > > I've just begun investigating and profiling the problem, so I don't have
> > > a lot of details at this time. Any support would be extremely welcome.
> > >
> > >
> > >
> > > Thanks,
> > >
> > >
> > >
> > > Marc Dumontier
> > > Manager, Software Development
> > > Thomson Scientific (Canada)
> > > 1 Yonge Street, Suite 1801
> > > Toronto, Ontario M5E 1W7
> > >
> > >
> > >
> > > Direct +1 416 214 3448
> > > Mobile +1 416 454 3147
> > >
> > >
> > >
> > >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
>
>
> --
> "Conscious decisions by conscious minds are what make reality real"
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32500-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 11 12:46:48 2008
Return-Path: <java-user-return-32500-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1654 invoked from network); 11 Feb 2008 12:46:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Feb 2008 12:46:47 -0000
Received: (qmail 16201 invoked by uid 500); 11 Feb 2008 12:46:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16171 invoked by uid 500); 11 Feb 2008 12:46:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16126 invoked by uid 99); 11 Feb 2008 12:46:33 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Feb 2008 04:46:33 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.83] (HELO spunkymail-a19.g.dreamhost.com) (208.97.132.83)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Feb 2008 12:46:00 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a19.g.dreamhost.com (Postfix) with ESMTP id CB52B11E00
	for <java-user@lucene.apache.org>; Mon, 11 Feb 2008 04:46:09 -0800 (PST)
Message-Id: <AE9F9AF4-58F0-493A-B9E8-D1E99FAD17C1@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <629CBB07E28C934D8CA87EF193170E4C01D65532@tshuspaphimbx01.ERF.THOMSON.COM>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v915)
Subject: Re: large term vectors
Date: Mon, 11 Feb 2008 07:46:07 -0500
References: <629CBB07E28C934D8CA87EF193170E4C01D65532@tshuspaphimbx01.ERF.THOMSON.COM>
X-Mailer: Apple Mail (2.915)
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Marc,

Can you give more info about what your field properties are?  Your  
subject line implies you are storing term vectors, is that the case?

Also, what version of Lucene are you using?

Cheers,
Grant

On Feb 8, 2008, at 10:51 AM, <marc.dumontier@thomson.com> <marc.dumontier@thomson.com 
 > wrote:

> Hi,
>
>
>
> I have a large index which is around 275GB. As I search different  
> parts
> of the index, the memory footprint grows with large byte arrays being
> stored. They never seem to get unloaded or GC'ed. Is there any way to
> control this behavior so that I can periodically unload cached
> information?
>
>
>
> The nature of the data being indexed doesn't allow me to reduce the
> number of terms per field, although I might be able to reduce the  
> number
> of overall fields (I have some which aren't currently being searched
> by).
>
>
>
> I've just begun investigating and profiling the problem, so I don't  
> have
> a lot of details at this time. Any support would be extremely welcome.
>
>
>
> Thanks,
>
>
>
> Marc Dumontier
> Manager, Software Development
> Thomson Scientific (Canada)
> 1 Yonge Street, Suite 1801
> Toronto, Ontario M5E 1W7
>
>
>
> Direct +1 416 214 3448
> Mobile +1 416 454 3147
>
>
>

--------------------------
Grant Ingersoll
http://lucene.grantingersoll.com
http://www.lucenebootcamp.com

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32501-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 11 13:03:01 2008
Return-Path: <java-user-return-32501-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 13245 invoked from network); 11 Feb 2008 13:03:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Feb 2008 13:03:01 -0000
Received: (qmail 54421 invoked by uid 500); 11 Feb 2008 13:02:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54400 invoked by uid 500); 11 Feb 2008 13:02:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54389 invoked by uid 99); 11 Feb 2008 13:02:48 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Feb 2008 05:02:48 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [208.97.132.207] (HELO spunkymail-a13.g.dreamhost.com) (208.97.132.207)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Feb 2008 13:02:00 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a13.g.dreamhost.com (Postfix) with ESMTP id C15DD129B31
	for <java-user@lucene.apache.org>; Mon, 11 Feb 2008 05:02:16 -0800 (PST)
Message-Id: <2861BD03-0953-4044-8FA9-EAE803EF5CF4@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <47AF3A96.2030704@istandfor.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v915)
Subject: Re: Distributed Indexes
Date: Mon, 11 Feb 2008 08:02:17 -0500
References: <47AB66AD.2020009@istandfor.com>	 <3056F9B6-ADCE-4FA1-B3FF-DA782E8A96D8@mikemccandless.com>	 <47AB7DAD.9010109@istandfor.com> <359a92830802071540m38075cd7l9c628dc1d565aac2@mail.gmail.com> <47AC7E2F.3010405@istandfor.com> <47AF3A96.2030704@istandfor.com>
X-Mailer: Apple Mail (2.915)
X-Virus-Checked: Checked by ClamAV on apache.org

Solr has a strategy using rsync that makes it relatively easy to copy  
an index around to other servers.  It uses rsync to just copy the  
diffs, so you could easily mirror this in your application.

There is no SQL backend for Lucene, but at 4mb you could certainly  
serialize it as a blob to a SQL db, but I don't see how that would  
make it faster.

Also, you said it takes a long time to create a 4mb index.  Does this  
mean you are doing something really, really complex during analysis?   
I guess what I am missing, and I think others have hinted at, is the  
big picture isn't quite clear in our minds, because the size of the  
index seems almost trivially small in Lucene terms, so we would think  
that a) It would be really fast to create the index (seconds, not  
minutes) and b) such a small index could be easily held entirely in  
memory and should easily handle a very, very, high query rate given  
reasonable hardware, which it sounds like you have.  The other piece  
that doesn't fit in my mind is it sounds like you have a fairly high  
update rate since you are getting writes before your 4mb index can be  
copied on a local network, right?  This implies that you must also  
have a lot of deletes otherwise your index would be growing  
significantly.

Thus, more details on what you are doing, how you are creating your  
index, how your CF app talks to Lucene, etc. would be good.

-Grant


On Feb 10, 2008, at 12:55 PM, Ruslan Sivak wrote:

> So nobody's run into anything like this before?  The need to share  
> the index between many copies of the app possibly running on  
> multiple servers?
>
> Russ
>
> Ruslan Sivak wrote:
>> The app does other things then search the index.  I'm basically  
>> using ColdFusion for the website and have four instances running on  
>> two servers for load balancing.  Each app does the searches, and  
>> the search times are small, the index is small, but it takes a long  
>> time to fully create the index (several minutes), and I would like  
>> the index to always be up to date (which is why i replicate the  
>> changes).
>> I basically cache the index for several minutes in a RamDirectory,  
>> which works quite well for performance.  If I could store the index  
>> in a SQL Table or something, I can have a single place where the  
>> index lives and atomic updates.
>> Is there a SQL Backend for the index, or should I just take the  
>> RamDirectory, serialize it and store it as a BLOB?
>>
>> Russ
>>
>> Erick Erickson wrote:
>>> With an index that small, I wonder why you bother with so many  
>>> copies?
>>> What kind of load are you hitting it with and how complex are the  
>>> queries?
>>>
>>> Because unless you have *very* high query rate, I'd look at why my  
>>> queries
>>> were
>>> taking so long before complexifying things this way.
>>>
>>> Best
>>> Erick
>>>
>>> On Feb 7, 2008 4:52 PM, Ruslan Sivak <rsivak@istandfor.com> wrote:
>>>
>>>
>>>> My index is only 4mb.  Is there a SQL backend for Lucene?
>>>>
>>>> Russ
>>>>
>>>> Michael McCandless wrote:
>>>>
>>>>> If you're able to tell Windows FRS which specific files to copy,  
>>>>> then
>>>>> SnapshotDeletionPolicy (in 2.3) should work for this.
>>>>>
>>>>> It basically protects a consistent snapshot of your index,  
>>>>> ensuring
>>>>> those files will not be deleted, while not blocking further  
>>>>> updates to
>>>>> the index.
>>>>>
>>>>> Mike
>>>>>
>>>>> Ruslan Sivak wrote:
>>>>>
>>>>>
>>>>>> I'm wondering if this is a problem that lucene users have already
>>>>>> tackled.  I have four copies of the application using a lucene
>>>>>> index.  They are located on two physical servers with two  
>>>>>> copies on
>>>>>> each server accessing two copies of the lucene index.  I use  
>>>>>> Windows
>>>>>> FRS (File Replication Service) to replicate the index between  
>>>>>> the two
>>>>>> servers.
>>>>>> Things work well most of the time, but sometimes, I believe under
>>>>>> load, the index doesn't get a chance to propagate before another
>>>>>> write takes place and it gets corrupted.
>>>>>> What would you recommend I use to keep the index in sync  
>>>>>> between the
>>>>>> four copies of the app?
>>>>>>
>>>>>> Russ
>>>>>>
>>>>>> ---------------------------------------------------------------------
>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>
>>>>>>
>>>>> ---------------------------------------------------------------------
>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>>
>>>
>>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

--------------------------
Grant Ingersoll
http://lucene.grantingersoll.com
http://www.lucenebootcamp.com

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32502-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 11 13:46:53 2008
Return-Path: <java-user-return-32502-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26394 invoked from network); 11 Feb 2008 13:46:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Feb 2008 13:46:53 -0000
Received: (qmail 15927 invoked by uid 500); 11 Feb 2008 13:46:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15901 invoked by uid 500); 11 Feb 2008 13:46:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15889 invoked by uid 99); 11 Feb 2008 13:46:40 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Feb 2008 05:46:40 -0800
X-ASF-Spam-Status: No, hits=-2.0 required=10.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [216.251.50.9] (HELO SFOVWL03.infosys.com) (216.251.50.9)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Feb 2008 13:46:08 +0000
Received: from INDHUBBHS02.ad.infosys.com ([192.168.200.82]) by SFOVWL03.infosys.com with InterScan Message Security Suite; Mon, 11 Feb 2008 05:44:17 -0800
Received: from blrkechub03.ad.infosys.com ([10.66.236.43]) by INDHUBBHS02.ad.infosys.com with Microsoft SMTPSVC(6.0.3790.3959);
	 Mon, 11 Feb 2008 19:16:10 +0530
Received: from BLRKECMBX06.ad.infosys.com ([10.66.236.32]) by
 blrkechub03.ad.infosys.com ([10.66.236.43]) with mapi; Mon, 11 Feb 2008
 19:16:10 +0530
From: Allahbaksh Mohammedali Asadullah <Allahbaksh_Asadullah@infosys.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Mon, 11 Feb 2008 19:16:07 +0530
Subject: Getting Payload from Hits
Thread-Topic: Getting Payload from Hits
Thread-Index: AchstHQQHcsjnxv2RuqI64BFNZBiyQ==
Message-ID: <68959F25CDEBCB4F917D5A253291D73E07CDA66045@BLRKECMBX06.ad.infosys.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: multipart/alternative;
	boundary="_000_68959F25CDEBCB4F917D5A253291D73E07CDA66045BLRKECMBX06ad_"
MIME-Version: 1.0
X-OriginalArrivalTime: 11 Feb 2008 13:46:10.0219 (UTC) FILETIME=[758DA7B0:01C86CB4]
X-Virus-Checked: Checked by ClamAV on apache.org

--_000_68959F25CDEBCB4F917D5A253291D73E07CDA66045BLRKECMBX06ad_
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable


Hi,
I have saved payload in my index. When the user types the query I get HIT=
 document. From HIT document how I can get the value of Payload for=
 particular tree.

For example
                    _analyzer =3D new PayloadAnalyzer();
           _writer =3D new IndexWriter(new File("d:/test1"), _analyzer,=
 true);
           for (int i =3D 0; i < 10; i++) {
             Document d =3D new Document();
             d.add(new Field("f1", "This field has no payloads",=
 Field.Store.NO, Field.Index.TOKENIZED));
             d.add(new Field("f2", "This field has payloads in all docs",=
 Field.Store.YES, Field.Index.TOKENIZED));
             Integer i1 =3D i;
             byte []payLoadData =3D null;
             payLoadData[0] =3D i1.byteValue();
             _analyzer.setPayloadData("f2", payLoadData);
             _writer.addDocument(d);

            }
         writer.optimize();
         // flush
         writer.close();
         String queryString =3D "payloads + doc";
         System.out.println("Reading Payload Data will begin now");

         _parser =3D new QueryParser("f2", new PayloadAnalyzer());
         _searcher =3D new IndexSearcher("d:/test1");
         Query query =3D_parser.parse(queryString);
         Hits hits =3D _searcher.search(query);
         for (int i =3D 0; i < hits.length(); i++) {
             Document doc =3D hits.doc(i);


      Here I want to get the value of payload for the field..
Please let me know how I can get value of payload for a field from Hits
          }
Thanks in Advance
Warm Regards,
Allahbaksh




**************** CAUTION - Disclaimer *****************
This e-mail contains PRIVILEGED AND CONFIDENTIAL INFORMATION intended=
 solely for the use of the addressee(s). If you are not the intended=
 recipient, please notify the sender by e-mail and delete the original=
 message. Further, you are not to copy, disclose, or distribute this e-mail=
 or its contents to any other person and any such actions are unlawful.=
 This e-mail may contain viruses. Infosys has taken every reasonable=
 precaution to minimize this risk, but is not liable for any damage you may=
 sustain as a result of any virus in this e-mail. You should carry out your=
 own virus checks before opening the e-mail or attachment. Infosys reserves=
 the right to monitor and review the content of all messages sent to or=
 from this e-mail address. Messages sent to or from this e-mail address may=
 be stored on the Infosys e-mail system.
***INFOSYS******** End of Disclaimer ********INFOSYS***
--_000_68959F25CDEBCB4F917D5A253291D73E07CDA66045BLRKECMBX06ad_--


From java-user-return-32503-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 11 14:57:17 2008
Return-Path: <java-user-return-32503-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51646 invoked from network); 11 Feb 2008 14:57:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Feb 2008 14:57:17 -0000
Received: (qmail 33071 invoked by uid 500); 11 Feb 2008 14:57:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33003 invoked by uid 500); 11 Feb 2008 14:57:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32992 invoked by uid 99); 11 Feb 2008 14:57:04 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Feb 2008 06:57:04 -0800
X-ASF-Spam-Status: No, hits=-1.0 required=10.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of marc.dumontier@thomson.com designates 163.231.12.68 as permitted sender)
Received: from [163.231.12.68] (HELO mailout-tlr.thomson.com) (163.231.12.68)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Feb 2008 14:56:19 +0000
Received: from mailout-tlr.thomson.com (localhost [127.0.0.1])
	by mailout-tlr.thomson.com (Switch-3.2.2/Switch-3.2.0) with ESMTP id m1BEubq8002268
	for <java-user@lucene.apache.org>; Mon, 11 Feb 2008 14:56:37 GMT
Received: from tlrusmneagfe01.ERF.THOMSON.COM (tlrusmneagfe01.erf.thomson.com [163.231.22.161])
	by mailout-tlr.thomson.com (Switch-3.2.2/Switch-3.2.2) with ESMTP id m1BEqYos028718
	for <java-user@lucene.apache.org>; Mon, 11 Feb 2008 14:56:36 GMT
Received: from tshusmnnadbh01.ERF.THOMSON.COM ([10.236.128.70]) by tlrusmneagfe01.ERF.THOMSON.COM with Microsoft SMTPSVC(6.0.3790.3959);
	 Mon, 11 Feb 2008 08:56:29 -0600
Received: from tshuspaphimbx01.ERF.THOMSON.COM ([10.224.164.128]) by tshusmnnadbh01.ERF.THOMSON.COM with Microsoft SMTPSVC(6.0.3790.3959);
	 Mon, 11 Feb 2008 08:56:29 -0600
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: quoted-printable
Subject: RE: large term vectors
Date: Mon, 11 Feb 2008 09:53:22 -0500
Message-ID: <629CBB07E28C934D8CA87EF193170E4C01D656F4@tshuspaphimbx01.ERF.THOMSON.COM>
In-Reply-To: <839ba01c0802101818u59080c5fpe201763156ecf850@mail.gmail.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: large term vectors
Thread-Index: AchsVImOA17DUismQ7qb7HGlP/UNWAAaMSDg
From: <marc.dumontier@thomson.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 11 Feb 2008 14:56:29.0289 (UTC) FILETIME=[4850A590:01C86CBE]
X-Virus-Checked: Checked by ClamAV on apache.org

No, it's split into about 100 individual indexes. But I'm running my
64-bit JVM with around 10gb max memory in order to avoid running out of
memory after running all my unit tests (I have some other indexes as
well running as part of this application).

Upon further investigation, it seems to have something to do with the
norms
(SegmentReader.norms)

Marc


-----Original Message-----
From: Cedric Ho [mailto:cedric.ho@gmail.com]=20
Sent: Sunday, February 10, 2008 9:19 PM
To: java-user@lucene.apache.org
Subject: Re: large term vectors

Is it a single index ? My index is also in the 200G range, but I never
managed to get
a single index of size > 20G and still get acceptable performance (in
both searching and updating).
So I split my indexes into chunks of < 10G

I am curious as to how you manage such a single large index.

Cedric



On Feb 8, 2008 11:51 PM,  <marc.dumontier@thomson.com> wrote:
> Hi,
>
>
>
> I have a large index which is around 275GB. As I search different
parts
> of the index, the memory footprint grows with large byte arrays being
> stored. They never seem to get unloaded or GC'ed. Is there any way to
> control this behavior so that I can periodically unload cached
> information?
>
>
>
> The nature of the data being indexed doesn't allow me to reduce the
> number of terms per field, although I might be able to reduce the
number
> of overall fields (I have some which aren't currently being searched
> by).
>
>
>
> I've just begun investigating and profiling the problem, so I don't
have
> a lot of details at this time. Any support would be extremely welcome.
>
>
>
> Thanks,
>
>
>
> Marc Dumontier
> Manager, Software Development
> Thomson Scientific (Canada)
> 1 Yonge Street, Suite 1801
> Toronto, Ontario M5E 1W7
>
>
>
> Direct +1 416 214 3448
> Mobile +1 416 454 3147
>
>
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32504-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 11 14:59:49 2008
Return-Path: <java-user-return-32504-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 52623 invoked from network); 11 Feb 2008 14:59:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Feb 2008 14:59:48 -0000
Received: (qmail 39579 invoked by uid 500); 11 Feb 2008 14:59:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39553 invoked by uid 500); 11 Feb 2008 14:59:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39542 invoked by uid 99); 11 Feb 2008 14:59:35 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Feb 2008 06:59:35 -0800
X-ASF-Spam-Status: No, hits=-1.0 required=10.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of marc.dumontier@thomson.com designates 198.80.156.67 as permitted sender)
Received: from [198.80.156.67] (HELO mailout-tf.thomson.com) (198.80.156.67)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Feb 2008 14:59:03 +0000
Received: from mailout-tf.thomson.com (localhost [127.0.0.1])
	by mailout-tf.thomson.com (Switch-3.2.4/Switch-3.2.4) with ESMTP id m1BEx8tP018068
	for <java-user@lucene.apache.org>; Mon, 11 Feb 2008 14:59:08 GMT
Received: from tfusnjpscfe03.ERF.THOMSON.COM (tfusnjpscfe03.tfn.com [10.72.2.9] (may be forged))
	by mailout-tf.thomson.com (Switch-3.2.4/Switch-3.2.4) with ESMTP id m1BEwtZ3017936
	for <java-user@lucene.apache.org>; Mon, 11 Feb 2008 14:59:08 GMT
Received: from tshusmnnadbh02.ERF.THOMSON.COM ([10.236.128.71]) by tfusnjpscfe03.ERF.THOMSON.COM with Microsoft SMTPSVC(6.0.3790.3959);
	 Mon, 11 Feb 2008 09:59:04 -0500
Received: from tshuspaphimbx01.ERF.THOMSON.COM ([10.224.164.128]) by tshusmnnadbh02.ERF.THOMSON.COM with Microsoft SMTPSVC(6.0.3790.3959);
	 Mon, 11 Feb 2008 08:59:03 -0600
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: quoted-printable
Subject: RE: large term vectors
Date: Mon, 11 Feb 2008 09:55:56 -0500
Message-ID: <629CBB07E28C934D8CA87EF193170E4C01D656F6@tshuspaphimbx01.ERF.THOMSON.COM>
In-Reply-To: <AE9F9AF4-58F0-493A-B9E8-D1E99FAD17C1@apache.org>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: large term vectors
Thread-Index: AchsrCxEauAC9wiRRGqTHYpBLuG3WAAEc+yg
From: <marc.dumontier@thomson.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 11 Feb 2008 14:59:03.0765 (UTC) FILETIME=[A463D050:01C86CBE]
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Grant,

Lucene 2.2.0

I'm not actually explicitely storing term vectors. It seems the huge
amount of byte arrays is actually coming from SegmentReader.norms. Maybe
that cache constantly grows as I read somewhere that it's on-demand. I'm
not using any field or document boosting..is there some way to optimize
around this?

Marc


-----Original Message-----
From: Grant Ingersoll [mailto:gsingers@apache.org]=20
Sent: Monday, February 11, 2008 7:46 AM
To: java-user@lucene.apache.org
Subject: Re: large term vectors

Hi Marc,

Can you give more info about what your field properties are?  Your =20
subject line implies you are storing term vectors, is that the case?

Also, what version of Lucene are you using?

Cheers,
Grant

On Feb 8, 2008, at 10:51 AM, <marc.dumontier@thomson.com>
<marc.dumontier@thomson.com=20
 > wrote:

> Hi,
>
>
>
> I have a large index which is around 275GB. As I search different =20
> parts
> of the index, the memory footprint grows with large byte arrays being
> stored. They never seem to get unloaded or GC'ed. Is there any way to
> control this behavior so that I can periodically unload cached
> information?
>
>
>
> The nature of the data being indexed doesn't allow me to reduce the
> number of terms per field, although I might be able to reduce the =20
> number
> of overall fields (I have some which aren't currently being searched
> by).
>
>
>
> I've just begun investigating and profiling the problem, so I don't =20
> have
> a lot of details at this time. Any support would be extremely welcome.
>
>
>
> Thanks,
>
>
>
> Marc Dumontier
> Manager, Software Development
> Thomson Scientific (Canada)
> 1 Yonge Street, Suite 1801
> Toronto, Ontario M5E 1W7
>
>
>
> Direct +1 416 214 3448
> Mobile +1 416 454 3147
>
>
>

--------------------------
Grant Ingersoll
http://lucene.grantingersoll.com
http://www.lucenebootcamp.com

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32505-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 11 15:01:27 2008
Return-Path: <java-user-return-32505-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59350 invoked from network); 11 Feb 2008 15:01:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Feb 2008 15:01:25 -0000
Received: (qmail 43670 invoked by uid 500); 11 Feb 2008 15:01:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43644 invoked by uid 500); 11 Feb 2008 15:01:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43616 invoked by uid 99); 11 Feb 2008 15:01:09 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Feb 2008 07:01:09 -0800
X-ASF-Spam-Status: No, hits=3.7 required=10.0
	tests=DNS_FROM_OPENWHOIS,FORGED_HOTMAIL_RCVD2,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Feb 2008 15:00:24 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1JOa9E-0004hZ-W3
	for java-user@lucene.apache.org; Mon, 11 Feb 2008 07:00:44 -0800
Message-ID: <15412778.post@talk.nabble.com>
Date: Mon, 11 Feb 2008 07:00:44 -0800 (PST)
From: Cesar Ronchese <ronchese@hotmail.com>
To: java-user@lucene.apache.org
Subject: Indexing accented characters, then searching by any form
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Nabble-From: ronchese@hotmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hello, guys.

I've searching the google to make the lucene performs accent-insensitive
searches.

All I could find is about the ISOLatin1AccentFilter class, which as far I
could understand, it just removes the accented chars so I can store it in
its unaccented form.

What I would like to know is, is there a way to store the content in your
original accented format, and make an accent-insensitive query with lucene?
How?

For example:
Indexed word: usu=C3=A1rio
Terms typed by the user, to find the word above: usu=C3=A1rio or usuario or
usu=C3=A3rio, etc.

Thanks in advance.
Cesar
--=20
View this message in context: http://www.nabble.com/Indexing-accented-chara=
cters%2C-then-searching-by-any-form-tp15412778p15412778.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32506-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 11 15:05:42 2008
Return-Path: <java-user-return-32506-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3961 invoked from network); 11 Feb 2008 15:05:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Feb 2008 15:05:41 -0000
Received: (qmail 55507 invoked by uid 500); 11 Feb 2008 15:05:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54947 invoked by uid 500); 11 Feb 2008 15:05:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54936 invoked by uid 99); 11 Feb 2008 15:05:29 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Feb 2008 07:05:29 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: 194.109.24.26 is neither permitted nor denied by domain of karl.wettin@gmail.com)
Received: from [194.109.24.26] (HELO smtp-vbr6.xs4all.nl) (194.109.24.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Feb 2008 15:04:43 +0000
Received: from kodapan.lan (memnon.xs4all.nl [82.93.70.124])
	by smtp-vbr6.xs4all.nl (8.13.8/8.13.8) with ESMTP id m1BF53Jm084379
	for <java-user@lucene.apache.org>; Mon, 11 Feb 2008 16:05:03 +0100 (CET)
	(envelope-from karl.wettin@gmail.com)
Message-Id: <F2B33F6A-AFD9-4787-89C2-EF9BBB54DAA3@gmail.com>
From: Karl Wettin <karl.wettin@gmail.com>
To: java-user@lucene.apache.org
In-Reply-To: <629CBB07E28C934D8CA87EF193170E4C01D656F6@tshuspaphimbx01.ERF.THOMSON.COM>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v915)
Subject: Re: large term vectors
Date: Mon, 11 Feb 2008 16:05:03 +0100
References: <629CBB07E28C934D8CA87EF193170E4C01D656F6@tshuspaphimbx01.ERF.THOMSON.COM>
X-Mailer: Apple Mail (2.915)
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org


http://lucene.apache.org/java/2_3_0/api/org/apache/lucene/document/Field.Index.html#NO_NORMS

?


11 feb 2008 kl. 15.55 skrev <marc.dumontier@thomson.com>:

> Hi Grant,
>
> Lucene 2.2.0
>
> I'm not actually explicitely storing term vectors. It seems the huge
> amount of byte arrays is actually coming from SegmentReader.norms.  
> Maybe
> that cache constantly grows as I read somewhere that it's on-demand.  
> I'm
> not using any field or document boosting..is there some way to  
> optimize
> around this?
>
> Marc
>
>
> -----Original Message-----
> From: Grant Ingersoll [mailto:gsingers@apache.org]
> Sent: Monday, February 11, 2008 7:46 AM
> To: java-user@lucene.apache.org
> Subject: Re: large term vectors
>
> Hi Marc,
>
> Can you give more info about what your field properties are?  Your
> subject line implies you are storing term vectors, is that the case?
>
> Also, what version of Lucene are you using?
>
> Cheers,
> Grant
>
> On Feb 8, 2008, at 10:51 AM, <marc.dumontier@thomson.com>
> <marc.dumontier@thomson.com
>> wrote:
>
>> Hi,
>>
>>
>>
>> I have a large index which is around 275GB. As I search different
>> parts
>> of the index, the memory footprint grows with large byte arrays being
>> stored. They never seem to get unloaded or GC'ed. Is there any way to
>> control this behavior so that I can periodically unload cached
>> information?
>>
>>
>>
>> The nature of the data being indexed doesn't allow me to reduce the
>> number of terms per field, although I might be able to reduce the
>> number
>> of overall fields (I have some which aren't currently being searched
>> by).
>>
>>
>>
>> I've just begun investigating and profiling the problem, so I don't
>> have
>> a lot of details at this time. Any support would be extremely  
>> welcome.
>>
>>
>>
>> Thanks,
>>
>>
>>
>> Marc Dumontier
>> Manager, Software Development
>> Thomson Scientific (Canada)
>> 1 Yonge Street, Suite 1801
>> Toronto, Ontario M5E 1W7
>>
>>
>>
>> Direct +1 416 214 3448
>> Mobile +1 416 454 3147
>>
>>
>>
>
> --------------------------
> Grant Ingersoll
> http://lucene.grantingersoll.com
> http://www.lucenebootcamp.com
>
> Lucene Helpful Hints:
> http://wiki.apache.org/lucene-java/BasicsOfPerformance
> http://wiki.apache.org/lucene-java/LuceneFAQ
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32507-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 11 15:09:24 2008
Return-Path: <java-user-return-32507-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25900 invoked from network); 11 Feb 2008 15:09:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Feb 2008 15:09:23 -0000
Received: (qmail 64225 invoked by uid 500); 11 Feb 2008 15:09:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63645 invoked by uid 500); 11 Feb 2008 15:09:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63634 invoked by uid 99); 11 Feb 2008 15:09:11 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Feb 2008 07:09:11 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: 194.109.24.24 is neither permitted nor denied by domain of karl.wettin@gmail.com)
Received: from [194.109.24.24] (HELO smtp-vbr4.xs4all.nl) (194.109.24.24)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Feb 2008 15:08:40 +0000
Received: from kodapan.lan (memnon.xs4all.nl [82.93.70.124])
	by smtp-vbr4.xs4all.nl (8.13.8/8.13.8) with ESMTP id m1BF8koP064295
	for <java-user@lucene.apache.org>; Mon, 11 Feb 2008 16:08:46 +0100 (CET)
	(envelope-from karl.wettin@gmail.com)
Message-Id: <093AFA7C-B070-44E2-A4B4-63D8073658A4@gmail.com>
From: Karl Wettin <karl.wettin@gmail.com>
To: java-user@lucene.apache.org
In-Reply-To: <15412778.post@talk.nabble.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v915)
Subject: Re: Indexing accented characters, then searching by any form
Date: Mon, 11 Feb 2008 16:08:45 +0100
References: <15412778.post@talk.nabble.com>
X-Mailer: Apple Mail (2.915)
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org


11 feb 2008 kl. 16.00 skrev Cesar Ronchese:

>
> Hello, guys.
>
> I've searching the google to make the lucene performs accent- 
> insensitive
> searches.
>
> All I could find is about the ISOLatin1AccentFilter class, which as  
> far I
> could understand, it just removes the accented chars so I can store  
> it in
> its unaccented form.

What is the problem you have with this? Are they not unique enough?

> What I would like to know is, is there a way to store the content in  
> your
> original accented format, and make an accent-insensitive query with  
> lucene?
> How?

You would have to add a synonym for each permutation of the accented  
term.



    karl

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32508-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 11 15:14:05 2008
Return-Path: <java-user-return-32508-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 27768 invoked from network); 11 Feb 2008 15:14:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Feb 2008 15:14:05 -0000
Received: (qmail 75906 invoked by uid 500); 11 Feb 2008 15:13:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75875 invoked by uid 500); 11 Feb 2008 15:13:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75864 invoked by uid 99); 11 Feb 2008 15:13:52 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Feb 2008 07:13:52 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: 194.109.24.26 is neither permitted nor denied by domain of karl.wettin@gmail.com)
Received: from [194.109.24.26] (HELO smtp-vbr6.xs4all.nl) (194.109.24.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Feb 2008 15:13:08 +0000
Received: from kodapan.lan (memnon.xs4all.nl [82.93.70.124])
	by smtp-vbr6.xs4all.nl (8.13.8/8.13.8) with ESMTP id m1BFDTm8095287
	for <java-user@lucene.apache.org>; Mon, 11 Feb 2008 16:13:30 +0100 (CET)
	(envelope-from karl.wettin@gmail.com)
Message-Id: <AAA63AE5-2F37-4009-BBB9-F528E025C2E7@gmail.com>
From: Karl Wettin <karl.wettin@gmail.com>
To: java-user@lucene.apache.org
In-Reply-To: <093AFA7C-B070-44E2-A4B4-63D8073658A4@gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v915)
Subject: Re: Indexing accented characters, then searching by any form
Date: Mon, 11 Feb 2008 16:13:29 +0100
References: <15412778.post@talk.nabble.com> <093AFA7C-B070-44E2-A4B4-63D8073658A4@gmail.com>
X-Mailer: Apple Mail (2.915)
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org


11 feb 2008 kl. 16.08 skrev Karl Wettin:

>> All I could find is about the ISOLatin1AccentFilter class, which as  
>> far I
>> could understand, it just removes the accented chars so I can store  
>> it in
>> its unaccented form.
>
> What is the problem you have with this? Are they not unique enough?


One more thing,

are you aware of that you are supposed to apply that filter on the  
query too?


   karl

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32509-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 11 15:23:08 2008
Return-Path: <java-user-return-32509-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30183 invoked from network); 11 Feb 2008 15:23:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Feb 2008 15:23:07 -0000
Received: (qmail 92961 invoked by uid 500); 11 Feb 2008 15:22:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92937 invoked by uid 500); 11 Feb 2008 15:22:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92926 invoked by uid 99); 11 Feb 2008 15:22:54 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Feb 2008 07:22:54 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: 194.109.24.31 is neither permitted nor denied by domain of karl.wettin@gmail.com)
Received: from [194.109.24.31] (HELO smtp-vbr11.xs4all.nl) (194.109.24.31)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Feb 2008 15:22:21 +0000
Received: from kodapan.lan (memnon.xs4all.nl [82.93.70.124])
	by smtp-vbr11.xs4all.nl (8.13.8/8.13.8) with ESMTP id m1BFMR85009137
	for <java-user@lucene.apache.org>; Mon, 11 Feb 2008 16:22:27 +0100 (CET)
	(envelope-from karl.wettin@gmail.com)
Message-Id: <65904997-3559-4502-BBB7-8CE512A1E848@gmail.com>
From: Karl Wettin <karl.wettin@gmail.com>
To: java-user@lucene.apache.org
In-Reply-To: <68959F25CDEBCB4F917D5A253291D73E07CDA66045@BLRKECMBX06.ad.infosys.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v915)
Subject: Re: Getting Payload from Hits
Date: Mon, 11 Feb 2008 16:22:27 +0100
References: <68959F25CDEBCB4F917D5A253291D73E07CDA66045@BLRKECMBX06.ad.infosys.com>
X-Mailer: Apple Mail (2.915)
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org


11 feb 2008 kl. 14.46 skrev Allahbaksh Mohammedali Asadullah:

> d.add(new Field("f1", "This field has no payloads", Field.Store.NO,  
> Field.Index.TOKENIZED));
> d.add(new Field("f2", "This field has payloads in all docs",  
> Field.Store.YES, Field.Index.TOKENIZED));

> Document doc = hits.doc(i);
>
> Here I want to get the value of payload for the field..

Are you confusing payloads with stored field values?

You retreive the /stored field value/ like this:

doc.get("f2");

You "can not" retreive /payloads/ from Hits.



    karl

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32510-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 11 15:23:49 2008
Return-Path: <java-user-return-32510-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30396 invoked from network); 11 Feb 2008 15:23:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Feb 2008 15:23:49 -0000
Received: (qmail 96422 invoked by uid 500); 11 Feb 2008 15:23:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96394 invoked by uid 500); 11 Feb 2008 15:23:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96380 invoked by uid 99); 11 Feb 2008 15:23:32 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Feb 2008 07:23:32 -0800
X-ASF-Spam-Status: No, hits=3.2 required=10.0
	tests=HTML_MESSAGE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [66.173.27.67] (HELO mail.nasi.com) (66.173.27.67)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Feb 2008 15:22:48 +0000
To: java-user@lucene.apache.org
Subject: IndexDeletionPolicy
MIME-Version: 1.0
X-Mailer: Lotus Notes Release 6.5.4 March 27, 2005
Message-ID: <OFFF45F71C.B23DBF79-ON862573EC.00545C0D-862573EC.00547F56@nasi.com>
From: Robert.Hastings@ancept.com
Date: Mon, 11 Feb 2008 09:23:08 -0600
X-MIMETrack: Serialize by Router on notes1/NASI(Release 6.5.5FP1|April 11, 2006) at 02/11/2008
 09:23:33,
	Serialize complete at 02/11/2008 09:23:33
Content-Type: multipart/alternative; boundary="=_alternative 00547F53862573EC_="
X-Virus-Checked: Checked by ClamAV on apache.org

--=_alternative 00547F53862573EC_=
Content-Type: text/plain; charset="US-ASCII"

Has anyone contributed an IndexDeletionPolicy that has been tested on an 
NFS system?

Bob Hastings
Ancept Inc.
--=_alternative 00547F53862573EC_=--

From java-user-return-32511-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 11 15:52:16 2008
Return-Path: <java-user-return-32511-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51734 invoked from network); 11 Feb 2008 15:52:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Feb 2008 15:52:16 -0000
Received: (qmail 51395 invoked by uid 500); 11 Feb 2008 15:52:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 51210 invoked by uid 500); 11 Feb 2008 15:52:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 51184 invoked by uid 99); 11 Feb 2008 15:52:03 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Feb 2008 07:52:03 -0800
X-ASF-Spam-Status: No, hits=-4.0 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [216.251.50.9] (HELO SFOVWL03.infosys.com) (216.251.50.9)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Feb 2008 15:51:31 +0000
Received: from INDHUBBHS02.ad.infosys.com ([192.168.200.82]) by SFOVWL03.infosys.com with InterScan Message Security Suite; Mon, 11 Feb 2008 07:49:40 -0800
Received: from blrkechub02.ad.infosys.com ([10.66.236.42]) by INDHUBBHS02.ad.infosys.com with Microsoft SMTPSVC(6.0.3790.3959);
	 Mon, 11 Feb 2008 21:21:35 +0530
Received: from BLRKECMBX06.ad.infosys.com ([10.66.236.32]) by
 blrkechub02.ad.infosys.com ([10.66.236.42]) with mapi; Mon, 11 Feb 2008
 21:21:35 +0530
From: Allahbaksh Mohammedali Asadullah <Allahbaksh_Asadullah@infosys.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Mon, 11 Feb 2008 21:21:33 +0530
Subject: RE: Getting Payload from Hits
Thread-Topic: Getting Payload from Hits
Thread-Index: AchswgO9vXvWpX2CQamVGtqn8ASDNgAA7sCw
Message-ID: <68959F25CDEBCB4F917D5A253291D73E07CDA66088@BLRKECMBX06.ad.infosys.com>
References: <68959F25CDEBCB4F917D5A253291D73E07CDA66045@BLRKECMBX06.ad.infosys.com>
 <65904997-3559-4502-BBB7-8CE512A1E848@gmail.com>
In-Reply-To: <65904997-3559-4502-BBB7-8CE512A1E848@gmail.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0
X-OriginalArrivalTime: 11 Feb 2008 15:51:35.0654 (UTC) FILETIME=[FB0FE860:01C86CC5]
X-Virus-Checked: Checked by ClamAV on apache.org


Hi,
Thanks for the reply. But is there any way that from the search result I=
 can get Payload.

See my requirement is when user search for some field I want to display=
 also additional data which is stored as Payload.

Regards,
Allahbaksh




-----Original Message-----
From: Karl Wettin [mailto:karl.wettin@gmail.com]
Sent: Monday, February 11, 2008 8:52 PM
To: java-user@lucene.apache.org
Subject: Re: Getting Payload from Hits


11 feb 2008 kl. 14.46 skrev Allahbaksh Mohammedali Asadullah:

> d.add(new Field("f1", "This field has no payloads", Field.Store.NO,
> Field.Index.TOKENIZED));
> d.add(new Field("f2", "This field has payloads in all docs",
> Field.Store.YES, Field.Index.TOKENIZED));

> Document doc =3D hits.doc(i);
>
> Here I want to get the value of payload for the field..

Are you confusing payloads with stored field values?

You retreive the /stored field value/ like this:

doc.get("f2");

You "can not" retreive /payloads/ from Hits.



    karl

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


**************** CAUTION - Disclaimer *****************
This e-mail contains PRIVILEGED AND CONFIDENTIAL INFORMATION intended=
 solely for the use of the addressee(s). If you are not the intended=
 recipient, please notify the sender by e-mail and delete the original=
 message. Further, you are not to copy, disclose, or distribute this e-mail=
 or its contents to any other person and any such actions are unlawful.=
 This e-mail may contain viruses. Infosys has taken every reasonable=
 precaution to minimize this risk, but is not liable for any damage you may=
 sustain as a result of any virus in this e-mail. You should carry out your=
 own virus checks before opening the e-mail or attachment. Infosys reserves=
 the right to monitor and review the content of all messages sent to or=
 from this e-mail address. Messages sent to or from this e-mail address may=
 be stored on the Infosys e-mail system.
***INFOSYS******** End of Disclaimer ********INFOSYS***

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32512-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 11 15:57:33 2008
Return-Path: <java-user-return-32512-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54672 invoked from network); 11 Feb 2008 15:57:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Feb 2008 15:57:33 -0000
Received: (qmail 63239 invoked by uid 500); 11 Feb 2008 15:57:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62901 invoked by uid 500); 11 Feb 2008 15:57:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62890 invoked by uid 99); 11 Feb 2008 15:57:19 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Feb 2008 07:57:19 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.128.190 as permitted sender)
Received: from [209.85.128.190] (HELO fk-out-0910.google.com) (209.85.128.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Feb 2008 15:56:46 +0000
Received: by fk-out-0910.google.com with SMTP id z23so4552822fkz.5
        for <java-user@lucene.apache.org>; Mon, 11 Feb 2008 07:56:53 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=v/1TTlQFfkLCY8z31+s56SWXjIgUAbT2M0aei6mb5wQ=;
        b=AVZdPKWDEKTirp1RMdOaJw6e93kovvVm5VgUgcCVffmGNU1HUvfWkKMjnbd7AeJevVt+2lmYA7hNUH7tuDc8Oa8FVZsdzHEVA4cbLqjANiBogIgnA25oxb/kxNfhWvNUUr1u2H6+poyF+4q54FRvpBqXqTkUlr+JuNpOyKt+uaE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=L44mh+vTYtrpzqGWNHVjjb1eYiUFY3WL2Z3ZJsyR7ThzknhHWn+H2SCaJ38razdHxbkFmmHCrFH+U2TBPsVgLaxaOFl3KK8XOv3iBuUPg6Ukvqmr0MzJAuRltkLCqPDjm5txhISsuN8WSTgCAe0J8V4sSQLeiagmBFzDFuynTP8=
Received: by 10.82.112.3 with SMTP id k3mr212626buc.31.1202745412606;
        Mon, 11 Feb 2008 07:56:52 -0800 (PST)
Received: by 10.82.151.7 with HTTP; Mon, 11 Feb 2008 07:56:52 -0800 (PST)
Message-ID: <359a92830802110756n32de7f55ye4fd7d00e46ee7af@mail.gmail.com>
Date: Mon, 11 Feb 2008 10:56:52 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Indexing accented characters, then searching by any form
In-Reply-To: <15412778.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_27132_27232929.1202745412603"
References: <15412778.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_27132_27232929.1202745412603
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

I'm inferring that you need the original text for display purposes or some
such,
but want to search a "canonical" form. So the following may be totally
irrelevant if my inference is wrong.....

Indexed and stored are two very distinct things in Lucene. If you create
a field that is both stored and indexed, the indexed part goes through
the analyzer and the stored part does not. So you get the best of both
worlds, your search goes against the analyzed code but if you fetch
the field, it's in the original format.

I didn't understand this until after creating the first product using
Lucene, so
one of our production applications has some fields stored but not indexed
and
the *same* data indexed but not stored.. Siiiiggghhh.

Try this code to gain comfort. It uses the casing as a stand-in for accents=
,
but
you can easily adapt it to try your accented cases.

    public static void main(String[] args) throws Exception {
        try {
            IndexWriter iw =3D new IndexWriter("C:/test", new
StandardAnalyzer());
            Document doc =3D new Document();
            doc.add(new Field("blivet", "This is some Mixed Case Text",
Field.Store.YES, Field.Index.TOKENIZED));
            iw.addDocument(doc);
            iw.close();

            IndexSearcher search =3D new IndexSearcher("c:/test");
            QueryParser qp =3D new QueryParser("blivet", new
StandardAnalyzer());
            Query q =3D qp.parse("mixed"); // only matches if StandardAnaly=
zer
lower-cased the input.
            Hits hits =3D search.search(q);
            System.out.println("Count =3D " + Integer.toString(hits.length
()));
            System.out.println(search.getIndexReader().document(0).get("bli=
vet"));
// Outputs mixed case stored field.
        } catch (Exception e) {
            System.err.println("Caught Exception");
            System.err.flush();
            e.printStackTrace();
        }
    }


Best
Erick

On Feb 11, 2008 10:00 AM, Cesar Ronchese <ronchese@hotmail.com> wrote:

>
> Hello, guys.
>
> I've searching the google to make the lucene performs accent-insensitive
> searches.
>
> All I could find is about the ISOLatin1AccentFilter class, which as far I
> could understand, it just removes the accented chars so I can store it in
> its unaccented form.
>
> What I would like to know is, is there a way to store the content in your
> original accented format, and make an accent-insensitive query with
> lucene?
> How?
>
> For example:
> Indexed word: usu=E1rio
> Terms typed by the user, to find the word above: usu=E1rio or usuario or
> usu=E3rio, etc.
>
> Thanks in advance.
> Cesar
> --
> View this message in context:
> http://www.nabble.com/Indexing-accented-characters%2C-then-searching-by-a=
ny-form-tp15412778p15412778.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_27132_27232929.1202745412603--

From java-user-return-32513-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 11 16:12:19 2008
Return-Path: <java-user-return-32513-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59720 invoked from network); 11 Feb 2008 16:12:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Feb 2008 16:12:18 -0000
Received: (qmail 90147 invoked by uid 500); 11 Feb 2008 16:12:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90118 invoked by uid 500); 11 Feb 2008 16:12:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90107 invoked by uid 99); 11 Feb 2008 16:12:05 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Feb 2008 08:12:05 -0800
X-ASF-Spam-Status: No, hits=3.7 required=10.0
	tests=DNS_FROM_OPENWHOIS,FORGED_HOTMAIL_RCVD2,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Feb 2008 16:11:34 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1JObFt-0007pz-UL
	for java-user@lucene.apache.org; Mon, 11 Feb 2008 08:11:41 -0800
Message-ID: <15413522.post@talk.nabble.com>
Date: Mon, 11 Feb 2008 08:11:41 -0800 (PST)
From: Cesar Ronchese <ronchese@hotmail.com>
To: java-user@lucene.apache.org
Subject: Re: Indexing accented characters, then searching by any form
In-Reply-To: <093AFA7C-B070-44E2-A4B4-63D8073658A4@gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Nabble-From: ronchese@hotmail.com
References: <15412778.post@talk.nabble.com> <093AFA7C-B070-44E2-A4B4-63D8073658A4@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Hey Karl. Thanks for the response. I have some doubts more:

1) About the ISOLatin1AccentFilter class:
> What is the problem you have with this? Are they not unique enough?

I need to store the words in the way it was written. So, if the text to be
indexed contains the word "usu=C3=A1rio", my user expects, in his search re=
sults,
see the word in its correct form, "usu=C3=A1rio", not "usuario".

I could be wrong, but that is what I think ISOLatin1AccentFilter does:
performs the content indexing by removing the accents, then every later
results will come without accents also. In short, I lose the accents
forever.


2) About the synonym and permutation:
> You would have to add a synonym for each permutation of the accented term=
.

Do your have a code sample for this? Or even a link reference on how-to?
--=20
View this message in context: http://www.nabble.com/Indexing-accented-chara=
cters%2C-then-searching-by-any-form-tp15412778p15413522.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32514-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 11 16:23:34 2008
Return-Path: <java-user-return-32514-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64074 invoked from network); 11 Feb 2008 16:23:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Feb 2008 16:23:34 -0000
Received: (qmail 6635 invoked by uid 500); 11 Feb 2008 16:23:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6591 invoked by uid 500); 11 Feb 2008 16:23:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6580 invoked by uid 99); 11 Feb 2008 16:23:21 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Feb 2008 08:23:21 -0800
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=SPF_NEUTRAL,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: 194.109.24.24 is neither permitted nor denied by domain of karl.wettin@gmail.com)
Received: from [194.109.24.24] (HELO smtp-vbr4.xs4all.nl) (194.109.24.24)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Feb 2008 16:22:35 +0000
Received: from kodapan.lan (memnon.xs4all.nl [82.93.70.124])
	by smtp-vbr4.xs4all.nl (8.13.8/8.13.8) with ESMTP id m1BGMtsV062858
	for <java-user@lucene.apache.org>; Mon, 11 Feb 2008 17:22:56 +0100 (CET)
	(envelope-from karl.wettin@gmail.com)
Message-Id: <66FB2872-F22B-465D-AC7D-86665B998989@gmail.com>
From: Karl Wettin <karl.wettin@gmail.com>
To: java-user@lucene.apache.org
In-Reply-To: <68959F25CDEBCB4F917D5A253291D73E07CDA66088@BLRKECMBX06.ad.infosys.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v915)
Subject: Re: Getting Payload from Hits
Date: Mon, 11 Feb 2008 17:22:55 +0100
References: <68959F25CDEBCB4F917D5A253291D73E07CDA66045@BLRKECMBX06.ad.infosys.com> <65904997-3559-4502-BBB7-8CE512A1E848@gmail.com> <68959F25CDEBCB4F917D5A253291D73E07CDA66088@BLRKECMBX06.ad.infosys.com>
X-Mailer: Apple Mail (2.915)
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org

You would have to collect the payloads from matching terms by  
extending a query.

See this recent thread:
http://www.nabble.com/Faceting-with-payloads-td15322956.html#a15322956

Are you sure this is what you want to do? What is it you store in the  
payloads, and how do you plan to use this information once you have  
retreived it?


    karl

11 feb 2008 kl. 16.51 skrev Allahbaksh Mohammedali Asadullah:

>
> Hi,
> Thanks for the reply. But is there any way that from the search  
> result I can get Payload.
>
> See my requirement is when user search for some field I want to  
> display also additional data which is stored as Payload.
>
> Regards,
> Allahbaksh
>
>
>
>
> -----Original Message-----
> From: Karl Wettin [mailto:karl.wettin@gmail.com]
> Sent: Monday, February 11, 2008 8:52 PM
> To: java-user@lucene.apache.org
> Subject: Re: Getting Payload from Hits
>
>
> 11 feb 2008 kl. 14.46 skrev Allahbaksh Mohammedali Asadullah:
>
>> d.add(new Field("f1", "This field has no payloads", Field.Store.NO,
>> Field.Index.TOKENIZED));
>> d.add(new Field("f2", "This field has payloads in all docs",
>> Field.Store.YES, Field.Index.TOKENIZED));
>
>> Document doc = hits.doc(i);
>>
>> Here I want to get the value of payload for the field..
>
> Are you confusing payloads with stored field values?
>
> You retreive the /stored field value/ like this:
>
> doc.get("f2");
>
> You "can not" retreive /payloads/ from Hits.
>
>
>
>    karl
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> **************** CAUTION - Disclaimer *****************
> This e-mail contains PRIVILEGED AND CONFIDENTIAL INFORMATION  
> intended solely for the use of the addressee(s). If you are not the  
> intended recipient, please notify the sender by e-mail and delete  
> the original message. Further, you are not to copy, disclose, or  
> distribute this e-mail or its contents to any other person and any  
> such actions are unlawful. This e-mail may contain viruses. Infosys  
> has taken every reasonable precaution to minimize this risk, but is  
> not liable for any damage you may sustain as a result of any virus  
> in this e-mail. You should carry out your own virus checks before  
> opening the e-mail or attachment. Infosys reserves the right to  
> monitor and review the content of all messages sent to or from this  
> e-mail address. Messages sent to or from this e-mail address may be  
> stored on the Infosys e-mail system.
> ***INFOSYS******** End of Disclaimer ********INFOSYS***


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32515-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 11 17:05:26 2008
Return-Path: <java-user-return-32515-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80828 invoked from network); 11 Feb 2008 17:05:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Feb 2008 17:05:26 -0000
Received: (qmail 85783 invoked by uid 500); 11 Feb 2008 17:05:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85389 invoked by uid 500); 11 Feb 2008 17:05:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85378 invoked by uid 99); 11 Feb 2008 17:05:12 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Feb 2008 09:05:12 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of rsivak@istandfor.com designates 72.3.240.46 as permitted sender)
Received: from [72.3.240.46] (HELO mail.istandfor.com) (72.3.240.46)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Feb 2008 17:04:28 +0000
Received: from [192.168.1.101] (dsl254-071-128.nyc1.dsl.speakeasy.net [216.254.71.128])
	(authenticated bits=0)
	by mail.istandfor.com (8.12.11.20060308/8.12.11) with ESMTP id m1BH4lDl004430
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <java-user@lucene.apache.org>; Mon, 11 Feb 2008 11:04:48 -0600
Message-ID: <47B07FB7.4090504@istandfor.com>
Date: Mon, 11 Feb 2008 12:02:47 -0500
From: Ruslan Sivak <rsivak@istandfor.com>
User-Agent: Thunderbird 2.0.0.9 (Windows/20071031)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Distributed Indexes
References: <47AB66AD.2020009@istandfor.com>	 <3056F9B6-ADCE-4FA1-B3FF-DA782E8A96D8@mikemccandless.com>	 <47AB7DAD.9010109@istandfor.com>	 <359a92830802071540m38075cd7l9c628dc1d565aac2@mail.gmail.com>	 <47AC7E2F.3010405@istandfor.com> <839ba01c0802101804p10e7f89fv9e19ca662907b070@mail.gmail.com>
In-Reply-To: <839ba01c0802101804p10e7f89fv9e19ca662907b070@mail.gmail.com>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Cedric Ho wrote:
> On Feb 9, 2008 12:07 AM, Ruslan Sivak <rsivak@istandfor.com> wrote:
>   
>> The app does other things then search the index.  I'm basically using
>> ColdFusion for the website and have four instances running on two
>> servers for load balancing.  Each app does the searches, and the search
>> times are small, the index is small, but it takes a long time to fully
>> create the index (several minutes), and I would like the index to always
>> be up to date (which is why i replicate the changes).
>>
>> I basically cache the index for several minutes in a RamDirectory, which
>> works quite well for performance.  If I could store the index in a SQL
>> Table or something, I can have a single place where the index lives and
>> atomic updates.
>>
>> Is there a SQL Backend for the index, or should I just take the
>> RamDirectory, serialize it and store it as a BLOB?
>>     
>
> Can't you just store the index on a shared network file system? so all
> the copies of your app can access it?
> And load the index into a RamDirectory when need to do searching on it ?
>
>
> Cedric
>
>   
One of the reasons that there are two servers is for redundancy.  There 
is no good shared storage that we can use to store the indexes.   
Although we could theoretically store the files on the db server's file 
system, its a dependency I'd rather avoid.

Russ

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32516-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 11 17:08:28 2008
Return-Path: <java-user-return-32516-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81514 invoked from network); 11 Feb 2008 17:08:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Feb 2008 17:08:28 -0000
Received: (qmail 90555 invoked by uid 500); 11 Feb 2008 17:08:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90516 invoked by uid 500); 11 Feb 2008 17:08:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90505 invoked by uid 99); 11 Feb 2008 17:08:14 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Feb 2008 09:08:14 -0800
X-ASF-Spam-Status: No, hits=3.7 required=10.0
	tests=DNS_FROM_OPENWHOIS,FORGED_HOTMAIL_RCVD2,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Feb 2008 17:07:29 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1JOc8E-000207-JE
	for java-user@lucene.apache.org; Mon, 11 Feb 2008 09:07:50 -0800
Message-ID: <15415770.post@talk.nabble.com>
Date: Mon, 11 Feb 2008 09:07:50 -0800 (PST)
From: Cesar Ronchese <ronchese@hotmail.com>
To: java-user@lucene.apache.org
Subject: Re: Indexing accented characters, then searching by any form
In-Reply-To: <359a92830802110756n32de7f55ye4fd7d00e46ee7af@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: ronchese@hotmail.com
References: <15412778.post@talk.nabble.com> <359a92830802110756n32de7f55ye4fd7d00e46ee7af@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Hey, Erick. You inferred right.

I analized your code and it looks like a common Indexing and Searching code.
Are you sure you pasted the correct code? :P

Anyways, the concept is double storing data, one content with accents and
other without? If yes, I did it earlier, but once I search in the non-accent
content and show accent content, the HitHighlighter will now work properly.
-- 
View this message in context: http://www.nabble.com/Indexing-accented-characters%2C-then-searching-by-any-form-tp15412778p15415770.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32517-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 11 17:15:51 2008
Return-Path: <java-user-return-32517-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84550 invoked from network); 11 Feb 2008 17:15:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Feb 2008 17:15:51 -0000
Received: (qmail 7598 invoked by uid 500); 11 Feb 2008 17:15:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7571 invoked by uid 500); 11 Feb 2008 17:15:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7560 invoked by uid 99); 11 Feb 2008 17:15:38 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Feb 2008 09:15:38 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [208.97.132.83] (HELO spunkymail-a13.g.dreamhost.com) (208.97.132.83)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Feb 2008 17:14:51 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a13.g.dreamhost.com (Postfix) with ESMTP id B00CE129B34
	for <java-user@lucene.apache.org>; Mon, 11 Feb 2008 09:15:08 -0800 (PST)
Message-Id: <A8E9458A-4ED7-48AE-B4C3-916BCD5EE3E8@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <68959F25CDEBCB4F917D5A253291D73E07CDA66088@BLRKECMBX06.ad.infosys.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v915)
Subject: Re: Getting Payload from Hits
Date: Mon, 11 Feb 2008 12:15:09 -0500
References: <68959F25CDEBCB4F917D5A253291D73E07CDA66045@BLRKECMBX06.ad.infosys.com> <65904997-3559-4502-BBB7-8CE512A1E848@gmail.com> <68959F25CDEBCB4F917D5A253291D73E07CDA66088@BLRKECMBX06.ad.infosys.com>
X-Mailer: Apple Mail (2.915)
X-Virus-Checked: Checked by ClamAV on apache.org

Right now there is not a good way, other than to use the  
TermPositions.   See https://issues.apache.org/jira/browse/LUCENE-1001  
for some thoughts on adding the ability.  Unfortunately, I ran into a  
roadblock, and haven't been able to get back to it.  If you feel you  
can submit a patch, it would be most welcome.

-Grant


On Feb 11, 2008, at 10:51 AM, Allahbaksh Mohammedali Asadullah wrote:

>
> Hi,
> Thanks for the reply. But is there any way that from the search  
> result I can get Payload.
>
> See my requirement is when user search for some field I want to  
> display also additional data which is stored as Payload.
>
> Regards,
> Allahbaksh
>
>
>
>
> -----Original Message-----
> From: Karl Wettin [mailto:karl.wettin@gmail.com]
> Sent: Monday, February 11, 2008 8:52 PM
> To: java-user@lucene.apache.org
> Subject: Re: Getting Payload from Hits
>
>
> 11 feb 2008 kl. 14.46 skrev Allahbaksh Mohammedali Asadullah:
>
>> d.add(new Field("f1", "This field has no payloads", Field.Store.NO,
>> Field.Index.TOKENIZED));
>> d.add(new Field("f2", "This field has payloads in all docs",
>> Field.Store.YES, Field.Index.TOKENIZED));
>
>> Document doc = hits.doc(i);
>>
>> Here I want to get the value of payload for the field..
>
> Are you confusing payloads with stored field values?
>
> You retreive the /stored field value/ like this:
>
> doc.get("f2");
>
> You "can not" retreive /payloads/ from Hits.
>
>
>
>    karl
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> **************** CAUTION - Disclaimer *****************
> This e-mail contains PRIVILEGED AND CONFIDENTIAL INFORMATION  
> intended solely for the use of the addressee(s). If you are not the  
> intended recipient, please notify the sender by e-mail and delete  
> the original message. Further, you are not to copy, disclose, or  
> distribute this e-mail or its contents to any other person and any  
> such actions are unlawful. This e-mail may contain viruses. Infosys  
> has taken every reasonable precaution to minimize this risk, but is  
> not liable for any damage you may sustain as a result of any virus  
> in this e-mail. You should carry out your own virus checks before  
> opening the e-mail or attachment. Infosys reserves the right to  
> monitor and review the content of all messages sent to or from this  
> e-mail address. Messages sent to or from this e-mail address may be  
> stored on the Infosys e-mail system.
> ***INFOSYS******** End of Disclaimer ********INFOSYS***
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

--------------------------
Grant Ingersoll
http://lucene.grantingersoll.com
http://www.lucenebootcamp.com

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32518-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 11 17:17:12 2008
Return-Path: <java-user-return-32518-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84734 invoked from network); 11 Feb 2008 17:17:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Feb 2008 17:17:12 -0000
Received: (qmail 11218 invoked by uid 500); 11 Feb 2008 17:16:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11197 invoked by uid 500); 11 Feb 2008 17:16:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11186 invoked by uid 99); 11 Feb 2008 17:16:59 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Feb 2008 09:16:59 -0800
X-ASF-Spam-Status: No, hits=3.7 required=10.0
	tests=DNS_FROM_OPENWHOIS,FORGED_HOTMAIL_RCVD2,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Feb 2008 17:16:28 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1JOcGh-0002OQ-Uu
	for java-user@lucene.apache.org; Mon, 11 Feb 2008 09:16:35 -0800
Message-ID: <15415778.post@talk.nabble.com>
Date: Mon, 11 Feb 2008 09:16:35 -0800 (PST)
From: Cesar Ronchese <ronchese@hotmail.com>
To: java-user@lucene.apache.org
Subject: Re: Indexing accented characters, then searching by any form
In-Reply-To: <AAA63AE5-2F37-4009-BBB9-F528E025C2E7@gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: ronchese@hotmail.com
References: <15412778.post@talk.nabble.com> <093AFA7C-B070-44E2-A4B4-63D8073658A4@gmail.com> <AAA63AE5-2F37-4009-BBB9-F528E025C2E7@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


> One more thing,
> are you aware of that you are supposed to apply that filter on the  
> query too?

I don't know how to set that filter to Query object. I've searched to see if
it is possible, but I can't find references. If it is possible, do you have
a quick example? 

I'm searching this way:

IndexReader objIndexReader = GetIndexReader(); //GetIndexReader()  is my
function to retrieve an IndexReader
IndexSearcher objSearcher = new IndexSearcher(objIndexReader);
StandardAnalyzer objAnalyzer = new StandardAnalyzer();
MultiFieldQueryParser objParser = new MultiFieldQueryParser(GetFields(),
objAnalyzer);
Query objQuery = objParser.parse(SearchText);
objQuery = objQuery.rewrite(objIndexReader); 
Hits objHits = objSearcher.search(objQuery);

-- 
View this message in context: http://www.nabble.com/Indexing-accented-characters%2C-then-searching-by-any-form-tp15412778p15415778.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32519-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 11 17:17:57 2008
Return-Path: <java-user-return-32519-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84919 invoked from network); 11 Feb 2008 17:17:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Feb 2008 17:17:56 -0000
Received: (qmail 17043 invoked by uid 500); 11 Feb 2008 17:17:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17018 invoked by uid 500); 11 Feb 2008 17:17:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17007 invoked by uid 99); 11 Feb 2008 17:17:43 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Feb 2008 09:17:43 -0800
X-ASF-Spam-Status: No, hits=3.7 required=10.0
	tests=DNS_FROM_OPENWHOIS,FORGED_HOTMAIL_RCVD2,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Feb 2008 17:16:58 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1JOcHP-0002Sh-Gk
	for java-user@lucene.apache.org; Mon, 11 Feb 2008 09:17:19 -0800
Message-ID: <15415770.post@talk.nabble.com>
Date: Mon, 11 Feb 2008 09:17:19 -0800 (PST)
From: Cesar Ronchese <ronchese@hotmail.com>
To: java-user@lucene.apache.org
Subject: Re: Indexing accented characters, then searching by any form
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: ronchese@hotmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hey, Erick. You inferred right.

I analized your code and it looks like a common Indexing and Searching code.
Are you sure you pasted the correct code? :P

Anyways, is the concept about doubling storing data, one content with
accents and other without? If yes, I did it earlier, but once I search in
the non-accent content and show accent content, the HitHighlighter will now
work properly.
-- 
View this message in context: http://www.nabble.com/Indexing-accented-characters%2C-then-searching-by-any-form-tp15412778p15415770.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32520-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 11 17:57:21 2008
Return-Path: <java-user-return-32520-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3616 invoked from network); 11 Feb 2008 17:57:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Feb 2008 17:57:20 -0000
Received: (qmail 72718 invoked by uid 500); 11 Feb 2008 17:57:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72691 invoked by uid 500); 11 Feb 2008 17:57:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72680 invoked by uid 99); 11 Feb 2008 17:57:07 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Feb 2008 09:57:07 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of stopman@gmail.com designates 72.14.214.229 as permitted sender)
Received: from [72.14.214.229] (HELO hu-out-0506.google.com) (72.14.214.229)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Feb 2008 17:56:34 +0000
Received: by hu-out-0506.google.com with SMTP id 27so7295394hub.15
        for <java-user@lucene.apache.org>; Mon, 11 Feb 2008 09:56:39 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        bh=e/P7qGCBqLl5HB/YfxHbHF5Q5xgacByoyRdV04MggHM=;
        b=u/Rig+7FkE0ife4hUQtLjhBkNUxhJtGBMTlIijU/Rd4EV6VLinE06MgFXF9ri2rhRSMsFRemgfp5b35Qveh2nurgZ3hQHftU2Za77F2hNYcsbR7KCGq50iMN738DUA1V2DCC2Fc7B/1gxg+rNA8va8XkWeLemdCqLGpUuNexHkk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=VuXNj07LVQNMlaz3BVjP8CTkOyYpIi75K7D1cxgXN4t+B6EKEn+kHUsdNfNc9RB+8m8Jnil/CLzxJLsDIzVEWbMNknondy8O9u7YIHoRz/KRZb7h576CR4Kmart/e0Xj+V2rhcBjA61dvUF+KTRp/GGkuPcoLqMcxbY01+3UfCM=
Received: by 10.82.145.7 with SMTP id s7mr507262bud.7.1202752599384;
        Mon, 11 Feb 2008 09:56:39 -0800 (PST)
Received: by 10.82.139.19 with HTTP; Mon, 11 Feb 2008 09:56:39 -0800 (PST)
Message-ID: <652776090802110956i32f978f0tbee7830873bfbc26@mail.gmail.com>
Date: Mon, 11 Feb 2008 09:56:39 -0800
From: "Michael Stoppelman" <stopman@gmail.com>
To: java-user@lucene.apache.org
Subject: How to promote an unstemmed match over a stemmed match in an index that's stemmed...
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_12042_3685001.1202752599375"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_12042_3685001.1202752599375
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi all,
I've got an index with tokens that are stemmed. Sometimes I really need to
boost the unstemmed
version of a query word to get the most relevant documents.

Example:
Query: [olives].

I don't want to match documents with the words: oliver, oliver's, etc...

Since I'm stemming when creating the index is there a way to store both
versions (stemmed/unstemmed) with
setIncrementPosition()? Is that the correct way to deal with this? I was
reading old archives and this didn't seem
to be a great way decision since it breaks PhraseQuery [1].

It seems like it would be useful if at query scoring time if I could see the
original string values of the tokens in this case
at least.

Thanks in advance,

-M

[1] http://www.mail-archive.com/lucene-user@jakarta.apache.org/msg07416.html

------=_Part_12042_3685001.1202752599375--

From java-user-return-32521-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 11 18:52:41 2008
Return-Path: <java-user-return-32521-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26746 invoked from network); 11 Feb 2008 18:52:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Feb 2008 18:52:41 -0000
Received: (qmail 55139 invoked by uid 500); 11 Feb 2008 18:52:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55113 invoked by uid 500); 11 Feb 2008 18:52:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55100 invoked by uid 99); 11 Feb 2008 18:52:28 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Feb 2008 10:52:28 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.128.188 as permitted sender)
Received: from [209.85.128.188] (HELO fk-out-0910.google.com) (209.85.128.188)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Feb 2008 18:51:55 +0000
Received: by fk-out-0910.google.com with SMTP id z23so4615972fkz.5
        for <java-user@lucene.apache.org>; Mon, 11 Feb 2008 10:52:02 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=3lNEv62VwajWMB1vcYZOKPa66tqDqi2xVWLxHcl3/uM=;
        b=ES9FIqcx8BbVTWj8ORp/wu7E6JnbunDQ0RGWBeE8qGNDLIimKhrFkleT0gMB08Bj4tJjMhja8l+2o3RnEDU0L5o3djpusR34UZmUS22VNXqmuCc1v04mch4+u9Z6BaJ+4PeSIev4NLRyT+ToQwnMLOalccY7lu4Q5MlMpcRjZeY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=vqYgkrIyiU/93wNqDWzxji+pE4zx6XGkSteJgOzOIWROgPL3Ewoee6xeff0P5SnPn188j1KpIyfBcx+TVKuGiFW2ZU7YzYwFMPL0RFvHISs9ngFCbpPwD1oLxZfc3kkHTAPo5tpXW5dalm9BWtxVd68znzcXVEyL/OY2ZxNSLdk=
Received: by 10.82.112.3 with SMTP id k3mr576522buc.31.1202755922158;
        Mon, 11 Feb 2008 10:52:02 -0800 (PST)
Received: by 10.82.151.7 with HTTP; Mon, 11 Feb 2008 10:51:57 -0800 (PST)
Message-ID: <359a92830802111051y745c3eaucc8bc32215d7e44e@mail.gmail.com>
Date: Mon, 11 Feb 2008 13:51:57 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Indexing accented characters, then searching by any form
In-Reply-To: <15415770.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_27931_2362854.1202755917152"
References: <15415770.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_27931_2362854.1202755917152
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

See below...


On Feb 11, 2008 12:17 PM, Cesar Ronchese <ronchese@hotmail.com> wrote:

>
> Hey, Erick. You inferred right.
>
> I analized your code and it looks like a common Indexing and Searching
> code.
> Are you sure you pasted the correct code? :P
>

Did you try to run it? It's just a self-contained example showing that
searching
and displaying are distinct.

The indexer part indexes a mixed-case string. The search is then
performed on a lower-case string, and the println shows that a
document was found. The next println echoes back the stored text
showing that the original was stored. Just substitute your preferred
filter to see how this would work for you.



>
> Anyways, is the concept about doubling storing data, one content with
> accents and other without? If yes, I did it earlier, but once I search in
> the non-accent content and show accent content, the HitHighlighter will
> now
> work properly.
> --
>

Is this a typo or is your problem solved? I confess that haven't had the
necessity to use the highlighter package yet, so I may be missing
something...

But you're not really "double storing". You'll find that indexed code takes
MUCH less space than you would think, nowhere near the amount
required to store the data too. So there's good reason to separate the two.

You have no choice except to store the data if you want the user to see
something pretty.....

Erick


>
> View this message in context:
> http://www.nabble.com/Indexing-accented-characters%2C-then-searching-by-any-form-tp15412778p15415770.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_27931_2362854.1202755917152--

From java-user-return-32522-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 11 18:56:00 2008
Return-Path: <java-user-return-32522-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 27840 invoked from network); 11 Feb 2008 18:56:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Feb 2008 18:56:00 -0000
Received: (qmail 58973 invoked by uid 500); 11 Feb 2008 18:55:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58942 invoked by uid 500); 11 Feb 2008 18:55:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58931 invoked by uid 99); 11 Feb 2008 18:55:47 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Feb 2008 10:55:47 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: 194.109.24.25 is neither permitted nor denied by domain of karl.wettin@gmail.com)
Received: from [194.109.24.25] (HELO smtp-vbr5.xs4all.nl) (194.109.24.25)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Feb 2008 18:55:15 +0000
Received: from kodapan.lan (memnon.xs4all.nl [82.93.70.124])
	by smtp-vbr5.xs4all.nl (8.13.8/8.13.8) with ESMTP id m1BItLPv058776
	for <java-user@lucene.apache.org>; Mon, 11 Feb 2008 19:55:21 +0100 (CET)
	(envelope-from karl.wettin@gmail.com)
Message-Id: <368FDCE1-1B94-4B99-A48D-AE296A559CAE@gmail.com>
From: Karl Wettin <karl.wettin@gmail.com>
To: java-user@lucene.apache.org
In-Reply-To: <15415778.post@talk.nabble.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v915)
Subject: Re: Indexing accented characters, then searching by any form
Date: Mon, 11 Feb 2008 19:55:21 +0100
References: <15412778.post@talk.nabble.com> <093AFA7C-B070-44E2-A4B4-63D8073658A4@gmail.com> <AAA63AE5-2F37-4009-BBB9-F528E025C2E7@gmail.com> <15415778.post@talk.nabble.com>
X-Mailer: Apple Mail (2.915)
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org


11 feb 2008 kl. 18.16 skrev Cesar Ronchese:

> I don't know how to set that filter to Query object.

It is a TokenStream you filter, not the Query. In your case the  
TokenStream is produced by the QueryParser invoking  
analyzer.tokenStream(field, new StringReader(input)). So what you have  
to do is to replace the analyzer with your own implementation.

>
> I'm searching this way:

> StandardAnalyzer objAnalyzer = new StandardAnalyzer();

Try this (dry coded) snippet instead:

StandardAnalyzer objAnalyzer = new StandardAnalyzer() {
   public TokenStream tokenStream(String fieldName, Reader reader) {
     return new ISOLatin1AccentFilter(super.tokenStream(fieldName,  
reader));
   }
}

Looking at the code you also probably want to reuse your Analyzer,  
IndexSearcher and IndexReader and not create a new instance each time  
you place a query.  You can read more about thar and many other things  
here: <http://wiki.apache.org/lucene-java/BasicsOfPerformance>


    karl

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32523-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 11 18:59:42 2008
Return-Path: <java-user-return-32523-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 29107 invoked from network); 11 Feb 2008 18:59:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Feb 2008 18:59:41 -0000
Received: (qmail 65846 invoked by uid 500); 11 Feb 2008 18:59:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65816 invoked by uid 500); 11 Feb 2008 18:59:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65805 invoked by uid 99); 11 Feb 2008 18:59:28 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Feb 2008 10:59:28 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.128.184 as permitted sender)
Received: from [209.85.128.184] (HELO fk-out-0910.google.com) (209.85.128.184)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Feb 2008 18:58:53 +0000
Received: by fk-out-0910.google.com with SMTP id z23so4618280fkz.5
        for <java-user@lucene.apache.org>; Mon, 11 Feb 2008 10:59:00 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=LBGN1J8vbZ+msW0TzEO+qj2FokSYq15DUQFsvvbOzek=;
        b=VdOGfa4c1/oS9ZcXBZYEZZgXgPwJJsYvfgKuB95HbKZwu0TcDr72AfpJ32sqOLL2hYV1XEvaoZyjTUE+RmgHRqEKbj2PBBcfvcboHMyCI3cnCS3+720uucC5NDsMiK56pTBIa8fBYXV1nqoAQGEEZ52jMtBNEWHqnH2TYQnItf0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=Zt2i9JsM/synMhAi8/RyeI5LHUqZkqC2y3FBuh+jKytpDj9E6pBM908wWpUeTQLykcuO4PYXdV9ogNQ9TE9XCJZEvJMc6VLK7i/xe88MPtlq19Tf1NgEys6JYX/twtLRBvBtbJWqejgPclsEabvCLnyb40VoTMX1YZSzkgTJfww=
Received: by 10.82.153.5 with SMTP id a5mr627926bue.9.1202756339518;
        Mon, 11 Feb 2008 10:58:59 -0800 (PST)
Received: by 10.82.151.7 with HTTP; Mon, 11 Feb 2008 10:58:59 -0800 (PST)
Message-ID: <359a92830802111058q51c939f2ibf4d0b0063c81210@mail.gmail.com>
Date: Mon, 11 Feb 2008 13:58:59 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: How to promote an unstemmed match over a stemmed match in an index that's stemmed...
In-Reply-To: <652776090802110956i32f978f0tbee7830873bfbc26@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_27989_27162935.1202756339509"
References: <652776090802110956i32f978f0tbee7830873bfbc26@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_27989_27162935.1202756339509
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

You have to bet a bit clever. You can certainly inject the original with an
increment of 0. See SynonymAnalyzer in Lucene In Action. This will not
break phrase queries since your two tokens occupy the same position.

But you'll have to do something like add a $ to the original at index time.
That way, for exact matches you can search on olive$, boosted however
you  want. When you want the stemmed version you can search for olive.
Or you could add a clause with the unstemmed version boosted. Or
something like that <G>.... Note that whether you add the $ to the stemmed
or unstemmed version is up to you.......

Watch what analyzer you use to be sure it doesn't strip out the special
symbol....

Best
Erick

On Feb 11, 2008 12:56 PM, Michael Stoppelman <stopman@gmail.com> wrote:

> Hi all,
> I've got an index with tokens that are stemmed. Sometimes I really need to
> boost the unstemmed
> version of a query word to get the most relevant documents.
>
> Example:
> Query: [olives].
>
> I don't want to match documents with the words: oliver, oliver's, etc...
>
> Since I'm stemming when creating the index is there a way to store both
> versions (stemmed/unstemmed) with
> setIncrementPosition()? Is that the correct way to deal with this? I was
> reading old archives and this didn't seem
> to be a great way decision since it breaks PhraseQuery [1].
>
> It seems like it would be useful if at query scoring time if I could see
> the
> original string values of the tokens in this case
> at least.
>
> Thanks in advance,
>
> -M
>
> [1]
> http://www.mail-archive.com/lucene-user@jakarta.apache.org/msg07416.html
>

------=_Part_27989_27162935.1202756339509--

From java-user-return-32524-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 11 19:06:58 2008
Return-Path: <java-user-return-32524-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32488 invoked from network); 11 Feb 2008 19:06:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Feb 2008 19:06:58 -0000
Received: (qmail 76873 invoked by uid 500); 11 Feb 2008 19:06:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76837 invoked by uid 500); 11 Feb 2008 19:06:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76826 invoked by uid 99); 11 Feb 2008 19:06:45 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Feb 2008 11:06:45 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of stopman@gmail.com designates 64.233.182.191 as permitted sender)
Received: from [64.233.182.191] (HELO nf-out-0910.google.com) (64.233.182.191)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Feb 2008 19:06:12 +0000
Received: by nf-out-0910.google.com with SMTP id d3so1473865nfc.15
        for <java-user@lucene.apache.org>; Mon, 11 Feb 2008 11:06:19 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=fkKKpxjZlEx00FstiARcmMdUc9ZWDHRIwuF1k+85QwM=;
        b=DkHly9/K76S4X+3QmYQckSbWMlP4bQXnfB4GtVsXKjJgsOTmK9dPVF74VW0ikFvMOUTAToR83B0QL6ZwBuqt9SGh91b+6FY/jtYholiDWveDAd6QMXneM9EF51Ink8IR4c3e7iEZYfUUATmankgGLTQDaOjEXFZsLP93ENmEGEI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=bwQeewD5kFc+EFuu+tZa8INdCbRfRE7z+Q1yl0fcRfIC2/Ut9SHCGTIPWpZ/CU6YvbSOExS/847K/VJChBPde+EHJmJk+wP7uXG0XaQs+96cRQpWFDoAmbgaYEm6XHmGvD7YXtNMJXz+2wMGKKVtkujOewFqVA46vP+AeH8VO+M=
Received: by 10.82.159.15 with SMTP id h15mr592059bue.36.1202756778578;
        Mon, 11 Feb 2008 11:06:18 -0800 (PST)
Received: by 10.82.139.19 with HTTP; Mon, 11 Feb 2008 11:06:18 -0800 (PST)
Message-ID: <652776090802111106k5d4aba0drb0da33bad3ddf3b0@mail.gmail.com>
Date: Mon, 11 Feb 2008 11:06:18 -0800
From: "Michael Stoppelman" <stopman@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: How to promote an unstemmed match over a stemmed match in an index that's stemmed...
In-Reply-To: <359a92830802111058q51c939f2ibf4d0b0063c81210@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_12288_16474392.1202756778572"
References: <652776090802110956i32f978f0tbee7830873bfbc26@mail.gmail.com>
	 <359a92830802111058q51c939f2ibf4d0b0063c81210@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_12288_16474392.1202756778572
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Ah, very cool. Thanks for the tip.

-M

On Feb 11, 2008 10:58 AM, Erick Erickson <erickerickson@gmail.com> wrote:

> You have to bet a bit clever. You can certainly inject the original with
> an
> increment of 0. See SynonymAnalyzer in Lucene In Action. This will not
> break phrase queries since your two tokens occupy the same position.
>
> But you'll have to do something like add a $ to the original at index
> time.
> That way, for exact matches you can search on olive$, boosted however
> you  want. When you want the stemmed version you can search for olive.
> Or you could add a clause with the unstemmed version boosted. Or
> something like that <G>.... Note that whether you add the $ to the stemmed
> or unstemmed version is up to you.......
>
> Watch what analyzer you use to be sure it doesn't strip out the special
> symbol....
>
> Best
> Erick
>
> On Feb 11, 2008 12:56 PM, Michael Stoppelman <stopman@gmail.com> wrote:
>
> > Hi all,
> > I've got an index with tokens that are stemmed. Sometimes I really need
> to
> > boost the unstemmed
> > version of a query word to get the most relevant documents.
> >
> > Example:
> > Query: [olives].
> >
> > I don't want to match documents with the words: oliver, oliver's, etc...
> >
> > Since I'm stemming when creating the index is there a way to store both
> > versions (stemmed/unstemmed) with
> > setIncrementPosition()? Is that the correct way to deal with this? I was
> > reading old archives and this didn't seem
> > to be a great way decision since it breaks PhraseQuery [1].
> >
> > It seems like it would be useful if at query scoring time if I could see
> > the
> > original string values of the tokens in this case
> > at least.
> >
> > Thanks in advance,
> >
> > -M
> >
> > [1]
> > http://www.mail-archive.com/lucene-user@jakarta.apache.org/msg07416.html
> >
>

------=_Part_12288_16474392.1202756778572--

From java-user-return-32525-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 11 19:20:19 2008
Return-Path: <java-user-return-32525-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 39914 invoked from network); 11 Feb 2008 19:20:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Feb 2008 19:20:18 -0000
Received: (qmail 97018 invoked by uid 500); 11 Feb 2008 19:20:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96678 invoked by uid 500); 11 Feb 2008 19:20:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96662 invoked by uid 99); 11 Feb 2008 19:20:04 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Feb 2008 11:20:04 -0800
X-ASF-Spam-Status: No, hits=3.7 required=10.0
	tests=DNS_FROM_OPENWHOIS,FORGED_HOTMAIL_RCVD2,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Feb 2008 19:19:28 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1JOeBk-0007Nr-7K
	for java-user@lucene.apache.org; Mon, 11 Feb 2008 11:19:36 -0800
Message-ID: <15418663.post@talk.nabble.com>
Date: Mon, 11 Feb 2008 11:19:36 -0800 (PST)
From: Cesar Ronchese <ronchese@hotmail.com>
To: java-user@lucene.apache.org
Subject: Delete problems    O.O
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: ronchese@hotmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hey All.

I'm running problems with document deletion. I tried to use
DeleteDocuments() and DeleteDocument() methods, both are with problems,
according explained below:


1) DeleteDocuments(term)

This simply doesn't delete anything from the Index. 

//see the code sample:
//"theFieldName" was previously stored as Field.Store.YES and
Field.Index.TOKENIZED.
Term t = new Terms("theFieldName", "theFieldContent");
objIndexReader.DeleteDocuments(t);

I ask: Am I doing anything wrong here? 



2) DeleteDocument(numDoc) <== this problem is a woot problem

After being frustrated ( :P ) with DeleteDocuments(), I ran to test
DeleteDocument(). Then I made a query to return a Hits collection. I did a
loop through the Hits collection and I called DeleteDocument(docNum) for
every document in the Hits collection. 

Lets talk about the problem now..... this method DOES delete a document from
Index, BUT, it is actually deleting wrong documents. I noticed that instead
of deleting the documents found by the Hits collection, it is deleting the
documents based in its insertion order!! 

I mean, if I call objIndexReader.DeleteDocument(0), it will delete the first
document from the entire INDEX, not the first document in the Hits
collection. So, it deleted the first documents I have inserted some days
ago, in previous indexing sessions.

I ask: is there a way to get the correct docNum from the document retrieved
in the Hits collection?
OR: is there a safe way to delete documents
OR: what I'm doing wrong?

Thanks in advance.
Cesar



-- 
View this message in context: http://www.nabble.com/Delete-problems----O.O-tp15418663p15418663.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32526-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 11 19:40:14 2008
Return-Path: <java-user-return-32526-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 55479 invoked from network); 11 Feb 2008 19:40:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Feb 2008 19:40:14 -0000
Received: (qmail 22309 invoked by uid 500); 11 Feb 2008 19:40:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22040 invoked by uid 500); 11 Feb 2008 19:40:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 22029 invoked by uid 99); 11 Feb 2008 19:40:02 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Feb 2008 11:40:02 -0800
X-ASF-Spam-Status: No, hits=3.7 required=10.0
	tests=DNS_FROM_OPENWHOIS,FORGED_HOTMAIL_RCVD2,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Feb 2008 19:39:17 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1JOeV7-0008Bi-N3
	for java-user@lucene.apache.org; Mon, 11 Feb 2008 11:39:37 -0800
Message-ID: <15419068.post@talk.nabble.com>
Date: Mon, 11 Feb 2008 11:39:37 -0800 (PST)
From: Cesar Ronchese <ronchese@hotmail.com>
To: java-user@lucene.apache.org
Subject: Re: Indexing accented characters, then searching by any form
In-Reply-To: <368FDCE1-1B94-4B99-A48D-AE296A559CAE@gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: ronchese@hotmail.com
References: <15412778.post@talk.nabble.com> <093AFA7C-B070-44E2-A4B4-63D8073658A4@gmail.com> <AAA63AE5-2F37-4009-BBB9-F528E025C2E7@gmail.com> <15415778.post@talk.nabble.com> <368FDCE1-1B94-4B99-A48D-AE296A559CAE@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Woot, Karl. 
It worked like a charm! It even worked with the Highlighter. THANKS!



karl wettin-3 wrote:
> 
> 
> 11 feb 2008 kl. 18.16 skrev Cesar Ronchese:
> 
>> I don't know how to set that filter to Query object.
> 
> It is a TokenStream you filter, not the Query. In your case the  
> TokenStream is produced by the QueryParser invoking  
> analyzer.tokenStream(field, new StringReader(input)). So what you have  
> to do is to replace the analyzer with your own implementation.
> 
>>
>> I'm searching this way:
> 
>> StandardAnalyzer objAnalyzer = new StandardAnalyzer();
> 
> Try this (dry coded) snippet instead:
> 
> StandardAnalyzer objAnalyzer = new StandardAnalyzer() {
>    public TokenStream tokenStream(String fieldName, Reader reader) {
>      return new ISOLatin1AccentFilter(super.tokenStream(fieldName,  
> reader));
>    }
> }
> 
> Looking at the code you also probably want to reuse your Analyzer,  
> IndexSearcher and IndexReader and not create a new instance each time  
> you place a query.  You can read more about thar and many other things  
> here: <http://wiki.apache.org/lucene-java/BasicsOfPerformance>
> 
> 
>     karl
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/Indexing-accented-characters%2C-then-searching-by-any-form-tp15412778p15419068.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32527-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 11 19:49:07 2008
Return-Path: <java-user-return-32527-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64338 invoked from network); 11 Feb 2008 19:49:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Feb 2008 19:49:07 -0000
Received: (qmail 43621 invoked by uid 500); 11 Feb 2008 19:48:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43283 invoked by uid 500); 11 Feb 2008 19:48:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43272 invoked by uid 99); 11 Feb 2008 19:48:53 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Feb 2008 11:48:53 -0800
X-ASF-Spam-Status: No, hits=3.7 required=10.0
	tests=DNS_FROM_OPENWHOIS,FORGED_HOTMAIL_RCVD2,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Feb 2008 19:48:08 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1JOedh-00007z-E7
	for java-user@lucene.apache.org; Mon, 11 Feb 2008 11:48:29 -0800
Message-ID: <15419265.post@talk.nabble.com>
Date: Mon, 11 Feb 2008 11:48:29 -0800 (PST)
From: Cesar Ronchese <ronchese@hotmail.com>
To: java-user@lucene.apache.org
Subject: Re: Indexing accented characters, then searching by any form
In-Reply-To: <15419068.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: ronchese@hotmail.com
References: <15412778.post@talk.nabble.com> <093AFA7C-B070-44E2-A4B4-63D8073658A4@gmail.com> <AAA63AE5-2F37-4009-BBB9-F528E025C2E7@gmail.com> <15415778.post@talk.nabble.com> <368FDCE1-1B94-4B99-A48D-AE296A559CAE@gmail.com> <15419068.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Ops!
Found a situation here Karl: 
If the content is stored without accents, everything is OK.
But, as my content is stored with accents, and I noticed the ISOFilter just
removes the accent from the search terms, it is not returning to my Hits
collection.

Any idea how to fix it?





Cesar Ronchese wrote:
> 
> Woot, Karl. 
> It worked like a charm! It even worked with the Highlighter. THANKS!
> 
> 
> 
> karl wettin-3 wrote:
>> 
>> 
>> 11 feb 2008 kl. 18.16 skrev Cesar Ronchese:
>> 
>>> I don't know how to set that filter to Query object.
>> 
>> It is a TokenStream you filter, not the Query. In your case the  
>> TokenStream is produced by the QueryParser invoking  
>> analyzer.tokenStream(field, new StringReader(input)). So what you have  
>> to do is to replace the analyzer with your own implementation.
>> 
>>>
>>> I'm searching this way:
>> 
>>> StandardAnalyzer objAnalyzer = new StandardAnalyzer();
>> 
>> Try this (dry coded) snippet instead:
>> 
>> StandardAnalyzer objAnalyzer = new StandardAnalyzer() {
>>    public TokenStream tokenStream(String fieldName, Reader reader) {
>>      return new ISOLatin1AccentFilter(super.tokenStream(fieldName,  
>> reader));
>>    }
>> }
>> 
>> Looking at the code you also probably want to reuse your Analyzer,  
>> IndexSearcher and IndexReader and not create a new instance each time  
>> you place a query.  You can read more about thar and many other things  
>> here: <http://wiki.apache.org/lucene-java/BasicsOfPerformance>
>> 
>> 
>>     karl
>> 
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>> 
>> 
>> 
> 
> 

-- 
View this message in context: http://www.nabble.com/Indexing-accented-characters%2C-then-searching-by-any-form-tp15412778p15419265.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32528-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 11 19:49:29 2008
Return-Path: <java-user-return-32528-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64814 invoked from network); 11 Feb 2008 19:49:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Feb 2008 19:49:29 -0000
Received: (qmail 45445 invoked by uid 500); 11 Feb 2008 19:49:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45416 invoked by uid 500); 11 Feb 2008 19:49:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45405 invoked by uid 99); 11 Feb 2008 19:49:16 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Feb 2008 11:49:16 -0800
X-ASF-Spam-Status: No, hits=3.7 required=10.0
	tests=DNS_FROM_OPENWHOIS,FORGED_HOTMAIL_RCVD2,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Feb 2008 19:48:31 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1JOee3-00008v-Uk
	for java-user@lucene.apache.org; Mon, 11 Feb 2008 11:48:51 -0800
Message-ID: <15419265.post@talk.nabble.com>
Date: Mon, 11 Feb 2008 11:48:51 -0800 (PST)
From: Cesar Ronchese <ronchese@hotmail.com>
To: java-user@lucene.apache.org
Subject: Re: Indexing accented characters, then searching by any form
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: ronchese@hotmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


Ops!
Found a situation here Karl: 
If the content is stored without accents, everything is OK.
But, as my content is stored with accents, and I noticed the ISOFilter just
removes the accent from the search terms, it is not returning to my Hits
collection.

Any idea how to fix it?
-- 
View this message in context: http://www.nabble.com/Indexing-accented-characters%2C-then-searching-by-any-form-tp15412778p15419265.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32529-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 11 20:06:13 2008
Return-Path: <java-user-return-32529-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79097 invoked from network); 11 Feb 2008 20:06:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Feb 2008 20:06:12 -0000
Received: (qmail 80201 invoked by uid 500); 11 Feb 2008 20:05:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80171 invoked by uid 500); 11 Feb 2008 20:05:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80160 invoked by uid 99); 11 Feb 2008 20:05:59 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Feb 2008 12:05:59 -0800
X-ASF-Spam-Status: No, hits=-4.0 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [128.230.108.46] (HELO SUEXCL-02.ad.syr.edu) (128.230.108.46)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Feb 2008 20:05:16 +0000
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Delete problems    O.O
Date: Mon, 11 Feb 2008 15:04:47 -0500
Message-ID: <9294E20AED46934EA459020706463F947EB963@SUEXCL-02.ad.syr.edu>
In-Reply-To: <15418663.post@talk.nabble.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Delete problems    O.O
Thread-Index: Achs4yRisyjbxjOkQ8yipcdthspdygAAlSbg
From: "Steven A Rowe" <sarowe@syr.edu>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Cesar,

On 02/11/2008 at 2:19 PM, Cesar Ronchese wrote:
> I'm running problems with document deletion.
> [...]
> This simply doesn't delete anything from the Index.
>=20
> //see the code sample:=20
> //"theFieldName" was previously stored as Field.Store.YES and =
Field.Index.TOKENIZED.=20
> Term t =3D new Terms("theFieldName", "theFieldContent");
> objIndexReader.DeleteDocuments(t);

(You have two typos here - "new Term/s/" and /D/eleteDocuments() - I =
assume that this is just a transcription error, since you must have =
gotten this code to run...)

When you construct a Term instance, no analysis will be performed on =
"theFieldContent".  Since "theFieldName" is TOKENIZED, it was analyzed, =
and this is likely where the mismatch is occurring.  From =
<http://lucene.apache.org/java/2_3_0/api/org/apache/lucene/index/IndexRea=
der.html#deleteDocuments(org.apache.lucene.index.Term)>:

    This is useful if one uses a document field to
    hold a unique ID string for the document.

If you're trying to delete documents based on a document ID held as the =
entire value of a field, then you should be using =
Field.Index.UN_TOKENIZED.  From =
http://lucene.apache.org/java/2_3_0/api/org/apache/lucene/document/Field.=
Index.html#UN_TOKENIZED>:

   Index the field's value without using an Analyzer,
   so it can be searched. As no analyzer is used the
   value will be stored as a single term. This is
   useful for unique Ids like product numbers.

> 2) DeleteDocument(numDoc) <=3D=3D this problem is a woot problem
>=20
> [...]
>=20
> I mean, if I call objIndexReader.DeleteDocument(0), it will
> delete the first document from the entire INDEX, not the
> first document in the Hits collection. So, it deleted the
> first documents I have inserted some days ago, in previous
> indexing sessions.

Yes, this is how this method is designed to function.  The javadoc =
description is perhaps too brief: "Deletes the document numbered =
'docNum'".  As you have discovered, "docNum" is the one-up number =
assigned internally by Lucene to each document as it is added to the =
index.
=20
> I ask: is there a way to get the correct docNum from the
> document retrieved in the Hits collection?

Check out Hits.id(int): =
<http://lucene.apache.org/java/2_3_0/api/org/apache/lucene/search/Hits.ht=
ml#id(int)>

The "id" returned by Hits.id(int) is the same thing as the "docNum" =
parameter to IndexReader.deleteDocument(int).

It sounds like the documentation could benefit from some more discussion =
of the "docNum"/document "id" feature...

Steve

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32530-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 11 20:13:18 2008
Return-Path: <java-user-return-32530-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84731 invoked from network); 11 Feb 2008 20:13:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Feb 2008 20:13:18 -0000
Received: (qmail 93169 invoked by uid 500); 11 Feb 2008 20:13:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93145 invoked by uid 500); 11 Feb 2008 20:13:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93134 invoked by uid 99); 11 Feb 2008 20:13:05 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Feb 2008 12:13:05 -0800
X-ASF-Spam-Status: No, hits=1.5 required=10.0
	tests=SPF_PASS,WEIRD_PORT
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [17.148.16.76] (HELO smtpoutm.mac.com) (17.148.16.76)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Feb 2008 20:12:18 +0000
Received: from mac.com (asmtp002-s [10.150.69.65])
	by smtpoutm.mac.com (Xserve/smtpout013/MantshX 4.0) with ESMTP id m1BKCbdo005692
	for <java-user@lucene.apache.org>; Mon, 11 Feb 2008 12:12:37 -0800 (PST)
Received: from [192.168.1.4] (adsl-84-227-0-41.adslplus.ch [84.227.0.41])
	(authenticated bits=0)
	by mac.com (Xserve/asmtp002/MantshX 4.0) with ESMTP id m1BKCLNI010461
	(version=TLSv1/SSLv3 cipher=AES128-SHA bits=128 verify=NO)
	for <java-user@lucene.apache.org>; Mon, 11 Feb 2008 12:12:31 -0800 (PST)
Message-Id: <24A8D5B1-FABC-4D6B-8B1C-175CAB959BDE@mac.com>
From: Petite Abeille <petite_abeille@mac.com>
To: java-user@lucene.apache.org
In-Reply-To: <15412778.post@talk.nabble.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed; delsp=yes
Content-Transfer-Encoding: quoted-printable
Mime-Version: 1.0 (Apple Message framework v915)
Subject: Re: Indexing accented characters, then searching by any form
Date: Mon, 11 Feb 2008 21:12:19 +0100
References: <15412778.post@talk.nabble.com>
X-Mailer: Apple Mail (2.915)
X-Virus-Checked: Checked by ClamAV on apache.org


On Feb 11, 2008, at 4:00 PM, Cesar Ronchese wrote:

> For example:
> Indexed word: usu=E1rio
> Terms typed by the user, to find the word above: usu=E1rio or usuario =
or
> usu=E3rio, etc.

If you feel ambitious, you can try something along the lines of Sean =20
M. Burke's Unidecode!:

http://interglacial.com/~sburke/tpj/as_html/tpj22.html


E.g. searching for 'aaiun':

http://svr225.stepx.com:3388/search?q=3DAai=FAn


Returns 'El Aai=FAn':

http://svr225.stepx.com:3388/el-aaiun


Or perhaps 'eire':

http://svr225.stepx.com:3388/search?q=3Deur


Returns '=C9ire':

http://svr225.stepx.com:3388/eur2-commemorative-coins


Cheers,

PA.=

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32531-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 11 20:34:03 2008
Return-Path: <java-user-return-32531-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96707 invoked from network); 11 Feb 2008 20:34:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Feb 2008 20:34:03 -0000
Received: (qmail 35823 invoked by uid 500); 11 Feb 2008 20:33:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 35797 invoked by uid 500); 11 Feb 2008 20:33:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 35786 invoked by uid 99); 11 Feb 2008 20:33:50 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Feb 2008 12:33:50 -0800
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DATE_IN_PAST_03_06,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of rsivak@istandfor.com designates 72.3.240.46 as permitted sender)
Received: from [72.3.240.46] (HELO mail.istandfor.com) (72.3.240.46)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Feb 2008 20:33:03 +0000
Received: from [192.168.1.101] (dsl254-071-128.nyc1.dsl.speakeasy.net [216.254.71.128])
	(authenticated bits=0)
	by mail.istandfor.com (8.12.11.20060308/8.12.11) with ESMTP id m1BKXM8Q018502
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <java-user@lucene.apache.org>; Mon, 11 Feb 2008 14:33:23 -0600
Message-ID: <47B0793F.6070502@istandfor.com>
Date: Mon, 11 Feb 2008 11:35:11 -0500
From: Ruslan Sivak <rsivak@istandfor.com>
User-Agent: Thunderbird 2.0.0.9 (Windows/20071031)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Distributed Indexes
References: <47AB66AD.2020009@istandfor.com>	 <3056F9B6-ADCE-4FA1-B3FF-DA782E8A96D8@mikemccandless.com>	 <47AB7DAD.9010109@istandfor.com> <359a92830802071540m38075cd7l9c628dc1d565aac2@mail.gmail.com> <47AC7E2F.3010405@istandfor.com> <47AF3A96.2030704@istandfor.com> <2861BD03-0953-4044-8FA9-EAE803EF5CF4@apache.org>
In-Reply-To: <2861BD03-0953-4044-8FA9-EAE803EF5CF4@apache.org>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Basically the index is big is because there is a large number of 
documents, but each individual document is very small.  There is also a 
lot of redundancy, which, I believe is also why the index size is fairly 
small. 

Basically I am using the index to store the user's profile information, 
and then using the similarity search to find similar profiles.  The 
update rate can be fairly high, depending on how many users decide to 
create/update their profiles at the same time. 

The problem arises when many people decide to update their profiles, and 
the windows file replication service doesn't get a chance to synchronize 
the folders between updates.  (It's possible for two people to make 
updates at the same time, on different servers). 

I'm thinking of maybe subclassing a Directory or FSDirectory and 
overriding it to read and write from a database.  Would this work, or is 
there a better solution?

Russ



Grant Ingersoll wrote:
> Solr has a strategy using rsync that makes it relatively easy to copy 
> an index around to other servers.  It uses rsync to just copy the 
> diffs, so you could easily mirror this in your application.
>
> There is no SQL backend for Lucene, but at 4mb you could certainly 
> serialize it as a blob to a SQL db, but I don't see how that would 
> make it faster.
>
> Also, you said it takes a long time to create a 4mb index.  Does this 
> mean you are doing something really, really complex during analysis?  
> I guess what I am missing, and I think others have hinted at, is the 
> big picture isn't quite clear in our minds, because the size of the 
> index seems almost trivially small in Lucene terms, so we would think 
> that a) It would be really fast to create the index (seconds, not 
> minutes) and b) such a small index could be easily held entirely in 
> memory and should easily handle a very, very, high query rate given 
> reasonable hardware, which it sounds like you have.  The other piece 
> that doesn't fit in my mind is it sounds like you have a fairly high 
> update rate since you are getting writes before your 4mb index can be 
> copied on a local network, right?  This implies that you must also 
> have a lot of deletes otherwise your index would be growing 
> significantly.
>
> Thus, more details on what you are doing, how you are creating your 
> index, how your CF app talks to Lucene, etc. would be good.
>
> -Grant
>
>
> On Feb 10, 2008, at 12:55 PM, Ruslan Sivak wrote:
>
>> So nobody's run into anything like this before?  The need to share 
>> the index between many copies of the app possibly running on multiple 
>> servers?
>>
>> Russ
>>
>> Ruslan Sivak wrote:
>>> The app does other things then search the index.  I'm basically 
>>> using ColdFusion for the website and have four instances running on 
>>> two servers for load balancing.  Each app does the searches, and the 
>>> search times are small, the index is small, but it takes a long time 
>>> to fully create the index (several minutes), and I would like the 
>>> index to always be up to date (which is why i replicate the changes).
>>> I basically cache the index for several minutes in a RamDirectory, 
>>> which works quite well for performance.  If I could store the index 
>>> in a SQL Table or something, I can have a single place where the 
>>> index lives and atomic updates.
>>> Is there a SQL Backend for the index, or should I just take the 
>>> RamDirectory, serialize it and store it as a BLOB?
>>>
>>> Russ
>>>
>>> Erick Erickson wrote:
>>>> With an index that small, I wonder why you bother with so many copies?
>>>> What kind of load are you hitting it with and how complex are the 
>>>> queries?
>>>>
>>>> Because unless you have *very* high query rate, I'd look at why my 
>>>> queries
>>>> were
>>>> taking so long before complexifying things this way.
>>>>
>>>> Best
>>>> Erick
>>>>
>>>> On Feb 7, 2008 4:52 PM, Ruslan Sivak <rsivak@istandfor.com> wrote:
>>>>
>>>>
>>>>> My index is only 4mb.  Is there a SQL backend for Lucene?
>>>>>
>>>>> Russ
>>>>>
>>>>> Michael McCandless wrote:
>>>>>
>>>>>> If you're able to tell Windows FRS which specific files to copy, 
>>>>>> then
>>>>>> SnapshotDeletionPolicy (in 2.3) should work for this.
>>>>>>
>>>>>> It basically protects a consistent snapshot of your index, ensuring
>>>>>> those files will not be deleted, while not blocking further 
>>>>>> updates to
>>>>>> the index.
>>>>>>
>>>>>> Mike
>>>>>>
>>>>>> Ruslan Sivak wrote:
>>>>>>
>>>>>>
>>>>>>> I'm wondering if this is a problem that lucene users have already
>>>>>>> tackled.  I have four copies of the application using a lucene
>>>>>>> index.  They are located on two physical servers with two copies on
>>>>>>> each server accessing two copies of the lucene index.  I use 
>>>>>>> Windows
>>>>>>> FRS (File Replication Service) to replicate the index between 
>>>>>>> the two
>>>>>>> servers.
>>>>>>> Things work well most of the time, but sometimes, I believe under
>>>>>>> load, the index doesn't get a chance to propagate before another
>>>>>>> write takes place and it gets corrupted.
>>>>>>> What would you recommend I use to keep the index in sync between 
>>>>>>> the
>>>>>>> four copies of the app?
>>>>>>>
>>>>>>> Russ
>>>>>>>
>>>>>>> --------------------------------------------------------------------- 
>>>>>>>
>>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>>
>>>>>>>
>>>>>> --------------------------------------------------------------------- 
>>>>>>
>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>
>>>>> ---------------------------------------------------------------------
>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>
>>>>>
>>>>>
>>>>
>>>>
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
> --------------------------
> Grant Ingersoll
> http://lucene.grantingersoll.com
> http://www.lucenebootcamp.com
>
> Lucene Helpful Hints:
> http://wiki.apache.org/lucene-java/BasicsOfPerformance
> http://wiki.apache.org/lucene-java/LuceneFAQ
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32532-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 11 20:40:22 2008
Return-Path: <java-user-return-32532-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99752 invoked from network); 11 Feb 2008 20:40:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Feb 2008 20:40:22 -0000
Received: (qmail 46830 invoked by uid 500); 11 Feb 2008 20:40:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46791 invoked by uid 500); 11 Feb 2008 20:40:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46780 invoked by uid 99); 11 Feb 2008 20:40:09 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Feb 2008 12:40:09 -0800
X-ASF-Spam-Status: No, hits=3.7 required=10.0
	tests=DNS_FROM_OPENWHOIS,FORGED_HOTMAIL_RCVD2,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Feb 2008 20:39:38 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1JOfRK-00028S-6k
	for java-user@lucene.apache.org; Mon, 11 Feb 2008 12:39:46 -0800
Message-ID: <15420001.post@talk.nabble.com>
Date: Mon, 11 Feb 2008 12:39:46 -0800 (PST)
From: Cesar Ronchese <ronchese@hotmail.com>
To: java-user@lucene.apache.org
Subject: RE: Delete problems    O.O
In-Reply-To: <9294E20AED46934EA459020706463F947EB963@SUEXCL-02.ad.syr.edu>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: ronchese@hotmail.com
References: <15418663.post@talk.nabble.com> <9294E20AED46934EA459020706463F947EB963@SUEXCL-02.ad.syr.edu>
X-Virus-Checked: Checked by ClamAV on apache.org


Cool man. 

The Hits.id(int) worked fine. Thanks for the detailed info. 

And hopefully your answer is going to usefull for future Google searches. ;)

Cesar



Steven A Rowe wrote:
> 
> Hi Cesar,
> 
> On 02/11/2008 at 2:19 PM, Cesar Ronchese wrote:
>> I'm running problems with document deletion.
>> [...]
>> This simply doesn't delete anything from the Index.
>> 
>> //see the code sample: 
>> //"theFieldName" was previously stored as Field.Store.YES and
>> Field.Index.TOKENIZED. 
>> Term t = new Terms("theFieldName", "theFieldContent");
>> objIndexReader.DeleteDocuments(t);
> 
> (You have two typos here - "new Term/s/" and /D/eleteDocuments() - I
> assume that this is just a transcription error, since you must have gotten
> this code to run...)
> 
> When you construct a Term instance, no analysis will be performed on
> "theFieldContent".  Since "theFieldName" is TOKENIZED, it was analyzed,
> and this is likely where the mismatch is occurring.  From
> <http://lucene.apache.org/java/2_3_0/api/org/apache/lucene/index/IndexReader.html#deleteDocuments(org.apache.lucene.index.Term)>:
> 
>     This is useful if one uses a document field to
>     hold a unique ID string for the document.
> 
> If you're trying to delete documents based on a document ID held as the
> entire value of a field, then you should be using
> Field.Index.UN_TOKENIZED.  From
> http://lucene.apache.org/java/2_3_0/api/org/apache/lucene/document/Field.Index.html#UN_TOKENIZED>:
> 
>    Index the field's value without using an Analyzer,
>    so it can be searched. As no analyzer is used the
>    value will be stored as a single term. This is
>    useful for unique Ids like product numbers.
> 
>> 2) DeleteDocument(numDoc) <== this problem is a woot problem
>> 
>> [...]
>> 
>> I mean, if I call objIndexReader.DeleteDocument(0), it will
>> delete the first document from the entire INDEX, not the
>> first document in the Hits collection. So, it deleted the
>> first documents I have inserted some days ago, in previous
>> indexing sessions.
> 
> Yes, this is how this method is designed to function.  The javadoc
> description is perhaps too brief: "Deletes the document numbered
> 'docNum'".  As you have discovered, "docNum" is the one-up number assigned
> internally by Lucene to each document as it is added to the index.
>  
>> I ask: is there a way to get the correct docNum from the
>> document retrieved in the Hits collection?
> 
> Check out Hits.id(int):
> <http://lucene.apache.org/java/2_3_0/api/org/apache/lucene/search/Hits.html#id(int)>
> 
> The "id" returned by Hits.id(int) is the same thing as the "docNum"
> parameter to IndexReader.deleteDocument(int).
> 
> It sounds like the documentation could benefit from some more discussion
> of the "docNum"/document "id" feature...
> 
> Steve
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/Delete-problems----O.O-tp15418663p15420001.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32533-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 11 21:50:47 2008
Return-Path: <java-user-return-32533-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35721 invoked from network); 11 Feb 2008 21:50:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Feb 2008 21:50:47 -0000
Received: (qmail 81675 invoked by uid 500); 11 Feb 2008 21:50:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81634 invoked by uid 500); 11 Feb 2008 21:50:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81623 invoked by uid 99); 11 Feb 2008 21:50:34 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Feb 2008 13:50:34 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [130.107.64.135] (HELO Balboa.AI.SRI.COM) (130.107.64.135)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Feb 2008 21:49:49 +0000
Received: from Balboa.AI.SRI.COM (localhost [127.0.0.1])
	by Balboa.AI.SRI.COM (8.11.7p2+Sun/8.10.1) with SMTP id m1BLo8125480
	for <java-user@lucene.apache.org>; Mon, 11 Feb 2008 13:50:08 -0800 (PST)
Received: from Salt.AI.SRI.COM ([130.107.65.211])
 by Balboa.AI.SRI.COM (SMSSMTP 4.1.9.35) with SMTP id M2008021113500712656
 for <java-user@lucene.apache.org>; Mon, 11 Feb 2008 13:50:07 -0800
Received: from localhost.ai.sri.com
	([127.0.0.1] helo=[130.107.65.199] ident=root)
	by Salt.AI.SRI.COM with asmtp (Exim 3.35 #1 (Debian))
	id 1JOgXP-0001iA-00
	for <java-user@lucene.apache.org>; Mon, 11 Feb 2008 13:50:07 -0800
Message-ID: <47B0C30F.2090902@ai.sri.com>
Date: Mon, 11 Feb 2008 13:50:07 -0800
From: Jay <yu@AI.SRI.COM>
User-Agent: Thunderbird 2.0.0.9 (Windows/20071031)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: update field boost
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

It's clear that there is no easy way to do "in-place" doc update in the 
lucene index, but I think it should be theoretically possible to update 
the field and doc boostings in place, that is, without deleting and 
re-adding the doc and it's fields. Does anyone know how?

Thanks!

Jay

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32534-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 11 22:49:49 2008
Return-Path: <java-user-return-32534-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 66173 invoked from network); 11 Feb 2008 22:49:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Feb 2008 22:49:49 -0000
Received: (qmail 69442 invoked by uid 500); 11 Feb 2008 22:49:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68891 invoked by uid 500); 11 Feb 2008 22:49:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68880 invoked by uid 99); 11 Feb 2008 22:49:37 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Feb 2008 14:49:37 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.162.180] (HELO el-out-1112.google.com) (209.85.162.180)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Feb 2008 22:49:05 +0000
Received: by el-out-1112.google.com with SMTP id m34so1982727ele.11
        for <java-user@lucene.apache.org>; Mon, 11 Feb 2008 14:49:11 -0800 (PST)
Received: by 10.142.110.3 with SMTP id i3mr474918wfc.178.1202770150329;
        Mon, 11 Feb 2008 14:49:10 -0800 (PST)
Received: from ?10.17.4.4? ( [71.174.108.74])
        by mx.google.com with ESMTPS id i39sm587424wxd.7.2008.02.11.14.49.09
        (version=TLSv1/SSLv3 cipher=OTHER);
        Mon, 11 Feb 2008 14:49:09 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v753)
Content-Transfer-Encoding: 7bit
Message-Id: <DF612154-5458-4D28-8E6C-039352666AA8@mikemccandless.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
To: java-user@lucene.apache.org
From: Michael McCandless <lucene@mikemccandless.com>
Subject: corruption issue with 2.3 and autoCommit=false
Date: Mon, 11 Feb 2008 17:49:53 -0500
X-Mailer: Apple Mail (2.753)
X-Virus-Checked: Checked by ClamAV on apache.org


Heads up!

We are working through what looks like an index corruption issue when  
you use autoCommit=false with IndexWriter, in Lucene 2.3, so please  
try to avoid doing so if you can...

Details are here:

     https://issues.apache.org/jira/browse/LUCENE-1173

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32535-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 12 00:14:26 2008
Return-Path: <java-user-return-32535-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89678 invoked from network); 12 Feb 2008 00:14:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Feb 2008 00:14:24 -0000
Received: (qmail 86116 invoked by uid 500); 12 Feb 2008 00:14:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86091 invoked by uid 500); 12 Feb 2008 00:14:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86080 invoked by uid 99); 12 Feb 2008 00:14:11 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Feb 2008 16:14:11 -0800
X-ASF-Spam-Status: No, hits=3.7 required=10.0
	tests=DNS_FROM_OPENWHOIS,FORGED_HOTMAIL_RCVD2,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Feb 2008 00:13:26 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1JOimQ-0002Ew-Rh
	for java-user@lucene.apache.org; Mon, 11 Feb 2008 16:13:46 -0800
Message-ID: <15423851.post@talk.nabble.com>
Date: Mon, 11 Feb 2008 16:13:46 -0800 (PST)
From: Cesar Ronchese <ronchese@hotmail.com>
To: java-user@lucene.apache.org
Subject: Re: Indexing accented characters, then searching by any form
In-Reply-To: <359a92830802111051y745c3eaucc8bc32215d7e44e@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: ronchese@hotmail.com
References: <15412778.post@talk.nabble.com> <359a92830802110756n32de7f55ye4fd7d00e46ee7af@mail.gmail.com> <15415770.post@talk.nabble.com> <359a92830802111051y745c3eaucc8bc32215d7e44e@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Well, it is done now.

As final result, I surrended myself to "double-storing". This way, I have
indexed the original text with COMPRESSED option to save some space.

And to highlight the results correctly, I made some matching between
unaccented-words and original words by regular expressions, and the results
is satisfactory.

Thanks all for the brainstorming ^^
Cesar





Erick Erickson wrote:
> 
> See below...
> 
> 
> On Feb 11, 2008 12:17 PM, Cesar Ronchese <ronchese@hotmail.com> wrote:
> 
>>
>> Hey, Erick. You inferred right.
>>
>> I analized your code and it looks like a common Indexing and Searching
>> code.
>> Are you sure you pasted the correct code? :P
>>
> 
> Did you try to run it? It's just a self-contained example showing that
> searching
> and displaying are distinct.
> 
> The indexer part indexes a mixed-case string. The search is then
> performed on a lower-case string, and the println shows that a
> document was found. The next println echoes back the stored text
> showing that the original was stored. Just substitute your preferred
> filter to see how this would work for you.
> 
> 
> 
>>
>> Anyways, is the concept about doubling storing data, one content with
>> accents and other without? If yes, I did it earlier, but once I search in
>> the non-accent content and show accent content, the HitHighlighter will
>> now
>> work properly.
>> --
>>
> 
> Is this a typo or is your problem solved? I confess that haven't had the
> necessity to use the highlighter package yet, so I may be missing
> something...
> 
> But you're not really "double storing". You'll find that indexed code
> takes
> MUCH less space than you would think, nowhere near the amount
> required to store the data too. So there's good reason to separate the
> two.
> 
> You have no choice except to store the data if you want the user to see
> something pretty.....
> 
> Erick
> 
> 
>>
>> View this message in context:
>> http://www.nabble.com/Indexing-accented-characters%2C-then-searching-by-any-form-tp15412778p15415770.html
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
> 
> 

-- 
View this message in context: http://www.nabble.com/Indexing-accented-characters%2C-then-searching-by-any-form-tp15412778p15423851.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32536-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 12 01:00:01 2008
Return-Path: <java-user-return-32536-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5728 invoked from network); 12 Feb 2008 01:00:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Feb 2008 01:00:00 -0000
Received: (qmail 21402 invoked by uid 500); 12 Feb 2008 00:59:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21370 invoked by uid 500); 12 Feb 2008 00:59:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21359 invoked by uid 99); 12 Feb 2008 00:59:48 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Feb 2008 16:59:48 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of jake.mannix@gmail.com designates 64.233.178.241 as permitted sender)
Received: from [64.233.178.241] (HELO hs-out-0708.google.com) (64.233.178.241)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Feb 2008 00:59:15 +0000
Received: by hs-out-0708.google.com with SMTP id 54so76686hsz.5
        for <java-user@lucene.apache.org>; Mon, 11 Feb 2008 16:59:22 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        bh=t9KxpXZJMD1VSsLI5LCYi4VIiQQS1CHeRPTjyNx85rw=;
        b=tzwGdEvNhooOVJEbpj52r15i3hrNzJdtyKd1UUxL9m0pHeNcNQvuhF0LoxA8MCF1viPsWsxl4usvyzVl/2mOk8gtgmmuKNcjgfYDiiAIZMTmgWwn6nBGR3I3I+alG9l/pSjvIPMzsM3DauD0cdMhys92+7FgJuS2+THyz3//3dE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=If62SHvcfpbIE7f9kFTu2P/+bZ4OKuzf9z7J9kJRNTpYx83Fq5/ciLR0+PJO/m1aZZGrXW1p2ye0WuqawOrGsdgb3ooNk+dumwSfgpmA6wdLNILk5ANUJCXX9gKfedRHgscYD4TIXO/mgkMwKBYrG0rDKEi/DwfhDFTpsuQ02OM=
Received: by 10.100.132.2 with SMTP id f2mr1415044and.11.1202777962482;
        Mon, 11 Feb 2008 16:59:22 -0800 (PST)
Received: by 10.100.46.17 with HTTP; Mon, 11 Feb 2008 16:59:22 -0800 (PST)
Message-ID: <4b124c310802111659k2a464024lb3ed07daeb17f525@mail.gmail.com>
Date: Tue, 12 Feb 2008 00:59:22 +0000
From: "Jake Mannix" <jake.mannix@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: How to promote an unstemmed match over a stemmed match in an index that's stemmed...
In-Reply-To: <652776090802110956i32f978f0tbee7830873bfbc26@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <652776090802110956i32f978f0tbee7830873bfbc26@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

The way I've always done this was to index two fields: say, "contents"
and "contents_unstemmed",  (using a PerFieldAnalyzer) and then query
on both of them.  This has the double effect of a) boosting unstemmed
hits, because every unstemmed match is also a stemmed one, so the
BooleanQuery combining the stemmed and unstemmed queries gets higher
weight in this case; and b) it allows you to query by *only* the
unstemmed variant if e.g. the user puts their search term in quotes,
indicating they really want an exact match.

  -jake



On 2/11/08, Michael Stoppelman <stopman@gmail.com> wrote:
> Hi all,
> I've got an index with tokens that are stemmed. Sometimes I really need to
> boost the unstemmed
> version of a query word to get the most relevant documents.
>
> Example:
> Query: [olives].
>
> I don't want to match documents with the words: oliver, oliver's, etc...
>
> Since I'm stemming when creating the index is there a way to store both
> versions (stemmed/unstemmed) with
> setIncrementPosition()? Is that the correct way to deal with this? I was
> reading old archives and this didn't seem
> to be a great way decision since it breaks PhraseQuery [1].
>
> It seems like it would be useful if at query scoring time if I could see the
> original string values of the tokens in this case
> at least.
>
> Thanks in advance,
>
> -M
>
> [1] http://www.mail-archive.com/lucene-user@jakarta.apache.org/msg07416.html
>

-- 
Sent from Gmail for mobile | mobile.google.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32537-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 12 04:54:36 2008
Return-Path: <java-user-return-32537-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85752 invoked from network); 12 Feb 2008 04:54:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Feb 2008 04:54:36 -0000
Received: (qmail 96434 invoked by uid 500); 12 Feb 2008 04:54:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96402 invoked by uid 500); 12 Feb 2008 04:54:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96391 invoked by uid 99); 12 Feb 2008 04:54:24 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Feb 2008 20:54:24 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Feb 2008 04:53:40 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id 637B171C1D6; Mon, 11 Feb 2008 20:54:01 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id 6072171C1BD
	for <java-user@lucene.apache.org>; Mon, 11 Feb 2008 20:54:01 -0800 (PST)
Date: Mon, 11 Feb 2008 20:54:01 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: update field boost
In-Reply-To: <47B0C30F.2090902@ai.sri.com>
Message-ID: <Pine.LNX.4.62.0802112052180.7255@radix.cryptio.net>
References: <47B0C30F.2090902@ai.sri.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: It's clear that there is no easy way to do "in-place" doc update in the lucene
: index, but I think it should be theoretically possible to update the field and
: doc boostings in place, that is, without deleting and re-adding the doc and
: it's fields. Does anyone know how?

boosts are folded into the norm, which is mutable using 
IndexReader.setNorm



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32538-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 12 05:15:09 2008
Return-Path: <java-user-return-32538-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90841 invoked from network); 12 Feb 2008 05:15:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Feb 2008 05:15:09 -0000
Received: (qmail 16028 invoked by uid 500); 12 Feb 2008 05:14:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15723 invoked by uid 500); 12 Feb 2008 05:14:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15712 invoked by uid 99); 12 Feb 2008 05:14:57 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Feb 2008 21:14:57 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [130.107.64.135] (HELO Balboa.AI.SRI.COM) (130.107.64.135)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Feb 2008 05:14:12 +0000
Received: from Balboa.AI.SRI.COM (localhost [127.0.0.1])
	by Balboa.AI.SRI.COM (8.11.7p2+Sun/8.10.1) with SMTP id m1C5EW109465
	for <java-user@lucene.apache.org>; Mon, 11 Feb 2008 21:14:32 -0800 (PST)
Received: from Salt.AI.SRI.COM ([130.107.65.211])
 by Balboa.AI.SRI.COM (SMSSMTP 4.1.9.35) with SMTP id M2008021121143108976
 for <java-user@lucene.apache.org>; Mon, 11 Feb 2008 21:14:31 -0800
Received: from localhost.ai.sri.com
	([127.0.0.1] helo=[192.168.1.147] ident=root)
	by Salt.AI.SRI.COM with asmtp (Exim 3.35 #1 (Debian))
	id 1JOnTT-00055x-00
	for <java-user@lucene.apache.org>; Mon, 11 Feb 2008 21:14:31 -0800
Message-ID: <47B12C2C.6090908@ai.sri.com>
Date: Mon, 11 Feb 2008 21:18:36 -0800
From: yu <yu@AI.SRI.COM>
User-Agent: Thunderbird 2.0.0.9 (Windows/20071031)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: update field boost
References: <47B0C30F.2090902@ai.sri.com> <Pine.LNX.4.62.0802112052180.7255@radix.cryptio.net>
In-Reply-To: <Pine.LNX.4.62.0802112052180.7255@radix.cryptio.net>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

thanks, Hoss!
I read the doc for the api indexreader.setNorm() after I posted the 
question earlier. To use that setNorm() to modify the field boost, it 
seems to me that one has to know how the boost is folded to the norm (in 
the default impl, it's boost* lengthNorm) and has to know the old norm 
value which is impossible to get without getting all the norms for all 
the docs. Am I missing other apis to use?

Jay

Chris Hostetter wrote:
> : It's clear that there is no easy way to do "in-place" doc update in the lucene
> : index, but I think it should be theoretically possible to update the field and
> : doc boostings in place, that is, without deleting and re-adding the doc and
> : it's fields. Does anyone know how?
>
> boosts are folded into the norm, which is mutable using 
> IndexReader.setNorm
>
>
>
> -Hoss
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>   

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32539-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 12 05:35:16 2008
Return-Path: <java-user-return-32539-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95820 invoked from network); 12 Feb 2008 05:35:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Feb 2008 05:35:16 -0000
Received: (qmail 30387 invoked by uid 500); 12 Feb 2008 05:35:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30355 invoked by uid 500); 12 Feb 2008 05:35:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30344 invoked by uid 99); 12 Feb 2008 05:35:03 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Feb 2008 21:35:03 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Feb 2008 05:34:19 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id CE2A771C2BD; Mon, 11 Feb 2008 21:34:39 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id C301571C2B5
	for <java-user@lucene.apache.org>; Mon, 11 Feb 2008 21:34:39 -0800 (PST)
Date: Mon, 11 Feb 2008 21:34:39 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: update field boost
In-Reply-To: <47B12C2C.6090908@ai.sri.com>
Message-ID: <Pine.LNX.4.62.0802112125460.7255@radix.cryptio.net>
References: <47B0C30F.2090902@ai.sri.com> <Pine.LNX.4.62.0802112052180.7255@radix.cryptio.net>
 <47B12C2C.6090908@ai.sri.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: I read the doc for the api indexreader.setNorm() after I posted the question
: earlier. To use that setNorm() to modify the field boost, it seems to me that
: one has to know how the boost is folded to the norm (in the default impl, it's
: boost* lengthNorm) and has to know the old norm value which is impossible to
: get without getting all the norms for all the docs. Am I missing other apis to
: use?

you might wnat to take a look at FieldNormModifier ... it doesn't deal 
with boosts, but it shows how you can figure out the length part of the
norm.

what you are attempting is definitly non trivial, computing a norm is a 
one way function of several inputs -- you can't recompute a new norm by 
changing only one of the inputs, you have to know what all of the other 
orriginal inputs were.



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32540-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 12 06:55:27 2008
Return-Path: <java-user-return-32540-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89692 invoked from network); 12 Feb 2008 06:55:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Feb 2008 06:55:27 -0000
Received: (qmail 91993 invoked by uid 500); 12 Feb 2008 06:55:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91954 invoked by uid 500); 12 Feb 2008 06:55:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 91943 invoked by uid 99); 12 Feb 2008 06:55:15 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Feb 2008 22:55:15 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of nileshbansal@gmail.com designates 209.85.146.180 as permitted sender)
Received: from [209.85.146.180] (HELO wa-out-1112.google.com) (209.85.146.180)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Feb 2008 06:54:44 +0000
Received: by wa-out-1112.google.com with SMTP id j40so2764697wah.11
        for <java-user@lucene.apache.org>; Mon, 11 Feb 2008 22:54:52 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        bh=VjZzAvUQW0/ZwVgCK4R9Ec7l9UuxhCvAw5dUfleO1kY=;
        b=YkNxvnyd62d2Opr4y+fN89WpX6Og5OfeWAQjnjTJYxOORw771xumqRYXNEFnRQgRYMZvW8jq4znce0XOku3LrI9YZ1v0tfKYtX8FVbugdw3Ipflz7DKvF4S9HtDxq8AFlM1lgA7OJAAASay67Y4FePCkiLHsoQmOjBtFRf595b0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=r4tGQBFFWFGtHBbyHTn4gh33ogh69pGHJ85DCOa4ulIH+kPKxxCFHdBgWABz0m9qUqKESYkG/eriLut6RBZ5F1IH0RFgUtIvukazaZQ5aQnaMQIVBUWiXudw+1Uoq5LJSbV7TQ2Y9ORW+Iy6y9zvbej/Y82qbLP2X93MbQYcmdU=
Received: by 10.114.27.20 with SMTP id a20mr1031960waa.101.1202799292369;
        Mon, 11 Feb 2008 22:54:52 -0800 (PST)
Received: by 10.114.194.20 with HTTP; Mon, 11 Feb 2008 22:54:52 -0800 (PST)
Message-ID: <f36128690802112254hbed44dbs2ddfc44c61203f25@mail.gmail.com>
Date: Tue, 12 Feb 2008 01:54:52 -0500
From: "Nilesh Bansal" <nileshbansal@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene syntax query matched against a string content
In-Reply-To: <359a92830802080523g65d70647sf3cb381aec089989@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <f36128690802072048y20c51242k5fd716840efb1f3f@mail.gmail.com>
	 <359a92830802080523g65d70647sf3cb381aec089989@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Excellent. MemoryIndex solves the problem. I didn't knew about this
index. Thanks.

-Nilesh

On Feb 8, 2008 8:23 AM, Erick Erickson <erickerickson@gmail.com> wrote:
> You might want to check out MemoryIndex before rejecting putting a single
> doc in memory and searching against it. It's quite fast, although whether
> it'll
> work in your situation only measurement will tell. It's in contrib as I
> remember.
>
> Erick
>
>
> On Feb 7, 2008 11:48 PM, Nilesh Bansal <nileshbansal@gmail.com> wrote:
>
> > Hi,
> >
> > I want to create a function, which takes in a query string (in lucene
> > syntax), and a string as content and returns back if the query matches
> > the content or not. This would mean,
> >
> > query = +(apache) +(lucene OR httpd)
> >
> > will match
> >
> > content = HTTPD by Apache foundation is one of the most popular open
> > source projects
> >
> > and will not match
> >
> > content = Lucene and httpd are projects from same open source foundation
> >
> > Basically, I need to fill in the contents of the following Java
> > function. This should be easy to do, but I don't know how. I obviously
> > don't want to create a dummy lucene index in memory with a single
> > document and then search for the query against that (for performance
> > reasons).
> >
> > public static boolean isRelevant(String luceneQuery, String contents) {
> >  // TODO fill in
> > }
> >
> > Instead of boolean, it could return a relevance score, which will be
> > zero if the query is not relevant to the document.
> >
> > Any help will be appreciated.
> >
> > thanks
> > Nilesh
> >
> > --
> > Nilesh Bansal
> >
>
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>



-- 
Nilesh Bansal

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32541-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 12 06:57:54 2008
Return-Path: <java-user-return-32541-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90334 invoked from network); 12 Feb 2008 06:57:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Feb 2008 06:57:53 -0000
Received: (qmail 95190 invoked by uid 500); 12 Feb 2008 06:57:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95160 invoked by uid 500); 12 Feb 2008 06:57:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95149 invoked by uid 99); 12 Feb 2008 06:57:41 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Feb 2008 22:57:41 -0800
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [220.227.179.21] (HELO Kecgate03.infosys.com) (220.227.179.21)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Feb 2008 06:56:55 +0000
Received: from indhubbhs01.ad.infosys.com ([192.168.200.81]) by Kecgate03.infosys.com with InterScan Message Security Suite; Tue, 12 Feb 2008 12:28:34 +0530
Received: from blrkechub02.ad.infosys.com ([10.66.236.42]) by indhubbhs01.ad.infosys.com with Microsoft SMTPSVC(6.0.3790.3959);
	 Tue, 12 Feb 2008 12:27:10 +0530
Received: from BLRKECMBX06.ad.infosys.com ([10.66.236.32]) by
 blrkechub02.ad.infosys.com ([10.66.236.42]) with mapi; Tue, 12 Feb 2008
 12:27:10 +0530
From: Allahbaksh Mohammedali Asadullah <Allahbaksh_Asadullah@infosys.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Tue, 12 Feb 2008 12:27:08 +0530
Subject: RE: Getting Payload from Hits
Thread-Topic: Getting Payload from Hits
Thread-Index: AchsynSf0SoymlH0SQezo1pvlc9FWwAbXgaA
Message-ID: <68959F25CDEBCB4F917D5A253291D73E07CDA662BD@BLRKECMBX06.ad.infosys.com>
References: <68959F25CDEBCB4F917D5A253291D73E07CDA66045@BLRKECMBX06.ad.infos
	ys.com> <65904997-3559-4502-BBB7-8CE512A1E848@gmail.com>
 	<68959F25CDEBCB4F917D5A253291D73E07CDA66088@BLRKECMBX06.ad.infosys.com>
 <66FB2872-F22B-465D-AC7D-86665B998989@gmail.com>
In-Reply-To: <66FB2872-F22B-465D-AC7D-86665B998989@gmail.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0
X-OriginalArrivalTime: 12 Feb 2008 06:57:10.0717 (UTC) FILETIME=[7D488ED0:01C86D44]
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,
Karl thanks for the reply. But I am not able follow you. Should I extend Qu=
ery class and How should I get matching term. Can you please elaborate on i=
t.
Regards,
Allahbakhs




-----Original Message-----
From: Karl Wettin [mailto:karl.wettin@gmail.com]
Sent: Monday, February 11, 2008 9:53 PM
To: java-user@lucene.apache.org
Subject: Re: Getting Payload from Hits

You would have to collect the payloads from matching terms by
extending a query.

See this recent thread:
http://www.nabble.com/Faceting-with-payloads-td15322956.html#a15322956

Are you sure this is what you want to do? What is it you store in the
payloads, and how do you plan to use this information once you have
retreived it?


    karl

11 feb 2008 kl. 16.51 skrev Allahbaksh Mohammedali Asadullah:

>
> Hi,
> Thanks for the reply. But is there any way that from the search
> result I can get Payload.
>
> See my requirement is when user search for some field I want to
> display also additional data which is stored as Payload.
>
> Regards,
> Allahbaksh
>
>
>
>
> -----Original Message-----
> From: Karl Wettin [mailto:karl.wettin@gmail.com]
> Sent: Monday, February 11, 2008 8:52 PM
> To: java-user@lucene.apache.org
> Subject: Re: Getting Payload from Hits
>
>
> 11 feb 2008 kl. 14.46 skrev Allahbaksh Mohammedali Asadullah:
>
>> d.add(new Field("f1", "This field has no payloads", Field.Store.NO,
>> Field.Index.TOKENIZED));
>> d.add(new Field("f2", "This field has payloads in all docs",
>> Field.Store.YES, Field.Index.TOKENIZED));
>
>> Document doc =3D hits.doc(i);
>>
>> Here I want to get the value of payload for the field..
>
> Are you confusing payloads with stored field values?
>
> You retreive the /stored field value/ like this:
>
> doc.get("f2");
>
> You "can not" retreive /payloads/ from Hits.
>
>
>
>    karl
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> **************** CAUTION - Disclaimer *****************
> This e-mail contains PRIVILEGED AND CONFIDENTIAL INFORMATION
> intended solely for the use of the addressee(s). If you are not the
> intended recipient, please notify the sender by e-mail and delete
> the original message. Further, you are not to copy, disclose, or
> distribute this e-mail or its contents to any other person and any
> such actions are unlawful. This e-mail may contain viruses. Infosys
> has taken every reasonable precaution to minimize this risk, but is
> not liable for any damage you may sustain as a result of any virus
> in this e-mail. You should carry out your own virus checks before
> opening the e-mail or attachment. Infosys reserves the right to
> monitor and review the content of all messages sent to or from this
> e-mail address. Messages sent to or from this e-mail address may be
> stored on the Infosys e-mail system.
> ***INFOSYS******** End of Disclaimer ********INFOSYS***


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32542-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 12 12:56:44 2008
Return-Path: <java-user-return-32542-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 16141 invoked from network); 12 Feb 2008 12:56:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Feb 2008 12:56:44 -0000
Received: (qmail 71748 invoked by uid 500); 12 Feb 2008 12:56:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71715 invoked by uid 500); 12 Feb 2008 12:56:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71704 invoked by uid 99); 12 Feb 2008 12:56:31 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Feb 2008 04:56:31 -0800
X-ASF-Spam-Status: No, hits=-2.0 required=10.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [85.158.137.131] (HELO mail148.messagelabs.com) (85.158.137.131)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 12 Feb 2008 12:55:45 +0000
X-VirusChecked: Checked
X-Env-Sender: ulrich.vachon@vidal.fr
X-Msg-Ref: server-8.tower-148.messagelabs.com!1202820965!11032871!1
X-StarScan-Version: 5.5.12.14.2; banners=-,-,-
X-Originating-IP: [212.234.178.68]
Received: (qmail 16531 invoked from network); 12 Feb 2008 12:56:05 -0000
Received: from antares.mmsupport.com (HELO localhost.localdomain) (212.234.178.68)
  by server-8.tower-148.messagelabs.com with SMTP; 12 Feb 2008 12:56:05 -0000
Received: from srv-exch01.france.groupe.intra (srv-exch01.france.groupe.intra [172.16.50.5])
	by localhost.localdomain (Postfix) with ESMTP id AC2EA13FA61
	for <java-user@lucene.apache.org>; Tue, 12 Feb 2008 13:56:04 +0100 (CET)
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C86D76.A08D56F3"
Subject: Inverted letters
Date: Tue, 12 Feb 2008 13:56:04 +0100
Message-ID: <F48F4CC4EAA6034A8DAD3C94AC572B76116F84@srv-exch01.france.groupe.intra>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Inverted letters
Thread-Index: AchtdqAr7k5n2qZNQi2NjPOGEolWQQ==
From: "Ulrich Vachon" <ulrich.vachon@vidal.fr>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01C86D76.A08D56F3
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Hi all,
=20
It's possible to use simplely (without java preprocessing, if possible)
Lucene to find items with this constraints:
=20
I have indexed this word : clamoxyle
I want to find it with this queries : claomxyle, clamoxile, camoxyle.
=20
It is possible?
=20
Thank you,
Ulrich.

------_=_NextPart_001_01C86D76.A08D56F3--

From java-user-return-32543-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 12 13:32:13 2008
Return-Path: <java-user-return-32543-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 24506 invoked from network); 12 Feb 2008 13:32:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Feb 2008 13:32:12 -0000
Received: (qmail 10346 invoked by uid 500); 12 Feb 2008 13:32:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10319 invoked by uid 500); 12 Feb 2008 13:32:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10308 invoked by uid 99); 12 Feb 2008 13:32:00 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Feb 2008 05:32:00 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of spring@gmx.eu designates 213.165.64.20 as permitted sender)
Received: from [213.165.64.20] (HELO mail.gmx.net) (213.165.64.20)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 12 Feb 2008 13:31:15 +0000
Received: (qmail invoked by alias); 12 Feb 2008 13:31:36 -0000
Received: from e178092251.adsl.alicedsl.de (EHLO msrvcn04) [85.178.92.251]
  by mail.gmx.net (mp050) with SMTP; 12 Feb 2008 14:31:36 +0100
X-Authenticated: #2635966
X-Provags-ID: V01U2FsdGVkX1+97bBZ9zS9xUrh+6WF3FkdUmJ/ukdQnokZWaT10g
	xRkprw3kdd5Dk3
From: <spring@gmx.eu>
To: <java-user@lucene.apache.org>
Subject: TermPositionVector
Date: Tue, 12 Feb 2008 14:31:48 +0100
Message-ID: <612BC1CFC1EC4C1990330948B9307C54@msrvcn04>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
Thread-Index: Achte5x7oY+1ulOGS/qE8Lj5IczLDA==
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.3790.4133
X-Y-GMX-Trusted: 0
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

could somebody please explain what the difference between positions and
offsets is?

And: Is there a trick to show theses infos in luke?

Thank you.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32544-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 12 14:17:00 2008
Return-Path: <java-user-return-32544-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36823 invoked from network); 12 Feb 2008 14:17:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Feb 2008 14:17:00 -0000
Received: (qmail 81612 invoked by uid 500); 12 Feb 2008 14:16:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81236 invoked by uid 500); 12 Feb 2008 14:16:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81225 invoked by uid 99); 12 Feb 2008 14:16:47 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Feb 2008 06:16:47 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [208.97.132.5] (HELO spunkymail-a4.g.dreamhost.com) (208.97.132.5)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Feb 2008 14:16:01 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a4.g.dreamhost.com (Postfix) with ESMTP id ED6763B9FD
	for <java-user@lucene.apache.org>; Tue, 12 Feb 2008 06:16:21 -0800 (PST)
Message-Id: <FF7A8980-B345-4183-91D8-CEC95F5EB4B0@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <612BC1CFC1EC4C1990330948B9307C54@msrvcn04>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v915)
Subject: Re: TermPositionVector
Date: Tue, 12 Feb 2008 09:16:21 -0500
References: <612BC1CFC1EC4C1990330948B9307C54@msrvcn04>
X-Mailer: Apple Mail (2.915)
X-Virus-Checked: Checked by ClamAV on apache.org

Position is just relative to other tokens  
(Token.getPositionIncrement()), offsets are character offsets  
(Token.startOffset(), Token.endOffset())

-Grant

On Feb 12, 2008, at 8:31 AM, <spring@gmx.eu> <spring@gmx.eu> wrote:

> Hi,
>
> could somebody please explain what the difference between positions  
> and
> offsets is?
>
> And: Is there a trick to show theses infos in luke?
>
> Thank you.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

--------------------------
Grant Ingersoll
http://lucene.grantingersoll.com
http://www.lucenebootcamp.com

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32545-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 12 14:24:40 2008
Return-Path: <java-user-return-32545-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38710 invoked from network); 12 Feb 2008 14:24:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Feb 2008 14:24:37 -0000
Received: (qmail 90146 invoked by uid 500); 12 Feb 2008 14:24:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90111 invoked by uid 500); 12 Feb 2008 14:24:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90100 invoked by uid 99); 12 Feb 2008 14:24:24 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Feb 2008 06:24:24 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of spring@gmx.eu designates 213.165.64.20 as permitted sender)
Received: from [213.165.64.20] (HELO mail.gmx.net) (213.165.64.20)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 12 Feb 2008 14:23:50 +0000
Received: (qmail invoked by alias); 12 Feb 2008 14:23:56 -0000
Received: from e178092251.adsl.alicedsl.de (EHLO msrvcn04) [85.178.92.251]
  by mail.gmx.net (mp042) with SMTP; 12 Feb 2008 15:23:56 +0100
X-Authenticated: #2635966
X-Provags-ID: V01U2FsdGVkX1/7p1ofC9H7y4e1gYNlEzLstAzQpvyAB2b4EhYrLk
	WWiV2h0R0/9GR1
From: <spring@gmx.eu>
To: <java-user@lucene.apache.org>
References: <612BC1CFC1EC4C1990330948B9307C54@msrvcn04> <FF7A8980-B345-4183-91D8-CEC95F5EB4B0@apache.org>
Subject: RE: TermPositionVector
Date: Tue, 12 Feb 2008 15:24:08 +0100
Message-ID: <CCD130A0512C45E58A62841A161B1CC9@msrvcn04>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
Thread-Index: Achtge3sqhw8b38kRRq20+K9C5dpUQAAI2WQ
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.3790.4133
In-Reply-To: <FF7A8980-B345-4183-91D8-CEC95F5EB4B0@apache.org>
X-Y-GMX-Trusted: 0
X-Virus-Checked: Checked by ClamAV on apache.org

TermA TermB

TermA has position 0 and offset 0
TermB has position 1 and offset 6

Right?

> -----Original Message-----
> From: Grant Ingersoll [mailto:gsingers@apache.org] 
> Sent: Dienstag, 12. Februar 2008 15:16
> To: java-user@lucene.apache.org
> Subject: Re: TermPositionVector
> 
> Position is just relative to other tokens  
> (Token.getPositionIncrement()), offsets are character offsets  
> (Token.startOffset(), Token.endOffset())
> 
> -Grant
> 
> On Feb 12, 2008, at 8:31 AM, <spring@gmx.eu> <spring@gmx.eu> wrote:
> 
> > Hi,
> >
> > could somebody please explain what the difference between 
> positions  
> > and
> > offsets is?
> >
> > And: Is there a trick to show theses infos in luke?
> >
> > Thank you.
> >
> >
> > 
> ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> 
> --------------------------
> Grant Ingersoll
> http://lucene.grantingersoll.com
> http://www.lucenebootcamp.com
> 
> Lucene Helpful Hints:
> http://wiki.apache.org/lucene-java/BasicsOfPerformance
> http://wiki.apache.org/lucene-java/LuceneFAQ
> 
> 
> 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32546-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 12 14:59:40 2008
Return-Path: <java-user-return-32546-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51943 invoked from network); 12 Feb 2008 14:59:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Feb 2008 14:59:39 -0000
Received: (qmail 59906 invoked by uid 500); 12 Feb 2008 14:59:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59869 invoked by uid 500); 12 Feb 2008 14:59:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59858 invoked by uid 99); 12 Feb 2008 14:59:27 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Feb 2008 06:59:27 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.128.185 as permitted sender)
Received: from [209.85.128.185] (HELO fk-out-0910.google.com) (209.85.128.185)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Feb 2008 14:58:56 +0000
Received: by fk-out-0910.google.com with SMTP id z23so4949190fkz.5
        for <java-user@lucene.apache.org>; Tue, 12 Feb 2008 06:59:03 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=MwLMvS88IC1QnHMWCzJUWP6td5gl2BKiwgxBGin+DvY=;
        b=k8JVYUoWvI1Xo73jN7UPy5nAlm3aUqNzqq1GRkCS/i4rVKI4fWnwdIw8XW/XJcJO6bNx2BuVUyBojJcZZ1a/8nsm1PLhS+kGlET7PPNZvrMEA2CupKtFsrMJkTVYWCYkcefmRKbnJhX/PE9GODCor5FwBWZuK6nIlzATkWWj+hg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=wFRM/MnHtFWLlCPaD/EayNhUDqjO5W4kp30JczLEkj/EBwGdMpS5Ma5QuVas9KLfFxT6DyCbanEeCIGwajKDk3Zd2p5xxX+eDBdxxlp09dIiFQABcdt6QN50EIWB49QZDyYEw3imG/QeNkimCkeT1LVaM2zrhngix5Q1mNwf3II=
Received: by 10.82.174.20 with SMTP id w20mr2571013bue.21.1202828305232;
        Tue, 12 Feb 2008 06:58:25 -0800 (PST)
Received: by 10.82.151.7 with HTTP; Tue, 12 Feb 2008 06:58:25 -0800 (PST)
Message-ID: <359a92830802120658md60debat6fa794bc9155dab3@mail.gmail.com>
Date: Tue, 12 Feb 2008 09:58:25 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Inverted letters
In-Reply-To: <F48F4CC4EAA6034A8DAD3C94AC572B76116F84@srv-exch01.france.groupe.intra>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_31490_11365496.1202828305224"
References: <F48F4CC4EAA6034A8DAD3C94AC572B76116F84@srv-exch01.france.groupe.intra>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_31490_11365496.1202828305224
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

You should probably think about synonym analyzers, both at index
time and query time. Because I think you have a problem here....

Let's say you can do what you ask, at query time transform
any of your three options into "clamoxyle". Would it really
be satisfactory to your users to then NOT get any matches on
documents containing "claomxyle" or "clamoxile"? It seems to
me that this would be unsatisfactory.

Erick

On Feb 12, 2008 7:56 AM, Ulrich Vachon <ulrich.vachon@vidal.fr> wrote:

> Hi all,
>
> It's possible to use simplely (without java preprocessing, if possible)
> Lucene to find items with this constraints:
>
> I have indexed this word : clamoxyle
> I want to find it with this queries : claomxyle, clamoxile, camoxyle.
>
> It is possible?
>
> Thank you,
> Ulrich.
>

------=_Part_31490_11365496.1202828305224--

From java-user-return-32547-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 12 15:02:09 2008
Return-Path: <java-user-return-32547-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71780 invoked from network); 12 Feb 2008 15:02:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Feb 2008 15:02:09 -0000
Received: (qmail 68518 invoked by uid 500); 12 Feb 2008 15:01:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68494 invoked by uid 500); 12 Feb 2008 15:01:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68483 invoked by uid 99); 12 Feb 2008 15:01:55 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Feb 2008 07:01:55 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erica.mitchell@iona.com designates 62.221.12.55 as permitted sender)
Received: from [62.221.12.55] (HELO emea-mx1.iona.com) (62.221.12.55)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Feb 2008 15:01:25 +0000
X-IronPort-AV: E=Sophos;i="4.25,341,1199664000"; 
   d="scan'208,217";a="1161491"
Received: from emea-ems1.ionaglobal.com ([10.2.1.125])
  by emea-mx1.iona.com with ESMTP; 12 Feb 2008 15:01:31 +0000
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C86D88.2689F578"
Subject: Has SpanRegexQuery been deprecated in lucene 2.3.0?
Date: Tue, 12 Feb 2008 15:01:30 -0000
Message-ID: <E91104197DA2654DA833B6EB53B6C488032F7BBC@emea-ems1.IONAGLOBAL.COM>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Has SpanRegexQuery been deprecated in lucene 2.3.0?
Thread-Index: AchtiCi3Qsq/GbyiRpmeI6jxJi48uA==
From: "Mitchell, Erica" <Erica.Mitchell@iona.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01C86D88.2689F578
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Hi,
=20
I've downloaded lucene 2.3.0 and the jar lucene-core-2.3.0.jar does not
contain the SpanRegexQuery class.
Has this been deprecated?
=20
Thanks,
Erica

----------------------------
IONA Technologies PLC (registered in Ireland)
Registered Number: 171387
Registered Address: The IONA Building, Shelbourne Road, Dublin 4, Ireland

------_=_NextPart_001_01C86D88.2689F578--

From java-user-return-32548-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 12 15:07:06 2008
Return-Path: <java-user-return-32548-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 23224 invoked from network); 12 Feb 2008 15:07:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Feb 2008 15:07:06 -0000
Received: (qmail 82276 invoked by uid 500); 12 Feb 2008 15:06:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82246 invoked by uid 500); 12 Feb 2008 15:06:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82234 invoked by uid 99); 12 Feb 2008 15:06:53 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Feb 2008 07:06:53 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Feb 2008 15:06:08 +0000
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 4B4CA30EFC20; Tue, 12 Feb 2008 08:06:24 -0700 (MST)
Received: from [10.0.1.198] (va-71-53-211-249.dyn.embarqhsd.net [71.53.211.249])
	by ehatchersolutions.com (Postfix) with ESMTP id CB38B30EFC1F
	for <java-user@lucene.apache.org>; Tue, 12 Feb 2008 08:06:16 -0700 (MST)
Mime-Version: 1.0 (Apple Message framework v753)
In-Reply-To: <E91104197DA2654DA833B6EB53B6C488032F7BBC@emea-ems1.IONAGLOBAL.COM>
References: <E91104197DA2654DA833B6EB53B6C488032F7BBC@emea-ems1.IONAGLOBAL.COM>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <2BABA09C-9AF0-483B-804D-482AB714F7D8@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Has SpanRegexQuery been deprecated in lucene 2.3.0?
Date: Tue, 12 Feb 2008 10:06:11 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.753)
X-Virus-Checked: Checked by ClamAV on apache.org

Erica - it has never been in the core JAR.    It should be available  
in the lucene-regex-2.3.0.jar

	Erik


On Feb 12, 2008, at 10:01 AM, Mitchell, Erica wrote:

> Hi,
>
> I've downloaded lucene 2.3.0 and the jar lucene-core-2.3.0.jar does  
> not
> contain the SpanRegexQuery class.
> Has this been deprecated?
>
> Thanks,
> Erica
>
> ----------------------------
> IONA Technologies PLC (registered in Ireland)
> Registered Number: 171387
> Registered Address: The IONA Building, Shelbourne Road, Dublin 4,  
> Ireland


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32549-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 12 15:41:31 2008
Return-Path: <java-user-return-32549-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 43245 invoked from network); 12 Feb 2008 15:41:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Feb 2008 15:41:31 -0000
Received: (qmail 45867 invoked by uid 500); 12 Feb 2008 15:41:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45828 invoked by uid 500); 12 Feb 2008 15:41:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45817 invoked by uid 99); 12 Feb 2008 15:41:17 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Feb 2008 07:41:17 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [69.44.16.11] (HELO getopt.org) (69.44.16.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Feb 2008 15:40:45 +0000
Received: from [192.168.1.100] ([81.219.54.251])
	(authenticated)
	by getopt.org (8.11.6/8.11.6) with ESMTP id m1CFf0V00736
	for <java-user@lucene.apache.org>; Tue, 12 Feb 2008 09:41:00 -0600
Message-ID: <47B1BDFB.7000403@getopt.org>
Date: Tue, 12 Feb 2008 16:40:43 +0100
From: Andrzej Bialecki <ab@getopt.org>
User-Agent: Thunderbird 2.0.0.9 (Windows/20071031)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: TermPositionVector
References: <612BC1CFC1EC4C1990330948B9307C54@msrvcn04>
In-Reply-To: <612BC1CFC1EC4C1990330948B9307C54@msrvcn04>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

spring@gmx.eu wrote:
> Hi,
> 
> could somebody please explain what the difference between positions and
> offsets is?
> 
> And: Is there a trick to show theses infos in luke?


Not yet :) Funny thing, I've been thinking about adding this to Luke, 
but ran out of time before the last release. Perhaps I'll include it in 
a minor update.


-- 
Best regards,
Andrzej Bialecki     <><
  ___. ___ ___ ___ _ _   __________________________________
[__ || __|__/|__||\/|  Information Retrieval, Semantic Web
___|||__||  \|  ||  |  Embedded Unix, System Integration
http://www.sigram.com  Contact: info at sigram dot com


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32550-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 12 15:55:00 2008
Return-Path: <java-user-return-32550-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53519 invoked from network); 12 Feb 2008 15:55:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Feb 2008 15:55:00 -0000
Received: (qmail 83025 invoked by uid 500); 12 Feb 2008 15:54:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82988 invoked by uid 500); 12 Feb 2008 15:54:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82977 invoked by uid 99); 12 Feb 2008 15:54:47 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Feb 2008 07:54:47 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of spring@gmx.eu designates 213.165.64.20 as permitted sender)
Received: from [213.165.64.20] (HELO mail.gmx.net) (213.165.64.20)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 12 Feb 2008 15:54:14 +0000
Received: (qmail invoked by alias); 12 Feb 2008 15:54:20 -0000
Received: from e178092251.adsl.alicedsl.de (EHLO msrvcn04) [85.178.92.251]
  by mail.gmx.net (mp044) with SMTP; 12 Feb 2008 16:54:20 +0100
X-Authenticated: #2635966
X-Provags-ID: V01U2FsdGVkX18KQC85+wsKNFjVOFhlk/3WErc6SecHcVud8C2voV
	Xs4sjYwWCC5bDt
From: <spring@gmx.eu>
To: <java-user@lucene.apache.org>
References: <612BC1CFC1EC4C1990330948B9307C54@msrvcn04> <47B1BDFB.7000403@getopt.org>
Subject: RE: TermPositionVector
Date: Tue, 12 Feb 2008 16:54:33 +0100
Message-ID: <22608A1B81E24DFEB132A7C983F81573@msrvcn04>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
Thread-Index: AchtjbvhMpnZiF5sQdqpibWmo5lV/gAAcmiA
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.3790.4133
In-Reply-To: <47B1BDFB.7000403@getopt.org>
X-Y-GMX-Trusted: 0
X-Virus-Checked: Checked by ClamAV on apache.org

This would be really nice! 

> -----Original Message-----
> From: Andrzej Bialecki [mailto:ab@getopt.org] 
> Sent: Dienstag, 12. Februar 2008 16:41
> To: java-user@lucene.apache.org
> Subject: Re: TermPositionVector
> 
> spring@gmx.eu wrote:
> > Hi,
> > 
> > could somebody please explain what the difference between 
> positions and
> > offsets is?
> > 
> > And: Is there a trick to show theses infos in luke?
> 
> 
> Not yet :) Funny thing, I've been thinking about adding this to Luke, 
> but ran out of time before the last release. Perhaps I'll 
> include it in 
> a minor update.
> 
> 
> -- 
> Best regards,
> Andrzej Bialecki     <><
>   ___. ___ ___ ___ _ _   __________________________________
> [__ || __|__/|__||\/|  Information Retrieval, Semantic Web
> ___|||__||  \|  ||  |  Embedded Unix, System Integration
> http://www.sigram.com  Contact: info at sigram dot com
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32551-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 12 16:13:54 2008
Return-Path: <java-user-return-32551-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63801 invoked from network); 12 Feb 2008 16:13:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Feb 2008 16:13:54 -0000
Received: (qmail 29743 invoked by uid 500); 12 Feb 2008 16:13:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29709 invoked by uid 500); 12 Feb 2008 16:13:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29698 invoked by uid 99); 12 Feb 2008 16:13:42 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Feb 2008 08:13:42 -0800
X-ASF-Spam-Status: No, hits=1.0 required=10.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of marc.dumontier@thomson.com designates 198.80.156.67 as permitted sender)
Received: from [198.80.156.67] (HELO mailout-tf.thomson.com) (198.80.156.67)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Feb 2008 16:13:11 +0000
Received: from mailout-tf.thomson.com (localhost [127.0.0.1])
	by mailout-tf.thomson.com (Switch-3.2.4/Switch-3.2.4) with ESMTP id m1CGDGDs010480
	for <java-user@lucene.apache.org>; Tue, 12 Feb 2008 16:13:16 GMT
Received: from tfusmabosfe02.ERF.THOMSON.COM (tfusmabosfe02.erf.thomson.com [10.14.6.235])
	by mailout-tf.thomson.com (Switch-3.2.4/Switch-3.2.4) with ESMTP id m1CGDG1H010471
	for <java-user@lucene.apache.org>; Tue, 12 Feb 2008 16:13:16 GMT
Received: from tshusmnnadbh02.ERF.THOMSON.COM ([10.236.128.71]) by tfusmabosfe02.ERF.THOMSON.COM with Microsoft SMTPSVC(6.0.3790.3959);
	 Tue, 12 Feb 2008 11:13:16 -0500
Received: from tshuspaphimbx01.ERF.THOMSON.COM ([10.224.164.128]) by tshusmnnadbh02.ERF.THOMSON.COM with Microsoft SMTPSVC(6.0.3790.3959);
	 Tue, 12 Feb 2008 10:13:15 -0600
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C86D92.2BE66363"
Subject: Getting the number of indexed fields in an index
Date: Tue, 12 Feb 2008 11:13:14 -0500
Message-ID: <629CBB07E28C934D8CA87EF193170E4C01D65A3A@tshuspaphimbx01.ERF.THOMSON.COM>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Getting the number of indexed fields in an index
Thread-Index: AchtkXLA2fQ3z68rSZeTCgwwIAYsmA==
From: <marc.dumontier@thomson.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 12 Feb 2008 16:13:15.0345 (UTC) FILETIME=[2C26C410:01C86D92]
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01C86D92.2BE66363
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: quoted-printable

Hi,

=20

Does anyone have a code snippet which would allow me to ask my index how
many instances of a field are indexed?

=20

=20

Thanks,

=20

Marc Dumontier
Manager, Software Development
Thomson Scientific (Canada)
1 Yonge Street, Suite 1801
Toronto, Ontario M5E 1W7

=20

Direct +1 416 214 3448
Mobile +1 416 454 3147

=20


------_=_NextPart_001_01C86D92.2BE66363--

From java-user-return-32552-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 12 16:18:31 2008
Return-Path: <java-user-return-32552-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65580 invoked from network); 12 Feb 2008 16:18:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Feb 2008 16:18:31 -0000
Received: (qmail 37444 invoked by uid 500); 12 Feb 2008 16:18:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37415 invoked by uid 500); 12 Feb 2008 16:18:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37404 invoked by uid 99); 12 Feb 2008 16:18:18 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Feb 2008 08:18:18 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of patrek@gmail.com designates 209.85.128.188 as permitted sender)
Received: from [209.85.128.188] (HELO fk-out-0910.google.com) (209.85.128.188)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Feb 2008 16:17:46 +0000
Received: by fk-out-0910.google.com with SMTP id z23so4978657fkz.5
        for <java-user@lucene.apache.org>; Tue, 12 Feb 2008 08:17:53 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        bh=Kb209wpeeD+EGu/TOWxrRiaCRPHaEabC3npQF1G5bB0=;
        b=aAo04Iep+7Va01oDElJ+wPG3rTjMdyLi1diRuMfTw6vR08O35ZeOwWbIWkUmCfqo2hexbsfyefwkaN/sykJqLNeOZ/NwdS+v3FYRIfuxpcSjSWEN6xV4eGvCk8jeaUuiRH4syyBEhm5xKULpqCIZhh9eWFgXwQgTSZNW/PGXyTE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=j35ylHjdCtZ+w2fli1R0R9ANhQ0VU3l8tI1bIMZM18yUfTfJ1I3akAUzVgLFczmZ2/gEd78ru/MjqZmxJSUxKnqZN5ECHJc4axfkWjAiwhFzkxg8wvB2pA/l7QOlegxWZ6uqGsG2zr0SN7x9kjmtLiHPZVbzsZXtRkrD8k8cPCw=
Received: by 10.82.106.14 with SMTP id e14mr935516buc.37.1202833073581;
        Tue, 12 Feb 2008 08:17:53 -0800 (PST)
Received: from ?192.168.1.61? ( [132.210.142.98])
        by mx.google.com with ESMTPS id g9sm417706gvc.4.2008.02.12.08.17.51
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Tue, 12 Feb 2008 08:17:52 -0800 (PST)
Message-ID: <47B1C6A7.50905@gmail.com>
Date: Tue, 12 Feb 2008 11:17:43 -0500
From: Patrick <patrek@gmail.com>
User-Agent: Thunderbird 2.0.0.9 (Windows/20071031)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Inverted letters
References: <F48F4CC4EAA6034A8DAD3C94AC572B76116F84@srv-exch01.france.groupe.intra>
In-Reply-To: <F48F4CC4EAA6034A8DAD3C94AC572B76116F84@srv-exch01.france.groupe.intra>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Did you take a look at the 
org.apache.lucene.analysis.ngram.NGramTokenFilter? Or other ngram 
implementation? Works great for us.

Patrick

Ulrich Vachon wrote:
> Hi all,
>  
> It's possible to use simplely (without java preprocessing, if possible)
> Lucene to find items with this constraints:
>  
> I have indexed this word : clamoxyle
> I want to find it with this queries : claomxyle, clamoxile, camoxyle.
>  
> It is possible?
>  
> Thank you,
> Ulrich.
>
>   


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32553-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 12 16:39:43 2008
Return-Path: <java-user-return-32553-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73389 invoked from network); 12 Feb 2008 16:39:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Feb 2008 16:39:42 -0000
Received: (qmail 76186 invoked by uid 500); 12 Feb 2008 16:39:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76156 invoked by uid 500); 12 Feb 2008 16:39:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76141 invoked by uid 99); 12 Feb 2008 16:39:30 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Feb 2008 08:39:30 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [130.107.64.135] (HELO Balboa.AI.SRI.COM) (130.107.64.135)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Feb 2008 16:38:58 +0000
Received: from Balboa.AI.SRI.COM (localhost [127.0.0.1])
	by Balboa.AI.SRI.COM (8.11.7p2+Sun/8.10.1) with SMTP id m1CGd4113638
	for <java-user@lucene.apache.org>; Tue, 12 Feb 2008 08:39:04 -0800 (PST)
Received: from Salt.AI.SRI.COM ([130.107.65.211])
 by Balboa.AI.SRI.COM (SMSSMTP 4.1.9.35) with SMTP id M2008021208390428578
 for <java-user@lucene.apache.org>; Tue, 12 Feb 2008 08:39:04 -0800
Received: from localhost.ai.sri.com
	([127.0.0.1] helo=[130.107.65.199] ident=root)
	by Salt.AI.SRI.COM with asmtp (Exim 3.35 #1 (Debian))
	id 1JOy9w-0000HZ-00
	for <java-user@lucene.apache.org>; Tue, 12 Feb 2008 08:39:04 -0800
Message-ID: <47B1CBA4.7000507@ai.sri.com>
Date: Tue, 12 Feb 2008 08:39:00 -0800
From: Jay <yu@AI.SRI.COM>
User-Agent: Thunderbird 2.0.0.9 (Windows/20071031)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: update field boost
References: <47B0C30F.2090902@ai.sri.com> <Pine.LNX.4.62.0802112052180.7255@radix.cryptio.net> <47B12C2C.6090908@ai.sri.com> <Pine.LNX.4.62.0802112125460.7255@radix.cryptio.net>
In-Reply-To: <Pine.LNX.4.62.0802112125460.7255@radix.cryptio.net>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

It'd be helpful if there is an api for getting the norm of a given field 
in a given doc.
Thanks for the pointers.

Jay

Chris Hostetter wrote:
> : I read the doc for the api indexreader.setNorm() after I posted the question
> : earlier. To use that setNorm() to modify the field boost, it seems to me that
> : one has to know how the boost is folded to the norm (in the default impl, it's
> : boost* lengthNorm) and has to know the old norm value which is impossible to
> : get without getting all the norms for all the docs. Am I missing other apis to
> : use?
> 
> you might wnat to take a look at FieldNormModifier ... it doesn't deal 
> with boosts, but it shows how you can figure out the length part of the
> norm.
> 
> what you are attempting is definitly non trivial, computing a norm is a 
> one way function of several inputs -- you can't recompute a new norm by 
> changing only one of the inputs, you have to know what all of the other 
> orriginal inputs were.
> 
> 
> 
> -Hoss
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32554-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 12 17:52:30 2008
Return-Path: <java-user-return-32554-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98017 invoked from network); 12 Feb 2008 17:52:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Feb 2008 17:52:30 -0000
Received: (qmail 88034 invoked by uid 500); 12 Feb 2008 17:52:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87891 invoked by uid 500); 12 Feb 2008 17:52:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87871 invoked by uid 99); 12 Feb 2008 17:52:17 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Feb 2008 09:52:17 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [130.107.64.135] (HELO Balboa.AI.SRI.COM) (130.107.64.135)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Feb 2008 17:51:32 +0000
Received: from Balboa.AI.SRI.COM (localhost [127.0.0.1])
	by Balboa.AI.SRI.COM (8.11.7p2+Sun/8.10.1) with SMTP id m1CHpp105500
	for <java-user@lucene.apache.org>; Tue, 12 Feb 2008 09:51:51 -0800 (PST)
Received: from Salt.AI.SRI.COM ([130.107.65.211])
 by Balboa.AI.SRI.COM (SMSSMTP 4.1.9.35) with SMTP id M2008021209515102064
 for <java-user@lucene.apache.org>; Tue, 12 Feb 2008 09:51:51 -0800
Received: from localhost.ai.sri.com
	([127.0.0.1] helo=[130.107.65.199] ident=root)
	by Salt.AI.SRI.COM with asmtp (Exim 3.35 #1 (Debian))
	id 1JOzIN-0000lX-00
	for <java-user@lucene.apache.org>; Tue, 12 Feb 2008 09:51:51 -0800
Message-ID: <47B1DCB7.5050505@ai.sri.com>
Date: Tue, 12 Feb 2008 09:51:51 -0800
From: Jay <yu@AI.SRI.COM>
User-Agent: Thunderbird 2.0.0.9 (Windows/20071031)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: update field boost
References: <47B0C30F.2090902@ai.sri.com> <Pine.LNX.4.62.0802112052180.7255@radix.cryptio.net> <47B12C2C.6090908@ai.sri.com> <Pine.LNX.4.62.0802112125460.7255@radix.cryptio.net>
In-Reply-To: <Pine.LNX.4.62.0802112125460.7255@radix.cryptio.net>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Do you know why FieldNormModifier is removed from Lucene 2.3?
thanks.

Jay

Chris Hostetter wrote:
> : I read the doc for the api indexreader.setNorm() after I posted the question
> : earlier. To use that setNorm() to modify the field boost, it seems to me that
> : one has to know how the boost is folded to the norm (in the default impl, it's
> : boost* lengthNorm) and has to know the old norm value which is impossible to
> : get without getting all the norms for all the docs. Am I missing other apis to
> : use?
> 
> you might wnat to take a look at FieldNormModifier ... it doesn't deal 
> with boosts, but it shows how you can figure out the length part of the
> norm.
> 
> what you are attempting is definitly non trivial, computing a norm is a 
> one way function of several inputs -- you can't recompute a new norm by 
> changing only one of the inputs, you have to know what all of the other 
> orriginal inputs were.
> 
> 
> 
> -Hoss
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32555-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 12 18:02:08 2008
Return-Path: <java-user-return-32555-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1685 invoked from network); 12 Feb 2008 18:02:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Feb 2008 18:02:08 -0000
Received: (qmail 10373 invoked by uid 500); 12 Feb 2008 18:01:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10344 invoked by uid 500); 12 Feb 2008 18:01:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10333 invoked by uid 99); 12 Feb 2008 18:01:56 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Feb 2008 10:01:56 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of spring@gmx.eu designates 213.165.64.20 as permitted sender)
Received: from [213.165.64.20] (HELO mail.gmx.net) (213.165.64.20)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 12 Feb 2008 18:01:24 +0000
Received: (qmail invoked by alias); 12 Feb 2008 18:01:30 -0000
Received: from e178092251.adsl.alicedsl.de (EHLO msrvcn04) [85.178.92.251]
  by mail.gmx.net (mp043) with SMTP; 12 Feb 2008 19:01:30 +0100
X-Authenticated: #2635966
X-Provags-ID: V01U2FsdGVkX1+Ym4gAoWaY1+rDlu+31eJkOhKSJKX1CJnGxbpPB4
	2/5H7KtE9/tJtm
From: <spring@gmx.eu>
To: <java-user@lucene.apache.org>
Subject: Lukes document hitlist display
Date: Tue, 12 Feb 2008 19:01:42 +0100
Message-ID: <F418CE1CC2AE42C19F5E23865DB6E999@msrvcn04>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
Thread-Index: AchtoSJnbkcPwaYnR0+5ykYwaU6u2g==
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.3790.4133
X-Y-GMX-Trusted: 0
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

using Luke 0.7.1.

The document hitlist has a column header ITSVop0LBC.

When I add a field like this:

new Field("CONTENT", contentReader, TermVector.WITH_OFFSETS)

Luke shows only "----------". Why?

Shouldn't it be "IT-Vo-----"?

Thank you


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32556-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 12 18:14:02 2008
Return-Path: <java-user-return-32556-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5747 invoked from network); 12 Feb 2008 18:14:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Feb 2008 18:14:02 -0000
Received: (qmail 41678 invoked by uid 500); 12 Feb 2008 18:13:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41143 invoked by uid 500); 12 Feb 2008 18:13:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41132 invoked by uid 99); 12 Feb 2008 18:13:49 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Feb 2008 10:13:49 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [69.44.16.11] (HELO getopt.org) (69.44.16.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Feb 2008 18:13:03 +0000
Received: from [192.168.1.100] ([81.219.54.251])
	(authenticated)
	by getopt.org (8.11.6/8.11.6) with ESMTP id m1CIDXo27999
	for <java-user@lucene.apache.org>; Tue, 12 Feb 2008 12:13:34 -0600
Message-ID: <47B1E1B9.6040708@getopt.org>
Date: Tue, 12 Feb 2008 19:13:13 +0100
From: Andrzej Bialecki <ab@getopt.org>
User-Agent: Thunderbird 2.0.0.9 (Windows/20071031)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Lukes document hitlist display
References: <F418CE1CC2AE42C19F5E23865DB6E999@msrvcn04>
In-Reply-To: <F418CE1CC2AE42C19F5E23865DB6E999@msrvcn04>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

spring@gmx.eu wrote:
> Hi,
> 
> using Luke 0.7.1.
> 
> The document hitlist has a column header ITSVop0LBC.
> 
> When I add a field like this:
> 
> new Field("CONTENT", contentReader, TermVector.WITH_OFFSETS)
> 
> Luke shows only "----------". Why?
> 
> Shouldn't it be "IT-Vo-----"?

It should, but this information is not available ... Luke populates this 
screen using Document.getFields(). If a field is unstored then it's not 
returned in this list, so it's not possible to get its flags.

-- 
Best regards,
Andrzej Bialecki     <><
  ___. ___ ___ ___ _ _   __________________________________
[__ || __|__/|__||\/|  Information Retrieval, Semantic Web
___|||__||  \|  ||  |  Embedded Unix, System Integration
http://www.sigram.com  Contact: info at sigram dot com


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32557-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 12 18:23:43 2008
Return-Path: <java-user-return-32557-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 14974 invoked from network); 12 Feb 2008 18:23:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Feb 2008 18:23:43 -0000
Received: (qmail 59698 invoked by uid 500); 12 Feb 2008 18:23:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59669 invoked by uid 500); 12 Feb 2008 18:23:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59658 invoked by uid 99); 12 Feb 2008 18:23:31 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Feb 2008 10:23:31 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of spring@gmx.eu designates 213.165.64.20 as permitted sender)
Received: from [213.165.64.20] (HELO mail.gmx.net) (213.165.64.20)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 12 Feb 2008 18:22:58 +0000
Received: (qmail invoked by alias); 12 Feb 2008 18:23:03 -0000
Received: from e178092251.adsl.alicedsl.de (EHLO msrvcn04) [85.178.92.251]
  by mail.gmx.net (mp044) with SMTP; 12 Feb 2008 19:23:03 +0100
X-Authenticated: #2635966
X-Provags-ID: V01U2FsdGVkX1+qsiVq0oSq0sVvULTAoxulh6FI5nU+c5muiMaQ1T
	BqYGoLGVcWuNWg
From: <spring@gmx.eu>
To: <java-user@lucene.apache.org>
References: <F418CE1CC2AE42C19F5E23865DB6E999@msrvcn04> <47B1E1B9.6040708@getopt.org>
Subject: RE: Lukes document hitlist display
Date: Tue, 12 Feb 2008 19:23:13 +0100
Message-ID: <F5965102C17840AC8C9235B1F09468CB@msrvcn04>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
Thread-Index: AchtowpNDh62xWrpRgerokFqXYse9QAASNLQ
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.3790.4133
In-Reply-To: <47B1E1B9.6040708@getopt.org>
X-Y-GMX-Trusted: 0
X-Virus-Checked: Checked by ClamAV on apache.org

OK, understood.
Maybe a little hint in the legend, like "Only for stored fields".

> -----Original Message-----
> From: Andrzej Bialecki [mailto:ab@getopt.org] 
> Sent: Dienstag, 12. Februar 2008 19:13
> To: java-user@lucene.apache.org
> Subject: Re: Lukes document hitlist display
> 
> spring@gmx.eu wrote:
> > Hi,
> > 
> > using Luke 0.7.1.
> > 
> > The document hitlist has a column header ITSVop0LBC.
> > 
> > When I add a field like this:
> > 
> > new Field("CONTENT", contentReader, TermVector.WITH_OFFSETS)
> > 
> > Luke shows only "----------". Why?
> > 
> > Shouldn't it be "IT-Vo-----"?
> 
> It should, but this information is not available ... Luke 
> populates this 
> screen using Document.getFields(). If a field is unstored 
> then it's not 
> returned in this list, so it's not possible to get its flags.
> 
> -- 
> Best regards,
> Andrzej Bialecki     <><
>   ___. ___ ___ ___ _ _   __________________________________
> [__ || __|__/|__||\/|  Information Retrieval, Semantic Web
> ___|||__||  \|  ||  |  Embedded Unix, System Integration
> http://www.sigram.com  Contact: info at sigram dot com
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32558-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 12 19:15:11 2008
Return-Path: <java-user-return-32558-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36640 invoked from network); 12 Feb 2008 19:15:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Feb 2008 19:15:11 -0000
Received: (qmail 73254 invoked by uid 500); 12 Feb 2008 19:14:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73217 invoked by uid 500); 12 Feb 2008 19:14:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73206 invoked by uid 99); 12 Feb 2008 19:14:58 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Feb 2008 11:14:58 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Feb 2008 19:14:27 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id 3C3D971C10A; Tue, 12 Feb 2008 11:14:35 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id 3962271C0B0
	for <java-user@lucene.apache.org>; Tue, 12 Feb 2008 11:14:35 -0800 (PST)
Date: Tue, 12 Feb 2008 11:14:35 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: update field boost
In-Reply-To: <47B1DCB7.5050505@ai.sri.com>
Message-ID: <Pine.LNX.4.62.0802121113420.2872@radix.cryptio.net>
References: <47B0C30F.2090902@ai.sri.com> <Pine.LNX.4.62.0802112052180.7255@radix.cryptio.net>
 <47B12C2C.6090908@ai.sri.com> <Pine.LNX.4.62.0802112125460.7255@radix.cryptio.net>
 <47B1DCB7.5050505@ai.sri.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: Do you know why FieldNormModifier is removed from Lucene 2.3?
: thanks.

it wasn't...

http://lucene.apache.org/java/2_3_0/api/contrib-misc/org/apache/lucene/index/FieldNormModifier.html

...it's in the "miscellaneous" contrib though so you'll need to use that 
jar explicitly.




-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32559-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 12 20:49:46 2008
Return-Path: <java-user-return-32559-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79139 invoked from network); 12 Feb 2008 20:49:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Feb 2008 20:49:46 -0000
Received: (qmail 32120 invoked by uid 500); 12 Feb 2008 20:49:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32090 invoked by uid 500); 12 Feb 2008 20:49:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32075 invoked by uid 99); 12 Feb 2008 20:49:33 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Feb 2008 12:49:33 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.145] (HELO spunkymail-a18.g.dreamhost.com) (208.97.132.145)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Feb 2008 20:49:01 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a18.g.dreamhost.com (Postfix) with ESMTP id 521B45B52F
	for <java-user@lucene.apache.org>; Tue, 12 Feb 2008 12:49:08 -0800 (PST)
Message-Id: <8027A39B-1454-49DC-8235-FE0A4F05BD7B@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <629CBB07E28C934D8CA87EF193170E4C01D65A3A@tshuspaphimbx01.ERF.THOMSON.COM>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v919.2)
Subject: Re: Getting the number of indexed fields in an index
Date: Tue, 12 Feb 2008 15:49:02 -0500
References: <629CBB07E28C934D8CA87EF193170E4C01D65A3A@tshuspaphimbx01.ERF.THOMSON.COM>
X-Mailer: Apple Mail (2.919.2)
X-Virus-Checked: Checked by ClamAV on apache.org

I think this is what you are asking: http://lucene.apache.org/java/2_3_0/api/core/org/apache/lucene/index/IndexReader.html#getFieldNames(org.apache.lucene.index.IndexReader.FieldOption)



On Feb 12, 2008, at 11:13 AM, <marc.dumontier@thomson.com> <marc.dumontier@thomson.com 
 > wrote:

> Hi,
>
>
>
> Does anyone have a code snippet which would allow me to ask my index  
> how
> many instances of a field are indexed?
>
>
>
>
>
> Thanks,
>
>
>
> Marc Dumontier
> Manager, Software Development
> Thomson Scientific (Canada)
> 1 Yonge Street, Suite 1801
> Toronto, Ontario M5E 1W7
>
>
>
> Direct +1 416 214 3448
> Mobile +1 416 454 3147
>
>
>




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32560-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 12 21:32:45 2008
Return-Path: <java-user-return-32560-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3784 invoked from network); 12 Feb 2008 21:32:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Feb 2008 21:32:45 -0000
Received: (qmail 20694 invoked by uid 500); 12 Feb 2008 21:32:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20668 invoked by uid 500); 12 Feb 2008 21:32:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 20657 invoked by uid 99); 12 Feb 2008 21:32:33 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Feb 2008 13:32:33 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [130.107.64.135] (HELO Balboa.AI.SRI.COM) (130.107.64.135)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Feb 2008 21:31:48 +0000
Received: from Balboa.AI.SRI.COM (localhost [127.0.0.1])
	by Balboa.AI.SRI.COM (8.11.7p2+Sun/8.10.1) with SMTP id m1CLW6112865
	for <java-user@lucene.apache.org>; Tue, 12 Feb 2008 13:32:07 -0800 (PST)
Received: from Salt.AI.SRI.COM ([130.107.65.211])
 by Balboa.AI.SRI.COM (SMSSMTP 4.1.9.35) with SMTP id M2008021213320621154
 for <java-user@lucene.apache.org>; Tue, 12 Feb 2008 13:32:06 -0800
Received: from localhost.ai.sri.com
	([127.0.0.1] helo=[130.107.65.199] ident=root)
	by Salt.AI.SRI.COM with asmtp (Exim 3.35 #1 (Debian))
	id 1JP2jV-0002hb-00
	for <java-user@lucene.apache.org>; Tue, 12 Feb 2008 13:32:05 -0800
Message-ID: <47B21055.4040008@ai.sri.com>
Date: Tue, 12 Feb 2008 13:32:05 -0800
From: Jay <yu@AI.SRI.COM>
User-Agent: Thunderbird 2.0.0.9 (Windows/20071031)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: update field boost
References: <47B0C30F.2090902@ai.sri.com> <Pine.LNX.4.62.0802112052180.7255@radix.cryptio.net> <47B12C2C.6090908@ai.sri.com> <Pine.LNX.4.62.0802112125460.7255@radix.cryptio.net> <47B1DCB7.5050505@ai.sri.com> <Pine.LNX.4.62.0802121113420.2872@radix.cryptio.net>
In-Reply-To: <Pine.LNX.4.62.0802121113420.2872@radix.cryptio.net>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

My bad. Thanks for the link!

Jay

Chris Hostetter wrote:
> : Do you know why FieldNormModifier is removed from Lucene 2.3?
> : thanks.
> 
> it wasn't...
> 
> http://lucene.apache.org/java/2_3_0/api/contrib-misc/org/apache/lucene/index/FieldNormModifier.html
> 
> ...it's in the "miscellaneous" contrib though so you'll need to use that 
> jar explicitly.
> 
> 
> 
> 
> -Hoss
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32561-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 13 03:43:21 2008
Return-Path: <java-user-return-32561-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 46350 invoked from network); 13 Feb 2008 03:43:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Feb 2008 03:43:21 -0000
Received: (qmail 59448 invoked by uid 500); 13 Feb 2008 03:43:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59417 invoked by uid 500); 13 Feb 2008 03:43:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59406 invoked by uid 99); 13 Feb 2008 03:43:08 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Feb 2008 19:43:08 -0800
X-ASF-Spam-Status: No, hits=3.7 required=10.0
	tests=DNS_FROM_OPENWHOIS,FORGED_HOTMAIL_RCVD2,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Feb 2008 03:42:36 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1JP8WC-00039z-0V
	for java-user@lucene.apache.org; Tue, 12 Feb 2008 19:42:44 -0800
Message-ID: <15448754.post@talk.nabble.com>
Date: Tue, 12 Feb 2008 19:42:43 -0800 (PST)
From: Cesar Ronchese <ronchese@hotmail.com>
To: java-user@lucene.apache.org
Subject: Lucene multiple field search performance
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: ronchese@hotmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


I was doing normal queries happily, seeing the results statistics come in
about 0.02 seconds.

But then, I added a extra field to seach togheter with the normal query,
then the statistic pulled up to 0.35 seconds. That was a lot.

example:
normal query: some test (it returns quick)
extra field query: +bookDate:"2007/02/12" some test (it returns slow. I also
tried without +)

Is the reduced performance normal for this case?


Another doubt, I thought forcing bookDate in the Search Text it would reduce
the universe of search, then leading to quicker responses. But it didn't. Is
there a trick to improve the speed?

Cesar
-- 
View this message in context: http://www.nabble.com/Lucene-multiple-field-search-performance-tp15448754p15448754.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32562-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 13 06:44:42 2008
Return-Path: <java-user-return-32562-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 74154 invoked from network); 13 Feb 2008 06:44:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Feb 2008 06:44:42 -0000
Received: (qmail 83642 invoked by uid 500); 13 Feb 2008 06:44:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83614 invoked by uid 500); 13 Feb 2008 06:44:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83603 invoked by uid 99); 13 Feb 2008 06:44:28 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Feb 2008 22:44:28 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of stopman@gmail.com designates 72.14.214.230 as permitted sender)
Received: from [72.14.214.230] (HELO hu-out-0506.google.com) (72.14.214.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Feb 2008 06:43:56 +0000
Received: by hu-out-0506.google.com with SMTP id 27so8605308hub.15
        for <java-user@lucene.apache.org>; Tue, 12 Feb 2008 22:44:03 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=yBoyhFGihTvUMoE13UuMJbdWnukBzF0fib1JX83qFiA=;
        b=OUVjblUXdYQ6L8v0EyIkiOhtJqrfmsYi8OXrc9DaSIaCe9KFxnInN+uAnLQNx09lzzv6AqZoIKjhv+r9COdJQyj79YHFhHZcTdeUsHEInOoXCuRdEu7UTbcbHR/Hh1512Vz/Z9zE/H+igQarV03R3gRSUTyLDW8Ukwu5s95v6cc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=rGKpuqKPH/ZRIhR51EhQxSEeoMXRKBSYSXT+ZfeKMHcaIe3MFjUp18PDUh9lrf5yj6irn6OCYRERWHEq/qfV5dM/fMs6JMSfT4WLqlYz/kgiB+XwfE8NGJFDU3oBNBUB7PyBnNsLq3xnDGSncRI3Q2zkV7E8CRdM/6dLYK03Yjg=
Received: by 10.82.181.7 with SMTP id d7mr4249622buf.4.1202885043088;
        Tue, 12 Feb 2008 22:44:03 -0800 (PST)
Received: by 10.82.139.19 with HTTP; Tue, 12 Feb 2008 22:44:03 -0800 (PST)
Message-ID: <652776090802122244x35a3af13o6222370bb0025837@mail.gmail.com>
Date: Tue, 12 Feb 2008 22:44:03 -0800
From: "Michael Stoppelman" <stopman@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene multiple field search performance
In-Reply-To: <15448754.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_19891_21957120.1202885043071"
References: <15448754.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_19891_21957120.1202885043071
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Did your index size increase drastically?

As a first step I would recommend optimizing your index if you haven't
already.

-M

On Feb 12, 2008 7:42 PM, Cesar Ronchese <ronchese@hotmail.com> wrote:

>
> I was doing normal queries happily, seeing the results statistics come in
> about 0.02 seconds.
>
> But then, I added a extra field to seach togheter with the normal query,
> then the statistic pulled up to 0.35 seconds. That was a lot.
>
> example:
> normal query: some test (it returns quick)
> extra field query: +bookDate:"2007/02/12" some test (it returns slow. I
> also
> tried without +)
>
> Is the reduced performance normal for this case?
>
>
> Another doubt, I thought forcing bookDate in the Search Text it would
> reduce
> the universe of search, then leading to quicker responses. But it didn't.
> Is
> there a trick to improve the speed?
>
> Cesar
> --
> View this message in context:
> http://www.nabble.com/Lucene-multiple-field-search-performance-tp15448754p15448754.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_19891_21957120.1202885043071--

From java-user-return-32563-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 13 07:13:41 2008
Return-Path: <java-user-return-32563-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80479 invoked from network); 13 Feb 2008 07:13:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Feb 2008 07:13:40 -0000
Received: (qmail 25846 invoked by uid 500); 13 Feb 2008 07:13:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24850 invoked by uid 500); 13 Feb 2008 07:13:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24839 invoked by uid 99); 13 Feb 2008 07:13:28 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Feb 2008 23:13:28 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of naman.gupta@gmail.com designates 209.85.146.178 as permitted sender)
Received: from [209.85.146.178] (HELO wa-out-1112.google.com) (209.85.146.178)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Feb 2008 07:12:44 +0000
Received: by wa-out-1112.google.com with SMTP id j40so3422390wah.11
        for <java-user@lucene.apache.org>; Tue, 12 Feb 2008 23:13:04 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        bh=JrRz2DQvTK7CCQnoPkCUDuEtD7YMq6gqUkBEYDe3U9c=;
        b=CRcRCZsqa2XE0JIUFt2MPTzVEEn+h5EmwNiU5GsArsKuQabw9OM5Es9UrE59oF9O7Ji0gPVRlqJX5qEsFOQAY6ON0NcKgN/D8UVqWMCgJHEXUhCcYeFrKbzGF9ssBme4IDsbpat22qhPxkO9mV6uo+kaVy4fgBnjjt0A+7MpLrE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=X3OWOzu1iOV1gXavqe2IjIfDguKm8AAV7NgMdHkaE73bv4nyGNzu/QFijGvGOtvNfmN3nV0bnMgelCetSvFDNx/dHAncl39xDyXHAFr+TyMuN7xWSeqULEy7B2wQDv8dO8W7yXchnXGCiSvMX/pg4rlR5mkA8fDqmvNlMpO16j4=
Received: by 10.114.176.1 with SMTP id y1mr2538043wae.86.1202886784368;
        Tue, 12 Feb 2008 23:13:04 -0800 (PST)
Received: by 10.114.203.7 with HTTP; Tue, 12 Feb 2008 23:13:04 -0800 (PST)
Message-ID: <c7665d390802122313y5cbbcfb6oe61db086e6c2fb78@mail.gmail.com>
Date: Wed, 13 Feb 2008 12:43:04 +0530
From: "Naman Gupta" <naman.gupta@gmail.com>
To: java-user@lucene.apache.org
Subject: Supported File Formats - PDF, MHT
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_34299_1007789.1202886784361"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_34299_1007789.1202886784361
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hey

Does lucene support the files in pdf and mht file formats. I wasnt able to
retrieve any results after creating an index of such files. This is the
first time i am using lucene.

Thanks

Naman K Gupta

------=_Part_34299_1007789.1202886784361--

From java-user-return-32564-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 13 07:56:13 2008
Return-Path: <java-user-return-32564-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90760 invoked from network); 13 Feb 2008 07:56:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Feb 2008 07:56:13 -0000
Received: (qmail 67223 invoked by uid 500); 13 Feb 2008 07:56:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67182 invoked by uid 500); 13 Feb 2008 07:56:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67171 invoked by uid 99); 13 Feb 2008 07:56:00 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Feb 2008 23:56:00 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of jpstotz@gmx.de designates 213.165.64.20 as permitted sender)
Received: from [213.165.64.20] (HELO mail.gmx.net) (213.165.64.20)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 13 Feb 2008 07:55:15 +0000
Received: (qmail invoked by alias); 13 Feb 2008 07:55:36 -0000
Received: from sito2_96.sit.fraunhofer.de (EHLO [141.12.89.102]) [141.12.67.96]
  by mail.gmx.net (mp036) with SMTP; 13 Feb 2008 08:55:36 +0100
X-Authenticated: #352958
X-Provags-ID: V01U2FsdGVkX185MPdVtyY53Aa3o/EQ4sI2KO3kJgF/Tk3fIJ6YLc
	fCdRqGgBAOUKO8
Message-ID: <47B2A277.8050508@gmx.de>
Date: Wed, 13 Feb 2008 08:55:35 +0100
From: Jan Peter Stotz <jpstotz@gmx.de>
User-Agent: Thunderbird 2.0.0.9 (Windows/20071031)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Supported File Formats - PDF, MHT
References: <c7665d390802122313y5cbbcfb6oe61db086e6c2fb78@mail.gmail.com>
In-Reply-To: <c7665d390802122313y5cbbcfb6oe61db086e6c2fb78@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Y-GMX-Trusted: 0
X-Virus-Checked: Checked by ClamAV on apache.org

Naman Gupta wrote:
> Does lucene support the files in pdf and mht file formats. I wasnt able to
> retrieve any results after creating an index of such files. 

Well, the answer is simple: Lucene itself does not support any file 
format. You need a file parser that converts your files to a plain text 
representation. For details please see the Lucene FAQ:

http://wiki.apache.org/lucene-java/LuceneFAQ#head-c45f8b25d786f4e384936fa93ce1137a23b7e422

Jan

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32565-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 13 08:09:14 2008
Return-Path: <java-user-return-32565-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95648 invoked from network); 13 Feb 2008 08:09:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Feb 2008 08:09:14 -0000
Received: (qmail 84368 invoked by uid 500); 13 Feb 2008 08:09:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84265 invoked by uid 500); 13 Feb 2008 08:09:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 84254 invoked by uid 99); 13 Feb 2008 08:09:00 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Feb 2008 00:09:00 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of anjana.mprasad@gmail.com designates 72.14.246.244 as permitted sender)
Received: from [72.14.246.244] (HELO ag-out-0708.google.com) (72.14.246.244)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Feb 2008 08:08:28 +0000
Received: by ag-out-0708.google.com with SMTP id 23so13989136agd.5
        for <java-user@lucene.apache.org>; Wed, 13 Feb 2008 00:08:35 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=vMptzWmsdHoAlC2jlczutE/TWQjp2O3awHhHABooinw=;
        b=lGymZ+w7pJ/7jaBFm3MWGPxUYgqpR10rfZGwh73eKhsHHh5MCr0ijvVY4r9Of02iRN1/tBzOgES+0K3vNCHyV9crtTsvi9T6pQXRR/2C7+66+HEDbgsqSD3gSkdiMaBGoptzjfCXK3QjlllPcRVnvTQ1ncikPWewwCgqgDXbr+c=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=JMHislxhL/U4GTvlwcq/KHonr/iHhftqsGIdZ4jMJsiqWgSXtz7QIIV9pByrYX6gyRMIkESS4OYmaq+Faob/irpIlm/3T+v8qnrwj72sKhDaO5OH7pSHSWuV2Mm0lUXUWw2UZIAog6MDKeyQVjMx4T+GIx4M1RfyvxH/VNhUTrk=
Received: by 10.142.237.20 with SMTP id k20mr1844071wfh.112.1202890114462;
        Wed, 13 Feb 2008 00:08:34 -0800 (PST)
Received: by 10.142.178.19 with HTTP; Wed, 13 Feb 2008 00:08:34 -0800 (PST)
Message-ID: <3126751e0802130008xc6c48b8u7d2665bae18ec4c2@mail.gmail.com>
Date: Wed, 13 Feb 2008 13:38:34 +0530
From: "anjana m" <anjana.mprasad@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Retain the index
In-Reply-To: <E1ADC528-042B-4CA9-A967-5A7CDBC2D063@mikemccandless.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_5229_9918242.1202890114453"
References: <3126751e0801250005s17687201qf3646036683cb5f5@mail.gmail.com>
	 <3126751e0801262155i2ff62f28qe81814460677354d@mail.gmail.com>
	 <200801271037.43451@danielnaber.de>
	 <3126751e0801270211x6da0dec2xe869564f22d38139@mail.gmail.com>
	 <359a92830801271352o3c81dfeflb15d7c3c624b6033@mail.gmail.com>
	 <3126751e0801302212s1e386c67i8be10eb5512114c5@mail.gmail.com>
	 <AC9AFBA0-C12B-4971-A00E-A3DEA8586B36@mikemccandless.com>
	 <3126751e0801310126h4deb5363i3e3ad7566be55ca3@mail.gmail.com>
	 <E1ADC528-042B-4CA9-A967-5A7CDBC2D063@mikemccandless.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_5229_9918242.1202890114453
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

hey i am running my indexer on application server/ production server..
i cant delete the files..
please give me a good solution..
changing  true and false is not working..if  have add new docs..
can nay one help me..please...
 regards
anjana

On Jan 31, 2008 3:02 PM, Michael McCandless <lucene@mikemccandless.com>
wrote:

>
> Physically delete the file, or, use IndexReader.unlock static method.
>
> Mike
>
> On Jan 31, 2008, at 4:26 AM, anjana m wrote:
>
> > How do i remove the locks..?
> >
> >
> >
> > On Jan 31, 2008 2:49 PM, Michael McCandless
> > <lucene@mikemccandless.com>
> > wrote:
> >
> >>
> >> It looks like you are passing "true" to FSDirectory.getDirectory,
> >> which you shouldn't do.  Always pass "false" to that.  (Newer
> >> versions of Lucene have deprecated the create flag to FSDirectory,
> >> leaving it entirely to IndexWriter).
> >>
> >> On the lock obtain timed out, probably that's a left over lock file,
> >> so you should just remove it if you're sure it is.
> >>
> >> Mike
> >>
> >> anjana m wrote:
> >>
> >>> with true:
> >>> i finding a serious problem when i need new index please help..
> >>> but how can ikeep chnaging the true flase option..
> >>> :(
> >>> please help me...:(
> >>> Exception in thread "main" java.io.IOException: Cannot delete
> >>> _17.cfs
> >>>         at org.apache.lucene.store.FSDirectory.create
> >>> (FSDirectory.java:144)
> >>>         at org.apache.lucene.store.FSDirectory.<init>
> >>> (FSDirectory.java:128)
> >>>         at org.apache.lucene.store.FSDirectory.getDirectory
> >>> (FSDirectory.java
> >>> :102)
> >>>         at org.apache.lucene.index.IndexWriter.<init>
> >>> (IndexWriter.java:193)
> >>>
> >>>
> >>> False
> >>> Exception in thread "main" java.io.IOException: Lock obtain timed
> >>> out:
> >>> Lock@C:\DOCUME~1\ANJANA\LOCALS~1\Temp\lucene-
> >>> 3ca21f86af4e6d9f86b82f8f13be98e4-write.lock
> >>>         at org.apache.lucene.store.Lock.obtain(Lock.java:58)
> >>>         at org.apache.lucene.index.IndexWriter.<init>
> >>> (IndexWriter.java:223)
> >>>         at org.apache.lucene.index.IndexWriter.<init>
> >>> (IndexWriter.java:193)
> >>>         at com.cecilia.wim.process.Indexer.index(Indexer.java:25)
> >>>         at com.cecilia.wim.process.Indexer.main(Indexer.java:60)
> >>>
> >>>
> >>> On Jan 28, 2008 3:22 AM, Erick Erickson <erickerickson@gmail.com>
> >>> wrote:
> >>>
> >>>> Set the parameter to false as per the documentation....
> >>>>
> >>>> Erick
> >>>>
> >>>> On Jan 27, 2008 5:11 AM, anjana m <anjana.mprasad@gmail.com> wrote:
> >>>>
> >>>>> yes i dont want the old index to be deletd since its running on
> >>>>> my app
> >>>>> server..
> >>>>> any suggestion..?
> >>>>>
> >>>>> On Jan 27, 2008 3:07 PM, Daniel Naber
> >>>>> <lucenelist2007@danielnaber.de>
> >>>>> wrote:
> >>>>>
> >>>>>> On Sonntag, 27. Januar 2008, anjana m wrote:
> >>>>>>
> >>>>>>>         IndexWriter writer = new IndexWriter(indexDir, new
> >>>>>>> StandardAnalyzer(), true);
> >>>>>>
> >>>>>> The true parameter means that the old index will be deleted, is
> >>>>>> that
> >>>>> your
> >>>>>> problem?
> >>>>>>
> >>>>>> Regards
> >>>>>>  Daniel
> >>>>>>
> >>>>>> --
> >>>>>> http://www.danielnaber.de
> >>>>>>
> >>>>>> -----------------------------------------------------------------
> >>>>>> --
> >>>>>> --
> >>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>>>>>
> >>>>>>
> >>>>>
> >>>>
> >>
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_5229_9918242.1202890114453--

From java-user-return-32566-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 13 08:34:09 2008
Return-Path: <java-user-return-32566-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1586 invoked from network); 13 Feb 2008 08:34:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Feb 2008 08:34:09 -0000
Received: (qmail 20924 invoked by uid 500); 13 Feb 2008 08:33:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20894 invoked by uid 500); 13 Feb 2008 08:33:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 20883 invoked by uid 99); 13 Feb 2008 08:33:57 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Feb 2008 00:33:57 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [72.14.214.239] (HELO hu-out-0506.google.com) (72.14.214.239)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Feb 2008 08:33:23 +0000
Received: by hu-out-0506.google.com with SMTP id 27so8664363hub.15
        for <java-user@lucene.apache.org>; Wed, 13 Feb 2008 00:33:28 -0800 (PST)
Received: by 10.150.220.19 with SMTP id s19mr868200ybg.147.1202891608174;
        Wed, 13 Feb 2008 00:33:28 -0800 (PST)
Received: from ?10.17.4.4? ( [71.174.108.74])
        by mx.google.com with ESMTPS id 66sm1817803wra.10.2008.02.13.00.33.27
        (version=TLSv1/SSLv3 cipher=OTHER);
        Wed, 13 Feb 2008 00:33:27 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v753)
In-Reply-To: <3126751e0802130008xc6c48b8u7d2665bae18ec4c2@mail.gmail.com>
References: <3126751e0801250005s17687201qf3646036683cb5f5@mail.gmail.com> <3126751e0801262155i2ff62f28qe81814460677354d@mail.gmail.com> <200801271037.43451@danielnaber.de> <3126751e0801270211x6da0dec2xe869564f22d38139@mail.gmail.com> <359a92830801271352o3c81dfeflb15d7c3c624b6033@mail.gmail.com> <3126751e0801302212s1e386c67i8be10eb5512114c5@mail.gmail.com> <AC9AFBA0-C12B-4971-A00E-A3DEA8586B36@mikemccandless.com> <3126751e0801310126h4deb5363i3e3ad7566be55ca3@mail.gmail.com> <E1ADC528-042B-4CA9-A967-5A7CDBC2D063@mikemccandless.com> <3126751e0802130008xc6c48b8u7d2665bae18ec4c2@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <5AED953F-2AB1-4149-A9DB-3F6A53B829F3@mikemccandless.com>
Content-Transfer-Encoding: 7bit
From: Michael McCandless <lucene@mikemccandless.com>
Subject: Re: Retain the index
Date: Wed, 13 Feb 2008 03:34:16 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.753)
X-Virus-Checked: Checked by ClamAV on apache.org


You could create your own SimpleFSLockFactory, specifying a different  
lock dir, and pass that to FSDirectory.getDirectory.

This way you can control where the lock file is created and hopefully  
put it in a dir that you're able to delete from.

Or, update to a newer version of Lucene, which stores the lock file  
in the index directory by default.

Mike

anjana m wrote:

> hey i am running my indexer on application server/ production server..
> i cant delete the files..
> please give me a good solution..
> changing  true and false is not working..if  have add new docs..
> can nay one help me..please...
>  regards
> anjana
>
> On Jan 31, 2008 3:02 PM, Michael McCandless  
> <lucene@mikemccandless.com>
> wrote:
>
>>
>> Physically delete the file, or, use IndexReader.unlock static method.
>>
>> Mike
>>
>> On Jan 31, 2008, at 4:26 AM, anjana m wrote:
>>
>>> How do i remove the locks..?
>>>
>>>
>>>
>>> On Jan 31, 2008 2:49 PM, Michael McCandless
>>> <lucene@mikemccandless.com>
>>> wrote:
>>>
>>>>
>>>> It looks like you are passing "true" to FSDirectory.getDirectory,
>>>> which you shouldn't do.  Always pass "false" to that.  (Newer
>>>> versions of Lucene have deprecated the create flag to FSDirectory,
>>>> leaving it entirely to IndexWriter).
>>>>
>>>> On the lock obtain timed out, probably that's a left over lock  
>>>> file,
>>>> so you should just remove it if you're sure it is.
>>>>
>>>> Mike
>>>>
>>>> anjana m wrote:
>>>>
>>>>> with true:
>>>>> i finding a serious problem when i need new index please help..
>>>>> but how can ikeep chnaging the true flase option..
>>>>> :(
>>>>> please help me...:(
>>>>> Exception in thread "main" java.io.IOException: Cannot delete
>>>>> _17.cfs
>>>>>         at org.apache.lucene.store.FSDirectory.create
>>>>> (FSDirectory.java:144)
>>>>>         at org.apache.lucene.store.FSDirectory.<init>
>>>>> (FSDirectory.java:128)
>>>>>         at org.apache.lucene.store.FSDirectory.getDirectory
>>>>> (FSDirectory.java
>>>>> :102)
>>>>>         at org.apache.lucene.index.IndexWriter.<init>
>>>>> (IndexWriter.java:193)
>>>>>
>>>>>
>>>>> False
>>>>> Exception in thread "main" java.io.IOException: Lock obtain timed
>>>>> out:
>>>>> Lock@C:\DOCUME~1\ANJANA\LOCALS~1\Temp\lucene-
>>>>> 3ca21f86af4e6d9f86b82f8f13be98e4-write.lock
>>>>>         at org.apache.lucene.store.Lock.obtain(Lock.java:58)
>>>>>         at org.apache.lucene.index.IndexWriter.<init>
>>>>> (IndexWriter.java:223)
>>>>>         at org.apache.lucene.index.IndexWriter.<init>
>>>>> (IndexWriter.java:193)
>>>>>         at com.cecilia.wim.process.Indexer.index(Indexer.java:25)
>>>>>         at com.cecilia.wim.process.Indexer.main(Indexer.java:60)
>>>>>
>>>>>
>>>>> On Jan 28, 2008 3:22 AM, Erick Erickson <erickerickson@gmail.com>
>>>>> wrote:
>>>>>
>>>>>> Set the parameter to false as per the documentation....
>>>>>>
>>>>>> Erick
>>>>>>
>>>>>> On Jan 27, 2008 5:11 AM, anjana m <anjana.mprasad@gmail.com>  
>>>>>> wrote:
>>>>>>
>>>>>>> yes i dont want the old index to be deletd since its running on
>>>>>>> my app
>>>>>>> server..
>>>>>>> any suggestion..?
>>>>>>>
>>>>>>> On Jan 27, 2008 3:07 PM, Daniel Naber
>>>>>>> <lucenelist2007@danielnaber.de>
>>>>>>> wrote:
>>>>>>>
>>>>>>>> On Sonntag, 27. Januar 2008, anjana m wrote:
>>>>>>>>
>>>>>>>>>         IndexWriter writer = new IndexWriter(indexDir, new
>>>>>>>>> StandardAnalyzer(), true);
>>>>>>>>
>>>>>>>> The true parameter means that the old index will be deleted, is
>>>>>>>> that
>>>>>>> your
>>>>>>>> problem?
>>>>>>>>
>>>>>>>> Regards
>>>>>>>>  Daniel
>>>>>>>>
>>>>>>>> --
>>>>>>>> http://www.danielnaber.de
>>>>>>>>
>>>>>>>> --------------------------------------------------------------- 
>>>>>>>> --
>>>>>>>> --
>>>>>>>> --
>>>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>>>> For additional commands, e-mail: java-user- 
>>>>>>>> help@lucene.apache.org
>>>>>>>>
>>>>>>>>
>>>>>>>
>>>>>>
>>>>
>>>>
>>>> ------------------------------------------------------------------- 
>>>> --
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32567-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 13 09:32:20 2008
Return-Path: <java-user-return-32567-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21771 invoked from network); 13 Feb 2008 09:32:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Feb 2008 09:32:20 -0000
Received: (qmail 4629 invoked by uid 500); 13 Feb 2008 09:32:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4605 invoked by uid 500); 13 Feb 2008 09:32:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4585 invoked by uid 99); 13 Feb 2008 09:32:05 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Feb 2008 01:32:05 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of cedric.ho@gmail.com designates 209.85.146.177 as permitted sender)
Received: from [209.85.146.177] (HELO wa-out-1112.google.com) (209.85.146.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Feb 2008 09:31:21 +0000
Received: by wa-out-1112.google.com with SMTP id j40so3482382wah.11
        for <java-user@lucene.apache.org>; Wed, 13 Feb 2008 01:31:42 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        bh=K9cKUVPGNyKaZTjnv7ziH24489I7AiFnPPD8g9cI6yg=;
        b=f8qXAadgIXD/tPV4bKrY6vpoegL6WxYR75nez7ntQ+wmuEEYPTGCzIAmy++4bGIRh/sXLsGXNEucYhKzZKZUaeBlY6jhhNZchimfEZ71fW/qwchSs/R9SPxX6XYPThfDWE/YJYDc7JZokSKDFsjv91HhkSBzki7jxmFCxNQBLrs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=G2Ur62WE4IZIztA4wSXb5tKCiLWKaWlAagIDS4yYvogkK5n6OYVPK///VUkpND3iFcllzWH3gLyM2/LauQjApQpimSKbn5+Kz7HVPNvSuMTT5Sc8tbUT4owYmOTLysaS441XzwvAA0J7F4Ljtg7bPbGsoD/NzD59LYRv6BecpTs=
Received: by 10.114.58.1 with SMTP id g1mr2659455waa.91.1202895101417;
        Wed, 13 Feb 2008 01:31:41 -0800 (PST)
Received: by 10.114.156.2 with HTTP; Wed, 13 Feb 2008 01:31:41 -0800 (PST)
Message-ID: <839ba01c0802130131x3afecdcdna3825cab69adc3a9@mail.gmail.com>
Date: Wed, 13 Feb 2008 17:31:41 +0800
From: "Cedric Ho" <cedric.ho@gmail.com>
To: java-user@lucene.apache.org
Subject: How to pass additional information into Similarity.scorePayload(...)
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org

Hi all,

My problem is I have some additional weighting info that come with
each search. And I need to take both the weighting info and the
payload to calculate scores.

So how do I access the weighting info in
Similarity.scorePayload(String,byte[],int,int) ? I've thought about
using a ThreadLocal, but this seems like a hack, are there better
options ?


Regards,
Cedric

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32568-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 13 09:54:45 2008
Return-Path: <java-user-return-32568-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31340 invoked from network); 13 Feb 2008 09:54:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Feb 2008 09:54:45 -0000
Received: (qmail 43695 invoked by uid 500); 13 Feb 2008 09:54:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43669 invoked by uid 500); 13 Feb 2008 09:54:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43658 invoked by uid 99); 13 Feb 2008 09:54:32 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Feb 2008 01:54:32 -0800
X-ASF-Spam-Status: No, hits=-4.0 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [85.158.136.35] (HELO mail125.messagelabs.com) (85.158.136.35)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 13 Feb 2008 09:53:47 +0000
X-VirusChecked: Checked
X-Env-Sender: ulrich.vachon@vidal.fr
X-Msg-Ref: server-7.tower-125.messagelabs.com!1202896447!21758452!1
X-StarScan-Version: 5.5.12.14.2; banners=-,-,-
X-Originating-IP: [212.234.178.68]
Received: (qmail 11819 invoked from network); 13 Feb 2008 09:54:07 -0000
Received: from antares.mmsupport.com (HELO localhost.localdomain) (212.234.178.68)
  by server-7.tower-125.messagelabs.com with SMTP; 13 Feb 2008 09:54:07 -0000
Received: from srv-exch01.france.groupe.intra (srv-exch01.france.groupe.intra [172.16.50.5])
	by localhost.localdomain (Postfix) with ESMTP id A27F013FA5E
	for <java-user@lucene.apache.org>; Wed, 13 Feb 2008 10:54:07 +0100 (CET)
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Inverted letters
Date: Wed, 13 Feb 2008 10:54:07 +0100
Message-ID: <F48F4CC4EAA6034A8DAD3C94AC572B76116FCF@srv-exch01.france.groupe.intra>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Inverted letters
Thread-Index: Achth+KbPDf7pKWTS2mS05j/stNodAAnRzQg
From: "Ulrich Vachon" <ulrich.vachon@vidal.fr>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Thank you for your responses.

But i'm very surprised to see the FuzzyQuery used in my junit test work =
at 100%. I must only to determine if this simple algo work with full =
data.

<code>
      RAMDirectory directory =3D new RAMDirectory();
      IndexWriter writer =3D new IndexWriter(directory, new =
MyAnalyzer(), true);
      addDoc("aspegic", writer);
      addDoc("clamoxyl", writer);

      writer.optimize();
      writer.close();
      IndexSearcher searcher =3D new IndexSearcher(directory);

      Query query =3D new FuzzyQuery(new Term("field", "claomxyle"), =
0.6f);
      hits =3D searcher.search(query);
      assertEquals(1, hits.length());
      query =3D new FuzzyQuery(new Term("field", "clamoxile"), 0.6f);
      hits =3D searcher.search(query);
      assertEquals(1, hits.length());
      query =3D new FuzzyQuery(new Term("field", "camoxyle"), 0.60f);
      hits =3D searcher.search(query);
      assertEquals(1, hits.length());
      query =3D new FuzzyQuery(new Term("field", "clamoxil"), 0.60f);
      hits =3D searcher.search(query);
      assertEquals(1, hits.length());
</code>

Regards,
Ulrich/


-----Message d'origine-----
De : Erick Erickson [mailto:erickerickson@gmail.com]=20
Envoy=E9 : mardi 12 f=E9vrier 2008 15:58
=C0 : java-user@lucene.apache.org
Objet : Re: Inverted letters

You should probably think about synonym analyzers, both at index time =
and query time. Because I think you have a problem here....

Let's say you can do what you ask, at query time transform any of your =
three options into "clamoxyle". Would it really be satisfactory to your =
users to then NOT get any matches on documents containing "claomxyle" or =
"clamoxile"? It seems to me that this would be unsatisfactory.

Erick

On Feb 12, 2008 7:56 AM, Ulrich Vachon <ulrich.vachon@vidal.fr> wrote:

> Hi all,
>
> It's possible to use simplely (without java preprocessing, if=20
> possible) Lucene to find items with this constraints:
>
> I have indexed this word : clamoxyle
> I want to find it with this queries : claomxyle, clamoxile, camoxyle.
>
> It is possible?
>
> Thank you,
> Ulrich.
>


______________________________________________________________________
Cet e-mail a =E9t=E9 scann=E9 par MessageLabs Email Security System.
Pour plus d'informations, visitez http://www.messagelabs.com/email =
______________________________________________________________________

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32569-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 13 11:24:43 2008
Return-Path: <java-user-return-32569-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56579 invoked from network); 13 Feb 2008 11:24:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Feb 2008 11:24:42 -0000
Received: (qmail 45075 invoked by uid 500); 13 Feb 2008 11:24:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45031 invoked by uid 500); 13 Feb 2008 11:24:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45020 invoked by uid 99); 13 Feb 2008 11:24:29 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Feb 2008 03:24:29 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of naman.gupta@gmail.com designates 209.85.146.182 as permitted sender)
Received: from [209.85.146.182] (HELO wa-out-1112.google.com) (209.85.146.182)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Feb 2008 11:23:59 +0000
Received: by wa-out-1112.google.com with SMTP id j40so3525979wah.11
        for <java-user@lucene.apache.org>; Wed, 13 Feb 2008 03:24:08 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        bh=rYskMyTnLRAKBF9L0Ers8aMakwRBg9+ueKgSm4V+jDA=;
        b=TMhhR2NfnjRA5wVZ7f3asephmT2fnZp/2AX6+h1jUeji0JvMRCui1y42t2VA89LsnMddzdHFr1mb3k9qVd5x7bpTviPz6FYVbKu5tAXdxJ0RpkKHezoZKyub9o296PTyPRLDfWjaz+ewt32n0XO0UZt3lkpm0m6HR+91oDlCOLg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=gJr5tnrdsVyz1xdSUPT0po3WzwbGzOrppewc0jDQTQmUWrkCnY8AFJYNrEzwS4utTF3V/pG9sFDsNYmQ97PbqiUZkD9hbFQwyCSCGN67Lid6j696lcN11jAUqivSpLURef69rVS29DytnXvinAoCnnL1lpfu8QYOLVPGbm0qrAM=
Received: by 10.114.198.1 with SMTP id v1mr2776389waf.89.1202901848145;
        Wed, 13 Feb 2008 03:24:08 -0800 (PST)
Received: by 10.114.203.7 with HTTP; Wed, 13 Feb 2008 03:24:08 -0800 (PST)
Message-ID: <c7665d390802130324y745a4e0eq371450a355ebe477@mail.gmail.com>
Date: Wed, 13 Feb 2008 16:54:08 +0530
From: "Naman Gupta" <naman.gupta@gmail.com>
To: java-user@lucene.apache.org
Subject: Using Lucene 2.3.0 with PDFBox
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org

Hey

I am having problem using PDF Box for parsing the PDF and coverting
them to Lucene Document using the following statement.

Document doc = LucenePDFDocument.getDocument( file );

PDF Box uses a particular function of the Object 'Field' which is only
there in the lucene 1.4.3.
                 *Field.UnIndexed("path", file.getPath() )
In subsequent versions it has been removed. Kindly suggest a solution
for the PDF Box integration with lucene 2.3.0

Thanks

Naman K Gupta

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32570-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 13 11:54:29 2008
Return-Path: <java-user-return-32570-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63834 invoked from network); 13 Feb 2008 11:54:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Feb 2008 11:54:29 -0000
Received: (qmail 85781 invoked by uid 500); 13 Feb 2008 11:54:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85611 invoked by uid 500); 13 Feb 2008 11:54:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85599 invoked by uid 99); 13 Feb 2008 11:54:16 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Feb 2008 03:54:16 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [208.97.132.145] (HELO spunkymail-a11.g.dreamhost.com) (208.97.132.145)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Feb 2008 11:53:31 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a11.g.dreamhost.com (Postfix) with ESMTP id F22E3B8932
	for <java-user@lucene.apache.org>; Wed, 13 Feb 2008 03:53:49 -0800 (PST)
Message-Id: <6929E41F-F5CA-4BFD-ADE4-B75D3EAA75EA@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <839ba01c0802130131x3afecdcdna3825cab69adc3a9@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v919.2)
Subject: Re: How to pass additional information into Similarity.scorePayload(...)
Date: Wed, 13 Feb 2008 06:53:48 -0500
References: <839ba01c0802130131x3afecdcdna3825cab69adc3a9@mail.gmail.com>
X-Mailer: Apple Mail (2.919.2)
X-Virus-Checked: Checked by ClamAV on apache.org

Are you writing your own Query?  What kind of info did you have in  
mind?  scorePayload is called from the query scoring class, so I am  
not sure how you would pass in info to it unless you were writing your  
own Query class.

-Grant

On Feb 13, 2008, at 4:31 AM, Cedric Ho wrote:

> Hi all,
>
> My problem is I have some additional weighting info that come with
> each search. And I need to take both the weighting info and the
> payload to calculate scores.
>
> So how do I access the weighting info in
> Similarity.scorePayload(String,byte[],int,int) ? I've thought about
> using a ThreadLocal, but this seems like a hack, are there better
> options ?
>
>
> Regards,
> Cedric
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32571-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 13 12:13:27 2008
Return-Path: <java-user-return-32571-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69457 invoked from network); 13 Feb 2008 12:13:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Feb 2008 12:13:27 -0000
Received: (qmail 15547 invoked by uid 500); 13 Feb 2008 12:13:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15418 invoked by uid 500); 13 Feb 2008 12:13:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15407 invoked by uid 99); 13 Feb 2008 12:13:15 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Feb 2008 04:13:15 -0800
X-ASF-Spam-Status: No, hits=3.7 required=10.0
	tests=DNS_FROM_OPENWHOIS,FORGED_HOTMAIL_RCVD2,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Feb 2008 12:12:43 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1JPGTr-0003bO-4k
	for java-user@lucene.apache.org; Wed, 13 Feb 2008 04:12:51 -0800
Message-ID: <15456841.post@talk.nabble.com>
Date: Wed, 13 Feb 2008 04:12:51 -0800 (PST)
From: Cesar Ronchese <ronchese@hotmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene multiple field search performance
In-Reply-To: <652776090802122244x35a3af13o6222370bb0025837@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: ronchese@hotmail.com
References: <15448754.post@talk.nabble.com> <652776090802122244x35a3af13o6222370bb0025837@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Yes, it is optimized already.

But today, when I got to test again, its looks like quick. :S
I can't understand why.





Michael Stoppelman wrote:
> 
> Did your index size increase drastically?
> 
> As a first step I would recommend optimizing your index if you haven't
> already.
> 
> -M
> 
> On Feb 12, 2008 7:42 PM, Cesar Ronchese <ronchese@hotmail.com> wrote:
> 
>>
>> I was doing normal queries happily, seeing the results statistics come in
>> about 0.02 seconds.
>>
>> But then, I added a extra field to seach togheter with the normal query,
>> then the statistic pulled up to 0.35 seconds. That was a lot.
>>
>> example:
>> normal query: some test (it returns quick)
>> extra field query: +bookDate:"2007/02/12" some test (it returns slow. I
>> also
>> tried without +)
>>
>> Is the reduced performance normal for this case?
>>
>>
>> Another doubt, I thought forcing bookDate in the Search Text it would
>> reduce
>> the universe of search, then leading to quicker responses. But it didn't.
>> Is
>> there a trick to improve the speed?
>>
>> Cesar
>> --
>> View this message in context:
>> http://www.nabble.com/Lucene-multiple-field-search-performance-tp15448754p15448754.html
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
> 
> 

-- 
View this message in context: http://www.nabble.com/Lucene-multiple-field-search-performance-tp15448754p15456841.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32572-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 13 12:18:54 2008
Return-Path: <java-user-return-32572-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76885 invoked from network); 13 Feb 2008 12:18:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Feb 2008 12:18:54 -0000
Received: (qmail 23214 invoked by uid 500); 13 Feb 2008 12:18:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23190 invoked by uid 500); 13 Feb 2008 12:18:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23178 invoked by uid 99); 13 Feb 2008 12:18:42 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Feb 2008 04:18:42 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of jpstotz@gmx.de designates 213.165.64.20 as permitted sender)
Received: from [213.165.64.20] (HELO mail.gmx.net) (213.165.64.20)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 13 Feb 2008 12:18:09 +0000
Received: (qmail invoked by alias); 13 Feb 2008 12:18:16 -0000
Received: from sito2_96.sit.fraunhofer.de (EHLO [141.12.89.102]) [141.12.67.96]
  by mail.gmx.net (mp004) with SMTP; 13 Feb 2008 13:18:16 +0100
X-Authenticated: #352958
X-Provags-ID: V01U2FsdGVkX1/qOMBZh23qGOpUWtzFa2qMKApG6vQJo4M6n8rAlu
	pm1K80acfkHIAd
Message-ID: <47B2E007.8080102@gmx.de>
Date: Wed, 13 Feb 2008 13:18:15 +0100
From: Jan Peter Stotz <jpstotz@gmx.de>
User-Agent: Thunderbird 2.0.0.9 (Windows/20071031)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Using Lucene 2.3.0 with PDFBox
References: <c7665d390802130324y745a4e0eq371450a355ebe477@mail.gmail.com>
In-Reply-To: <c7665d390802130324y745a4e0eq371450a355ebe477@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Y-GMX-Trusted: 0
X-Virus-Checked: Checked by ClamAV on apache.org

Naman Gupta schrieb:

> PDF Box uses a particular function of the Object 'Field' which is only
> there in the lucene 1.4.3.
>                  *Field.UnIndexed("path", file.getPath() )

This statement should be a good replacement:

new Field("path", file.getPath(), Field.Store.YES, 
Field.Index.UN_TOKENIZED));

Jan

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32573-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 13 13:22:58 2008
Return-Path: <java-user-return-32573-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1036 invoked from network); 13 Feb 2008 13:22:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Feb 2008 13:22:58 -0000
Received: (qmail 29112 invoked by uid 500); 13 Feb 2008 13:22:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29012 invoked by uid 500); 13 Feb 2008 13:22:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28974 invoked by uid 99); 13 Feb 2008 13:22:44 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Feb 2008 05:22:44 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [68.142.236.45] (HELO n7a.bullet.mail.re3.yahoo.com) (68.142.236.45)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 13 Feb 2008 13:21:58 +0000
Received: from [68.142.230.29] by n7.bullet.re3.yahoo.com with NNFMP; 13 Feb 2008 13:22:18 -0000
Received: from [66.196.97.156] by t2.bullet.re2.yahoo.com with NNFMP; 13 Feb 2008 13:22:18 -0000
Received: from [127.0.0.1] by omp209.mail.re3.yahoo.com with NNFMP; 13 Feb 2008 13:22:18 -0000
X-Yahoo-Newman-Property: ymail-5
X-Yahoo-Newman-Id: 270200.81621.bm@omp209.mail.re3.yahoo.com
Received: (qmail 47408 invoked by uid 60001); 13 Feb 2008 13:22:17 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=rklTAf1vbQewQre+JdR5Loslsw3d5xvroNAG+5T8mgva7FDIuo2hYhgVCEctEpfTO+3uQ+6G8RsgNU2VschArLj7VA1UHDIw0OJh9uFxwSLCeEVhIMn4rF7ZldHuSyRqFJmD6DBaBAq7R9c28hHsG72CyxdpwdoOdfBE84DByxk=;
X-YMail-OSG: Gvgjte0VM1naIp5Ihw3lZq2PhDwBI9L2e7_duYCb158xSUuyg_Ditu49hIkzTVEhxdRKxyGfVb7e3.BZXFv9Lca1PeCow0.l7gEjr1dVvVzWz3IOWm9r7buPejk-
Received: from [84.131.196.174] by web23007.mail.ird.yahoo.com via HTTP; Wed, 13 Feb 2008 13:22:17 GMT
X-Mailer: YahooMailRC/902.30 YahooMailWebService/0.7.162
Date: Wed, 13 Feb 2008 13:22:17 +0000 (GMT)
From: eks dev <eksdev@yahoo.co.uk>
Subject: Stored Field vs "offset plus external file"?
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
Message-ID: <424273.46097.qm@web23007.mail.ird.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

I would like to try to replace our external storage of documents with Lucen=
e stored field, so a few questions before we proceed:=0A=0ABackground: We s=
tore currently complete documents  in a simple binary file and only keep of=
fsets into this file as a Stored field   in Lucene index. Documents (compre=
ssed) are short, avg 300-400bytes per document=0A=0AWhat we would like to t=
ry is to store these documents as binary (compressed with simple/fast stati=
c huffman + dictionary) stored Fields in order to make maintenance of this =
setup easier as Lucene already does maintain updates and fetching of these =
fields, also indexing works very well from multiple threads now. Complete D=
ocument would be the only Stored field we have in index (I know about lazy =
loading). =0ASimply what we do today is , search index, get offsets from fo=
und documents and than fetch them from binary file. =0A=0ASo the questions =
would be:=0A=0A1. Does anyone see any theoretical/practical reason why our =
homemade "fetch offset from lucene stored field-> jump to this offset in do=
cument" would be faster than "fetch stored field from Lucene directly"=0A=
=0A2.  We use Lucene Index wit MMAP directory now, so the concern is that i=
ndex could grow too large for MMAP with stored field like that.  Is there a=
 way to say, "do not use MMAP Directory for stored Fields, rather FSDirecto=
ry". I think not, but it is worth to ask as I think this could be useful th=
ing... Imagine to be able to say "Load terms with RAM Directory, postings w=
it MMAP and stored fields with FSDirectory"... of course this is only for s=
earching, not indexing.=0A=0AThanks a lot.=0AEks=0A =0A=0A=0A=0A      _____=
______________________________________________________=0AYahoo! Answers - G=
ot a question? Someone out there knows the answer. Try it=0Anow.=0Ahttp://u=
k.answers.yahoo.com/ 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32574-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 13 14:05:14 2008
Return-Path: <java-user-return-32574-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 15368 invoked from network); 13 Feb 2008 14:05:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Feb 2008 14:05:14 -0000
Received: (qmail 96435 invoked by uid 500); 13 Feb 2008 14:05:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96407 invoked by uid 500); 13 Feb 2008 14:05:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96396 invoked by uid 99); 13 Feb 2008 14:05:01 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Feb 2008 06:05:01 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [69.44.16.11] (HELO getopt.org) (69.44.16.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Feb 2008 14:04:15 +0000
Received: from [192.168.1.100] ([81.219.54.251])
	(authenticated)
	by getopt.org (8.11.6/8.11.6) with ESMTP id m1DE4fl20508
	for <java-user@lucene.apache.org>; Wed, 13 Feb 2008 08:04:41 -0600
Message-ID: <47B2F8E7.2020605@getopt.org>
Date: Wed, 13 Feb 2008 15:04:23 +0100
From: Andrzej Bialecki <ab@getopt.org>
User-Agent: Thunderbird 2.0.0.9 (Windows/20071031)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Stored Field vs "offset plus external file"?
References: <424273.46097.qm@web23007.mail.ird.yahoo.com>
In-Reply-To: <424273.46097.qm@web23007.mail.ird.yahoo.com>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

eks dev wrote:

> 2.  We use Lucene Index wit MMAP directory now, so the concern is
> that index could grow too large for MMAP with stored field like that.
> Is there a way to say, "do not use MMAP Directory for stored Fields,
> rather FSDirectory". I think not, but it is worth to ask as I think
> this could be useful thing... Imagine to be able to say "Load terms
> with RAM Directory, postings wit MMAP and stored fields with
> FSDirectory"... of course this is only for searching, not indexing.


IMHO it should be possible to do this by implementing a Directory 
subclass that can be configured to use mmap / ram / fs for specific 
index file types (e.g. tis, tii, fdt, prx and so on) - you should be 
able to cut & paste large chunks of each directory code to start the 
implementation.


-- 
Best regards,
Andrzej Bialecki     <><
  ___. ___ ___ ___ _ _   __________________________________
[__ || __|__/|__||\/|  Information Retrieval, Semantic Web
___|||__||  \|  ||  |  Embedded Unix, System Integration
http://www.sigram.com  Contact: info at sigram dot com


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32575-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 13 15:28:28 2008
Return-Path: <java-user-return-32575-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 18659 invoked from network); 13 Feb 2008 15:28:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Feb 2008 15:28:26 -0000
Received: (qmail 41544 invoked by uid 500); 13 Feb 2008 15:28:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41517 invoked by uid 500); 13 Feb 2008 15:28:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41506 invoked by uid 99); 13 Feb 2008 15:28:13 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Feb 2008 07:28:13 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 72.14.214.228 as permitted sender)
Received: from [72.14.214.228] (HELO hu-out-0506.google.com) (72.14.214.228)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Feb 2008 15:27:41 +0000
Received: by hu-out-0506.google.com with SMTP id 27so8995338hub.15
        for <java-user@lucene.apache.org>; Wed, 13 Feb 2008 07:27:47 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=t7m9ey1lh6b7lTrbZBQ3Ht1AZ7daBB/8BMHEsMkjwa4=;
        b=PiTIkkN6siUolh13WMQ4tvnqm5nko5nymX/PGQ4OsS1mqROdCZC8HOXH8VL96+T2+tkfYrBql4aa4jWbfSfrJ9uxuFG8ytJgM4wrY+ozpNd6l7h3LgIte/Dwd1PbF3nxRJVo42POvkCEDcbIeS4ZnhzXa3CBj2rQThSH5LZaeXI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=E2aKjWr2EWd2qqbtf3u2MWREL4LarUuDbxSx5kDbujutVi0w7/xDo6aVkzWIsaWYbFxjh7lFWX8piWb1s1d98Kl4XQwKeDf2x/x9l/IN1uKlwthTuXP8KpmSsoaUmqVTAhSrRlZF80Ee5U7Suxpq2RM7XBYqmevJEYhvUk2uQTg=
Received: by 10.82.138.6 with SMTP id l6mr59459bud.13.1202916467092;
        Wed, 13 Feb 2008 07:27:47 -0800 (PST)
Received: by 10.82.151.7 with HTTP; Wed, 13 Feb 2008 07:27:47 -0800 (PST)
Message-ID: <359a92830802130727n6316e394tfa6cf51455587be5@mail.gmail.com>
Date: Wed, 13 Feb 2008 10:27:47 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene multiple field search performance
In-Reply-To: <15456841.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_1751_24134272.1202916467071"
References: <15448754.post@talk.nabble.com>
	 <652776090802122244x35a3af13o6222370bb0025837@mail.gmail.com>
	 <15456841.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_1751_24134272.1202916467071
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Have you looked at the query.toString()? In particular, is your
date being split up into pieces on the slashes?

But why it's working today, I have no clue. Unless you were seeing
results on a freshly-opened reader yesterday....

Erick

On Feb 13, 2008 7:12 AM, Cesar Ronchese <ronchese@hotmail.com> wrote:

>
> Yes, it is optimized already.
>
> But today, when I got to test again, its looks like quick. :S
> I can't understand why.
>
>
>
>
>
> Michael Stoppelman wrote:
> >
> > Did your index size increase drastically?
> >
> > As a first step I would recommend optimizing your index if you haven't
> > already.
> >
> > -M
> >
> > On Feb 12, 2008 7:42 PM, Cesar Ronchese <ronchese@hotmail.com> wrote:
> >
> >>
> >> I was doing normal queries happily, seeing the results statistics come
> in
> >> about 0.02 seconds.
> >>
> >> But then, I added a extra field to seach togheter with the normal
> query,
> >> then the statistic pulled up to 0.35 seconds. That was a lot.
> >>
> >> example:
> >> normal query: some test (it returns quick)
> >> extra field query: +bookDate:"2007/02/12" some test (it returns slow. I
> >> also
> >> tried without +)
> >>
> >> Is the reduced performance normal for this case?
> >>
> >>
> >> Another doubt, I thought forcing bookDate in the Search Text it would
> >> reduce
> >> the universe of search, then leading to quicker responses. But it
> didn't.
> >> Is
> >> there a trick to improve the speed?
> >>
> >> Cesar
> >> --
> >> View this message in context:
> >>
> http://www.nabble.com/Lucene-multiple-field-search-performance-tp15448754p15448754.html
> >> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
> >>
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >
> >
>
> --
> View this message in context:
> http://www.nabble.com/Lucene-multiple-field-search-performance-tp15448754p15456841.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_1751_24134272.1202916467071--

From java-user-return-32576-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 13 16:04:13 2008
Return-Path: <java-user-return-32576-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 41835 invoked from network); 13 Feb 2008 16:04:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Feb 2008 16:04:13 -0000
Received: (qmail 33821 invoked by uid 500); 13 Feb 2008 16:04:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33780 invoked by uid 500); 13 Feb 2008 16:04:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33769 invoked by uid 99); 13 Feb 2008 16:04:00 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Feb 2008 08:04:00 -0800
X-ASF-Spam-Status: No, hits=3.7 required=10.0
	tests=DNS_FROM_OPENWHOIS,FORGED_HOTMAIL_RCVD2,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Feb 2008 16:03:14 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1JPK59-0004Ly-Df
	for java-user@lucene.apache.org; Wed, 13 Feb 2008 08:03:35 -0800
Message-ID: <15459824.post@talk.nabble.com>
Date: Wed, 13 Feb 2008 08:03:35 -0800 (PST)
From: Cesar Ronchese <ronchese@hotmail.com>
To: java-user@lucene.apache.org
Subject: Retrieving parsed query string terms
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: ronchese@hotmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hey, its me again :P

I've been looking a way to retrieve all parsed terms from a given query
string, but no success till now. For example, I need convert: 

    word01 "word02 word03" AND word04 theField:(xyz) mod_date:[20020101 TO
20030101] (abc OR xyp)

into:

    word01 
    "word02 word03" 
    word04 
    theField:(xyz)
    mod_date:[20020101 TO 20030101]
    (abc OR xyp)


Is there a way to retrive those results in a string array or term objects?

Thanks in advance.
Cesar
-- 
View this message in context: http://www.nabble.com/Retrieving-parsed-query-string-terms-tp15459824p15459824.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32577-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 13 16:54:41 2008
Return-Path: <java-user-return-32577-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61434 invoked from network); 13 Feb 2008 16:54:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Feb 2008 16:54:40 -0000
Received: (qmail 40651 invoked by uid 500); 13 Feb 2008 16:54:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40622 invoked by uid 500); 13 Feb 2008 16:54:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40611 invoked by uid 99); 13 Feb 2008 16:54:27 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Feb 2008 08:54:27 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of cambazz@gmail.com designates 209.85.128.186 as permitted sender)
Received: from [209.85.128.186] (HELO fk-out-0910.google.com) (209.85.128.186)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Feb 2008 16:53:56 +0000
Received: by fk-out-0910.google.com with SMTP id z23so75542fkz.5
        for <java-user@lucene.apache.org>; Wed, 13 Feb 2008 08:54:03 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        bh=Me8wk86Q6CI7F1js1+59mTA+KlqRK/YeZIsLBnf8X2k=;
        b=LGqe8YUN6ft56OQ0TdxRykzB55w/cV+Da5oafx8//O4xAtQoisdMfDwmDsHjxrFwWVU5t6NDwFVS5Vuu5ENrolcGLRU4fy7YnFe4OvNNyWTW4BNdWRug5FPLqHJVAZRK6uRJ32/Zf+U/gjJm7pTXaW3J6AlVuC+8OGhAIlMxutQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=rs9VFsJi9en86o1ig7rDJ7Pc+8UnOwcCAc3NlXs7Z7r6j8Loq0EZZ9ZrxJdZ7QSaTGDb7gNVVOq2MZY5vBa4EvZBqDRUhzDXaKjxpHRh3ZgKtX3odaiXvS3FQ7hlsqT07yqC9BGHT9YHWg1ER3g9M6gIjXg+GODb6ZYvGfnWoVI=
Received: by 10.82.148.7 with SMTP id v7mr254484bud.10.1202921642892;
        Wed, 13 Feb 2008 08:54:02 -0800 (PST)
Received: by 10.82.145.2 with HTTP; Wed, 13 Feb 2008 08:54:02 -0800 (PST)
Message-ID: <1bcb7c7f0802130854s1c5a0bacjc377e9f64225089c@mail.gmail.com>
Date: Wed, 13 Feb 2008 18:54:02 +0200
From: "Cam Bazz" <cambazz@gmail.com>
To: java-user@lucene.apache.org
Subject: matching products with suggest feature
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_20533_14859146.1202921642887"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_20533_14859146.1202921642887
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hello;

I am trying to make a product matcher based on lucene's ngram based suggest.
I did some changes so that instead of giving the speller a dictionary I feed
it with a List<String>.

For example lets say I have "HP NC4400 EY605EA CORE 2 DUO T5600
1.83GHz/512MB/80GB/12.1''
NOTEBOOK"
and I index it with speller using an ngram approach.

It works quite well - when using the suggest feature, for example if the
user submits something similar. similar as in the string lenght is
relatively equal, a word or two might be mistyped - or even missing, lucene
finds it.
However - when the user submits the same product - but with much less or
much more string length - for example "HP NC4400 EY605EA" or "HP NC4400
EY605EA CORE 2 DUO T5600 1.83GHz/512MB/80GB/12.1'' NOTEBOOK WITH WINDOWS XP
AND GIFT MOUSE" - the suggester wont work.

I am not sure about the ngrams approach any more.

Any ideas/recomendations/help greatly appreciated.

Best Regards,
C.B.

------=_Part_20533_14859146.1202921642887--

From java-user-return-32578-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 13 17:01:15 2008
Return-Path: <java-user-return-32578-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64754 invoked from network); 13 Feb 2008 17:01:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Feb 2008 17:01:15 -0000
Received: (qmail 53715 invoked by uid 500); 13 Feb 2008 17:01:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53680 invoked by uid 500); 13 Feb 2008 17:01:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53666 invoked by uid 99); 13 Feb 2008 17:01:01 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Feb 2008 09:01:01 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of serera@gmail.com designates 64.233.184.233 as permitted sender)
Received: from [64.233.184.233] (HELO wr-out-0506.google.com) (64.233.184.233)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Feb 2008 17:00:31 +0000
Received: by wr-out-0506.google.com with SMTP id c55so131755wra.11
        for <java-user@lucene.apache.org>; Wed, 13 Feb 2008 09:00:39 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=/sq5+SycNTwLsl5U6264u6ltMpi6OSpogwV8h/kweos=;
        b=b8wttgWGeBn+8sMY7Y//1CaZji1XmvoLMJy6pW7be79k7r31hotzuE7m4AhZxMLu/dV5ZfPIBkAF4dfl+8zDlJOXsMN/AISQYNiY5IOScmgDOXK5IP3hIllzArsnuQsciUTV0+9ytn830davq7vXK9fbSCA7q7y4vsUof5mv/uA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=m8rlTt9GwpSl7HlfJfpbDr0Kl0y6jOb+cEcSf/bd+rZ2DbB0Nvr2j95ir1cADmmOK3m63Q65bbzDnuSKxDllgaivRCTM9812Uv7Gmtno7VxCuv+80ELAra0Fh2YoiaWmJwfo2k7qCuEiiDRbbDgugw8GbJCDMgah3qajs9XziC0=
Received: by 10.141.28.12 with SMTP id f12mr119388rvj.1.1202922037216;
        Wed, 13 Feb 2008 09:00:37 -0800 (PST)
Received: by 10.141.70.4 with HTTP; Wed, 13 Feb 2008 09:00:37 -0800 (PST)
Message-ID: <786fde50802130900j51be4706va1d32eb10b868852@mail.gmail.com>
Date: Wed, 13 Feb 2008 19:00:37 +0200
From: "Shai Erera" <serera@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: matching products with suggest feature
In-Reply-To: <1bcb7c7f0802130854s1c5a0bacjc377e9f64225089c@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_39088_19158674.1202922037206"
References: <1bcb7c7f0802130854s1c5a0bacjc377e9f64225089c@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_39088_19158674.1202922037206
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

What is the default Operator of your QueryParser? Is it AND_OPERATOR or
OR_OPERATOR. If it's OR ... then it's strange. If it's AND, then once you
add more terms than what exists, it won't find anything.

On Feb 13, 2008 6:54 PM, Cam Bazz <cambazz@gmail.com> wrote:

> Hello;
>
> I am trying to make a product matcher based on lucene's ngram based
> suggest.
> I did some changes so that instead of giving the speller a dictionary I
> feed
> it with a List<String>.
>
> For example lets say I have "HP NC4400 EY605EA CORE 2 DUO T5600
> 1.83GHz/512MB/80GB/12.1''
> NOTEBOOK"
> and I index it with speller using an ngram approach.
>
> It works quite well - when using the suggest feature, for example if the
> user submits something similar. similar as in the string lenght is
> relatively equal, a word or two might be mistyped - or even missing,
> lucene
> finds it.
> However - when the user submits the same product - but with much less or
> much more string length - for example "HP NC4400 EY605EA" or "HP NC4400
> EY605EA CORE 2 DUO T5600 1.83GHz/512MB/80GB/12.1'' NOTEBOOK WITH WINDOWS
> XP
> AND GIFT MOUSE" - the suggester wont work.
>
> I am not sure about the ngrams approach any more.
>
> Any ideas/recomendations/help greatly appreciated.
>
> Best Regards,
> C.B.
>



-- 
Regards,

Shai Erera

------=_Part_39088_19158674.1202922037206--

From java-user-return-32579-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 13 17:22:04 2008
Return-Path: <java-user-return-32579-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71806 invoked from network); 13 Feb 2008 17:22:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Feb 2008 17:22:04 -0000
Received: (qmail 98085 invoked by uid 500); 13 Feb 2008 17:21:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98054 invoked by uid 500); 13 Feb 2008 17:21:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98043 invoked by uid 99); 13 Feb 2008 17:21:51 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Feb 2008 09:21:51 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of spring@gmx.eu designates 213.165.64.20 as permitted sender)
Received: from [213.165.64.20] (HELO mail.gmx.net) (213.165.64.20)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 13 Feb 2008 17:21:19 +0000
Received: (qmail invoked by alias); 13 Feb 2008 17:21:25 -0000
Received: from e178085049.adsl.alicedsl.de (EHLO msrvcn04) [85.178.85.49]
  by mail.gmx.net (mp028) with SMTP; 13 Feb 2008 18:21:25 +0100
X-Authenticated: #2635966
X-Provags-ID: V01U2FsdGVkX1+jjuxGuDWjftejh6+EpodDftbAMmgHxOwInke/PI
	igszVYadg7Cu8j
From: <spring@gmx.eu>
To: <java-user@lucene.apache.org>
Subject: design: merging resultset from RDBMS with lucene search results
Date: Wed, 13 Feb 2008 18:21:40 +0100
Message-ID: <614886DDE7054DB0A3B84D1042E7E604@msrvcn04>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.3790.4133
Thread-Index: AchuZOIqSRlDk0r6SpWnPfAHriQY+g==
X-Y-GMX-Trusted: 0
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

I have the following scenario:

RDBMS which contains the metadata for documents (ID, customer number,
doctype etc.).
Now I want to add fulltext search support.

So I will index the documents content in lucene and add the documents ID as
a stored field in lucene.

Now somebody wants to search like this: customer number 1234 AND content
"foo bar".

So I go to lucene, search for content:"foo bar" and get back a hitlist
containing the documents IDs.

Now - how to merge these Ids with the resultset of the RDBM's search for
customer number 1234?

1) select ... from ... where customer=1234 and ID in (<lucenes ID list>).

or

2) select ... from ... where customer=1234 and them join both resultsets in
the application.

or

3) no idea :)

What is best practice here?

Thank you.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32580-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 13 17:44:29 2008
Return-Path: <java-user-return-32580-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85826 invoked from network); 13 Feb 2008 17:44:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Feb 2008 17:44:29 -0000
Received: (qmail 50851 invoked by uid 500); 13 Feb 2008 17:44:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50831 invoked by uid 500); 13 Feb 2008 17:44:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50820 invoked by uid 99); 13 Feb 2008 17:44:16 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Feb 2008 09:44:16 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [194.125.145.37] (HELO mercury.propylon.com) (194.125.145.37)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Feb 2008 17:43:30 +0000
Received: from propylon-sdsl.sdsl.esat.net ([193.120.101.26] helo=[192.168.214.134])
	by mercury.propylon.com with esmtp (Exim 4.50)
	id 1JPLaR-0003rl-Oa
	for java-user@lucene.apache.org; Wed, 13 Feb 2008 17:40:04 +0000
Message-ID: <47B32C4A.4010408@propylon.com>
Date: Wed, 13 Feb 2008 09:43:38 -0800
From: John Byrne <john.byrne@propylon.com>
User-Agent: Thunderbird 2.0.0.9 (Windows/20071031)
MIME-Version: 1.0
To: java-user@lucene.apache.org
References: <614886DDE7054DB0A3B84D1042E7E604@msrvcn04>
In-Reply-To: <614886DDE7054DB0A3B84D1042E7E604@msrvcn04>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-SA-Exim-Connect-IP: 193.120.101.26
X-SA-Exim-Mail-From: john.byrne@propylon.com
Subject: Re: design: merging resultset from RDBMS with lucene search results
X-Spam-Checker-Version: SpamAssassin 3.0.3 (2005-04-27) on 
	mercury.propylon.com
X-Spam-Level: 
X-SA-Exim-Version: 4.2 (built Thu, 03 Mar 2005 10:44:12 +0100)
X-SA-Exim-Scanned: Yes (on mercury.propylon.com)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=0.1 required=5.0 tests=AWL autolearn=failed 
	version=3.0.3

Hi,

You might consider avoiding this problem altogether, by simply adding 
the meta data to your Lucene index. Lucene can handle untokenized 
fields, which is ideal for meta data. It might not be as quick as the 
RDB, but you could perhaps optimize by only searching in the RDB when 
you only need to search meta data, and using Lucene when you need both.

Regards,
JB

spring@gmx.eu wrote:
> Hi,
>
> I have the following scenario:
>
> RDBMS which contains the metadata for documents (ID, customer number,
> doctype etc.).
> Now I want to add fulltext search support.
>
> So I will index the documents content in lucene and add the documents ID as
> a stored field in lucene.
>
> Now somebody wants to search like this: customer number 1234 AND content
> "foo bar".
>
> So I go to lucene, search for content:"foo bar" and get back a hitlist
> containing the documents IDs.
>
> Now - how to merge these Ids with the resultset of the RDBM's search for
> customer number 1234?
>
> 1) select ... from ... where customer=1234 and ID in (<lucenes ID list>).
>
> or
>
> 2) select ... from ... where customer=1234 and them join both resultsets in
> the application.
>
> or
>
> 3) no idea :)
>
> What is best practice here?
>
> Thank you.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>
>   


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32581-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 13 17:52:47 2008
Return-Path: <java-user-return-32581-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89362 invoked from network); 13 Feb 2008 17:52:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Feb 2008 17:52:47 -0000
Received: (qmail 71254 invoked by uid 500); 13 Feb 2008 17:52:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71233 invoked by uid 500); 13 Feb 2008 17:52:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71222 invoked by uid 99); 13 Feb 2008 17:52:34 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Feb 2008 09:52:34 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of spring@gmx.eu designates 213.165.64.20 as permitted sender)
Received: from [213.165.64.20] (HELO mail.gmx.net) (213.165.64.20)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 13 Feb 2008 17:51:49 +0000
Received: (qmail invoked by alias); 13 Feb 2008 17:52:09 -0000
Received: from e178085049.adsl.alicedsl.de (EHLO msrvcn04) [85.178.85.49]
  by mail.gmx.net (mp017) with SMTP; 13 Feb 2008 18:52:09 +0100
X-Authenticated: #2635966
X-Provags-ID: V01U2FsdGVkX19WjLlNfH1WCEAycbgxMtslG3Oh59ayPjCrV5XhIs
	IrO11t58L6A8VH
From: <spring@gmx.eu>
To: <java-user@lucene.apache.org>
References: <614886DDE7054DB0A3B84D1042E7E604@msrvcn04> <47B32C4A.4010408@propylon.com>
Subject: RE: design: merging resultset from RDBMS with lucene search results
Date: Wed, 13 Feb 2008 18:52:25 +0100
Message-ID: <9CA3C0CD6DF34287AAC27A09FBCF6C6B@msrvcn04>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.3790.4133
In-Reply-To: <47B32C4A.4010408@propylon.com>
Thread-Index: AchuaBPsdDmIoiawSImzK9h0ka1HqQAAJCSg
X-Y-GMX-Trusted: 0
X-Virus-Checked: Checked by ClamAV on apache.org

The metadata is quite offen altered and there are millions of documents.
Also document access is secured by complex sql statements which lucene might
not support.
So this is not an option I think.

> -----Original Message-----
> From: John Byrne [mailto:john.byrne@propylon.com] 
> Sent: Mittwoch, 13. Februar 2008 18:44
> To: java-user@lucene.apache.org
> Subject: Re: design: merging resultset from RDBMS with lucene 
> search results
> 
> Hi,
> 
> You might consider avoiding this problem altogether, by simply adding 
> the meta data to your Lucene index. Lucene can handle untokenized 
> fields, which is ideal for meta data. It might not be as quick as the 
> RDB, but you could perhaps optimize by only searching in the RDB when 
> you only need to search meta data, and using Lucene when you 
> need both.
> 
> Regards,
> JB
> 
> spring@gmx.eu wrote:
> > Hi,
> >
> > I have the following scenario:
> >
> > RDBMS which contains the metadata for documents (ID, 
> customer number,
> > doctype etc.).
> > Now I want to add fulltext search support.
> >
> > So I will index the documents content in lucene and add the 
> documents ID as
> > a stored field in lucene.
> >
> > Now somebody wants to search like this: customer number 
> 1234 AND content
> > "foo bar".
> >
> > So I go to lucene, search for content:"foo bar" and get 
> back a hitlist
> > containing the documents IDs.
> >
> > Now - how to merge these Ids with the resultset of the 
> RDBM's search for
> > customer number 1234?
> >
> > 1) select ... from ... where customer=1234 and ID in 
> (<lucenes ID list>).
> >
> > or
> >
> > 2) select ... from ... where customer=1234 and them join 
> both resultsets in
> > the application.
> >
> > or
> >
> > 3) no idea :)
> >
> > What is best practice here?
> >
> > Thank you.
> >
> >
> > 
> ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> >
> >
> >   
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32582-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 13 18:19:52 2008
Return-Path: <java-user-return-32582-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4666 invoked from network); 13 Feb 2008 18:19:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Feb 2008 18:19:52 -0000
Received: (qmail 45901 invoked by uid 500); 13 Feb 2008 18:19:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45872 invoked by uid 500); 13 Feb 2008 18:19:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45856 invoked by uid 99); 13 Feb 2008 18:19:39 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Feb 2008 10:19:39 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of cambazz@gmail.com designates 209.85.128.186 as permitted sender)
Received: from [209.85.128.186] (HELO fk-out-0910.google.com) (209.85.128.186)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Feb 2008 18:19:08 +0000
Received: by fk-out-0910.google.com with SMTP id z23so101985fkz.5
        for <java-user@lucene.apache.org>; Wed, 13 Feb 2008 10:19:15 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=WG8CyGLFW99gLK78tWwNcy6jo9A3KLYMsuWioMWFsZw=;
        b=DCS2uVZJR2ba+RccN/hh2K3mr/NBpo1JiF8WqGMA7u3p6h9GongG+e7OFSPcm1n8cPUCfo+a+zI6WISLPCIIcZokO5dAs8aQ7tkYok5htE/UL+LyzqYUBy5wmCoD9VqPxpg8NJKW0m3rV4PZ5YJc01m4fBb3NsnBAM0zijlO6S4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=VbVOkXif5kcM/cuXn0nK7P8Aknp9bfLjCdtRD+iUgFtxXQqPIIdeI2+mcKdGA2Asemx8cqPs6t0MiXEVSREgwvMDicD8PdXp3lTbdg0UeQqAsV7pyW8W73Se94S10X59Q0/kSedD2ftBQgvQZsl06Pa59EEDZvJvJ736UgTjhQc=
Received: by 10.82.112.3 with SMTP id k3mr406481buc.31.1202926754906;
        Wed, 13 Feb 2008 10:19:14 -0800 (PST)
Received: by 10.82.145.2 with HTTP; Wed, 13 Feb 2008 10:19:14 -0800 (PST)
Message-ID: <1bcb7c7f0802131019q20bb7437pdd705eda6289f8c9@mail.gmail.com>
Date: Wed, 13 Feb 2008 20:19:14 +0200
From: "Cam Bazz" <cambazz@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: matching products with suggest feature
In-Reply-To: <786fde50802130900j51be4706va1d32eb10b868852@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_21668_32630279.1202926754895"
References: <1bcb7c7f0802130854s1c5a0bacjc377e9f64225089c@mail.gmail.com>
	 <786fde50802130900j51be4706va1d32eb10b868852@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_21668_32630279.1202926754895
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hello Shai,

The class that does the matching is Speller.
It does not work query based but rather there is a method called -
suggestSimilar(String word, int numSug); where the numSug is number of
suggestions. The words are kept in the index as ngrams. For example abcde is
kept as abc bcd cde.
So this is not normal query like we all know.

Best regards,
C.B.


On Feb 13, 2008 7:00 PM, Shai Erera <serera@gmail.com> wrote:

> What is the default Operator of your QueryParser? Is it AND_OPERATOR or
> OR_OPERATOR. If it's OR ... then it's strange. If it's AND, then once you
> add more terms than what exists, it won't find anything.
>
> On Feb 13, 2008 6:54 PM, Cam Bazz <cambazz@gmail.com> wrote:
>
> > Hello;
> >
> > I am trying to make a product matcher based on lucene's ngram based
> > suggest.
> > I did some changes so that instead of giving the speller a dictionary I
> > feed
> > it with a List<String>.
> >
> > For example lets say I have "HP NC4400 EY605EA CORE 2 DUO T5600
> > 1.83GHz/512MB/80GB/12.1''
> > NOTEBOOK"
> > and I index it with speller using an ngram approach.
> >
> > It works quite well - when using the suggest feature, for example if the
> > user submits something similar. similar as in the string lenght is
> > relatively equal, a word or two might be mistyped - or even missing,
> > lucene
> > finds it.
> > However - when the user submits the same product - but with much less or
> > much more string length - for example "HP NC4400 EY605EA" or "HP NC4400
> > EY605EA CORE 2 DUO T5600 1.83GHz/512MB/80GB/12.1'' NOTEBOOK WITH WINDOWS
> > XP
> > AND GIFT MOUSE" - the suggester wont work.
> >
> > I am not sure about the ngrams approach any more.
> >
> > Any ideas/recomendations/help greatly appreciated.
> >
> > Best Regards,
> > C.B.
> >
>
>
>
> --
> Regards,
>
> Shai Erera
>

------=_Part_21668_32630279.1202926754895--

From java-user-return-32583-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 13 18:46:51 2008
Return-Path: <java-user-return-32583-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 13029 invoked from network); 13 Feb 2008 18:46:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Feb 2008 18:46:51 -0000
Received: (qmail 93583 invoked by uid 500); 13 Feb 2008 18:46:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93560 invoked by uid 500); 13 Feb 2008 18:46:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93549 invoked by uid 99); 13 Feb 2008 18:46:38 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Feb 2008 10:46:38 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of abeba.tensai@gmail.com designates 64.233.170.190 as permitted sender)
Received: from [64.233.170.190] (HELO rn-out-0910.google.com) (64.233.170.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Feb 2008 18:46:07 +0000
Received: by rn-out-0910.google.com with SMTP id v46so196000rnb.14
        for <java-user@lucene.apache.org>; Wed, 13 Feb 2008 10:46:15 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        bh=pXo3k6BZy8R4pgREOCWtaNaziBDcw6YUvAdbMvCoZwk=;
        b=RFcaCL4vs65jJEX65wOS/lX06t7ifwvd+4OhAreRtT7hunWM3epXh9mG3kZEIstvspJR5p5KLe/mEcuhu7eX77m39xsiEUXpSMSpFf4Gl6XMD7Jm0j+7TCSNPbCgxoF9zqTh1TbG22OekThYLKGi5yiWd0cNvNm4H+Ouix9ffII=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=lm64/JW7tWQgJQH5LavLeq7AHbO343lC/nGn4hBfXjHYLZqaBhBBfOmBKQQaHpTEJ3RciI4QrXrnnDGcJAVQYrzSCBm2dmFqEzErHi9AfvPKJGv98AwR/a4ikJh28lXGeJycWbIPznfF0VIZd3CRRhy/pIElpSTWSxQ1BJX2akM=
Received: by 10.142.221.19 with SMTP id t19mr264201wfg.4.1202928374359;
        Wed, 13 Feb 2008 10:46:14 -0800 (PST)
Received: by 10.142.139.9 with HTTP; Wed, 13 Feb 2008 10:46:14 -0800 (PST)
Message-ID: <743eedfa0802131046w2d384281p90d455dbf16073ab@mail.gmail.com>
Date: Wed, 13 Feb 2008 13:46:14 -0500
From: "Abeba Tensai" <abeba.tensai@gmail.com>
To: java-user@lucene.apache.org
Subject: Question .. advanced query
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_5395_33239247.1202928374339"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_5395_33239247.1202928374339
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi,

I am trying to perform a query that will enable me to run the following
logic against the index:
"4 3 [>=7] [>=4]" .. [>=7] means the third number must be greater or equal
to 7 and [>=4] means that the fourth number must be greater or equal to 4 ..
I have reviewed the query syntax and it seems that it is not possible to run
something like that .. can you confirm?

Thank you for your time,

Abeba.

------=_Part_5395_33239247.1202928374339--

From java-user-return-32584-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 13 23:29:48 2008
Return-Path: <java-user-return-32584-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 14421 invoked from network); 13 Feb 2008 23:29:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Feb 2008 23:29:48 -0000
Received: (qmail 84255 invoked by uid 500); 13 Feb 2008 23:29:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84229 invoked by uid 500); 13 Feb 2008 23:29:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 84218 invoked by uid 99); 13 Feb 2008 23:29:35 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Feb 2008 15:29:35 -0800
X-ASF-Spam-Status: No, hits=1.5 required=10.0
	tests=SPF_PASS,WEIRD_PORT
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [17.148.16.76] (HELO smtpoutm.mac.com) (17.148.16.76)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Feb 2008 23:28:47 +0000
Received: from mac.com (asmtp005-s [10.150.69.68])
	by smtpoutm.mac.com (Xserve/smtpout013/MantshX 4.0) with ESMTP id m1DNT7cU000735
	for <java-user@lucene.apache.org>; Wed, 13 Feb 2008 15:29:07 -0800 (PST)
Received: from [192.168.1.4] (adsl-84-226-47-17.adslplus.ch [84.226.47.17])
	(authenticated bits=0)
	by mac.com (Xserve/asmtp005/MantshX 4.0) with ESMTP id m1DNT2fh004219
	(version=TLSv1/SSLv3 cipher=AES128-SHA bits=128 verify=NO)
	for <java-user@lucene.apache.org>; Wed, 13 Feb 2008 15:29:05 -0800 (PST)
Message-Id: <65CBB1AB-19D7-498C-89AE-414141204A66@mac.com>
From: Petite Abeille <petite_abeille@mac.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=US-ASCII; format=flowed
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v919.2)
Subject: [OT][ANN] Nanoki
Date: Thu, 14 Feb 2008 00:28:45 +0100
X-Mailer: Apple Mail (2.919.2)
X-Virus-Checked: Checked by ClamAV on apache.org

[Not even remotely related to Lucene, Java, Apache or anything]

Nanoki, a sweet little wiki engine implemented in Lua [1].

http://alt.textdrive.com/nanoki/

Online demo:

http://svr225.stepx.com:3388/nanoki

Kind regards,

PA.

[1] http://www.lua.org/about.html

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32585-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 14 01:12:01 2008
Return-Path: <java-user-return-32585-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59323 invoked from network); 14 Feb 2008 01:12:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Feb 2008 01:12:00 -0000
Received: (qmail 64883 invoked by uid 500); 14 Feb 2008 01:11:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64854 invoked by uid 500); 14 Feb 2008 01:11:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64841 invoked by uid 99); 14 Feb 2008 01:11:48 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Feb 2008 17:11:48 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of cedric.ho@gmail.com designates 72.14.204.232 as permitted sender)
Received: from [72.14.204.232] (HELO qb-out-0506.google.com) (72.14.204.232)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Feb 2008 01:11:17 +0000
Received: by qb-out-0506.google.com with SMTP id o21so10301221qba.9
        for <java-user@lucene.apache.org>; Wed, 13 Feb 2008 17:11:24 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        bh=+wrFo2Kfg+XJk7SzHkNOszzAezqAUHHzxL9edKtBv8A=;
        b=a/cYeUpu8fLJllSxjAjv9Yclt2znXaXO22UGDR0/c4Oge8DlYa2WqwmhQ/7SktXzUQl9qWMAgpi0r8JJOViD9YHi6klXR/XUyCn9SYL3evOp5cq/2x/LbB09kncjqN4KCRFdx94whksGjr8UwbLR4GA1psjcAN3+oVpbhFKTdg4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=MKfSi18GtDSqvkCU0iA6qQb4ew96ATV0+Isbs5Qql6RRIq1i5WJ6HklH86La9JlvqABr/qxNYsFBH2bZ9v6/wYwgptInzy8s5UDoLOPwBK/7yi2X+0/fyw81COg+hyif5Ox+mxvwDd6h3bepgUzuHVRQmz0vDkGps9D6z8NrbMQ=
Received: by 10.115.76.1 with SMTP id d1mr723413wal.108.1202951484292;
        Wed, 13 Feb 2008 17:11:24 -0800 (PST)
Received: by 10.114.156.2 with HTTP; Wed, 13 Feb 2008 17:11:24 -0800 (PST)
Message-ID: <839ba01c0802131711v5754b5fanaefbb2f5a5a4c3fb@mail.gmail.com>
Date: Thu, 14 Feb 2008 09:11:24 +0800
From: "Cedric Ho" <cedric.ho@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: How to pass additional information into Similarity.scorePayload(...)
In-Reply-To: <6929E41F-F5CA-4BFD-ADE4-B75D3EAA75EA@apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <839ba01c0802130131x3afecdcdna3825cab69adc3a9@mail.gmail.com>
	 <6929E41F-F5CA-4BFD-ADE4-B75D3EAA75EA@apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

I am using Lucene's Built-in query classes: TernQuery, PhraseQuery,
WildcardQuery, BooleanQuery and many of the SpanQueries.

The info I am going to pass in is just some weightings for different
part of the indexed contents. For example if the payload indicate that
a term is in the 2nd paragraph, then I'll take the weighting for the
2nd paragraph and multiply it by the score.

So it seems without writing my own query there's no way to do it ?

Cedric


On Feb 13, 2008 7:53 PM, Grant Ingersoll <gsingers@apache.org> wrote:
> Are you writing your own Query?  What kind of info did you have in
> mind?  scorePayload is called from the query scoring class, so I am
> not sure how you would pass in info to it unless you were writing your
> own Query class.
>
> -Grant
>
>
> On Feb 13, 2008, at 4:31 AM, Cedric Ho wrote:
>
> > Hi all,
> >
> > My problem is I have some additional weighting info that come with
> > each search. And I need to take both the weighting info and the
> > payload to calculate scores.
> >
> > So how do I access the weighting info in
> > Similarity.scorePayload(String,byte[],int,int) ? I've thought about
> > using a ThreadLocal, but this seems like a hack, are there better
> > options ?
> >
> >
> > Regards,
> > Cedric
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32586-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 14 01:53:37 2008
Return-Path: <java-user-return-32586-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70403 invoked from network); 14 Feb 2008 01:53:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Feb 2008 01:53:37 -0000
Received: (qmail 95278 invoked by uid 500); 14 Feb 2008 01:53:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95248 invoked by uid 500); 14 Feb 2008 01:53:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95237 invoked by uid 99); 14 Feb 2008 01:53:25 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Feb 2008 17:53:25 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [208.97.132.66] (HELO spunkymail-a4.g.dreamhost.com) (208.97.132.66)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Feb 2008 01:52:37 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a4.g.dreamhost.com (Postfix) with ESMTP id CA7A73B9BF
	for <java-user@lucene.apache.org>; Wed, 13 Feb 2008 17:52:56 -0800 (PST)
Message-Id: <BB4E809C-9190-4A87-BFFC-1300AB2B4CF5@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <839ba01c0802131711v5754b5fanaefbb2f5a5a4c3fb@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v919.2)
Subject: Re: How to pass additional information into Similarity.scorePayload(...)
Date: Wed, 13 Feb 2008 20:52:55 -0500
References: <839ba01c0802130131x3afecdcdna3825cab69adc3a9@mail.gmail.com> <6929E41F-F5CA-4BFD-ADE4-B75D3EAA75EA@apache.org> <839ba01c0802131711v5754b5fanaefbb2f5a5a4c3fb@mail.gmail.com>
X-Mailer: Apple Mail (2.919.2)
X-Virus-Checked: Checked by ClamAV on apache.org

The only Query that currently utilizes the scorePayload functionality  
is the BoostingTermQuery.  I guess I would have a look at that as a  
starting point.


On Feb 13, 2008, at 8:11 PM, Cedric Ho wrote:

> I am using Lucene's Built-in query classes: TernQuery, PhraseQuery,
> WildcardQuery, BooleanQuery and many of the SpanQueries.
>
> The info I am going to pass in is just some weightings for different
> part of the indexed contents. For example if the payload indicate that
> a term is in the 2nd paragraph, then I'll take the weighting for the
> 2nd paragraph and multiply it by the score.
>
> So it seems without writing my own query there's no way to do it ?
>
> Cedric
>
>
> On Feb 13, 2008 7:53 PM, Grant Ingersoll <gsingers@apache.org> wrote:
>> Are you writing your own Query?  What kind of info did you have in
>> mind?  scorePayload is called from the query scoring class, so I am
>> not sure how you would pass in info to it unless you were writing  
>> your
>> own Query class.
>>
>> -Grant
>>
>>
>> On Feb 13, 2008, at 4:31 AM, Cedric Ho wrote:
>>
>>> Hi all,
>>>
>>> My problem is I have some additional weighting info that come with
>>> each search. And I need to take both the weighting info and the
>>> payload to calculate scores.
>>>
>>> So how do I access the weighting info in
>>> Similarity.scorePayload(String,byte[],int,int) ? I've thought about
>>> using a ThreadLocal, but this seems like a hack, are there better
>>> options ?
>>>
>>>
>>> Regards,
>>> Cedric
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

--------------------------
Grant Ingersoll
http://lucene.grantingersoll.com
http://www.lucenebootcamp.com

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32587-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 14 06:45:24 2008
Return-Path: <java-user-return-32587-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30936 invoked from network); 14 Feb 2008 06:45:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Feb 2008 06:45:24 -0000
Received: (qmail 2307 invoked by uid 500); 14 Feb 2008 06:45:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2280 invoked by uid 500); 14 Feb 2008 06:45:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2269 invoked by uid 99); 14 Feb 2008 06:45:11 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Feb 2008 22:45:11 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of serera@gmail.com designates 64.233.166.179 as permitted sender)
Received: from [64.233.166.179] (HELO py-out-1112.google.com) (64.233.166.179)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Feb 2008 06:44:40 +0000
Received: by py-out-1112.google.com with SMTP id a73so364208pye.9
        for <java-user@lucene.apache.org>; Wed, 13 Feb 2008 22:44:48 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=YK+9QDJLPUS2n4aaVWtmIblUS42je2ebjexmS8meHIM=;
        b=YvM6OEpjYZiufLyMdFkzJWE3t+3kQqiAV8Hwo2HVIPtT95TlIATL0vjc9n9Eskv5fsmkvCvJSHsMPtcAW3+++Nw3o1t9MWj2VOfn9uO8wLbH/OCDP4HL1q4sNB1v72x0MG6untbPiwQUlWW/soiUKTzqeXSbD4lAJfeHMwB6P6U=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=KsticJTNM9hV7OZjqemfWoRrBFU2CfkWd2+biU69egXGB7fDeeSU/s97jmt06xGO+OsO2pcoh6h7OsmY2pjfKAjpfVaF+Qc3YqEu+ZfdkvuQINKrDPmuh44hzOKQgeI1QwUUNUKyEVjeARFdpuvuntD4+njuhVdR2cCLuPnIw9A=
Received: by 10.141.177.2 with SMTP id e2mr659822rvp.268.1202971487337;
        Wed, 13 Feb 2008 22:44:47 -0800 (PST)
Received: by 10.141.70.4 with HTTP; Wed, 13 Feb 2008 22:44:47 -0800 (PST)
Message-ID: <786fde50802132244q3020da14xa3371f925cebc50e@mail.gmail.com>
Date: Thu, 14 Feb 2008 08:44:47 +0200
From: "Shai Erera" <serera@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: matching products with suggest feature
In-Reply-To: <1bcb7c7f0802131019q20bb7437pdd705eda6289f8c9@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_227_15218669.1202971487315"
References: <1bcb7c7f0802130854s1c5a0bacjc377e9f64225089c@mail.gmail.com>
	 <786fde50802130900j51be4706va1d32eb10b868852@mail.gmail.com>
	 <1bcb7c7f0802131019q20bb7437pdd705eda6289f8c9@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_227_15218669.1202971487315
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Is this Speller class a Lucene class? I didn't find it in the main code
stream, maybe it's part of contrib?

Anyway, still it depends how it is implemented (OR or AND). For example,
someone indexed a document with the word "abcde" and the index keeps the
ngrams "abc", "bcd" and "cde". Then somebody types in "abc", what would the
speller suggest? What would the speller suggest for "abce"?
If it works in an OR mode, I assume it would suggest "abcde" for both, as
"abc" appears in both. But if it works in AND mode, then for the first it
will suggest "abcde" but for the second it won't suggest it because the
ngrams produced are "abc" and "bce" .. and "bce" does not appear in "abcde".

Am I right? If not, can you elaborate more on the Speller class you use?

On Wed, Feb 13, 2008 at 8:19 PM, Cam Bazz <cambazz@gmail.com> wrote:

> Hello Shai,
>
> The class that does the matching is Speller.
> It does not work query based but rather there is a method called -
> suggestSimilar(String word, int numSug); where the numSug is number of
> suggestions. The words are kept in the index as ngrams. For example abcde
> is
> kept as abc bcd cde.
> So this is not normal query like we all know.
>
> Best regards,
> C.B.
>
>
> On Feb 13, 2008 7:00 PM, Shai Erera <serera@gmail.com> wrote:
>
> > What is the default Operator of your QueryParser? Is it AND_OPERATOR or
> > OR_OPERATOR. If it's OR ... then it's strange. If it's AND, then once
> you
> > add more terms than what exists, it won't find anything.
> >
> > On Feb 13, 2008 6:54 PM, Cam Bazz <cambazz@gmail.com> wrote:
> >
> > > Hello;
> > >
> > > I am trying to make a product matcher based on lucene's ngram based
> > > suggest.
> > > I did some changes so that instead of giving the speller a dictionary
> I
> > > feed
> > > it with a List<String>.
> > >
> > > For example lets say I have "HP NC4400 EY605EA CORE 2 DUO T5600
> > > 1.83GHz/512MB/80GB/12.1''
> > > NOTEBOOK"
> > > and I index it with speller using an ngram approach.
> > >
> > > It works quite well - when using the suggest feature, for example if
> the
> > > user submits something similar. similar as in the string lenght is
> > > relatively equal, a word or two might be mistyped - or even missing,
> > > lucene
> > > finds it.
> > > However - when the user submits the same product - but with much less
> or
> > > much more string length - for example "HP NC4400 EY605EA" or "HP
> NC4400
> > > EY605EA CORE 2 DUO T5600 1.83GHz/512MB/80GB/12.1'' NOTEBOOK WITH
> WINDOWS
> > > XP
> > > AND GIFT MOUSE" - the suggester wont work.
> > >
> > > I am not sure about the ngrams approach any more.
> > >
> > > Any ideas/recomendations/help greatly appreciated.
> > >
> > > Best Regards,
> > > C.B.
> > >
> >
> >
> >
> > --
> > Regards,
> >
> > Shai Erera
> >
>



-- 
Regards,

Shai Erera

------=_Part_227_15218669.1202971487315--

From java-user-return-32588-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 14 06:58:44 2008
Return-Path: <java-user-return-32588-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33599 invoked from network); 14 Feb 2008 06:58:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Feb 2008 06:58:44 -0000
Received: (qmail 11717 invoked by uid 500); 14 Feb 2008 06:58:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11683 invoked by uid 500); 14 Feb 2008 06:58:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11672 invoked by uid 99); 14 Feb 2008 06:58:32 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Feb 2008 22:58:32 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [194.109.24.24] (HELO smtp-vbr4.xs4all.nl) (194.109.24.24)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Feb 2008 06:58:00 +0000
Received: from k8u.lan (porta.xs4all.nl [80.127.24.69])
	by smtp-vbr4.xs4all.nl (8.13.8/8.13.8) with ESMTP id m1E6w7x8043309
	for <java-user@lucene.apache.org>; Thu, 14 Feb 2008 07:58:07 +0100 (CET)
	(envelope-from paul.elschot@xs4all.nl)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: java-user@lucene.apache.org
Subject: Re: How to pass additional information into Similarity.scorePayload(...)
Date: Thu, 14 Feb 2008 07:58:06 +0100
User-Agent: KMail/1.9.6 (enterprise 0.20070907.709405)
References: <839ba01c0802130131x3afecdcdna3825cab69adc3a9@mail.gmail.com> <6929E41F-F5CA-4BFD-ADE4-B75D3EAA75EA@apache.org> <839ba01c0802131711v5754b5fanaefbb2f5a5a4c3fb@mail.gmail.com>
In-Reply-To: <839ba01c0802131711v5754b5fanaefbb2f5a5a4c3fb@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="utf-8"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200802140758.06967.paul.elschot@xs4all.nl>
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org

Op Thursday 14 February 2008 02:11:24 schreef Cedric Ho:
> I am using Lucene's Built-in query classes: TernQuery, PhraseQuery,
> WildcardQuery, BooleanQuery and many of the SpanQueries.
> 
> The info I am going to pass in is just some weightings for different
> part of the indexed contents. For example if the payload indicate that
> a term is in the 2nd paragraph, then I'll take the weighting for the
> 2nd paragraph and multiply it by the score.
> 
> So it seems without writing my own query there's no way to do it ?

In case it is only positional information that is stored in the payload
(i.e. some integer number that does not decrease when tokenizing the
document), it is also possible to use an extra field and make sure the
position increment for that field is only positive when the number
(currently your payload) increases.
A SpanFirstQuery on this extra field would almost do, and you will
probably need https://issues.apache.org/jira/browse/LUCENE-1093 .
This will be somewhat slower than using a payload, because the search
will be done in two separate fields, but it will work.

Regards,
Paul Elschot

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32589-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 14 08:45:17 2008
Return-Path: <java-user-return-32589-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56606 invoked from network); 14 Feb 2008 08:45:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Feb 2008 08:45:16 -0000
Received: (qmail 8181 invoked by uid 500); 14 Feb 2008 08:45:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7207 invoked by uid 500); 14 Feb 2008 08:45:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7195 invoked by uid 99); 14 Feb 2008 08:45:03 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Feb 2008 00:45:03 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of cedric.ho@gmail.com designates 209.85.146.176 as permitted sender)
Received: from [209.85.146.176] (HELO wa-out-1112.google.com) (209.85.146.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Feb 2008 08:44:32 +0000
Received: by wa-out-1112.google.com with SMTP id j40so509122wah.11
        for <java-user@lucene.apache.org>; Thu, 14 Feb 2008 00:44:40 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        bh=ofP4+nFgPNpXhp6Q/dDF6ktfShdNqgs1rO8K20rQVoU=;
        b=afradN+Ze1iXVdU0Uu6zL7p1LVDSlN99vAmV67C06OBmQOy1zxcUqq47DRI03Y3a3EOYKX/sU3sf70geJVF1D1EsCNtnwX17p/X7Si5pvvd/yl9iZCylkKP63gTiL3a7Vvybi4ZK1wbAVzLy7TJcvlJSntUvv/mTqozNd33NY8I=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=T8tLLhwcWlj6IOFsdmsmriBt7CLTbCIl01g4JpLsdDraoYh3aYJePZ7wE6tSETnC5o4zMzTlHU0Ub3IYb6pgyI2Fnk5UJgZPkpy2ApkLHur5yG8Mk4hl/sj1yQRq5UGJlUur7M+jD2nOCN15NVxHBNKQRCHoD1Nz1Jut+PHSLAw=
Received: by 10.114.153.18 with SMTP id a18mr92185wae.82.1202978680351;
        Thu, 14 Feb 2008 00:44:40 -0800 (PST)
Received: by 10.114.156.2 with HTTP; Thu, 14 Feb 2008 00:44:40 -0800 (PST)
Message-ID: <839ba01c0802140044l518d2c5dt39960d3f1a1dffaf@mail.gmail.com>
Date: Thu, 14 Feb 2008 16:44:40 +0800
From: "Cedric Ho" <cedric.ho@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: How to pass additional information into Similarity.scorePayload(...)
In-Reply-To: <200802140758.06967.paul.elschot@xs4all.nl>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <839ba01c0802130131x3afecdcdna3825cab69adc3a9@mail.gmail.com>
	 <6929E41F-F5CA-4BFD-ADE4-B75D3EAA75EA@apache.org>
	 <839ba01c0802131711v5754b5fanaefbb2f5a5a4c3fb@mail.gmail.com>
	 <200802140758.06967.paul.elschot@xs4all.nl>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Paul,

Sorry I am not sure I understand your solution.

Because I would need to apply this scoring logic to all the different
types of Queries. A search may consists of something like:

+(term1 phrase2 wildcard*)  +spanNear(term3 term4) [10/5/2]

And this [10/5/2] ratio have to be applied to the whole search query
before it. So I am not sure how would using just SpanFirstQuery with a
separate field work in this situation.

Anyway, I know my requirement is a bit strange, so it's ok if I can't
do this in Lucene. I'll settle with using a ThreadLocal to store the
[10/5/2] weighting and retrieve it in the Similarity.scorePayload(...)
function.


BTW, this problem I am facing now is different from the last one I
asked here, which you have proposed with the Modified SpanFirstQuery
solution =)

But I am really grateful with all the helps I get here. Keep up the good work!

Cheers,
Cedric


On Thu, Feb 14, 2008 at 2:58 PM, Paul Elschot <paul.elschot@xs4all.nl> wrote:
> Op Thursday 14 February 2008 02:11:24 schreef Cedric Ho:
>
> > I am using Lucene's Built-in query classes: TernQuery, PhraseQuery,
>  > WildcardQuery, BooleanQuery and many of the SpanQueries.
>  >
>  > The info I am going to pass in is just some weightings for different
>  > part of the indexed contents. For example if the payload indicate that
>  > a term is in the 2nd paragraph, then I'll take the weighting for the
>  > 2nd paragraph and multiply it by the score.
>  >
>  > So it seems without writing my own query there's no way to do it ?
>
>  In case it is only positional information that is stored in the payload
>  (i.e. some integer number that does not decrease when tokenizing the
>  document), it is also possible to use an extra field and make sure the
>  position increment for that field is only positive when the number
>  (currently your payload) increases.
>  A SpanFirstQuery on this extra field would almost do, and you will
>  probably need https://issues.apache.org/jira/browse/LUCENE-1093 .
>  This will be somewhat slower than using a payload, because the search
>  will be done in two separate fields, but it will work.
>
>  Regards,
>  Paul Elschot
>
>
>
>  ---------------------------------------------------------------------
>  To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>  For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32590-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 14 10:25:57 2008
Return-Path: <java-user-return-32590-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85558 invoked from network); 14 Feb 2008 10:25:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Feb 2008 10:25:57 -0000
Received: (qmail 31193 invoked by uid 500); 14 Feb 2008 10:25:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31170 invoked by uid 500); 14 Feb 2008 10:25:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31159 invoked by uid 99); 14 Feb 2008 10:25:43 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Feb 2008 02:25:43 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of cambazz@gmail.com designates 64.233.182.189 as permitted sender)
Received: from [64.233.182.189] (HELO nf-out-0910.google.com) (64.233.182.189)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Feb 2008 10:25:12 +0000
Received: by nf-out-0910.google.com with SMTP id d3so195866nfc.15
        for <java-user@lucene.apache.org>; Thu, 14 Feb 2008 02:25:18 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=94h8v8THAspBhlIDAfa+EfbgfqKjNd4O7piIEuOwPac=;
        b=Ix8aUxBYz0AMDZ+jEKeR6kif+hLJr+HYtakQn1H2gP3YgAuQCRxZqUfonkQTGfFLD4+AsW6SFMHoHBd1NAETFiHYz2Q19cDIgMD+tUzu2Uobs4wCWaZamJbz+pUteNtRLkNbG7aVvH3ulOuQd9FmtTtEUGwMDXRMmHKrEnSqelE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=Gg74sKFaLbiZXAoZTbV20lCSv+VSdBzq5rAoE7DYD6j0YeDwHHeGhuxcBZTS6SiYzJmm9wtEsWlE1rQoWEZonbHixlyoYSozLvvQqe87ppwaaqiarvndWQJlwSy6Md0E11bdOlIneJSwKeyeM9jue9rhmN0Ac5OOS0mhgMRrvws=
Received: by 10.82.105.13 with SMTP id d13mr409194buc.36.1202984717710;
        Thu, 14 Feb 2008 02:25:17 -0800 (PST)
Received: by 10.82.145.2 with HTTP; Thu, 14 Feb 2008 02:25:17 -0800 (PST)
Message-ID: <1bcb7c7f0802140225x2560a6a3tac6149c5e2c1923@mail.gmail.com>
Date: Thu, 14 Feb 2008 12:25:17 +0200
From: "Cam Bazz" <cambazz@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: matching products with suggest feature
In-Reply-To: <786fde50802132244q3020da14xa3371f925cebc50e@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_601_386341.1202984717667"
References: <1bcb7c7f0802130854s1c5a0bacjc377e9f64225089c@mail.gmail.com>
	 <786fde50802130900j51be4706va1d32eb10b868852@mail.gmail.com>
	 <1bcb7c7f0802131019q20bb7437pdd705eda6289f8c9@mail.gmail.com>
	 <786fde50802132244q3020da14xa3371f925cebc50e@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_601_386341.1202984717667
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hello Shai,

Thats right, Speller is in the contrib.it is named spellchecker. Basically
it is a special index that stores the words as ngrams.
I looked at the code to see how it is querying the index and basically it
makes ngrams and adds each ngram to a boolean query.

Here is how it adds to the boolean query. I could not find out whether it is
AND or OR

Best.

  private static void add(BooleanQuery q, String name, String value, float
boost) {
    Query tq = new TermQuery(new Term(name, value));
    tq.setBoost(boost);
    q.add(new BooleanClause(tq, BooleanClause.Occur.SHOULD));
  }

  private static void add(BooleanQuery q, String name, String value) {
    q.add(new BooleanClause(new TermQuery(new Term(name, value)),
BooleanClause.Occur.SHOULD));
  }

On Thu, Feb 14, 2008 at 8:44 AM, Shai Erera <serera@gmail.com> wrote:

> Is this Speller class a Lucene class? I didn't find it in the main code
> stream, maybe it's part of contrib?
>
> Anyway, still it depends how it is implemented (OR or AND). For example,
> someone indexed a document with the word "abcde" and the index keeps the
> ngrams "abc", "bcd" and "cde". Then somebody types in "abc", what would
> the
> speller suggest? What would the speller suggest for "abce"?
> If it works in an OR mode, I assume it would suggest "abcde" for both, as
> "abc" appears in both. But if it works in AND mode, then for the first it
> will suggest "abcde" but for the second it won't suggest it because the
> ngrams produced are "abc" and "bce" .. and "bce" does not appear in
> "abcde".
>
> Am I right? If not, can you elaborate more on the Speller class you use?
>
> On Wed, Feb 13, 2008 at 8:19 PM, Cam Bazz <cambazz@gmail.com> wrote:
>
> > Hello Shai,
> >
> > The class that does the matching is Speller.
> > It does not work query based but rather there is a method called -
> > suggestSimilar(String word, int numSug); where the numSug is number of
> > suggestions. The words are kept in the index as ngrams. For example
> abcde
> > is
> > kept as abc bcd cde.
> > So this is not normal query like we all know.
> >
> > Best regards,
> > C.B.
> >
> >
> > On Feb 13, 2008 7:00 PM, Shai Erera <serera@gmail.com> wrote:
> >
> > > What is the default Operator of your QueryParser? Is it AND_OPERATOR
> or
> > > OR_OPERATOR. If it's OR ... then it's strange. If it's AND, then once
> > you
> > > add more terms than what exists, it won't find anything.
> > >
> > > On Feb 13, 2008 6:54 PM, Cam Bazz <cambazz@gmail.com> wrote:
> > >
> > > > Hello;
> > > >
> > > > I am trying to make a product matcher based on lucene's ngram based
> > > > suggest.
> > > > I did some changes so that instead of giving the speller a
> dictionary
> > I
> > > > feed
> > > > it with a List<String>.
> > > >
> > > > For example lets say I have "HP NC4400 EY605EA CORE 2 DUO T5600
> > > > 1.83GHz/512MB/80GB/12.1''
> > > > NOTEBOOK"
> > > > and I index it with speller using an ngram approach.
> > > >
> > > > It works quite well - when using the suggest feature, for example if
> > the
> > > > user submits something similar. similar as in the string lenght is
> > > > relatively equal, a word or two might be mistyped - or even missing,
> > > > lucene
> > > > finds it.
> > > > However - when the user submits the same product - but with much
> less
> > or
> > > > much more string length - for example "HP NC4400 EY605EA" or "HP
> > NC4400
> > > > EY605EA CORE 2 DUO T5600 1.83GHz/512MB/80GB/12.1'' NOTEBOOK WITH
> > WINDOWS
> > > > XP
> > > > AND GIFT MOUSE" - the suggester wont work.
> > > >
> > > > I am not sure about the ngrams approach any more.
> > > >
> > > > Any ideas/recomendations/help greatly appreciated.
> > > >
> > > > Best Regards,
> > > > C.B.
> > > >
> > >
> > >
> > >
> > > --
> > > Regards,
> > >
> > > Shai Erera
> > >
> >
>
>
>
> --
> Regards,
>
> Shai Erera
>

------=_Part_601_386341.1202984717667--

From java-user-return-32591-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 14 11:01:31 2008
Return-Path: <java-user-return-32591-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95889 invoked from network); 14 Feb 2008 11:01:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Feb 2008 11:01:31 -0000
Received: (qmail 81692 invoked by uid 500); 14 Feb 2008 11:01:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81661 invoked by uid 500); 14 Feb 2008 11:01:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81650 invoked by uid 99); 14 Feb 2008 11:01:17 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Feb 2008 03:01:17 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of serera@gmail.com designates 66.249.82.239 as permitted sender)
Received: from [66.249.82.239] (HELO wx-out-0506.google.com) (66.249.82.239)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Feb 2008 11:00:46 +0000
Received: by wx-out-0506.google.com with SMTP id i28so289491wxd.20
        for <java-user@lucene.apache.org>; Thu, 14 Feb 2008 03:00:54 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=jAzvSdqhiGMntpGhUKyv8fALzfMMrz9VNfd90rax8oY=;
        b=IqrzF/xoCF+XZC+ruCQHisY+8VULRsEz1BkEC9ubV5bk8Kjg8HadzRMIdpPcUOjqHe/HhU4VtHYkXauvjpBYMjL9rtc4jlKqHAx9I09mV7JxMiE5mlhth9xY5sGa+US8BCSKRoq8VhA1W+SB+/C3bqvMW1nCalVWtUegYQ8Wszo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=qZb4nTf2TJuxV/8fmO7lsKHdgKZ7rVkXyPLiM4HHP33TKKy+D2kvTbxhnz9qPg8saaXOR592mKcSpnUuMGa+uy8df0dNTsHuslJemgmP9YRCqq7CzSMN+Krh1Nzuy0CyUj6IDIuLDP68FFYwt5PstXBbnhLuNjPyO0fNBgOfGSQ=
Received: by 10.141.145.11 with SMTP id x11mr834807rvn.215.1202986852346;
        Thu, 14 Feb 2008 03:00:52 -0800 (PST)
Received: by 10.141.70.4 with HTTP; Thu, 14 Feb 2008 03:00:52 -0800 (PST)
Message-ID: <786fde50802140300g40ea17d6gc3a211b5e70a350e@mail.gmail.com>
Date: Thu, 14 Feb 2008 13:00:52 +0200
From: "Shai Erera" <serera@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: matching products with suggest feature
In-Reply-To: <1bcb7c7f0802140225x2560a6a3tac6149c5e2c1923@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_477_11612004.1202986852321"
References: <1bcb7c7f0802130854s1c5a0bacjc377e9f64225089c@mail.gmail.com>
	 <786fde50802130900j51be4706va1d32eb10b868852@mail.gmail.com>
	 <1bcb7c7f0802131019q20bb7437pdd705eda6289f8c9@mail.gmail.com>
	 <786fde50802132244q3020da14xa3371f925cebc50e@mail.gmail.com>
	 <1bcb7c7f0802140225x2560a6a3tac6149c5e2c1923@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_477_11612004.1202986852321
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

If it adds the clauses as Occur.SHOULD, it means they should appear, but
does not have to appear.
Looking at suggestSimilar, it looks like it computes the edit_distance
values of the requested word and the suggestions. If the score is lower than
the minimum score, it may skip the word.
Could you try indexing a document with the word "abcde" and request
suggestions for "abce". It may be, like in your example, that if the
requested word is too different than the actual word (for example if their
length is very different), it will fail to achieve what you need.

On Thu, Feb 14, 2008 at 12:25 PM, Cam Bazz <cambazz@gmail.com> wrote:

> Hello Shai,
>
> Thats right, Speller is in the contrib.it is named spellchecker. Basically
> it is a special index that stores the words as ngrams.
> I looked at the code to see how it is querying the index and basically it
> makes ngrams and adds each ngram to a boolean query.
>
> Here is how it adds to the boolean query. I could not find out whether it
> is
> AND or OR
>
> Best.
>
>  private static void add(BooleanQuery q, String name, String value, float
> boost) {
>    Query tq = new TermQuery(new Term(name, value));
>    tq.setBoost(boost);
>    q.add(new BooleanClause(tq, BooleanClause.Occur.SHOULD));
>  }
>
>  private static void add(BooleanQuery q, String name, String value) {
>    q.add(new BooleanClause(new TermQuery(new Term(name, value)),
> BooleanClause.Occur.SHOULD));
>   }
>
> On Thu, Feb 14, 2008 at 8:44 AM, Shai Erera <serera@gmail.com> wrote:
>
> > Is this Speller class a Lucene class? I didn't find it in the main code
> > stream, maybe it's part of contrib?
> >
> > Anyway, still it depends how it is implemented (OR or AND). For example,
> > someone indexed a document with the word "abcde" and the index keeps the
> > ngrams "abc", "bcd" and "cde". Then somebody types in "abc", what would
> > the
> > speller suggest? What would the speller suggest for "abce"?
> > If it works in an OR mode, I assume it would suggest "abcde" for both,
> as
> > "abc" appears in both. But if it works in AND mode, then for the first
> it
> > will suggest "abcde" but for the second it won't suggest it because the
> > ngrams produced are "abc" and "bce" .. and "bce" does not appear in
> > "abcde".
> >
> > Am I right? If not, can you elaborate more on the Speller class you use?
> >
> > On Wed, Feb 13, 2008 at 8:19 PM, Cam Bazz <cambazz@gmail.com> wrote:
> >
> > > Hello Shai,
> > >
> > > The class that does the matching is Speller.
> > > It does not work query based but rather there is a method called -
> > > suggestSimilar(String word, int numSug); where the numSug is number of
> > > suggestions. The words are kept in the index as ngrams. For example
> > abcde
> > > is
> > > kept as abc bcd cde.
> > > So this is not normal query like we all know.
> > >
> > > Best regards,
> > > C.B.
> > >
> > >
> > > On Feb 13, 2008 7:00 PM, Shai Erera <serera@gmail.com> wrote:
> > >
> > > > What is the default Operator of your QueryParser? Is it AND_OPERATOR
> > or
> > > > OR_OPERATOR. If it's OR ... then it's strange. If it's AND, then
> once
> > > you
> > > > add more terms than what exists, it won't find anything.
> > > >
> > > > On Feb 13, 2008 6:54 PM, Cam Bazz <cambazz@gmail.com> wrote:
> > > >
> > > > > Hello;
> > > > >
> > > > > I am trying to make a product matcher based on lucene's ngram
> based
> > > > > suggest.
> > > > > I did some changes so that instead of giving the speller a
> > dictionary
> > > I
> > > > > feed
> > > > > it with a List<String>.
> > > > >
> > > > > For example lets say I have "HP NC4400 EY605EA CORE 2 DUO T5600
> > > > > 1.83GHz/512MB/80GB/12.1''
> > > > > NOTEBOOK"
> > > > > and I index it with speller using an ngram approach.
> > > > >
> > > > > It works quite well - when using the suggest feature, for example
> if
> > > the
> > > > > user submits something similar. similar as in the string lenght is
> > > > > relatively equal, a word or two might be mistyped - or even
> missing,
> > > > > lucene
> > > > > finds it.
> > > > > However - when the user submits the same product - but with much
> > less
> > > or
> > > > > much more string length - for example "HP NC4400 EY605EA" or "HP
> > > NC4400
> > > > > EY605EA CORE 2 DUO T5600 1.83GHz/512MB/80GB/12.1'' NOTEBOOK WITH
> > > WINDOWS
> > > > > XP
> > > > > AND GIFT MOUSE" - the suggester wont work.
> > > > >
> > > > > I am not sure about the ngrams approach any more.
> > > > >
> > > > > Any ideas/recomendations/help greatly appreciated.
> > > > >
> > > > > Best Regards,
> > > > > C.B.
> > > > >
> > > >
> > > >
> > > >
> > > > --
> > > > Regards,
> > > >
> > > > Shai Erera
> > > >
> > >
> >
> >
> >
> > --
> > Regards,
> >
> > Shai Erera
> >
>



-- 
Regards,

Shai Erera

------=_Part_477_11612004.1202986852321--

From java-user-return-32592-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 14 12:00:27 2008
Return-Path: <java-user-return-32592-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 18597 invoked from network); 14 Feb 2008 12:00:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Feb 2008 12:00:27 -0000
Received: (qmail 72769 invoked by uid 500); 14 Feb 2008 12:00:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72748 invoked by uid 500); 14 Feb 2008 12:00:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72737 invoked by uid 99); 14 Feb 2008 12:00:12 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Feb 2008 04:00:12 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of gshankar.sahu@gmail.com designates 72.14.246.245 as permitted sender)
Received: from [72.14.246.245] (HELO ag-out-0708.google.com) (72.14.246.245)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Feb 2008 11:59:41 +0000
Received: by ag-out-0708.google.com with SMTP id 23so2177254agd.5
        for <java-user@lucene.apache.org>; Thu, 14 Feb 2008 03:59:48 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=ywtLn/UJYZhajT/iOaaKxPllok5DWh15vjzzMn9P+i8=;
        b=pQYadIB7G11e3teaga8CweE4a7wRbpeGG2fIMiRkaRizcix3rJ7fmDlZTAWJBMYbwa5CZlwrgy3OgCibj6Tr/LdWCE95D5BAevM8/V/C+cMSX7ne4Mat1PiLpsUgZoEXfTMjQMXhUe8/W05u2y778V/FmZ/qDq0/YB8J3WAsIfs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=cl4SExocDZwDj1LvNAVSkeRIlG0jQ2thAh4fqJj5RXTzuStvs2/L7oRk0RKYHxOG7bg+P1+0ziX7RZpM0tkjH0YkXTm5PBLFHof8z2+57d4dA928DBHeM4Lou8E4p8Ob0pFn03QE4qxTKBVFUHRoSOc1HbbgoJAS/tsPkwxSEbY=
Received: by 10.100.120.15 with SMTP id s15mr1377927anc.17.1202990388816;
        Thu, 14 Feb 2008 03:59:48 -0800 (PST)
Received: by 10.100.105.4 with HTTP; Thu, 14 Feb 2008 03:59:48 -0800 (PST)
Message-ID: <979a94470802140359u50b56129j51c51639c165d865@mail.gmail.com>
Date: Thu, 14 Feb 2008 17:29:48 +0530
From: "Gauri Shankar" <gshankar.sahu@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: how to get the programmatic control over index's document id
In-Reply-To: <359a92830802090740p3c658ab9qf413b70a3257a859@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_920_24711316.1202990388804"
References: <979a94470802090438h67b457dfuabd72e84d6fd7c2f@mail.gmail.com>
	 <359a92830802090740p3c658ab9qf413b70a3257a859@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_920_24711316.1202990388804
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Thanks a lot for both of you.

yes, I am talking about internally assigned document id.

Erick : I am already using the unique id into the index mapped to one of our
DB's primary key to uniquely identify the docs from index.  Now to get the
value of this unique field i need to call getDocumet(). But when the
resultset is too large than this step is very slow as I am calling
getDocument for each hit. Now I am using the FIELDCACHE and that has
improved a lot. But I am thinking If I can find a way so that docId can be
my unique ids and that will super optimize our search.
Any suggestions??

Thanks,
Gauri Shankar

On Sat, Feb 9, 2008 at 9:10 PM, Erick Erickson <erickerickson@gmail.com>
wrote:

> If you're referring to the internally-assigned document id, I don't think
> there is a way. Assuming you're trying to assign one yourself or some
> such.
>
> From all the discussions I've seen, I don't think there's even a faint
> possibility that controlling this will be added to Lucene. Note that
> existing IDs change as your index changes.
>
> Why do you care? What problem are you trying to solve? One common
> suggestion is to create your own field (as Patrick suggests) that contains
> your own unique ID. Using TermEnum/TermDocs will give you efficient
> ways of going from your unique ID to a docID...
>
> Best
> Erick
>
> On Feb 9, 2008 7:38 AM, Gauri Shankar <gshankar.sahu@gmail.com> wrote:
>
> > Hi,
> >
> > I would like to get the control over the docId field from my code. Can
> > anyone suggest some way for doing the same?
> >
> >
> > --
> > Warm Regards,
> > Gauri Shankar
> >
>



-- 
Warm Regards,
Gauri Shankar

------=_Part_920_24711316.1202990388804--

From java-user-return-32593-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 14 13:02:23 2008
Return-Path: <java-user-return-32593-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54350 invoked from network); 14 Feb 2008 13:02:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Feb 2008 13:02:23 -0000
Received: (qmail 52230 invoked by uid 500); 14 Feb 2008 13:02:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52193 invoked by uid 500); 14 Feb 2008 13:02:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52154 invoked by uid 99); 14 Feb 2008 13:02:04 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Feb 2008 05:02:04 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [203.199.18.82] (HELO imap.impetus.co.in) (203.199.18.82)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Feb 2008 13:01:18 +0000
Received: from impetus876 ([192.168.98.85]) by
          imap.impetus.co.in (Netscape Messaging Server 4.15) with ESMTP
          id JW8CLP00.RXQ for <java-user@lucene.apache.org>; Thu, 14 Feb
          2008 18:40:37 +0530 
From: "Mitesh Soni" <mitesh.soni@impetus.co.in>
To: <java-user@lucene.apache.org>
Subject: Lucene+Oracle Integration
Date: Thu, 14 Feb 2008 18:31:33 +0530
Message-ID: <000201c86f09$b9ceb660$5562a8c0@impetus.co.in>
MIME-Version: 1.0
Content-Type: multipart/related;
	boundary="----=_NextPart_000_0003_01C86F37.D386F260"
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook, Build 10.0.6822
Importance: Normal
Thread-Index: AchvCbl/x2JZ+qYxQ+agSAenvTqZ8Q==
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3198
X-Virus-Checked: Checked by ClamAV on apache.org

------=_NextPart_000_0003_01C86F37.D386F260
Content-Type: multipart/alternative;
	boundary="----=_NextPart_001_0004_01C86F37.D386F260"


------=_NextPart_001_0004_01C86F37.D386F260
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit

I have run the build file in the lucene-2.3.0\contrib\ojvm successfully. But
I cannot create index with the use of .

 

create index it1 on t1(f2) indextype is lucene.LuceneIndex 

parameters('Analyzer:org.apache.lucene.analysis.SimpleAnalyzer');

 

ERROR at line 1:

ORA-29855: error occurred in the execution of ODCIINDEXCREATE routine

ORA-29532: Java call terminated by uncaught Java exception:

java.lang.RuntimeException: Failed to get lucene index prefix='LUCENE.IT1'

name='segments.gen'

 

Do we need to set classpath for the generated jar lucene-ojvm-2.3.jar and
lucene-ojvm-2.3-test.jar or do we need to put them in oracle?

 

Thanks & Regards,

Mitesh Soni 

 


------=_NextPart_001_0004_01C86F37.D386F260
Content-Type: text/html;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

<html>

<head>
<META HTTP-EQUIV=3D"Content-Type" CONTENT=3D"text/html; =
charset=3Dus-ascii">


<meta name=3DGenerator content=3D"Microsoft Word 10 (filtered)">

<style>
<!--
 /* Style Definitions */
 p.MsoNormal, li.MsoNormal, div.MsoNormal
	{margin:0in;
	margin-bottom:.0001pt;
	font-size:12.0pt;
	font-family:"Times New Roman";}
a:link, span.MsoHyperlink
	{color:blue;
	text-decoration:underline;}
a:visited, span.MsoHyperlinkFollowed
	{color:purple;
	text-decoration:underline;}
p
	{margin-right:0in;
	margin-left:0in;
	font-size:12.0pt;
	font-family:"Times New Roman";}
span.EmailStyle17
	{color:black;}
@page Section1
	{size:8.5in 11.0in;
	margin:1.0in 1.25in 1.0in 1.25in;}
div.Section1
	{page:Section1;}
-->
</style>

<style>
p.MsoNormal
	{margin-left:37.5pt;}
</style>
</head>

<body bgcolor=3Dwhite background=3D"cid:image001.jpg@01C86F37.D32E9930" =
lang=3DEN-US
link=3Dblue vlink=3Dpurple =
style=3D'margin-left:37.5pt;margin-top:15.0pt'>

<div class=3DSection1>

<p class=3DMsoNormal><font size=3D3 color=3Dblack face=3D"Times New =
Roman"><span
style=3D'font-size:12.0pt;color:black'>I have run the build file in the =
lucene-2.3.0\contrib\ojvm
successfully. But I cannot create index with the use of =
&#8230;</span></font></p>

<p class=3DMsoNormal><font size=3D3 color=3Dblack face=3D"Times New =
Roman"><span
style=3D'font-size:12.0pt;color:black'>&nbsp;</span></font></p>

<p class=3DMsoNormal style=3D'margin-left:37.5pt'><font size=3D3 =
color=3Dblack
face=3D"Times New Roman"><span =
style=3D'font-size:12.0pt;color:black'>create index
it1 on t1(f2) indextype is lucene.LuceneIndex </span></font></p>

<p class=3DMsoNormal style=3D'margin-left:37.5pt'><font size=3D3 =
color=3Dblack
face=3D"Times New Roman"><span =
style=3D'font-size:12.0pt;color:black'>parameters('Analyzer:org.apache.lu=
cene.analysis.SimpleAnalyzer');</span></font></p>

<p class=3DMsoNormal><font size=3D3 color=3Dblack face=3D"Times New =
Roman"><span
style=3D'font-size:12.0pt;color:black'>&nbsp;</span></font></p>

<p class=3DMsoNormal style=3D'margin-left:37.5pt'><font size=3D3 =
color=3Dblack
face=3D"Times New Roman"><span =
style=3D'font-size:12.0pt;color:black'>ERROR at line
1:</span></font></p>

<p class=3DMsoNormal style=3D'margin-left:37.5pt'><font size=3D3 =
color=3Dblack
face=3D"Times New Roman"><span =
style=3D'font-size:12.0pt;color:black'>ORA-29855:
error occurred in the execution of ODCIINDEXCREATE =
routine</span></font></p>

<p class=3DMsoNormal style=3D'margin-left:37.5pt'><font size=3D3 =
color=3Dblack
face=3D"Times New Roman"><span =
style=3D'font-size:12.0pt;color:black'>ORA-29532:
Java call terminated by uncaught Java exception:</span></font></p>

<p class=3DMsoNormal style=3D'margin-left:37.5pt'><font size=3D3 =
color=3Dblack
face=3D"Times New Roman"><span =
style=3D'font-size:12.0pt;color:black'>java.lang.RuntimeException:
Failed to get lucene index prefix=3D'LUCENE.IT1'</span></font></p>

<p class=3DMsoNormal style=3D'margin-left:37.5pt'><font size=3D3 =
color=3Dblack
face=3D"Times New Roman"><span =
style=3D'font-size:12.0pt;color:black'>name=3D'segments.gen'</span></font=
></p>

<p class=3DMsoNormal><font size=3D3 color=3Dblack face=3D"Times New =
Roman"><span
style=3D'font-size:12.0pt;color:black'>&nbsp;</span></font></p>

<p class=3DMsoNormal><font size=3D3 color=3Dblack face=3D"Times New =
Roman"><span
style=3D'font-size:12.0pt;color:black'>Do we need to set classpath for =
the
generated jar lucene-ojvm-2.3.jar and lucene-ojvm-2.3-test.jar or do we =
need to
put them in oracle?</span></font></p>

<p class=3DMsoNormal><font size=3D3 color=3Dblack face=3D"Times New =
Roman"><span
style=3D'font-size:12.0pt;color:black'>&nbsp;</span></font></p>

<div>

<p class=3DMsoNormal><font size=3D2 color=3Dblack face=3DArial><span =
style=3D'font-size:
10.0pt;font-family:Arial;color:black'>Thanks &amp; =
Regards,</span></font></p>

<p class=3DMsoNormal><font size=3D2 color=3Dblack face=3DArial><span =
style=3D'font-size:
10.0pt;font-family:Arial;color:black'>Mitesh Soni</span></font><font =
size=3D2
color=3D"#006666" face=3DArial><span =
style=3D'font-size:10.0pt;font-family:Arial;
color:#006666'>&nbsp;</span></font></p>

</div>

<p><font size=3D2 color=3D"#006666" face=3DArial><span =
style=3D'font-size:10.0pt;
font-family:Arial;color:#006666'>&nbsp;</span></font></p>

</div>

</body>

</html>

------=_NextPart_001_0004_01C86F37.D386F260--

------=_NextPart_000_0003_01C86F37.D386F260--


From java-user-return-32594-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 14 13:08:54 2008
Return-Path: <java-user-return-32594-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56325 invoked from network); 14 Feb 2008 13:08:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Feb 2008 13:08:54 -0000
Received: (qmail 64059 invoked by uid 500); 14 Feb 2008 13:08:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64031 invoked by uid 500); 14 Feb 2008 13:08:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64020 invoked by uid 99); 14 Feb 2008 13:08:42 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Feb 2008 05:08:42 -0800
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=SPF_PASS,URIBL_GREY
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of marcelo.ochoa@gmail.com designates 209.85.132.245 as permitted sender)
Received: from [209.85.132.245] (HELO an-out-0708.google.com) (209.85.132.245)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Feb 2008 13:08:08 +0000
Received: by an-out-0708.google.com with SMTP id c5so66704anc.49
        for <java-user@lucene.apache.org>; Thu, 14 Feb 2008 05:08:15 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        bh=U9YgJxvvK91MeAZPAOO2po8as+GCFGqHvwx0TvJeskc=;
        b=g15g20S/1eyvP1o6zrCrGrdG/pz+FlaYnM/RxuWaIfWP8ALVJERW+IqjFJOwNedTAKIZQz+RC07opojOhDH0EWvj1qrUQtZgFuZ2BnDXfkd1tnONtENMTzeIEY97rZOO9Yuo+W7x/dMmaJcHZnle0qpoH6dqwxitPxOEyCkLbLI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=GgselWZuQzgGzado4SYlhrc1onIyRevfjaKsNQK8gCldlM56E6iZ5JZExAcpw9wlm5fCMzXr35ThwBbca6Nbdp7VML4U10QWkmZ4WgtjcDQn2SuSGW5I6VxXR++0jkmrfW/c9Bc/LO7gYMERsA/k+c4a18Qv7E1pWT3gOwq7lKI=
Received: by 10.100.107.7 with SMTP id f7mr1444018anc.31.1202994495171;
        Thu, 14 Feb 2008 05:08:15 -0800 (PST)
Received: by 10.100.47.9 with HTTP; Thu, 14 Feb 2008 05:08:15 -0800 (PST)
Message-ID: <126142c0802140508s23c33c1do76e5126609423edb@mail.gmail.com>
Date: Thu, 14 Feb 2008 10:08:15 -0300
From: "Marcelo Ochoa" <marcelo.ochoa@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene+Oracle Integration
In-Reply-To: <000201c86f09$b9ceb660$5562a8c0@impetus.co.in>
MIME-Version: 1.0
Content-Type: text/plain; charset=WINDOWS-1252
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <000201c86f09$b9ceb660$5562a8c0@impetus.co.in>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Mitesh:
  Lucene-OJVM integration is not tested against lucene-2.3.0 version.
  I'll do it ASAP.
  Best regards, Marcelo.

On Thu, Feb 14, 2008 at 10:01 AM, Mitesh Soni <mitesh.soni@impetus.co.in> w=
rote:
>
>
>
>
> I have run the build file in the lucene-2.3.0\contrib\ojvm successfully. =
But
> I cannot create index with the use of =85
>
>
>
> create index it1 on t1(f2) indextype is lucene.LuceneIndex
>
> parameters('Analyzer:org.apache.lucene.analysis.SimpleAnalyzer');
>
>
>
> ERROR at line 1:
>
> ORA-29855: error occurred in the execution of ODCIINDEXCREATE routine
>
> ORA-29532: Java call terminated by uncaught Java exception:
>
> java.lang.RuntimeException: Failed to get lucene index prefix=3D'LUCENE.I=
T1'
>
> name=3D'segments.gen'
>
>
>
> Do we need to set classpath for the generated jar lucene-ojvm-2.3.jar and
> lucene-ojvm-2.3-test.jar or do we need to put them in oracle?
>
>
>
>
> Thanks & Regards,
>
> Mitesh Soni
>
>



--=20
Marcelo F. Ochoa
http://marceloochoa.blogspot.com/
http://marcelo.ochoa.googlepages.com/home
______________
Do you Know DBPrism? Look @ DB Prism's Web Site
http://www.dbprism.com.ar/index.html
More info?
Chapter 17 of the book "Programming the Oracle Database using Java &
Web Services"
http://www.amazon.com/gp/product/1555583296/
Chapter 21 of the book "Professional XML Databases" - Wrox Press
http://www.amazon.com/gp/product/1861003587/
Chapter 8 of the book "Oracle & Open Source" - O'Reilly
http://www.oreilly.com/catalog/oracleopen/

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32595-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 14 13:33:03 2008
Return-Path: <java-user-return-32595-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67276 invoked from network); 14 Feb 2008 13:33:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Feb 2008 13:33:02 -0000
Received: (qmail 97205 invoked by uid 500); 14 Feb 2008 13:32:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97176 invoked by uid 500); 14 Feb 2008 13:32:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97165 invoked by uid 99); 14 Feb 2008 13:32:47 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Feb 2008 05:32:46 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 72.14.214.228 as permitted sender)
Received: from [72.14.214.228] (HELO hu-out-0506.google.com) (72.14.214.228)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Feb 2008 13:32:15 +0000
Received: by hu-out-0506.google.com with SMTP id 27so10208267hub.15
        for <java-user@lucene.apache.org>; Thu, 14 Feb 2008 05:32:22 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=PxnsYwC0neGhbBirAj7SCJ1/SEpp6G6NncUpxcQEGgY=;
        b=VTHCySVopezpQ/x4YiP1s+u4o2I4ZK2aICxnq7aaH6DccRxv6trgcNS5Yr1coipPNbfOHV5jhMkTDfKk71sz9Nlckx9qz/ritsEp7q9opqa2kCdbwhYGQLNf4FEGwks9LblgrMxE9mj1PkcqIdoT+9Uj4bfd5g2wm91LH8YPMNA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=qCbAkRTMHEgxB1I3ICEdzb3eei8OMVZUVvSsphPHWNFlPLAGQPl6rEW0hpR/pxrCBeurjH/eql5JK4mSBhLjr6urVW+letZSwH164SGHTZ0rlTcv+7v/Q9t/UFzGp+Q/gVN+7ylgeCPllm0w0gILDv+WxyH0htRK6XRVb6cysyM=
Received: by 10.82.140.20 with SMTP id n20mr2406660bud.24.1202995942303;
        Thu, 14 Feb 2008 05:32:22 -0800 (PST)
Received: by 10.82.151.7 with HTTP; Thu, 14 Feb 2008 05:32:22 -0800 (PST)
Message-ID: <359a92830802140532n7b2e14c2p9b6a43097e0fde8c@mail.gmail.com>
Date: Thu, 14 Feb 2008 08:32:22 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: design: merging resultset from RDBMS with lucene search results
In-Reply-To: <614886DDE7054DB0A3B84D1042E7E604@msrvcn04>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_778_5333645.1202995942297"
References: <614886DDE7054DB0A3B84D1042E7E604@msrvcn04>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_778_5333645.1202995942297
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Another possibility is to do it backwards, it depends on how expensive the
SQL query is I suppose. The idea would be to go ahead and to your
SQL query *first*, then construct a Lucene Filter to use with your query
using TermDocs/TermEnum.

I'd guess (without knowing much about your problem space) that *if* you
can spin through your SQL query and extract all of the unique doc IDs
acceptably quickly that you won't notice constructing the filter time-wise.

Also, search through the user list archive for embedding Lucene in a
database.
I confess that that entire discussion flew right over my head, so I don't
know if it's applicable, but........

Erick

On Wed, Feb 13, 2008 at 12:21 PM, <spring@gmx.eu> wrote:

> Hi,
>
> I have the following scenario:
>
> RDBMS which contains the metadata for documents (ID, customer number,
> doctype etc.).
> Now I want to add fulltext search support.
>
> So I will index the documents content in lucene and add the documents ID
> as
> a stored field in lucene.
>
> Now somebody wants to search like this: customer number 1234 AND content
> "foo bar".
>
> So I go to lucene, search for content:"foo bar" and get back a hitlist
> containing the documents IDs.
>
> Now - how to merge these Ids with the resultset of the RDBM's search for
> customer number 1234?
>
> 1) select ... from ... where customer=1234 and ID in (<lucenes ID list>).
>
> or
>
> 2) select ... from ... where customer=1234 and them join both resultsets
> in
> the application.
>
> or
>
> 3) no idea :)
>
> What is best practice here?
>
> Thank you.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_778_5333645.1202995942297--

From java-user-return-32596-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 14 13:45:48 2008
Return-Path: <java-user-return-32596-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 74124 invoked from network); 14 Feb 2008 13:45:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Feb 2008 13:45:48 -0000
Received: (qmail 19501 invoked by uid 500); 14 Feb 2008 13:45:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19472 invoked by uid 500); 14 Feb 2008 13:45:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19461 invoked by uid 99); 14 Feb 2008 13:45:34 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Feb 2008 05:45:34 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.128.187 as permitted sender)
Received: from [209.85.128.187] (HELO fk-out-0910.google.com) (209.85.128.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Feb 2008 13:45:03 +0000
Received: by fk-out-0910.google.com with SMTP id z23so353689fkz.5
        for <java-user@lucene.apache.org>; Thu, 14 Feb 2008 05:45:10 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=TKm6QHE9ySToGgYtO7517Fl/U1OA/mlH7ZPdac1Yax8=;
        b=gC99XbB4VZz2RwKCOJj3rAwyZPLB4uvWCIfN2MXio7kQKUWm0413XMP2uuRmi2+p1vcuwp5bohdmamGph+darfKqmhUS2J1iTTD8m+OpkD9k2BijkTBHbkPSaX6WwRIDH8pN8/Id9cyxouBO8Ls0KsNsz/VyUG2RAsBREl5T1dY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=NkWx0dL8xuRy2Dz9pzR9eWW+cWWmJMi08rk8T9mExDje6jHH6y4+3tC+uFdztLtmJOtsT05Q4c6aET1OmUhv6PyVy+KF2AhY89X3lRtbAlZ/e0hTUcLl8hajgBZj6dDtHcJ2chpPz2ukcwKSus7oMBhW7Ee2L8cVEfvaECmOx8M=
Received: by 10.82.113.6 with SMTP id l6mr2445602buc.22.1202996710355;
        Thu, 14 Feb 2008 05:45:10 -0800 (PST)
Received: by 10.82.151.7 with HTTP; Thu, 14 Feb 2008 05:45:10 -0800 (PST)
Message-ID: <359a92830802140545y1e9a7129p123ae4f4380e74d9@mail.gmail.com>
Date: Thu, 14 Feb 2008 08:45:10 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: how to get the programmatic control over index's document id
In-Reply-To: <979a94470802140359u50b56129j51c51639c165d865@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_813_21016605.1202996710351"
References: <979a94470802090438h67b457dfuabd72e84d6fd7c2f@mail.gmail.com>
	 <359a92830802090740p3c658ab9qf413b70a3257a859@mail.gmail.com>
	 <979a94470802140359u50b56129j51c51639c165d865@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_813_21016605.1202996710351
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I'm a little confused about what's happening here

Are you inserting a pre-existing primary key from the DB into your
Lucene documents?

Or are you using the Lucene doc ID as your primary key in the database?
If this latter, you're going to have many, many problems since the Lucene
ID can, and will, change. Sometimes surprisingly. So in this case speeding
up your app is the least of your problems <G>....

Assuming you're doing the former, you don't have to call getDocument to get
the DB primary key from your Lucene document. Look at TermEnum/TermDocs
which can give you the Lucene doc ID *from the index* rather than from the
document.
Of course, you'll have to index the DB PK in your Lucene document, but that
doesn't take much space....

And TermDocs/TermEnum is MUCH faster than getDocument....

But what problem are you really trying to solve? It sounds like you're
searching the
Lucene index, then trying to use the DB primary keys that you get back from
the search to do something in the DB. If this isn't the case, perhaps you
could explain the problem you're trying to solve a little more.

Best
Erick


On Thu, Feb 14, 2008 at 6:59 AM, Gauri Shankar <gshankar.sahu@gmail.com>
wrote:

> Thanks a lot for both of you.
>
> yes, I am talking about internally assigned document id.
>
> Erick : I am already using the unique id into the index mapped to one of
> our
> DB's primary key to uniquely identify the docs from index.  Now to get the
> value of this unique field i need to call getDocumet(). But when the
> resultset is too large than this step is very slow as I am calling
> getDocument for each hit. Now I am using the FIELDCACHE and that has
> improved a lot. But I am thinking If I can find a way so that docId can be
> my unique ids and that will super optimize our search.
> Any suggestions??
>
> Thanks,
> Gauri Shankar
>
> On Sat, Feb 9, 2008 at 9:10 PM, Erick Erickson <erickerickson@gmail.com>
> wrote:
>
> > If you're referring to the internally-assigned document id, I don't
> think
> > there is a way. Assuming you're trying to assign one yourself or some
> > such.
> >
> > From all the discussions I've seen, I don't think there's even a faint
> > possibility that controlling this will be added to Lucene. Note that
> > existing IDs change as your index changes.
> >
> > Why do you care? What problem are you trying to solve? One common
> > suggestion is to create your own field (as Patrick suggests) that
> contains
> > your own unique ID. Using TermEnum/TermDocs will give you efficient
> > ways of going from your unique ID to a docID...
> >
> > Best
> > Erick
> >
> > On Feb 9, 2008 7:38 AM, Gauri Shankar <gshankar.sahu@gmail.com> wrote:
> >
> > > Hi,
> > >
> > > I would like to get the control over the docId field from my code. Can
> > > anyone suggest some way for doing the same?
> > >
> > >
> > > --
> > > Warm Regards,
> > > Gauri Shankar
> > >
> >
>
>
>
> --
> Warm Regards,
> Gauri Shankar
>

------=_Part_813_21016605.1202996710351--

From java-user-return-32597-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 14 20:40:34 2008
Return-Path: <java-user-return-32597-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60951 invoked from network); 14 Feb 2008 20:40:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Feb 2008 20:40:33 -0000
Received: (qmail 76117 invoked by uid 500); 14 Feb 2008 20:40:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76092 invoked by uid 500); 14 Feb 2008 20:40:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76081 invoked by uid 99); 14 Feb 2008 20:40:20 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Feb 2008 12:40:20 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of john.wang@gmail.com designates 64.233.182.189 as permitted sender)
Received: from [64.233.182.189] (HELO nf-out-0910.google.com) (64.233.182.189)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Feb 2008 20:39:49 +0000
Received: by nf-out-0910.google.com with SMTP id d3so293115nfc.15
        for <java-user@lucene.apache.org>; Thu, 14 Feb 2008 12:39:56 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=hoKVXJIoewHdVqXnaxE6b7+IxRapK+eX4w/A9nViAHs=;
        b=NTB9JOjHJPWrbu9OZ/NP63c3a8/FOcSkCrguTVkIDpoY49VH07cbvIL5R0IyqgE2TYU/VBaGv0yyTqqG2z4akBqlEyVzgcHZ/L/gMO9K5ePt3tDpgw7yBDUrm9dCyekfc4m8s6fIMLpiSbyUyHIif+ERNhnoLlxiIntZ3s8zcjQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=Z5OHNv7F1fkcb7A9Ss6RgChqtCLfULxZtI/G1FsOPdWCmQhI1y2bhi09Z9EipBzXufxUuPM+cMlLaPw2moYlkJh7ZmZ+4DS+35cBf1JLlWF1dK5IfulNCvdJrii0NnnBAJoGRhqgFhuDgQWtWg+cDvIppWtBGjAYIPZ3uEXHdZw=
Received: by 10.86.31.18 with SMTP id e18mr1636792fge.68.1203021596188;
        Thu, 14 Feb 2008 12:39:56 -0800 (PST)
Received: by 10.86.9.19 with HTTP; Thu, 14 Feb 2008 12:39:56 -0800 (PST)
Message-ID: <8837fb770802141239v38c087je6b232cfb4ba2924@mail.gmail.com>
Date: Thu, 14 Feb 2008 12:39:56 -0800
From: "John Wang" <john.wang@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: how to get the programmatic control over index's document id
In-Reply-To: <979a94470802140359u50b56129j51c51639c165d865@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_3669_3881386.1203021596177"
References: <979a94470802090438h67b457dfuabd72e84d6fd7c2f@mail.gmail.com>
	 <359a92830802090740p3c658ab9qf413b70a3257a859@mail.gmail.com>
	 <979a94470802140359u50b56129j51c51639c165d865@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_3669_3881386.1203021596177
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

There was a thread on this exact issue.If you are using 2.3, the payload api
would help with that.

-John

On Thu, Feb 14, 2008 at 3:59 AM, Gauri Shankar <gshankar.sahu@gmail.com>
wrote:

> Thanks a lot for both of you.
>
> yes, I am talking about internally assigned document id.
>
> Erick : I am already using the unique id into the index mapped to one of
> our
> DB's primary key to uniquely identify the docs from index.  Now to get the
> value of this unique field i need to call getDocumet(). But when the
> resultset is too large than this step is very slow as I am calling
> getDocument for each hit. Now I am using the FIELDCACHE and that has
> improved a lot. But I am thinking If I can find a way so that docId can be
> my unique ids and that will super optimize our search.
> Any suggestions??
>
> Thanks,
> Gauri Shankar
>
> On Sat, Feb 9, 2008 at 9:10 PM, Erick Erickson <erickerickson@gmail.com>
> wrote:
>
> > If you're referring to the internally-assigned document id, I don't
> think
> > there is a way. Assuming you're trying to assign one yourself or some
> > such.
> >
> > From all the discussions I've seen, I don't think there's even a faint
> > possibility that controlling this will be added to Lucene. Note that
> > existing IDs change as your index changes.
> >
> > Why do you care? What problem are you trying to solve? One common
> > suggestion is to create your own field (as Patrick suggests) that
> contains
> > your own unique ID. Using TermEnum/TermDocs will give you efficient
> > ways of going from your unique ID to a docID...
> >
> > Best
> > Erick
> >
> > On Feb 9, 2008 7:38 AM, Gauri Shankar <gshankar.sahu@gmail.com> wrote:
> >
> > > Hi,
> > >
> > > I would like to get the control over the docId field from my code. Can
> > > anyone suggest some way for doing the same?
> > >
> > >
> > > --
> > > Warm Regards,
> > > Gauri Shankar
> > >
> >
>
>
>
> --
> Warm Regards,
> Gauri Shankar
>

------=_Part_3669_3881386.1203021596177--

From java-user-return-32598-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 14 21:42:43 2008
Return-Path: <java-user-return-32598-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89546 invoked from network); 14 Feb 2008 21:42:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Feb 2008 21:42:43 -0000
Received: (qmail 58204 invoked by uid 500); 14 Feb 2008 21:42:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58170 invoked by uid 500); 14 Feb 2008 21:42:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58159 invoked by uid 99); 14 Feb 2008 21:42:30 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Feb 2008 13:42:30 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of spring@gmx.eu designates 213.165.64.20 as permitted sender)
Received: from [213.165.64.20] (HELO mail.gmx.net) (213.165.64.20)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 14 Feb 2008 21:41:24 +0000
Received: (qmail invoked by alias); 14 Feb 2008 21:41:45 -0000
Received: from e178113156.adsl.alicedsl.de (EHLO msrvcn04) [85.178.113.156]
  by mail.gmx.net (mp017) with SMTP; 14 Feb 2008 22:41:45 +0100
X-Authenticated: #2635966
X-Provags-ID: V01U2FsdGVkX1/ZKsxJDOnZOjOHQnc8Q5RUjAAQHFLhnDGr7ZLadc
	WVTjSRcRlp2jyI
From: <spring@gmx.eu>
To: <java-user@lucene.apache.org>
References: <20080109213932.229980@gmx.net> <359a92830801091449x5f11d031v4b20cfef23f1d579@mail.gmail.com>
Subject: RE: Design questions
Date: Thu, 14 Feb 2008 22:41:38 +0100
Message-ID: <FA7F479DF26B4AC2B32EF68EE9311B18@msrvcn04>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
In-Reply-To: <359a92830801091449x5f11d031v4b20cfef23f1d579@mail.gmail.com>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.3790.4133
Thread-Index: AchTEeynn4BnPaurSe6Il6k8L54ZBgcOKpkA
X-Y-GMX-Trusted: 0
X-Virus-Checked: Checked by ClamAV on apache.org

> Rather than index one doc per page, you could index a special
> token between pages. Say you index $$$$$$$$$ as the special
> token. 

I have decided to use this version, but...

What token can I use? It must be a token which gets never removed by an
analyzer or altered in a way that it not unique in the resulting
tokenstream.

Is something like $0123456789$ the way to go?

Thank you.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32599-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 14 23:16:09 2008
Return-Path: <java-user-return-32599-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 27242 invoked from network); 14 Feb 2008 23:16:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Feb 2008 23:16:09 -0000
Received: (qmail 89939 invoked by uid 500); 14 Feb 2008 23:15:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89917 invoked by uid 500); 14 Feb 2008 23:15:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89897 invoked by uid 99); 14 Feb 2008 23:15:49 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Feb 2008 15:15:49 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [194.109.24.36] (HELO smtp-vbr16.xs4all.nl) (194.109.24.36)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Feb 2008 23:15:03 +0000
Received: from k8u.lan (porta.xs4all.nl [80.127.24.69])
	by smtp-vbr16.xs4all.nl (8.13.8/8.13.8) with ESMTP id m1ENFO0O053395
	for <java-user@lucene.apache.org>; Fri, 15 Feb 2008 00:15:24 +0100 (CET)
	(envelope-from paul.elschot@xs4all.nl)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: java-user@lucene.apache.org
Subject: Re: How to pass additional information into Similarity.scorePayload(...)
Date: Fri, 15 Feb 2008 00:15:33 +0100
User-Agent: KMail/1.9.6 (enterprise 0.20070907.709405)
References: <839ba01c0802130131x3afecdcdna3825cab69adc3a9@mail.gmail.com> <200802140758.06967.paul.elschot@xs4all.nl> <839ba01c0802140044l518d2c5dt39960d3f1a1dffaf@mail.gmail.com>
In-Reply-To: <839ba01c0802140044l518d2c5dt39960d3f1a1dffaf@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="utf-8"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200802150015.34148.paul.elschot@xs4all.nl>
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org

I have no idea what the [10/5/2] means, so I can't comment on that.
In case I have missed it previously I'm sorry.

My point was that payloads need not be used for different position info.
It's possible to do that, and it may be good for performance in some cases,
but one can revert to using another field for different position info.

Regards,
Paul Elschot


Op Thursday 14 February 2008 09:44:40 schreef Cedric Ho:
> Hi Paul,
> 
> Sorry I am not sure I understand your solution.
> 
> Because I would need to apply this scoring logic to all the different
> types of Queries. A search may consists of something like:
> 
> +(term1 phrase2 wildcard*)  +spanNear(term3 term4) [10/5/2]
> 
> And this [10/5/2] ratio have to be applied to the whole search query
> before it. So I am not sure how would using just SpanFirstQuery with a
> separate field work in this situation.
> 
> Anyway, I know my requirement is a bit strange, so it's ok if I can't
> do this in Lucene. I'll settle with using a ThreadLocal to store the
> [10/5/2] weighting and retrieve it in the Similarity.scorePayload(...)
> function.
> 
> 
> BTW, this problem I am facing now is different from the last one I
> asked here, which you have proposed with the Modified SpanFirstQuery
> solution =)
> 
> But I am really grateful with all the helps I get here. Keep up the good work!
> 
> Cheers,
> Cedric
> 
> 
> On Thu, Feb 14, 2008 at 2:58 PM, Paul Elschot <paul.elschot@xs4all.nl> wrote:
> > Op Thursday 14 February 2008 02:11:24 schreef Cedric Ho:
> >
> > > I am using Lucene's Built-in query classes: TernQuery, PhraseQuery,
> >  > WildcardQuery, BooleanQuery and many of the SpanQueries.
> >  >
> >  > The info I am going to pass in is just some weightings for different
> >  > part of the indexed contents. For example if the payload indicate that
> >  > a term is in the 2nd paragraph, then I'll take the weighting for the
> >  > 2nd paragraph and multiply it by the score.
> >  >
> >  > So it seems without writing my own query there's no way to do it ?
> >
> >  In case it is only positional information that is stored in the payload
> >  (i.e. some integer number that does not decrease when tokenizing the
> >  document), it is also possible to use an extra field and make sure the
> >  position increment for that field is only positive when the number
> >  (currently your payload) increases.
> >  A SpanFirstQuery on this extra field would almost do, and you will
> >  probably need https://issues.apache.org/jira/browse/LUCENE-1093 .
> >  This will be somewhat slower than using a payload, because the search
> >  will be done in two separate fields, but it will work.
> >
> >  Regards,
> >  Paul Elschot
> >
> >
> >
> >  ---------------------------------------------------------------------
> >  To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >  For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32600-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 15 00:02:21 2008
Return-Path: <java-user-return-32600-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47688 invoked from network); 15 Feb 2008 00:02:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Feb 2008 00:02:21 -0000
Received: (qmail 46405 invoked by uid 500); 15 Feb 2008 00:02:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46381 invoked by uid 500); 15 Feb 2008 00:02:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46370 invoked by uid 99); 15 Feb 2008 00:02:09 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Feb 2008 16:02:09 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 72.14.214.225 as permitted sender)
Received: from [72.14.214.225] (HELO hu-out-0506.google.com) (72.14.214.225)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Feb 2008 00:01:37 +0000
Received: by hu-out-0506.google.com with SMTP id 27so10718833hub.15
        for <java-user@lucene.apache.org>; Thu, 14 Feb 2008 16:01:44 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=/JRwEmhtkO+2xXjad4ljoLJkEOeV1VWZbA5FUtSr0x4=;
        b=mSF+dMFvJHPNecMvjo+dvuKUWHZpK+qB8UFDqCLYoDNgrVHeZLSfvkCEJQ/fAVWy/wWtDRnIAKQoAK5WuWobRiY9ev3Hw38UWsxX7VC9J1LQjbhBPSdmM0NQUWSki7+ObYpDoZDsPxVzPbyaGUHtOGLIKSHxzKyPcP1TiyvXhxM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=cnY7JyMWZqSlH0Lc3E/JeIB2wrbHPoXRF7Dqp9JH2gyu//cLIRFeVgu8/dPLwSPSmEXfVG4ZPaUlPLJL/hSFUCisB2LRu7QVhqxI+4B7MMGgwbGIZGYocet743YD/c3xKZ6bsYamLlrzBUfsBl9YjulwPEIKaPWAdnjvAO3I30Y=
Received: by 10.82.183.19 with SMTP id g19mr1986454buf.27.1203033703991;
        Thu, 14 Feb 2008 16:01:43 -0800 (PST)
Received: by 10.82.151.7 with HTTP; Thu, 14 Feb 2008 16:01:43 -0800 (PST)
Message-ID: <359a92830802141601t1cd4d753i82f1ea13813d191@mail.gmail.com>
Date: Thu, 14 Feb 2008 19:01:43 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Design questions
In-Reply-To: <FA7F479DF26B4AC2B32EF68EE9311B18@msrvcn04>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_3042_24076989.1203033703982"
References: <20080109213932.229980@gmx.net>
	 <359a92830801091449x5f11d031v4b20cfef23f1d579@mail.gmail.com>
	 <FA7F479DF26B4AC2B32EF68EE9311B18@msrvcn04>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_3042_24076989.1203033703982
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Why not just use $$$$$$$$? Check to insure that it makes
it through whatever analyzer you choose though. For instance,
LetterTokenizer will remove it...

Erick

On Thu, Feb 14, 2008 at 4:41 PM, <spring@gmx.eu> wrote:

> > Rather than index one doc per page, you could index a special
> > token between pages. Say you index $$$$$$$$$ as the special
> > token.
>
> I have decided to use this version, but...
>
> What token can I use? It must be a token which gets never removed by an
> analyzer or altered in a way that it not unique in the resulting
> tokenstream.
>
> Is something like $0123456789$ the way to go?
>
> Thank you.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_3042_24076989.1203033703982--

From java-user-return-32601-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 15 00:26:10 2008
Return-Path: <java-user-return-32601-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59888 invoked from network); 15 Feb 2008 00:26:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Feb 2008 00:26:09 -0000
Received: (qmail 72460 invoked by uid 500); 15 Feb 2008 00:25:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72414 invoked by uid 500); 15 Feb 2008 00:25:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72403 invoked by uid 99); 15 Feb 2008 00:25:57 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Feb 2008 16:25:57 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of krazedsun@gmail.com designates 209.85.146.183 as permitted sender)
Received: from [209.85.146.183] (HELO wa-out-1112.google.com) (209.85.146.183)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Feb 2008 00:25:25 +0000
Received: by wa-out-1112.google.com with SMTP id j40so913077wah.11
        for <java-user@lucene.apache.org>; Thu, 14 Feb 2008 16:25:33 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        bh=TKIJX4lHrYEdmYikkxeHWcEfrgzCU2DT0nHGs6pOQ+k=;
        b=RUDohmhYneb4/l93jrSVrBBag6jrks1AL+Pz8OPcRKBQ1DASRgXJWX35ZP7tyVW8uHoWX823s33Xun0QnZuR5BCNVFRYLveMEmcWZlolLgckeDpXAhi0mDzS9smsKbgRVwjL58yFWW56xxdN4iKuZAQnCD1Yg9KYDqG23l3Fx8I=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=KXed78zs5++DJ4eEIiYjyQjm8+3atHmBUPPgr97p7nzTEqiZbf0tSJtEMGJX8RqObkr4ZWTadFU/roibNZFxoODjV1KhQxuonPGe9BQFeaQVDnKjpwimbT4DaTE8ae+ZHwE30jv0Fzhi0tDAF34sVtXeukphgFtbW7/QDYwCTug=
Received: by 10.114.39.16 with SMTP id m16mr2281950wam.146.1203035133450;
        Thu, 14 Feb 2008 16:25:33 -0800 (PST)
Received: by 10.115.92.4 with HTTP; Thu, 14 Feb 2008 16:25:33 -0800 (PST)
Message-ID: <99ca131e0802141625m7a83a613v4b7da728b0a5953b@mail.gmail.com>
Date: Fri, 15 Feb 2008 11:25:33 +1100
From: "Jim Bogan" <krazedsun@gmail.com>
To: java-user@lucene.apache.org
Subject: regex expressions within phrase queries
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_12944_13944337.1203035133446"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_12944_13944337.1203035133446
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I would like to be able to handle the following:

"/\d\d\d{4} \\d\\d/ office"

Where / indicates a regex expression phrase.

One option is extending MultiFieldQueryParser and catching the phrase within
getFieldQuery evaluating whether /, the regex identifier, is present and
then returning a  SpanNearQuery  comprising of  SpanQueries.

I was wondering if anyone has a more efficient method for achieving this.
Would changing QueryParser.jj and developing a custom PhraseQuery class be a
good idea?  Any comments would be appreciated.

Keith Player

------=_Part_12944_13944337.1203035133446--

From java-user-return-32602-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 15 01:47:53 2008
Return-Path: <java-user-return-32602-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86236 invoked from network); 15 Feb 2008 01:47:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Feb 2008 01:47:53 -0000
Received: (qmail 66517 invoked by uid 500); 15 Feb 2008 01:47:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66003 invoked by uid 500); 15 Feb 2008 01:47:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65992 invoked by uid 99); 15 Feb 2008 01:47:39 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Feb 2008 17:47:39 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of cedric.ho@gmail.com designates 72.14.204.232 as permitted sender)
Received: from [72.14.204.232] (HELO qb-out-0506.google.com) (72.14.204.232)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Feb 2008 01:47:08 +0000
Received: by qb-out-0506.google.com with SMTP id o21so11545046qba.9
        for <java-user@lucene.apache.org>; Thu, 14 Feb 2008 17:47:15 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        bh=q0a7D4dRrZNkwOW1LLXwsRKAhLMp3RuSsM0nCy+CvgQ=;
        b=cfzND0yy5FvbtP2QHg9FvZg/91g5KewhBXme/RGudcGHSRQxuqEd5Qh2lrAFBeASNIkjdPDHe9jYixdzDqzVgOBP2JqMBxK4S7L1VO0AouJmgmmwxYmBAAZMytiSKuYEITLVJ7R93KDXn7CMdswe0m7H9+Ox05axhiLg+AAfsfE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=nO0OYpG6O9QBzD8/Hj01pFtpqIPDOK0AjDOjHlGGZupmaFBbuLgi1CPVTycqYnxDNYc37KknXoKZ2MPk1QfJAsKJajzzS3tiGnSHW0GElts47cD+0V/G1L+zeKCxD+dY55ZqMTJA633beMykvrOEt74oG/tHZGJYVu3vFytJAPc=
Received: by 10.115.22.1 with SMTP id z1mr2396891wai.33.1203040034424;
        Thu, 14 Feb 2008 17:47:14 -0800 (PST)
Received: by 10.114.156.2 with HTTP; Thu, 14 Feb 2008 17:47:14 -0800 (PST)
Message-ID: <839ba01c0802141747k1503c101mc9f93c9ce6623f30@mail.gmail.com>
Date: Fri, 15 Feb 2008 09:47:14 +0800
From: "Cedric Ho" <cedric.ho@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: How to pass additional information into Similarity.scorePayload(...)
In-Reply-To: <200802150015.34148.paul.elschot@xs4all.nl>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <839ba01c0802130131x3afecdcdna3825cab69adc3a9@mail.gmail.com>
	 <200802140758.06967.paul.elschot@xs4all.nl>
	 <839ba01c0802140044l518d2c5dt39960d3f1a1dffaf@mail.gmail.com>
	 <200802150015.34148.paul.elschot@xs4all.nl>
X-Virus-Checked: Checked by ClamAV on apache.org

Sorry that I didn't make myself clear.

[10/5/2] means for terms found in the 1st paragraph, give it score*10,
for terms in the 2nd, give it score*5, etc.

So I don't know how to do this scoring if the position (paragraph)
information is in a separate field.

Cedric


On Fri, Feb 15, 2008 at 7:15 AM, Paul Elschot <paul.elschot@xs4all.nl> wrote:
> I have no idea what the [10/5/2] means, so I can't comment on that.
>  In case I have missed it previously I'm sorry.
>
>  My point was that payloads need not be used for different position info.
>  It's possible to do that, and it may be good for performance in some cases,
>  but one can revert to using another field for different position info.
>
>  Regards,
>  Paul Elschot
>
>
>  Op Thursday 14 February 2008 09:44:40 schreef Cedric Ho:
>
>
> > Hi Paul,
>  >
>  > Sorry I am not sure I understand your solution.
>  >
>  > Because I would need to apply this scoring logic to all the different
>  > types of Queries. A search may consists of something like:
>  >
>  > +(term1 phrase2 wildcard*)  +spanNear(term3 term4) [10/5/2]
>  >
>  > And this [10/5/2] ratio have to be applied to the whole search query
>  > before it. So I am not sure how would using just SpanFirstQuery with a
>  > separate field work in this situation.
>  >
>  > Anyway, I know my requirement is a bit strange, so it's ok if I can't
>  > do this in Lucene. I'll settle with using a ThreadLocal to store the
>  > [10/5/2] weighting and retrieve it in the Similarity.scorePayload(...)
>  > function.
>  >
>  >
>  > BTW, this problem I am facing now is different from the last one I
>  > asked here, which you have proposed with the Modified SpanFirstQuery
>  > solution =)
>  >
>  > But I am really grateful with all the helps I get here. Keep up the good work!
>  >
>  > Cheers,
>  > Cedric
>  >
>  >
>  > On Thu, Feb 14, 2008 at 2:58 PM, Paul Elschot <paul.elschot@xs4all.nl> wrote:
>  > > Op Thursday 14 February 2008 02:11:24 schreef Cedric Ho:
>  > >
>  > > > I am using Lucene's Built-in query classes: TernQuery, PhraseQuery,
>  > >  > WildcardQuery, BooleanQuery and many of the SpanQueries.
>  > >  >
>  > >  > The info I am going to pass in is just some weightings for different
>  > >  > part of the indexed contents. For example if the payload indicate that
>  > >  > a term is in the 2nd paragraph, then I'll take the weighting for the
>  > >  > 2nd paragraph and multiply it by the score.
>  > >  >
>  > >  > So it seems without writing my own query there's no way to do it ?
>  > >
>  > >  In case it is only positional information that is stored in the payload
>  > >  (i.e. some integer number that does not decrease when tokenizing the
>  > >  document), it is also possible to use an extra field and make sure the
>  > >  position increment for that field is only positive when the number
>  > >  (currently your payload) increases.
>  > >  A SpanFirstQuery on this extra field would almost do, and you will
>  > >  probably need https://issues.apache.org/jira/browse/LUCENE-1093 .
>  > >  This will be somewhat slower than using a payload, because the search
>  > >  will be done in two separate fields, but it will work.
>  > >
>  > >  Regards,
>  > >  Paul Elschot
>  > >
>  > >
>  > >
>  > >  ---------------------------------------------------------------------
>  > >  To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>  > >  For additional commands, e-mail: java-user-help@lucene.apache.org
>  > >
>  > >
>  >
>  > ---------------------------------------------------------------------
>  > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>  > For additional commands, e-mail: java-user-help@lucene.apache.org
>  >
>  >
>  >
>
>  ---------------------------------------------------------------------
>  To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>  For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32603-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 15 04:40:04 2008
Return-Path: <java-user-return-32603-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53681 invoked from network); 15 Feb 2008 04:40:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Feb 2008 04:40:04 -0000
Received: (qmail 83555 invoked by uid 500); 15 Feb 2008 04:39:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83516 invoked by uid 500); 15 Feb 2008 04:39:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83505 invoked by uid 99); 15 Feb 2008 04:39:52 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Feb 2008 20:39:52 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of cedric.ho@gmail.com designates 209.85.146.182 as permitted sender)
Received: from [209.85.146.182] (HELO wa-out-1112.google.com) (209.85.146.182)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Feb 2008 04:39:21 +0000
Received: by wa-out-1112.google.com with SMTP id j40so1018175wah.11
        for <java-user@lucene.apache.org>; Thu, 14 Feb 2008 20:39:29 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        bh=E6ny9uAfG+JqUAQ4cy+L3I06BnGlYiZgHESULj2xeoI=;
        b=urPJOSmui2QWjOlRUPCKFeu6GYaUyk3txvtZCMVqgtuDp3f31s5eUc8VgA1qaWv/WRL1kQYusrNLeTNQN9JdBrBAbdi4EOiTHMUiaNmXl0ZdhuBe8lMGrVEZdq7eMljXaC/w0/+VuQrpqeTyYBy9bDtFDO5j9hNej9zsa9piaMo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=woLIEQs5ufS2qP0cb0Hx39oxBcF3CM/TEkuBQEvOUjdgJNv6cbPqFg80uR6gD2v2oDIlUQqdIX8qDVB2ajhOV1J2pqnN7fpdFr6IVneOPYFXssAY+SLVYwytsoIL/RvHNxWIbA+QLKMkln/zPGc26jvL9fs1CsRosLMMweoLuqA=
Received: by 10.114.166.1 with SMTP id o1mr2463593wae.71.1203050369152;
        Thu, 14 Feb 2008 20:39:29 -0800 (PST)
Received: by 10.114.156.2 with HTTP; Thu, 14 Feb 2008 20:39:29 -0800 (PST)
Message-ID: <839ba01c0802142039x42176806i107341204acc6192@mail.gmail.com>
Date: Fri, 15 Feb 2008 12:39:29 +0800
From: "Cedric Ho" <cedric.ho@gmail.com>
To: java-user@lucene.apache.org
Subject: Some more questions on Payloads
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org

Hi all,

This is the same problem I am trying to solve as in the thread:
"How to pass additional information into Similarity.scorePayload(...)"

However since these questions are somewhat different, I figure I'd
start a new thread.


After diving into the Lucene Source codes for a while now I have more
questions on payloads.

1. it seems that in order to use payload I must write my own Query
class like the BoostingTermQuery. Since I need to use payload with a
lot of the Lucene built-in Query classes, does it mean that I have to
write all those Query class again?

2. it seems that the payload can only be obtained from TermPositions
which is only used by SpanQuery classes. So I wonder if it is possible
to rewrite all the nonSpanQuery classes to use TermPositions in order
to use payload?

I don't mind rewriting all these Query classes if there's no other
ways around, but if there's a simpler way...well...

Hope someone could help =)

Cedric

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32604-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 15 06:44:44 2008
Return-Path: <java-user-return-32604-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 57455 invoked from network); 15 Feb 2008 06:44:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Feb 2008 06:44:43 -0000
Received: (qmail 58661 invoked by uid 500); 15 Feb 2008 06:44:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58623 invoked by uid 500); 15 Feb 2008 06:44:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58612 invoked by uid 99); 15 Feb 2008 06:44:30 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Feb 2008 22:44:30 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Feb 2008 06:43:45 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id AC6AA71C28A; Thu, 14 Feb 2008 22:44:06 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id A8E3A71C256
	for <java-user@lucene.apache.org>; Thu, 14 Feb 2008 22:44:06 -0800 (PST)
Date: Thu, 14 Feb 2008 22:44:06 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Question .. advanced query
In-Reply-To: <743eedfa0802131046w2d384281p90d455dbf16073ab@mail.gmail.com>
Message-ID: <Pine.LNX.4.62.0802142242420.25935@radix.cryptio.net>
References: <743eedfa0802131046w2d384281p90d455dbf16073ab@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


it's not possible with the query syntax out of the box, but you could 
write a custom subclass of SpanQuery to make it possible.

if your numbers are simple enough (ie: just 0-9) you could probably make 
the SpanRegexQuery work for you.

: I am trying to perform a query that will enable me to run the following
: logic against the index:
: "4 3 [>=7] [>=4]" .. [>=7] means the third number must be greater or equal
: to 7 and [>=4] means that the fourth number must be greater or equal to 4 ..
: I have reviewed the query syntax and it seems that it is not possible to run
: something like that .. can you confirm?



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32605-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 15 06:47:53 2008
Return-Path: <java-user-return-32605-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58059 invoked from network); 15 Feb 2008 06:47:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Feb 2008 06:47:52 -0000
Received: (qmail 63521 invoked by uid 500); 15 Feb 2008 06:47:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63315 invoked by uid 500); 15 Feb 2008 06:47:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63304 invoked by uid 99); 15 Feb 2008 06:47:40 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Feb 2008 22:47:40 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Feb 2008 06:46:56 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id 9DFBE71C256; Thu, 14 Feb 2008 22:47:17 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id 9A9DD71C13C
	for <java-user@lucene.apache.org>; Thu, 14 Feb 2008 22:47:17 -0800 (PST)
Date: Thu, 14 Feb 2008 22:47:17 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: regex expressions within phrase queries
In-Reply-To: <99ca131e0802141625m7a83a613v4b7da728b0a5953b@mail.gmail.com>
Message-ID: <Pine.LNX.4.62.0802142245330.25935@radix.cryptio.net>
References: <99ca131e0802141625m7a83a613v4b7da728b0a5953b@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: I was wondering if anyone has a more efficient method for achieving this.
: Would changing QueryParser.jj and developing a custom PhraseQuery class be a
: good idea?  Any comments would be appreciated.

extending QueryParser and overriding the getPhraseQuery function to return 
your own SpanNearQueries composted of SpanRegexQueries shouldn't be any 
more efficient then modifying the QueryParser grammer.  either way it's 
going to be calling some method you write that returns a SpanNearQuery.



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32606-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 15 07:03:59 2008
Return-Path: <java-user-return-32606-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63055 invoked from network); 15 Feb 2008 07:03:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Feb 2008 07:03:59 -0000
Received: (qmail 80280 invoked by uid 500); 15 Feb 2008 07:03:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80245 invoked by uid 500); 15 Feb 2008 07:03:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80234 invoked by uid 99); 15 Feb 2008 07:03:47 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Feb 2008 23:03:47 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Feb 2008 07:03:01 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id 4E89071C29C; Thu, 14 Feb 2008 23:03:22 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id 4B6EB71C28A
	for <java-user@lucene.apache.org>; Thu, 14 Feb 2008 23:03:22 -0800 (PST)
Date: Thu, 14 Feb 2008 23:03:22 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Design questions
In-Reply-To: <359a92830802141601t1cd4d753i82f1ea13813d191@mail.gmail.com>
Message-ID: <Pine.LNX.4.62.0802142256530.25935@radix.cryptio.net>
References: <20080109213932.229980@gmx.net> 
 <359a92830801091449x5f11d031v4b20cfef23f1d579@mail.gmail.com> 
 <FA7F479DF26B4AC2B32EF68EE9311B18@msrvcn04> <359a92830802141601t1cd4d753i82f1ea13813d191@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


I haven't really been following this thread that closely, but...

: Why not just use $$$$$$$$? Check to insure that it makes
: it through whatever analyzer you choose though. For instance,
: LetterTokenizer will remove it...

1) i'm 99% sure you can do something like this...

  Document doc = new Document()
  for (int i = 0; i < pages.length; i++) {
    doc.add(new Field("text", pages[i], Field.Store.NO, Field.Index.TOKENIZED));
    doc.add(new Field("text", "$$", Field.Store.NO, Field.Index.UN_TOKENIZED));
  }

...and you'll get your magic token regardless of whether it would normally 
make it through your analyzer. In fact: you want it to be something your 
analyzer could never produce, even if it appears in the orriginal text, so 
you don't get false boundaries (ie: if you use an Analzeer that lowercases 
everything, then "A" makes a perfectly fine boundary token.

2) if your goal is just to be able to make sure you can query for phrases 
without crossing page boundaries, it's a lot simpler just to use are 
really big positionIncimentGap with your analyzer (and add each page as a 
seperate Field instance).  boundary tokens like these are relaly only 
neccessary if you want more complex queries (like "find X and Y on 
the same page but not in the same sentence")




-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32607-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 15 07:33:23 2008
Return-Path: <java-user-return-32607-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 74091 invoked from network); 15 Feb 2008 07:33:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Feb 2008 07:33:23 -0000
Received: (qmail 4628 invoked by uid 500); 15 Feb 2008 07:33:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4597 invoked by uid 500); 15 Feb 2008 07:33:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4586 invoked by uid 99); 15 Feb 2008 07:33:11 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Feb 2008 23:33:11 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [194.109.24.29] (HELO smtp-vbr9.xs4all.nl) (194.109.24.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Feb 2008 07:32:25 +0000
Received: from k8u.lan (porta.xs4all.nl [80.127.24.69])
	by smtp-vbr9.xs4all.nl (8.13.8/8.13.8) with ESMTP id m1F7Wkkf005045
	for <java-user@lucene.apache.org>; Fri, 15 Feb 2008 08:32:47 +0100 (CET)
	(envelope-from paul.elschot@xs4all.nl)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: java-user@lucene.apache.org
Subject: Re: How to pass additional information into Similarity.scorePayload(...)
Date: Fri, 15 Feb 2008 08:32:46 +0100
User-Agent: KMail/1.9.6 (enterprise 0.20070907.709405)
References: <839ba01c0802130131x3afecdcdna3825cab69adc3a9@mail.gmail.com> <200802150015.34148.paul.elschot@xs4all.nl> <839ba01c0802141747k1503c101mc9f93c9ce6623f30@mail.gmail.com>
In-Reply-To: <839ba01c0802141747k1503c101mc9f93c9ce6623f30@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="utf-8"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200802150832.47060.paul.elschot@xs4all.nl>
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org

Op Friday 15 February 2008 02:47:14 schreef Cedric Ho:
> Sorry that I didn't make myself clear.
> 
> [10/5/2] means for terms found in the 1st paragraph, give it score*10,
> for terms in the 2nd, give it score*5, etc.
> 
> So I don't know how to do this scoring if the position (paragraph)
> information is in a separate field.

For each word in the input stream make sure that the position
at which it is indexed in an extra field is the same as the paragraph
number. That will involve only allowing a position increment at
a paragraph border during indexing.
Call this extra field the paragraph field if you will.

Then, during search, search for a Term in paragraph field, and 
use the position from that field, i.e. the paragraph number
to find a weight for the found term.
Have a look at PhraseQuery on how to use term positions during
search. It computes relative positions, but it works on the absolute
positions that it gets from the index.

SpanFirstQuery also allows to do that, it's a bit more involved, but
in the end it works from the same absolute positions from the index.
The version at the jira issue will even allow to use the length of the
matching spans as the absolute paragraph number, which, in turn,
allows the use of a Similarity for the paragraph weights [10/5/2].

There is nothing special about indexed term positions; any term can
be indexed at any position in a field. Lucene will take advantage of
the incremental nature of positions by storing only compressed
differences of positions in the index, but during search the original
positions are directly available, You can do the same with payloads,
but why reimplement something that is already available?

Payloads have better uses than positional info, for one they are
great to avoid disjunctions. For example for verbs, one could
index only the stem and use a payload for the actual inflected
form (singular/plural, past/present, first/second/third person, etc).

Regards,
Paul Elschot


> 
> Cedric
> 
> 
> On Fri, Feb 15, 2008 at 7:15 AM, Paul Elschot <paul.elschot@xs4all.nl> wrote:
> > I have no idea what the [10/5/2] means, so I can't comment on that.
> >  In case I have missed it previously I'm sorry.
> >
> >  My point was that payloads need not be used for different position info.
> >  It's possible to do that, and it may be good for performance in some cases,
> >  but one can revert to using another field for different position info.
> >
> >  Regards,
> >  Paul Elschot
> >
> >
> >  Op Thursday 14 February 2008 09:44:40 schreef Cedric Ho:
> >
> >
> > > Hi Paul,
> >  >
> >  > Sorry I am not sure I understand your solution.
> >  >
> >  > Because I would need to apply this scoring logic to all the different
> >  > types of Queries. A search may consists of something like:
> >  >
> >  > +(term1 phrase2 wildcard*)  +spanNear(term3 term4) [10/5/2]
> >  >
> >  > And this [10/5/2] ratio have to be applied to the whole search query
> >  > before it. So I am not sure how would using just SpanFirstQuery with a
> >  > separate field work in this situation.
> >  >
> >  > Anyway, I know my requirement is a bit strange, so it's ok if I can't
> >  > do this in Lucene. I'll settle with using a ThreadLocal to store the
> >  > [10/5/2] weighting and retrieve it in the Similarity.scorePayload(...)
> >  > function.
> >  >
> >  >
> >  > BTW, this problem I am facing now is different from the last one I
> >  > asked here, which you have proposed with the Modified SpanFirstQuery
> >  > solution =)
> >  >
> >  > But I am really grateful with all the helps I get here. Keep up the good work!
> >  >
> >  > Cheers,
> >  > Cedric
> >  >
> >  >
> >  > On Thu, Feb 14, 2008 at 2:58 PM, Paul Elschot <paul.elschot@xs4all.nl> wrote:
> >  > > Op Thursday 14 February 2008 02:11:24 schreef Cedric Ho:
> >  > >
> >  > > > I am using Lucene's Built-in query classes: TernQuery, PhraseQuery,
> >  > >  > WildcardQuery, BooleanQuery and many of the SpanQueries.
> >  > >  >
> >  > >  > The info I am going to pass in is just some weightings for different
> >  > >  > part of the indexed contents. For example if the payload indicate that
> >  > >  > a term is in the 2nd paragraph, then I'll take the weighting for the
> >  > >  > 2nd paragraph and multiply it by the score.
> >  > >  >
> >  > >  > So it seems without writing my own query there's no way to do it ?
> >  > >
> >  > >  In case it is only positional information that is stored in the payload
> >  > >  (i.e. some integer number that does not decrease when tokenizing the
> >  > >  document), it is also possible to use an extra field and make sure the
> >  > >  position increment for that field is only positive when the number
> >  > >  (currently your payload) increases.
> >  > >  A SpanFirstQuery on this extra field would almost do, and you will
> >  > >  probably need https://issues.apache.org/jira/browse/LUCENE-1093 .
> >  > >  This will be somewhat slower than using a payload, because the search
> >  > >  will be done in two separate fields, but it will work.
> >  > >
> >  > >  Regards,
> >  > >  Paul Elschot
> >  > >
> >  > >
> >  > >
> >  > >  ---------------------------------------------------------------------
> >  > >  To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >  > >  For additional commands, e-mail: java-user-help@lucene.apache.org
> >  > >
> >  > >
> >  >
> >  > ---------------------------------------------------------------------
> >  > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >  > For additional commands, e-mail: java-user-help@lucene.apache.org
> >  >
> >  >
> >  >
> >
> >  ---------------------------------------------------------------------
> >  To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >  For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32608-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 15 08:46:35 2008
Return-Path: <java-user-return-32608-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98698 invoked from network); 15 Feb 2008 08:46:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Feb 2008 08:46:34 -0000
Received: (qmail 79233 invoked by uid 500); 15 Feb 2008 08:46:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78345 invoked by uid 500); 15 Feb 2008 08:46:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78334 invoked by uid 99); 15 Feb 2008 08:46:21 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Feb 2008 00:46:21 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of cedric.ho@gmail.com designates 209.85.146.181 as permitted sender)
Received: from [209.85.146.181] (HELO wa-out-1112.google.com) (209.85.146.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Feb 2008 08:45:50 +0000
Received: by wa-out-1112.google.com with SMTP id j40so1131026wah.11
        for <java-user@lucene.apache.org>; Fri, 15 Feb 2008 00:45:58 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        bh=fmo50+/cZxg0t6nQsPUcAB66rEErPTJy5UOhoe8rCmA=;
        b=Fa30/3NmKG6isDIuvn8azYLQdtnHFfpdMQxYsEnkxxOlTf70gYxt/LAMDCitxt8g0A+q+Q99cMSqttin03S0OYYEwUqDvsbRRE/p9lVdPv8JMI67GW0Xh5dUJICSyq79WXjjVAuwDIPNBIKyc3Ha9dGckDExP7GU/lUaSM2BYKI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=Q7phnDNMIJzR21RJyTbbSWZVpgNw+3s6NnWg+hw6AvElTyeKsBjRBsXT5l/d511lqla5GOomUaEh/ns6GJW1QYMU8J7L73wKyKfxBpUA318jdtOmW0UDr/RZSGAbbvkmInWWB5o4IX98rtkyzHKjPyhDy9H6nvl/yLSUtYS6Jys=
Received: by 10.114.73.1 with SMTP id v1mr411458waa.16.1203065158506;
        Fri, 15 Feb 2008 00:45:58 -0800 (PST)
Received: by 10.114.156.2 with HTTP; Fri, 15 Feb 2008 00:45:58 -0800 (PST)
Message-ID: <839ba01c0802150045q47a7c4f8h30cff700e584c66f@mail.gmail.com>
Date: Fri, 15 Feb 2008 16:45:58 +0800
From: "Cedric Ho" <cedric.ho@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: How to pass additional information into Similarity.scorePayload(...)
In-Reply-To: <200802150832.47060.paul.elschot@xs4all.nl>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <839ba01c0802130131x3afecdcdna3825cab69adc3a9@mail.gmail.com>
	 <200802150015.34148.paul.elschot@xs4all.nl>
	 <839ba01c0802141747k1503c101mc9f93c9ce6623f30@mail.gmail.com>
	 <200802150832.47060.paul.elschot@xs4all.nl>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Paul,

Do you mean the following?

e.g. to index this: "first second third <paragraphBorder> forth fifth six"

originally it would be indexed as:
(first,0) (second,1) (third,2) (forth,3) (fifth,4) (six,5)

now it will be:
(first,0) (second,0) (third,0) (forth,1) (fifth,1) (six,1)

Then those Query classes that depends on the positional information
(PhraseQuery, SpanQueries) won't work then? unfortunately I'll need
those Query classes as well.

Cedric


>  For each word in the input stream make sure that the position
>  at which it is indexed in an extra field is the same as the paragraph
>  number. That will involve only allowing a position increment at
>  a paragraph border during indexing.
>  Call this extra field the paragraph field if you will.
>
>  Then, during search, search for a Term in paragraph field, and
>  use the position from that field, i.e. the paragraph number
>  to find a weight for the found term.
>  Have a look at PhraseQuery on how to use term positions during
>  search. It computes relative positions, but it works on the absolute
>  positions that it gets from the index.
>
>  SpanFirstQuery also allows to do that, it's a bit more involved, but
>  in the end it works from the same absolute positions from the index.
>  The version at the jira issue will even allow to use the length of the
>  matching spans as the absolute paragraph number, which, in turn,
>  allows the use of a Similarity for the paragraph weights [10/5/2].
>
>  There is nothing special about indexed term positions; any term can
>  be indexed at any position in a field. Lucene will take advantage of
>  the incremental nature of positions by storing only compressed
>  differences of positions in the index, but during search the original
>  positions are directly available, You can do the same with payloads,
>  but why reimplement something that is already available?
>
>  Payloads have better uses than positional info, for one they are
>  great to avoid disjunctions. For example for verbs, one could
>  index only the stem and use a payload for the actual inflected
>  form (singular/plural, past/present, first/second/third person, etc).
>
>  Regards,
>  Paul Elschot
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32609-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 15 12:02:43 2008
Return-Path: <java-user-return-32609-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 57507 invoked from network); 15 Feb 2008 12:02:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Feb 2008 12:02:43 -0000
Received: (qmail 6752 invoked by uid 500); 15 Feb 2008 12:02:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6724 invoked by uid 500); 15 Feb 2008 12:02:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6713 invoked by uid 99); 15 Feb 2008 12:02:29 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Feb 2008 04:02:29 -0800
X-ASF-Spam-Status: No, hits=4.7 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,TRACKER_ID
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of adrian.m.smith@gmail.com designates 72.14.204.236 as permitted sender)
Received: from [72.14.204.236] (HELO qb-out-0506.google.com) (72.14.204.236)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Feb 2008 12:01:54 +0000
Received: by qb-out-0506.google.com with SMTP id o21so11755554qba.9
        for <java-user@lucene.apache.org>; Fri, 15 Feb 2008 04:02:02 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=aX1mCSaMW1PGTfFnqEGnKaur1NKo00MTDCyKcc7mM4A=;
        b=qyvo3ZKkklPvADD0Tpe1D7dqht7Y4QqQd+4uaF974pqupbGyAWknJvh3gUgTAID2+uKiBxMnQxYyJGK3LRyTi6rZY4qbc0L9jYFpp/oDd12A+g8ewyL/ssDWREwJ/V+yhjnI0FSYLxH09/nzYoV85EG3yuwAw0AZiUoNbjlV4uI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=tEtzDvtbpYLCISplMtnZHkyfLY7UvZ7W0GqP9ITNI32trXtp6g8ulK4EJRo6cFb8WsDThyNRAagWgeNDKOC253Nof6r16JfCaX+jPsF2qNuQyqZF1IwJ3x9FuoSt94aqd4HaDihxUO+D8MHTY1VBIpoV5alGJJ1Q3nEAv0rm2H0=
Received: by 10.65.132.13 with SMTP id j13mr3730153qbn.5.1203076922113;
        Fri, 15 Feb 2008 04:02:02 -0800 (PST)
Received: by 10.65.98.3 with HTTP; Fri, 15 Feb 2008 04:02:02 -0800 (PST)
Message-ID: <efe487cc0802150402m6e035b0o762f3dc04e3eff79@mail.gmail.com>
Date: Fri, 15 Feb 2008 13:02:02 +0100
From: "Adrian Smith" <adrian.m.smith@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Design questions
In-Reply-To: <Pine.LNX.4.62.0802142256530.25935@radix.cryptio.net>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_4948_9905554.1203076922109"
References: <20080109213932.229980@gmx.net>
	 <359a92830801091449x5f11d031v4b20cfef23f1d579@mail.gmail.com>
	 <FA7F479DF26B4AC2B32EF68EE9311B18@msrvcn04>
	 <359a92830802141601t1cd4d753i82f1ea13813d191@mail.gmail.com>
	 <Pine.LNX.4.62.0802142256530.25935@radix.cryptio.net>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_4948_9905554.1203076922109
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi,

I have a similar sitaution. I also considered using $. But for the sake of
not running into (potential) problems with Tokenisers, I just defined a
string in a config file which for sure is never going to occur in a document
and will never be searched for, e.g.

dfgjkjrkruigduhfkdgjrugr

Cheers, Adrian
--
Java Software Developer
http://www.databasesandlife.com/



On 15/02/2008, Chris Hostetter <hossman_lucene@fucit.org> wrote:
>
>
> I haven't really been following this thread that closely, but...
>
> : Why not just use $$$$$$$$? Check to insure that it makes
>
> : it through whatever analyzer you choose though. For instance,
> : LetterTokenizer will remove it...
>
>
> 1) i'm 99% sure you can do something like this...
>
>   Document doc = new Document()
>   for (int i = 0; i < pages.length; i++) {
>     doc.add(new Field("text", pages[i], Field.Store.NO,
> Field.Index.TOKENIZED));
>     doc.add(new Field("text", "$$", Field.Store.NO,
> Field.Index.UN_TOKENIZED));
>   }
>
> ...and you'll get your magic token regardless of whether it would normally
> make it through your analyzer. In fact: you want it to be something your
> analyzer could never produce, even if it appears in the orriginal text, so
> you don't get false boundaries (ie: if you use an Analzeer that lowercases
> everything, then "A" makes a perfectly fine boundary token.
>
> 2) if your goal is just to be able to make sure you can query for phrases
> without crossing page boundaries, it's a lot simpler just to use are
> really big positionIncimentGap with your analyzer (and add each page as a
> seperate Field instance).  boundary tokens like these are relaly only
> neccessary if you want more complex queries (like "find X and Y on
> the same page but not in the same sentence")
>
>
>
>
> -Hoss
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_4948_9905554.1203076922109--

From java-user-return-32610-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 15 12:18:43 2008
Return-Path: <java-user-return-32610-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62201 invoked from network); 15 Feb 2008 12:18:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Feb 2008 12:18:43 -0000
Received: (qmail 32010 invoked by uid 500); 15 Feb 2008 12:18:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31986 invoked by uid 500); 15 Feb 2008 12:18:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31975 invoked by uid 99); 15 Feb 2008 12:18:30 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Feb 2008 04:18:30 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of spring@gmx.eu designates 213.165.64.20 as permitted sender)
Received: from [213.165.64.20] (HELO mail.gmx.net) (213.165.64.20)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 15 Feb 2008 12:17:58 +0000
Received: (qmail invoked by alias); 15 Feb 2008 12:18:03 -0000
Received: from e178112042.adsl.alicedsl.de (EHLO msrvcn04) [85.178.112.42]
  by mail.gmx.net (mp006) with SMTP; 15 Feb 2008 13:18:03 +0100
X-Authenticated: #2635966
X-Provags-ID: V01U2FsdGVkX18Zvzt1VhcZGw5mPRE59lfFXNl08J6tjCYMNFiWSQ
	pC34VdGpZlUa1B
From: <spring@gmx.eu>
To: <java-user@lucene.apache.org>
References: <20080109213932.229980@gmx.net> <359a92830801091449x5f11d031v4b20cfef23f1d579@mail.gmail.com> <FA7F479DF26B4AC2B32EF68EE9311B18@msrvcn04> <359a92830802141601t1cd4d753i82f1ea13813d191@mail.gmail.com>
Subject: RE: Design questions
Date: Fri, 15 Feb 2008 13:18:04 +0100
Message-ID: <C6295A8A71364F7D8909E606F9611D51@msrvcn04>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
In-Reply-To: <359a92830802141601t1cd4d753i82f1ea13813d191@mail.gmail.com>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.3790.4133
Thread-Index: AchvZgfnf6x6ZsUDQqyfXG+Tfgx/owAZjeGw
X-Y-GMX-Trusted: 0
X-Virus-Checked: Checked by ClamAV on apache.org

> Why not just use $$$$$$$$? 

Because nearly every analyzer removes it (SimpleAnalyzer, German, Russian,
French...)
Just tested it with luke in the search dialog.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32611-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 15 12:43:54 2008
Return-Path: <java-user-return-32611-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73800 invoked from network); 15 Feb 2008 12:43:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Feb 2008 12:43:54 -0000
Received: (qmail 54259 invoked by uid 500); 15 Feb 2008 12:43:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54224 invoked by uid 500); 15 Feb 2008 12:43:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54213 invoked by uid 99); 15 Feb 2008 12:43:42 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Feb 2008 04:43:42 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of spring@gmx.eu designates 213.165.64.20 as permitted sender)
Received: from [213.165.64.20] (HELO mail.gmx.net) (213.165.64.20)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 15 Feb 2008 12:43:09 +0000
Received: (qmail invoked by alias); 15 Feb 2008 12:43:15 -0000
Received: from e178112042.adsl.alicedsl.de (EHLO msrvcn04) [85.178.112.42]
  by mail.gmx.net (mp040) with SMTP; 15 Feb 2008 13:43:15 +0100
X-Authenticated: #2635966
X-Provags-ID: V01U2FsdGVkX1+7PS0pXqS7AdgdV6vNczpJqiw5athSoZ4/uUQa6z
	jWY1HrLSe9jQy7
From: <spring@gmx.eu>
To: <java-user@lucene.apache.org>
References: <20080109213932.229980@gmx.net>  <359a92830801091449x5f11d031v4b20cfef23f1d579@mail.gmail.com>  <FA7F479DF26B4AC2B32EF68EE9311B18@msrvcn04> <359a92830802141601t1cd4d753i82f1ea13813d191@mail.gmail.com> <Pine.LNX.4.62.0802142256530.25935@radix.cryptio.net>
Subject: RE: Design questions
Date: Fri, 15 Feb 2008 13:43:17 +0100
Message-ID: <63CA4C8A677F41FBA739CE4182B61F77@msrvcn04>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
In-Reply-To: <Pine.LNX.4.62.0802142256530.25935@radix.cryptio.net>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.3790.4133
Thread-Index: AchvoO/gukiyxxAkTTeU4jSAJfuAIQAK7zDA
X-Y-GMX-Trusted: 0
X-Virus-Checked: Checked by ClamAV on apache.org

>   Document doc = new Document()
>   for (int i = 0; i < pages.length; i++) {
>     doc.add(new Field("text", pages[i], Field.Store.NO, 
> Field.Index.TOKENIZED));
>     doc.add(new Field("text", "$$", Field.Store.NO, 
> Field.Index.UN_TOKENIZED));
>   }

UN_TOKENIZED. Nice idea!
I will check this out.

> 2) if your goal is just to be able to make sure you can query 
> for phrases 
> without crossing page boundaries, it's a lot simpler just to use are 
> really big positionIncimentGap with your analyzer (and add 
> each page as a 
> seperate Field instance).  boundary tokens like these are relaly only 
> neccessary if you want more complex queries (like "find X and Y on 
> the same page but not in the same sentence")

Hm. This is what Erik already recommended.
I had to store the field with TermVector.WITH_POSITIONS, right?

But I do not know the maximum number of terms per page and I do not know the
maximum number of pages.
I already had documents with more than 50.000 pages (A4) and documents with
1 page but 100 MB data.
How many terms can 100 MB have? Hm...
Since positions are stored as int I could have a maximum of 40.000 terms per
page (50.000 pages * 40.000 term -> nearly Integer.MAX_VALUE).



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32612-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 15 12:49:52 2008
Return-Path: <java-user-return-32612-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75161 invoked from network); 15 Feb 2008 12:49:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Feb 2008 12:49:52 -0000
Received: (qmail 63345 invoked by uid 500); 15 Feb 2008 12:49:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63319 invoked by uid 500); 15 Feb 2008 12:49:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63308 invoked by uid 99); 15 Feb 2008 12:49:40 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Feb 2008 04:49:40 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.207] (HELO spunkymail-a1.g.dreamhost.com) (208.97.132.207)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Feb 2008 12:49:07 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a1.g.dreamhost.com (Postfix) with ESMTP id 86C01100091
	for <java-user@lucene.apache.org>; Fri, 15 Feb 2008 04:49:12 -0800 (PST)
Message-Id: <29DE3473-ED90-4431-8BD6-59E1FF57E623@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <839ba01c0802140044l518d2c5dt39960d3f1a1dffaf@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v919.2)
Subject: Re: How to pass additional information into Similarity.scorePayload(...)
Date: Fri, 15 Feb 2008 07:49:11 -0500
References: <839ba01c0802130131x3afecdcdna3825cab69adc3a9@mail.gmail.com> <6929E41F-F5CA-4BFD-ADE4-B75D3EAA75EA@apache.org> <839ba01c0802131711v5754b5fanaefbb2f5a5a4c3fb@mail.gmail.com> <200802140758.06967.paul.elschot@xs4all.nl> <839ba01c0802140044l518d2c5dt39960d3f1a1dffaf@mail.gmail.com>
X-Mailer: Apple Mail (2.919.2)
X-Virus-Checked: Checked by ClamAV on apache.org


On Feb 14, 2008, at 3:44 AM, Cedric Ho wrote:
>
> Anyway, I know my requirement is a bit strange, so it's ok if I can't
> do this in Lucene. I'll settle with using a ThreadLocal to store the
> [10/5/2] weighting and retrieve it in the Similarity.scorePayload(...)
> function.
>

I don't think you are still considering this, but I wanted to note  
that Similarity.scorePayload() is a call back function, just like the  
other methods on Similarity.  The only query that currently makes that  
callback is the BoostingTermQuery.  Essentially, the only queries that  
can use payloads are those that use position information when scoring,  
i.e. the SpanQuerys, of which the BoostingTQ is one.

The takeaway here, being, you can't retrieve the payload from the  
Similarity class.  You can only get payloads via the TermPositions  
object.

-Grant

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32613-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 15 13:37:54 2008
Return-Path: <java-user-return-32613-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90953 invoked from network); 15 Feb 2008 13:37:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Feb 2008 13:37:54 -0000
Received: (qmail 23209 invoked by uid 500); 15 Feb 2008 13:37:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23181 invoked by uid 500); 15 Feb 2008 13:37:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23161 invoked by uid 99); 15 Feb 2008 13:37:42 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Feb 2008 05:37:42 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of spring@gmx.eu designates 213.165.64.20 as permitted sender)
Received: from [213.165.64.20] (HELO mail.gmx.net) (213.165.64.20)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 15 Feb 2008 13:36:55 +0000
Received: (qmail invoked by alias); 15 Feb 2008 13:37:16 -0000
Received: from e178112042.adsl.alicedsl.de (EHLO msrvcn04) [85.178.112.42]
  by mail.gmx.net (mp055) with SMTP; 15 Feb 2008 14:37:16 +0100
X-Authenticated: #2635966
X-Provags-ID: V01U2FsdGVkX1+VkZ8i27OVuaBuHwwllS3RKHrKC/hq+/m7RiFNCq
	Wrg7/8OvSsaCcZ
From: <spring@gmx.eu>
To: <java-user@lucene.apache.org>
References: <20080109213932.229980@gmx.net>  <359a92830801091449x5f11d031v4b20cfef23f1d579@mail.gmail.com>  <FA7F479DF26B4AC2B32EF68EE9311B18@msrvcn04> <359a92830802141601t1cd4d753i82f1ea13813d191@mail.gmail.com> <Pine.LNX.4.62.0802142256530.25935@radix.cryptio.net> <63CA4C8A677F41FBA739CE4182B61F77@msrvcn04>
Subject: RE: Design questions
Date: Fri, 15 Feb 2008 14:37:18 +0100
Message-ID: <1C85AF69E3BD41EFAF5427E8E5F33A45@msrvcn04>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
In-Reply-To: <63CA4C8A677F41FBA739CE4182B61F77@msrvcn04>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.3790.4133
Thread-Index: AchvoO/gukiyxxAkTTeU4jSAJfuAIQAK7zDAAAKljPA=
X-Y-GMX-Trusted: 0
X-Virus-Checked: Checked by ClamAV on apache.org

> >   Document doc = new Document()
> >   for (int i = 0; i < pages.length; i++) {
> >     doc.add(new Field("text", pages[i], Field.Store.NO, 
> > Field.Index.TOKENIZED));
> >     doc.add(new Field("text", "$$", Field.Store.NO, 
> > Field.Index.UN_TOKENIZED));
> >   }
> 
> UN_TOKENIZED. Nice idea!
> I will check this out.


Hm... when I try this, something strange happens with my offsets.

When I use 
doc.add(new Field("text", pages[i] +
"012345678901234567890123456789012345678901234567890123456789",
Field.Store.NO, Field.Index.TOKENIZED)) 
everything is fine. Offsets are as I expect.

But when I use 
doc.add(new Field("text", pages[i], Field.Store.NO, Field.Index.TOKENIZED))
doc.add(new Field("text",
"012345678901234567890123456789012345678901234567890123456789",
Field.Store.NO, Field.Index.UN_TOKENIZED))

the offsets of my terms are to high.

What is the difference?

Thank you.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32614-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 15 13:46:30 2008
Return-Path: <java-user-return-32614-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94868 invoked from network); 15 Feb 2008 13:46:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Feb 2008 13:46:30 -0000
Received: (qmail 42656 invoked by uid 500); 15 Feb 2008 13:46:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42632 invoked by uid 500); 15 Feb 2008 13:46:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42621 invoked by uid 99); 15 Feb 2008 13:46:18 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Feb 2008 05:46:18 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ksmmlist@gmail.com designates 64.233.182.185 as permitted sender)
Received: from [64.233.182.185] (HELO nf-out-0910.google.com) (64.233.182.185)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Feb 2008 13:45:45 +0000
Received: by nf-out-0910.google.com with SMTP id d3so342894nfc.15
        for <java-user@lucene.apache.org>; Fri, 15 Feb 2008 05:45:51 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:date:to:subject:from:organization:content-type:mime-version:content-transfer-encoding:message-id:user-agent;
        bh=Aw9pToj51vEUeldwomy2KUq5+oJ9DO+exASNv3k89RI=;
        b=qz0k1P8AzRcsxKSZ/pfvCWX04vtbW7xUeCpfM+yN4w1dZB1B8f/rJXbOAR/eiRJlLuNF44VDjtIlj56nD8rCA8MgJr4iGqdxSXmQRkq3gxKe0AP8tIbrVed3CNwm4ZfOs/WUA2vEVLE3h88UsuXsqoizT5oz8ZWjJVPXyoRBi0E=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=date:to:subject:from:organization:content-type:mime-version:content-transfer-encoding:message-id:user-agent;
        b=bn2ON3OSEQeA1kFaAQRdjEEUj9dBwB4sKIyb0b7fmYprWYtQcMv1dGXxlGMTDdK6QLqdJd33cxQVT0VKOhlZRvqgGXqBlzBZ4P+SgqwgzRhZCEbmUb4yePsUW90zqgZSTwJBvJC4OLQUbfcOMe7V1YU04X9qYM+jgH0lW3ZDZ9I=
Received: by 10.78.90.10 with SMTP id n10mr3358817hub.72.1203083151219;
        Fri, 15 Feb 2008 05:45:51 -0800 (PST)
Received: from sj-desktop ( [92.112.50.173])
        by mx.google.com with ESMTPS id o11sm7602039fkf.9.2008.02.15.05.45.49
        (version=SSLv3 cipher=OTHER);
        Fri, 15 Feb 2008 05:45:50 -0800 (PST)
Date: Fri, 15 Feb 2008 15:45:48 +0200
To: "Lucene user list" <java-user@lucene.apache.org>
Subject: from  2.2.0 to 2.3.0
From: "Sergey Kabashnyuk" <ksmmlist@gmail.com>
Organization: ksm
Content-Type: text/plain; format=flowed; delsp=yes; charset=utf-8
MIME-Version: 1.0
Content-Transfer-Encoding: Quoted-Printable
Message-ID: <op.t6ki6muv2ic4zu@sj-desktop>
User-Agent: Opera Mail/9.25 (Linux)
X-Virus-Checked: Checked by ClamAV on apache.org

Hi
I want to update  from lucene 2.2.0 to 2.3.0
but I have assert it TermInfosWriter line 143.

What is it mean
assert compareToLastTerm(fieldNumber, termText, termTextStart,
termTextLength) < 0 || (isIndex && termTextLength =3D=3D 0 &&
lastTermTextLength =3D=3D 0);

Can you help me?

Sergey Kabashnyuk

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32615-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 15 13:52:32 2008
Return-Path: <java-user-return-32615-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96502 invoked from network); 15 Feb 2008 13:52:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Feb 2008 13:52:32 -0000
Received: (qmail 47538 invoked by uid 500); 15 Feb 2008 13:52:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47504 invoked by uid 500); 15 Feb 2008 13:52:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47493 invoked by uid 99); 15 Feb 2008 13:52:19 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Feb 2008 05:52:19 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [72.14.214.230] (HELO hu-out-0506.google.com) (72.14.214.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Feb 2008 13:51:46 +0000
Received: by hu-out-0506.google.com with SMTP id 27so10888698hub.15
        for <java-user@lucene.apache.org>; Fri, 15 Feb 2008 05:51:52 -0800 (PST)
Received: by 10.150.150.3 with SMTP id x3mr989741ybd.93.1203083511080;
        Fri, 15 Feb 2008 05:51:51 -0800 (PST)
Received: from ?10.17.4.4? ( [71.174.108.74])
        by mx.google.com with ESMTPS id e76sm6457119hse.4.2008.02.15.05.51.23
        (version=TLSv1/SSLv3 cipher=OTHER);
        Fri, 15 Feb 2008 05:51:39 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v753)
In-Reply-To: <op.t6ki6muv2ic4zu@sj-desktop>
References: <op.t6ki6muv2ic4zu@sj-desktop>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <95D5C950-CA77-4FA1-A6B0-AB7A1D917E26@mikemccandless.com>
Content-Transfer-Encoding: 7bit
From: Michael McCandless <lucene@mikemccandless.com>
Subject: Re: from  2.2.0 to 2.3.0
Date: Fri, 15 Feb 2008 08:51:57 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.753)
X-Virus-Checked: Checked by ClamAV on apache.org


Can you provide the full stack trace, and any details of what you  
were doing when you tripped that assert?

Another thing to try is to run the org.apache.lucene.index.CheckIndex  
tool (new in 2.3) to check your 2.2 index.  It's possible your 2.2  
index has some undetected corruption which this new assert is detecting.

Mike

Sergey Kabashnyuk wrote:

> Hi
> I want to update  from lucene 2.2.0 to 2.3.0
> but I have assert it TermInfosWriter line 143.
>
> What is it mean
> assert compareToLastTerm(fieldNumber, termText, termTextStart,
> termTextLength) < 0 || (isIndex && termTextLength == 0 &&
> lastTermTextLength == 0);
>
> Can you help me?
>
> Sergey Kabashnyuk
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32616-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 15 14:00:27 2008
Return-Path: <java-user-return-32616-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97727 invoked from network); 15 Feb 2008 14:00:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Feb 2008 14:00:27 -0000
Received: (qmail 52854 invoked by uid 500); 15 Feb 2008 14:00:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52822 invoked by uid 500); 15 Feb 2008 14:00:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52807 invoked by uid 99); 15 Feb 2008 14:00:15 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Feb 2008 06:00:15 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ksmmlist@gmail.com designates 72.14.214.228 as permitted sender)
Received: from [72.14.214.228] (HELO hu-out-0506.google.com) (72.14.214.228)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Feb 2008 13:59:40 +0000
Received: by hu-out-0506.google.com with SMTP id 27so10893748hub.15
        for <java-user@lucene.apache.org>; Fri, 15 Feb 2008 05:59:47 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:date:to:subject:from:organization:content-type:mime-version:references:content-transfer-encoding:message-id:in-reply-to:user-agent;
        bh=b3l/EIIwICsh2gGDZ3C91ycJlNLe+FCQqczQfyi1J0M=;
        b=wxVkDEYEi5WYQyncBIdghZu9sUqGj5qK5FNUGezWLMQ8CTGhvr7JvvZP6afPAZcWfyIZC8wWoER21+bmr7l2mmwH1qusAgUKJPJPOVZ8zZJmzcummIiBypPUIap3RSz2STV8oMQLKMqYfTbYT3nUBBL8583yheniD0P9n3jxw0I=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=date:to:subject:from:organization:content-type:mime-version:references:content-transfer-encoding:message-id:in-reply-to:user-agent;
        b=DysWq3ExaE+5vjSKgsog5jyFt4S8GhS+ONr+TC2xADD/57rpEaF7imBpayjUP3EbihZXiq5Zn5VtDbS+k5cDSCtgex0kzlyhTZY38dGlP31xDKMCVKL2RJnJvloZ4wMxTBt+7UiPaKq3GTbBhHUX3kZCS8p0bCWlrlIPsf7e+mg=
Received: by 10.86.89.4 with SMTP id m4mr2507208fgb.45.1203083987723;
        Fri, 15 Feb 2008 05:59:47 -0800 (PST)
Received: from sj-desktop ( [92.112.50.173])
        by mx.google.com with ESMTPS id 12sm5507608fgg.6.2008.02.15.05.59.45
        (version=SSLv3 cipher=OTHER);
        Fri, 15 Feb 2008 05:59:47 -0800 (PST)
Date: Fri, 15 Feb 2008 15:59:43 +0200
To: java-user@lucene.apache.org
Subject: Re: from  2.2.0 to 2.3.0
From: "Sergey Kabashnyuk" <ksmmlist@gmail.com>
Organization: ksm
Content-Type: text/plain; format=flowed; delsp=yes; charset=utf-8
MIME-Version: 1.0
References: <op.t6ki6muv2ic4zu@sj-desktop> <95D5C950-CA77-4FA1-A6B0-AB7A1D917E26@mikemccandless.com>
Content-Transfer-Encoding: 8bit
Message-ID: <op.t6kjtthw2ic4zu@sj-desktop>
In-Reply-To: <95D5C950-CA77-4FA1-A6B0-AB7A1D917E26@mikemccandless.com>
User-Agent: Opera Mail/9.25 (Linux)
X-Virus-Checked: Checked by ClamAV on apache.org

stack trace
java.lang.AssertionError
         at  
org.apache.lucene.index.TermInfosWriter.add(TermInfosWriter.java:143)
         at  
org.apache.lucene.index.DocumentsWriter.appendPostings(DocumentsWriter.java:2290)
         at  
org.apache.lucene.index.DocumentsWriter.writeSegment(DocumentsWriter.java:1985)
         at  
org.apache.lucene.index.DocumentsWriter.flush(DocumentsWriter.java:539)
         at  
org.apache.lucene.index.IndexWriter.doFlush(IndexWriter.java:2497)
         at org.apache.lucene.index.IndexWriter.flush(IndexWriter.java:2397)
         at  
org.apache.lucene.index.IndexWriter.closeInternal(IndexWriter.java:1204)
         at org.apache.lucene.index.IndexWriter.close(IndexWriter.java:1178)
         at org.apache.lucene.index.IndexWriter.close(IndexWriter.java:1153)

Where I can find CheckIndex.tool ?

Sergey Kabashnyuk

>
> Can you provide the full stack trace, and any details of what you were  
> doing when you tripped that assert?
>
> Another thing to try is to run the org.apache.lucene.index.CheckIndex  
> tool (new in 2.3) to check your 2.2 index.  It's possible your 2.2 index  
> has some undetected corruption which this new assert is detecting.
>
> Mike
>
> Sergey Kabashnyuk wrote:
>
>> Hi
>> I want to update  from lucene 2.2.0 to 2.3.0
>> but I have assert it TermInfosWriter line 143.
>>
>> What is it mean
>> assert compareToLastTerm(fieldNumber, termText, termTextStart,
>> termTextLength) < 0 || (isIndex && termTextLength == 0 &&
>> lastTermTextLength == 0);
>>
>> Can you help me?
>>
>> Sergey Kabashnyuk
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>



-- 
 M2,    Opera:  
http://www.opera.com/mail/

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32617-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 15 14:05:28 2008
Return-Path: <java-user-return-32617-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98782 invoked from network); 15 Feb 2008 14:05:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Feb 2008 14:05:28 -0000
Received: (qmail 57025 invoked by uid 500); 15 Feb 2008 14:05:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56984 invoked by uid 500); 15 Feb 2008 14:05:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56973 invoked by uid 99); 15 Feb 2008 14:05:16 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Feb 2008 06:05:16 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of spring@gmx.eu designates 213.165.64.20 as permitted sender)
Received: from [213.165.64.20] (HELO mail.gmx.net) (213.165.64.20)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 15 Feb 2008 14:04:28 +0000
Received: (qmail invoked by alias); 15 Feb 2008 14:04:49 -0000
Received: from e178112042.adsl.alicedsl.de (EHLO msrvcn04) [85.178.112.42]
  by mail.gmx.net (mp024) with SMTP; 15 Feb 2008 15:04:49 +0100
X-Authenticated: #2635966
X-Provags-ID: V01U2FsdGVkX195TR96lDB5Zez4nkZHcLLZU/BfFTNH56yIjSVseT
	uYwkofn3FOZ+st
From: <spring@gmx.eu>
To: <java-user@lucene.apache.org>
References: <20080109213932.229980@gmx.net> <359a92830801091449x5f11d031v4b20cfef23f1d579@mail.gmail.com> <FA7F479DF26B4AC2B32EF68EE9311B18@msrvcn04> <359a92830802141601t1cd4d753i82f1ea13813d191@mail.gmail.com> <Pine.LNX.4.62.0802142256530.25935@radix.cryptio.net> <efe487cc0802150402m6e035b0o762f3dc04e3eff79@mail.gmail.com>
Subject: RE: Design questions
Date: Fri, 15 Feb 2008 15:04:51 +0100
Message-ID: <C072C236629243D7A25BACA63BBDD7D2@msrvcn04>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
In-Reply-To: <efe487cc0802150402m6e035b0o762f3dc04e3eff79@mail.gmail.com>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.3790.4133
Thread-Index: AchvyqhvUE68V3LjRU2Qzwud2xwDogAEN31Q
X-Y-GMX-Trusted: 0
X-Virus-Checked: Checked by ClamAV on apache.org

Well, it seems that this may be a solution for me too.
But I'm afraid that someone one day will change this string. And then my app
will not work anymore...  

> -----Original Message-----
> From: Adrian Smith [mailto:adrian.m.smith@gmail.com] 
> Sent: Freitag, 15. Februar 2008 13:02
> To: java-user@lucene.apache.org
> Subject: Re: Design questions
> 
> Hi,
> 
> I have a similar sitaution. I also considered using $. But 
> for the sake of
> not running into (potential) problems with Tokenisers, I just 
> defined a
> string in a config file which for sure is never going to 
> occur in a document
> and will never be searched for, e.g.
> 
> dfgjkjrkruigduhfkdgjrugr
> 
> Cheers, Adrian
> --
> Java Software Developer
> http://www.databasesandlife.com/
> 
> 
> 
> On 15/02/2008, Chris Hostetter <hossman_lucene@fucit.org> wrote:
> >
> >
> > I haven't really been following this thread that closely, but...
> >
> > : Why not just use $$$$$$$$? Check to insure that it makes
> >
> > : it through whatever analyzer you choose though. For instance,
> > : LetterTokenizer will remove it...
> >
> >
> > 1) i'm 99% sure you can do something like this...
> >
> >   Document doc = new Document()
> >   for (int i = 0; i < pages.length; i++) {
> >     doc.add(new Field("text", pages[i], Field.Store.NO,
> > Field.Index.TOKENIZED));
> >     doc.add(new Field("text", "$$", Field.Store.NO,
> > Field.Index.UN_TOKENIZED));
> >   }
> >
> > ...and you'll get your magic token regardless of whether it 
> would normally
> > make it through your analyzer. In fact: you want it to be 
> something your
> > analyzer could never produce, even if it appears in the 
> orriginal text, so
> > you don't get false boundaries (ie: if you use an Analzeer 
> that lowercases
> > everything, then "A" makes a perfectly fine boundary token.
> >
> > 2) if your goal is just to be able to make sure you can 
> query for phrases
> > without crossing page boundaries, it's a lot simpler just to use are
> > really big positionIncimentGap with your analyzer (and add 
> each page as a
> > seperate Field instance).  boundary tokens like these are 
> relaly only
> > neccessary if you want more complex queries (like "find X and Y on
> > the same page but not in the same sentence")
> >
> >
> >
> >
> > -Hoss
> >
> >
> >
> > 
> ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32618-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 15 14:07:15 2008
Return-Path: <java-user-return-32618-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99185 invoked from network); 15 Feb 2008 14:07:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Feb 2008 14:07:15 -0000
Received: (qmail 58766 invoked by uid 500); 15 Feb 2008 14:07:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58739 invoked by uid 500); 15 Feb 2008 14:07:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58728 invoked by uid 99); 15 Feb 2008 14:07:03 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Feb 2008 06:07:03 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [72.14.246.251] (HELO ag-out-0708.google.com) (72.14.246.251)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Feb 2008 14:06:29 +0000
Received: by ag-out-0708.google.com with SMTP id 23so889900agd.5
        for <java-user@lucene.apache.org>; Fri, 15 Feb 2008 06:06:36 -0800 (PST)
Received: by 10.142.226.2 with SMTP id y2mr2301824wfg.46.1203084395620;
        Fri, 15 Feb 2008 06:06:35 -0800 (PST)
Received: from ?10.17.4.4? ( [71.174.108.74])
        by mx.google.com with ESMTPS id h34sm3331833wxd.38.2008.02.15.06.06.34
        (version=TLSv1/SSLv3 cipher=OTHER);
        Fri, 15 Feb 2008 06:06:34 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v753)
In-Reply-To: <op.t6kjtthw2ic4zu@sj-desktop>
References: <op.t6ki6muv2ic4zu@sj-desktop> <95D5C950-CA77-4FA1-A6B0-AB7A1D917E26@mikemccandless.com> <op.t6kjtthw2ic4zu@sj-desktop>
Content-Type: text/plain; charset=UTF-8; delsp=yes; format=flowed
Message-Id: <94E22A28-BE4A-42E1-A067-904D985F2B4B@mikemccandless.com>
Content-Transfer-Encoding: quoted-printable
From: Michael McCandless <lucene@mikemccandless.com>
Subject: Re: from  2.2.0 to 2.3.0
Date: Fri, 15 Feb 2008 09:07:24 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.753)
X-Virus-Checked: Checked by ClamAV on apache.org


CheckIndex tool is in the 2.3 JAR.  Just make sure the JAR is on your =20=

CLASSPATH then run:

   java org.apache.lucene.index.CheckIndex <indexDirectory>

However, from that stack trace, this is not a corruption issue in =20
your existing index.  My guess is you would hit this same exception =20
if you started from a new index because it's being hit when flushing =20
a new segment (not merging old ones).

How many documents are you adding before closing the writer?  Are you =20=

using multiple threads to add documents?  What kinds of documents are =20=

you adding?

Can you try disabling asserts, then try to build your index, then run =20=

CheckIndex on the resulting index?  It's possible this is an over-=20
aggressive assert.

I'll go scrutinize that code...

Mike

Sergey Kabashnyuk wrote:

> stack trace
> java.lang.AssertionError
>         at org.apache.lucene.index.TermInfosWriter.add=20
> (TermInfosWriter.java:143)
>         at org.apache.lucene.index.DocumentsWriter.appendPostings=20
> (DocumentsWriter.java:2290)
>         at org.apache.lucene.index.DocumentsWriter.writeSegment=20
> (DocumentsWriter.java:1985)
>         at org.apache.lucene.index.DocumentsWriter.flush=20
> (DocumentsWriter.java:539)
>         at org.apache.lucene.index.IndexWriter.doFlush=20
> (IndexWriter.java:2497)
>         at org.apache.lucene.index.IndexWriter.flush=20
> (IndexWriter.java:2397)
>         at org.apache.lucene.index.IndexWriter.closeInternal=20
> (IndexWriter.java:1204)
>         at org.apache.lucene.index.IndexWriter.close=20
> (IndexWriter.java:1178)
>         at org.apache.lucene.index.IndexWriter.close=20
> (IndexWriter.java:1153)
>
> Where I can find CheckIndex.tool ?
>
> Sergey Kabashnyuk
>
>>
>> Can you provide the full stack trace, and any details of what you =20
>> were doing when you tripped that assert?
>>
>> Another thing to try is to run the =20
>> org.apache.lucene.index.CheckIndex tool (new in 2.3) to check your =20=

>> 2.2 index.  It's possible your 2.2 index has some undetected =20
>> corruption which this new assert is detecting.
>>
>> Mike
>>
>> Sergey Kabashnyuk wrote:
>>
>>> Hi
>>> I want to update  from lucene 2.2.0 to 2.3.0
>>> but I have assert it TermInfosWriter line 143.
>>>
>>> What is it mean
>>> assert compareToLastTerm(fieldNumber, termText, termTextStart,
>>> termTextLength) < 0 || (isIndex && termTextLength =3D=3D 0 &&
>>> lastTermTextLength =3D=3D 0);
>>>
>>> Can you help me?
>>>
>>> Sergey Kabashnyuk
>>>
>>> --------------------------------------------------------------------=20=

>>> -
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
>
>
> --=20
> =D0=9E=D1=82=D0=BF=D1=80=D0=B0=D0=B2=D0=BB=D0=B5=D0=BD=D0=BE M2, =
=D1=80=D0=B5=D0=B2=D0=BE=D0=BB=D1=8E=D1=86=D0=B8=D0=BE=D0=BD=D0=BD=D0=BE=D0=
=B9 =20
> =D0=BF=D0=BE=D1=87=D1=82=D0=BE=D0=B2=D0=BE=D0=B9 =D0=BF=D1=80=D0=BE=D0=B3=
=D1=80=D0=B0=D0=BC=D0=BC=D0=BE=D0=B9 Opera: http://www.opera.com/=20
> mail/
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32619-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 15 14:31:00 2008
Return-Path: <java-user-return-32619-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 6081 invoked from network); 15 Feb 2008 14:31:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Feb 2008 14:31:00 -0000
Received: (qmail 89293 invoked by uid 500); 15 Feb 2008 14:30:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89252 invoked by uid 500); 15 Feb 2008 14:30:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89232 invoked by uid 99); 15 Feb 2008 14:30:47 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Feb 2008 06:30:47 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [72.14.246.242] (HELO ag-out-0708.google.com) (72.14.246.242)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Feb 2008 14:29:59 +0000
Received: by ag-out-0708.google.com with SMTP id 23so921145agd.5
        for <java-user@lucene.apache.org>; Fri, 15 Feb 2008 06:30:18 -0800 (PST)
Received: by 10.70.16.6 with SMTP id 6mr1787032wxp.7.1203085818455;
        Fri, 15 Feb 2008 06:30:18 -0800 (PST)
Received: from ?10.17.4.4? ( [71.174.108.74])
        by mx.google.com with ESMTPS id h15sm8020079wxd.23.2008.02.15.06.30.17
        (version=TLSv1/SSLv3 cipher=OTHER);
        Fri, 15 Feb 2008 06:30:17 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v753)
In-Reply-To: <op.t6kjtthw2ic4zu@sj-desktop>
References: <op.t6ki6muv2ic4zu@sj-desktop> <95D5C950-CA77-4FA1-A6B0-AB7A1D917E26@mikemccandless.com> <op.t6kjtthw2ic4zu@sj-desktop>
Content-Type: text/plain; charset=UTF-8; delsp=yes; format=flowed
Message-Id: <AA680C31-C9F8-4F91-BA5A-3B60E6517577@mikemccandless.com>
Content-Transfer-Encoding: quoted-printable
From: Michael McCandless <lucene@mikemccandless.com>
Subject: Re: from  2.2.0 to 2.3.0
Date: Fri, 15 Feb 2008 09:31:07 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.753)
X-Virus-Checked: Checked by ClamAV on apache.org


OK I found one case that can cause the assert to trip incorrectly.

Are you using empty string field names?

I'll open a Jira issue & fix it on the 2.3 branch (so this is fixed =20
in 2.3.1).

Thanks for reporting this!

Mike

Sergey Kabashnyuk wrote:

> stack trace
> java.lang.AssertionError
>         at org.apache.lucene.index.TermInfosWriter.add=20
> (TermInfosWriter.java:143)
>         at org.apache.lucene.index.DocumentsWriter.appendPostings=20
> (DocumentsWriter.java:2290)
>         at org.apache.lucene.index.DocumentsWriter.writeSegment=20
> (DocumentsWriter.java:1985)
>         at org.apache.lucene.index.DocumentsWriter.flush=20
> (DocumentsWriter.java:539)
>         at org.apache.lucene.index.IndexWriter.doFlush=20
> (IndexWriter.java:2497)
>         at org.apache.lucene.index.IndexWriter.flush=20
> (IndexWriter.java:2397)
>         at org.apache.lucene.index.IndexWriter.closeInternal=20
> (IndexWriter.java:1204)
>         at org.apache.lucene.index.IndexWriter.close=20
> (IndexWriter.java:1178)
>         at org.apache.lucene.index.IndexWriter.close=20
> (IndexWriter.java:1153)
>
> Where I can find CheckIndex.tool ?
>
> Sergey Kabashnyuk
>
>>
>> Can you provide the full stack trace, and any details of what you =20
>> were doing when you tripped that assert?
>>
>> Another thing to try is to run the =20
>> org.apache.lucene.index.CheckIndex tool (new in 2.3) to check your =20=

>> 2.2 index.  It's possible your 2.2 index has some undetected =20
>> corruption which this new assert is detecting.
>>
>> Mike
>>
>> Sergey Kabashnyuk wrote:
>>
>>> Hi
>>> I want to update  from lucene 2.2.0 to 2.3.0
>>> but I have assert it TermInfosWriter line 143.
>>>
>>> What is it mean
>>> assert compareToLastTerm(fieldNumber, termText, termTextStart,
>>> termTextLength) < 0 || (isIndex && termTextLength =3D=3D 0 &&
>>> lastTermTextLength =3D=3D 0);
>>>
>>> Can you help me?
>>>
>>> Sergey Kabashnyuk
>>>
>>> --------------------------------------------------------------------=20=

>>> -
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
>
>
> --=20
> =D0=9E=D1=82=D0=BF=D1=80=D0=B0=D0=B2=D0=BB=D0=B5=D0=BD=D0=BE M2, =
=D1=80=D0=B5=D0=B2=D0=BE=D0=BB=D1=8E=D1=86=D0=B8=D0=BE=D0=BD=D0=BD=D0=BE=D0=
=B9 =20
> =D0=BF=D0=BE=D1=87=D1=82=D0=BE=D0=B2=D0=BE=D0=B9 =D0=BF=D1=80=D0=BE=D0=B3=
=D1=80=D0=B0=D0=BC=D0=BC=D0=BE=D0=B9 Opera: http://www.opera.com/=20
> mail/
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32620-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 15 15:29:42 2008
Return-Path: <java-user-return-32620-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98514 invoked from network); 15 Feb 2008 15:29:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Feb 2008 15:29:42 -0000
Received: (qmail 87283 invoked by uid 500); 15 Feb 2008 15:29:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87240 invoked by uid 500); 15 Feb 2008 15:29:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87229 invoked by uid 99); 15 Feb 2008 15:29:28 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Feb 2008 07:29:28 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ksmmlist@gmail.com designates 72.14.214.229 as permitted sender)
Received: from [72.14.214.229] (HELO hu-out-0506.google.com) (72.14.214.229)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Feb 2008 15:28:54 +0000
Received: by hu-out-0506.google.com with SMTP id 27so10949708hub.15
        for <java-user@lucene.apache.org>; Fri, 15 Feb 2008 07:29:01 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:date:to:subject:from:organization:content-type:mime-version:references:content-transfer-encoding:message-id:in-reply-to:user-agent;
        bh=A/ZQBd1kfwsRByyqF4zcmsMWQDTVZGJkgI8xOF5mSlc=;
        b=bla+SuKy979XACzTHEN730qaHTIgZDFz1/FLiuYnDVV1Qc5AhwwA6JUQkbMOrveZnGe4WaxbYyCO39dibfiodCvZnAJP/JcWaz/KHjZoSVAhPeS45Ehw95lNuCVyxb4PqrgDVNQinHPC/TLcW9n4FjS1sMRAeWzoEH+QEMfOvpw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=date:to:subject:from:organization:content-type:mime-version:references:content-transfer-encoding:message-id:in-reply-to:user-agent;
        b=ep5Ge130Rxr2tD3jdmHAiJvnP60V9fPPJZHK8F1vqLamklr9Wn7PBjLuKA+xJbLJCoZeWwr9pCODQyUWdcj/KBYyxOrhwH5JXeqTMMWyuPmxLparQ3LAJA7uippcplWq7PbUB9WW8ui5iAXoOoJsmJ0uw580RWDnEzHT/kn2ukA=
Received: by 10.86.27.9 with SMTP id a9mr2590414fga.62.1203089340929;
        Fri, 15 Feb 2008 07:29:00 -0800 (PST)
Received: from sj-desktop ( [92.112.50.173])
        by mx.google.com with ESMTPS id l19sm5682656fgb.0.2008.02.15.07.28.58
        (version=SSLv3 cipher=OTHER);
        Fri, 15 Feb 2008 07:28:59 -0800 (PST)
Date: Fri, 15 Feb 2008 17:28:57 +0200
To: java-user@lucene.apache.org
Subject: Re: from  2.2.0 to 2.3.0
From: "Sergey Kabashnyuk" <ksmmlist@gmail.com>
Organization: ksm
Content-Type: text/plain; format=flowed; delsp=yes; charset=utf-8
MIME-Version: 1.0
References: <op.t6ki6muv2ic4zu@sj-desktop> <95D5C950-CA77-4FA1-A6B0-AB7A1D917E26@mikemccandless.com> <op.t6kjtthw2ic4zu@sj-desktop> <AA680C31-C9F8-4F91-BA5A-3B60E6517577@mikemccandless.com>
Content-Transfer-Encoding: 8bit
Message-ID: <op.t6knyjfu2ic4zu@sj-desktop>
In-Reply-To: <AA680C31-C9F8-4F91-BA5A-3B60E6517577@mikemccandless.com>
User-Agent: Opera Mail/9.25 (Linux)
X-Virus-Checked: Checked by ClamAV on apache.org

On Fri, 15 Feb 2008 16:31:07 +0200, Michael McCandless  
<lucene@mikemccandless.com> wrote:

>
> OK I found one case that can cause the assert to trip incorrectly.
>
> Are you using empty string field names?
Not. May be empty content of the field.

I have another question.
I see you use asserts in code 2.3.0 instead of Exceptions. Why it's not  
very informative?

>
> I'll open a Jira issue & fix it on the 2.3 branch (so this is fixed in  
> 2.3.1).
>
> Thanks for reporting this!
>
> Mike
>
> Sergey Kabashnyuk wrote:
>
>> stack trace
>> java.lang.AssertionError
>>         at org.apache.lucene.index.TermInfosWriter.add 
>> (TermInfosWriter.java:143)
>>         at org.apache.lucene.index.DocumentsWriter.appendPostings 
>> (DocumentsWriter.java:2290)
>>         at org.apache.lucene.index.DocumentsWriter.writeSegment 
>> (DocumentsWriter.java:1985)
>>         at org.apache.lucene.index.DocumentsWriter.flush 
>> (DocumentsWriter.java:539)
>>         at org.apache.lucene.index.IndexWriter.doFlush 
>> (IndexWriter.java:2497)
>>         at org.apache.lucene.index.IndexWriter.flush 
>> (IndexWriter.java:2397)
>>         at org.apache.lucene.index.IndexWriter.closeInternal 
>> (IndexWriter.java:1204)
>>         at org.apache.lucene.index.IndexWriter.close 
>> (IndexWriter.java:1178)
>>         at org.apache.lucene.index.IndexWriter.close 
>> (IndexWriter.java:1153)
>>
>> Where I can find CheckIndex.tool ?
>>
>> Sergey Kabashnyuk
>>
>>>
>>> Can you provide the full stack trace, and any details of what you were  
>>> doing when you tripped that assert?
>>>
>>> Another thing to try is to run the org.apache.lucene.index.CheckIndex  
>>> tool (new in 2.3) to check your 2.2 index.  It's possible your 2.2  
>>> index has some undetected corruption which this new assert is  
>>> detecting.
>>>
>>> Mike
>>>
>>> Sergey Kabashnyuk wrote:
>>>
>>>> Hi
>>>> I want to update  from lucene 2.2.0 to 2.3.0
>>>> but I have assert it TermInfosWriter line 143.
>>>>
>>>> What is it mean
>>>> assert compareToLastTerm(fieldNumber, termText, termTextStart,
>>>> termTextLength) < 0 || (isIndex && termTextLength == 0 &&
>>>> lastTermTextLength == 0);
>>>>
>>>> Can you help me?
>>>>
>>>> Sergey Kabashnyuk
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>
>>
>>
>> -- M2,    Opera:  
>> http://www.opera.com/mail/
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>



-- 
 M2,    Opera:  
http://www.opera.com/mail/

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32621-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 15 15:37:41 2008
Return-Path: <java-user-return-32621-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5919 invoked from network); 15 Feb 2008 15:37:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Feb 2008 15:37:41 -0000
Received: (qmail 99785 invoked by uid 500); 15 Feb 2008 15:37:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 99487 invoked by uid 500); 15 Feb 2008 15:37:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 99476 invoked by uid 99); 15 Feb 2008 15:37:29 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Feb 2008 07:37:29 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of erica.mitchell@iona.com designates 62.221.12.55 as permitted sender)
Received: from [62.221.12.55] (HELO emea-mx1.iona.com) (62.221.12.55)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Feb 2008 15:36:44 +0000
X-IronPort-AV: E=Sophos;i="4.25,358,1199664000"; 
   d="java'?scan'208,217";a="1168281"
Received: from emea-ems1.ionaglobal.com ([10.2.1.125])
  by emea-mx1.iona.com with ESMTP; 15 Feb 2008 15:37:04 +0000
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/mixed;
	boundary="----_=_NextPart_001_01C86FE8.9D803A84"
X-MimeOLE: Produced By Microsoft Exchange V6.5
Subject: Which parser or query should I be using
Date: Fri, 15 Feb 2008 15:37:04 -0000
Message-ID: <E91104197DA2654DA833B6EB53B6C488032F7C0C@emea-ems1.IONAGLOBAL.COM>
In-Reply-To: <E91104197DA2654DA833B6EB53B6C488032F7C0A@emea-ems1.IONAGLOBAL.COM>
X-MS-Has-Attach: yes
X-MS-TNEF-Correlator: 
Thread-Topic: Which parser or query should I be using
Thread-Index: Achv35Z5m78ydKZLQtSsW3dg1xorWwABQ+ywAAD2p4A=
From: "Mitchell, Erica" <Erica.Mitchell@iona.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01C86FE8.9D803A84
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_002_01C86FE8.9D803A84"


------_=_NextPart_002_01C86FE8.9D803A84
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

=20
trying to send this again...  i keep getting delivery failures  so i've
attached my code snippet instead  =20
=20
My index from Luke looks like this where the columns are for
Rank/Field/Text
=20
2 guid aaaa2
1 guid pi1
1 statement Some policy statement for pi3, needs some text with a 2 in
it
1 guid pi3
1 name a1
1 name a2
1 guid pi2
1 value 0
1 value 4552
1 guid aaaa1
=20
i want to be able to enter the following search strings
=20
    policy
    Some policy
    Some policy*
    *statement*
    statement:Some policy
=20
and for these queries for "Some policy statement for pi3, needs some
text with a 2 in it" to be returned.

=20
Other examples which are returning correctly are
=20
    guid:aaaa1
    aaaa2
=20
My code is as  attached . Perhaps i'm overthinking it and some Regex
parser or query should work instead.
Thanks for any suggestions,
Erica

=20
=20

----------------------------
IONA Technologies PLC (registered in Ireland)
Registered Number: 171387
Registered Address: The IONA Building, Shelbourne Road, Dublin 4, Ireland

------_=_NextPart_002_01C86FE8.9D803A84
Content-Type: text/html; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML><HEAD>
<META http-equiv=3DContent-Type content=3D"text/html; charset=3Dus-ascii">
<META content=3D"MSHTML 6.00.6000.16587" name=3DGENERATOR></HEAD>
<BODY>
<DIV dir=3Dltr align=3Dleft><FONT face=3DArial color=3D#0000ff=20
size=3D2></FONT>&nbsp;</DIV>
<DIV></DIV>
<DIV><SPAN class=3D841323114-15022008><FONT face=3DArial><FONT size=3D2>try=
ing to send=20
this again...<SPAN class=3D122410815-15022008><FONT color=3D#0000ff>&nbsp; =
i keep=20
getting delivery&nbsp;failures<SPAN class=3D395163615-15022008>&nbsp; so i'=
ve=20
attached my&nbsp;code snippet instead&nbsp;</SPAN><SPAN=20
class=3D395163615-15022008>&nbsp;</SPAN><SPAN=20
class=3D395163615-15022008>&nbsp;</SPAN></FONT></SPAN></FONT></FONT></SPAN>=
</DIV>
<DIV><FONT face=3DArial size=3D2><SPAN=20
class=3D841323114-15022008></SPAN></FONT>&nbsp;</DIV>
<DIV><FONT size=3D2><SPAN class=3D841323114-15022008>
<DIV><SPAN class=3D797184710-15022008><FONT face=3DArial size=3D2>My index<=
SPAN=20
class=3D625522014-15022008> from Luke looks like</SPAN> this where the colu=
mns are=20
for Rank/Field/Text</FONT></SPAN></DIV>
<DIV><SPAN class=3D797184710-15022008><FONT face=3DArial color=3D#0000ff=20
size=3D2></FONT></SPAN>&nbsp;</DIV>
<DIV><SPAN class=3D797184710-15022008><FONT face=3DArial=20
size=3D2>2&nbsp;guid&nbsp;aaaa2<BR>1&nbsp;guid&nbsp;pi1<BR>1&nbsp;statement=
&nbsp;Some=20
policy statement for pi3, needs some text with a 2 in=20
it<BR>1&nbsp;guid&nbsp;pi3<BR>1&nbsp;name&nbsp;a1<BR>1&nbsp;name&nbsp;a2<BR=
>1&nbsp;guid&nbsp;pi2<BR>1&nbsp;value&nbsp;0<BR>1&nbsp;value&nbsp;4552<BR>1=
&nbsp;guid&nbsp;aaaa1</FONT></SPAN></DIV>
<DIV><SPAN class=3D797184710-15022008><FONT face=3DArial color=3D#0000ff=20
size=3D2></FONT></SPAN>&nbsp;</DIV>
<DIV><SPAN class=3D797184710-15022008><FONT size=3D+0><SPAN=20
class=3D625522014-15022008><FONT face=3DArial size=3D2>i want to be able to=
 enter the=20
following search strings</FONT></SPAN></FONT></SPAN></DIV>
<DIV><SPAN class=3D797184710-15022008><FONT size=3D+0><SPAN=20
class=3D625522014-15022008><FONT face=3DArial color=3D#0000ff=20
size=3D2></FONT></SPAN></FONT></SPAN>&nbsp;</DIV>
<DIV><SPAN class=3D797184710-15022008><FONT size=3D+0><SPAN=20
class=3D625522014-15022008><FONT face=3DArial size=3D2>&nbsp;&nbsp;&nbsp;=20
policy</FONT></SPAN></FONT></SPAN></DIV>
<DIV><SPAN class=3D797184710-15022008><FONT size=3D+0><SPAN=20
class=3D625522014-15022008><FONT face=3DArial size=3D2>&nbsp;&nbsp;&nbsp; S=
ome=20
policy</FONT></SPAN></FONT></SPAN></DIV>
<DIV><SPAN class=3D797184710-15022008><FONT size=3D+0><SPAN=20
class=3D625522014-15022008><FONT face=3DArial size=3D2>&nbsp;&nbsp;&nbsp; S=
ome=20
policy*</FONT></SPAN></FONT></SPAN></DIV>
<DIV><SPAN class=3D797184710-15022008><FONT size=3D+0><SPAN=20
class=3D625522014-15022008><FONT face=3DArial size=3D2>&nbsp;&nbsp;&nbsp;=20
*statement*</FONT></SPAN></FONT></SPAN></DIV>
<DIV><SPAN class=3D797184710-15022008><FONT size=3D+0><SPAN=20
class=3D625522014-15022008><FONT face=3DArial size=3D2>&nbsp;&nbsp;&nbsp;=20
statement:Some policy</FONT></SPAN></FONT></SPAN></DIV>
<DIV><SPAN class=3D797184710-15022008><FONT face=3DArial color=3D#0000ff si=
ze=3D2><SPAN=20
class=3D625522014-15022008></SPAN></FONT></SPAN>&nbsp;</DIV>
<DIV><SPAN class=3D797184710-15022008><FONT face=3DArial size=3D2><SPAN=20
class=3D625522014-15022008>and for these queries for "Some policy statement=
 for=20
pi3, needs some text with a 2 in it" to be returned.</SPAN></FONT></SPAN></=
DIV>
<DIV><SPAN class=3D797184710-15022008><FONT size=3D2><SPAN=20
class=3D625522014-15022008><FONT color=3D#0000ff></FONT><BR><FONT=20
face=3DArial>&nbsp;</FONT></DIV></SPAN></FONT></SPAN>
<DIV><SPAN class=3D797184710-15022008><FONT face=3DArial size=3D2><SPAN=20
class=3D625522014-15022008>Other examples which are returning correctly=20
are</SPAN></FONT></SPAN></DIV>
<DIV><SPAN class=3D797184710-15022008><FONT size=3D+0><SPAN=20
class=3D625522014-15022008><FONT face=3DArial color=3D#0000ff=20
size=3D2></FONT></SPAN></FONT></SPAN>&nbsp;</DIV>
<DIV><SPAN class=3D797184710-15022008><FONT size=3D+0><SPAN=20
class=3D625522014-15022008><FONT face=3DArial size=3D2>&nbsp;&nbsp;&nbsp;=20
guid:aaaa1</FONT></SPAN></FONT></SPAN></DIV>
<DIV><SPAN class=3D797184710-15022008><FONT size=3D+0><SPAN=20
class=3D625522014-15022008><FONT face=3DArial size=3D2>&nbsp;&nbsp;&nbsp;=20
aaaa2</FONT></SPAN></FONT></SPAN></DIV>
<DIV><SPAN class=3D797184710-15022008><FONT size=3D+0><SPAN=20
class=3D625522014-15022008><FONT face=3DArial size=3D2></FONT></SPAN>&nbsp;=
</DIV>
<DIV><SPAN class=3D625522014-15022008></SPAN><FONT face=3DArial>M<SPAN=20
class=3D625522014-15022008>y code is as&nbsp;<SPAN class=3D395163615-150220=
08><FONT=20
color=3D#0000ff size=3D2>&nbsp;attached&nbsp;</FONT></SPAN>. Perhaps i'm=20
overthinking it and some Regex parser or query should work=20
instead.</SPAN></FONT></DIV>
<DIV><FONT size=3D+0><SPAN class=3D625522014-15022008></SPAN><SPAN=20
class=3D625522014-15022008></SPAN><FONT face=3DArial>T<SPAN=20
class=3D625522014-15022008>hanks for any suggestions,</SPAN></FONT></FONT><=
/DIV>
<DIV><FONT size=3D+0><FONT size=3D+0><SPAN class=3D625522014-15022008></SPA=
N><SPAN=20
class=3D625522014-15022008></SPAN><FONT face=3DArial>E<SPAN=20
class=3D625522014-15022008>rica</SPAN><BR></FONT></DIV></FONT><FONT=20
size=3D2></FONT></FONT></FONT></SPAN>
<DIV><FONT face=3DArial color=3D#0000ff size=3D2></FONT>&nbsp;</DIV>
<DIV><FONT face=3DArial color=3D#0000ff=20
size=3D2></FONT>&nbsp;</DIV></SPAN></FONT></DIV><pre>
----------------------------
IONA Technologies PLC (registered in Ireland)
Registered Number: 171387
Registered Address: The IONA Building, Shelbourne Road, Dublin 4, Ireland
</pre></BODY></HTML>

------_=_NextPart_002_01C86FE8.9D803A84--


------_=_NextPart_001_01C86FE8.9D803A84
Content-Type: text/plain; charset=us-ascii

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org
------_=_NextPart_001_01C86FE8.9D803A84--

From java-user-return-32622-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 15 15:55:51 2008
Return-Path: <java-user-return-32622-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20926 invoked from network); 15 Feb 2008 15:55:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Feb 2008 15:55:51 -0000
Received: (qmail 24708 invoked by uid 500); 15 Feb 2008 15:55:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24672 invoked by uid 500); 15 Feb 2008 15:55:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24661 invoked by uid 99); 15 Feb 2008 15:55:38 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Feb 2008 07:55:38 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [66.249.82.236] (HELO wx-out-0506.google.com) (66.249.82.236)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Feb 2008 15:55:06 +0000
Received: by wx-out-0506.google.com with SMTP id i28so721284wxd.20
        for <java-user@lucene.apache.org>; Fri, 15 Feb 2008 07:55:12 -0800 (PST)
Received: by 10.100.231.16 with SMTP id d16mr3914547anh.87.1203090912302;
        Fri, 15 Feb 2008 07:55:12 -0800 (PST)
Received: from ?10.17.4.4? ( [71.174.108.74])
        by mx.google.com with ESMTPS id 20sm5377902agd.11.2008.02.15.07.55.11
        (version=TLSv1/SSLv3 cipher=OTHER);
        Fri, 15 Feb 2008 07:55:11 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v753)
In-Reply-To: <op.t6knyjfu2ic4zu@sj-desktop>
References: <op.t6ki6muv2ic4zu@sj-desktop> <95D5C950-CA77-4FA1-A6B0-AB7A1D917E26@mikemccandless.com> <op.t6kjtthw2ic4zu@sj-desktop> <AA680C31-C9F8-4F91-BA5A-3B60E6517577@mikemccandless.com> <op.t6knyjfu2ic4zu@sj-desktop>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <F62C1121-ADA6-46B0-854A-AA7B8F68E50D@mikemccandless.com>
Content-Transfer-Encoding: 7bit
From: Michael McCandless <lucene@mikemccandless.com>
Subject: Re: from  2.2.0 to 2.3.0
Date: Fri, 15 Feb 2008 10:56:01 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.753)
X-Virus-Checked: Checked by ClamAV on apache.org


Sergey Kabashnyuk wrote:

> On Fri, 15 Feb 2008 16:31:07 +0200, Michael McCandless  
> <lucene@mikemccandless.com> wrote:
>
>>
>> OK I found one case that can cause the assert to trip incorrectly.
>>
>> Are you using empty string field names?
> Not. May be empty content of the field.

Hmmm, ok.  Empty content is fine.  Can you provide more details on  
how you're creating your documents?  Are you using threads?  (Or if  
possible post the code that's creating the documents?).

> I have another question.
> I see you use asserts in code 2.3.0 instead of Exceptions. Why it's  
> not very informative?

Well, asserts are meant to catch bugs, whereas exceptions are meant  
to catch "expected" errors.  But, you're right, it would be nice if  
the asserts included more details about the particular values that  
caused problems.  I'll add that for this...

Mike


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32623-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 15 15:58:20 2008
Return-Path: <java-user-return-32623-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22136 invoked from network); 15 Feb 2008 15:58:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Feb 2008 15:58:19 -0000
Received: (qmail 29609 invoked by uid 500); 15 Feb 2008 15:58:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29341 invoked by uid 500); 15 Feb 2008 15:58:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29330 invoked by uid 99); 15 Feb 2008 15:58:07 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Feb 2008 07:58:07 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 72.14.214.231 as permitted sender)
Received: from [72.14.214.231] (HELO hu-out-0506.google.com) (72.14.214.231)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Feb 2008 15:57:33 +0000
Received: by hu-out-0506.google.com with SMTP id 27so12873hub.15
        for <java-user@lucene.apache.org>; Fri, 15 Feb 2008 07:57:40 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=A41ai/DktQnDkAOoQtlNNI3bkHgZOGBjYfb+XY/b7jE=;
        b=bsAcFvMDohcm9xU7uusvF1O6HSU+wr9dbMnDfKvXamBL+BAt693JHBnTfOMLyCdGgyI5caNmNtXpaW8Fuw0tDFs+L2XEZQCtLdJGTaYxwOlAaM4UlyzU03+++EMxbZjYmvFRPIBz/WONE42zhSf439hXaj6gjX9IEwyLbCXoYSM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=WPakmF/7HoyKKiPpEbp7LiTtuHaHOMt4k1EYXy7mGomjHsIjuq4uDUCaBVYG0FcINlLNKo8mZ8Ya9RrS79gfHiSx/pAwMswafZ45Gwdc5kqaQIf/H7qdZ5tNruRJdbANyx1KN93JOwDa0LIKNF/CYbXymksop9J9JZTbT7JVTSg=
Received: by 10.82.161.19 with SMTP id j19mr3601550bue.29.1203091060314;
        Fri, 15 Feb 2008 07:57:40 -0800 (PST)
Received: by 10.82.151.7 with HTTP; Fri, 15 Feb 2008 07:57:40 -0800 (PST)
Message-ID: <359a92830802150757x6be29b75v1f6dfdeeb5a18a69@mail.gmail.com>
Date: Fri, 15 Feb 2008 10:57:40 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Design questions
In-Reply-To: <1C85AF69E3BD41EFAF5427E8E5F33A45@msrvcn04>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_5016_17698840.1203091060290"
References: <20080109213932.229980@gmx.net>
	 <359a92830801091449x5f11d031v4b20cfef23f1d579@mail.gmail.com>
	 <FA7F479DF26B4AC2B32EF68EE9311B18@msrvcn04>
	 <359a92830802141601t1cd4d753i82f1ea13813d191@mail.gmail.com>
	 <Pine.LNX.4.62.0802142256530.25935@radix.cryptio.net>
	 <63CA4C8A677F41FBA739CE4182B61F77@msrvcn04>
	 <1C85AF69E3BD41EFAF5427E8E5F33A45@msrvcn04>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_5016_17698840.1203091060290
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

You need to watch both the positionincrementgap
(which, as I remember, gets added for each new field of the
same name you add to the document). Make it 0 rather than
whatever it is currently. You may have to create a new analyzer
by subclassing your favorite analyzer and overriding the
getPositionIncrementGap (?)

Also, I'm not sure whether the term increment (see get/setPositionIncrement)
needs to be taken into account. See the SynonymAnalyzer in
Lucene in Action.

On Fri, Feb 15, 2008 at 8:37 AM, <spring@gmx.eu> wrote:

> > >   Document doc = new Document()
> > >   for (int i = 0; i < pages.length; i++) {
> > >     doc.add(new Field("text", pages[i], Field.Store.NO,
> > > Field.Index.TOKENIZED));
> > >     doc.add(new Field("text", "$$", Field.Store.NO,
> > > Field.Index.UN_TOKENIZED));
> > >   }
> >
> > UN_TOKENIZED. Nice idea!
> > I will check this out.
>
>
> Hm... when I try this, something strange happens with my offsets.
>
> When I use
> doc.add(new Field("text", pages[i] +
> "012345678901234567890123456789012345678901234567890123456789",
> Field.Store.NO, Field.Index.TOKENIZED))
> everything is fine. Offsets are as I expect.
>
> But when I use
> doc.add(new Field("text", pages[i], Field.Store.NO, Field.Index.TOKENIZED
> ))
> doc.add(new Field("text",
> "012345678901234567890123456789012345678901234567890123456789",
> Field.Store.NO, Field.Index.UN_TOKENIZED))
>
> the offsets of my terms are to high.
>
> What is the difference?
>
> Thank you.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_5016_17698840.1203091060290--

From java-user-return-32624-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 15 16:07:43 2008
Return-Path: <java-user-return-32624-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26771 invoked from network); 15 Feb 2008 16:07:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Feb 2008 16:07:43 -0000
Received: (qmail 51946 invoked by uid 500); 15 Feb 2008 16:07:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 51921 invoked by uid 500); 15 Feb 2008 16:07:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 51910 invoked by uid 99); 15 Feb 2008 16:07:30 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Feb 2008 08:07:30 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of spring@gmx.eu designates 213.165.64.20 as permitted sender)
Received: from [213.165.64.20] (HELO mail.gmx.net) (213.165.64.20)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 15 Feb 2008 16:06:58 +0000
Received: (qmail invoked by alias); 15 Feb 2008 16:07:05 -0000
Received: from e178112042.adsl.alicedsl.de (EHLO msrvcn04) [85.178.112.42]
  by mail.gmx.net (mp018) with SMTP; 15 Feb 2008 17:07:05 +0100
X-Authenticated: #2635966
X-Provags-ID: V01U2FsdGVkX1+gsJ0lXNOgeJaHK+R7q64+oJde7UZaA7nrSW6Yzr
	peLAjMotXdw1YL
From: <spring@gmx.eu>
To: <java-user@lucene.apache.org>
References: <20080109213932.229980@gmx.net> <359a92830801091449x5f11d031v4b20cfef23f1d579@mail.gmail.com> <FA7F479DF26B4AC2B32EF68EE9311B18@msrvcn04> <359a92830802141601t1cd4d753i82f1ea13813d191@mail.gmail.com> <Pine.LNX.4.62.0802142256530.25935@radix.cryptio.net> <63CA4C8A677F41FBA739CE4182B61F77@msrvcn04> <1C85AF69E3BD41EFAF5427E8E5F33A45@msrvcn04> <359a92830802150757x6be29b75v1f6dfdeeb5a18a69@mail.gmail.com>
Subject: RE: Design questions
Date: Fri, 15 Feb 2008 17:07:10 +0100
Message-ID: <B70DAA43A06A40DDBA0C3E5623E4F2E3@msrvcn04>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
In-Reply-To: <359a92830802150757x6be29b75v1f6dfdeeb5a18a69@mail.gmail.com>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.3790.4133
Thread-Index: Achv65SIfU4OsCGvQLWOt1mHjEuIdgAAKXSg
X-Y-GMX-Trusted: 0
X-Virus-Checked: Checked by ClamAV on apache.org

> You need to watch both the positionincrementgap
> (which, as I remember, gets added for each new field of the
> same name you add to the document). Make it 0 rather than
> whatever it is currently. You may have to create a new analyzer
> by subclassing your favorite analyzer and overriding the
> getPositionIncrementGap (?)

Well. I'm using GermanAnalyzer and this does not override
getPositionIncrementGap in Analyzer.
And in Analyzer getPositionIncrementGap returns 0.

> Also, I'm not sure whether the term increment (see 
> get/setPositionIncrement)
> needs to be taken into account. See the SynonymAnalyzer in
> Lucene in Action.

I cannot find the source of SynonymAnalyzer.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32625-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 15 16:13:38 2008
Return-Path: <java-user-return-32625-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 29777 invoked from network); 15 Feb 2008 16:13:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Feb 2008 16:13:37 -0000
Received: (qmail 65857 invoked by uid 500); 15 Feb 2008 16:13:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65834 invoked by uid 500); 15 Feb 2008 16:13:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65819 invoked by uid 99); 15 Feb 2008 16:13:25 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Feb 2008 08:13:25 -0800
X-ASF-Spam-Status: No, hits=-2.0 required=10.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [216.251.50.9] (HELO SFOVWL03.infosys.com) (216.251.50.9)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Feb 2008 16:12:53 +0000
Received: from indhubbhs01.ad.infosys.com ([192.168.200.81]) by SFOVWL03.infosys.com with InterScan Message Security Suite; Fri, 15 Feb 2008 08:11:02 -0800
Received: from blrkechub03.ad.infosys.com ([10.66.236.43]) by indhubbhs01.ad.infosys.com with Microsoft SMTPSVC(6.0.3790.3959);
	 Fri, 15 Feb 2008 21:42:51 +0530
Received: from BLRKECMBX06.ad.infosys.com ([10.66.236.32]) by
 blrkechub03.ad.infosys.com ([10.66.236.43]) with mapi; Fri, 15 Feb 2008
 21:42:51 +0530
From: Allahbaksh Mohammedali Asadullah <Allahbaksh_Asadullah@infosys.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Fri, 15 Feb 2008 21:42:50 +0530
Subject: Boost value corrupted "read eof exception"
Thread-Topic: Boost value corrupted "read eof exception"
Thread-Index: Achv7ZxeVFyeNyJ4SpmEN+b7q3FCsg==
Message-ID: <68959F25CDEBCB4F917D5A253291D73E07CDAC3CA4@BLRKECMBX06.ad.infosys.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: multipart/alternative;
	boundary="_000_68959F25CDEBCB4F917D5A253291D73E07CDAC3CA4BLRKECMBX06ad_"
MIME-Version: 1.0
X-OriginalArrivalTime: 15 Feb 2008 16:12:51.0612 (UTC) FILETIME=[9D3EA5C0:01C86FED]
X-Virus-Checked: Checked by ClamAV on apache.org

--_000_68959F25CDEBCB4F917D5A253291D73E07CDAC3CA4BLRKECMBX06ad_
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable


Hi,
I am getting read past eof  exception when I am adding Document. The things=
 works fine but while I read the Boost value I get it as default value i.e=
 1.0. I tried using RAMDirectory then also I am getting the same error.
Can someone throw some light on this.

Warm Regards,
Allahbaksh





**************** CAUTION - Disclaimer *****************
This e-mail contains PRIVILEGED AND CONFIDENTIAL INFORMATION intended=
 solely for the use of the addressee(s). If you are not the intended=
 recipient, please notify the sender by e-mail and delete the original=
 message. Further, you are not to copy, disclose, or distribute this e-mail=
 or its contents to any other person and any such actions are unlawful.=
 This e-mail may contain viruses. Infosys has taken every reasonable=
 precaution to minimize this risk, but is not liable for any damage you may=
 sustain as a result of any virus in this e-mail. You should carry out your=
 own virus checks before opening the e-mail or attachment. Infosys reserves=
 the right to monitor and review the content of all messages sent to or=
 from this e-mail address. Messages sent to or from this e-mail address may=
 be stored on the Infosys e-mail system.
***INFOSYS******** End of Disclaimer ********INFOSYS***
--_000_68959F25CDEBCB4F917D5A253291D73E07CDAC3CA4BLRKECMBX06ad_--


From java-user-return-32626-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 15 16:17:33 2008
Return-Path: <java-user-return-32626-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33247 invoked from network); 15 Feb 2008 16:17:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Feb 2008 16:17:32 -0000
Received: (qmail 70461 invoked by uid 500); 15 Feb 2008 16:17:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70424 invoked by uid 500); 15 Feb 2008 16:17:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70408 invoked by uid 99); 15 Feb 2008 16:17:20 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Feb 2008 08:17:20 -0800
X-ASF-Spam-Status: No, hits=3.7 required=10.0
	tests=DNS_FROM_OPENWHOIS,FORGED_HOTMAIL_RCVD2,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Feb 2008 16:16:34 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1JQ3F9-0008Ig-4E
	for java-user@lucene.apache.org; Fri, 15 Feb 2008 08:16:55 -0800
Message-ID: <15502657.post@talk.nabble.com>
Date: Fri, 15 Feb 2008 08:16:55 -0800 (PST)
From: lmctndi <tn_dinh@hotmail.com>
To: java-user@lucene.apache.org
Subject: Searching for multiple criteria (accross 2 tables)
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: tn_dinh@hotmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hi all,

[ Sorry for the cryptic title but I can't think of a better one]

I am trying to integrate Lucene as a search engine for my database and would
appreciate some help on a problem.

First, some info about the development platform, I am developing on Windows
using Hibernate for DB transactions (HSQL) with MySQL as a DB server and am
using Hibernate search (which in turn uses Lucene) to perform searches.  

A typical database for the data would be something like this:

Id	Fname	 Lname	Age	Country
----------------------------------------
1	John	Smith	30	USA
2	John	Doe	20	France
3	Jane	Doe	40	USA

Thus, each row represents one person and each column has data related to
this person.  If I want to search for a "John" living in the "USA", it's a
straight forward "+Fname:John +Country:USA"

However, my database is implemented differently and I have very little
flexibility to change its implementation so I have to work with what is
there.  Here's a sample of the database:

Data Table
Id	Name		Value
--------------------------------
1	Fname		John
1	Lname		Smith
1	Age		30
1	Country		USA
2	Fname		John
2	Lname		Doe
2	Age		20
2	Country		France
3	Fname		Jane
3	Lname		Doe
3	Age		40
3	Country		USA

Now, all rows in Data Table with the same Id represent one IdCard and each
row represents a name-value pair representing the data of each IdCard 

IdCard Table
Id	SIN		
-------------------------
1	111-111-111
2	222-222-222
3	333-333-333

With this, the simple search above becomes quite complex. Since I have to
work with this current database schema, how do I go about querying for a
"John" living in the "USA" and getting the "IdCard" for such a query?

I tried various methods without success

1. Name-Value (AND) search --> "+Name:Fname +Value:John"  will return 2 hits
(John Doe and John Smith)
2. Double Criteria search --> "+Value:John +Value:USA" won't work because
"value" cannot match 2 different terms
3. "OR" search --> "Value:John Value:USA" will return 4 hits,  2 for John (1
for John Doe and 1 for John Smith) and 2 for USA (1 for John Smith and 1 for
Jane Doe)
4. BooleanQuery and QueryFilters can't help because it basically the same as
a boolean search (with caching and performance enhancements)

I simply need to search the Data Table for various criteria and return the
corresponding IdCard object.

A simple solution can be an equivalent to the SQL "Where" clause.  I can
then do a search on value=John and value=USA where both IDs are the same.
This would then return all the Johns who live n the USA with matching Ids
only.  I can then use this Id to look up the IdCard table to obtain the card
for that person.  Does Lucene supprt such a feature?

If it is of any help, I can make minor changes to the DB schema (like adding
a row for control purposes, etc.) but I cannot rewrite it totally.

Any help/suggestion is greatly appreciated.
Thanks.
-- 
View this message in context: http://www.nabble.com/Searching-for-multiple-criteria-%28accross-2-tables%29-tp15502657p15502657.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32627-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 15 16:26:49 2008
Return-Path: <java-user-return-32627-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36867 invoked from network); 15 Feb 2008 16:26:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Feb 2008 16:26:49 -0000
Received: (qmail 82087 invoked by uid 500); 15 Feb 2008 16:26:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82062 invoked by uid 500); 15 Feb 2008 16:26:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82051 invoked by uid 99); 15 Feb 2008 16:26:36 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Feb 2008 08:26:36 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [66.249.82.236] (HELO wx-out-0506.google.com) (66.249.82.236)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Feb 2008 16:26:03 +0000
Received: by wx-out-0506.google.com with SMTP id i28so730918wxd.20
        for <java-user@lucene.apache.org>; Fri, 15 Feb 2008 08:26:11 -0800 (PST)
Received: by 10.70.76.18 with SMTP id y18mr1840026wxa.44.1203092771076;
        Fri, 15 Feb 2008 08:26:11 -0800 (PST)
Received: from ?10.17.4.4? ( [71.174.108.74])
        by mx.google.com with ESMTPS id h18sm4277980wxd.18.2008.02.15.08.26.09
        (version=TLSv1/SSLv3 cipher=OTHER);
        Fri, 15 Feb 2008 08:26:10 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v753)
In-Reply-To: <68959F25CDEBCB4F917D5A253291D73E07CDAC3CA4@BLRKECMBX06.ad.infosys.com>
References: <68959F25CDEBCB4F917D5A253291D73E07CDAC3CA4@BLRKECMBX06.ad.infosys.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <3BEC6DEF-2E12-40B2-A53C-1F4D9CF13CCD@mikemccandless.com>
Content-Transfer-Encoding: 7bit
From: Michael McCandless <lucene@mikemccandless.com>
Subject: Re: Boost value corrupted "read eof exception"
Date: Fri, 15 Feb 2008 11:26:59 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.753)
X-Virus-Checked: Checked by ClamAV on apache.org


Which version of Lucene are you using?

Can you post the full stack trace for the exception you're hitting?

Mike

Allahbaksh Mohammedali Asadullah wrote:

>
> Hi,
> I am getting read past eof  exception when I am adding Document.  
> The things works fine but while I read the Boost value I get it as  
> default value i.e 1.0. I tried using RAMDirectory then also I am  
> getting the same error.
> Can someone throw some light on this.
>
> Warm Regards,
> Allahbaksh
>
>
>
>
>
> **************** CAUTION - Disclaimer *****************
> This e-mail contains PRIVILEGED AND CONFIDENTIAL INFORMATION  
> intended solely for the use of the addressee(s). If you are not the  
> intended recipient, please notify the sender by e-mail and delete  
> the original message. Further, you are not to copy, disclose, or  
> distribute this e-mail or its contents to any other person and any  
> such actions are unlawful. This e-mail may contain viruses. Infosys  
> has taken every reasonable precaution to minimize this risk, but is  
> not liable for any damage you may sustain as a result of any virus  
> in this e-mail. You should carry out your own virus checks before  
> opening the e-mail or attachment. Infosys reserves the right to  
> monitor and review the content of all messages sent to or from this  
> e-mail address. Messages sent to or from this e-mail address may be  
> stored on the Infosys e-mail system.
> ***INFOSYS******** End of Disclaimer ********INFOSYS***


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32628-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 15 16:54:11 2008
Return-Path: <java-user-return-32628-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56278 invoked from network); 15 Feb 2008 16:54:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Feb 2008 16:54:11 -0000
Received: (qmail 41640 invoked by uid 500); 15 Feb 2008 16:53:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41604 invoked by uid 500); 15 Feb 2008 16:53:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41593 invoked by uid 99); 15 Feb 2008 16:53:57 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Feb 2008 08:53:57 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [220.227.179.21] (HELO Kecgate03.infosys.com) (220.227.179.21)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Feb 2008 16:53:26 +0000
Received: from indhubbhs01.ad.infosys.com ([192.168.200.81]) by Kecgate03.infosys.com with InterScan Message Security Suite; Fri, 15 Feb 2008 22:25:00 +0530
Received: from blrkechub03.ad.infosys.com ([10.66.236.43]) by indhubbhs01.ad.infosys.com with Microsoft SMTPSVC(6.0.3790.3959);
	 Fri, 15 Feb 2008 22:23:31 +0530
Received: from BLRKECMBX06.ad.infosys.com ([10.66.236.32]) by
 blrkechub03.ad.infosys.com ([10.66.236.43]) with mapi; Fri, 15 Feb 2008
 22:23:31 +0530
From: Allahbaksh Mohammedali Asadullah <Allahbaksh_Asadullah@infosys.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Fri, 15 Feb 2008 22:23:29 +0530
Subject: Boost value corrupted "read eof exception"
Thread-Topic: Boost value corrupted "read eof exception"
Thread-Index: Achv75JGFWU28HBqR1WDg578z24b8QAAA9sgAADmgyA=
Message-ID: <68959F25CDEBCB4F917D5A253291D73E07CDAC3CAD@BLRKECMBX06.ad.infosys.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0
X-OriginalArrivalTime: 15 Feb 2008 16:53:31.0894 (UTC) FILETIME=[4BC42160:01C86FF3]
X-Virus-Checked: Checked by ClamAV on apache.org


Hi,
I am using lucene 2.3. The exception is properly handled when I run the pro=
gram by lucene but when I debug it it hit the exception at addDocuement.
Regards,
Allahbaksh



import java.io.IOException;

import java.io.StringReader;



import org.apache.lucene.search.Hits;

import org.apache.lucene.search.Query;

import org.apache.lucene.document.Field;

import org.apache.lucene.search.Searcher;

import org.apache.lucene.index.IndexWriter;

import org.apache.lucene.document.Document;

import org.apache.lucene.store.FSDirectory;

import org.apache.lucene.store.RAMDirectory;

import org.apache.lucene.search.IndexSearcher;

import org.apache.lucene.queryParser.QueryParser;

import org.apache.lucene.queryParser.ParseException;

import org.apache.lucene.analysis.StopAnalyzer;

import org.apache.lucene.analysis.standard.StandardAnalyzer;



public class InMemoryExample {



    public static void main(String[] args) throws IOException {

        // Construct a RAMDirectory to hold the in-memory representation

        // of the index.

        RAMDirectory idx =3D new RAMDirectory();

        FSDirectory fs =3DFSDirectory.getDirectory("Z:\\lucene_index");

        //idx.createOutput("d:/idx");

        try {

            // Make an writer to create the index

            IndexWriter writer =3D

                new IndexWriter(fs,  true,new StandardAnalyzer());



            // Add some Document objects containing quotes

            writer.addDocument(createDocument("Theodore Roosevelt",

            //    "It behooves every man to remember that the work of the "=
 +

              //  "critic, is of altogether secondary importance, and that,=
 " +

              //"in the end, progress is accomplished by the man who does "=
 +

                "things."));

            writer.addDocument(createDocument("Friedrich Hayek",

//                "The case for individual freedom rests largely on the " +





                        //"recognition of the inevitable and universal igno=
rance " +

                //"of all of us concerning a great many of the factors on "=
 +

                "which the achievements of our ends and welfare depend."),n=
ew StandardAnalyzer());

            writer.addDocument(createDocument("Ayn Rand",

                //"There is nothing to take a man's freedom away from " +

                //"him, save other men. To be free, a man must be free " +

                "of his brothers."));

            writer.addDocument(createDocument("Mohandas Gandhi",

                //"Freedom is not worth having if it does not connote " +

                "freedom to err."));



            // Optimize and close the writer to finish building the index

           // writer.optimize();

            writer.close();



            // Build an IndexSearcher using the in-memory index

            Searcher searcher =3D new IndexSearcher(fs);



            // Run some queries

            search(searcher, "freedom");

            search(searcher, "free");

            search(searcher, "progress or achievements");



            searcher.close();

        }

        catch(IOException ioe) {

            // In this example we aren't really doing an I/O, so this

            // exception should never actually be thrown.

            ioe.printStackTrace();

        }

        catch(ParseException pe) {

            pe.printStackTrace();

        }

    }    private static Document createDocument(String title, String conten=
t) {

        Document doc =3D new Document();



        // Add the title as an unindexed field...

        Field f1 =3D new Field("title",title, Field.Store.YES,Field.Index.T=
OKENIZED);

        float temp =3D (float)Math.random();



        System.out.print("Title of document is "+title +" Field 1 Boost val=
ue "+temp);

        f1.setBoost(temp);

        doc.add(f1);



        // ...and the content as an indexed field. Note that indexed

        // Text fields are constructed using a Reader. Lucene can read

        // and index very large chunks of text, without storing the

        // entire content verbatim in the index. In this example we

        // can just wrap the content string in a StringReader.



        temp =3D(float)Math.random();

        Field f2 =3Dnew Field("content",content,Field.Store.YES,Field.Index=
.TOKENIZED);

        f2.setBoost(temp);

        doc.add(f2);

        System.out.println(" Field 2 Boost value is " +temp);

        return doc;

    }

}


Allahbaksh Mohammedali Asadullah,
Software Engineering & Technology Labs,
Infosys Technolgies Limited, Electronics City,
Hosur Road, Bangalore 560 100, India.
*Board: +91-80-28520261 | Extn: 53915 | Direct: 41173915.
Fax: +91-80-28520362 | Mobile: +91-9845505322.
http://setlabs/slim/
http://allahbaksh.blogspot.com

-----Original Message-----
From: Michael McCandless [mailto:lucene@mikemccandless.com]
Sent: Friday, February 15, 2008 9:57 PM
To: java-user@lucene.apache.org
Subject: Re: Boost value corrupted "read eof exception"


Which version of Lucene are you using?

Can you post the full stack trace for the exception you're hitting?

Mike

Allahbaksh Mohammedali Asadullah wrote:

>
> Hi,
> I am getting read past eof  exception when I am adding Document.
> The things works fine but while I read the Boost value I get it as
> default value i.e 1.0. I tried using RAMDirectory then also I am
> getting the same error.
> Can someone throw some light on this.
>
> Warm Regards,
> Allahbaksh
>
>
>
>
>
> **************** CAUTION - Disclaimer *****************
> This e-mail contains PRIVILEGED AND CONFIDENTIAL INFORMATION
> intended solely for the use of the addressee(s). If you are not the
> intended recipient, please notify the sender by e-mail and delete
> the original message. Further, you are not to copy, disclose, or
> distribute this e-mail or its contents to any other person and any
> such actions are unlawful. This e-mail may contain viruses. Infosys
> has taken every reasonable precaution to minimize this risk, but is
> not liable for any damage you may sustain as a result of any virus
> in this e-mail. You should carry out your own virus checks before
> opening the e-mail or attachment. Infosys reserves the right to
> monitor and review the content of all messages sent to or from this
> e-mail address. Messages sent to or from this e-mail address may be
> stored on the Infosys e-mail system.
> ***INFOSYS******** End of Disclaimer ********INFOSYS***


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32629-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 15 17:03:52 2008
Return-Path: <java-user-return-32629-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62019 invoked from network); 15 Feb 2008 17:03:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Feb 2008 17:03:52 -0000
Received: (qmail 72656 invoked by uid 500); 15 Feb 2008 17:03:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72622 invoked by uid 500); 15 Feb 2008 17:03:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72611 invoked by uid 99); 15 Feb 2008 17:03:29 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Feb 2008 09:03:29 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [72.14.204.234] (HELO qb-out-0506.google.com) (72.14.204.234)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Feb 2008 17:02:56 +0000
Received: by qb-out-0506.google.com with SMTP id o21so46775qba.9
        for <java-user@lucene.apache.org>; Fri, 15 Feb 2008 09:03:03 -0800 (PST)
Received: by 10.141.79.12 with SMTP id g12mr2053063rvl.126.1203094982039;
        Fri, 15 Feb 2008 09:03:02 -0800 (PST)
Received: from ?10.17.4.4? ( [71.174.108.74])
        by mx.google.com with ESMTPS id 34sm6383363wra.23.2008.02.15.09.03.01
        (version=TLSv1/SSLv3 cipher=OTHER);
        Fri, 15 Feb 2008 09:03:01 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v753)
In-Reply-To: <68959F25CDEBCB4F917D5A253291D73E07CDAC3CAD@BLRKECMBX06.ad.infosys.com>
References: <68959F25CDEBCB4F917D5A253291D73E07CDAC3CAD@BLRKECMBX06.ad.infosys.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <6B028357-D045-4387-B1E5-78063A882054@mikemccandless.com>
Content-Transfer-Encoding: 7bit
From: Michael McCandless <lucene@mikemccandless.com>
Subject: Re: Boost value corrupted "read eof exception"
Date: Fri, 15 Feb 2008 12:03:51 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.753)
X-Virus-Checked: Checked by ClamAV on apache.org


I had to comment out the "search" lines.

But then when I run this I don't hit any exception.  Tested on Linux  
& Windows XP.

Mike

Allahbaksh Mohammedali Asadullah wrote:

>
> Hi,
> I am using lucene 2.3. The exception is properly handled when I run  
> the program by lucene but when I debug it it hit the exception at  
> addDocuement.
> Regards,
> Allahbaksh
>
>
>
> import java.io.IOException;
>
> import java.io.StringReader;
>
>
>
> import org.apache.lucene.search.Hits;
>
> import org.apache.lucene.search.Query;
>
> import org.apache.lucene.document.Field;
>
> import org.apache.lucene.search.Searcher;
>
> import org.apache.lucene.index.IndexWriter;
>
> import org.apache.lucene.document.Document;
>
> import org.apache.lucene.store.FSDirectory;
>
> import org.apache.lucene.store.RAMDirectory;
>
> import org.apache.lucene.search.IndexSearcher;
>
> import org.apache.lucene.queryParser.QueryParser;
>
> import org.apache.lucene.queryParser.ParseException;
>
> import org.apache.lucene.analysis.StopAnalyzer;
>
> import org.apache.lucene.analysis.standard.StandardAnalyzer;
>
>
>
> public class InMemoryExample {
>
>
>
>     public static void main(String[] args) throws IOException {
>
>         // Construct a RAMDirectory to hold the in-memory  
> representation
>
>         // of the index.
>
>         RAMDirectory idx = new RAMDirectory();
>
>         FSDirectory fs =FSDirectory.getDirectory("Z:\\lucene_index");
>
>         //idx.createOutput("d:/idx");
>
>         try {
>
>             // Make an writer to create the index
>
>             IndexWriter writer =
>
>                 new IndexWriter(fs,  true,new StandardAnalyzer());
>
>
>
>             // Add some Document objects containing quotes
>
>             writer.addDocument(createDocument("Theodore Roosevelt",
>
>             //    "It behooves every man to remember that the work  
> of the " +
>
>               //  "critic, is of altogether secondary importance,  
> and that, " +
>
>               //"in the end, progress is accomplished by the man  
> who does " +
>
>                 "things."));
>
>             writer.addDocument(createDocument("Friedrich Hayek",
>
> //                "The case for individual freedom rests largely on  
> the " +
>
>
>
>
>
>                         //"recognition of the inevitable and  
> universal ignorance " +
>
>                 //"of all of us concerning a great many of the  
> factors on " +
>
>                 "which the achievements of our ends and welfare  
> depend."),new StandardAnalyzer());
>
>             writer.addDocument(createDocument("Ayn Rand",
>
>                 //"There is nothing to take a man's freedom away  
> from " +
>
>                 //"him, save other men. To be free, a man must be  
> free " +
>
>                 "of his brothers."));
>
>             writer.addDocument(createDocument("Mohandas Gandhi",
>
>                 //"Freedom is not worth having if it does not  
> connote " +
>
>                 "freedom to err."));
>
>
>
>             // Optimize and close the writer to finish building the  
> index
>
>            // writer.optimize();
>
>             writer.close();
>
>
>
>             // Build an IndexSearcher using the in-memory index
>
>             Searcher searcher = new IndexSearcher(fs);
>
>
>
>             // Run some queries
>
>             search(searcher, "freedom");
>
>             search(searcher, "free");
>
>             search(searcher, "progress or achievements");
>
>
>
>             searcher.close();
>
>         }
>
>         catch(IOException ioe) {
>
>             // In this example we aren't really doing an I/O, so this
>
>             // exception should never actually be thrown.
>
>             ioe.printStackTrace();
>
>         }
>
>         catch(ParseException pe) {
>
>             pe.printStackTrace();
>
>         }
>
>     }    private static Document createDocument(String title,  
> String content) {
>
>         Document doc = new Document();
>
>
>
>         // Add the title as an unindexed field...
>
>         Field f1 = new Field("title",title,  
> Field.Store.YES,Field.Index.TOKENIZED);
>
>         float temp = (float)Math.random();
>
>
>
>         System.out.print("Title of document is "+title +" Field 1  
> Boost value "+temp);
>
>         f1.setBoost(temp);
>
>         doc.add(f1);
>
>
>
>         // ...and the content as an indexed field. Note that indexed
>
>         // Text fields are constructed using a Reader. Lucene can read
>
>         // and index very large chunks of text, without storing the
>
>         // entire content verbatim in the index. In this example we
>
>         // can just wrap the content string in a StringReader.
>
>
>
>         temp =(float)Math.random();
>
>         Field f2 =new Field 
> ("content",content,Field.Store.YES,Field.Index.TOKENIZED);
>
>         f2.setBoost(temp);
>
>         doc.add(f2);
>
>         System.out.println(" Field 2 Boost value is " +temp);
>
>         return doc;
>
>     }
>
> }
>
>
> Allahbaksh Mohammedali Asadullah,
> Software Engineering & Technology Labs,
> Infosys Technolgies Limited, Electronics City,
> Hosur Road, Bangalore 560 100, India.
> *Board: +91-80-28520261 | Extn: 53915 | Direct: 41173915.
> Fax: +91-80-28520362 | Mobile: +91-9845505322.
> http://setlabs/slim/
> http://allahbaksh.blogspot.com
>
> -----Original Message-----
> From: Michael McCandless [mailto:lucene@mikemccandless.com]
> Sent: Friday, February 15, 2008 9:57 PM
> To: java-user@lucene.apache.org
> Subject: Re: Boost value corrupted "read eof exception"
>
>
> Which version of Lucene are you using?
>
> Can you post the full stack trace for the exception you're hitting?
>
> Mike
>
> Allahbaksh Mohammedali Asadullah wrote:
>
>>
>> Hi,
>> I am getting read past eof  exception when I am adding Document.
>> The things works fine but while I read the Boost value I get it as
>> default value i.e 1.0. I tried using RAMDirectory then also I am
>> getting the same error.
>> Can someone throw some light on this.
>>
>> Warm Regards,
>> Allahbaksh
>>
>>
>>
>>
>>
>> **************** CAUTION - Disclaimer *****************
>> This e-mail contains PRIVILEGED AND CONFIDENTIAL INFORMATION
>> intended solely for the use of the addressee(s). If you are not the
>> intended recipient, please notify the sender by e-mail and delete
>> the original message. Further, you are not to copy, disclose, or
>> distribute this e-mail or its contents to any other person and any
>> such actions are unlawful. This e-mail may contain viruses. Infosys
>> has taken every reasonable precaution to minimize this risk, but is
>> not liable for any damage you may sustain as a result of any virus
>> in this e-mail. You should carry out your own virus checks before
>> opening the e-mail or attachment. Infosys reserves the right to
>> monitor and review the content of all messages sent to or from this
>> e-mail address. Messages sent to or from this e-mail address may be
>> stored on the Infosys e-mail system.
>> ***INFOSYS******** End of Disclaimer ********INFOSYS***
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32630-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 15 17:09:54 2008
Return-Path: <java-user-return-32630-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64889 invoked from network); 15 Feb 2008 17:09:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Feb 2008 17:09:54 -0000
Received: (qmail 4537 invoked by uid 500); 15 Feb 2008 17:09:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4507 invoked by uid 500); 15 Feb 2008 17:09:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4496 invoked by uid 99); 15 Feb 2008 17:09:36 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Feb 2008 09:09:36 -0800
X-ASF-Spam-Status: No, hits=-1.0 required=10.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [61.95.162.82] (HELO kecgate06.infosys.com) (61.95.162.82)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Feb 2008 17:09:05 +0000
Received: from indhubbhs01.ad.infosys.com ([192.168.200.81]) by kecgate06.infosys.com with InterScan Message Security Suite; Fri, 15 Feb 2008 22:39:48 +0530
Received: from blrkechub02.ad.infosys.com ([10.66.236.42]) by indhubbhs01.ad.infosys.com with Microsoft SMTPSVC(6.0.3790.3959);
	 Fri, 15 Feb 2008 22:39:12 +0530
Received: from BLRKECMBX06.ad.infosys.com ([10.66.236.32]) by
 blrkechub02.ad.infosys.com ([10.66.236.42]) with mapi; Fri, 15 Feb 2008
 22:39:12 +0530
From: Allahbaksh Mohammedali Asadullah <Allahbaksh_Asadullah@infosys.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Fri, 15 Feb 2008 22:39:08 +0530
Subject: RE: Boost value corrupted "read eof exception"
Thread-Topic: Boost value corrupted "read eof exception"
Thread-Index: Achv9L8bxuMnfDTRSKSrK1wowBdlrAAAHPaw
Message-ID: <68959F25CDEBCB4F917D5A253291D73E07CDAC3CB1@BLRKECMBX06.ad.infosys.com>
References: <68959F25CDEBCB4F917D5A253291D73E07CDAC3CAD@BLRKECMBX06.ad.infosys.com>
 <6B028357-D045-4387-B1E5-78063A882054@mikemccandless.com>
In-Reply-To: <6B028357-D045-4387-B1E5-78063A882054@mikemccandless.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0
X-OriginalArrivalTime: 15 Feb 2008 17:09:12.0122 (UTC) FILETIME=[7C2F89A0:01C86FF5]
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,
Thanks for your valuable time.Could you get the same boost value what you h=
ad stored. In my case I always get boost value as 1 ie. Default value. When=
 I debug it goes through IOException though it does not show any Exception =
on the console in eclipse.

Regards,
Allahbaksh


-----Original Message-----
From: Michael McCandless [mailto:lucene@mikemccandless.com]
Sent: Friday, February 15, 2008 10:34 PM
To: java-user@lucene.apache.org
Subject: Re: Boost value corrupted "read eof exception"


I had to comment out the "search" lines.

But then when I run this I don't hit any exception.  Tested on Linux
& Windows XP.

Mike

Allahbaksh Mohammedali Asadullah wrote:

>
> Hi,
> I am using lucene 2.3. The exception is properly handled when I run
> the program by lucene but when I debug it it hit the exception at
> addDocuement.
> Regards,
> Allahbaksh
>
>
>
> import java.io.IOException;
>
> import java.io.StringReader;
>
>
>
> import org.apache.lucene.search.Hits;
>
> import org.apache.lucene.search.Query;
>
> import org.apache.lucene.document.Field;
>
> import org.apache.lucene.search.Searcher;
>
> import org.apache.lucene.index.IndexWriter;
>
> import org.apache.lucene.document.Document;
>
> import org.apache.lucene.store.FSDirectory;
>
> import org.apache.lucene.store.RAMDirectory;
>
> import org.apache.lucene.search.IndexSearcher;
>
> import org.apache.lucene.queryParser.QueryParser;
>
> import org.apache.lucene.queryParser.ParseException;
>
> import org.apache.lucene.analysis.StopAnalyzer;
>
> import org.apache.lucene.analysis.standard.StandardAnalyzer;
>
>
>
> public class InMemoryExample {
>
>
>
>     public static void main(String[] args) throws IOException {
>
>         // Construct a RAMDirectory to hold the in-memory
> representation
>
>         // of the index.
>
>         RAMDirectory idx =3D new RAMDirectory();
>
>         FSDirectory fs =3DFSDirectory.getDirectory("Z:\\lucene_index");
>
>         //idx.createOutput("d:/idx");
>
>         try {
>
>             // Make an writer to create the index
>
>             IndexWriter writer =3D
>
>                 new IndexWriter(fs,  true,new StandardAnalyzer());
>
>
>
>             // Add some Document objects containing quotes
>
>             writer.addDocument(createDocument("Theodore Roosevelt",
>
>             //    "It behooves every man to remember that the work
> of the " +
>
>               //  "critic, is of altogether secondary importance,
> and that, " +
>
>               //"in the end, progress is accomplished by the man
> who does " +
>
>                 "things."));
>
>             writer.addDocument(createDocument("Friedrich Hayek",
>
> //                "The case for individual freedom rests largely on
> the " +
>
>
>
>
>
>                         //"recognition of the inevitable and
> universal ignorance " +
>
>                 //"of all of us concerning a great many of the
> factors on " +
>
>                 "which the achievements of our ends and welfare
> depend."),new StandardAnalyzer());
>
>             writer.addDocument(createDocument("Ayn Rand",
>
>                 //"There is nothing to take a man's freedom away
> from " +
>
>                 //"him, save other men. To be free, a man must be
> free " +
>
>                 "of his brothers."));
>
>             writer.addDocument(createDocument("Mohandas Gandhi",
>
>                 //"Freedom is not worth having if it does not
> connote " +
>
>                 "freedom to err."));
>
>
>
>             // Optimize and close the writer to finish building the
> index
>
>            // writer.optimize();
>
>             writer.close();
>
>
>
>             // Build an IndexSearcher using the in-memory index
>
>             Searcher searcher =3D new IndexSearcher(fs);
>
>
>
>             // Run some queries
>
>             search(searcher, "freedom");
>
>             search(searcher, "free");
>
>             search(searcher, "progress or achievements");
>
>
>
>             searcher.close();
>
>         }
>
>         catch(IOException ioe) {
>
>             // In this example we aren't really doing an I/O, so this
>
>             // exception should never actually be thrown.
>
>             ioe.printStackTrace();
>
>         }
>
>         catch(ParseException pe) {
>
>             pe.printStackTrace();
>
>         }
>
>     }    private static Document createDocument(String title,
> String content) {
>
>         Document doc =3D new Document();
>
>
>
>         // Add the title as an unindexed field...
>
>         Field f1 =3D new Field("title",title,
> Field.Store.YES,Field.Index.TOKENIZED);
>
>         float temp =3D (float)Math.random();
>
>
>
>         System.out.print("Title of document is "+title +" Field 1
> Boost value "+temp);
>
>         f1.setBoost(temp);
>
>         doc.add(f1);
>
>
>
>         // ...and the content as an indexed field. Note that indexed
>
>         // Text fields are constructed using a Reader. Lucene can read
>
>         // and index very large chunks of text, without storing the
>
>         // entire content verbatim in the index. In this example we
>
>         // can just wrap the content string in a StringReader.
>
>
>
>         temp =3D(float)Math.random();
>
>         Field f2 =3Dnew Field
> ("content",content,Field.Store.YES,Field.Index.TOKENIZED);
>
>         f2.setBoost(temp);
>
>         doc.add(f2);
>
>         System.out.println(" Field 2 Boost value is " +temp);
>
>         return doc;
>
>     }
>
> }
>
>
> Allahbaksh Mohammedali Asadullah,
> Software Engineering & Technology Labs,
> Infosys Technolgies Limited, Electronics City,
> Hosur Road, Bangalore 560 100, India.
> *Board: +91-80-28520261 | Extn: 53915 | Direct: 41173915.
> Fax: +91-80-28520362 | Mobile: +91-9845505322.
> http://setlabs/slim/
> http://allahbaksh.blogspot.com
>
> -----Original Message-----
> From: Michael McCandless [mailto:lucene@mikemccandless.com]
> Sent: Friday, February 15, 2008 9:57 PM
> To: java-user@lucene.apache.org
> Subject: Re: Boost value corrupted "read eof exception"
>
>
> Which version of Lucene are you using?
>
> Can you post the full stack trace for the exception you're hitting?
>
> Mike
>
> Allahbaksh Mohammedali Asadullah wrote:
>
>>
>> Hi,
>> I am getting read past eof  exception when I am adding Document.
>> The things works fine but while I read the Boost value I get it as
>> default value i.e 1.0. I tried using RAMDirectory then also I am
>> getting the same error.
>> Can someone throw some light on this.
>>
>> Warm Regards,
>> Allahbaksh
>>
>>
>>
>>
>>
>> **************** CAUTION - Disclaimer *****************
>> This e-mail contains PRIVILEGED AND CONFIDENTIAL INFORMATION
>> intended solely for the use of the addressee(s). If you are not the
>> intended recipient, please notify the sender by e-mail and delete
>> the original message. Further, you are not to copy, disclose, or
>> distribute this e-mail or its contents to any other person and any
>> such actions are unlawful. This e-mail may contain viruses. Infosys
>> has taken every reasonable precaution to minimize this risk, but is
>> not liable for any damage you may sustain as a result of any virus
>> in this e-mail. You should carry out your own virus checks before
>> opening the e-mail or attachment. Infosys reserves the right to
>> monitor and review the content of all messages sent to or from this
>> e-mail address. Messages sent to or from this e-mail address may be
>> stored on the Infosys e-mail system.
>> ***INFOSYS******** End of Disclaimer ********INFOSYS***
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32631-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 15 17:11:05 2008
Return-Path: <java-user-return-32631-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65781 invoked from network); 15 Feb 2008 17:11:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Feb 2008 17:11:05 -0000
Received: (qmail 10494 invoked by uid 500); 15 Feb 2008 17:10:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10464 invoked by uid 500); 15 Feb 2008 17:10:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10447 invoked by uid 99); 15 Feb 2008 17:10:34 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Feb 2008 09:10:34 -0800
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of chris.lu@gmail.com designates 72.14.214.236 as permitted sender)
Received: from [72.14.214.236] (HELO hu-out-0506.google.com) (72.14.214.236)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Feb 2008 17:09:58 +0000
Received: by hu-out-0506.google.com with SMTP id 27so50781hub.15
        for <java-user@lucene.apache.org>; Fri, 15 Feb 2008 09:10:06 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        bh=2y4w4Q8gEDZivY/Fhp6JfAE31TRoRwUqO5GY3OEKmnA=;
        b=F1Gty5U0qA0FVEV9P9zeNxlJV+3fFwUK3FCddzvs226uI2kVQQV491Q3LNOSADS3ie29XMyOK9W7AjOwey96PN+Y8ln2FW+Dj0B26z9L7CF8yMVch6cFIf62/afT4I4iGy03UwH5At3+DqTjxVuUVe5p/yMaVrTh3lMVUZ74v68=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=ucHAhpydoxc2/IK74G5Lp6HwB/j90TlUODvbl60QkwJEtdEuogatPckgdH+lW3qsFwdnTp2Ur0kA1i9SPFgzaLAygFR5hlvshx0J6xZ7mc6rQGwmD7dvL3q1AWcwEXL2KV8cvQw3aLSvp0cRyNlH+oAlig9Qo7iXGm/BkTpZpoQ=
Received: by 10.78.181.13 with SMTP id d13mr3808407huf.52.1203095405784;
        Fri, 15 Feb 2008 09:10:05 -0800 (PST)
Received: by 10.78.155.15 with HTTP; Fri, 15 Feb 2008 09:10:05 -0800 (PST)
Message-ID: <6e3ae6310802150910x3d3c1c2bmed6a8b73abe11187@mail.gmail.com>
Date: Fri, 15 Feb 2008 09:10:05 -0800
From: "Chris Lu" <chris.lu@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Searching for multiple criteria (accross 2 tables)
In-Reply-To: <15502657.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <15502657.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi, lmctndi,

You can liberate yourself from this complicated schema, and use some
SQLs to select out the content and put the data into one Lucene index.

You may need to avoid Hibernate Search here for your case, which limit
you to one way of organizing Lucene indexes. I do think this is where
DBSight comes to rescue (Note: I am developing it.), where you can
quickly and easily have one or several flexible index structures,
incremental indexing, time or other value based ranking, etc.

-- 
Chris Lu
-------------------------
Instant Scalable Full-Text Search On Any Database/Application
site: http://www.dbsight.net
demo: http://search.dbsight.com
Lucene Database Search in 3 minutes:
http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_minutes
DBSight customer, a shopping comparison site, (anonymous per request)
got 2.6 Million Euro funding!


On Fri, Feb 15, 2008 at 8:16 AM, lmctndi <tn_dinh@hotmail.com> wrote:
>
>  Hi all,
>
>  [ Sorry for the cryptic title but I can't think of a better one]
>
>  I am trying to integrate Lucene as a search engine for my database and would
>  appreciate some help on a problem.
>
>  First, some info about the development platform, I am developing on Windows
>  using Hibernate for DB transactions (HSQL) with MySQL as a DB server and am
>  using Hibernate search (which in turn uses Lucene) to perform searches.
>
>  A typical database for the data would be something like this:
>
>  Id      Fname    Lname  Age     Country
>  ----------------------------------------
>  1       John    Smith   30      USA
>  2       John    Doe     20      France
>  3       Jane    Doe     40      USA
>
>  Thus, each row represents one person and each column has data related to
>  this person.  If I want to search for a "John" living in the "USA", it's a
>  straight forward "+Fname:John +Country:USA"
>
>  However, my database is implemented differently and I have very little
>  flexibility to change its implementation so I have to work with what is
>  there.  Here's a sample of the database:
>
>  Data Table
>  Id      Name            Value
>  --------------------------------
>  1       Fname           John
>  1       Lname           Smith
>  1       Age             30
>  1       Country         USA
>  2       Fname           John
>  2       Lname           Doe
>  2       Age             20
>  2       Country         France
>  3       Fname           Jane
>  3       Lname           Doe
>  3       Age             40
>  3       Country         USA
>
>  Now, all rows in Data Table with the same Id represent one IdCard and each
>  row represents a name-value pair representing the data of each IdCard
>
>  IdCard Table
>  Id      SIN
>  -------------------------
>  1       111-111-111
>  2       222-222-222
>  3       333-333-333
>
>  With this, the simple search above becomes quite complex. Since I have to
>  work with this current database schema, how do I go about querying for a
>  "John" living in the "USA" and getting the "IdCard" for such a query?
>
>  I tried various methods without success
>
>  1. Name-Value (AND) search --> "+Name:Fname +Value:John"  will return 2 hits
>  (John Doe and John Smith)
>  2. Double Criteria search --> "+Value:John +Value:USA" won't work because
>  "value" cannot match 2 different terms
>  3. "OR" search --> "Value:John Value:USA" will return 4 hits,  2 for John (1
>  for John Doe and 1 for John Smith) and 2 for USA (1 for John Smith and 1 for
>  Jane Doe)
>  4. BooleanQuery and QueryFilters can't help because it basically the same as
>  a boolean search (with caching and performance enhancements)
>
>  I simply need to search the Data Table for various criteria and return the
>  corresponding IdCard object.
>
>  A simple solution can be an equivalent to the SQL "Where" clause.  I can
>  then do a search on value=John and value=USA where both IDs are the same.
>  This would then return all the Johns who live n the USA with matching Ids
>  only.  I can then use this Id to look up the IdCard table to obtain the card
>  for that person.  Does Lucene supprt such a feature?
>
>  If it is of any help, I can make minor changes to the DB schema (like adding
>  a row for control purposes, etc.) but I cannot rewrite it totally.
>
>  Any help/suggestion is greatly appreciated.
>  Thanks.
>  --
>  View this message in context: http://www.nabble.com/Searching-for-multiple-criteria-%28accross-2-tables%29-tp15502657p15502657.html
>  Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
>  ---------------------------------------------------------------------
>  To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>  For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32632-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 15 17:56:15 2008
Return-Path: <java-user-return-32632-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82350 invoked from network); 15 Feb 2008 17:56:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Feb 2008 17:56:15 -0000
Received: (qmail 14347 invoked by uid 500); 15 Feb 2008 17:55:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14326 invoked by uid 500); 15 Feb 2008 17:55:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 14315 invoked by uid 99); 15 Feb 2008 17:55:54 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Feb 2008 09:55:54 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 72.14.214.227 as permitted sender)
Received: from [72.14.214.227] (HELO hu-out-0506.google.com) (72.14.214.227)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Feb 2008 17:55:20 +0000
Received: by hu-out-0506.google.com with SMTP id 27so74845hub.15
        for <java-user@lucene.apache.org>; Fri, 15 Feb 2008 09:55:26 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=IYWS1leIK82Io9NZa09y/gamOOVNc+LXKWgFHGZv3gk=;
        b=uRY/L5aInKyQqb/Ph4M01X24VOkT+9WOlsJVTL1L8rrCXCNPxpKDFuUWY3vd0PZA/rJTTV9iQZExQ7fx+Kt6KStsTB2nJzxjHX8so0zN0agAwiVF0TyROXoiTkg5GnrZErMxy2Yt/Joglmmqw7nNkdMh7vRM72n6l49NXZkBVpk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=IUP8S5jA2oeETrtpa3/VwDMZYsz3XHmI4Z8YbQCZOwo7yP5kqLV6Dkc1lXvfUp4n8AYztmQut1ZzLpStONTGp1pmmHZkm5ablwWbRpQee1pl53713opT5FRoJGccqE73V9L0O+iMdj5QbOJibywZx8PUUT+hEcBEV2ZggVXNmNI=
Received: by 10.82.112.3 with SMTP id k3mr5510298buc.15.1203098126516;
        Fri, 15 Feb 2008 09:55:26 -0800 (PST)
Received: by 10.82.151.7 with HTTP; Fri, 15 Feb 2008 09:55:26 -0800 (PST)
Message-ID: <359a92830802150955w77279b0dn4eea5383b0569c0e@mail.gmail.com>
Date: Fri, 15 Feb 2008 12:55:26 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Searching for multiple criteria (accross 2 tables)
In-Reply-To: <15502657.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_5524_22515505.1203098126506"
References: <15502657.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_5524_22515505.1203098126506
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

To expand a bit on Chris's first point: Take off your DB hat and put on
your search hat <G>. It sounds like you have simply moved your database
tables into Lucene and want to search across them. My rule is that
whenever you find yourself trying to make Lucene act like a DB, you
need to pause and reflect on your design.....

So, from your example, you select all the data relating to id 1 from
*all* your tables, and index that as a single document in Lucene. Very
simplistically, your document for ID 1 has the fields
Fname, Lname, Age, Country, and SIN.

Your query is now very simple,
+Fname:john +County:USA

and to get the related SIN, you iterate over your hits
and extract the SIN from each hit.

If I understand your problem, that is <G>.

In general, the strategy is to de-normalize your information
when you build your index....

Best
Erick

On Fri, Feb 15, 2008 at 11:16 AM, lmctndi <tn_dinh@hotmail.com> wrote:

>
> Hi all,
>
> [ Sorry for the cryptic title but I can't think of a better one]
>
> I am trying to integrate Lucene as a search engine for my database and
> would
> appreciate some help on a problem.
>
> First, some info about the development platform, I am developing on
> Windows
> using Hibernate for DB transactions (HSQL) with MySQL as a DB server and
> am
> using Hibernate search (which in turn uses Lucene) to perform searches.
>
> A typical database for the data would be something like this:
>
> Id      Fname    Lname  Age     Country
> ----------------------------------------
> 1       John    Smith   30      USA
> 2       John    Doe     20      France
> 3       Jane    Doe     40      USA
>
> Thus, each row represents one person and each column has data related to
> this person.  If I want to search for a "John" living in the "USA", it's a
> straight forward "+Fname:John +Country:USA"
>
> However, my database is implemented differently and I have very little
> flexibility to change its implementation so I have to work with what is
> there.  Here's a sample of the database:
>
> Data Table
> Id      Name            Value
> --------------------------------
> 1       Fname           John
> 1       Lname           Smith
> 1       Age             30
> 1       Country         USA
> 2       Fname           John
> 2       Lname           Doe
> 2       Age             20
> 2       Country         France
> 3       Fname           Jane
> 3       Lname           Doe
> 3       Age             40
> 3       Country         USA
>
> Now, all rows in Data Table with the same Id represent one IdCard and each
> row represents a name-value pair representing the data of each IdCard
>
> IdCard Table
> Id      SIN
> -------------------------
> 1       111-111-111
> 2       222-222-222
> 3       333-333-333
>
> With this, the simple search above becomes quite complex. Since I have to
> work with this current database schema, how do I go about querying for a
> "John" living in the "USA" and getting the "IdCard" for such a query?
>
> I tried various methods without success
>
> 1. Name-Value (AND) search --> "+Name:Fname +Value:John"  will return 2
> hits
> (John Doe and John Smith)
> 2. Double Criteria search --> "+Value:John +Value:USA" won't work because
> "value" cannot match 2 different terms
> 3. "OR" search --> "Value:John Value:USA" will return 4 hits,  2 for John
> (1
> for John Doe and 1 for John Smith) and 2 for USA (1 for John Smith and 1
> for
> Jane Doe)
> 4. BooleanQuery and QueryFilters can't help because it basically the same
> as
> a boolean search (with caching and performance enhancements)
>
> I simply need to search the Data Table for various criteria and return the
> corresponding IdCard object.
>
> A simple solution can be an equivalent to the SQL "Where" clause.  I can
> then do a search on value=John and value=USA where both IDs are the same.
> This would then return all the Johns who live n the USA with matching Ids
> only.  I can then use this Id to look up the IdCard table to obtain the
> card
> for that person.  Does Lucene supprt such a feature?
>
> If it is of any help, I can make minor changes to the DB schema (like
> adding
> a row for control purposes, etc.) but I cannot rewrite it totally.
>
> Any help/suggestion is greatly appreciated.
> Thanks.
> --
> View this message in context:
> http://www.nabble.com/Searching-for-multiple-criteria-%28accross-2-tables%29-tp15502657p15502657.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_5524_22515505.1203098126506--

From java-user-return-32633-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 15 19:25:25 2008
Return-Path: <java-user-return-32633-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19889 invoked from network); 15 Feb 2008 19:25:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Feb 2008 19:25:25 -0000
Received: (qmail 34282 invoked by uid 500); 15 Feb 2008 19:25:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34263 invoked by uid 500); 15 Feb 2008 19:25:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34238 invoked by uid 99); 15 Feb 2008 19:25:11 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Feb 2008 11:25:11 -0800
X-ASF-Spam-Status: No, hits=3.7 required=10.0
	tests=DNS_FROM_OPENWHOIS,FORGED_HOTMAIL_RCVD2,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Feb 2008 19:24:39 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1JQ6Ax-0007nq-DI
	for java-user@lucene.apache.org; Fri, 15 Feb 2008 11:24:47 -0800
Message-ID: <15508362.post@talk.nabble.com>
Date: Fri, 15 Feb 2008 11:24:47 -0800 (PST)
From: lmctndi <tn_dinh@hotmail.com>
To: java-user@lucene.apache.org
Subject: Re: Searching for multiple criteria (accross 2 tables)
In-Reply-To: <359a92830802150955w77279b0dn4eea5383b0569c0e@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: tn_dinh@hotmail.com
References: <15502657.post@talk.nabble.com> <359a92830802150955w77279b0dn4eea5383b0569c0e@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Thanks for your reply.

Your ideas prompts more questions:

I understand what you are saying but don't know how to implement it.  How do
you go about joining all rows of the tables belonging to one person and to
index them so that I can actually use 
"+Fname:john +County:USA" as a query?


Erick Erickson wrote:
> 
> To expand a bit on Chris's first point: Take off your DB hat and put on
> your search hat <G>. It sounds like you have simply moved your database
> tables into Lucene and want to search across them. My rule is that
> whenever you find yourself trying to make Lucene act like a DB, you
> need to pause and reflect on your design.....
> 
> So, from your example, you select all the data relating to id 1 from
> *all* your tables, and index that as a single document in Lucene. Very
> simplistically, your document for ID 1 has the fields
> Fname, Lname, Age, Country, and SIN.
> 
> Your query is now very simple,
> +Fname:john +County:USA
> 
> and to get the related SIN, you iterate over your hits
> and extract the SIN from each hit.
> 
> If I understand your problem, that is <G>.
> 
> In general, the strategy is to de-normalize your information
> when you build your index....
> 
> Best
> Erick
> 

-- 
View this message in context: http://www.nabble.com/Searching-for-multiple-criteria-%28accross-2-tables%29-tp15502657p15508362.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32634-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 15 19:28:11 2008
Return-Path: <java-user-return-32634-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20630 invoked from network); 15 Feb 2008 19:28:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Feb 2008 19:28:11 -0000
Received: (qmail 57489 invoked by uid 500); 15 Feb 2008 19:27:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57462 invoked by uid 500); 15 Feb 2008 19:27:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57448 invoked by uid 99); 15 Feb 2008 19:27:54 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Feb 2008 11:27:54 -0800
X-ASF-Spam-Status: No, hits=3.7 required=10.0
	tests=DNS_FROM_OPENWHOIS,FORGED_HOTMAIL_RCVD2,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Feb 2008 19:27:22 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1JQ6Da-0007vU-AO
	for java-user@lucene.apache.org; Fri, 15 Feb 2008 11:27:30 -0800
Message-ID: <15508362.post@talk.nabble.com>
Date: Fri, 15 Feb 2008 11:27:30 -0800 (PST)
From: lmctndi <tn_dinh@hotmail.com>
To: java-user@lucene.apache.org
Subject: Re: Searching for multiple criteria (accross 2 tables)
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: tn_dinh@hotmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


Thanks for your reply.

Your idea prompts more questions:

I understand what you are saying but don't know how to implement it.  How do
you go about joining all rows of all the tables belonging to one person and
to index them so that I can actually use 
"+Fname:john +County:USA" as a query?


Erick Erickson wrote:
> 
> To expand a bit on Chris's first point: Take off your DB hat and put on
> your search hat <G>. It sounds like you have simply moved your database
> tables into Lucene and want to search across them. My rule is that
> whenever you find yourself trying to make Lucene act like a DB, you
> need to pause and reflect on your design.....
> 
> So, from your example, you select all the data relating to id 1 from
> *all* your tables, and index that as a single document in Lucene. Very
> simplistically, your document for ID 1 has the fields
> Fname, Lname, Age, Country, and SIN.
> 
> Your query is now very simple,
> +Fname:john +County:USA
> 
> and to get the related SIN, you iterate over your hits
> and extract the SIN from each hit.
> 
> If I understand your problem, that is <G>.
> 
> In general, the strategy is to de-normalize your information
> when you build your index....
> 
> Best
> Erick
> 

-- 
View this message in context: http://www.nabble.com/Searching-for-multiple-criteria-%28accross-2-tables%29-tp15502657p15508362.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32635-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 15 19:43:26 2008
Return-Path: <java-user-return-32635-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 23936 invoked from network); 15 Feb 2008 19:43:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Feb 2008 19:43:25 -0000
Received: (qmail 6773 invoked by uid 500); 15 Feb 2008 19:43:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6736 invoked by uid 500); 15 Feb 2008 19:43:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6725 invoked by uid 99); 15 Feb 2008 19:43:13 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Feb 2008 11:43:13 -0800
X-ASF-Spam-Status: No, hits=3.2 required=10.0
	tests=HTML_MESSAGE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [64.233.178.246] (HELO hs-out-0708.google.com) (64.233.178.246)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Feb 2008 19:42:42 +0000
Received: by hs-out-0708.google.com with SMTP id 54so569018hsz.5
        for <java-user@lucene.apache.org>; Fri, 15 Feb 2008 11:42:48 -0800 (PST)
Received: by 10.100.242.20 with SMTP id p20mr4504231anh.22.1203104568571;
        Fri, 15 Feb 2008 11:42:48 -0800 (PST)
Received: by 10.100.154.5 with HTTP; Fri, 15 Feb 2008 11:42:48 -0800 (PST)
Message-ID: <9ac0c6aa0802151142v651688bdg689d23cab9c8afb6@mail.gmail.com>
Date: Fri, 15 Feb 2008 14:42:48 -0500
From: "Michael McCandless" <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Subject: Re: Boost value corrupted "read eof exception"
In-Reply-To: <68959F25CDEBCB4F917D5A253291D73E07CDAC3CB1@BLRKECMBX06.ad.infosys.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_3662_3057285.1203104568594"
References: <68959F25CDEBCB4F917D5A253291D73E07CDAC3CAD@BLRKECMBX06.ad.infosys.com>
	 <6B028357-D045-4387-B1E5-78063A882054@mikemccandless.com>
	 <68959F25CDEBCB4F917D5A253291D73E07CDAC3CB1@BLRKECMBX06.ad.infosys.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_3662_3057285.1203104568594
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Allahbaksh Mohammedali Asadullah <Allahbaksh_Asadullah@infosys.com> wrote:
>
> Hi,
> Thanks for your valuable time.Could you get the same boost value what you
> had stored. In my case I always get boost value as 1 ie. Default value. When
> I debug it goes through IOException though it does not show any Exception on
> the console in eclipse.


Sorry, I don't understand what the problem is with the boost.  Can you turn
this into a unit test that fails?  That would make the issue clearer.

I also don't understand the exception you are seeing with debugging.  If you
could make that exception occur in a unit test that would be great too.

Mike

------=_Part_3662_3057285.1203104568594--

From java-user-return-32636-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 15 19:58:57 2008
Return-Path: <java-user-return-32636-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 28924 invoked from network); 15 Feb 2008 19:58:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Feb 2008 19:58:56 -0000
Received: (qmail 29013 invoked by uid 500); 15 Feb 2008 19:58:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28983 invoked by uid 500); 15 Feb 2008 19:58:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28972 invoked by uid 99); 15 Feb 2008 19:58:44 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Feb 2008 11:58:44 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Feb 2008 19:58:12 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id AF27A71C2B8; Fri, 15 Feb 2008 11:58:20 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id AB48D71C265
	for <java-user@lucene.apache.org>; Fri, 15 Feb 2008 11:58:20 -0800 (PST)
Date: Fri, 15 Feb 2008 11:58:20 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Boost value corrupted "read eof exception"
In-Reply-To: <9ac0c6aa0802151142v651688bdg689d23cab9c8afb6@mail.gmail.com>
Message-ID: <Pine.LNX.4.62.0802151151360.1477@radix.cryptio.net>
References: <68959F25CDEBCB4F917D5A253291D73E07CDAC3CAD@BLRKECMBX06.ad.infosys.com>
  <6B028357-D045-4387-B1E5-78063A882054@mikemccandless.com> 
 <68959F25CDEBCB4F917D5A253291D73E07CDAC3CB1@BLRKECMBX06.ad.infosys.com>
 <9ac0c6aa0802151142v651688bdg689d23cab9c8afb6@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


Reading between the lines, I suspect two things are happening here, both 
of which seems like missunderstandings ...

1) i think the IOException seen while debugging is refering to an 
exception which is handled internally in Lucene and is not actually a 
problem -- but Allahbaksh is seeing it when stepping through his program 
with a debugger.  Unless the exception is rethrown and your code is 
catching it, you can ignore it ... there are places in the Lucene code 
where exceptions may happen because of filesystem changes and but Lucene 
can and does catch them and deal with them appropriately so you don't have 
to.

2) i believe the refrences to boost values is about trying to call 
getBoost() on a field or document after getting the document returned from 
a search.  this is not something that will ever work, please read the 
javadocs for getBoost().

...if i am wrong about my interpretation of either of these issues, please 
ignore me and clarify the issues.



: Allahbaksh Mohammedali Asadullah <Allahbaksh_Asadullah@infosys.com> wrote:
: >
: > Hi,
: > Thanks for your valuable time.Could you get the same boost value what you
: > had stored. In my case I always get boost value as 1 ie. Default value. When
: > I debug it goes through IOException though it does not show any Exception on
: > the console in eclipse.
: 
: 
: Sorry, I don't understand what the problem is with the boost.  Can you turn
: this into a unit test that fails?  That would make the issue clearer.
: 
: I also don't understand the exception you are seeing with debugging.  If you
: could make that exception occur in a unit test that would be great too.
: 
: Mike
: 



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32637-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 15 20:25:15 2008
Return-Path: <java-user-return-32637-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38531 invoked from network); 15 Feb 2008 20:25:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Feb 2008 20:25:15 -0000
Received: (qmail 74603 invoked by uid 500); 15 Feb 2008 20:25:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74566 invoked by uid 500); 15 Feb 2008 20:25:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74554 invoked by uid 99); 15 Feb 2008 20:25:02 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Feb 2008 12:25:02 -0800
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of chris.lu@gmail.com designates 72.14.214.224 as permitted sender)
Received: from [72.14.214.224] (HELO hu-out-0506.google.com) (72.14.214.224)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Feb 2008 20:24:29 +0000
Received: by hu-out-0506.google.com with SMTP id 27so140499hub.15
        for <java-user@lucene.apache.org>; Fri, 15 Feb 2008 12:24:34 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        bh=DLxN6JiaF9Lsr9MTWkVVD8Nr7pm14CMyTwGiAjcNM7A=;
        b=MYxgAx0o8+YoV3Vsg47nH9FdfEEguzNH7ZhVaTpaFMZ0I4f0p5kCiVaMHV1maasajShT35zWPHw4qHs4RoeDoECgYdjO0AiIcuAfXWriopRdaXI+whnnWHXAL+t95s16+igJ9LKODpuexSg4eoQ7aXo7pJYIXd+x3/P8SkxInKI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=um63m/e8XB7pkx1LqdKQBwQJ7T21sa9x1TrAxdb5ROQftqexghzCOfHrm28H71x4Fj8eQi6ch8/Fu+e6HWdJy/z3k/dLOAj9HtdmGrMLv5nqGHBq/Xs1e5Iqj7z33/MbCGWIkq3DgN4JFCeAwuMr5XyWuqXHSbhqG8StthbZSVQ=
Received: by 10.78.154.14 with SMTP id b14mr4255732hue.63.1203107073712;
        Fri, 15 Feb 2008 12:24:33 -0800 (PST)
Received: by 10.78.155.15 with HTTP; Fri, 15 Feb 2008 12:24:33 -0800 (PST)
Message-ID: <6e3ae6310802151224k1f545b4ct178aaedb617855e4@mail.gmail.com>
Date: Fri, 15 Feb 2008 12:24:33 -0800
From: "Chris Lu" <chris.lu@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Searching for multiple criteria (accross 2 tables)
In-Reply-To: <15508362.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <15508362.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Sorry, sent the previous draft email by mistake. Here is the correct one.

Sounds a typical SQL pivot problem.

select Id, SIN, data.*
from IdCard, (SELECT
      ID
      MAX(CASE WHEN name = 'Fname' THEN Value END) AS Fname,
      MAX(CASE WHEN name = 'Lname' THEN Value END) AS Lname,
      MAX(CASE WHEN name = 'Age' THEN Value END) AS Age,
      MAX(CASE WHEN name = 'Country' THEN Value END) AS Country
FROM
       DATA_Table
GROUP BY
      ID
) data

To speed things up, you can split the SQLs into 2 for better performance.

This is how DBSight does this. You can write your own SQLs, but
generally it's the same methods.


-- 
Chris Lu
-------------------------
Instant Scalable Full-Text Search On Any Database/Application
site: http://www.dbsight.net
demo: http://search.dbsight.com
Lucene Database Search in 3 minutes:
http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_minutes
DBSight customer, a shopping comparison site, (anonymous per request)
got 2.6 Million Euro funding!


On Fri, Feb 15, 2008 at 11:27 AM, lmctndi <tn_dinh@hotmail.com> wrote:
>
>  Thanks for your reply.
>
>  Your idea prompts more questions:
>
>
>  I understand what you are saying but don't know how to implement it.  How do
>  you go about joining all rows of all the tables belonging to one person and
>
>
> to index them so that I can actually use
>  "+Fname:john +County:USA" as a query?
>
>
>  Erick Erickson wrote:
>  >
>  > To expand a bit on Chris's first point: Take off your DB hat and put on
>  > your search hat <G>. It sounds like you have simply moved your database
>  > tables into Lucene and want to search across them. My rule is that
>  > whenever you find yourself trying to make Lucene act like a DB, you
>  > need to pause and reflect on your design.....
>  >
>  > So, from your example, you select all the data relating to id 1 from
>  > *all* your tables, and index that as a single document in Lucene. Very
>  > simplistically, your document for ID 1 has the fields
>  > Fname, Lname, Age, Country, and SIN.
>  >
>  > Your query is now very simple,
>  > +Fname:john +County:USA
>  >
>  > and to get the related SIN, you iterate over your hits
>  > and extract the SIN from each hit.
>  >
>  > If I understand your problem, that is <G>.
>  >
>  > In general, the strategy is to de-normalize your information
>  > when you build your index....
>  >
>  > Best
>  > Erick
>  >
>
>  --
>  View this message in context: http://www.nabble.com/Searching-for-multiple-criteria-%28accross-2-tables%29-tp15502657p15508362.html
>  Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
>  ---------------------------------------------------------------------
>  To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>  For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32638-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 15 21:31:23 2008
Return-Path: <java-user-return-32638-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64975 invoked from network); 15 Feb 2008 21:31:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Feb 2008 21:31:23 -0000
Received: (qmail 62891 invoked by uid 500); 15 Feb 2008 21:31:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62859 invoked by uid 500); 15 Feb 2008 21:31:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62840 invoked by uid 99); 15 Feb 2008 21:31:10 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Feb 2008 13:31:10 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [194.109.24.29] (HELO smtp-vbr9.xs4all.nl) (194.109.24.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Feb 2008 21:30:37 +0000
Received: from k8u.lan (porta.xs4all.nl [80.127.24.69])
	by smtp-vbr9.xs4all.nl (8.13.8/8.13.8) with ESMTP id m1FLUhqx047174
	for <java-user@lucene.apache.org>; Fri, 15 Feb 2008 22:30:44 +0100 (CET)
	(envelope-from paul.elschot@xs4all.nl)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: java-user@lucene.apache.org
Subject: Re: How to pass additional information into Similarity.scorePayload(...)
Date: Fri, 15 Feb 2008 22:30:47 +0100
User-Agent: KMail/1.9.6 (enterprise 0.20070907.709405)
References: <839ba01c0802130131x3afecdcdna3825cab69adc3a9@mail.gmail.com> <200802150832.47060.paul.elschot@xs4all.nl> <839ba01c0802150045q47a7c4f8h30cff700e584c66f@mail.gmail.com>
In-Reply-To: <839ba01c0802150045q47a7c4f8h30cff700e584c66f@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="utf-8"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200802152230.47324.paul.elschot@xs4all.nl>
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Cedric,

I think I'm beginning to get the point of the [10/5/2],
and why you called that requirement a bit strange, see below.

To use both normal position info and paragraph position info
you'll need two separate, one normal, and one for the paragraphs.

To use the normal field to determine the matches, and  the
paragraph field to determine the weightings of these matches
the TermPositions of both fields will have to be advanced
completely in sync. That is possible, but not really nice to do.
If Lucene had multiple positions for an indexed term, it
would be straightforward.
But as long as that is not the case, you'll either have to advance
the two TermPositions in sync, or use payloads with the
paragraph numbers.

Or you could relax the paragraph numbering requirement
into a positional requirement, and use the modified SpanFirstQuery.
That could be done by using an avarage paragraph length to
determine the weight at the matching position.
As this is easy to implement, I'd first implement this and try to sell
it to the users :)

At that marketing moment you might as well ask the users
what they think of matches that cross paragraph borders.
Do you already have a firm requirement for that case?

SpanNotQuery can be used to prevent matches over paragraph
borders when these are indexed as such, but I would not expect
that you would need those, given the fuzzyness of the [10/5/2].

Regards,
Paul Elschot


Op Friday 15 February 2008 09:45:58 schreef Cedric Ho:
> Hi Paul,
> 
> Do you mean the following?
> 
> e.g. to index this: "first second third <paragraphBorder> forth fifth six"
> 
> originally it would be indexed as:
> (first,0) (second,1) (third,2) (forth,3) (fifth,4) (six,5)
> 
> now it will be:
> (first,0) (second,0) (third,0) (forth,1) (fifth,1) (six,1)
> 
> Then those Query classes that depends on the positional information
> (PhraseQuery, SpanQueries) won't work then? unfortunately I'll need
> those Query classes as well.
> 
> Cedric
> 
> 
> >  For each word in the input stream make sure that the position
> >  at which it is indexed in an extra field is the same as the paragraph
> >  number. That will involve only allowing a position increment at
> >  a paragraph border during indexing.
> >  Call this extra field the paragraph field if you will.
> >
> >  Then, during search, search for a Term in paragraph field, and
> >  use the position from that field, i.e. the paragraph number
> >  to find a weight for the found term.
> >  Have a look at PhraseQuery on how to use term positions during
> >  search. It computes relative positions, but it works on the absolute
> >  positions that it gets from the index.
> >
> >  SpanFirstQuery also allows to do that, it's a bit more involved, but
> >  in the end it works from the same absolute positions from the index.
> >  The version at the jira issue will even allow to use the length of the
> >  matching spans as the absolute paragraph number, which, in turn,
> >  allows the use of a Similarity for the paragraph weights [10/5/2].
> >
> >  There is nothing special about indexed term positions; any term can
> >  be indexed at any position in a field. Lucene will take advantage of
> >  the incremental nature of positions by storing only compressed
> >  differences of positions in the index, but during search the original
> >  positions are directly available, You can do the same with payloads,
> >  but why reimplement something that is already available?
> >
> >  Payloads have better uses than positional info, for one they are
> >  great to avoid disjunctions. For example for verbs, one could
> >  index only the stem and use a payload for the actual inflected
> >  form (singular/plural, past/present, first/second/third person, etc).
> >
> >  Regards,
> >  Paul Elschot
> >
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32639-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 15 23:08:58 2008
Return-Path: <java-user-return-32639-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 2575 invoked from network); 15 Feb 2008 23:08:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Feb 2008 23:08:58 -0000
Received: (qmail 73135 invoked by uid 500); 15 Feb 2008 23:08:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73112 invoked by uid 500); 15 Feb 2008 23:08:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73101 invoked by uid 99); 15 Feb 2008 23:08:45 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Feb 2008 15:08:45 -0800
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of jake.mannix@gmail.com designates 72.14.246.248 as permitted sender)
Received: from [72.14.246.248] (HELO ag-out-0708.google.com) (72.14.246.248)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Feb 2008 23:08:11 +0000
Received: by ag-out-0708.google.com with SMTP id 23so491006agd.5
        for <java-user@lucene.apache.org>; Fri, 15 Feb 2008 15:08:19 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        bh=uxb05eyC6a+qs13AUnb8FMdzwGdy6SubLSX2Z9f7rig=;
        b=lUyT7StkiSKb7ftF2OkbMjUhWbRd4AtEvwN0vi8MPSs6rYjTwRwRk+HdhsSEssxLkvd/vW7vEn8fHj6h9zzNl78QigotmnX0iRvABFwx6T26b1sG93tcUbFZWmPb+fz6vLFLXhOUPDMDfN6HuLVJxtEyzd8K517Y23839cmwKcQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=KDi7/Q/TXOFGlKLmOJ5nyzMT2VKlecjZhsLYNLUkD3ouNCQwCcVnEgNM6MtSgb4GCeXNdoGZYco/tceTE7iknTkB6ZGafudonq/ObMzGS4QR6GzdxJNsopSfSWAVSl+ssbG9TeN2WBuLAMY4OFfozy4tB28jCX+d9j+xTA4DOYQ=
Received: by 10.100.41.16 with SMTP id o16mr4838099ano.79.1203116899425;
        Fri, 15 Feb 2008 15:08:19 -0800 (PST)
Received: by 10.100.46.17 with HTTP; Fri, 15 Feb 2008 15:08:19 -0800 (PST)
Message-ID: <4b124c310802151508r1e85b271ude4855b83d352f43@mail.gmail.com>
Date: Fri, 15 Feb 2008 15:08:19 -0800
From: "Jake Mannix" <jake.mannix@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Searching for multiple criteria (accross 2 tables)
In-Reply-To: <15502657.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <15502657.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

What the other posters are referring to is that you will have to
probably write some java code to do lucene indexing:  you can get
access to your model objects (with all their dependent data) in java.
- since you are using hibernate, this shouild be easy- then create
lucene documents from your model objects and index!   These documents
would be searchable in the way you want.

You will probably have to do some reading on how to write lucene
indexing code.


  -jake



On 2/15/08, lmctndi <tn_dinh@hotmail.com> wrote:
>
> Hi all,
>
> [ Sorry for the cryptic title but I can't think of a better one]
>
> I am trying to integrate Lucene as a search engine for my database and would
> appreciate some help on a problem.
>
> First, some info about the development platform, I am developing on Windows
> using Hibernate for DB transactions (HSQL) with MySQL as a DB server and am
> using Hibernate search (which in turn uses Lucene) to perform searches.
>
> A typical database for the data would be something like this:
>
> Id	Fname	 Lname	Age	Country
> ----------------------------------------
> 1	John	Smith	30	USA
> 2	John	Doe	20	France
> 3	Jane	Doe	40	USA
>
> Thus, each row represents one person and each column has data related to
> this person.  If I want to search for a "John" living in the "USA", it's a
> straight forward "+Fname:John +Country:USA"
>
> However, my database is implemented differently and I have very little
> flexibility to change its implementation so I have to work with what is
> there.  Here's a sample of the database:
>
> Data Table
> Id	Name		Value
> --------------------------------
> 1	Fname		John
> 1	Lname		Smith
> 1	Age		30
> 1	Country		USA
> 2	Fname		John
> 2	Lname		Doe
> 2	Age		20
> 2	Country		France
> 3	Fname		Jane
> 3	Lname		Doe
> 3	Age		40
> 3	Country		USA
>
> Now, all rows in Data Table with the same Id represent one IdCard and each
> row represents a name-value pair representing the data of each IdCard
>
> IdCard Table
> Id	SIN		
> -------------------------
> 1	111-111-111
> 2	222-222-222
> 3	333-333-333
>
> With this, the simple search above becomes quite complex. Since I have to
> work with this current database schema, how do I go about querying for a
> "John" living in the "USA" and getting the "IdCard" for such a query?
>
> I tried various methods without success
>
> 1. Name-Value (AND) search --> "+Name:Fname +Value:John"  will return 2 hits
> (John Doe and John Smith)
> 2. Double Criteria search --> "+Value:John +Value:USA" won't work because
> "value" cannot match 2 different terms
> 3. "OR" search --> "Value:John Value:USA" will return 4 hits,  2 for John (1
> for John Doe and 1 for John Smith) and 2 for USA (1 for John Smith and 1 for
> Jane Doe)
> 4. BooleanQuery and QueryFilters can't help because it basically the same as
> a boolean search (with caching and performance enhancements)
>
> I simply need to search the Data Table for various criteria and return the
> corresponding IdCard object.
>
> A simple solution can be an equivalent to the SQL "Where" clause.  I can
> then do a search on value=John and value=USA where both IDs are the same.
> This would then return all the Johns who live n the USA with matching Ids
> only.  I can then use this Id to look up the IdCard table to obtain the card
> for that person.  Does Lucene supprt such a feature?
>
> If it is of any help, I can make minor changes to the DB schema (like adding
> a row for control purposes, etc.) but I cannot rewrite it totally.
>
> Any help/suggestion is greatly appreciated.
> Thanks.
> --
> View this message in context:
> http://www.nabble.com/Searching-for-multiple-criteria-%28accross-2-tables%29-tp15502657p15502657.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

-- 
Sent from Gmail for mobile | mobile.google.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32640-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Feb 16 00:39:30 2008
Return-Path: <java-user-return-32640-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 41259 invoked from network); 16 Feb 2008 00:39:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Feb 2008 00:39:30 -0000
Received: (qmail 91116 invoked by uid 500); 16 Feb 2008 00:39:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91077 invoked by uid 500); 16 Feb 2008 00:39:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 91066 invoked by uid 99); 16 Feb 2008 00:39:17 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Feb 2008 16:39:16 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of vivextra@gmail.com designates 72.14.204.234 as permitted sender)
Received: from [72.14.204.234] (HELO qb-out-0506.google.com) (72.14.204.234)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 16 Feb 2008 00:38:45 +0000
Received: by qb-out-0506.google.com with SMTP id o21so268696qba.9
        for <java-user@lucene.apache.org>; Fri, 15 Feb 2008 16:38:53 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        bh=VykX5T8f4OUi3chv2EuvF/YdDwnuRc84Wz1rUZhlqU4=;
        b=fo/nBRSP004V12oYchYR27MdY6ZqFRf2fTfvOGskA/yVRjx9ibZoVblGqx4wtw/G5oFs52Sc+J97MWo0z3kVS+zOvTR+nJF3YaYnd9cWXQAgAZuIn9vKNL8wlQCnYYtvO8jJaWIetSKXDuJ8+IpoIIZZasQgAElNv8ykav1MuHY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=GtGC6TnXamBCLl6fUk1brhIZmV5Ao4faCEWiFCFyUETqLFjXvtP8JYvnrQhC/yg8PcUpNeg6ZXv5R4x/u7Odp8ReRFfpfdzmPsukIUC8TWZVLcpa79bm4pbbAikRO2wev5fRlT8cBDmPUaQbK6jjnZcwWDrfln61gt8VHEcVZi0=
Received: by 10.114.78.1 with SMTP id a1mr3634393wab.102.1203122331850;
        Fri, 15 Feb 2008 16:38:51 -0800 (PST)
Received: by 10.114.14.3 with HTTP; Fri, 15 Feb 2008 16:38:51 -0800 (PST)
Message-ID: <a206fb7e0802151638i6cd617a5u11c2414af0690568@mail.gmail.com>
Date: Fri, 15 Feb 2008 16:38:51 -0800
From: "vivek sar" <vivextra@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: DefaultIndexAccessor
In-Reply-To: <47A9E258.7020400@ai.sri.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <1bcb7c7f0802040450k1ca47982v66894276f1c20c2b@mail.gmail.com>
	 <47A70DE3.50202@gmail.com>
	 <1bcb7c7f0802040612m1e2bdc07h9a2eaa531fc3dd5@mail.gmail.com>
	 <47A74849.3050005@gmail.com>
	 <1bcb7c7f0802041001k165bd530n75e692e635971182@mail.gmail.com>
	 <47A7AFD4.5040908@gmail.com> <47A9470A.4020500@ai.sri.com>
	 <47A9B0CC.1000809@gmail.com> <47A9E258.7020400@ai.sri.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Mark,

   There seems to be some issue with DefaultMultiIndexAccessor.java. I
got following NPE exception,

     2008-02-13 07:10:28,021 ERROR [http-7501-Processor6] ReportServiceImpl -
java.lang.NullPointerException
        at org.apache.lucene.indexaccessor.DefaultMultiIndexAccessor.release(DefaultMultiIndexAccessor.java:89)

Looks like the IndexAccessor for one of the Searcher in the
MultiSearcher returned null. Not sure how is that possible, any ideas
how is that possible?

In my case it caused a critical error as the writer thread was stuck
forever (we found out after couple of days) because of this,

"PS thread 9" prio=1 tid=0x00002aac70eb95d0 nid=0x6ba in Object.wait()
[0x0000000047533000..0x0000000047533b80]
        at java.lang.Object.wait(Native Method)
        - waiting on <0x00002aab3e5c7700> (a
org.apache.lucene.indexaccessor.DefaultIndexAccessor)
        at java.lang.Object.wait(Unknown Source)
        at org.apache.lucene.indexaccessor.DefaultIndexAccessor.waitForReadersAndCloseCached(DefaultIndexAccessor.java:593)
        at org.apache.lucene.indexaccessor.DefaultIndexAccessor.release(DefaultIndexAccessor.java:510)
        - locked <0x00002aab3e5c7700> (a
org.apache.lucene.indexaccessor.DefaultIndexAccessor)

The only way to recover was to re-start the application.

I use both MultiSearcher and IndexSearcher in my application, I've
looked at your code but not able to pinpoint how can it go wrong? Of
course, you do have to check for null in the
MultiIndexAccessor.release, but how could you get null index accessor
at first place?

I do call IndexAccessor.close during partitioning of indexes, but the
close should wait for all Searchers to close before doing anything.

Do you have any updates to your code since 02/04/2008?

Thanks,
-vivek

On Feb 6, 2008 8:37 AM, Jay <yu@ai.sri.com> wrote:
> Thanks for your clarifications, Mark!
>
>
> Jay
>
>
> Mark Miller wrote:
> >
> >>
> >> 5. Although currently IndexSearcher.close() does almost nothing except
> >> to close the internal index reader, it might be a safer to close
> >> searcher itself as well in closeCachedSearcher(), just in case, the
> >> searcher may have other resources to release in the future version of
> >> Lucene.
> > Didn't catch that "as well". You are right, great idea Jay, thanks.
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32641-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Feb 16 01:04:46 2008
Return-Path: <java-user-return-32641-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 46137 invoked from network); 16 Feb 2008 01:04:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Feb 2008 01:04:46 -0000
Received: (qmail 9876 invoked by uid 500); 16 Feb 2008 01:04:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9844 invoked by uid 500); 16 Feb 2008 01:04:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9833 invoked by uid 99); 16 Feb 2008 01:04:34 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Feb 2008 17:04:34 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of markrmiller@gmail.com designates 72.14.204.229 as permitted sender)
Received: from [72.14.204.229] (HELO qb-out-0506.google.com) (72.14.204.229)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 16 Feb 2008 01:04:02 +0000
Received: by qb-out-0506.google.com with SMTP id o21so277930qba.9
        for <java-user@lucene.apache.org>; Fri, 15 Feb 2008 17:04:10 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        bh=qa0v0qtQakifK0YiU+dFbHlXm0++ouW733KJ1K135II=;
        b=jgf48EJR8FEMOzyAsGZIT8qxOs+M0lhu3GqiBeYgTQt4FNG3wvfeS9QCdwH95W9h+YLKFYqZlzvdTu6LS05DTV0L9xhucbR0pCrV1uf0lZYpdwg7LYwXi3oU0U0bAHIosaZf6ZPoqqo+YJZfcECEAD+8vPJ2xrtLm8OrljxJhNg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=nC57PcrwPAfNRz1y4ZN8FfzVOtfArL89w9K2YglHQk8Vx78DNgA+6+atUyexw+yC8kCvF7XQF8o5sorvMTsePQNibtN1aOvK3rMplCSe7tBtqya6IiQJSDMBnM/Gmb3j2PMNdlb73E9sidHi3I75cU5KKpHpH3ouINJ9XKvHbTY=
Received: by 10.65.59.11 with SMTP id m11mr5344773qbk.11.1203123850354;
        Fri, 15 Feb 2008 17:04:10 -0800 (PST)
Received: from ?192.168.1.100? ( [69.124.234.149])
        by mx.google.com with ESMTPS id e19sm4095040qba.13.2008.02.15.17.04.09
        (version=SSLv3 cipher=RC4-MD5);
        Fri, 15 Feb 2008 17:04:09 -0800 (PST)
Message-ID: <47B63640.5030501@gmail.com>
Date: Fri, 15 Feb 2008 20:02:56 -0500
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.9 (Windows/20071031)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: DefaultIndexAccessor
References: <1bcb7c7f0802040450k1ca47982v66894276f1c20c2b@mail.gmail.com>	 <47A70DE3.50202@gmail.com>	 <1bcb7c7f0802040612m1e2bdc07h9a2eaa531fc3dd5@mail.gmail.com>	 <47A74849.3050005@gmail.com>	 <1bcb7c7f0802041001k165bd530n75e692e635971182@mail.gmail.com>	 <47A7AFD4.5040908@gmail.com> <47A9470A.4020500@ai.sri.com>	 <47A9B0CC.1000809@gmail.com> <47A9E258.7020400@ai.sri.com> <a206fb7e0802151638i6cd617a5u11c2414af0690568@mail.gmail.com>
In-Reply-To: <a206fb7e0802151638i6cd617a5u11c2414af0690568@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hey vivek, sorry to hear you are having problems.

I am trying to figure out how you may be seeing this problem. The 
IndexAccessor cannot return null because you would get an 
IllegalStateException not a NullPointerException. Also, the released 
MultiSearcher cannot be null because the Exception would have been 
thrown sooner. Releasing a null Searcher throws no Exception. So a 
possibility is that you are returning a foreign MultiSearcher?

Unlikely, but I don't see anything else at the moment.

The MultiSearcher code is really pretty simple and actually recreates a 
MultiSearcher on every request...it did not appear to be worth it to 
coordinate closed sub Accessors with a cache for the MultiSearcher (I 
wrote the code at one point, and later got rid of it). So really the 
MultiSearcher is just a simple class that gets cached sub Searchers for 
each index and creates a one time use MultiSearcher. A simple cache is 
kept around that identifies which Accessor needs to release which sub 
Searcher. It's all rather simple, and I am struggling to see another 
possibility beyond returning a foreign MultiSearcher somehow.

I will keep looking and keep you posted. In the mean time, do you have 
any other data or code snippets to share?

vivek sar wrote:
> Mark,
>
>    There seems to be some issue with DefaultMultiIndexAccessor.java. I
> got following NPE exception,
>
>      2008-02-13 07:10:28,021 ERROR [http-7501-Processor6] ReportServiceImpl -
> java.lang.NullPointerException
>         at org.apache.lucene.indexaccessor.DefaultMultiIndexAccessor.release(DefaultMultiIndexAccessor.java:89)
>
> Looks like the IndexAccessor for one of the Searcher in the
> MultiSearcher returned null. Not sure how is that possible, any ideas
> how is that possible?
>
> In my case it caused a critical error as the writer thread was stuck
> forever (we found out after couple of days) because of this,
>
> "PS thread 9" prio=1 tid=0x00002aac70eb95d0 nid=0x6ba in Object.wait()
> [0x0000000047533000..0x0000000047533b80]
>         at java.lang.Object.wait(Native Method)
>         - waiting on <0x00002aab3e5c7700> (a
> org.apache.lucene.indexaccessor.DefaultIndexAccessor)
>         at java.lang.Object.wait(Unknown Source)
>         at org.apache.lucene.indexaccessor.DefaultIndexAccessor.waitForReadersAndCloseCached(DefaultIndexAccessor.java:593)
>         at org.apache.lucene.indexaccessor.DefaultIndexAccessor.release(DefaultIndexAccessor.java:510)
>         - locked <0x00002aab3e5c7700> (a
> org.apache.lucene.indexaccessor.DefaultIndexAccessor)
>
> The only way to recover was to re-start the application.
>
> I use both MultiSearcher and IndexSearcher in my application, I've
> looked at your code but not able to pinpoint how can it go wrong? Of
> course, you do have to check for null in the
> MultiIndexAccessor.release, but how could you get null index accessor
> at first place?
>
> I do call IndexAccessor.close during partitioning of indexes, but the
> close should wait for all Searchers to close before doing anything.
>
> Do you have any updates to your code since 02/04/2008?
>
> Thanks,
> -vivek
>
> On Feb 6, 2008 8:37 AM, Jay <yu@ai.sri.com> wrote:
>   
>> Thanks for your clarifications, Mark!
>>
>>
>> Jay
>>
>>
>> Mark Miller wrote:
>>     
>>>> 5. Although currently IndexSearcher.close() does almost nothing except
>>>> to close the internal index reader, it might be a safer to close
>>>> searcher itself as well in closeCachedSearcher(), just in case, the
>>>> searcher may have other resources to release in the future version of
>>>> Lucene.
>>>>         
>>> Didn't catch that "as well". You are right, great idea Jay, thanks.
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>       
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>     
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>   

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32642-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Feb 16 01:40:22 2008
Return-Path: <java-user-return-32642-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51599 invoked from network); 16 Feb 2008 01:40:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Feb 2008 01:40:22 -0000
Received: (qmail 34116 invoked by uid 500); 16 Feb 2008 01:40:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34076 invoked by uid 500); 16 Feb 2008 01:40:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34064 invoked by uid 99); 16 Feb 2008 01:40:09 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Feb 2008 17:40:09 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of markrmiller@gmail.com designates 72.14.204.229 as permitted sender)
Received: from [72.14.204.229] (HELO qb-out-0506.google.com) (72.14.204.229)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 16 Feb 2008 01:39:36 +0000
Received: by qb-out-0506.google.com with SMTP id o21so291150qba.9
        for <java-user@lucene.apache.org>; Fri, 15 Feb 2008 17:39:44 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        bh=IJlzvpH07skaLVIeYo/j7b4/F/VfRDXFl+mkpZBWsYs=;
        b=vyvJ4vYHfeP1fjyVUdo5SMtlf9zJIHPShpwgJ8bAgiDqwwbDtY2hqvDceJ1C1G7IG6aIOQSMq79cW1wOpZi6JmnWxqkPhNKs4VVxkR/9+ugi5ErpsUlD/XkiGXFXIO5FCcIDONI78xGVsWw1BnzdHHp4KiTfiPYflCffDCsBEnE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=nW0oD+rM3lrcU6cH3QpkE7BwL4Cmk+bwevblBWXZBborw80aQk7k88Xl2pMNp76rFLHiTBy/KaKfIkBp3LvzXJqzLpDxi4ijFsVfVOnRgkdQ19KhUTKXVfzY4QH2ogX66sc5iuVE27R1EjNbwXWVwlexZeJg3u3EolVlWEPr/bI=
Received: by 10.65.250.11 with SMTP id c11mr5450878qbs.22.1203125984291;
        Fri, 15 Feb 2008 17:39:44 -0800 (PST)
Received: from ?192.168.1.100? ( [69.124.234.149])
        by mx.google.com with ESMTPS id e15sm4109671qbe.2.2008.02.15.17.39.43
        (version=SSLv3 cipher=RC4-MD5);
        Fri, 15 Feb 2008 17:39:43 -0800 (PST)
Message-ID: <47B63E96.6090709@gmail.com>
Date: Fri, 15 Feb 2008 20:38:30 -0500
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.9 (Windows/20071031)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: DefaultIndexAccessor
References: <1bcb7c7f0802040450k1ca47982v66894276f1c20c2b@mail.gmail.com>	 <47A70DE3.50202@gmail.com>	 <1bcb7c7f0802040612m1e2bdc07h9a2eaa531fc3dd5@mail.gmail.com>	 <47A74849.3050005@gmail.com>	 <1bcb7c7f0802041001k165bd530n75e692e635971182@mail.gmail.com>	 <47A7AFD4.5040908@gmail.com> <47A9470A.4020500@ai.sri.com>	 <47A9B0CC.1000809@gmail.com> <47A9E258.7020400@ai.sri.com> <a206fb7e0802151638i6cd617a5u11c2414af0690568@mail.gmail.com>
In-Reply-To: <a206fb7e0802151638i6cd617a5u11c2414af0690568@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Okay, sorry about this one vivek. Added to the unit tests to expose 
this. When I took out the MultiSearcher caching, I kept the concept of 
sharing a single MultiIndexAccessor. Unfortunately, this meant that 
multiple threads were sharing the same Searcher to Accessor Map that was 
used to track which Accessor needs to release which Searcher. Because of 
this, a thread might come along and pull a Searcher out of that Map 
right before another Thread tries to release that same cached Searcher 
instance. The result is that it is not there, and hence the 
NullPointerException.

Nice to have this added to the Unit Tests. The fix is to create a new 
MultiIndexAccessor on every request, and recommend you get one for each 
Thread as the class is now not thread safe. Construction of a 
MultiIndexAccessor is pretty much nothing in terms of time. This way 
each thread has its own Map of Searcher to Accessors.

A good tip is to make a simple page that simply prints out the 
Searcher/Writer use counts. You can then check this page occasionally 
and see if it appears there are Writers or Searchers stuck out you know 
you have a problem. Under normal circumstances it should not be possible 
and indicates a bug somewhere.

I will the fix shortly.

- Mark

vivek sar wrote:
> Mark,
>
>    There seems to be some issue with DefaultMultiIndexAccessor.java. I
> got following NPE exception,
>
>      2008-02-13 07:10:28,021 ERROR [http-7501-Processor6] ReportServiceImpl -
> java.lang.NullPointerException
>         at org.apache.lucene.indexaccessor.DefaultMultiIndexAccessor.release(DefaultMultiIndexAccessor.java:89)
>
> Looks like the IndexAccessor for one of the Searcher in the
> MultiSearcher returned null. Not sure how is that possible, any ideas
> how is that possible?
>
> In my case it caused a critical error as the writer thread was stuck
> forever (we found out after couple of days) because of this,
>
> "PS thread 9" prio=1 tid=0x00002aac70eb95d0 nid=0x6ba in Object.wait()
> [0x0000000047533000..0x0000000047533b80]
>         at java.lang.Object.wait(Native Method)
>         - waiting on <0x00002aab3e5c7700> (a
> org.apache.lucene.indexaccessor.DefaultIndexAccessor)
>         at java.lang.Object.wait(Unknown Source)
>         at org.apache.lucene.indexaccessor.DefaultIndexAccessor.waitForReadersAndCloseCached(DefaultIndexAccessor.java:593)
>         at org.apache.lucene.indexaccessor.DefaultIndexAccessor.release(DefaultIndexAccessor.java:510)
>         - locked <0x00002aab3e5c7700> (a
> org.apache.lucene.indexaccessor.DefaultIndexAccessor)
>
> The only way to recover was to re-start the application.
>
> I use both MultiSearcher and IndexSearcher in my application, I've
> looked at your code but not able to pinpoint how can it go wrong? Of
> course, you do have to check for null in the
> MultiIndexAccessor.release, but how could you get null index accessor
> at first place?
>
> I do call IndexAccessor.close during partitioning of indexes, but the
> close should wait for all Searchers to close before doing anything.
>
> Do you have any updates to your code since 02/04/2008?
>
> Thanks,
> -vivek
>
> On Feb 6, 2008 8:37 AM, Jay <yu@ai.sri.com> wrote:
>   
>> Thanks for your clarifications, Mark!
>>
>>
>> Jay
>>
>>
>> Mark Miller wrote:
>>     
>>>> 5. Although currently IndexSearcher.close() does almost nothing except
>>>> to close the internal index reader, it might be a safer to close
>>>> searcher itself as well in closeCachedSearcher(), just in case, the
>>>> searcher may have other resources to release in the future version of
>>>> Lucene.
>>>>         
>>> Didn't catch that "as well". You are right, great idea Jay, thanks.
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>       
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>     
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>   

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32643-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Feb 16 01:58:44 2008
Return-Path: <java-user-return-32643-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54086 invoked from network); 16 Feb 2008 01:58:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Feb 2008 01:58:44 -0000
Received: (qmail 52201 invoked by uid 500); 16 Feb 2008 01:58:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52176 invoked by uid 500); 16 Feb 2008 01:58:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52165 invoked by uid 99); 16 Feb 2008 01:58:32 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Feb 2008 17:58:32 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of markrmiller@gmail.com designates 72.14.204.226 as permitted sender)
Received: from [72.14.204.226] (HELO qb-out-0506.google.com) (72.14.204.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 16 Feb 2008 01:57:59 +0000
Received: by qb-out-0506.google.com with SMTP id o21so297225qba.9
        for <java-user@lucene.apache.org>; Fri, 15 Feb 2008 17:58:07 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        bh=60t+KdJ9R7rNMsuxiQ9Usj8UQTQpAFbCf2SZBARyPV4=;
        b=kChD9+abogbVFOkNRWE0q5ry7Tiw6yPw67B+27q11PKJMquwcJdGrRLR2EUE8lef35Ei8MfgkhNRxWbFJuLqSPQolyT05XptU4lTJK1s8vAi6iAqNxV9/bcNCcNhdm378BA+kS9y+PFbHzot1C5OFlORBFy8ORDbCVH4s2i32vM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=Cw99Oiih52uW7mOQ8bG6zQlg3TmDptLuRe95tUuSTTiehjjkYHX6j9b2IHyeOjWQfkDEGMURn9xo30SicIKt06HhqOkTefv5NAK6oVfESvng3AlU2bi2CE3JM/mtNyKS79KzrJ3HWwhBtZM5Ni0N30t+KlhazM2+XpXmBxi+VoI=
Received: by 10.65.73.16 with SMTP id a16mr5682958qbl.86.1203127081833;
        Fri, 15 Feb 2008 17:58:01 -0800 (PST)
Received: from ?192.168.1.100? ( [69.124.234.149])
        by mx.google.com with ESMTPS id d5sm4111377qbd.18.2008.02.15.17.57.59
        (version=SSLv3 cipher=RC4-MD5);
        Fri, 15 Feb 2008 17:58:00 -0800 (PST)
Message-ID: <47B642DE.8060103@gmail.com>
Date: Fri, 15 Feb 2008 20:56:46 -0500
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.9 (Windows/20071031)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: DefaultIndexAccessor
References: <1bcb7c7f0802040450k1ca47982v66894276f1c20c2b@mail.gmail.com>	 <47A70DE3.50202@gmail.com>	 <1bcb7c7f0802040612m1e2bdc07h9a2eaa531fc3dd5@mail.gmail.com>	 <47A74849.3050005@gmail.com>	 <1bcb7c7f0802041001k165bd530n75e692e635971182@mail.gmail.com>	 <47A7AFD4.5040908@gmail.com> <47A9470A.4020500@ai.sri.com>	 <47A9B0CC.1000809@gmail.com> <47A9E258.7020400@ai.sri.com> <a206fb7e0802151638i6cd617a5u11c2414af0690568@mail.gmail.com>
In-Reply-To: <a206fb7e0802151638i6cd617a5u11c2414af0690568@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Here is the fix: https://issues.apache.org/jira/browse/LUCENE-1026

vivek sar wrote:
> Mark,
>
>    There seems to be some issue with DefaultMultiIndexAccessor.java. I
> got following NPE exception,
>
>      2008-02-13 07:10:28,021 ERROR [http-7501-Processor6] ReportServiceImpl -
> java.lang.NullPointerException
>         at org.apache.lucene.indexaccessor.DefaultMultiIndexAccessor.release(DefaultMultiIndexAccessor.java:89)
>
> Looks like the IndexAccessor for one of the Searcher in the
> MultiSearcher returned null. Not sure how is that possible, any ideas
> how is that possible?
>
> In my case it caused a critical error as the writer thread was stuck
> forever (we found out after couple of days) because of this,
>
> "PS thread 9" prio=1 tid=0x00002aac70eb95d0 nid=0x6ba in Object.wait()
> [0x0000000047533000..0x0000000047533b80]
>         at java.lang.Object.wait(Native Method)
>         - waiting on <0x00002aab3e5c7700> (a
> org.apache.lucene.indexaccessor.DefaultIndexAccessor)
>         at java.lang.Object.wait(Unknown Source)
>         at org.apache.lucene.indexaccessor.DefaultIndexAccessor.waitForReadersAndCloseCached(DefaultIndexAccessor.java:593)
>         at org.apache.lucene.indexaccessor.DefaultIndexAccessor.release(DefaultIndexAccessor.java:510)
>         - locked <0x00002aab3e5c7700> (a
> org.apache.lucene.indexaccessor.DefaultIndexAccessor)
>
> The only way to recover was to re-start the application.
>
> I use both MultiSearcher and IndexSearcher in my application, I've
> looked at your code but not able to pinpoint how can it go wrong? Of
> course, you do have to check for null in the
> MultiIndexAccessor.release, but how could you get null index accessor
> at first place?
>
> I do call IndexAccessor.close during partitioning of indexes, but the
> close should wait for all Searchers to close before doing anything.
>
> Do you have any updates to your code since 02/04/2008?
>
> Thanks,
> -vivek
>
> On Feb 6, 2008 8:37 AM, Jay <yu@ai.sri.com> wrote:
>   
>> Thanks for your clarifications, Mark!
>>
>>
>> Jay
>>
>>
>> Mark Miller wrote:
>>     
>>>> 5. Although currently IndexSearcher.close() does almost nothing except
>>>> to close the internal index reader, it might be a safer to close
>>>> searcher itself as well in closeCachedSearcher(), just in case, the
>>>> searcher may have other resources to release in the future version of
>>>> Lucene.
>>>>         
>>> Didn't catch that "as well". You are right, great idea Jay, thanks.
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>       
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>     
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>   

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32644-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Feb 16 02:02:58 2008
Return-Path: <java-user-return-32644-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 55353 invoked from network); 16 Feb 2008 02:02:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Feb 2008 02:02:58 -0000
Received: (qmail 54444 invoked by uid 500); 16 Feb 2008 02:02:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54410 invoked by uid 500); 16 Feb 2008 02:02:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54399 invoked by uid 99); 16 Feb 2008 02:02:46 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Feb 2008 18:02:46 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of vivextra@gmail.com designates 72.14.204.233 as permitted sender)
Received: from [72.14.204.233] (HELO qb-out-0506.google.com) (72.14.204.233)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 16 Feb 2008 02:02:15 +0000
Received: by qb-out-0506.google.com with SMTP id o21so298539qba.9
        for <java-user@lucene.apache.org>; Fri, 15 Feb 2008 18:02:23 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        bh=sjiHDFz4L9goAWZUOUcY/VYVgAVOSfAsamM2SE8N61Q=;
        b=qeAUiQoh8GC/1od+n6qnOP1qQos5V6lpHK917iPub7G6mL2FKMXpgKKXKkU1gIpPuRqL6LT5t8z3Y4o3P40VpSbn/xFZoAtH28H8ECTICy7YWy1nOLjtDt4iSiwXJ0taiWnpYU3WIJCtDcbOEstCl3hCGoFnXeosT7vuemH11kQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=QU7+99EhgPEZWkrsnvxRoBGL93R0OC9CY/lXmt8KRupnMhhwwhP5idd8r1k5XUYLMxDIt938u+tfQbGeS+Ey6U0VWBqjn1FKwm6EQoQnAAGKpK9g4NW9YTwMQlBngp/gz/qkXYcmi5wQxADUO9+QpFcsx4dz9nESjP1rFli0Wss=
Received: by 10.114.53.1 with SMTP id b1mr3681275waa.134.1203127342927;
        Fri, 15 Feb 2008 18:02:22 -0800 (PST)
Received: by 10.114.14.3 with HTTP; Fri, 15 Feb 2008 18:02:22 -0800 (PST)
Message-ID: <a206fb7e0802151802u2bba11cdged69a611a7b35e1f@mail.gmail.com>
Date: Fri, 15 Feb 2008 18:02:22 -0800
From: "vivek sar" <vivextra@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: DefaultIndexAccessor
In-Reply-To: <47B63640.5030501@gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <1bcb7c7f0802040450k1ca47982v66894276f1c20c2b@mail.gmail.com>
	 <1bcb7c7f0802040612m1e2bdc07h9a2eaa531fc3dd5@mail.gmail.com>
	 <47A74849.3050005@gmail.com>
	 <1bcb7c7f0802041001k165bd530n75e692e635971182@mail.gmail.com>
	 <47A7AFD4.5040908@gmail.com> <47A9470A.4020500@ai.sri.com>
	 <47A9B0CC.1000809@gmail.com> <47A9E258.7020400@ai.sri.com>
	 <a206fb7e0802151638i6cd617a5u11c2414af0690568@mail.gmail.com>
	 <47B63640.5030501@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Mark,

  Here is the scenario when I saw this exception,

1) A search was run which uses MultiSearcher. This search took more
than 3 mins to complete (due to index size and multiple indices)
2) Just a minute after the search was started, we started writing (in
a separate thread) to one of the index which was searched on
3) Writer finished in few seconds and called writer.release
4) Since, the multi-searcher was still running the writer.release
waits for all multisearcher to complete
5) The MultiSearcher finally completes and calls
MultiIndexAccessor.release for the multisearcher
6) At this point for some reason the multisearcher throws NPE. I'm not
sure whether the NPE was on the index that was being updated by writer
or some other index
7) Because of NPE the index that the writer was writing to never gets
released and Writer gets stuck

I haven't been able to reproduce this again.

Is IndexAccessor-02.07.2008.zip
(https://issues.apache.org/jira/browse/LUCENE-1026) most up to date
code you got? You mentioned the new jar should,

"Releasing a Writer never blocks for a reopen now - so after adding a
doc it may be a second or two before its visible to new Searchers"

 Do you think this would help the case I ran into where the writer was
stuck because of the searcher release?

 I think you may still want to check for null in the
MultiIndexAccessor.release(), i.e.,

    public synchronized void release(Searcher multiSearcher) {
    Searchable[] searchers = ((MultiSearcher) multiSearcher).getSearchables();
    IndexAccessor accessor = null;
    for (Searchable searchable : searchers) {
      if(searchable != null){
         accessor = multiSearcherAccessors.remove(searchable);
         if(accessor != null){
               accessor.release((Searcher) searchable);
         }
      }
    }
}

Thanks,
-vivek

On Feb 15, 2008 5:02 PM, Mark Miller <markrmiller@gmail.com> wrote:
> Hey vivek, sorry to hear you are having problems.
>
> I am trying to figure out how you may be seeing this problem. The
> IndexAccessor cannot return null because you would get an
> IllegalStateException not a NullPointerException. Also, the released
> MultiSearcher cannot be null because the Exception would have been
> thrown sooner. Releasing a null Searcher throws no Exception. So a
> possibility is that you are returning a foreign MultiSearcher?
>
> Unlikely, but I don't see anything else at the moment.
>
> The MultiSearcher code is really pretty simple and actually recreates a
> MultiSearcher on every request...it did not appear to be worth it to
> coordinate closed sub Accessors with a cache for the MultiSearcher (I
> wrote the code at one point, and later got rid of it). So really the
> MultiSearcher is just a simple class that gets cached sub Searchers for
> each index and creates a one time use MultiSearcher. A simple cache is
> kept around that identifies which Accessor needs to release which sub
> Searcher. It's all rather simple, and I am struggling to see another
> possibility beyond returning a foreign MultiSearcher somehow.
>
> I will keep looking and keep you posted. In the mean time, do you have
> any other data or code snippets to share?
>
>
> vivek sar wrote:
> > Mark,
> >
> >    There seems to be some issue with DefaultMultiIndexAccessor.java. I
> > got following NPE exception,
> >
> >      2008-02-13 07:10:28,021 ERROR [http-7501-Processor6] ReportServiceImpl -
> > java.lang.NullPointerException
> >         at org.apache.lucene.indexaccessor.DefaultMultiIndexAccessor.release(DefaultMultiIndexAccessor.java:89)
> >
> > Looks like the IndexAccessor for one of the Searcher in the
> > MultiSearcher returned null. Not sure how is that possible, any ideas
> > how is that possible?
> >
> > In my case it caused a critical error as the writer thread was stuck
> > forever (we found out after couple of days) because of this,
> >
> > "PS thread 9" prio=1 tid=0x00002aac70eb95d0 nid=0x6ba in Object.wait()
> > [0x0000000047533000..0x0000000047533b80]
> >         at java.lang.Object.wait(Native Method)
> >         - waiting on <0x00002aab3e5c7700> (a
> > org.apache.lucene.indexaccessor.DefaultIndexAccessor)
> >         at java.lang.Object.wait(Unknown Source)
> >         at org.apache.lucene.indexaccessor.DefaultIndexAccessor.waitForReadersAndCloseCached(DefaultIndexAccessor.java:593)
> >         at org.apache.lucene.indexaccessor.DefaultIndexAccessor.release(DefaultIndexAccessor.java:510)
> >         - locked <0x00002aab3e5c7700> (a
> > org.apache.lucene.indexaccessor.DefaultIndexAccessor)
> >
> > The only way to recover was to re-start the application.
> >
> > I use both MultiSearcher and IndexSearcher in my application, I've
> > looked at your code but not able to pinpoint how can it go wrong? Of
> > course, you do have to check for null in the
> > MultiIndexAccessor.release, but how could you get null index accessor
> > at first place?
> >
> > I do call IndexAccessor.close during partitioning of indexes, but the
> > close should wait for all Searchers to close before doing anything.
> >
> > Do you have any updates to your code since 02/04/2008?
> >
> > Thanks,
> > -vivek
> >
> > On Feb 6, 2008 8:37 AM, Jay <yu@ai.sri.com> wrote:
> >
> >> Thanks for your clarifications, Mark!
> >>
> >>
> >> Jay
> >>
> >>
> >> Mark Miller wrote:
> >>
> >>>> 5. Although currently IndexSearcher.close() does almost nothing except
> >>>> to close the internal index reader, it might be a safer to close
> >>>> searcher itself as well in closeCachedSearcher(), just in case, the
> >>>> searcher may have other resources to release in the future version of
> >>>> Lucene.
> >>>>
> >>> Didn't catch that "as well". You are right, great idea Jay, thanks.
> >>>
> >>> ---------------------------------------------------------------------
> >>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >>> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >>
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32645-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Feb 16 02:50:57 2008
Return-Path: <java-user-return-32645-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63566 invoked from network); 16 Feb 2008 02:50:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Feb 2008 02:50:57 -0000
Received: (qmail 74994 invoked by uid 500); 16 Feb 2008 02:50:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74964 invoked by uid 500); 16 Feb 2008 02:50:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74953 invoked by uid 99); 16 Feb 2008 02:50:45 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Feb 2008 18:50:45 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of vivextra@gmail.com designates 72.14.204.238 as permitted sender)
Received: from [72.14.204.238] (HELO qb-out-0506.google.com) (72.14.204.238)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 16 Feb 2008 02:50:13 +0000
Received: by qb-out-0506.google.com with SMTP id o21so312452qba.9
        for <java-user@lucene.apache.org>; Fri, 15 Feb 2008 18:50:21 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        bh=uu6orambxLU4Pyq833BvCqp7/RRREoEvzLTiQj4nw04=;
        b=VO8UXkZ5wS4jJNPoZtclo/Y4q4GlgtxbUrVAjuJKLAWh04LZiuxfYTnCGOQI4h7FPFMpQpPul9nE9kPo8ClIZq0rr+AyzcXeHR92bxXSVmc5ZTXrBIW4hurMLVJXSnQ45ffCxtLQ1ppiAltCJLOaHLLQmUlE2Q0DQoaStdgnrUM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=Tg4scQ2q6p6F3w7SkHIeqjOIYEfgT425fXEUbT7hVNR9DSsdZPo5xV7ys6kfMdQcrYM84xQwNyd7LpqZ7BcmoqeFDXPstbFp19uI2XZHaAFjOkAxBgfqqPx5CysMaXKRwra21dU25yJhkLFJkpT0FXFAWHIvxPXYmVnXiDcXXpw=
Received: by 10.114.156.1 with SMTP id d1mr246478wae.68.1203130220730;
        Fri, 15 Feb 2008 18:50:20 -0800 (PST)
Received: by 10.114.14.3 with HTTP; Fri, 15 Feb 2008 18:50:20 -0800 (PST)
Message-ID: <a206fb7e0802151850x7c9383a4t3df54af62b270534@mail.gmail.com>
Date: Fri, 15 Feb 2008 18:50:20 -0800
From: "vivek sar" <vivextra@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: DefaultIndexAccessor
In-Reply-To: <47B642DE.8060103@gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <1bcb7c7f0802040450k1ca47982v66894276f1c20c2b@mail.gmail.com>
	 <1bcb7c7f0802040612m1e2bdc07h9a2eaa531fc3dd5@mail.gmail.com>
	 <47A74849.3050005@gmail.com>
	 <1bcb7c7f0802041001k165bd530n75e692e635971182@mail.gmail.com>
	 <47A7AFD4.5040908@gmail.com> <47A9470A.4020500@ai.sri.com>
	 <47A9B0CC.1000809@gmail.com> <47A9E258.7020400@ai.sri.com>
	 <a206fb7e0802151638i6cd617a5u11c2414af0690568@mail.gmail.com>
	 <47B642DE.8060103@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Mark,

Thanks for the quick fix. Actually, it is possible that there might
had been simultaneous queries using the MultiSearcher. I assumed it
was thread-safe, thus was re-using the same instance. I'll update my
application code as well.

Thanks,
-vivek

On Feb 15, 2008 5:56 PM, Mark Miller <markrmiller@gmail.com> wrote:
> Here is the fix: https://issues.apache.org/jira/browse/LUCENE-1026
>
>
> vivek sar wrote:
> > Mark,
> >
> >    There seems to be some issue with DefaultMultiIndexAccessor.java. I
> > got following NPE exception,
> >
> >      2008-02-13 07:10:28,021 ERROR [http-7501-Processor6] ReportServiceImpl -
> > java.lang.NullPointerException
> >         at org.apache.lucene.indexaccessor.DefaultMultiIndexAccessor.release(DefaultMultiIndexAccessor.java:89)
> >
> > Looks like the IndexAccessor for one of the Searcher in the
> > MultiSearcher returned null. Not sure how is that possible, any ideas
> > how is that possible?
> >
> > In my case it caused a critical error as the writer thread was stuck
> > forever (we found out after couple of days) because of this,
> >
> > "PS thread 9" prio=1 tid=0x00002aac70eb95d0 nid=0x6ba in Object.wait()
> > [0x0000000047533000..0x0000000047533b80]
> >         at java.lang.Object.wait(Native Method)
> >         - waiting on <0x00002aab3e5c7700> (a
> > org.apache.lucene.indexaccessor.DefaultIndexAccessor)
> >         at java.lang.Object.wait(Unknown Source)
> >         at org.apache.lucene.indexaccessor.DefaultIndexAccessor.waitForReadersAndCloseCached(DefaultIndexAccessor.java:593)
> >         at org.apache.lucene.indexaccessor.DefaultIndexAccessor.release(DefaultIndexAccessor.java:510)
> >         - locked <0x00002aab3e5c7700> (a
> > org.apache.lucene.indexaccessor.DefaultIndexAccessor)
> >
> > The only way to recover was to re-start the application.
> >
> > I use both MultiSearcher and IndexSearcher in my application, I've
> > looked at your code but not able to pinpoint how can it go wrong? Of
> > course, you do have to check for null in the
> > MultiIndexAccessor.release, but how could you get null index accessor
> > at first place?
> >
> > I do call IndexAccessor.close during partitioning of indexes, but the
> > close should wait for all Searchers to close before doing anything.
> >
> > Do you have any updates to your code since 02/04/2008?
> >
> > Thanks,
> > -vivek
> >
> > On Feb 6, 2008 8:37 AM, Jay <yu@ai.sri.com> wrote:
> >
> >> Thanks for your clarifications, Mark!
> >>
> >>
> >> Jay
> >>
> >>
> >> Mark Miller wrote:
> >>
> >>>> 5. Although currently IndexSearcher.close() does almost nothing except
> >>>> to close the internal index reader, it might be a safer to close
> >>>> searcher itself as well in closeCachedSearcher(), just in case, the
> >>>> searcher may have other resources to release in the future version of
> >>>> Lucene.
> >>>>
> >>> Didn't catch that "as well". You are right, great idea Jay, thanks.
> >>>
> >>> ---------------------------------------------------------------------
> >>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >>> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >>
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32646-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Feb 16 02:54:56 2008
Return-Path: <java-user-return-32646-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64318 invoked from network); 16 Feb 2008 02:54:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Feb 2008 02:54:56 -0000
Received: (qmail 77272 invoked by uid 500); 16 Feb 2008 02:54:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77239 invoked by uid 500); 16 Feb 2008 02:54:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77228 invoked by uid 99); 16 Feb 2008 02:54:44 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Feb 2008 18:54:44 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of cedric.ho@gmail.com designates 72.14.204.238 as permitted sender)
Received: from [72.14.204.238] (HELO qb-out-0506.google.com) (72.14.204.238)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 16 Feb 2008 02:53:59 +0000
Received: by qb-out-0506.google.com with SMTP id o21so313704qba.9
        for <java-user@lucene.apache.org>; Fri, 15 Feb 2008 18:54:19 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        bh=yiaPbBe2LVg435bNV4i2x8OFXH0YnS9NIrWf54dAilg=;
        b=RAPDDUjiqXt06CezkbBoVU7bEK5vNRi08ufyDTLry+Yix/prMyqZFxJqbDzpXVuVSlHx1/GdpDBc4iHhK7mbneOA1pnsOrosC8pYKX+g5kkWWCpm83BH7KxnhVJoWzdsGK0lpjE/p8dEchAmO4W82c94DzaKNJW89qIkk/IjAwk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=eO4rLgC7ZjNA+fdJCDvotZqHyyQMwuwITCLv4dHBr67xMgN2osi2jXZz2I5T8wRXmB44bm/y4hZNnDAbUHsYn7t6bEf1fktxGlSJNWkmME/0TSykqjwW7O9dWls5VUYv1JwjXyRyfKFvEcejBRGBA3pZ/FvfUgawBrSbz2kqFhA=
Received: by 10.114.177.1 with SMTP id z1mr3786653wae.7.1203130459180;
        Fri, 15 Feb 2008 18:54:19 -0800 (PST)
Received: by 10.114.156.2 with HTTP; Fri, 15 Feb 2008 18:54:19 -0800 (PST)
Message-ID: <839ba01c0802151854j2ba1e4e4u9a4d88a6f6399deb@mail.gmail.com>
Date: Sat, 16 Feb 2008 10:54:19 +0800
From: "Cedric Ho" <cedric.ho@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: How to pass additional information into Similarity.scorePayload(...)
In-Reply-To: <200802152230.47324.paul.elschot@xs4all.nl>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <839ba01c0802130131x3afecdcdna3825cab69adc3a9@mail.gmail.com>
	 <200802150832.47060.paul.elschot@xs4all.nl>
	 <839ba01c0802150045q47a7c4f8h30cff700e584c66f@mail.gmail.com>
	 <200802152230.47324.paul.elschot@xs4all.nl>
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks ~ Yes it seems this would be quite difficult to achieve with
Lucene. Nevermind, I'll try to figure out a workaround for it.

Thanks for helping =)

Cedric


On Feb 16, 2008 5:30 AM, Paul Elschot <paul.elschot@xs4all.nl> wrote:
> Hi Cedric,
>
> I think I'm beginning to get the point of the [10/5/2],
> and why you called that requirement a bit strange, see below.
>
> To use both normal position info and paragraph position info
> you'll need two separate, one normal, and one for the paragraphs.
>
> To use the normal field to determine the matches, and  the
> paragraph field to determine the weightings of these matches
> the TermPositions of both fields will have to be advanced
> completely in sync. That is possible, but not really nice to do.
> If Lucene had multiple positions for an indexed term, it
> would be straightforward.
> But as long as that is not the case, you'll either have to advance
> the two TermPositions in sync, or use payloads with the
> paragraph numbers.
>
> Or you could relax the paragraph numbering requirement
> into a positional requirement, and use the modified SpanFirstQuery.
> That could be done by using an avarage paragraph length to
> determine the weight at the matching position.
> As this is easy to implement, I'd first implement this and try to sell
> it to the users :)
>
> At that marketing moment you might as well ask the users
> what they think of matches that cross paragraph borders.
> Do you already have a firm requirement for that case?
>
> SpanNotQuery can be used to prevent matches over paragraph
> borders when these are indexed as such, but I would not expect
> that you would need those, given the fuzzyness of the [10/5/2].
>
> Regards,
> Paul Elschot
>
>
> Op Friday 15 February 2008 09:45:58 schreef Cedric Ho:
>
> > Hi Paul,
> >
> > Do you mean the following?
> >
> > e.g. to index this: "first second third <paragraphBorder> forth fifth six"
> >
> > originally it would be indexed as:
> > (first,0) (second,1) (third,2) (forth,3) (fifth,4) (six,5)
> >
> > now it will be:
> > (first,0) (second,0) (third,0) (forth,1) (fifth,1) (six,1)
> >
> > Then those Query classes that depends on the positional information
> > (PhraseQuery, SpanQueries) won't work then? unfortunately I'll need
> > those Query classes as well.
> >
> > Cedric
> >
> >
> > >  For each word in the input stream make sure that the position
> > >  at which it is indexed in an extra field is the same as the paragraph
> > >  number. That will involve only allowing a position increment at
> > >  a paragraph border during indexing.
> > >  Call this extra field the paragraph field if you will.
> > >
> > >  Then, during search, search for a Term in paragraph field, and
> > >  use the position from that field, i.e. the paragraph number
> > >  to find a weight for the found term.
> > >  Have a look at PhraseQuery on how to use term positions during
> > >  search. It computes relative positions, but it works on the absolute
> > >  positions that it gets from the index.
> > >
> > >  SpanFirstQuery also allows to do that, it's a bit more involved, but
> > >  in the end it works from the same absolute positions from the index.
> > >  The version at the jira issue will even allow to use the length of the
> > >  matching spans as the absolute paragraph number, which, in turn,
> > >  allows the use of a Similarity for the paragraph weights [10/5/2].
> > >
> > >  There is nothing special about indexed term positions; any term can
> > >  be indexed at any position in a field. Lucene will take advantage of
> > >  the incremental nature of positions by storing only compressed
> > >  differences of positions in the index, but during search the original
> > >  positions are directly available, You can do the same with payloads,
> > >  but why reimplement something that is already available?
> > >
> > >  Payloads have better uses than positional info, for one they are
> > >  great to avoid disjunctions. For example for verbs, one could
> > >  index only the stem and use a payload for the actual inflected
> > >  form (singular/plural, past/present, first/second/third person, etc).
> > >
> > >  Regards,
> > >  Paul Elschot
> > >
> >
>
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> >
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32647-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Feb 16 05:46:20 2008
Return-Path: <java-user-return-32647-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12757 invoked from network); 16 Feb 2008 05:46:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Feb 2008 05:46:20 -0000
Received: (qmail 40338 invoked by uid 500); 16 Feb 2008 05:46:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40302 invoked by uid 500); 16 Feb 2008 05:46:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40291 invoked by uid 99); 16 Feb 2008 05:46:08 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Feb 2008 21:46:08 -0800
X-ASF-Spam-Status: No, hits=-1.0 required=10.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [61.95.162.82] (HELO kecgate06.infosys.com) (61.95.162.82)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 16 Feb 2008 05:45:23 +0000
Received: from indhubbhs04.ad.infosys.com ([192.168.200.84]) by kecgate06.infosys.com with InterScan Message Security Suite; Sat, 16 Feb 2008 11:16:17 +0530
Received: from blrkechub01.ad.infosys.com ([10.66.236.41]) by indhubbhs04.ad.infosys.com with Microsoft SMTPSVC(6.0.3790.3959);
	 Sat, 16 Feb 2008 11:15:41 +0530
Received: from BLRKECMBX06.ad.infosys.com ([10.66.236.32]) by
 blrkechub01.ad.infosys.com ([10.66.236.41]) with mapi; Sat, 16 Feb 2008
 11:15:40 +0530
From: Allahbaksh Mohammedali Asadullah <Allahbaksh_Asadullah@infosys.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Sat, 16 Feb 2008 11:15:39 +0530
Subject: RE: Boost value corrupted "read eof exception"
Thread-Topic: Boost value corrupted "read eof exception"
Thread-Index: AchwDTYyVuPMwZOlTVGWT6SHtMRgsgAUQMaA
Message-ID: <68959F25CDEBCB4F917D5A253291D73E07CDAC3CB9@BLRKECMBX06.ad.infosys.com>
References: <68959F25CDEBCB4F917D5A253291D73E07CDAC3CAD@BLRKECMBX06.ad.infos
	ys.com> <6B028357-D045-4387-B1E5-78063A882054@mikemccandless.com>
 	<68959F25CDEBCB4F917D5A253291D73E07CDAC3CB1@BLRKECMBX06.ad.infosys.com><9ac
	0c6aa0802151142v651688bdg689d23cab9c8afb6@mail.gmail.com>
 <Pine.LNX.4.62.0802151151360.1477@radix.cryptio.net>
In-Reply-To: <Pine.LNX.4.62.0802151151360.1477@radix.cryptio.net>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0
X-OriginalArrivalTime: 16 Feb 2008 05:45:41.0568 (UTC) FILETIME=[2A675C00:01C8705F]
X-Virus-Checked: Checked by ClamAV on apache.org



Hi Chris and Mike,
Thanks for your help.
Chis you got me right for both points. Sorry that I could not put my=
 queries properly.  As I can't set and get boost value I have to do my=
 implementation some other way. Please help me in the same


I have a three column table which I am trying to save in Lucene. Once=
 lucene gets me the matching field value then I want to get the value=
 weight. So in general I don't want to search by weight.

My Table structure is like below

Doc 1           Field Value           Weight age
Field1          value1                  0.6
Field2          value2                  0.8


Doc 1           Field Value           Weight age
Field1          value3                  0.3
Field3          value5                  0.25


Thanks in advance.
Warm Regards,
Allahbaksh




-----Original Message-----
From: Chris Hostetter [mailto:hossman_lucene@fucit.org]
Sent: Saturday, February 16, 2008 1:28 AM
To: java-user@lucene.apache.org
Subject: Re: Boost value corrupted "read eof exception"


Reading between the lines, I suspect two things are happening here, both
of which seems like missunderstandings ...

1) i think the IOException seen while debugging is refering to an
exception which is handled internally in Lucene and is not actually a
problem -- but Allahbaksh is seeing it when stepping through his program
with a debugger.  Unless the exception is rethrown and your code is
catching it, you can ignore it ... there are places in the Lucene code
where exceptions may happen because of filesystem changes and but Lucene
can and does catch them and deal with them appropriately so you don't have
to.

2) i believe the refrences to boost values is about trying to call
getBoost() on a field or document after getting the document returned from
a search.  this is not something that will ever work, please read the
javadocs for getBoost().

...if i am wrong about my interpretation of either of these issues, please
ignore me and clarify the issues.



: Allahbaksh Mohammedali Asadullah <Allahbaksh_Asadullah@infosys.com>=
 wrote:
: >
: > Hi,
: > Thanks for your valuable time.Could you get the same boost value what=
 you
: > had stored. In my case I always get boost value as 1 ie. Default value.=
 When
: > I debug it goes through IOException though it does not show any=
 Exception on
: > the console in eclipse.
:
:
: Sorry, I don't understand what the problem is with the boost.  Can you=
 turn
: this into a unit test that fails?  That would make the issue clearer.
:
: I also don't understand the exception you are seeing with debugging.  If=
 you
: could make that exception occur in a unit test that would be great too.
:
: Mike
:



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


**************** CAUTION - Disclaimer *****************
This e-mail contains PRIVILEGED AND CONFIDENTIAL INFORMATION intended=
 solely for the use of the addressee(s). If you are not the intended=
 recipient, please notify the sender by e-mail and delete the original=
 message. Further, you are not to copy, disclose, or distribute this e-mail=
 or its contents to any other person and any such actions are unlawful.=
 This e-mail may contain viruses. Infosys has taken every reasonable=
 precaution to minimize this risk, but is not liable for any damage you may=
 sustain as a result of any virus in this e-mail. You should carry out your=
 own virus checks before opening the e-mail or attachment. Infosys reserves=
 the right to monitor and review the content of all messages sent to or=
 from this e-mail address. Messages sent to or from this e-mail address may=
 be stored on the Infosys e-mail system.
***INFOSYS******** End of Disclaimer ********INFOSYS***

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32648-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Feb 16 09:32:54 2008
Return-Path: <java-user-return-32648-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 27497 invoked from network); 16 Feb 2008 09:32:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Feb 2008 09:32:54 -0000
Received: (qmail 16073 invoked by uid 500); 16 Feb 2008 09:32:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16043 invoked by uid 500); 16 Feb 2008 09:32:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16032 invoked by uid 99); 16 Feb 2008 09:32:41 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 16 Feb 2008 01:32:41 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of zaexage@gmail.com designates 209.85.146.180 as permitted sender)
Received: from [209.85.146.180] (HELO wa-out-1112.google.com) (209.85.146.180)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 16 Feb 2008 09:32:10 +0000
Received: by wa-out-1112.google.com with SMTP id j40so1750699wah.11
        for <java-user@lucene.apache.org>; Sat, 16 Feb 2008 01:32:18 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        bh=5OigOdo6IuH4lShJszKUfAG1oNuxFC6e59YYo+JJ1tM=;
        b=CXMz6Tg104po4Ziq7PbDpFaUlrVE0dmF39P8bnDZylDPT3mjW/wNGYNvdDNMJbnrzVo5uc0fvOIe84PJWyomhit7/YVUW7Bo5qjcSgQxQ8pOk7fh1KwDGo7cLIMHbKoCNgO1HJCi7jJBJ/2J/89HedPSPOrWdoBKBxxF2cy7Ll8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=hfruMgAZoFDNnzlpoCG7WX/uNRzvmUPuhymAT6IZQL3UXaglmrKsxRQ8M7hzTQ/gkgn29znk4HyaB0leVesWsPBFrPT4/6mp6upzCmZTDtK98w086W5YOu1hK4XcTYblQzh/zbQZUCKn6+YF46u8YFap1W5jP7ETH/VwiQ9OeIc=
Received: by 10.114.124.1 with SMTP id w1mr4025459wac.114.1203154338622;
        Sat, 16 Feb 2008 01:32:18 -0800 (PST)
Received: by 10.114.152.15 with HTTP; Sat, 16 Feb 2008 01:32:18 -0800 (PST)
Message-ID: <2c5080560802160132m791a8f67o5a3033d374d4be29@mail.gmail.com>
Date: Sat, 16 Feb 2008 17:32:18 +0800
From: ZaeX <zaexage@gmail.com>
To: java-user@lucene.apache.org
Subject: how to safely periodically reopen the IndexReader?
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_1307_3580555.1203154338615"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_1307_3580555.1203154338615
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi, all

I've got a question here needing your help:
For my index, I opened one IndexWriter (autocommit mode) and one
IndexSearcher on it;
I have quite a lot of threads here concurrently writing new documents and
doing search in index.
the IndexWriter is flushed periodically.
as I want the IndexSearcher be able to see the latest record, I also need to
periodically reopen the underlying IndexReader.

But is it safe to just call close() on the IndexSearcher when there are
still threads using it?

or maybe I should use atomic counter to make sure there's no thread using it
before calling close() on IndexSearcher?

thanks.

------=_Part_1307_3580555.1203154338615--

From java-user-return-32649-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Feb 16 11:56:17 2008
Return-Path: <java-user-return-32649-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70483 invoked from network); 16 Feb 2008 11:56:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Feb 2008 11:56:17 -0000
Received: (qmail 82505 invoked by uid 500); 16 Feb 2008 11:56:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82462 invoked by uid 500); 16 Feb 2008 11:56:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82451 invoked by uid 99); 16 Feb 2008 11:56:05 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 16 Feb 2008 03:56:05 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.132.250] (HELO an-out-0708.google.com) (209.85.132.250)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 16 Feb 2008 11:55:33 +0000
Received: by an-out-0708.google.com with SMTP id c5so224217anc.49
        for <java-user@lucene.apache.org>; Sat, 16 Feb 2008 03:55:39 -0800 (PST)
Received: by 10.100.195.15 with SMTP id s15mr6187041anf.61.1203162939577;
        Sat, 16 Feb 2008 03:55:39 -0800 (PST)
Received: by 10.100.135.6 with HTTP; Sat, 16 Feb 2008 03:55:39 -0800 (PST)
Message-ID: <9ac0c6aa0802160355l580bdfb8j376b6d252d4d95a2@mail.gmail.com>
Date: Sat, 16 Feb 2008 06:55:39 -0500
From: "Michael McCandless" <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Subject: Re: Boost value corrupted "read eof exception"
In-Reply-To: <68959F25CDEBCB4F917D5A253291D73E07CDAC3CB9@BLRKECMBX06.ad.infosys.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <6B028357-D045-4387-B1E5-78063A882054@mikemccandless.com>
	 <68959F25CDEBCB4F917D5A253291D73E07CDAC3CB1@BLRKECMBX06.ad.infosys.com>
	 <Pine.LNX.4.62.0802151151360.1477@radix.cryptio.net>
	 <68959F25CDEBCB4F917D5A253291D73E07CDAC3CB9@BLRKECMBX06.ad.infosys.com>
X-Virus-Checked: Checked by ClamAV on apache.org

You can use a separate unindexed, stored fields for this? Ie add
fields "field 1 weight age", "field 2 weight age", etc, and store that
float value (as a string) in there?

Mike

Allahbaksh Mohammedali Asadullah <Allahbaksh_Asadullah@infosys.com> wrote:
>
>
> Hi Chris and Mike,
> Thanks for your help.
> Chis you got me right for both points. Sorry that I could not put my queries properly.  As I can't set and get boost value I have to do my implementation some other way. Please help me in the same
>
>
> I have a three column table which I am trying to save in Lucene. Once lucene gets me the matching field value then I want to get the value weight. So in general I don't want to search by weight.
>
> My Table structure is like below
>
> Doc 1           Field Value           Weight age
> Field1          value1                  0.6
> Field2          value2                  0.8
>
>
> Doc 1           Field Value           Weight age
> Field1          value3                  0.3
> Field3          value5                  0.25
>
>
> Thanks in advance.
> Warm Regards,
> Allahbaksh

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32650-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Feb 16 14:42:46 2008
Return-Path: <java-user-return-32650-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22940 invoked from network); 16 Feb 2008 14:42:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Feb 2008 14:42:46 -0000
Received: (qmail 32498 invoked by uid 500); 16 Feb 2008 14:42:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31507 invoked by uid 500); 16 Feb 2008 14:42:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31487 invoked by uid 99); 16 Feb 2008 14:42:32 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 16 Feb 2008 06:42:32 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of spring@gmx.eu designates 213.165.64.20 as permitted sender)
Received: from [213.165.64.20] (HELO mail.gmx.net) (213.165.64.20)
    by apache.org (qpsmtpd/0.29) with SMTP; Sat, 16 Feb 2008 14:41:22 +0000
Received: (qmail invoked by alias); 16 Feb 2008 14:41:43 -0000
Received: from e178125224.adsl.alicedsl.de (EHLO msrvcn04) [85.178.125.224]
  by mail.gmx.net (mp024) with SMTP; 16 Feb 2008 15:41:43 +0100
X-Authenticated: #2635966
X-Provags-ID: V01U2FsdGVkX18voQIRctUvacPx/0hKol1WFa/c4jIuadVMZcPHZY
	z4DtQeyA156tAT
From: <spring@gmx.eu>
To: <java-user@lucene.apache.org>
Subject: Searching multiple indexes
Date: Sat, 16 Feb 2008 15:41:45 +0100
Message-ID: <40CDB8FB060446B0AB05DF697FEA029F@msrvcn04>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.3790.4133
Thread-Index: AchwqcBPvGDsECFZTUW/hwxvCZ7bdQ==
X-Y-GMX-Trusted: 0
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

I have some questions about searching multiple indexes.

1. IndexSearcher with a MultiReader will search the indexes sequentially?

2. ParallelMultiSearcher searches in parallel. How is this done? One thread
per index? When will it return? When the slowest search is fineshed?

3. When I have to search indexes created with different analyzers (maybe a
french and a german analyzer), I have to search them separately by my own?

Thank you.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32651-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Feb 17 05:17:30 2008
Return-Path: <java-user-return-32651-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95110 invoked from network); 17 Feb 2008 05:17:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Feb 2008 05:17:30 -0000
Received: (qmail 87142 invoked by uid 500); 17 Feb 2008 05:17:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87099 invoked by uid 500); 17 Feb 2008 05:17:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87088 invoked by uid 99); 17 Feb 2008 05:17:18 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 16 Feb 2008 21:17:18 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [65.89.232.7] (HELO thebluezone.net) (65.89.232.7)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 17 Feb 2008 05:16:32 +0000
Received: from localhost (localhost [127.0.0.1])
	by thebluezone.net (Postfix) with ESMTP id 345F8286BE7
	for <java-user@lucene.apache.org>; Sat, 16 Feb 2008 22:16:51 -0700 (MST)
Received: from thebluezone.net ([127.0.0.1])
	by localhost (mail1 [127.0.0.1]) (amavisd-new, port 10024) with ESMTP
	id 24441-02 for <java-user@lucene.apache.org>;
	Sat, 16 Feb 2008 22:16:49 -0700 (MST)
Received: from desktop (unknown [65.89.233.61])
	by thebluezone.net (Postfix) with ESMTP id 5F3AB286BF9
	for <java-user@lucene.apache.org>; Sat, 16 Feb 2008 22:16:49 -0700 (MST)
From: "John Griffin" <jgriffin@thebluezone.net>
To: <java-user@lucene.apache.org>
References: <2c5080560802160132m791a8f67o5a3033d374d4be29@mail.gmail.com>
Subject: RE: how to safely periodically reopen the IndexReader?
Date: Sat, 16 Feb 2008 22:16:41 -0700
Message-ID: <000701c87124$47e35020$f13c10ac@desktop>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
Thread-Index: AchwfvZFHXNyJ7iSSoa8Ej5GktBWggApPnwg
In-Reply-To: <2c5080560802160132m791a8f67o5a3033d374d4be29@mail.gmail.com>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3198
X-Virus-Scanned: by thebluezone.net
X-Virus-Checked: Checked by ClamAV on apache.org

Your users won't appreciate your closing the searcher on them. That is, if
you have a highly concurrent system.

I don't know about 2.3.0 yet. Haven't had much chance to see the changes but
with 2.2.0 I use an atomic counter. It's not that much to program.

Regards,
John G.


-----Original Message-----
From: ZaeX [mailto:zaexage@gmail.com] 
Sent: Saturday, February 16, 2008 2:32 AM
To: java-user@lucene.apache.org
Subject: how to safely periodically reopen the IndexReader?

Hi, all

I've got a question here needing your help:
For my index, I opened one IndexWriter (autocommit mode) and one
IndexSearcher on it;
I have quite a lot of threads here concurrently writing new documents and
doing search in index.
the IndexWriter is flushed periodically.
as I want the IndexSearcher be able to see the latest record, I also need to
periodically reopen the underlying IndexReader.

But is it safe to just call close() on the IndexSearcher when there are
still threads using it?

or maybe I should use atomic counter to make sure there's no thread using it
before calling close() on IndexSearcher?

thanks.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32652-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Feb 17 10:22:38 2008
Return-Path: <java-user-return-32652-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31400 invoked from network); 17 Feb 2008 10:22:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Feb 2008 10:22:38 -0000
Received: (qmail 90706 invoked by uid 500); 17 Feb 2008 10:22:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90674 invoked by uid 500); 17 Feb 2008 10:22:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90661 invoked by uid 99); 17 Feb 2008 10:22:26 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 17 Feb 2008 02:22:26 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of stephane.nicoll@gmail.com designates 66.249.92.173 as permitted sender)
Received: from [66.249.92.173] (HELO ug-out-1314.google.com) (66.249.92.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 17 Feb 2008 10:21:54 +0000
Received: by ug-out-1314.google.com with SMTP id u40so118909ugc.29
        for <java-user@lucene.apache.org>; Sun, 17 Feb 2008 02:22:01 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        bh=ZZOeUi2TxLoZ1ZDMJOIUlMG8AOV8DMtAgp5tnSsUViI=;
        b=k8OdRkxJjbHbF3K+BoTlVwN87pbeSpsXPr5KCl0aGYin4ckzuDe/Dj2IDAljb7O9Z2QpK9AAUeqD3nZktoY9Os+m3jVCHeLUT1oOpuVot3cX7PtiUb9LP0zgxH2Ui38BWFXcLSNt24j4cio+2xHVJj2jl8ptVXJWyX2UaDAhdNE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=KUrnkmBk3pRksn31k/yCfcXuDECmahIoUt09/Wi7u2gBiWQXr03O8GaV5/cKHSQCtlYH+A0+zBlfWTLIy1A2UW6Rh4uX3vVMpnDijg8otgSyHk8sZuMNLxJnBz0XXpxQux6ito1Jvyz+yRM2T6JPzef7Rr25Jp0hdfJ80XHF6XA=
Received: by 10.67.15.8 with SMTP id s8mr1749352ugi.42.1203243721420;
        Sun, 17 Feb 2008 02:22:01 -0800 (PST)
Received: by 10.67.32.16 with HTTP; Sun, 17 Feb 2008 02:22:01 -0800 (PST)
Message-ID: <541f12ca0802170222g2f0b99fbl41c2e930609429e6@mail.gmail.com>
Date: Sun, 17 Feb 2008 11:22:01 +0100
From: "Stephane Nicoll" <stephane.nicoll@gmail.com>
To: java-user@lucene.apache.org
Subject: Using lucene with a Geospatial catalog
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

I've been browsing the archive and the documentation about Lucene. It
really seems that it could help implementing my use case but I would
like to be sure first.

What I need is to be able to search data in a "catalog" which is
geo-enabled. The data is stored in a database. A record has namely

* name
* keywords
* footprint (that is a geometry that represents the record)
* date range (optional) that defines the "validity of the data"
* Timestamp
* Creation date
* various boolean flag
* custom data

I understand that Lucene is powerful for full-text based search but
what about searching something like "give me all records that contains
the kewords foo, with flag bar true, valid between 20070602 and
20070907 and whose geometry intersect a given box.

I've seen on the list people using tricks by storing the coordinates
in a way we could use range. In my case, the geometry is potentially
very complex. The database handle that for me (Oracle Spatial or
PostGIS for instance) with intersect, contains and such. Is it
possible to combine a lucene search with a DB query? Any best
practices on that topic?

Thanks,
St=E9phane


--=20
Large Systems Suck: This rule is 100% transitive. If you build one,
you suck" -- S.Yegge

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32653-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Feb 17 11:44:02 2008
Return-Path: <java-user-return-32653-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 46860 invoked from network); 17 Feb 2008 11:44:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Feb 2008 11:44:02 -0000
Received: (qmail 33735 invoked by uid 500); 17 Feb 2008 11:43:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33701 invoked by uid 500); 17 Feb 2008 11:43:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33690 invoked by uid 99); 17 Feb 2008 11:43:50 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 17 Feb 2008 03:43:50 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of max@artsalliancelabs.com designates 66.92.91.130 as permitted sender)
Received: from [66.92.91.130] (HELO artsalliancelabs.com) (66.92.91.130)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 17 Feb 2008 11:43:15 +0000
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Using lucene with a Geospatial catalog
X-MimeOLE: Produced By Microsoft Exchange V6.5
Date: Sun, 17 Feb 2008 06:43:21 -0500
Message-ID: <E9DD5BE59E84CA4E87AE0E5E6F1B8B12381B41@sbsrv.AALabs.local>
In-Reply-To: <541f12ca0802170222g2f0b99fbl41c2e930609429e6@mail.gmail.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Using lucene with a Geospatial catalog
Thread-Index: AchxTwfk9wHzW0OmQ5qm71rX4moQmQACnRLw
References: <541f12ca0802170222g2f0b99fbl41c2e930609429e6@mail.gmail.com>
From: "Max Metral" <max@artsalliancelabs.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

We're doing this for our site (http://boston.povo.com) the simple way: =
have Lucene return all matches based on non-geo criteria and then fetch =
the items from the db by id and run our geo logic.  We store some =
"rough" positioning in Lucene, such as the region and use that for first =
level rejection.  (If your geometries can get artificially large then of =
course this doesn't fully work, but in that case perhaps you store =
"total area" or some flag that says this item spans a region.

We briefly considered a bounding box model for Lucene to do better first =
level rejection, but performance was more than good enough with the =
approach I outlined above for our corpus.

There's one thing we never implemented, which was calculating the =
minimum distance between two geometries (we almost always have one side =
of the comparison as a point).  Do you happen to know a reasonably =
speedy algorithm to do this?

Thanks!
--Max

-----Original Message-----
From: Stephane Nicoll [mailto:stephane.nicoll@gmail.com]=20
Sent: Sunday, February 17, 2008 5:22 AM
To: java-user@lucene.apache.org
Subject: Using lucene with a Geospatial catalog

Hi,

I've been browsing the archive and the documentation about Lucene. It
really seems that it could help implementing my use case but I would
like to be sure first.

What I need is to be able to search data in a "catalog" which is
geo-enabled. The data is stored in a database. A record has namely

* name
* keywords
* footprint (that is a geometry that represents the record)
* date range (optional) that defines the "validity of the data"
* Timestamp
* Creation date
* various boolean flag
* custom data

I understand that Lucene is powerful for full-text based search but
what about searching something like "give me all records that contains
the kewords foo, with flag bar true, valid between 20070602 and
20070907 and whose geometry intersect a given box.

I've seen on the list people using tricks by storing the coordinates
in a way we could use range. In my case, the geometry is potentially
very complex. The database handle that for me (Oracle Spatial or
PostGIS for instance) with intersect, contains and such. Is it
possible to combine a lucene search with a DB query? Any best
practices on that topic?

Thanks,
St=E9phane


--=20
Large Systems Suck: This rule is 100% transitive. If you build one,
you suck" -- S.Yegge

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32654-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Feb 17 11:48:50 2008
Return-Path: <java-user-return-32654-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47411 invoked from network); 17 Feb 2008 11:48:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Feb 2008 11:48:50 -0000
Received: (qmail 37268 invoked by uid 500); 17 Feb 2008 11:48:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37240 invoked by uid 500); 17 Feb 2008 11:48:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37229 invoked by uid 99); 17 Feb 2008 11:48:37 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 17 Feb 2008 03:48:37 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of stephane.nicoll@gmail.com designates 72.14.214.235 as permitted sender)
Received: from [72.14.214.235] (HELO hu-out-0506.google.com) (72.14.214.235)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 17 Feb 2008 11:48:03 +0000
Received: by hu-out-0506.google.com with SMTP id 27so547422hub.15
        for <java-user@lucene.apache.org>; Sun, 17 Feb 2008 03:48:10 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        bh=NBdIa/t5YZRhIlCntH17WUDyGU51w2ZsF8Ub+tEL5qc=;
        b=SHqqb3Yws02bcd3tirRjyY0ZaWua7iLJp+cQJBQZb/uy2Bqb1sx5QvfpoMo3wwj3AyBYM8n5Q5HOVjsLXKRPXzGW6Fk/Sqy7v9D+uYh9B08kV1qxE5wL65SCFXt8Ef+Vec0D0ZcrfFXjpsOpxPkzZqLaFP11v5d1ko952IZ/OwA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=HeWvHvla1sgCGlG5v01qWmEd58xeM1G6/7WL4g6thZKtWmaTDsLPQlYnJBQ9PgahL0nOYIjpkQlfJ81EH6NwuNlCz25KrGnfpWm1NdoLQRx2H7GWwNlZmCbMB5nwk+HGGwVmTWSM/9P/C7NyfPFN64PFsThfKdRvrUZm5FaniKc=
Received: by 10.67.115.13 with SMTP id s13mr1821880ugm.41.1203248885138;
        Sun, 17 Feb 2008 03:48:05 -0800 (PST)
Received: by 10.67.32.16 with HTTP; Sun, 17 Feb 2008 03:48:05 -0800 (PST)
Message-ID: <541f12ca0802170348u3b1a0587n57feb683e7ee3d4e@mail.gmail.com>
Date: Sun, 17 Feb 2008 12:48:05 +0100
From: "Stephane Nicoll" <stephane.nicoll@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Using lucene with a Geospatial catalog
In-Reply-To: <E9DD5BE59E84CA4E87AE0E5E6F1B8B12381B41@sbsrv.AALabs.local>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <541f12ca0802170222g2f0b99fbl41c2e930609429e6@mail.gmail.com>
	 <E9DD5BE59E84CA4E87AE0E5E6F1B8B12381B41@sbsrv.AALabs.local>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

Thanks for the fast answer. That's also what I sort of figured out by
searching on the web but it's good to know someone has implemented it
:)

The "rough" positioning is a very good idea, thanks. I am pretty sure
we have the kind of algorithm you are looking for but it is in a
commercial product. Ping me off list if you are interested.

St=E9phane

On Feb 17, 2008 12:43 PM, Max Metral <max@artsalliancelabs.com> wrote:
> We're doing this for our site (http://boston.povo.com) the simple way: ha=
ve Lucene return all matches based on non-geo criteria and then fetch the i=
tems from the db by id and run our geo logic.  We store some "rough" positi=
oning in Lucene, such as the region and use that for first level rejection.=
  (If your geometries can get artificially large then of course this doesn'=
t fully work, but in that case perhaps you store "total area" or some flag =
that says this item spans a region.
>
> We briefly considered a bounding box model for Lucene to do better first =
level rejection, but performance was more than good enough with the approac=
h I outlined above for our corpus.
>
> There's one thing we never implemented, which was calculating the minimum=
 distance between two geometries (we almost always have one side of the com=
parison as a point).  Do you happen to know a reasonably speedy algorithm t=
o do this?
>
> Thanks!
> --Max
>
>
> -----Original Message-----
> From: Stephane Nicoll [mailto:stephane.nicoll@gmail.com]
> Sent: Sunday, February 17, 2008 5:22 AM
> To: java-user@lucene.apache.org
> Subject: Using lucene with a Geospatial catalog
>
> Hi,
>
> I've been browsing the archive and the documentation about Lucene. It
> really seems that it could help implementing my use case but I would
> like to be sure first.
>
> What I need is to be able to search data in a "catalog" which is
> geo-enabled. The data is stored in a database. A record has namely
>
> * name
> * keywords
> * footprint (that is a geometry that represents the record)
> * date range (optional) that defines the "validity of the data"
> * Timestamp
> * Creation date
> * various boolean flag
> * custom data
>
> I understand that Lucene is powerful for full-text based search but
> what about searching something like "give me all records that contains
> the kewords foo, with flag bar true, valid between 20070602 and
> 20070907 and whose geometry intersect a given box.
>
> I've seen on the list people using tricks by storing the coordinates
> in a way we could use range. In my case, the geometry is potentially
> very complex. The database handle that for me (Oracle Spatial or
> PostGIS for instance) with intersect, contains and such. Is it
> possible to combine a lucene search with a DB query? Any best
> practices on that topic?
>
> Thanks,
> St=E9phane
>
>
> --
> Large Systems Suck: This rule is 100% transitive. If you build one,
> you suck" -- S.Yegge
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>



--=20
Large Systems Suck: This rule is 100% transitive. If you build one,
you suck" -- S.Yegge

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32655-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Feb 17 12:26:27 2008
Return-Path: <java-user-return-32655-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59348 invoked from network); 17 Feb 2008 12:26:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Feb 2008 12:26:26 -0000
Received: (qmail 50519 invoked by uid 500); 17 Feb 2008 12:26:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50483 invoked by uid 500); 17 Feb 2008 12:26:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50472 invoked by uid 99); 17 Feb 2008 12:26:14 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 17 Feb 2008 04:26:14 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of j-pieper@gmx.net designates 213.165.64.20 as permitted sender)
Received: from [213.165.64.20] (HELO mail.gmx.net) (213.165.64.20)
    by apache.org (qpsmtpd/0.29) with SMTP; Sun, 17 Feb 2008 12:25:29 +0000
Received: (qmail invoked by alias); 17 Feb 2008 12:25:49 -0000
Received: from p5B116CD9.dip.t-dialin.net (EHLO localhost.local) [91.17.108.217]
  by mail.gmx.net (mp013) with SMTP; 17 Feb 2008 13:25:49 +0100
X-Authenticated: #28177402
X-Provags-ID: V01U2FsdGVkX1+LPHAx0NeLiIAwmavtDipIN+PByB6u93IXlsWClP
	AfcSL+ys6qEpYJ
Message-ID: <47B82686.3000206@gmx.net>
Date: Sun, 17 Feb 2008 13:20:22 +0100
From: Jan Pieper <j-pieper@gmx.net>
User-Agent: Thunderbird 2.0.0.9 (X11/20071115)
MIME-Version: 1.0
To: Lucene Mailinglist <java-user@lucene.apache.org>
Subject: remote stored index
X-Enigmail-Version: 0.95.6
OpenPGP: id=51FD319E
Content-Type: text/plain; charset=ISO-8859-15; format=flowed
Content-Transfer-Encoding: 7bit
X-Y-GMX-Trusted: 0
X-Virus-Checked: Checked by ClamAV on apache.org

Hi guys,

I want to use lucene for my new application and I have to store my 
lucene index on another server than my client is running on. What is the 
best way to use the index? Only found RAMDirectory and FSDirectory in 
lucene package.

I read something about "download, manipulate and upload index" but I 
don't think that this is a good solution. Also read about an index server.

-- Jan

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32656-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Feb 17 14:18:19 2008
Return-Path: <java-user-return-32656-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81114 invoked from network); 17 Feb 2008 14:18:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Feb 2008 14:18:18 -0000
Received: (qmail 13907 invoked by uid 500); 17 Feb 2008 14:18:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13872 invoked by uid 500); 17 Feb 2008 14:18:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13861 invoked by uid 99); 17 Feb 2008 14:18:06 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 17 Feb 2008 06:18:06 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 72.14.214.226 as permitted sender)
Received: from [72.14.214.226] (HELO hu-out-0506.google.com) (72.14.214.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 17 Feb 2008 14:17:35 +0000
Received: by hu-out-0506.google.com with SMTP id 27so584581hub.15
        for <java-user@lucene.apache.org>; Sun, 17 Feb 2008 06:17:42 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=av0pibiqMKuHTRx/XSjgv6j6ahQ8GKmOceYm/NTzF/8=;
        b=mN5RGO3xArvS6xDHPM7Ps+PW3YAdA0lLUZl0LZNauHSCzzF+iEwSUBbQL/XgDTpgrFXe6SWaXwhl8gbCyyS1URHbm1WOTVuhEMho2GRkvpfTg0Lwl04Uz7ZRd2SpHPEPrNIHazrwZ17XajpLhP6IHMWEgNjT3bJnwShcXnH5TsQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=d0pZSW1TrN3m5Mv9x2WmqKhKr6QxI984ULAmEM0Q0CyomUMazVRPLHZw62qQ5NWfmQiM9hei4c1zAcc9EGm5UTY0oFCxX9stNj7LyiHTnivUTiJWq3ovsMK/Jh7nmrDswmJzXi2wXmvPMnrFv9EF5jqESDDZ9r98ZrvWym3H9p0=
Received: by 10.82.161.19 with SMTP id j19mr7947880bue.29.1203257861997;
        Sun, 17 Feb 2008 06:17:41 -0800 (PST)
Received: by 10.82.151.7 with HTTP; Sun, 17 Feb 2008 06:17:41 -0800 (PST)
Message-ID: <359a92830802170617m6d83de69wd961038941a37336@mail.gmail.com>
Date: Sun, 17 Feb 2008 09:17:41 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: remote stored index
In-Reply-To: <47B82686.3000206@gmx.net>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_2380_22148065.1203257861996"
References: <47B82686.3000206@gmx.net>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_2380_22148065.1203257861996
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

RAMdirectories are transient, they go away when your program
ends. They are suitable for small indexes that are created
on the fly etc.

An index written to disk (i.e. an FSDIr) is just a set of files. You
can freely copy them anywhere you want. Assuming you have an
index phase where the index is created, once that is finished you
can put it wherever you want.

In a client server situation, you need to have some transport layer
to go back and forth. We've had good results with XmlRpc. The
idea is that a client packages up the request in an XML packet
and sends it via XmlRpc to the server. The server analyzes
the packet, performs the search, and packs up an XML response
for the client.

XmlRpc was *very* easy for us to set up and use.

Best
Erick

On Feb 17, 2008 7:20 AM, Jan Pieper <j-pieper@gmx.net> wrote:

> Hi guys,
>
> I want to use lucene for my new application and I have to store my
> lucene index on another server than my client is running on. What is the
> best way to use the index? Only found RAMDirectory and FSDirectory in
> lucene package.
>
> I read something about "download, manipulate and upload index" but I
> don't think that this is a good solution. Also read about an index server.
>
> -- Jan
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_2380_22148065.1203257861996--

From java-user-return-32657-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Feb 17 14:21:34 2008
Return-Path: <java-user-return-32657-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81422 invoked from network); 17 Feb 2008 14:21:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Feb 2008 14:21:33 -0000
Received: (qmail 15879 invoked by uid 500); 17 Feb 2008 14:21:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15847 invoked by uid 500); 17 Feb 2008 14:21:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15836 invoked by uid 99); 17 Feb 2008 14:21:22 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 17 Feb 2008 06:21:22 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of shalinmangar@gmail.com designates 209.85.198.187 as permitted sender)
Received: from [209.85.198.187] (HELO rv-out-0910.google.com) (209.85.198.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 17 Feb 2008 14:20:50 +0000
Received: by rv-out-0910.google.com with SMTP id k20so1105891rvb.5
        for <java-user@lucene.apache.org>; Sun, 17 Feb 2008 06:20:58 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        bh=aCLZs578kwIsi9MFNEVPh7kdN7C2SpB1k5A4+T0NnY0=;
        b=EXAe4kaonXdqYaqKxWkxDhF3/mBCbbUkCB24/MIgBySvdJhOefP8JSgtaD9HTQxqp4KeO+BQF8JD/KCKCueD193avgA4QnZBl0u/XzKX2egL+wjs5+FZHpUcvGDkJ/ptgc6ti7lw182Ppd68o+qtTRgoiB+RodB3rFhGiPIF9Rc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=uHs6xdn/8z798swSifjV32mckGQblibE0Ohbeuu9wp7A4N+aA3Y+SDabfw/2Z8yyegoWqkprRBg2wl7O9yLnBIqLUcebhqW3WCd4HeQVj4UUOGXl3es7IKY7gka1g7rzXlsOcuLmTrvm/aNpSOiKQU5qoD3UWfMU+dNievwzlm0=
Received: by 10.141.99.4 with SMTP id b4mr3117731rvm.275.1203258058647;
        Sun, 17 Feb 2008 06:20:58 -0800 (PST)
Received: by 10.140.200.16 with HTTP; Sun, 17 Feb 2008 06:20:58 -0800 (PST)
Message-ID: <69de18140802170620k34286822u83e285ccb8840879@mail.gmail.com>
Date: Sun, 17 Feb 2008 19:50:58 +0530
From: "Shalin Shekhar Mangar" <shalinmangar@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: remote stored index
In-Reply-To: <47B82686.3000206@gmx.net>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <47B82686.3000206@gmx.net>
X-Virus-Checked: Checked by ClamAV on apache.org

I think using Apache Solr could be a good solution. It builds on top
of lucene and provides HTTP APIs to query/store data.

On Feb 17, 2008 5:50 PM, Jan Pieper <j-pieper@gmx.net> wrote:
> Hi guys,
>
> I want to use lucene for my new application and I have to store my
> lucene index on another server than my client is running on. What is the
> best way to use the index? Only found RAMDirectory and FSDirectory in
> lucene package.
>
> I read something about "download, manipulate and upload index" but I
> don't think that this is a good solution. Also read about an index server.
>
> -- Jan
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>



-- 
Regards,
Shalin Shekhar Mangar.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32658-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Feb 17 17:09:17 2008
Return-Path: <java-user-return-32658-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96914 invoked from network); 17 Feb 2008 17:09:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Feb 2008 17:09:17 -0000
Received: (qmail 17679 invoked by uid 500); 17 Feb 2008 17:09:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17653 invoked by uid 500); 17 Feb 2008 17:09:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17642 invoked by uid 99); 17 Feb 2008 17:09:04 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 17 Feb 2008 09:09:04 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [65.89.232.7] (HELO thebluezone.net) (65.89.232.7)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 17 Feb 2008 17:08:18 +0000
Received: from localhost (localhost [127.0.0.1])
	by thebluezone.net (Postfix) with ESMTP id DD81B286C4A
	for <java-user@lucene.apache.org>; Sun, 17 Feb 2008 10:08:37 -0700 (MST)
Received: from thebluezone.net ([127.0.0.1])
	by localhost (mail1 [127.0.0.1]) (amavisd-new, port 10024) with ESMTP
	id 24062-08 for <java-user@lucene.apache.org>;
	Sun, 17 Feb 2008 10:08:36 -0700 (MST)
Received: from desktop (unknown [65.89.233.61])
	by thebluezone.net (Postfix) with ESMTP id 13B5C286C34
	for <java-user@lucene.apache.org>; Sun, 17 Feb 2008 10:08:36 -0700 (MST)
From: "John Griffin" <jgriffin@thebluezone.net>
To: <java-user@lucene.apache.org>
References: <47B82686.3000206@gmx.net>
Subject: RE: remote stored index
Date: Sun, 17 Feb 2008 10:08:27 -0700
Message-ID: <000301c87187$b699de40$f13c10ac@desktop>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3198
In-Reply-To: <47B82686.3000206@gmx.net>
Thread-Index: AchxYGCCiMLeMWlNSKuLWioOff59GgAJy5+A
X-Virus-Scanned: by thebluezone.net
X-Virus-Checked: Checked by ClamAV on apache.org

Don't forget old, venerable RMI. We use it for multiple remote indexes and
it works well.

John G.

-----Original Message-----
From: Jan Pieper [mailto:j-pieper@gmx.net] 
Sent: Sunday, February 17, 2008 5:20 AM
To: Lucene Mailinglist
Subject: remote stored index

Hi guys,

I want to use lucene for my new application and I have to store my 
lucene index on another server than my client is running on. What is the 
best way to use the index? Only found RAMDirectory and FSDirectory in 
lucene package.

I read something about "download, manipulate and upload index" but I 
don't think that this is a good solution. Also read about an index server.

-- Jan

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32659-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 18 01:53:15 2008
Return-Path: <java-user-return-32659-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72411 invoked from network); 18 Feb 2008 01:53:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Feb 2008 01:53:15 -0000
Received: (qmail 52123 invoked by uid 500); 18 Feb 2008 01:53:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52094 invoked by uid 500); 18 Feb 2008 01:53:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52083 invoked by uid 99); 18 Feb 2008 01:53:03 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 17 Feb 2008 17:53:03 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of brianpdoyle@gmail.com designates 209.85.146.179 as permitted sender)
Received: from [209.85.146.179] (HELO wa-out-1112.google.com) (209.85.146.179)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Feb 2008 01:52:31 +0000
Received: by wa-out-1112.google.com with SMTP id j40so2704275wah.11
        for <java-user@lucene.apache.org>; Sun, 17 Feb 2008 17:52:39 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        bh=a42qXGuT7N4FDLmZnKVdfW1A9W2wKzIcHuWWsbcVbbo=;
        b=hnQKv0YIRXdQxXKOBm1Ng4qcHHDlvmAaQZcel1qWIp7AwOQRrMYfNzL9Nc46SJWo5xk5ir5wGD9N6T6IBOuBjf+LaP1krC+RGNjUujKVnhveMnG2EVooWDFuaiV4m6igGudvd5ypW71msBbPIH6/mSGwhcRzboDqaeMRoAFsajc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=afAkl3dxDK3kQs3+UtY0uBSp75i5gLUfas1qs/3CbXthtHK0y3qSS+M8X6++OwVVknnTdgeqChQR2l8FJwA6jUXjUryVEL0mWkhsg26MxvuN9D6hi9Xw4S7XSRlF+93t6PH43UGTmFknCdsCfUrPPqcFMwEVjDXplJL24zWkCTY=
Received: by 10.114.61.1 with SMTP id j1mr954968waa.62.1203299559227;
        Sun, 17 Feb 2008 17:52:39 -0800 (PST)
Received: by 10.114.182.18 with HTTP; Sun, 17 Feb 2008 17:52:39 -0800 (PST)
Message-ID: <a2c7a60e0802171752p51527a6dofa42f4c42523131a@mail.gmail.com>
Date: Sun, 17 Feb 2008 18:52:39 -0700
From: "Brian Doyle" <brianpdoyle@gmail.com>
To: java-user@lucene.apache.org
Subject: custom sort and out of memory
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_10475_22580704.1203299559222"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_10475_22580704.1203299559222
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

We've written our own custom sorter to be able to sort on the latitude and
longitude fields from the results.   We have an index that is about
18million records and 12GB on disk in size.  We allocated about 3GB of heap
to the index and with about 1 request to the index every 2 or 3 seconds we
would run out of memory about once every 1.5 hours.   We modified our custom
sort comparators to implement the equals and hashcode methods and used a
WeakHashMap to cache the doc ids to and their lat/lon values. We ran some
tests and it started to reuse those comparators and now it will go for maybe
6 to 9 hours before running out of memory, however, it's still running out
of memory.

The only other object that isn't in our sorter, that isn't in the
WeakHashMap is an instance of the index reader. We use that reader as
instance variable in order to get the latitude and longitude values to sort
on.   Could having a reference to the index reader be causing the memory
leak?   We were considering making the instance of the index reader a
WeakReference.    When we did some profiling we noticed that before it runs
out of memory and the org.apache.lucene.search.FieldSortedHitQueue class was
taking up 331MB and the org.apache.lucene.index.IndexReader[23] class was
taking up 111MB of memory.   The [23] means it there were 23 instances.

------=_Part_10475_22580704.1203299559222--

From java-user-return-32660-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 18 12:08:54 2008
Return-Path: <java-user-return-32660-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 55020 invoked from network); 18 Feb 2008 12:08:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Feb 2008 12:08:53 -0000
Received: (qmail 30199 invoked by uid 500); 18 Feb 2008 12:08:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30164 invoked by uid 500); 18 Feb 2008 12:08:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30153 invoked by uid 99); 18 Feb 2008 12:08:40 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Feb 2008 04:08:40 -0800
X-ASF-Spam-Status: No, hits=3.7 required=10.0
	tests=DNS_FROM_OPENWHOIS,FORGED_HOTMAIL_RCVD2,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Feb 2008 12:08:07 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1JR4n9-0004HQ-MG
	for java-user@lucene.apache.org; Mon, 18 Feb 2008 04:08:15 -0800
Message-ID: <15543843.post@talk.nabble.com>
Date: Mon, 18 Feb 2008 04:08:15 -0800 (PST)
From: kratoras <kratoras@hotmail.com>
To: java-user@lucene.apache.org
Subject: Problem using Lucene on Ubuntu
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: kratoras@hotmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hello!
I ve written a sample application which indexes documents written in Greek
using the GreekAnalyzer and search these documents with both greek and
english words. Though on Windows the searching returns correct results, if i
try it on Ubuntu the searching does not return any results for any greek
word but it continues to search for english words. Could it be a problem of
fonts in my ubuntu or what?Greek fonts are installed though. 

Thanks for any answers in advance
-- 
View this message in context: http://www.nabble.com/Problem-using-Lucene-on-Ubuntu-tp15543843p15543843.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32661-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 18 12:24:40 2008
Return-Path: <java-user-return-32661-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65645 invoked from network); 18 Feb 2008 12:24:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Feb 2008 12:24:40 -0000
Received: (qmail 46555 invoked by uid 500); 18 Feb 2008 12:24:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46523 invoked by uid 500); 18 Feb 2008 12:24:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46512 invoked by uid 99); 18 Feb 2008 12:24:29 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Feb 2008 04:24:29 -0800
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=SPF_NEUTRAL,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.81] (HELO spunkymail-a10.g.dreamhost.com) (208.97.132.81)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Feb 2008 12:23:55 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a10.g.dreamhost.com (Postfix) with ESMTP id 380BC1636CC
	for <java-user@lucene.apache.org>; Mon, 18 Feb 2008 04:24:03 -0800 (PST)
Message-Id: <B435B8A7-B174-4E75-A184-9CED7EF2AA2F@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <15543843.post@talk.nabble.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v919.2)
Subject: Re: Problem using Lucene on Ubuntu
Date: Mon, 18 Feb 2008 07:24:01 -0500
References: <15543843.post@talk.nabble.com>
X-Mailer: Apple Mail (2.919.2)
X-Virus-Checked: Checked by ClamAV on apache.org

This question is best asked on java-user.  However, my guess is that  
it is related to your Locale and that you need to set the character  
encoding to Greek on Ubuntu when reading in your files.

Something like:  Reader reader = new InputStreamReader(new  
FileInputStream(file), "GREEK Char Encoding here");

-Grant

On Feb 18, 2008, at 7:08 AM, kratoras wrote:

>
> Hello!
> I ve written a sample application which indexes documents written in  
> Greek
> using the GreekAnalyzer and search these documents with both greek and
> english words. Though on Windows the searching returns correct  
> results, if i
> try it on Ubuntu the searching does not return any results for any  
> greek
> word but it continues to search for english words. Could it be a  
> problem of
> fonts in my ubuntu or what?Greek fonts are installed though.
>
> Thanks for any answers in advance
> -- 
> View this message in context: http://www.nabble.com/Problem-using-Lucene-on-Ubuntu-tp15543843p15543843.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

--------------------------
Grant Ingersoll
http://lucene.grantingersoll.com
http://www.lucenebootcamp.com

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32662-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 18 12:44:37 2008
Return-Path: <java-user-return-32662-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73405 invoked from network); 18 Feb 2008 12:44:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Feb 2008 12:44:37 -0000
Received: (qmail 79995 invoked by uid 500); 18 Feb 2008 12:44:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79971 invoked by uid 500); 18 Feb 2008 12:44:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79960 invoked by uid 99); 18 Feb 2008 12:44:25 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Feb 2008 04:44:25 -0800
X-ASF-Spam-Status: No, hits=3.7 required=10.0
	tests=DNS_FROM_OPENWHOIS,FORGED_HOTMAIL_RCVD2,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Feb 2008 12:43:52 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1JR5Lk-0005Sx-Tb
	for java-user@lucene.apache.org; Mon, 18 Feb 2008 04:44:00 -0800
Message-ID: <15544612.post@talk.nabble.com>
Date: Mon, 18 Feb 2008 04:44:00 -0800 (PST)
From: kratoras <kratoras@hotmail.com>
To: java-user@lucene.apache.org
Subject: Re: Problem using Lucene on Ubuntu
In-Reply-To: <B435B8A7-B174-4E75-A184-9CED7EF2AA2F@apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: kratoras@hotmail.com
References: <15543843.post@talk.nabble.com> <B435B8A7-B174-4E75-A184-9CED7EF2AA2F@apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org


Actually what i figured out just now is that the problem is on the indexing
part. A document with a 15MB size is transformed in a 23MB index which is
not normal since on windows for the same document the index is 3MB. For the
indexing i use:
writer = new IndexWriter(index, new GreekAnalyzer(), !index.exists());
and to add documents:
doc.add(new
Field("contents",content,Field.Store.YES,Field.Index.TOKENIZED));

where "content" is a string with the content of the document. Should i
convert this string to UTF-8 using getBytes before i write it to the index??

-- 
View this message in context: http://www.nabble.com/Problem-using-Lucene-on-Ubuntu-tp15543843p15544612.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32663-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 18 12:57:31 2008
Return-Path: <java-user-return-32663-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79495 invoked from network); 18 Feb 2008 12:57:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Feb 2008 12:57:31 -0000
Received: (qmail 97711 invoked by uid 500); 18 Feb 2008 12:57:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97648 invoked by uid 500); 18 Feb 2008 12:57:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97637 invoked by uid 99); 18 Feb 2008 12:57:18 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Feb 2008 04:57:18 -0800
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=SPF_NEUTRAL,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [208.97.132.66] (HELO spunkymail-a19.g.dreamhost.com) (208.97.132.66)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Feb 2008 12:56:31 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a19.g.dreamhost.com (Postfix) with ESMTP id A6C81110E1
	for <java-user@lucene.apache.org>; Mon, 18 Feb 2008 04:56:50 -0800 (PST)
Message-Id: <F43E0254-D1C8-4987-9CD0-1C9F1C93882D@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <15544612.post@talk.nabble.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v919.2)
Subject: Re: Problem using Lucene on Ubuntu
Date: Mon, 18 Feb 2008 07:56:49 -0500
References: <15543843.post@talk.nabble.com> <B435B8A7-B174-4E75-A184-9CED7EF2AA2F@apache.org> <15544612.post@talk.nabble.com>
X-Mailer: Apple Mail (2.919.2)
X-Virus-Checked: Checked by ClamAV on apache.org

How are you loading the document into the content variable below?  My  
guess is still that you have different locales on Windows and Ubuntu.

(Btw, sorry about the java-user comment.  I should wake up before  
sending responses.  For some reason I thought the email was sent to  
java-dev)

-Grant

On Feb 18, 2008, at 7:44 AM, kratoras wrote:

>
> Actually what i figured out just now is that the problem is on the  
> indexing
> part. A document with a 15MB size is transformed in a 23MB index  
> which is
> not normal since on windows for the same document the index is 3MB.  
> For the
> indexing i use:
> writer = new IndexWriter(index, new GreekAnalyzer(), !index.exists());
> and to add documents:
> doc.add(new
> Field("contents",content,Field.Store.YES,Field.Index.TOKENIZED));
>
> where "content" is a string with the content of the document. Should i
> convert this string to UTF-8 using getBytes before i write it to the  
> index??
>
> -- 
> View this message in context: http://www.nabble.com/Problem-using-Lucene-on-Ubuntu-tp15543843p15544612.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

--------------------------
Grant Ingersoll
http://lucene.grantingersoll.com
http://www.lucenebootcamp.com

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32664-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 18 13:13:48 2008
Return-Path: <java-user-return-32664-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85258 invoked from network); 18 Feb 2008 13:13:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Feb 2008 13:13:48 -0000
Received: (qmail 25127 invoked by uid 500); 18 Feb 2008 13:13:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25103 invoked by uid 500); 18 Feb 2008 13:13:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25069 invoked by uid 99); 18 Feb 2008 13:13:35 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Feb 2008 05:13:35 -0800
X-ASF-Spam-Status: No, hits=3.7 required=10.0
	tests=DNS_FROM_OPENWHOIS,FORGED_HOTMAIL_RCVD2,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Feb 2008 13:12:49 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1JR5nx-0006fy-Cf
	for java-user@lucene.apache.org; Mon, 18 Feb 2008 05:13:09 -0800
Message-ID: <15545082.post@talk.nabble.com>
Date: Mon, 18 Feb 2008 05:13:09 -0800 (PST)
From: kratoras <kratoras@hotmail.com>
To: java-user@lucene.apache.org
Subject: Re: Problem using Lucene on Ubuntu
In-Reply-To: <F43E0254-D1C8-4987-9CD0-1C9F1C93882D@apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: kratoras@hotmail.com
References: <15543843.post@talk.nabble.com> <B435B8A7-B174-4E75-A184-9CED7EF2AA2F@apache.org> <15544612.post@talk.nabble.com> <F43E0254-D1C8-4987-9CD0-1C9F1C93882D@apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org


No problem about the misunderstanding.
I am using 

InputStream input =new URL (  "file:///"+file.getAbsolutePath() 
).openStream ();
WordExtractor  extractor = new WordExtractor(input);
content=extractor.getText();

where the wordextractor is org.apache.poi.hwpf.extractor.WordExtractor;

The wordextractor takes an inputstream as an arguement. Should i determine
the encoding of the inputstream and how?
-- 
View this message in context: http://www.nabble.com/Problem-using-Lucene-on-Ubuntu-tp15543843p15545082.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32665-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 18 13:45:29 2008
Return-Path: <java-user-return-32665-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99920 invoked from network); 18 Feb 2008 13:45:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Feb 2008 13:45:29 -0000
Received: (qmail 80702 invoked by uid 500); 18 Feb 2008 13:45:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80358 invoked by uid 500); 18 Feb 2008 13:45:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80347 invoked by uid 99); 18 Feb 2008 13:45:17 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Feb 2008 05:45:17 -0800
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=SPF_NEUTRAL,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [208.97.132.5] (HELO spunkymail-a4.g.dreamhost.com) (208.97.132.5)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Feb 2008 13:44:28 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a4.g.dreamhost.com (Postfix) with ESMTP id 938543BA1D
	for <java-user@lucene.apache.org>; Mon, 18 Feb 2008 05:44:45 -0800 (PST)
Message-Id: <6D008CBC-D952-4368-AEF8-FA541FF4448C@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <15545082.post@talk.nabble.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v919.2)
Subject: Re: Problem using Lucene on Ubuntu
Date: Mon, 18 Feb 2008 08:44:45 -0500
References: <15543843.post@talk.nabble.com> <B435B8A7-B174-4E75-A184-9CED7EF2AA2F@apache.org> <15544612.post@talk.nabble.com> <F43E0254-D1C8-4987-9CD0-1C9F1C93882D@apache.org> <15545082.post@talk.nabble.com>
X-Mailer: Apple Mail (2.919.2)
X-Virus-Checked: Checked by ClamAV on apache.org

Not sure about WordExtractor, does it also take a Reader?  I would try:

Reader input = new InputStreamReader(new FileInputStream(file),  
"ENCODING");
WordExtractor extractor = new WordExtractor(input);
content = extractor.getText();

Note: ENCODING is whatever encoding the file is in, as in "UTF-8", if  
that is what your files are in.  If you don't know the encoding, you  
will need to add in some type of character encoding detection tool.   
Search the web for that, as I know there are some out there (I don't  
know any names off hand).

Bottom line, it sounds like you need to figure out how to load your  
files based on their encoding.  That problem is not really core to  
Lucene, but you should be able to search the archives here to find  
others with similar questions.

-Grant

On Feb 18, 2008, at 8:13 AM, kratoras wrote:

>
> No problem about the misunderstanding.
> I am using
>
> InputStream input =new URL (  "file:///"+file.getAbsolutePath()
> ).openStream ();
> WordExtractor  extractor = new WordExtractor(input);
> content=extractor.getText();
>
> where the wordextractor is  
> org.apache.poi.hwpf.extractor.WordExtractor;
>
> The wordextractor takes an inputstream as an arguement. Should i  
> determine
> the encoding of the inputstream and how?
> -- 
> View this message in context: http://www.nabble.com/Problem-using-Lucene-on-Ubuntu-tp15543843p15545082.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

--------------------------
Grant Ingersoll
http://lucene.grantingersoll.com
http://www.lucenebootcamp.com

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32666-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 18 14:01:20 2008
Return-Path: <java-user-return-32666-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10625 invoked from network); 18 Feb 2008 14:01:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Feb 2008 14:01:20 -0000
Received: (qmail 8764 invoked by uid 500); 18 Feb 2008 14:01:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8727 invoked by uid 500); 18 Feb 2008 14:01:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8716 invoked by uid 99); 18 Feb 2008 14:01:07 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Feb 2008 06:01:07 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of jpstotz@gmx.de designates 213.165.64.20 as permitted sender)
Received: from [213.165.64.20] (HELO mail.gmx.net) (213.165.64.20)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 18 Feb 2008 14:00:21 +0000
Received: (qmail invoked by alias); 18 Feb 2008 14:00:42 -0000
Received: from sito2_69.sit.fraunhofer.de (EHLO [141.12.89.102]) [141.12.67.69]
  by mail.gmx.net (mp022) with SMTP; 18 Feb 2008 15:00:42 +0100
X-Authenticated: #352958
X-Provags-ID: V01U2FsdGVkX18BkaIncfwBuTFr+0VTt/p+Bnfli79FqDYIHj4IAv
	E8hsimoNHz6hZG
Message-ID: <47B98F88.1060504@gmx.de>
Date: Mon, 18 Feb 2008 15:00:40 +0100
From: Jan Peter Stotz <jpstotz@gmx.de>
User-Agent: Thunderbird 2.0.0.9 (Windows/20071031)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Problem using Lucene on Ubuntu
References: <15543843.post@talk.nabble.com> <B435B8A7-B174-4E75-A184-9CED7EF2AA2F@apache.org> <15544612.post@talk.nabble.com> <F43E0254-D1C8-4987-9CD0-1C9F1C93882D@apache.org> <15545082.post@talk.nabble.com> <6D008CBC-D952-4368-AEF8-FA541FF4448C@apache.org>
In-Reply-To: <6D008CBC-D952-4368-AEF8-FA541FF4448C@apache.org>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Y-GMX-Trusted: 0
X-Virus-Checked: Checked by ClamAV on apache.org

Grant Ingersoll wrote:

> Note: ENCODING is whatever encoding the file is in, as in "UTF-8", if 
> that is what your files are in.  

I think there is a misunderstanding, the WordExtractor extracts text 
from MS Word (.doc) files. Those files are binary and therefore does not 
have an encoding.
I would print out the extracted text into a plain text files and compare 
if there are differences between the file generated on Windows and 
Linux/Ubuntu. This allows to determine if this is a WordExtractor or a 
Lucene problem.

Jan

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32667-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 18 14:22:55 2008
Return-Path: <java-user-return-32667-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22507 invoked from network); 18 Feb 2008 14:22:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Feb 2008 14:22:52 -0000
Received: (qmail 42529 invoked by uid 500); 18 Feb 2008 14:22:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42498 invoked by uid 500); 18 Feb 2008 14:22:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42487 invoked by uid 99); 18 Feb 2008 14:22:40 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Feb 2008 06:22:40 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [208.97.132.202] (HELO spunkymail-a9.g.dreamhost.com) (208.97.132.202)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Feb 2008 14:21:54 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a9.g.dreamhost.com (Postfix) with ESMTP id C6F30212AA
	for <java-user@lucene.apache.org>; Mon, 18 Feb 2008 06:22:13 -0800 (PST)
Message-Id: <454680F8-7D7A-4EA0-9332-91A9837450A9@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <47B98F88.1060504@gmx.de>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v919.2)
Subject: Re: Problem using Lucene on Ubuntu
Date: Mon, 18 Feb 2008 09:22:12 -0500
References: <15543843.post@talk.nabble.com> <B435B8A7-B174-4E75-A184-9CED7EF2AA2F@apache.org> <15544612.post@talk.nabble.com> <F43E0254-D1C8-4987-9CD0-1C9F1C93882D@apache.org> <15545082.post@talk.nabble.com> <6D008CBC-D952-4368-AEF8-FA541FF4448C@apache.org> <47B98F88.1060504@gmx.de>
X-Mailer: Apple Mail (2.919.2)
X-Virus-Checked: Checked by ClamAV on apache.org

Good point Jan!

On Feb 18, 2008, at 9:00 AM, Jan Peter Stotz wrote:

> Grant Ingersoll wrote:
>
>> Note: ENCODING is whatever encoding the file is in, as in "UTF-8",  
>> if that is what your files are in.
>
> I think there is a misunderstanding, the WordExtractor extracts text  
> from MS Word (.doc) files. Those files are binary and therefore does  
> not have an encoding.
> I would print out the extracted text into a plain text files and  
> compare if there are differences between the file generated on  
> Windows and Linux/Ubuntu. This allows to determine if this is a  
> WordExtractor or a Lucene problem.
>
> Jan
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32668-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 18 15:19:41 2008
Return-Path: <java-user-return-32668-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 17213 invoked from network); 18 Feb 2008 15:19:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Feb 2008 15:19:41 -0000
Received: (qmail 43147 invoked by uid 500); 18 Feb 2008 15:19:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43106 invoked by uid 500); 18 Feb 2008 15:19:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43095 invoked by uid 99); 18 Feb 2008 15:19:29 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Feb 2008 07:19:29 -0800
X-ASF-Spam-Status: No, hits=4.0 required=10.0
	tests=DNS_FROM_OPENWHOIS,FORGED_YAHOO_RCVD,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Feb 2008 15:18:56 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1JR7lo-00035W-AF
	for java-user@lucene.apache.org; Mon, 18 Feb 2008 07:19:04 -0800
Message-ID: <15546759.post@talk.nabble.com>
Date: Mon, 18 Feb 2008 07:19:04 -0800 (PST)
From: techkatta <techkatta@yahoo.com>
To: java-user@lucene.apache.org
Subject: Lucene in EJB enviornment
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: techkatta@yahoo.com
X-Virus-Checked: Checked by ClamAV on apache.org


I am using the Lucene in the EJB enviornment with Berkeley DB JE as a data
store using the JCA on JBoss 4.2.0 

My question is using Lucene in EJB enviornment is suggestable or not ?

For every request i am trying to open the IndexSearcher object and while
exiting from the EJb i am closing. It's giving OutOfMemory issues in the
production server after 2 to 3 hrs running.

Can anybody the suggest the soultion for the above probelm ?

Thanks,
techkatta






-- 
View this message in context: http://www.nabble.com/Lucene-in-EJB-enviornment-tp15546759p15546759.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32669-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 18 16:51:13 2008
Return-Path: <java-user-return-32669-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51824 invoked from network); 18 Feb 2008 16:51:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Feb 2008 16:51:13 -0000
Received: (qmail 70853 invoked by uid 500); 18 Feb 2008 16:51:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70637 invoked by uid 500); 18 Feb 2008 16:51:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70626 invoked by uid 99); 18 Feb 2008 16:51:00 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Feb 2008 08:51:00 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of john.wang@gmail.com designates 72.14.214.237 as permitted sender)
Received: from [72.14.214.237] (HELO hu-out-0506.google.com) (72.14.214.237)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Feb 2008 16:50:26 +0000
Received: by hu-out-0506.google.com with SMTP id 27so1025411hub.15
        for <java-user@lucene.apache.org>; Mon, 18 Feb 2008 08:50:33 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=HMlcI+4szPW6eTiqSZXUdJNJz8r6PzorRMQNO1LD4Fo=;
        b=keAAlkCJRYrrNuLj4D9iJdqLyUbFrRgAWmMCwGkyrP9yiLr5jws7GBRUWZ6aZmkviZ1O2H/VMUY/omzmEc4Rmi+jt9Mqfb1AMKNu8Btj4rID+h0NjR1dsMCtdV/nsqDDHUN4YgXMARMUYOcXcBJA582EPVx+Pvrxsl+/H0V0v4E=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=bwqTPB/NhRc9p5IueMd89TFILGqQtN4og8CtUP22T+d5hLpqi+IDzDIUJ78y8QmWpH7vhOsHoy2Xas0FS0bAkNcM3TDvgsJ+pbrGzorzOsOJADLzO61v16HQX2ogyLsR9yOHX0zhFhuJveQkOdjxOQ94LVrgeREZMRG18+dOMq0=
Received: by 10.86.97.7 with SMTP id u7mr6130344fgb.54.1203353432665;
        Mon, 18 Feb 2008 08:50:32 -0800 (PST)
Received: by 10.86.73.2 with HTTP; Mon, 18 Feb 2008 08:50:32 -0800 (PST)
Message-ID: <8837fb770802180850y7f9526f6m84974b181acdf66e@mail.gmail.com>
Date: Mon, 18 Feb 2008 08:50:32 -0800
From: "John Wang" <john.wang@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Using lucene with a Geospatial catalog
In-Reply-To: <541f12ca0802170222g2f0b99fbl41c2e930609429e6@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_7412_10860045.1203353432650"
References: <541f12ca0802170222g2f0b99fbl41c2e930609429e6@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_7412_10860045.1203353432650
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Check out www.browseengine.com, it is an open source meta engine on top of
lucene.
-John

On Feb 17, 2008 2:22 AM, Stephane Nicoll <stephane.nicoll@gmail.com> wrote:

> Hi,
>
> I've been browsing the archive and the documentation about Lucene. It
> really seems that it could help implementing my use case but I would
> like to be sure first.
>
> What I need is to be able to search data in a "catalog" which is
> geo-enabled. The data is stored in a database. A record has namely
>
> * name
> * keywords
> * footprint (that is a geometry that represents the record)
> * date range (optional) that defines the "validity of the data"
> * Timestamp
> * Creation date
> * various boolean flag
> * custom data
>
> I understand that Lucene is powerful for full-text based search but
> what about searching something like "give me all records that contains
> the kewords foo, with flag bar true, valid between 20070602 and
> 20070907 and whose geometry intersect a given box.
>
> I've seen on the list people using tricks by storing the coordinates
> in a way we could use range. In my case, the geometry is potentially
> very complex. The database handle that for me (Oracle Spatial or
> PostGIS for instance) with intersect, contains and such. Is it
> possible to combine a lucene search with a DB query? Any best
> practices on that topic?
>
> Thanks,
> St=E9phane
>
>
> --
> Large Systems Suck: This rule is 100% transitive. If you build one,
> you suck" -- S.Yegge
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_7412_10860045.1203353432650--

From java-user-return-32670-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 18 17:09:00 2008
Return-Path: <java-user-return-32670-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63005 invoked from network); 18 Feb 2008 17:09:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Feb 2008 17:09:00 -0000
Received: (qmail 7999 invoked by uid 500); 18 Feb 2008 17:08:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7043 invoked by uid 500); 18 Feb 2008 17:08:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7032 invoked by uid 99); 18 Feb 2008 17:08:47 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Feb 2008 09:08:47 -0800
X-ASF-Spam-Status: No, hits=3.2 required=10.0
	tests=HTML_MESSAGE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [66.173.27.67] (HELO mail.nasi.com) (66.173.27.67)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Feb 2008 17:08:15 +0000
In-Reply-To: <2c5080560802160132m791a8f67o5a3033d374d4be29@mail.gmail.com>
To: java-user@lucene.apache.org
Subject: Re: how to safely periodically reopen the IndexReader?
MIME-Version: 1.0
X-Mailer: Lotus Notes Release 6.5.4 March 27, 2005
Message-ID: <OFDFB06B17.0E0C7281-ON862573F3.005DA078-862573F3.005E2116@nasi.com>
From: Robert.Hastings@ancept.com
Date: Mon, 18 Feb 2008 11:08:13 -0600
X-MIMETrack: Serialize by Router on notes1/NASI(Release 6.5.5FP1|April 11, 2006) at 02/18/2008
 11:08:44,
	Serialize complete at 02/18/2008 11:08:44
Content-Type: multipart/alternative; boundary="=_alternative 005E2113862573F3_="
X-Virus-Checked: Checked by ClamAV on apache.org

--=_alternative 005E2113862573F3_=
Content-Type: text/plain; charset="US-ASCII"

We have the same situation and use an atomic counter.  Basically, we have 
a SearcherHolder class and a SearcherManager class.  The SearcherHolder 
holds the searcher and the number of threads referencing the searcher. 

When the thread that writes to the index closes the index, it sends an 
event that the SearcherManager is listening for.  The next time a search 
is performed the manager opens a new searcher.  The old searcher is marked 
as outdated but is not closed until the last thread that references the 
searcher returns it.





ZaeX <zaexage@gmail.com> 
02/16/2008 03:32 AM
Please respond to
java-user@lucene.apache.org


To
java-user@lucene.apache.org
cc

Subject
how to safely periodically reopen the IndexReader?






Hi, all

I've got a question here needing your help:
For my index, I opened one IndexWriter (autocommit mode) and one
IndexSearcher on it;
I have quite a lot of threads here concurrently writing new documents and
doing search in index.
the IndexWriter is flushed periodically.
as I want the IndexSearcher be able to see the latest record, I also need 
to
periodically reopen the underlying IndexReader.

But is it safe to just call close() on the IndexSearcher when there are
still threads using it?

or maybe I should use atomic counter to make sure there's no thread using 
it
before calling close() on IndexSearcher?

thanks.


--=_alternative 005E2113862573F3_=--

From java-user-return-32671-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 18 21:20:52 2008
Return-Path: <java-user-return-32671-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75070 invoked from network); 18 Feb 2008 21:20:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Feb 2008 21:20:51 -0000
Received: (qmail 7114 invoked by uid 500); 18 Feb 2008 21:20:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6152 invoked by uid 500); 18 Feb 2008 21:20:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6139 invoked by uid 99); 18 Feb 2008 21:20:39 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Feb 2008 13:20:39 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of brianpdoyle@gmail.com designates 209.85.146.180 as permitted sender)
Received: from [209.85.146.180] (HELO wa-out-1112.google.com) (209.85.146.180)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Feb 2008 21:20:07 +0000
Received: by wa-out-1112.google.com with SMTP id j40so3270602wah.11
        for <java-user@lucene.apache.org>; Mon, 18 Feb 2008 13:20:16 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        bh=DkZ2luVnTFEIHpJ2j3qrsyVUdJPhsyEF3rRZnPsGPYo=;
        b=AbkY3hw1E5GeTj5JKT3GQYdSPcWyaqZKd790/2FzaFZRSbKijAUSKkEkS4qZJvaHrWMqXwrVqc1HNW5bxQ2kSZnmeFzRGDUHPU+cAbpqDh2W5kFTbXKEViiEC8Y/25I1HTuS9zVJ6CKtx5ZfqgvFlsxXX7gRScETmP+1ABaJYhI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=h8Lh5zBId3bChxRtCuFair/zY6PesDgVtFhUAhDdtDi8NHuST84e5F+4vBRtkRRpULfKdspl755Te3HEf7wb2VaCvNOcchrOJ393EW4k49b7nqdD6T26r6yXu70P0+A1PCofNJEY8mYk7eh6sO1dzxGs1t22cRvRT2ZWFkEio/o=
Received: by 10.114.181.1 with SMTP id d1mr2449622waf.10.1203369615910;
        Mon, 18 Feb 2008 13:20:15 -0800 (PST)
Received: by 10.114.182.18 with HTTP; Mon, 18 Feb 2008 13:20:15 -0800 (PST)
Message-ID: <a2c7a60e0802181320o5402f4heb3c9cf6ae578060@mail.gmail.com>
Date: Mon, 18 Feb 2008 14:20:15 -0700
From: "Brian Doyle" <brianpdoyle@gmail.com>
To: java-user@lucene.apache.org
Subject: FieldSortedHitQueue rise in memory
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_16843_21633410.1203369615904"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_16843_21633410.1203369615904
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

We've implemented a custom sort class and use it to sort by distance.   We
have implemented the equals and hashcode in the sort comparator.   After
running for a few hours we're reaching peak memory usage and eventually the
server runs out of memory.   We did some profiling and noticed that a large
chunk of memory is being used in the
lucence.search.FieldSortedHitQueueclass.   Has anyone seen this
behavior before or know how we can stop this
class from growing in size?

------=_Part_16843_21633410.1203369615904--

From java-user-return-32672-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 18 21:55:29 2008
Return-Path: <java-user-return-32672-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88052 invoked from network); 18 Feb 2008 21:55:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Feb 2008 21:55:29 -0000
Received: (qmail 32226 invoked by uid 500); 18 Feb 2008 21:55:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32188 invoked by uid 500); 18 Feb 2008 21:55:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32177 invoked by uid 99); 18 Feb 2008 21:55:17 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Feb 2008 13:55:17 -0800
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [206.190.38.58] (HELO web50304.mail.re2.yahoo.com) (206.190.38.58)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 18 Feb 2008 21:54:29 +0000
Received: (qmail 13402 invoked by uid 60001); 18 Feb 2008 21:54:49 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=c2xqDsqhntcVoFdPlmUD8IsRG/LS39ZfDHaZvbNfwBdHbqPsMp5iggI4lLVLGIT92PWEf6gQMtWWU7/eLfkgtGQMAmsLH3yoqMnAiERREhKa4Mn0Xiak0claJgdETjXafPQotVNEn54yf9xvR/i35ph9DxVrtbgEI66/IXKY5C0=;
X-YMail-OSG: hx7NFZcVM1kzz6aMf99s7dYMZdMgK9vHGfdzTpgG.1zNemZoKYvPvi5rRllPyF2WAkUCbd.zJDVduGtsztoGt7IsABgj6HFiE_IMRY_V4uFUPql0ZA--
Received: from [72.231.9.236] by web50304.mail.re2.yahoo.com via HTTP; Mon, 18 Feb 2008 13:54:49 PST
X-Mailer: YahooMailRC/902.30 YahooMailWebService/0.7.162
Date: Mon, 18 Feb 2008 13:54:49 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Lucene in EJB enviornment
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Message-ID: <397157.10926.qm@web50304.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hello - opening a new IndexSearcher for every request is not the thing to do.  Reuse a single IndexSearcher instance.  This must be in the FAQ. :)

Otis
--
Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch

----- Original Message ----
> From: techkatta <techkatta@yahoo.com>
> To: java-user@lucene.apache.org
> Sent: Monday, February 18, 2008 10:19:04 AM
> Subject: Lucene in EJB enviornment
> 
> 
> I am using the Lucene in the EJB enviornment with Berkeley DB JE as a data
> store using the JCA on JBoss 4.2.0 
> 
> My question is using Lucene in EJB enviornment is suggestable or not ?
> 
> For every request i am trying to open the IndexSearcher object and while
> exiting from the EJb i am closing. It's giving OutOfMemory issues in the
> production server after 2 to 3 hrs running.
> 
> Can anybody the suggest the soultion for the above probelm ?
> 
> Thanks,
> techkatta
> 
> 
> 
> 
> 
> 
> -- 
> View this message in context: 
> http://www.nabble.com/Lucene-in-EJB-enviornment-tp15546759p15546759.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32673-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 18 21:58:56 2008
Return-Path: <java-user-return-32673-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89093 invoked from network); 18 Feb 2008 21:58:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Feb 2008 21:58:56 -0000
Received: (qmail 41090 invoked by uid 500); 18 Feb 2008 21:58:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40096 invoked by uid 500); 18 Feb 2008 21:58:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40082 invoked by uid 99); 18 Feb 2008 21:58:44 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Feb 2008 13:58:44 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.190.39.214] (HELO web50312.mail.re2.yahoo.com) (206.190.39.214)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 18 Feb 2008 21:58:09 +0000
Received: (qmail 73503 invoked by uid 60001); 18 Feb 2008 21:58:17 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=4wmzffZ/UpCQx0GLaz8+rofmODOaFlSFf5aQhANIpslTWO+e55B1ktOxAt9eI/QNiuqK44IuyIsZO2HGu9HCOkJ+qu3DYiUeRrgcc3Je4pBGzAdp4Ztj743U9HNyWHEgSaMK+ub7QAN+MAjJ0U9XThvKYoEIK65N63oK6YF1HMQ=;
X-YMail-OSG: W3dNtGgVM1kjp9PsAEH_eyPKcDSUbUIaYLrOVPmdxtW14jPEFlSAqs62pHj4Gn8embZAnv3OXJMs8QyioijdYoJ1n8CI1wdvUZzadH5wtK_omGPoWZk-
Received: from [72.231.9.236] by web50312.mail.re2.yahoo.com via HTTP; Mon, 18 Feb 2008 13:58:17 PST
X-Mailer: YahooMailRC/902.30 YahooMailWebService/0.7.162
Date: Mon, 18 Feb 2008 13:58:17 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Using lucene with a Geospatial catalog
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable
Message-ID: <251071.73184.qm@web50312.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Stephane, check out the last 2 links in http://www.simpy.com/group/363 , th=
ey are for geospatial searching with Lucene.=0A=0AOtis=0A--=0ASematext -- h=
ttp://sematext.com/ -- Lucene - Solr - Nutch=0A=0A----- Original Message --=
--=0A> From: Stephane Nicoll <stephane.nicoll@gmail.com>=0A> To: java-user@=
lucene.apache.org=0A> Sent: Sunday, February 17, 2008 5:22:01 AM=0A> Subjec=
t: Using lucene with a Geospatial catalog=0A> =0A> Hi,=0A> =0A> I've been b=
rowsing the archive and the documentation about Lucene. It=0A> really seems=
 that it could help implementing my use case but I would=0A> like to be sur=
e first.=0A> =0A> What I need is to be able to search data in a "catalog" w=
hich is=0A> geo-enabled. The data is stored in a database. A record has nam=
ely=0A> =0A> * name=0A> * keywords=0A> * footprint (that is a geometry that=
 represents the record)=0A> * date range (optional) that defines the "valid=
ity of the data"=0A> * Timestamp=0A> * Creation date=0A> * various boolean =
flag=0A> * custom data=0A> =0A> I understand that Lucene is powerful for fu=
ll-text based search but=0A> what about searching something like "give me a=
ll records that contains=0A> the kewords foo, with flag bar true, valid bet=
ween 20070602 and=0A> 20070907 and whose geometry intersect a given box.=0A=
> =0A> I've seen on the list people using tricks by storing the coordinates=
=0A> in a way we could use range. In my case, the geometry is potentially=
=0A> very complex. The database handle that for me (Oracle Spatial or=0A> P=
ostGIS for instance) with intersect, contains and such. Is it=0A> possible =
to combine a lucene search with a DB query? Any best=0A> practices on that =
topic?=0A> =0A> Thanks,=0A> St=E9phane=0A> =0A> =0A> -- =0A> Large Systems =
Suck: This rule is 100% transitive. If you build one,=0A> you suck" -- S.Ye=
gge=0A> =0A> --------------------------------------------------------------=
-------=0A> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org=
=0A> For additional commands, e-mail: java-user-help@lucene.apache.org=0A> =
=0A> =0A=0A

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32674-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 19 00:32:02 2008
Return-Path: <java-user-return-32674-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 55832 invoked from network); 19 Feb 2008 00:32:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Feb 2008 00:32:02 -0000
Received: (qmail 56132 invoked by uid 500); 19 Feb 2008 00:31:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56100 invoked by uid 500); 19 Feb 2008 00:31:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56089 invoked by uid 99); 19 Feb 2008 00:31:49 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Feb 2008 16:31:49 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of krazedsun@gmail.com designates 209.85.146.181 as permitted sender)
Received: from [209.85.146.181] (HELO wa-out-1112.google.com) (209.85.146.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Feb 2008 00:31:17 +0000
Received: by wa-out-1112.google.com with SMTP id j40so3353402wah.11
        for <java-user@lucene.apache.org>; Mon, 18 Feb 2008 16:31:26 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=44bdnW86OqiFRw8IQ7maY8vTfcBQBSY2LKu2dS/OiDI=;
        b=nVyIBimPeIRvDf2RYnFISQbEYLjsMUSEhWwOLe7s5MKBESBro/nqWXAfJRUK3vp599UxTCu3gNKuHl0d/qwYzpeEoE6vUseXjYmYCp7aLdTUdlADG3U4m0n7QuAiww5a2ooCw1Bj3WHoEXDLr8PDwHXdaXrE0TyAV77MAns202I=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=pzuCaRooXMqUUvjltZ8LV5vHH5b8uFX7UnSr4r2eA8GJ4ylN3Wyb2UkRGhPMceNQglGqAbeRsbvGEwJL//8+kmvc7C2kFfJlXSBTFdMImlCpQnQwoLnn2AghVt3Lb0MlgVgpk3XtKrGmdxUdxWKApFQ6aZRrmTKwHXGcqgzBv94=
Received: by 10.115.22.1 with SMTP id z1mr3084998wai.33.1203381086125;
        Mon, 18 Feb 2008 16:31:26 -0800 (PST)
Received: by 10.114.149.12 with HTTP; Mon, 18 Feb 2008 16:31:26 -0800 (PST)
Message-ID: <99ca131e0802181631y2b16e0cdqdd70c1f7dce97249@mail.gmail.com>
Date: Tue, 19 Feb 2008 11:31:26 +1100
From: "Jim Bogan" <krazedsun@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: regex expressions within phrase queries
In-Reply-To: <Pine.LNX.4.62.0802142245330.25935@radix.cryptio.net>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_12139_2571926.1203381086133"
References: <99ca131e0802141625m7a83a613v4b7da728b0a5953b@mail.gmail.com>
	 <Pine.LNX.4.62.0802142245330.25935@radix.cryptio.net>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_12139_2571926.1203381086133
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

By custom phrase query class I was trying to ask if it would be possible, or
even a good idea, to create a modified PhraseQuery class that is more
efficient that span queries (as I only want to use it for phrases). This
class might have multiple possible terms generated from a regex at a certain
position.


On Feb 15, 2008 5:47 PM, Chris Hostetter <hossman_lucene@fucit.org> wrote:

>
> : I was wondering if anyone has a more efficient method for achieving
> this.
> : Would changing QueryParser.jj and developing a custom PhraseQuery class
> be a
> : good idea?  Any comments would be appreciated.
>
> extending QueryParser and overriding the getPhraseQuery function to return
> your own SpanNearQueries composted of SpanRegexQueries shouldn't be any
> more efficient then modifying the QueryParser grammer.  either way it's
> going to be calling some method you write that returns a SpanNearQuery.
>
>
>
> -Hoss
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_12139_2571926.1203381086133--

From java-user-return-32675-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 19 00:37:01 2008
Return-Path: <java-user-return-32675-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56961 invoked from network); 19 Feb 2008 00:37:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Feb 2008 00:37:01 -0000
Received: (qmail 61139 invoked by uid 500); 19 Feb 2008 00:36:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61106 invoked by uid 500); 19 Feb 2008 00:36:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61095 invoked by uid 99); 19 Feb 2008 00:36:49 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Feb 2008 16:36:49 -0800
X-ASF-Spam-Status: No, hits=-2.0 required=10.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ghinwa@csail.mit.edu designates 128.30.2.149 as permitted sender)
Received: from [128.30.2.149] (HELO outgoing.csail.mit.edu) (128.30.2.149)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Feb 2008 00:36:03 +0000
Received: from c-65-96-166-47.hsd1.ma.comcast.net ([65.96.166.47] helo=IBM3D2E684396F)
	by outgoing.csail.mit.edu with esmtpa (Exim 4.63)
	(envelope-from <ghinwa@csail.mit.edu>)
	id 1JRGT8-000413-Uz
	for java-user@lucene.apache.org; Mon, 18 Feb 2008 19:36:23 -0500
Message-ID: <04aa01c8728f$72eca3e0$0b02a8c0@IBM3D2E684396F>
From: "Ghinwa Choueiter" <ghinwa@csail.mit.edu>
To: <java-user@lucene.apache.org>
Subject: How to index word-pairs and phrases
Date: Mon, 18 Feb 2008 19:36:21 -0500
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_04A7_01C87265.89F2C030"
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.3138
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3198
X-Virus-Checked: Checked by ClamAV on apache.org

------=_NextPart_000_04A7_01C87265.89F2C030
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

Hi,

I am new to Lucene and have been reading the documentation. I would like =
to use Lucene to query a song database by lyrics. The query could =
potentially contain typos, or even wrong words, word contractions (can't =
versus cannot), etc..

I would like to create an inverted list by word pairs and possibly =
phrases and not just by isolated words. For example:
<w1,w2>   < d1, d10, d27>
<w2,w3>   <d2, d13>
...

OR even
<phrase 1> <d1, d3,...>
<phrase 2> <...>
...

It seems to me that, by default, the index in Lucene stores statistics =
for isolated words. The Lucene documentation refers to the word "Term" =
all the time and seems to imply that "Term" can be a word or a phrase, =
but I can't see how IndexWriter can read a document and index it by word =
pairs.=20

thank you in advance for the answers and my apologies if I did not get =
the terminology quite right.

-Ghinwa

------=_NextPart_000_04A7_01C87265.89F2C030--


From java-user-return-32676-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 19 01:36:09 2008
Return-Path: <java-user-return-32676-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4577 invoked from network); 19 Feb 2008 01:36:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Feb 2008 01:36:09 -0000
Received: (qmail 19694 invoked by uid 500); 19 Feb 2008 01:35:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19654 invoked by uid 500); 19 Feb 2008 01:35:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19643 invoked by uid 99); 19 Feb 2008 01:35:55 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Feb 2008 17:35:55 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.119] (HELO spunkymail-a9.g.dreamhost.com) (208.97.132.119)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Feb 2008 01:35:21 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a9.g.dreamhost.com (Postfix) with ESMTP id 53D0C212AC
	for <java-user@lucene.apache.org>; Mon, 18 Feb 2008 17:35:29 -0800 (PST)
Message-Id: <3A060492-5873-4ACE-9BC4-7C72E0981859@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <04aa01c8728f$72eca3e0$0b02a8c0@IBM3D2E684396F>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v919.2)
Subject: Re: How to index word-pairs and phrases
X-Priority: 3
Date: Mon, 18 Feb 2008 20:35:27 -0500
References: <04aa01c8728f$72eca3e0$0b02a8c0@IBM3D2E684396F>
X-Mailer: Apple Mail (2.919.2)
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Ghinwa,

A Term is simply a unit of tokenization that has been indexed for a  
Field, produced by a TokenStream.   In the demo, on the main site,  
this can be seen in the file called IndexFiles.java on line 56:
IndexWriter writer = new IndexWriter(INDEX_DIR, new  
StandardAnalyzer(), true, IndexWriter.MaxFieldLength.LIMITED);

The key being that the StandardAnalyzer is used to get a TokenStream.   
The TokenStream.next() method returns a Token.  All a Term is, is a  
Token that has been indexed for a given Field.  In a nutshell, though,  
a Term is whatever you want it to be, based on your Analyzer.  It  
could be a whole document as a single string or it could be a string  
containing a single character.  In reality, it usually corresponds to  
a single word.

Have a look at the wiki, also, as there are many talks and articles  
explaining all of this.  Lucene In Action, while outdated, is also an  
excellent book for explaining this stuff (with the exception that some  
of the code examples no longer work on the latest Lucene version)

Getting beyond that, you will need to look into adding spell checking  
(in Lucene's "contrib" area) and other features like stemming and  
synonyms to handle the various issues you bring up.

Hope that helps,
Grant

On Feb 18, 2008, at 7:36 PM, Ghinwa Choueiter wrote:

> Hi,
>
> I am new to Lucene and have been reading the documentation. I would  
> like to use Lucene to query a song database by lyrics. The query  
> could potentially contain typos, or even wrong words, word  
> contractions (can't versus cannot), etc..
>
> I would like to create an inverted list by word pairs and possibly  
> phrases and not just by isolated words. For example:
> <w1,w2>   < d1, d10, d27>
> <w2,w3>   <d2, d13>
> ...
>
> OR even
> <phrase 1> <d1, d3,...>
> <phrase 2> <...>
> ...
>
> It seems to me that, by default, the index in Lucene stores  
> statistics for isolated words. The Lucene documentation refers to  
> the word "Term" all the time and seems to imply that "Term" can be a  
> word or a phrase, but I can't see how IndexWriter can read a  
> document and index it by word pairs.
>
> thank you in advance for the answers and my apologies if I did not  
> get the terminology quite right.
>
> -Ghinwa

--------------------------
Grant Ingersoll
http://lucene.grantingersoll.com
http://www.lucenebootcamp.com

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32677-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 19 07:26:24 2008
Return-Path: <java-user-return-32677-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84109 invoked from network); 19 Feb 2008 07:26:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Feb 2008 07:26:22 -0000
Received: (qmail 21013 invoked by uid 500); 19 Feb 2008 07:26:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20481 invoked by uid 500); 19 Feb 2008 07:26:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 20470 invoked by uid 99); 19 Feb 2008 07:26:10 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Feb 2008 23:26:10 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of coolgeng410@gmail.com designates 209.85.132.245 as permitted sender)
Received: from [209.85.132.245] (HELO an-out-0708.google.com) (209.85.132.245)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Feb 2008 07:25:38 +0000
Received: by an-out-0708.google.com with SMTP id c5so458344anc.49
        for <java-user@lucene.apache.org>; Mon, 18 Feb 2008 23:25:47 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        bh=0eLeCAHBOZk2tJG4hOgdPLhU0pSh4PRjFwpR8O2QTY8=;
        b=v6aAHJzX6ZhPOhwmGxPIhyMsvNCkpNqhKp+cXuZi94b8loCzRv2KDpjICvj4PEXOM66Uv/4MgwhbIFmj7ZKSAUwwTshPme93/C/baKmgY+1bCzMSu26wpDu6wSTrYx6EnChCPVH4CeUF3+2WZFfR8eilr2J8M49QORGJci/W/iA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=CThBHSrUlFRX5XuQ3b9ahhielg8iBlcv0BsqMHs3oVDx2hmRC8dud9yxuwKQkuDJAGSK0H1pHHnx2EC9QoOc2xQPy6sOJu1JoHZF6MgsgjXIxGz1oJabBjHNqYQ7vj2YMGWPX+3ehHvHqYDp2FeXQeFa3YY20LkXdjFJ9irCChw=
Received: by 10.100.14.17 with SMTP id 17mr13522249ann.26.1203405947144;
        Mon, 18 Feb 2008 23:25:47 -0800 (PST)
Received: by 10.100.105.12 with HTTP; Mon, 18 Feb 2008 23:25:47 -0800 (PST)
Message-ID: <e7dd79a40802182325n4f4b9ca2o189e7d86af047d1c@mail.gmail.com>
Date: Tue, 19 Feb 2008 15:25:47 +0800
From: "coolgeng coolgeng" <coolgeng410@gmail.com>
To: java-user@lucene.apache.org
Subject: Rails and lucene
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_5658_17171522.1203405947106"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_5658_17171522.1203405947106
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi guys,
    Now an idea knock my brain, which I want to integrate the lucene into my
ruby application. And the newest lucene api owns the interface to join the
ruby application. UnfortunatelyI have no experience about it. Let us talk
about it.

-- 
Best Regards
Cooper Geng

------=_Part_5658_17171522.1203405947106--

From java-user-return-32678-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 19 08:44:44 2008
Return-Path: <java-user-return-32678-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 14080 invoked from network); 19 Feb 2008 08:44:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Feb 2008 08:44:44 -0000
Received: (qmail 3768 invoked by uid 500); 19 Feb 2008 08:44:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3734 invoked by uid 500); 19 Feb 2008 08:44:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3723 invoked by uid 99); 19 Feb 2008 08:44:32 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Feb 2008 00:44:32 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [217.12.11.79] (HELO smtp010.mail.ukl.yahoo.com) (217.12.11.79)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 19 Feb 2008 08:43:55 +0000
Received: (qmail 56388 invoked from network); 19 Feb 2008 07:33:44 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=Received:X-YMail-OSG:X-Yahoo-Newman-Property:Message-ID:Date:From:User-Agent:MIME-Version:To:Subject:References:In-Reply-To:Content-Type:Content-Transfer-Encoding;
  b=C8WT+CDit16KfJQEAYyF6gb0AIPVeTo9SusEqN+shBzkzFbctvqjPinyXjALFrpcu2XRgHzAqKzs2dcNF6klVrIJ8dm2LQVXMHh5clPiZznhFygCBL2gO8dFaZuMoR5r0C8H6ddw3GwMKex1jFKXGUhaytKWlh8bgjgddVvINjU=  ;
Received: from unknown (HELO ?127.0.0.1?) (markharw00d@194.106.34.5 with plain)
  by smtp010.mail.ukl.yahoo.com with SMTP; 19 Feb 2008 07:33:44 -0000
X-YMail-OSG: k1Ya_A8VM1ngLN.uNARbB2PBLjfgtDVxTE6A0KiAZx.eXQWL1hE6KmLl2Rka9VzhDCSF5FzrCxCP5kkPpjA2ZpMUCUyt1f04SIetk9XttBcwJGSZ
X-Yahoo-Newman-Property: ymail-3
Message-ID: <47BA8651.9090003@yahoo.co.uk>
Date: Tue, 19 Feb 2008 07:33:37 +0000
From: markharw00d <markharw00d@yahoo.co.uk>
User-Agent: Thunderbird 2.0.0.9 (Windows/20071031)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: How to index word-pairs and phrases
References: <04aa01c8728f$72eca3e0$0b02a8c0@IBM3D2E684396F> <3A060492-5873-4ACE-9BC4-7C72E0981859@apache.org>
In-Reply-To: <3A060492-5873-4ACE-9BC4-7C72E0981859@apache.org>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Further to Grant's useful background - there is an analyzer specifically 
for multi-word terms in "contrib".
See Lucene\contrib\analyzers\src\java\org\apache\lucene\analysis\shingle

Cheers
Mark
> Hi Ghinwa,
>
> A Term is simply a unit of tokenization that has been indexed for a 
> Field, produced by a TokenStream.   In the demo, on the main site, 
> this can be seen in the file called IndexFiles.java on line 56:
> IndexWriter writer = new IndexWriter(INDEX_DIR, new 
> StandardAnalyzer(), true, IndexWriter.MaxFieldLength.LIMITED);
>
> The key being that the StandardAnalyzer is used to get a TokenStream.  
> The TokenStream.next() method returns a Token.  All a Term is, is a 
> Token that has been indexed for a given Field.  In a nutshell, though, 
> a Term is whatever you want it to be, based on your Analyzer.  It 
> could be a whole document as a single string or it could be a string 
> containing a single character.  In reality, it usually corresponds to 
> a single word.
>
> Have a look at the wiki, also, as there are many talks and articles 
> explaining all of this.  Lucene In Action, while outdated, is also an 
> excellent book for explaining this stuff (with the exception that some 
> of the code examples no longer work on the latest Lucene version)
>
> Getting beyond that, you will need to look into adding spell checking 
> (in Lucene's "contrib" area) and other features like stemming and 
> synonyms to handle the various issues you bring up.
>
> Hope that helps,
> Grant
>
> On Feb 18, 2008, at 7:36 PM, Ghinwa Choueiter wrote:
>
>> Hi,
>>
>> I am new to Lucene and have been reading the documentation. I would 
>> like to use Lucene to query a song database by lyrics. The query 
>> could potentially contain typos, or even wrong words, word 
>> contractions (can't versus cannot), etc..
>>
>> I would like to create an inverted list by word pairs and possibly 
>> phrases and not just by isolated words. For example:
>> <w1,w2>   < d1, d10, d27>
>> <w2,w3>   <d2, d13>
>> ...
>>
>> OR even
>> <phrase 1> <d1, d3,...>
>> <phrase 2> <...>
>> ...
>>
>> It seems to me that, by default, the index in Lucene stores 
>> statistics for isolated words. The Lucene documentation refers to the 
>> word "Term" all the time and seems to imply that "Term" can be a word 
>> or a phrase, but I can't see how IndexWriter can read a document and 
>> index it by word pairs.
>>
>> thank you in advance for the answers and my apologies if I did not 
>> get the terminology quite right.
>>
>> -Ghinwa
>
> --------------------------
> Grant Ingersoll
> http://lucene.grantingersoll.com
> http://www.lucenebootcamp.com
>
> Lucene Helpful Hints:
> http://wiki.apache.org/lucene-java/BasicsOfPerformance
> http://wiki.apache.org/lucene-java/LuceneFAQ
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32679-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 19 10:02:51 2008
Return-Path: <java-user-return-32679-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 52082 invoked from network); 19 Feb 2008 10:02:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Feb 2008 10:02:50 -0000
Received: (qmail 16830 invoked by uid 500); 19 Feb 2008 10:02:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16799 invoked by uid 500); 19 Feb 2008 10:02:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16788 invoked by uid 99); 19 Feb 2008 10:02:37 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Feb 2008 02:02:37 -0800
X-ASF-Spam-Status: No, hits=4.0 required=10.0
	tests=DNS_FROM_OPENWHOIS,FORGED_YAHOO_RCVD,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Feb 2008 10:02:03 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1JRPIh-0008PP-N2
	for java-user@lucene.apache.org; Tue, 19 Feb 2008 02:02:11 -0800
Message-ID: <15560506.post@talk.nabble.com>
Date: Tue, 19 Feb 2008 02:02:11 -0800 (PST)
From: techkatta <techkatta@yahoo.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene in EJB enviornment
In-Reply-To: <397157.10926.qm@web50304.mail.re2.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: techkatta@yahoo.com
References: <15546759.post@talk.nabble.com> <397157.10926.qm@web50304.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Yes, as per the Lucene performance standards use only one IndexSearcher
instance is true. But i am using the Lucene with Berkeley DB JE as a
datastore in the EJB. So while exiting from the Sesssion Bean i am closing
Berkeley DB JE connections as per the EJB standards. Which internally closes
the JEDirectory, and it causes the IndexSearcher unavailable for the next
request. 

My question is how to retain the IndexSearcher as a resuable instance ?


Otis Gospodnetic wrote:
> 
> Hello - opening a new IndexSearcher for every request is not the thing to
> do.  Reuse a single IndexSearcher instance.  This must be in the FAQ. :)
> 
> Otis
> --
> Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch
> 
> ----- Original Message ----
>> From: techkatta <techkatta@yahoo.com>
>> To: java-user@lucene.apache.org
>> Sent: Monday, February 18, 2008 10:19:04 AM
>> Subject: Lucene in EJB enviornment
>> 
>> 
>> I am using the Lucene in the EJB enviornment with Berkeley DB JE as a
>> data
>> store using the JCA on JBoss 4.2.0 
>> 
>> My question is using Lucene in EJB enviornment is suggestable or not ?
>> 
>> For every request i am trying to open the IndexSearcher object and while
>> exiting from the EJb i am closing. It's giving OutOfMemory issues in the
>> production server after 2 to 3 hrs running.
>> 
>> Can anybody the suggest the soultion for the above probelm ?
>> 
>> Thanks,
>> techkatta
>> 
>> 
>> 
>> 
>> 
>> 
>> -- 
>> View this message in context: 
>> http://www.nabble.com/Lucene-in-EJB-enviornment-tp15546759p15546759.html
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>> 
>> 
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>> 
>> 
> 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/Lucene-in-EJB-enviornment-tp15546759p15560506.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32680-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 19 10:09:40 2008
Return-Path: <java-user-return-32680-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54810 invoked from network); 19 Feb 2008 10:09:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Feb 2008 10:09:39 -0000
Received: (qmail 26262 invoked by uid 500); 19 Feb 2008 10:09:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25615 invoked by uid 500); 19 Feb 2008 10:09:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25604 invoked by uid 99); 19 Feb 2008 10:09:28 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Feb 2008 02:09:28 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of spring@gmx.eu designates 213.165.64.20 as permitted sender)
Received: from [213.165.64.20] (HELO mail.gmx.net) (213.165.64.20)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 19 Feb 2008 10:08:42 +0000
Received: (qmail invoked by alias); 19 Feb 2008 10:08:58 -0000
Received: from e178085116.adsl.alicedsl.de (EHLO msrvcn04) [85.178.85.116]
  by mail.gmx.net (mp010) with SMTP; 19 Feb 2008 11:08:58 +0100
X-Authenticated: #2635966
X-Provags-ID: V01U2FsdGVkX18xUL8FYXUx0BWM5fFgUJruoL7/lwps1h9i14/dpq
	TwjKLQlVSEjclk
From: <spring@gmx.eu>
To: <java-user@lucene.apache.org>
References: <40CDB8FB060446B0AB05DF697FEA029F@msrvcn04>
Subject: RE: Searching multiple indexes
Date: Tue, 19 Feb 2008 11:08:59 +0100
Message-ID: <4968832D3F4C4CE69C9F1CDF86E91A9A@msrvcn04>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
Thread-Index: AchwqcBPvGDsECFZTUW/hwxvCZ7bdQCNaTHQ
In-Reply-To: <40CDB8FB060446B0AB05DF697FEA029F@msrvcn04>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.3790.4133
X-Y-GMX-Trusted: 0
X-Virus-Checked: Checked by ClamAV on apache.org

No ideas? :( 

> -----Original Message-----
> From: spring@gmx.eu [mailto:spring@gmx.eu] 
> Sent: Samstag, 16. Februar 2008 15:42
> To: java-user@lucene.apache.org
> Subject: Searching multiple indexes
> 
> Hi,
> 
> I have some questions about searching multiple indexes.
> 
> 1. IndexSearcher with a MultiReader will search the indexes 
> sequentially?
> 
> 2. ParallelMultiSearcher searches in parallel. How is this 
> done? One thread
> per index? When will it return? When the slowest search is fineshed?
> 
> 3. When I have to search indexes created with different 
> analyzers (maybe a
> french and a german analyzer), I have to search them 
> separately by my own?
> 
> Thank you.
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32681-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 19 10:29:19 2008
Return-Path: <java-user-return-32681-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63087 invoked from network); 19 Feb 2008 10:29:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Feb 2008 10:29:19 -0000
Received: (qmail 56619 invoked by uid 500); 19 Feb 2008 10:29:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56361 invoked by uid 500); 19 Feb 2008 10:29:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56350 invoked by uid 99); 19 Feb 2008 10:29:07 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Feb 2008 02:29:07 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of cedric.ho@gmail.com designates 209.85.146.182 as permitted sender)
Received: from [209.85.146.182] (HELO wa-out-1112.google.com) (209.85.146.182)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Feb 2008 10:28:35 +0000
Received: by wa-out-1112.google.com with SMTP id j40so3637208wah.11
        for <java-user@lucene.apache.org>; Tue, 19 Feb 2008 02:28:43 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        bh=WVy4DeSIY6aoDMgvrwcvanQF2uD3+SlIaS7c5Wsw1Kg=;
        b=Pt0Zu6ZU5rQzAjdULtSLMRT1rvcOPSjys9SGLTHvhxI7fbzCiTMQ8YjzFSxLhVngT6F0/qiNmZ/QryoDzSpKLG5lCYydFz+NJ5AuTw40jTNejKBkEYRhcx/0vSmLv9OzXPbu6ejOMzrmDjb03CJ1YVFkFwLJnFGT+kgrBCKoEnQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=X/RXQ4y9mQdXNR4wAAd1HQ4yKCsHZCY2AiwTfw1Oc8bh2DGAfQELkV7SdZDr/Fc+msrNfofOmiFU2zzqgHW/cXund4Rtd3wy6Av06n6IAXsnwWqmTWy+6LZRYmldUHnzSHaF5SNw85cV548tAjcnForjStaD7ZULC5uTRnmZero=
Received: by 10.114.197.1 with SMTP id u1mr4039262waf.61.1203416922162;
        Tue, 19 Feb 2008 02:28:42 -0800 (PST)
Received: by 10.114.156.2 with HTTP; Tue, 19 Feb 2008 02:28:42 -0800 (PST)
Message-ID: <839ba01c0802190228qda48073qcdcb9a5d2ff25dd@mail.gmail.com>
Date: Tue, 19 Feb 2008 18:28:42 +0800
From: "Cedric Ho" <cedric.ho@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Searching multiple indexes
In-Reply-To: <4968832D3F4C4CE69C9F1CDF86E91A9A@msrvcn04>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <40CDB8FB060446B0AB05DF697FEA029F@msrvcn04>
	 <4968832D3F4C4CE69C9F1CDF86E91A9A@msrvcn04>
X-Virus-Checked: Checked by ClamAV on apache.org

> > I have some questions about searching multiple indexes.
> >
> > 1. IndexSearcher with a MultiReader will search the indexes
> > sequentially?

I think need to use either MultiSearcher or ParallelMultiSearcher

> >
> > 2. ParallelMultiSearcher searches in parallel. How is this
> > done? One thread
> > per index? When will it return? When the slowest search is fineshed?

Yes and Yes I think.

> >
> > 3. When I have to search indexes created with different
> > analyzers (maybe a
> > french and a german analyzer), I have to search them
> > separately by my own?

Yes =)

> >
> > Thank you.


Regards,
Cedric

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32682-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 19 12:21:46 2008
Return-Path: <java-user-return-32682-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 9446 invoked from network); 19 Feb 2008 12:21:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Feb 2008 12:21:46 -0000
Received: (qmail 89164 invoked by uid 500); 19 Feb 2008 12:21:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89136 invoked by uid 500); 19 Feb 2008 12:21:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89124 invoked by uid 99); 19 Feb 2008 12:21:34 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Feb 2008 04:21:34 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of cambazz@gmail.com designates 72.14.220.159 as permitted sender)
Received: from [72.14.220.159] (HELO fg-out-1718.google.com) (72.14.220.159)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Feb 2008 12:21:02 +0000
Received: by fg-out-1718.google.com with SMTP id d23so1743989fga.27
        for <java-user@lucene.apache.org>; Tue, 19 Feb 2008 04:21:10 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        bh=LIr12hcY50kfWnQeRQkjmxOY8ZCb25CkA70PdccjAfc=;
        b=H6P3Mc2LjYr2A1CTpxlmiU2Ppq4YB7iTPbT3nQFslYMiVBg47+pTw9oSslHsY6rGS6u5lNvuT1xk57SWWmvePmOO3OSmtRSM+2Aei9R4W5qox4H7qsHYxLwTrdtzxX/LoZANDyZHlrDFXruWp8lDO4/Dl9uJopWAtyUwrA9LCTU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=tVKdPTxWLJ1Rk/wdcv3WFpzytg3WVDfkezQgFGb9YoftuK7Y94nL6UVTFTUCXh4rM/B/mohvBR9xzkDpAXkjMZsBlGhnHDu+AmdW3UzFmou7lz6MXhUfCHlQKQZiKnsm0PHpnUOp73K/zaSG7v096wlCKjzaRzjqxCVkkepph+A=
Received: by 10.82.127.14 with SMTP id z14mr12393758buc.33.1203423669543;
        Tue, 19 Feb 2008 04:21:09 -0800 (PST)
Received: by 10.82.145.2 with HTTP; Tue, 19 Feb 2008 04:21:09 -0800 (PST)
Message-ID: <1bcb7c7f0802190421s322e7bcdgc4604d1d75123e73@mail.gmail.com>
Date: Tue, 19 Feb 2008 14:21:09 +0200
From: "Cam Bazz" <cambazz@gmail.com>
To: java-user@lucene.apache.org
Subject: query question
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_14576_25848242.1203423669539"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_14576_25848242.1203423669539
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hello,

I have a tokenized field where I store some info.

Lets say I have "abc 1234" and "abc 678"

When the user searches for "abc1234" how can I find "abc 1234" ?

Best.

-C.B.

------=_Part_14576_25848242.1203423669539--

From java-user-return-32683-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 19 14:37:42 2008
Return-Path: <java-user-return-32683-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61516 invoked from network); 19 Feb 2008 14:37:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Feb 2008 14:37:41 -0000
Received: (qmail 17488 invoked by uid 500); 19 Feb 2008 14:37:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17457 invoked by uid 500); 19 Feb 2008 14:37:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17434 invoked by uid 99); 19 Feb 2008 14:37:29 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Feb 2008 06:37:29 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of peterlkeegan@gmail.com designates 64.233.166.178 as permitted sender)
Received: from [64.233.166.178] (HELO py-out-1112.google.com) (64.233.166.178)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Feb 2008 14:36:57 +0000
Received: by py-out-1112.google.com with SMTP id a73so5314795pye.9
        for <java-user@lucene.apache.org>; Tue, 19 Feb 2008 06:37:05 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=BPEelMhLbHHPjD78oxlscGGk2pnAHzXbA0JJn9CiYgM=;
        b=SOoV/2Vp6ezRANL5GO6fWLYvPXW6VVpIX+ToCr2Oj4venzfVKBFYxtY6ZjMuHSbaQHq81NZ3TahO6AC8WrvE39OHQsMPBAoP4gebXt9oexNzNLRmtSLcmCb1ojsz4ex/LR/sFaUFkJizLoNFp4riLoBnrmEdwnV/ZlqVJz/XUgg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=XWNLeVbUghpFa8Aer1iQIiPNBqzx1loC5muA9CMjCU7b8UUAiEvzxCtTGFtN1vDuOaSMiFQ+wD30gzn1zEu/JCKoX1ur6VlFx5xhlZx8wGFr9tMLozP8fgsIuM4Mu0lHOx2tX3iL3oCg4v844Xs3C0wAPGWkhhX1XlG7gjodTBE=
Received: by 10.35.39.11 with SMTP id r11mr8347419pyj.23.1203431825682;
        Tue, 19 Feb 2008 06:37:05 -0800 (PST)
Received: by 10.35.29.1 with HTTP; Tue, 19 Feb 2008 06:37:05 -0800 (PST)
Message-ID: <e994873a0802190637w2ddb6237p8f134577bcd8e7cb@mail.gmail.com>
Date: Tue, 19 Feb 2008 09:37:05 -0500
From: "Peter Keegan" <peterlkeegan@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: FieldSortedHitQueue rise in memory
In-Reply-To: <a2c7a60e0802181320o5402f4heb3c9cf6ae578060@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_11618_16560090.1203431825665"
References: <a2c7a60e0802181320o5402f4heb3c9cf6ae578060@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_11618_16560090.1203431825665
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi Brian,

I ran into something similar a long time ago. My custom sort objects were
being cached by Lucene, but there were too many of them because each one had
different 'reference values' for different queries. So, I changed the equals
and hashcode methods to NOT use any instance data, thus avoiding the
caching.

Could this be what you're seeing?

Peter


On Feb 18, 2008 4:20 PM, Brian Doyle <brianpdoyle@gmail.com> wrote:

> We've implemented a custom sort class and use it to sort by distance.   We
> have implemented the equals and hashcode in the sort comparator.   After
> running for a few hours we're reaching peak memory usage and eventually
> the
> server runs out of memory.   We did some profiling and noticed that a
> large
> chunk of memory is being used in the
> lucence.search.FieldSortedHitQueueclass.   Has anyone seen this
> behavior before or know how we can stop this
> class from growing in size?
>

------=_Part_11618_16560090.1203431825665--

From java-user-return-32684-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 19 15:20:34 2008
Return-Path: <java-user-return-32684-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53933 invoked from network); 19 Feb 2008 15:20:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Feb 2008 15:20:34 -0000
Received: (qmail 16523 invoked by uid 500); 19 Feb 2008 15:20:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16485 invoked by uid 500); 19 Feb 2008 15:20:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16472 invoked by uid 99); 19 Feb 2008 15:20:21 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Feb 2008 07:20:21 -0800
X-ASF-Spam-Status: No, hits=4.0 required=10.0
	tests=DNS_FROM_OPENWHOIS,FORGED_YAHOO_RCVD,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Feb 2008 15:19:35 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1JRUGC-0003aj-G5
	for java-user@lucene.apache.org; Tue, 19 Feb 2008 07:19:56 -0800
Message-ID: <15560506.post@talk.nabble.com>
Date: Tue, 19 Feb 2008 07:19:56 -0800 (PST)
From: techkatta <techkatta@yahoo.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene in EJB enviornment
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: techkatta@yahoo.com
X-Virus-Checked: Checked by ClamAV on apache.org


Yes, as per the Lucene performance standards use only one IndexSearcher
instance is true. But i am using the Lucene with Berkeley DB JE as a
datastore in the EJB. So while exiting from the Sesssion Bean i am closing
Berkeley DB JE connections as per the EJB standards. Which internally closes
the JEDirectory, and it causes the IndexSearcher unavailable for the next
request. 

My question is how to retain the IndexSearcher as a resuable instance ?


Otis Gospodnetic wrote:
> 
> Hello - opening a new IndexSearcher for every request is not the thing to
> do.  Reuse a single IndexSearcher instance.  This must be in the FAQ. :)
> 
> Otis
> --
> Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch
> 
> ----- Original Message ----
>> From: techkatta <techkatta@yahoo.com>
>> To: java-user@lucene.apache.org
>> Sent: Monday, February 18, 2008 10:19:04 AM
>> Subject: Lucene in EJB enviornment
>> 
>> 
>> I am using the Lucene in the EJB enviornment with Berkeley DB JE as a
>> data
>> store using the JCA on JBoss 4.2.0 
>> 
>> My question is using Lucene in EJB enviornment is suggestable or not ?
>> 
>> For every request i am trying to open the IndexSearcher object and while
>> exiting from the EJb i am closing. It's giving OutOfMemory issues in the
>> production server after 2 to 3 hrs running.
>> 
>> Can anybody the suggest the soultion for the above probelm ?
>> 
>> Thanks,
>> techkatta
>> 
>> 
>> 
>> 
>> 
>> 
>> -- 
>> View this message in context: 
>> http://www.nabble.com/Lucene-in-EJB-enviornment-tp15546759p15546759.html
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>> 
>> 
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>> 
>> 
> 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/Lucene-in-EJB-enviornment-tp15546759p15560506.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32685-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 19 15:41:05 2008
Return-Path: <java-user-return-32685-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67053 invoked from network); 19 Feb 2008 15:41:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Feb 2008 15:41:05 -0000
Received: (qmail 61585 invoked by uid 500); 19 Feb 2008 15:40:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61552 invoked by uid 500); 19 Feb 2008 15:40:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61541 invoked by uid 99); 19 Feb 2008 15:40:52 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Feb 2008 07:40:52 -0800
X-ASF-Spam-Status: No, hits=-4.0 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [128.230.108.46] (HELO SUEXCL-02.ad.syr.edu) (128.230.108.46)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Feb 2008 15:40:05 +0000
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Rails and lucene
Date: Tue, 19 Feb 2008 10:39:33 -0500
Message-ID: <9294E20AED46934EA459020706463F947EBB83@SUEXCL-02.ad.syr.edu>
In-Reply-To: <e7dd79a40802182325n4f4b9ca2o189e7d86af047d1c@mail.gmail.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Rails and lucene
Thread-Index: AchyyLtI+tJ3JYdNSJS5x1SeS7Wt7QARLQlg
From: "Steven A Rowe" <sarowe@syr.edu>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Cooper Geng,

Ferret is a Lucene-inspired Ruby search engine for Ruby - maybe that =
would be useful for you?:

<http://ferret.davebalmain.com/trac>

Steve

On 02/19/2008 at 2:25 AM, coolgeng coolgeng wrote:
> Hi guys,
>     Now an idea knock my brain, which I want to integrate the
> lucene into my
> ruby application. And the newest lucene api owns the
> interface to join the
> ruby application. UnfortunatelyI have no experience about it.
> Let us talk
> about it.
>=20
> --
> Best Regards
> Cooper Geng
>

=20


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32686-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 19 16:04:24 2008
Return-Path: <java-user-return-32686-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81567 invoked from network); 19 Feb 2008 16:04:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Feb 2008 16:04:24 -0000
Received: (qmail 11948 invoked by uid 500); 19 Feb 2008 16:04:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11457 invoked by uid 500); 19 Feb 2008 16:04:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11446 invoked by uid 99); 19 Feb 2008 16:04:12 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Feb 2008 08:04:12 -0800
X-ASF-Spam-Status: No, hits=1.5 required=10.0
	tests=SPF_PASS,WEIRD_PORT
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of yseeley@gmail.com designates 64.233.184.225 as permitted sender)
Received: from [64.233.184.225] (HELO wr-out-0506.google.com) (64.233.184.225)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Feb 2008 16:03:40 +0000
Received: by wr-out-0506.google.com with SMTP id c55so2218464wra.11
        for <java-user@lucene.apache.org>; Tue, 19 Feb 2008 08:03:47 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        bh=YLWesiYeaNXQ9x3V5VtEDiXWciwsmfSNbJ6Z05qFMXk=;
        b=SoH4LlxcpxPAg4/UCcdQJe6NYwAe9UVh+6n57eJXl74FiwXBDNveZ4IENo2oFwvOBrmZ2f0mUxCi92Wq6ThcJw+X+VNxPSMFe5I95oKsPLJDBYyZkEa6wBrEQS9qM9RwlTN73A250PeqDVZKxGyaOApt8ycAtP9h0hg5HXY1zZQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=coXmlHbAnpV17kWKEXTGZ+O8hXe9wN9nIHejtgtmMUxWSj6soNRXAZDA32BhxTYRuYjugJ4dfgbjQ77ELN18V6GtgK1SkSEvCmrKEbGM14UACG1EtDThJsJOpiMvAFvChvyu6O9Z/WPIlduSXAzHLkqvkEuA9CnXlrtr196Q3nk=
Received: by 10.114.92.2 with SMTP id p2mr2921395wab.90.1203437026653;
        Tue, 19 Feb 2008 08:03:46 -0800 (PST)
Received: by 10.114.75.4 with HTTP; Tue, 19 Feb 2008 08:03:46 -0800 (PST)
Message-ID: <c68e39170802190803t4ff9a9d0y1932c9ad6859784d@mail.gmail.com>
Date: Tue, 19 Feb 2008 11:03:46 -0500
From: "Yonik Seeley" <yonik@apache.org>
Sender: yseeley@gmail.com
To: java-user@lucene.apache.org
Subject: Re: query question
In-Reply-To: <1bcb7c7f0802190421s322e7bcdgc4604d1d75123e73@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <1bcb7c7f0802190421s322e7bcdgc4604d1d75123e73@mail.gmail.com>
X-Google-Sender-Auth: 499df03cdeca877d
X-Virus-Checked: Checked by ClamAV on apache.org

One way is to use WordDelimiterFilter in the analyzer.
The example schema has it in the fieldType "text"...
also check out http://localhost:8983/solr/admin/analysis.jsp

-Yonik

On Feb 19, 2008 7:21 AM, Cam Bazz <cambazz@gmail.com> wrote:
> Hello,
>
> I have a tokenized field where I store some info.
>
> Lets say I have "abc 1234" and "abc 678"
>
> When the user searches for "abc1234" how can I find "abc 1234" ?
>
> Best.
>
> -C.B.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32687-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 19 16:06:56 2008
Return-Path: <java-user-return-32687-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 83035 invoked from network); 19 Feb 2008 16:06:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Feb 2008 16:06:56 -0000
Received: (qmail 18603 invoked by uid 500); 19 Feb 2008 16:06:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17701 invoked by uid 500); 19 Feb 2008 16:06:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17690 invoked by uid 99); 19 Feb 2008 16:06:43 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Feb 2008 08:06:43 -0800
X-ASF-Spam-Status: No, hits=-4.0 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [128.230.108.46] (HELO SUEXCL-02.ad.syr.edu) (128.230.108.46)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Feb 2008 16:05:57 +0000
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: RE: How to index word-pairs and phrases
Date: Tue, 19 Feb 2008 11:05:26 -0500
Message-ID: <9294E20AED46934EA459020706463F947EBB86@SUEXCL-02.ad.syr.edu>
In-Reply-To: <47BA8651.9090003@yahoo.co.uk>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: How to index word-pairs and phrases
Thread-Index: Achy064PABNJVyvxQ723UkbTS4CwHAAPUYwQ
From: "Steven A Rowe" <sarowe@syr.edu>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Mark,

The ShingleFilter contrib has not been committed yet - it's still here:

   https://issues.apache.org/jira/browse/LUCENE-400

Steve

On 02/19/2008 at 2:33 AM, markharw00d wrote:
> Further to Grant's useful background - there is an analyzer =
specifically
> for multi-word terms in "contrib". See
> Lucene\contrib\analyzers\src\java\org\apache\lucene\analysis\shingle
>=20
> Cheers
> Mark
> > Hi Ghinwa,
> >=20
> > A Term is simply a unit of tokenization that has been indexed for a
> > Field, produced by a TokenStream.   In the demo, on the main site,
> > this can be seen in the file called IndexFiles.java on line 56:
> > IndexWriter writer =3D new IndexWriter(INDEX_DIR, new
> > StandardAnalyzer(), true, IndexWriter.MaxFieldLength.LIMITED);
> >=20
> > The key being that the StandardAnalyzer is used to get a =
TokenStream.
> > The TokenStream.next() method returns a Token.  All a Term is, is a
> > Token that has been indexed for a given Field.  In a nutshell, =
though,
> > a Term is whatever you want it to be, based on your Analyzer.  It =
could
> > be a whole document as a single string or it could be a string
> > containing a single character.  In reality, it usually corresponds =
to a
> > single word.
> >=20
> > Have a look at the wiki, also, as there are many talks and articles
> > explaining all of this.  Lucene In Action, while outdated, is also =
an
> > excellent book for explaining this stuff (with the exception that =
some
> > of the code examples no longer work on the latest Lucene version)
> >=20
> > Getting beyond that, you will need to look into adding spell =
checking
> > (in Lucene's "contrib" area) and other features like stemming and
> > synonyms to handle the various issues you bring up.
> >=20
> > Hope that helps,
> > Grant
> >=20
> > On Feb 18, 2008, at 7:36 PM, Ghinwa Choueiter wrote:
> >=20
> > > Hi,
> > >=20
> > > I am new to Lucene and have been reading the documentation. I =
would
> > > like to use Lucene to query a song database by lyrics. The query =
could
> > > potentially contain typos, or even wrong words, word contractions
> > > (can't versus cannot), etc..
> > >=20
> > > I would like to create an inverted list by word pairs and possibly
> > > phrases and not just by isolated words. For example:
> > > <w1,w2>   < d1, d10, d27>
> > > <w2,w3>   <d2, d13>
> > > ...
> > >=20
> > > OR even
> > > <phrase 1> <d1, d3,...>
> > > <phrase 2> <...>
> > > ...
> > >=20
> > > It seems to me that, by default, the index in Lucene stores =
statistics
> > > for isolated words. The Lucene documentation refers to the word =
"Term"
> > > all the time and seems to imply that "Term" can be a word or a =
phrase,
> > > but I can't see how IndexWriter can read a document and index it =
by
> > > word pairs.
> > >=20
> > > thank you in advance for the answers and my apologies if I did not
> > > get the terminology quite right.
> > >=20
> > > -Ghinwa
> >=20
> > --------------------------
> > Grant Ingersoll
> > http://lucene.grantingersoll.com
> > http://www.lucenebootcamp.com
> >=20
> > Lucene Helpful Hints:
> > http://wiki.apache.org/lucene-java/BasicsOfPerformance
> > http://wiki.apache.org/lucene-java/LuceneFAQ
> >=20
> >=20
> >=20
> >=20
> >=20
> >=20
> > =
---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org For
> > additional commands, e-mail: java-user-help@lucene.apache.org
> >=20
> >=20
> >=20
>=20
>=20
>=20
> --------------------------------------------------------------------- =
To
> unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org For
> additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>

=20


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32688-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 19 16:29:23 2008
Return-Path: <java-user-return-32688-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95663 invoked from network); 19 Feb 2008 16:29:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Feb 2008 16:29:22 -0000
Received: (qmail 77032 invoked by uid 500); 19 Feb 2008 16:28:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77004 invoked by uid 500); 19 Feb 2008 16:28:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76988 invoked by uid 99); 19 Feb 2008 16:28:54 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Feb 2008 08:28:54 -0800
X-ASF-Spam-Status: No, hits=-4.0 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ghinwa@csail.mit.edu designates 128.30.2.149 as permitted sender)
Received: from [128.30.2.149] (HELO outgoing.csail.mit.edu) (128.30.2.149)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Feb 2008 16:28:06 +0000
Received: from sls-370-25.csail.mit.edu ([128.30.34.47])
	by outgoing.csail.mit.edu with esmtps (TLSv1:AES256-SHA:256)
	(Exim 4.63)
	(envelope-from <ghinwa@csail.mit.edu>)
	id 1JRVKT-0001Tc-PO
	for java-user@lucene.apache.org; Tue, 19 Feb 2008 11:28:25 -0500
Received: from ghinwa (helo=localhost)
	by sls-370-25.csail.mit.edu with local-esmtp (Exim 4.63)
	(envelope-from <ghinwa@csail.mit.edu>)
	id 1JRVKT-0004FI-ND
	for java-user@lucene.apache.org; Tue, 19 Feb 2008 11:28:25 -0500
Date: Tue, 19 Feb 2008 11:28:25 -0500 (EST)
From: Ghinwa Choueiter <ghinwa@csail.mit.edu>
To: java-user@lucene.apache.org
Subject: RE: How to index word-pairs and phrases
In-Reply-To: <9294E20AED46934EA459020706463F947EBB86@SUEXCL-02.ad.syr.edu>
Message-ID: <Pine.LNX.4.64.0802191113150.11020@sls-370-25.csail.mit.edu>
References: <9294E20AED46934EA459020706463F947EBB86@SUEXCL-02.ad.syr.edu>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII; format=flowed
Sender: Ghinwa Choueiter <ghinwa@csail.mit.edu>
X-Virus-Checked: Checked by ClamAV on apache.org

What about
\contrib\analyzers\src\java\org\apache\lucene\analysis\ngram  ??

Does this tokenizer do what I need?

thank you,
-Ghinwa

On Tue, 19 Feb 2008, Steven A Rowe wrote:

> Mark,
>
> The ShingleFilter contrib has not been committed yet - it's still here:
>
>   https://issues.apache.org/jira/browse/LUCENE-400
>
> Steve
>
> On 02/19/2008 at 2:33 AM, markharw00d wrote:
>> Further to Grant's useful background - there is an analyzer specifically
>> for multi-word terms in "contrib". See
>> Lucene\contrib\analyzers\src\java\org\apache\lucene\analysis\shingle
>>
>> Cheers
>> Mark
>>> Hi Ghinwa,
>>>
>>> A Term is simply a unit of tokenization that has been indexed for a
>>> Field, produced by a TokenStream.   In the demo, on the main site,
>>> this can be seen in the file called IndexFiles.java on line 56:
>>> IndexWriter writer = new IndexWriter(INDEX_DIR, new
>>> StandardAnalyzer(), true, IndexWriter.MaxFieldLength.LIMITED);
>>>
>>> The key being that the StandardAnalyzer is used to get a TokenStream.
>>> The TokenStream.next() method returns a Token.  All a Term is, is a
>>> Token that has been indexed for a given Field.  In a nutshell, though,
>>> a Term is whatever you want it to be, based on your Analyzer.  It could
>>> be a whole document as a single string or it could be a string
>>> containing a single character.  In reality, it usually corresponds to a
>>> single word.
>>>
>>> Have a look at the wiki, also, as there are many talks and articles
>>> explaining all of this.  Lucene In Action, while outdated, is also an
>>> excellent book for explaining this stuff (with the exception that some
>>> of the code examples no longer work on the latest Lucene version)
>>>
>>> Getting beyond that, you will need to look into adding spell checking
>>> (in Lucene's "contrib" area) and other features like stemming and
>>> synonyms to handle the various issues you bring up.
>>>
>>> Hope that helps,
>>> Grant
>>>
>>> On Feb 18, 2008, at 7:36 PM, Ghinwa Choueiter wrote:
>>>
>>>> Hi,
>>>>
>>>> I am new to Lucene and have been reading the documentation. I would
>>>> like to use Lucene to query a song database by lyrics. The query could
>>>> potentially contain typos, or even wrong words, word contractions
>>>> (can't versus cannot), etc..
>>>>
>>>> I would like to create an inverted list by word pairs and possibly
>>>> phrases and not just by isolated words. For example:
>>>> <w1,w2>   < d1, d10, d27>
>>>> <w2,w3>   <d2, d13>
>>>> ...
>>>>
>>>> OR even
>>>> <phrase 1> <d1, d3,...>
>>>> <phrase 2> <...>
>>>> ...
>>>>
>>>> It seems to me that, by default, the index in Lucene stores statistics
>>>> for isolated words. The Lucene documentation refers to the word "Term"
>>>> all the time and seems to imply that "Term" can be a word or a phrase,
>>>> but I can't see how IndexWriter can read a document and index it by
>>>> word pairs.
>>>>
>>>> thank you in advance for the answers and my apologies if I did not
>>>> get the terminology quite right.
>>>>
>>>> -Ghinwa
>>>
>>> --------------------------
>>> Grant Ingersoll
>>> http://lucene.grantingersoll.com
>>> http://www.lucenebootcamp.com
>>>
>>> Lucene Helpful Hints:
>>> http://wiki.apache.org/lucene-java/BasicsOfPerformance
>>> http://wiki.apache.org/lucene-java/LuceneFAQ
>>>
>>>
>>>
>>>
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org For
>>> additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>>
>>
>>
>>
>> --------------------------------------------------------------------- To
>> unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org For
>> additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32689-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 19 16:41:26 2008
Return-Path: <java-user-return-32689-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 2443 invoked from network); 19 Feb 2008 16:41:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Feb 2008 16:41:26 -0000
Received: (qmail 4585 invoked by uid 500); 19 Feb 2008 16:41:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4550 invoked by uid 500); 19 Feb 2008 16:41:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4539 invoked by uid 99); 19 Feb 2008 16:41:13 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Feb 2008 08:41:12 -0800
X-ASF-Spam-Status: No, hits=-4.0 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [128.230.108.46] (HELO SUEXCL-02.ad.syr.edu) (128.230.108.46)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Feb 2008 16:40:26 +0000
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: RE: How to index word-pairs and phrases
Date: Tue, 19 Feb 2008 11:39:55 -0500
Message-ID: <9294E20AED46934EA459020706463F947EBB92@SUEXCL-02.ad.syr.edu>
In-Reply-To: <Pine.LNX.4.64.0802191113150.11020@sls-370-25.csail.mit.edu>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: How to index word-pairs and phrases
Thread-Index: AchzFJ4TRh6y6Y2vRF6QanY4iI6l2wAANjHA
From: "Steven A Rowe" <sarowe@syr.edu>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Ghinwa,

o.a.l.analysis.ngram.NgramTokenizer is a *character* level n-gram filter =
- from text "word1 word2 word3" you get tokens "wo", "or", "rd", "d1", =
etc.

The ShingleFilter gives you "word1 word2" and "word2 word3".

Steve

On 02/19/2008 at 11:28 AM, Ghinwa Choueiter wrote:
> What about
> \contrib\analyzers\src\java\org\apache\lucene\analysis\ngram  ??
>=20
> Does this tokenizer do what I need?
>=20
> thank you,
> -Ghinwa
>=20
> On Tue, 19 Feb 2008, Steven A Rowe wrote:
>=20
> > Mark,
> >=20
> > The ShingleFilter contrib has not been committed yet - it's still =
here:
> >=20
> >   https://issues.apache.org/jira/browse/LUCENE-400
> >=20
> > Steve
> >=20
> > On 02/19/2008 at 2:33 AM, markharw00d wrote:
> > > Further to Grant's useful background - there is an analyzer
> > > specifically for multi-word terms in "contrib". See
> > >=20
> > > =
Lucene\contrib\analyzers\src\java\org\apache\lucene\analysis\shingle
> > >=20
> > > Cheers
> > > Mark
> > > > Hi Ghinwa,
> > > >=20
> > > > A Term is simply a unit of tokenization that has been indexed =
for a
> > > > Field, produced by a TokenStream.   In the demo, on the main =
site,
> > > > this can be seen in the file called IndexFiles.java on line 56:
> > > > IndexWriter writer =3D new IndexWriter(INDEX_DIR, new
> > > > StandardAnalyzer(), true, IndexWriter.MaxFieldLength.LIMITED);
> > > >=20
> > > > The key being that the StandardAnalyzer is used to get a =
TokenStream.
> > > > The TokenStream.next() method returns a Token.  All a Term is, =
is a
> > > > Token that has been indexed for a given Field.  In a nutshell,
> > > > though, a Term is whatever you want it to be, based on your =
Analyzer.
> > > >  It could be a whole document as a single string or it could be =
a
> > > > string containing a single character.  In reality, it usually
> > > > corresponds to a single word.
> > > >=20
> > > > Have a look at the wiki, also, as there are many talks and =
articles
> > > > explaining all of this.  Lucene In Action, while outdated, is =
also an
> > > > excellent book for explaining this stuff (with the exception =
that
> > > > some of the code examples no longer work on the latest Lucene =
version)
> > > >=20
> > > > Getting beyond that, you will need to look into adding spell =
checking
> > > > (in Lucene's "contrib" area) and other features like stemming =
and
> > > > synonyms to handle the various issues you bring up.
> > > >=20
> > > > Hope that helps,
> > > > Grant
> > > >=20
> > > > On Feb 18, 2008, at 7:36 PM, Ghinwa Choueiter wrote:
> > > >=20
> > > > > Hi,
> > > > >=20
> > > > > I am new to Lucene and have been reading the documentation. I =
would
> > > > > like to use Lucene to query a song database by lyrics. The =
query
> > > > > could potentially contain typos, or even wrong words, word
> > > > > contractions (can't versus cannot), etc..
> > > > >=20
> > > > > I would like to create an inverted list by word pairs and =
possibly
> > > > > phrases and not just by isolated words. For example: <w1,w2>   =
< d1,
> > > > > d10, d27> <w2,w3>   <d2, d13> ...
> > > > >=20
> > > > > OR even
> > > > > <phrase 1> <d1, d3,...>
> > > > > <phrase 2> <...>
> > > > > ...
> > > > >=20
> > > > > It seems to me that, by default, the index in Lucene stores
> > > > > statistics for isolated words. The Lucene documentation refers =
to
> > > > > the word "Term" all the time and seems to imply that "Term" =
can be a
> > > > > word or a phrase, but I can't see how IndexWriter can read a
> > > > > document and index it by word pairs.
> > > > >=20
> > > > > thank you in advance for the answers and my apologies if I did =
not
> > > > > get the terminology quite right.
> > > > >=20
> > > > > -Ghinwa
> > > >=20
> > > > --------------------------
> > > > Grant Ingersoll
> > > > http://lucene.grantingersoll.com
> > > > http://www.lucenebootcamp.com
> > > >=20
> > > > Lucene Helpful Hints:
> > > > http://wiki.apache.org/lucene-java/BasicsOfPerformance
> > > > http://wiki.apache.org/lucene-java/LuceneFAQ


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32690-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 19 17:32:50 2008
Return-Path: <java-user-return-32690-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30607 invoked from network); 19 Feb 2008 17:32:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Feb 2008 17:32:50 -0000
Received: (qmail 1097 invoked by uid 500); 19 Feb 2008 17:32:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 1060 invoked by uid 500); 19 Feb 2008 17:32:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 1008 invoked by uid 99); 19 Feb 2008 17:32:35 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Feb 2008 09:32:35 -0800
X-ASF-Spam-Status: No, hits=-2.5 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS,WEIRD_PORT
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [128.230.108.46] (HELO SUEXCL-02.ad.syr.edu) (128.230.108.46)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Feb 2008 17:32:02 +0000
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: RE: query question
Date: Tue, 19 Feb 2008 12:31:18 -0500
Message-ID: <9294E20AED46934EA459020706463F947EBB9A@SUEXCL-02.ad.syr.edu>
In-Reply-To: <c68e39170802190803t4ff9a9d0y1932c9ad6859784d@mail.gmail.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: query question
Thread-Index: AchzERpSz47stziGQUmy/G+avWujggAC5t/w
From: "Steven A Rowe" <sarowe@syr.edu>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi C.B.,

Yonik is referring to a Solr class:

<http://svn.apache.org/viewvc/lucene/solr/trunk/src/java/org/apache/solr/=
analysis/WordDelimiterFilter.java?view=3Dmarkup>

You should theoretically be able to use this filter with straight Lucene =
code, as long as it's on the classpath.

(I'm guessing Yonik's wires got crossed and he thought he was replying =
to a post on the solr-user list.)

Steve

On 02/19/2008 at 11:03 AM, Yonik Seeley wrote:
> One way is to use WordDelimiterFilter in the analyzer.
> The example schema has it in the fieldType "text"...
> also check out http://localhost:8983/solr/admin/analysis.jsp
>=20
> -Yonik
>=20
> On Feb 19, 2008 7:21 AM, Cam Bazz <cambazz@gmail.com> wrote:
> > Hello,
> >=20
> > I have a tokenized field where I store some info.
> >=20
> > Lets say I have "abc 1234" and "abc 678"
> >=20
> > When the user searches for "abc1234" how can I find "abc 1234" ?
> >=20
> > Best.
> >=20
> > -C.B.
>=20
> --------------------------------------------------------------------- =
To
> unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org For
> additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>

=20


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32691-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 19 20:26:09 2008
Return-Path: <java-user-return-32691-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30753 invoked from network); 19 Feb 2008 20:26:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Feb 2008 20:26:09 -0000
Received: (qmail 73214 invoked by uid 500); 19 Feb 2008 20:25:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73186 invoked by uid 500); 19 Feb 2008 20:25:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73175 invoked by uid 99); 19 Feb 2008 20:25:56 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Feb 2008 12:25:56 -0800
X-ASF-Spam-Status: No, hits=-4.0 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [64.18.2.161] (HELO exprod7og104.obsmtp.com) (64.18.2.161)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 19 Feb 2008 20:25:09 +0000
Received: from source ([209.85.142.190]) by exprod7ob104.postini.com ([64.18.6.12]) with SMTP;
	Tue, 19 Feb 2008 12:25:09 PST
Received: by ti-out-0910.google.com with SMTP id 28so1103757tif.11
        for <java-user@lucene.apache.org>; Tue, 19 Feb 2008 12:25:24 -0800 (PST)
Received: by 10.110.52.5 with SMTP id z5mr4857958tiz.17.1203452724648;
        Tue, 19 Feb 2008 12:25:24 -0800 (PST)
Received: by 10.150.151.13 with HTTP; Tue, 19 Feb 2008 12:25:24 -0800 (PST)
Message-ID: <47699a8d0802191225j4f4f7aefx29487046750933c@mail.gmail.com>
Date: Tue, 19 Feb 2008 12:25:24 -0800
From: "Kyle Maxwell" <kyle@casttv.com>
To: java-user@lucene.apache.org
Subject: Re: Rails and lucene
In-Reply-To: <e7dd79a40802182325n4f4b9ca2o189e7d86af047d1c@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <e7dd79a40802182325n4f4b9ca2o189e7d86af047d1c@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

> Hi guys,
>     Now an idea knock my brain, which I want to integrate the lucene into my
> ruby application. And the newest lucene api owns the interface to join the
> ruby application. UnfortunatelyI have no experience about it. Let us talk
> about it.

Use Solr, or integrate Lucene via JRuby.  I cannot recommend Ferret.

-- 
Kyle Maxwell
Software Engineer
CastTV, Inc
http://www.casttv.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32692-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 19 21:11:15 2008
Return-Path: <java-user-return-32692-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 55659 invoked from network); 19 Feb 2008 21:11:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Feb 2008 21:11:14 -0000
Received: (qmail 52234 invoked by uid 500); 19 Feb 2008 21:11:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52076 invoked by uid 500); 19 Feb 2008 21:11:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52065 invoked by uid 99); 19 Feb 2008 21:11:02 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Feb 2008 13:11:02 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of acidbriggs@gmail.com designates 72.14.204.229 as permitted sender)
Received: from [72.14.204.229] (HELO qb-out-0506.google.com) (72.14.204.229)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Feb 2008 21:10:28 +0000
Received: by qb-out-0506.google.com with SMTP id o21so2216178qba.9
        for <java-user@lucene.apache.org>; Tue, 19 Feb 2008 13:10:36 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        bh=vfBnV63ynueF3W5mBXM95vnos7PdR3r960k890E1ssw=;
        b=QvmCQSyu1/1kUQhAuRQA1ERWiiFHN/Q3lhcrxyfczdBaiH3d2c+xU4CHNOgGqpc1Yb5nXgvz1WCy2IfodVJI6uLfjzeg7OXqJOwzm5OlO0sq19YKZkSzrwfBk8WBxsVgGh/k8+zDZ7X1TdrDrYp/8GHNLWHPWt3IyzvOnbtjK7E=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=PPrmTfNMWAesEjZTDo6MT44NnyMt1AAOWDDEifZHLCMoOp1gzXwRHF/V8rJQtCjgT/BrC2U1CQL8JZYaR6oHs354BS5rIvAmVgb1JML+MgtQnYRDaS2pNnj+49ySWQW2taUiw1Bkq0UQ4ZVnspE1umjCSzqIgOYibFtzoZ6FHVs=
Received: by 10.140.191.14 with SMTP id o14mr5072439rvf.78.1203455436051;
        Tue, 19 Feb 2008 13:10:36 -0800 (PST)
Received: by 10.141.161.21 with HTTP; Tue, 19 Feb 2008 13:10:35 -0800 (PST)
Message-ID: <1c0e93080802191310r7e058f47h6cdbaed6bdf0a800@mail.gmail.com>
Date: Tue, 19 Feb 2008 16:10:35 -0500
From: Briggs <acidbriggs@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Rails and lucene
In-Reply-To: <47699a8d0802191225j4f4f7aefx29487046750933c@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <e7dd79a40802182325n4f4b9ca2o189e7d86af047d1c@mail.gmail.com>
	 <47699a8d0802191225j4f4f7aefx29487046750933c@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

I agree with using Solr.  Solr can output ruby code so it can be
immediately evaluated.

http://wiki.apache.org/solr/SolRuby?highlight=%28CategoryQueryResponseWriter%29%7C%28%28CategoryQueryResponseWriter%29%29

Solr is located at:
http://lucene.apache.org/solr/



On Feb 19, 2008 3:25 PM, Kyle Maxwell <kyle@casttv.com> wrote:
> > Hi guys,
> >     Now an idea knock my brain, which I want to integrate the lucene into my
> > ruby application. And the newest lucene api owns the interface to join the
> > ruby application. UnfortunatelyI have no experience about it. Let us talk
> > about it.
>
> Use Solr, or integrate Lucene via JRuby.  I cannot recommend Ferret.
>
> --
> Kyle Maxwell
> Software Engineer
> CastTV, Inc
> http://www.casttv.com
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>



-- 
"Conscious decisions by conscious minds are what make reality real"

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32693-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 20 05:00:33 2008
Return-Path: <java-user-return-32693-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 66066 invoked from network); 20 Feb 2008 05:00:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Feb 2008 05:00:33 -0000
Received: (qmail 83500 invoked by uid 500); 20 Feb 2008 05:00:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83075 invoked by uid 500); 20 Feb 2008 05:00:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83064 invoked by uid 99); 20 Feb 2008 05:00:20 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Feb 2008 21:00:20 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of brianpdoyle@gmail.com designates 209.85.146.183 as permitted sender)
Received: from [209.85.146.183] (HELO wa-out-1112.google.com) (209.85.146.183)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Feb 2008 04:59:48 +0000
Received: by wa-out-1112.google.com with SMTP id j40so4096290wah.11
        for <java-user@lucene.apache.org>; Tue, 19 Feb 2008 20:59:57 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=f0dxpVa2ClrTJXZddvXH2mvUvhaIac9Wo+3W+FfkWEc=;
        b=RNMqkY8D+atV7kiaLbNDBuPF93F3ZcCva7vZYsGLF1KT75e6yX6/FDON1UXNV0bEugUbnjGnJbXPRudU+CxxAfj+qjlg1glyfdPcFmCJHjB6lYqbD6DIjHM0Vx3AKMSpt5/CF5kDTL1BiG8Q9gcSJ9Cp+FE58aBjwMQF3I6rMg8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=LRv+n1WPoYo0+sqhSznh8NbrBII727vXjo4815/XcQZC0s4OZi5n9NSkRP3tIINiRpYSkVf/BPOiRhn/breif5mxoRKvXqQ6PBO5rgFT3DGnrjw1fsV8FdYb2EuitsSkZ7O9x2hQMaMGAvZeDIgEv0HYRduNfIRANXheVbacRl4=
Received: by 10.114.109.1 with SMTP id h1mr6368614wac.35.1203483596957;
        Tue, 19 Feb 2008 20:59:56 -0800 (PST)
Received: by 10.114.182.18 with HTTP; Tue, 19 Feb 2008 20:59:56 -0800 (PST)
Message-ID: <a2c7a60e0802192059i78471223i7db74e62715c343e@mail.gmail.com>
Date: Tue, 19 Feb 2008 21:59:56 -0700
From: "Brian Doyle" <brianpdoyle@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: FieldSortedHitQueue rise in memory
In-Reply-To: <e994873a0802190637w2ddb6237p8f134577bcd8e7cb@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_27317_23423390.1203483596945"
References: <a2c7a60e0802181320o5402f4heb3c9cf6ae578060@mail.gmail.com>
	 <e994873a0802190637w2ddb6237p8f134577bcd8e7cb@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_27317_23423390.1203483596945
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

In our custom sort code we had many issues.  We fixed most of them by
implementing hashcode and equals and then needed to have a WeakReference to
the IndexReader.   Once we did this our memory problems have mostly gone
away.  Thanks.

On Feb 19, 2008 7:37 AM, Peter Keegan <peterlkeegan@gmail.com> wrote:

> Hi Brian,
>
> I ran into something similar a long time ago. My custom sort objects were
> being cached by Lucene, but there were too many of them because each one
> had
> different 'reference values' for different queries. So, I changed the
> equals
> and hashcode methods to NOT use any instance data, thus avoiding the
> caching.
>
> Could this be what you're seeing?
>
> Peter
>
>
> On Feb 18, 2008 4:20 PM, Brian Doyle <brianpdoyle@gmail.com> wrote:
>
> > We've implemented a custom sort class and use it to sort by distance.
> We
> > have implemented the equals and hashcode in the sort comparator.   After
> > running for a few hours we're reaching peak memory usage and eventually
> > the
> > server runs out of memory.   We did some profiling and noticed that a
> > large
> > chunk of memory is being used in the
> > lucence.search.FieldSortedHitQueueclass.   Has anyone seen this
> > behavior before or know how we can stop this
> > class from growing in size?
> >
>

------=_Part_27317_23423390.1203483596945--

From java-user-return-32694-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 20 07:51:55 2008
Return-Path: <java-user-return-32694-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82662 invoked from network); 20 Feb 2008 07:51:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Feb 2008 07:51:55 -0000
Received: (qmail 17481 invoked by uid 500); 20 Feb 2008 07:51:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17449 invoked by uid 500); 20 Feb 2008 07:51:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17438 invoked by uid 99); 20 Feb 2008 07:51:43 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Feb 2008 23:51:43 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [213.164.23.137] (HELO netcare.at) (213.164.23.137)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 20 Feb 2008 07:50:58 +0000
Received: (qmail 16296 invoked from network); 20 Feb 2008 07:51:14 -0000
X-Virus-Scanned: by amavis-ng-0.1.6.4-03dc on mail.netcare.at
Received: from [10.15.10.15] ([10.15.10.15])
  by mail.netcare.at ([10.16.0.40])
  with ESMTP via TCP; 20 Feb 2008 07:51:14 -0000
Message-ID: <47BBDBF2.4060502@fischer.name>
Date: Wed, 20 Feb 2008 08:51:14 +0100
From: Markus Fischer <markus@fischer.name>
User-Agent: Thunderbird 2.0.0.9 (Windows/20071031)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: [Resent] Document boosting based on .. semantics?
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

[Resent: guess I sent the first before I completed my subscription, just 
in case it comes up twice ...]

the subject may be a bit weird but I couldn't find a better way to 
describe a problem I'm trying to solve.

If I'm not mistaken, one factor of scoring is the distance of the word 
within the document and the length of the document. I'm titling my 
problem as the cauliflower-problem, but it's related to any "type of" 
problem.

When searching for "cauliflower", I get x hits. Now documents in the top 
range (pos < 10) are most likely selected by the user. Unfortunately, 
although "cauliflower" is in the documents and it's word position is 
like around 3000 characters in the document, the document itself has 
nothing much to do with "cauliflower" or "vegetables" or "eating", etc.

Unfortunately, the most relevant documents come much later in the index 
(pos >= 10) because the "cauliflower" word is positioned like around 
5000 characters within the document.

Based on the relation on the content, these later documents are much 
more appropriate to the search term, because the also deal with 
"vegetables" and "eating", etc.

I'm stuck here how I can signal Lucene to boost those later documents, 
because frankly I don't know on what. I would probably have to tag the 
relation of the document (is-about vegetables, is-about eating) and also 
detect that the searched term is-a vegetable. This gets even more 
complex with non-single-term queries.


On a related topic, I'm also searching for a way to suggest alternate 
spelling of words to the user, when we found a word which is very less 
frequent used in the index or not in the index at all. I'm Austrian 
based, when I e.g. search for "retthich" (wrong spelled "rettich" which 
is radish), Google suggests me the proper spelled word. I'm searching 
for a way to figure how to accomplish this, but again this may be lucene 
off-topic and/or I should properly start a separate thread ...


Has someone an advice how to approach this kind of problems? Is it 
appropriate/can it be solved with Lucene? Am I right here on this list 
anyway? :)

thanks for any feedback,
- Markus


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32695-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 20 12:56:51 2008
Return-Path: <java-user-return-32695-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 87382 invoked from network); 20 Feb 2008 12:56:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Feb 2008 12:56:51 -0000
Received: (qmail 51634 invoked by uid 500); 20 Feb 2008 12:56:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 51601 invoked by uid 500); 20 Feb 2008 12:56:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 51590 invoked by uid 99); 20 Feb 2008 12:56:39 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Feb 2008 04:56:39 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Feb 2008 12:55:50 +0000
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 4057730EFC1A; Wed, 20 Feb 2008 05:56:07 -0700 (MST)
Received: from [10.10.0.76] (unknown [220.128.205.62])
	by ehatchersolutions.com (Postfix) with ESMTP id 5A35930EFC19
	for <java-user@lucene.apache.org>; Wed, 20 Feb 2008 05:56:04 -0700 (MST)
Mime-Version: 1.0 (Apple Message framework v753)
In-Reply-To: <1c0e93080802191310r7e058f47h6cdbaed6bdf0a800@mail.gmail.com>
References: <e7dd79a40802182325n4f4b9ca2o189e7d86af047d1c@mail.gmail.com> <47699a8d0802191225j4f4f7aefx29487046750933c@mail.gmail.com> <1c0e93080802191310r7e058f47h6cdbaed6bdf0a800@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <1B85A7AF-E562-4D82-B030-D2894B2A3035@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Rails and lucene
Date: Wed, 20 Feb 2008 20:55:54 +0800
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.753)
X-Virus-Checked: Checked by ClamAV on apache.org

And if you're using Solr with Ruby, the solr-ruby gem is the way to  
go (gem install solr-ruby).

And if you're interested in trying out a glorious Rails/Solr hack,  
try out Solr Flare, which presents a rudimentary search/faceted/ 
suggest interface:

	Erik


On Feb 20, 2008, at 5:10 AM, Briggs wrote:

> I agree with using Solr.  Solr can output ruby code so it can be
> immediately evaluated.
>
> http://wiki.apache.org/solr/SolRuby?highlight=% 
> 28CategoryQueryResponseWriter%29%7C%28%28CategoryQueryResponseWriter 
> %29%29
>
> Solr is located at:
> http://lucene.apache.org/solr/
>
>
>
> On Feb 19, 2008 3:25 PM, Kyle Maxwell <kyle@casttv.com> wrote:
>>> Hi guys,
>>>     Now an idea knock my brain, which I want to integrate the  
>>> lucene into my
>>> ruby application. And the newest lucene api owns the interface to  
>>> join the
>>> ruby application. UnfortunatelyI have no experience about it. Let  
>>> us talk
>>> about it.
>>
>> Use Solr, or integrate Lucene via JRuby.  I cannot recommend Ferret.
>>
>> --
>> Kyle Maxwell
>> Software Engineer
>> CastTV, Inc
>> http://www.casttv.com
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
>
>
> -- 
> "Conscious decisions by conscious minds are what make reality real"
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32696-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 20 13:03:35 2008
Return-Path: <java-user-return-32696-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89323 invoked from network); 20 Feb 2008 13:03:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Feb 2008 13:03:35 -0000
Received: (qmail 64578 invoked by uid 500); 20 Feb 2008 13:03:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64539 invoked by uid 500); 20 Feb 2008 13:03:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64528 invoked by uid 99); 20 Feb 2008 13:03:23 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Feb 2008 05:03:23 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [213.162.48.15] (HELO soufre.accelance.net) (213.162.48.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Feb 2008 13:02:50 +0000
Received: from [192.168.3.116] (LSt-Amand-152-32-31-90.w82-127.abo.wanadoo.fr [82.127.74.90])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by soufre.accelance.net (Postfix) with ESMTP id 8B13945031
	for <java-user@lucene.apache.org>; Wed, 20 Feb 2008 14:02:56 +0100 (CET)
Message-ID: <47BC24FF.3030805@garambrogne.net>
Date: Wed, 20 Feb 2008 14:02:55 +0100
From: Mathieu Lecarme <mathieu@garambrogne.net>
User-Agent: Thunderbird 2.0.0.9 (X11/20071031)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: [Resent] Document boosting based on .. semantics?
References: <47BBDBF2.4060502@fischer.name>
In-Reply-To: <47BBDBF2.4060502@fischer.name>
X-Enigmail-Version: 0.95.6
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

Markus Fischer a crit :
> Hi,
>
> [Resent: guess I sent the first before I completed my subscription, 
> just in case it comes up twice ...]
>
> the subject may be a bit weird but I couldn't find a better way to 
> describe a problem I'm trying to solve.
>
> If I'm not mistaken, one factor of scoring is the distance of the word 
> within the document and the length of the document. I'm titling my 
> problem as the cauliflower-problem, but it's related to any "type of" 
> problem.
>
> When searching for "cauliflower", I get x hits. Now documents in the 
> top range (pos < 10) are most likely selected by the user. 
> Unfortunately, although "cauliflower" is in the documents and it's 
> word position is like around 3000 characters in the document, the 
> document itself has nothing much to do with "cauliflower" or 
> "vegetables" or "eating", etc.
>
> Unfortunately, the most relevant documents come much later in the 
> index (pos >= 10) because the "cauliflower" word is positioned like 
> around 5000 characters within the document.
>
> Based on the relation on the content, these later documents are much 
> more appropriate to the search term, because the also deal with 
> "vegetables" and "eating", etc.
>
> I'm stuck here how I can signal Lucene to boost those later documents, 
> because frankly I don't know on what. I would probably have to tag the 
> relation of the document (is-about vegetables, is-about eating) and 
> also detect that the searched term is-a vegetable. This gets even more 
> complex with non-single-term queries.
>
>
> On a related topic, I'm also searching for a way to suggest alternate 
> spelling of words to the user, when we found a word which is very less 
> frequent used in the index or not in the index at all. I'm Austrian 
> based, when I e.g. search for "retthich" (wrong spelled "rettich" 
> which is radish), Google suggests me the proper spelled word. I'm 
> searching for a way to figure how to accomplish this, but again this 
> may be lucene off-topic and/or I should properly start a separate 
> thread ...
you can use the ngram pattern and levestein distance to find near words.
I try with  phonetic and aspell dictionnary.

M.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32697-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 20 13:43:15 2008
Return-Path: <java-user-return-32697-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 614 invoked from network); 20 Feb 2008 13:43:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Feb 2008 13:43:15 -0000
Received: (qmail 44948 invoked by uid 500); 20 Feb 2008 13:43:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44920 invoked by uid 500); 20 Feb 2008 13:43:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44904 invoked by uid 99); 20 Feb 2008 13:43:03 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Feb 2008 05:43:03 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.5] (HELO spunkymail-a2.g.dreamhost.com) (208.97.132.5)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Feb 2008 13:42:27 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a2.g.dreamhost.com (Postfix) with ESMTP id 87FAE88048
	for <java-user@lucene.apache.org>; Wed, 20 Feb 2008 05:42:32 -0800 (PST)
Message-Id: <C1368A4B-EC97-4175-A850-9546E504C9D2@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <47BBDBF2.4060502@fischer.name>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v919.2)
Subject: Re: [Resent] Document boosting based on .. semantics?
Date: Wed, 20 Feb 2008 08:42:21 -0500
References: <47BBDBF2.4060502@fischer.name>
X-Mailer: Apple Mail (2.919.2)
X-Virus-Checked: Checked by ClamAV on apache.org


On Feb 20, 2008, at 2:51 AM, Markus Fischer wrote:

> Hi,
>
> [Resent: guess I sent the first before I completed my subscription,  
> just in case it comes up twice ...]
>
> the subject may be a bit weird but I couldn't find a better way to  
> describe a problem I'm trying to solve.
>
> If I'm not mistaken, one factor of scoring is the distance of the  
> word within the document and the length of the document. I'm titling  
> my problem as the cauliflower-problem, but it's related to any "type  
> of" problem.
>
> When searching for "cauliflower", I get x hits. Now documents in the  
> top range (pos < 10) are most likely selected by the user.  
> Unfortunately, although "cauliflower" is in the documents and it's  
> word position is like around 3000 characters in the document, the  
> document itself has nothing much to do with "cauliflower" or  
> "vegetables" or "eating", etc.
>
> Unfortunately, the most relevant documents come much later in the  
> index (pos >= 10) because the "cauliflower" word is positioned like  
> around 5000 characters within the document.
>
> Based on the relation on the content, these later documents are much  
> more appropriate to the search term, because the also deal with  
> "vegetables" and "eating", etc.
>
> I'm stuck here how I can signal Lucene to boost those later  
> documents, because frankly I don't know on what. I would probably  
> have to tag the relation of the document (is-about vegetables, is- 
> about eating) and also detect that the searched term is-a vegetable.  
> This gets even more complex with non-single-term queries.

Well, this is a classic problem in IR.  The question is, how do you  
know when a user types "cauliflower" that they really are interested  
in "vegetables" and "eating" and not the other document?  There really  
is nothing in that query, by itself, that gives you or Lucene that  
information.   Your top hit has the term and has other factors, such  
as document length etc. that make it the top result.  That is not to  
say there is nothing you can do, just that it is hard and can be  
brittle.

Some suggestions (and the use of cauliflower and vegetables, etc. is  
figurative, not literal):
1. If you know cauliflower should be related to vegetables and eating,  
add those as synonyms to your query terms.  This can be hard to  
generalize.
2. If you have some user profile that suggests that user is interested  
in vegetables/eating over other things, then you could incorporate that.
3. If you see that most of your users like the vegetable documents for  
the query cauliflower by doing some log analysis, then you could use  
popularity of the document as a factor in your scoring (see  
FunctionQuery capability in Lucene)
4. You could try to do some fancy-schmancy reasoning using Wordnet,  
hyper/hypo - nyms
5. You could use MoreLikeThis to allow the user to choose the  
vegetable result and say "Give me more documents like this"
6. Last, but certainly not least, if you want the user to get a  
certain document as #1 or #2, then make the document #1 or #2.  You  
don't need search for this.  It's called editorial boosting.  Again,  
hard to generalize, but sometimes you just need a document to be #1  
and trying to tune the various knobs a search engine gives you is  
going to break a whole lot of other things.

Also, what kind of queries are you using such that you get the first  
3K characters in your query?  Are you using some type of SpanQuery or  
are you just referring to the effects of length normalization?  You  
might also try using a different Similarity implementation that  
doesn't punish longer documents as much.

Finally, the explain() method may help you better understand the  
factors that go into why your documents score the way they do.


>
>
>
> On a related topic, I'm also searching for a way to suggest  
> alternate spelling of words to the user, when we found a word which  
> is very less frequent used in the index or not in the index at all.  
> I'm Austrian based, when I e.g. search for "retthich" (wrong spelled  
> "rettich" which is radish), Google suggests me the proper spelled  
> word. I'm searching for a way to figure how to accomplish this, but  
> again this may be lucene off-topic and/or I should properly start a  
> separate thread ...
>

Search the archives here for "Google suggest" or "suggestions", "ajax  
suggestions", etc.  There are a couple of implementations out there  
for Lucene/Solr I believe that use the TermEnum class to go and get  
suggestions.  I believe there might even be some patches in JIRA.


>
> Has someone an advice how to approach this kind of problems? Is it  
> appropriate/can it be solved with Lucene? Am I right here on this  
> list anyway? :)
>
> thanks for any feedback,
> - Markus
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

--------------------------
Grant Ingersoll
http://lucene.grantingersoll.com
http://www.lucenebootcamp.com

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32698-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 20 16:31:28 2008
Return-Path: <java-user-return-32698-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54714 invoked from network); 20 Feb 2008 16:31:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Feb 2008 16:31:27 -0000
Received: (qmail 65041 invoked by uid 500); 20 Feb 2008 16:31:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65012 invoked by uid 500); 20 Feb 2008 16:31:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65001 invoked by uid 99); 20 Feb 2008 16:31:15 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Feb 2008 08:31:15 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Feb 2008 16:30:29 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1JRrqL-00040B-Sf
	for java-user@lucene.apache.org; Wed, 20 Feb 2008 08:30:49 -0800
Message-ID: <15591373.post@talk.nabble.com>
Date: Wed, 20 Feb 2008 08:30:49 -0800 (PST)
From: JensBurkhardt <jensburkhardt@web.de>
To: java-user@lucene.apache.org
Subject: Boost Single Values in Field
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: jensburkhardt@web.de
X-Virus-Checked: Checked by ClamAV on apache.org


Hey,

I'm wondering if you can boost single values and not the whole field.
For example:
i'm having a field called test with "value1 value2 value3" - all packed in a
String - and
i want to boost specific values e.g value1^0.5 value2^1.5 etc.
The problem is that i can't seperate this field. I don't think this will
work but maybe someone has had the 
same problem.
Trying to search took me nowhere :-) so i decided to just ask and maybe i'm
lucky.

Greetings
Jens
-- 
View this message in context: http://www.nabble.com/Boost-Single-Values-in-Field-tp15591373p15591373.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32699-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 20 16:44:37 2008
Return-Path: <java-user-return-32699-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62196 invoked from network); 20 Feb 2008 16:44:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Feb 2008 16:44:36 -0000
Received: (qmail 98906 invoked by uid 500); 20 Feb 2008 16:44:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98878 invoked by uid 500); 20 Feb 2008 16:44:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98867 invoked by uid 99); 20 Feb 2008 16:44:24 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Feb 2008 08:44:24 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Feb 2008 16:43:35 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1JRs32-0004b8-A3
	for java-user@lucene.apache.org; Wed, 20 Feb 2008 08:43:56 -0800
Message-ID: <15591566.post@talk.nabble.com>
Date: Wed, 20 Feb 2008 08:43:56 -0800 (PST)
From: sumittyagi <ping.sumit@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Which file in the lucene package is used to manipulate
 results..
In-Reply-To: <329945.61466.qm@web26014.mail.ukl.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: ping.sumit@gmail.com
References: <14450335.post@talk.nabble.com> <329945.61466.qm@web26014.mail.ukl.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Hi Mark Harwood
I know it's being a long time, but till now i was busy in developing the
database to store the keyword, document and no. of clicks of the document
for the keyword and their respective mappings.
now i want my database to communicate with lucene api and i cannot figure it
out where to start from.
Please help me out, how can i make my database to work with lucene.
Thanks
Sumit

mark harwood wrote:
> 
> Thanks for the context - much more useful.
> The challenge here is similar to that posed by offering end-user tagging
> of content (see here
> http://www.mail-archive.com/java-user@lucene.apache.org/msg17580.html ).
> The main difference here being that words are added to docs implicitly by
> search click-throughs rather than any explicit tagging action.
> 
> In both cases the challenge is that the user data around documents is
> likely to be updated very often while the documents remain relatively
> static. 
> I suspect some additional things to think about are:
> 1) Cancelling out the "human laziness" bias that favours clicking results
> on page 1. Are clicks on page 2 worth more?
> 2) Spam clicks - detecting deliberate gaming of your re-ranking algorithm.
> 3) Lucene doc IDs are not stable - how will you associate query
> terms/click data with documents and join them at speed?
> 4) Are individual words or phrases the unit of boost? "Paris" means
> different things in "Paris Hilton" and "Paris, France".
> 
> A simple approach might be to re-index your content with all of the
> additional search terms from clicks added to the associated document in a
> "searchClicks" field - the more clicks, the more repetitions of the same
> search words in the document to help with tf (Term Frequency). This
> additional content would need to be capped, to avoid huge documents. This
> has the disadvantage of requiring a re-index though. 
> Another option to avoid reindexing everything is to wrap IndexReader (See
> FilterIndexReader) and implement TermEnum/TermDocs for a fake field called
> "searchClicks". The idea is Lucene looks after the usual, static document
> content while your implementation goes off to your more volatile storage
> (e.g. database/parallel index, custom file structure) to retrieve lists of
> doc ids, term frequencies etc. for this "searchClicks" field. All of the
> Lucene queries you might want to throw at this e.g. PhraseQueries can then
> test both the static Lucene fields and your new volatile "click" fields
> without being aware of this low-level trickery. 
> 
> I'm sure there will be other ways of doing this too but this seems like a
> conceptually clean way of modelling it - just seeing search terms as
> extensions to the document content.
> 
> Cheers
> Mark
> 
> 
> ----- Original Message ----
> From: sumittyagi <ping.sumit@gmail.com>
> To: java-user@lucene.apache.org
> Sent: Sunday, 23 December, 2007 5:30:55 AM
> Subject: Re: Which file in the lucene package is used to manipulate
> results..
> 
> 
> Actually what i have to do is...
> 1.) for every query(keyword), among the results obtained, the keyword
>  will
> be mapped with the page clicked, along with the no. of clicks for that
> keyword on that page
> 2.) next time for the same query(keyword), the mapped pages will be
>  ranked
> higher considering the no. of clicks too..
> 3.) for every new query these steps will be repeated...
> this was a very high level view , i have made algorithms for these
>  modules
> and trying to incorporate with lucene but dont know , on which files i
>  have
> to do edition to make it work...
> please help me regarding this, if you need some more explanation,
>  please let
> me know...
> thanks 
> Sumit Tyagi
> 
> 
> 
> 
> 
> Erick Erickson wrote:
>> 
>> You still haven't explained *why* you want to rerank results. What
>> is the use-case you're trying to implement? Quite often it's turned
>> out for me that when I let folks on the list know what the use
>> case I'm trying to support is, they come up with much more elegant
>> solutions than I was thinking about.
>> 
>> For instance, does the CustomScoreQuery class have any relevance
>> to your problem?
>> 
>> If you're thinking of modifying the core Lucene code for your
>> special purpose, I'd advise against it unless and until you'd
>  exhausted
>> all the other options. It's always a maintenance headache to do this.
>> 
>> Best
>> Erick
>> 
>> On Dec 21, 2007 10:09 AM, sumittyagi <ping.sumit@gmail.com> wrote:
>> 
>>>
>>> actually i am writing a module to rerank the results, so i want to
>  edit
>>> the
>>> file which arrange the results and give them ranks,
>>> or is there any other way i can use my module to rerank the results
>>>
>>>
>>> markharw00d wrote:
>>> >
>>> > I think you need to describe your "factors" in more detail.
>  Exactly
>>> what
>>> > do you want to achieve for your users?
>>> > We could be talking about any number of Lucene functions here.
>>> >
>>> > ----- Original Message ----
>>> > From: sumittyagi <ping.sumit@gmail.com>
>>> > To: java-user@lucene.apache.org
>>> > Sent: Friday, 21 December, 2007 4:51:09 AM
>>> > Subject: Which file in the lucene package is used to manipulate
>>> results..
>>> >
>>> >
>>> > hi, i am using lucene for the very first time and want to
>  manipulate
>>> >  the
>>> > results, by adding some more factors to it, which file should i
>  edit to
>>> > manipulate the search results....
>>> >
>>> > Thanks
>>> > Sumit Tyagi
>>> > --
>>> > View this message in context:
>>> >
>>> >
>>>
> 
> http://www.nabble.com/Which-file-in-the-lucene-package-is-used-to-manipulate-results..-tp14450335p14450335.html
>>> > Sent from the Lucene - Java Users mailing list archive at
>  Nabble.com.
>>> >
>>> >
>>> >
>>> >
>>> >
>>> >       __________________________________________________________
>>> > Sent from Yahoo! Mail - a smarter inbox http://uk.mail.yahoo.com
>>> >
>>> >
>>> >
>  ---------------------------------------------------------------------
>>> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> > For additional commands, e-mail: java-user-help@lucene.apache.org
>>> >
>>> >
>>> >
>>>
>>> --
>>> View this message in context:
>>>
> 
> http://www.nabble.com/Which-file-in-the-lucene-package-is-used-to-manipulate-results..-tp14450335p14456938.html
>>> Sent from the Lucene - Java Users mailing list archive at
>  Nabble.com.
>>>
>>>
>>>
>  ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>> 
>> 
> 
> -- 
> View this message in context:
> 
> http://www.nabble.com/Which-file-in-the-lucene-package-is-used-to-manipulate-results..-tp14450335p14476062.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 
> 
> 
> 
>       __________________________________________________________
> Sent from Yahoo! Mail - a smarter inbox http://uk.mail.yahoo.com
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/Which-file-in-the-lucene-package-is-used-to-manipulate-results..-tp14450335p15591566.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32700-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 20 17:04:09 2008
Return-Path: <java-user-return-32700-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73120 invoked from network); 20 Feb 2008 17:04:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Feb 2008 17:04:09 -0000
Received: (qmail 45850 invoked by uid 500); 20 Feb 2008 17:03:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45813 invoked by uid 500); 20 Feb 2008 17:03:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45802 invoked by uid 99); 20 Feb 2008 17:03:57 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Feb 2008 09:03:57 -0800
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=SPF_NEUTRAL,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [208.97.132.177] (HELO spunkymail-a2.g.dreamhost.com) (208.97.132.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Feb 2008 17:03:09 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a2.g.dreamhost.com (Postfix) with ESMTP id 6B4E288082
	for <java-user@lucene.apache.org>; Wed, 20 Feb 2008 09:03:31 -0800 (PST)
Message-Id: <DD941C48-4035-4A0D-8581-BA198327F657@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <15591373.post@talk.nabble.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v919.2)
Subject: Re: Boost Single Values in Field
Date: Wed, 20 Feb 2008 12:03:27 -0500
References: <15591373.post@talk.nabble.com>
X-Mailer: Apple Mail (2.919.2)
X-Virus-Checked: Checked by ClamAV on apache.org

You have two options:

1. Boost the term on the query side.  The query parser pretty much  
takes exactly the syntax you use.
2. Use Payloads along with the BoostingTermQuery.

Search the archives for info on one or both.

-Grant

On Feb 20, 2008, at 11:30 AM, JensBurkhardt wrote:

>
> Hey,
>
> I'm wondering if you can boost single values and not the whole field.
> For example:
> i'm having a field called test with "value1 value2 value3" - all  
> packed in a
> String - and
> i want to boost specific values e.g value1^0.5 value2^1.5 etc.
> The problem is that i can't seperate this field. I don't think this  
> will
> work but maybe someone has had the
> same problem.
> Trying to search took me nowhere :-) so i decided to just ask and  
> maybe i'm
> lucky.
>
> Greetings
> Jens
> -- 
> View this message in context: http://www.nabble.com/Boost-Single-Values-in-Field-tp15591373p15591373.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>




--------------------------
Grant Ingersoll
http://lucene.grantingersoll.com
http://www.lucenebootcamp.com

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32701-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 20 17:30:11 2008
Return-Path: <java-user-return-32701-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 83418 invoked from network); 20 Feb 2008 17:30:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Feb 2008 17:30:10 -0000
Received: (qmail 18345 invoked by uid 500); 20 Feb 2008 17:29:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18318 invoked by uid 500); 20 Feb 2008 17:29:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18307 invoked by uid 99); 20 Feb 2008 17:29:58 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Feb 2008 09:29:58 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Feb 2008 17:29:25 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1JRslB-0006qS-VF
	for java-user@lucene.apache.org; Wed, 20 Feb 2008 09:29:33 -0800
Message-ID: <15594115.post@talk.nabble.com>
Date: Wed, 20 Feb 2008 09:29:33 -0800 (PST)
From: sumittyagi <ping.sumit@gmail.com>
To: java-user@lucene.apache.org
Subject: How to change the scores of the documents
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: ping.sumit@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


hi
i want to rerank the documents obatined from the HITS, how can i edit the
scoring formula.
-- 
View this message in context: http://www.nabble.com/How-to-change-the-scores-of-the-documents-tp15594115p15594115.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32702-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 20 17:33:55 2008
Return-Path: <java-user-return-32702-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84412 invoked from network); 20 Feb 2008 17:33:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Feb 2008 17:33:55 -0000
Received: (qmail 27220 invoked by uid 500); 20 Feb 2008 17:33:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27190 invoked by uid 500); 20 Feb 2008 17:33:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27179 invoked by uid 99); 20 Feb 2008 17:33:42 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Feb 2008 09:33:42 -0800
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [217.12.10.218] (HELO web26007.mail.ukl.yahoo.com) (217.12.10.218)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 20 Feb 2008 17:32:53 +0000
Received: (qmail 1081 invoked by uid 60001); 20 Feb 2008 17:33:12 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=qhV+M6OvecsPwSkFCXyde+VP+FUQZHhZBWY1iyIbif0CMqOC+xVXlCeixJrHUpiP3jSMJVnMaFIJNGXChdwCdNndq+1G0DMZEE1eeCD9T8wtssNGquAclDcOx8cvRjRO8NgTdNR1bWa6THepIo/fdzjGtH+IrGabhIOFoZcpJ2w=;
X-YMail-OSG: CSnMGa4VM1lELwCVnTFJY0piHxpNtkzp4Nxk_uwugu7jU1LUXNrmlF6YLYYbtKe96XbKY2HWLvLoaZeaWpXIHqZ.00l719S6rs5QeUDqu13e52yN9CF2QdKDQwE-
Received: from [193.36.230.96] by web26007.mail.ukl.yahoo.com via HTTP; Wed, 20 Feb 2008 17:33:11 GMT
X-Mailer: YahooMailRC/902.32 YahooMailWebService/0.7.162
Date: Wed, 20 Feb 2008 17:33:11 +0000 (GMT)
From: mark harwood <markharw00d@yahoo.co.uk>
Subject: Re: Which file in the lucene package is used to manipulate results..
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
Message-ID: <764288.99706.qm@web26007.mail.ukl.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Sumit,=0A>>now i want my database to communicate with lucene api =0A=0AI=
 would recommend that it's the other way round....see my earlier comment on=
 using FilterIndexReader and creating "faked" TermEnum and TermDocs to make=
 your database content appear as if it were part of the index when calling =
Lucene. If you do want to make the database call Lucene see the recent work=
 on embedding Lucene in Oracle.=0AThere is no simple ready-made solution he=
re that I can post in a few lines of code - you'll need to familiarise your=
self with these low-level APIs that underpin Lucene searches (they are all =
documented).=0A=0A=0ACheers=0AMark=0A=0A----- Original Message ----=0AFrom:=
 sumittyagi <ping.sumit@gmail.com>=0ATo: java-user@lucene.apache.org=0ASent=
: Wednesday, 20 February, 2008 4:43:56 PM=0ASubject: Re: Which file in the =
lucene package is used to manipulate results..=0A=0A=0AHi Mark Harwood=0AI =
know it's being a long time, but till now i was busy in developing the=0Ada=
tabase to store the keyword, document and no. of clicks of the document=0Af=
or the keyword and their respective mappings.=0Anow i want my database to c=
ommunicate with lucene api and i cannot figure it=0Aout where to start from=
.=0APlease help me out, how can i make my database to work with lucene.=0AT=
hanks=0ASumit=0A=0Amark harwood wrote:=0A> =0A> Thanks for the context - mu=
ch more useful.=0A> The challenge here is similar to that posed by offering=
 end-user tagging=0A> of content (see here=0A> http://www.mail-archive.com/=
java-user@lucene.apache.org/msg17580.html ).=0A> The main difference here b=
eing that words are added to docs implicitly by=0A> search click-throughs r=
ather than any explicit tagging action.=0A> =0A> In both cases the challeng=
e is that the user data around documents is=0A> likely to be updated very o=
ften while the documents remain relatively=0A> static. =0A> I suspect some =
additional things to think about are:=0A> 1) Cancelling out the "human lazi=
ness" bias that favours clicking results=0A> on page 1. Are clicks on page =
2 worth more?=0A> 2) Spam clicks - detecting deliberate gaming of your re-r=
anking algorithm.=0A> 3) Lucene doc IDs are not stable - how will you assoc=
iate query=0A> terms/click data with documents and join them at speed?=0A> =
4) Are individual words or phrases the unit of boost? "Paris" means=0A> dif=
ferent things in "Paris Hilton" and "Paris, France".=0A> =0A> A simple appr=
oach might be to re-index your content with all of the=0A> additional searc=
h terms from clicks added to the associated document in a=0A> "searchClicks=
" field - the more clicks, the more repetitions of the same=0A> search word=
s in the document to help with tf (Term Frequency). This=0A> additional con=
tent would need to be capped, to avoid huge documents. This=0A> has the dis=
advantage of requiring a re-index though. =0A> Another option to avoid rein=
dexing everything is to wrap IndexReader (See=0A> FilterIndexReader) and im=
plement TermEnum/TermDocs for a fake field called=0A> "searchClicks". The i=
dea is Lucene looks after the usual, static document=0A> content while your=
 implementation goes off to your more volatile storage=0A> (e.g. database/p=
arallel index, custom file structure) to retrieve lists of=0A> doc ids, ter=
m frequencies etc. for this "searchClicks" field. All of the=0A> Lucene que=
ries you might want to throw at this e.g. PhraseQueries can then=0A> test b=
oth the static Lucene fields and your new volatile "click" fields=0A> witho=
ut being aware of this low-level trickery. =0A> =0A> I'm sure there will be=
 other ways of doing this too but this seems like a=0A> conceptually clean =
way of modelling it - just seeing search terms as=0A> extensions to the doc=
ument content.=0A> =0A> Cheers=0A> Mark=0A> =0A> =0A> ----- Original Messag=
e ----=0A> From: sumittyagi <ping.sumit@gmail.com>=0A> To: java-user@lucene=
.apache.org=0A> Sent: Sunday, 23 December, 2007 5:30:55 AM=0A> Subject: Re:=
 Which file in the lucene package is used to manipulate=0A> results..=0A> =
=0A> =0A> Actually what i have to do is...=0A> 1.) for every query(keyword)=
, among the results obtained, the keyword=0A>  will=0A> be mapped with the =
page clicked, along with the no. of clicks for that=0A> keyword on that pag=
e=0A> 2.) next time for the same query(keyword), the mapped pages will be=
=0A>  ranked=0A> higher considering the no. of clicks too..=0A> 3.) for eve=
ry new query these steps will be repeated...=0A> this was a very high level=
 view , i have made algorithms for these=0A>  modules=0A> and trying to inc=
orporate with lucene but dont know , on which files i=0A>  have=0A> to do e=
dition to make it work...=0A> please help me regarding this, if you need so=
me more explanation,=0A>  please let=0A> me know...=0A> thanks =0A> Sumit T=
yagi=0A> =0A> =0A> =0A> =0A> =0A> Erick Erickson wrote:=0A>> =0A>> You stil=
l haven't explained *why* you want to rerank results. What=0A>> is the use-=
case you're trying to implement? Quite often it's turned=0A>> out for me th=
at when I let folks on the list know what the use=0A>> case I'm trying to s=
upport is, they come up with much more elegant=0A>> solutions than I was th=
inking about.=0A>> =0A>> For instance, does the CustomScoreQuery class have=
 any relevance=0A>> to your problem?=0A>> =0A>> If you're thinking of modif=
ying the core Lucene code for your=0A>> special purpose, I'd advise against=
 it unless and until you'd=0A>  exhausted=0A>> all the other options. It's =
always a maintenance headache to do this.=0A>> =0A>> Best=0A>> Erick=0A>> =
=0A>> On Dec 21, 2007 10:09 AM, sumittyagi <ping.sumit@gmail.com> wrote:=0A=
>> =0A>>>=0A>>> actually i am writing a module to rerank the results, so i =
want to=0A>  edit=0A>>> the=0A>>> file which arrange the results and give t=
hem ranks,=0A>>> or is there any other way i can use my module to rerank th=
e results=0A>>>=0A>>>=0A>>> markharw00d wrote:=0A>>> >=0A>>> > I think you =
need to describe your "factors" in more detail.=0A>  Exactly=0A>>> what=0A>=
>> > do you want to achieve for your users?=0A>>> > We could be talking abo=
ut any number of Lucene functions here.=0A>>> >=0A>>> > ----- Original Mess=
age ----=0A>>> > From: sumittyagi <ping.sumit@gmail.com>=0A>>> > To: java-u=
ser@lucene.apache.org=0A>>> > Sent: Friday, 21 December, 2007 4:51:09 AM=0A=
>>> > Subject: Which file in the lucene package is used to manipulate=0A>>>=
 results..=0A>>> >=0A>>> >=0A>>> > hi, i am using lucene for the very first=
 time and want to=0A>  manipulate=0A>>> >  the=0A>>> > results, by adding s=
ome more factors to it, which file should i=0A>  edit to=0A>>> > manipulate=
 the search results....=0A>>> >=0A>>> > Thanks=0A>>> > Sumit Tyagi=0A>>> > =
--=0A>>> > View this message in context:=0A>>> >=0A>>> >=0A>>>=0A> =0A> htt=
p://www.nabble.com/Which-file-in-the-lucene-package-is-used-to-manipulate-r=
esults..-tp14450335p14450335.html=0A>>> > Sent from the Lucene - Java Users=
 mailing list archive at=0A>  Nabble.com.=0A>>> >=0A>>> >=0A>>> >=0A>>> >=
=0A>>> >=0A>>> >       ____________________________________________________=
______=0A>>> > Sent from Yahoo! Mail - a smarter inbox http://uk.mail.yahoo=
.com=0A>>> >=0A>>> >=0A>>> >=0A>  -----------------------------------------=
----------------------------=0A>>> > To unsubscribe, e-mail: java-user-unsu=
bscribe@lucene.apache.org=0A>>> > For additional commands, e-mail: java-use=
r-help@lucene.apache.org=0A>>> >=0A>>> >=0A>>> >=0A>>>=0A>>> --=0A>>> View =
this message in context:=0A>>>=0A> =0A> http://www.nabble.com/Which-file-in=
-the-lucene-package-is-used-to-manipulate-results..-tp14450335p14456938.htm=
l=0A>>> Sent from the Lucene - Java Users mailing list archive at=0A>  Nabb=
le.com.=0A>>>=0A>>>=0A>>>=0A>  --------------------------------------------=
-------------------------=0A>>> To unsubscribe, e-mail: java-user-unsubscri=
be@lucene.apache.org=0A>>> For additional commands, e-mail: java-user-help@=
lucene.apache.org=0A>>>=0A>>>=0A>> =0A>> =0A> =0A> -- =0A> View this messag=
e in context:=0A> =0A> http://www.nabble.com/Which-file-in-the-lucene-packa=
ge-is-used-to-manipulate-results..-tp14450335p14476062.html=0A> Sent from t=
he Lucene - Java Users mailing list archive at Nabble.com.=0A> =0A> =0A> --=
-------------------------------------------------------------------=0A> To =
unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org=0A> For additi=
onal commands, e-mail: java-user-help@lucene.apache.org=0A> =0A> =0A> =0A> =
=0A> =0A> =0A>       ______________________________________________________=
____=0A> Sent from Yahoo! Mail - a smarter inbox http://uk.mail.yahoo.com=
=0A> =0A> =0A> ------------------------------------------------------------=
---------=0A> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.o=
rg=0A> For additional commands, e-mail: java-user-help@lucene.apache.org=0A=
> =0A> =0A> =0A=0A-- =0AView this message in context: http://www.nabble.com=
/Which-file-in-the-lucene-package-is-used-to-manipulate-results..-tp1445033=
5p15591566.html=0ASent from the Lucene - Java Users mailing list archive at=
 Nabble.com.=0A=0A=0A------------------------------------------------------=
---------------=0ATo unsubscribe, e-mail: java-user-unsubscribe@lucene.apac=
he.org=0AFor additional commands, e-mail: java-user-help@lucene.apache.org=
=0A=0A=0A=0A=0A=0A=0A      ________________________________________________=
__________=0ASent from Yahoo! Mail - a smarter inbox http://uk.mail.yahoo.c=
om=0A

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32703-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 20 17:53:21 2008
Return-Path: <java-user-return-32703-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96314 invoked from network); 20 Feb 2008 17:53:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Feb 2008 17:53:20 -0000
Received: (qmail 80724 invoked by uid 500); 20 Feb 2008 17:53:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80695 invoked by uid 500); 20 Feb 2008 17:53:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80684 invoked by uid 99); 20 Feb 2008 17:53:09 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Feb 2008 09:53:09 -0800
X-ASF-Spam-Status: No, hits=-4.0 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [128.230.108.46] (HELO SUEXCL-02.ad.syr.edu) (128.230.108.46)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Feb 2008 17:52:24 +0000
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: RE: How to change the scores of the documents
Date: Wed, 20 Feb 2008 12:51:51 -0500
Message-ID: <9294E20AED46934EA459020706463F947EBBFF@SUEXCL-02.ad.syr.edu>
In-Reply-To: <15594115.post@talk.nabble.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: How to change the scores of the documents
Thread-Index: Achz5j+f47hDqvc1RJSQhU0Cu8uF1AAAoKqQ
From: "Steven A Rowe" <sarowe@syr.edu>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

On 02/20/2008 at 12:29 PM, sumittyagi wrote:
> hi i want to rerank the documents obatined from the HITS, how can i =
edit
> the scoring formula.

Here's a good place to start:

<http://lucene.apache.org/java/docs/scoring.html>

Steve

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32704-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 20 19:17:56 2008
Return-Path: <java-user-return-32704-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 41452 invoked from network); 20 Feb 2008 19:17:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Feb 2008 19:17:56 -0000
Received: (qmail 49376 invoked by uid 500); 20 Feb 2008 19:17:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49245 invoked by uid 500); 20 Feb 2008 19:17:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49234 invoked by uid 99); 20 Feb 2008 19:17:43 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Feb 2008 11:17:43 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Feb 2008 19:16:53 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1JRuRO-00030j-30
	for java-user@lucene.apache.org; Wed, 20 Feb 2008 11:17:14 -0800
Message-ID: <15596170.post@talk.nabble.com>
Date: Wed, 20 Feb 2008 11:17:14 -0800 (PST)
From: sumittyagi <ping.sumit@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Which file in the lucene package is used to manipulate
 results..
In-Reply-To: <764288.99706.qm@web26007.mail.ukl.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: ping.sumit@gmail.com
References: <14450335.post@talk.nabble.com> <764288.99706.qm@web26007.mail.ukl.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org


hi Mark
Actually i am using object oriented database. Where can i find the
information regarding embedding lucene with database.
Thanks


mark harwood wrote:
> 
> Hi Sumit,
>>>now i want my database to communicate with lucene api 
> 
> I would recommend that it's the other way round....see my earlier comment
> on using FilterIndexReader and creating "faked" TermEnum and TermDocs to
> make your database content appear as if it were part of the index when
> calling Lucene. If you do want to make the database call Lucene see the
> recent work on embedding Lucene in Oracle.
> There is no simple ready-made solution here that I can post in a few lines
> of code - you'll need to familiarise yourself with these low-level APIs
> that underpin Lucene searches (they are all documented).
> 
> 
> Cheers
> Mark
> 
> ----- Original Message ----
> From: sumittyagi <ping.sumit@gmail.com>
> To: java-user@lucene.apache.org
> Sent: Wednesday, 20 February, 2008 4:43:56 PM
> Subject: Re: Which file in the lucene package is used to manipulate
> results..
> 
> 
> Hi Mark Harwood
> I know it's being a long time, but till now i was busy in developing the
> database to store the keyword, document and no. of clicks of the document
> for the keyword and their respective mappings.
> now i want my database to communicate with lucene api and i cannot figure
> it
> out where to start from.
> Please help me out, how can i make my database to work with lucene.
> Thanks
> Sumit
> 
> mark harwood wrote:
>> 
>> Thanks for the context - much more useful.
>> The challenge here is similar to that posed by offering end-user tagging
>> of content (see here
>> http://www.mail-archive.com/java-user@lucene.apache.org/msg17580.html ).
>> The main difference here being that words are added to docs implicitly by
>> search click-throughs rather than any explicit tagging action.
>> 
>> In both cases the challenge is that the user data around documents is
>> likely to be updated very often while the documents remain relatively
>> static. 
>> I suspect some additional things to think about are:
>> 1) Cancelling out the "human laziness" bias that favours clicking results
>> on page 1. Are clicks on page 2 worth more?
>> 2) Spam clicks - detecting deliberate gaming of your re-ranking
>> algorithm.
>> 3) Lucene doc IDs are not stable - how will you associate query
>> terms/click data with documents and join them at speed?
>> 4) Are individual words or phrases the unit of boost? "Paris" means
>> different things in "Paris Hilton" and "Paris, France".
>> 
>> A simple approach might be to re-index your content with all of the
>> additional search terms from clicks added to the associated document in a
>> "searchClicks" field - the more clicks, the more repetitions of the same
>> search words in the document to help with tf (Term Frequency). This
>> additional content would need to be capped, to avoid huge documents. This
>> has the disadvantage of requiring a re-index though. 
>> Another option to avoid reindexing everything is to wrap IndexReader (See
>> FilterIndexReader) and implement TermEnum/TermDocs for a fake field
>> called
>> "searchClicks". The idea is Lucene looks after the usual, static document
>> content while your implementation goes off to your more volatile storage
>> (e.g. database/parallel index, custom file structure) to retrieve lists
>> of
>> doc ids, term frequencies etc. for this "searchClicks" field. All of the
>> Lucene queries you might want to throw at this e.g. PhraseQueries can
>> then
>> test both the static Lucene fields and your new volatile "click" fields
>> without being aware of this low-level trickery. 
>> 
>> I'm sure there will be other ways of doing this too but this seems like a
>> conceptually clean way of modelling it - just seeing search terms as
>> extensions to the document content.
>> 
>> Cheers
>> Mark
>> 
>> 
>> ----- Original Message ----
>> From: sumittyagi <ping.sumit@gmail.com>
>> To: java-user@lucene.apache.org
>> Sent: Sunday, 23 December, 2007 5:30:55 AM
>> Subject: Re: Which file in the lucene package is used to manipulate
>> results..
>> 
>> 
>> Actually what i have to do is...
>> 1.) for every query(keyword), among the results obtained, the keyword
>>  will
>> be mapped with the page clicked, along with the no. of clicks for that
>> keyword on that page
>> 2.) next time for the same query(keyword), the mapped pages will be
>>  ranked
>> higher considering the no. of clicks too..
>> 3.) for every new query these steps will be repeated...
>> this was a very high level view , i have made algorithms for these
>>  modules
>> and trying to incorporate with lucene but dont know , on which files i
>>  have
>> to do edition to make it work...
>> please help me regarding this, if you need some more explanation,
>>  please let
>> me know...
>> thanks 
>> Sumit Tyagi
>> 
>> 
>> 
>> 
>> 
>> Erick Erickson wrote:
>>> 
>>> You still haven't explained *why* you want to rerank results. What
>>> is the use-case you're trying to implement? Quite often it's turned
>>> out for me that when I let folks on the list know what the use
>>> case I'm trying to support is, they come up with much more elegant
>>> solutions than I was thinking about.
>>> 
>>> For instance, does the CustomScoreQuery class have any relevance
>>> to your problem?
>>> 
>>> If you're thinking of modifying the core Lucene code for your
>>> special purpose, I'd advise against it unless and until you'd
>>  exhausted
>>> all the other options. It's always a maintenance headache to do this.
>>> 
>>> Best
>>> Erick
>>> 
>>> On Dec 21, 2007 10:09 AM, sumittyagi <ping.sumit@gmail.com> wrote:
>>> 
>>>>
>>>> actually i am writing a module to rerank the results, so i want to
>>  edit
>>>> the
>>>> file which arrange the results and give them ranks,
>>>> or is there any other way i can use my module to rerank the results
>>>>
>>>>
>>>> markharw00d wrote:
>>>> >
>>>> > I think you need to describe your "factors" in more detail.
>>  Exactly
>>>> what
>>>> > do you want to achieve for your users?
>>>> > We could be talking about any number of Lucene functions here.
>>>> >
>>>> > ----- Original Message ----
>>>> > From: sumittyagi <ping.sumit@gmail.com>
>>>> > To: java-user@lucene.apache.org
>>>> > Sent: Friday, 21 December, 2007 4:51:09 AM
>>>> > Subject: Which file in the lucene package is used to manipulate
>>>> results..
>>>> >
>>>> >
>>>> > hi, i am using lucene for the very first time and want to
>>  manipulate
>>>> >  the
>>>> > results, by adding some more factors to it, which file should i
>>  edit to
>>>> > manipulate the search results....
>>>> >
>>>> > Thanks
>>>> > Sumit Tyagi
>>>> > --
>>>> > View this message in context:
>>>> >
>>>> >
>>>>
>> 
>> http://www.nabble.com/Which-file-in-the-lucene-package-is-used-to-manipulate-results..-tp14450335p14450335.html
>>>> > Sent from the Lucene - Java Users mailing list archive at
>>  Nabble.com.
>>>> >
>>>> >
>>>> >
>>>> >
>>>> >
>>>> >       __________________________________________________________
>>>> > Sent from Yahoo! Mail - a smarter inbox http://uk.mail.yahoo.com
>>>> >
>>>> >
>>>> >
>>  ---------------------------------------------------------------------
>>>> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> > For additional commands, e-mail: java-user-help@lucene.apache.org
>>>> >
>>>> >
>>>> >
>>>>
>>>> --
>>>> View this message in context:
>>>>
>> 
>> http://www.nabble.com/Which-file-in-the-lucene-package-is-used-to-manipulate-results..-tp14450335p14456938.html
>>>> Sent from the Lucene - Java Users mailing list archive at
>>  Nabble.com.
>>>>
>>>>
>>>>
>>  ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>> 
>>> 
>> 
>> -- 
>> View this message in context:
>> 
>> http://www.nabble.com/Which-file-in-the-lucene-package-is-used-to-manipulate-results..-tp14450335p14476062.html
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>> 
>> 
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>> 
>> 
>> 
>> 
>> 
>> 
>>       __________________________________________________________
>> Sent from Yahoo! Mail - a smarter inbox http://uk.mail.yahoo.com
>> 
>> 
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>> 
>> 
>> 
> 
> -- 
> View this message in context:
> http://www.nabble.com/Which-file-in-the-lucene-package-is-used-to-manipulate-results..-tp14450335p15591566.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 
> 
> 
> 
>       __________________________________________________________
> Sent from Yahoo! Mail - a smarter inbox http://uk.mail.yahoo.com
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/Which-file-in-the-lucene-package-is-used-to-manipulate-results..-tp14450335p15596170.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32705-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 20 22:35:00 2008
Return-Path: <java-user-return-32705-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20667 invoked from network); 20 Feb 2008 22:35:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Feb 2008 22:35:00 -0000
Received: (qmail 59967 invoked by uid 500); 20 Feb 2008 22:34:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59940 invoked by uid 500); 20 Feb 2008 22:34:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59928 invoked by uid 99); 20 Feb 2008 22:34:48 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Feb 2008 14:34:48 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of stopman@gmail.com designates 72.14.214.231 as permitted sender)
Received: from [72.14.214.231] (HELO hu-out-0506.google.com) (72.14.214.231)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Feb 2008 22:34:12 +0000
Received: by hu-out-0506.google.com with SMTP id 27so1849827hub.15
        for <java-user@lucene.apache.org>; Wed, 20 Feb 2008 14:34:19 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=pwdne3Z8rATmEnPrmVriHNhkSAGSMHPURPoRkdxjHPM=;
        b=tp3vsTaKp4QiAiOhSzE9vIOyccoaaYgV6Iqbws6UHQyXlM9ceZYRr6RlZ5rxXPy3fpEb7SImsMCMzzf7Lv1fClnQoxMSBqQKyz5Rk+MiQ5hEkCEu4kt1RQgw7IHc9SNhMO83WkoNhQiIXbLtY8Dl8vWE/5hXdYgqz7h33mZBsMg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=pxJDGX5kMQqZsUDA4uPeaWEApFVBM3TNC6tIW2qJjD6idiRoQIw3YoA/WguiBr0win+xhUEYxQB2xTqgjPGGguFCrKeJNxF67MA0XnHfw9KfleBnpaprFVvvyT70LMdE+W/RCXN1n5h+vFH9U9TQoc+L4RU3fq07MTdIjbQQrtw=
Received: by 10.82.187.2 with SMTP id k2mr17346999buf.16.1203546858851;
        Wed, 20 Feb 2008 14:34:18 -0800 (PST)
Received: by 10.82.139.19 with HTTP; Wed, 20 Feb 2008 14:34:18 -0800 (PST)
Message-ID: <652776090802201434x3c5682b3m404a6bb570faf88f@mail.gmail.com>
Date: Wed, 20 Feb 2008 14:34:18 -0800
From: "Michael Stoppelman" <stopman@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Which file in the lucene package is used to manipulate results..
In-Reply-To: <329945.61466.qm@web26014.mail.ukl.yahoo.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_1648_11143214.1203546858818"
References: <329945.61466.qm@web26014.mail.ukl.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_1648_11143214.1203546858818
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

To add to what Mark is saying, it's very important that watch out for the
first N results effect. If you showed a user a random set of documents with
crap
relevance I'll bet you that a good number will click on the first result
(call it user laziness or the Google "I'm feeling lucky" effect :)). You can
a/b results with
some entropy or try determine your own result position normalizers.

You could also have your own doc id that is stable and you mark documents
maybe a md5 of the title and then have an external boost file that has
query-to-doc.
Then on the query you boost result documents accordingly.

-M

On Sun, Dec 23, 2007 at 2:15 AM, mark harwood <markharw00d@yahoo.co.uk>
wrote:

> Thanks for the context - much more useful.
> The challenge here is similar to that posed by offering end-user tagging
> of content (see here
> http://www.mail-archive.com/java-user@lucene.apache.org/msg17580.html ).
> The main difference here being that words are added to docs implicitly by
> search click-throughs rather than any explicit tagging action.
>
> In both cases the challenge is that the user data around documents is
> likely to be updated very often while the documents remain relatively
> static.
> I suspect some additional things to think about are:
> 1) Cancelling out the "human laziness" bias that favours clicking results
> on page 1. Are clicks on page 2 worth more?
> 2) Spam clicks - detecting deliberate gaming of your re-ranking algorithm.
> 3) Lucene doc IDs are not stable - how will you associate query
> terms/click data with documents and join them at speed?
> 4) Are individual words or phrases the unit of boost? "Paris" means
> different things in "Paris Hilton" and "Paris, France".
>
> A simple approach might be to re-index your content with all of the
> additional search terms from clicks added to the associated document in a
> "searchClicks" field - the more clicks, the more repetitions of the same
> search words in the document to help with tf (Term Frequency). This
> additional content would need to be capped, to avoid huge documents. This
> has the disadvantage of requiring a re-index though.
> Another option to avoid reindexing everything is to wrap IndexReader (See
> FilterIndexReader) and implement TermEnum/TermDocs for a fake field called
> "searchClicks". The idea is Lucene looks after the usual, static document
> content while your implementation goes off to your more volatile storage (
> e.g. database/parallel index, custom file structure) to retrieve lists of
> doc ids, term frequencies etc. for this "searchClicks" field. All of the
> Lucene queries you might want to throw at this e.g. PhraseQueries can then
> test both the static Lucene fields and your new volatile "click" fields
> without being aware of this low-level trickery.
>
> I'm sure there will be other ways of doing this too but this seems like a
> conceptually clean way of modelling it - just seeing search terms as
> extensions to the document content.
>
> Cheers
> Mark
>
>
> ----- Original Message ----
> From: sumittyagi <ping.sumit@gmail.com>
> To: java-user@lucene.apache.org
> Sent: Sunday, 23 December, 2007 5:30:55 AM
> Subject: Re: Which file in the lucene package is used to manipulate
> results..
>
>
> Actually what i have to do is...
> 1.) for every query(keyword), among the results obtained, the keyword
>  will
> be mapped with the page clicked, along with the no. of clicks for that
> keyword on that page
> 2.) next time for the same query(keyword), the mapped pages will be
>  ranked
> higher considering the no. of clicks too..
> 3.) for every new query these steps will be repeated...
> this was a very high level view , i have made algorithms for these
>  modules
> and trying to incorporate with lucene but dont know , on which files i
>  have
> to do edition to make it work...
> please help me regarding this, if you need some more explanation,
>  please let
> me know...
> thanks
> Sumit Tyagi
>
>
>
>
>
> Erick Erickson wrote:
> >
> > You still haven't explained *why* you want to rerank results. What
> > is the use-case you're trying to implement? Quite often it's turned
> > out for me that when I let folks on the list know what the use
> > case I'm trying to support is, they come up with much more elegant
> > solutions than I was thinking about.
> >
> > For instance, does the CustomScoreQuery class have any relevance
> > to your problem?
> >
> > If you're thinking of modifying the core Lucene code for your
> > special purpose, I'd advise against it unless and until you'd
>  exhausted
> > all the other options. It's always a maintenance headache to do this.
> >
> > Best
> > Erick
> >
> > On Dec 21, 2007 10:09 AM, sumittyagi <ping.sumit@gmail.com> wrote:
> >
> >>
> >> actually i am writing a module to rerank the results, so i want to
>  edit
> >> the
> >> file which arrange the results and give them ranks,
> >> or is there any other way i can use my module to rerank the results
> >>
> >>
> >> markharw00d wrote:
> >> >
> >> > I think you need to describe your "factors" in more detail.
>  Exactly
> >> what
> >> > do you want to achieve for your users?
> >> > We could be talking about any number of Lucene functions here.
> >> >
> >> > ----- Original Message ----
> >> > From: sumittyagi <ping.sumit@gmail.com>
> >> > To: java-user@lucene.apache.org
> >> > Sent: Friday, 21 December, 2007 4:51:09 AM
> >> > Subject: Which file in the lucene package is used to manipulate
> >> results..
> >> >
> >> >
> >> > hi, i am using lucene for the very first time and want to
>  manipulate
> >> >  the
> >> > results, by adding some more factors to it, which file should i
>  edit to
> >> > manipulate the search results....
> >> >
> >> > Thanks
> >> > Sumit Tyagi
> >> > --
> >> > View this message in context:
> >> >
> >> >
> >>
>
> http://www.nabble.com/Which-file-in-the-lucene-package-is-used-to-manipulate-results..-tp14450335p14450335.html
> >> > Sent from the Lucene - Java Users mailing list archive at
>  Nabble.com.
> >> >
> >> >
> >> >
> >> >
> >> >
> >> >       __________________________________________________________
> >> > Sent from Yahoo! Mail - a smarter inbox http://uk.mail.yahoo.com
> >> >
> >> >
> >> >
>  ---------------------------------------------------------------------
> >> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >> >
> >> >
> >> >
> >>
> >> --
> >> View this message in context:
> >>
>
> http://www.nabble.com/Which-file-in-the-lucene-package-is-used-to-manipulate-results..-tp14450335p14456938.html
> >> Sent from the Lucene - Java Users mailing list archive at
>  Nabble.com.
> >>
> >>
> >>
>  ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >
> >
>
> --
> View this message in context:
>
> http://www.nabble.com/Which-file-in-the-lucene-package-is-used-to-manipulate-results..-tp14450335p14476062.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>
>
>
>      __________________________________________________________
> Sent from Yahoo! Mail - a smarter inbox http://uk.mail.yahoo.com
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_1648_11143214.1203546858818--

From java-user-return-32706-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 21 00:47:05 2008
Return-Path: <java-user-return-32706-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 66891 invoked from network); 21 Feb 2008 00:47:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Feb 2008 00:47:05 -0000
Received: (qmail 18245 invoked by uid 500); 21 Feb 2008 00:46:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18207 invoked by uid 500); 21 Feb 2008 00:46:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18195 invoked by uid 99); 21 Feb 2008 00:46:53 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Feb 2008 16:46:53 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [216.252.100.65] (HELO rrr1-v1.mail.mud.yahoo.com) (216.252.100.65)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 21 Feb 2008 00:46:18 +0000
Received: (qmail 88352 invoked from network); 21 Feb 2008 00:10:06 -0000
Received: from smtp007.mail.ukl.yahoo.com (217.12.11.96)
  by rrr1-v1.mail.mud.yahoo.com with SMTP; 21 Feb 2008 00:10:05 -0000
Received: (qmail 78954 invoked from network); 20 Feb 2008 19:29:31 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=Received:X-YMail-OSG:X-Yahoo-Newman-Property:Message-ID:Date:From:User-Agent:MIME-Version:To:Subject:References:In-Reply-To:Content-Type:Content-Transfer-Encoding;
  b=S+tbJ/FJRnYRIwp69Xa2xOoGRoewR7AxO6wArvlLbTkJO3lG4iXsBzI7vroYIjOMT4hfb50JW1QcCNQ/Lr1Lp+On7CictodzwfxUjycacdjXHVmSCHB15aB65H0Hm/J/Wfb7NUifUEQ4nflGqsgfZsIMvZVgpacHFukhOeBUyus=  ;
Received: from unknown (HELO ?127.0.0.1?) (markharw00d@194.106.34.5 with plain)
  by smtp007.mail.ukl.yahoo.com with SMTP; 20 Feb 2008 19:29:30 -0000
X-YMail-OSG: WCQYTVoVM1nWaEyOECu6lHvjh6vpgBirMzQ9wSwp3wMaraxqeHXWHuFlO578qybc2P7HbwXxh2I6kWo7HrM9MEa3CXk6bEpdszFw6TOtgakv_4rw
X-Yahoo-Newman-Property: ymail-3
Message-ID: <47BC7F91.5020301@yahoo.co.uk>
Date: Wed, 20 Feb 2008 19:29:21 +0000
From: markharw00d <markharw00d@yahoo.co.uk>
User-Agent: Thunderbird 2.0.0.9 (Windows/20071031)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Which file in the lucene package is used to manipulate results..
References: <14450335.post@talk.nabble.com> <764288.99706.qm@web26007.mail.ukl.yahoo.com> <15596170.post@talk.nabble.com>
In-Reply-To: <15596170.post@talk.nabble.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org


>  Where can i find the information regarding embedding lucene with database.
> Thanks
>   

http://marceloochoa.blogspot.com/2007/09/running-lucene-inside-your-oracle-jvm.html

http://issues.apache.org/jira/browse/LUCENE-434

Cheers
Mark


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32707-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 21 02:52:42 2008
Return-Path: <java-user-return-32707-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 2769 invoked from network); 21 Feb 2008 02:52:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Feb 2008 02:52:42 -0000
Received: (qmail 32036 invoked by uid 500); 21 Feb 2008 02:52:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31998 invoked by uid 500); 21 Feb 2008 02:52:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31987 invoked by uid 99); 21 Feb 2008 02:52:29 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Feb 2008 18:52:29 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of zaexage@gmail.com designates 209.85.146.180 as permitted sender)
Received: from [209.85.146.180] (HELO wa-out-1112.google.com) (209.85.146.180)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Feb 2008 02:51:57 +0000
Received: by wa-out-1112.google.com with SMTP id j40so4543099wah.11
        for <java-user@lucene.apache.org>; Wed, 20 Feb 2008 18:52:06 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        bh=nZXNmMXIn6KmSrB4MLozdbU3jQoW9K6ouOidyrdo5D4=;
        b=wyMmN7P2M4dJIsu+HZH0j+bQiOM7zMgCvFz7TtOFXl6RnO3OzmVy9gesJPME/9mmvZ1CQ+AQDKDVKpBb+4Igd95SMURKE7wL+WnGVW+CBE46JNsE2A+/vG4h8yKx6aArBuX7v6lNpSLUGk6/nIviIM/pZ1eVqEpWZe7p8Rrumw4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=NcnsN90pqayRvOPoVg1ibwmra+RGXLKRs3enmpRcKUzFJsoQfBAPm8S4Mlx0ZXp7XATYiYNCjB4O6DGrp+8QRIPkY074+0Bl5x4KDVDQlmYruOvblB6lWMZlrER0MIXRlSkRlKUssAaYo8Cjd4UdKlTou1mdHlwqQ9EE+vQ0kKY=
Received: by 10.115.108.1 with SMTP id k1mr1120668wam.141.1203562325559;
        Wed, 20 Feb 2008 18:52:05 -0800 (PST)
Received: by 10.115.79.5 with HTTP; Wed, 20 Feb 2008 18:52:05 -0800 (PST)
Message-ID: <2c5080560802201852p36717ad8v5f51d3ec6ead901d@mail.gmail.com>
Date: Thu, 21 Feb 2008 10:52:05 +0800
From: zaexage@gmail.com
To: java-user@lucene.apache.org
Subject: Re: how to safely periodically reopen the IndexReader?
In-Reply-To: <OFDFB06B17.0E0C7281-ON862573F3.005DA078-862573F3.005E2116@nasi.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <2c5080560802160132m791a8f67o5a3033d374d4be29@mail.gmail.com>
	 <OFDFB06B17.0E0C7281-ON862573F3.005DA078-862573F3.005E2116@nasi.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Yes, I'm using a solution quite similar to this one. :)

But when I read the Lucene 2.3 IndexReader.java code and javadoc, I
see they have added a synchronous reference-counter to IndexReader and
when it drops to zero, this instance will automatically call doClose()
to clean, but the manipulator methods of this counter is marked as
`protected'.
I thought of extending FilterIndexReader to use the inherited counter
manipulator. Has anyone tried this way?

2008/2/19, Robert.Hastings@ancept.com <Robert.Hastings@ancept.com>:
> We have the same situation and use an atomic counter. Basically, we have
> a SearcherHolder class and a SearcherManager class. The SearcherHolder
> holds the searcher and the number of threads referencing the searcher.
>
> When the thread that writes to the index closes the index, it sends an
> event that the SearcherManager is listening for. The next time a search
> is performed the manager opens a new searcher. The old searcher is marked
> as outdated but is not closed until the last thread that references the
> searcher returns it.
>
>
>
>
>
> ZaeX <zaexage@gmail.com>
> 02/16/2008 03:32 AM
> Please respond to
> java-user@lucene.apache.org
>
>
> To
> java-user@lucene.apache.org
> cc
>
> Subject
> how to safely periodically reopen the IndexReader?
>
>
>
>
>
>
> Hi, all
>
> I've got a question here needing your help:
> For my index, I opened one IndexWriter (autocommit mode) and one
> IndexSearcher on it;
> I have quite a lot of threads here concurrently writing new documents and
> doing search in index.
> the IndexWriter is flushed periodically.
> as I want the IndexSearcher be able to see the latest record, I also need
> to
> periodically reopen the underlying IndexReader.
>
> But is it safe to just call close() on the IndexSearcher when there are
> still threads using it?
>
> or maybe I should use atomic counter to make sure there's no thread using
> it
> before calling close() on IndexSearcher?
>
> thanks.
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32708-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 21 07:20:09 2008
Return-Path: <java-user-return-32708-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36519 invoked from network); 21 Feb 2008 07:20:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Feb 2008 07:20:09 -0000
Received: (qmail 25949 invoked by uid 500); 21 Feb 2008 07:19:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25500 invoked by uid 500); 21 Feb 2008 07:19:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25489 invoked by uid 99); 21 Feb 2008 07:19:57 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Feb 2008 23:19:57 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of anjana.mprasad@gmail.com designates 72.14.204.236 as permitted sender)
Received: from [72.14.204.236] (HELO qb-out-0506.google.com) (72.14.204.236)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Feb 2008 07:19:23 +0000
Received: by qb-out-0506.google.com with SMTP id o21so3245810qba.9
        for <java-user@lucene.apache.org>; Wed, 20 Feb 2008 23:19:31 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=W7Jq1rTNAp920IENxTTIJnyIGDK5fORwU0l87E+GuYE=;
        b=V4xP9KYwtPpmJJPrvVLjQeF+ngyzM/4e5DKUvN/oTDYQVaDY6u9Dta0oIwo3LydsE7nrqpR1dD5kGsub95jRqxxwtkN2uJFbRaDBuBAINaX79GDDKd0dkSd9tOcpjYMsFuEieNA14mW2BGTDflBJpP669XZi6JtLqU0f+NAXU9s=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=hQozQQ7DWcbUQO3m8ZWqfFHiA8Ni7t9FfbhhnpE93FrvRPg/8S1KOsyZSIdKC6/TfyMHyCalG/qFWlKS7ZUIAiQKcQl7pi/usXeaRf5lc5r98if9H5Urc9X8HvlyHM7Y4UuHVTqiAlG3v+rW74uOl7mzgD85sMgZ6+Tg65B1VfI=
Received: by 10.142.99.21 with SMTP id w21mr7322277wfb.55.1203578370675;
        Wed, 20 Feb 2008 23:19:30 -0800 (PST)
Received: by 10.142.178.19 with HTTP; Wed, 20 Feb 2008 23:19:30 -0800 (PST)
Message-ID: <3126751e0802202319u78059027uf8998166a3dfb4d9@mail.gmail.com>
Date: Thu, 21 Feb 2008 12:49:30 +0530
From: "anjana m" <anjana.mprasad@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Retain the index
In-Reply-To: <AC9AFBA0-C12B-4971-A00E-A3DEA8586B36@mikemccandless.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_4265_9716919.1203578370646"
References: <3126751e0801250005s17687201qf3646036683cb5f5@mail.gmail.com>
	 <3126751e0801262155i2ff62f28qe81814460677354d@mail.gmail.com>
	 <200801271037.43451@danielnaber.de>
	 <3126751e0801270211x6da0dec2xe869564f22d38139@mail.gmail.com>
	 <359a92830801271352o3c81dfeflb15d7c3c624b6033@mail.gmail.com>
	 <3126751e0801302212s1e386c67i8be10eb5512114c5@mail.gmail.com>
	 <AC9AFBA0-C12B-4971-A00E-A3DEA8586B36@mikemccandless.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_4265_9716919.1203578370646
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I got this error after dleteing that file

Exception in thread "main" java.io.FileNotFoundException:
C:\pIndexed\segments (The system cannot find the file specified)
        at java.io.RandomAccessFile.open(Native Method)
        at java.io.RandomAccessFile.<init>(RandomAccessFile.java:212)
        at org.apache.lucene.store.FSInputStream$Descriptor.<init>(
FSDirectory.java:376)
        at org.apache.lucene.store.FSInputStream.<init>(FSDirectory.java
:405)
        at org.apache.lucene.store.FSDirectory.openFile(FSDirectory.java
:268)
        at org.apache.lucene.index.SegmentInfos.read(SegmentInfos.java:40)
        at org.apache.lucene.index.IndexWriter$1.doBody(IndexWriter.java
:233)
        at org.apache.lucene.store.Lock$With.run(Lock.java:109)
        at org.apache.lucene.index.IndexWriter.<init>(IndexWriter.java:228)
        at org.apache.lucene.index.IndexWriter.<init>(IndexWriter.java:193)
        at com.cecilia.wim.process.Indexer.index(Indexer.java:29)
        at com.cecilia.wim.process.Indexer.main(Indexer.java:68)


On Thu, Jan 31, 2008 at 2:49 PM, Michael McCandless <
lucene@mikemccandless.com> wrote:

>
> It looks like you are passing "true" to FSDirectory.getDirectory,
> which you shouldn't do.  Always pass "false" to that.  (Newer
> versions of Lucene have deprecated the create flag to FSDirectory,
> leaving it entirely to IndexWriter).
>
> On the lock obtain timed out, probably that's a left over lock file,
> so you should just remove it if you're sure it is.
>
> Mike
>
> anjana m wrote:
>
> > with true:
> > i finding a serious problem when i need new index please help..
> > but how can ikeep chnaging the true flase option..
> > :(
> > please help me...:(
> > Exception in thread "main" java.io.IOException: Cannot delete _17.cfs
> >         at org.apache.lucene.store.FSDirectory.create
> > (FSDirectory.java:144)
> >         at org.apache.lucene.store.FSDirectory.<init>
> > (FSDirectory.java:128)
> >         at org.apache.lucene.store.FSDirectory.getDirectory
> > (FSDirectory.java
> > :102)
> >         at org.apache.lucene.index.IndexWriter.<init>
> > (IndexWriter.java:193)
> >
> >
> > False
> > Exception in thread "main" java.io.IOException: Lock obtain timed out:
> > Lock@C:\DOCUME~1\ANJANA\LOCALS~1\Temp\lucene-
> > 3ca21f86af4e6d9f86b82f8f13be98e4-write.lock
> >         at org.apache.lucene.store.Lock.obtain(Lock.java:58)
> >         at org.apache.lucene.index.IndexWriter.<init>
> > (IndexWriter.java:223)
> >         at org.apache.lucene.index.IndexWriter.<init>
> > (IndexWriter.java:193)
> >         at com.cecilia.wim.process.Indexer.index(Indexer.java:25)
> >         at com.cecilia.wim.process.Indexer.main(Indexer.java:60)
> >
> >
> > On Jan 28, 2008 3:22 AM, Erick Erickson <erickerickson@gmail.com>
> > wrote:
> >
> >> Set the parameter to false as per the documentation....
> >>
> >> Erick
> >>
> >> On Jan 27, 2008 5:11 AM, anjana m <anjana.mprasad@gmail.com> wrote:
> >>
> >>> yes i dont want the old index to be deletd since its running on
> >>> my app
> >>> server..
> >>> any suggestion..?
> >>>
> >>> On Jan 27, 2008 3:07 PM, Daniel Naber
> >>> <lucenelist2007@danielnaber.de>
> >>> wrote:
> >>>
> >>>> On Sonntag, 27. Januar 2008, anjana m wrote:
> >>>>
> >>>>>         IndexWriter writer = new IndexWriter(indexDir, new
> >>>>> StandardAnalyzer(), true);
> >>>>
> >>>> The true parameter means that the old index will be deleted, is
> >>>> that
> >>> your
> >>>> problem?
> >>>>
> >>>> Regards
> >>>>  Daniel
> >>>>
> >>>> --
> >>>> http://www.danielnaber.de
> >>>>
> >>>> -------------------------------------------------------------------
> >>>> --
> >>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >>>> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>>>
> >>>>
> >>>
> >>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_4265_9716919.1203578370646--

From java-user-return-32709-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 21 08:37:00 2008
Return-Path: <java-user-return-32709-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 57746 invoked from network); 21 Feb 2008 08:37:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Feb 2008 08:37:00 -0000
Received: (qmail 14991 invoked by uid 500); 21 Feb 2008 08:36:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14967 invoked by uid 500); 21 Feb 2008 08:36:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 14956 invoked by uid 99); 21 Feb 2008 08:36:48 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Feb 2008 00:36:48 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of stephane.nicoll@gmail.com designates 66.249.92.170 as permitted sender)
Received: from [66.249.92.170] (HELO ug-out-1314.google.com) (66.249.92.170)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Feb 2008 08:36:15 +0000
Received: by ug-out-1314.google.com with SMTP id u40so890866ugc.29
        for <java-user@lucene.apache.org>; Thu, 21 Feb 2008 00:36:23 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        bh=wPvkOHAUJYjDn4o/Toz1/rvlx9UdpwD4kajIhWAsj+0=;
        b=hi7HuiGK9z+dBq1yp64kLhIixWUjktwu69wB7yCRkROTOz2zHYr76NFjwX6+mQlmsYXqn5ZB8907QwCHKoOFP1FXHlxRxf9bZl8TF0bek2DC6WEOyEoufdt3qzrSUEw3ejk8/uHgRDATKQONcQhZMQkGC7X+RLfG7QQza/968X0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=wH2MaeXo+eQf3N+XfzqW4joI2BAfl8UouXJri1CD8J+/lLrEXDXhtis15CmFWBECCrQve0k++zhYDlLTmOVKSgq9LYuamebxNO/QCuBAGA1lHW4sAN0Pm5vLfl8KbxaBFIRo5q6nXsyyRRpkiTYWCSXZiLFuoyFoClBoLEDJIzU=
Received: by 10.67.196.4 with SMTP id y4mr633951ugp.39.1203582983316;
        Thu, 21 Feb 2008 00:36:23 -0800 (PST)
Received: by 10.67.32.16 with HTTP; Thu, 21 Feb 2008 00:36:23 -0800 (PST)
Message-ID: <541f12ca0802210036o72bb0782va43c0c00be20f032@mail.gmail.com>
Date: Thu, 21 Feb 2008 09:36:23 +0100
From: "Stephane Nicoll" <stephane.nicoll@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: how to safely periodically reopen the IndexReader?
In-Reply-To: <OFDFB06B17.0E0C7281-ON862573F3.005DA078-862573F3.005E2116@nasi.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <2c5080560802160132m791a8f67o5a3033d374d4be29@mail.gmail.com>
	 <OFDFB06B17.0E0C7281-ON862573F3.005DA078-862573F3.005E2116@nasi.com>
X-Virus-Checked: Checked by ClamAV on apache.org

On Mon, Feb 18, 2008 at 6:08 PM,  <Robert.Hastings@ancept.com> wrote:
> We have the same situation and use an atomic counter.  Basically, we have
>  a SearcherHolder class and a SearcherManager class.  The SearcherHolder
>  holds the searcher and the number of threads referencing the searcher.
>
>  When the thread that writes to the index closes the index, it sends an
>  event that the SearcherManager is listening for.  The next time a search
>  is performed the manager opens a new searcher.  The old searcher is mark=
ed
>  as outdated but is not closed until the last thread that references the
>  searcher returns it.

That sounds interesting. Couldn't it be part of the core capabilities
of Lucene?

St=E9phane


--=20
Large Systems Suck: This rule is 100% transitive. If you build one,
you suck" -- S.Yegge

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32710-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 21 11:54:24 2008
Return-Path: <java-user-return-32710-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26221 invoked from network); 21 Feb 2008 11:54:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Feb 2008 11:54:23 -0000
Received: (qmail 10673 invoked by uid 500); 21 Feb 2008 11:54:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10635 invoked by uid 500); 21 Feb 2008 11:54:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10624 invoked by uid 99); 21 Feb 2008 11:54:10 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Feb 2008 03:54:10 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Feb 2008 11:53:23 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1JS9zj-0003qm-B4
	for java-user@lucene.apache.org; Thu, 21 Feb 2008 03:53:43 -0800
Message-ID: <15608110.post@talk.nabble.com>
Date: Thu, 21 Feb 2008 03:53:43 -0800 (PST)
From: JensBurkhardt <jensburkhardt@web.de>
To: java-user@lucene.apache.org
Subject: Re: Boost Single Values in Field
In-Reply-To: <DD941C48-4035-4A0D-8581-BA198327F657@apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: jensburkhardt@web.de
References: <15591373.post@talk.nabble.com> <DD941C48-4035-4A0D-8581-BA198327F657@apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org



Grant Ingersoll-6 wrote:
> 
> You have two options:
> 
> 1. Boost the term on the query side.  The query parser pretty much  
> takes exactly the syntax you use.
> 2. Use Payloads along with the BoostingTermQuery.
> 
> Search the archives for info on one or both.
> 
> -Grant
> 
> On Feb 20, 2008, at 11:30 AM, JensBurkhardt wrote:
> 
>>
>> Hey,
>>
>> I'm wondering if you can boost single values and not the whole field.
>> For example:
>> i'm having a field called test with "value1 value2 value3" - all  
>> packed in a
>> String - and
>> i want to boost specific values e.g value1^0.5 value2^1.5 etc.
>> The problem is that i can't seperate this field. I don't think this  
>> will
>> work but maybe someone has had the
>> same problem.
>> Trying to search took me nowhere :-) so i decided to just ask and  
>> maybe i'm
>> lucky.
>>
>> Greetings
>> Jens
>> -- 
>> View this message in context:
>> http://www.nabble.com/Boost-Single-Values-in-Field-tp15591373p15591373.html
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
> 
> 
> 
> 
> --------------------------
> Grant Ingersoll
> http://lucene.grantingersoll.com
> http://www.lucenebootcamp.com
> 
> Lucene Helpful Hints:
> http://wiki.apache.org/lucene-java/BasicsOfPerformance
> http://wiki.apache.org/lucene-java/LuceneFAQ
> 
> 
> 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

Hello again,

Thanks for your immediate response. As i understand, the only way to boost
the values is on query side, right?
The Problem is, that i need to boost field values. Okay, some more details:
I need it for a library. The string in the field i'm working with is
something like "Title author year_of_publication some_catchwords" and so on.
It's like on big String.
This field is called "Free-Text" so the query can something like "author AND
title".
And that's the point, the order of the search terms is arbitrary so i don't
know what i do boost in the field. If i want to boost the title i need to
boost the specific value in the Free-Text field.
If I'm wrong and i can handle this problem with using payload, could someone
please explain it cause i don't understand how to use payload on index side.

Best regards
Jens
-- 
View this message in context: http://www.nabble.com/Boost-Single-Values-in-Field-tp15591373p15608110.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32711-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 21 13:05:02 2008
Return-Path: <java-user-return-32711-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51998 invoked from network); 21 Feb 2008 13:05:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Feb 2008 13:05:02 -0000
Received: (qmail 773 invoked by uid 500); 21 Feb 2008 13:04:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 744 invoked by uid 500); 21 Feb 2008 13:04:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 733 invoked by uid 99); 21 Feb 2008 13:04:50 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Feb 2008 05:04:50 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=RCVD_IN_BL_SPAMCOP_NET,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of spring@gmx.eu designates 213.165.64.20 as permitted sender)
Received: from [213.165.64.20] (HELO mail.gmx.net) (213.165.64.20)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 21 Feb 2008 13:04:15 +0000
Received: (qmail invoked by alias); 21 Feb 2008 13:04:22 -0000
Received: from e178119032.adsl.alicedsl.de (EHLO msrvcn04) [85.178.119.32]
  by mail.gmx.net (mp045) with SMTP; 21 Feb 2008 14:04:22 +0100
X-Authenticated: #2635966
X-Provags-ID: V01U2FsdGVkX1+86UVWLVW8iVtNV4J/2CCEckgVTd+xwb/zPPC0ZS
	48rErPR4S/VH+T
From: <spring@gmx.eu>
To: <java-user@lucene.apache.org>
Subject: How to construct a MultiReader?
Date: Thu, 21 Feb 2008 14:04:24 +0100
Message-ID: <6AC74647DA1B449D8F1E344B83EDA750@msrvcn04>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
Thread-Index: Ach0ihhh4gz3wvHwRsq+eGFEXmLWDg==
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.3790.4133
X-Y-GMX-Trusted: 0
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

how can I construct a MultiReader?

There is only a constructor with an IndexReader-array. But IndexReader is
abstract and all other IndexReader-implementations also need an IndexReader
as constructor param.

Now I'm a bit confused...

I want to construct a MultiReader which reads multiple FDDirectories.

Thank you.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32712-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 21 13:11:20 2008
Return-Path: <java-user-return-32712-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54014 invoked from network); 21 Feb 2008 13:11:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Feb 2008 13:11:20 -0000
Received: (qmail 7569 invoked by uid 500); 21 Feb 2008 13:11:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7531 invoked by uid 500); 21 Feb 2008 13:11:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7520 invoked by uid 99); 21 Feb 2008 13:11:08 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Feb 2008 05:11:08 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of serera@gmail.com designates 66.249.82.237 as permitted sender)
Received: from [66.249.82.237] (HELO wx-out-0506.google.com) (66.249.82.237)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Feb 2008 13:10:36 +0000
Received: by wx-out-0506.google.com with SMTP id i28so45044wxd.20
        for <java-user@lucene.apache.org>; Thu, 21 Feb 2008 05:10:43 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=9+3GtTy+q5+hTyIeUHUcLsPOTJDOC0XRLHDq6Qp4oMY=;
        b=UriSHJmFWfX5cHmudp+r96UuTZJ0Vc7wqm9SwZ8fy+Q4sxI9K7cz0WtXFnXk3hH6gN1ImHQNH9J9vimirbXcVXhHzEP+RJrk6HjC1nFMA04+Re2FOpqtwjVJ2Det4+cvoVhkC3BwyJRsAkANmodkpqDGf8XyXrU+vPiDogjxe0E=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=WalUg2QR/8PDvxPox2uq5XNOT0DPeLnRUpWAW3Jmz9gnyhz2079DvIomOcR561/vadoVZQnmtkHDIcMNE1X0ILoPrIJwcC1lhcCwJIC5LwlIEN2zHXggCGcBVf5fdiTAWBxtcydruWFy0FvurgEvjAOQk6OoFLUjzLbAmM9sA4s=
Received: by 10.141.99.4 with SMTP id b4mr5993378rvm.254.1203599442402;
        Thu, 21 Feb 2008 05:10:42 -0800 (PST)
Received: by 10.141.70.4 with HTTP; Thu, 21 Feb 2008 05:10:42 -0800 (PST)
Message-ID: <786fde50802210510i2691ae49qe4603ebbf68055ea@mail.gmail.com>
Date: Thu, 21 Feb 2008 15:10:42 +0200
From: "Shai Erera" <serera@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: How to construct a MultiReader?
In-Reply-To: <6AC74647DA1B449D8F1E344B83EDA750@msrvcn04>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_2701_21850357.1203599442400"
References: <6AC74647DA1B449D8F1E344B83EDA750@msrvcn04>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_2701_21850357.1203599442400
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi

You can use IndexReader.open() static method to open a reader over
directories, file-systems etc.
Does that help?

Shai

On Thu, Feb 21, 2008 at 3:04 PM, <spring@gmx.eu> wrote:

> Hi,
>
> how can I construct a MultiReader?
>
> There is only a constructor with an IndexReader-array. But IndexReader is
> abstract and all other IndexReader-implementations also need an
> IndexReader
> as constructor param.
>
> Now I'm a bit confused...
>
> I want to construct a MultiReader which reads multiple FDDirectories.
>
> Thank you.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
Regards,

Shai Erera

------=_Part_2701_21850357.1203599442400--

From java-user-return-32713-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 21 13:46:04 2008
Return-Path: <java-user-return-32713-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62395 invoked from network); 21 Feb 2008 13:46:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Feb 2008 13:46:03 -0000
Received: (qmail 64149 invoked by uid 500); 21 Feb 2008 13:45:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63963 invoked by uid 500); 21 Feb 2008 13:45:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63952 invoked by uid 99); 21 Feb 2008 13:45:51 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Feb 2008 05:45:51 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.119] (HELO spunkymail-a6.g.dreamhost.com) (208.97.132.119)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Feb 2008 13:45:18 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a6.g.dreamhost.com (Postfix) with ESMTP id 3B1A0109F30
	for <java-user@lucene.apache.org>; Thu, 21 Feb 2008 05:45:26 -0800 (PST)
Message-Id: <4536A395-6A12-4838-A34C-7A0A720972C8@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <15608110.post@talk.nabble.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v919.2)
Subject: Re: Boost Single Values in Field
Date: Thu, 21 Feb 2008 08:45:25 -0500
References: <15591373.post@talk.nabble.com> <DD941C48-4035-4A0D-8581-BA198327F657@apache.org> <15608110.post@talk.nabble.com>
X-Mailer: Apple Mail (2.919.2)
X-Virus-Checked: Checked by ClamAV on apache.org


On Feb 21, 2008, at 6:53 AM, JensBurkhardt wrote:
>
> Hello again,
>
> Thanks for your immediate response. As i understand, the only way to  
> boost
> the values is on query side, right?
> The Problem is, that i need to boost field values. Okay, some more  
> details:
> I need it for a library. The string in the field i'm working with is
> something like "Title author year_of_publication some_catchwords"  
> and so on.
> It's like on big String.
> This field is called "Free-Text" so the query can something like  
> "author AND
> title".
> And that's the point, the order of the search terms is arbitrary so  
> i don't
> know what i do boost in the field. If i want to boost the title i  
> need to
> boost the specific value in the Free-Text field.
> If I'm wrong and i can handle this problem with using payload, could  
> someone
> please explain it cause i don't understand how to use payload on  
> index side.
>

I would split the string (either ahead of time or by writing your own  
TeeTokenFilter and SinkTokenizer) such that you can separate out your  
one big String into two smaller fields.  Other option, is to use  
payloads

Token.setPayload() is how you set payloads.  There are a couple  
examples in 2.3 in the contrib/analysis package of how to add payloads  
for specific things, you would just need your own that recognized your  
structure.

Also have a look at Michael B's excellent ApacheCon slides: http://people.apache.org/~buschmi/apachecon/AdvancedIndexingLuceneAtlanta07.ppt

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32714-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 21 14:07:46 2008
Return-Path: <java-user-return-32714-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73876 invoked from network); 21 Feb 2008 14:07:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Feb 2008 14:07:46 -0000
Received: (qmail 95113 invoked by uid 500); 21 Feb 2008 14:07:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95086 invoked by uid 500); 21 Feb 2008 14:07:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95075 invoked by uid 99); 21 Feb 2008 14:07:33 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Feb 2008 06:07:33 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [203.199.18.82] (HELO imap.impetus.co.in) (203.199.18.82)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Feb 2008 14:07:01 +0000
Received: from impetus876 ([192.168.98.85]) by
          imap.impetus.co.in (Netscape Messaging Server 4.15) with ESMTP
          id JWLEDW00.MZD for <java-user@lucene.apache.org>; Thu, 21 Feb
          2008 19:47:56 +0530 
From: "Mitesh Soni" <mitesh.soni@impetus.co.in>
To: <java-user@lucene.apache.org>
Subject: Compass example
Date: Thu, 21 Feb 2008 19:37:05 +0530
Message-ID: <000201c87493$09fe1480$5562a8c0@impetus.co.in>
MIME-Version: 1.0
Content-Type: multipart/related;
	boundary="----=_NextPart_000_0003_01C874C1.23B65080"
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook, Build 10.0.6822
Thread-Index: Ach0kwmVFZJsq2cuRtq3zS/Cypg9jQ==
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3198
Importance: Normal
X-Virus-Checked: Checked by ClamAV on apache.org

------=_NextPart_000_0003_01C874C1.23B65080
Content-Type: multipart/alternative;
	boundary="----=_NextPart_001_0004_01C874C1.23B8C180"


------=_NextPart_001_0004_01C874C1.23B8C180
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit

Is anyone having the ides about the compass framework?

 

How xml files are indexed in compass?

 

Steps or example is needed.

 

Thanks & Regards,

Mitesh Soni 

 


------=_NextPart_001_0004_01C874C1.23B8C180
Content-Type: text/html;
	charset="US-ASCII"
Content-Transfer-Encoding: quoted-printable

<html>

<head>
<META HTTP-EQUIV=3D"Content-Type" CONTENT=3D"text/html; =
charset=3Dus-ascii">


<meta name=3DGenerator content=3D"Microsoft Word 10 (filtered)">

<style>
<!--
 /* Style Definitions */
 p.MsoNormal, li.MsoNormal, div.MsoNormal
	{margin:0in;
	margin-bottom:.0001pt;
	font-size:12.0pt;
	font-family:"Times New Roman";}
a:link, span.MsoHyperlink
	{color:blue;
	text-decoration:underline;}
a:visited, span.MsoHyperlinkFollowed
	{color:purple;
	text-decoration:underline;}
p
	{margin-right:0in;
	margin-left:0in;
	font-size:12.0pt;
	font-family:"Times New Roman";}
span.EmailStyle17
	{color:black;}
@page Section1
	{size:8.5in 11.0in;
	margin:1.0in 1.25in 1.0in 1.25in;}
div.Section1
	{page:Section1;}
-->
</style>

<style>
p.MsoNormal
	{margin-left:37.5pt;}
</style>
</head>

<body bgcolor=3Dwhite background=3D"cid:image001.jpg@01C874C1.233CB3B0" =
lang=3DEN-US
link=3Dblue vlink=3Dpurple =
style=3D'margin-left:37.5pt;margin-top:15.0pt'>

<div class=3DSection1>

<p class=3DMsoNormal><font size=3D3 color=3Dblack face=3D"Times New =
Roman"><span
style=3D'font-size:12.0pt;color:black'>Is anyone having the ides about =
the
compass framework?</span></font></p>

<p class=3DMsoNormal><font size=3D3 color=3Dblack face=3D"Times New =
Roman"><span
style=3D'font-size:12.0pt;color:black'>&nbsp;</span></font></p>

<p class=3DMsoNormal><font size=3D3 color=3Dblack face=3D"Times New =
Roman"><span
style=3D'font-size:12.0pt;color:black'>How xml files are indexed in =
compass?</span></font></p>

<p class=3DMsoNormal><font size=3D3 color=3Dblack face=3D"Times New =
Roman"><span
style=3D'font-size:12.0pt;color:black'>&nbsp;</span></font></p>

<p class=3DMsoNormal><font size=3D3 color=3Dblack face=3D"Times New =
Roman"><span
style=3D'font-size:12.0pt;color:black'>Steps or example is =
needed.</span></font></p>

<p class=3DMsoNormal><font size=3D3 color=3Dblack face=3D"Times New =
Roman"><span
style=3D'font-size:12.0pt;color:black'>&nbsp;</span></font></p>

<div>

<p class=3DMsoNormal><font size=3D2 color=3Dblack face=3DArial><span =
style=3D'font-size:
10.0pt;font-family:Arial;color:black'>Thanks &amp; =
Regards,</span></font></p>

<p class=3DMsoNormal><font size=3D2 color=3Dblack face=3DArial><span =
style=3D'font-size:
10.0pt;font-family:Arial;color:black'>Mitesh Soni</span></font><font =
size=3D2
color=3D"#006666" face=3DArial><span =
style=3D'font-size:10.0pt;font-family:Arial;
color:#006666'>&nbsp;</span></font></p>

</div>

<p><font size=3D2 color=3D"#006666" face=3DArial><span =
style=3D'font-size:10.0pt;
font-family:Arial;color:#006666'>&nbsp;</span></font></p>

</div>

</body>

</html>

------=_NextPart_001_0004_01C874C1.23B8C180--

------=_NextPart_000_0003_01C874C1.23B65080--


From java-user-return-32715-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 21 14:13:53 2008
Return-Path: <java-user-return-32715-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77725 invoked from network); 21 Feb 2008 14:13:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Feb 2008 14:13:52 -0000
Received: (qmail 7762 invoked by uid 500); 21 Feb 2008 14:13:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7722 invoked by uid 500); 21 Feb 2008 14:13:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7711 invoked by uid 99); 21 Feb 2008 14:13:40 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Feb 2008 06:13:40 -0800
X-ASF-Spam-Status: No, hits=3.2 required=10.0
	tests=HTML_MESSAGE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.202] (HELO spunkymail-a2.g.dreamhost.com) (208.97.132.202)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Feb 2008 14:13:05 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a2.g.dreamhost.com (Postfix) with ESMTP id 8AB4987FEA
	for <java-user@lucene.apache.org>; Thu, 21 Feb 2008 06:13:14 -0800 (PST)
Message-Id: <D881175C-BED7-4970-8243-62D9578A0BFB@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <000201c87493$09fe1480$5562a8c0@impetus.co.in>
Content-Type: multipart/alternative; boundary=Apple-Mail-1179--189791305
Mime-Version: 1.0 (Apple Message framework v919.2)
Subject: Re: Compass example
X-Priority: 3 (Normal)
Date: Thu, 21 Feb 2008 09:13:11 -0500
References: <000201c87493$09fe1480$5562a8c0@impetus.co.in>
X-Mailer: Apple Mail (2.919.2)
X-Virus-Checked: Checked by ClamAV on apache.org

--Apple-Mail-1179--189791305
Content-Type: text/plain;
	charset=US-ASCII;
	format=flowed;
	delsp=yes
Content-Transfer-Encoding: 7bit

HI Mitesh,

I would suggest asking the folks who created Compass on the Compass  
mailing lists.

Thanks,
Grant

On Feb 21, 2008, at 9:07 AM, Mitesh Soni wrote:

> Is anyone having the ides about the compass framework?
>
> How xml files are indexed in compass?
>
> Steps or example is needed.
>
> Thanks & Regards,
> Mitesh Soni
>

--------------------------
Grant Ingersoll
http://www.lucenebootcamp.com
Next Training: April 7, 2008 at ApacheCon Europe in Amsterdam

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ






--Apple-Mail-1179--189791305--

From java-user-return-32716-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 21 14:19:00 2008
Return-Path: <java-user-return-32716-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80636 invoked from network); 21 Feb 2008 14:19:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Feb 2008 14:19:00 -0000
Received: (qmail 15357 invoked by uid 500); 21 Feb 2008 14:18:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15328 invoked by uid 500); 21 Feb 2008 14:18:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15317 invoked by uid 99); 21 Feb 2008 14:18:48 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Feb 2008 06:18:48 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [203.199.18.82] (HELO imap.impetus.co.in) (203.199.18.82)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Feb 2008 14:17:59 +0000
Received: from impetus876 ([192.168.98.85]) by
          imap.impetus.co.in (Netscape Messaging Server 4.15) with ESMTP
          id JWLEWG00.R1B for <java-user@lucene.apache.org>; Thu, 21 Feb
          2008 19:59:04 +0530 
From: "Mitesh Soni" <mitesh.soni@impetus.co.in>
To: <java-user@lucene.apache.org>
Subject: RE: Compass example
Date: Thu, 21 Feb 2008 19:48:14 +0530
Message-ID: <000201c87494$98658130$5562a8c0@impetus.co.in>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook, Build 10.0.6822
In-Reply-To: <D881175C-BED7-4970-8243-62D9578A0BFB@apache.org>
Importance: Normal
Thread-Index: Ach0lYKXWOzenoysTvmERVEW+vS1UgAAQpYg
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3198
X-Virus-Checked: Checked by ClamAV on apache.org

I have done that but no reply still...

>From documentation I m not able to understand. So I thought I should post
here.

Thanks & Regards,
Mitesh Soni

-----Original Message-----
From: Grant Ingersoll [mailto:gsingers@apache.org] 
Sent: Thursday, February 21, 2008 7:43 PM
To: java-user@lucene.apache.org
Subject: Re: Compass example

HI Mitesh,

I would suggest asking the folks who created Compass on the Compass  
mailing lists.

Thanks,
Grant

On Feb 21, 2008, at 9:07 AM, Mitesh Soni wrote:

> Is anyone having the ides about the compass framework?
>
> How xml files are indexed in compass?
>
> Steps or example is needed.
>
> Thanks & Regards,
> Mitesh Soni
>

--------------------------
Grant Ingersoll
http://www.lucenebootcamp.com
Next Training: April 7, 2008 at ApacheCon Europe in Amsterdam

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ







---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32717-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 21 14:23:15 2008
Return-Path: <java-user-return-32717-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82435 invoked from network); 21 Feb 2008 14:23:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Feb 2008 14:23:15 -0000
Received: (qmail 23916 invoked by uid 500); 21 Feb 2008 14:23:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23883 invoked by uid 500); 21 Feb 2008 14:23:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23849 invoked by uid 99); 21 Feb 2008 14:23:02 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Feb 2008 06:23:02 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=RCVD_IN_BL_SPAMCOP_NET,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of spring@gmx.eu designates 213.165.64.20 as permitted sender)
Received: from [213.165.64.20] (HELO mail.gmx.net) (213.165.64.20)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 21 Feb 2008 14:22:16 +0000
Received: (qmail invoked by alias); 21 Feb 2008 14:22:36 -0000
Received: from e178119032.adsl.alicedsl.de (EHLO msrvcn04) [85.178.119.32]
  by mail.gmx.net (mp013) with SMTP; 21 Feb 2008 15:22:36 +0100
X-Authenticated: #2635966
X-Provags-ID: V01U2FsdGVkX18+12t4+3M+i9bEsUNe7pAZYF1MMW4vg/nsQ8UBMV
	0tQxYE+/nC4wVV
From: <spring@gmx.eu>
To: <java-user@lucene.apache.org>
References: <6AC74647DA1B449D8F1E344B83EDA750@msrvcn04> <786fde50802210510i2691ae49qe4603ebbf68055ea@mail.gmail.com>
Subject: RE: How to construct a MultiReader?
Date: Thu, 21 Feb 2008 15:22:39 +0100
Message-ID: <2198CB651EDD4FF9ADF422D5A1776B35@msrvcn04>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
Thread-Index: Ach0iz84ufHuL8WpQ2Syvl+TZ3ecVwACZgdA
In-Reply-To: <786fde50802210510i2691ae49qe4603ebbf68055ea@mail.gmail.com>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.3790.4133
X-Y-GMX-Trusted: 0
X-Virus-Checked: Checked by ClamAV on apache.org

Thank you. 

> -----Original Message-----
> From: Shai Erera [mailto:serera@gmail.com] 
> Sent: Donnerstag, 21. Februar 2008 14:11
> To: java-user@lucene.apache.org
> Subject: Re: How to construct a MultiReader?
> 
> Hi
> 
> You can use IndexReader.open() static method to open a reader over
> directories, file-systems etc.
> Does that help?
> 
> Shai
> 
> On Thu, Feb 21, 2008 at 3:04 PM, <spring@gmx.eu> wrote:
> 
> > Hi,
> >
> > how can I construct a MultiReader?
> >
> > There is only a constructor with an IndexReader-array. But 
> IndexReader is
> > abstract and all other IndexReader-implementations also need an
> > IndexReader
> > as constructor param.
> >
> > Now I'm a bit confused...
> >
> > I want to construct a MultiReader which reads multiple 
> FDDirectories.
> >
> > Thank you.
> >
> >
> > 
> ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> 
> 
> -- 
> Regards,
> 
> Shai Erera
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32718-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 21 15:55:38 2008
Return-Path: <java-user-return-32718-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94128 invoked from network); 21 Feb 2008 15:55:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Feb 2008 15:55:38 -0000
Received: (qmail 23974 invoked by uid 500); 21 Feb 2008 15:55:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23933 invoked by uid 500); 21 Feb 2008 15:55:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23922 invoked by uid 99); 21 Feb 2008 15:55:26 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Feb 2008 07:55:26 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [77.67.121.29] (HELO mta01.zimbra.com) (77.67.121.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Feb 2008 15:54:41 +0000
Received: from dogfood.zimbra.com (dogfood.zimbra.com [10.10.140.44])
	by mta01.zimbra.com (Postfix) with ESMTP id 752D0DE8D7D
	for <java-user@lucene.apache.org>; Thu, 21 Feb 2008 07:55:01 -0800 (PST)
Received: from localhost (localhost.localdomain [127.0.0.1])
	by dogfood.zimbra.com (Postfix) with ESMTP id 6700A4C176
	for <java-user@lucene.apache.org>; Thu, 21 Feb 2008 07:55:01 -0800 (PST)
X-Virus-Scanned: amavisd-new at dogfood.zimbra.com
Received: from dogfood.zimbra.com ([127.0.0.1])
	by localhost (dogfood.zimbra.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id ix6xfyOuu5tN for <java-user@lucene.apache.org>;
	Thu, 21 Feb 2008 07:55:00 -0800 (PST)
Received: from dogfood.zimbra.com (localhost.localdomain [127.0.0.1])
	by dogfood.zimbra.com (Postfix) with ESMTP id 3F0E54C169
	for <java-user@lucene.apache.org>; Thu, 21 Feb 2008 07:55:00 -0800 (PST)
Date: Thu, 21 Feb 2008 07:54:59 -0800 (PST)
From: Tim Brennan <tim@zimbra.com>
To: java-user@lucene.apache.org
Message-ID: <272972818.209491203609299910.JavaMail.root@dogfood.zimbra.com>
In-Reply-To: <212887129.209141203608549488.JavaMail.root@dogfood.zimbra.com>
Subject: IndexDeletionPolicy and IndexCommitPoint
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

When implementing a custom IndexDeletionPolicy, is it sufficient to just use the segments filename (returned by IndexCommitPoint.getSegmentsFilename()) to compare CommitPoints to see if they are equal?

I've looked at the code in SnapshotDeletionPolicy and it works by keeping a pointer to the snapshot IndexCommitPoint and comparing that against the listed commit points in onCommit.  This strategy doesn't seem to work if the IndexWriter is closed and re-opened: you get all new CommitPoint instances from the new Writer even if they refer to the same logical commit, and furthermore holding onto IndexCommitPoint references across generations of IndexWriters will cause significant memory pressure (an IndexCommitPoint is an instance of the *non-static* inner class IndexFileDeleter$CommitPoint so it points to the IndexFileDeleter which points to the DocumentsWriter which points to the Posting[] array.....so holding onto a commit point effectively keeps the Posting[] array around)

Am I going completely wrong here, trying to IndexDeletionPolicy across Writer generations?  

--tim

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32719-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 21 17:25:55 2008
Return-Path: <java-user-return-32719-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37629 invoked from network); 21 Feb 2008 17:25:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Feb 2008 17:25:55 -0000
Received: (qmail 25559 invoked by uid 500); 21 Feb 2008 17:25:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24585 invoked by uid 500); 21 Feb 2008 17:25:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24569 invoked by uid 99); 21 Feb 2008 17:25:43 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Feb 2008 09:25:43 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [72.14.246.251] (HELO ag-out-0708.google.com) (72.14.246.251)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Feb 2008 17:25:10 +0000
Received: by ag-out-0708.google.com with SMTP id 23so164707agd.5
        for <java-user@lucene.apache.org>; Thu, 21 Feb 2008 09:25:16 -0800 (PST)
Received: by 10.100.252.16 with SMTP id z16mr20553943anh.36.1203614715905;
        Thu, 21 Feb 2008 09:25:15 -0800 (PST)
Received: by 10.100.154.5 with HTTP; Thu, 21 Feb 2008 09:25:15 -0800 (PST)
Message-ID: <9ac0c6aa0802210925h4d4097bcn32fdceeebf5ed0a4@mail.gmail.com>
Date: Thu, 21 Feb 2008 12:25:15 -0500
From: "Michael McCandless" <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Subject: Re: IndexDeletionPolicy and IndexCommitPoint
In-Reply-To: <272972818.209491203609299910.JavaMail.root@dogfood.zimbra.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <212887129.209141203608549488.JavaMail.root@dogfood.zimbra.com>
	 <272972818.209491203609299910.JavaMail.root@dogfood.zimbra.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Good questions!

Yes, it's best to use the segments filename to compare commit points
across close/reopen of IndexWriter as long as you ensure you're always
working with the same index / Directory.

You could change snapshot to be a String (the segments file name) and
do all comparisons on that basis instead of holding the
IndexCommitPoint.  This breaks the reference to the non-static inner
class CommitPoint in IndexFileDeleter.

I like this simplification ... I've opened LUCENE-1184 for this and
attached a patch:

    https://issues.apache.org/jira/browse/LUCENE-1184

Thanks Tim!

Mike

Tim Brennan <tim@zimbra.com> wrote:
> When implementing a custom IndexDeletionPolicy, is it sufficient to just use the segments filename (returned by IndexCommitPoint.getSegmentsFilename()) to compare CommitPoints to see if they are equal?
>
>  I've looked at the code in SnapshotDeletionPolicy and it works by keeping a pointer to the snapshot IndexCommitPoint and comparing that against the listed commit points in onCommit.  This strategy doesn't seem to work if the IndexWriter is closed and re-opened: you get all new CommitPoint instances from the new Writer even if they refer to the same logical commit, and furthermore holding onto IndexCommitPoint references across generations of IndexWriters will cause significant memory pressure (an IndexCommitPoint is an instance of the *non-static* inner class IndexFileDeleter$CommitPoint so it points to the IndexFileDeleter which points to the DocumentsWriter which points to the Posting[] array.....so holding onto a commit point effectively keeps the Posting[] array around)
>
>  Am I going completely wrong here, trying to IndexDeletionPolicy across Writer generations?
>
>  --tim
>
>  ---------------------------------------------------------------------
>  To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>  For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32720-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 21 17:30:22 2008
Return-Path: <java-user-return-32720-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38905 invoked from network); 21 Feb 2008 17:30:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Feb 2008 17:30:22 -0000
Received: (qmail 35658 invoked by uid 500); 21 Feb 2008 17:30:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 35406 invoked by uid 500); 21 Feb 2008 17:30:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 35395 invoked by uid 99); 21 Feb 2008 17:30:10 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Feb 2008 09:30:10 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [72.14.246.246] (HELO ag-out-0708.google.com) (72.14.246.246)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Feb 2008 17:29:23 +0000
Received: by ag-out-0708.google.com with SMTP id 23so171459agd.5
        for <java-user@lucene.apache.org>; Thu, 21 Feb 2008 09:29:41 -0800 (PST)
Received: by 10.100.34.16 with SMTP id h16mr20500996anh.81.1203614977112;
        Thu, 21 Feb 2008 09:29:37 -0800 (PST)
Received: by 10.100.154.5 with HTTP; Thu, 21 Feb 2008 09:29:37 -0800 (PST)
Message-ID: <9ac0c6aa0802210929ncb35889j927df0d83ded93a9@mail.gmail.com>
Date: Thu, 21 Feb 2008 12:29:37 -0500
From: "Michael McCandless" <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Subject: Re: Retain the index
In-Reply-To: <3126751e0802202319u78059027uf8998166a3dfb4d9@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <3126751e0801250005s17687201qf3646036683cb5f5@mail.gmail.com>
	 <3126751e0801262155i2ff62f28qe81814460677354d@mail.gmail.com>
	 <200801271037.43451@danielnaber.de>
	 <3126751e0801270211x6da0dec2xe869564f22d38139@mail.gmail.com>
	 <359a92830801271352o3c81dfeflb15d7c3c624b6033@mail.gmail.com>
	 <3126751e0801302212s1e386c67i8be10eb5512114c5@mail.gmail.com>
	 <AC9AFBA0-C12B-4971-A00E-A3DEA8586B36@mikemccandless.com>
	 <3126751e0802202319u78059027uf8998166a3dfb4d9@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Now it looks like you are creating the IndexWriter with create=false
when in fact there is no existing index in that directory.

Mike

<anjana.mprasad@gmail.com> wrote:
> I got this error after dleteing that file
>
>  Exception in thread "main" java.io.FileNotFoundException:
>  C:\pIndexed\segments (The system cannot find the file specified)
>         at java.io.RandomAccessFile.open(Native Method)
>         at java.io.RandomAccessFile.<init>(RandomAccessFile.java:212)
>         at org.apache.lucene.store.FSInputStream$Descriptor.<init>(
>  FSDirectory.java:376)
>         at org.apache.lucene.store.FSInputStream.<init>(FSDirectory.java
>  :405)
>         at org.apache.lucene.store.FSDirectory.openFile(FSDirectory.java
>  :268)
>         at org.apache.lucene.index.SegmentInfos.read(SegmentInfos.java:40)
>         at org.apache.lucene.index.IndexWriter$1.doBody(IndexWriter.java
>  :233)
>         at org.apache.lucene.store.Lock$With.run(Lock.java:109)
>         at org.apache.lucene.index.IndexWriter.<init>(IndexWriter.java:228)
>
>         at org.apache.lucene.index.IndexWriter.<init>(IndexWriter.java:193)
>
>         at com.cecilia.wim.process.Indexer.index(Indexer.java:29)
>         at com.cecilia.wim.process.Indexer.main(Indexer.java:68)
>
>
>
>  On Thu, Jan 31, 2008 at 2:49 PM, Michael McCandless <
>  lucene@mikemccandless.com> wrote:
>
>  >
>  > It looks like you are passing "true" to FSDirectory.getDirectory,
>  > which you shouldn't do.  Always pass "false" to that.  (Newer
>  > versions of Lucene have deprecated the create flag to FSDirectory,
>  > leaving it entirely to IndexWriter).
>  >
>  > On the lock obtain timed out, probably that's a left over lock file,
>  > so you should just remove it if you're sure it is.
>  >
>  > Mike
>  >
>  > anjana m wrote:
>  >
>  > > with true:
>  > > i finding a serious problem when i need new index please help..
>  > > but how can ikeep chnaging the true flase option..
>  > > :(
>  > > please help me...:(
>  > > Exception in thread "main" java.io.IOException: Cannot delete _17.cfs
>  > >         at org.apache.lucene.store.FSDirectory.create
>  > > (FSDirectory.java:144)
>  > >         at org.apache.lucene.store.FSDirectory.<init>
>  > > (FSDirectory.java:128)
>  > >         at org.apache.lucene.store.FSDirectory.getDirectory
>  > > (FSDirectory.java
>  > > :102)
>  > >         at org.apache.lucene.index.IndexWriter.<init>
>  > > (IndexWriter.java:193)
>  > >
>  > >
>  > > False
>  > > Exception in thread "main" java.io.IOException: Lock obtain timed out:
>  > > Lock@C:\DOCUME~1\ANJANA\LOCALS~1\Temp\lucene-
>  > > 3ca21f86af4e6d9f86b82f8f13be98e4-write.lock
>  > >         at org.apache.lucene.store.Lock.obtain(Lock.java:58)
>  > >         at org.apache.lucene.index.IndexWriter.<init>
>  > > (IndexWriter.java:223)
>  > >         at org.apache.lucene.index.IndexWriter.<init>
>  > > (IndexWriter.java:193)
>  > >         at com.cecilia.wim.process.Indexer.index(Indexer.java:25)
>  > >         at com.cecilia.wim.process.Indexer.main(Indexer.java:60)
>  > >
>  > >
>  > > On Jan 28, 2008 3:22 AM, Erick Erickson <erickerickson@gmail.com>
>  > > wrote:
>  > >
>  > >> Set the parameter to false as per the documentation....
>  > >>
>  > >> Erick
>  > >>
>  > >> On Jan 27, 2008 5:11 AM, anjana m <anjana.mprasad@gmail.com> wrote:
>  > >>
>  > >>> yes i dont want the old index to be deletd since its running on
>  > >>> my app
>  > >>> server..
>  > >>> any suggestion..?
>  > >>>
>  > >>> On Jan 27, 2008 3:07 PM, Daniel Naber
>  > >>> <lucenelist2007@danielnaber.de>
>  > >>> wrote:
>  > >>>
>  > >>>> On Sonntag, 27. Januar 2008, anjana m wrote:
>  > >>>>
>  > >>>>>         IndexWriter writer = new IndexWriter(indexDir, new
>  > >>>>> StandardAnalyzer(), true);
>  > >>>>
>  > >>>> The true parameter means that the old index will be deleted, is
>  > >>>> that
>  > >>> your
>  > >>>> problem?
>  > >>>>
>  > >>>> Regards
>  > >>>>  Daniel
>  > >>>>
>  > >>>> --
>  > >>>> http://www.danielnaber.de
>  > >>>>
>  > >>>> -------------------------------------------------------------------
>  > >>>> --
>  > >>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>  > >>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>  > >>>>
>  > >>>>
>  > >>>
>  > >>
>  >
>  >
>
> > ---------------------------------------------------------------------
>
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>  > For additional commands, e-mail: java-user-help@lucene.apache.org
>  >
>  >
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32721-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 21 22:06:59 2008
Return-Path: <java-user-return-32721-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93027 invoked from network); 21 Feb 2008 22:06:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Feb 2008 22:06:58 -0000
Received: (qmail 50693 invoked by uid 500); 21 Feb 2008 22:06:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50602 invoked by uid 500); 21 Feb 2008 22:06:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50591 invoked by uid 99); 21 Feb 2008 22:06:46 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Feb 2008 14:06:46 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [203.217.22.128] (HELO file1.syd.nuix.com.au) (203.217.22.128)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Feb 2008 22:06:01 +0000
Received: from host68.syd.nuix.com.au (host68.syd.nuix.com.au [192.168.222.68])
	by file1.syd.nuix.com.au (Postfix) with ESMTP id 2DD6B4A887D
	for <java-user@lucene.apache.org>; Fri, 22 Feb 2008 09:05:43 +1100 (EST)
From: Daniel Noll <daniel@nuix.com>
Organization: Nuix Pty Ltd
To: java-user@lucene.apache.org
Subject: Re: Searching multiple indexes
Date: Fri, 22 Feb 2008 09:02:57 +1100
User-Agent: KMail/1.9.6 (enterprise 0.20070907.709405)
References: <40CDB8FB060446B0AB05DF697FEA029F@msrvcn04> <4968832D3F4C4CE69C9F1CDF86E91A9A@msrvcn04>
In-Reply-To: <4968832D3F4C4CE69C9F1CDF86E91A9A@msrvcn04>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200802220902.57136.daniel@nuix.com>
X-Virus-Checked: Checked by ClamAV on apache.org

On Tuesday 19 February 2008 21:08:59 spring@gmx.eu wrote:
> 1. IndexSearcher with a MultiReader will search the indexes
> sequentially?

Not exactly.  It will fuse the indexes together such that things like TermEnum 
will merge the ones from the real indexes, and will search using those 
composite enumerations.

> 2. ParallelMultiSearcher searches in parallel. How is this
> done? One thread per index?
> When will it return? When the slowest search is fineshed? 

That's what the code seems to indicate.

> 3. When I have to search indexes created with different
> analyzers (maybe a french and a german analyzer), I have to search them
> separately by my own?

Different analysers means a different query parser for each index.  If the 
resulting Query object is the same for all indexes though, there's no 
problem.  The problem occurs when the query does get rewritten by a filter.

That being said, doing a parse query / search in parallel isn't exactly 
difficult.  Look at how ParallelMultiSearcher does it and copy it.

Daniel

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32722-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 22 00:43:22 2008
Return-Path: <java-user-return-32722-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 68278 invoked from network); 22 Feb 2008 00:43:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Feb 2008 00:43:22 -0000
Received: (qmail 53940 invoked by uid 500); 22 Feb 2008 00:43:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53909 invoked by uid 500); 22 Feb 2008 00:43:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53898 invoked by uid 99); 22 Feb 2008 00:43:10 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Feb 2008 16:43:09 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Feb 2008 00:42:37 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id 43B2371C11E; Thu, 21 Feb 2008 16:42:46 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id 3E76E71C0D3
	for <java-user@lucene.apache.org>; Thu, 21 Feb 2008 16:42:46 -0800 (PST)
Date: Thu, 21 Feb 2008 16:42:46 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: regex expressions within phrase queries
In-Reply-To: <99ca131e0802181631y2b16e0cdqdd70c1f7dce97249@mail.gmail.com>
Message-ID: <Pine.LNX.4.62.0802211636570.27615@radix.cryptio.net>
References: <99ca131e0802141625m7a83a613v4b7da728b0a5953b@mail.gmail.com> 
 <Pine.LNX.4.62.0802142245330.25935@radix.cryptio.net>
 <99ca131e0802181631y2b16e0cdqdd70c1f7dce97249@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: By custom phrase query class I was trying to ask if it would be possible, or
: even a good idea, to create a modified PhraseQuery class that is more
: efficient that span queries (as I only want to use it for phrases). This
: class might have multiple possible terms generated from a regex at a certain
: position.

Ah! ... sorry, i missunderstood.  the answer to the questions are: yes it 
is possible and yes it is a good idea if you don't need the full power of 
Spans.

The answerto the question you didn't ask is: yes such a thing exists ... 
take a look at MultiPhraseQuery.  :)

QueryParser uses it when getFieldQuery returns multiple terms with a 
position gap of "0" ... which is perfect for things like synonys.

you could have your own custom RegexPhraseQuery that can contain 
RegexQueries and TermQueries (instead of just Terms) and then rewrite to a 
MultiPhraseQuery once you rewrite the RegexQueries to a TermQueries.

...or something like that.







: 
: 
: On Feb 15, 2008 5:47 PM, Chris Hostetter <hossman_lucene@fucit.org> wrote:
: 
: >
: > : I was wondering if anyone has a more efficient method for achieving
: > this.
: > : Would changing QueryParser.jj and developing a custom PhraseQuery class
: > be a
: > : good idea?  Any comments would be appreciated.
: >
: > extending QueryParser and overriding the getPhraseQuery function to return
: > your own SpanNearQueries composted of SpanRegexQueries shouldn't be any
: > more efficient then modifying the QueryParser grammer.  either way it's
: > going to be calling some method you write that returns a SpanNearQuery.
: >
: >
: >
: > -Hoss
: >
: >
: > ---------------------------------------------------------------------
: > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
: > For additional commands, e-mail: java-user-help@lucene.apache.org
: >
: >
: 



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32723-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 22 05:18:14 2008
Return-Path: <java-user-return-32723-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 68054 invoked from network); 22 Feb 2008 05:18:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Feb 2008 05:18:14 -0000
Received: (qmail 44176 invoked by uid 500); 22 Feb 2008 05:18:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44134 invoked by uid 500); 22 Feb 2008 05:18:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44123 invoked by uid 99); 22 Feb 2008 05:18:02 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Feb 2008 21:18:02 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Feb 2008 05:17:16 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1JSQHw-0003UR-Kr
	for java-user@lucene.apache.org; Thu, 21 Feb 2008 21:17:36 -0800
Message-ID: <15627959.post@talk.nabble.com>
Date: Thu, 21 Feb 2008 21:17:36 -0800 (PST)
From: sumittyagi <ping.sumit@gmail.com>
To: java-user@lucene.apache.org
Subject: How to get the doc ID from HITS
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: ping.sumit@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


hi, is there any way to retrieve the doc ids from HITS, Please advise me
regarding this , i am new to lucene and programming.
-- 
View this message in context: http://www.nabble.com/How-to-get-the-doc-ID-from-HITS-tp15627959p15627959.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32724-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 22 05:44:59 2008
Return-Path: <java-user-return-32724-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71573 invoked from network); 22 Feb 2008 05:44:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Feb 2008 05:44:58 -0000
Received: (qmail 53963 invoked by uid 500); 22 Feb 2008 05:44:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53932 invoked by uid 500); 22 Feb 2008 05:44:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53921 invoked by uid 99); 22 Feb 2008 05:44:47 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Feb 2008 21:44:47 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of gshankar.sahu@gmail.com designates 72.14.246.245 as permitted sender)
Received: from [72.14.246.245] (HELO ag-out-0708.google.com) (72.14.246.245)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Feb 2008 05:44:12 +0000
Received: by ag-out-0708.google.com with SMTP id 23so701146agd.5
        for <java-user@lucene.apache.org>; Thu, 21 Feb 2008 21:44:20 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=04J+ZnC4tj8fWN4W6kNuN2/vGXr3MyYCPQkqqR9esnY=;
        b=jxLtS8U0Jv95M8PI9FpOSTkqzGg2TQWUuK3JAtig12n3JiDJhiz43TZmV4JmdNjzHTkW2Oqq7VD1XMCMlOjH9kUq3yCefu/xAtlu3895QfLZNHYxDDSxxC6E8BmFjcgKeZ96zn2Ojc4G3/r//whfUvj5jjgHgSMKh2GdjeiEXNQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=KpibiK2glsalOjSET1J/rFU4nDo6idN1VrwCqUGjx8Y1dSKUXtiPOBisGJCtj+OyTOYFSRWKJwyl0WJdYfe4rC7dJT8NFZYlPyhNDRTwuwEBgMOLCLhgdySbtAb1SWCvLKUkn5fwQWYtEhWyc8JOAdSceH6csNeaqFJof9PCf+w=
Received: by 10.100.132.2 with SMTP id f2mr21936583and.109.1203659060760;
        Thu, 21 Feb 2008 21:44:20 -0800 (PST)
Received: by 10.100.105.4 with HTTP; Thu, 21 Feb 2008 21:44:20 -0800 (PST)
Message-ID: <979a94470802212144p78744aaay70bc9884e51adac4@mail.gmail.com>
Date: Fri, 22 Feb 2008 11:14:20 +0530
From: "Gauri Shankar" <gshankar.sahu@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: How to get the doc ID from HITS
In-Reply-To: <15627959.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_8826_24213397.1203659060728"
References: <15627959.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_8826_24213397.1203659060728
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

You should call Hits.id(n) for getting the docId of the nth document.



On Fri, Feb 22, 2008 at 10:47 AM, sumittyagi <ping.sumit@gmail.com> wrote:

>
> hi, is there any way to retrieve the doc ids from HITS, Please advise me
> regarding this , i am new to lucene and programming.
> --
> View this message in context:
> http://www.nabble.com/How-to-get-the-doc-ID-from-HITS-tp15627959p15627959.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
Regards,
Gauri Shankar

------=_Part_8826_24213397.1203659060728--

From java-user-return-32725-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 22 05:46:47 2008
Return-Path: <java-user-return-32725-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72104 invoked from network); 22 Feb 2008 05:46:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Feb 2008 05:46:47 -0000
Received: (qmail 57785 invoked by uid 500); 22 Feb 2008 05:46:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56756 invoked by uid 500); 22 Feb 2008 05:46:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56735 invoked by uid 99); 22 Feb 2008 05:46:35 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Feb 2008 21:46:35 -0800
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of kent.fitch@gmail.com designates 72.14.214.226 as permitted sender)
Received: from [72.14.214.226] (HELO hu-out-0506.google.com) (72.14.214.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Feb 2008 05:46:00 +0000
Received: by hu-out-0506.google.com with SMTP id 27so318766hub.15
        for <java-user@lucene.apache.org>; Thu, 21 Feb 2008 21:46:08 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        bh=BvuENEjnfC669IPXTmiZ+phz4g7hPovS1zdcgSHC3ZE=;
        b=SIg1XEvuxAWkS7BX5M4uoWiyTEFqpI5YMKcE75k+gf010Uky+HI9xHM/SV+NjHP0zKPgB9dYrGV2ie2A0daigXYhPj6+6v6J4yokdLeSAvHWZfmxKS9xY1hd9XTKE2T7cRi8aIZ6lI4U4nUMc9ixypsEdjHaoc1SUY6m9j8LAes=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=eHsENcYbJafpTK5oftUuaeh+UiJ8FqpZotCU6fNmYd8fR4osmyGKxlXAi8W7d7GsJ6rJ0gMjTs7jjoVjnPQIvaHGJD1XNRMj4p0HlVMj/gR6mWIIXvOKzPHOjWd4iQU29Qh3HmZmf8RVjJqYLtHYhlCByJG1ho+5FzK3KBQCRuM=
Received: by 10.82.149.8 with SMTP id w8mr20405130bud.0.1203659168120;
        Thu, 21 Feb 2008 21:46:08 -0800 (PST)
Received: by 10.82.139.13 with HTTP; Thu, 21 Feb 2008 21:46:08 -0800 (PST)
Message-ID: <355005590802212146l375a9dc3vdf1ffbe3f6dbd11b@mail.gmail.com>
Date: Fri, 22 Feb 2008 16:46:08 +1100
From: "Kent Fitch" <kent.fitch@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: How to get the doc ID from HITS
In-Reply-To: <15627959.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <15627959.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Two ways to work through the Hits object getting docids are:

Hits hits = ...
int hitCount = hits.length();
for (int i=0;i<hitCount;i++) {
   int docId = hits.id[i] ;
   ...
}

or

Iterator hitIterator = hits.iterator() ;
while (hitIterator.hasNext()) {
    Hit hit = (Hit) hitIterator.next() ;
    int docId = hit.getId() ;
}

but check out
http://lucene.apache.org/java/2_3_0/api/org/apache/lucene/search/Hits.html
as this is just code typed into a mail program!

Regards,

Kent

On Fri, Feb 22, 2008 at 4:17 PM, sumittyagi <ping.sumit@gmail.com> wrote:
>
>  hi, is there any way to retrieve the doc ids from HITS, Please advise me
>  regarding this , i am new to lucene and programming.
>  --
>  View this message in context: http://www.nabble.com/How-to-get-the-doc-ID-from-HITS-tp15627959p15627959.html
>  Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
>  ---------------------------------------------------------------------
>  To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>  For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32726-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 22 09:25:08 2008
Return-Path: <java-user-return-32726-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 11732 invoked from network); 22 Feb 2008 09:25:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Feb 2008 09:25:07 -0000
Received: (qmail 73257 invoked by uid 500); 22 Feb 2008 09:24:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73217 invoked by uid 500); 22 Feb 2008 09:24:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73181 invoked by uid 99); 22 Feb 2008 09:24:59 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Feb 2008 01:24:59 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [212.27.42.30] (HELO smtp4-g19.free.fr) (212.27.42.30)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Feb 2008 09:24:11 +0000
Received: from smtp4-g19.free.fr (localhost.localdomain [127.0.0.1])
	by smtp4-g19.free.fr (Postfix) with ESMTP id 501973EA0E8
	for <java-user@lucene.apache.org>; Fri, 22 Feb 2008 10:24:31 +0100 (CET)
Received: from [192.168.99.128] (seb44-1-88-163-78-202.fbx.proxad.net [88.163.78.202])
	by smtp4-g19.free.fr (Postfix) with ESMTP id 2CD953EA0BA
	for <java-user@lucene.apache.org>; Fri, 22 Feb 2008 10:24:31 +0100 (CET)
Message-ID: <47BE94CE.3020802@codelutin.com>
Date: Fri, 22 Feb 2008 10:24:30 +0100
From: Gabriel Landais <landais@codelutin.com>
Organization: Code Lutin
User-Agent: Thunderbird 2.0.0.6 (X11/20071022)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Security filtering from external DB
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hello,
 we have chosen to use Lucene as the metadata database for a project. 
Everything works great, from indexing to multi-threading search.
 Also, we have chosen to split storage and security. It works great, 
except when we come to filtering.
 I have understood that Filter should set bits on documents that are ok, 
but it is not the way we want to do it.

 What our security service can give, is a Collection<String> 
corresponding to a Document field, let's say "uuid". This collection 
handles all documents user can read.
 So, is there a way to set an event on "this document match the query, 
does the filter keep this one in the list?". This way, we have not to 
get all "uuid" of all Lucene docs in our filter, that is really costy.

 We can filter Hits returned by search, but there should be a smarter 
way to do it, no?

 As summarizing this problem, got an idea :
 How to create a Filter for a field in Collection<String>?
 First, split Collection in Collection<Collection> with 
BooleanQuery.maxClauseCount items maximum in each collection.
 For each collection :
  create a BooleanQuery with a TermQuery for each String.
  perform a search with a HitCollector filling a BitSet
 Now we have BitSet of each Collection, perform a BitSet.or to get a 
final BitSet
 Build a Filter based on that BitSet, and use that Filter as parameter 
of each search

Of course, a cache system should be added, managed by security telling 
if Collection as changed, to rebuild the user Filter.

Is it a good idea?

 Thanks,

-- 
Gabriel <landais@codelutin.com>
http://www.codelutin.com
tel : 02 40 50 29 28 / fax : 09 59 92 29 28


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32727-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 22 09:43:37 2008
Return-Path: <java-user-return-32727-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19189 invoked from network); 22 Feb 2008 09:43:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Feb 2008 09:43:37 -0000
Received: (qmail 98835 invoked by uid 500); 22 Feb 2008 09:43:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98421 invoked by uid 500); 22 Feb 2008 09:43:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98410 invoked by uid 99); 22 Feb 2008 09:43:25 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Feb 2008 01:43:25 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ksmmlist@gmail.com designates 72.14.220.159 as permitted sender)
Received: from [72.14.220.159] (HELO fg-out-1718.google.com) (72.14.220.159)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Feb 2008 09:42:51 +0000
Received: by fg-out-1718.google.com with SMTP id d23so265805fga.27
        for <java-user@lucene.apache.org>; Fri, 22 Feb 2008 01:42:59 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:date:to:subject:from:organization:content-type:mime-version:content-transfer-encoding:message-id:user-agent;
        bh=YEtMAmq37SSQsSngIh2+K2PYZpSqTAubBx8FIfF/Pt4=;
        b=s8W57C2ThvyLfPb6Ql+XSbXsVmGw194S8b9MWBtVAQCQd9bHktpYjrSyXtsUvKW9qS/kGQniU3AblJv4o+uz+yOV8TZGxah1+X7HISqIgdCcVWfDNz8U2bMKqtdFrrAzxgP/OX6sVndymDpjFiSLDNMjMoZwbjqWW51EEs2flNo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=date:to:subject:from:organization:content-type:mime-version:content-transfer-encoding:message-id:user-agent;
        b=bYfpMM2Uwcs0WbgtVuHa6IsHTqvv8g0eYo6pdvDZU4jBCuFSc1J++/NOnXUn7Lu9nFINRObiagYsGGG0SxVqfyy0EM2+BTuWG3UM2rcwWjN8B4FOZPGTyNJsvcJu+Mnv0x68F2Y/516NNZdIujYVtFL0shwYAvg4gBt5SZ7FiUk=
Received: by 10.86.60.15 with SMTP id i15mr2575080fga.36.1203673379234;
        Fri, 22 Feb 2008 01:42:59 -0800 (PST)
Received: from sj-desktop ( [92.112.28.91])
        by mx.google.com with ESMTPS id d6sm1295181fga.9.2008.02.22.01.42.57
        (version=SSLv3 cipher=OTHER);
        Fri, 22 Feb 2008 01:42:58 -0800 (PST)
Date: Fri, 22 Feb 2008 11:42:54 +0200
To: "Lucene user list" <java-user@lucene.apache.org>
Subject: Transactions  in Lucene
From: "Sergey Kabashnyuk" <ksmmlist@gmail.com>
Organization: ksm
Content-Type: text/plain; format=flowed; delsp=yes; charset=utf-8
MIME-Version: 1.0
Content-Transfer-Encoding: 7bit
Message-ID: <op.t6w6lsk82ic4zu@sj-desktop>
User-Agent: Opera Mail/9.26 (Linux)
X-Virus-Checked: Checked by ClamAV on apache.org

Hi.
I have a question about transactions  in Lucene.

Lets say I have 1000 Documents and want to add all of them or none of  
them(if something happen) to the index.

What the best strategy to do it in multithreaded environment?

Sergey Kabashnyuk.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32728-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 22 12:37:02 2008
Return-Path: <java-user-return-32728-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78711 invoked from network); 22 Feb 2008 12:37:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Feb 2008 12:37:02 -0000
Received: (qmail 16379 invoked by uid 500); 22 Feb 2008 12:36:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16349 invoked by uid 500); 22 Feb 2008 12:36:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16337 invoked by uid 99); 22 Feb 2008 12:36:48 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Feb 2008 04:36:48 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ionathan@gmail.com designates 209.85.198.190 as permitted sender)
Received: from [209.85.198.190] (HELO rv-out-0910.google.com) (209.85.198.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Feb 2008 12:36:15 +0000
Received: by rv-out-0910.google.com with SMTP id k20so260889rvb.5
        for <java-user@lucene.apache.org>; Fri, 22 Feb 2008 04:36:23 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        bh=f6wvadDQLewYxiO1VhW3D8jNTtvLUGDNNeMDYoj+q5U=;
        b=Ldt3NDtaOFonuhDq1weoRMC/I7buStLXISETPaQgQrjoTr+8Lg6Cf6XgKS2BUFEuEmqWa6nBBEFx6umaD2YcrCXInPYwZ5uZ7SC3kbEhbD7e+Ao9+vOqLdr0VhjRIoVQGewzNIHLEEhVUwyNVgz18u9Xp0rBhre88LuIcaGJEKU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=IB2p2tyl+7MIGMW4L06McpU0t0948qEjF7bG2SzYdlpwasrSWChUiuPuIyUHBViR3gaYfWYbblhRTJM65JTk+s0NMP5Ojs7BS6+pZTs+UBe8dAL6B5HL+rL/DaIT6hFzwDulZ357PVQuc4iSehASgZCpKQhrg3+fCyQ5jAtPdaQ=
Received: by 10.141.71.8 with SMTP id y8mr7616767rvk.63.1203683783813;
        Fri, 22 Feb 2008 04:36:23 -0800 (PST)
Received: by 10.141.175.16 with HTTP; Fri, 22 Feb 2008 04:36:23 -0800 (PST)
Message-ID: <6dd2bfeb0802220436r78b37e07j29ee136814d8b175@mail.gmail.com>
Date: Fri, 22 Feb 2008 10:36:23 -0200
From: "Jonathan Ariel" <ionathan@gmail.com>
To: java-user@lucene.apache.org
Subject: MoreLikeThis jar doesn't contain classes
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_195_27581209.1203683783820"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_195_27581209.1203683783820
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi,
I've downloaded Lucene 2.3.0 binaries and in the contrib folder I can see
the Similarity package, but inside the Jar there are no classes!
Downloading the sources I ran into the same issue.

Am I doing something wrong? Where should I get the MoreLikeThis classes
from?

Thanks!

Jonathan

------=_Part_195_27581209.1203683783820--

From java-user-return-32729-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 22 12:45:04 2008
Return-Path: <java-user-return-32729-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81400 invoked from network); 22 Feb 2008 12:45:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Feb 2008 12:45:04 -0000
Received: (qmail 26487 invoked by uid 500); 22 Feb 2008 12:44:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25702 invoked by uid 500); 22 Feb 2008 12:44:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25685 invoked by uid 99); 22 Feb 2008 12:44:53 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Feb 2008 04:44:53 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [64.233.178.242] (HELO hs-out-0708.google.com) (64.233.178.242)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Feb 2008 12:44:20 +0000
Received: by hs-out-0708.google.com with SMTP id 54so403027hsz.5
        for <java-user@lucene.apache.org>; Fri, 22 Feb 2008 04:44:27 -0800 (PST)
Received: by 10.100.138.4 with SMTP id l4mr22724372and.110.1203684267206;
        Fri, 22 Feb 2008 04:44:27 -0800 (PST)
Received: by 10.100.154.5 with HTTP; Fri, 22 Feb 2008 04:44:27 -0800 (PST)
Message-ID: <9ac0c6aa0802220444i99eef1dy405def2fca6d85f0@mail.gmail.com>
Date: Fri, 22 Feb 2008 07:44:27 -0500
From: "Michael McCandless" <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Subject: Re: Transactions in Lucene
In-Reply-To: <op.t6w6lsk82ic4zu@sj-desktop>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <op.t6w6lsk82ic4zu@sj-desktop>
X-Virus-Checked: Checked by ClamAV on apache.org

You should open the IndexWriter with autoCommit=false, then make
changes.  During this time, any reader that opens the index will not
see any changes you are making.

Then, you can call close() to commit the changes to the index, or
abort() to rollback the index to the starting state (when the writer
was opened).

Note that in 3.0, IndexWriter will be hardwired to autoCommit=false
(in trunk those ctors taking autoCommit are deprecated) and a new
commit() method can be used to periodically commit without closing if
you want to.

Mike

Sergey Kabashnyuk <ksmmlist@gmail.com> wrote:
> Hi.
>  I have a question about transactions  in Lucene.
>
>  Lets say I have 1000 Documents and want to add all of them or none of
>  them(if something happen) to the index.
>
>  What the best strategy to do it in multithreaded environment?
>
>  Sergey Kabashnyuk.
>
>  ---------------------------------------------------------------------
>  To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>  For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32730-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 22 12:56:23 2008
Return-Path: <java-user-return-32730-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86540 invoked from network); 22 Feb 2008 12:56:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Feb 2008 12:56:23 -0000
Received: (qmail 46537 invoked by uid 500); 22 Feb 2008 12:56:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46512 invoked by uid 500); 22 Feb 2008 12:56:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46501 invoked by uid 99); 22 Feb 2008 12:56:11 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Feb 2008 04:56:11 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [217.12.10.218] (HELO web26007.mail.ukl.yahoo.com) (217.12.10.218)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 22 Feb 2008 12:55:25 +0000
Received: (qmail 56729 invoked by uid 60001); 22 Feb 2008 12:55:44 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=Vsik9ytjtp4eNJx/lmWJxaW4/W+q8Lf6AN8By7rPDtfg6zMkXnnw/JDzbTHA6wKpgxU57vx02/NOgEfz7FZ2/wydS7O8QHzBefFX40ApyRJcPFYABn+GYVeTyJcjLHL6itMyfUz+2teNT/OGUNj43d8yQYioCWNnZOAQNhlVCOo=;
X-YMail-OSG: hRW9jjIVM1l4415e3qdU3G.qYpMor0bKMXHKKrEzo26nek4CBT_5rt8HNVl06aJxE_B9K6nY9a458wUN_lxAPhCziZQPEK1hmQ--
Received: from [193.36.230.96] by web26007.mail.ukl.yahoo.com via HTTP; Fri, 22 Feb 2008 12:55:43 GMT
X-Mailer: YahooMailRC/902.33 YahooMailWebService/0.7.162
Date: Fri, 22 Feb 2008 12:55:43 +0000 (GMT)
From: mark harwood <markharw00d@yahoo.co.uk>
Subject: Re: MoreLikeThis jar doesn't contain classes
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
Message-ID: <117675.44482.qm@web26007.mail.ukl.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Looks like an issue with the build process. =0A=0AMoreLikeThis moved to the=
 contrib\queries area some time ago. =0A=0AThanks for the report - we'll ne=
ed to fix this.=0A=0A----- Original Message ----=0AFrom: Jonathan Ariel <io=
nathan@gmail.com>=0ATo: java-user@lucene.apache.org=0ASent: Friday, 22 Febr=
uary, 2008 12:36:23 PM=0ASubject: MoreLikeThis jar doesn't contain classes=
=0A=0AHi,=0AI've downloaded Lucene 2.3.0 binaries and in the contrib folder=
 I can see=0Athe Similarity package, but inside the Jar there are no classe=
s!=0ADownloading the sources I ran into the same issue.=0A=0AAm I doing som=
ething wrong? Where should I get the MoreLikeThis classes=0Afrom?=0A=0AThan=
ks!=0A=0AJonathan=0A=0A=0A=0A=0A=0A      __________________________________=
________________________=0ASent from Yahoo! Mail.=0AA Smarter Inbox. http:/=
/uk.docs.yahoo.com/nowyoucan.html

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32731-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 22 13:03:09 2008
Return-Path: <java-user-return-32731-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89147 invoked from network); 22 Feb 2008 13:03:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Feb 2008 13:03:08 -0000
Received: (qmail 56889 invoked by uid 500); 22 Feb 2008 13:02:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56859 invoked by uid 500); 22 Feb 2008 13:02:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56839 invoked by uid 99); 22 Feb 2008 13:02:56 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Feb 2008 05:02:56 -0800
X-ASF-Spam-Status: No, hits=3.2 required=10.0
	tests=HTML_MESSAGE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [192.115.188.199] (HELO out4.bezeqint.net) (192.115.188.199)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Feb 2008 13:02:22 +0000
Received: from your0548c161e1 (bzq-79-180-18-27.red.bezeqint.net [79.180.18.27])
	by out4.bezeqint.net (Postfix) with ESMTPA id 9215AB0859B
	for <java-user@lucene.apache.org>; Fri, 22 Feb 2008 14:57:18 +0200 (IST)
From: "Itamar Syn-Hershko" <itamar@divrei-tora.com>
To: <java-user@lucene.apache.org>
Subject: Rebuilding Document from index?
Date: Fri, 22 Feb 2008 15:02:15 +0200
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_000C_01C87563.EA2A9350"
X-Mailer: Microsoft Office Outlook, Build 11.0.5510
thread-index: Ach1UyWzSG1sm9G9TYexbWZz/jvC7Q==
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3198
Message-Id: <20080222125718.9215AB0859B@out4.bezeqint.net>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_NextPart_000_000C_01C87563.EA2A9350
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit

Hi,
 
Is it possible to re-create a document from an index, if its not stored?
What I'm looking for is a way to have a text document with the text AFTER it
was analyzed, so I can see how my analyzer handles certain cases. So that
means I don't care if I will not get the original document. I want to see
the document as the index knows it.
 
Thanks in advance,
 
Itamar.

------=_NextPart_000_000C_01C87563.EA2A9350--



From java-user-return-32732-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 22 13:23:02 2008
Return-Path: <java-user-return-32732-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1368 invoked from network); 22 Feb 2008 13:23:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Feb 2008 13:23:02 -0000
Received: (qmail 91873 invoked by uid 500); 22 Feb 2008 13:22:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91844 invoked by uid 500); 22 Feb 2008 13:22:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 91833 invoked by uid 99); 22 Feb 2008 13:22:50 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Feb 2008 05:22:50 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of spring@gmx.eu designates 213.165.64.20 as permitted sender)
Received: from [213.165.64.20] (HELO mail.gmx.net) (213.165.64.20)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 22 Feb 2008 13:22:15 +0000
Received: (qmail invoked by alias); 22 Feb 2008 13:22:22 -0000
Received: from e178097142.adsl.alicedsl.de (EHLO msrvcn04) [85.178.97.142]
  by mail.gmx.net (mp040) with SMTP; 22 Feb 2008 14:22:22 +0100
X-Authenticated: #2635966
X-Provags-ID: V01U2FsdGVkX195HEgmRRB5YF/tNdxCkHpv9S+NkP0CVoETKlR1UH
	B79ScnI5y9rVPl
From: <spring@gmx.eu>
To: <java-user@lucene.apache.org>
References: <20080222125718.9215AB0859B@out4.bezeqint.net>
Subject: RE: Rebuilding Document from index?
Date: Fri, 22 Feb 2008 14:22:25 +0100
Message-ID: <1B6734D9502D4DA08524DCDDA7F9D2CF@msrvcn04>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
Thread-Index: Ach1UyWzSG1sm9G9TYexbWZz/jvC7QAAqFNA
In-Reply-To: <20080222125718.9215AB0859B@out4.bezeqint.net>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.3790.4133
X-Y-GMX-Trusted: 0
X-Virus-Checked: Checked by ClamAV on apache.org

You can use Luke to rebuild the document. It will show you the terms of the
analyzed document, not the original content.
And this is what you want, if I understood you correctly. 

> -----Original Message-----
> From: Itamar Syn-Hershko [mailto:itamar@divrei-tora.com] 
> Sent: Freitag, 22. Februar 2008 14:02
> To: java-user@lucene.apache.org
> Subject: Rebuilding Document from index?
> 
> Hi,
>  
> Is it possible to re-create a document from an index, if its 
> not stored?
> What I'm looking for is a way to have a text document with 
> the text AFTER it
> was analyzed, so I can see how my analyzer handles certain 
> cases. So that
> means I don't care if I will not get the original document. I 
> want to see
> the document as the index knows it.
>  
> Thanks in advance,
>  
> Itamar.
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32733-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 22 13:30:24 2008
Return-Path: <java-user-return-32733-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5928 invoked from network); 22 Feb 2008 13:30:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Feb 2008 13:30:24 -0000
Received: (qmail 12144 invoked by uid 500); 22 Feb 2008 13:30:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12122 invoked by uid 500); 22 Feb 2008 13:30:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12111 invoked by uid 99); 22 Feb 2008 13:30:12 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Feb 2008 05:30:12 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [192.115.188.198] (HELO out3.bezeqint.net) (192.115.188.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Feb 2008 13:29:26 +0000
Received: from your0548c161e1 (bzq-79-180-18-27.red.bezeqint.net [79.180.18.27])
	by out3.bezeqint.net (Postfix) with ESMTPA id 8C4045E0412
	for <java-user@lucene.apache.org>; Fri, 22 Feb 2008 10:28:29 -0500 (EST)
From: "Itamar Syn-Hershko" <itamar@divrei-tora.com>
To: <java-user@lucene.apache.org>
Subject: RE: Rebuilding Document from index?
Date: Fri, 22 Feb 2008 15:29:31 +0200
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook, Build 11.0.5510
In-Reply-To: <1B6734D9502D4DA08524DCDDA7F9D2CF@msrvcn04>
thread-index: Ach1UyWzSG1sm9G9TYexbWZz/jvC7QAAqFNAAABFS1A=
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3198
Message-Id: <20080222152829.8C4045E0412@out3.bezeqint.net>
X-Virus-Checked: Checked by ClamAV on apache.org

Yes, that's exactly what I wanted. I used Luke for a while but never noticed
the Reconstruct feature, thanks.

Itamar. 

-----Original Message-----
From: spring@gmx.eu [mailto:spring@gmx.eu] 
Sent: Friday, February 22, 2008 3:22 PM
To: java-user@lucene.apache.org
Subject: RE: Rebuilding Document from index?

You can use Luke to rebuild the document. It will show you the terms of the
analyzed document, not the original content.
And this is what you want, if I understood you correctly. 

> -----Original Message-----
> From: Itamar Syn-Hershko [mailto:itamar@divrei-tora.com]
> Sent: Freitag, 22. Februar 2008 14:02
> To: java-user@lucene.apache.org
> Subject: Rebuilding Document from index?
> 
> Hi,
>  
> Is it possible to re-create a document from an index, if its not 
> stored?
> What I'm looking for is a way to have a text document with the text 
> AFTER it was analyzed, so I can see how my analyzer handles certain 
> cases. So that means I don't care if I will not get the original 
> document. I want to see the document as the index knows it.
>  
> Thanks in advance,
>  
> Itamar.
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32734-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 22 13:53:52 2008
Return-Path: <java-user-return-32734-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19479 invoked from network); 22 Feb 2008 13:53:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Feb 2008 13:53:51 -0000
Received: (qmail 48157 invoked by uid 500); 22 Feb 2008 13:53:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48009 invoked by uid 500); 22 Feb 2008 13:53:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47998 invoked by uid 99); 22 Feb 2008 13:53:40 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Feb 2008 05:53:40 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ksmmlist@gmail.com designates 72.14.214.233 as permitted sender)
Received: from [72.14.214.233] (HELO hu-out-0506.google.com) (72.14.214.233)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Feb 2008 13:53:04 +0000
Received: by hu-out-0506.google.com with SMTP id 27so530352hub.15
        for <java-user@lucene.apache.org>; Fri, 22 Feb 2008 05:53:12 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:date:to:subject:from:organization:content-type:mime-version:references:content-transfer-encoding:message-id:in-reply-to:user-agent;
        bh=kcDLy9TVc7wGYI07noFWHSTg7iKJw51q+jA24qvU2c4=;
        b=uX/PIkBgHBMEMPJ0CE7IcE1PUDR+/BQh0f38IX/rCCU3HeaIr9798yF5ESF2e/qZR2f+FcocetOBksxzUlZ+TNwhT2Lh20OylZKISA60bQWJKsThj2RuYnjPr9T1Ig6vFuwadYwYgIXk5iZa5rmYGaGmYIVtY0RSfhGE948bNhc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=date:to:subject:from:organization:content-type:mime-version:references:content-transfer-encoding:message-id:in-reply-to:user-agent;
        b=fBV6y05Z/j0SQWfUOzYgURhUc9ptPKlkI0QY6OdlcWUPqgAor/jc4Cbm0+ZSWguUIbf/ZzL8Nb/C4AA+iKVLkzoImtf8lor4wU/4jF/vuc8hVsfBqfLoiIV4BmpyKtuhklYfgRwmtZ5fD2243d8jL7iJ+xBYEZVTrHlPD8Q1M6U=
Received: by 10.82.113.6 with SMTP id l6mr21192984buc.22.1203688392075;
        Fri, 22 Feb 2008 05:53:12 -0800 (PST)
Received: from sj-desktop ( [92.112.28.91])
        by mx.google.com with ESMTPS id 3sm1631009fge.7.2008.02.22.05.53.10
        (version=SSLv3 cipher=OTHER);
        Fri, 22 Feb 2008 05:53:11 -0800 (PST)
Date: Fri, 22 Feb 2008 15:53:09 +0200
To: java-user@lucene.apache.org
Subject: Re: Transactions in Lucene
From: "Sergey Kabashnyuk" <ksmmlist@gmail.com>
Organization: ksm
Content-Type: text/plain; format=flowed; delsp=yes; charset=utf-8
MIME-Version: 1.0
References: <op.t6w6lsk82ic4zu@sj-desktop> <9ac0c6aa0802220444i99eef1dy405def2fca6d85f0@mail.gmail.com>
Content-Transfer-Encoding: 8bit
Message-ID: <op.t6xh6vln2ic4zu@sj-desktop>
In-Reply-To: <9ac0c6aa0802220444i99eef1dy405def2fca6d85f0@mail.gmail.com>
User-Agent: Opera Mail/9.26 (Linux)
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks Mike for you replay.

What about multithreading? If in one transaction can make both
adding and deleting documents and in the same time can be more then
one open transaction. Should each thread use it personal Index and
after commiting transaction somehow it merges or all threads must use one  
index?

Sergey Kabashnyuk.


> You should open the IndexWriter with autoCommit=false, then make
> changes.  During this time, any reader that opens the index will not
> see any changes you are making.
>
> Then, you can call close() to commit the changes to the index, or
> abort() to rollback the index to the starting state (when the writer
> was opened).
>
> Note that in 3.0, IndexWriter will be hardwired to autoCommit=false
> (in trunk those ctors taking autoCommit are deprecated) and a new
> commit() method can be used to periodically commit without closing if
> you want to.
>
> Mike
>
> Sergey Kabashnyuk <ksmmlist@gmail.com> wrote:
>> Hi.
>>  I have a question about transactions  in Lucene.
>>
>>  Lets say I have 1000 Documents and want to add all of them or none of
>>  them(if something happen) to the index.
>>
>>  What the best strategy to do it in multithreaded environment?
>>
>>  Sergey Kabashnyuk.
>>
>>  ---------------------------------------------------------------------
>>  To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>  For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>



-- 
 M2,    Opera:  
http://www.opera.com/mail/

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32735-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 22 13:55:49 2008
Return-Path: <java-user-return-32735-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20185 invoked from network); 22 Feb 2008 13:55:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Feb 2008 13:55:49 -0000
Received: (qmail 53288 invoked by uid 500); 22 Feb 2008 13:55:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53258 invoked by uid 500); 22 Feb 2008 13:55:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53247 invoked by uid 99); 22 Feb 2008 13:55:37 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Feb 2008 05:55:37 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [130.225.24.87] (HELO luna.statsbiblioteket.dk) (130.225.24.87)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Feb 2008 13:54:52 +0000
Received: from [172.18.249.244] (PC990.sb.statsbiblioteket.dk [172.18.249.244])
 by luna.statsbiblioteket.dk
 (iPlanet Messaging Server 5.2 HotFix 1.16 (built May 14 2003))
 with ESMTP id <0JWN00JMM8016A@luna.statsbiblioteket.dk> for
 java-user@lucene.apache.org; Fri, 22 Feb 2008 14:55:13 +0100 (MET)
Date: Fri, 22 Feb 2008 14:55:13 +0100
From: Toke Eskildsen <te@statsbiblioteket.dk>
Subject: Re: Multiple searchers (Was: CachingWrapperFilter: why cache per
	IndexReader?)
In-reply-to: <359a92830801170724l5ed52b77ge860f36e6196179c@mail.gmail.com>
To: java-user@lucene.apache.org
Reply-to: te@statsbiblioteket.dk
Message-id: <1203688513.3578.14.camel@PC990.sb.statsbiblioteket.dk>
Organization: Statsbiblioteket
MIME-version: 1.0
X-Mailer: Evolution 2.8.3 (2.8.3-2.fc6)
Content-type: text/plain
Content-transfer-encoding: 7BIT
References: <1200565916.9514.116.camel@PC990.sb.statsbiblioteket.dk>
 <359a92830801170724l5ed52b77ge860f36e6196179c@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

On Thu, 2008-01-17 at 10:24 -0500, Erick Erickson wrote:
> There's a section on the Lucene Wiki for real world
> experiences etc. After you are satisfied with your
> tests, it'd be great if you could add your measurements
> to the Wiki!

Could you please point me to the page? I am unable to find it.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32736-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 22 14:46:54 2008
Return-Path: <java-user-return-32736-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42239 invoked from network); 22 Feb 2008 14:46:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Feb 2008 14:46:54 -0000
Received: (qmail 32267 invoked by uid 500); 22 Feb 2008 14:46:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32084 invoked by uid 500); 22 Feb 2008 14:46:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32073 invoked by uid 99); 22 Feb 2008 14:46:42 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Feb 2008 06:46:42 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Feb 2008 14:46:08 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1JSZAH-0006VT-8a
	for java-user@lucene.apache.org; Fri, 22 Feb 2008 06:46:17 -0800
Message-ID: <15634202.post@talk.nabble.com>
Date: Fri, 22 Feb 2008 06:46:17 -0800 (PST)
From: JensBurkhardt <jensburkhardt@web.de>
To: java-user@lucene.apache.org
Subject: Re: Boost Single Values in Field
In-Reply-To: <4536A395-6A12-4838-A34C-7A0A720972C8@apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: jensburkhardt@web.de
References: <15591373.post@talk.nabble.com> <DD941C48-4035-4A0D-8581-BA198327F657@apache.org> <15608110.post@talk.nabble.com> <4536A395-6A12-4838-A34C-7A0A720972C8@apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org


Okay, Thanks a lot for answering my questions. I'll give the split string
thing a try :-) .

Best Regards

Jens Burkhardt



Grant Ingersoll-6 wrote:
> 
> 
> On Feb 21, 2008, at 6:53 AM, JensBurkhardt wrote:
>>
>> Hello again,
>>
>> Thanks for your immediate response. As i understand, the only way to  
>> boost
>> the values is on query side, right?
>> The Problem is, that i need to boost field values. Okay, some more  
>> details:
>> I need it for a library. The string in the field i'm working with is
>> something like "Title author year_of_publication some_catchwords"  
>> and so on.
>> It's like on big String.
>> This field is called "Free-Text" so the query can something like  
>> "author AND
>> title".
>> And that's the point, the order of the search terms is arbitrary so  
>> i don't
>> know what i do boost in the field. If i want to boost the title i  
>> need to
>> boost the specific value in the Free-Text field.
>> If I'm wrong and i can handle this problem with using payload, could  
>> someone
>> please explain it cause i don't understand how to use payload on  
>> index side.
>>
> 
> I would split the string (either ahead of time or by writing your own  
> TeeTokenFilter and SinkTokenizer) such that you can separate out your  
> one big String into two smaller fields.  Other option, is to use  
> payloads
> 
> Token.setPayload() is how you set payloads.  There are a couple  
> examples in 2.3 in the contrib/analysis package of how to add payloads  
> for specific things, you would just need your own that recognized your  
> structure.
> 
> Also have a look at Michael B's excellent ApacheCon slides:
> http://people.apache.org/~buschmi/apachecon/AdvancedIndexingLuceneAtlanta07.ppt
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/Boost-Single-Values-in-Field-tp15591373p15634202.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32737-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 22 14:59:48 2008
Return-Path: <java-user-return-32737-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47311 invoked from network); 22 Feb 2008 14:59:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Feb 2008 14:59:48 -0000
Received: (qmail 57930 invoked by uid 500); 22 Feb 2008 14:59:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57905 invoked by uid 500); 22 Feb 2008 14:59:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57894 invoked by uid 99); 22 Feb 2008 14:59:36 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Feb 2008 06:59:35 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [66.249.82.235] (HELO wx-out-0506.google.com) (66.249.82.235)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Feb 2008 14:59:00 +0000
Received: by wx-out-0506.google.com with SMTP id i28so746413wxd.20
        for <java-user@lucene.apache.org>; Fri, 22 Feb 2008 06:58:57 -0800 (PST)
Received: by 10.100.124.6 with SMTP id w6mr31086anc.94.1203692337500;
        Fri, 22 Feb 2008 06:58:57 -0800 (PST)
Received: by 10.100.154.5 with HTTP; Fri, 22 Feb 2008 06:58:57 -0800 (PST)
Message-ID: <9ac0c6aa0802220658r27da5b7eo9efa883089cc6b56@mail.gmail.com>
Date: Fri, 22 Feb 2008 09:58:57 -0500
From: "Michael McCandless" <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Subject: Re: Transactions in Lucene
In-Reply-To: <op.t6xh6vln2ic4zu@sj-desktop>
MIME-Version: 1.0
Content-Type: text/plain; charset=KOI8-R
Content-Transfer-Encoding: base64
Content-Disposition: inline
References: <op.t6w6lsk82ic4zu@sj-desktop>
	 <9ac0c6aa0802220444i99eef1dy405def2fca6d85f0@mail.gmail.com>
	 <op.t6xh6vln2ic4zu@sj-desktop>
X-Virus-Checked: Checked by ClamAV on apache.org

THVjZW5lIG9ubHkgYWxsb3dzIGZvciBvbmUgb3BlbiB0cmFuc2FjdGlvbiBhdCBhIHRpbWUgcGVy
IGluZGV4IChJbmRleFdyaXRlcikuCgpTbyBpZiB5b3UgaGF2ZSBtdWx0aXBsZSB0aHJlYWRzLCBh
bmQgZWFjaCBvZiB0aGVtIGlzIG1ha2luZyBjaGFuZ2VzLAphbGwgdGhvc2UgY2hhbmdlcyB3aWxs
IGZhbGwgdW5kZXIgb25lIHRyYW5zYWN0aW9uLCBjb250cm9sbGVkIGJ5IHRoZQpzaW5nbGUgd3Jp
dGVyIHRoZSB0aHJlYWRzIGFyZSBzaGFyaW5nLgoKSWYgeW91IHJlYWxseSB3YW50IHNlcGFyYXRl
IHRyYW5zYWN0aW9ucywgSSB0aGluayB5b3UgaGF2ZSB0byBkbyB0aGlzCmFnYWluc3Qgc2VwYXJh
dGUgaW5kaWNlcywgYW5kIHRoZW4gbWVyZ2UgdGhlIGluZGljZXMgdG9nZXRoZXIKKEluZGV4V3Jp
dGVyLmFkZEluZGV4ZXMpIGludG8gYSBzaW5nbGUgb25lLCBvciwgbGVhdmUgdGhlbSBzZXBhcmF0
ZQphbmQgdXNlIG11bHRpcGxlIHNlYXJjaGVycyBvdmVyIHRoZW0uCgpNaWtlCgpTZXJnZXkgS2Fi
YXNobnl1ayA8a3NtbWxpc3RAZ21haWwuY29tPiB3cm90ZToKPiBUaGFua3MgTWlrZSBmb3IgeW91
IHJlcGxheS4KPgo+ICBXaGF0IGFib3V0IG11bHRpdGhyZWFkaW5nPyBJZiBpbiBvbmUgdHJhbnNh
Y3Rpb24gY2FuIG1ha2UgYm90aAo+ICBhZGRpbmcgYW5kIGRlbGV0aW5nIGRvY3VtZW50cyBhbmQg
aW4gdGhlIHNhbWUgdGltZSBjYW4gYmUgbW9yZSB0aGVuCj4gIG9uZSBvcGVuIHRyYW5zYWN0aW9u
LiBTaG91bGQgZWFjaCB0aHJlYWQgdXNlIGl0IHBlcnNvbmFsIEluZGV4IGFuZAo+ICBhZnRlciBj
b21taXRpbmcgdHJhbnNhY3Rpb24gc29tZWhvdyBpdCBtZXJnZXMgb3IgYWxsIHRocmVhZHMgbXVz
dCB1c2Ugb25lCj4gIGluZGV4Pwo+Cj4gIFNlcmdleSBLYWJhc2hueXVrLgo+Cj4KPiAgPiBZb3Ug
c2hvdWxkIG9wZW4gdGhlIEluZGV4V3JpdGVyIHdpdGggYXV0b0NvbW1pdD1mYWxzZSwgdGhlbiBt
YWtlCj4gID4gY2hhbmdlcy4gIER1cmluZyB0aGlzIHRpbWUsIGFueSByZWFkZXIgdGhhdCBvcGVu
cyB0aGUgaW5kZXggd2lsbCBub3QKPiAgPiBzZWUgYW55IGNoYW5nZXMgeW91IGFyZSBtYWtpbmcu
Cj4gID4KPiAgPiBUaGVuLCB5b3UgY2FuIGNhbGwgY2xvc2UoKSB0byBjb21taXQgdGhlIGNoYW5n
ZXMgdG8gdGhlIGluZGV4LCBvcgo+ICA+IGFib3J0KCkgdG8gcm9sbGJhY2sgdGhlIGluZGV4IHRv
IHRoZSBzdGFydGluZyBzdGF0ZSAod2hlbiB0aGUgd3JpdGVyCj4gID4gd2FzIG9wZW5lZCkuCj4g
ID4KPiAgPiBOb3RlIHRoYXQgaW4gMy4wLCBJbmRleFdyaXRlciB3aWxsIGJlIGhhcmR3aXJlZCB0
byBhdXRvQ29tbWl0PWZhbHNlCj4gID4gKGluIHRydW5rIHRob3NlIGN0b3JzIHRha2luZyBhdXRv
Q29tbWl0IGFyZSBkZXByZWNhdGVkKSBhbmQgYSBuZXcKPiAgPiBjb21taXQoKSBtZXRob2QgY2Fu
IGJlIHVzZWQgdG8gcGVyaW9kaWNhbGx5IGNvbW1pdCB3aXRob3V0IGNsb3NpbmcgaWYKPiAgPiB5
b3Ugd2FudCB0by4KPiAgPgo+ICA+IE1pa2UKPiAgPgo+ICA+IFNlcmdleSBLYWJhc2hueXVrIDxr
c21tbGlzdEBnbWFpbC5jb20+IHdyb3RlOgo+ICA+PiBIaS4KPiAgPj4gIEkgaGF2ZSBhIHF1ZXN0
aW9uIGFib3V0IHRyYW5zYWN0aW9ucyAgaW4gTHVjZW5lLgo+ICA+Pgo+ICA+PiAgTGV0cyBzYXkg
SSBoYXZlIDEwMDAgRG9jdW1lbnRzIGFuZCB3YW50IHRvIGFkZCBhbGwgb2YgdGhlbSBvciBub25l
IG9mCj4gID4+ICB0aGVtKGlmIHNvbWV0aGluZyBoYXBwZW4pIHRvIHRoZSBpbmRleC4KPiAgPj4K
PiAgPj4gIFdoYXQgdGhlIGJlc3Qgc3RyYXRlZ3kgdG8gZG8gaXQgaW4gbXVsdGl0aHJlYWRlZCBl
bnZpcm9ubWVudD8KPiAgPj4KPiAgPj4gIFNlcmdleSBLYWJhc2hueXVrLgo+ICA+Pgo+ICA+PiAg
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tCj4gID4+ICBUbyB1bnN1YnNjcmliZSwgZS1tYWlsOiBqYXZhLXVzZXItdW5z
dWJzY3JpYmVAbHVjZW5lLmFwYWNoZS5vcmcKPiAgPj4gIEZvciBhZGRpdGlvbmFsIGNvbW1hbmRz
LCBlLW1haWw6IGphdmEtdXNlci1oZWxwQGx1Y2VuZS5hcGFjaGUub3JnCj4gID4+Cj4gID4+Cj4g
ID4KPiAgPiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0KPiAgPiBUbyB1bnN1YnNjcmliZSwgZS1tYWlsOiBqYXZhLXVz
ZXItdW5zdWJzY3JpYmVAbHVjZW5lLmFwYWNoZS5vcmcKPiAgPiBGb3IgYWRkaXRpb25hbCBjb21t
YW5kcywgZS1tYWlsOiBqYXZhLXVzZXItaGVscEBsdWNlbmUuYXBhY2hlLm9yZwo+ICA+Cj4KPgo+
Cj4KPiAgLS0KPiAg79TQ0sHXzMXOzyBNMiwg0sXXz8zAw8nPzs7PyiDQz97Uz9fPyiDQ0s/H0sHN
zc/KIE9wZXJhOgo+ICBodHRwOi8vd3d3Lm9wZXJhLmNvbS9tYWlsLwo+Cj4gIC0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LQo+ICBUbyB1bnN1YnNjcmliZSwgZS1tYWlsOiBqYXZhLXVzZXItdW5zdWJzY3JpYmVAbHVjZW5l
LmFwYWNoZS5vcmcKPiAgRm9yIGFkZGl0aW9uYWwgY29tbWFuZHMsIGUtbWFpbDogamF2YS11c2Vy
LWhlbHBAbHVjZW5lLmFwYWNoZS5vcmcKPgo+Cg==


From java-user-return-32738-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 22 17:25:30 2008
Return-Path: <java-user-return-32738-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91816 invoked from network); 22 Feb 2008 17:25:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Feb 2008 17:25:29 -0000
Received: (qmail 57864 invoked by uid 500); 22 Feb 2008 17:25:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57839 invoked by uid 500); 22 Feb 2008 17:25:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57828 invoked by uid 99); 22 Feb 2008 17:25:17 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Feb 2008 09:25:17 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ionathan@gmail.com designates 209.85.146.183 as permitted sender)
Received: from [209.85.146.183] (HELO wa-out-1112.google.com) (209.85.146.183)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Feb 2008 17:24:44 +0000
Received: by wa-out-1112.google.com with SMTP id j40so546823wah.11
        for <java-user@lucene.apache.org>; Fri, 22 Feb 2008 09:24:53 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        bh=QTYtRKTMfDxntJM/QQCD6dqHhDkTUcqKZa0xQIjijr4=;
        b=C/VZTdMjMKY1JDBZFhJ0o6TFdW05bsIXJTY3ogrv7dJ6Fz7JO9xJlDRHvXNMg/qXi1vA8/XycVacBK8buCDBTem2ie9WLT5YgXlaokS1dwuQ99b2wWXKoA21CNWzOp0rMqKKXhSdQmJNAlL4sK2+EhP4aFwcAWfeYkr7KuNTqYQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=tXf6OGmN3HD9jKHm9qhBDvIjpViAFxdPiry3BWEVYU/sLGEM8VlyrkEqP4inf/zJInqvvHq1iwmIRiAeGoPcCmkT41VcK0/9fhLx1sJfUg39QIaap6CfTr6ZfM2OFviqE8j/+lpIZ20Jhd5+C/vw5y22QJJjMC7G1P1NtceeTXc=
Received: by 10.114.80.4 with SMTP id d4mr263449wab.44.1203701093483;
        Fri, 22 Feb 2008 09:24:53 -0800 (PST)
Received: by 10.115.91.4 with HTTP; Fri, 22 Feb 2008 09:24:53 -0800 (PST)
Message-ID: <6dd2bfeb0802220924sa7580e5tf9ad88a90e5d8fa8@mail.gmail.com>
Date: Fri, 22 Feb 2008 15:24:53 -0200
From: "Jonathan Ariel" <ionathan@gmail.com>
To: java-user@lucene.apache.org
Subject: MoreLikeThis queries
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_1960_20440942.1203701093473"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_1960_20440942.1203701093473
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi, I'm trying to use MoreLikeThis but I can't find how to make a
MoreLikeThis query that will return related documents given a document and
some conditions, like country field in the related documents should be 1,
etc.

Is there any documentation on how to do this kind of queries?

Thanks,


Jonathan

------=_Part_1960_20440942.1203701093473--

From java-user-return-32739-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 22 18:24:50 2008
Return-Path: <java-user-return-32739-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 18943 invoked from network); 22 Feb 2008 18:24:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Feb 2008 18:24:50 -0000
Received: (qmail 56521 invoked by uid 500); 22 Feb 2008 18:24:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56256 invoked by uid 500); 22 Feb 2008 18:24:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56245 invoked by uid 99); 22 Feb 2008 18:24:38 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Feb 2008 10:24:38 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of spring@gmx.eu designates 213.165.64.20 as permitted sender)
Received: from [213.165.64.20] (HELO mail.gmx.net) (213.165.64.20)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 22 Feb 2008 18:23:53 +0000
Received: (qmail invoked by alias); 22 Feb 2008 18:24:14 -0000
Received: from e178097142.adsl.alicedsl.de (EHLO msrvcn04) [85.178.97.142]
  by mail.gmx.net (mp052) with SMTP; 22 Feb 2008 19:24:14 +0100
X-Authenticated: #2635966
X-Provags-ID: V01U2FsdGVkX19gzBgJBRZgIDqkdwphpVZQ2gf5FuPBQkYoz+HPoU
	d4+9ymAHIgkRja
From: <spring@gmx.eu>
To: <java-user@lucene.apache.org>
Subject: Suffix search
Date: Fri, 22 Feb 2008 19:24:21 +0100
Message-ID: <9B516AA38A20424AB4EE7048F1A353EA@msrvcn04>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
Thread-Index: Ach1f/UnVksqN2uoS02KEjkmAjJHgQ==
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.3790.4133
X-Y-GMX-Trusted: 0
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

using WildcardQuery directly it is possible to search for suffixes like
"*foo".

The QueryParser throws an exception that this is not allowed in a
WildcardQuery.

Hm, now I'm confused ;)

How can I configure the QueryParser to allow a wildcard as first character?

Thank you


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32740-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 22 18:44:07 2008
Return-Path: <java-user-return-32740-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 27306 invoked from network); 22 Feb 2008 18:44:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Feb 2008 18:44:07 -0000
Received: (qmail 90882 invoked by uid 500); 22 Feb 2008 18:43:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90855 invoked by uid 500); 22 Feb 2008 18:43:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90844 invoked by uid 99); 22 Feb 2008 18:43:55 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Feb 2008 10:43:55 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.190.38.59] (HELO web50305.mail.re2.yahoo.com) (206.190.38.59)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 22 Feb 2008 18:43:20 +0000
Received: (qmail 2617 invoked by uid 60001); 22 Feb 2008 18:43:27 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=PIQx8xxQdhng8olgdClio94VedVvgCrGP9Sb+ohPK49IQ3H05b2rARVNpWNH4MDffCGGbRdAb9DW21i+4OUmI2C42xrg4n5BxvWlrs+/uw9NdlGl8ku/S2MyZmDIy9NsxlLWl3ERZbV+pWbj8ocwFnBceyRDDlJaRXcdXMCqueA=;
X-YMail-OSG: rfBobx4VM1msm4JAuHsyZy9XtCybd9ZdbjA.wvGtFyM1zmVfpUDtBkaMllNJX6BLxTvkipsDwWdZVicN.6hZQ85c63Nw3fbGlvabVGstoj2nz5Ap2EVpBWqGpLFRabb1TKks1vLb2JB.Pg--
Received: from [69.203.135.239] by web50305.mail.re2.yahoo.com via HTTP; Fri, 22 Feb 2008 10:43:27 PST
X-Mailer: YahooMailRC/902.33 YahooMailWebService/0.7.162
Date: Fri, 22 Feb 2008 10:43:27 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Suffix search
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Message-ID: <431899.2133.qm@web50305.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Two solutions come to mind:

1) See setAllowLeadingWildcard in QP.
2) Additionally ndex reversed tokens.

Otis 

--
Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch

----- Original Message ----
> From: "spring@gmx.eu" <spring@gmx.eu>
> To: java-user@lucene.apache.org
> Sent: Friday, February 22, 2008 1:24:21 PM
> Subject: Suffix search
> 
> Hi,
> 
> using WildcardQuery directly it is possible to search for suffixes like
> "*foo".
> 
> The QueryParser throws an exception that this is not allowed in a
> WildcardQuery.
> 
> Hm, now I'm confused ;)
> 
> How can I configure the QueryParser to allow a wildcard as first character?
> 
> Thank you
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32741-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 22 18:49:41 2008
Return-Path: <java-user-return-32741-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 28346 invoked from network); 22 Feb 2008 18:49:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Feb 2008 18:49:41 -0000
Received: (qmail 97060 invoked by uid 500); 22 Feb 2008 18:49:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96700 invoked by uid 500); 22 Feb 2008 18:49:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96689 invoked by uid 99); 22 Feb 2008 18:49:29 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Feb 2008 10:49:29 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [209.222.209.11] (HELO mirkwood.informatics.jax.org) (209.222.209.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Feb 2008 18:48:42 +0000
Received: from [127.0.0.1] (corona [209.222.209.245])
	by mirkwood.informatics.jax.org (8.13.8/8.13.8) with ESMTP id m1MImvaC010164
	for <java-user@lucene.apache.org>; Fri, 22 Feb 2008 13:48:58 -0500 (EST)
	(envelope-from mhall@informatics.jax.org)
Message-ID: <47BF18B9.5090404@informatics.jax.org>
Date: Fri, 22 Feb 2008 13:47:21 -0500
From: Matthew Hall <mhall@informatics.jax.org>
User-Agent: Thunderbird 1.5.0.14 (Windows/20071210)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Suffix search
References: <9B516AA38A20424AB4EE7048F1A353EA@msrvcn04>
In-Reply-To: <9B516AA38A20424AB4EE7048F1A353EA@msrvcn04>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-PMX-Version: 5.4.1.325704, Antispam-Engine: 2.6.0.325393, Antispam-Data: 2008.2.22.103325
X-PerlMx-Spam: Gauge=IIIIIII, Probability=7%, Report='LEO_OBFU_SUBJ_RE 0.1, BODY_SIZE_800_899 0, __CT 0, __CTE 0, __CT_TEXT_PLAIN 0, __HAS_MSGID 0, __MIME_TEXT_ONLY 0, __MIME_VERSION 0, __SANE_MSGID 0, __USER_AGENT 0, __pbl.spamhaus.org_TIMEOUT , __sbl.spamhaus.org_TIMEOUT '
X-Virus-Checked: Checked by ClamAV on apache.org

What you need is to set the allow leading wildcard flag.

qp.setAllowLeadingWildcard(true);

(where qp is a query parser instance)

That will let you do it, be warned however there is most definitely a 
significant performance degradation associated with doing this.

Matt

spring@gmx.eu wrote:
> Hi,
>
> using WildcardQuery directly it is possible to search for suffixes like
> "*foo".
>
> The QueryParser throws an exception that this is not allowed in a
> WildcardQuery.
>
> Hm, now I'm confused ;)
>
> How can I configure the QueryParser to allow a wildcard as first character?
>
> Thank you
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>   


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32742-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 22 18:59:57 2008
Return-Path: <java-user-return-32742-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 34180 invoked from network); 22 Feb 2008 18:59:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Feb 2008 18:59:57 -0000
Received: (qmail 11474 invoked by uid 500); 22 Feb 2008 18:59:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11441 invoked by uid 500); 22 Feb 2008 18:59:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11430 invoked by uid 99); 22 Feb 2008 18:59:45 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Feb 2008 10:59:45 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of spring@gmx.eu designates 213.165.64.20 as permitted sender)
Received: from [213.165.64.20] (HELO mail.gmx.net) (213.165.64.20)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 22 Feb 2008 18:58:59 +0000
Received: (qmail invoked by alias); 22 Feb 2008 18:59:19 -0000
Received: from e178097142.adsl.alicedsl.de (EHLO msrvcn04) [85.178.97.142]
  by mail.gmx.net (mp003) with SMTP; 22 Feb 2008 19:59:19 +0100
X-Authenticated: #2635966
X-Provags-ID: V01U2FsdGVkX19E7sQCUsJEqnEPFqKuf5TTYUMzjKg0y1QqIn2yO4
	iYS+nnsPcS2aLf
From: <spring@gmx.eu>
To: <java-user@lucene.apache.org>
References: <431899.2133.qm@web50305.mail.re2.yahoo.com>
Subject: RE: Suffix search
Date: Fri, 22 Feb 2008 19:59:27 +0100
Message-ID: <42CE857639BE4EC1BD91E316F892EC18@msrvcn04>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
Thread-Index: Ach1guWzyJk13e1SQBOWZlv/6fqRFgAATvHg
In-Reply-To: <431899.2133.qm@web50305.mail.re2.yahoo.com>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.3790.4133
X-Y-GMX-Trusted: 0
X-Virus-Checked: Checked by ClamAV on apache.org

> 1) See setAllowLeadingWildcard in QP.

Oh damned... late in the evening ;)

Hm, just tested it:

Searching for "format" works.
Searching for "form*" works.
Searching for "*ormat" works NOT.

Confused again ;)


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32743-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 22 19:04:40 2008
Return-Path: <java-user-return-32743-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37018 invoked from network); 22 Feb 2008 19:04:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Feb 2008 19:04:40 -0000
Received: (qmail 22811 invoked by uid 500); 22 Feb 2008 19:04:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22779 invoked by uid 500); 22 Feb 2008 19:04:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 22768 invoked by uid 99); 22 Feb 2008 19:04:28 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Feb 2008 11:04:28 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of spring@gmx.eu designates 213.165.64.20 as permitted sender)
Received: from [213.165.64.20] (HELO mail.gmx.net) (213.165.64.20)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 22 Feb 2008 19:03:42 +0000
Received: (qmail invoked by alias); 22 Feb 2008 19:04:03 -0000
Received: from e178097142.adsl.alicedsl.de (EHLO msrvcn04) [85.178.97.142]
  by mail.gmx.net (mp032) with SMTP; 22 Feb 2008 20:04:03 +0100
X-Authenticated: #2635966
X-Provags-ID: V01U2FsdGVkX1/CebYCHhvCNT5UvoYj0uHjv/fIIWcxuVScstxTML
	enEoWiBJFIWrF3
From: <spring@gmx.eu>
To: <java-user@lucene.apache.org>
References: <9B516AA38A20424AB4EE7048F1A353EA@msrvcn04> <47BF18B9.5090404@informatics.jax.org>
Subject: RE: Suffix search
Date: Fri, 22 Feb 2008 20:04:09 +0100
Message-ID: <9D2A4A21342549F3A1BAB4DD3536839B@msrvcn04>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
Thread-Index: Ach1g61gKRIO6I53TAi53K0iixySBAAAe3hA
In-Reply-To: <47BF18B9.5090404@informatics.jax.org>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.3790.4133
X-Y-GMX-Trusted: 0
X-Virus-Checked: Checked by ClamAV on apache.org

> That will let you do it, be warned however there is most definitely a 
> significant performance degradation associated with doing this.

Yes of course. Like in a relational database with a leading wildcard.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32744-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 22 19:55:06 2008
Return-Path: <java-user-return-32744-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72410 invoked from network); 22 Feb 2008 19:55:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Feb 2008 19:55:06 -0000
Received: (qmail 17804 invoked by uid 500); 22 Feb 2008 19:54:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17778 invoked by uid 500); 22 Feb 2008 19:54:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17767 invoked by uid 99); 22 Feb 2008 19:54:54 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Feb 2008 11:54:54 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Feb 2008 19:54:20 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1JSdyX-0002TA-5Y
	for java-user@lucene.apache.org; Fri, 22 Feb 2008 11:54:29 -0800
Message-ID: <15641369.post@talk.nabble.com>
Date: Fri, 22 Feb 2008 11:54:29 -0800 (PST)
From: sumittyagi <ping.sumit@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: How to get the doc ID from HITS
In-Reply-To: <355005590802212146l375a9dc3vdf1ffbe3f6dbd11b@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: ping.sumit@gmail.com
References: <15627959.post@talk.nabble.com> <355005590802212146l375a9dc3vdf1ffbe3f6dbd11b@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


thanks for replying
it may be a silly question but what do in the code

Hits hits = ...
int hitCount = hits.length();
for (int i=0;i<hitCount;i++) {
   int docId = hits.id[i] ;
   ...
}


what do i need to type for "....." in the 1st line, which is "Hits hits =
..."


Kent Fitch wrote:
> 
> Two ways to work through the Hits object getting docids are:
> 
> Hits hits = ...
> int hitCount = hits.length();
> for (int i=0;i<hitCount;i++) {
>    int docId = hits.id[i] ;
>    ...
> }
> 
> or
> 
> Iterator hitIterator = hits.iterator() ;
> while (hitIterator.hasNext()) {
>     Hit hit = (Hit) hitIterator.next() ;
>     int docId = hit.getId() ;
> }
> 
> but check out
> http://lucene.apache.org/java/2_3_0/api/org/apache/lucene/search/Hits.html
> as this is just code typed into a mail program!
> 
> Regards,
> 
> Kent
> 
> On Fri, Feb 22, 2008 at 4:17 PM, sumittyagi <ping.sumit@gmail.com> wrote:
>>
>>  hi, is there any way to retrieve the doc ids from HITS, Please advise me
>>  regarding this , i am new to lucene and programming.
>>  --
>>  View this message in context:
>> http://www.nabble.com/How-to-get-the-doc-ID-from-HITS-tp15627959p15627959.html
>>  Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>
>>
>>  ---------------------------------------------------------------------
>>  To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>  For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/How-to-get-the-doc-ID-from-HITS-tp15627959p15641369.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32745-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 22 20:06:19 2008
Return-Path: <java-user-return-32745-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99308 invoked from network); 22 Feb 2008 20:06:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Feb 2008 20:06:18 -0000
Received: (qmail 45938 invoked by uid 500); 22 Feb 2008 20:06:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45908 invoked by uid 500); 22 Feb 2008 20:06:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45897 invoked by uid 99); 22 Feb 2008 20:06:05 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Feb 2008 12:06:05 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Feb 2008 20:05:32 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1JSe9N-00035c-Ij
	for java-user@lucene.apache.org; Fri, 22 Feb 2008 12:05:41 -0800
Message-ID: <15641410.post@talk.nabble.com>
Date: Fri, 22 Feb 2008 12:05:41 -0800 (PST)
From: sumittyagi <ping.sumit@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: How to get the doc ID from HITS
In-Reply-To: <15641369.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: ping.sumit@gmail.com
References: <15627959.post@talk.nabble.com> <355005590802212146l375a9dc3vdf1ffbe3f6dbd11b@mail.gmail.com> <15641369.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org


here is my code, i am just starting, so having little bit of trouble in
starting, i am just trying to access some values and then want to print it
to get started..
here is my code


package db;
import java.io.*;
import java.util.*;
import java.lang.*;
import org.apache.lucene.search.Hits;
import org.apache.lucene.search.Hit;

public class comm{
	public static void main(String[] args)
	{
		System.out.println("hi");
	
	
Hits hits;
int hitCount = hits.length();
for (int i=0;i<hitCount;i++) {
   int docId = hits.id[i] ;
  
} 
}
}

and the errors i am getting are

C:\Documents and Settings\Sumit\Desktop>javac db/comm.java
db/comm.java:20: cannot find symbol
symbol  : variable id
location: class org.apache.lucene.search.Hits
   int docId = hits.id[i] ;
                   ^
1 error


any advice please....





sumittyagi wrote:
> 
> thanks for replying
> it may be a silly question but what do in the code
> 
> Hits hits = ...
> int hitCount = hits.length();
> for (int i=0;i<hitCount;i++) {
>    int docId = hits.id[i] ;
>    ...
> }
> 
> 
> what do i need to type for "....." in the 1st line, which is "Hits hits =
> ..."
> 
> 
> Kent Fitch wrote:
>> 
>> Two ways to work through the Hits object getting docids are:
>> 
>> Hits hits = ...
>> int hitCount = hits.length();
>> for (int i=0;i<hitCount;i++) {
>>    int docId = hits.id[i] ;
>>    ...
>> }
>> 
>> or
>> 
>> Iterator hitIterator = hits.iterator() ;
>> while (hitIterator.hasNext()) {
>>     Hit hit = (Hit) hitIterator.next() ;
>>     int docId = hit.getId() ;
>> }
>> 
>> but check out
>> http://lucene.apache.org/java/2_3_0/api/org/apache/lucene/search/Hits.html
>> as this is just code typed into a mail program!
>> 
>> Regards,
>> 
>> Kent
>> 
>> On Fri, Feb 22, 2008 at 4:17 PM, sumittyagi <ping.sumit@gmail.com> wrote:
>>>
>>>  hi, is there any way to retrieve the doc ids from HITS, Please advise
>>> me
>>>  regarding this , i am new to lucene and programming.
>>>  --
>>>  View this message in context:
>>> http://www.nabble.com/How-to-get-the-doc-ID-from-HITS-tp15627959p15627959.html
>>>  Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>>
>>>
>>>  ---------------------------------------------------------------------
>>>  To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>  For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>> 
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>> 
>> 
>> 
> 
> 

-- 
View this message in context: http://www.nabble.com/How-to-get-the-doc-ID-from-HITS-tp15627959p15641410.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32746-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 22 21:06:46 2008
Return-Path: <java-user-return-32746-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 34992 invoked from network); 22 Feb 2008 21:06:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Feb 2008 21:06:46 -0000
Received: (qmail 57160 invoked by uid 500); 22 Feb 2008 21:06:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57111 invoked by uid 500); 22 Feb 2008 21:06:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56950 invoked by uid 99); 22 Feb 2008 21:06:24 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Feb 2008 13:06:24 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Feb 2008 21:05:50 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1JSf5j-0005SQ-7C
	for java-user@lucene.apache.org; Fri, 22 Feb 2008 13:05:59 -0800
Message-ID: <15641369.post@talk.nabble.com>
Date: Fri, 22 Feb 2008 13:05:59 -0800 (PST)
From: sumittyagi <ping.sumit@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: How to get the doc ID from HITS
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: ping.sumit@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


thanks for replying
it may be a silly question but what do in the code

Hits hits = ...
int hitCount = hits.length();
for (int i=0;i<hitCount;i++) {
   int docId = hits.id[i] ;
   ...
}


what do i need to type for "....." in the 1st line, which is "Hits hits =
..."


Kent Fitch wrote:
> 
> Two ways to work through the Hits object getting docids are:
> 
> Hits hits = ...
> int hitCount = hits.length();
> for (int i=0;i<hitCount;i++) {
>    int docId = hits.id[i] ;
>    ...
> }
> 
> or
> 
> Iterator hitIterator = hits.iterator() ;
> while (hitIterator.hasNext()) {
>     Hit hit = (Hit) hitIterator.next() ;
>     int docId = hit.getId() ;
> }
> 
> but check out
> http://lucene.apache.org/java/2_3_0/api/org/apache/lucene/search/Hits.html
> as this is just code typed into a mail program!
> 
> Regards,
> 
> Kent
> 
> On Fri, Feb 22, 2008 at 4:17 PM, sumittyagi <ping.sumit@gmail.com> wrote:
>>
>>  hi, is there any way to retrieve the doc ids from HITS, Please advise me
>>  regarding this , i am new to lucene and programming.
>>  --
>>  View this message in context:
>> http://www.nabble.com/How-to-get-the-doc-ID-from-HITS-tp15627959p15627959.html
>>  Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>
>>
>>  ---------------------------------------------------------------------
>>  To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>  For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/How-to-get-the-doc-ID-from-HITS-tp15627959p15641369.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32747-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 22 21:06:48 2008
Return-Path: <java-user-return-32747-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35136 invoked from network); 22 Feb 2008 21:06:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Feb 2008 21:06:47 -0000
Received: (qmail 60348 invoked by uid 500); 22 Feb 2008 21:06:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60315 invoked by uid 500); 22 Feb 2008 21:06:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60303 invoked by uid 99); 22 Feb 2008 21:06:40 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Feb 2008 13:06:40 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Feb 2008 21:06:06 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1JSf5z-0005Sn-NE
	for java-user@lucene.apache.org; Fri, 22 Feb 2008 13:06:15 -0800
Message-ID: <15641410.post@talk.nabble.com>
Date: Fri, 22 Feb 2008 13:06:15 -0800 (PST)
From: sumittyagi <ping.sumit@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: How to get the doc ID from HITS
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: ping.sumit@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


here is my code, i am just starting, so having little bit of trouble in
starting, i am just trying to access some values and then want to print it
to get started..
here is my code


package db;
import java.io.*;
import java.util.*;
import java.lang.*;
import org.apache.lucene.search.Hits;
import org.apache.lucene.search.Hit;

public class comm{
	public static void main(String[] args)
	{
		System.out.println("hi");
	
	
Hits hits;
int hitCount = hits.length();
for (int i=0;i<hitCount;i++) {
   int docId = hits.id[i] ;
  
} 
}
}

and the errors i am getting are

C:\Documents and Settings\Sumit\Desktop>javac db/comm.java
db/comm.java:20: cannot find symbol
symbol  : variable id
location: class org.apache.lucene.search.Hits
   int docId = hits.id[i] ;
                   ^
1 error


any advice please....





sumittyagi wrote:
> 
> thanks for replying
> it may be a silly question but what do in the code
> 
> Hits hits = ...
> int hitCount = hits.length();
> for (int i=0;i<hitCount;i++) {
>    int docId = hits.id[i] ;
>    ...
> }
> 
> 
> what do i need to type for "....." in the 1st line, which is "Hits hits =
> ..."
> 
> 
> Kent Fitch wrote:
>> 
>> Two ways to work through the Hits object getting docids are:
>> 
>> Hits hits = ...
>> int hitCount = hits.length();
>> for (int i=0;i<hitCount;i++) {
>>    int docId = hits.id[i] ;
>>    ...
>> }
>> 
>> or
>> 
>> Iterator hitIterator = hits.iterator() ;
>> while (hitIterator.hasNext()) {
>>     Hit hit = (Hit) hitIterator.next() ;
>>     int docId = hit.getId() ;
>> }
>> 
>> but check out
>> http://lucene.apache.org/java/2_3_0/api/org/apache/lucene/search/Hits.html
>> as this is just code typed into a mail program!
>> 
>> Regards,
>> 
>> Kent
>> 
>> On Fri, Feb 22, 2008 at 4:17 PM, sumittyagi <ping.sumit@gmail.com> wrote:
>>>
>>>  hi, is there any way to retrieve the doc ids from HITS, Please advise
>>> me
>>>  regarding this , i am new to lucene and programming.
>>>  --
>>>  View this message in context:
>>> http://www.nabble.com/How-to-get-the-doc-ID-from-HITS-tp15627959p15627959.html
>>>  Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>>
>>>
>>>  ---------------------------------------------------------------------
>>>  To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>  For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>> 
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>> 
>> 
>> 
> 
> 

-- 
View this message in context: http://www.nabble.com/How-to-get-the-doc-ID-from-HITS-tp15627959p15641410.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32748-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 22 21:14:32 2008
Return-Path: <java-user-return-32748-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 39330 invoked from network); 22 Feb 2008 21:14:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Feb 2008 21:14:31 -0000
Received: (qmail 73677 invoked by uid 500); 22 Feb 2008 21:14:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73575 invoked by uid 500); 22 Feb 2008 21:14:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73563 invoked by uid 99); 22 Feb 2008 21:14:19 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Feb 2008 13:14:19 -0800
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [129.2.12.68] (HELO FCMD70350.fc-md.umd.edu) (129.2.12.68)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 22 Feb 2008 21:13:32 +0000
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: How to get the doc ID from HITS
Date: Fri, 22 Feb 2008 16:10:47 -0500
Message-ID: <87111BD4606C7846BC0D55244EFADC37A27DF9@FCMD70350.fc-md.umd.edu>
In-Reply-To: <15641410.post@talk.nabble.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: How to get the doc ID from HITS
Thread-Index: Ach1lnwEs+/x+DFISL+N4Ymez6jQtgAAMdzg
References: <15641410.post@talk.nabble.com>
From: "Dharmalingam Ganesan" <dganesan@fc-md.umd.edu>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

It should be hits.id(i), not hits.id[i]. Note id is a method not an
array.

-----Original Message-----
From: sumittyagi [mailto:ping.sumit@gmail.com]=20
Sent: Friday, February 22, 2008 4:06 PM
To: java-user@lucene.apache.org
Subject: Re: How to get the doc ID from HITS


here is my code, i am just starting, so having little bit of trouble in
starting, i am just trying to access some values and then want to print
it
to get started..
here is my code


package db;
import java.io.*;
import java.util.*;
import java.lang.*;
import org.apache.lucene.search.Hits;
import org.apache.lucene.search.Hit;

public class comm{
	public static void main(String[] args)
	{
		System.out.println("hi");
=09
=09
Hits hits;
int hitCount =3D hits.length();
for (int i=3D0;i<hitCount;i++) {
   int docId =3D hits.id[i] ;
 =20
}=20
}
}

and the errors i am getting are

C:\Documents and Settings\Sumit\Desktop>javac db/comm.java
db/comm.java:20: cannot find symbol
symbol  : variable id
location: class org.apache.lucene.search.Hits
   int docId =3D hits.id[i] ;
                   ^
1 error


any advice please....





sumittyagi wrote:
>=20
> thanks for replying
> it may be a silly question but what do in the code
>=20
> Hits hits =3D ...
> int hitCount =3D hits.length();
> for (int i=3D0;i<hitCount;i++) {
>    int docId =3D hits.id[i] ;
>    ...
> }
>=20
>=20
> what do i need to type for "....." in the 1st line, which is "Hits
hits =3D
> ..."
>=20
>=20
> Kent Fitch wrote:
>>=20
>> Two ways to work through the Hits object getting docids are:
>>=20
>> Hits hits =3D ...
>> int hitCount =3D hits.length();
>> for (int i=3D0;i<hitCount;i++) {
>>    int docId =3D hits.id[i] ;
>>    ...
>> }
>>=20
>> or
>>=20
>> Iterator hitIterator =3D hits.iterator() ;
>> while (hitIterator.hasNext()) {
>>     Hit hit =3D (Hit) hitIterator.next() ;
>>     int docId =3D hit.getId() ;
>> }
>>=20
>> but check out
>>
http://lucene.apache.org/java/2_3_0/api/org/apache/lucene/search/Hits.ht
ml
>> as this is just code typed into a mail program!
>>=20
>> Regards,
>>=20
>> Kent
>>=20
>> On Fri, Feb 22, 2008 at 4:17 PM, sumittyagi <ping.sumit@gmail.com>
wrote:
>>>
>>>  hi, is there any way to retrieve the doc ids from HITS, Please
advise
>>> me
>>>  regarding this , i am new to lucene and programming.
>>>  --
>>>  View this message in context:
>>>
http://www.nabble.com/How-to-get-the-doc-ID-from-HITS-tp15627959p1562795
9.html
>>>  Sent from the Lucene - Java Users mailing list archive at
Nabble.com.
>>>
>>>
>>>
---------------------------------------------------------------------
>>>  To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>  For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>=20
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>=20
>>=20
>>=20
>=20
>=20

--=20
View this message in context:
http://www.nabble.com/How-to-get-the-doc-ID-from-HITS-tp15627959p1564141
0.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32749-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 22 21:33:08 2008
Return-Path: <java-user-return-32749-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54189 invoked from network); 22 Feb 2008 21:33:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Feb 2008 21:33:08 -0000
Received: (qmail 6173 invoked by uid 500); 22 Feb 2008 21:32:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5814 invoked by uid 500); 22 Feb 2008 21:32:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5803 invoked by uid 99); 22 Feb 2008 21:32:56 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Feb 2008 13:32:55 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Feb 2008 21:32:09 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1JSfVN-0006Pt-Gd
	for java-user@lucene.apache.org; Fri, 22 Feb 2008 13:32:29 -0800
Message-ID: <15641665.post@talk.nabble.com>
Date: Fri, 22 Feb 2008 13:32:29 -0800 (PST)
From: sumittyagi <ping.sumit@gmail.com>
To: java-user@lucene.apache.org
Subject: Problem in Coding, to get the DOC ID from HITS
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: ping.sumit@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


here is my code
package db;
import java.io.*;
import java.util.*;
import java.lang.*;
import org.apache.lucene.search.Hits;
import org.apache.lucene.search.Hit;

public class comm{
	public static void main(String[] args)
	{
		System.out.println("hi");
	
	
Hits hits;
int hitCount = hits.length();
for (int i=0;i<hitCount;i++) {
   int docId = hits.id(i) ;
  
} 
}
}

and the error i am getting is

C:\Documents and Settings\Sumit\Desktop>javac db/comm.java
db/comm.java:15: variable hits might not have been initialized
int hitCount = hits.length();
               ^
db/comm.java:17: unreported exception java.io.IOException; must be caught or
dec
lared to be thrown
   int docId = hits.id(i) ;
                      ^
2 errors



any help please..


-- 
View this message in context: http://www.nabble.com/Problem-in-Coding%2C-to-get-the-DOC-ID-from-HITS-tp15641665p15641665.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32750-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 22 21:38:23 2008
Return-Path: <java-user-return-32750-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59461 invoked from network); 22 Feb 2008 21:38:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Feb 2008 21:38:23 -0000
Received: (qmail 13073 invoked by uid 500); 22 Feb 2008 21:38:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13047 invoked by uid 500); 22 Feb 2008 21:38:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13036 invoked by uid 99); 22 Feb 2008 21:38:11 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Feb 2008 13:38:11 -0800
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [129.2.12.68] (HELO FCMD70350.fc-md.umd.edu) (129.2.12.68)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 22 Feb 2008 21:37:36 +0000
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Problem in Coding, to get the DOC ID from HITS
Date: Fri, 22 Feb 2008 16:34:34 -0500
Message-ID: <87111BD4606C7846BC0D55244EFADC37A27DFB@FCMD70350.fc-md.umd.edu>
In-Reply-To: <15641665.post@talk.nabble.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Problem in Coding, to get the DOC ID from HITS
Thread-Index: Ach1mipOJrDSUyifQLOgo50gEa6xXwAAEHnQ
References: <15641665.post@talk.nabble.com>
From: "Dharmalingam Ganesan" <dganesan@fc-md.umd.edu>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Of course, these are programming errors nothing really related to
Lucene.

Hits hits;
Int hitCount =3D hits.length

This does not make sense. You have just declared hits. It must be
created before using it.

The second error should disapper if you add throws declaration or
try/catch block.

By the way, avoid asking such questions in this forum because the
questions are not related to Lucene!!

-----Original Message-----
From: sumittyagi [mailto:ping.sumit@gmail.com]=20
Sent: Friday, February 22, 2008 4:32 PM
To: java-user@lucene.apache.org
Subject: Problem in Coding, to get the DOC ID from HITS


here is my code
package db;
import java.io.*;
import java.util.*;
import java.lang.*;
import org.apache.lucene.search.Hits;
import org.apache.lucene.search.Hit;

public class comm{
	public static void main(String[] args)
	{
		System.out.println("hi");
=09
=09
Hits hits;
int hitCount =3D hits.length();
for (int i=3D0;i<hitCount;i++) {
   int docId =3D hits.id(i) ;
 =20
}=20
}
}

and the error i am getting is

C:\Documents and Settings\Sumit\Desktop>javac db/comm.java
db/comm.java:15: variable hits might not have been initialized
int hitCount =3D hits.length();
               ^
db/comm.java:17: unreported exception java.io.IOException; must be
caught or
dec
lared to be thrown
   int docId =3D hits.id(i) ;
                      ^
2 errors



any help please..


--=20
View this message in context:
http://www.nabble.com/Problem-in-Coding%2C-to-get-the-DOC-ID-from-HITS-t
p15641665p15641665.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32751-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 22 21:58:55 2008
Return-Path: <java-user-return-32751-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78257 invoked from network); 22 Feb 2008 21:58:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Feb 2008 21:58:55 -0000
Received: (qmail 60286 invoked by uid 500); 22 Feb 2008 21:58:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60250 invoked by uid 500); 22 Feb 2008 21:58:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60239 invoked by uid 99); 22 Feb 2008 21:58:42 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Feb 2008 13:58:42 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Feb 2008 21:58:08 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1JSfuL-0007PV-Pt
	for java-user@lucene.apache.org; Fri, 22 Feb 2008 13:58:17 -0800
Message-ID: <15641665.post@talk.nabble.com>
Date: Fri, 22 Feb 2008 13:58:17 -0800 (PST)
From: sumittyagi <ping.sumit@gmail.com>
To: java-user@lucene.apache.org
Subject: Problem in Coding, to get the DOC ID from HITS
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: ping.sumit@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


here is my code
package db;
import java.io.*;
import java.util.*;
import java.lang.*;
import org.apache.lucene.search.Hits;
import org.apache.lucene.search.Hit;

public class comm{
	public static void main(String[] args)
	{
		System.out.println("hi");
	
	
Hits hits;
int hitCount = hits.length();
for (int i=0;i<hitCount;i++) {
   int docId = hits.id(i) ;
  
} 
}
}

and the error i am getting is

C:\Documents and Settings\Sumit\Desktop>javac db/comm.java
db/comm.java:15: variable hits might not have been initialized
int hitCount = hits.length();
               ^
db/comm.java:17: unreported exception java.io.IOException; must be caught or
dec
lared to be thrown
   int docId = hits.id(i) ;
                      ^
2 errors



any help please..


-- 
View this message in context: http://www.nabble.com/Problem-in-Coding%2C-to-get-the-DOC-ID-from-HITS-tp15641665p15641665.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32752-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Feb 23 02:40:57 2008
Return-Path: <java-user-return-32752-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 74951 invoked from network); 23 Feb 2008 02:40:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Feb 2008 02:40:56 -0000
Received: (qmail 51929 invoked by uid 500); 23 Feb 2008 02:40:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 51890 invoked by uid 500); 23 Feb 2008 02:40:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 51879 invoked by uid 99); 23 Feb 2008 02:40:44 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Feb 2008 18:40:44 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of zaexage@gmail.com designates 72.14.204.238 as permitted sender)
Received: from [72.14.204.238] (HELO qb-out-0506.google.com) (72.14.204.238)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 23 Feb 2008 02:40:09 +0000
Received: by qb-out-0506.google.com with SMTP id o21so1047458qba.9
        for <java-user@lucene.apache.org>; Fri, 22 Feb 2008 18:40:18 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=oI8iLEDj48vVdjlH/x8r/ql0fowUEvojuW//wjJOubE=;
        b=UnVUpRVq/T7Fv4CShTFy2b7QL1ePY/MnlhklfZA6IL9yUPHTNW3N6e2BHX8aUx/vJge7e4sEDHmuBUJik9NSHsm1/+lhnSRSXUA/Mhiy67kSUmfs+z6E/DRG7L5mPcgJkuowVU/8Ky3Rb7eSuPiR/gO44sGU2MJWBw3dA9kiyis=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=Rsoasx2oWv/f0kUJmNziOrQJ/fPpORs21fVjWoCV3tIo/5LSav3G732FvcvuXJkEAdN9hOm2oy5fnJ+S/g/6gJJobYhuqLBpN/8qJDBoIo9+NHSXVRAC6lGH3YvaZbfCvE175CaO+Hk6vt/PQS5xtUxiJr/6PTvdodkVgyqpAMg=
Received: by 10.114.25.3 with SMTP id 3mr933619way.22.1203734417732;
        Fri, 22 Feb 2008 18:40:17 -0800 (PST)
Received: by 10.115.79.5 with HTTP; Fri, 22 Feb 2008 18:40:17 -0800 (PST)
Message-ID: <2c5080560802221840p7f0890c3g9ee3fd3e67a06f3@mail.gmail.com>
Date: Sat, 23 Feb 2008 10:40:17 +0800
From: ZaeX <zaexage@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: How to get the doc ID from HITS
In-Reply-To: <15641410.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_3137_1960425.1203734417723"
References: <15627959.post@talk.nabble.com>
	 <355005590802212146l375a9dc3vdf1ffbe3f6dbd11b@mail.gmail.com>
	 <15641369.post@talk.nabble.com> <15641410.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_3137_1960425.1203734417723
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi,

You should get the `Hits' from `IndexSearcher.search(...)'

You could refer to the example code in the Lucene source package, or have a
look at the book `Lucene in Action'


2008/2/23, sumittyagi <ping.sumit@gmail.com>:
>
>
> here is my code, i am just starting, so having little bit of trouble in
> starting, i am just trying to access some values and then want to print it
> to get started..
> here is my code
>
>
> package db;
> import java.io.*;
> import java.util.*;
> import java.lang.*;
> import org.apache.lucene.search.Hits;
> import org.apache.lucene.search.Hit;
>
> public class comm{
>        public static void main(String[] args)
>        {
>                System.out.println("hi");
>
>
> Hits hits;
> int hitCount = hits.length();
> for (int i=0;i<hitCount;i++) {
>   int docId = hits.id[i] ;
>
> }
> }
> }
>
> and the errors i am getting are
>
> C:\Documents and Settings\Sumit\Desktop>javac db/comm.java
> db/comm.java:20: cannot find symbol
> symbol  : variable id
> location: class org.apache.lucene.search.Hits
>   int docId = hits.id[i] ;
>                   ^
> 1 error
>
>
> any advice please....
>
>
>
>
>
> sumittyagi wrote:
> >
> > thanks for replying
> > it may be a silly question but what do in the code
> >
> > Hits hits = ...
> > int hitCount = hits.length();
> > for (int i=0;i<hitCount;i++) {
> >    int docId = hits.id[i] ;
> >    ...
> > }
> >
> >
> > what do i need to type for "....." in the 1st line, which is "Hits hits
> =
> > ..."
> >
> >
> > Kent Fitch wrote:
> >>
> >> Two ways to work through the Hits object getting docids are:
> >>
> >> Hits hits = ...
> >> int hitCount = hits.length();
> >> for (int i=0;i<hitCount;i++) {
> >>    int docId = hits.id[i] ;
> >>    ...
> >> }
> >>
> >> or
> >>
> >> Iterator hitIterator = hits.iterator() ;
> >> while (hitIterator.hasNext()) {
> >>     Hit hit = (Hit) hitIterator.next() ;
> >>     int docId = hit.getId() ;
> >> }
> >>
> >> but check out
> >>
> http://lucene.apache.org/java/2_3_0/api/org/apache/lucene/search/Hits.html
> >> as this is just code typed into a mail program!
> >>
> >> Regards,
> >>
> >> Kent
> >>
> >> On Fri, Feb 22, 2008 at 4:17 PM, sumittyagi <ping.sumit@gmail.com>
> wrote:
> >>>
> >>>  hi, is there any way to retrieve the doc ids from HITS, Please advise
> >>> me
> >>>  regarding this , i am new to lucene and programming.
> >>>  --
> >>>  View this message in context:
> >>>
> http://www.nabble.com/How-to-get-the-doc-ID-from-HITS-tp15627959p15627959.html
> >>>  Sent from the Lucene - Java Users mailing list archive at Nabble.com.
> >>>
> >>>
> >>>  ---------------------------------------------------------------------
> >>>  To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >>>  For additional commands, e-mail: java-user-help@lucene.apache.org
> >>>
> >>>
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >>
> >
> >
>
> --
> View this message in context:
> http://www.nabble.com/How-to-get-the-doc-ID-from-HITS-tp15627959p15641410.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_3137_1960425.1203734417723--

From java-user-return-32753-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Feb 23 16:24:56 2008
Return-Path: <java-user-return-32753-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81336 invoked from network); 23 Feb 2008 16:24:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Feb 2008 16:24:53 -0000
Received: (qmail 43892 invoked by uid 500); 23 Feb 2008 16:24:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43855 invoked by uid 500); 23 Feb 2008 16:24:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43844 invoked by uid 99); 23 Feb 2008 16:24:40 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 23 Feb 2008 08:24:40 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of spring@gmx.eu designates 213.165.64.20 as permitted sender)
Received: from [213.165.64.20] (HELO mail.gmx.net) (213.165.64.20)
    by apache.org (qpsmtpd/0.29) with SMTP; Sat, 23 Feb 2008 16:24:05 +0000
Received: (qmail invoked by alias); 23 Feb 2008 16:24:12 -0000
Received: from e178113056.adsl.alicedsl.de (EHLO msrvcn04) [85.178.113.56]
  by mail.gmx.net (mp034) with SMTP; 23 Feb 2008 17:24:12 +0100
X-Authenticated: #2635966
X-Provags-ID: V01U2FsdGVkX19RJ7lAe9lRE8awT3tWuKZenPKWWpouNG1FvyF60T
	YgMTkt4ap7ZA6o
From: <spring@gmx.eu>
To: <java-user@lucene.apache.org>
Subject: Changing wildcard characters
Date: Sat, 23 Feb 2008 17:24:13 +0100
Message-ID: <F1C364D7FF714D55A2FD8621F9F26BD3@msrvcn04>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
Thread-Index: Ach2OIXFZ8wdakaeRvWvT7ZVyIqVjg==
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.3790.4133
X-Y-GMX-Trusted: 0
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

is it possible to change the wildcard charaters which are used by
QueryParser?

Or do I have to replace them myself in the query string?

Thank you


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32754-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Feb 23 18:39:51 2008
Return-Path: <java-user-return-32754-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26267 invoked from network); 23 Feb 2008 18:39:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Feb 2008 18:39:51 -0000
Received: (qmail 44321 invoked by uid 500); 23 Feb 2008 18:39:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43306 invoked by uid 500); 23 Feb 2008 18:39:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43295 invoked by uid 99); 23 Feb 2008 18:39:40 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 23 Feb 2008 10:39:40 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of crackeur@comcast.net designates 76.96.30.32 as permitted sender)
Received: from [76.96.30.32] (HELO QMTA03.emeryville.ca.mail.comcast.net) (76.96.30.32)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 23 Feb 2008 18:39:03 +0000
Received: from OMTA06.emeryville.ca.mail.comcast.net ([76.96.30.51])
	by QMTA03.emeryville.ca.mail.comcast.net with comcast
	id t2KG1Y00216AWCUA30KU00; Sat, 23 Feb 2008 18:38:28 +0000
Received: from your55e5f9e3d2 ([67.164.81.9])
	by OMTA06.emeryville.ca.mail.comcast.net with comcast
	id t6fC1Y0040C3pGr8S00000; Sat, 23 Feb 2008 18:39:12 +0000
X-Authority-Analysis: v=1.0 c=1 a=FP58Ms26AAAA:8 a=Fg8anum3AAAA:8
 a=fziSbYi_AAAA:8 a=ycZRORMMAAAA:8 a=Rr5kw0T3AAAA:8 a=cJPd9v_NO8cB8mJWpZsA:9
 a=H-BMkOCLI_3vg8WbizYA:7 a=Coxsk6UpuPzmJiVgmKHYRhGiSOsA:4 a=si9q_4b84H0A:10
 a=fA-b4wtdyZcA:10
Message-ID: <00b501c8764b$628139c0$0402a8c0@your55e5f9e3d2>
From: "jimmy Zhang" <crackeur@comcast.net>
To: <java-user@lucene.apache.org>
References: <F1C364D7FF714D55A2FD8621F9F26BD3@msrvcn04>
Subject: VTD-XML 2.3 released
Date: Sat, 23 Feb 2008 10:39:12 -0800
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="iso-8859-1";
	reply-type=original
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.3138
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3198
X-Virus-Checked: Checked by ClamAV on apache.org

VTD-XML 2.3 is now released. To download the latest version please visit
http://sourceforge.net/project/showfiles.php?group_id=110612&package_id=120172.

Below is a list of new features and enhancements in this version.

  a.. VTDException is now introduced as the root class for all other
VTD-XML's exception classes (per suggestion of Max Rahder).
  b.. Transcoding capability is now added for inter-document cut and paste.
You can cut a chuck of bytes in a UTF-8 encoded document and paste it into a
UTF-16 encoded document and the output document is still well-formed.
  c.. ISO-8859-10, ISO-8859-11, ISO-8859-12, ISO-8859-13, ISO-8859-14 and
ISO-8859-15 support has now been added
  d.. Zero length Text node is now possible.
  e.. Ability to dump in-memory copy of text is added.
  f.. Various code cleanup, enhancement and bug fixes.

Below are some new articles related to VTD-XML

  a.. Index XML documents with VTD-XML
http://xml.sys-con.com/read/453082.htm
  b.. Manipulate XML content the Ximple Way
http://www.devx.com/xml/Article/36379
  c.. VTD-XML: A new vision of XML
http://www.developer.com/xml/article.php/3714051
  d.. VTD-XML: XML Processing for the future
http://www.codeproject.com/KB/cs/vtd-xml_examples.aspx

If you (or someone you know) like the concept of VTD-XML, think that it can
help solve enterprises' XML processing related issues (particularly those
related to SOA), and would like to directly influence and contribute to the
development of the future of Internet, please email me
crackeur@comcast.net). We are looking for open source software developers
and project management people to take VTD-XML to the next level.



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32755-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Feb 23 18:52:12 2008
Return-Path: <java-user-return-32755-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 29924 invoked from network); 23 Feb 2008 18:52:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Feb 2008 18:52:11 -0000
Received: (qmail 49682 invoked by uid 500); 23 Feb 2008 18:52:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49659 invoked by uid 500); 23 Feb 2008 18:52:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49648 invoked by uid 99); 23 Feb 2008 18:52:01 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 23 Feb 2008 10:52:01 -0800
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=SPF_NEUTRAL,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [69.89.21.16] (HELO outbound-mail-21.bluehost.com) (69.89.21.16)
    by apache.org (qpsmtpd/0.29) with SMTP; Sat, 23 Feb 2008 18:51:24 +0000
Received: (qmail 12877 invoked by uid 0); 23 Feb 2008 18:51:32 -0000
Received: from unknown (HELO box108.bluehost.com) (69.89.22.108)
  by mailproxy2.bluehost.com with SMTP; 23 Feb 2008 18:51:32 -0000
Received: from c-71-56-60-78.hsd1.ga.comcast.net ([71.56.60.78] helo=[192.168.1.100])
	by box108.bluehost.com with esmtpsa (TLSv1:AES128-SHA:128)
	(Exim 4.68)
	(envelope-from <emmanuel@hibernate.org>)
	id 1JSzT9-0005S0-RD
	for java-user@lucene.apache.org; Sat, 23 Feb 2008 11:51:31 -0700
Mime-Version: 1.0 (Apple Message framework v753)
In-Reply-To: <6e3ae6310802151224k1f545b4ct178aaedb617855e4@mail.gmail.com>
References: <15508362.post@talk.nabble.com> <6e3ae6310802151224k1f545b4ct178aaedb617855e4@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <AF4D2413-BDB5-4F6B-92D7-10F715C27E39@hibernate.org>
Content-Transfer-Encoding: 7bit
From: Emmanuel Bernard <emmanuel@hibernate.org>
Subject: Re: Searching for multiple criteria (accross 2 tables)
Date: Sat, 23 Feb 2008 13:51:27 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.753)
X-Identified-User: {1307:box108.bluehost.com:emmanue2:emmanuelbernard.com} {sentby:smtp auth 71.56.60.78 authed with oss+emmanuelbernard.com}
X-Virus-Checked: Checked by ClamAV on apache.org

Not sure if it's too late for you. But here are my comments if you  
want to stick with Hibernate and Hibernate Search

Generally speaking, once you have the query to retrieve the data per  
id, you can map this query to an entity in Hibernate using either:
  - @Formula for simple cases
  - @Loader for more complex cases

Once mapped as an entity, the mapping to Lucene via Hibernate Search  
is business as usual.

Alternatively, you can use a class level @FieldBridge and map the  
data the way you want in Lucene from an entity object. Note that I  
don't think this strategy will suit your current needs.

Emmanuel

On  Feb 15, 2008, at 15:24, Chris Lu wrote:

> Sorry, sent the previous draft email by mistake. Here is the  
> correct one.
>
> Sounds a typical SQL pivot problem.
>
> select Id, SIN, data.*
> from IdCard, (SELECT
>       ID
>       MAX(CASE WHEN name = 'Fname' THEN Value END) AS Fname,
>       MAX(CASE WHEN name = 'Lname' THEN Value END) AS Lname,
>       MAX(CASE WHEN name = 'Age' THEN Value END) AS Age,
>       MAX(CASE WHEN name = 'Country' THEN Value END) AS Country
> FROM
>        DATA_Table
> GROUP BY
>       ID
> ) data
>
> To speed things up, you can split the SQLs into 2 for better  
> performance.
>
> This is how DBSight does this. You can write your own SQLs, but
> generally it's the same methods.
>
>
> -- 
> Chris Lu
> -------------------------
> Instant Scalable Full-Text Search On Any Database/Application
> site: http://www.dbsight.net
> demo: http://search.dbsight.com
> Lucene Database Search in 3 minutes:
> http://wiki.dbsight.com/index.php? 
> title=Create_Lucene_Database_Search_in_3_minutes
> DBSight customer, a shopping comparison site, (anonymous per request)
> got 2.6 Million Euro funding!
>
>
> On Fri, Feb 15, 2008 at 11:27 AM, lmctndi <tn_dinh@hotmail.com> wrote:
>>
>>  Thanks for your reply.
>>
>>  Your idea prompts more questions:
>>
>>
>>  I understand what you are saying but don't know how to implement  
>> it.  How do
>>  you go about joining all rows of all the tables belonging to one  
>> person and
>>
>>
>> to index them so that I can actually use
>>  "+Fname:john +County:USA" as a query?
>>
>>
>>  Erick Erickson wrote:
>>>
>>> To expand a bit on Chris's first point: Take off your DB hat and  
>>> put on
>>> your search hat <G>. It sounds like you have simply moved your  
>>> database
>>> tables into Lucene and want to search across them. My rule is that
>>> whenever you find yourself trying to make Lucene act like a DB, you
>>> need to pause and reflect on your design.....
>>>
>>> So, from your example, you select all the data relating to id 1 from
>>> *all* your tables, and index that as a single document in Lucene.  
>>> Very
>>> simplistically, your document for ID 1 has the fields
>>> Fname, Lname, Age, Country, and SIN.
>>>
>>> Your query is now very simple,
>>> +Fname:john +County:USA
>>>
>>> and to get the related SIN, you iterate over your hits
>>> and extract the SIN from each hit.
>>>
>>> If I understand your problem, that is <G>.
>>>
>>> In general, the strategy is to de-normalize your information
>>> when you build your index....
>>>
>>> Best
>>> Erick
>>>
>>
>>  --
>>  View this message in context: http://www.nabble.com/Searching-for- 
>> multiple-criteria-%28accross-2-tables%29-tp15502657p15508362.html
>>  Sent from the Lucene - Java Users mailing list archive at  
>> Nabble.com.
>>
>>
>>   
>> ---------------------------------------------------------------------
>>  To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>  For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32756-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Feb 23 22:25:37 2008
Return-Path: <java-user-return-32756-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79231 invoked from network); 23 Feb 2008 22:25:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Feb 2008 22:25:36 -0000
Received: (qmail 71604 invoked by uid 500); 23 Feb 2008 22:25:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71565 invoked by uid 500); 23 Feb 2008 22:25:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71554 invoked by uid 99); 23 Feb 2008 22:25:24 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 23 Feb 2008 14:25:24 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 72.14.214.229 as permitted sender)
Received: from [72.14.214.229] (HELO hu-out-0506.google.com) (72.14.214.229)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 23 Feb 2008 22:24:50 +0000
Received: by hu-out-0506.google.com with SMTP id 27so1136350hub.15
        for <java-user@lucene.apache.org>; Sat, 23 Feb 2008 14:24:58 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=IC4GFWpkYSi4SJW92xGOSKGVyJzyciW7aR4MEmz/JFg=;
        b=wsXOnvo9XHg6iG0pf6HYQBeJ9sS/5HmdAlQWw6UX6cYD/0OJIJoi8A44/i6Lv40r7k2/9SYLUxACLuyRLS3RQHEdFxxshcQy3xoUbz1lIThGruLc2yl7AMLqi1BXGmJk5zK9uI6kRepUxFGnggcbeyjdNFFmE+CQA+SBCVAAUAY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=Wv1+h197ZCq9JG4lC+NXY2/wvqu8YnCRMZ+74hmPxV30RjLRwFL4BAP+EZCgZKA8XKOab3R1YmsZI+IHki88H8s1n3zoBDmhgLde1ViEm21cj2chL5Yi5Z6SVSuiXsE7/1/ao1Eq58jqkr6fR5/rMOdM0YIbhZK8utap5C+UNKk=
Received: by 10.82.155.10 with SMTP id c10mr1776825bue.29.1203805497924;
        Sat, 23 Feb 2008 14:24:57 -0800 (PST)
Received: by 10.82.151.7 with HTTP; Sat, 23 Feb 2008 14:24:57 -0800 (PST)
Message-ID: <359a92830802231424i6dc740ccr45f236f02df85ce5@mail.gmail.com>
Date: Sat, 23 Feb 2008 17:24:57 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Problem in Coding, to get the DOC ID from HITS
In-Reply-To: <15641665.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_4672_1289274.1203805497912"
References: <15641665.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_4672_1289274.1203805497912
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

You have to set the Hits object to the results of a search. See
Searcher.search()

On Fri, Feb 22, 2008 at 4:32 PM, sumittyagi <ping.sumit@gmail.com> wrote:

>
> here is my code
> package db;
> import java.io.*;
> import java.util.*;
> import java.lang.*;
> import org.apache.lucene.search.Hits;
> import org.apache.lucene.search.Hit;
>
> public class comm{
>        public static void main(String[] args)
>        {
>                System.out.println("hi");
>
>
> Hits hits;
> int hitCount = hits.length();
> for (int i=0;i<hitCount;i++) {
>   int docId = hits.id(i) ;
>
> }
> }
> }
>
> and the error i am getting is
>
> C:\Documents and Settings\Sumit\Desktop>javac db/comm.java
> db/comm.java:15: variable hits might not have been initialized
> int hitCount = hits.length();
>               ^
> db/comm.java:17: unreported exception java.io.IOException; must be caught
> or
> dec
> lared to be thrown
>   int docId = hits.id(i) ;
>                      ^
> 2 errors
>
>
>
> any help please..
>
>
> --
> View this message in context:
> http://www.nabble.com/Problem-in-Coding%2C-to-get-the-DOC-ID-from-HITS-tp15641665p15641665.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_4672_1289274.1203805497912--

From java-user-return-32757-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Feb 23 22:56:24 2008
Return-Path: <java-user-return-32757-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85456 invoked from network); 23 Feb 2008 22:56:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Feb 2008 22:56:24 -0000
Received: (qmail 89358 invoked by uid 500); 23 Feb 2008 22:56:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89330 invoked by uid 500); 23 Feb 2008 22:56:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89319 invoked by uid 99); 23 Feb 2008 22:56:12 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 23 Feb 2008 14:56:12 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of abeba.tensai@gmail.com designates 209.85.162.180 as permitted sender)
Received: from [209.85.162.180] (HELO el-out-1112.google.com) (209.85.162.180)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 23 Feb 2008 22:55:39 +0000
Received: by el-out-1112.google.com with SMTP id m34so809737ele.11
        for <java-user@lucene.apache.org>; Sat, 23 Feb 2008 14:55:48 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        bh=ciizCE4YlI00QJ/yLVbzkdQTF9tvDo2Wog8fSnpZMfc=;
        b=kxDdw7651bbrGUYUOlc4U6SkuzaUfYoZoGcw8uX+CF3JWylM2eLi0kZYO7Ufv0CbQL3YnEdVwPjPSBjFmgzbVt+e9edT13kQMu/4jR5L8tmrdLzEohsP2AYNwTsTius/abdazIhVoHoAk5KygB7FAAiqyL7etdZzU+dlk3Q8XjE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=XQhGxhjg+rIX+IRGS8TgcfQhIoSnfDOkcj/YXuFTfSZAS1KHaoMLaWjuIumFyTWujLJ0593PMyd4b3En5bA7sf6yGZyH9Lq+AGfn5FTuAYZP7yGureuU60qx2g6pYXFAiulobhitRxQ9fP1AHL1ydwYMpkmWLeEv88AS3hj88TY=
Received: by 10.142.172.12 with SMTP id u12mr746108wfe.16.1203807346762;
        Sat, 23 Feb 2008 14:55:46 -0800 (PST)
Received: by 10.142.174.7 with HTTP; Sat, 23 Feb 2008 14:55:46 -0800 (PST)
Message-ID: <743eedfa0802231455j6ea209bft8c0e6c41d146b92@mail.gmail.com>
Date: Sat, 23 Feb 2008 17:55:46 -0500
From: "Abeba Tensai" <abeba.tensai@gmail.com>
To: java-user <java-user@lucene.apache.org>
Subject: A regex search engine for what?
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_4147_28626560.1203807346746"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_4147_28626560.1203807346746
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi,

Just wanted to get the feedback of the community of potential disruptive
application of a regular expression based search engine before offering my
prof. to start researching the subject with changes to the lucene codebase.

Thanks.

------=_Part_4147_28626560.1203807346746--

From java-user-return-32758-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Feb 24 05:42:24 2008
Return-Path: <java-user-return-32758-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72474 invoked from network); 24 Feb 2008 05:42:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Feb 2008 05:42:23 -0000
Received: (qmail 73188 invoked by uid 500); 24 Feb 2008 05:42:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73165 invoked by uid 500); 24 Feb 2008 05:42:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73154 invoked by uid 99); 24 Feb 2008 05:42:11 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 23 Feb 2008 21:42:11 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 24 Feb 2008 05:41:37 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1JT9cP-00064Y-U6
	for java-user@lucene.apache.org; Sat, 23 Feb 2008 21:41:45 -0800
Message-ID: <15661169.post@talk.nabble.com>
Date: Sat, 23 Feb 2008 21:41:45 -0800 (PST)
From: sumittyagi <ping.sumit@gmail.com>
To: java-user@lucene.apache.org
Subject: HELP...compiling first program for lucene  Indexer.java
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: ping.sumit@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


I am new to lucene, and have problem in executing it's first program which is
Indexer.java

here is the source code..

*****************************************************

import java.io.*;
import org.apache.lucene.document.*;
import org.apache.lucene.index.*;
import org.apache.lucene.analysis.*;
import org.apache.lucene.analysis.standard.*;
import java.util.*;
import java.io.IOException;

public class Indexer {
public static void main(String[] args) throws Exception {
if (args.length != 2) {
throw new Exception("Usage: java " + Indexer.class.getName()
+ " <index dir> <data dir>");
}
File indexDir = new File(args[0]);
File dataDir = new File(args[1]);
long start = new Date().getTime();
int numIndexed = index(indexDir, dataDir);
long end = new Date().getTime();
System.out.println("Indexing " + numIndexed + " files took "
+ (end - start) + " milliseconds");
}
// open an index and start file directory traversal
public static int index(File indexDir, File dataDir)
throws IOException {
        if (!dataDir.exists() || !dataDir.isDirectory()) {
throw new IOException(dataDir
+ " does not exist or is not a directory");
}
IndexWriter writer = new IndexWriter(indexDir,
new StandardAnalyzer(), true);
writer.setUseCompoundFile(false);
indexDirectory(writer, dataDir);
int numIndexed = writer.docCount();
writer.optimize();
writer.close();
return numIndexed;
}
// recursive method that calls itself when it finds a directory
private static void indexDirectory(IndexWriter writer, File dir)
throws IOException {
File[] files = dir.listFiles();
for (int i = 0; i < files.length; i++) {
File f = files[i];
if (f.isDirectory()) {
indexDirectory(writer, f);
} else if (f.getName().endsWith(".txt")) {
indexFile(writer, f);
}
}
}
// method to actually index a file using Lucene
private static void indexFile(IndexWriter writer, File f)
throws IOException {
if (f.isHidden() || !f.exists() || !f.canRead()) {
return;
}
System.out.println("Indexing " + f.getCanonicalPath());
Document doc = new Document();
doc.add(Field.Text("contents", new FileReader(f)));
doc.add(Field.Keyword("filename", f.getCanonicalPath()));
writer.addDocument(doc);
}
}


**********************************************************

and the errors which i am getting are

C:\Documents and Settings\Sumit\Desktop\db>javac Indexer.java
Indexer.java:60: cannot find symbol
symbol  : method Text(java.lang.String,java.io.FileReader)
location: class org.apache.lucene.document.Field
doc.add(Field.Text("contents", new FileReader(f)));
             ^
Indexer.java:61: cannot find symbol
symbol  : method Keyword(java.lang.String,java.lang.String)
location: class org.apache.lucene.document.Field
doc.add(Field.Keyword("filename", f.getCanonicalPath()));
             ^
2 errors





any suggestions ..please 
-- 
View this message in context: http://www.nabble.com/HELP...compiling-first-program-for-lucene--Indexer.java-tp15661169p15661169.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32759-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Feb 24 06:31:45 2008
Return-Path: <java-user-return-32759-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 57058 invoked from network); 24 Feb 2008 06:31:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Feb 2008 06:31:44 -0000
Received: (qmail 93942 invoked by uid 500); 24 Feb 2008 06:31:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93909 invoked by uid 500); 24 Feb 2008 06:31:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93897 invoked by uid 99); 24 Feb 2008 06:31:33 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 23 Feb 2008 22:31:33 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 24 Feb 2008 06:30:59 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1JTAOC-0007LO-AI
	for java-user@lucene.apache.org; Sat, 23 Feb 2008 22:31:08 -0800
Message-ID: <15661355.post@talk.nabble.com>
Date: Sat, 23 Feb 2008 22:31:08 -0800 (PST)
From: sumittyagi <ping.sumit@gmail.com>
To: java-user@lucene.apache.org
Subject: Searcher.java ...problem in compiling
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: ping.sumit@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


import java.io.*;
import org.apache.lucene.document.*;
import org.apache.lucene.document.Field.*;
import org.apache.lucene.index.*;
import org.apache.lucene.analysis.*;
import org.apache.lucene.analysis.standard.*;
import java.util.*;
import java.io.IOException;
import org.apache.lucene.store.*;
import org.apache.lucene.search.*;
import org.apache.lucene.queryParser.*;


public class Searcher {
public static void main(String[] args) throws Exception {
if (args.length != 2) {
throw new Exception("Usage: java " + Searcher.class.getName()
+ " <index dir> <query>");
}
File indexDir = new File(args[0]);
String q = args[1];
if (!indexDir.exists() || !indexDir.isDirectory()) {
throw new Exception(indexDir +
" does not exist or is not a directory.");
}
search(indexDir, q);
}
public static void search(File indexDir, String q)
throws Exception {
Directory fsDir = FSDirectory.getDirectory(indexDir, false);
IndexSearcher is = new IndexSearcher(fsDir);
Query query = QueryParser.parse(q, "contents",new StandardAnalyzer());
long start = new Date().getTime();
Hits hits = is.search(query);
long end = new Date().getTime();
System.err.println("Found " + hits.length() +
" document(s) (in " + (end - start) +
" milliseconds) that matched query '" +
q + "':");
for (int i = 0; i < hits.length(); i++) {
Document doc = hits.doc(i);
System.out.println(doc.get("filename"));
}
}
}
*****************************************************8
and the error i am getting is

C:\Documents and Settings\Sumit\Desktop\db>javac Searcher.java
Searcher.java:32: parse(java.lang.String) in
org.apache.lucene.queryParser.Query
Parser cannot be applied to
(java.lang.String,java.lang.String,org.apache.lucene
.analysis.standard.StandardAnalyzer)
Query query = QueryParser.parse(q, "contents",new StandardAnalyzer());
                         ^
Note: Searcher.java uses or overrides a deprecated API.
Note: Recompile with -Xlint:deprecation for details.
1 error



please help me out regarding these basic problems...
-- 
View this message in context: http://www.nabble.com/Searcher.java-...problem-in-compiling-tp15661355p15661355.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32760-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Feb 24 08:42:13 2008
Return-Path: <java-user-return-32760-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 74709 invoked from network); 24 Feb 2008 08:42:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Feb 2008 08:42:13 -0000
Received: (qmail 48110 invoked by uid 500); 24 Feb 2008 08:42:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48085 invoked by uid 500); 24 Feb 2008 08:42:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48073 invoked by uid 99); 24 Feb 2008 08:42:00 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 24 Feb 2008 00:42:00 -0800
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of stephane.nicoll@gmail.com designates 72.14.214.230 as permitted sender)
Received: from [72.14.214.230] (HELO hu-out-0506.google.com) (72.14.214.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 24 Feb 2008 08:41:26 +0000
Received: by hu-out-0506.google.com with SMTP id 27so1296226hub.15
        for <java-user@lucene.apache.org>; Sun, 24 Feb 2008 00:41:33 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        bh=W7t7I21HxsiDWEveyM4L/WnWNr//ed9CeltxzCVo+ns=;
        b=BimBvmo4LakCP51jg+IUc4d+zH/3xpc5onYkKIzMxG8/DmUm0MvG6aA6T5awjEfh+dZNWG2froWn2EcBcQwkPvi6YKm2GxRJtfW9JyvDvBCtQ8ckd40iAn3i9rh0BLgpWsE/u2BoQCEju9Oq0ZlIlDVIvjCUMMt7SQT6FjBnu8M=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=kiNsMaI8u3oivEtlF0kp+4VRNw+4Q1/qiiPN6IVD43oGjLgh50/lurcQJmK6NbfiTOySydab+iKwitXDhoGsYlVKd4qVtBUAnG0ezMNK2RRewUxnkeBcUbLdOf0xfUheJZ2pUX3XBI9V5GSUc1bGGFLD2lmDaQAIyYUwFwcZIno=
Received: by 10.66.224.19 with SMTP id w19mr1501898ugg.34.1203842493683;
        Sun, 24 Feb 2008 00:41:33 -0800 (PST)
Received: by 10.67.32.16 with HTTP; Sun, 24 Feb 2008 00:41:33 -0800 (PST)
Message-ID: <541f12ca0802240041m159590a1gcf2cb3342b583db6@mail.gmail.com>
Date: Sun, 24 Feb 2008 09:41:33 +0100
From: "Stephane Nicoll" <stephane.nicoll@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: HELP...compiling first program for lucene Indexer.java
In-Reply-To: <15661169.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <15661169.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Field.Text has been deprecated and removed a while back. You probably
found an old code sample on the Internet that is not applicable
anymore to 2.3

Just create your Fields wiht the constructor:  new Field("....")

See the Javadoc for details.

HTH,
St=E9phane

On Sun, Feb 24, 2008 at 6:41 AM, sumittyagi <ping.sumit@gmail.com> wrote:
>
>  I am new to lucene, and have problem in executing it's first program whi=
ch is
>  Indexer.java
>
>  here is the source code..
>
>  *****************************************************
>
>  import java.io.*;
>  import org.apache.lucene.document.*;
>  import org.apache.lucene.index.*;
>  import org.apache.lucene.analysis.*;
>  import org.apache.lucene.analysis.standard.*;
>  import java.util.*;
>  import java.io.IOException;
>
>  public class Indexer {
>  public static void main(String[] args) throws Exception {
>  if (args.length !=3D 2) {
>  throw new Exception("Usage: java " + Indexer.class.getName()
>  + " <index dir> <data dir>");
>  }
>  File indexDir =3D new File(args[0]);
>  File dataDir =3D new File(args[1]);
>  long start =3D new Date().getTime();
>  int numIndexed =3D index(indexDir, dataDir);
>  long end =3D new Date().getTime();
>  System.out.println("Indexing " + numIndexed + " files took "
>  + (end - start) + " milliseconds");
>  }
>  // open an index and start file directory traversal
>  public static int index(File indexDir, File dataDir)
>  throws IOException {
>         if (!dataDir.exists() || !dataDir.isDirectory()) {
>  throw new IOException(dataDir
>  + " does not exist or is not a directory");
>  }
>  IndexWriter writer =3D new IndexWriter(indexDir,
>  new StandardAnalyzer(), true);
>  writer.setUseCompoundFile(false);
>  indexDirectory(writer, dataDir);
>  int numIndexed =3D writer.docCount();
>  writer.optimize();
>  writer.close();
>  return numIndexed;
>  }
>  // recursive method that calls itself when it finds a directory
>  private static void indexDirectory(IndexWriter writer, File dir)
>  throws IOException {
>  File[] files =3D dir.listFiles();
>  for (int i =3D 0; i < files.length; i++) {
>  File f =3D files[i];
>  if (f.isDirectory()) {
>  indexDirectory(writer, f);
>  } else if (f.getName().endsWith(".txt")) {
>  indexFile(writer, f);
>  }
>  }
>  }
>  // method to actually index a file using Lucene
>  private static void indexFile(IndexWriter writer, File f)
>  throws IOException {
>  if (f.isHidden() || !f.exists() || !f.canRead()) {
>  return;
>  }
>  System.out.println("Indexing " + f.getCanonicalPath());
>  Document doc =3D new Document();
>  doc.add(Field.Text("contents", new FileReader(f)));
>  doc.add(Field.Keyword("filename", f.getCanonicalPath()));
>  writer.addDocument(doc);
>  }
>  }
>
>
>  **********************************************************
>
>  and the errors which i am getting are
>
>  C:\Documents and Settings\Sumit\Desktop\db>javac Indexer.java
>  Indexer.java:60: cannot find symbol
>  symbol  : method Text(java.lang.String,java.io.FileReader)
>  location: class org.apache.lucene.document.Field
>  doc.add(Field.Text("contents", new FileReader(f)));
>              ^
>  Indexer.java:61: cannot find symbol
>  symbol  : method Keyword(java.lang.String,java.lang.String)
>  location: class org.apache.lucene.document.Field
>  doc.add(Field.Keyword("filename", f.getCanonicalPath()));
>              ^
>  2 errors
>
>
>
>
>
>  any suggestions ..please
>  --
>  View this message in context: http://www.nabble.com/HELP...compiling-fir=
st-program-for-lucene--Indexer.java-tp15661169p15661169.html
>  Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
>  ---------------------------------------------------------------------
>  To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>  For additional commands, e-mail: java-user-help@lucene.apache.org
>
>



--=20
Large Systems Suck: This rule is 100% transitive. If you build one,
you suck" -- S.Yegge

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32761-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 25 04:43:10 2008
Return-Path: <java-user-return-32761-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53420 invoked from network); 25 Feb 2008 04:43:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Feb 2008 04:43:10 -0000
Received: (qmail 92808 invoked by uid 500); 25 Feb 2008 04:42:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92766 invoked by uid 500); 25 Feb 2008 04:42:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92752 invoked by uid 99); 25 Feb 2008 04:42:58 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 24 Feb 2008 20:42:58 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=RCVD_NUMERIC_HELO,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [67.98.155.4] (HELO mail.mcdonaldbradley.com) (67.98.155.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Feb 2008 04:42:10 +0000
Received: from 71.62.172.128 ([71.62.172.128]) by hqmsg01.mcdonaldbradley.local ([10.20.160.14]) via Exchange Front-End Server oasis.mcdonaldbradley.com ([10.20.160.13]) with Microsoft Exchange Server HTTP-DAV ;
 Mon, 25 Feb 2008 04:43:51 +0000
Received: from Tinkywinky by oasis.mcdonaldbradley.com; 24 Feb 2008 23:42:30 -0500
Subject: directory-based search using lucence?
From: Nick Duan <nduan@mcdonaldbradley.com>
Reply-To: nduan@mcdonaldbradley.com
To: java-user@lucene.apache.org
In-Reply-To: <1203913215.85465.ezmlm@lucene.apache.org>
References: <1203913215.85465.ezmlm@lucene.apache.org>
Content-Type: text/plain
Content-Transfer-Encoding: 7bit
Organization: McDonald Bradley, Inc
Date: Sun, 24 Feb 2008 23:42:30 -0500
Message-Id: <1203914550.5717.22.camel@localhost>
Mime-Version: 1.0
X-Mailer: Evolution 2.10.1 
X-Virus-Checked: Checked by ClamAV on apache.org

Is there anyway to refine or rank search result based on some directory
input?  For instance, I could get a web directory from the open
directory project (http://www.dmoz.org) containing a list of urls mapped
to its directory.  I'd like to refine my search result for certain
categories.  Yes, I know that my search space is confined within the
urls provided by dmoz.

The search interface on dmoz allows directory-based search only on top
categories.  I'd like to start my search based on a category of any
level.  Is there anyway to do this in lucene?  Any suggestion is highly
appreciated.

ND

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32762-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 25 04:49:04 2008
Return-Path: <java-user-return-32762-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53916 invoked from network); 25 Feb 2008 04:49:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Feb 2008 04:49:03 -0000
Received: (qmail 94708 invoked by uid 500); 25 Feb 2008 04:48:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94679 invoked by uid 500); 25 Feb 2008 04:48:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94668 invoked by uid 99); 25 Feb 2008 04:48:53 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 24 Feb 2008 20:48:53 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Feb 2008 04:48:18 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1JTVGN-0006X1-Q7
	for java-user@lucene.apache.org; Sun, 24 Feb 2008 20:48:27 -0800
Message-ID: <15673994.post@talk.nabble.com>
Date: Sun, 24 Feb 2008 20:48:27 -0800 (PST)
From: sumittyagi <ping.sumit@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: HELP...compiling first program for lucene Indexer.java
In-Reply-To: <541f12ca0802240041m159590a1gcf2cb3342b583db6@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Nabble-From: ping.sumit@gmail.com
References: <541f12ca0802240041m159590a1gcf2cb3342b583db6@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


hi,
Thanks for replying..
Can you please explain more clearly that what exactly needs to be done in
this program.
Thanks

Stephane Nicoll-2 wrote:
>=20
> Field.Text has been deprecated and removed a while back. You probably
> found an old code sample on the Internet that is not applicable
> anymore to 2.3
>=20
> Just create your Fields wiht the constructor:  new Field("....")
>=20
> See the Javadoc for details.
>=20
> HTH,
> St=C3=A9phane
>=20
> On Sun, Feb 24, 2008 at 6:41 AM, sumittyagi <ping.sumit@gmail.com> wrote:
>>
>>  I am new to lucene, and have problem in executing it's first program
>> which is
>>  Indexer.java
>>
>>  here is the source code..
>>
>>  *****************************************************
>>
>>  import java.io.*;
>>  import org.apache.lucene.document.*;
>>  import org.apache.lucene.index.*;
>>  import org.apache.lucene.analysis.*;
>>  import org.apache.lucene.analysis.standard.*;
>>  import java.util.*;
>>  import java.io.IOException;
>>
>>  public class Indexer {
>>  public static void main(String[] args) throws Exception {
>>  if (args.length !=3D 2) {
>>  throw new Exception("Usage: java " + Indexer.class.getName()
>>  + " <index dir> <data dir>");
>>  }
>>  File indexDir =3D new File(args[0]);
>>  File dataDir =3D new File(args[1]);
>>  long start =3D new Date().getTime();
>>  int numIndexed =3D index(indexDir, dataDir);
>>  long end =3D new Date().getTime();
>>  System.out.println("Indexing " + numIndexed + " files took "
>>  + (end - start) + " milliseconds");
>>  }
>>  // open an index and start file directory traversal
>>  public static int index(File indexDir, File dataDir)
>>  throws IOException {
>>         if (!dataDir.exists() || !dataDir.isDirectory()) {
>>  throw new IOException(dataDir
>>  + " does not exist or is not a directory");
>>  }
>>  IndexWriter writer =3D new IndexWriter(indexDir,
>>  new StandardAnalyzer(), true);
>>  writer.setUseCompoundFile(false);
>>  indexDirectory(writer, dataDir);
>>  int numIndexed =3D writer.docCount();
>>  writer.optimize();
>>  writer.close();
>>  return numIndexed;
>>  }
>>  // recursive method that calls itself when it finds a directory
>>  private static void indexDirectory(IndexWriter writer, File dir)
>>  throws IOException {
>>  File[] files =3D dir.listFiles();
>>  for (int i =3D 0; i < files.length; i++) {
>>  File f =3D files[i];
>>  if (f.isDirectory()) {
>>  indexDirectory(writer, f);
>>  } else if (f.getName().endsWith(".txt")) {
>>  indexFile(writer, f);
>>  }
>>  }
>>  }
>>  // method to actually index a file using Lucene
>>  private static void indexFile(IndexWriter writer, File f)
>>  throws IOException {
>>  if (f.isHidden() || !f.exists() || !f.canRead()) {
>>  return;
>>  }
>>  System.out.println("Indexing " + f.getCanonicalPath());
>>  Document doc =3D new Document();
>>  doc.add(Field.Text("contents", new FileReader(f)));
>>  doc.add(Field.Keyword("filename", f.getCanonicalPath()));
>>  writer.addDocument(doc);
>>  }
>>  }
>>
>>
>>  **********************************************************
>>
>>  and the errors which i am getting are
>>
>>  C:\Documents and Settings\Sumit\Desktop\db>javac Indexer.java
>>  Indexer.java:60: cannot find symbol
>>  symbol  : method Text(java.lang.String,java.io.FileReader)
>>  location: class org.apache.lucene.document.Field
>>  doc.add(Field.Text("contents", new FileReader(f)));
>>              ^
>>  Indexer.java:61: cannot find symbol
>>  symbol  : method Keyword(java.lang.String,java.lang.String)
>>  location: class org.apache.lucene.document.Field
>>  doc.add(Field.Keyword("filename", f.getCanonicalPath()));
>>              ^
>>  2 errors
>>
>>
>>
>>
>>
>>  any suggestions ..please
>>  --
>>  View this message in context:
>> http://www.nabble.com/HELP...compiling-first-program-for-lucene--Indexer=
.java-tp15661169p15661169.html
>>  Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>
>>
>>  ---------------------------------------------------------------------
>>  To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>  For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>=20
>=20
>=20
> --=20
> Large Systems Suck: This rule is 100% transitive. If you build one,
> you suck" -- S.Yegge
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>=20
>=20

--=20
View this message in context: http://www.nabble.com/Re%3A-HELP...compiling-=
first-program-for-lucene-Indexer.java-tp15661969p15673994.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32763-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 25 04:52:43 2008
Return-Path: <java-user-return-32763-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54389 invoked from network); 25 Feb 2008 04:52:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Feb 2008 04:52:43 -0000
Received: (qmail 97499 invoked by uid 500); 25 Feb 2008 04:52:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97473 invoked by uid 500); 25 Feb 2008 04:52:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97462 invoked by uid 99); 25 Feb 2008 04:52:31 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 24 Feb 2008 20:52:31 -0800
X-ASF-Spam-Status: No, hits=2.4 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [121.243.22.156] (HELO delhtca02.Infoedge.com) (121.243.22.156)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Feb 2008 04:51:45 +0000
Received: from DELHTCA01.Infoedge.com (172.16.3.234) by delhtca02.infoedge.com
 (172.16.3.245) with Microsoft SMTP Server (TLS) id 8.0.751.0; Mon, 25 Feb
 2008 10:17:42 +0530
Received: from [172.16.0.121] (220.225.240.5) by DELHTCA01.Infoedge.com
 (172.16.3.234) with Microsoft SMTP Server id 8.0.744.0; Mon, 25 Feb 2008
 10:17:42 +0530
Subject: Timeout for search threads
From: Anshum <anshum.gupta@naukri.com>
To: lucene user <java-user@lucene.apache.org>
Content-Type: text/plain
Date: Mon, 25 Feb 2008 10:22:08 +0530
Message-ID: <1203915128.7468.7.camel@localhost>
MIME-Version: 1.0
X-Mailer: Evolution 2.10.1 
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

Is there a way I could add a timeout value for each search instance
while searching? Currently I encounter issues while a bottleneck causing
query continues to execute for over 1000 seconds(I am still looking into
the cause for the same though, to remove it from the root)
I need to have a TTL kind of an idea for each search thread to jump over
such blocking queries.

--
Anshum


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32764-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 25 08:05:39 2008
Return-Path: <java-user-return-32764-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69085 invoked from network); 25 Feb 2008 08:05:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Feb 2008 08:05:39 -0000
Received: (qmail 27729 invoked by uid 500); 25 Feb 2008 08:05:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27703 invoked by uid 500); 25 Feb 2008 08:05:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27692 invoked by uid 99); 25 Feb 2008 08:05:27 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Feb 2008 00:05:27 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of jlal@chambal.com designates 66.249.82.232 as permitted sender)
Received: from [66.249.82.232] (HELO wx-out-0506.google.com) (66.249.82.232)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Feb 2008 08:04:54 +0000
Received: by wx-out-0506.google.com with SMTP id i28so2788706wxd.20
        for <java-user@lucene.apache.org>; Mon, 25 Feb 2008 00:04:59 -0800 (PST)
Received: by 10.141.113.6 with SMTP id q6mr1807946rvm.135.1203926698834;
        Mon, 25 Feb 2008 00:04:58 -0800 (PST)
Received: by 10.141.27.8 with HTTP; Mon, 25 Feb 2008 00:04:58 -0800 (PST)
Message-ID: <967684dc0802250004r2f3869fey60229d2f302c7279@mail.gmail.com>
Date: Mon, 25 Feb 2008 13:34:58 +0530
From: "Jawahar Lal" <jlal@chambal.com>
To: java-user@lucene.apache.org
Subject: Out of Memory Exception
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_5526_28379673.1203926698834"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_5526_28379673.1203926698834
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi,
     I am using Lucene2.0. I am doing full text index of pdf file. To
extract the text from pdf I am using pdfbox library. When I start indexing
of pdf files I get Out of memory exception. This is becuase files are about
10 mb in size. I tried different value for mergefactor,  maxmergefactor and
maxbuffereddocs i.e. 100, 100; 100; 10, 100, 100; 100,100 ,1000; etc...   I
am storing the field value.

    I am not getting resolve this exception. Any suggestion to resolve the
issue.

Thanks

------=_Part_5526_28379673.1203926698834--

From java-user-return-32765-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 25 10:05:16 2008
Return-Path: <java-user-return-32765-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 17069 invoked from network); 25 Feb 2008 10:05:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Feb 2008 10:05:16 -0000
Received: (qmail 51540 invoked by uid 500); 25 Feb 2008 10:05:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 51148 invoked by uid 500); 25 Feb 2008 10:05:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 51137 invoked by uid 99); 25 Feb 2008 10:05:04 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Feb 2008 02:05:04 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [212.27.42.30] (HELO smtp4-g19.free.fr) (212.27.42.30)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Feb 2008 10:04:28 +0000
Received: from smtp4-g19.free.fr (localhost.localdomain [127.0.0.1])
	by smtp4-g19.free.fr (Postfix) with ESMTP id 963773EA0C7
	for <java-user@lucene.apache.org>; Mon, 25 Feb 2008 11:04:33 +0100 (CET)
Received: from [192.168.99.128] (seb44-1-88-163-78-202.fbx.proxad.net [88.163.78.202])
	by smtp4-g19.free.fr (Postfix) with ESMTP id 3918B3EA133
	for <java-user@lucene.apache.org>; Mon, 25 Feb 2008 11:04:33 +0100 (CET)
Message-ID: <47C292B0.4020305@codelutin.com>
Date: Mon, 25 Feb 2008 11:04:32 +0100
From: Gabriel Landais <landais@codelutin.com>
Organization: Code Lutin
User-Agent: Thunderbird 2.0.0.6 (X11/20071022)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Security filtering from external DB
References: <47BE94CE.3020802@codelutin.com>
In-Reply-To: <47BE94CE.3020802@codelutin.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

Gabriel Landais a crit :
> How to create a Filter for a field in Collection<String>?
> First, split Collection in Collection<Collection> with 
> BooleanQuery.maxClauseCount items maximum in each collection.
> For each collection :
>  create a BooleanQuery with a TermQuery for each String.
>  perform a search with a HitCollector filling a BitSet
> Now we have BitSet of each Collection, perform a BitSet.or to get a 
> final BitSet
> Build a Filter based on that BitSet, and use that Filter as parameter 
> of each search
>
It works perfectly. It is implemented in a GPL project, aka 
"simexplorer-is", in class LuceneDatabase (createFilter) :
<https://labs.libre-entreprise.org/plugins/scmsvn/viewcvs.php/trunk/simexplorer-is/simexplorer-is-storage/src/java/fr/cemagref/simexplorer/is/storage/database/lucene/?root=simexplorer-si>
I think that this class is a good sample of what is possible to do with 
Lucene as a metadata database.
Hope it will help.
Regards,

-- 
Gabriel <landais@codelutin.com>
http://www.codelutin.com
tel : 02 40 50 29 28 / fax : 09 59 92 29 28


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32766-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 25 11:52:11 2008
Return-Path: <java-user-return-32766-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48311 invoked from network); 25 Feb 2008 11:52:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Feb 2008 11:52:11 -0000
Received: (qmail 45970 invoked by uid 500); 25 Feb 2008 11:51:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45941 invoked by uid 500); 25 Feb 2008 11:51:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45930 invoked by uid 99); 25 Feb 2008 11:51:59 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Feb 2008 03:51:59 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [208.97.132.83] (HELO spunkymail-a16.g.dreamhost.com) (208.97.132.83)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Feb 2008 11:51:11 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a16.g.dreamhost.com (Postfix) with ESMTP id C98FD7D072
	for <java-user@lucene.apache.org>; Mon, 25 Feb 2008 03:51:29 -0800 (PST)
Message-Id: <21CDD867-0565-4F3F-A1BE-E4FF6B2C059C@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <1203915128.7468.7.camel@localhost>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v919.2)
Subject: Re: Timeout for search threads
Date: Mon, 25 Feb 2008 06:51:28 -0500
References: <1203915128.7468.7.camel@localhost>
X-Mailer: Apple Mail (2.919.2)
X-Virus-Checked: Checked by ClamAV on apache.org

See https://issues.apache.org/jira/browse/LUCENE-997


On Feb 24, 2008, at 11:52 PM, Anshum wrote:

> Hi,
>
> Is there a way I could add a timeout value for each search instance
> while searching? Currently I encounter issues while a bottleneck  
> causing
> query continues to execute for over 1000 seconds(I am still looking  
> into
> the cause for the same though, to remove it from the root)
> I need to have a TTL kind of an idea for each search thread to jump  
> over
> such blocking queries.
>
> --
> Anshum
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

--------------------------
Grant Ingersoll
http://www.lucenebootcamp.com
Next Training: April 7, 2008 at ApacheCon Europe in Amsterdam

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ






---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32767-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 25 11:52:42 2008
Return-Path: <java-user-return-32767-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48439 invoked from network); 25 Feb 2008 11:52:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Feb 2008 11:52:42 -0000
Received: (qmail 47556 invoked by uid 500); 25 Feb 2008 11:52:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47526 invoked by uid 500); 25 Feb 2008 11:52:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47514 invoked by uid 99); 25 Feb 2008 11:52:30 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Feb 2008 03:52:30 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.83] (HELO spunkymail-a16.g.dreamhost.com) (208.97.132.83)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Feb 2008 11:51:54 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a16.g.dreamhost.com (Postfix) with ESMTP id C38867D216
	for <java-user@lucene.apache.org>; Mon, 25 Feb 2008 03:52:02 -0800 (PST)
Message-Id: <065C7078-4229-468B-B4AD-12D3DFA7EDC5@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <967684dc0802250004r2f3869fey60229d2f302c7279@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v919.2)
Subject: Re: Out of Memory Exception
Date: Mon, 25 Feb 2008 06:52:02 -0500
References: <967684dc0802250004r2f3869fey60229d2f302c7279@mail.gmail.com>
X-Mailer: Apple Mail (2.919.2)
X-Virus-Checked: Checked by ClamAV on apache.org

What's your heap size?

-Grant

On Feb 25, 2008, at 3:04 AM, Jawahar Lal wrote:

> Hi,
>     I am using Lucene2.0. I am doing full text index of pdf file. To
> extract the text from pdf I am using pdfbox library. When I start  
> indexing
> of pdf files I get Out of memory exception. This is becuase files  
> are about
> 10 mb in size. I tried different value for mergefactor,   
> maxmergefactor and
> maxbuffereddocs i.e. 100, 100; 100; 10, 100, 100; 100,100 ,1000;  
> etc...   I
> am storing the field value.
>
>    I am not getting resolve this exception. Any suggestion to  
> resolve the
> issue.
>
> Thanks

--------------------------
Grant Ingersoll
http://www.lucenebootcamp.com
Next Training: April 7, 2008 at ApacheCon Europe in Amsterdam

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ






---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32768-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 25 14:06:07 2008
Return-Path: <java-user-return-32768-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88482 invoked from network); 25 Feb 2008 14:06:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Feb 2008 14:06:07 -0000
Received: (qmail 91715 invoked by uid 500); 25 Feb 2008 14:05:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90692 invoked by uid 500); 25 Feb 2008 14:05:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90681 invoked by uid 99); 25 Feb 2008 14:05:55 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Feb 2008 06:05:55 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [131.246.120.220] (HELO mailgw1.uni-kl.de) (131.246.120.220)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Feb 2008 14:05:21 +0000
Received: from dfki-1002.dfki.uni-kl.de (dfki-1002.dfki.uni-kl.de [131.246.195.2])
	by mailgw1.uni-kl.de (8.13.8/8.13.8/Debian-3) with ESMTP id m1PE5SPq020480
	for <java-user@lucene.apache.org>; Mon, 25 Feb 2008 15:05:28 +0100
Received: from serv-4100.kl.dfki.de (serv-4100.kl.dfki.de [192.168.41.180])
	by dfki-1002.dfki.uni-kl.de (8.13.8+Sun/8.11.4) with ESMTP id m1PE4gOq020992
	for <java-user@lucene.apache.org>; Mon, 25 Feb 2008 15:04:42 +0100 (CET)
Received: from [192.168.41.166] (pc-4176.kl.dfki.de [192.168.41.166])
	by serv-4100.kl.dfki.de (8.13.8+Sun/8.13.8) with ESMTP id m1PE5R0x012368
	for <java-user@lucene.apache.org>; Mon, 25 Feb 2008 15:05:28 +0100 (CET)
Message-ID: <47C2CB27.2070609@web.de>
Date: Mon, 25 Feb 2008 15:05:27 +0100
From: duiduder@web.de
User-Agent: Thunderbird 2.0.0.9 (X11/20071114)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: When does QueryParser creates PhraseQueries
X-Enigmail-Version: 0.95.6
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Hi all,

I have the behaviour that when I search with Luke (version 0.7.1, Lucene
version 2.2.0) inside an arbritray field, the QueryParser creates a PhraseQuery
when I type in
~              termA/termB      (no "...")
When I read the documentation at the Lucene webside, I only find the syntax
~             "termA termB"
for creating phrase queries.

Did I make a mistake? Can I configure the QueryParser that he simply tokenizes between
termA and termB, and makes a simple BooleanQuery as he do in the case of a whitespace
delimiter?


regards

Christian

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v2.0.4-svn0 (GNU/Linux)

iD8DBQFHwssnQoTr50f1tpcRAtuJAJ0Z6bdnX1OUlDWGB0Mf7N/zAiAnLACbBFRe
+9TsMw3ZHW756c8oHWaODPA=
=KACT
-----END PGP SIGNATURE-----

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32769-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 25 14:59:47 2008
Return-Path: <java-user-return-32769-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4042 invoked from network); 25 Feb 2008 14:59:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Feb 2008 14:59:47 -0000
Received: (qmail 57628 invoked by uid 500); 25 Feb 2008 14:59:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57601 invoked by uid 500); 25 Feb 2008 14:59:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57590 invoked by uid 99); 25 Feb 2008 14:59:35 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Feb 2008 06:59:35 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of spring@gmx.eu designates 213.165.64.20 as permitted sender)
Received: from [213.165.64.20] (HELO mail.gmx.net) (213.165.64.20)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 25 Feb 2008 14:59:01 +0000
Received: (qmail invoked by alias); 25 Feb 2008 14:59:08 -0000
Received: from e178079063.adsl.alicedsl.de (EHLO msrvcn04) [85.178.79.63]
  by mail.gmx.net (mp008) with SMTP; 25 Feb 2008 15:59:08 +0100
X-Authenticated: #2635966
X-Provags-ID: V01U2FsdGVkX18AFZYxy78A0cE1/0+WX0F3o0k8RbUIGJjfNpZL11
	gpeh6iDWhSVOZL
From: <spring@gmx.eu>
To: <java-user@lucene.apache.org>
References: <op.t6w6lsk82ic4zu@sj-desktop> <9ac0c6aa0802220444i99eef1dy405def2fca6d85f0@mail.gmail.com>
Subject: RE: Transactions in Lucene
Date: Mon, 25 Feb 2008 15:59:13 +0100
Message-ID: <A8AA0EE8813F4B63B78196D1498BAE8D@msrvcn04>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
Thread-Index: Ach1UL2rt2IKxA+JRPy6Jg1IiM7r5wCbcQvQ
In-Reply-To: <9ac0c6aa0802220444i99eef1dy405def2fca6d85f0@mail.gmail.com>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.3790.4133
X-Y-GMX-Trusted: 0
X-Virus-Checked: Checked by ClamAV on apache.org

> Then, you can call close() to commit the changes to the index, or
> abort() to rollback the index to the starting state (when the writer
> was opened).

As I understand the docs, the index will get rolled back to the state as it
was when the index was opened.

How can I achieve a rollback which only goes back to the state of the last
flush (2.3) / commit (2.4/3.0)?

Until now I call flush to commit, but I do not know how to rollback...

Thank you.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32770-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 25 15:14:09 2008
Return-Path: <java-user-return-32770-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79189 invoked from network); 25 Feb 2008 15:14:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Feb 2008 15:14:09 -0000
Received: (qmail 78997 invoked by uid 500); 25 Feb 2008 15:13:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78965 invoked by uid 500); 25 Feb 2008 15:13:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78954 invoked by uid 99); 25 Feb 2008 15:13:56 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Feb 2008 07:13:56 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.198.189] (HELO rv-out-0910.google.com) (209.85.198.189)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Feb 2008 15:13:22 +0000
Received: by rv-out-0910.google.com with SMTP id k20so1062211rvb.5
        for <java-user@lucene.apache.org>; Mon, 25 Feb 2008 07:13:30 -0800 (PST)
Received: by 10.141.170.10 with SMTP id x10mr2175321rvo.139.1203952410268;
        Mon, 25 Feb 2008 07:13:30 -0800 (PST)
Received: from ?10.17.4.4? ( [96.237.56.13])
        by mx.google.com with ESMTPS id 34sm6050137wra.23.2008.02.25.07.13.29
        (version=TLSv1/SSLv3 cipher=OTHER);
        Mon, 25 Feb 2008 07:13:29 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v753)
In-Reply-To: <A8AA0EE8813F4B63B78196D1498BAE8D@msrvcn04>
References: <op.t6w6lsk82ic4zu@sj-desktop> <9ac0c6aa0802220444i99eef1dy405def2fca6d85f0@mail.gmail.com> <A8AA0EE8813F4B63B78196D1498BAE8D@msrvcn04>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <530E6B98-A22D-432D-96E2-034C0647F358@mikemccandless.com>
Content-Transfer-Encoding: 7bit
From: Michael McCandless <lucene@mikemccandless.com>
Subject: Re: Transactions in Lucene
Date: Mon, 25 Feb 2008 10:13:27 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.753)
X-Virus-Checked: Checked by ClamAV on apache.org


<spring@gmx.eu> wrote:

>> Then, you can call close() to commit the changes to the index, or
>> abort() to rollback the index to the starting state (when the writer
>> was opened).
>
> As I understand the docs, the index will get rolled back to the  
> state as it
> was when the index was opened.
>
> How can I achieve a rollback which only goes back to the state of  
> the last
> flush (2.3) / commit (2.4/3.0)?

In 2.4, commit() sets the rollback point.  So abort() will roll index  
back to the last time you called commit() (or to when the writer was  
opened if you haven't called commit).

In 2.3, your only choice is to close & re-open the writer to reset  
the rollback point.

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32771-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 25 15:58:35 2008
Return-Path: <java-user-return-32771-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96131 invoked from network); 25 Feb 2008 15:58:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Feb 2008 15:58:35 -0000
Received: (qmail 54247 invoked by uid 500); 25 Feb 2008 15:58:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54223 invoked by uid 500); 25 Feb 2008 15:58:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54206 invoked by uid 99); 25 Feb 2008 15:58:19 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Feb 2008 07:58:19 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of spring@gmx.eu designates 213.165.64.20 as permitted sender)
Received: from [213.165.64.20] (HELO mail.gmx.net) (213.165.64.20)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 25 Feb 2008 15:57:45 +0000
Received: (qmail invoked by alias); 25 Feb 2008 15:57:53 -0000
Received: from e178079063.adsl.alicedsl.de (EHLO msrvcn04) [85.178.79.63]
  by mail.gmx.net (mp017) with SMTP; 25 Feb 2008 16:57:53 +0100
X-Authenticated: #2635966
X-Provags-ID: V01U2FsdGVkX19Y9PkqFChYFJKshDlp3/WEgVwHUm+pqeVd58u+oX
	DUd1uu0qPWOBw6
From: <spring@gmx.eu>
To: <java-user@lucene.apache.org>
References: <op.t6w6lsk82ic4zu@sj-desktop> <9ac0c6aa0802220444i99eef1dy405def2fca6d85f0@mail.gmail.com> <A8AA0EE8813F4B63B78196D1498BAE8D@msrvcn04> <530E6B98-A22D-432D-96E2-034C0647F358@mikemccandless.com>
Subject: RE: Transactions in Lucene
Date: Mon, 25 Feb 2008 16:57:58 +0100
Message-ID: <7BEAB3A01000439293ECD441C0B58E6D@msrvcn04>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
Thread-Index: Ach3wRCLys48uzYuTkiCMpQH16hcvQABgd9Q
In-Reply-To: <530E6B98-A22D-432D-96E2-034C0647F358@mikemccandless.com>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.3790.4133
X-Y-GMX-Trusted: 0
X-Virus-Checked: Checked by ClamAV on apache.org

> In 2.4, commit() sets the rollback point.  So abort() will 
> roll index  
> back to the last time you called commit() (or to when the writer was  
> opened if you haven't called commit).
> 
> In 2.3, your only choice is to close & re-open the writer to reset  
> the rollback point.

OK, thank you.

For what time is the 2.4 release planned?


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32772-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 25 17:27:56 2008
Return-Path: <java-user-return-32772-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40222 invoked from network); 25 Feb 2008 17:27:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Feb 2008 17:27:53 -0000
Received: (qmail 45408 invoked by uid 500); 25 Feb 2008 17:27:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45382 invoked by uid 500); 25 Feb 2008 17:27:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45366 invoked by uid 99); 25 Feb 2008 17:27:41 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Feb 2008 09:27:41 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [72.14.246.250] (HELO ag-out-0708.google.com) (72.14.246.250)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Feb 2008 17:27:07 +0000
Received: by ag-out-0708.google.com with SMTP id 23so5064788agd.5
        for <java-user@lucene.apache.org>; Mon, 25 Feb 2008 09:27:14 -0800 (PST)
Received: by 10.142.78.10 with SMTP id a10mr2533709wfb.37.1203960433385;
        Mon, 25 Feb 2008 09:27:13 -0800 (PST)
Received: from ?10.17.4.4? ( [96.237.56.13])
        by mx.google.com with ESMTPS id 74sm8156008wra.19.2008.02.25.09.27.11
        (version=TLSv1/SSLv3 cipher=OTHER);
        Mon, 25 Feb 2008 09:27:12 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v753)
In-Reply-To: <7BEAB3A01000439293ECD441C0B58E6D@msrvcn04>
References: <op.t6w6lsk82ic4zu@sj-desktop> <9ac0c6aa0802220444i99eef1dy405def2fca6d85f0@mail.gmail.com> <A8AA0EE8813F4B63B78196D1498BAE8D@msrvcn04> <530E6B98-A22D-432D-96E2-034C0647F358@mikemccandless.com> <7BEAB3A01000439293ECD441C0B58E6D@msrvcn04>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <0FA829F6-94BE-4F39-A563-9A731B9FE3B0@mikemccandless.com>
Content-Transfer-Encoding: 7bit
From: Michael McCandless <lucene@mikemccandless.com>
Subject: Re: Transactions in Lucene
Date: Mon, 25 Feb 2008 12:27:08 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.753)
X-Virus-Checked: Checked by ClamAV on apache.org


<spring@gmx.eu> wrote:

> For what time is the 2.4 release planned?

Not really sure at this point ...

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32773-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 25 17:32:07 2008
Return-Path: <java-user-return-32773-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45525 invoked from network); 25 Feb 2008 17:32:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Feb 2008 17:32:07 -0000
Received: (qmail 60667 invoked by uid 500); 25 Feb 2008 17:31:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60637 invoked by uid 500); 25 Feb 2008 17:31:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60626 invoked by uid 99); 25 Feb 2008 17:31:55 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Feb 2008 09:31:55 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of spring@gmx.eu designates 213.165.64.20 as permitted sender)
Received: from [213.165.64.20] (HELO mail.gmx.net) (213.165.64.20)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 25 Feb 2008 17:31:08 +0000
Received: (qmail invoked by alias); 25 Feb 2008 17:31:29 -0000
Received: from e178079063.adsl.alicedsl.de (EHLO msrvcn04) [85.178.79.63]
  by mail.gmx.net (mp051) with SMTP; 25 Feb 2008 18:31:29 +0100
X-Authenticated: #2635966
X-Provags-ID: V01U2FsdGVkX1+zZnYQxOqz2tzZ/o+Hi04Kb5MKuQz+s2NjoePP1P
	17yRUHJxZKAcXr
From: <spring@gmx.eu>
To: <java-user@lucene.apache.org>
References: <op.t6w6lsk82ic4zu@sj-desktop> <9ac0c6aa0802220444i99eef1dy405def2fca6d85f0@mail.gmail.com> <A8AA0EE8813F4B63B78196D1498BAE8D@msrvcn04> <530E6B98-A22D-432D-96E2-034C0647F358@mikemccandless.com> <7BEAB3A01000439293ECD441C0B58E6D@msrvcn04> <0FA829F6-94BE-4F39-A563-9A731B9FE3B0@mikemccandless.com>
Subject: RE: Transactions in Lucene
Date: Mon, 25 Feb 2008 18:31:36 +0100
Message-ID: <71A055EDEEC74CA9BEA3495D129C61B5@msrvcn04>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
Thread-Index: Ach308Nkv3k72/X+T7a8WXED2nCQYgAAE6wA
In-Reply-To: <0FA829F6-94BE-4F39-A563-9A731B9FE3B0@mikemccandless.com>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.3790.4133
X-Y-GMX-Trusted: 0
X-Virus-Checked: Checked by ClamAV on apache.org

> > For what time is the 2.4 release planned?
> 
> Not really sure at this point ...

Hm. Digging into IndexWriter#init it seems that this is a really expensive
operation and thus my self made "commit" too. Isn't it?


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32774-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 25 17:53:37 2008
Return-Path: <java-user-return-32774-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58911 invoked from network); 25 Feb 2008 17:53:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Feb 2008 17:53:37 -0000
Received: (qmail 91616 invoked by uid 500); 25 Feb 2008 17:53:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91579 invoked by uid 500); 25 Feb 2008 17:53:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 91562 invoked by uid 99); 25 Feb 2008 17:53:25 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Feb 2008 09:53:24 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [72.14.204.239] (HELO qb-out-0506.google.com) (72.14.204.239)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Feb 2008 17:52:50 +0000
Received: by qb-out-0506.google.com with SMTP id o21so2587746qba.9
        for <java-user@lucene.apache.org>; Mon, 25 Feb 2008 09:52:57 -0800 (PST)
Received: by 10.110.31.11 with SMTP id e11mr2418948tie.56.1203961976199;
        Mon, 25 Feb 2008 09:52:56 -0800 (PST)
Received: from ?10.17.4.4? ( [96.237.56.13])
        by mx.google.com with ESMTPS id h35sm102780wxd.20.2008.02.25.09.52.52
        (version=TLSv1/SSLv3 cipher=OTHER);
        Mon, 25 Feb 2008 09:52:54 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v753)
In-Reply-To: <71A055EDEEC74CA9BEA3495D129C61B5@msrvcn04>
References: <op.t6w6lsk82ic4zu@sj-desktop> <9ac0c6aa0802220444i99eef1dy405def2fca6d85f0@mail.gmail.com> <A8AA0EE8813F4B63B78196D1498BAE8D@msrvcn04> <530E6B98-A22D-432D-96E2-034C0647F358@mikemccandless.com> <7BEAB3A01000439293ECD441C0B58E6D@msrvcn04> <0FA829F6-94BE-4F39-A563-9A731B9FE3B0@mikemccandless.com> <71A055EDEEC74CA9BEA3495D129C61B5@msrvcn04>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <057E6190-5A53-4D1F-93E6-73F334374EFB@mikemccandless.com>
Content-Transfer-Encoding: 7bit
From: Michael McCandless <lucene@mikemccandless.com>
Subject: Re: Transactions in Lucene
Date: Mon, 25 Feb 2008 12:52:42 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.753)
X-Virus-Checked: Checked by ClamAV on apache.org


I don't think creating an IndexWriter is very expensive at all.

Especially compared to creating an IndexReader, for example.

Mike

<spring@gmx.eu> wrote:

>>> For what time is the 2.4 release planned?
>>
>> Not really sure at this point ...
>
> Hm. Digging into IndexWriter#init it seems that this is a really  
> expensive
> operation and thus my self made "commit" too. Isn't it?
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32775-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 25 18:31:15 2008
Return-Path: <java-user-return-32775-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76095 invoked from network); 25 Feb 2008 18:31:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Feb 2008 18:31:15 -0000
Received: (qmail 56083 invoked by uid 500); 25 Feb 2008 18:31:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55718 invoked by uid 500); 25 Feb 2008 18:31:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55707 invoked by uid 99); 25 Feb 2008 18:31:02 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Feb 2008 10:31:02 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of spring@gmx.eu designates 213.165.64.20 as permitted sender)
Received: from [213.165.64.20] (HELO mail.gmx.net) (213.165.64.20)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 25 Feb 2008 18:30:16 +0000
Received: (qmail invoked by alias); 25 Feb 2008 18:30:33 -0000
Received: from e178079063.adsl.alicedsl.de (EHLO msrvcn04) [85.178.79.63]
  by mail.gmx.net (mp009) with SMTP; 25 Feb 2008 19:30:34 +0100
X-Authenticated: #2635966
X-Provags-ID: V01U2FsdGVkX1/eF71BMRHeJ9+KW07GXuu+FYMP5od7zrmfqepiac
	8+DRwvxk93NprN
From: <spring@gmx.eu>
To: <java-user@lucene.apache.org>
References: <op.t6w6lsk82ic4zu@sj-desktop> <9ac0c6aa0802220444i99eef1dy405def2fca6d85f0@mail.gmail.com> <A8AA0EE8813F4B63B78196D1498BAE8D@msrvcn04> <530E6B98-A22D-432D-96E2-034C0647F358@mikemccandless.com> <7BEAB3A01000439293ECD441C0B58E6D@msrvcn04> <0FA829F6-94BE-4F39-A563-9A731B9FE3B0@mikemccandless.com> <71A055EDEEC74CA9BEA3495D129C61B5@msrvcn04> <057E6190-5A53-4D1F-93E6-73F334374EFB@mikemccandless.com>
Subject: RE: Transactions in Lucene
Date: Mon, 25 Feb 2008 19:30:41 +0100
Message-ID: <5C02A27FC2754D9D970CB4C9219110DC@msrvcn04>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
Thread-Index: Ach311brDQKKOdk/SPSJGgfj7pUR3AABLsOg
In-Reply-To: <057E6190-5A53-4D1F-93E6-73F334374EFB@mikemccandless.com>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.3790.4133
X-Y-GMX-Trusted: 0
X-Virus-Checked: Checked by ClamAV on apache.org

> I don't think creating an IndexWriter is very expensive at all.

Ah ok. I tested it. Creating an IndexWriter on an index with 10.000 docs
(about 15 MB) takes about 200 ms.

This is a very cheap operation for me ;)

I only saw the many calls in init() which reads files and so on and
therefore I tought it could be expensive.

Thank you!


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32776-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 25 22:56:41 2008
Return-Path: <java-user-return-32776-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 74279 invoked from network); 25 Feb 2008 22:56:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Feb 2008 22:56:41 -0000
Received: (qmail 24010 invoked by uid 500); 25 Feb 2008 22:56:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23978 invoked by uid 500); 25 Feb 2008 22:56:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23966 invoked by uid 99); 25 Feb 2008 22:56:28 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Feb 2008 14:56:28 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of krazedsun@gmail.com designates 209.85.162.182 as permitted sender)
Received: from [209.85.162.182] (HELO el-out-1112.google.com) (209.85.162.182)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Feb 2008 22:55:55 +0000
Received: by el-out-1112.google.com with SMTP id m34so1552769ele.11
        for <java-user@lucene.apache.org>; Mon, 25 Feb 2008 14:56:04 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=XnIyBLge3ayvTekHtONsHRrKAD9TullGClKXb6AvjPQ=;
        b=fU/3+VcTcx+A/1oNJuow+719Ppg1AZgPFyjYdTNCDBil2AvKclpuk2Obc8qU8n6UvC+HJLAVbbp+3B2Y59q9+RzwC3WijaBrjMqqOYn7UrkpUtig3/dRfyRsEpoaA6I4fSbJcWbype3pruvuihtl3W3ISvXGWLxOJG0DtfrH3I0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=ZAcIytMFQiapldv36tDCGKMXNQOCXV4WfyaY4oMAbHqMF19MsCSyuvx0HS2Q/ZPM4rsTZppPmWvYSTzpTVs5m3VpK694XUB+Bu/Nw/LwsW4un3zOzuC5Dnq3MAn/ff9QcN1wVCDR6R9brhRJ0od7eejhuYQP1r2pzVGqeQjGZmY=
Received: by 10.114.60.19 with SMTP id i19mr4394919waa.142.1203980163395;
        Mon, 25 Feb 2008 14:56:03 -0800 (PST)
Received: by 10.114.149.12 with HTTP; Mon, 25 Feb 2008 14:56:03 -0800 (PST)
Message-ID: <99ca131e0802251456v51e8f22bmb300f15bd2708890@mail.gmail.com>
Date: Tue, 26 Feb 2008 09:56:03 +1100
From: "Jim Bogan" <krazedsun@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: regex expressions within phrase queries
In-Reply-To: <Pine.LNX.4.62.0802211636570.27615@radix.cryptio.net>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_14972_31808052.1203980163411"
References: <99ca131e0802141625m7a83a613v4b7da728b0a5953b@mail.gmail.com>
	 <Pine.LNX.4.62.0802142245330.25935@radix.cryptio.net>
	 <99ca131e0802181631y2b16e0cdqdd70c1f7dce97249@mail.gmail.com>
	 <Pine.LNX.4.62.0802211636570.27615@radix.cryptio.net>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_14972_31808052.1203980163411
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Thanks for the advice Chris.  What I am working on now is extracting the
matching phrases.  The current code for MultiPhraseQuery and SpanQueries
just return all matching terms, not matching phrases.  I implemented some
code matching up the TermPositions, but this is pretty slow.  Is there any
way to actually get the matching phrases more efficiently?

On Fri, Feb 22, 2008 at 11:42 AM, Chris Hostetter <hossman_lucene@fucit.org>
wrote:

>
> : By custom phrase query class I was trying to ask if it would be
> possible, or
> : even a good idea, to create a modified PhraseQuery class that is more
> : efficient that span queries (as I only want to use it for phrases). This
> : class might have multiple possible terms generated from a regex at a
> certain
> : position.
>
> Ah! ... sorry, i missunderstood.  the answer to the questions are: yes it
> is possible and yes it is a good idea if you don't need the full power of
> Spans.
>
> The answerto the question you didn't ask is: yes such a thing exists ...
> take a look at MultiPhraseQuery.  :)
>
> QueryParser uses it when getFieldQuery returns multiple terms with a
> position gap of "0" ... which is perfect for things like synonys.
>
> you could have your own custom RegexPhraseQuery that can contain
> RegexQueries and TermQueries (instead of just Terms) and then rewrite to a
> MultiPhraseQuery once you rewrite the RegexQueries to a TermQueries.
>
> ...or something like that.
>
>
>
>
>
>
>
> :
> :
> : On Feb 15, 2008 5:47 PM, Chris Hostetter <hossman_lucene@fucit.org>
> wrote:
> :
> : >
> : > : I was wondering if anyone has a more efficient method for achieving
> : > this.
> : > : Would changing QueryParser.jj and developing a custom PhraseQuery
> class
> : > be a
> : > : good idea?  Any comments would be appreciated.
> : >
> : > extending QueryParser and overriding the getPhraseQuery function to
> return
> : > your own SpanNearQueries composted of SpanRegexQueries shouldn't be
> any
> : > more efficient then modifying the QueryParser grammer.  either way
> it's
> : > going to be calling some method you write that returns a
> SpanNearQuery.
> : >
> : >
> : >
> : > -Hoss
> : >
> : >
> : > ---------------------------------------------------------------------
> : > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> : > For additional commands, e-mail: java-user-help@lucene.apache.org
> : >
> : >
> :
>
>
>
> -Hoss
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_14972_31808052.1203980163411--

From java-user-return-32777-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Feb 25 23:05:05 2008
Return-Path: <java-user-return-32777-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78458 invoked from network); 25 Feb 2008 23:05:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Feb 2008 23:05:05 -0000
Received: (qmail 37537 invoked by uid 500); 25 Feb 2008 23:04:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37516 invoked by uid 500); 25 Feb 2008 23:04:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37505 invoked by uid 99); 25 Feb 2008 23:04:53 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Feb 2008 15:04:53 -0800
X-ASF-Spam-Status: No, hits=3.2 required=10.0
	tests=RCVD_IN_BL_SPAMCOP_NET,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [192.115.188.197] (HELO out2.bezeqint.net) (192.115.188.197)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Feb 2008 23:04:16 +0000
Received: from your0548c161e1 (barak.cellcom.co.il [212.150.188.226])
	by out2.bezeqint.net (Postfix) with ESMTPA id B8EDC210C1F
	for <java-user@lucene.apache.org>; Tue, 26 Feb 2008 01:02:52 +0200 (IST)
From: "Itamar Syn-Hershko" <itamar@divrei-tora.com>
To: <java-user@lucene.apache.org>
Subject: RE: Rebuilding Document from index?
Date: Tue, 26 Feb 2008 01:04:13 +0200
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook, Build 11.0.5510
Thread-Index: Ach1UyWzSG1sm9G9TYexbWZz/jvC7QAAqFNAAKsse0A=
In-Reply-To: <1B6734D9502D4DA08524DCDDA7F9D2CF@msrvcn04>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3198
Message-Id: <20080225230252.B8EDC210C1F@out2.bezeqint.net>
X-Virus-Checked: Checked by ClamAV on apache.org

Hello again,

If I wanted to do this programmatically, how would I do this (retrieve a
list of all terms in a field for a specific document - better if it was in
alphabettic order and with frequency data)?

Thanks,

Itamar. 

-----Original Message-----
From: spring@gmx.eu [mailto:spring@gmx.eu] 
Sent: Friday, February 22, 2008 3:22 PM
To: java-user@lucene.apache.org
Subject: RE: Rebuilding Document from index?

You can use Luke to rebuild the document. It will show you the terms of the
analyzed document, not the original content.
And this is what you want, if I understood you correctly. 

> -----Original Message-----
> From: Itamar Syn-Hershko [mailto:itamar@divrei-tora.com]
> Sent: Freitag, 22. Februar 2008 14:02
> To: java-user@lucene.apache.org
> Subject: Rebuilding Document from index?
> 
> Hi,
>  
> Is it possible to re-create a document from an index, if its not 
> stored?
> What I'm looking for is a way to have a text document with the text 
> AFTER it was analyzed, so I can see how my analyzer handles certain 
> cases. So that means I don't care if I will not get the original 
> document. I want to see the document as the index knows it.
>  
> Thanks in advance,
>  
> Itamar.
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32778-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 26 00:34:36 2008
Return-Path: <java-user-return-32778-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 15184 invoked from network); 26 Feb 2008 00:34:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Feb 2008 00:34:36 -0000
Received: (qmail 37505 invoked by uid 500); 26 Feb 2008 00:34:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37301 invoked by uid 500); 26 Feb 2008 00:34:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37290 invoked by uid 99); 26 Feb 2008 00:34:24 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Feb 2008 16:34:24 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [203.217.22.128] (HELO file1.syd.nuix.com.au) (203.217.22.128)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Feb 2008 00:33:38 +0000
Received: from host68.syd.nuix.com.au (host68.syd.nuix.com.au [192.168.222.68])
	by file1.syd.nuix.com.au (Postfix) with ESMTP id B804A4A8883
	for <java-user@lucene.apache.org>; Tue, 26 Feb 2008 11:33:22 +1100 (EST)
From: Daniel Noll <daniel@nuix.com>
Organization: Nuix Pty Ltd
To: java-user@lucene.apache.org
Subject: Re: When does QueryParser creates PhraseQueries
Date: Tue, 26 Feb 2008 11:30:17 +1100
User-Agent: KMail/1.9.6 (enterprise 0.20070907.709405)
References: <47C2CB27.2070609@web.de>
In-Reply-To: <47C2CB27.2070609@web.de>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="utf-8"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200802261130.17303.daniel@nuix.com>
X-Virus-Checked: Checked by ClamAV on apache.org

On Tuesday 26 February 2008 01:05:27 duiduder@web.de wrote:
> Hi all,
>
> I have the behaviour that when I search with Luke (version 0.7.1, Lucene
> version 2.2.0) inside an arbritray field, the QueryParser creates a
> PhraseQuery when I type in
> ~              termA/termB      (no "...")
> When I read the documentation at the Lucene webside, I only find the syntax
> ~             "termA termB"
> for creating phrase queries.
>
> Did I make a mistake? Can I configure the QueryParser that he simply
> tokenizes between termA and termB, and makes a simple BooleanQuery as he do
> in the case of a whitespace delimiter?

You'll find they both go through getFieldQuery() as-is.  The default 
implementation of that runs the string through the analyser; if it happens to 
return more than one token then it will create a PhraseQuery instead of a 
TermQuery.

If you subclass QueryParser than you can override this method and modify it to 
do whatever evil trick you want to do.

Daniel

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32779-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 26 07:34:28 2008
Return-Path: <java-user-return-32779-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98009 invoked from network); 26 Feb 2008 07:34:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Feb 2008 07:34:27 -0000
Received: (qmail 21776 invoked by uid 500); 26 Feb 2008 07:34:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21729 invoked by uid 500); 26 Feb 2008 07:34:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21711 invoked by uid 99); 26 Feb 2008 07:34:14 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Feb 2008 23:34:14 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Feb 2008 07:33:41 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id CAE9171C321; Mon, 25 Feb 2008 23:33:50 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id C778571C314
	for <java-user@lucene.apache.org>; Mon, 25 Feb 2008 23:33:50 -0800 (PST)
Date: Mon, 25 Feb 2008 23:33:50 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Changing wildcard characters
In-Reply-To: <F1C364D7FF714D55A2FD8621F9F26BD3@msrvcn04>
Message-ID: <Pine.LNX.4.62.0802252333000.4253@radix.cryptio.net>
References: <F1C364D7FF714D55A2FD8621F9F26BD3@msrvcn04>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: is it possible to change the wildcard charaters which are used by
: QueryParser?
: 
: Or do I have to replace them myself in the query string?

You can change the grammer and regenerate QUeryParser.java, but there is 
no progromatic mechanism for this.


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32780-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 26 09:54:57 2008
Return-Path: <java-user-return-32780-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42846 invoked from network); 26 Feb 2008 09:54:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Feb 2008 09:54:57 -0000
Received: (qmail 8156 invoked by uid 500); 26 Feb 2008 09:54:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8130 invoked by uid 500); 26 Feb 2008 09:54:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8119 invoked by uid 99); 26 Feb 2008 09:54:44 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Feb 2008 01:54:44 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [131.246.120.220] (HELO mailgw1.uni-kl.de) (131.246.120.220)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Feb 2008 09:54:10 +0000
Received: from dfki-1002.dfki.uni-kl.de (dfki-1002.dfki.uni-kl.de [131.246.195.2])
	by mailgw1.uni-kl.de (8.13.8/8.13.8/Debian-3) with ESMTP id m1Q9sHAG027302
	for <java-user@lucene.apache.org>; Tue, 26 Feb 2008 10:54:17 +0100
Received: from serv-4100.kl.dfki.de (serv-4100.kl.dfki.de [192.168.41.180])
	by dfki-1002.dfki.uni-kl.de (8.13.8+Sun/8.11.4) with ESMTP id m1Q9rUeP002124
	for <java-user@lucene.apache.org>; Tue, 26 Feb 2008 10:53:30 +0100 (CET)
Received: from [192.168.41.166] (pc-4176.kl.dfki.de [192.168.41.166])
	by serv-4100.kl.dfki.de (8.13.8+Sun/8.13.8) with ESMTP id m1Q9sGw9023681
	for <java-user@lucene.apache.org>; Tue, 26 Feb 2008 10:54:17 +0100 (CET)
Message-ID: <47C3E1C8.3030307@web.de>
Date: Tue, 26 Feb 2008 10:54:16 +0100
From: duiduder@web.de
User-Agent: Thunderbird 2.0.0.9 (X11/20071114)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: When does QueryParser creates PhraseQueries
References: <47C2CB27.2070609@web.de> <200802261130.17303.daniel@nuix.com>
In-Reply-To: <200802261130.17303.daniel@nuix.com>
X-Enigmail-Version: 0.95.6
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Daniel, thank you very much for the hint!

I stepped through the code and tried some scenarios.

when I type in with whitespace delimiters
~      termA termB
this will result into two invocations of getFieldQuery, one for each term.

when I type
~      termA/termB
or
~     "termA termB"
this will result into one invocation of getFieldQuery for the whole String.

Why makes the parser a difference between termA/termB and termA termB?
The Analyzer tokenizes between both delimiters.


Christian


Daniel Noll schrieb:
| On Tuesday 26 February 2008 01:05:27 duiduder@web.de wrote:
|> Hi all,
|>
|> I have the behaviour that when I search with Luke (version 0.7.1, Lucene
|> version 2.2.0) inside an arbritray field, the QueryParser creates a
|> PhraseQuery when I type in
|> ~              termA/termB      (no "...")
|> When I read the documentation at the Lucene webside, I only find the syntax
|> ~             "termA termB"
|> for creating phrase queries.
|>
|> Did I make a mistake? Can I configure the QueryParser that he simply
|> tokenizes between termA and termB, and makes a simple BooleanQuery as he do
|> in the case of a whitespace delimiter?
|
| You'll find they both go through getFieldQuery() as-is.  The default
| implementation of that runs the string through the analyser; if it happens to
| return more than one token then it will create a PhraseQuery instead of a
| TermQuery.
|
| If you subclass QueryParser than you can override this method and modify it to
| do whatever evil trick you want to do.
|
| Daniel
|
| ---------------------------------------------------------------------
| To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
| For additional commands, e-mail: java-user-help@lucene.apache.org
|
|
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v2.0.4-svn0 (GNU/Linux)

iD8DBQFHw+HIQoTr50f1tpcRAjPvAKCQCfmQj92RLqIdo4ZdpTmH8repBgCfa+tU
zV0eF04C5ijDXVHkG4J8RiM=
=eupM
-----END PGP SIGNATURE-----

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32781-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 26 12:09:49 2008
Return-Path: <java-user-return-32781-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89450 invoked from network); 26 Feb 2008 12:09:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Feb 2008 12:09:49 -0000
Received: (qmail 94127 invoked by uid 500); 26 Feb 2008 12:09:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94096 invoked by uid 500); 26 Feb 2008 12:09:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94085 invoked by uid 99); 26 Feb 2008 12:09:37 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Feb 2008 04:09:37 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.200.175] (HELO wf-out-1314.google.com) (209.85.200.175)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Feb 2008 12:09:02 +0000
Received: by wf-out-1314.google.com with SMTP id 28so2195950wff.20
        for <java-user@lucene.apache.org>; Tue, 26 Feb 2008 04:09:11 -0800 (PST)
Received: by 10.142.109.16 with SMTP id h16mr3603031wfc.117.1204027751006;
        Tue, 26 Feb 2008 04:09:11 -0800 (PST)
Received: from ?10.17.4.4? ( [96.237.56.13])
        by mx.google.com with ESMTPS id m29sm7469343wrm.37.2008.02.26.04.09.10
        (version=TLSv1/SSLv3 cipher=OTHER);
        Tue, 26 Feb 2008 04:09:10 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v753)
In-Reply-To: <5C02A27FC2754D9D970CB4C9219110DC@msrvcn04>
References: <op.t6w6lsk82ic4zu@sj-desktop> <9ac0c6aa0802220444i99eef1dy405def2fca6d85f0@mail.gmail.com> <A8AA0EE8813F4B63B78196D1498BAE8D@msrvcn04> <530E6B98-A22D-432D-96E2-034C0647F358@mikemccandless.com> <7BEAB3A01000439293ECD441C0B58E6D@msrvcn04> <0FA829F6-94BE-4F39-A563-9A731B9FE3B0@mikemccandless.com> <71A055EDEEC74CA9BEA3495D129C61B5@msrvcn04> <057E6190-5A53-4D1F-93E6-73F334374EFB@mikemccandless.com> <5C02A27FC2754D9D970CB4C9219110DC@msrvcn04>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <980FE2B0-776F-4C98-B86E-EC36F4013C1D@mikemccandless.com>
Content-Transfer-Encoding: 7bit
From: Michael McCandless <lucene@mikemccandless.com>
Subject: Re: Transactions in Lucene
Date: Tue, 26 Feb 2008 07:09:08 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.753)
X-Virus-Checked: Checked by ClamAV on apache.org


Super!  Thanks for testing this & posting...

Mike

<spring@gmx.eu> wrote:

>> I don't think creating an IndexWriter is very expensive at all.
>
> Ah ok. I tested it. Creating an IndexWriter on an index with 10.000  
> docs
> (about 15 MB) takes about 200 ms.
>
> This is a very cheap operation for me ;)
>
> I only saw the many calls in init() which reads files and so on and
> therefore I tought it could be expensive.
>
> Thank you!
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32782-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 26 13:50:44 2008
Return-Path: <java-user-return-32782-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 34760 invoked from network); 26 Feb 2008 13:50:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Feb 2008 13:50:44 -0000
Received: (qmail 67421 invoked by uid 500); 26 Feb 2008 13:50:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67394 invoked by uid 500); 26 Feb 2008 13:50:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67383 invoked by uid 99); 26 Feb 2008 13:50:32 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Feb 2008 05:50:32 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [131.246.120.220] (HELO mailgw1.uni-kl.de) (131.246.120.220)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Feb 2008 13:49:58 +0000
Received: from dfki-1002.dfki.uni-kl.de (dfki-1002.dfki.uni-kl.de [131.246.195.2])
	by mailgw1.uni-kl.de (8.13.8/8.13.8/Debian-3) with ESMTP id m1QDo5kJ004018
	for <java-user@lucene.apache.org>; Tue, 26 Feb 2008 14:50:05 +0100
Received: from serv-4100.kl.dfki.de (serv-4100.kl.dfki.de [192.168.41.180])
	by dfki-1002.dfki.uni-kl.de (8.13.8+Sun/8.11.4) with ESMTP id m1QDnIeq007756
	for <java-user@lucene.apache.org>; Tue, 26 Feb 2008 14:49:18 +0100 (CET)
Received: from [192.168.41.166] (pc-4176.kl.dfki.de [192.168.41.166])
	by serv-4100.kl.dfki.de (8.13.8+Sun/8.13.8) with ESMTP id m1QDo46B000647
	for <java-user@lucene.apache.org>; Tue, 26 Feb 2008 14:50:05 +0100 (CET)
Message-ID: <47C4190C.4040109@web.de>
Date: Tue, 26 Feb 2008 14:50:04 +0100
From: duiduder@web.de
User-Agent: Thunderbird 2.0.0.9 (X11/20071114)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: When does QueryParser creates PhraseQueries
References: <47C2CB27.2070609@web.de> <200802261130.17303.daniel@nuix.com>
In-Reply-To: <200802261130.17303.daniel@nuix.com>
X-Enigmail-Version: 0.95.6
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

So, I stepped throw the QueryParser code further, and I now
have found the source for this behaviour: the QueryParserTokenManager


~        System.out.println("This one returns the whole String:");

~        String strQuery = "home/reuschling";
~        QueryParserTokenManager tokenManager = new QueryParserTokenManager(new FastCharStream(new StringReader(strQuery)));

~        for (Token next = tokenManager.getNextToken(); !next.toString().equals(""); next = tokenManager.getNextToken())
~            System.out.println("'" + next + "'");


~        System.out.println("This returns the two tokenized Strings 'home' and 'reuschling':");

~        strQuery = "home reuschling";
~        tokenManager = new QueryParserTokenManager(new FastCharStream(new StringReader(strQuery)));

~        for (Token next = tokenManager.getNextToken(); !next.toString().equals(""); next = tokenManager.getNextToken())
~            System.out.println("'" + next + "'");

Looks that this is really hard-coded behaviour, and not Analyzer-specific.

I want to search for directories with tokenizing them, e.g. /home/reuschling - this seems to be not possible
with the current queryparser.

| If you subclass QueryParser than you can override this method and modify it to
| do whatever evil trick you want to do.

Overriding getFieldQuery() will not work because I can't differ between "home/reuschling", which should trigger a
PhraseQuery, and home/reuschling without apostrophe, which should trigger a BooleanQuery...I will search whether
I can find a better place for this:)

regards

Christian Reuschling


Daniel Noll schrieb:
| On Tuesday 26 February 2008 01:05:27 duiduder@web.de wrote:
|> Hi all,
|>
|> I have the behaviour that when I search with Luke (version 0.7.1, Lucene
|> version 2.2.0) inside an arbritray field, the QueryParser creates a
|> PhraseQuery when I type in
|> ~              termA/termB      (no "...")
|> When I read the documentation at the Lucene webside, I only find the syntax
|> ~             "termA termB"
|> for creating phrase queries.
|>
|> Did I make a mistake? Can I configure the QueryParser that he simply
|> tokenizes between termA and termB, and makes a simple BooleanQuery as he do
|> in the case of a whitespace delimiter?
|
| You'll find they both go through getFieldQuery() as-is.  The default
| implementation of that runs the string through the analyser; if it happens to
| return more than one token then it will create a PhraseQuery instead of a
| TermQuery.
|
| If you subclass QueryParser than you can override this method and modify it to
| do whatever evil trick you want to do.
|
| Daniel
|
| ---------------------------------------------------------------------
| To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
| For additional commands, e-mail: java-user-help@lucene.apache.org
|
|
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v2.0.4-svn0 (GNU/Linux)

iD8DBQFHxBkMQoTr50f1tpcRAq1aAJ9jxYa7jXF5M9iuTcjRNBCSA2cpkACfdOiV
jPrqqbiGvjhMDm3EIi9Eyw4=
=KArL
-----END PGP SIGNATURE-----

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32783-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 26 14:29:53 2008
Return-Path: <java-user-return-32783-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 46780 invoked from network); 26 Feb 2008 14:29:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Feb 2008 14:29:53 -0000
Received: (qmail 32693 invoked by uid 500); 26 Feb 2008 14:29:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32657 invoked by uid 500); 26 Feb 2008 14:29:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32646 invoked by uid 99); 26 Feb 2008 14:29:41 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Feb 2008 06:29:41 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 72.14.214.237 as permitted sender)
Received: from [72.14.214.237] (HELO hu-out-0506.google.com) (72.14.214.237)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Feb 2008 14:29:08 +0000
Received: by hu-out-0506.google.com with SMTP id 27so2412200hub.15
        for <java-user@lucene.apache.org>; Tue, 26 Feb 2008 06:29:15 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=28rJfwUhd8n6E18YHn/moGQz0eANQ7Fgn1hUWBAytzk=;
        b=lDklOcAAzHMfRNtU2tK5RRHorEvDKGGcCCMkKr6puCnwtni5KkbtGjbJPQOyP9rg43EiqeFRSUPNdyzcFvvGVBb2rcwydSg5d8aYxQiP0uTzzhAWr0EeZcpvQcODIShvuRDUtWX4ZU5J1GfpxjCcvy0tIOZUx/eWjkcApD5sAaQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=EPeBDKuL+WQXF5S7UxCXQvE6lG1KwTvcLHctUqR02h7sKfZeJPT2Af+7AaLkWHNXR3kFZa1jkzyw7yAeqVHzAcsLUYUitXDHwbPrXsoXYBDme+PSx9WrxVE2K118tYAzEHmwvH1Z1B0GQmuH3bEqwEl2zxpWfxzTWX0st3b2Yo8=
Received: by 10.82.115.8 with SMTP id n8mr8998187buc.28.1204036154303;
        Tue, 26 Feb 2008 06:29:14 -0800 (PST)
Received: by 10.82.151.7 with HTTP; Tue, 26 Feb 2008 06:29:14 -0800 (PST)
Message-ID: <359a92830802260629mce89160u8c8fe0724bade7c1@mail.gmail.com>
Date: Tue, 26 Feb 2008 09:29:14 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Rebuilding Document from index?
In-Reply-To: <20080225230252.B8EDC210C1F@out2.bezeqint.net>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_12450_30041473.1204036154285"
References: <1B6734D9502D4DA08524DCDDA7F9D2CF@msrvcn04>
	 <20080225230252.B8EDC210C1F@out2.bezeqint.net>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_12450_30041473.1204036154285
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

See TermDocs/TermEnum. Or perhaps TermFreqVector. I admit I haven't
used that last, but that family of methods ought to fix you up.

What problem are you trying to solve? Perhaps there are better
solutions to suggest....

Best
Erick

On Mon, Feb 25, 2008 at 6:04 PM, Itamar Syn-Hershko <itamar@divrei-tora.com>
wrote:

> Hello again,
>
> If I wanted to do this programmatically, how would I do this (retrieve a
> list of all terms in a field for a specific document - better if it was in
> alphabettic order and with frequency data)?
>
> Thanks,
>
> Itamar.
>
> -----Original Message-----
> From: spring@gmx.eu [mailto:spring@gmx.eu]
> Sent: Friday, February 22, 2008 3:22 PM
> To: java-user@lucene.apache.org
> Subject: RE: Rebuilding Document from index?
>
> You can use Luke to rebuild the document. It will show you the terms of
> the
> analyzed document, not the original content.
> And this is what you want, if I understood you correctly.
>
> > -----Original Message-----
> > From: Itamar Syn-Hershko [mailto:itamar@divrei-tora.com]
> > Sent: Freitag, 22. Februar 2008 14:02
> > To: java-user@lucene.apache.org
> > Subject: Rebuilding Document from index?
> >
> > Hi,
> >
> > Is it possible to re-create a document from an index, if its not
> > stored?
> > What I'm looking for is a way to have a text document with the text
> > AFTER it was analyzed, so I can see how my analyzer handles certain
> > cases. So that means I don't care if I will not get the original
> > document. I want to see the document as the index knows it.
> >
> > Thanks in advance,
> >
> > Itamar.
> >
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_12450_30041473.1204036154285--

From java-user-return-32784-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 26 16:34:46 2008
Return-Path: <java-user-return-32784-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71978 invoked from network); 26 Feb 2008 16:34:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Feb 2008 16:34:45 -0000
Received: (qmail 82917 invoked by uid 500); 26 Feb 2008 16:34:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82899 invoked by uid 500); 26 Feb 2008 16:34:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82888 invoked by uid 99); 26 Feb 2008 16:34:33 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Feb 2008 08:34:33 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [192.115.188.197] (HELO out2.bezeqint.net) (192.115.188.197)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Feb 2008 16:33:46 +0000
Received: from your0548c161e1 (unknown [80.250.149.60])
	by out2.bezeqint.net (Postfix) with ESMTPA id B1612210214
	for <java-user@lucene.apache.org>; Tue, 26 Feb 2008 18:32:28 +0200 (IST)
From: "Itamar Syn-Hershko" <itamar@divrei-tora.com>
To: <java-user@lucene.apache.org>
Subject: RE: Rebuilding Document from index?
Date: Tue, 26 Feb 2008 18:33:53 +0200
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook, Build 11.0.5510
Thread-Index: Ach4hAS0CUfc4HwXQLmP8ACOiUJTGgAEFiCA
In-Reply-To: <359a92830802260629mce89160u8c8fe0724bade7c1@mail.gmail.com>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3198
Message-Id: <20080226163228.B1612210214@out2.bezeqint.net>
X-Virus-Checked: Checked by ClamAV on apache.org


Implementing something like MoreLikeThis for Hebrew. Non-Hebrew
implementations are relevant, but much less accurate since a word like PURIM
can show up in the actual document with initials (LPURIM, BPURIM etc.) or
even with 1-4 letters after it which all reffer to the same term, and then
the score it will get upon analyzing using the current MoreLikeThis
implementation will not reflect its real importance.

I'm still trying to engineer the best possible solution for Lucene with
Hebrew, right now my path is NOT using a stemmer by default, only by
explicit request of the user. MoreLikeThis would only return relevant
results if I will use a non-stemmed scoring and lookup.

Itamar.

-----Original Message-----
From: Erick Erickson [mailto:erickerickson@gmail.com] 
Sent: Tuesday, February 26, 2008 4:29 PM
To: java-user@lucene.apache.org
Subject: Re: Rebuilding Document from index?

See TermDocs/TermEnum. Or perhaps TermFreqVector. I admit I haven't used
that last, but that family of methods ought to fix you up.

What problem are you trying to solve? Perhaps there are better solutions to
suggest....

Best
Erick

On Mon, Feb 25, 2008 at 6:04 PM, Itamar Syn-Hershko <itamar@divrei-tora.com>
wrote:

> Hello again,
>
> If I wanted to do this programmatically, how would I do this (retrieve 
> a list of all terms in a field for a specific document - better if it 
> was in alphabettic order and with frequency data)?
>
> Thanks,
>
> Itamar.
>
> -----Original Message-----
> From: spring@gmx.eu [mailto:spring@gmx.eu]
> Sent: Friday, February 22, 2008 3:22 PM
> To: java-user@lucene.apache.org
> Subject: RE: Rebuilding Document from index?
>
> You can use Luke to rebuild the document. It will show you the terms 
> of the analyzed document, not the original content.
> And this is what you want, if I understood you correctly.
>
> > -----Original Message-----
> > From: Itamar Syn-Hershko [mailto:itamar@divrei-tora.com]
> > Sent: Freitag, 22. Februar 2008 14:02
> > To: java-user@lucene.apache.org
> > Subject: Rebuilding Document from index?
> >
> > Hi,
> >
> > Is it possible to re-create a document from an index, if its not 
> > stored?
> > What I'm looking for is a way to have a text document with the text 
> > AFTER it was analyzed, so I can see how my analyzer handles certain 
> > cases. So that means I don't care if I will not get the original 
> > document. I want to see the document as the index knows it.
> >
> > Thanks in advance,
> >
> > Itamar.
> >
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32785-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 26 17:32:59 2008
Return-Path: <java-user-return-32785-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97828 invoked from network); 26 Feb 2008 17:32:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Feb 2008 17:32:59 -0000
Received: (qmail 92049 invoked by uid 500); 26 Feb 2008 17:32:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92024 invoked by uid 500); 26 Feb 2008 17:32:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92013 invoked by uid 99); 26 Feb 2008 17:32:47 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Feb 2008 09:32:47 -0800
X-ASF-Spam-Status: No, hits=-4.0 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [64.18.1.189] (HELO exprod6og105.obsmtp.com) (64.18.1.189)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 26 Feb 2008 17:32:12 +0000
Received: from source ([139.56.8.7]) by exprod6ob105.postini.com ([64.18.5.12]) with SMTP;
	Tue, 26 Feb 2008 09:32:19 PST
Received: from triangulum2.broadvision.com (triangulum2.broadvision.com [10.10.32.38])
	by nebula2.broadvision.com (8.10.2+Sun/8.10.2) with ESMTP id m1QHYES03890
	for <java-user@lucene.apache.org>; Tue, 26 Feb 2008 09:34:14 -0800 (PST)
Received: from rw-gw-01.BroadVision.com (localhost [127.0.0.1])
	by triangulum2.broadvision.com (8.9.3+Sun/8.9.3) with ESMTP id JAA00259
	for <java-user@lucene.apache.org>; Tue, 26 Feb 2008 09:32:27 -0800 (PST)
Received: by rw-gw-01.broadvision.com with Internet Mail Service (5.5.2655.55)
	id <C3TTA1VL>; Tue, 26 Feb 2008 09:32:18 -0800
Message-ID: <F1C79CDF8799D944A3156C4035173174180B5E@rw-msg-02.broadvision.com>
From: "Zhang, Lisheng" <Lisheng.Zhang@broadvision.com>
To: java-user@lucene.apache.org
Subject: How to find most popular terms quickly?
Date: Tue, 26 Feb 2008 09:32:17 -0800
MIME-Version: 1.0
X-Mailer: Internet Mail Service (5.5.2655.55)
Content-Type: text/plain;
	charset="ISO-8859-1"
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

I have a very large amount of documents indexed, one field is Brand
(untokenized), now I need to find the most popular brand (which brand
is used by most Docs), one way is:

1) open IndexReader.
2) call terms() to get all terms, then filter out terms in field Brand.
3) call termDocs(Term) to get Docs having each special Brand.
4) count which term is used by most docs from above result.

Is this the most efficient way?

Thanks very much for helps, Lisheng

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32786-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 26 18:15:43 2008
Return-Path: <java-user-return-32786-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 18668 invoked from network); 26 Feb 2008 18:15:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Feb 2008 18:15:43 -0000
Received: (qmail 87205 invoked by uid 500); 26 Feb 2008 18:15:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87172 invoked by uid 500); 26 Feb 2008 18:15:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87161 invoked by uid 99); 26 Feb 2008 18:15:31 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Feb 2008 10:15:31 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [216.75.55.147] (HELO stimulussoft.com) (216.75.55.147)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Feb 2008 18:14:57 +0000
Received: (qmail 14722 invoked by uid 511); 26 Feb 2008 10:15:06 -0800
Received: from 41.243.252.96 by live.stimulussoft.com (envelope-from <jamie@stimulussoft.com>, uid 509) with qmail-scanner-1.25-st-qms 
 (spamassassin: 3.2.3. perlscan: 1.25-st-qms.  
 Clear:RC:0(41.243.252.96):SA:0(-2.3/5.0):. 
 Processed in 0.872071 secs); 26 Feb 2008 18:15:06 -0000
X-Antivirus-MYDOMAIN-Mail-From: jamie@stimulussoft.com via live.stimulussoft.com
X-Antivirus-MYDOMAIN: 1.25-st-qms (Clear:RC:0(41.243.252.96):SA:0(-2.3/5.0):. Processed in 0.872071 secs Process 14712)
Received: from dsl-243-252-96.telkomadsl.co.za (HELO ?192.168.0.50?) (jamie@stimulussoft.com@41.243.252.96)
  by stimulussoft.com with SMTP; 26 Feb 2008 10:15:05 -0800
Message-ID: <47C457E5.6020704@stimulussoft.com>
Date: Tue, 26 Feb 2008 20:18:13 +0200
From: Jamie <jamie@stimulussoft.com>
User-Agent: Thunderbird 2.0.0.9 (Windows/20071031)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Lucene Search Performance
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, hits=-2.3 required=5.0

Hi

I am looking for a way to improve the search performance of my 
application. I've followed every suggestion in the Lucene Wiki but the 
search is still too slow with large indexes. I was wondering whether 
there was a way to restrict a search to a specific time period and in 
doing so sacrifice the quality of search results? Any other suggestions 
on how to improve search performance?

Much appreciate

Jamie


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32787-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 26 20:21:52 2008
Return-Path: <java-user-return-32787-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 87844 invoked from network); 26 Feb 2008 20:21:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Feb 2008 20:21:51 -0000
Received: (qmail 58614 invoked by uid 500); 26 Feb 2008 20:21:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58142 invoked by uid 500); 26 Feb 2008 20:21:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58131 invoked by uid 99); 26 Feb 2008 20:21:40 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Feb 2008 12:21:40 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of stopman@gmail.com designates 72.14.214.230 as permitted sender)
Received: from [72.14.214.230] (HELO hu-out-0506.google.com) (72.14.214.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Feb 2008 20:21:07 +0000
Received: by hu-out-0506.google.com with SMTP id 27so2667768hub.15
        for <java-user@lucene.apache.org>; Tue, 26 Feb 2008 12:21:15 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=txnxdjo2EJObHGBKr2PWXY0g8SkSnMMeKQvD4eqxkwE=;
        b=eNZqhdf0He2IyWt/0ib99BUZqixbF8EgpOVdu24UoeUQORytxiTEaG3oUS/SpdShVnUC/dQs1J/Stp3vTv8iS7rw9GprLSA9iFIdGKxH+b33g+cqANClfFXOjrpysvq6tK3UFkXHbGiAST5TVEgoJBDyI/6Fqm+PBHJttUddKzA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=Zx1bL65hNPyKHwgYkEGiJqWl7GncilXpFVKphAa3SKSGDFbNCVoMLkxipKHCLoqXbD36sjniNQcQKPcfez8yPtn9kz/ZPqQ5t7w1nOsK+w5WvVEORozd5icgxsCNWktBGyBBssojji4mTgB9veAkA6NcvV5gVnWHPvZoBK4rKmA=
Received: by 10.82.111.8 with SMTP id j8mr9955618buc.2.1204057275005;
        Tue, 26 Feb 2008 12:21:15 -0800 (PST)
Received: by 10.82.139.19 with HTTP; Tue, 26 Feb 2008 12:21:14 -0800 (PST)
Message-ID: <652776090802261221i58cb0247n8d4c28b3290c387d@mail.gmail.com>
Date: Tue, 26 Feb 2008 12:21:14 -0800
From: "Michael Stoppelman" <stopman@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene Search Performance
In-Reply-To: <47C457E5.6020704@stimulussoft.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_17217_17676846.1204057274994"
References: <47C457E5.6020704@stimulussoft.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_17217_17676846.1204057274994
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

On Tue, Feb 26, 2008 at 10:18 AM, Jamie <jamie@stimulussoft.com> wrote:

> Hi
>
> I am looking for a way to improve the search performance of my
> application. I've followed every suggestion in the Lucene Wiki but the
> search is still too slow with large indexes. I was wondering whether


Did you optimize your index yet? That gave me a 2x bump.

Have you put timers around parts of your code? Maybe it's something
unrelated to lucene.
You should probably give more details on your setup if you want more helpful
advice.


>
> there was a way to restrict a search to a specific time period and in
> doing so sacrifice the quality of search results? Any other suggestions
> on how to improve search performance?
>
> Much appreciate
>
> Jamie
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_17217_17676846.1204057274994--

From java-user-return-32788-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 26 20:36:13 2008
Return-Path: <java-user-return-32788-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95269 invoked from network); 26 Feb 2008 20:36:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Feb 2008 20:36:13 -0000
Received: (qmail 96775 invoked by uid 500); 26 Feb 2008 20:36:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96753 invoked by uid 500); 26 Feb 2008 20:36:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 85242 invoked by uid 99); 26 Feb 2008 20:32:05 -0000
X-ASF-Spam-Status: No, hits=-4.0 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of stanleyw@csail.mit.edu designates 128.30.2.149 as permitted sender)
Date: Tue, 26 Feb 2008 15:31:37 -0500 (EST)
From: Stanley Xinlei Wang <stanleyw@csail.mit.edu>
To: java-user@lucene.apache.org
Subject: Question: Using Shingle Analyzer NGramAnalyzerWrapper in Lucene
Message-ID: <Pine.LNX.4.64.0802261517120.30256@sls-370-9.csail.mit.edu>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII; format=flowed
Sender: Xinlei Wang <stanleyw@csail.mit.edu>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

In Lucene, I'm trying to perform word-level bi-gram query parsing using 
NGramAnalyzerWrapper.  I'm couldn't get any word pairs in the parsed query 
and I was wondering what I should do to make this work.  I'm using Lucene 
2.2.0

I'm using the files from: https://issues.apache.org/jira/browse/lucene-400

My code is:

NGramAnalyzerWrapper analyzer = new NGramAnalyzerWrapper(new
 	StandardAnalyzer(), 2);
QueryParser p = new QueryParser("info", analyzer);
Query query = lyricsParser.parse("this is my query");
System.out.println(query.toString());

When I run this, I get the following output, which has no bi-grams:

lyrics:this lyrics:is lyrics:a lyrics:query


Thank you for your help!

Stanley

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32789-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 26 20:46:02 2008
Return-Path: <java-user-return-32789-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99773 invoked from network); 26 Feb 2008 20:46:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Feb 2008 20:46:02 -0000
Received: (qmail 16838 invoked by uid 500); 26 Feb 2008 20:45:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16810 invoked by uid 500); 26 Feb 2008 20:45:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16781 invoked by uid 99); 26 Feb 2008 20:45:48 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Feb 2008 12:45:48 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Feb 2008 20:44:59 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1JU6fw-0003Nv-8v
	for java-user@lucene.apache.org; Tue, 26 Feb 2008 12:45:20 -0800
Message-ID: <15696719.post@talk.nabble.com>
Date: Tue, 26 Feb 2008 12:45:20 -0800 (PST)
From: Dharmalingam <dganesan@fc-md.umd.edu>
To: java-user@lucene.apache.org
Subject: Vector Space Model: New Similarity Implementation Issues
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Nabble-From: dganesan@fc-md.umd.edu
X-Virus-Checked: Checked by ClamAV on apache.org


Hi List,

I am pretty new to Lucene. Certainly, it is very exciting. I need to
implement a new Similarity class based on the Term Vector Space Model given
in http://www.miislita.com/term-vector/term-vector-3.html

Although that model is similar to Lucene=E2=80=99s model
(http://hudson.zones.apache.org/hudson/job/Lucene-trunk/javadoc//org/apache=
/lucene/search/Similarity.html),
I am having hard time to extend the Similarity class to calculate that
model.

In that model, =E2=80=9Ctf=E2=80=9D is multiplied with Idf for all terms in=
 the index, but
in Lucene =E2=80=9Ctf=E2=80=9D is calculated only for terms in the given Qu=
ery. Because of
that effect, the norm calculation should also include =E2=80=9Cidf=E2=80=9D=
 for all terms.
Lucene calculates the norm, during indexing, by =E2=80=9Cjust=E2=80=9D coun=
ting the number
of terms per document. In the web formula (in miislita.com), a document nor=
m
is calculated after multiplying =E2=80=9Ctf=E2=80=9D and =E2=80=9Cidf=E2=80=
=9D.

FYI: I could implement =E2=80=9Cidf=E2=80=9D according to miisliat.com form=
ula, but not the
=E2=80=9Ctf=E2=80=9D and =E2=80=9Cnorm=E2=80=9D

Could you please comment me how I can implement a new Similarity class that
will fit in the Lucene=E2=80=99s architecture, but still implement the vect=
or space
model given in miislita.com

Thanks a lot for your comments,

Dharma

--=20
View this message in context: http://www.nabble.com/Vector-Space-Model%3A-N=
ew-Similarity-Implementation-Issues-tp15696719p15696719.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32790-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 26 20:46:11 2008
Return-Path: <java-user-return-32790-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99861 invoked from network); 26 Feb 2008 20:46:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Feb 2008 20:46:11 -0000
Received: (qmail 17154 invoked by uid 500); 26 Feb 2008 20:45:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17127 invoked by uid 500); 26 Feb 2008 20:45:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 8176 invoked by uid 99); 26 Feb 2008 20:39:40 -0000
X-ASF-Spam-Status: No, hits=-4.0 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of stanleyw@csail.mit.edu designates 128.30.2.149 as permitted sender)
Date: Tue, 26 Feb 2008 15:39:13 -0500 (EST)
From: Stanley Xinlei Wang <stanleyw@csail.mit.edu>
To: java-user@lucene.apache.org
Subject: Re: Question: Using Shingle Analyzer NGramAnalyzerWrapper in Lucene
In-Reply-To: <Pine.LNX.4.64.0802261517120.30256@sls-370-9.csail.mit.edu>
Message-ID: <Pine.LNX.4.64.0802261535030.30256@sls-370-9.csail.mit.edu>
References: <Pine.LNX.4.64.0802261517120.30256@sls-370-9.csail.mit.edu>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII; format=flowed
Sender: Xinlei Wang <stanleyw@csail.mit.edu>
X-Virus-Checked: Checked by ClamAV on apache.org

Sorry slight correction for the code below: I was actually using the 
WhitespaceAnalyzer, not the StandardAnalyzer in constructing the 
NGramAnalyzerWrapper.

On Tue, 26 Feb 2008, Stanley Xinlei Wang wrote:

> Hi,
>
> In Lucene, I'm trying to perform word-level bi-gram query parsing using 
> NGramAnalyzerWrapper.  I'm couldn't get any word pairs in the parsed query 
> and I was wondering what I should do to make this work.  I'm using Lucene 
> 2.2.0
>
> I'm using the files from: https://issues.apache.org/jira/browse/lucene-400
>
> My code is:
>
> NGramAnalyzerWrapper analyzer = new NGramAnalyzerWrapper(new
> 	StandardAnalyzer(), 2);
> QueryParser p = new QueryParser("info", analyzer);
> Query query = lyricsParser.parse("this is my query");
> System.out.println(query.toString());
>
> When I run this, I get the following output, which has no bi-grams:
>
> lyrics:this lyrics:is lyrics:a lyrics:query
>
>
> Thank you for your help!
>
> Stanley
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32791-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 26 20:50:29 2008
Return-Path: <java-user-return-32791-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3348 invoked from network); 26 Feb 2008 20:50:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Feb 2008 20:50:29 -0000
Received: (qmail 27458 invoked by uid 500); 26 Feb 2008 20:50:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27425 invoked by uid 500); 26 Feb 2008 20:50:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27414 invoked by uid 99); 26 Feb 2008 20:50:18 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Feb 2008 12:50:18 -0800
X-ASF-Spam-Status: No, hits=3.7 required=10.0
	tests=DNS_FROM_OPENWHOIS,FORGED_HOTMAIL_RCVD2,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Feb 2008 20:49:43 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1JU6kK-0003aH-Qp
	for java-user@lucene.apache.org; Tue, 26 Feb 2008 12:49:52 -0800
Message-ID: <15698325.post@talk.nabble.com>
Date: Tue, 26 Feb 2008 12:49:52 -0800 (PST)
From: fangz <fang_zhong@hotmail.com>
To: java-user@lucene.apache.org
Subject: Inconsistent Search Speed
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: fang_zhong@hotmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hi,

I am using a simple java program to test the search speed. The index file is
about 1.93G in size. I initiated an indexsearcher and built a query using
the query parser: parser.parse("entity:fail"). The initial run took more
than 60 seconds, but the subsequent runs only took 1.5 seconds. This does
not change with or without calling indexsearcher.close(). As I know, Lucene
does not cache results (no filter is involved). So what is causing such a
big speed difference?

Thank you in advance!

fangz
-- 
View this message in context: http://www.nabble.com/Inconsistent-Search-Speed-tp15698325p15698325.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32792-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 26 21:17:44 2008
Return-Path: <java-user-return-32792-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 23104 invoked from network); 26 Feb 2008 21:17:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Feb 2008 21:17:44 -0000
Received: (qmail 84610 invoked by uid 500); 26 Feb 2008 21:17:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84582 invoked by uid 500); 26 Feb 2008 21:17:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 84571 invoked by uid 99); 26 Feb 2008 21:17:33 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Feb 2008 13:17:33 -0800
X-ASF-Spam-Status: No, hits=-4.0 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [128.230.108.46] (HELO SUEXCL-02.ad.syr.edu) (128.230.108.46)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Feb 2008 21:16:59 +0000
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Question: Using Shingle Analyzer NGramAnalyzerWrapper in Lucene
Date: Tue, 26 Feb 2008 16:16:14 -0500
Message-ID: <9294E20AED46934EA459020706463F947EBDC0@SUEXCL-02.ad.syr.edu>
In-Reply-To: <Pine.LNX.4.64.0802261535030.30256@sls-370-9.csail.mit.edu>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Question: Using Shingle Analyzer NGramAnalyzerWrapper in Lucene
Thread-Index: Ach4uKPiyQqCoJnOQLOqgQgsbFoMXAAAhK0A
From: "Steven A Rowe" <sarowe@syr.edu>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Stanley,

I modernized the files in LUCENE-400 a bit - you can see the details in =
comments I made on the issue.  The results, including all files needed =
to address the issue, are in the file attached to the issue named =
"LUCENE-400.patch".

I can tell you aren't using the modernized version because I changed the =
file names, from NGram* to Shingle*, to avoid conflict with the =
pre-existing ngram* stuff.

I don't know, however, whether the new patch will apply and build =
cleanly in the 2.2.0 code base, since it was targetted at the trunk =
circa version 2.3.

Take a look at ShingleAnalyzerWrapperTest.java in the new patch - like =
you did, the tests there wrap WhitespaceAnalyser.

If switching to the new code doesn't fix the issue for you, could you =
add a comment to the issue describing your inputs, and expected and =
actual outputs?  Or, even better, write a unit test to cover your case.

Thanks,
Steve

On 02/26/2008 at 3:39 PM, Stanley Xinlei Wang wrote:
> Sorry slight correction for the code below: I was actually using the
> WhitespaceAnalyzer, not the StandardAnalyzer in constructing the
> NGramAnalyzerWrapper.
>=20
> On Tue, 26 Feb 2008, Stanley Xinlei Wang wrote:
>=20
> > Hi,
> >=20
> > In Lucene, I'm trying to perform word-level bi-gram query parsing =
using
> > NGramAnalyzerWrapper.  I'm couldn't get any word pairs in the parsed
> > query and I was wondering what I should do to make this work. I'm =
using
> > Lucene 2.2.0
> >=20
> > I'm using the files from:
> > https://issues.apache.org/jira/browse/lucene-400
> >=20
> > My code is:
> >=20
> > NGramAnalyzerWrapper analyzer =3D new NGramAnalyzerWrapper(new
> > 	StandardAnalyzer(), 2);
> > QueryParser p =3D new QueryParser("info", analyzer);
> > Query query =3D lyricsParser.parse("this is my query");
> > System.out.println(query.toString());
> >=20
> > When I run this, I get the following output, which has no bi-grams:
> >=20
> > lyrics:this lyrics:is lyrics:a lyrics:query
> >=20
> >=20
> > Thank you for your help!
> >=20
> > Stanley

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32793-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 26 21:18:55 2008
Return-Path: <java-user-return-32793-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 23926 invoked from network); 26 Feb 2008 21:18:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Feb 2008 21:18:55 -0000
Received: (qmail 90125 invoked by uid 500); 26 Feb 2008 21:18:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90096 invoked by uid 500); 26 Feb 2008 21:18:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90085 invoked by uid 99); 26 Feb 2008 21:18:43 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Feb 2008 13:18:43 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [212.27.42.28] (HELO smtp2-g19.free.fr) (212.27.42.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Feb 2008 21:17:55 +0000
Received: from smtp2-g19.free.fr (localhost.localdomain [127.0.0.1])
	by smtp2-g19.free.fr (Postfix) with ESMTP id C382E12B734
	for <java-user@lucene.apache.org>; Tue, 26 Feb 2008 22:18:15 +0100 (CET)
Received: from [192.168.1.100] (ze.garambrogne.net [82.227.122.98])
	by smtp2-g19.free.fr (Postfix) with ESMTP id 95B3412B6DF
	for <java-user@lucene.apache.org>; Tue, 26 Feb 2008 22:18:15 +0100 (CET)
Message-Id: <0B9D815F-E136-4FE3-B49B-8BB6228CF3F9@garambrogne.net>
From: Mathieu Lecarme <mathieu@garambrogne.net>
To: java-user@lucene.apache.org
In-Reply-To: <20080226163228.B1612210214@out2.bezeqint.net>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed; delsp=yes
Content-Transfer-Encoding: quoted-printable
Mime-Version: 1.0 (Apple Message framework v919.2)
Subject: Re: Rebuilding Document from index?
Date: Tue, 26 Feb 2008 22:18:14 +0100
References: <20080226163228.B1612210214@out2.bezeqint.net>
X-Mailer: Apple Mail (2.919.2)
X-Virus-Checked: Checked by ClamAV on apache.org

Yes, I've found a tester!
A patch was submited for this kind of job :
https://issues.apache.org/jira/browse/LUCENE-1190

And here is the svn work in progress :
=
https://admin.garambrogne.net/subversion/revuedepresse/trunk/src/java/lexi=
con

And the web version :
=
https://admin.garambrogne.net/projets/revuedepresse/browser/trunk/src/java=
/lexicon


Le 26 f=E9vr. 08 =E0 17:33, Itamar Syn-Hershko a =E9crit :

>
> Implementing something like MoreLikeThis for Hebrew. Non-Hebrew
> implementations are relevant, but much less accurate since a word =20
> like PURIM
> can show up in the actual document with initials (LPURIM, BPURIM =20
> etc.) or
> even with 1-4 letters after it which all reffer to the same term, =20
> and then
> the score it will get upon analyzing using the current MoreLikeThis
> implementation will not reflect its real importance.
>
> I'm still trying to engineer the best possible solution for Lucene =20
> with
> Hebrew, right now my path is NOT using a stemmer by default, only by
> explicit request of the user. MoreLikeThis would only return relevant
> results if I will use a non-stemmed scoring and lookup.
>
> Itamar.
>
> -----Original Message-----
> From: Erick Erickson [mailto:erickerickson@gmail.com]
> Sent: Tuesday, February 26, 2008 4:29 PM
> To: java-user@lucene.apache.org
> Subject: Re: Rebuilding Document from index?
>
> See TermDocs/TermEnum. Or perhaps TermFreqVector. I admit I haven't =20=

> used
> that last, but that family of methods ought to fix you up.
>
> What problem are you trying to solve? Perhaps there are better =20
> solutions to
> suggest....
>
> Best
> Erick
>
> On Mon, Feb 25, 2008 at 6:04 PM, Itamar Syn-Hershko =
<itamar@divrei-tora.com=20
> >
> wrote:
>
>> Hello again,
>>
>> If I wanted to do this programmatically, how would I do this =20
>> (retrieve
>> a list of all terms in a field for a specific document - better if it
>> was in alphabettic order and with frequency data)?
>>
>> Thanks,
>>
>> Itamar.
>>
>> -----Original Message-----
>> From: spring@gmx.eu [mailto:spring@gmx.eu]
>> Sent: Friday, February 22, 2008 3:22 PM
>> To: java-user@lucene.apache.org
>> Subject: RE: Rebuilding Document from index?
>>
>> You can use Luke to rebuild the document. It will show you the terms
>> of the analyzed document, not the original content.
>> And this is what you want, if I understood you correctly.
>>
>>> -----Original Message-----
>>> From: Itamar Syn-Hershko [mailto:itamar@divrei-tora.com]
>>> Sent: Freitag, 22. Februar 2008 14:02
>>> To: java-user@lucene.apache.org
>>> Subject: Rebuilding Document from index?
>>>
>>> Hi,
>>>
>>> Is it possible to re-create a document from an index, if its not
>>> stored?
>>> What I'm looking for is a way to have a text document with the text
>>> AFTER it was analyzed, so I can see how my analyzer handles certain
>>> cases. So that means I don't care if I will not get the original
>>> document. I want to see the document as the index knows it.
>>>
>>> Thanks in advance,
>>>
>>> Itamar.
>>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32794-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 26 22:11:14 2008
Return-Path: <java-user-return-32794-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56707 invoked from network); 26 Feb 2008 22:11:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Feb 2008 22:11:14 -0000
Received: (qmail 82779 invoked by uid 500); 26 Feb 2008 22:11:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82743 invoked by uid 500); 26 Feb 2008 22:11:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82731 invoked by uid 99); 26 Feb 2008 22:11:03 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Feb 2008 14:11:03 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [216.75.55.147] (HELO stimulussoft.com) (216.75.55.147)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Feb 2008 22:10:16 +0000
Received: (qmail 19917 invoked by uid 511); 26 Feb 2008 14:10:35 -0800
Received: from 41.243.252.96 by live.stimulussoft.com (envelope-from <jamie@stimulussoft.com>, uid 509) with qmail-scanner-1.25-st-qms 
 (spamassassin: 3.2.3. perlscan: 1.25-st-qms.  
 Clear:RC:0(41.243.252.96):SA:0(-2.3/5.0):. 
 Processed in 1.28996 secs); 26 Feb 2008 22:10:35 -0000
X-Antivirus-MYDOMAIN-Mail-From: jamie@stimulussoft.com via live.stimulussoft.com
X-Antivirus-MYDOMAIN: 1.25-st-qms (Clear:RC:0(41.243.252.96):SA:0(-2.3/5.0):. Processed in 1.28996 secs Process 19907)
Received: from dsl-243-252-96.telkomadsl.co.za (HELO ?192.168.0.50?) (jamie@stimulussoft.com@41.243.252.96)
  by stimulussoft.com with SMTP; 26 Feb 2008 14:10:34 -0800
Message-ID: <47C48F16.2030901@stimulussoft.com>
Date: Wed, 27 Feb 2008 00:13:42 +0200
From: Jamie <jamie@stimulussoft.com>
User-Agent: Thunderbird 2.0.0.9 (Windows/20071031)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Lucene Search Performance
References: <47C457E5.6020704@stimulussoft.com> <652776090802261221i58cb0247n8d4c28b3290c387d@mail.gmail.com>
In-Reply-To: <652776090802261221i58cb0247n8d4c28b3290c387d@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, hits=-2.3 required=5.0

Hi Michael

Perhaps this will help. We are using Lucene to index emails and provide 
a search interface to search through those emails. Many of our customers 
have 3-5 TB's or more of email data. The index size tends to be around 5 
GB per million messages. On a 3 GHZ intel core duo with standard 7200 mb 
drive, it takes approx. 10 seconds to search across a million emails. We 
need sub second search times, especially since, as time progresses, some 
of our archives are expected to reach 10-20 TB of data. In future, we 
will be recommending the use of SSD drives, but I'd like to know if they 
are any other strategies can pursued. One such strategy is to 
automatically create a new index after the index gets to a certain size. 
Then, when a search is conducted, based on date, search only those 
indexes that fall between specified dates. I've run my code through the 
YourKit profiler. The time appears to be consumed by Lucene itself and 
not by my code.

Any other ideas?


Michael Stoppelman wrote:
> On Tue, Feb 26, 2008 at 10:18 AM, Jamie <jamie@stimulussoft.com> wrote:
>
>   
>> Hi
>>
>> I am looking for a way to improve the search performance of my
>> application. I've followed every suggestion in the Lucene Wiki but the
>> search is still too slow with large indexes. I was wondering whether
>>     
>
>
> Did you optimize your index yet? That gave me a 2x bump.
>
> Have you put timers around parts of your code? Maybe it's something
> unrelated to lucene.
> You should probably give more details on your setup if you want more helpful
> advice.
>
>
>   
>> there was a way to restrict a search to a specific time period and in
>> doing so sacrifice the quality of search results? Any other suggestions
>> on how to improve search performance?
>>
>> Much appreciate
>>
>> Jamie
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>     
>
>   


-- 
Stimulus Software - MailArchiva
Email Archiving And Compliance
USA Tel: +1-713-366-8072 ext 3
UK Tel: +44-20-80991035 ext 3
Email: jamie@stimulussoft.com
Web: http://www.mailarchiva.com

To receive MailArchiva Enterprise Edition product announcements, send a message to: <mailarchiva-enterprise-edition-subscribe@stimulussoft.com> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32795-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 26 22:17:52 2008
Return-Path: <java-user-return-32795-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60763 invoked from network); 26 Feb 2008 22:17:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Feb 2008 22:17:51 -0000
Received: (qmail 92951 invoked by uid 500); 26 Feb 2008 22:17:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92818 invoked by uid 500); 26 Feb 2008 22:17:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92807 invoked by uid 99); 26 Feb 2008 22:17:40 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Feb 2008 14:17:40 -0800
X-ASF-Spam-Status: No, hits=3.2 required=10.0
	tests=RCVD_IN_BL_SPAMCOP_NET,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [192.115.188.199] (HELO out4.bezeqint.net) (192.115.188.199)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Feb 2008 22:16:50 +0000
Received: from your0548c161e1 (unknown [80.250.149.60])
	by out4.bezeqint.net (Postfix) with ESMTPA id CA6E6B08337
	for <java-user@lucene.apache.org>; Wed, 27 Feb 2008 00:11:22 +0200 (IST)
From: "Itamar Syn-Hershko" <itamar@divrei-tora.com>
To: <java-user@lucene.apache.org>
Subject: RE: Rebuilding Document from index?
Date: Wed, 27 Feb 2008 00:17:05 +0200
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Office Outlook, Build 11.0.5510
Thread-Index: Ach4vShHRqYo6YHVSaOh+eaXjGFjzwABa5yA
In-Reply-To: <0B9D815F-E136-4FE3-B49B-8BB6228CF3F9@garambrogne.net>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3198
Message-Id: <20080226221122.CA6E6B08337@out4.bezeqint.net>
X-Virus-Checked: Checked by ClamAV on apache.org

Not to ruin your party, but I'm not sure exactly what this Lexicon =
object is
for and how it should work. Plus, the requirements I have for analyzing
Hebrew (not only for the MoreLikeThis functionality) are far more =
demanding
than what is needed for French.

But I'm open to any suggestion on this matter (BTW, if I understand what
you're trying to do correctly, this post of mine should be related as =
well:
http://www.mail-archive.com/java-user@lucene.apache.org/msg18650.html).

Itamar.=20

-----Original Message-----
From: Mathieu Lecarme [mailto:mathieu@garambrogne.net]=20
Sent: Tuesday, February 26, 2008 11:18 PM
To: java-user@lucene.apache.org
Subject: Re: Rebuilding Document from index?

Yes, I've found a tester!
A patch was submited for this kind of job :
https://issues.apache.org/jira/browse/LUCENE-1190

And here is the svn work in progress :
https://admin.garambrogne.net/subversion/revuedepresse/trunk/src/java/lex=
ico
n

And the web version :
https://admin.garambrogne.net/projets/revuedepresse/browser/trunk/src/jav=
a/l
exicon


Le 26 f=E9vr. 08 =E0 17:33, Itamar Syn-Hershko a =E9crit :

>
> Implementing something like MoreLikeThis for Hebrew. Non-Hebrew=20
> implementations are relevant, but much less accurate since a word like =

> PURIM can show up in the actual document with initials (LPURIM, BPURIM
> etc.) or
> even with 1-4 letters after it which all reffer to the same term, and=20
> then the score it will get upon analyzing using the current=20
> MoreLikeThis implementation will not reflect its real importance.
>
> I'm still trying to engineer the best possible solution for Lucene=20
> with Hebrew, right now my path is NOT using a stemmer by default, only =

> by explicit request of the user. MoreLikeThis would only return=20
> relevant results if I will use a non-stemmed scoring and lookup.
>
> Itamar.
>
> -----Original Message-----
> From: Erick Erickson [mailto:erickerickson@gmail.com]
> Sent: Tuesday, February 26, 2008 4:29 PM
> To: java-user@lucene.apache.org
> Subject: Re: Rebuilding Document from index?
>
> See TermDocs/TermEnum. Or perhaps TermFreqVector. I admit I haven't=20
> used that last, but that family of methods ought to fix you up.
>
> What problem are you trying to solve? Perhaps there are better=20
> solutions to suggest....
>
> Best
> Erick
>
> On Mon, Feb 25, 2008 at 6:04 PM, Itamar Syn-Hershko=20
> <itamar@divrei-tora.com
> >
> wrote:
>
>> Hello again,
>>
>> If I wanted to do this programmatically, how would I do this=20
>> (retrieve a list of all terms in a field for a specific document -=20
>> better if it was in alphabettic order and with frequency data)?
>>
>> Thanks,
>>
>> Itamar.
>>
>> -----Original Message-----
>> From: spring@gmx.eu [mailto:spring@gmx.eu]
>> Sent: Friday, February 22, 2008 3:22 PM
>> To: java-user@lucene.apache.org
>> Subject: RE: Rebuilding Document from index?
>>
>> You can use Luke to rebuild the document. It will show you the terms=20
>> of the analyzed document, not the original content.
>> And this is what you want, if I understood you correctly.
>>
>>> -----Original Message-----
>>> From: Itamar Syn-Hershko [mailto:itamar@divrei-tora.com]
>>> Sent: Freitag, 22. Februar 2008 14:02
>>> To: java-user@lucene.apache.org
>>> Subject: Rebuilding Document from index?
>>>
>>> Hi,
>>>
>>> Is it possible to re-create a document from an index, if its not=20
>>> stored?
>>> What I'm looking for is a way to have a text document with the text=20
>>> AFTER it was analyzed, so I can see how my analyzer handles certain=20
>>> cases. So that means I don't care if I will not get the original=20
>>> document. I want to see the document as the index knows it.
>>>
>>> Thanks in advance,
>>>
>>> Itamar.
>>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32796-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Feb 26 23:24:19 2008
Return-Path: <java-user-return-32796-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 87277 invoked from network); 26 Feb 2008 23:24:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Feb 2008 23:24:19 -0000
Received: (qmail 93213 invoked by uid 500); 26 Feb 2008 23:24:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93187 invoked by uid 500); 26 Feb 2008 23:24:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93176 invoked by uid 99); 26 Feb 2008 23:24:08 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Feb 2008 15:24:08 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of stopman@gmail.com designates 64.233.182.186 as permitted sender)
Received: from [64.233.182.186] (HELO nf-out-0910.google.com) (64.233.182.186)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Feb 2008 23:23:33 +0000
Received: by nf-out-0910.google.com with SMTP id d3so1280413nfc.15
        for <java-user@lucene.apache.org>; Tue, 26 Feb 2008 15:23:41 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=d0omExnhHOzi46TBgbPw2Wb/LgzFQKSliLpo36AovKo=;
        b=RfQj5gHRAWc96YyiDoq6Qm1bO0r2rQh6LP7yOXC822lhnIu5JfHJfnH/dLsanFkwCNuaTgstYboDVg+Hhk1yo3W5VPwCD00YYH+APoB/uMzgobEQ8RbcX7csXQAZlrChK5OWFXlxC3DQqt7GcYFayTTLNYw5SDFfEmCSRXTxKyU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=P6a1/c0AJXku1wPNodCEpXbLQDuZHHBLsOoyheghNB0gdVq6iOi3fCwP7/UrMnpGR+GB3BlZpUQ8Ut6yN5IYSJO5DW5dNB+6cxfKSPnwld2a4eWaUMdBMD5KZWFrzt9ZDgQMswJpPjuOOkLV8Gi4qvWlFHsXQ/cb53n0Xd62Jlg=
Received: by 10.82.181.7 with SMTP id d7mr37106buf.18.1204068221428;
        Tue, 26 Feb 2008 15:23:41 -0800 (PST)
Received: by 10.82.139.19 with HTTP; Tue, 26 Feb 2008 15:23:41 -0800 (PST)
Message-ID: <652776090802261523i2068905t3643815781d2ad71@mail.gmail.com>
Date: Tue, 26 Feb 2008 15:23:41 -0800
From: "Michael Stoppelman" <stopman@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene Search Performance
In-Reply-To: <47C48F16.2030901@stimulussoft.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_17906_6169967.1204068221413"
References: <47C457E5.6020704@stimulussoft.com>
	 <652776090802261221i58cb0247n8d4c28b3290c387d@mail.gmail.com>
	 <47C48F16.2030901@stimulussoft.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_17906_6169967.1204068221413
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

So you're saying searches are taking 10 seconds on a 5G index? If so that
seems ungodly slow.
If you're on *nix, have you watched your iostat statistics? Maybe something
is hammering your hds.
Something seems amiss.

What lucene methods were pointed to as hotspots by YourKit?

-M

On Tue, Feb 26, 2008 at 2:13 PM, Jamie <jamie@stimulussoft.com> wrote:

> Hi Michael
>
> Perhaps this will help. We are using Lucene to index emails and provide
> a search interface to search through those emails. Many of our customers
> have 3-5 TB's or more of email data. The index size tends to be around 5
> GB per million messages. On a 3 GHZ intel core duo with standard 7200 mb
> drive, it takes approx. 10 seconds to search across a million emails. We
> need sub second search times, especially since, as time progresses, some
> of our archives are expected to reach 10-20 TB of data. In future, we
> will be recommending the use of SSD drives, but I'd like to know if they
> are any other strategies can pursued. One such strategy is to
> automatically create a new index after the index gets to a certain size.
> Then, when a search is conducted, based on date, search only those
> indexes that fall between specified dates. I've run my code through the
> YourKit profiler. The time appears to be consumed by Lucene itself and
> not by my code.
>
> Any other ideas?
>
>
> Michael Stoppelman wrote:
> > On Tue, Feb 26, 2008 at 10:18 AM, Jamie <jamie@stimulussoft.com> wrote:
> >
> >
> >> Hi
> >>
> >> I am looking for a way to improve the search performance of my
> >> application. I've followed every suggestion in the Lucene Wiki but the
> >> search is still too slow with large indexes. I was wondering whether
> >>
> >
> >
> > Did you optimize your index yet? That gave me a 2x bump.
> >
> > Have you put timers around parts of your code? Maybe it's something
> > unrelated to lucene.
> > You should probably give more details on your setup if you want more
> helpful
> > advice.
> >
> >
> >
> >> there was a way to restrict a search to a specific time period and in
> >> doing so sacrifice the quality of search results? Any other suggestions
> >> on how to improve search performance?
> >>
> >> Much appreciate
> >>
> >> Jamie
> >>
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >>
> >
> >
>
>
> --
> Stimulus Software - MailArchiva
> Email Archiving And Compliance
> USA Tel: +1-713-366-8072 ext 3
> UK Tel: +44-20-80991035 ext 3
> Email: jamie@stimulussoft.com
> Web: http://www.mailarchiva.com
>
> To receive MailArchiva Enterprise Edition product announcements, send a
> message to: <mailarchiva-enterprise-edition-subscribe@stimulussoft.com>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_17906_6169967.1204068221413--

From java-user-return-32797-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 27 01:45:31 2008
Return-Path: <java-user-return-32797-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 43147 invoked from network); 27 Feb 2008 01:45:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Feb 2008 01:45:31 -0000
Received: (qmail 36965 invoked by uid 500); 27 Feb 2008 01:45:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36930 invoked by uid 500); 27 Feb 2008 01:45:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36917 invoked by uid 99); 27 Feb 2008 01:45:19 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Feb 2008 17:45:19 -0800
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=SPF_NEUTRAL,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.81] (HELO spunkymail-a2.g.dreamhost.com) (208.97.132.81)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Feb 2008 01:44:43 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a2.g.dreamhost.com (Postfix) with ESMTP id D3EA188016
	for <java-user@lucene.apache.org>; Tue, 26 Feb 2008 17:44:49 -0800 (PST)
Message-Id: <804F6E8D-9803-4BE5-9DCC-542288CF2431@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <15698325.post@talk.nabble.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v919.2)
Subject: Re: Inconsistent Search Speed
Date: Tue, 26 Feb 2008 20:44:49 -0500
References: <15698325.post@talk.nabble.com>
X-Mailer: Apple Mail (2.919.2)
X-Virus-Checked: Checked by ClamAV on apache.org

The first call loads various data structures into memory.  The second  
takes advantage of those structures being in memory.  What you want to  
do is "warm" the searcher by sending some queries to it before making  
it available.

-Grant

On Feb 26, 2008, at 3:49 PM, fangz wrote:

>
> Hi,
>
> I am using a simple java program to test the search speed. The index  
> file is
> about 1.93G in size. I initiated an indexsearcher and built a query  
> using
> the query parser: parser.parse("entity:fail"). The initial run took  
> more
> than 60 seconds, but the subsequent runs only took 1.5 seconds. This  
> does
> not change with or without calling indexsearcher.close(). As I know,  
> Lucene
> does not cache results (no filter is involved). So what is causing  
> such a
> big speed difference?
>
> Thank you in advance!
>
> fangz
> -- 
> View this message in context: http://www.nabble.com/Inconsistent-Search-Speed-tp15698325p15698325.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

--------------------------
Grant Ingersoll
http://www.lucenebootcamp.com
Next Training: April 7, 2008 at ApacheCon Europe in Amsterdam

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ






---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32798-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 27 02:00:51 2008
Return-Path: <java-user-return-32798-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47572 invoked from network); 27 Feb 2008 02:00:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Feb 2008 02:00:51 -0000
Received: (qmail 59848 invoked by uid 500); 27 Feb 2008 02:00:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59660 invoked by uid 500); 27 Feb 2008 02:00:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59649 invoked by uid 99); 27 Feb 2008 02:00:39 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Feb 2008 18:00:39 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Feb 2008 02:00:06 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id B71BC71C349; Tue, 26 Feb 2008 18:00:15 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id 76F7F71C34F
	for <java-user@lucene.apache.org>; Tue, 26 Feb 2008 18:00:15 -0800 (PST)
Date: Tue, 26 Feb 2008 18:00:15 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: regex expressions within phrase queries
In-Reply-To: <99ca131e0802251456v51e8f22bmb300f15bd2708890@mail.gmail.com>
Message-ID: <Pine.LNX.4.62.0802261758280.14550@radix.cryptio.net>
References: <99ca131e0802141625m7a83a613v4b7da728b0a5953b@mail.gmail.com> 
 <Pine.LNX.4.62.0802142245330.25935@radix.cryptio.net> 
 <99ca131e0802181631y2b16e0cdqdd70c1f7dce97249@mail.gmail.com> 
 <Pine.LNX.4.62.0802211636570.27615@radix.cryptio.net>
 <99ca131e0802251456v51e8f22bmb300f15bd2708890@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: Thanks for the advice Chris.  What I am working on now is extracting the
: matching phrases.  The current code for MultiPhraseQuery and SpanQueries
: just return all matching terms, not matching phrases.  I implemented some
: code matching up the TermPositions, but this is pretty slow.  Is there any
: way to actually get the matching phrases more efficiently?

Uh ... i'm really not sure what you mean.  a (Multi)PhraseQuery or a 
SpanNearQuery will in ensure that the terms appear as a "phrase" within 
the specified amount of slop .. what exactly isn't working for you?

can you write it as a unit test?

-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32799-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 27 02:08:03 2008
Return-Path: <java-user-return-32799-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 50170 invoked from network); 27 Feb 2008 02:08:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Feb 2008 02:08:03 -0000
Received: (qmail 66069 invoked by uid 500); 27 Feb 2008 02:07:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66033 invoked by uid 500); 27 Feb 2008 02:07:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66022 invoked by uid 99); 27 Feb 2008 02:07:52 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Feb 2008 18:07:52 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of blueye117@gmail.com designates 64.233.184.224 as permitted sender)
Received: from [64.233.184.224] (HELO wr-out-0506.google.com) (64.233.184.224)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Feb 2008 02:07:16 +0000
Received: by wr-out-0506.google.com with SMTP id c55so3731813wra.11
        for <java-user@lucene.apache.org>; Tue, 26 Feb 2008 18:07:25 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=2G6bHiCXSYVSt37+IvRS7bWPkqxzbGWqO9UggE0z8XM=;
        b=gdknC6P0fpepYDyLsInmX6/cBFpOr6GG2SdXOAAoYA5SFVufq+fb72nWCKXUZBwgq2yco2IH9g7DhjMCkBIR04pLsoiPRh8j1zY0YyLFF4B3LM/oAC/m6esBZWjQWPgWhbmcxeF4XCGNFb+E7NagdHtJTjyeeBcKkJMLv+O11h8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=IOPGVvNtDy1kbV+UN+MwV3WcHpDdbs+MvYtZGOsnbM2vQjRWK9Po5qJN2VXPIEiXYWPg8MufEwoivww7V39DZwDA5+9KQrTwKUnoBKazgVwKnXOl183WT+31nPnLzmWUGzJOm7eSfStEJeoTzN/4IlgIZiSGASbYKudrWfbyL3k=
Received: by 10.140.180.42 with SMTP id c42mr3973588rvf.145.1204078043565;
        Tue, 26 Feb 2008 18:07:23 -0800 (PST)
Received: by 10.141.122.4 with HTTP; Tue, 26 Feb 2008 18:07:23 -0800 (PST)
Message-ID: <f09790220802261807x71d85fe2hd43fd7512ea99c52@mail.gmail.com>
Date: Wed, 27 Feb 2008 10:07:23 +0800
From: "h t" <blueye117@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene Search Performance
In-Reply-To: <652776090802261523i2068905t3643815781d2ad71@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_16676_8943179.1204078043567"
References: <47C457E5.6020704@stimulussoft.com>
	 <652776090802261221i58cb0247n8d4c28b3290c387d@mail.gmail.com>
	 <47C48F16.2030901@stimulussoft.com>
	 <652776090802261523i2068905t3643815781d2ad71@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_16676_8943179.1204078043567
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi Michael,
I guess the hotspot of lucene is
org.apache.lucene.search.IndexSearcher.search()

Hi Jamie,
What's the original text size of a million emails?
I estimate the size of an email is around 100k, is this true?
When you doing search, what kind keywords did you input, words or short
sentence?
How many results return?
Did you use filter to shrink the results size?

2008/2/27, Michael Stoppelman <stopman@gmail.com>:
>
> So you're saying searches are taking 10 seconds on a 5G index? If so that
> seems ungodly slow.
> If you're on *nix, have you watched your iostat statistics? Maybe
> something
> is hammering your hds.
> Something seems amiss.
>
> What lucene methods were pointed to as hotspots by YourKit?
>
>
> -M
>
>
> On Tue, Feb 26, 2008 at 2:13 PM, Jamie <jamie@stimulussoft.com> wrote:
>
> > Hi Michael
> >
> > Perhaps this will help. We are using Lucene to index emails and provide
> > a search interface to search through those emails. Many of our customers
> > have 3-5 TB's or more of email data. The index size tends to be around 5
> > GB per million messages. On a 3 GHZ intel core duo with standard 7200 mb
> > drive, it takes approx. 10 seconds to search across a million emails. We
> > need sub second search times, especially since, as time progresses, some
> > of our archives are expected to reach 10-20 TB of data. In future, we
> > will be recommending the use of SSD drives, but I'd like to know if they
> > are any other strategies can pursued. One such strategy is to
> > automatically create a new index after the index gets to a certain size.
> > Then, when a search is conducted, based on date, search only those
> > indexes that fall between specified dates. I've run my code through the
> > YourKit profiler. The time appears to be consumed by Lucene itself and
> > not by my code.
> >
> > Any other ideas?
> >
> >
> > Michael Stoppelman wrote:
> > > On Tue, Feb 26, 2008 at 10:18 AM, Jamie <jamie@stimulussoft.com>
> wrote:
> > >
> > >
> > >> Hi
> > >>
> > >> I am looking for a way to improve the search performance of my
> > >> application. I've followed every suggestion in the Lucene Wiki but
> the
> > >> search is still too slow with large indexes. I was wondering whether
> > >>
> > >
> > >
> > > Did you optimize your index yet? That gave me a 2x bump.
> > >
> > > Have you put timers around parts of your code? Maybe it's something
> > > unrelated to lucene.
> > > You should probably give more details on your setup if you want more
> > helpful
> > > advice.
> > >
> > >
> > >
> > >> there was a way to restrict a search to a specific time period and in
> > >> doing so sacrifice the quality of search results? Any other
> suggestions
> > >> on how to improve search performance?
> > >>
> > >> Much appreciate
> > >>
> > >> Jamie
> > >>
> > >>
> > >> ---------------------------------------------------------------------
> > >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > >> For additional commands, e-mail: java-user-help@lucene.apache.org
> > >>
> > >>
> > >>
> > >
> > >
> >
> >
> > --
> > Stimulus Software - MailArchiva
> > Email Archiving And Compliance
> > USA Tel: +1-713-366-8072 ext 3
> > UK Tel: +44-20-80991035 ext 3
> > Email: jamie@stimulussoft.com
> > Web: http://www.mailarchiva.com
> >
> > To receive MailArchiva Enterprise Edition product announcements, send a
> > message to: <mailarchiva-enterprise-edition-subscribe@stimulussoft.com>
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>

------=_Part_16676_8943179.1204078043567--

From java-user-return-32800-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 27 02:18:01 2008
Return-Path: <java-user-return-32800-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 52922 invoked from network); 27 Feb 2008 02:18:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Feb 2008 02:18:01 -0000
Received: (qmail 77513 invoked by uid 500); 27 Feb 2008 02:17:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77480 invoked by uid 500); 27 Feb 2008 02:17:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77469 invoked by uid 99); 27 Feb 2008 02:17:49 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Feb 2008 18:17:49 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of blueye117@gmail.com designates 72.14.252.153 as permitted sender)
Received: from [72.14.252.153] (HELO po-out-1718.google.com) (72.14.252.153)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Feb 2008 02:17:13 +0000
Received: by po-out-1718.google.com with SMTP id b23so3923597poe.0
        for <java-user@lucene.apache.org>; Tue, 26 Feb 2008 18:17:22 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=RKlsVnXto+d9apZZdXNz5ElogddegVxf6C5VXWEbvU0=;
        b=aP51UnHM+z2NjSDvmntsxwrdmR58EHtd5PkbEfvcjD+zsmC3PRVNFLtMxpQiBuZfh0DuJ986h/3PrrOQpvHa3HRLsIYFG/V2QiheTomuFj2UfpLLjZKfXfp71G4HLfeBubJqGEPT+lbFY61NAf6WbxDovQAkWJQq4kOhgVVwIK0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=PcAW7HKWAf/RE6hK0LK+27UGLjxm2uPdzBg6K3SzJ+W7jh7oW365AtVIf+6diz4GK/e6GuOeI299QlZOzHEpdb2mvSzrt8Q9X/J3fee1JySbG0dpfmWo6Z452fiOdgwTDfc4r0IUk/OKFykpxlgwQykuzFS4TamkTIZozeg8KZ0=
Received: by 10.141.23.7 with SMTP id a7mr3978026rvj.58.1204078641689;
        Tue, 26 Feb 2008 18:17:21 -0800 (PST)
Received: by 10.141.122.4 with HTTP; Tue, 26 Feb 2008 18:17:21 -0800 (PST)
Message-ID: <f09790220802261817t1d256d3cv30514f2c2ea84eb1@mail.gmail.com>
Date: Wed, 27 Feb 2008 10:17:21 +0800
From: "h t" <blueye117@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Inconsistent Search Speed
In-Reply-To: <15698325.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_16691_941958.1204078641694"
References: <15698325.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_16691_941958.1204078641694
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Did you use the keywords in two calls?

2008/2/27, fangz <fang_zhong@hotmail.com>:
>
>
> Hi,
>
> I am using a simple java program to test the search speed. The index file
> is
> about 1.93G in size. I initiated an indexsearcher and built a query using
> the query parser: parser.parse("entity:fail"). The initial run took more
> than 60 seconds, but the subsequent runs only took 1.5 seconds. This does
> not change with or without calling indexsearcher.close(). As I know,
> Lucene
> does not cache results (no filter is involved). So what is causing such a
> big speed difference?
>
> Thank you in advance!
>
> fangz
>
> --
> View this message in context:
> http://www.nabble.com/Inconsistent-Search-Speed-tp15698325p15698325.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_16691_941958.1204078641694--

From java-user-return-32801-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 27 02:48:41 2008
Return-Path: <java-user-return-32801-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71513 invoked from network); 27 Feb 2008 02:48:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Feb 2008 02:48:41 -0000
Received: (qmail 12159 invoked by uid 500); 27 Feb 2008 02:48:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12130 invoked by uid 500); 27 Feb 2008 02:48:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12116 invoked by uid 99); 27 Feb 2008 02:48:26 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Feb 2008 18:48:26 -0800
X-ASF-Spam-Status: No, hits=3.7 required=10.0
	tests=DNS_FROM_OPENWHOIS,FORGED_HOTMAIL_RCVD2,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Feb 2008 02:47:40 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1JUCKu-0000An-Hq
	for java-user@lucene.apache.org; Tue, 26 Feb 2008 18:48:00 -0800
Message-ID: <15704908.post@talk.nabble.com>
Date: Tue, 26 Feb 2008 18:48:00 -0800 (PST)
From: fangz <fang_zhong@hotmail.com>
To: java-user@lucene.apache.org
Subject: Re: Inconsistent Search Speed
In-Reply-To: <15698325.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: fang_zhong@hotmail.com
References: <15698325.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Thank you for the info.  It makes sense. 

My search will return more than 10000 documents and I have to loop through
all documents to build a list with unique field values. It seems that the
looping of the hits takes the longest time in the initial run but afterwards
it becomes much faster. If the hits are relatively small, I do not see the
same behavior.
-- 
View this message in context: http://www.nabble.com/Inconsistent-Search-Speed-tp15698325p15704908.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32802-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 27 03:17:38 2008
Return-Path: <java-user-return-32802-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82328 invoked from network); 27 Feb 2008 03:17:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Feb 2008 03:17:38 -0000
Received: (qmail 41959 invoked by uid 500); 27 Feb 2008 03:17:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41923 invoked by uid 500); 27 Feb 2008 03:17:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41912 invoked by uid 99); 27 Feb 2008 03:17:27 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Feb 2008 19:17:27 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of markrmiller@gmail.com designates 209.85.198.187 as permitted sender)
Received: from [209.85.198.187] (HELO rv-out-0910.google.com) (209.85.198.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Feb 2008 03:16:52 +0000
Received: by rv-out-0910.google.com with SMTP id k20so1633334rvb.5
        for <java-user@lucene.apache.org>; Tue, 26 Feb 2008 19:17:01 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        bh=aVZFOjbVUQtnK7VaM1cTctWTEsNZmVJ12C2swUcBSlc=;
        b=pW/XQCXFLl0tEfq/OzSk9Lp2mkUzC0uzUsHd07VHt6E7YBfF9mvOOivtYLiTLf9lw8IfIgQKpU25Vo7F9cxY7V7O+CAHvM+LCDpL7psb0AXEcs+cmwTTTCm50zyofRRLJdLobB/u6e0LJWhHM5NvUWuxPtwRkSqGEbII3spIR+4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=Un1FLr77qSg783yZgqiEEtzV6ZmoZcTxIUeOn/bKeE801VZTDGYUjP4tK04KXDQVvP4eiyCAAcOWJ0UvZwrsXjc/eXWKlUnNTUIl6HSvNg+Fr7suJMNMizS8j0icVhzrDwKLSqthJcp6Tc0p90Wb88JeG7nTpy6/ypGA78imKGA=
Received: by 10.141.198.9 with SMTP id a9mr4023320rvq.123.1204082221311;
        Tue, 26 Feb 2008 19:17:01 -0800 (PST)
Received: from ?192.168.1.102? ( [69.124.234.149])
        by mx.google.com with ESMTPS id f18sm5776885qba.14.2008.02.26.19.17.00
        (version=SSLv3 cipher=RC4-MD5);
        Tue, 26 Feb 2008 19:17:00 -0800 (PST)
Message-ID: <47C4D573.7040305@gmail.com>
Date: Tue, 26 Feb 2008 22:13:55 -0500
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.9 (Windows/20071031)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Inconsistent Search Speed
References: <15698325.post@talk.nabble.com> <15704908.post@talk.nabble.com>
In-Reply-To: <15704908.post@talk.nabble.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

The Lucene prime directive: dont iterate through all of Hits! Its 
horribly inefficient. You must use a hitcollector. Even still, getting 
your field values will be slow no matter what if you get for every hit. 
You don't want to do this for every hit in a search. But don't loop 
through Hits.

fangz wrote:
> Thank you for the info.  It makes sense. 
>
> My search will return more than 10000 documents and I have to loop through
> all documents to build a list with unique field values. It seems that the
> looping of the hits takes the longest time in the initial run but afterwards
> it becomes much faster. If the hits are relatively small, I do not see the
> same behavior.
>   

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32803-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 27 04:53:46 2008
Return-Path: <java-user-return-32803-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8071 invoked from network); 27 Feb 2008 04:53:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Feb 2008 04:53:46 -0000
Received: (qmail 23087 invoked by uid 500); 27 Feb 2008 04:53:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23063 invoked by uid 500); 27 Feb 2008 04:53:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 22553 invoked by uid 99); 27 Feb 2008 04:53:31 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Feb 2008 20:53:31 -0800
X-ASF-Spam-Status: No, hits=2.4 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [121.243.22.156] (HELO delhtca02.Infoedge.com) (121.243.22.156)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Feb 2008 04:52:42 +0000
Received: from DELHTCA01.Infoedge.com (172.16.3.234) by delhtca02.infoedge.com
 (172.16.3.245) with Microsoft SMTP Server (TLS) id 8.0.751.0; Wed, 27 Feb
 2008 10:18:32 +0530
Received: from [172.16.0.121] (220.225.240.5) by DELHTCA01.Infoedge.com
 (172.16.3.234) with Microsoft SMTP Server id 8.0.744.0; Wed, 27 Feb 2008
 10:18:32 +0530
Subject: Re: Lucene Search Performance
From: Anshum <anshum.gupta@naukri.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
In-Reply-To: <f09790220802261807x71d85fe2hd43fd7512ea99c52@mail.gmail.com>
References: <47C457E5.6020704@stimulussoft.com>
	 <652776090802261221i58cb0247n8d4c28b3290c387d@mail.gmail.com>
	 <47C48F16.2030901@stimulussoft.com>
	 <652776090802261523i2068905t3643815781d2ad71@mail.gmail.com>
	 <f09790220802261807x71d85fe2hd43fd7512ea99c52@mail.gmail.com>
Content-Type: text/plain
Date: Wed, 27 Feb 2008 10:22:56 +0530
Message-ID: <1204087976.5594.11.camel@localhost>
MIME-Version: 1.0
X-Mailer: Evolution 2.10.1 
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Jamie,

Are you running concurrent searches on the index i.e. spawning multiple
threads and not handling them?
I have been having similar issues and I am planning to try out a
workaround for it using Java's Interface Executor.
http://java.sun.com/j2se/1.5.0/docs/api/java/util/concurrent/Executor.html
This might help as it would control the resource utilization and of what
I know it as, it would pool resources and threads to handle concurrency,
thereby decreasing time.
Let me know in case you come across something better.

--
Anshum



On Wed, 2008-02-27 at 07:37 +0530, h t wrote:
> Hi Michael,
> I guess the hotspot of lucene is
> org.apache.lucene.search.IndexSearcher.search()
> 
> Hi Jamie,
> What's the original text size of a million emails?
> I estimate the size of an email is around 100k, is this true?
> When you doing search, what kind keywords did you input, words or short
> sentence?
> How many results return?
> Did you use filter to shrink the results size?
> 
> 2008/2/27, Michael Stoppelman <stopman@gmail.com>:
> >
> > So you're saying searches are taking 10 seconds on a 5G index? If so that
> > seems ungodly slow.
> > If you're on *nix, have you watched your iostat statistics? Maybe
> > something
> > is hammering your hds.
> > Something seems amiss.
> >
> > What lucene methods were pointed to as hotspots by YourKit?
> >
> >
> > -M
> >
> >
> > On Tue, Feb 26, 2008 at 2:13 PM, Jamie <jamie@stimulussoft.com> wrote:
> >
> > > Hi Michael
> > >
> > > Perhaps this will help. We are using Lucene to index emails and provide
> > > a search interface to search through those emails. Many of our customers
> > > have 3-5 TB's or more of email data. The index size tends to be around 5
> > > GB per million messages. On a 3 GHZ intel core duo with standard 7200 mb
> > > drive, it takes approx. 10 seconds to search across a million emails. We
> > > need sub second search times, especially since, as time progresses, some
> > > of our archives are expected to reach 10-20 TB of data. In future, we
> > > will be recommending the use of SSD drives, but I'd like to know if they
> > > are any other strategies can pursued. One such strategy is to
> > > automatically create a new index after the index gets to a certain size.
> > > Then, when a search is conducted, based on date, search only those
> > > indexes that fall between specified dates. I've run my code through the
> > > YourKit profiler. The time appears to be consumed by Lucene itself and
> > > not by my code.
> > >
> > > Any other ideas?
> > >
> > >
> > > Michael Stoppelman wrote:
> > > > On Tue, Feb 26, 2008 at 10:18 AM, Jamie <jamie@stimulussoft.com>
> > wrote:
> > > >
> > > >
> > > >> Hi
> > > >>
> > > >> I am looking for a way to improve the search performance of my
> > > >> application. I've followed every suggestion in the Lucene Wiki but
> > the
> > > >> search is still too slow with large indexes. I was wondering whether
> > > >>
> > > >
> > > >
> > > > Did you optimize your index yet? That gave me a 2x bump.
> > > >
> > > > Have you put timers around parts of your code? Maybe it's something
> > > > unrelated to lucene.
> > > > You should probably give more details on your setup if you want more
> > > helpful
> > > > advice.
> > > >
> > > >
> > > >
> > > >> there was a way to restrict a search to a specific time period and in
> > > >> doing so sacrifice the quality of search results? Any other
> > suggestions
> > > >> on how to improve search performance?
> > > >>
> > > >> Much appreciate
> > > >>
> > > >> Jamie
> > > >>
> > > >>
> > > >> ---------------------------------------------------------------------
> > > >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > >> For additional commands, e-mail: java-user-help@lucene.apache.org
> > > >>
> > > >>
> > > >>
> > > >
> > > >
> > >
> > >
> > > --
> > > Stimulus Software - MailArchiva
> > > Email Archiving And Compliance
> > > USA Tel: +1-713-366-8072 ext 3
> > > UK Tel: +44-20-80991035 ext 3
> > > Email: jamie@stimulussoft.com
> > > Web: http://www.mailarchiva.com
> > >
> > > To receive MailArchiva Enterprise Edition product announcements, send a
> > > message to: <mailarchiva-enterprise-edition-subscribe@stimulussoft.com>
> > >
> > >
> > > ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > >
> > >
> >


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32804-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 27 06:09:40 2008
Return-Path: <java-user-return-32804-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98245 invoked from network); 27 Feb 2008 06:09:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Feb 2008 06:09:40 -0000
Received: (qmail 88904 invoked by uid 500); 27 Feb 2008 06:09:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88871 invoked by uid 500); 27 Feb 2008 06:09:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88860 invoked by uid 99); 27 Feb 2008 06:09:28 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Feb 2008 22:09:28 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Feb 2008 06:08:54 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id 4349F71C0D3; Tue, 26 Feb 2008 22:09:04 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id 3FBA571C0C3
	for <java-user@lucene.apache.org>; Tue, 26 Feb 2008 22:09:04 -0800 (PST)
Date: Tue, 26 Feb 2008 22:09:04 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: How to find most popular terms quickly?
In-Reply-To: <F1C79CDF8799D944A3156C4035173174180B5E@rw-msg-02.broadvision.com>
Message-ID: <Pine.LNX.4.62.0802262141410.3193@radix.cryptio.net>
References: <F1C79CDF8799D944A3156C4035173174180B5E@rw-msg-02.broadvision.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: 1) open IndexReader.
: 2) call terms() to get all terms, then filter out terms in field Brand.
: 3) call termDocs(Term) to get Docs having each special Brand.
: 4) count which term is used by most docs from above result.
: 
: Is this the most efficient way?

pretty much ... take a look at the HighFreqTerms class in the 
"miscellaneous" contrib.


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32805-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 27 06:47:06 2008
Return-Path: <java-user-return-32805-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22444 invoked from network); 27 Feb 2008 06:47:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Feb 2008 06:47:06 -0000
Received: (qmail 32089 invoked by uid 500); 27 Feb 2008 06:46:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32055 invoked by uid 500); 27 Feb 2008 06:46:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32043 invoked by uid 99); 27 Feb 2008 06:46:55 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Feb 2008 22:46:55 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of blueye117@gmail.com designates 209.85.198.187 as permitted sender)
Received: from [209.85.198.187] (HELO rv-out-0910.google.com) (209.85.198.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Feb 2008 06:46:18 +0000
Received: by rv-out-0910.google.com with SMTP id k20so1681809rvb.5
        for <java-user@lucene.apache.org>; Tue, 26 Feb 2008 22:46:28 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=8h0PQnDpSbFJbEA+CT7mCI8wha6zO4sFmRzVL/6f9g8=;
        b=GqHXrWo0RqAveqd3M16IAKCJc7ypTBDbpUEcC23q0xsLjtOZpQS0kOhf7D4opw10/CfyhKpjfz/K/Wqf5xzM0wm8X/wKpTCjorRZoBLkvfd0uwhF27dnOqUdwb+va1eLNa9WC4VnFBwGSSk82VHKRvvq12qcQ5rtRgwlj3XRUy4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=khD/gD8Nq64u4bNvAuij2tShJjdEx08fApUBD2j02j1m2lW2b0ZZM9DjxLDvHpcQFC/aBKo6FEP9OON/bAAPp5wg20rFAGPr9hndJc9q7/pOY2mNOkxXklEWa/1oJ9a97NTLSnqTk6+WN3vMcjMgYS60cil6MY0Yl/50g73zYvY=
Received: by 10.141.27.16 with SMTP id e16mr4161545rvj.97.1204094787531;
        Tue, 26 Feb 2008 22:46:27 -0800 (PST)
Received: by 10.141.122.4 with HTTP; Tue, 26 Feb 2008 22:46:27 -0800 (PST)
Message-ID: <f09790220802262246o56a6ddbap17c01dad83208c83@mail.gmail.com>
Date: Wed, 27 Feb 2008 14:46:27 +0800
From: "h t" <blueye117@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Security filtering from external DB
In-Reply-To: <47C292B0.4020305@codelutin.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_17189_21168175.1204094787547"
References: <47BE94CE.3020802@codelutin.com> <47C292B0.4020305@codelutin.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_17189_21168175.1204094787547
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

I guess you can implement createBitSet() more effciently by using
Filer,but not BooleanQuery



2008/2/25, Gabriel Landais <landais@codelutin.com>:
>
> Gabriel Landais a =E9crit :
>
> > How to create a Filter for a field in Collection<String>?
> > First, split Collection in Collection<Collection> with
> > BooleanQuery.maxClauseCount items maximum in each collection.
> > For each collection :
> >  create a BooleanQuery with a TermQuery for each String.
> >  perform a search with a HitCollector filling a BitSet
> > Now we have BitSet of each Collection, perform a BitSet.or to get a
> > final BitSet
> > Build a Filter based on that BitSet, and use that Filter as parameter
> > of each search
> >
>
> It works perfectly. It is implemented in a GPL project, aka
> "simexplorer-is", in class LuceneDatabase (createFilter) :
> <
> https://labs.libre-entreprise.org/plugins/scmsvn/viewcvs.php/trunk/simexp=
lorer-is/simexplorer-is-storage/src/java/fr/cemagref/simexplorer/is/storage=
/database/lucene/?root=3Dsimexplorer-si
> >
> I think that this class is a good sample of what is possible to do with
> Lucene as a metadata database.
> Hope it will help.
> Regards,
>
>
> --
> Gabriel <landais@codelutin.com>
> http://www.codelutin.com
> tel : 02 40 50 29 28 / fax : 09 59 92 29 28
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_17189_21168175.1204094787547--

From java-user-return-32806-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 27 10:48:47 2008
Return-Path: <java-user-return-32806-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42355 invoked from network); 27 Feb 2008 10:48:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Feb 2008 10:48:47 -0000
Received: (qmail 92761 invoked by uid 500); 27 Feb 2008 10:48:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92573 invoked by uid 500); 27 Feb 2008 10:48:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92558 invoked by uid 99); 27 Feb 2008 10:48:35 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Feb 2008 02:48:35 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [212.27.42.30] (HELO smtp4-g19.free.fr) (212.27.42.30)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Feb 2008 10:48:00 +0000
Received: from smtp4-g19.free.fr (localhost.localdomain [127.0.0.1])
	by smtp4-g19.free.fr (Postfix) with ESMTP id 94C593EA115
	for <java-user@lucene.apache.org>; Wed, 27 Feb 2008 11:48:06 +0100 (CET)
Received: from [192.168.99.128] (seb44-1-88-163-78-202.fbx.proxad.net [88.163.78.202])
	by smtp4-g19.free.fr (Postfix) with ESMTP id 513BA3EA0BC
	for <java-user@lucene.apache.org>; Wed, 27 Feb 2008 11:48:06 +0100 (CET)
Message-ID: <47C53FE6.6090205@codelutin.com>
Date: Wed, 27 Feb 2008 11:48:06 +0100
From: Gabriel Landais <landais@codelutin.com>
Organization: Code Lutin
User-Agent: Thunderbird 2.0.0.6 (X11/20071022)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Security filtering from external DB
References: <47BE94CE.3020802@codelutin.com> <47C292B0.4020305@codelutin.com> <f09790220802262246o56a6ddbap17c01dad83208c83@mail.gmail.com>
In-Reply-To: <f09790220802262246o56a6ddbap17c01dad83208c83@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

h t a crit :
> I guess you can implement createBitSet() more effciently by using
> Filer,but not BooleanQuery
Hi,
 thanks for advice, but did you mean Filter or Filer? And even if I 
should use a Filter, I don't really understand how to replace the 
Boolean query :(
 The boolean query is already very efficient, so if it can be better, 
it's would be great!
Regards,
 Gabriel

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32807-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 27 11:12:47 2008
Return-Path: <java-user-return-32807-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56758 invoked from network); 27 Feb 2008 11:12:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Feb 2008 11:12:47 -0000
Received: (qmail 34717 invoked by uid 500); 27 Feb 2008 11:12:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34657 invoked by uid 500); 27 Feb 2008 11:12:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34644 invoked by uid 99); 27 Feb 2008 11:12:33 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Feb 2008 03:12:33 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [216.75.55.147] (HELO stimulussoft.com) (216.75.55.147)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Feb 2008 11:11:21 +0000
Received: (qmail 22610 invoked by uid 511); 27 Feb 2008 03:11:41 -0800
Received: from 41.243.252.96 by live.stimulussoft.com (envelope-from <jamie@stimulussoft.com>, uid 509) with qmail-scanner-1.25-st-qms 
 (spamassassin: 3.2.3. perlscan: 1.25-st-qms.  
 Clear:RC:0(41.243.252.96):SA:0(-2.2/5.0):. 
 Processed in 5.53326 secs); 27 Feb 2008 11:11:41 -0000
X-Antivirus-MYDOMAIN-Mail-From: jamie@stimulussoft.com via live.stimulussoft.com
X-Antivirus-MYDOMAIN: 1.25-st-qms (Clear:RC:0(41.243.252.96):SA:0(-2.2/5.0):. Processed in 5.53326 secs Process 22600)
Received: from dsl-243-252-96.telkomadsl.co.za (HELO ?192.168.0.50?) (jamie@stimulussoft.com@41.243.252.96)
  by stimulussoft.com with SMTP; 27 Feb 2008 03:11:35 -0800
Message-ID: <47C54625.2030602@stimulussoft.com>
Date: Wed, 27 Feb 2008 13:14:45 +0200
From: Jamie <jamie@stimulussoft.com>
User-Agent: Thunderbird 2.0.0.9 (Windows/20071031)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Lucene Search Performance
References: <47C457E5.6020704@stimulussoft.com>	 <652776090802261221i58cb0247n8d4c28b3290c387d@mail.gmail.com>	 <47C48F16.2030901@stimulussoft.com>	 <652776090802261523i2068905t3643815781d2ad71@mail.gmail.com> <f09790220802261807x71d85fe2hd43fd7512ea99c52@mail.gmail.com> <47C54442.7010104@stimulussoft.com>
In-Reply-To: <47C54442.7010104@stimulussoft.com>
Content-Type: multipart/mixed;
 boundary="------------090509080001050705090306"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, hits=-2.2 required=5.0

--------------090509080001050705090306
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit

Hi Michael & Others

Ok. I've gathered some more statistics from a different machine for your 
analysis.
(I had to switch machines because the original one was in production and 
my tests were interfering).

Here are the statistics from the new machine:

Total Documents: 1.2 million
Results Returned:  900k
Store Size 238G (size of original documents)
Index Size 1.2G (lucene index size)
Index / Store Ratio 0.5%

The search query is as follows:

archivedate:[d20071229010000 TO d20080228235900]

As you can see, I am using a range query to search between specific dates.
Question: should this query be moved to a filter rather? I did not do 
this as I needed to have the option to sort on date.

There are no other specific filters applied and in this example sorting 
is turned off.

On this particular machine the search time varies between 2.64 seconds 
and about 5 seconds.

The limitations of this machine are that it does uses a normal IDE drive 
to house the index, not a SATA drive

IOStat Statistics

Linux 2.6.20-15-server 27/02/2008

avg-cpu:  %user   %nice %system %iowait  %steal   %idle
         20.25    0.00    3.23    0.34    0.00   76.19

Device:            tps   Blk_read/s   Blk_wrtn/s   Blk_read   Blk_wrtn
sda               7.12        50.67       186.41   38936841  143240688

See attached for hardware info and the CPU call tree (taken from YourKit).

I would appreciate your recommendations.

Jamie

h t wrote:
Hi Michael,
I guess the hotspot of lucene is
org.apache.lucene.search.IndexSearcher.search()

Hi Jamie,
What's the original text size of a million emails?
I estimate the size of an email is around 100k, is this true?
When you doing search, what kind keywords did you input, words or short
sentence?
How many results return?
Did you use filter to shrink the results size?

2008/2/27, Michael Stoppelman <stopman@gmail.com>:
  So you're saying searches are taking 10 seconds on a 5G index? If so that
seems ungodly slow.
If you're on *nix, have you watched your iostat statistics? Maybe
something
is hammering your hds.
Something seems amiss.

What lucene methods were pointed to as hotspots by YourKit?




--------------090509080001050705090306
Content-Type: application/zip;
 name="stats.zip"
Content-Transfer-Encoding: base64
Content-Disposition: inline;
 filename="stats.zip"

UEsDBBQAAAAIAKJhWzhEBt5WuxQAALivAgAJAAAAdGVzdC5odG1s7V1tc9tIjv6eX8HSZl3Z
KsYSSb2OHVfNOOtN9pxJZuy6q62t/UBRbYkJRWrIVhLd1f33bUp2YidZttwtsoEmPiR+gyiC
wvMADaDRpwu+TM6eOM7pgoWz8hvxLY95ws4u44/MOQ+TxLnOGTvt7n67k0ji9IOTs+RFp+Cb
hBULxnjHWeTs5kWHs4I/v4nFb7u7Px5HRdFx+GbFyj9+5t3y59sLXV3/4/KvP/6b4/wpm82c
/5uG0Yd5nq3T2fMoS7L8J+dPbMIidnPy/7trdLcXES867d4pcTrNZpvtN7P449npwv9OG/Gr
0275x1Jodad4OE2Y8yme8cWLjtfr/bnjTLN8xvIXnV7HiViSFKswitP5l59X4Wx2+/PZk1Oe
n53ymRPPXnTKO2F558HFzo7SabE6+TVcst13p900m4rXdPnsuxcKXcWbpS86fufsdCcWL+db
ES40eF6+e8cp8ujBEw+L6Hge33S6t+91HS+Z82xZ/OVxb7iTfp1+zKKQx1nqnIvnz39wja5Q
+YveD3S9fZiyh3b72p1y32rDPosbmrHZrUpfbvvhG+1uZ/N+9c3DOTtK+MnP4hPnwjDDWXE0
5+LmhdzZdyqI/8q7ffhgPobJmnXOBm4w6rujwHvwxxXLI5by4u79xb04f/7m8X77zd3D2l5A
2Hanpqe2XPHNN4/sx5IJC2+ef4r54nkRTwWm5/s86D2sUIj0Hpjhjz6d9+HH8DgJxZvefijT
H36I19sP7+5z+7FM9RXY55hXv/7ZXxTswutXGsT35nD/xX7la5uE2N7GIvghCVcFm9VkMZ7U
YqJseVzweLlO1sXxmseJxHKEbhfl1Z++ZAnj7BVLxIPWsaR8ndZhSIHnDrxBpUX4ldZUTU0/
tCYwHHTH8casKsvnx6HQc8GOk7V4cOy4YGEeLapN4c064fHVVpDl+hxVk2UNBm5/Us01gW08
9ZHlPI7C5FHWB9/gXovb/HxncDqmtnszibX9D4vnC+46gj85y10nTjkaAwRDbY+zRNsZ8zpb
vcyicxFFsIhnWiZcBvZxGvP7Ef1/MGRFw+23LLiryVSVuJjsej+7dp13eZzlMd/8tmZrpsTP
42bN3HZqftRlHyVcLtXhY+FVzJsGgpLZE7lToF1hw1s+hR2g+A3bMDG3cobVrMnL82QPogjA
rD0h1j7g6hE+EZvNeNwPZZRTH361zVLq47HGa6GZn2dpwcOUX0VZzgQH55und7/a2aSW6ZcX
lYDn2RZov2/LwOqWXp0waXmWuQ4DbxcUrvYw5INFJ9/fh+tcxcs4Ccs4yXXuAcZ1diBVBo6k
8EcuAgKCIHRU1AW6RpH1FUVKgOnREgCo4dvojn4P0znbrQd04DGNeVF/BBb4I3Ik4G2/RjwB
cjtxac6y5qx82ZTP4bl4IiKC235VqgaT3wFr/TVIIivMQUab60yzTDyiVMmtDanGAR0rLVhE
7YGvbTdoCbKXWSSJ9aovNMuiGionw+ocQzWQ+m7Qr24TIR8GT9L81g554fGXmF8xrfR2/XX2
UcONgOSDYEi22AcVjH2QgKl8GxU0jatzFNVoCtzRoLqeSo4InqR5RyTfY7hbq2jtMfxjHSay
LN/b6XsWqVWKhjrtXorAIVcEQ7IdCIqy5SrM2XW2V35BbRWkE8uR98EoaR47TSyDCtnLVVc/
njB6ndy3Yu6APA8QSZSlpe1CaFdM1QEVF2scWUSnug7yfHdEWwzh2j2EohIu0N3rYNBaR6XF
OmdvV6yWcQiUyoOOEuPIg9Gd9Jh031/TdVO13Xsg/+e/tkMhyi86TlAyVYucIAaAmVcfZZx6
xeZLYbCHwDCX9nc0P+JMMluAXCZgSQibbNE0Vv2yvrnRXGpm8gYtHAAm3NqIW3zL0YYDYxVs
Bg03FZNvhSFJMfD3MfAbls8ZgqkrgU4jJS1XsUlSGGzXBBmPMsDgMYcIx/hd7uv0RtJvc9iB
lXdh+YMRCipIHgS0sIWKNkQIRuaJrUgqNw5d8sIwJMkL11G+TdnnWk636enAlJa62CShOFhA
KG5w3bvKVtTvRFC2B8oAnXKTcF7LXLLGVjAagwwVeLaCGWEDZYNgX69esbAW990w0sl/w5DE
B/lHr9XBL88PWpcWt1pcL0LZloZdTOA6hmKD6mFbFBvAk7SZKOyjFN0ZfPtukFfejtEweVC4
AUOSWORRkoetArZqAIfWaZMUnmCThEAsAPOQFoQKvk5tsHpLCoUKgCUhINpgy06rnHXTGCdo
tx7aUZYk4apAsJY/ZA9tTQ08kmF1VD0AADpEQAYYSNtS0Nc6ypt62dFJQnC1MLLmVlTptfLm
1M+OVxIEju2rkyEtvWslt73qcxHIi8OTRIZ++3gCepK8eUagwACGpLXUQEXyBorkFEjAtWtE
bIHGj9/G++AH9gdBdVacFvoQ0IQJofZhuYRXWQ8rEKBZZ/wiZd3RSWJSH16trdnJM1GSpZK0
n9rIVXLg8I2/3di3byLVYUak10UJWueqUk86NklM6qOMAg64ApgzLg8k1EA/ppo9AgC0G/82
NLpfL3JBA5eZUEOTCaxgAQI/HkTBcP4t8/f15fu8oLoyRi4fhNm3HPWWLw7gD6emVny4Jk/c
AH7hADqFWN8pixRZgAeFcaBhUQpnZHHAZUjB2Ic98o6KJ8hpNfdRgIFN0kr1MQ/1b3aVUnKJ
hEeSLJ27zpfTsXb/l1SmNLSDIhHw6DGOSDuVamfCtKYCqc4xt9QVgU7SSvVrUooqrfDphMIS
GJJ2qt/2BIngiO3pvW9vboraSrbBkE74hQsB4oq2L2EgT14I+joBhzes3hlGEQdgSSvVb9dK
BsOQBn+stXtUhWGIWGzEIC1lTC9lasqgDr2m95dTCAJD0kr1oZR8oeVL5QkQjZGSg6Zb1ok5
8IDMTqXaHpDsM/VGiUtGWikRCkfQSlqpvu3H19sxbscb0gZbsBAyDksrlaoxVYsvJoI79aff
9NgfioZgSFqpPhSGMktKBc9yVk0nO0Jis237yutUeqqXGXKa0CZksFAzDl8rlQJaiQbdU+sP
aaAJfBgYhxYWpdDkXQ650zgK0z3Kz+oHELnegGIJuCZP3EANLTjGIulMLaB0CV5JUt/CyhHw
aUpNcw1RDCKMIVHKuPpAMyr6vf1HCT+J05gfzfmJhHyiRZj/81+3s1UUxzVRjgU+hBDBEo0k
ynUUio0BfuMbA4hKiEqQqA80bIFdCKKdRghgYBxaWJRqQ5ACeniC3/QQSWIRYhEk6gONTzCM
TAh8GpMPHw3GEYZFKQs7Ww459zoK09oiFK/nDnu0swiuwROHmGcbfIsi/ZJ0fdMoqQyEwPKJ
dpA8KGtXUXPGzxdhLhvgcFeQdp17JWqlIVMUBEEFhHGQYVGKgqADb5l+RH54925KzNPv63CP
6w0pKkIr2XL1a+4fbjFp7RM8Pejq04yffL000qR6WUghFDzJlqtf04OyYfX3JuQLHQpbxume
yz61UVpaVXkVpqJoC4Zky9WnHBS0Sn5fK2qajKr7AChqgifZcvWp1l91qZR9rqOteeJO+lpH
wLnegA5yQivZcvUpK26iNUA9H97XWp6pURUxFDGUXZLWnTJztSk404quwjwPN1G22ux1zMxt
WvzBDyZ2vlPshVmy5eobf6TmZyk3GZddi/XjJUvnsvT7M9XUudbJNxSaIZRsufotWTzuMfD9
MIPey83///06rWXz/khv4ehL+rAozgIs2XL1jT9S83FW42dWlFT2y4bXc9qX1hwSNwiqqZAC
LXiSLVefAq0aAq3LTNYAoURPevMHfDfoUUYLrWTL1Tf+SCnSOuzRPzozsgWVTSilhU2y5eq3
ulnrMKn2kpAkZPSV+VznImbJbDtNV617y5OQDFUQocCA2MouybYeFt1ALVFyvgjVErFghNTH
IQkvGbYHnX0NnXTo7Ka8yq/hUraCVJ0dM9Ha+0zxGWbJlquP6eFjWaQekPTKq9REeiOdzBkF
cBglW66+lQ/fyO7tNY+Tavb6uWzWv4wLrcKB/JQYVfILaD9la2mg5erTMtZkT8ej53qpzvNy
+wF1+4NGAlGbXZIIF7M2tYJ4gvG0mkGGrufTKFa0ki1X386H31aWFPcrOV9VjSN1GlEkXcMU
D8KTbLn6bX/4INhzj4LJebZcZet0diHeZ3dg/dPzq8MFnK9TzvJUdmD1s6mIS3WX3TqFZBV+
peAThmTL1aeHj4qSjS37ZZnPQ1CwVg6AQlxski1Xnx7+wSVR7NC7uHoZ5ywSgpunFzhjZZ2x
ej7V39FKtlx9CkDtmFc1cCeBznI/cPtUYUcn2XL10UhioTk05fW+6491DjpVpDsK2mBItlx9
CyXbypA1ldYDrRkP1YEkBYLwJFuufqslQVBnq+rqjbMrxZ0wJFuuPkniIWSrq+qe1iFIFN5i
k2y5+iRJNXWMcbLeCU8UJ+OVhLeveo8F6pt1wmPAJ2/7gesNdSKfwB0NFPYUEpjwBD/4Zowe
8MT7WRZd5OyPOuqNOvNFFWFHzgyGJGb8yUcjvcvjLI/55rc1W0sq9dUX4tmqjj2iI53ZSCN3
IIlByeHBk1QaXdFO0K1qAV3g9iTHV5LDA4IV4/hDOGemQXzOsk/pKxbWAVLfnfgGQErYtBWb
yApc+y8t37B8zrShLG61uF6EqQTKb6fvWcRdZ/dVDdjDkVZ9a+D2VI5sJfcLQxIExO0jgzLB
pIP/KFuuwpxdyyagl++jBvveQMefq8Ke0E5oB19j3XMSeBKKtX91SMDzWHaM8WF4YPdOarMj
fb3jECgAQC2JPf9lgTMOXH+gU/KhxDNGyfp8MXlDZW9YLocNQJGcIQxJ7M6wyWKQrDnwmXpS
qswW682XGA2qk1rkEOFJUiXoYOBcr2qqAwXucFg9KLAWZJJ/hCEJIn8EAszWFoQCt68128nz
XH9Im56wSYJAtn0cAD315LsjrYMxVNFODh2GJDLYU0GoiYLQcKy1lY4CAIySCBfUj4zB5QfK
G9lo5/muP6kuoFIDNBCQmAee5btiD7g/j0tDb8WzNnt93W2xlJvGJlmT+nY63RK9u3E/elv8
5ItnJQSPtbe1UwYbrSQIID9qGYvLgesmvI4SfhKnMT+a85O9lriuc/d1mmXieaVK57Ho5MDI
o2OUxEcEVuazHoH3aBHmukOiBp5OrzP5ftSSVJA+2OK6rlyYWF2PDOTCCJhWAhNzssyGc8L6
E51CksDykI7NQStpXH2DeyZQzdCuY1xIX7NJVAX4hPd24731Tvwyk63FlcA89A1MxSMvDkPS
uPoIS2Q2eXJvrAv+6jEj5MnhSRpX3+pEnT3nPurE+NWbrCkkACxpXH3jN2A+WdCqExAb5hmi
l3bTC8A8QmNNdyWyJYj+SiGucxGzZFb21RcmtppS4ztqSePqYz5rozFGKBi/Zp/5JUvnfCGh
BlX/Ljl9jUr+WCCNSH3so54aLS2cL8JcdtTuQdrzJO11FA8Aga95RJq+AapLmO0w8HXaBEfu
OKC6BDZJ4+qDmJbRViqpqYihM+2VBt+glTSuPgguQcY6rap66LRO0/gdbJLG1UfGR8iYy9jS
S5a1QchUFELBkDSuvrWUhagRZQ9iu7h6GecsEoKbpxc4YzGdo/IoFsMmaVx97LWpPdZpXztH
dGjgprzKr+FSlmFWhP2opzstgspRaCWNq297OapZlpBPf1VliYEJliByIHIwvfYxMpRKforS
z3kebi7jQmuBMWeygRiKbBH4urPmKKZAK2lcfYRhgg2DcDw30DtkuzylmxpWsEkaV596UJC0
sw37JuiBwgIYksbVN34DrWWUm3q62nSGdtDEDnSSxtU3fgPYqKZVrWw6rfoqbERxDQxJ4+ob
vwF7CczqjjadiSMUPqGTNK6+8RugNrY2tLE1TWsUh8GQNK8+iJClyZkpEjR/fR+ljhPX18oX
U88JRklE6tc4LOlwZ5dtCs60DkEKy0aTKFttJGB/O30v4oZb1/3gBxN+fETT2NFKIlLffExv
04g0351onzpOHh+bZJQlSbgqEMTNb9YJj0s0vcwirV7t2g4WHLjDSXXnpV+JoLHr9TCf/Qkk
JMvZjazlPw2T+H9Z/vTLd9cL+VhaSZ5lndZhVKOJOxxWB2NBdTCGj5Kx2NHvrKw9pBF7+uW7
V2E6SzTnI9doSNVV0oMbEhhm+uLljO1gjLLlccHj5TpZF8dhHi1iYWY54+IZxllabRHv1vmc
XbH8YxxJGgONWNZkIiLHar/Xt42ijO+I/aE9xan4dSzNSghLgkhRfs9zx0HDhgSGoqBMCj9c
8ovn4sZ+WcfJTM/aeLa7VB0mp5Plsn3qglEjK9bpcRpnx9FCYmVZ9IHxn2fhimdaVjZn/HVa
XmmWs0LWAKLkJ3U25akYG1EbeGoLVyuWyk5D2b2bislJshGSAca2n2tk3tIE38h2He7JSFJu
e5UVfI8pJkqTizytYhExGyx76x/O4OpzpoOeznkuFLrZ5ESPEn4SpzE/mvOT2lzpQJI7I5ID
YHmPWzScL8I0Zcnr5UrSGCkpzW4vVsfi1B15Wlt2bWc581nd+4XMbN5/L9ltFXI2z3JJL0/1
NWZsupZlQnb9P2rHJQZDndMK2sNz5m1PIwP8O/tjLd7ttzVbaxUUxGdQnykG7tivNiev3fTX
9Gysvb3rtr5wUB8bRhFb1dK0MRi7A8lcC0lZFDPl1c1iBxu4dh0v4TZp+H7fHfSq/aZ1FVAg
piNfZ0K1Gs+djEeuLyl4BqNqw6mewgGbfUxs2dGPmqDak+96Xt8dj6o7CINJtT1VWyNIJoLD
WSiC9jnjv7LPfBeZ12GHA7cf6AwHUqg7waE02I3XOl1Db67f3ZrgAZocF9tL3F5PlrS9v5Jw
nQvGo8UbVhThnJ2HSTINow9qfNkbj8U/SXOthC8fvWX59o6ePHGc0+7qrPwyiz9uX32TZZzl
nbO/sZTlIWczZ7pxTkNHOJybF50F56ufut1Pnz4db7J1/iHmx+Jz65z9Q/zwXzF3/i7CIedd
npXmkDuj496xf9oNz5ydNdz/3+/1xt2e3/VHjuf/5AU/9YQW4ia2N9OdZrNNeZ8LvkzOnvwb
UEsDBBQAAAAIAGtlWzhQfqUOaQsAACZDAAAQAAAAaGFyZHdhcmVpbmZvLnR4dO1baW/bOhb9
PsD8hwvMlzZ4srV5iQEDdZY2wTR9Qdy+PmAwCGSJioloG4lK7P76udRiSyIl26nTeS3GQBRL
vKIu7zl3ISk7JLFjGjEaBhO4IMkjCyM4D/0oZST++98AP1EcOqnNJnA7np+P82tPJHDCeALz
NCKxT+04LK/HSdaVphvmYDgan6p5Q0Jianni9WfqsOUEDB0WlCX5NduKrAX1KKMkmUDiL2iY
KHrPAMen/H8hFQYufUhjK9d9EYZsGoSxb3lgL60kocnUKcaTptSZDs2xMdKHhjI2h7oyMk8N
RdM1XVFVQzXH4xk2XvKeTxQ7jEn+DPw4VQPdhGxJ4kVoxc5GQGaeDgvxO5brhNqoJ3UmoFbu
KGx3e34Gf+Qnm8Y2+6G6Lo39Zysmk21XTb3Prn+fVxtL5W6XIQnoCj4TexmEXviAFv8NPn6+
qAq3qFvVeNhTVbj9AG9Uva+P+rqqDt9WBRP6jXDdx/88q17mQNuUrSdgmpKmLQdoYkFkU4iC
CKzIhzR6iC2HQLK0nPCZBg+Ao3XAdjgLMiokxCM2gyS0HwkjThz6QBwHaMA0w/XCKFobQ7V6
qqHS1fORXjvVx+PsfBDFeETTEhLw89NHss74kAmbOUzZ91EmSeLsRH2iDgnBsiMKabIAL8Hn
Zcp+o1GuNJI8UzwiNnXR3mwLP1IySlvBPb/9UoOr5OM1Pt17c/cWbknAaOrzryaXBqOnqx+u
vskYkd2EASCOeq0cMKstizTBEbrhBFDHd3J6aIOe2dNqbSWfVfwo6ntzpuTfaofaDV6IY5pn
eII5Gov0MhDBm/qoiugyNCvRpeCXhz1NQLylTjw3SvnfPVnZJDM3PEfw5BNEAKKEADIB/CSG
yCLg2wTs1RgJSm0cXwQ+i7HlgbdYYPvhE4oxfpsxxOe7XposwWFJzgrfX4G7wq4S7Bb/dDzA
kgHzIVoQCFawGg8VHAnGvYRZAbvnz44CvDMMKAtjcJJ7O/LQExjYFJ1hpQ1hxaIYPGvp3nt+
bZT14InhUds2I90se9mIJ03WfdQgk2rI1IhiNRpzDDnF4gBFziX3l1DWowFUY0VLYyVjrAN7
GYdBmFGzeNhzTBlRFpb9KA5U6xyovnugC+lAL1c7B6rftI9T3iYfJll1DpNHdtQVPXQHqLlc
M6Q0h6v1mhZrdzRB7UKXFvW6odhXPf1Y6p0oPvHDeN0afOfrhBEfbgSpmkZ6LWQWoSy/M08e
6L6+pLaATeocGMMqHU4Q4uCxG8yL65sbmF/czfC4pUrTcGW2+BQGTYqWOUHS1F4TwDa2S+7L
h841+0cT6XygA02kfRt6hRE6KfPDjCAMZy8jNIlaoP3hQBM0uxFN8C/iR2z971cYuDCEvQZu
CGMw/odjaD57vzGUTl0pwWss6CzB28lTcEDVjU2eqzxBf9kTdFXyiJuOkrtSRFfK4IDY1VMW
Jku6sDZaYo3eqt5ViIXJIqbOQ82kG/guR7qu9vlRK8IplqEBi0PPwyL6Kq3lWLFcDeNqxSwx
cb2c3JatqPM7VZ2oak9evKoDSUVZm68W5ssrSsOoFZSZTbrj9O35tcQubabh0perKCZYHt7x
icNtGLMW2ndaRzBQo1G0kNZrjqPFSJ12ajVV3lQjIZ/z5XP6e4fYIRbdqNW9byV8XoWi9x5N
moNvlLZOTFHLKfZE0ApMyc9r9wi8PQSkKk7Dkarf/nlVxUhhocJPz7J7YSbevS9YsCPrggCZ
JpC6fGKJ2qnY2AkcdGIH3w/fiZLkZdGXT+cfZ9c3lxe7cLk+7wZE7ZeoXPd/X81QPp+AxGnE
qgHmmMgI5THIsZGI/TBsaHi/uleyuepunwLBrTyLkcBeTyX0QtqHaWznD8nL54mj5h8l++K6
bjVCOjSJPGvd6KkG8x8fZqiBj/NnuvAIV6bArStkahlyD6gyceBDbEVLaicVzI8RNZvVjxg1
9QOiZjEpHAzbauDvjKdPD9bhEbQNajnORomzMUKYXWziYXdC+EU8jLaydskJ280/tW7GZTeL
vCn+z2RQJQ1Pq52V/+60OtbHqvb+rP/+7Kb//q7//isev8Kb6/OrIby3fOqt39bSLc+0Qpp8
Wa61d9FGszto0yxXf5pkm8PWOVt5JdiaJnshbMLKggy4pswvAFyGXUDYcxg/NnpqAnjJlzFQ
NF96cy27q2L6RNifLCY+gbPzm8EIQ/YH+oBDY9tuKlC2p+izOLQcTBBHrZ/MlvqpWCKCwPIx
WhO27KqxNEmS3y5+Twx1Yo4nY2tijCa6xFKbBYG+LN9v1gpbBDrXveCwgkHCKT72HKSNZX1K
caq1YNlBcR0+78rOtqfFeXHBShlOsh9CRltAazC1IT8NAwwXHHxUbbomSUll9mAUXwsopkZv
pIOTRh5ZTd3U86CcU0858ZQno6efWkCjqab2dHXY03rj8Tb5gUeDx+wBfuoxunkcd5cpe0Zr
YJERWTSGJCLEmbYgIk+aWpk0NXWT7bRRM252rpC8Utw0jxQ3m7rL4qYYo3+puAkX1/PZ2ced
U5pfJ4AO9g2gXROhQwKo+/8YebwYubQ8Vx4jDw+K+wZCvQyEeiUQjquBME0W3ctpX+Zn7XO8
g4Ih7+nLFXqPsFfxsijo7IyBzg8v+tMlBsEtbfeKdvye+6Xt7DczzKd/Gp/+aVqB6GkjQiKo
y1C26rDBK8MhW0JuxbaCy0capCvQe0NM5Io2UJKM4VAqviOwda7eoKrvJAL1kIZCXSFN76nD
XaEEu1C0xksThZwUlGW6AN9aReEznqj+LNuoSKZ6WY7gM29q8S93pc4p9Gu4kjg5epErCWtn
MmcS3fbXcCadO5OuieERfkJnahICJM4kkfkrOlPnwsZrONNxVjWcPVY1RJlfxZkM7kyGJk66
4Cd0piYUIHEmicxf0Zk6Z7uv4UzHmeo6e0x1RZlfxZlM7kxm6UzDn9uZmoQAiTNJZP6KztRU
8/WcSYdLjuFxd9nQY0Z7eFVT5rW9itS96rA1I3KQe203xuxyY8xWDffF86nLYzgaOZKjNbdB
QeJoEpmDHQ3lvtfRxoWjmWNV9DS+SNvpaXsu0sL2jZGjeE+zF9F3SPvCg/N6i69JumCxZTM0
+F4rsCcKTZrvlNfsez2f7bsIfpeHrj4/3L2Fj7fFeyF8vfWYtm8uSYq2d3/4og//Oc2+xYAk
OiEMzo5fB1xfXLYuXx+UUXhHR84l7h5rB6JMPSAldkKbni5KNGPWq+NadyCugiLJA/KAZzHr
PqJ0dUC5p7mYDdxReWq4pmK4xqZ1hK2jbesIW0ebVpdnMTzINrs4vToXpg6g192WVHe5s399
C/PZ59nxabV7Fi3KiKRpml2U2E3N3U857gRkODyQmtvdET/1svezDiQrr7wOmJec8nnJqboh
I7H4BUvd0JEs+IVFRcLmF+yKhMMvOGr9NSXbKKsxw5DsV0Dxftuulybm5/NruJDKbfg8/2zo
A3WsG7O5KFVyFom9oxrDukW2J7clK0finTppkatTqe+Qp37iNJMyVAhlSIuzcgfP/HShj85N
yZ5o8S6coQs/hgChlrBiRrkhs92mzfeJE8r28xp7ZUFCy90vocY8UZ5CL/XFZJd/6j9Oympk
l3qkeIV1o4n03l0VMrRB8ptcWI6LXHa7J3o6MMbCu4ZSE8fUt+J19rMAa+EJW9IbS8mfWN/g
XqHfOlWsdltIsgLcbiG5sNxCctmCfLohIx/UfqXXKSMakAiDb5C2FJD0ufmlXCcrQUrM5NmK
oA/z0LNimuwwPTSsL5l8ddm0VbyyGW+aRgvxBNMFoSvxY8EacubJrbG3mzYtIQllXZZoFa8S
qBbhTpTiN+Rtb8DX88bNWfuv2fapr7MOjl8K7V4DFWVeoTp+wYvMWa4fYE4flKuYKP5fUEsB
AhQAFAAAAAgAomFbOEQG3la7FAAAuK8CAAkAAAAAAAAAAQAgAAAAAAAAAHRlc3QuaHRtbFBL
AQIUABQAAAAIAGtlWzhQfqUOaQsAACZDAAAQAAAAAAAAAAEAIAAAAOIUAABoYXJkd2FyZWlu
Zm8udHh0UEsFBgAAAAACAAIAdQAAAHkgAAAAAA==

--------------090509080001050705090306
Content-Type: text/plain; charset=us-ascii

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org
--------------090509080001050705090306--

From java-user-return-32808-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 27 12:34:49 2008
Return-Path: <java-user-return-32808-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95084 invoked from network); 27 Feb 2008 12:34:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Feb 2008 12:34:49 -0000
Received: (qmail 72843 invoked by uid 500); 27 Feb 2008 12:34:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72821 invoked by uid 500); 27 Feb 2008 12:34:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72810 invoked by uid 99); 27 Feb 2008 12:34:36 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Feb 2008 04:34:36 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [208.97.132.81] (HELO spunkymail-a16.g.dreamhost.com) (208.97.132.81)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Feb 2008 12:33:49 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a16.g.dreamhost.com (Postfix) with ESMTP id 5397A7D209
	for <java-user@lucene.apache.org>; Wed, 27 Feb 2008 04:34:02 -0800 (PST)
Message-Id: <993E6B60-E3D8-4F61-AE7E-D0FAD72BEAA3@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <47C4D573.7040305@gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v919.2)
Subject: Re: Inconsistent Search Speed
Date: Wed, 27 Feb 2008 07:33:54 -0500
References: <15698325.post@talk.nabble.com> <15704908.post@talk.nabble.com> <47C4D573.7040305@gmail.com>
X-Mailer: Apple Mail (2.919.2)
X-Virus-Checked: Checked by ClamAV on apache.org

You could also look at the FieldSelector when getting the Document.   
Such that you only load the one field you need

-Grant

On Feb 26, 2008, at 10:13 PM, Mark Miller wrote:

> The Lucene prime directive: dont iterate through all of Hits! Its  
> horribly inefficient. You must use a hitcollector. Even still,  
> getting your field values will be slow no matter what if you get for  
> every hit. You don't want to do this for every hit in a search. But  
> don't loop through Hits.
>
> fangz wrote:
>> Thank you for the info.  It makes sense.
>> My search will return more than 10000 documents and I have to loop  
>> through
>> all documents to build a list with unique field values. It seems  
>> that the
>> looping of the hits takes the longest time in the initial run but  
>> afterwards
>> it becomes much faster. If the hits are relatively small, I do not  
>> see the
>> same behavior.
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

--------------------------
Grant Ingersoll
http://www.lucenebootcamp.com
Next Training: April 7, 2008 at ApacheCon Europe in Amsterdam

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ






---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32809-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 27 13:07:31 2008
Return-Path: <java-user-return-32809-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 9801 invoked from network); 27 Feb 2008 13:07:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Feb 2008 13:07:31 -0000
Received: (qmail 9139 invoked by uid 500); 27 Feb 2008 13:07:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9107 invoked by uid 500); 27 Feb 2008 13:07:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9096 invoked by uid 99); 27 Feb 2008 13:07:20 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Feb 2008 05:07:20 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [17.148.16.81] (HELO smtpoutm.mac.com) (17.148.16.81)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Feb 2008 13:06:33 +0000
Received: from mac.com (asmtp010-s [10.150.69.73])
	by smtpoutm.mac.com (Xserve/smtpout018/MantshX 4.0) with ESMTP id m1RD6rGX012871
	for <java-user@lucene.apache.org>; Wed, 27 Feb 2008 05:06:53 -0800 (PST)
Received: from [10.0.1.199] (va-71-53-215-72.dhcp.embarqhsd.net [71.53.215.72])
	(authenticated bits=0)
	by mac.com (Xserve/asmtp010/MantshX 4.0) with ESMTP id m1RD6nfU015169
	for <java-user@lucene.apache.org>; Wed, 27 Feb 2008 05:06:51 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <47C54625.2030602@stimulussoft.com>
References: <47C457E5.6020704@stimulussoft.com> <652776090802261221i58cb0247n8d4c28b3290c387d@mail.gmail.com> <47C48F16.2030901@stimulussoft.com> <652776090802261523i2068905t3643815781d2ad71@mail.gmail.com> <f09790220802261807x71d85fe2hd43fd7512ea99c52@mail.gmail.com> <47C54442.7010104@stimulussoft.com> <47C54625.2030602@stimulussoft.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <BE73F502-9C54-4D1A-B07D-639163259AE7@mac.com>
Content-Transfer-Encoding: 7bit
From: Michael Prichard <michael_prichard@mac.com>
Subject: Re: Lucene Search Performance
Date: Wed, 27 Feb 2008 08:06:43 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org

I'm wondering if your date field's precision may be a little too  
much?  What I mean is that you are going all the way down to  
seconds.  Whenever you do a range query you are essentially spawning  
a BooleanQuery with a representation of that range.  Do you really  
need to be that precise?  I usually stick with YYYYMMDD for search  
date fields and it works pretty well.  So you know, I have a 13 GB  
index with 3 million records and my search time is very low.   
Definitely under 1 second.

Just a thought.....

On Feb 27, 2008, at 6:14 AM, Jamie wrote:

> Hi Michael & Others
>
> Ok. I've gathered some more statistics from a different machine for  
> your analysis.
> (I had to switch machines because the original one was in  
> production and my tests were interfering).
>
> Here are the statistics from the new machine:
>
> Total Documents: 1.2 million
> Results Returned:  900k
> Store Size 238G (size of original documents)
> Index Size 1.2G (lucene index size)
> Index / Store Ratio 0.5%
>
> The search query is as follows:
>
> archivedate:[d20071229010000 TO d20080228235900]
>
> As you can see, I am using a range query to search between specific  
> dates.
> Question: should this query be moved to a filter rather? I did not  
> do this as I needed to have the option to sort on date.
>
> There are no other specific filters applied and in this example  
> sorting is turned off.
>
> On this particular machine the search time varies between 2.64  
> seconds and about 5 seconds.
>
> The limitations of this machine are that it does uses a normal IDE  
> drive to house the index, not a SATA drive
>
> IOStat Statistics
>
> Linux 2.6.20-15-server 27/02/2008
>
> avg-cpu:  %user   %nice %system %iowait  %steal   %idle
>         20.25    0.00    3.23    0.34    0.00   76.19
>
> Device:            tps   Blk_read/s   Blk_wrtn/s   Blk_read   Blk_wrtn
> sda               7.12        50.67       186.41   38936841  143240688
>
> See attached for hardware info and the CPU call tree (taken from  
> YourKit).
>
> I would appreciate your recommendations.
>
> Jamie
>
> h t wrote:
> Hi Michael,
> I guess the hotspot of lucene is
> org.apache.lucene.search.IndexSearcher.search()
>
> Hi Jamie,
> What's the original text size of a million emails?
> I estimate the size of an email is around 100k, is this true?
> When you doing search, what kind keywords did you input, words or  
> short
> sentence?
> How many results return?
> Did you use filter to shrink the results size?
>
> 2008/2/27, Michael Stoppelman <stopman@gmail.com>:
>  So you're saying searches are taking 10 seconds on a 5G index? If  
> so that
> seems ungodly slow.
> If you're on *nix, have you watched your iostat statistics? Maybe
> something
> is hammering your hds.
> Something seems amiss.
>
> What lucene methods were pointed to as hotspots by YourKit?
>
>
>
> <stats.zip>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32810-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 27 13:16:05 2008
Return-Path: <java-user-return-32810-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 14750 invoked from network); 27 Feb 2008 13:16:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Feb 2008 13:16:05 -0000
Received: (qmail 31626 invoked by uid 500); 27 Feb 2008 13:15:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31604 invoked by uid 500); 27 Feb 2008 13:15:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 87928 invoked by uid 99); 27 Feb 2008 08:43:22 -0000
X-ASF-Spam-Status: No, hits=-1.0 required=10.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Date: Wed, 27 Feb 2008 08:42:58 +0000
From: Simon Wistow <simon@thegestalt.org>
To: Lucene <java-user@lucene.apache.org>
Subject: Atomicity and AutoCommit
Message-ID: <20080227084258.GK47406@thegestalt.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
User-Agent: Mutt/1.5.16 (2007-06-09)
Sender: Simon Wistow <simon@bacchus.thegestalt.org>
X-Virus-Checked: Checked by ClamAV on apache.org

I currently have a set up that indexes into RAM and then periodically 
merges that into a disk based index. 

Searches are done from the disk based index and deletes are handled by 
keeping a list of deleted documents, filtering out search results and 
applying the deletes to the index at merge time.

All this was done to make sure that we didn't corrupt the index (which 
we'd seen happen a few times when the indexing machine failed for 
whatever reason). With this scheme if the machine fails then all that's 
lost is the RAM index and the list of deletes. We then just simply play 
back all actions since the last merge and we're back to where we 
started.

However it occurred to me that this might all be redundant now with 
Lucene 2.3 (it's possible it might have always been redundant come to 
think of it) - should I just open a Disk based Index with 
autocommit=false and then periodically commit the changes by close()ing 
and then re-open()ing the Disk index ? Is that atomic? i.e is there a 
situation using this whereby the index could become corrupted?

Thanks,

Simon



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32811-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 27 13:17:21 2008
Return-Path: <java-user-return-32811-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 15853 invoked from network); 27 Feb 2008 13:17:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Feb 2008 13:17:21 -0000
Received: (qmail 39576 invoked by uid 500); 27 Feb 2008 13:17:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39549 invoked by uid 500); 27 Feb 2008 13:17:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 63681 invoked by uid 99); 27 Feb 2008 11:24:11 -0000
X-ASF-Spam-Status: No, hits=4.2 required=10.0
	tests=HTML_IMAGE_ONLY_24,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of guruprasad.ms@gmail.com designates 64.233.166.176 as permitted sender)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        bh=B/MwrOpzScF5Q6KO88RmZaDpMQAJDU+ExYgLbMM9LUA=;
        b=kUgS7DbBGoeyJSidf37FDZOk3N9CnPONBGywWB/zlvgGNOXhpkU0r5CiribkG4W87XaRAYWSaqVFuq2KggS7fM9B7b29pm36nITUkXDmjx/RuM3tmQAgNoNZ+3Jx2PehuWcDwOcOz9wxWt64xzjs/+U+zJ0okQYsfMVs5pB1/8w=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=cFhfaSvVetjXEfqpDdfwB3PzKvdnzzYecw4IcrEUjN29tj/+IppvOFY9GyZNaPlJd0VKAHRoXwtvvjsGaiG4aUV7tf2SQ1bKfHQsQen+DAwXrzCvRrd3zxC1I/GZ5TZlAEs72f+xVjgyyaPVUIYfShkSHVyXtojUIKao0i6MxYQ=
Message-ID: <3b74147d0802270323m1e70b2earc522e77f16dba9b7@mail.gmail.com>
Date: Wed, 27 Feb 2008 16:53:46 +0530
From: "GURUPRASAD MS" <guruprasad.ms@gmail.com>
To: java-user@lucene.apache.org
Subject: lucene java OOM while sorting more than one field
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_15933_29309760.1204111426251"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_15933_29309760.1204111426251
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

 Lucene Index contains 2.1 Million records (indexed from 2.1 million records
from sqlserver DB).
Lucene Index file Size 256MB
Lucene version: 2.3
Searching works fine when we sort the results on a single field. However, if
the search results is sorted on more than one field we get Out of Memory
exception.
We restrict the number of search results to 250

Out of Memory exception is quite consistent in 2.3. We recently moved from
2.0 to 2.3.
Version 2.0 also used to give the OOM but not this frequent.


*Code Snippet:*

final QueryParser parser;
StandardAnalyzer analyzer = new StandardAnalyzer();
String sSearchQuery = "MUSIC";
Sort oSort = null;
public static final String G2KEYFIELDS = "G2KEYFIELDS";
oSort = new Sort(new SortField[]{ new SortField (
GroupsConstants.LAST_MODIFIED,SortField.INT,true), new SortField(
GroupsConstants.GROUPNAME) });

parser = new QueryParser(G2KEYFIELDS, analyzer);
final Vector ids = new Vector();
FSDirectory dir = null;
IndexSearcher searcher = null;
try {
dir = FSDirectory.getDirectory(index);
searcher = new IndexSearcher(dir);
Query query = parser.parse(sSearchQuery);
Hits hits = searcher.search(query, oSort);
for (int i = 0; i != hits.length() && i != 250; ++i) {
final Document doc = hits.doc;
Integer oiGroupId=new Integer(doc.getField (GroupsConstants.IDENTITY
).stringValue());
if(!ids.contains(oiGroupId)){ ids.addElement(oiGroupId); }
}
searcher.close();
dir.close();


Thanks in Advance

------=_Part_15933_29309760.1204111426251--

From java-user-return-32812-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 27 14:40:30 2008
Return-Path: <java-user-return-32812-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58481 invoked from network); 27 Feb 2008 14:40:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Feb 2008 14:40:30 -0000
Received: (qmail 62410 invoked by uid 500); 27 Feb 2008 14:40:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62383 invoked by uid 500); 27 Feb 2008 14:40:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62372 invoked by uid 99); 27 Feb 2008 14:40:18 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Feb 2008 06:40:18 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [72.14.214.237] (HELO hu-out-0506.google.com) (72.14.214.237)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Feb 2008 14:39:43 +0000
Received: by hu-out-0506.google.com with SMTP id 27so3124463hub.15
        for <java-user@lucene.apache.org>; Wed, 27 Feb 2008 06:39:36 -0800 (PST)
Received: by 10.150.12.5 with SMTP id 5mr2288401ybl.128.1204123171388;
        Wed, 27 Feb 2008 06:39:31 -0800 (PST)
Received: from ?10.17.4.4? ( [96.237.56.13])
        by mx.google.com with ESMTPS id o61sm3369026hsc.12.2008.02.27.06.39.15
        (version=TLSv1/SSLv3 cipher=OTHER);
        Wed, 27 Feb 2008 06:39:25 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v753)
In-Reply-To: <20080227084258.GK47406@thegestalt.org>
References: <20080227084258.GK47406@thegestalt.org>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <C70959F2-3CFA-49C5-B0D6-B978011C3AAC@mikemccandless.com>
Content-Transfer-Encoding: 7bit
From: Michael McCandless <lucene@mikemccandless.com>
Subject: Re: Atomicity and AutoCommit
Date: Wed, 27 Feb 2008 09:38:55 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.753)
X-Virus-Checked: Checked by ClamAV on apache.org


When you previously saw corruption was it due to an OS or machine
crash (or power cord got pulled)?  If so, you were likely hitting
LUCENE-1044, which is fixed on the trunk version of Lucene (to be 2.4
at some point) but is not fixed in 2.3.

If that is what you were hitting, then unfortunately neither buffering
updates into RAM nor using autoCommit=false in 2.3 will fully protect
you from this issue.  Though, both of these approaches should reduce
your chance of hitting LUCENE-1044 since they both reduce frequency of
commits to the index.

Mike

Simon Wistow wrote:

> I currently have a set up that indexes into RAM and then periodically
> merges that into a disk based index.
>
> Searches are done from the disk based index and deletes are handled by
> keeping a list of deleted documents, filtering out search results and
> applying the deletes to the index at merge time.
>
> All this was done to make sure that we didn't corrupt the index (which
> we'd seen happen a few times when the indexing machine failed for
> whatever reason). With this scheme if the machine fails then all  
> that's
> lost is the RAM index and the list of deletes. We then just simply  
> play
> back all actions since the last merge and we're back to where we
> started.
>
> However it occurred to me that this might all be redundant now with
> Lucene 2.3 (it's possible it might have always been redundant come to
> think of it) - should I just open a Disk based Index with
> autocommit=false and then periodically commit the changes by close() 
> ing
> and then re-open()ing the Disk index ? Is that atomic? i.e is there a
> situation using this whereby the index could become corrupted?
>
> Thanks,
>
> Simon
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32813-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 27 14:53:08 2008
Return-Path: <java-user-return-32813-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77302 invoked from network); 27 Feb 2008 14:53:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Feb 2008 14:53:07 -0000
Received: (qmail 89187 invoked by uid 500); 27 Feb 2008 14:52:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89159 invoked by uid 500); 27 Feb 2008 14:52:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89146 invoked by uid 99); 27 Feb 2008 14:52:56 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Feb 2008 06:52:56 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 72.14.214.230 as permitted sender)
Received: from [72.14.214.230] (HELO hu-out-0506.google.com) (72.14.214.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Feb 2008 14:52:20 +0000
Received: by hu-out-0506.google.com with SMTP id 27so3134482hub.15
        for <java-user@lucene.apache.org>; Wed, 27 Feb 2008 06:52:28 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=PztI3Gc2wgRXzaGed4Qhi22Gl4tgnMroJ7wsGDu1hr4=;
        b=Q3y1MXnYCbMxVRLYfzhcaRElLKWTbRZ0fQSHjTXk9KdOuVA4OruNNnElhXXuH0F9jkt4F8k0AmvfFBDMKbNIDuFPYuTT/Smj8bO1nkx0vniUfqKcZXVj0jZHQkdZAhwL7gYdgc7bfctPpY7GjsZNstKpdUmld4BJ9KGvv9NjGUI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=Mjnq9V0UDDWtffZWjyNkpWhssl17GPT97f0dNw7Rec3DAAMtc+P0Ru/iqkLj1zDbPc8O8K7QJfn3h50mIF1lQ88d+Ylg5CnyQs6dBhhpWm0aKZ3BOrgdQMThUX0go+EfoSuJwPGFcc49miZQNB0Jzk57l6KEJq1dyJr71Ro/57Q=
Received: by 10.82.174.20 with SMTP id w20mr12237095bue.9.1204123947751;
        Wed, 27 Feb 2008 06:52:27 -0800 (PST)
Received: by 10.82.151.7 with HTTP; Wed, 27 Feb 2008 06:52:27 -0800 (PST)
Message-ID: <359a92830802270652q2c357f7cve6295823d6ce4605@mail.gmail.com>
Date: Wed, 27 Feb 2008 09:52:27 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Inconsistent Search Speed
In-Reply-To: <993E6B60-E3D8-4F61-AE7E-D0FAD72BEAA3@apache.org>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_17049_10960570.1204123947741"
References: <15698325.post@talk.nabble.com> <15704908.post@talk.nabble.com>
	 <47C4D573.7040305@gmail.com>
	 <993E6B60-E3D8-4F61-AE7E-D0FAD72BEAA3@apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_17049_10960570.1204123947741
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

To reinforce Grant's comment, lazy loading improved one situation for me
on the order of 10X. I wrote it up and it's somewhere in the Wiki. Your
results
will vary, and unless you have a LOT of stored fields I wouldn't necessarily
expect a similar speedup, but it's sure worth looking at.

And don't iterate through the Hits object for more than 100 or so hits. Like
Mark said. Really. Really don't <G>...

Best
Erick

On Wed, Feb 27, 2008 at 7:33 AM, Grant Ingersoll <gsingers@apache.org>
wrote:

> You could also look at the FieldSelector when getting the Document.
> Such that you only load the one field you need
>
> -Grant
>
> On Feb 26, 2008, at 10:13 PM, Mark Miller wrote:
>
> > The Lucene prime directive: dont iterate through all of Hits! Its
> > horribly inefficient. You must use a hitcollector. Even still,
> > getting your field values will be slow no matter what if you get for
> > every hit. You don't want to do this for every hit in a search. But
> > don't loop through Hits.
> >
> > fangz wrote:
> >> Thank you for the info.  It makes sense.
> >> My search will return more than 10000 documents and I have to loop
> >> through
> >> all documents to build a list with unique field values. It seems
> >> that the
> >> looping of the hits takes the longest time in the initial run but
> >> afterwards
> >> it becomes much faster. If the hits are relatively small, I do not
> >> see the
> >> same behavior.
> >>
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
>
> --------------------------
> Grant Ingersoll
> http://www.lucenebootcamp.com
> Next Training: April 7, 2008 at ApacheCon Europe in Amsterdam
>
> Lucene Helpful Hints:
> http://wiki.apache.org/lucene-java/BasicsOfPerformance
> http://wiki.apache.org/lucene-java/LuceneFAQ
>
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_17049_10960570.1204123947741--

From java-user-return-32814-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 27 14:54:42 2008
Return-Path: <java-user-return-32814-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77970 invoked from network); 27 Feb 2008 14:54:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Feb 2008 14:54:42 -0000
Received: (qmail 92451 invoked by uid 500); 27 Feb 2008 14:54:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92426 invoked by uid 500); 27 Feb 2008 14:54:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92415 invoked by uid 99); 27 Feb 2008 14:54:31 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Feb 2008 06:54:31 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.128.189 as permitted sender)
Received: from [209.85.128.189] (HELO fk-out-0910.google.com) (209.85.128.189)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Feb 2008 14:53:58 +0000
Received: by fk-out-0910.google.com with SMTP id z23so3700137fkz.5
        for <java-user@lucene.apache.org>; Wed, 27 Feb 2008 06:54:06 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=eeJzjvhCaGyJv3Ivm88ChfgBM7dYJaVWE4PEDzrrJQs=;
        b=joDd8O5w4RMyRnfJpFXw/i0954Yfwjd8PiGDV2gKYYkcuN4By844JsxOayai9FdxkJ9lBtAkW4Cxn2kIm84ijvrfLOxzB52rmVFcRmXUF6iW4SpoyrQa/35x9QWViQ2WHb6d5zINKbXUyH3tuK0pQ8seK99fZhmqna8JNf6Nrlg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=vjuoXjV1uXl6lYCk87xJngd4PcsxqKCFL55P4darhUwaNb+pKBWqs4/FNGUuS4TmHA8nsc6Y8zlBAwGkU+WGEh5IUmU89Sth6zGfhbzrKcPCeu2P1eZnZhZr05wGzANJQ5hEf3yJQK474Sc9RarOZ7rKag1qYro06dDKesbPiiw=
Received: by 10.82.156.12 with SMTP id d12mr12244419bue.12.1204124046610;
        Wed, 27 Feb 2008 06:54:06 -0800 (PST)
Received: by 10.82.151.7 with HTTP; Wed, 27 Feb 2008 06:54:06 -0800 (PST)
Message-ID: <359a92830802270654s38f2306dg99b66e68eb3dbe3a@mail.gmail.com>
Date: Wed, 27 Feb 2008 09:54:06 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: lucene java OOM while sorting more than one field
In-Reply-To: <3b74147d0802270323m1e70b2earc522e77f16dba9b7@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_17052_6351825.1204124046593"
References: <3b74147d0802270323m1e70b2earc522e77f16dba9b7@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_17052_6351825.1204124046593
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

The first question is always "how much memory are you giving
your JVM?".

A 256M index is pretty small, I wouldn't be surprised if your JVM is using
some vary small default....

Best
Erick

On Wed, Feb 27, 2008 at 6:23 AM, GURUPRASAD MS <guruprasad.ms@gmail.com>
wrote:

>  Lucene Index contains 2.1 Million records (indexed from 2.1 million
> records
> from sqlserver DB).
> Lucene Index file Size 256MB
> Lucene version: 2.3
> Searching works fine when we sort the results on a single field. However,
> if
> the search results is sorted on more than one field we get Out of Memory
> exception.
> We restrict the number of search results to 250
>
> Out of Memory exception is quite consistent in 2.3. We recently moved from
> 2.0 to 2.3.
> Version 2.0 also used to give the OOM but not this frequent.
>
>
> *Code Snippet:*
>
> final QueryParser parser;
> StandardAnalyzer analyzer = new StandardAnalyzer();
> String sSearchQuery = "MUSIC";
> Sort oSort = null;
> public static final String G2KEYFIELDS = "G2KEYFIELDS";
> oSort = new Sort(new SortField[]{ new SortField (
> GroupsConstants.LAST_MODIFIED,SortField.INT,true), new SortField(
> GroupsConstants.GROUPNAME) });
>
> parser = new QueryParser(G2KEYFIELDS, analyzer);
> final Vector ids = new Vector();
> FSDirectory dir = null;
> IndexSearcher searcher = null;
> try {
> dir = FSDirectory.getDirectory(index);
> searcher = new IndexSearcher(dir);
> Query query = parser.parse(sSearchQuery);
> Hits hits = searcher.search(query, oSort);
> for (int i = 0; i != hits.length() && i != 250; ++i) {
> final Document doc = hits.doc;
> Integer oiGroupId=new Integer(doc.getField (GroupsConstants.IDENTITY
> ).stringValue());
> if(!ids.contains(oiGroupId)){ ids.addElement(oiGroupId); }
> }
> searcher.close();
> dir.close();
>
>
> Thanks in Advance
>

------=_Part_17052_6351825.1204124046593--

From java-user-return-32815-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 27 16:38:53 2008
Return-Path: <java-user-return-32815-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 18764 invoked from network); 27 Feb 2008 16:38:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Feb 2008 16:38:53 -0000
Received: (qmail 89600 invoked by uid 500); 27 Feb 2008 16:38:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89559 invoked by uid 500); 27 Feb 2008 16:38:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89371 invoked by uid 99); 27 Feb 2008 16:38:40 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Feb 2008 08:38:40 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Feb 2008 16:38:05 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1JUPIM-00015j-Tt
	for java-user@lucene.apache.org; Wed, 27 Feb 2008 08:38:14 -0800
Message-ID: <15717182.post@talk.nabble.com>
Date: Wed, 27 Feb 2008 08:38:14 -0800 (PST)
From: JensBurkhardt <jensburkhardt@web.de>
To: java-user@lucene.apache.org
Subject: explain() - fieldnorm
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: jensburkhardt@web.de
X-Virus-Checked: Checked by ClamAV on apache.org


Hey everybody,

As my subject is telling, i have a little problem with analyzing the
explain() output.
I know, that the fieldnorm value consists out of "documentboost, fieldboost
and lengthNorm". 
Is is possible to recieve the single values? I know that they are multiplied
while indexing but
can they be stored so that i can read them when i analyze my search?
The Problem is, that i have 2 Documents I want to compare but the only
difference is the fieldnorm value
and i don't know which value exactly makes this difference.

Best regards
Jens Burkhardt
-- 
View this message in context: http://www.nabble.com/explain%28%29---fieldnorm-tp15717182p15717182.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32816-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 27 18:31:59 2008
Return-Path: <java-user-return-32816-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84083 invoked from network); 27 Feb 2008 18:31:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Feb 2008 18:31:59 -0000
Received: (qmail 31179 invoked by uid 500); 27 Feb 2008 18:31:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31154 invoked by uid 500); 27 Feb 2008 18:31:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31143 invoked by uid 99); 27 Feb 2008 18:31:48 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Feb 2008 10:31:48 -0800
X-ASF-Spam-Status: No, hits=3.7 required=10.0
	tests=DNS_FROM_OPENWHOIS,FORGED_HOTMAIL_RCVD2,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Feb 2008 18:31:00 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1JUR3p-0006OO-0D
	for java-user@lucene.apache.org; Wed, 27 Feb 2008 10:31:21 -0800
Message-ID: <15719770.post@talk.nabble.com>
Date: Wed, 27 Feb 2008 10:31:20 -0800 (PST)
From: fangz <fang_zhong@hotmail.com>
To: java-user@lucene.apache.org
Subject: Re: Inconsistent Search Speed
In-Reply-To: <15698325.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: fang_zhong@hotmail.com
References: <15698325.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org


I implemented HitCollector as you suggested. It improved the initial run
significantly. However it only showed slight improvement in the subsequent
runs. I don't know how to implement FieldSelector in my situation. My codes
look like this:

public void collect( int doc, float score ) {

    TermFreqVector vector = null;
    vector = searcher.getIndexReader().getTermFreqVector(doc, "field");
    ...

Thank you again!

fangz
-- 
View this message in context: http://www.nabble.com/Inconsistent-Search-Speed-tp15698325p15719770.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32817-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 27 21:13:38 2008
Return-Path: <java-user-return-32817-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 49829 invoked from network); 27 Feb 2008 21:13:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Feb 2008 21:13:37 -0000
Received: (qmail 54096 invoked by uid 500); 27 Feb 2008 21:13:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54069 invoked by uid 500); 27 Feb 2008 21:13:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 35982 invoked by uid 99); 27 Feb 2008 16:04:56 -0000
X-ASF-Spam-Status: No, hits=-1.0 required=10.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Date: Wed, 27 Feb 2008 16:04:31 +0000
From: Simon Wistow <simon@thegestalt.org>
To: java-user@lucene.apache.org
Subject: Re: Atomicity and AutoCommit
Message-ID: <20080227160431.GM47406@thegestalt.org>
References: <20080227084258.GK47406@thegestalt.org> <C70959F2-3CFA-49C5-B0D6-B978011C3AAC@mikemccandless.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
In-Reply-To: <C70959F2-3CFA-49C5-B0D6-B978011C3AAC@mikemccandless.com>
User-Agent: Mutt/1.5.16 (2007-06-09)
Sender: Simon Wistow <simon@bacchus.thegestalt.org>
X-Virus-Checked: Checked by ClamAV on apache.org

On Wed, Feb 27, 2008 at 09:38:55AM -0500, Michael McCandless said:
> 
> When you previously saw corruption was it due to an OS or machine
> crash (or power cord got pulled)?  If so, you were likely hitting
> LUCENE-1044, which is fixed on the trunk version of Lucene (to be 2.4
> at some point) but is not fixed in 2.3.

Yes - it's power outages and other unnatural events (sysadmins 
accidentally kill -9ing the process) that caused it.

What's the chances of me backporting the fix to 2.3 or should I just 
wait for 2.4?

Come 2.4 is my buffering to RAM redundant?

Thanks,

Simon



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32818-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 27 21:27:11 2008
Return-Path: <java-user-return-32818-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58444 invoked from network); 27 Feb 2008 21:27:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Feb 2008 21:27:10 -0000
Received: (qmail 80034 invoked by uid 500); 27 Feb 2008 21:26:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80005 invoked by uid 500); 27 Feb 2008 21:26:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79994 invoked by uid 99); 27 Feb 2008 21:26:59 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Feb 2008 13:26:59 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of markrmiller@gmail.com designates 72.14.252.159 as permitted sender)
Received: from [72.14.252.159] (HELO po-out-1718.google.com) (72.14.252.159)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Feb 2008 21:26:24 +0000
Received: by po-out-1718.google.com with SMTP id b23so4693084poe.0
        for <java-user@lucene.apache.org>; Wed, 27 Feb 2008 13:26:34 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        bh=cMFuAz1BzdFmB7GYFtEozyieRCzmOP/wd+58fXIFgvI=;
        b=FDn/njtpNSCcXxSp6tH9hMes6uOnyX8GqMPbK2duH1yIrN2V8+BfsOoAa5Xya4Ci9xz7YOzKKW4pBsEmLpyyzkjfbaiX8AI6uJ5W9EEAvci6pekQXLy36QXFrzZ3qGFhxI6DRFkIQ+znBr+Dwmk5RrhN70KmA/+lqtlcLjBrC2g=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=Iw5kT7s9zdnZ1olWsTtzoDdEFM1o4xzh2Mtw9fgIazsls22qKhWWNL4xSbDLBHtiLq39wGOsmCJRQpuFTixofmJfaJsOok/ZIskf04TXlSLqrnn03P9VU/yuZ3+5SD9e86I4qRbG57wkN7zKcDpTZ7/78WqRlZMW96cVwbZa6wc=
Received: by 10.140.126.14 with SMTP id y14mr2855355rvc.96.1204147594076;
        Wed, 27 Feb 2008 13:26:34 -0800 (PST)
Received: from ?192.168.1.102? ( [69.124.234.149])
        by mx.google.com with ESMTPS id f12sm6765650qba.32.2008.02.27.13.26.32
        (version=SSLv3 cipher=RC4-MD5);
        Wed, 27 Feb 2008 13:26:33 -0800 (PST)
Message-ID: <47C5D4C8.4010505@gmail.com>
Date: Wed, 27 Feb 2008 16:23:20 -0500
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.12 (Windows/20080213)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Atomicity and AutoCommit
References: <20080227084258.GK47406@thegestalt.org> <C70959F2-3CFA-49C5-B0D6-B978011C3AAC@mikemccandless.com> <20080227160431.GM47406@thegestalt.org>
In-Reply-To: <20080227160431.GM47406@thegestalt.org>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

You need to make sure your storage does not lie in response to an fsync 
command. If it does (most commercial stuff does), you cannot guaranty no 
corruption. Search google for "your harddrive lies to you" or something.

It shouldnt be that hard to take the patch from the issue and apply it 
to a checked out version of 2.3 right? I don't think it relies on other 
2.4 stuff as there isnt much of it yet.

Simon Wistow wrote:
> On Wed, Feb 27, 2008 at 09:38:55AM -0500, Michael McCandless said:
>   
>> When you previously saw corruption was it due to an OS or machine
>> crash (or power cord got pulled)?  If so, you were likely hitting
>> LUCENE-1044, which is fixed on the trunk version of Lucene (to be 2.4
>> at some point) but is not fixed in 2.3.
>>     
>
> Yes - it's power outages and other unnatural events (sysadmins 
> accidentally kill -9ing the process) that caused it.
>
> What's the chances of me backporting the fix to 2.3 or should I just 
> wait for 2.4?
>
> Come 2.4 is my buffering to RAM redundant?
>
> Thanks,
>
> Simon
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>   

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32819-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Feb 27 21:39:53 2008
Return-Path: <java-user-return-32819-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64802 invoked from network); 27 Feb 2008 21:39:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Feb 2008 21:39:52 -0000
Received: (qmail 2834 invoked by uid 500); 27 Feb 2008 21:39:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2793 invoked by uid 500); 27 Feb 2008 21:39:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2782 invoked by uid 99); 27 Feb 2008 21:39:41 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Feb 2008 13:39:41 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.162.180] (HELO el-out-1112.google.com) (209.85.162.180)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Feb 2008 21:39:05 +0000
Received: by el-out-1112.google.com with SMTP id m34so2614431ele.11
        for <java-user@lucene.apache.org>; Wed, 27 Feb 2008 13:39:11 -0800 (PST)
Received: by 10.142.106.18 with SMTP id e18mr5827706wfc.111.1204148350372;
        Wed, 27 Feb 2008 13:39:10 -0800 (PST)
Received: from ?10.17.4.4? ( [96.237.56.13])
        by mx.google.com with ESMTPS id 11sm13045050wrl.11.2008.02.27.13.39.09
        (version=TLSv1/SSLv3 cipher=OTHER);
        Wed, 27 Feb 2008 13:39:09 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v753)
In-Reply-To: <20080227160431.GM47406@thegestalt.org>
References: <20080227084258.GK47406@thegestalt.org> <C70959F2-3CFA-49C5-B0D6-B978011C3AAC@mikemccandless.com> <20080227160431.GM47406@thegestalt.org>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <113B3C3C-0B68-4230-A44F-64E373267B84@mikemccandless.com>
Content-Transfer-Encoding: 7bit
From: Michael McCandless <lucene@mikemccandless.com>
Subject: Re: Atomicity and AutoCommit
Date: Wed, 27 Feb 2008 16:39:07 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.753)
X-Virus-Checked: Checked by ClamAV on apache.org


Simon Wistow wrote:

> On Wed, Feb 27, 2008 at 09:38:55AM -0500, Michael McCandless said:
>>
>> When you previously saw corruption was it due to an OS or machine
>> crash (or power cord got pulled)?  If so, you were likely hitting
>> LUCENE-1044, which is fixed on the trunk version of Lucene (to be 2.4
>> at some point) but is not fixed in 2.3.
>
> Yes - it's power outages and other unnatural events (sysadmins
> accidentally kill -9ing the process) that caused it.

OK power outage can definitely cause corruption.  This has been a long
standing, but only recently uncovered, and now fixed in 2.4, issue
(LUCENE-1044).  But I believe kill -9 should not cause corruption.

BTW hot backups, as of 2.3, are now very easy.  Just use
SnapshotDeletionPolicy when creating your writer.  Making frequent
backups is a good safeguard too...

> What's the chances of me backporting the fix to 2.3 or should I just
> wait for 2.4?

It unfortunately was a fairly large change; I'm not sure how cleanly
the patch will apply to 2.3.  Maybe try trunk (but beware: the index
format changed with LUCENE-1044 to add an integrity checksum to
the end of the segments_N file)...

> Come 2.4 is my buffering to RAM redundant?

Well, as Mark said, if your IO system does not lie on fsync, then  
buffering
to RAM is redundant.  If it does lie, you still have open risk of  
corruption and
so buffering to RAM probably reduces (but doesn't eliminate) the risk.

Also, as of 2.3, manually buffering to RAMDirectory should no longer
give a big performance win over just giving that RAM to the
IndexWriter as its buffer instead.

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32820-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 28 00:18:48 2008
Return-Path: <java-user-return-32820-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 18010 invoked from network); 28 Feb 2008 00:18:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Feb 2008 00:18:48 -0000
Received: (qmail 16499 invoked by uid 500); 28 Feb 2008 00:18:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16469 invoked by uid 500); 28 Feb 2008 00:18:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16449 invoked by uid 99); 28 Feb 2008 00:18:38 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Feb 2008 16:18:38 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of soeren.pekrul@gmx.de designates 213.165.64.20 as permitted sender)
Received: from [213.165.64.20] (HELO mail.gmx.net) (213.165.64.20)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 28 Feb 2008 00:17:52 +0000
Received: (qmail invoked by alias); 28 Feb 2008 00:18:13 -0000
Received: from p548C7BDD.dip.t-dialin.net (EHLO [10.0.1.102]) [84.140.123.221]
  by mail.gmx.net (mp017) with SMTP; 28 Feb 2008 01:18:13 +0100
X-Authenticated: #3493418
X-Provags-ID: V01U2FsdGVkX1+Ojd1fKECONf3p5eMmdhinhC5umpjUCjuT60GiYs
	X0UYlLllXDIRD8
Message-ID: <47C5FD57.3010805@gmx.de>
Date: Thu, 28 Feb 2008 01:16:23 +0100
From: Soeren Pekrul <soeren.pekrul@gmx.de>
User-Agent: Mozilla Thunderbird 1.0.7 (Windows/20050923)
X-Accept-Language: de-DE, de, en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Document.setBoost() doesn't work
Content-Type: text/plain; charset=ISO-8859-15; format=flowed
Content-Transfer-Encoding: 8bit
X-Y-GMX-Trusted: 0
X-Virus-Checked: Checked by ClamAV on apache.org

I work with Lucene 2.0. I boost some documents:

Document doc = new Document();
// adding fields
doc.setBoost(2.0f);
indexwriter.addDocument(doc);

If I look to my index with Luke (0.6) the boost value of all documents 
is still 1.0.
How can I boost documents?

Thanks. Sren

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32821-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 28 00:55:29 2008
Return-Path: <java-user-return-32821-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38967 invoked from network); 28 Feb 2008 00:55:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Feb 2008 00:55:29 -0000
Received: (qmail 41195 invoked by uid 500); 28 Feb 2008 00:55:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41156 invoked by uid 500); 28 Feb 2008 00:55:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41145 invoked by uid 99); 28 Feb 2008 00:55:19 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Feb 2008 16:55:19 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of rong1129@gmail.com designates 209.85.200.175 as permitted sender)
Received: from [209.85.200.175] (HELO wf-out-1314.google.com) (209.85.200.175)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Feb 2008 00:54:45 +0000
Received: by wf-out-1314.google.com with SMTP id 28so4035890wff.20
        for <java-user@lucene.apache.org>; Wed, 27 Feb 2008 16:54:55 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        bh=PANZ84wCrztLuJgeFcT9/8nxZTQf2FLW588u37ybuqo=;
        b=GyohXoCFHRq2MsX2juyAvEdzVDRPgpvem0koeaOfVazNqK/ktZnCYuBzq/uvVdl99U+MoWYwQNUuNxTN/f9xC1jYAoGKb7RKd29YdJb1Qy8CTwupxXUKEvxSc5loj4txF1Vtoky26pqmZQKsYuXecM82nicy3kQyJik/cmgMNSg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=iURe4lF5AucG5QMZOEAaHX/UCYMSxM2ihhc/70VCOtNlylg6lBb0Tvh2VEhlO3R3hech+3zS7rg4OvzcedQEpKbARIy2C0xthhphDgpmkHyXn2EwUJlAc/S59o/2tZiBJvVwOV5/QEK5y0HVGUdGZ4TUF6BCMV7KD3Trh0pOwTo=
Received: by 10.142.128.6 with SMTP id a6mr5959988wfd.135.1204160094948;
        Wed, 27 Feb 2008 16:54:54 -0800 (PST)
Received: by 10.143.44.2 with HTTP; Wed, 27 Feb 2008 16:54:54 -0800 (PST)
Message-ID: <d9efa7ce0802271654p5a4a3d0fp7486bfd81428fc18@mail.gmail.com>
Date: Thu, 28 Feb 2008 11:54:54 +1100
From: "Rong Shen" <rong1129@gmail.com>
To: java-user@lucene.apache.org
Subject: filter issue
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_6321_29099980.1204160094956"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_6321_29099980.1204160094956
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi List,

I have a situation similar to indexing a mailing list, with each mail
indexed as a Doc. Mails from a same thread share a same thread ID, which is
indexed in a separate field. Now I want to search through all the mails
using some keywords, and list all the unique thread IDs which I can pass to
the database calls.

I tried DuplicateFilter, which didn't work well - by missing some results. I
went through the code, and found all the filters are basically pre-filters,
in other words, they generate the bitsets based on the index, and filter the
duplicates out (in the case of DuplicateFilter) before being applied to the
result collector. It causes problem when some mails contain the searching
keywords but were filtered out as they were set to false in the bitset
aready.

Any solutions for this? is there any sort of post-filtering things exist,
that filter records in the search result (could be slow), rather than in the
whole collection? Thanks.

------=_Part_6321_29099980.1204160094956--

From java-user-return-32822-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 28 02:18:39 2008
Return-Path: <java-user-return-32822-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70796 invoked from network); 28 Feb 2008 02:18:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Feb 2008 02:18:39 -0000
Received: (qmail 17831 invoked by uid 500); 28 Feb 2008 02:18:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17797 invoked by uid 500); 28 Feb 2008 02:18:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17786 invoked by uid 99); 28 Feb 2008 02:18:28 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Feb 2008 18:18:28 -0800
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=SPF_NEUTRAL,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [208.97.132.119] (HELO spunkymail-a9.g.dreamhost.com) (208.97.132.119)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Feb 2008 02:17:38 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a9.g.dreamhost.com (Postfix) with ESMTP id 6584A212C7
	for <java-user@lucene.apache.org>; Wed, 27 Feb 2008 18:17:58 -0800 (PST)
Message-Id: <9403FD72-522F-4849-86A8-1CA6BC13E6F9@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <15719770.post@talk.nabble.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v919.2)
Subject: Re: Inconsistent Search Speed
Date: Wed, 27 Feb 2008 21:17:57 -0500
References: <15698325.post@talk.nabble.com> <15719770.post@talk.nabble.com>
X-Mailer: Apple Mail (2.919.2)
X-Virus-Checked: Checked by ClamAV on apache.org

Ah, you didn't mention term vectors.  What do you need them for?   
Perhaps a bit more background could help here.

-Grant

On Feb 27, 2008, at 1:31 PM, fangz wrote:

>
> I implemented HitCollector as you suggested. It improved the initial  
> run
> significantly. However it only showed slight improvement in the  
> subsequent
> runs. I don't know how to implement FieldSelector in my situation.  
> My codes
> look like this:
>
> public void collect( int doc, float score ) {
>
>    TermFreqVector vector = null;
>    vector = searcher.getIndexReader().getTermFreqVector(doc, "field");
>    ...
>
> Thank you again!
>
> fangz
> -- 
> View this message in context: http://www.nabble.com/Inconsistent-Search-Speed-tp15698325p15719770.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

--------------------------
Grant Ingersoll
http://www.lucenebootcamp.com
Next Training: April 7, 2008 at ApacheCon Europe in Amsterdam

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ






---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32823-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 28 02:57:23 2008
Return-Path: <java-user-return-32823-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77397 invoked from network); 28 Feb 2008 02:57:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Feb 2008 02:57:23 -0000
Received: (qmail 45100 invoked by uid 500); 28 Feb 2008 02:57:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45061 invoked by uid 500); 28 Feb 2008 02:57:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45047 invoked by uid 99); 28 Feb 2008 02:57:12 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Feb 2008 18:57:12 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [202.144.91.165] (HELO mx-obg2.iflexsolutions.com) (202.144.91.165)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Feb 2008 02:56:26 +0000
Received: from IFLBLW-EXCH-11.i-flex.com ([10.80.50.250])
	by mx-obg2.iflexsolutions.com (8.13.1/8.13.1) with ESMTP id m1S2sWkt003589
	for <java-user@lucene.apache.org>; Thu, 28 Feb 2008 08:24:33 +0530
Received: from BLR-MSG-02.i-flex.com ([10.80.50.103]) by IFLBLW-EXCH-11.i-flex.com with Microsoft SMTPSVC(6.0.3790.1830); Thu, 28 Feb 2008 08:27:16 +0530
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.3790.2992
Content-Class: urn:content-classes:message
MIME-Version: 1.0
Content-Transfer-Encoding: 7bit
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C879B5.A01C89E3"
Subject: How do i get a text summary 
Date: Thu, 28 Feb 2008 08:27:38 +0530
Message-ID: <36A9B06E6B2FDA4D845E847C36A7AB0298DC52@BLR-MSG-02.i-flex.com>
Importance: normal
X-MS-Has-Attach: 
Priority: normal
X-MS-TNEF-Correlator: 
Thread-Topic: How do i get a text summary 
thread-index: Ach5ta1N9GkMwqSRQGW3gFYEyeJaaA==
From: <Ravinder.Teepiredddy@iflexsolutions.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 28 Feb 2008 02:57:16.0675 (UTC) FILETIME=[A0600D30:01C879B5]
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01C879B5.A01C89E3
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Hi All,

=20

Is there a way to get a text summary of an indexed document to display
along with the search result?

Please let me know the technical changes.

=20

Thanks,

Ravinder

=20



DISCLAIMER:
This message contains privileged and confidential information and is =
intended only for an individual named. If you are not the intended =
recipient, you should not disseminate, distribute, store, print, copy or =
deliver this message. Please notify the sender immediately by e-mail if =
you have received this e-mail by mistake and delete this e-mail from =
your system. E-mail transmission cannot be guaranteed to be secure or =
error-free as information could be intercepted, corrupted, lost, =
destroyed, arrive late or incomplete or contain viruses. The sender, =
therefore,  does not accept liability for any errors or omissions in the =
contents of this message which arise as a result of e-mail transmission. =
If verification is required, please request a hard-copy version.

------_=_NextPart_001_01C879B5.A01C89E3--

From java-user-return-32824-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 28 03:10:52 2008
Return-Path: <java-user-return-32824-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80839 invoked from network); 28 Feb 2008 03:10:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Feb 2008 03:10:52 -0000
Received: (qmail 53384 invoked by uid 500); 28 Feb 2008 03:10:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53354 invoked by uid 500); 28 Feb 2008 03:10:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53343 invoked by uid 99); 28 Feb 2008 03:10:41 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Feb 2008 19:10:41 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of sethcall@gmail.com designates 209.85.198.187 as permitted sender)
Received: from [209.85.198.187] (HELO rv-out-0910.google.com) (209.85.198.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Feb 2008 03:10:08 +0000
Received: by rv-out-0910.google.com with SMTP id k20so2026390rvb.5
        for <java-user@lucene.apache.org>; Wed, 27 Feb 2008 19:10:17 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=Tur5QA/RniqdPX99e1G6yoGrgp572aaBXGXJsTYNKOs=;
        b=ChbcvUmUnIFgUsKSc+8cdSeKTi3W59jQy3feTxmPlNJUDrG/4mY2uus3lULcFgRHPk0Muzb7beTwhuJkpIu1RQ5tiGceq/Ey3u7XR4X6SiblSS1LhIvGko+SZRy89miAdiMOLisimfvnyBF+CfmR1WMGbtWvYE4nd6UvxmIJxIc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=SRVNXQDx/6A4Pfmb2WNwBRoChS9Rq017FKIe37rerRn6KiiVSRNfnHc74NhAld6/17Pp+b2m8UxFQrwB1Fn7+PJxovEwIpcxjtwuF4brGo+edfEVgKBgtBsj50QuXGEp2ugofobMKwirY0j6wI4ZnTgLNoxEnPxw4Ab0LJ7ryhY=
Received: by 10.141.99.4 with SMTP id b4mr5119024rvm.254.1204168217543;
        Wed, 27 Feb 2008 19:10:17 -0800 (PST)
Received: by 10.141.97.15 with HTTP; Wed, 27 Feb 2008 19:10:17 -0800 (PST)
Message-ID: <58d728950802271910p16a1c918q25ea0a8a55e8e14e@mail.gmail.com>
Date: Wed, 27 Feb 2008 21:10:17 -0600
From: "Seth Call" <sethcall@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: How do i get a text summary
In-Reply-To: <36A9B06E6B2FDA4D845E847C36A7AB0298DC52@BLR-MSG-02.i-flex.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_10176_32663820.1204168217519"
References: <36A9B06E6B2FDA4D845E847C36A7AB0298DC52@BLR-MSG-02.i-flex.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_10176_32663820.1204168217519
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Am I missing something?  Isn't this exactly what Lucene does?

Put in a value when you create your Document, get it back out when it comes
back from a search, right?

Want a text summary? Put it in to the document...

I just started playing with Lucene so maybe I'm missing something, but these
question seems quite fundamental to what Lucene is all about.

On Wed, Feb 27, 2008 at 8:57 PM, <Ravinder.Teepiredddy@iflexsolutions.com>
wrote:

> Hi All,
>
>
>
> Is there a way to get a text summary of an indexed document to display
> along with the search result?
>
> Please let me know the technical changes.
>
>
>
> Thanks,
>
> Ravinder
>
>
>
>
>
> DISCLAIMER:
> This message contains privileged and confidential information and is
> intended only for an individual named. If you are not the intended
> recipient, you should not disseminate, distribute, store, print, copy or
> deliver this message. Please notify the sender immediately by e-mail if you
> have received this e-mail by mistake and delete this e-mail from your
> system. E-mail transmission cannot be guaranteed to be secure or error-free
> as information could be intercepted, corrupted, lost, destroyed, arrive late
> or incomplete or contain viruses. The sender, therefore,  does not accept
> liability for any errors or omissions in the contents of this message which
> arise as a result of e-mail transmission. If verification is required,
> please request a hard-copy version.
>



-- 
The poor have to labour in the face of the majestic equality of the law,
which forbids the rich as well as the poor to sleep under bridges, to beg in
the streets, and to steal bread.

------=_Part_10176_32663820.1204168217519--

From java-user-return-32825-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 28 03:47:08 2008
Return-Path: <java-user-return-32825-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99893 invoked from network); 28 Feb 2008 03:47:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Feb 2008 03:47:08 -0000
Received: (qmail 78156 invoked by uid 500); 28 Feb 2008 03:46:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78124 invoked by uid 500); 28 Feb 2008 03:46:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78113 invoked by uid 99); 28 Feb 2008 03:46:58 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Feb 2008 19:46:57 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [65.89.232.7] (HELO thebluezone.net) (65.89.232.7)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Feb 2008 03:46:22 +0000
Received: from localhost (localhost [127.0.0.1])
	by thebluezone.net (Postfix) with ESMTP id 89163286C29
	for <java-user@lucene.apache.org>; Wed, 27 Feb 2008 20:46:31 -0700 (MST)
Received: from thebluezone.net ([127.0.0.1])
	by localhost (mail1 [127.0.0.1]) (amavisd-new, port 10024) with ESMTP
	id 22665-05 for <java-user@lucene.apache.org>;
	Wed, 27 Feb 2008 20:46:26 -0700 (MST)
Received: from desktop (unknown [65.89.233.61])
	by thebluezone.net (Postfix) with ESMTP id 1E95E286C50
	for <java-user@lucene.apache.org>; Wed, 27 Feb 2008 20:46:26 -0700 (MST)
From: "John Griffin" <jgriffin@thebluezone.net>
To: <java-user@lucene.apache.org>
References: <47C5FD57.3010805@gmx.de>
Subject: RE: Document.setBoost() doesn't work
Date: Wed, 27 Feb 2008 20:46:26 -0700
Message-ID: <000901c879bc$7ee57a80$fe3c10ac@desktop>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Office Outlook 11
In-Reply-To: <47C5FD57.3010805@gmx.de>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3198
thread-index: Ach5n44MslcM4Sw3SYaDkA7xnFCN7wAHHf8g
X-Virus-Scanned: by thebluezone.net
X-Virus-Checked: Checked by ClamAV on apache.org

Soren,

Your documents are being boosted. Because of the way document boost =
values
immediately go through some calculations and are stored in the index =
Luke
will always show 1.o as the boost value. There has been some talk in the
recent past that this should be removed from Luke since it is actually
misleading.=20

If you query your index and use the explain method o the results you =
will
see that they are being boosted.

Hope this helps

John G.

-----Original Message-----
From: Soeren Pekrul [mailto:soeren.pekrul@gmx.de]=20
Sent: Wednesday, February 27, 2008 5:16 PM
To: java-user@lucene.apache.org
Subject: Document.setBoost() doesn't work

I work with Lucene 2.0. I boost some documents:

Document doc =3D new Document();
// adding fields
doc.setBoost(2.0f);
indexwriter.addDocument(doc);

If I look to my index with Luke (0.6) the boost value of all documents=20
is still 1.0.
How can I boost documents?

Thanks. S=F6ren

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32826-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 28 03:50:13 2008
Return-Path: <java-user-return-32826-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 2192 invoked from network); 28 Feb 2008 03:50:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Feb 2008 03:50:13 -0000
Received: (qmail 80930 invoked by uid 500); 28 Feb 2008 03:50:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80739 invoked by uid 500); 28 Feb 2008 03:50:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80728 invoked by uid 99); 28 Feb 2008 03:50:02 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Feb 2008 19:50:02 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [65.89.232.7] (HELO thebluezone.net) (65.89.232.7)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Feb 2008 03:49:16 +0000
Received: from localhost (localhost [127.0.0.1])
	by thebluezone.net (Postfix) with ESMTP id 080F0286C65
	for <java-user@lucene.apache.org>; Wed, 27 Feb 2008 20:49:36 -0700 (MST)
Received: from thebluezone.net ([127.0.0.1])
	by localhost (mail1 [127.0.0.1]) (amavisd-new, port 10024) with ESMTP
	id 22869-07 for <java-user@lucene.apache.org>;
	Wed, 27 Feb 2008 20:49:30 -0700 (MST)
Received: from desktop (unknown [65.89.233.61])
	by thebluezone.net (Postfix) with ESMTP id B7B0A286BDA
	for <java-user@lucene.apache.org>; Wed, 27 Feb 2008 20:49:30 -0700 (MST)
From: "John Griffin" <jgriffin@thebluezone.net>
To: <java-user@lucene.apache.org>
References: <36A9B06E6B2FDA4D845E847C36A7AB0298DC52@BLR-MSG-02.i-flex.com>
Subject: RE: How do i get a text summary 
Date: Wed, 27 Feb 2008 20:49:31 -0700
Message-ID: <000a01c879bc$ecddf1c0$fe3c10ac@desktop>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
In-Reply-To: <36A9B06E6B2FDA4D845E847C36A7AB0298DC52@BLR-MSG-02.i-flex.com>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3198
thread-index: Ach5ta1N9GkMwqSRQGW3gFYEyeJaaAABwHgg
X-Virus-Scanned: by thebluezone.net
X-Virus-Checked: Checked by ClamAV on apache.org

Ravinder,

If you want something from an index it has to be IN the index. So, store a
summary field in each document and make sure that field is part of the
query.

John G.

-----Original Message-----
From: Ravinder.Teepiredddy@iflexsolutions.com
[mailto:Ravinder.Teepiredddy@iflexsolutions.com] 
Sent: Wednesday, February 27, 2008 7:58 PM
To: java-user@lucene.apache.org
Subject: How do i get a text summary 

Hi All,

 

Is there a way to get a text summary of an indexed document to display
along with the search result?

Please let me know the technical changes.

 

Thanks,

Ravinder

 



DISCLAIMER:
This message contains privileged and confidential information and is
intended only for an individual named. If you are not the intended
recipient, you should not disseminate, distribute, store, print, copy or
deliver this message. Please notify the sender immediately by e-mail if you
have received this e-mail by mistake and delete this e-mail from your
system. E-mail transmission cannot be guaranteed to be secure or error-free
as information could be intercepted, corrupted, lost, destroyed, arrive late
or incomplete or contain viruses. The sender, therefore,  does not accept
liability for any errors or omissions in the contents of this message which
arise as a result of e-mail transmission. If verification is required,
please request a hard-copy version.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32827-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 28 04:31:43 2008
Return-Path: <java-user-return-32827-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 15332 invoked from network); 28 Feb 2008 04:31:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Feb 2008 04:31:43 -0000
Received: (qmail 10791 invoked by uid 500); 28 Feb 2008 04:31:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10286 invoked by uid 500); 28 Feb 2008 04:31:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10275 invoked by uid 99); 28 Feb 2008 04:31:32 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Feb 2008 20:31:32 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [202.144.91.165] (HELO mx-obg2.iflexsolutions.com) (202.144.91.165)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Feb 2008 04:30:46 +0000
Received: from IFLBLW-EXCH-11.i-flex.com ([10.80.50.250])
	by mx-obg2.iflexsolutions.com (8.13.1/8.13.1) with ESMTP id m1S4SnLG017338
	for <java-user@lucene.apache.org>; Thu, 28 Feb 2008 09:58:51 +0530
Received: from BLR-MSG-02.i-flex.com ([10.80.50.103]) by IFLBLW-EXCH-11.i-flex.com with Microsoft SMTPSVC(6.0.3790.1830); Thu, 28 Feb 2008 10:01:34 +0530
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.3790.2992
Content-Class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: How do i get a text summary 
Date: Thu, 28 Feb 2008 10:02:09 +0530
Message-ID: <36A9B06E6B2FDA4D845E847C36A7AB0298DD53@BLR-MSG-02.i-flex.com>
In-Reply-To: <000a01c879bc$ecddf1c0$fe3c10ac@desktop>
Importance: normal
Priority: normal
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: How do i get a text summary 
thread-index: Ach5ta1N9GkMwqSRQGW3gFYEyeJaaAABwHggAAGLe/A=
From: <Ravinder.Teepiredddy@iflexsolutions.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 28 Feb 2008 04:31:34.0388 (UTC) FILETIME=[CCA28B40:01C879C2]
X-Virus-Checked: Checked by ClamAV on apache.org

Hi John,

I am getting Summary value null in results.jsp page and I need "snippet"
or "fragment" to be highlighted.=20
I have gone through lucene faqs related but it's not clear. I will
appreciate if you help me to find list of files (Java) to be modified.

Thanks in advance.
Ravinder

-----Original Message-----
From: John Griffin [mailto:jgriffin@thebluezone.net]=20
Sent: Thursday, February 28, 2008 11:50 AM
To: java-user@lucene.apache.org
Subject: RE: How do i get a text summary=20

Ravinder,

If you want something from an index it has to be IN the index. So, store
a
summary field in each document and make sure that field is part of the
query.

John G.

-----Original Message-----
From: Ravinder.Teepiredddy@iflexsolutions.com
[mailto:Ravinder.Teepiredddy@iflexsolutions.com]=20
Sent: Wednesday, February 27, 2008 7:58 PM
To: java-user@lucene.apache.org
Subject: How do i get a text summary=20

Hi All,

=20

Is there a way to get a text summary of an indexed document to display
along with the search result?

Please let me know the technical changes.

=20

Thanks,

Ravinder

=20



DISCLAIMER:
This message contains privileged and confidential information and is
intended only for an individual named. If you are not the intended
recipient, you should not disseminate, distribute, store, print, copy or
deliver this message. Please notify the sender immediately by e-mail if
you
have received this e-mail by mistake and delete this e-mail from your
system. E-mail transmission cannot be guaranteed to be secure or
error-free
as information could be intercepted, corrupted, lost, destroyed, arrive
late
or incomplete or contain viruses. The sender, therefore,  does not
accept
liability for any errors or omissions in the contents of this message
which
arise as a result of e-mail transmission. If verification is required,
please request a hard-copy version.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



DISCLAIMER:
This message contains privileged and confidential information and is =
intended only for an individual named. If you are not the intended =
recipient, you should not disseminate, distribute, store, print, copy or =
deliver this message. Please notify the sender immediately by e-mail if =
you have received this e-mail by mistake and delete this e-mail from =
your system. E-mail transmission cannot be guaranteed to be secure or =
error-free as information could be intercepted, corrupted, lost, =
destroyed, arrive late or incomplete or contain viruses. The sender, =
therefore,  does not accept liability for any errors or omissions in the =
contents of this message which arise as a result of e-mail transmission. =
If verification is required, please request a hard-copy version.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32828-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 28 05:24:19 2008
Return-Path: <java-user-return-32828-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 23962 invoked from network); 28 Feb 2008 05:24:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Feb 2008 05:24:19 -0000
Received: (qmail 42595 invoked by uid 500); 28 Feb 2008 05:24:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41972 invoked by uid 500); 28 Feb 2008 05:24:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41961 invoked by uid 99); 28 Feb 2008 05:24:07 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Feb 2008 21:24:07 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of blueye117@gmail.com designates 72.14.204.225 as permitted sender)
Received: from [72.14.204.225] (HELO qb-out-0506.google.com) (72.14.204.225)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Feb 2008 05:23:33 +0000
Received: by qb-out-0506.google.com with SMTP id o21so4532651qba.9
        for <java-user@lucene.apache.org>; Wed, 27 Feb 2008 21:23:42 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=SrRflOXRUREmmCaJxNTwRwY/3rvPtki2iIDYTLiplD4=;
        b=YElXQx8+J/q+/My5D28aC+V2CbAVAqgWPm6UCj/idfHEZs0CXn2VMu/9vfmAnhvzD0FdvGE3p/VjZ/TIbaN5lYPewL8EWBK5cuaLsFzICH2dJ+4z+5zUaFENIbNUhmj5dym6V4+TQ7QprTuTs/8q5czrcr4HvO4CxADBI1+X0nI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=eDphhneuPjnqUY2whsKJwoU0YqxTig+PKT6PqtOPzk0Qoc0HK3zk4ZDY3tDV1OMVdscuqlMLGINV/ESXg24NDMjCGywvjQQkA1l6aVtRQj9zIAyX8QHzwYSTSTY3PbUpc3PmM62cRWi/ZSohoZijPMoC+3omEAl1es7GELQe3LU=
Received: by 10.141.22.1 with SMTP id z1mr5189047rvi.67.1204176221616;
        Wed, 27 Feb 2008 21:23:41 -0800 (PST)
Received: by 10.141.122.4 with HTTP; Wed, 27 Feb 2008 21:23:41 -0800 (PST)
Message-ID: <f09790220802272123v561fc528h395d60f00c3f5c63@mail.gmail.com>
Date: Thu, 28 Feb 2008 13:23:41 +0800
From: "h t" <blueye117@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene Search Performance
In-Reply-To: <47C54625.2030602@stimulussoft.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_22630_5246490.1204176221767"
References: <47C457E5.6020704@stimulussoft.com>
	 <652776090802261221i58cb0247n8d4c28b3290c387d@mail.gmail.com>
	 <47C48F16.2030901@stimulussoft.com>
	 <652776090802261523i2068905t3643815781d2ad71@mail.gmail.com>
	 <f09790220802261807x71d85fe2hd43fd7512ea99c52@mail.gmail.com>
	 <47C54442.7010104@stimulussoft.com>
	 <47C54625.2030602@stimulussoft.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_22630_5246490.1204176221767
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

1. redefine the archivedate field as YYmmDD format,
2. add another field using timestamp for sort use.
3. use RangeFilter to get result and then sort by timestamp.

2008/2/27, Jamie <jamie@stimulussoft.com>:
>
> Hi Michael & Others
>
> Ok. I've gathered some more statistics from a different machine for your
> analysis.
> (I had to switch machines because the original one was in production and
> my tests were interfering).
>
> Here are the statistics from the new machine:
>
> Total Documents: 1.2 million
> Results Returned:  900k
> Store Size 238G (size of original documents)
> Index Size 1.2G (lucene index size)
> Index / Store Ratio 0.5%
>
> The search query is as follows:
>
> archivedate:[d20071229010000 TO d20080228235900]
> ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~why there is an
> extra 'd' ?~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
> As you can see, I am using a range query to search between specific dates.
> Question: should this query be moved to a filter rather? I did not do
> this as I needed to have the option to sort on date.
>
> There are no other specific filters applied and in this example sorting
> is turned off.
>
> On this particular machine the search time varies between 2.64 seconds
> and about 5 seconds.
>
> The limitations of this machine are that it does uses a normal IDE drive
> to house the index, not a SATA drive
>
> IOStat Statistics
>
> Linux 2.6.20-15-server 27/02/2008
>
> avg-cpu:  %user   %nice %system %iowait  %steal   %idle
>          20.25    0.00    3.23    0.34    0.00   76.19
>
> Device:            tps   Blk_read/s   Blk_wrtn/s   Blk_read   Blk_wrtn
> sda               7.12        50.67       186.41   38936841  143240688
>
> See attached for hardware info and the CPU call tree (taken from YourKit).
>
> I would appreciate your recommendations.
>
>
> Jamie
>
>
> h t wrote:
> Hi Michael,
> I guess the hotspot of lucene is
> org.apache.lucene.search.IndexSearcher.search()
>
> Hi Jamie,
> What's the original text size of a million emails?
> I estimate the size of an email is around 100k, is this true?
> When you doing search, what kind keywords did you input, words or short
> sentence?
> How many results return?
> Did you use filter to shrink the results size?
>
> 2008/2/27, Michael Stoppelman <stopman@gmail.com>:
>   So you're saying searches are taking 10 seconds on a 5G index? If so
> that
> seems ungodly slow.
> If you're on *nix, have you watched your iostat statistics? Maybe
> something
> is hammering your hds.
> Something seems amiss.
>
> What lucene methods were pointed to as hotspots by YourKit?
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_22630_5246490.1204176221767--

From java-user-return-32829-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 28 06:14:28 2008
Return-Path: <java-user-return-32829-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1862 invoked from network); 28 Feb 2008 06:14:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Feb 2008 06:14:28 -0000
Received: (qmail 68019 invoked by uid 500); 28 Feb 2008 06:14:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67981 invoked by uid 500); 28 Feb 2008 06:14:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67970 invoked by uid 99); 28 Feb 2008 06:14:16 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Feb 2008 22:14:16 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [216.75.55.147] (HELO stimulussoft.com) (216.75.55.147)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Feb 2008 06:13:40 +0000
Received: (qmail 29510 invoked by uid 511); 27 Feb 2008 22:13:49 -0800
Received: from 41.243.252.96 by live.stimulussoft.com (envelope-from <jamie@stimulussoft.com>, uid 509) with qmail-scanner-1.25-st-qms 
 (spamassassin: 3.2.3. perlscan: 1.25-st-qms.  
 Clear:RC:0(41.243.252.96):SA:0(-2.3/5.0):. 
 Processed in 2.339412 secs); 28 Feb 2008 06:13:49 -0000
X-Antivirus-MYDOMAIN-Mail-From: jamie@stimulussoft.com via live.stimulussoft.com
X-Antivirus-MYDOMAIN: 1.25-st-qms (Clear:RC:0(41.243.252.96):SA:0(-2.3/5.0):. Processed in 2.339412 secs Process 29500)
Received: from dsl-243-252-96.telkomadsl.co.za (HELO ?192.168.0.50?) (jamie@stimulussoft.com@41.243.252.96)
  by stimulussoft.com with SMTP; 27 Feb 2008 22:13:46 -0800
Message-ID: <47C651D7.9000008@stimulussoft.com>
Date: Thu, 28 Feb 2008 08:16:55 +0200
From: Jamie <jamie@stimulussoft.com>
User-Agent: Thunderbird 2.0.0.9 (Windows/20071031)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Lucene Search Performance
References: <47C457E5.6020704@stimulussoft.com>	 <652776090802261221i58cb0247n8d4c28b3290c387d@mail.gmail.com>	 <47C48F16.2030901@stimulussoft.com>	 <652776090802261523i2068905t3643815781d2ad71@mail.gmail.com>	 <f09790220802261807x71d85fe2hd43fd7512ea99c52@mail.gmail.com>	 <47C54442.7010104@stimulussoft.com>	 <47C54625.2030602@stimulussoft.com> <f09790220802272123v561fc528h395d60f00c3f5c63@mail.gmail.com>
In-Reply-To: <f09790220802272123v561fc528h395d60f00c3f5c63@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, hits=-2.3 required=5.0

Hi

Thanks for the suggestions. This would require us to change the index 
and right now we literally have millions of documents stored in current 
index format. I'll bear it in mind, but I am not entirely sure how I 
would go about implementing the change at this point.

Much appreciate

Jamie


h t wrote:
> 1. redefine the archivedate field as YYmmDD format,
> 2. add another field using timestamp for sort use.
> 3. use RangeFilter to get result and then sort by timestamp.
>
> 2008/2/27, Jamie <jamie@stimulussoft.com>:
>   
>> Hi Michael & Others
>>
>> Ok. I've gathered some more statistics from a different machine for your
>> analysis.
>> (I had to switch machines because the original one was in production and
>> my tests were interfering).
>>
>> Here are the statistics from the new machine:
>>
>> Total Documents: 1.2 million
>> Results Returned:  900k
>> Store Size 238G (size of original documents)
>> Index Size 1.2G (lucene index size)
>> Index / Store Ratio 0.5%
>>
>> The search query is as follows:
>>
>> archivedate:[d20071229010000 TO d20080228235900]
>> ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~why there is an
>> extra 'd' ?~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
>> As you can see, I am using a range query to search between specific dates.
>> Question: should this query be moved to a filter rather? I did not do
>> this as I needed to have the option to sort on date.
>>
>> There are no other specific filters applied and in this example sorting
>> is turned off.
>>
>> On this particular machine the search time varies between 2.64 seconds
>> and about 5 seconds.
>>
>> The limitations of this machine are that it does uses a normal IDE drive
>> to house the index, not a SATA drive
>>
>> IOStat Statistics
>>
>> Linux 2.6.20-15-server 27/02/2008
>>
>> avg-cpu:  %user   %nice %system %iowait  %steal   %idle
>>          20.25    0.00    3.23    0.34    0.00   76.19
>>
>> Device:            tps   Blk_read/s   Blk_wrtn/s   Blk_read   Blk_wrtn
>> sda               7.12        50.67       186.41   38936841  143240688
>>
>> See attached for hardware info and the CPU call tree (taken from YourKit).
>>
>> I would appreciate your recommendations.
>>
>>
>> Jamie
>>
>>
>> h t wrote:
>> Hi Michael,
>> I guess the hotspot of lucene is
>> org.apache.lucene.search.IndexSearcher.search()
>>
>> Hi Jamie,
>> What's the original text size of a million emails?
>> I estimate the size of an email is around 100k, is this true?
>> When you doing search, what kind keywords did you input, words or short
>> sentence?
>> How many results return?
>> Did you use filter to shrink the results size?
>>
>> 2008/2/27, Michael Stoppelman <stopman@gmail.com>:
>>   So you're saying searches are taking 10 seconds on a 5G index? If so
>> that
>> seems ungodly slow.
>> If you're on *nix, have you watched your iostat statistics? Maybe
>> something
>> is hammering your hds.
>> Something seems amiss.
>>
>> What lucene methods were pointed to as hotspots by YourKit?
>>
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>     
>
>   


-- 
Stimulus Software - MailArchiva
Email Archiving And Compliance
USA Tel: +1-713-366-8072 ext 3
UK Tel: +44-20-80991035 ext 3
Email: jamie@stimulussoft.com
Web: http://www.mailarchiva.com

To receive MailArchiva Enterprise Edition product announcements, send a message to: <mailarchiva-enterprise-edition-subscribe@stimulussoft.com> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32830-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 28 06:58:39 2008
Return-Path: <java-user-return-32830-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 15803 invoked from network); 28 Feb 2008 06:58:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Feb 2008 06:58:38 -0000
Received: (qmail 4723 invoked by uid 500); 28 Feb 2008 06:58:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4693 invoked by uid 500); 28 Feb 2008 06:58:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4682 invoked by uid 99); 28 Feb 2008 06:58:27 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Feb 2008 22:58:27 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [202.144.91.165] (HELO mx-obg2.iflexsolutions.com) (202.144.91.165)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Feb 2008 06:57:41 +0000
Received: from IFLBLW-EXCH-11.i-flex.com ([10.80.50.250])
	by mx-obg2.iflexsolutions.com (8.13.1/8.13.1) with ESMTP id m1S6skVZ019772
	for <java-user@lucene.apache.org>; Thu, 28 Feb 2008 12:25:45 +0530
Received: from BLR-MSG-02.i-flex.com ([10.80.50.103]) by IFLBLW-EXCH-11.i-flex.com with Microsoft SMTPSVC(6.0.3790.1830); Thu, 28 Feb 2008 12:28:29 +0530
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.3790.2992
Content-Class: urn:content-classes:message
MIME-Version: 1.0
Content-Transfer-Encoding: 7bit
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C879D7.52862A0F"
Subject: Query regarding usage of Lucene - Filtering folders
Date: Thu, 28 Feb 2008 12:28:38 +0530
Message-ID: <36A9B06E6B2FDA4D845E847C36A7AB0298DE32@BLR-MSG-02.i-flex.com>
Importance: normal
X-MS-Has-Attach: 
Priority: normal
X-MS-TNEF-Correlator: 
Thread-Topic: Query regarding usage of Lucene - Filtering folders
thread-index: Ach511hAo1AjDygKSUaT94YjUSi92w==
From: <Mohammad.Ahmed@iflexsolutions.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 28 Feb 2008 06:58:29.0386 (UTC) FILETIME=[52C87EA0:01C879D7]
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01C879D7.52862A0F
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Hi

I would like to join java-user mailing list.

I had a query regarding usage of lucene.

=20

=20

I have done the indexing for the files kept in root folder -> subfolder

-> subfolder structure.

=20

=20

When I make the search with particular word it returns me the list of
matching files across the folder structure right from root to the last
subfolder.

=20

=20

I want to restrict search to specific folder only.

=20

Is it possible with lucene?

=20

If yes, please suggest me the steps to follow.

=20

=20

Thanks,

=20

Mohammad

=20

=20



DISCLAIMER:
This message contains privileged and confidential information and is =
intended only for an individual named. If you are not the intended =
recipient, you should not disseminate, distribute, store, print, copy or =
deliver this message. Please notify the sender immediately by e-mail if =
you have received this e-mail by mistake and delete this e-mail from =
your system. E-mail transmission cannot be guaranteed to be secure or =
error-free as information could be intercepted, corrupted, lost, =
destroyed, arrive late or incomplete or contain viruses. The sender, =
therefore,  does not accept liability for any errors or omissions in the =
contents of this message which arise as a result of e-mail transmission. =
If verification is required, please request a hard-copy version.

------_=_NextPart_001_01C879D7.52862A0F--

From java-user-return-32831-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 28 07:00:31 2008
Return-Path: <java-user-return-32831-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 16253 invoked from network); 28 Feb 2008 07:00:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Feb 2008 07:00:30 -0000
Received: (qmail 9113 invoked by uid 500); 28 Feb 2008 07:00:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9086 invoked by uid 500); 28 Feb 2008 07:00:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9075 invoked by uid 99); 28 Feb 2008 07:00:19 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Feb 2008 23:00:19 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [202.144.91.165] (HELO mx-obg2.iflexsolutions.com) (202.144.91.165)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Feb 2008 06:59:45 +0000
Received: from IFLBLW-EXCH-11.i-flex.com ([10.80.50.250])
	by mx-obg2.iflexsolutions.com (8.13.1/8.13.1) with ESMTP id m1S6uw3o030223
	for <java-user@lucene.apache.org>; Thu, 28 Feb 2008 12:27:35 +0530
Received: from BLR-MSG-02.i-flex.com ([10.80.50.103]) by IFLBLW-EXCH-11.i-flex.com with Microsoft SMTPSVC(6.0.3790.1830); Thu, 28 Feb 2008 12:30:18 +0530
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.3790.2992
Content-Class: urn:content-classes:message
MIME-Version: 1.0
Content-Transfer-Encoding: 7bit
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C879D7.93D1B0DD"
Subject: Query regarding usage of Lucene(Filtering folder)
Date: Thu, 28 Feb 2008 12:30:17 +0530
Message-ID: <36A9B06E6B2FDA4D845E847C36A7AB0298DE37@BLR-MSG-02.i-flex.com>
Importance: normal
X-MS-Has-Attach: 
Priority: normal
X-MS-TNEF-Correlator: 
Thread-Topic: Query regarding usage of Lucene(Filtering folder)
thread-index: Ach515NDXDjOOB1ZR3SHcYlTrh0WRQ==
From: <Ravinder.Teepiredddy@iflexsolutions.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 28 Feb 2008 07:00:18.0991 (UTC) FILETIME=[941CE3F0:01C879D7]
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01C879D7.93D1B0DD
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Hi All,

=20

I had a query regarding usage of lucene.

I have done the indexing for the files kept in root folder ->
subfolder-> Subfolder structure.

When I make the search with particular word it returns me the list of
matching files across the folder structure right from root to the last
subfolder.

I want to restrict search to specific folder only.

Is it possible with lucene?

If yes, please suggest me the steps to follow.

=20

Thanks,

Mohammad

=20

=20



DISCLAIMER:
This message contains privileged and confidential information and is =
intended only for an individual named. If you are not the intended =
recipient, you should not disseminate, distribute, store, print, copy or =
deliver this message. Please notify the sender immediately by e-mail if =
you have received this e-mail by mistake and delete this e-mail from =
your system. E-mail transmission cannot be guaranteed to be secure or =
error-free as information could be intercepted, corrupted, lost, =
destroyed, arrive late or incomplete or contain viruses. The sender, =
therefore,  does not accept liability for any errors or omissions in the =
contents of this message which arise as a result of e-mail transmission. =
If verification is required, please request a hard-copy version.

------_=_NextPart_001_01C879D7.93D1B0DD--

From java-user-return-32832-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 28 08:15:05 2008
Return-Path: <java-user-return-32832-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33304 invoked from network); 28 Feb 2008 08:15:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Feb 2008 08:15:05 -0000
Received: (qmail 79531 invoked by uid 500); 28 Feb 2008 08:14:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79498 invoked by uid 500); 28 Feb 2008 08:14:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79477 invoked by uid 99); 28 Feb 2008 08:14:54 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Feb 2008 00:14:54 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [83.247.21.92] (HELO mail.local.wis.nl) (83.247.21.92)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 28 Feb 2008 08:14:20 +0000
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Subject: RE: Query regarding usage of Lucene(Filtering folder)
Date: Thu, 28 Feb 2008 09:13:44 +0100
Message-ID: <50CA25BD6EEA954FA592C097399942E3199163AA@CM1.wis.local>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Query regarding usage of Lucene(Filtering folder)
Thread-Index: Ach515NDXDjOOB1ZR3SHcYlTrh0WRQACeNBQ
From: "Daan de Wit" <d.de.wit@wis.nl>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

This sure is possible with Lucene. What you need to do is index the path
along with your documents, so you get a field like this: `path:
/subfolder/subsubfolder`. Now you can restrict your search to a specific
path. Including subfolders in the search can be done by adding a '*' to
the path used in the query.

Kind regards,
Daan

-----Original Message-----
From: Ravinder.Teepiredddy@iflexsolutions.com
[mailto:Ravinder.Teepiredddy@iflexsolutions.com]=20
Sent: Thursday, February 28, 2008 8:00
To: java-user@lucene.apache.org
Subject: Query regarding usage of Lucene(Filtering folder)

Hi All,

=20

I had a query regarding usage of lucene.

I have done the indexing for the files kept in root folder ->
subfolder-> Subfolder structure.

When I make the search with particular word it returns me the list of
matching files across the folder structure right from root to the last
subfolder.

I want to restrict search to specific folder only.

Is it possible with lucene?

If yes, please suggest me the steps to follow.

=20

Thanks,

Mohammad

=20

=20



DISCLAIMER:
This message contains privileged and confidential information and is
intended only for an individual named. If you are not the intended
recipient, you should not disseminate, distribute, store, print, copy or
deliver this message. Please notify the sender immediately by e-mail if
you have received this e-mail by mistake and delete this e-mail from
your system. E-mail transmission cannot be guaranteed to be secure or
error-free as information could be intercepted, corrupted, lost,
destroyed, arrive late or incomplete or contain viruses. The sender,
therefore,  does not accept liability for any errors or omissions in the
contents of this message which arise as a result of e-mail transmission.
If verification is required, please request a hard-copy version.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32833-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 28 12:05:58 2008
Return-Path: <java-user-return-32833-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98111 invoked from network); 28 Feb 2008 12:05:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Feb 2008 12:05:58 -0000
Received: (qmail 77044 invoked by uid 500); 28 Feb 2008 12:05:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77013 invoked by uid 500); 28 Feb 2008 12:05:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77002 invoked by uid 99); 28 Feb 2008 12:05:47 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Feb 2008 04:05:47 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [208.97.132.119] (HELO spunkymail-a11.g.dreamhost.com) (208.97.132.119)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Feb 2008 12:04:57 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a11.g.dreamhost.com (Postfix) with ESMTP id 0C713B6FA7
	for <java-user@lucene.apache.org>; Thu, 28 Feb 2008 04:05:15 -0800 (PST)
Message-Id: <003437AD-2007-41B7-9A67-B47CD7CE1E62@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <15696719.post@talk.nabble.com>
Content-Type: text/plain; charset=WINDOWS-1252; format=flowed; delsp=yes
Content-Transfer-Encoding: quoted-printable
Mime-Version: 1.0 (Apple Message framework v919.2)
Subject: Re: Vector Space Model: New Similarity Implementation Issues
Date: Thu, 28 Feb 2008 07:05:15 -0500
References: <15696719.post@talk.nabble.com>
X-Mailer: Apple Mail (2.919.2)
X-Virus-Checked: Checked by ClamAV on apache.org

Not sure I am understanding what you are asking, but I will give it a =20=

shot.   See below


On Feb 26, 2008, at 3:45 PM, Dharmalingam wrote:

>
> Hi List,
>
> I am pretty new to Lucene. Certainly, it is very exciting. I need to
> implement a new Similarity class based on the Term Vector Space =20
> Model given
> in http://www.miislita.com/term-vector/term-vector-3.html
>
> Although that model is similar to Lucene=92s model
> =
(http://hudson.zones.apache.org/hudson/job/Lucene-trunk/javadoc//org/apach=
e/lucene/search/Similarity.html=20
> ),
> I am having hard time to extend the Similarity class to calculate that
> model.
>
> In that model, =93tf=94 is multiplied with Idf for all terms in the =20=

> index, but
> in Lucene =93tf=94 is calculated only for terms in the given Query. =20=

> Because of
> that effect, the norm calculation should also include =93idf=94 for =
all =20
> terms.
> Lucene calculates the norm, during indexing, by =93just=94 counting =
the =20
> number
> of terms per document. In the web formula (in miislita.com), a =20
> document norm
> is calculated after multiplying =93tf=94 and =93idf=94.

Are you wondering if there is a way to score all documents regardless =20=

of whether the document has the term or not?  I don't quite get your =20
statement: "In that model, =93tf=94 is multiplied with Idf for all terms =
=20
in the index, but in Lucene =93tf=94 is calculated only for terms in the =
=20
given Query."

Isn't the result for those documents that don't have query terms just =20=

going to be 0 or am I not fully understanding?  I briefly skimmed the =20=

paper you cite and it doesn't seem that different, it's just =20
describing the Salton's VSM right?

>
>
> FYI: I could implement =93idf=94 according to miisliat.com formula, =
but =20
> not the
> =93tf=94 and =93norm=94
>
> Could you please comment me how I can implement a new Similarity =20
> class that
> will fit in the Lucene=92s architecture, but still implement the =20
> vector space
> model given in miislita.com

In the end, you may need to implement some lower level Query classes, =20=

but I still don't fully understand what you are trying to do, so I =20
wouldn't head down that path just yet.

--------------------------
Grant Ingersoll
http://www.lucenebootcamp.com
Next Training: April 7, 2008 at ApacheCon Europe in Amsterdam

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ






---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32834-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 28 12:43:15 2008
Return-Path: <java-user-return-32834-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 16822 invoked from network); 28 Feb 2008 12:43:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Feb 2008 12:43:15 -0000
Received: (qmail 41054 invoked by uid 500); 28 Feb 2008 12:43:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41023 invoked by uid 500); 28 Feb 2008 12:43:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41012 invoked by uid 99); 28 Feb 2008 12:43:03 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Feb 2008 04:43:03 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of spring@gmx.eu designates 213.165.64.20 as permitted sender)
Received: from [213.165.64.20] (HELO mail.gmx.net) (213.165.64.20)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 28 Feb 2008 12:42:17 +0000
Received: (qmail invoked by alias); 28 Feb 2008 12:42:38 -0000
Received: from e178127071.adsl.alicedsl.de (EHLO msrvcn04) [85.178.127.71]
  by mail.gmx.net (mp024) with SMTP; 28 Feb 2008 13:42:38 +0100
X-Authenticated: #2635966
X-Provags-ID: V01U2FsdGVkX18/y2xgtXc/Z2e+t2cYkigrBzWRhFdd2mk+cjq2xd
	RzRtR9zBWP6z1G
From: <spring@gmx.eu>
To: <java-user@lucene.apache.org>
References: <36A9B06E6B2FDA4D845E847C36A7AB0298DC52@BLR-MSG-02.i-flex.com> <000a01c879bc$ecddf1c0$fe3c10ac@desktop>
Subject: RE: How do i get a text summary 
Date: Thu, 28 Feb 2008 13:42:40 +0100
Message-ID: <F59AE5DC4BC14155A7563ACC7889F275@msrvcn04>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.3790.4133
In-Reply-To: <000a01c879bc$ecddf1c0$fe3c10ac@desktop>
Thread-Index: Ach5ta1N9GkMwqSRQGW3gFYEyeJaaAABwHggABKjBrA=
X-Y-GMX-Trusted: 0
X-Virus-Checked: Checked by ClamAV on apache.org

> If you want something from an index it has to be IN the 
> index. So, store a
> summary field in each document and make sure that field is part of the
> query.

And how could one create automatically such a summary?
Taking the first 2 lines of a document makes not always much sense.
How does google this?

Thank you.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32835-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 28 13:07:55 2008
Return-Path: <java-user-return-32835-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 23645 invoked from network); 28 Feb 2008 13:07:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Feb 2008 13:07:55 -0000
Received: (qmail 78811 invoked by uid 500); 28 Feb 2008 13:07:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78785 invoked by uid 500); 28 Feb 2008 13:07:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78774 invoked by uid 99); 28 Feb 2008 13:07:44 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Feb 2008 05:07:44 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [213.162.48.15] (HELO soufre.accelance.net) (213.162.48.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Feb 2008 13:06:54 +0000
Received: from [192.168.3.116] (LSt-Amand-152-32-31-90.w82-127.abo.wanadoo.fr [82.127.74.90])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by soufre.accelance.net (Postfix) with ESMTP id AFA0A450A9
	for <java-user@lucene.apache.org>; Thu, 28 Feb 2008 14:07:14 +0100 (CET)
Message-ID: <47C6B201.7030906@garambrogne.net>
Date: Thu, 28 Feb 2008 14:07:13 +0100
From: Mathieu Lecarme <mathieu@garambrogne.net>
User-Agent: Thunderbird 2.0.0.12 (X11/20080213)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: How do i get a text summary
References: <36A9B06E6B2FDA4D845E847C36A7AB0298DC52@BLR-MSG-02.i-flex.com> <000a01c879bc$ecddf1c0$fe3c10ac@desktop> <F59AE5DC4BC14155A7563ACC7889F275@msrvcn04>
In-Reply-To: <F59AE5DC4BC14155A7563ACC7889F275@msrvcn04>
X-Enigmail-Version: 0.95.6
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

spring@gmx.eu a crit :
>> If you want something from an index it has to be IN the 
>> index. So, store a
>> summary field in each document and make sure that field is part of the
>> query.
>>     
>
> And how could one create automatically such a summary?
>   
Have a look to http://alias-i.com/lingpipe/index.html or 
http://www.nzdl.org/Kea/
Summerizing is a datamining stuff.
> Taking the first 2 lines of a document makes not always much sense.
> How does google this?
>   
The simpler way is to give text context, n words before, and n words after.

M.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32836-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 28 13:21:45 2008
Return-Path: <java-user-return-32836-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31865 invoked from network); 28 Feb 2008 13:21:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Feb 2008 13:21:45 -0000
Received: (qmail 475 invoked by uid 500); 28 Feb 2008 13:21:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 444 invoked by uid 500); 28 Feb 2008 13:21:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 429 invoked by uid 99); 28 Feb 2008 13:21:27 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Feb 2008 05:21:27 -0800
X-ASF-Spam-Status: No, hits=-2.0 required=10.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of gresh@us.ibm.com designates 32.97.182.143 as permitted sender)
Received: from [32.97.182.143] (HELO e3.ny.us.ibm.com) (32.97.182.143)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Feb 2008 13:20:38 +0000
Received: from d01relay02.pok.ibm.com (d01relay02.pok.ibm.com [9.56.227.234])
	by e3.ny.us.ibm.com (8.13.8/8.13.8) with ESMTP id m1SDKsCa018614
	for <java-user@lucene.apache.org>; Thu, 28 Feb 2008 08:20:54 -0500
Received: from d01av05.pok.ibm.com (d01av05.pok.ibm.com [9.56.224.195])
	by d01relay02.pok.ibm.com (8.13.8/8.13.8/NCO v8.7) with ESMTP id m1SDKr0p248872
	for <java-user@lucene.apache.org>; Thu, 28 Feb 2008 08:20:53 -0500
Received: from d01av05.pok.ibm.com (loopback [127.0.0.1])
	by d01av05.pok.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id m1SDJYm0012158
	for <java-user@lucene.apache.org>; Thu, 28 Feb 2008 08:19:34 -0500
Received: from d01ml605.pok.ibm.com (d01ml605.pok.ibm.com [9.56.227.91])
	by d01av05.pok.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id m1SDJYjT012155
	for <java-user@lucene.apache.org>; Thu, 28 Feb 2008 08:19:34 -0500
In-Reply-To: <F59AE5DC4BC14155A7563ACC7889F275@msrvcn04>
To: java-user@lucene.apache.org
MIME-Version: 1.0
Subject: RE: How do i get a text summary
X-Mailer: Lotus Notes Release 7.0 HF277 June 21, 2006
From: Donna L Gresh <gresh@us.ibm.com>
Message-ID: <OF8B3BBCBA.64698374-ON852573FD.0048986D-852573FD.00492B25@us.ibm.com>
Date: Thu, 28 Feb 2008 08:19:51 -0500
X-MIMETrack: Serialize by Router on D01ML605/01/M/IBM(Release 8.0|August 02, 2007) at 02/28/2008
 08:20:53,
	Serialize complete at 02/28/2008 08:20:53
Content-Type: multipart/alternative; boundary="=_alternative 0048E01D852573FD_="
X-Virus-Checked: Checked by ClamAV on apache.org

--=_alternative 0048E01D852573FD_=
Content-Type: text/plain; charset="US-ASCII"

I think you may want to look into the Highlighter. It allows you to show 
the "relevant" bits of the document which contributed to the document 
being matched to the query. It does a pretty good job. Of course it does 
not create a "summary" but it does give you a good idea of why the 
document was hit.

http://hudson.zones.apache.org/hudson/job/Lucene-trunk/javadoc//org/apache/lucene/search/highlight/Highlighter.html

Donna Gresh


<spring@gmx.eu> wrote on 02/28/2008 07:42:40 AM:

> > If you want something from an index it has to be IN the 
> > index. So, store a
> > summary field in each document and make sure that field is part of the
> > query.
> 
> And how could one create automatically such a summary?
> Taking the first 2 lines of a document makes not always much sense.
> How does google this?
> 
> Thank you.
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 

--=_alternative 0048E01D852573FD_=--

From java-user-return-32837-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 28 14:00:55 2008
Return-Path: <java-user-return-32837-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51980 invoked from network); 28 Feb 2008 14:00:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Feb 2008 14:00:51 -0000
Received: (qmail 92271 invoked by uid 500); 28 Feb 2008 14:00:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92179 invoked by uid 500); 28 Feb 2008 14:00:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92168 invoked by uid 99); 28 Feb 2008 14:00:39 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Feb 2008 06:00:39 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Feb 2008 13:59:50 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1JUjIx-0006kd-04
	for java-user@lucene.apache.org; Thu, 28 Feb 2008 06:00:11 -0800
Message-ID: <15736946.post@talk.nabble.com>
Date: Thu, 28 Feb 2008 06:00:10 -0800 (PST)
From: Dharmalingam <dganesan@fc-md.umd.edu>
To: java-user@lucene.apache.org
Subject: Re: Vector Space Model: New Similarity Implementation Issues
In-Reply-To: <003437AD-2007-41B7-9A67-B47CD7CE1E62@apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Nabble-From: dganesan@fc-md.umd.edu
References: <15696719.post@talk.nabble.com> <003437AD-2007-41B7-9A67-B47CD7CE1E62@apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org


Thanks for the reply. Sorry if my explanation is not clear. Yes, you are
correct the model is based on  Salton's VSM. However, the calculation of th=
e
term weight and the doc norm is, in my opinion, different from Lucene. If
you look at the table given in
http://www.miislita.com/term-vector/term-vector-3.html, they calcuate the
document norm based on the weight wi=3Dtfi*idfi. I looked at the interfaces=
 of
Similarity and DefaultSimilairty class. I place it below:

public float lengthNorm(String fieldName, int numTerms) {
    return (float)(1.0 / Math.sqrt(numTerms));
 }

You can see that this lengthNorm for a doc is quite different from that
website norm calculation.

Similarly, the querynorm interface of DefaultSimilarity class is:

 /** Implemented as <code>1/sqrt(sumOfSquaredWeights)</code>. */
  public float queryNorm(float sumOfSquaredWeights) {
    return (float)(1.0 / Math.sqrt(sumOfSquaredWeights));
  }

This is again different the website model.

I also have difficulities with tf interface of DefaultSimilarity:=20
/** Implemented as <code>sqrt(freq)</code>. */
  public float tf(float freq) {
    return (float)Math.sqrt(freq);
  }

In that website model, a tf refers to the frequency of a term within a doc.

I hope explained it better. Please let me know if it is unclear. I am
looking for an easy way to implement that table, and of course want to
integrate with my lucene (  i.e., myIndexWriter.setSimilarity(new
mySimilarity());) Will this be possible by just somehow inheriting the base
classes of Lucene.

Thanks for your advice.

Grant Ingersoll-6 wrote:
>=20
> Not sure I am understanding what you are asking, but I will give it a =20
> shot.   See below
>=20
>=20
> On Feb 26, 2008, at 3:45 PM, Dharmalingam wrote:
>=20
>>
>> Hi List,
>>
>> I am pretty new to Lucene. Certainly, it is very exciting. I need to
>> implement a new Similarity class based on the Term Vector Space =20
>> Model given
>> in http://www.miislita.com/term-vector/term-vector-3.html
>>
>> Although that model is similar to Lucene=E2=80=99s model
>> (http://hudson.zones.apache.org/hudson/job/Lucene-trunk/javadoc//org/apa=
che/lucene/search/Similarity.html=20
>> ),
>> I am having hard time to extend the Similarity class to calculate that
>> model.
>>
>> In that model, =E2=80=9Ctf=E2=80=9D is multiplied with Idf for all terms=
 in the =20
>> index, but
>> in Lucene =E2=80=9Ctf=E2=80=9D is calculated only for terms in the given=
 Query. =20
>> Because of
>> that effect, the norm calculation should also include =E2=80=9Cidf=E2=80=
=9D for all =20
>> terms.
>> Lucene calculates the norm, during indexing, by =E2=80=9Cjust=E2=80=9D c=
ounting the =20
>> number
>> of terms per document. In the web formula (in miislita.com), a =20
>> document norm
>> is calculated after multiplying =E2=80=9Ctf=E2=80=9D and =E2=80=9Cidf=E2=
=80=9D.
>=20
> Are you wondering if there is a way to score all documents regardless =20
> of whether the document has the term or not?  I don't quite get your =20
> statement: "In that model, =E2=80=9Ctf=E2=80=9D is multiplied with Idf fo=
r all terms =20
> in the index, but in Lucene =E2=80=9Ctf=E2=80=9D is calculated only for t=
erms in the =20
> given Query."
>=20
> Isn't the result for those documents that don't have query terms just =20
> going to be 0 or am I not fully understanding?  I briefly skimmed the =20
> paper you cite and it doesn't seem that different, it's just =20
> describing the Salton's VSM right?
>=20
>>
>>
>> FYI: I could implement =E2=80=9Cidf=E2=80=9D according to miisliat.com f=
ormula, but =20
>> not the
>> =E2=80=9Ctf=E2=80=9D and =E2=80=9Cnorm=E2=80=9D
>>
>> Could you please comment me how I can implement a new Similarity =20
>> class that
>> will fit in the Lucene=E2=80=99s architecture, but still implement the =
=20
>> vector space
>> model given in miislita.com
>=20
> In the end, you may need to implement some lower level Query classes, =20
> but I still don't fully understand what you are trying to do, so I =20
> wouldn't head down that path just yet.
>=20
> --------------------------
> Grant Ingersoll
> http://www.lucenebootcamp.com
> Next Training: April 7, 2008 at ApacheCon Europe in Amsterdam
>=20
> Lucene Helpful Hints:
> http://wiki.apache.org/lucene-java/BasicsOfPerformance
> http://wiki.apache.org/lucene-java/LuceneFAQ
>=20
>=20
>=20
>=20
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>=20
>=20

--=20
View this message in context: http://www.nabble.com/Vector-Space-Model%3A-N=
ew-Similarity-Implementation-Issues-tp15696719p15736946.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32838-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 28 15:16:48 2008
Return-Path: <java-user-return-32838-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53296 invoked from network); 28 Feb 2008 15:16:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Feb 2008 15:16:48 -0000
Received: (qmail 4764 invoked by uid 500); 28 Feb 2008 15:16:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4734 invoked by uid 500); 28 Feb 2008 15:16:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4715 invoked by uid 99); 28 Feb 2008 15:16:33 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Feb 2008 07:16:33 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Feb 2008 15:15:59 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1JUkUT-00058S-4c
	for java-user@lucene.apache.org; Thu, 28 Feb 2008 07:16:09 -0800
Message-ID: <15738615.post@talk.nabble.com>
Date: Thu, 28 Feb 2008 07:16:09 -0800 (PST)
From: Dharmalingam <dganesan@fc-md.umd.edu>
To: java-user@lucene.apache.org
Subject: Indexing source code files
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: dganesan@fc-md.umd.edu
X-Virus-Checked: Checked by ClamAV on apache.org


I am working on some sort of search mechanism to link a requirement (i.e. a
query) to source code files (i.e., documents). For that purpose, I indexed
the source code files using Lucene. Contrary to traditional natural language
search scenario, we search for code files that are relevant to a given
requirement. One problem here is that the source files usually contain a lot
of abbreviations, words joint by _ or combination of words and/or
abbreviations (e.x., getAccountBalanceTbl).  I am wondering whether anyone
of you already did indexing of (source) files or documents which contain
that kind of words.
-- 
View this message in context: http://www.nabble.com/Indexing-source-code-files-tp15738615p15738615.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32839-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 28 15:42:11 2008
Return-Path: <java-user-return-32839-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 66306 invoked from network); 28 Feb 2008 15:42:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Feb 2008 15:42:11 -0000
Received: (qmail 60253 invoked by uid 500); 28 Feb 2008 15:42:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59712 invoked by uid 500); 28 Feb 2008 15:41:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59701 invoked by uid 99); 28 Feb 2008 15:41:59 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Feb 2008 07:41:59 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [202.144.91.165] (HELO mx-obg2.iflexsolutions.com) (202.144.91.165)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Feb 2008 15:41:25 +0000
Received: from IFLBLW-EXCH-11.i-flex.com ([10.80.50.250])
	by mx-obg2.iflexsolutions.com (8.13.1/8.13.1) with ESMTP id m1SFcf4I029205
	for <java-user@lucene.apache.org>; Thu, 28 Feb 2008 21:09:18 +0530
Received: from BLR-MSG-02.i-flex.com ([10.80.50.102]) by IFLBLW-EXCH-11.i-flex.com with Microsoft SMTPSVC(6.0.3790.1830); Thu, 28 Feb 2008 16:32:57 +0530
Content-Class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C879F9.791DA96F"
Subject: Lucene-Highlight words in a searched docs
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.3790.2992
Date: Thu, 28 Feb 2008 16:32:35 +0530
Content-Transfer-Encoding: 7bit
Message-ID: <36A9B06E6B2FDA4D845E847C36A7AB0298E077@BLR-MSG-02.i-flex.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Lucene-Highlight words in a searched docs
thread-index: Ach5+WxtdvLOSF56QliwXqZXRNDE3w==
From: <Ravinder.Teepiredddy@iflexsolutions.com>
To: <java-user@lucene.apache.org>
Importance: normal
Priority: normal
X-OriginalArrivalTime: 28 Feb 2008 11:02:57.0027 (UTC) FILETIME=[7960E530:01C879F9]
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01C879F9.791DA96F
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Hi All,

=20

How do we Highlight words in a searched docs. Please give inputs on
"rewritten query as the input for the highlighter, i.e. call rewrite()
on the query".

=20

Thanks,

Ravinder=20



DISCLAIMER:
This message contains privileged and confidential information and is =
intended only for an individual named. If you are not the intended =
recipient, you should not disseminate, distribute, store, print, copy or =
deliver this message. Please notify the sender immediately by e-mail if =
you have received this e-mail by mistake and delete this e-mail from =
your system. E-mail transmission cannot be guaranteed to be secure or =
error-free as information could be intercepted, corrupted, lost, =
destroyed, arrive late or incomplete or contain viruses. The sender, =
therefore,  does not accept liability for any errors or omissions in the =
contents of this message which arise as a result of e-mail transmission. =
If verification is required, please request a hard-copy version.

------_=_NextPart_001_01C879F9.791DA96F--

From java-user-return-32840-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 28 15:47:50 2008
Return-Path: <java-user-return-32840-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69320 invoked from network); 28 Feb 2008 15:47:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Feb 2008 15:47:50 -0000
Received: (qmail 85294 invoked by uid 500); 28 Feb 2008 15:47:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85264 invoked by uid 500); 28 Feb 2008 15:47:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85253 invoked by uid 99); 28 Feb 2008 15:47:37 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Feb 2008 07:47:37 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [213.162.48.15] (HELO soufre.accelance.net) (213.162.48.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Feb 2008 15:47:02 +0000
Received: from [192.168.3.116] (LSt-Amand-152-32-31-90.w82-127.abo.wanadoo.fr [82.127.74.90])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by soufre.accelance.net (Postfix) with ESMTP id 21C3D4500C
	for <java-user@lucene.apache.org>; Thu, 28 Feb 2008 16:47:05 +0100 (CET)
Message-ID: <47C6D777.70200@garambrogne.net>
Date: Thu, 28 Feb 2008 16:47:03 +0100
From: Mathieu Lecarme <mathieu@garambrogne.net>
User-Agent: Thunderbird 2.0.0.12 (X11/20080213)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Indexing source code files
References: <15738615.post@talk.nabble.com>
In-Reply-To: <15738615.post@talk.nabble.com>
X-Enigmail-Version: 0.95.6
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

Dharmalingam a crit :
> I am working on some sort of search mechanism to link a requirement (i.e. a
> query) to source code files (i.e., documents). For that purpose, I indexed
> the source code files using Lucene. Contrary to traditional natural language
> search scenario, we search for code files that are relevant to a given
> requirement. One problem here is that the source files usually contain a lot
> of abbreviations, words joint by _ or combination of words and/or
> abbreviations (e.x., getAccountBalanceTbl).  I am wondering whether anyone
> of you already did indexing of (source) files or documents which contain
> that kind of words.
>   
You need a specific Tokenizer.
You will use several Field : class, method, comments, code, javadoc. 
Some field can use casual tokenizer (comments), other needs a specific 
one : splitting oneJavWord in several words.

M.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32841-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 28 16:27:36 2008
Return-Path: <java-user-return-32841-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88432 invoked from network); 28 Feb 2008 16:27:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Feb 2008 16:27:36 -0000
Received: (qmail 15358 invoked by uid 500); 28 Feb 2008 16:27:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15180 invoked by uid 500); 28 Feb 2008 16:27:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15169 invoked by uid 99); 28 Feb 2008 16:27:24 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Feb 2008 08:27:24 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [207.5.72.163] (HELO EXHUB016-1.exch016.msoutlookonline.net) (207.5.72.163)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Feb 2008 16:26:48 +0000
Received: from [192.168.1.39] (63.200.72.125) by smtpx16.msoutlookonline.net
 (207.5.72.190) with Microsoft SMTP Server (TLS) id 8.1.240.5; Thu, 28 Feb
 2008 08:26:55 -0800
MIME-Version: 1.0
Message-ID: <p06240806c3ec8e7407ed@[192.168.1.39]>
In-Reply-To: <15738615.post@talk.nabble.com>
References: <15738615.post@talk.nabble.com>
Date: Thu, 28 Feb 2008 08:18:11 -0800
To: java-user@lucene.apache.org
From: Ken Krugler <kkrugler_lists@transpac.com>
Subject: Re: Indexing source code files
Content-Type: text/plain; charset="us-ascii"; format=flowed
X-Virus-Checked: Checked by ClamAV on apache.org

>I am working on some sort of search mechanism to link a requirement (i.e. a
>query) to source code files (i.e., documents). For that purpose, I indexed
>the source code files using Lucene. Contrary to traditional natural language
>search scenario, we search for code files that are relevant to a given
>requirement. One problem here is that the source files usually contain a lot
>of abbreviations, words joint by _ or combination of words and/or
>abbreviations (e.x., getAccountBalanceTbl).  I am wondering whether anyone
>of you already did indexing of (source) files or documents which contain
>that kind of words.

Yes, that's been something we've spent a fair amount of time on...see 
http://www.krugle.org (public code search).

As Mathieu noted, the first thing you really want to do is split the 
file up into at least comments vs. code. Then you can use a regular 
analyzer (or perhaps something more human language-specific, e.g. 
with stemming support) on the comment text, and your own custom 
tokenizer on the code.

In the code, you might further want to treat literals (strings, etc) 
differently than other terms.

And in "real" code terms, then you want to do essentially synonym 
processing, where you turn a single term into multiple terms based on 
the automatic splitting of the term using '_', '-', camelCasing, 
letter/digit transitions, etc.

-- Ken
-- 
Ken Krugler
Krugle, Inc.
+1 530-210-6378
"If you can't find it, you can't fix it"

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32842-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 28 16:27:43 2008
Return-Path: <java-user-return-32842-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88500 invoked from network); 28 Feb 2008 16:27:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Feb 2008 16:27:43 -0000
Received: (qmail 16346 invoked by uid 500); 28 Feb 2008 16:27:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16317 invoked by uid 500); 28 Feb 2008 16:27:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16300 invoked by uid 99); 28 Feb 2008 16:27:29 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Feb 2008 08:27:29 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of isaacrc82@gmail.com designates 64.233.184.230 as permitted sender)
Received: from [64.233.184.230] (HELO wr-out-0506.google.com) (64.233.184.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Feb 2008 16:26:55 +0000
Received: by wr-out-0506.google.com with SMTP id c55so5155676wra.11
        for <java-user@lucene.apache.org>; Thu, 28 Feb 2008 08:27:04 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        bh=6ISOBCuvqp/MIdSKOVxjgrvdH0MhvWEjq3yhPjjsA3w=;
        b=igzA50YU4ErEaJJo/L4b/n9CKzacoz4OQTCAuERTwZAraUaLjhElBEQqTtLspX43EwU1CUEOgNNnKx9Lxb4GuzeU6VrXQ1A4l/bCCqYDGJKc3kq2ACJU0rFj5GAS4A5D0aayUNhsE/GjvrGCsU+kADczLngaQ5BpgAg5d+uz4Qs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=imE88Ic4Bb3W8gwq3gUYOK8cNDoNrf1DLq2zcknrFOAFEV8ipJGGchHRInQ5jsyx64m5uDUMY2dlz23rkM3+pFzbXxXO0HM71nMNJOB7JxJLw2g0XcYypQlae9FsJNy40y+bPTOpn14DmYy4K/m81cIbcaRw8knsGmFC/pd9ncY=
Received: by 10.140.252.16 with SMTP id z16mr1587566rvh.168.1204216023073;
        Thu, 28 Feb 2008 08:27:03 -0800 (PST)
Received: by 10.141.151.4 with HTTP; Thu, 28 Feb 2008 08:27:03 -0800 (PST)
Message-ID: <bf1404350802280827t1bcb4c28j16d96f976199d115@mail.gmail.com>
Date: Thu, 28 Feb 2008 11:27:03 -0500
From: Ariel <isaacrc82@gmail.com>
To: java-user@lucene.apache.org
Subject: How to obtain the freq term vector of a field from a remote index ?
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_2957_2517217.1204216023086"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_2957_2517217.1204216023086
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi folks:

I need to know how to get the frequency term vector of a field from a remote
index in another host.
I know that *IndexSearcher *class has a method named
*getIndexReader().getTermFreqVector(idDoc,
fieldName) *to know the the term frequency vector of certain field* *but I
am using* RemoteSearchable *that is * Searcher, *because my search
functionalities are in an rmi server. I access the remoteSearcheble from a
another host to obtain the hits but so  far I haven't found the way to
obtain the term frequency vector of certain field too.
Do you know if it is possible to do that ??? How can I make it ?
Any help is appreciated .
Greetings
Ariel

------=_Part_2957_2517217.1204216023086--

From java-user-return-32843-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 28 16:59:07 2008
Return-Path: <java-user-return-32843-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 9274 invoked from network); 28 Feb 2008 16:59:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Feb 2008 16:59:06 -0000
Received: (qmail 74971 invoked by uid 500); 28 Feb 2008 16:58:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74932 invoked by uid 500); 28 Feb 2008 16:58:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74921 invoked by uid 99); 28 Feb 2008 16:58:55 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Feb 2008 08:58:55 -0800
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: 80.76.149.212 is neither permitted nor denied by domain of karl.wettin@gmail.com)
Received: from [80.76.149.212] (HELO ch-smtp01.sth.basefarm.net) (80.76.149.212)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Feb 2008 16:58:06 +0000
Received: from c83-249-106-113.bredband.comhem.se ([83.249.106.113]:58235 helo=kodapan.lan)
	by ch-smtp01.sth.basefarm.net with esmtps (TLSv1:AES256-SHA:256)
	(Exim 4.68)
	(envelope-from <karl.wettin@gmail.com>)
	id 1JUm5S-0000my-6H
	for java-user@lucene.apache.org; Thu, 28 Feb 2008 17:58:27 +0100
Message-ID: <47C6E831.70702@gmail.com>
Date: Thu, 28 Feb 2008 17:58:25 +0100
From: Karl Wettin <karl.wettin@gmail.com>
User-Agent: Thunderbird 2.0.0.12 (Macintosh/20080213)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: How do i get a text summary
References: <36A9B06E6B2FDA4D845E847C36A7AB0298DC52@BLR-MSG-02.i-flex.com> <000a01c879bc$ecddf1c0$fe3c10ac@desktop> <F59AE5DC4BC14155A7563ACC7889F275@msrvcn04>
In-Reply-To: <F59AE5DC4BC14155A7563ACC7889F275@msrvcn04>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Originating-IP: 83.249.106.113
X-Scan-Result: No virus found in message 1JUm5S-0000my-6H.
X-Scan-Signature: ch-smtp01.sth.basefarm.net 1JUm5S-0000my-6H 9f6d68bf74e3167fdb90b2b46c071cae
X-Virus-Checked: Checked by ClamAV on apache.org

spring@gmx.eu skrev:
>> If you want something from an index it has to be IN the 
>> index. So, store a
>> summary field in each document and make sure that field is part of the
>> query.
> 
> And how could one create automatically such a summary?
> Taking the first 2 lines of a document makes not always much sense.
> How does google this?

Google don't summarize, they highlight parts that match the query. See 
previous reponses.

If you really want to summarize there are a number of more and less 
scientific ways to figure out what's important and what's not.

Very simple algorithmic solutions usually involve ranking top senstances 
by looking at distribution of terms in sentances, paragraphs and the 
whole document. I implemented something like this a couple of years back 
that worked fairly well.

Citeseer is a great source for papers on pretty much any IR related 
subject: <http://citeseer.ist.psu.edu/cs?cs=1&q=text+summarization>


    karl

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32844-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 28 17:21:35 2008
Return-Path: <java-user-return-32844-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19586 invoked from network); 28 Feb 2008 17:21:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Feb 2008 17:21:35 -0000
Received: (qmail 28771 invoked by uid 500); 28 Feb 2008 17:21:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28743 invoked by uid 500); 28 Feb 2008 17:21:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28730 invoked by uid 99); 28 Feb 2008 17:21:14 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Feb 2008 09:21:14 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erica.mitchell@iona.com designates 12.170.54.180 as permitted sender)
Received: from [12.170.54.180] (HELO amer-mx1.iona.com) (12.170.54.180)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Feb 2008 17:20:40 +0000
X-IronPort-AV: E=Sophos;i="4.25,420,1199682000"; 
   d="scan'208";a="9781543"
Received: from amer-ems1.ionaglobal.com ([10.65.6.25])
  by amer-mx1.iona.com with ESMTP; 28 Feb 2008 12:20:50 -0500
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Subject: RE: Lucene-Highlight words in a searched docs
Date: Thu, 28 Feb 2008 12:20:46 -0500
Message-ID: <CD11AD74257EB74482CDDAD736E4BC8D092533@amer-ems1.IONAGLOBAL.COM>
In-Reply-To: <36A9B06E6B2FDA4D845E847C36A7AB0298E077@BLR-MSG-02.i-flex.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Lucene-Highlight words in a searched docs
Thread-Index: Ach5+WxtdvLOSF56QliwXqZXRNDE3wANLksg
From: "Mitchell, Erica" <Erica.Mitchell@iona.com>
To: <java-user@lucene.apache.org>
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Ravinder

Checkout Highlighter.test in
lucene-2.3.1\contrib\highlighter\src\test\org\apache\lucene\search\highl
ight\ folder

-----Original Message-----
From: Ravinder.Teepiredddy@iflexsolutions.com
[mailto:Ravinder.Teepiredddy@iflexsolutions.com]=20
Sent: 28 February 2008 11:03
To: java-user@lucene.apache.org
Subject: Lucene-Highlight words in a searched docs

Hi All,

=20

How do we Highlight words in a searched docs. Please give inputs on
"rewritten query as the input for the highlighter, i.e. call rewrite()
on the query".

=20

Thanks,

Ravinder=20



DISCLAIMER:
This message contains privileged and confidential information and is
intended only for an individual named. If you are not the intended
recipient, you should not disseminate, distribute, store, print, copy or
deliver this message. Please notify the sender immediately by e-mail if
you have received this e-mail by mistake and delete this e-mail from
your system. E-mail transmission cannot be guaranteed to be secure or
error-free as information could be intercepted, corrupted, lost,
destroyed, arrive late or incomplete or contain viruses. The sender,
therefore,  does not accept liability for any errors or omissions in the
contents of this message which arise as a result of e-mail transmission.
If verification is required, please request a hard-copy version.

----------------------------
IONA Technologies PLC (registered in Ireland)
Registered Number: 171387
Registered Address: The IONA Building, Shelbourne Road, Dublin 4, Ireland

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32845-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 28 17:45:15 2008
Return-Path: <java-user-return-32845-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30980 invoked from network); 28 Feb 2008 17:45:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Feb 2008 17:45:15 -0000
Received: (qmail 84750 invoked by uid 500); 28 Feb 2008 17:45:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84724 invoked by uid 500); 28 Feb 2008 17:45:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 84713 invoked by uid 99); 28 Feb 2008 17:45:03 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Feb 2008 09:45:03 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.74] (HELO spunkymail-a6.g.dreamhost.com) (208.97.132.74)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Feb 2008 17:44:28 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a6.g.dreamhost.com (Postfix) with ESMTP id 15883109F26
	for <java-user@lucene.apache.org>; Thu, 28 Feb 2008 09:44:30 -0800 (PST)
Message-Id: <41A806C0-FCB2-46AD-BD7A-E8D944318A54@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <15736946.post@talk.nabble.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v919.2)
Subject: Re: Vector Space Model: New Similarity Implementation Issues
Date: Thu, 28 Feb 2008 12:44:29 -0500
References: <15696719.post@talk.nabble.com> <003437AD-2007-41B7-9A67-B47CD7CE1E62@apache.org> <15736946.post@talk.nabble.com>
X-Mailer: Apple Mail (2.919.2)
X-Virus-Checked: Checked by ClamAV on apache.org


On Feb 28, 2008, at 9:00 AM, Dharmalingam wrote:

>
> Thanks for the reply. Sorry if my explanation is not clear. Yes, you  
> are
> correct the model is based on  Salton's VSM. However, the  
> calculation of the
> term weight and the doc norm is, in my opinion, different from  
> Lucene. If
> you look at the table given in
> http://www.miislita.com/term-vector/term-vector-3.html, they  
> calcuate the
> document norm based on the weight wi=tfi*idfi. I looked at the  
> interfaces of
> Similarity and DefaultSimilairty class. I place it below:
>
> public float lengthNorm(String fieldName, int numTerms) {
>    return (float)(1.0 / Math.sqrt(numTerms));
> }
>
> You can see that this lengthNorm for a doc is quite different from  
> that
> website norm calculation.

The lengthNorm method is different from the IDF calculation.  In the  
Similarity class, that is handled by the idf() method.  Length norm is  
an attempt to address one of the limitations listed further down in  
that paper:
"Long Documents: Very long documents make similarity measures  
difficult (vectors with small dot products and high dimensionality)"



>
>
> Similarly, the querynorm interface of DefaultSimilarity class is:
>
> /** Implemented as <code>1/sqrt(sumOfSquaredWeights)</code>. */
>  public float queryNorm(float sumOfSquaredWeights) {
>    return (float)(1.0 / Math.sqrt(sumOfSquaredWeights));
>  }
>
> This is again different the website model.

Query norm is an attempt to allow for comparison of scores across  
queries, but I don't think one should do that anyway.


>
>
> I also have difficulities with tf interface of DefaultSimilarity:
> /** Implemented as <code>sqrt(freq)</code>. */
>  public float tf(float freq) {
>    return (float)Math.sqrt(freq);
>  }
>

These are all callback methods from within the Scorer classes that  
each Query uses.  Have a look at TermScorer for how these things get  
called.


Try this as an example:

Setup a really simple index with 1 or 2 docs each with a few words.   
Setup a simple Similarity class where you override all of these  
methods to return 1 (or some simple default)
and then index your documents and do a few queries.

Then, have a look at Searcher.explain() to see why a document scores  
the way it does.  Then, you can work to modify from there.

Here's the bigger question:  what is your ultimate goal here?  Are you  
just trying to understand Lucene at an academic/programming level or  
do you have something you are trying to achieve in terms of relevance?

-Grant

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32846-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 28 20:56:13 2008
Return-Path: <java-user-return-32846-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35626 invoked from network); 28 Feb 2008 20:56:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Feb 2008 20:56:13 -0000
Received: (qmail 73622 invoked by uid 500); 28 Feb 2008 20:56:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73584 invoked by uid 500); 28 Feb 2008 20:56:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73573 invoked by uid 99); 28 Feb 2008 20:56:01 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Feb 2008 12:56:01 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Feb 2008 20:55:26 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1JUpmx-0005tZ-8d
	for java-user@lucene.apache.org; Thu, 28 Feb 2008 12:55:35 -0800
Message-ID: <15745822.post@talk.nabble.com>
Date: Thu, 28 Feb 2008 12:55:35 -0800 (PST)
From: Dharmalingam <dganesan@fc-md.umd.edu>
To: java-user@lucene.apache.org
Subject: Re: Vector Space Model: New Similarity Implementation Issues
In-Reply-To: <41A806C0-FCB2-46AD-BD7A-E8D944318A54@apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: dganesan@fc-md.umd.edu
References: <15696719.post@talk.nabble.com> <003437AD-2007-41B7-9A67-B47CD7CE1E62@apache.org> <15736946.post@talk.nabble.com> <41A806C0-FCB2-46AD-BD7A-E8D944318A54@apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org


Thanks for your tips. My overall goal is to quickly implement 7 variants of
vector space model using Lucene. You can find these variants in the
updloaded file.

I am doing all these stuffs for a much broader goal: I am trying to recover
traceability links from requirements to source code files. I treat every
requirement as a query. In this problem, I would like to compare these
collection of algorithms for their relevance.




Grant Ingersoll-6 wrote:
> 
> 
> On Feb 28, 2008, at 9:00 AM, Dharmalingam wrote:
> 
>>
>> Thanks for the reply. Sorry if my explanation is not clear. Yes, you  
>> are
>> correct the model is based on  Salton's VSM. However, the  
>> calculation of the
>> term weight and the doc norm is, in my opinion, different from  
>> Lucene. If
>> you look at the table given in
>> http://www.miislita.com/term-vector/term-vector-3.html, they  
>> calcuate the
>> document norm based on the weight wi=tfi*idfi. I looked at the  
>> interfaces of
>> Similarity and DefaultSimilairty class. I place it below:
>>
>> public float lengthNorm(String fieldName, int numTerms) {
>>    return (float)(1.0 / Math.sqrt(numTerms));
>> }
>>
>> You can see that this lengthNorm for a doc is quite different from  
>> that
>> website norm calculation.
> 
> The lengthNorm method is different from the IDF calculation.  In the  
> Similarity class, that is handled by the idf() method.  Length norm is  
> an attempt to address one of the limitations listed further down in  
> that paper:
> "Long Documents: Very long documents make similarity measures  
> difficult (vectors with small dot products and high dimensionality)"
> 
> 
> 
>>
>>
>> Similarly, the querynorm interface of DefaultSimilarity class is:
>>
>> /** Implemented as <code>1/sqrt(sumOfSquaredWeights)</code>. */
>>  public float queryNorm(float sumOfSquaredWeights) {
>>    return (float)(1.0 / Math.sqrt(sumOfSquaredWeights));
>>  }
>>
>> This is again different the website model.
> 
> Query norm is an attempt to allow for comparison of scores across  
> queries, but I don't think one should do that anyway.
> 
> 
>>
>>
>> I also have difficulities with tf interface of DefaultSimilarity:
>> /** Implemented as <code>sqrt(freq)</code>. */
>>  public float tf(float freq) {
>>    return (float)Math.sqrt(freq);
>>  }
>>
> 
> These are all callback methods from within the Scorer classes that  
> each Query uses.  Have a look at TermScorer for how these things get  
> called.
> 
> 
> Try this as an example:
> 
> Setup a really simple index with 1 or 2 docs each with a few words.   
> Setup a simple Similarity class where you override all of these  
> methods to return 1 (or some simple default)
> and then index your documents and do a few queries.
> 
> Then, have a look at Searcher.explain() to see why a document scores  
> the way it does.  Then, you can work to modify from there.
> 
> Here's the bigger question:  what is your ultimate goal here?  Are you  
> just trying to understand Lucene at an academic/programming level or  
> do you have something you are trying to achieve in terms of relevance?
> 
> -Grant
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 
http://www.nabble.com/file/p15745822/ieee-sw-rank.pdf ieee-sw-rank.pdf 
-- 
View this message in context: http://www.nabble.com/Vector-Space-Model%3A-New-Similarity-Implementation-Issues-tp15696719p15745822.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32847-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 28 21:19:06 2008
Return-Path: <java-user-return-32847-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 46349 invoked from network); 28 Feb 2008 21:19:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Feb 2008 21:19:06 -0000
Received: (qmail 21026 invoked by uid 500); 28 Feb 2008 21:18:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20999 invoked by uid 500); 28 Feb 2008 21:18:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 20988 invoked by uid 99); 28 Feb 2008 21:18:54 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Feb 2008 13:18:54 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.134.189 as permitted sender)
Received: from [209.85.134.189] (HELO mu-out-0910.google.com) (209.85.134.189)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Feb 2008 21:18:21 +0000
Received: by mu-out-0910.google.com with SMTP id g7so7012982muf.0
        for <java-user@lucene.apache.org>; Thu, 28 Feb 2008 13:18:30 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=ohCUPFpxPF7MPpdklb7Y0EO6fUzXPQHKGtLeKRVp0pg=;
        b=Sv2T3Hd/8uPExRUm2Ul4IB5H34dAfbaLAHnz6CMP2l+tJACEBDbnHBb38/DpLFkJFmQCG1emmiw5pGWA3gMrCv0qeSY5FdcRXWxeYadK/Xmlw0K+GiG2rcXHxKS/E++IfkgCmmJfWjKrKgDND9enfP2u1lAGO/TmIk9nV7QsZCQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=Xn9eoZfwtDwKm08T23S9n3BUxrFk/dIgFFwe7qS+r+EpqJlGo3IP2KcVQlx7t2u4KX1nb2cOyzhYF/+oVotJHC+aERYkrIIXLg7KE5Czvei6eR/MTYBTGtT5ZJsCEjgQFrpARVyDqdHzArtq1YemVYstbcE81N9u/p63XvDjZYQ=
Received: by 10.82.158.12 with SMTP id g12mr9352131bue.11.1204233510120;
        Thu, 28 Feb 2008 13:18:30 -0800 (PST)
Received: by 10.82.151.7 with HTTP; Thu, 28 Feb 2008 13:18:30 -0800 (PST)
Message-ID: <359a92830802281318x6f94a006w9961e79c4c9a8e54@mail.gmail.com>
Date: Thu, 28 Feb 2008 16:18:30 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Query regarding usage of Lucene - Filtering folders
In-Reply-To: <36A9B06E6B2FDA4D845E847C36A7AB0298DE32@BLR-MSG-02.i-flex.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_24217_13638907.1204233510116"
References: <36A9B06E6B2FDA4D845E847C36A7AB0298DE32@BLR-MSG-02.i-flex.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_24217_13638907.1204233510116
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Sure, but you have to make it happen. The most straight-forward thing I
can think of is to index (probably UN_TOKENIZED) the
path to the file in a new field when you index the contents.
 Then you can easily restrict things however you want by
including an AND clause with the path fragment you wish to restrict your
search to....

Best
Erick

On Thu, Feb 28, 2008 at 1:58 AM, <Mohammad.Ahmed@iflexsolutions.com> wrote:

> Hi
>
> I would like to join java-user mailing list.
>
> I had a query regarding usage of lucene.
>
>
>
>
>
> I have done the indexing for the files kept in root folder -> subfolder
>
> -> subfolder structure.
>
>
>
>
>
> When I make the search with particular word it returns me the list of
> matching files across the folder structure right from root to the last
> subfolder.
>
>
>
>
>
> I want to restrict search to specific folder only.
>
>
>
> Is it possible with lucene?
>
>
>
> If yes, please suggest me the steps to follow.
>
>
>
>
>
> Thanks,
>
>
>
> Mohammad
>
>
>
>
>
>
>
> DISCLAIMER:
> This message contains privileged and confidential information and is
> intended only for an individual named. If you are not the intended
> recipient, you should not disseminate, distribute, store, print, copy or
> deliver this message. Please notify the sender immediately by e-mail if you
> have received this e-mail by mistake and delete this e-mail from your
> system. E-mail transmission cannot be guaranteed to be secure or error-free
> as information could be intercepted, corrupted, lost, destroyed, arrive late
> or incomplete or contain viruses. The sender, therefore,  does not accept
> liability for any errors or omissions in the contents of this message which
> arise as a result of e-mail transmission. If verification is required,
> please request a hard-copy version.
>

------=_Part_24217_13638907.1204233510116--

From java-user-return-32848-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 28 21:27:03 2008
Return-Path: <java-user-return-32848-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48731 invoked from network); 28 Feb 2008 21:27:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Feb 2008 21:27:02 -0000
Received: (qmail 31623 invoked by uid 500); 28 Feb 2008 21:26:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31584 invoked by uid 500); 28 Feb 2008 21:26:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31573 invoked by uid 99); 28 Feb 2008 21:26:51 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Feb 2008 13:26:51 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of vivextra@gmail.com designates 72.14.204.230 as permitted sender)
Received: from [72.14.204.230] (HELO qb-out-0506.google.com) (72.14.204.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Feb 2008 21:26:17 +0000
Received: by qb-out-0506.google.com with SMTP id o24so806412qba.1
        for <java-user@lucene.apache.org>; Thu, 28 Feb 2008 13:26:26 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        bh=0YJcg4IU1N4slco2ond714RGXfSkZzUUTtZ3nBvIVCU=;
        b=hRiBi3C1jMLS0U/+mV5ue0SjIQDghsY9DVNPwoU1E3RbpbfwcHKOAjQjdATLYrkytKLkToURnX8mmSKCB/oacCA9YxW4bgcRNVRSAoyHFRPoQlCwYGqI8O5MeWHdGlGkbN1WsoV0RgnNikjT4TTZQ3u0pi5sQ0Q+8EhqJxpJJUE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=D9xck9ONNdLtfxxHBc5P/OWiqr1QxkSdIbMZDVgMLexkXOjMCq15qVOP9p1fF8OvFLMPdWjrQgEhfeVOq4n4mtkSUXrcpTy/GoqNq6jPm+4iuq6kXcGVVNqGeQ9cfO6CVJcP4zmVc9TOtt0/nZj4/H+W0VWu4QnFaS5yJmvQhFY=
Received: by 10.115.108.1 with SMTP id k1mr10228210wam.141.1204233985851;
        Thu, 28 Feb 2008 13:26:25 -0800 (PST)
Received: by 10.114.254.5 with HTTP; Thu, 28 Feb 2008 13:26:25 -0800 (PST)
Message-ID: <a206fb7e0802281326t1f99b97aw70d2bdcb5dd1371e@mail.gmail.com>
Date: Thu, 28 Feb 2008 13:26:25 -0800
From: "vivek sar" <vivextra@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: DefaultIndexAccessor
In-Reply-To: <a206fb7e0802151850x7c9383a4t3df54af62b270534@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <1bcb7c7f0802040450k1ca47982v66894276f1c20c2b@mail.gmail.com>
	 <47A74849.3050005@gmail.com>
	 <1bcb7c7f0802041001k165bd530n75e692e635971182@mail.gmail.com>
	 <47A7AFD4.5040908@gmail.com> <47A9470A.4020500@ai.sri.com>
	 <47A9B0CC.1000809@gmail.com> <47A9E258.7020400@ai.sri.com>
	 <a206fb7e0802151638i6cd617a5u11c2414af0690568@mail.gmail.com>
	 <47B642DE.8060103@gmail.com>
	 <a206fb7e0802151850x7c9383a4t3df54af62b270534@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Mark,

  We deployed our indexer (using defaultIndexAccessor) on one of the
production site and getting this error,

Caused by: java.util.concurrent.RejectedExecutionException
	at java.util.concurrent.ThreadPoolExecutor$AbortPolicy.rejectedExecution(Unknown
Source)
	at java.util.concurrent.ThreadPoolExecutor.reject(Unknown Source)
	at java.util.concurrent.ThreadPoolExecutor.execute(Unknown Source)
	at org.apache.lucene.indexaccessor.DefaultIndexAccessor.release(DefaultIndexAccessor.java:514)


This is happening repeatedly every time the indexer runs.

This is running your latest IndexAccessor-021508 code.  Any ideas
(it's kind of urgent for us)?

Thanks,
-vivek


On Fri, Feb 15, 2008 at 6:50 PM, vivek sar <vivextra@gmail.com> wrote:
> Mark,
>
>  Thanks for the quick fix. Actually, it is possible that there might
>  had been simultaneous queries using the MultiSearcher. I assumed it
>  was thread-safe, thus was re-using the same instance. I'll update my
>  application code as well.
>
>  Thanks,
>  -vivek
>
>
>
>  On Feb 15, 2008 5:56 PM, Mark Miller <markrmiller@gmail.com> wrote:
>  > Here is the fix: https://issues.apache.org/jira/browse/LUCENE-1026
>  >
>  >
>  > vivek sar wrote:
>  > > Mark,
>  > >
>  > >    There seems to be some issue with DefaultMultiIndexAccessor.java. I
>  > > got following NPE exception,
>  > >
>  > >      2008-02-13 07:10:28,021 ERROR [http-7501-Processor6] ReportServiceImpl -
>  > > java.lang.NullPointerException
>  > >         at org.apache.lucene.indexaccessor.DefaultMultiIndexAccessor.release(DefaultMultiIndexAccessor.java:89)
>  > >
>  > > Looks like the IndexAccessor for one of the Searcher in the
>  > > MultiSearcher returned null. Not sure how is that possible, any ideas
>  > > how is that possible?
>  > >
>  > > In my case it caused a critical error as the writer thread was stuck
>  > > forever (we found out after couple of days) because of this,
>  > >
>  > > "PS thread 9" prio=1 tid=0x00002aac70eb95d0 nid=0x6ba in Object.wait()
>  > > [0x0000000047533000..0x0000000047533b80]
>  > >         at java.lang.Object.wait(Native Method)
>  > >         - waiting on <0x00002aab3e5c7700> (a
>  > > org.apache.lucene.indexaccessor.DefaultIndexAccessor)
>  > >         at java.lang.Object.wait(Unknown Source)
>  > >         at org.apache.lucene.indexaccessor.DefaultIndexAccessor.waitForReadersAndCloseCached(DefaultIndexAccessor.java:593)
>  > >         at org.apache.lucene.indexaccessor.DefaultIndexAccessor.release(DefaultIndexAccessor.java:510)
>  > >         - locked <0x00002aab3e5c7700> (a
>  > > org.apache.lucene.indexaccessor.DefaultIndexAccessor)
>  > >
>  > > The only way to recover was to re-start the application.
>  > >
>  > > I use both MultiSearcher and IndexSearcher in my application, I've
>  > > looked at your code but not able to pinpoint how can it go wrong? Of
>  > > course, you do have to check for null in the
>  > > MultiIndexAccessor.release, but how could you get null index accessor
>  > > at first place?
>  > >
>  > > I do call IndexAccessor.close during partitioning of indexes, but the
>  > > close should wait for all Searchers to close before doing anything.
>  > >
>  > > Do you have any updates to your code since 02/04/2008?
>  > >
>  > > Thanks,
>  > > -vivek
>  > >
>  > > On Feb 6, 2008 8:37 AM, Jay <yu@ai.sri.com> wrote:
>  > >
>  > >> Thanks for your clarifications, Mark!
>  > >>
>  > >>
>  > >> Jay
>  > >>
>  > >>
>  > >> Mark Miller wrote:
>  > >>
>  > >>>> 5. Although currently IndexSearcher.close() does almost nothing except
>  > >>>> to close the internal index reader, it might be a safer to close
>  > >>>> searcher itself as well in closeCachedSearcher(), just in case, the
>  > >>>> searcher may have other resources to release in the future version of
>  > >>>> Lucene.
>  > >>>>
>  > >>> Didn't catch that "as well". You are right, great idea Jay, thanks.
>  > >>>
>  > >>> ---------------------------------------------------------------------
>  > >>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>  > >>> For additional commands, e-mail: java-user-help@lucene.apache.org
>  > >>>
>  > >> ---------------------------------------------------------------------
>  > >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>  > >> For additional commands, e-mail: java-user-help@lucene.apache.org
>  > >>
>  > >>
>  > >>
>  > >
>  > > ---------------------------------------------------------------------
>  > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>  > > For additional commands, e-mail: java-user-help@lucene.apache.org
>  > >
>  > >
>  > >
>  >
>  > ---------------------------------------------------------------------
>  > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>  > For additional commands, e-mail: java-user-help@lucene.apache.org
>  >
>  >
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32849-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 28 22:09:41 2008
Return-Path: <java-user-return-32849-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67449 invoked from network); 28 Feb 2008 22:09:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Feb 2008 22:09:41 -0000
Received: (qmail 17441 invoked by uid 500); 28 Feb 2008 22:09:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17402 invoked by uid 500); 28 Feb 2008 22:09:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17391 invoked by uid 99); 28 Feb 2008 22:09:29 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Feb 2008 14:09:29 -0800
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=SPF_NEUTRAL,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.5] (HELO spunkymail-a2.g.dreamhost.com) (208.97.132.5)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Feb 2008 22:08:53 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a2.g.dreamhost.com (Postfix) with ESMTP id 81E60880AB
	for <java-user@lucene.apache.org>; Thu, 28 Feb 2008 14:09:02 -0800 (PST)
Message-Id: <AB71F4C4-6340-4145-82F1-B252AA55CC62@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <15745822.post@talk.nabble.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v919.2)
Subject: Re: Vector Space Model: New Similarity Implementation Issues
Date: Thu, 28 Feb 2008 17:08:56 -0500
References: <15696719.post@talk.nabble.com> <003437AD-2007-41B7-9A67-B47CD7CE1E62@apache.org> <15736946.post@talk.nabble.com> <41A806C0-FCB2-46AD-BD7A-E8D944318A54@apache.org> <15745822.post@talk.nabble.com>
X-Mailer: Apple Mail (2.919.2)
X-Virus-Checked: Checked by ClamAV on apache.org

FYI: The mailing list handler strips attachments.

At any rate, sounds like an interesting project.  I don't know how  
easy it will be for you to implement 7 variants of VSM in Lucene given  
the nature of the APIs, but if you do, it might be handy to see your  
changes as a patch.  :-)  Also not quite sure what all those variants  
will help with when it comes to your broader goal, but that isn't for  
me to decide :-)  Seems like your goal is to find the traceability  
stuff, not see if you can figure out how to change Lucene's  
similarity!  To that end, my two cents would be to focus on creating  
the right kinds of queries, analyzers, etc.


-Grant

On Feb 28, 2008, at 3:55 PM, Dharmalingam wrote:

>
> Thanks for your tips. My overall goal is to quickly implement 7  
> variants of
> vector space model using Lucene. You can find these variants in the
> updloaded file.
>
> I am doing all these stuffs for a much broader goal: I am trying to  
> recover
> traceability links from requirements to source code files. I treat  
> every
> requirement as a query. In this problem, I would like to compare these
> collection of algorithms for their relevance.
>
>
>
>
> Grant Ingersoll-6 wrote:
>>
>>
>> On Feb 28, 2008, at 9:00 AM, Dharmalingam wrote:
>>
>>>
>>> Thanks for the reply. Sorry if my explanation is not clear. Yes, you
>>> are
>>> correct the model is based on  Salton's VSM. However, the
>>> calculation of the
>>> term weight and the doc norm is, in my opinion, different from
>>> Lucene. If
>>> you look at the table given in
>>> http://www.miislita.com/term-vector/term-vector-3.html, they
>>> calcuate the
>>> document norm based on the weight wi=tfi*idfi. I looked at the
>>> interfaces of
>>> Similarity and DefaultSimilairty class. I place it below:
>>>
>>> public float lengthNorm(String fieldName, int numTerms) {
>>>   return (float)(1.0 / Math.sqrt(numTerms));
>>> }
>>>
>>> You can see that this lengthNorm for a doc is quite different from
>>> that
>>> website norm calculation.
>>
>> The lengthNorm method is different from the IDF calculation.  In the
>> Similarity class, that is handled by the idf() method.  Length norm  
>> is
>> an attempt to address one of the limitations listed further down in
>> that paper:
>> "Long Documents: Very long documents make similarity measures
>> difficult (vectors with small dot products and high dimensionality)"
>>
>>
>>
>>>
>>>
>>> Similarly, the querynorm interface of DefaultSimilarity class is:
>>>
>>> /** Implemented as <code>1/sqrt(sumOfSquaredWeights)</code>. */
>>> public float queryNorm(float sumOfSquaredWeights) {
>>>   return (float)(1.0 / Math.sqrt(sumOfSquaredWeights));
>>> }
>>>
>>> This is again different the website model.
>>
>> Query norm is an attempt to allow for comparison of scores across
>> queries, but I don't think one should do that anyway.
>>
>>
>>>
>>>
>>> I also have difficulities with tf interface of DefaultSimilarity:
>>> /** Implemented as <code>sqrt(freq)</code>. */
>>> public float tf(float freq) {
>>>   return (float)Math.sqrt(freq);
>>> }
>>>
>>
>> These are all callback methods from within the Scorer classes that
>> each Query uses.  Have a look at TermScorer for how these things get
>> called.
>>
>>
>> Try this as an example:
>>
>> Setup a really simple index with 1 or 2 docs each with a few words.
>> Setup a simple Similarity class where you override all of these
>> methods to return 1 (or some simple default)
>> and then index your documents and do a few queries.
>>
>> Then, have a look at Searcher.explain() to see why a document scores
>> the way it does.  Then, you can work to modify from there.
>>
>> Here's the bigger question:  what is your ultimate goal here?  Are  
>> you
>> just trying to understand Lucene at an academic/programming level or
>> do you have something you are trying to achieve in terms of  
>> relevance?
>>
>> -Grant
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
> http://www.nabble.com/file/p15745822/ieee-sw-rank.pdf ieee-sw-rank.pdf
> -- 
> View this message in context: http://www.nabble.com/Vector-Space-Model%3A-New-Similarity-Implementation-Issues-tp15696719p15745822.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

--------------------------
Grant Ingersoll
http://www.lucenebootcamp.com
Next Training: April 7, 2008 at ApacheCon Europe in Amsterdam

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ






---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32850-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 28 22:19:33 2008
Return-Path: <java-user-return-32850-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75643 invoked from network); 28 Feb 2008 22:19:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Feb 2008 22:19:32 -0000
Received: (qmail 31682 invoked by uid 500); 28 Feb 2008 22:19:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31463 invoked by uid 500); 28 Feb 2008 22:19:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31452 invoked by uid 99); 28 Feb 2008 22:19:21 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Feb 2008 14:19:21 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Feb 2008 22:18:31 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1JUr5Y-0003nI-1b
	for java-user@lucene.apache.org; Thu, 28 Feb 2008 14:18:52 -0800
Message-ID: <15747395.post@talk.nabble.com>
Date: Thu, 28 Feb 2008 14:18:52 -0800 (PST)
From: Dharmalingam <dganesan@fc-md.umd.edu>
To: java-user@lucene.apache.org
Subject: Re: Vector Space Model: New Similarity Implementation Issues
In-Reply-To: <AB71F4C4-6340-4145-82F1-B252AA55CC62@apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: dganesan@fc-md.umd.edu
References: <15696719.post@talk.nabble.com> <003437AD-2007-41B7-9A67-B47CD7CE1E62@apache.org> <15736946.post@talk.nabble.com> <41A806C0-FCB2-46AD-BD7A-E8D944318A54@apache.org> <15745822.post@talk.nabble.com> <AB71F4C4-6340-4145-82F1-B252AA55CC62@apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org


You can find those variants of the vector space model in this interesting
article:
http://ieeexplore.ieee.org/iel1/52/12658/00582976.pdf?tp=&isnumber=&arnumber=582976

Now, I got confirmed with you the current nature of Similarity API's will be
not easy to quickly realize these variants.

Actually, I implemented the earlier web-site model as a separate Java
program, which uses Lucene classes, but not through inherting the Similarity
class. It appears inherting similarity class will not solve my problem of
realization these variant


Grant Ingersoll-6 wrote:
> 
> FYI: The mailing list handler strips attachments.
> 
> At any rate, sounds like an interesting project.  I don't know how  
> easy it will be for you to implement 7 variants of VSM in Lucene given  
> the nature of the APIs, but if you do, it might be handy to see your  
> changes as a patch.  :-)  Also not quite sure what all those variants  
> will help with when it comes to your broader goal, but that isn't for  
> me to decide :-)  Seems like your goal is to find the traceability  
> stuff, not see if you can figure out how to change Lucene's  
> similarity!  To that end, my two cents would be to focus on creating  
> the right kinds of queries, analyzers, etc.
> 
> 
> -Grant
> 
> On Feb 28, 2008, at 3:55 PM, Dharmalingam wrote:
> 
>>
>> Thanks for your tips. My overall goal is to quickly implement 7  
>> variants of
>> vector space model using Lucene. You can find these variants in the
>> updloaded file.
>>
>> I am doing all these stuffs for a much broader goal: I am trying to  
>> recover
>> traceability links from requirements to source code files. I treat  
>> every
>> requirement as a query. In this problem, I would like to compare these
>> collection of algorithms for their relevance.
>>
>>
>>
>>
>> Grant Ingersoll-6 wrote:
>>>
>>>
>>> On Feb 28, 2008, at 9:00 AM, Dharmalingam wrote:
>>>
>>>>
>>>> Thanks for the reply. Sorry if my explanation is not clear. Yes, you
>>>> are
>>>> correct the model is based on  Salton's VSM. However, the
>>>> calculation of the
>>>> term weight and the doc norm is, in my opinion, different from
>>>> Lucene. If
>>>> you look at the table given in
>>>> http://www.miislita.com/term-vector/term-vector-3.html, they
>>>> calcuate the
>>>> document norm based on the weight wi=tfi*idfi. I looked at the
>>>> interfaces of
>>>> Similarity and DefaultSimilairty class. I place it below:
>>>>
>>>> public float lengthNorm(String fieldName, int numTerms) {
>>>>   return (float)(1.0 / Math.sqrt(numTerms));
>>>> }
>>>>
>>>> You can see that this lengthNorm for a doc is quite different from
>>>> that
>>>> website norm calculation.
>>>
>>> The lengthNorm method is different from the IDF calculation.  In the
>>> Similarity class, that is handled by the idf() method.  Length norm  
>>> is
>>> an attempt to address one of the limitations listed further down in
>>> that paper:
>>> "Long Documents: Very long documents make similarity measures
>>> difficult (vectors with small dot products and high dimensionality)"
>>>
>>>
>>>
>>>>
>>>>
>>>> Similarly, the querynorm interface of DefaultSimilarity class is:
>>>>
>>>> /** Implemented as <code>1/sqrt(sumOfSquaredWeights)</code>. */
>>>> public float queryNorm(float sumOfSquaredWeights) {
>>>>   return (float)(1.0 / Math.sqrt(sumOfSquaredWeights));
>>>> }
>>>>
>>>> This is again different the website model.
>>>
>>> Query norm is an attempt to allow for comparison of scores across
>>> queries, but I don't think one should do that anyway.
>>>
>>>
>>>>
>>>>
>>>> I also have difficulities with tf interface of DefaultSimilarity:
>>>> /** Implemented as <code>sqrt(freq)</code>. */
>>>> public float tf(float freq) {
>>>>   return (float)Math.sqrt(freq);
>>>> }
>>>>
>>>
>>> These are all callback methods from within the Scorer classes that
>>> each Query uses.  Have a look at TermScorer for how these things get
>>> called.
>>>
>>>
>>> Try this as an example:
>>>
>>> Setup a really simple index with 1 or 2 docs each with a few words.
>>> Setup a simple Similarity class where you override all of these
>>> methods to return 1 (or some simple default)
>>> and then index your documents and do a few queries.
>>>
>>> Then, have a look at Searcher.explain() to see why a document scores
>>> the way it does.  Then, you can work to modify from there.
>>>
>>> Here's the bigger question:  what is your ultimate goal here?  Are  
>>> you
>>> just trying to understand Lucene at an academic/programming level or
>>> do you have something you are trying to achieve in terms of  
>>> relevance?
>>>
>>> -Grant
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>>
>> http://www.nabble.com/file/p15745822/ieee-sw-rank.pdf ieee-sw-rank.pdf
>> -- 
>> View this message in context:
>> http://www.nabble.com/Vector-Space-Model%3A-New-Similarity-Implementation-Issues-tp15696719p15745822.html
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
> 
> --------------------------
> Grant Ingersoll
> http://www.lucenebootcamp.com
> Next Training: April 7, 2008 at ApacheCon Europe in Amsterdam
> 
> Lucene Helpful Hints:
> http://wiki.apache.org/lucene-java/BasicsOfPerformance
> http://wiki.apache.org/lucene-java/LuceneFAQ
> 
> 
> 
> 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/Vector-Space-Model%3A-New-Similarity-Implementation-Issues-tp15696719p15747395.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32851-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 28 23:12:20 2008
Return-Path: <java-user-return-32851-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97161 invoked from network); 28 Feb 2008 23:12:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Feb 2008 23:12:20 -0000
Received: (qmail 13696 invoked by uid 500); 28 Feb 2008 23:12:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13661 invoked by uid 500); 28 Feb 2008 23:12:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13650 invoked by uid 99); 28 Feb 2008 23:12:08 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Feb 2008 15:12:08 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of vivextra@gmail.com designates 72.14.204.238 as permitted sender)
Received: from [72.14.204.238] (HELO qb-out-0506.google.com) (72.14.204.238)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Feb 2008 23:11:32 +0000
Received: by qb-out-0506.google.com with SMTP id o24so42277qba.1
        for <java-user@lucene.apache.org>; Thu, 28 Feb 2008 15:11:41 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        bh=5ziHicD402j38WsBxdtsZWCWpMaKA9+O8+YeGoyotmA=;
        b=QQBE14NKP5qzZBIAorRlLTxjkY5/c80g+3N5FmOv7skaeecW5brHt+fakzgiPktl6jeIlb+Qnko8SshgZ88z2xyZB/FIv4G1NedE3HhbLF7wX7iS4o0ahTf3y9YG/8B6gi4bnGwz2Q32HqvBFqbPsk0jA6s3tmKqoHz5X0MQcAE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=ub2G+jghdi5M46WoCPttiwnOiCa0GOidbsLwXAjC94R19PX8eeUdOpax9XBnICWjAy2XYW3TS2uggr4OPcj/6CnIsi6bhGxQW89RmRcp5sim5/4amPZI8c8F4wfa0Uwgz1xYH2M7MebwgkgWXXTip8zgLOd9OGhbWZVy4qefVqQ=
Received: by 10.114.209.1 with SMTP id h1mr147539wag.115.1204240300015;
        Thu, 28 Feb 2008 15:11:40 -0800 (PST)
Received: by 10.114.254.5 with HTTP; Thu, 28 Feb 2008 15:11:39 -0800 (PST)
Message-ID: <a206fb7e0802281511s7cf9aa09sc9a50bb101073a38@mail.gmail.com>
Date: Thu, 28 Feb 2008 15:11:39 -0800
From: "vivek sar" <vivextra@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: DefaultIndexAccessor
In-Reply-To: <a206fb7e0802281326t1f99b97aw70d2bdcb5dd1371e@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <1bcb7c7f0802040450k1ca47982v66894276f1c20c2b@mail.gmail.com>
	 <1bcb7c7f0802041001k165bd530n75e692e635971182@mail.gmail.com>
	 <47A7AFD4.5040908@gmail.com> <47A9470A.4020500@ai.sri.com>
	 <47A9B0CC.1000809@gmail.com> <47A9E258.7020400@ai.sri.com>
	 <a206fb7e0802151638i6cd617a5u11c2414af0690568@mail.gmail.com>
	 <47B642DE.8060103@gmail.com>
	 <a206fb7e0802151850x7c9383a4t3df54af62b270534@mail.gmail.com>
	 <a206fb7e0802281326t1f99b97aw70d2bdcb5dd1371e@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Mark,

 Some more information,

      1) I run indexwriter every 5 mins
      2) After every cycle I check if I need to partition (based on
the index size)
      3) In the partition interface,
            a)  I first call close on the index accessor (so all the
searchers can close before I move that index)
                          accessor =
IndexAccessorFactory.getInstance().getAccessor(dir.getFile());
                          accessor.close();
            b) Then I re-open the index accessor,
                           accessor = indexFactory.getAccessor(dir.getFile());
                           accessor.open();
            c) I optimized the my indexes using the Index Writer (that
I get from the accessor).
                           masterWriter = this.indexAccessor.getWriter(false);
                           masterWriter.optimize(optimizeSegment);
            d) Once the optimization is done I release the masterWriter,
                            this.indexAccessor.release(masterWriter);

         Now here is where I get the "RejectedExecutionException".
Reading up little more on this exception,
http://pveentjer.wordpress.com/2008/02/06/are-you-dealing-with-the-rejectedexecutionexception/,
I see this might be happening because something got stuck during the
close cycle, so the ExecutorSerivce is not accepting any new tasks.
I'm not sure how would this happen.

The critical problem is once I get this exception, every release call
throws the same exception (looks like shutdown never gets done).
Because of this my readers are never refreshed and I can not read any
new indexes.

May be I've to check whether the accessor is completely closed before
re-opening?  Could you in your release check whether the pool
(ExecutorService) is in shutdown state? Any thing else I can check?

Thanks,
-vivek

On Thu, Feb 28, 2008 at 1:26 PM, vivek sar <vivextra@gmail.com> wrote:
> Mark,
>
>   We deployed our indexer (using defaultIndexAccessor) on one of the
>  production site and getting this error,
>
>  Caused by: java.util.concurrent.RejectedExecutionException
>         at java.util.concurrent.ThreadPoolExecutor$AbortPolicy.rejectedExecution(Unknown
>  Source)
>         at java.util.concurrent.ThreadPoolExecutor.reject(Unknown Source)
>         at java.util.concurrent.ThreadPoolExecutor.execute(Unknown Source)
>         at org.apache.lucene.indexaccessor.DefaultIndexAccessor.release(DefaultIndexAccessor.java:514)
>
>
>  This is happening repeatedly every time the indexer runs.
>
>  This is running your latest IndexAccessor-021508 code.  Any ideas
>  (it's kind of urgent for us)?
>
>  Thanks,
>  -vivek
>
>
>
>
>  On Fri, Feb 15, 2008 at 6:50 PM, vivek sar <vivextra@gmail.com> wrote:
>  > Mark,
>  >
>  >  Thanks for the quick fix. Actually, it is possible that there might
>  >  had been simultaneous queries using the MultiSearcher. I assumed it
>  >  was thread-safe, thus was re-using the same instance. I'll update my
>  >  application code as well.
>  >
>  >  Thanks,
>  >  -vivek
>  >
>  >
>  >
>  >  On Feb 15, 2008 5:56 PM, Mark Miller <markrmiller@gmail.com> wrote:
>  >  > Here is the fix: https://issues.apache.org/jira/browse/LUCENE-1026
>  >  >
>  >  >
>  >  > vivek sar wrote:
>  >  > > Mark,
>  >  > >
>  >  > >    There seems to be some issue with DefaultMultiIndexAccessor.java. I
>  >  > > got following NPE exception,
>  >  > >
>  >  > >      2008-02-13 07:10:28,021 ERROR [http-7501-Processor6] ReportServiceImpl -
>  >  > > java.lang.NullPointerException
>  >  > >         at org.apache.lucene.indexaccessor.DefaultMultiIndexAccessor.release(DefaultMultiIndexAccessor.java:89)
>  >  > >
>  >  > > Looks like the IndexAccessor for one of the Searcher in the
>  >  > > MultiSearcher returned null. Not sure how is that possible, any ideas
>  >  > > how is that possible?
>  >  > >
>  >  > > In my case it caused a critical error as the writer thread was stuck
>  >  > > forever (we found out after couple of days) because of this,
>  >  > >
>  >  > > "PS thread 9" prio=1 tid=0x00002aac70eb95d0 nid=0x6ba in Object.wait()
>  >  > > [0x0000000047533000..0x0000000047533b80]
>  >  > >         at java.lang.Object.wait(Native Method)
>  >  > >         - waiting on <0x00002aab3e5c7700> (a
>  >  > > org.apache.lucene.indexaccessor.DefaultIndexAccessor)
>  >  > >         at java.lang.Object.wait(Unknown Source)
>  >  > >         at org.apache.lucene.indexaccessor.DefaultIndexAccessor.waitForReadersAndCloseCached(DefaultIndexAccessor.java:593)
>  >  > >         at org.apache.lucene.indexaccessor.DefaultIndexAccessor.release(DefaultIndexAccessor.java:510)
>  >  > >         - locked <0x00002aab3e5c7700> (a
>  >  > > org.apache.lucene.indexaccessor.DefaultIndexAccessor)
>  >  > >
>  >  > > The only way to recover was to re-start the application.
>  >  > >
>  >  > > I use both MultiSearcher and IndexSearcher in my application, I've
>  >  > > looked at your code but not able to pinpoint how can it go wrong? Of
>  >  > > course, you do have to check for null in the
>  >  > > MultiIndexAccessor.release, but how could you get null index accessor
>  >  > > at first place?
>  >  > >
>  >  > > I do call IndexAccessor.close during partitioning of indexes, but the
>  >  > > close should wait for all Searchers to close before doing anything.
>  >  > >
>  >  > > Do you have any updates to your code since 02/04/2008?
>  >  > >
>  >  > > Thanks,
>  >  > > -vivek
>  >  > >
>  >  > > On Feb 6, 2008 8:37 AM, Jay <yu@ai.sri.com> wrote:
>  >  > >
>  >  > >> Thanks for your clarifications, Mark!
>  >  > >>
>  >  > >>
>  >  > >> Jay
>  >  > >>
>  >  > >>
>  >  > >> Mark Miller wrote:
>  >  > >>
>  >  > >>>> 5. Although currently IndexSearcher.close() does almost nothing except
>  >  > >>>> to close the internal index reader, it might be a safer to close
>  >  > >>>> searcher itself as well in closeCachedSearcher(), just in case, the
>  >  > >>>> searcher may have other resources to release in the future version of
>  >  > >>>> Lucene.
>  >  > >>>>
>  >  > >>> Didn't catch that "as well". You are right, great idea Jay, thanks.
>  >  > >>>
>  >  > >>> ---------------------------------------------------------------------
>  >  > >>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>  >  > >>> For additional commands, e-mail: java-user-help@lucene.apache.org
>  >  > >>>
>  >  > >> ---------------------------------------------------------------------
>  >  > >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>  >  > >> For additional commands, e-mail: java-user-help@lucene.apache.org
>  >  > >>
>  >  > >>
>  >  > >>
>  >  > >
>  >  > > ---------------------------------------------------------------------
>  >  > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>  >  > > For additional commands, e-mail: java-user-help@lucene.apache.org
>  >  > >
>  >  > >
>  >  > >
>  >  >
>  >  > ---------------------------------------------------------------------
>  >  > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>  >  > For additional commands, e-mail: java-user-help@lucene.apache.org
>  >  >
>  >  >
>  >
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32852-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 28 23:18:12 2008
Return-Path: <java-user-return-32852-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98509 invoked from network); 28 Feb 2008 23:18:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Feb 2008 23:18:12 -0000
Received: (qmail 23274 invoked by uid 500); 28 Feb 2008 23:18:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23241 invoked by uid 500); 28 Feb 2008 23:18:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23230 invoked by uid 99); 28 Feb 2008 23:18:01 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Feb 2008 15:18:01 -0800
X-ASF-Spam-Status: No, hits=1.5 required=10.0
	tests=SPF_PASS,WEIRD_PORT
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [17.148.16.73] (HELO smtpoutm.mac.com) (17.148.16.73)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Feb 2008 23:17:24 +0000
Received: from mac.com (asmtp001-s [10.150.69.64])
	by smtpoutm.mac.com (Xserve/smtpout010/MantshX 4.0) with ESMTP id m1SNHXm7012888
	for <java-user@lucene.apache.org>; Thu, 28 Feb 2008 15:17:33 -0800 (PST)
Received: from [192.168.1.4] (adsl-89-217-31-168.adslplus.ch [89.217.31.168])
	(authenticated bits=0)
	by mac.com (Xserve/asmtp001/MantshX 4.0) with ESMTP id m1SNHTCp002201
	(version=TLSv1/SSLv3 cipher=AES128-SHA bits=128 verify=NO)
	for <java-user@lucene.apache.org>; Thu, 28 Feb 2008 15:17:32 -0800 (PST)
Message-Id: <17331C3E-5774-4F5E-B09E-C9950767BA9D@mac.com>
From: Petite Abeille <petite_abeille@mac.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: quoted-printable
Mime-Version: 1.0 (Apple Message framework v919.2)
Subject: SOC: Lulu, a Lua implementation of Lucene
Date: Fri, 29 Feb 2008 00:17:28 +0100
X-Mailer: Apple Mail (2.919.2)
X-Virus-Checked: Checked by ClamAV on apache.org

A proposal for a Lua entry for the "Google Summer of Code" '08:

lu=C2=B7lu (l=C5=AB'l=C5=AB) n. Slang.

A remarkable person, object, or idea.

A very attractive or seductive looking woman.

A Lua implementation of Lucene.


Skimpy details bellow:

http://svr225.stepx.com:3388/lulu
http://lua-users.org/wiki/GoogleSummerOfCodeIdeas


Feel free to drop by the Lua mailing list if you are interested.

http://www.lua.org/lua-l.html


Cheers,

PA.

 =20=

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32853-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 28 23:59:50 2008
Return-Path: <java-user-return-32853-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10794 invoked from network); 28 Feb 2008 23:59:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Feb 2008 23:59:50 -0000
Received: (qmail 70548 invoked by uid 500); 28 Feb 2008 23:59:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70513 invoked by uid 500); 28 Feb 2008 23:59:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70502 invoked by uid 99); 28 Feb 2008 23:59:38 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Feb 2008 15:59:38 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of markrmiller@gmail.com designates 72.14.204.226 as permitted sender)
Received: from [72.14.204.226] (HELO qb-out-0506.google.com) (72.14.204.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Feb 2008 23:59:02 +0000
Received: by qb-out-0506.google.com with SMTP id o21so5183045qba.9
        for <java-user@lucene.apache.org>; Thu, 28 Feb 2008 15:59:11 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        bh=Yr9ohck/I7h+JIuSytJPsk32PuLvysmwn1P5Qxd4zqM=;
        b=MQFTiqGC+8AMCAH1GacTxE9TmL1JjEAwzRSVeH8OdLJ1hp3CYn8m21R7MR2G2N5b/UijfYHPzqcsToarVu3LiBkaEU/mqGNteZLh8FnqtR2pAFidHku9egfb5RND/OVVKQmWHmkBFzueUnUISDanGGzgSiUQ3cg91vdxsLOWM2k=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=hvy5anNxLu4a09npRMBIVdA+k3ne4IA4AOrl0zfrnUxJzX5XhIKqckIystOsUOShTfXkOm4FoCyFjD/ndKI4fQE9z3h1vmVDs/n9153WSe0toyYv+/yrurl9XxbteW378tH4r6/opnauXPnX75fWJzzR7IQWnMlr1sb4zQ4QtYI=
Received: by 10.65.234.2 with SMTP id l2mr16099983qbr.37.1204243151076;
        Thu, 28 Feb 2008 15:59:11 -0800 (PST)
Received: from ?192.168.1.102? ( [69.124.234.149])
        by mx.google.com with ESMTPS id e19sm8280560qbe.6.2008.02.28.15.59.09
        (version=SSLv3 cipher=RC4-MD5);
        Thu, 28 Feb 2008 15:59:09 -0800 (PST)
Message-ID: <47C74A06.8050109@gmail.com>
Date: Thu, 28 Feb 2008 18:55:50 -0500
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.12 (Windows/20080213)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: DefaultIndexAccessor
References: <1bcb7c7f0802040450k1ca47982v66894276f1c20c2b@mail.gmail.com>	 <1bcb7c7f0802041001k165bd530n75e692e635971182@mail.gmail.com>	 <47A7AFD4.5040908@gmail.com> <47A9470A.4020500@ai.sri.com>	 <47A9B0CC.1000809@gmail.com> <47A9E258.7020400@ai.sri.com>	 <a206fb7e0802151638i6cd617a5u11c2414af0690568@mail.gmail.com>	 <47B642DE.8060103@gmail.com>	 <a206fb7e0802151850x7c9383a4t3df54af62b270534@mail.gmail.com>	 <a206fb7e0802281326t1f99b97aw70d2bdcb5dd1371e@mail.gmail.com> <a206fb7e0802281511s7cf9aa09sc9a50bb101073a38@mail.gmail.com>
In-Reply-To: <a206fb7e0802281511s7cf9aa09sc9a50bb101073a38@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hey vivek,

Sorry you ran into this. I believe the problem is that I had just not 
foreseen the use case of closing and then reopening the Accessor. The 
only time I ever close the Accessors is when I am shutting down the JVM.

What do you do about all of the IndexAccessor requests while it is in a 
closed state? Could their be a better way of accomplishing this without 
closing the Accessor? Would a new method that just stalled everything be 
better? Then you wouldn't have to recreate any resources possibly?

In any case, the problem is that after the Executor gets shutdown it is 
not reopened in the open method. I can certainly change this, but I need 
to look for any other issues as well. I will add an open after a 
shutdown test to investigate. I am going to think about the issue 
further and I will get back to you soon.

Thanks for all of the details.

- Mark

vivek sar wrote:
> Mark,
>
>  Some more information,
>
>       1) I run indexwriter every 5 mins
>       2) After every cycle I check if I need to partition (based on
> the index size)
>       3) In the partition interface,
>             a)  I first call close on the index accessor (so all the
> searchers can close before I move that index)
>                           accessor =
> IndexAccessorFactory.getInstance().getAccessor(dir.getFile());
>                           accessor.close();
>             b) Then I re-open the index accessor,
>                            accessor = indexFactory.getAccessor(dir.getFile());
>                            accessor.open();
>             c) I optimized the my indexes using the Index Writer (that
> I get from the accessor).
>                            masterWriter = this.indexAccessor.getWriter(false);
>                            masterWriter.optimize(optimizeSegment);
>             d) Once the optimization is done I release the masterWriter,
>                             this.indexAccessor.release(masterWriter);
>
>          Now here is where I get the "RejectedExecutionException".
> Reading up little more on this exception,
> http://pveentjer.wordpress.com/2008/02/06/are-you-dealing-with-the-rejectedexecutionexception/,
> I see this might be happening because something got stuck during the
> close cycle, so the ExecutorSerivce is not accepting any new tasks.
> I'm not sure how would this happen.
>
> The critical problem is once I get this exception, every release call
> throws the same exception (looks like shutdown never gets done).
> Because of this my readers are never refreshed and I can not read any
> new indexes.
>
> May be I've to check whether the accessor is completely closed before
> re-opening?  Could you in your release check whether the pool
> (ExecutorService) is in shutdown state? Any thing else I can check?
>
> Thanks,
> -vivek
>
> On Thu, Feb 28, 2008 at 1:26 PM, vivek sar <vivextra@gmail.com> wrote:
>   
>> Mark,
>>
>>   We deployed our indexer (using defaultIndexAccessor) on one of the
>>  production site and getting this error,
>>
>>  Caused by: java.util.concurrent.RejectedExecutionException
>>         at java.util.concurrent.ThreadPoolExecutor$AbortPolicy.rejectedExecution(Unknown
>>  Source)
>>         at java.util.concurrent.ThreadPoolExecutor.reject(Unknown Source)
>>         at java.util.concurrent.ThreadPoolExecutor.execute(Unknown Source)
>>         at org.apache.lucene.indexaccessor.DefaultIndexAccessor.release(DefaultIndexAccessor.java:514)
>>
>>
>>  This is happening repeatedly every time the indexer runs.
>>
>>  This is running your latest IndexAccessor-021508 code.  Any ideas
>>  (it's kind of urgent for us)?
>>
>>  Thanks,
>>  -vivek
>>
>>
>>
>>
>>  On Fri, Feb 15, 2008 at 6:50 PM, vivek sar <vivextra@gmail.com> wrote:
>>  > Mark,
>>  >
>>  >  Thanks for the quick fix. Actually, it is possible that there might
>>  >  had been simultaneous queries using the MultiSearcher. I assumed it
>>  >  was thread-safe, thus was re-using the same instance. I'll update my
>>  >  application code as well.
>>  >
>>  >  Thanks,
>>  >  -vivek
>>  >
>>  >
>>  >
>>  >  On Feb 15, 2008 5:56 PM, Mark Miller <markrmiller@gmail.com> wrote:
>>  >  > Here is the fix: https://issues.apache.org/jira/browse/LUCENE-1026
>>  >  >
>>  >  >
>>  >  > vivek sar wrote:
>>  >  > > Mark,
>>  >  > >
>>  >  > >    There seems to be some issue with DefaultMultiIndexAccessor.java. I
>>  >  > > got following NPE exception,
>>  >  > >
>>  >  > >      2008-02-13 07:10:28,021 ERROR [http-7501-Processor6] ReportServiceImpl -
>>  >  > > java.lang.NullPointerException
>>  >  > >         at org.apache.lucene.indexaccessor.DefaultMultiIndexAccessor.release(DefaultMultiIndexAccessor.java:89)
>>  >  > >
>>  >  > > Looks like the IndexAccessor for one of the Searcher in the
>>  >  > > MultiSearcher returned null. Not sure how is that possible, any ideas
>>  >  > > how is that possible?
>>  >  > >
>>  >  > > In my case it caused a critical error as the writer thread was stuck
>>  >  > > forever (we found out after couple of days) because of this,
>>  >  > >
>>  >  > > "PS thread 9" prio=1 tid=0x00002aac70eb95d0 nid=0x6ba in Object.wait()
>>  >  > > [0x0000000047533000..0x0000000047533b80]
>>  >  > >         at java.lang.Object.wait(Native Method)
>>  >  > >         - waiting on <0x00002aab3e5c7700> (a
>>  >  > > org.apache.lucene.indexaccessor.DefaultIndexAccessor)
>>  >  > >         at java.lang.Object.wait(Unknown Source)
>>  >  > >         at org.apache.lucene.indexaccessor.DefaultIndexAccessor.waitForReadersAndCloseCached(DefaultIndexAccessor.java:593)
>>  >  > >         at org.apache.lucene.indexaccessor.DefaultIndexAccessor.release(DefaultIndexAccessor.java:510)
>>  >  > >         - locked <0x00002aab3e5c7700> (a
>>  >  > > org.apache.lucene.indexaccessor.DefaultIndexAccessor)
>>  >  > >
>>  >  > > The only way to recover was to re-start the application.
>>  >  > >
>>  >  > > I use both MultiSearcher and IndexSearcher in my application, I've
>>  >  > > looked at your code but not able to pinpoint how can it go wrong? Of
>>  >  > > course, you do have to check for null in the
>>  >  > > MultiIndexAccessor.release, but how could you get null index accessor
>>  >  > > at first place?
>>  >  > >
>>  >  > > I do call IndexAccessor.close during partitioning of indexes, but the
>>  >  > > close should wait for all Searchers to close before doing anything.
>>  >  > >
>>  >  > > Do you have any updates to your code since 02/04/2008?
>>  >  > >
>>  >  > > Thanks,
>>  >  > > -vivek
>>  >  > >
>>  >  > > On Feb 6, 2008 8:37 AM, Jay <yu@ai.sri.com> wrote:
>>  >  > >
>>  >  > >> Thanks for your clarifications, Mark!
>>  >  > >>
>>  >  > >>
>>  >  > >> Jay
>>  >  > >>
>>  >  > >>
>>  >  > >> Mark Miller wrote:
>>  >  > >>
>>  >  > >>>> 5. Although currently IndexSearcher.close() does almost nothing except
>>  >  > >>>> to close the internal index reader, it might be a safer to close
>>  >  > >>>> searcher itself as well in closeCachedSearcher(), just in case, the
>>  >  > >>>> searcher may have other resources to release in the future version of
>>  >  > >>>> Lucene.
>>  >  > >>>>
>>  >  > >>> Didn't catch that "as well". You are right, great idea Jay, thanks.
>>  >  > >>>
>>  >  > >>> ---------------------------------------------------------------------
>>  >  > >>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>  >  > >>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>  >  > >>>
>>  >  > >> ---------------------------------------------------------------------
>>  >  > >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>  >  > >> For additional commands, e-mail: java-user-help@lucene.apache.org
>>  >  > >>
>>  >  > >>
>>  >  > >>
>>  >  > >
>>  >  > > ---------------------------------------------------------------------
>>  >  > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>  >  > > For additional commands, e-mail: java-user-help@lucene.apache.org
>>  >  > >
>>  >  > >
>>  >  > >
>>  >  >
>>  >  > ---------------------------------------------------------------------
>>  >  > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>  >  > For additional commands, e-mail: java-user-help@lucene.apache.org
>>  >  >
>>  >  >
>>  >
>>
>>     
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>   

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32854-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 29 00:49:54 2008
Return-Path: <java-user-return-32854-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 28071 invoked from network); 29 Feb 2008 00:49:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Feb 2008 00:49:54 -0000
Received: (qmail 16638 invoked by uid 500); 29 Feb 2008 00:49:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16610 invoked by uid 500); 29 Feb 2008 00:49:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16599 invoked by uid 99); 29 Feb 2008 00:49:42 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Feb 2008 16:49:42 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of vivextra@gmail.com designates 72.14.204.239 as permitted sender)
Received: from [72.14.204.239] (HELO qb-out-0506.google.com) (72.14.204.239)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Feb 2008 00:49:06 +0000
Received: by qb-out-0506.google.com with SMTP id o21so5205611qba.9
        for <java-user@lucene.apache.org>; Thu, 28 Feb 2008 16:49:15 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        bh=kxWlDRp2TA9dSAJY044+3mU805rsKduW9TLgDkUR4IM=;
        b=SBHBpG2h7iMpte8OTWe1mYUH+G4iCUqPIp+vYSdKfOcBTB/EaT58UEMUHMx3QAM9aApwvGBUYjDhHUR+pF+vc3F9UrBLJyccBD/phC+wdBM9neXRU5X9RanDP3dJ7sE1dPWhlX/I8RbbItLl29iEctim4+PdEPdHFFkdxU+zJoc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=UxSRNAho7dPxOXmRE40iqPjX03xbOt5SKoGkW14P8V7jd7AjoG4NFnHElZNem69B7m4MFUJ5+eFQ2/vcvHaqriQ4mb9ULKhdYPpkQIUkvcQZDh1SYurLZxVkafbwT26dTXv/aEJ6rEWJRyYEvVpn985pvXmQHP4UhuPzZguwwtk=
Received: by 10.114.73.1 with SMTP id v1mr10507414waa.16.1204246153594;
        Thu, 28 Feb 2008 16:49:13 -0800 (PST)
Received: by 10.114.254.5 with HTTP; Thu, 28 Feb 2008 16:49:13 -0800 (PST)
Message-ID: <a206fb7e0802281649u17798cb6y84448fa4bc7b48c7@mail.gmail.com>
Date: Thu, 28 Feb 2008 16:49:13 -0800
From: "vivek sar" <vivextra@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: DefaultIndexAccessor
In-Reply-To: <47C74A06.8050109@gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <1bcb7c7f0802040450k1ca47982v66894276f1c20c2b@mail.gmail.com>
	 <47A9470A.4020500@ai.sri.com> <47A9B0CC.1000809@gmail.com>
	 <47A9E258.7020400@ai.sri.com>
	 <a206fb7e0802151638i6cd617a5u11c2414af0690568@mail.gmail.com>
	 <47B642DE.8060103@gmail.com>
	 <a206fb7e0802151850x7c9383a4t3df54af62b270534@mail.gmail.com>
	 <a206fb7e0802281326t1f99b97aw70d2bdcb5dd1371e@mail.gmail.com>
	 <a206fb7e0802281511s7cf9aa09sc9a50bb101073a38@mail.gmail.com>
	 <47C74A06.8050109@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Mark,

    Yes, I think that's what precisely is happening. I call
accessor.close, which shuts down all the ExecutorService. I was
assuming the accessor.open would re-open it (I think that's how it
worked in older version of your IndexAccessor).

Basically, I need a way to stop (or close) all the IndexSearchers for
a specific IndexAccessor and do not allow them to re-open until I flag
the indexAccessor that it's safe to give out new index searchers. So I
am able to optimize the index, rename it and move it to somewhere else
during partitioning. Right now without closing the searchers I can not
rename the index as it wouldn't allow me to if some other thread has a
file handle to that index.

I don't know if there is a way to get an exclusive writer thread to an
index using IndexAccessor. I would think a better way for me would be
to,

    1) Call a method on IndexAccessor, let's say stopIndex() - This
would clear all the caches (stop all the open searchers, readers and
writers) and flag the index accessor so no other reader or writer
thread can be taken from this index accessor
    2) I use my own (not using IndexAccessor) IndexWriter to do
optimization on the index that needs to be partitioned and release it
    3) Once done with partition, I call another method on
IndexAccessor, let's say startIndex()   -> This will simply flag so
now the IndexAccessor would allow to get searchers, readers and
writers. The start would have to reopen all the searchers and readers.

Not sure if this is a good design for what I am trying to do. This
would require two new methods on IndexAccessor - stopIndex() and
startIndex(). Any thoughts?

Thanks,
-vivek


On Thu, Feb 28, 2008 at 3:55 PM, Mark Miller <markrmiller@gmail.com> wrote:
> Hey vivek,
>
>  Sorry you ran into this. I believe the problem is that I had just not
>  foreseen the use case of closing and then reopening the Accessor. The
>  only time I ever close the Accessors is when I am shutting down the JVM.
>
>  What do you do about all of the IndexAccessor requests while it is in a
>  closed state? Could their be a better way of accomplishing this without
>  closing the Accessor? Would a new method that just stalled everything be
>  better? Then you wouldn't have to recreate any resources possibly?
>
>  In any case, the problem is that after the Executor gets shutdown it is
>  not reopened in the open method. I can certainly change this, but I need
>  to look for any other issues as well. I will add an open after a
>  shutdown test to investigate. I am going to think about the issue
>  further and I will get back to you soon.
>
>  Thanks for all of the details.
>
>  - Mark
>
>
>
>  vivek sar wrote:
>  > Mark,
>  >
>  >  Some more information,
>  >
>  >       1) I run indexwriter every 5 mins
>  >       2) After every cycle I check if I need to partition (based on
>  > the index size)
>  >       3) In the partition interface,
>  >             a)  I first call close on the index accessor (so all the
>  > searchers can close before I move that index)
>  >                           accessor =
>  > IndexAccessorFactory.getInstance().getAccessor(dir.getFile());
>  >                           accessor.close();
>  >             b) Then I re-open the index accessor,
>  >                            accessor = indexFactory.getAccessor(dir.getFile());
>  >                            accessor.open();
>  >             c) I optimized the my indexes using the Index Writer (that
>  > I get from the accessor).
>  >                            masterWriter = this.indexAccessor.getWriter(false);
>  >                            masterWriter.optimize(optimizeSegment);
>  >             d) Once the optimization is done I release the masterWriter,
>  >                             this.indexAccessor.release(masterWriter);
>  >
>  >          Now here is where I get the "RejectedExecutionException".
>  > Reading up little more on this exception,
>  > http://pveentjer.wordpress.com/2008/02/06/are-you-dealing-with-the-rejectedexecutionexception/,
>  > I see this might be happening because something got stuck during the
>  > close cycle, so the ExecutorSerivce is not accepting any new tasks.
>  > I'm not sure how would this happen.
>  >
>  > The critical problem is once I get this exception, every release call
>  > throws the same exception (looks like shutdown never gets done).
>  > Because of this my readers are never refreshed and I can not read any
>  > new indexes.
>  >
>  > May be I've to check whether the accessor is completely closed before
>  > re-opening?  Could you in your release check whether the pool
>  > (ExecutorService) is in shutdown state? Any thing else I can check?
>  >
>  > Thanks,
>  > -vivek
>  >
>  > On Thu, Feb 28, 2008 at 1:26 PM, vivek sar <vivextra@gmail.com> wrote:
>  >
>  >> Mark,
>  >>
>  >>   We deployed our indexer (using defaultIndexAccessor) on one of the
>  >>  production site and getting this error,
>  >>
>  >>  Caused by: java.util.concurrent.RejectedExecutionException
>  >>         at java.util.concurrent.ThreadPoolExecutor$AbortPolicy.rejectedExecution(Unknown
>  >>  Source)
>  >>         at java.util.concurrent.ThreadPoolExecutor.reject(Unknown Source)
>  >>         at java.util.concurrent.ThreadPoolExecutor.execute(Unknown Source)
>  >>         at org.apache.lucene.indexaccessor.DefaultIndexAccessor.release(DefaultIndexAccessor.java:514)
>  >>
>  >>
>  >>  This is happening repeatedly every time the indexer runs.
>  >>
>  >>  This is running your latest IndexAccessor-021508 code.  Any ideas
>  >>  (it's kind of urgent for us)?
>  >>
>  >>  Thanks,
>  >>  -vivek
>  >>
>  >>
>  >>
>  >>
>  >>  On Fri, Feb 15, 2008 at 6:50 PM, vivek sar <vivextra@gmail.com> wrote:
>  >>  > Mark,
>  >>  >
>  >>  >  Thanks for the quick fix. Actually, it is possible that there might
>  >>  >  had been simultaneous queries using the MultiSearcher. I assumed it
>  >>  >  was thread-safe, thus was re-using the same instance. I'll update my
>  >>  >  application code as well.
>  >>  >
>  >>  >  Thanks,
>  >>  >  -vivek
>  >>  >
>  >>  >
>  >>  >
>  >>  >  On Feb 15, 2008 5:56 PM, Mark Miller <markrmiller@gmail.com> wrote:
>  >>  >  > Here is the fix: https://issues.apache.org/jira/browse/LUCENE-1026
>  >>  >  >
>  >>  >  >
>  >>  >  > vivek sar wrote:
>  >>  >  > > Mark,
>  >>  >  > >
>  >>  >  > >    There seems to be some issue with DefaultMultiIndexAccessor.java. I
>  >>  >  > > got following NPE exception,
>  >>  >  > >
>  >>  >  > >      2008-02-13 07:10:28,021 ERROR [http-7501-Processor6] ReportServiceImpl -
>  >>  >  > > java.lang.NullPointerException
>  >>  >  > >         at org.apache.lucene.indexaccessor.DefaultMultiIndexAccessor.release(DefaultMultiIndexAccessor.java:89)
>  >>  >  > >
>  >>  >  > > Looks like the IndexAccessor for one of the Searcher in the
>  >>  >  > > MultiSearcher returned null. Not sure how is that possible, any ideas
>  >>  >  > > how is that possible?
>  >>  >  > >
>  >>  >  > > In my case it caused a critical error as the writer thread was stuck
>  >>  >  > > forever (we found out after couple of days) because of this,
>  >>  >  > >
>  >>  >  > > "PS thread 9" prio=1 tid=0x00002aac70eb95d0 nid=0x6ba in Object.wait()
>  >>  >  > > [0x0000000047533000..0x0000000047533b80]
>  >>  >  > >         at java.lang.Object.wait(Native Method)
>  >>  >  > >         - waiting on <0x00002aab3e5c7700> (a
>  >>  >  > > org.apache.lucene.indexaccessor.DefaultIndexAccessor)
>  >>  >  > >         at java.lang.Object.wait(Unknown Source)
>  >>  >  > >         at org.apache.lucene.indexaccessor.DefaultIndexAccessor.waitForReadersAndCloseCached(DefaultIndexAccessor.java:593)
>  >>  >  > >         at org.apache.lucene.indexaccessor.DefaultIndexAccessor.release(DefaultIndexAccessor.java:510)
>  >>  >  > >         - locked <0x00002aab3e5c7700> (a
>  >>  >  > > org.apache.lucene.indexaccessor.DefaultIndexAccessor)
>  >>  >  > >
>  >>  >  > > The only way to recover was to re-start the application.
>  >>  >  > >
>  >>  >  > > I use both MultiSearcher and IndexSearcher in my application, I've
>  >>  >  > > looked at your code but not able to pinpoint how can it go wrong? Of
>  >>  >  > > course, you do have to check for null in the
>  >>  >  > > MultiIndexAccessor.release, but how could you get null index accessor
>  >>  >  > > at first place?
>  >>  >  > >
>  >>  >  > > I do call IndexAccessor.close during partitioning of indexes, but the
>  >>  >  > > close should wait for all Searchers to close before doing anything.
>  >>  >  > >
>  >>  >  > > Do you have any updates to your code since 02/04/2008?
>  >>  >  > >
>  >>  >  > > Thanks,
>  >>  >  > > -vivek
>  >>  >  > >
>  >>  >  > > On Feb 6, 2008 8:37 AM, Jay <yu@ai.sri.com> wrote:
>  >>  >  > >
>  >>  >  > >> Thanks for your clarifications, Mark!
>  >>  >  > >>
>  >>  >  > >>
>  >>  >  > >> Jay
>  >>  >  > >>
>  >>  >  > >>
>  >>  >  > >> Mark Miller wrote:
>  >>  >  > >>
>  >>  >  > >>>> 5. Although currently IndexSearcher.close() does almost nothing except
>  >>  >  > >>>> to close the internal index reader, it might be a safer to close
>  >>  >  > >>>> searcher itself as well in closeCachedSearcher(), just in case, the
>  >>  >  > >>>> searcher may have other resources to release in the future version of
>  >>  >  > >>>> Lucene.
>  >>  >  > >>>>
>  >>  >  > >>> Didn't catch that "as well". You are right, great idea Jay, thanks.
>  >>  >  > >>>
>  >>  >  > >>> ---------------------------------------------------------------------
>  >>  >  > >>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>  >>  >  > >>> For additional commands, e-mail: java-user-help@lucene.apache.org
>  >>  >  > >>>
>  >>  >  > >> ---------------------------------------------------------------------
>  >>  >  > >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>  >>  >  > >> For additional commands, e-mail: java-user-help@lucene.apache.org
>  >>  >  > >>
>  >>  >  > >>
>  >>  >  > >>
>  >>  >  > >
>  >>  >  > > ---------------------------------------------------------------------
>  >>  >  > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>  >>  >  > > For additional commands, e-mail: java-user-help@lucene.apache.org
>  >>  >  > >
>  >>  >  > >
>  >>  >  > >
>  >>  >  >
>  >>  >  > ---------------------------------------------------------------------
>  >>  >  > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>  >>  >  > For additional commands, e-mail: java-user-help@lucene.apache.org
>  >>  >  >
>  >>  >  >
>  >>  >
>  >>
>  >>
>  >
>  > ---------------------------------------------------------------------
>  > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>  > For additional commands, e-mail: java-user-help@lucene.apache.org
>  >
>  >
>  >
>
>  ---------------------------------------------------------------------
>  To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>  For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32855-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 29 01:05:31 2008
Return-Path: <java-user-return-32855-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31806 invoked from network); 29 Feb 2008 01:05:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Feb 2008 01:05:31 -0000
Received: (qmail 33607 invoked by uid 500); 29 Feb 2008 01:05:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33576 invoked by uid 500); 29 Feb 2008 01:05:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33565 invoked by uid 99); 29 Feb 2008 01:05:19 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Feb 2008 17:05:19 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of markrmiller@gmail.com designates 72.14.204.238 as permitted sender)
Received: from [72.14.204.238] (HELO qb-out-0506.google.com) (72.14.204.238)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Feb 2008 01:04:43 +0000
Received: by qb-out-0506.google.com with SMTP id o21so5212672qba.9
        for <java-user@lucene.apache.org>; Thu, 28 Feb 2008 17:04:52 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        bh=kDlgXMnEDuZu/wCG5ArspVvBcYw7BdljhQFleU6yVAk=;
        b=sILUw5Gb0/DON3lB325M752k27kAaPnIhUuvBuBzJpLXEs9uZOi+dO1fHt+nakqQ9Eikg4KkN1lPJylU4X2eaqo6Bg37pNBb/zSsvr56ucdr3uEAM5PGPWW/xRFjilshFoP4GDZyCg5uq4RDi6KO/Flfr6W4dkunya2JsY8Sb68=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=pXfhrJaA2PPxxm/Tavu8RSNEdQqXLkoEiueUb0LoEXquEHJW5BENd9GRLDEJsU3ife9r/0n+onKVaRheojKzF87vXzyyYzjZo9blpUHT8WPmtqfLEenU3iPnbaczAQ0KOnt6Qk343OSBhV9aJ/R+V2raWTBbCUA04p70omHi27E=
Received: by 10.65.235.7 with SMTP id m7mr16218960qbr.33.1204247086077;
        Thu, 28 Feb 2008 17:04:46 -0800 (PST)
Received: from ?192.168.1.102? ( [69.124.234.149])
        by mx.google.com with ESMTPS id e17sm227253qba.1.2008.02.28.17.04.44
        (version=SSLv3 cipher=RC4-MD5);
        Thu, 28 Feb 2008 17:04:44 -0800 (PST)
Message-ID: <47C75965.7000703@gmail.com>
Date: Thu, 28 Feb 2008 20:01:25 -0500
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.12 (Windows/20080213)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: DefaultIndexAccessor
References: <1bcb7c7f0802040450k1ca47982v66894276f1c20c2b@mail.gmail.com>	 <47A9470A.4020500@ai.sri.com> <47A9B0CC.1000809@gmail.com>	 <47A9E258.7020400@ai.sri.com>	 <a206fb7e0802151638i6cd617a5u11c2414af0690568@mail.gmail.com>	 <47B642DE.8060103@gmail.com>	 <a206fb7e0802151850x7c9383a4t3df54af62b270534@mail.gmail.com>	 <a206fb7e0802281326t1f99b97aw70d2bdcb5dd1371e@mail.gmail.com>	 <a206fb7e0802281511s7cf9aa09sc9a50bb101073a38@mail.gmail.com>	 <47C74A06.8050109@gmail.com> <a206fb7e0802281649u17798cb6y84448fa4bc7b48c7@mail.gmail.com>
In-Reply-To: <a206fb7e0802281649u17798cb6y84448fa4bc7b48c7@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

I added the Thread Pool recently, so things did probably work before 
that. I am certainly willing to put the Thread Pool init in the open 
call instead of the constructor.

As for the best method to use, I was thinking of something along the 
same lines as what you suggest.

One of the decisions will be how to handle shutting down method calls on 
the Accessor. Throw an Exception or block?

In any case, I will put up code that makes the above change and your 
code should work as it did. I'll be sure to add this to the test cases.


Just as a personal interest question, what has led you to setup your 
index this way? Adding partitions as it grows that is.

- Mark

vivek sar wrote:
> Mark,
>
>     Yes, I think that's what precisely is happening. I call
> accessor.close, which shuts down all the ExecutorService. I was
> assuming the accessor.open would re-open it (I think that's how it
> worked in older version of your IndexAccessor).
>
> Basically, I need a way to stop (or close) all the IndexSearchers for
> a specific IndexAccessor and do not allow them to re-open until I flag
> the indexAccessor that it's safe to give out new index searchers. So I
> am able to optimize the index, rename it and move it to somewhere else
> during partitioning. Right now without closing the searchers I can not
> rename the index as it wouldn't allow me to if some other thread has a
> file handle to that index.
>
> I don't know if there is a way to get an exclusive writer thread to an
> index using IndexAccessor. I would think a better way for me would be
> to,
>
>     1) Call a method on IndexAccessor, let's say stopIndex() - This
> would clear all the caches (stop all the open searchers, readers and
> writers) and flag the index accessor so no other reader or writer
> thread can be taken from this index accessor
>     2) I use my own (not using IndexAccessor) IndexWriter to do
> optimization on the index that needs to be partitioned and release it
>     3) Once done with partition, I call another method on
> IndexAccessor, let's say startIndex()   -> This will simply flag so
> now the IndexAccessor would allow to get searchers, readers and
> writers. The start would have to reopen all the searchers and readers.
>
> Not sure if this is a good design for what I am trying to do. This
> would require two new methods on IndexAccessor - stopIndex() and
> startIndex(). Any thoughts?
>
> Thanks,
> -vivek
>
>
> On Thu, Feb 28, 2008 at 3:55 PM, Mark Miller <markrmiller@gmail.com> wrote:
>   
>> Hey vivek,
>>
>>  Sorry you ran into this. I believe the problem is that I had just not
>>  foreseen the use case of closing and then reopening the Accessor. The
>>  only time I ever close the Accessors is when I am shutting down the JVM.
>>
>>  What do you do about all of the IndexAccessor requests while it is in a
>>  closed state? Could their be a better way of accomplishing this without
>>  closing the Accessor? Would a new method that just stalled everything be
>>  better? Then you wouldn't have to recreate any resources possibly?
>>
>>  In any case, the problem is that after the Executor gets shutdown it is
>>  not reopened in the open method. I can certainly change this, but I need
>>  to look for any other issues as well. I will add an open after a
>>  shutdown test to investigate. I am going to think about the issue
>>  further and I will get back to you soon.
>>
>>  Thanks for all of the details.
>>
>>  - Mark
>>
>>
>>
>>  vivek sar wrote:
>>  > Mark,
>>  >
>>  >  Some more information,
>>  >
>>  >       1) I run indexwriter every 5 mins
>>  >       2) After every cycle I check if I need to partition (based on
>>  > the index size)
>>  >       3) In the partition interface,
>>  >             a)  I first call close on the index accessor (so all the
>>  > searchers can close before I move that index)
>>  >                           accessor =
>>  > IndexAccessorFactory.getInstance().getAccessor(dir.getFile());
>>  >                           accessor.close();
>>  >             b) Then I re-open the index accessor,
>>  >                            accessor = indexFactory.getAccessor(dir.getFile());
>>  >                            accessor.open();
>>  >             c) I optimized the my indexes using the Index Writer (that
>>  > I get from the accessor).
>>  >                            masterWriter = this.indexAccessor.getWriter(false);
>>  >                            masterWriter.optimize(optimizeSegment);
>>  >             d) Once the optimization is done I release the masterWriter,
>>  >                             this.indexAccessor.release(masterWriter);
>>  >
>>  >          Now here is where I get the "RejectedExecutionException".
>>  > Reading up little more on this exception,
>>  > http://pveentjer.wordpress.com/2008/02/06/are-you-dealing-with-the-rejectedexecutionexception/,
>>  > I see this might be happening because something got stuck during the
>>  > close cycle, so the ExecutorSerivce is not accepting any new tasks.
>>  > I'm not sure how would this happen.
>>  >
>>  > The critical problem is once I get this exception, every release call
>>  > throws the same exception (looks like shutdown never gets done).
>>  > Because of this my readers are never refreshed and I can not read any
>>  > new indexes.
>>  >
>>  > May be I've to check whether the accessor is completely closed before
>>  > re-opening?  Could you in your release check whether the pool
>>  > (ExecutorService) is in shutdown state? Any thing else I can check?
>>  >
>>  > Thanks,
>>  > -vivek
>>  >
>>  > On Thu, Feb 28, 2008 at 1:26 PM, vivek sar <vivextra@gmail.com> wrote:
>>  >
>>  >> Mark,
>>  >>
>>  >>   We deployed our indexer (using defaultIndexAccessor) on one of the
>>  >>  production site and getting this error,
>>  >>
>>  >>  Caused by: java.util.concurrent.RejectedExecutionException
>>  >>         at java.util.concurrent.ThreadPoolExecutor$AbortPolicy.rejectedExecution(Unknown
>>  >>  Source)
>>  >>         at java.util.concurrent.ThreadPoolExecutor.reject(Unknown Source)
>>  >>         at java.util.concurrent.ThreadPoolExecutor.execute(Unknown Source)
>>  >>         at org.apache.lucene.indexaccessor.DefaultIndexAccessor.release(DefaultIndexAccessor.java:514)
>>  >>
>>  >>
>>  >>  This is happening repeatedly every time the indexer runs.
>>  >>
>>  >>  This is running your latest IndexAccessor-021508 code.  Any ideas
>>  >>  (it's kind of urgent for us)?
>>  >>
>>  >>  Thanks,
>>  >>  -vivek
>>  >>
>>  >>
>>  >>
>>  >>
>>  >>  On Fri, Feb 15, 2008 at 6:50 PM, vivek sar <vivextra@gmail.com> wrote:
>>  >>  > Mark,
>>  >>  >
>>  >>  >  Thanks for the quick fix. Actually, it is possible that there might
>>  >>  >  had been simultaneous queries using the MultiSearcher. I assumed it
>>  >>  >  was thread-safe, thus was re-using the same instance. I'll update my
>>  >>  >  application code as well.
>>  >>  >
>>  >>  >  Thanks,
>>  >>  >  -vivek
>>  >>  >
>>  >>  >
>>  >>  >
>>  >>  >  On Feb 15, 2008 5:56 PM, Mark Miller <markrmiller@gmail.com> wrote:
>>  >>  >  > Here is the fix: https://issues.apache.org/jira/browse/LUCENE-1026
>>  >>  >  >
>>  >>  >  >
>>  >>  >  > vivek sar wrote:
>>  >>  >  > > Mark,
>>  >>  >  > >
>>  >>  >  > >    There seems to be some issue with DefaultMultiIndexAccessor.java. I
>>  >>  >  > > got following NPE exception,
>>  >>  >  > >
>>  >>  >  > >      2008-02-13 07:10:28,021 ERROR [http-7501-Processor6] ReportServiceImpl -
>>  >>  >  > > java.lang.NullPointerException
>>  >>  >  > >         at org.apache.lucene.indexaccessor.DefaultMultiIndexAccessor.release(DefaultMultiIndexAccessor.java:89)
>>  >>  >  > >
>>  >>  >  > > Looks like the IndexAccessor for one of the Searcher in the
>>  >>  >  > > MultiSearcher returned null. Not sure how is that possible, any ideas
>>  >>  >  > > how is that possible?
>>  >>  >  > >
>>  >>  >  > > In my case it caused a critical error as the writer thread was stuck
>>  >>  >  > > forever (we found out after couple of days) because of this,
>>  >>  >  > >
>>  >>  >  > > "PS thread 9" prio=1 tid=0x00002aac70eb95d0 nid=0x6ba in Object.wait()
>>  >>  >  > > [0x0000000047533000..0x0000000047533b80]
>>  >>  >  > >         at java.lang.Object.wait(Native Method)
>>  >>  >  > >         - waiting on <0x00002aab3e5c7700> (a
>>  >>  >  > > org.apache.lucene.indexaccessor.DefaultIndexAccessor)
>>  >>  >  > >         at java.lang.Object.wait(Unknown Source)
>>  >>  >  > >         at org.apache.lucene.indexaccessor.DefaultIndexAccessor.waitForReadersAndCloseCached(DefaultIndexAccessor.java:593)
>>  >>  >  > >         at org.apache.lucene.indexaccessor.DefaultIndexAccessor.release(DefaultIndexAccessor.java:510)
>>  >>  >  > >         - locked <0x00002aab3e5c7700> (a
>>  >>  >  > > org.apache.lucene.indexaccessor.DefaultIndexAccessor)
>>  >>  >  > >
>>  >>  >  > > The only way to recover was to re-start the application.
>>  >>  >  > >
>>  >>  >  > > I use both MultiSearcher and IndexSearcher in my application, I've
>>  >>  >  > > looked at your code but not able to pinpoint how can it go wrong? Of
>>  >>  >  > > course, you do have to check for null in the
>>  >>  >  > > MultiIndexAccessor.release, but how could you get null index accessor
>>  >>  >  > > at first place?
>>  >>  >  > >
>>  >>  >  > > I do call IndexAccessor.close during partitioning of indexes, but the
>>  >>  >  > > close should wait for all Searchers to close before doing anything.
>>  >>  >  > >
>>  >>  >  > > Do you have any updates to your code since 02/04/2008?
>>  >>  >  > >
>>  >>  >  > > Thanks,
>>  >>  >  > > -vivek
>>  >>  >  > >
>>  >>  >  > > On Feb 6, 2008 8:37 AM, Jay <yu@ai.sri.com> wrote:
>>  >>  >  > >
>>  >>  >  > >> Thanks for your clarifications, Mark!
>>  >>  >  > >>
>>  >>  >  > >>
>>  >>  >  > >> Jay
>>  >>  >  > >>
>>  >>  >  > >>
>>  >>  >  > >> Mark Miller wrote:
>>  >>  >  > >>
>>  >>  >  > >>>> 5. Although currently IndexSearcher.close() does almost nothing except
>>  >>  >  > >>>> to close the internal index reader, it might be a safer to close
>>  >>  >  > >>>> searcher itself as well in closeCachedSearcher(), just in case, the
>>  >>  >  > >>>> searcher may have other resources to release in the future version of
>>  >>  >  > >>>> Lucene.
>>  >>  >  > >>>>
>>  >>  >  > >>> Didn't catch that "as well". You are right, great idea Jay, thanks.
>>  >>  >  > >>>
>>  >>  >  > >>> ---------------------------------------------------------------------
>>  >>  >  > >>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>  >>  >  > >>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>  >>  >  > >>>
>>  >>  >  > >> ---------------------------------------------------------------------
>>  >>  >  > >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>  >>  >  > >> For additional commands, e-mail: java-user-help@lucene.apache.org
>>  >>  >  > >>
>>  >>  >  > >>
>>  >>  >  > >>
>>  >>  >  > >
>>  >>  >  > > ---------------------------------------------------------------------
>>  >>  >  > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>  >>  >  > > For additional commands, e-mail: java-user-help@lucene.apache.org
>>  >>  >  > >
>>  >>  >  > >
>>  >>  >  > >
>>  >>  >  >
>>  >>  >  > ---------------------------------------------------------------------
>>  >>  >  > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>  >>  >  > For additional commands, e-mail: java-user-help@lucene.apache.org
>>  >>  >  >
>>  >>  >  >
>>  >>  >
>>  >>
>>  >>
>>  >
>>  > ---------------------------------------------------------------------
>>  > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>  > For additional commands, e-mail: java-user-help@lucene.apache.org
>>  >
>>  >
>>  >
>>
>>  ---------------------------------------------------------------------
>>  To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>  For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>     
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>   

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32856-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 29 01:59:20 2008
Return-Path: <java-user-return-32856-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 52619 invoked from network); 29 Feb 2008 01:59:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Feb 2008 01:59:20 -0000
Received: (qmail 98873 invoked by uid 500); 29 Feb 2008 01:59:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98839 invoked by uid 500); 29 Feb 2008 01:59:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98826 invoked by uid 99); 29 Feb 2008 01:59:07 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Feb 2008 17:59:07 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of vivextra@gmail.com designates 72.14.204.234 as permitted sender)
Received: from [72.14.204.234] (HELO qb-out-0506.google.com) (72.14.204.234)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Feb 2008 01:58:31 +0000
Received: by qb-out-0506.google.com with SMTP id o21so5237869qba.9
        for <java-user@lucene.apache.org>; Thu, 28 Feb 2008 17:58:40 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        bh=F6SUm07D8+Dt9lVH+2WMgybxresHogoG7d2eBWA174c=;
        b=Siu/9MwS/7S1yLga77Sb/EGvB+iSjuefMRnCJKKINAUOExcKiNDld8Uq+oO9secXCIHcpVizlCuqpWNyeOI3ockN34PX3kfxU1tM/SLILVhF1MMZiiKPF00nUyIEYAWPhmEk29B1OW+8sx8AiEcozMH2q9yBJ36Uf1cXR3X2q+U=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=MV7p9bUn7hX+tzIdwtM8/zNkvvGHOwrKy3EU6N6H7sbEivzK7ilJ55OLZti1dNM5GCX0SWttRpj0IWSNbyhm9KaFaop9eTNpf49AaOjd2RwFnhqkuxoqc72CsVktOcf+ZKsBQJ1gNqht7Y2DH/eRQIuJM5AFjoBZLhhHRKHJt+Q=
Received: by 10.114.95.1 with SMTP id s1mr10565050wab.99.1204250318512;
        Thu, 28 Feb 2008 17:58:38 -0800 (PST)
Received: by 10.114.254.5 with HTTP; Thu, 28 Feb 2008 17:58:38 -0800 (PST)
Message-ID: <a206fb7e0802281758g4cc3b45aw55e0448a29484517@mail.gmail.com>
Date: Thu, 28 Feb 2008 17:58:38 -0800
From: "vivek sar" <vivextra@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: DefaultIndexAccessor
In-Reply-To: <47C75965.7000703@gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <1bcb7c7f0802040450k1ca47982v66894276f1c20c2b@mail.gmail.com>
	 <47A9E258.7020400@ai.sri.com>
	 <a206fb7e0802151638i6cd617a5u11c2414af0690568@mail.gmail.com>
	 <47B642DE.8060103@gmail.com>
	 <a206fb7e0802151850x7c9383a4t3df54af62b270534@mail.gmail.com>
	 <a206fb7e0802281326t1f99b97aw70d2bdcb5dd1371e@mail.gmail.com>
	 <a206fb7e0802281511s7cf9aa09sc9a50bb101073a38@mail.gmail.com>
	 <47C74A06.8050109@gmail.com>
	 <a206fb7e0802281649u17798cb6y84448fa4bc7b48c7@mail.gmail.com>
	 <47C75965.7000703@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Mark,

 Just for my clarification,

1) Would you have indexStop and indexStart methods? If that's the case
then I don't have to call close() at all. These new methods would
serve as just cleaning up the caches and not closing the thread pool.

I would prefer not to call close() and init() again if possible.

The reason we have to do partition is because our index size grows
over 50G a week and then optimization takes hours. I'd a thread going
on this topic in the mailing list,
http://www.gossamer-threads.com/lists/lucene/java-user/57366?search_string=partition;#57366.

Thanks,
-vivek





On Thu, Feb 28, 2008 at 5:01 PM, Mark Miller <markrmiller@gmail.com> wrote:
> I added the Thread Pool recently, so things did probably work before
>  that. I am certainly willing to put the Thread Pool init in the open
>  call instead of the constructor.
>
>  As for the best method to use, I was thinking of something along the
>  same lines as what you suggest.
>
>  One of the decisions will be how to handle shutting down method calls on
>  the Accessor. Throw an Exception or block?
>
>  In any case, I will put up code that makes the above change and your
>  code should work as it did. I'll be sure to add this to the test cases.
>
>
>  Just as a personal interest question, what has led you to setup your
>  index this way? Adding partitions as it grows that is.
>
>
>
>  - Mark
>
>  vivek sar wrote:
>  > Mark,
>  >
>  >     Yes, I think that's what precisely is happening. I call
>  > accessor.close, which shuts down all the ExecutorService. I was
>  > assuming the accessor.open would re-open it (I think that's how it
>  > worked in older version of your IndexAccessor).
>  >
>  > Basically, I need a way to stop (or close) all the IndexSearchers for
>  > a specific IndexAccessor and do not allow them to re-open until I flag
>  > the indexAccessor that it's safe to give out new index searchers. So I
>  > am able to optimize the index, rename it and move it to somewhere else
>  > during partitioning. Right now without closing the searchers I can not
>  > rename the index as it wouldn't allow me to if some other thread has a
>  > file handle to that index.
>  >
>  > I don't know if there is a way to get an exclusive writer thread to an
>  > index using IndexAccessor. I would think a better way for me would be
>  > to,
>  >
>  >     1) Call a method on IndexAccessor, let's say stopIndex() - This
>  > would clear all the caches (stop all the open searchers, readers and
>  > writers) and flag the index accessor so no other reader or writer
>  > thread can be taken from this index accessor
>  >     2) I use my own (not using IndexAccessor) IndexWriter to do
>  > optimization on the index that needs to be partitioned and release it
>  >     3) Once done with partition, I call another method on
>  > IndexAccessor, let's say startIndex()   -> This will simply flag so
>  > now the IndexAccessor would allow to get searchers, readers and
>  > writers. The start would have to reopen all the searchers and readers.
>  >
>  > Not sure if this is a good design for what I am trying to do. This
>  > would require two new methods on IndexAccessor - stopIndex() and
>  > startIndex(). Any thoughts?
>  >
>  > Thanks,
>  > -vivek
>  >
>  >
>  > On Thu, Feb 28, 2008 at 3:55 PM, Mark Miller <markrmiller@gmail.com> wrote:
>  >
>  >> Hey vivek,
>  >>
>  >>  Sorry you ran into this. I believe the problem is that I had just not
>  >>  foreseen the use case of closing and then reopening the Accessor. The
>  >>  only time I ever close the Accessors is when I am shutting down the JVM.
>  >>
>  >>  What do you do about all of the IndexAccessor requests while it is in a
>  >>  closed state? Could their be a better way of accomplishing this without
>  >>  closing the Accessor? Would a new method that just stalled everything be
>  >>  better? Then you wouldn't have to recreate any resources possibly?
>  >>
>  >>  In any case, the problem is that after the Executor gets shutdown it is
>  >>  not reopened in the open method. I can certainly change this, but I need
>  >>  to look for any other issues as well. I will add an open after a
>  >>  shutdown test to investigate. I am going to think about the issue
>  >>  further and I will get back to you soon.
>  >>
>  >>  Thanks for all of the details.
>  >>
>  >>  - Mark
>  >>
>  >>
>  >>
>  >>  vivek sar wrote:
>  >>  > Mark,
>  >>  >
>  >>  >  Some more information,
>  >>  >
>  >>  >       1) I run indexwriter every 5 mins
>  >>  >       2) After every cycle I check if I need to partition (based on
>  >>  > the index size)
>  >>  >       3) In the partition interface,
>  >>  >             a)  I first call close on the index accessor (so all the
>  >>  > searchers can close before I move that index)
>  >>  >                           accessor =
>  >>  > IndexAccessorFactory.getInstance().getAccessor(dir.getFile());
>  >>  >                           accessor.close();
>  >>  >             b) Then I re-open the index accessor,
>  >>  >                            accessor = indexFactory.getAccessor(dir.getFile());
>  >>  >                            accessor.open();
>  >>  >             c) I optimized the my indexes using the Index Writer (that
>  >>  > I get from the accessor).
>  >>  >                            masterWriter = this.indexAccessor.getWriter(false);
>  >>  >                            masterWriter.optimize(optimizeSegment);
>  >>  >             d) Once the optimization is done I release the masterWriter,
>  >>  >                             this.indexAccessor.release(masterWriter);
>  >>  >
>  >>  >          Now here is where I get the "RejectedExecutionException".
>  >>  > Reading up little more on this exception,
>  >>  > http://pveentjer.wordpress.com/2008/02/06/are-you-dealing-with-the-rejectedexecutionexception/,
>  >>  > I see this might be happening because something got stuck during the
>  >>  > close cycle, so the ExecutorSerivce is not accepting any new tasks.
>  >>  > I'm not sure how would this happen.
>  >>  >
>  >>  > The critical problem is once I get this exception, every release call
>  >>  > throws the same exception (looks like shutdown never gets done).
>  >>  > Because of this my readers are never refreshed and I can not read any
>  >>  > new indexes.
>  >>  >
>  >>  > May be I've to check whether the accessor is completely closed before
>  >>  > re-opening?  Could you in your release check whether the pool
>  >>  > (ExecutorService) is in shutdown state? Any thing else I can check?
>  >>  >
>  >>  > Thanks,
>  >>  > -vivek
>  >>  >
>  >>  > On Thu, Feb 28, 2008 at 1:26 PM, vivek sar <vivextra@gmail.com> wrote:
>  >>  >
>  >>  >> Mark,
>  >>  >>
>  >>  >>   We deployed our indexer (using defaultIndexAccessor) on one of the
>  >>  >>  production site and getting this error,
>  >>  >>
>  >>  >>  Caused by: java.util.concurrent.RejectedExecutionException
>  >>  >>         at java.util.concurrent.ThreadPoolExecutor$AbortPolicy.rejectedExecution(Unknown
>  >>  >>  Source)
>  >>  >>         at java.util.concurrent.ThreadPoolExecutor.reject(Unknown Source)
>  >>  >>         at java.util.concurrent.ThreadPoolExecutor.execute(Unknown Source)
>  >>  >>         at org.apache.lucene.indexaccessor.DefaultIndexAccessor.release(DefaultIndexAccessor.java:514)
>  >>  >>
>  >>  >>
>  >>  >>  This is happening repeatedly every time the indexer runs.
>  >>  >>
>  >>  >>  This is running your latest IndexAccessor-021508 code.  Any ideas
>  >>  >>  (it's kind of urgent for us)?
>  >>  >>
>  >>  >>  Thanks,
>  >>  >>  -vivek
>  >>  >>
>  >>  >>
>  >>  >>
>  >>  >>
>  >>  >>  On Fri, Feb 15, 2008 at 6:50 PM, vivek sar <vivextra@gmail.com> wrote:
>  >>  >>  > Mark,
>  >>  >>  >
>  >>  >>  >  Thanks for the quick fix. Actually, it is possible that there might
>  >>  >>  >  had been simultaneous queries using the MultiSearcher. I assumed it
>  >>  >>  >  was thread-safe, thus was re-using the same instance. I'll update my
>  >>  >>  >  application code as well.
>  >>  >>  >
>  >>  >>  >  Thanks,
>  >>  >>  >  -vivek
>  >>  >>  >
>  >>  >>  >
>  >>  >>  >
>  >>  >>  >  On Feb 15, 2008 5:56 PM, Mark Miller <markrmiller@gmail.com> wrote:
>  >>  >>  >  > Here is the fix: https://issues.apache.org/jira/browse/LUCENE-1026
>  >>  >>  >  >
>  >>  >>  >  >
>  >>  >>  >  > vivek sar wrote:
>  >>  >>  >  > > Mark,
>  >>  >>  >  > >
>  >>  >>  >  > >    There seems to be some issue with DefaultMultiIndexAccessor.java. I
>  >>  >>  >  > > got following NPE exception,
>  >>  >>  >  > >
>  >>  >>  >  > >      2008-02-13 07:10:28,021 ERROR [http-7501-Processor6] ReportServiceImpl -
>  >>  >>  >  > > java.lang.NullPointerException
>  >>  >>  >  > >         at org.apache.lucene.indexaccessor.DefaultMultiIndexAccessor.release(DefaultMultiIndexAccessor.java:89)
>  >>  >>  >  > >
>  >>  >>  >  > > Looks like the IndexAccessor for one of the Searcher in the
>  >>  >>  >  > > MultiSearcher returned null. Not sure how is that possible, any ideas
>  >>  >>  >  > > how is that possible?
>  >>  >>  >  > >
>  >>  >>  >  > > In my case it caused a critical error as the writer thread was stuck
>  >>  >>  >  > > forever (we found out after couple of days) because of this,
>  >>  >>  >  > >
>  >>  >>  >  > > "PS thread 9" prio=1 tid=0x00002aac70eb95d0 nid=0x6ba in Object.wait()
>  >>  >>  >  > > [0x0000000047533000..0x0000000047533b80]
>  >>  >>  >  > >         at java.lang.Object.wait(Native Method)
>  >>  >>  >  > >         - waiting on <0x00002aab3e5c7700> (a
>  >>  >>  >  > > org.apache.lucene.indexaccessor.DefaultIndexAccessor)
>  >>  >>  >  > >         at java.lang.Object.wait(Unknown Source)
>  >>  >>  >  > >         at org.apache.lucene.indexaccessor.DefaultIndexAccessor.waitForReadersAndCloseCached(DefaultIndexAccessor.java:593)
>  >>  >>  >  > >         at org.apache.lucene.indexaccessor.DefaultIndexAccessor.release(DefaultIndexAccessor.java:510)
>  >>  >>  >  > >         - locked <0x00002aab3e5c7700> (a
>  >>  >>  >  > > org.apache.lucene.indexaccessor.DefaultIndexAccessor)
>  >>  >>  >  > >
>  >>  >>  >  > > The only way to recover was to re-start the application.
>  >>  >>  >  > >
>  >>  >>  >  > > I use both MultiSearcher and IndexSearcher in my application, I've
>  >>  >>  >  > > looked at your code but not able to pinpoint how can it go wrong? Of
>  >>  >>  >  > > course, you do have to check for null in the
>  >>  >>  >  > > MultiIndexAccessor.release, but how could you get null index accessor
>  >>  >>  >  > > at first place?
>  >>  >>  >  > >
>  >>  >>  >  > > I do call IndexAccessor.close during partitioning of indexes, but the
>  >>  >>  >  > > close should wait for all Searchers to close before doing anything.
>  >>  >>  >  > >
>  >>  >>  >  > > Do you have any updates to your code since 02/04/2008?
>  >>  >>  >  > >
>  >>  >>  >  > > Thanks,
>  >>  >>  >  > > -vivek
>  >>  >>  >  > >
>  >>  >>  >  > > On Feb 6, 2008 8:37 AM, Jay <yu@ai.sri.com> wrote:
>  >>  >>  >  > >
>  >>  >>  >  > >> Thanks for your clarifications, Mark!
>  >>  >>  >  > >>
>  >>  >>  >  > >>
>  >>  >>  >  > >> Jay
>  >>  >>  >  > >>
>  >>  >>  >  > >>
>  >>  >>  >  > >> Mark Miller wrote:
>  >>  >>  >  > >>
>  >>  >>  >  > >>>> 5. Although currently IndexSearcher.close() does almost nothing except
>  >>  >>  >  > >>>> to close the internal index reader, it might be a safer to close
>  >>  >>  >  > >>>> searcher itself as well in closeCachedSearcher(), just in case, the
>  >>  >>  >  > >>>> searcher may have other resources to release in the future version of
>  >>  >>  >  > >>>> Lucene.
>  >>  >>  >  > >>>>
>  >>  >>  >  > >>> Didn't catch that "as well". You are right, great idea Jay, thanks.
>  >>  >>  >  > >>>
>  >>  >>  >  > >>> ---------------------------------------------------------------------
>  >>  >>  >  > >>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>  >>  >>  >  > >>> For additional commands, e-mail: java-user-help@lucene.apache.org
>  >>  >>  >  > >>>
>  >>  >>  >  > >> ---------------------------------------------------------------------
>  >>  >>  >  > >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>  >>  >>  >  > >> For additional commands, e-mail: java-user-help@lucene.apache.org
>  >>  >>  >  > >>
>  >>  >>  >  > >>
>  >>  >>  >  > >>
>  >>  >>  >  > >
>  >>  >>  >  > > ---------------------------------------------------------------------
>  >>  >>  >  > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>  >>  >>  >  > > For additional commands, e-mail: java-user-help@lucene.apache.org
>  >>  >>  >  > >
>  >>  >>  >  > >
>  >>  >>  >  > >
>  >>  >>  >  >
>  >>  >>  >  > ---------------------------------------------------------------------
>  >>  >>  >  > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>  >>  >>  >  > For additional commands, e-mail: java-user-help@lucene.apache.org
>  >>  >>  >  >
>  >>  >>  >  >
>  >>  >>  >
>  >>  >>
>  >>  >>
>  >>  >
>  >>  > ---------------------------------------------------------------------
>  >>  > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>  >>  > For additional commands, e-mail: java-user-help@lucene.apache.org
>  >>  >
>  >>  >
>  >>  >
>  >>
>  >>  ---------------------------------------------------------------------
>  >>  To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>  >>  For additional commands, e-mail: java-user-help@lucene.apache.org
>  >>
>  >>
>  >>
>  >
>  > ---------------------------------------------------------------------
>  > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>  > For additional commands, e-mail: java-user-help@lucene.apache.org
>  >
>  >
>  >
>
>  ---------------------------------------------------------------------
>  To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>  For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32857-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 29 02:19:30 2008
Return-Path: <java-user-return-32857-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61210 invoked from network); 29 Feb 2008 02:19:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Feb 2008 02:19:30 -0000
Received: (qmail 25471 invoked by uid 500); 29 Feb 2008 02:19:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24992 invoked by uid 500); 29 Feb 2008 02:19:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24624 invoked by uid 99); 29 Feb 2008 02:19:17 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Feb 2008 18:19:17 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of blueye117@gmail.com designates 72.14.204.225 as permitted sender)
Received: from [72.14.204.225] (HELO qb-out-0506.google.com) (72.14.204.225)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Feb 2008 02:18:41 +0000
Received: by qb-out-0506.google.com with SMTP id o21so5247212qba.9
        for <java-user@lucene.apache.org>; Thu, 28 Feb 2008 18:18:50 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=8rZW8+zM0ioUOiWScj0mSrpGwOlH17r6Clhe9RBe+xo=;
        b=VXzP3p3GESJRuch/R+E3zEa4rXDEzUmFs5H9EPaNrTB+F71EPN001km0sZOKRC2W83lGoeshcUC0uJSAgdE3CHGaqkp/rs99/SEM0y1lWAeAkfld1SFnnpJiYz2uld3ZXxmZQRg6z1SiMdEgleQ4+sM9ihrbSxAAXm0/iZRs0nU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=w8X7s9wk4zx383QQsHiv2zC9+3Cs3mZvS5aye2SWneTZwr0I1vfIguoAa2BDc4FJWBcJJ7OU6icTlCGR6xZ377NX3+Xsdrd8paQzL0Vt6ublgfzmmEbTuap4/p9ieh4MnW66PduyujjDQrMES0k3DiIgAXhKn6CQWjNBV04O48Q=
Received: by 10.140.126.10 with SMTP id y10mr6038868rvc.214.1204251529822;
        Thu, 28 Feb 2008 18:18:49 -0800 (PST)
Received: by 10.141.97.7 with HTTP; Thu, 28 Feb 2008 18:18:49 -0800 (PST)
Message-ID: <f09790220802281818h2ad18fdfp40bf05bdf2c0244b@mail.gmail.com>
Date: Fri, 29 Feb 2008 10:18:49 +0800
From: "h t" <blueye117@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Vector Space Model: New Similarity Implementation Issues
In-Reply-To: <15696719.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_3748_18656781.1204251529822"
References: <15696719.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_3748_18656781.1204251529822
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Compare with classical VSM, lucene just ignore the denominator (|Q|*|D|) of
similarity formula,
but it add norm(t,d) and coord(q,d) to calculate the fraction of terms in
Query and Doc,
so it's a modified implementation of VSM in practice.
 Do you just want to verify which implementation of VSM in "ieee-sw-rank" is
more precise in practice by lucene?
If so, it's an useful experiment.

2008/2/27, Dharmalingam <dganesan@fc-md.umd.edu>:
>
>
> Hi List,
>
> I am pretty new to Lucene. Certainly, it is very exciting. I need to
> implement a new Similarity class based on the Term Vector Space Model
> given
> in http://www.miislita.com/term-vector/term-vector-3.html
>
> Although that model is similar to Lucene's model
> (
> http://hudson.zones.apache.org/hudson/job/Lucene-trunk/javadoc//org/apache/lucene/search/Similarity.html
> ),
> I am having hard time to extend the Similarity class to calculate that
> model.
>
> In that model, "tf" is multiplied with Idf for all terms in the index, but
> in Lucene "tf" is calculated only for terms in the given Query. Because of
> that effect, the norm calculation should also include "idf" for all terms.
> Lucene calculates the norm, during indexing, by "just" counting the number
> of terms per document. In the web formula (in miislita.com), a document
> norm
> is calculated after multiplying "tf" and "idf".
>
> FYI: I could implement "idf" according to miisliat.com formula, but not
> the
> "tf" and "norm"
>
> Could you please comment me how I can implement a new Similarity class
> that
> will fit in the Lucene's architecture, but still implement the vector
> space
> model given in miislita.com
>
> Thanks a lot for your comments,
>
> Dharma
>
>
> --
> View this message in context:
> http://www.nabble.com/Vector-Space-Model%3A-New-Similarity-Implementation-Issues-tp15696719p15696719.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_3748_18656781.1204251529822--

From java-user-return-32858-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 29 02:36:23 2008
Return-Path: <java-user-return-32858-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67051 invoked from network); 29 Feb 2008 02:36:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Feb 2008 02:36:23 -0000
Received: (qmail 43751 invoked by uid 500); 29 Feb 2008 02:36:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43717 invoked by uid 500); 29 Feb 2008 02:36:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43706 invoked by uid 99); 29 Feb 2008 02:36:12 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Feb 2008 18:36:12 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of blueye117@gmail.com designates 72.14.252.154 as permitted sender)
Received: from [72.14.252.154] (HELO po-out-1718.google.com) (72.14.252.154)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Feb 2008 02:35:36 +0000
Received: by po-out-1718.google.com with SMTP id b23so5707708poe.0
        for <java-user@lucene.apache.org>; Thu, 28 Feb 2008 18:35:45 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=8Z51Gw78lyk36Aey4IUCQgKtX8WjzOSL5cAshWh/7Kk=;
        b=APSd+oRA0ummsngn38Z3/eGSEDlk8Xslt+zfgwI5UeN50DFFH4VS24G/vzuidXjrrE4JkoGsUEqqG8O3mrlVQYt39MjADVsV4f6bQGSX7O5hBKSLWo598qmMCjFinKdYT6fIWZhyemGz1PuhjFBKNlkqXVYIsfhz3E6uk/oV4cE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=apVGdxVy3boIrmbflNBb0RIBvAsSR7Oxzqb37Yr6jZCZ3ycT/p/CsLLheiUjA8uAveKEtnaokdLqM563b4qUmmITUa3uro0kyeEuGgoRc3F3YAWuy8YWA7RC8vjccWXF9P0hpUpaDfMU39QS8NFm9obeBg7kfEr+9Qd/A+eSKlE=
Received: by 10.140.177.15 with SMTP id z15mr6058713rve.128.1204252545280;
        Thu, 28 Feb 2008 18:35:45 -0800 (PST)
Received: by 10.141.97.7 with HTTP; Thu, 28 Feb 2008 18:35:45 -0800 (PST)
Message-ID: <f09790220802281835r2552b358w5421c4fb9209de50@mail.gmail.com>
Date: Fri, 29 Feb 2008 10:35:45 +0800
From: "h t" <blueye117@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: How do i get a text summary
In-Reply-To: <47C6E831.70702@gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_3762_30939271.1204252545266"
References: <36A9B06E6B2FDA4D845E847C36A7AB0298DC52@BLR-MSG-02.i-flex.com>
	 <000a01c879bc$ecddf1c0$fe3c10ac@desktop>
	 <F59AE5DC4BC14155A7563ACC7889F275@msrvcn04> <47C6E831.70702@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_3762_30939271.1204252545266
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi Karl,
Where is the introduction of below algorithm? Thanks.
"Very simple algorithmic solutions usually involve ranking top senstances
by looking at distribution of terms in sentances, paragraphs and the
whole document. I implemented something like this a couple of years back
that worked fairly well."



2008/2/29, Karl Wettin <karl.wettin@gmail.com>:
>
> spring@gmx.eu skrev:
>
> >> If you want something from an index it has to be IN the
> >> index. So, store a
> >> summary field in each document and make sure that field is part of the
> >> query.
> >
> > And how could one create automatically such a summary?
> > Taking the first 2 lines of a document makes not always much sense.
> > How does google this?
>
>
> Google don't summarize, they highlight parts that match the query. See
> previous reponses.
>
> If you really want to summarize there are a number of more and less
> scientific ways to figure out what's important and what's not.
>
> Very simple algorithmic solutions usually involve ranking top senstances
> by looking at distribution of terms in sentances, paragraphs and the
> whole document. I implemented something like this a couple of years back
> that worked fairly well.
>
> Citeseer is a great source for papers on pretty much any IR related
> subject: <http://citeseer.ist.psu.edu/cs?cs=1&q=text+summarization>
>
>
>
>     karl
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_3762_30939271.1204252545266--

From java-user-return-32859-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 29 03:18:25 2008
Return-Path: <java-user-return-32859-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76770 invoked from network); 29 Feb 2008 03:18:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Feb 2008 03:18:25 -0000
Received: (qmail 71299 invoked by uid 500); 29 Feb 2008 03:18:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71260 invoked by uid 500); 29 Feb 2008 03:18:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71249 invoked by uid 99); 29 Feb 2008 03:18:13 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Feb 2008 19:18:12 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of markrmiller@gmail.com designates 72.14.204.238 as permitted sender)
Received: from [72.14.204.238] (HELO qb-out-0506.google.com) (72.14.204.238)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Feb 2008 03:17:23 +0000
Received: by qb-out-0506.google.com with SMTP id o21so5273697qba.9
        for <java-user@lucene.apache.org>; Thu, 28 Feb 2008 19:17:44 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        bh=t0r13Cvk/DMpITcccTERJIknJuZCUFt5qBRgUOceF+0=;
        b=tpHP77TpCXMgnDBPZVPf2zEAKZkBXlsCm8frG3yhqQavBhVHiwUAJfBk4Sv/S/WU5Nb7KX5beRThEqCJoN1Dd7GrHYU7NWY9NEE6zZ/ZxFucrDgSU89EnP65r4QCxdx8WvOS0y0eRgGMhDoQ64627U4NGt2ogz/GvgCGWOMW41k=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=ZBXlCG8q7QLpcR/+b9cMiZsuenDAesk1mv2V5iFaVEN//BpA24npot9g4I7RtP2beBKCA3H3tkuv2em8m2a+wI1x5/oixNNUn9MYQ+MH7L4Vf2XYmdkHB/qAWBh5ePZEKGjcOPBEGES+6GIC6qZAUt3Ls1DVz6voKg7Z/hhON3g=
Received: by 10.65.139.9 with SMTP id r9mr16433583qbn.71.1204255063416;
        Thu, 28 Feb 2008 19:17:43 -0800 (PST)
Received: from ?192.168.1.102? ( [69.124.234.149])
        by mx.google.com with ESMTPS id f14sm8362975qba.25.2008.02.28.19.17.42
        (version=SSLv3 cipher=RC4-MD5);
        Thu, 28 Feb 2008 19:17:42 -0800 (PST)
Message-ID: <47C7788E.4050900@gmail.com>
Date: Thu, 28 Feb 2008 22:14:22 -0500
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.12 (Windows/20080213)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: DefaultIndexAccessor
References: <1bcb7c7f0802040450k1ca47982v66894276f1c20c2b@mail.gmail.com>	 <47A9E258.7020400@ai.sri.com>	 <a206fb7e0802151638i6cd617a5u11c2414af0690568@mail.gmail.com>	 <47B642DE.8060103@gmail.com>	 <a206fb7e0802151850x7c9383a4t3df54af62b270534@mail.gmail.com>	 <a206fb7e0802281326t1f99b97aw70d2bdcb5dd1371e@mail.gmail.com>	 <a206fb7e0802281511s7cf9aa09sc9a50bb101073a38@mail.gmail.com>	 <47C74A06.8050109@gmail.com>	 <a206fb7e0802281649u17798cb6y84448fa4bc7b48c7@mail.gmail.com>	 <47C75965.7000703@gmail.com> <a206fb7e0802281758g4cc3b45aw55e0448a29484517@mail.gmail.com>
In-Reply-To: <a206fb7e0802281758g4cc3b45aw55e0448a29484517@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org



vivek sar wrote:
> Mark,
>
>  Just for my clarification,
>
> 1) Would you have indexStop and indexStart methods? If that's the case
> then I don't have to call close() at all. These new methods would
> serve as just cleaning up the caches and not closing the thread pool.
>   
Yes. This is the approach I agree with. I am putting up new code that 
allows the close(), open() calls anyway though. There is nothing keeping 
it from working and it used to work so its a good idea to make it work 
again. It is also a quick fix for you.

https://issues.apache.org/jira/browse/LUCENE-1026

I will be adding the new stop start calls quickly, but I don't want to 
rush it out.
> I would prefer not to call close() and init() again if possible.
>
> The reason we have to do partition is because our index size grows
> over 50G a week and then optimization takes hours. I'd a thread going
> on this topic in the mailing list,
> http://www.gossamer-threads.com/lists/lucene/java-user/57366?search_string=partition;#57366.
>   
Gotchya. A comment I have on that is that you might try keeping the 
mergefactor really low as well. This will keep searches faster, make 
optimization much faster (its amortized), and not slow down writes that 
much in my experience (since IndexAccessor drops the writes off (spawns 
new thread) anyway, slightly longer writes shouldnt be a big deal at 
all. I'd try out even as low as 2 or 3. I run some fairly large 
interactive indexes and the writes, even when blocking until the write 
is done, are pretty darn responsive.

- Mark
> Thanks,
> -vivek
>
>
>
>
>
> On Thu, Feb 28, 2008 at 5:01 PM, Mark Miller <markrmiller@gmail.com> wrote:
>   
>> I added the Thread Pool recently, so things did probably work before
>>  that. I am certainly willing to put the Thread Pool init in the open
>>  call instead of the constructor.
>>
>>  As for the best method to use, I was thinking of something along the
>>  same lines as what you suggest.
>>
>>  One of the decisions will be how to handle shutting down method calls on
>>  the Accessor. Throw an Exception or block?
>>
>>  In any case, I will put up code that makes the above change and your
>>  code should work as it did. I'll be sure to add this to the test cases.
>>
>>
>>  Just as a personal interest question, what has led you to setup your
>>  index this way? Adding partitions as it grows that is.
>>
>>
>>
>>  - Mark
>>
>>  vivek sar wrote:
>>  > Mark,
>>  >
>>  >     Yes, I think that's what precisely is happening. I call
>>  > accessor.close, which shuts down all the ExecutorService. I was
>>  > assuming the accessor.open would re-open it (I think that's how it
>>  > worked in older version of your IndexAccessor).
>>  >
>>  > Basically, I need a way to stop (or close) all the IndexSearchers for
>>  > a specific IndexAccessor and do not allow them to re-open until I flag
>>  > the indexAccessor that it's safe to give out new index searchers. So I
>>  > am able to optimize the index, rename it and move it to somewhere else
>>  > during partitioning. Right now without closing the searchers I can not
>>  > rename the index as it wouldn't allow me to if some other thread has a
>>  > file handle to that index.
>>  >
>>  > I don't know if there is a way to get an exclusive writer thread to an
>>  > index using IndexAccessor. I would think a better way for me would be
>>  > to,
>>  >
>>  >     1) Call a method on IndexAccessor, let's say stopIndex() - This
>>  > would clear all the caches (stop all the open searchers, readers and
>>  > writers) and flag the index accessor so no other reader or writer
>>  > thread can be taken from this index accessor
>>  >     2) I use my own (not using IndexAccessor) IndexWriter to do
>>  > optimization on the index that needs to be partitioned and release it
>>  >     3) Once done with partition, I call another method on
>>  > IndexAccessor, let's say startIndex()   -> This will simply flag so
>>  > now the IndexAccessor would allow to get searchers, readers and
>>  > writers. The start would have to reopen all the searchers and readers.
>>  >
>>  > Not sure if this is a good design for what I am trying to do. This
>>  > would require two new methods on IndexAccessor - stopIndex() and
>>  > startIndex(). Any thoughts?
>>  >
>>  > Thanks,
>>  > -vivek
>>  >
>>  >
>>  > On Thu, Feb 28, 2008 at 3:55 PM, Mark Miller <markrmiller@gmail.com> wrote:
>>  >
>>  >> Hey vivek,
>>  >>
>>  >>  Sorry you ran into this. I believe the problem is that I had just not
>>  >>  foreseen the use case of closing and then reopening the Accessor. The
>>  >>  only time I ever close the Accessors is when I am shutting down the JVM.
>>  >>
>>  >>  What do you do about all of the IndexAccessor requests while it is in a
>>  >>  closed state? Could their be a better way of accomplishing this without
>>  >>  closing the Accessor? Would a new method that just stalled everything be
>>  >>  better? Then you wouldn't have to recreate any resources possibly?
>>  >>
>>  >>  In any case, the problem is that after the Executor gets shutdown it is
>>  >>  not reopened in the open method. I can certainly change this, but I need
>>  >>  to look for any other issues as well. I will add an open after a
>>  >>  shutdown test to investigate. I am going to think about the issue
>>  >>  further and I will get back to you soon.
>>  >>
>>  >>  Thanks for all of the details.
>>  >>
>>  >>  - Mark
>>  >>
>>  >>
>>  >>
>>  >>  vivek sar wrote:
>>  >>  > Mark,
>>  >>  >
>>  >>  >  Some more information,
>>  >>  >
>>  >>  >       1) I run indexwriter every 5 mins
>>  >>  >       2) After every cycle I check if I need to partition (based on
>>  >>  > the index size)
>>  >>  >       3) In the partition interface,
>>  >>  >             a)  I first call close on the index accessor (so all the
>>  >>  > searchers can close before I move that index)
>>  >>  >                           accessor =
>>  >>  > IndexAccessorFactory.getInstance().getAccessor(dir.getFile());
>>  >>  >                           accessor.close();
>>  >>  >             b) Then I re-open the index accessor,
>>  >>  >                            accessor = indexFactory.getAccessor(dir.getFile());
>>  >>  >                            accessor.open();
>>  >>  >             c) I optimized the my indexes using the Index Writer (that
>>  >>  > I get from the accessor).
>>  >>  >                            masterWriter = this.indexAccessor.getWriter(false);
>>  >>  >                            masterWriter.optimize(optimizeSegment);
>>  >>  >             d) Once the optimization is done I release the masterWriter,
>>  >>  >                             this.indexAccessor.release(masterWriter);
>>  >>  >
>>  >>  >          Now here is where I get the "RejectedExecutionException".
>>  >>  > Reading up little more on this exception,
>>  >>  > http://pveentjer.wordpress.com/2008/02/06/are-you-dealing-with-the-rejectedexecutionexception/,
>>  >>  > I see this might be happening because something got stuck during the
>>  >>  > close cycle, so the ExecutorSerivce is not accepting any new tasks.
>>  >>  > I'm not sure how would this happen.
>>  >>  >
>>  >>  > The critical problem is once I get this exception, every release call
>>  >>  > throws the same exception (looks like shutdown never gets done).
>>  >>  > Because of this my readers are never refreshed and I can not read any
>>  >>  > new indexes.
>>  >>  >
>>  >>  > May be I've to check whether the accessor is completely closed before
>>  >>  > re-opening?  Could you in your release check whether the pool
>>  >>  > (ExecutorService) is in shutdown state? Any thing else I can check?
>>  >>  >
>>  >>  > Thanks,
>>  >>  > -vivek
>>  >>  >
>>  >>  > On Thu, Feb 28, 2008 at 1:26 PM, vivek sar <vivextra@gmail.com> wrote:
>>  >>  >
>>  >>  >> Mark,
>>  >>  >>
>>  >>  >>   We deployed our indexer (using defaultIndexAccessor) on one of the
>>  >>  >>  production site and getting this error,
>>  >>  >>
>>  >>  >>  Caused by: java.util.concurrent.RejectedExecutionException
>>  >>  >>         at java.util.concurrent.ThreadPoolExecutor$AbortPolicy.rejectedExecution(Unknown
>>  >>  >>  Source)
>>  >>  >>         at java.util.concurrent.ThreadPoolExecutor.reject(Unknown Source)
>>  >>  >>         at java.util.concurrent.ThreadPoolExecutor.execute(Unknown Source)
>>  >>  >>         at org.apache.lucene.indexaccessor.DefaultIndexAccessor.release(DefaultIndexAccessor.java:514)
>>  >>  >>
>>  >>  >>
>>  >>  >>  This is happening repeatedly every time the indexer runs.
>>  >>  >>
>>  >>  >>  This is running your latest IndexAccessor-021508 code.  Any ideas
>>  >>  >>  (it's kind of urgent for us)?
>>  >>  >>
>>  >>  >>  Thanks,
>>  >>  >>  -vivek
>>  >>  >>
>>  >>  >>
>>  >>  >>
>>  >>  >>
>>  >>  >>  On Fri, Feb 15, 2008 at 6:50 PM, vivek sar <vivextra@gmail.com> wrote:
>>  >>  >>  > Mark,
>>  >>  >>  >
>>  >>  >>  >  Thanks for the quick fix. Actually, it is possible that there might
>>  >>  >>  >  had been simultaneous queries using the MultiSearcher. I assumed it
>>  >>  >>  >  was thread-safe, thus was re-using the same instance. I'll update my
>>  >>  >>  >  application code as well.
>>  >>  >>  >
>>  >>  >>  >  Thanks,
>>  >>  >>  >  -vivek
>>  >>  >>  >
>>  >>  >>  >
>>  >>  >>  >
>>  >>  >>  >  On Feb 15, 2008 5:56 PM, Mark Miller <markrmiller@gmail.com> wrote:
>>  >>  >>  >  > Here is the fix: https://issues.apache.org/jira/browse/LUCENE-1026
>>  >>  >>  >  >
>>  >>  >>  >  >
>>  >>  >>  >  > vivek sar wrote:
>>  >>  >>  >  > > Mark,
>>  >>  >>  >  > >
>>  >>  >>  >  > >    There seems to be some issue with DefaultMultiIndexAccessor.java. I
>>  >>  >>  >  > > got following NPE exception,
>>  >>  >>  >  > >
>>  >>  >>  >  > >      2008-02-13 07:10:28,021 ERROR [http-7501-Processor6] ReportServiceImpl -
>>  >>  >>  >  > > java.lang.NullPointerException
>>  >>  >>  >  > >         at org.apache.lucene.indexaccessor.DefaultMultiIndexAccessor.release(DefaultMultiIndexAccessor.java:89)
>>  >>  >>  >  > >
>>  >>  >>  >  > > Looks like the IndexAccessor for one of the Searcher in the
>>  >>  >>  >  > > MultiSearcher returned null. Not sure how is that possible, any ideas
>>  >>  >>  >  > > how is that possible?
>>  >>  >>  >  > >
>>  >>  >>  >  > > In my case it caused a critical error as the writer thread was stuck
>>  >>  >>  >  > > forever (we found out after couple of days) because of this,
>>  >>  >>  >  > >
>>  >>  >>  >  > > "PS thread 9" prio=1 tid=0x00002aac70eb95d0 nid=0x6ba in Object.wait()
>>  >>  >>  >  > > [0x0000000047533000..0x0000000047533b80]
>>  >>  >>  >  > >         at java.lang.Object.wait(Native Method)
>>  >>  >>  >  > >         - waiting on <0x00002aab3e5c7700> (a
>>  >>  >>  >  > > org.apache.lucene.indexaccessor.DefaultIndexAccessor)
>>  >>  >>  >  > >         at java.lang.Object.wait(Unknown Source)
>>  >>  >>  >  > >         at org.apache.lucene.indexaccessor.DefaultIndexAccessor.waitForReadersAndCloseCached(DefaultIndexAccessor.java:593)
>>  >>  >>  >  > >         at org.apache.lucene.indexaccessor.DefaultIndexAccessor.release(DefaultIndexAccessor.java:510)
>>  >>  >>  >  > >         - locked <0x00002aab3e5c7700> (a
>>  >>  >>  >  > > org.apache.lucene.indexaccessor.DefaultIndexAccessor)
>>  >>  >>  >  > >
>>  >>  >>  >  > > The only way to recover was to re-start the application.
>>  >>  >>  >  > >
>>  >>  >>  >  > > I use both MultiSearcher and IndexSearcher in my application, I've
>>  >>  >>  >  > > looked at your code but not able to pinpoint how can it go wrong? Of
>>  >>  >>  >  > > course, you do have to check for null in the
>>  >>  >>  >  > > MultiIndexAccessor.release, but how could you get null index accessor
>>  >>  >>  >  > > at first place?
>>  >>  >>  >  > >
>>  >>  >>  >  > > I do call IndexAccessor.close during partitioning of indexes, but the
>>  >>  >>  >  > > close should wait for all Searchers to close before doing anything.
>>  >>  >>  >  > >
>>  >>  >>  >  > > Do you have any updates to your code since 02/04/2008?
>>  >>  >>  >  > >
>>  >>  >>  >  > > Thanks,
>>  >>  >>  >  > > -vivek
>>  >>  >>  >  > >
>>  >>  >>  >  > > On Feb 6, 2008 8:37 AM, Jay <yu@ai.sri.com> wrote:
>>  >>  >>  >  > >
>>  >>  >>  >  > >> Thanks for your clarifications, Mark!
>>  >>  >>  >  > >>
>>  >>  >>  >  > >>
>>  >>  >>  >  > >> Jay
>>  >>  >>  >  > >>
>>  >>  >>  >  > >>
>>  >>  >>  >  > >> Mark Miller wrote:
>>  >>  >>  >  > >>
>>  >>  >>  >  > >>>> 5. Although currently IndexSearcher.close() does almost nothing except
>>  >>  >>  >  > >>>> to close the internal index reader, it might be a safer to close
>>  >>  >>  >  > >>>> searcher itself as well in closeCachedSearcher(), just in case, the
>>  >>  >>  >  > >>>> searcher may have other resources to release in the future version of
>>  >>  >>  >  > >>>> Lucene.
>>  >>  >>  >  > >>>>
>>  >>  >>  >  > >>> Didn't catch that "as well". You are right, great idea Jay, thanks.
>>  >>  >>  >  > >>>
>>  >>  >>  >  > >>> ---------------------------------------------------------------------
>>  >>  >>  >  > >>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>  >>  >>  >  > >>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>  >>  >>  >  > >>>
>>  >>  >>  >  > >> ---------------------------------------------------------------------
>>  >>  >>  >  > >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>  >>  >>  >  > >> For additional commands, e-mail: java-user-help@lucene.apache.org
>>  >>  >>  >  > >>
>>  >>  >>  >  > >>
>>  >>  >>  >  > >>
>>  >>  >>  >  > >
>>  >>  >>  >  > > ---------------------------------------------------------------------
>>  >>  >>  >  > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>  >>  >>  >  > > For additional commands, e-mail: java-user-help@lucene.apache.org
>>  >>  >>  >  > >
>>  >>  >>  >  > >
>>  >>  >>  >  > >
>>  >>  >>  >  >
>>  >>  >>  >  > ---------------------------------------------------------------------
>>  >>  >>  >  > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>  >>  >>  >  > For additional commands, e-mail: java-user-help@lucene.apache.org
>>  >>  >>  >  >
>>  >>  >>  >  >
>>  >>  >>  >
>>  >>  >>
>>  >>  >>
>>  >>  >
>>  >>  > ---------------------------------------------------------------------
>>  >>  > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>  >>  > For additional commands, e-mail: java-user-help@lucene.apache.org
>>  >>  >
>>  >>  >
>>  >>  >
>>  >>
>>  >>  ---------------------------------------------------------------------
>>  >>  To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>  >>  For additional commands, e-mail: java-user-help@lucene.apache.org
>>  >>
>>  >>
>>  >>
>>  >
>>  > ---------------------------------------------------------------------
>>  > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>  > For additional commands, e-mail: java-user-help@lucene.apache.org
>>  >
>>  >
>>  >
>>
>>  ---------------------------------------------------------------------
>>  To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>  For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>     
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>   

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32860-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 29 03:23:49 2008
Return-Path: <java-user-return-32860-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78182 invoked from network); 29 Feb 2008 03:23:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Feb 2008 03:23:49 -0000
Received: (qmail 74196 invoked by uid 500); 29 Feb 2008 03:23:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74168 invoked by uid 500); 29 Feb 2008 03:23:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74157 invoked by uid 99); 29 Feb 2008 03:23:36 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Feb 2008 19:23:36 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of vivextra@gmail.com designates 72.14.204.226 as permitted sender)
Received: from [72.14.204.226] (HELO qb-out-0506.google.com) (72.14.204.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Feb 2008 03:22:58 +0000
Received: by qb-out-0506.google.com with SMTP id o21so5275912qba.9
        for <java-user@lucene.apache.org>; Thu, 28 Feb 2008 19:23:08 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        bh=12pHq5WlS89nJZU0oIzjF6DHndfl4sKGY5tfcnKcTlQ=;
        b=qB8IR/Zt6dCtMTBDlSDN5ZQpHbCF3IdR2pWBqf59/zSxdPDV0XsSrH+dUY6YqlMsyb1wyqsAwY+gnkcYQglwfLQA8UzL53AvLRbndsj/p8ZgVA7oWlYwVvh4NWO9zHQBDYg0ieHSwBwjq9g4VwYH5gAhzKvGWkUzlk8uKsJi2Kk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=TA+DrGm7JOwf/Prn5c96Z6AXFiRQLVan01jJNFWPnK6djbElUjf/H19n8NZH0tYkWs2r+zAvgwrIJTe8XFYsNjLBAj1SAvRW+y+tHcYdN/fL8mwKyZ3/ksI7sN1PyKKA/iS33X6r/Z9j/xhwKlKqeyBq7Kdz4Khp027C8F4yjqE=
Received: by 10.115.79.1 with SMTP id g1mr10662329wal.43.1204255387148;
        Thu, 28 Feb 2008 19:23:07 -0800 (PST)
Received: by 10.114.254.5 with HTTP; Thu, 28 Feb 2008 19:23:07 -0800 (PST)
Message-ID: <a206fb7e0802281923w642c3b2by8b0cfd1a95f3d897@mail.gmail.com>
Date: Thu, 28 Feb 2008 19:23:07 -0800
From: "vivek sar" <vivextra@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: DefaultIndexAccessor
In-Reply-To: <47C7788E.4050900@gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <1bcb7c7f0802040450k1ca47982v66894276f1c20c2b@mail.gmail.com>
	 <47B642DE.8060103@gmail.com>
	 <a206fb7e0802151850x7c9383a4t3df54af62b270534@mail.gmail.com>
	 <a206fb7e0802281326t1f99b97aw70d2bdcb5dd1371e@mail.gmail.com>
	 <a206fb7e0802281511s7cf9aa09sc9a50bb101073a38@mail.gmail.com>
	 <47C74A06.8050109@gmail.com>
	 <a206fb7e0802281649u17798cb6y84448fa4bc7b48c7@mail.gmail.com>
	 <47C75965.7000703@gmail.com>
	 <a206fb7e0802281758g4cc3b45aw55e0448a29484517@mail.gmail.com>
	 <47C7788E.4050900@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks Mark. I'll wait for your enhancements in IndexAccessor on the
new methods.

I use mergeFactor = 100. I've read about the merge factor and it's
hard to balance both the read/write optimization. What's the number do
you use?

Thanks again.
-vivek

On Thu, Feb 28, 2008 at 7:14 PM, Mark Miller <markrmiller@gmail.com> wrote:
>
>
>  vivek sar wrote:
>  > Mark,
>  >
>  >  Just for my clarification,
>  >
>  > 1) Would you have indexStop and indexStart methods? If that's the case
>  > then I don't have to call close() at all. These new methods would
>  > serve as just cleaning up the caches and not closing the thread pool.
>  >
>  Yes. This is the approach I agree with. I am putting up new code that
>  allows the close(), open() calls anyway though. There is nothing keeping
>  it from working and it used to work so its a good idea to make it work
>  again. It is also a quick fix for you.
>
>
>  https://issues.apache.org/jira/browse/LUCENE-1026
>
>  I will be adding the new stop start calls quickly, but I don't want to
>  rush it out.
>
> > I would prefer not to call close() and init() again if possible.
>  >
>  > The reason we have to do partition is because our index size grows
>  > over 50G a week and then optimization takes hours. I'd a thread going
>  > on this topic in the mailing list,
>  > http://www.gossamer-threads.com/lists/lucene/java-user/57366?search_string=partition;#57366.
>  >
>  Gotchya. A comment I have on that is that you might try keeping the
>  mergefactor really low as well. This will keep searches faster, make
>  optimization much faster (its amortized), and not slow down writes that
>  much in my experience (since IndexAccessor drops the writes off (spawns
>  new thread) anyway, slightly longer writes shouldnt be a big deal at
>  all. I'd try out even as low as 2 or 3. I run some fairly large
>  interactive indexes and the writes, even when blocking until the write
>  is done, are pretty darn responsive.
>
>  - Mark
>
>
> > Thanks,
>  > -vivek
>  >
>  >
>  >
>  >
>  >
>  > On Thu, Feb 28, 2008 at 5:01 PM, Mark Miller <markrmiller@gmail.com> wrote:
>  >
>  >> I added the Thread Pool recently, so things did probably work before
>  >>  that. I am certainly willing to put the Thread Pool init in the open
>  >>  call instead of the constructor.
>  >>
>  >>  As for the best method to use, I was thinking of something along the
>  >>  same lines as what you suggest.
>  >>
>  >>  One of the decisions will be how to handle shutting down method calls on
>  >>  the Accessor. Throw an Exception or block?
>  >>
>  >>  In any case, I will put up code that makes the above change and your
>  >>  code should work as it did. I'll be sure to add this to the test cases.
>  >>
>  >>
>  >>  Just as a personal interest question, what has led you to setup your
>  >>  index this way? Adding partitions as it grows that is.
>  >>
>  >>
>  >>
>  >>  - Mark
>  >>
>  >>  vivek sar wrote:
>  >>  > Mark,
>  >>  >
>  >>  >     Yes, I think that's what precisely is happening. I call
>  >>  > accessor.close, which shuts down all the ExecutorService. I was
>  >>  > assuming the accessor.open would re-open it (I think that's how it
>  >>  > worked in older version of your IndexAccessor).
>  >>  >
>  >>  > Basically, I need a way to stop (or close) all the IndexSearchers for
>  >>  > a specific IndexAccessor and do not allow them to re-open until I flag
>  >>  > the indexAccessor that it's safe to give out new index searchers. So I
>  >>  > am able to optimize the index, rename it and move it to somewhere else
>  >>  > during partitioning. Right now without closing the searchers I can not
>  >>  > rename the index as it wouldn't allow me to if some other thread has a
>  >>  > file handle to that index.
>  >>  >
>  >>  > I don't know if there is a way to get an exclusive writer thread to an
>  >>  > index using IndexAccessor. I would think a better way for me would be
>  >>  > to,
>  >>  >
>  >>  >     1) Call a method on IndexAccessor, let's say stopIndex() - This
>  >>  > would clear all the caches (stop all the open searchers, readers and
>  >>  > writers) and flag the index accessor so no other reader or writer
>  >>  > thread can be taken from this index accessor
>  >>  >     2) I use my own (not using IndexAccessor) IndexWriter to do
>  >>  > optimization on the index that needs to be partitioned and release it
>  >>  >     3) Once done with partition, I call another method on
>  >>  > IndexAccessor, let's say startIndex()   -> This will simply flag so
>  >>  > now the IndexAccessor would allow to get searchers, readers and
>  >>  > writers. The start would have to reopen all the searchers and readers.
>  >>  >
>  >>  > Not sure if this is a good design for what I am trying to do. This
>  >>  > would require two new methods on IndexAccessor - stopIndex() and
>  >>  > startIndex(). Any thoughts?
>  >>  >
>  >>  > Thanks,
>  >>  > -vivek
>  >>  >
>  >>  >
>  >>  > On Thu, Feb 28, 2008 at 3:55 PM, Mark Miller <markrmiller@gmail.com> wrote:
>  >>  >
>  >>  >> Hey vivek,
>  >>  >>
>  >>  >>  Sorry you ran into this. I believe the problem is that I had just not
>  >>  >>  foreseen the use case of closing and then reopening the Accessor. The
>  >>  >>  only time I ever close the Accessors is when I am shutting down the JVM.
>  >>  >>
>  >>  >>  What do you do about all of the IndexAccessor requests while it is in a
>  >>  >>  closed state? Could their be a better way of accomplishing this without
>  >>  >>  closing the Accessor? Would a new method that just stalled everything be
>  >>  >>  better? Then you wouldn't have to recreate any resources possibly?
>  >>  >>
>  >>  >>  In any case, the problem is that after the Executor gets shutdown it is
>  >>  >>  not reopened in the open method. I can certainly change this, but I need
>  >>  >>  to look for any other issues as well. I will add an open after a
>  >>  >>  shutdown test to investigate. I am going to think about the issue
>  >>  >>  further and I will get back to you soon.
>  >>  >>
>  >>  >>  Thanks for all of the details.
>  >>  >>
>  >>  >>  - Mark
>  >>  >>
>  >>  >>
>  >>  >>
>  >>  >>  vivek sar wrote:
>  >>  >>  > Mark,
>  >>  >>  >
>  >>  >>  >  Some more information,
>  >>  >>  >
>  >>  >>  >       1) I run indexwriter every 5 mins
>  >>  >>  >       2) After every cycle I check if I need to partition (based on
>  >>  >>  > the index size)
>  >>  >>  >       3) In the partition interface,
>  >>  >>  >             a)  I first call close on the index accessor (so all the
>  >>  >>  > searchers can close before I move that index)
>  >>  >>  >                           accessor =
>  >>  >>  > IndexAccessorFactory.getInstance().getAccessor(dir.getFile());
>  >>  >>  >                           accessor.close();
>  >>  >>  >             b) Then I re-open the index accessor,
>  >>  >>  >                            accessor = indexFactory.getAccessor(dir.getFile());
>  >>  >>  >                            accessor.open();
>  >>  >>  >             c) I optimized the my indexes using the Index Writer (that
>  >>  >>  > I get from the accessor).
>  >>  >>  >                            masterWriter = this.indexAccessor.getWriter(false);
>  >>  >>  >                            masterWriter.optimize(optimizeSegment);
>  >>  >>  >             d) Once the optimization is done I release the masterWriter,
>  >>  >>  >                             this.indexAccessor.release(masterWriter);
>  >>  >>  >
>  >>  >>  >          Now here is where I get the "RejectedExecutionException".
>  >>  >>  > Reading up little more on this exception,
>  >>  >>  > http://pveentjer.wordpress.com/2008/02/06/are-you-dealing-with-the-rejectedexecutionexception/,
>  >>  >>  > I see this might be happening because something got stuck during the
>  >>  >>  > close cycle, so the ExecutorSerivce is not accepting any new tasks.
>  >>  >>  > I'm not sure how would this happen.
>  >>  >>  >
>  >>  >>  > The critical problem is once I get this exception, every release call
>  >>  >>  > throws the same exception (looks like shutdown never gets done).
>  >>  >>  > Because of this my readers are never refreshed and I can not read any
>  >>  >>  > new indexes.
>  >>  >>  >
>  >>  >>  > May be I've to check whether the accessor is completely closed before
>  >>  >>  > re-opening?  Could you in your release check whether the pool
>  >>  >>  > (ExecutorService) is in shutdown state? Any thing else I can check?
>  >>  >>  >
>  >>  >>  > Thanks,
>  >>  >>  > -vivek
>  >>  >>  >
>  >>  >>  > On Thu, Feb 28, 2008 at 1:26 PM, vivek sar <vivextra@gmail.com> wrote:
>  >>  >>  >
>  >>  >>  >> Mark,
>  >>  >>  >>
>  >>  >>  >>   We deployed our indexer (using defaultIndexAccessor) on one of the
>  >>  >>  >>  production site and getting this error,
>  >>  >>  >>
>  >>  >>  >>  Caused by: java.util.concurrent.RejectedExecutionException
>  >>  >>  >>         at java.util.concurrent.ThreadPoolExecutor$AbortPolicy.rejectedExecution(Unknown
>  >>  >>  >>  Source)
>  >>  >>  >>         at java.util.concurrent.ThreadPoolExecutor.reject(Unknown Source)
>  >>  >>  >>         at java.util.concurrent.ThreadPoolExecutor.execute(Unknown Source)
>  >>  >>  >>         at org.apache.lucene.indexaccessor.DefaultIndexAccessor.release(DefaultIndexAccessor.java:514)
>  >>  >>  >>
>  >>  >>  >>
>  >>  >>  >>  This is happening repeatedly every time the indexer runs.
>  >>  >>  >>
>  >>  >>  >>  This is running your latest IndexAccessor-021508 code.  Any ideas
>  >>  >>  >>  (it's kind of urgent for us)?
>  >>  >>  >>
>  >>  >>  >>  Thanks,
>  >>  >>  >>  -vivek
>  >>  >>  >>
>  >>  >>  >>
>  >>  >>  >>
>  >>  >>  >>
>  >>  >>  >>  On Fri, Feb 15, 2008 at 6:50 PM, vivek sar <vivextra@gmail.com> wrote:
>  >>  >>  >>  > Mark,
>  >>  >>  >>  >
>  >>  >>  >>  >  Thanks for the quick fix. Actually, it is possible that there might
>  >>  >>  >>  >  had been simultaneous queries using the MultiSearcher. I assumed it
>  >>  >>  >>  >  was thread-safe, thus was re-using the same instance. I'll update my
>  >>  >>  >>  >  application code as well.
>  >>  >>  >>  >
>  >>  >>  >>  >  Thanks,
>  >>  >>  >>  >  -vivek
>  >>  >>  >>  >
>  >>  >>  >>  >
>  >>  >>  >>  >
>  >>  >>  >>  >  On Feb 15, 2008 5:56 PM, Mark Miller <markrmiller@gmail.com> wrote:
>  >>  >>  >>  >  > Here is the fix: https://issues.apache.org/jira/browse/LUCENE-1026
>  >>  >>  >>  >  >
>  >>  >>  >>  >  >
>  >>  >>  >>  >  > vivek sar wrote:
>  >>  >>  >>  >  > > Mark,
>  >>  >>  >>  >  > >
>  >>  >>  >>  >  > >    There seems to be some issue with DefaultMultiIndexAccessor.java. I
>  >>  >>  >>  >  > > got following NPE exception,
>  >>  >>  >>  >  > >
>  >>  >>  >>  >  > >      2008-02-13 07:10:28,021 ERROR [http-7501-Processor6] ReportServiceImpl -
>  >>  >>  >>  >  > > java.lang.NullPointerException
>  >>  >>  >>  >  > >         at org.apache.lucene.indexaccessor.DefaultMultiIndexAccessor.release(DefaultMultiIndexAccessor.java:89)
>  >>  >>  >>  >  > >
>  >>  >>  >>  >  > > Looks like the IndexAccessor for one of the Searcher in the
>  >>  >>  >>  >  > > MultiSearcher returned null. Not sure how is that possible, any ideas
>  >>  >>  >>  >  > > how is that possible?
>  >>  >>  >>  >  > >
>  >>  >>  >>  >  > > In my case it caused a critical error as the writer thread was stuck
>  >>  >>  >>  >  > > forever (we found out after couple of days) because of this,
>  >>  >>  >>  >  > >
>  >>  >>  >>  >  > > "PS thread 9" prio=1 tid=0x00002aac70eb95d0 nid=0x6ba in Object.wait()
>  >>  >>  >>  >  > > [0x0000000047533000..0x0000000047533b80]
>  >>  >>  >>  >  > >         at java.lang.Object.wait(Native Method)
>  >>  >>  >>  >  > >         - waiting on <0x00002aab3e5c7700> (a
>  >>  >>  >>  >  > > org.apache.lucene.indexaccessor.DefaultIndexAccessor)
>  >>  >>  >>  >  > >         at java.lang.Object.wait(Unknown Source)
>  >>  >>  >>  >  > >         at org.apache.lucene.indexaccessor.DefaultIndexAccessor.waitForReadersAndCloseCached(DefaultIndexAccessor.java:593)
>  >>  >>  >>  >  > >         at org.apache.lucene.indexaccessor.DefaultIndexAccessor.release(DefaultIndexAccessor.java:510)
>  >>  >>  >>  >  > >         - locked <0x00002aab3e5c7700> (a
>  >>  >>  >>  >  > > org.apache.lucene.indexaccessor.DefaultIndexAccessor)
>  >>  >>  >>  >  > >
>  >>  >>  >>  >  > > The only way to recover was to re-start the application.
>  >>  >>  >>  >  > >
>  >>  >>  >>  >  > > I use both MultiSearcher and IndexSearcher in my application, I've
>  >>  >>  >>  >  > > looked at your code but not able to pinpoint how can it go wrong? Of
>  >>  >>  >>  >  > > course, you do have to check for null in the
>  >>  >>  >>  >  > > MultiIndexAccessor.release, but how could you get null index accessor
>  >>  >>  >>  >  > > at first place?
>  >>  >>  >>  >  > >
>  >>  >>  >>  >  > > I do call IndexAccessor.close during partitioning of indexes, but the
>  >>  >>  >>  >  > > close should wait for all Searchers to close before doing anything.
>  >>  >>  >>  >  > >
>  >>  >>  >>  >  > > Do you have any updates to your code since 02/04/2008?
>  >>  >>  >>  >  > >
>  >>  >>  >>  >  > > Thanks,
>  >>  >>  >>  >  > > -vivek
>  >>  >>  >>  >  > >
>  >>  >>  >>  >  > > On Feb 6, 2008 8:37 AM, Jay <yu@ai.sri.com> wrote:
>  >>  >>  >>  >  > >
>  >>  >>  >>  >  > >> Thanks for your clarifications, Mark!
>  >>  >>  >>  >  > >>
>  >>  >>  >>  >  > >>
>  >>  >>  >>  >  > >> Jay
>  >>  >>  >>  >  > >>
>  >>  >>  >>  >  > >>
>  >>  >>  >>  >  > >> Mark Miller wrote:
>  >>  >>  >>  >  > >>
>  >>  >>  >>  >  > >>>> 5. Although currently IndexSearcher.close() does almost nothing except
>  >>  >>  >>  >  > >>>> to close the internal index reader, it might be a safer to close
>  >>  >>  >>  >  > >>>> searcher itself as well in closeCachedSearcher(), just in case, the
>  >>  >>  >>  >  > >>>> searcher may have other resources to release in the future version of
>  >>  >>  >>  >  > >>>> Lucene.
>  >>  >>  >>  >  > >>>>
>  >>  >>  >>  >  > >>> Didn't catch that "as well". You are right, great idea Jay, thanks.
>  >>  >>  >>  >  > >>>
>  >>  >>  >>  >  > >>> ---------------------------------------------------------------------
>  >>  >>  >>  >  > >>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>  >>  >>  >>  >  > >>> For additional commands, e-mail: java-user-help@lucene.apache.org
>  >>  >>  >>  >  > >>>
>  >>  >>  >>  >  > >> ---------------------------------------------------------------------
>  >>  >>  >>  >  > >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>  >>  >>  >>  >  > >> For additional commands, e-mail: java-user-help@lucene.apache.org
>  >>  >>  >>  >  > >>
>  >>  >>  >>  >  > >>
>  >>  >>  >>  >  > >>
>  >>  >>  >>  >  > >
>  >>  >>  >>  >  > > ---------------------------------------------------------------------
>  >>  >>  >>  >  > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>  >>  >>  >>  >  > > For additional commands, e-mail: java-user-help@lucene.apache.org
>  >>  >>  >>  >  > >
>  >>  >>  >>  >  > >
>  >>  >>  >>  >  > >
>  >>  >>  >>  >  >
>  >>  >>  >>  >  > ---------------------------------------------------------------------
>  >>  >>  >>  >  > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>  >>  >>  >>  >  > For additional commands, e-mail: java-user-help@lucene.apache.org
>  >>  >>  >>  >  >
>  >>  >>  >>  >  >
>  >>  >>  >>  >
>  >>  >>  >>
>  >>  >>  >>
>  >>  >>  >
>  >>  >>  > ---------------------------------------------------------------------
>  >>  >>  > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>  >>  >>  > For additional commands, e-mail: java-user-help@lucene.apache.org
>  >>  >>  >
>  >>  >>  >
>  >>  >>  >
>  >>  >>
>  >>  >>  ---------------------------------------------------------------------
>  >>  >>  To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>  >>  >>  For additional commands, e-mail: java-user-help@lucene.apache.org
>  >>  >>
>  >>  >>
>  >>  >>
>  >>  >
>  >>  > ---------------------------------------------------------------------
>  >>  > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>  >>  > For additional commands, e-mail: java-user-help@lucene.apache.org
>  >>  >
>  >>  >
>  >>  >
>  >>
>  >>  ---------------------------------------------------------------------
>  >>  To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>  >>  For additional commands, e-mail: java-user-help@lucene.apache.org
>  >>
>  >>
>  >>
>  >
>  > ---------------------------------------------------------------------
>  > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>  > For additional commands, e-mail: java-user-help@lucene.apache.org
>  >
>  >
>  >
>
>  ---------------------------------------------------------------------
>  To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>  For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32861-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 29 03:37:46 2008
Return-Path: <java-user-return-32861-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86461 invoked from network); 29 Feb 2008 03:37:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Feb 2008 03:37:46 -0000
Received: (qmail 93837 invoked by uid 500); 29 Feb 2008 03:37:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93802 invoked by uid 500); 29 Feb 2008 03:37:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93787 invoked by uid 99); 29 Feb 2008 03:37:35 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Feb 2008 19:37:35 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [203.217.22.128] (HELO file1.syd.nuix.com.au) (203.217.22.128)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Feb 2008 03:36:49 +0000
Received: from host68.syd.nuix.com.au (host68.syd.nuix.com.au [192.168.222.68])
	by file1.syd.nuix.com.au (Postfix) with ESMTP id 0407A4A8884
	for <java-user@lucene.apache.org>; Fri, 29 Feb 2008 14:36:40 +1100 (EST)
From: Daniel Noll <daniel@nuix.com>
Organization: Nuix Pty Ltd
To: java-user@lucene.apache.org
Subject: Re: When does QueryParser creates PhraseQueries
Date: Fri, 29 Feb 2008 14:33:19 +1100
User-Agent: KMail/1.9.6 (enterprise 0.20070907.709405)
References: <47C2CB27.2070609@web.de> <200802261130.17303.daniel@nuix.com> <47C4190C.4040109@web.de>
In-Reply-To: <47C4190C.4040109@web.de>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="utf-8"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200802291433.19569.daniel@nuix.com>
X-Virus-Checked: Checked by ClamAV on apache.org

On Wednesday 27 February 2008 00:50:04 duiduder@web.de wrote:
> Looks that this is really hard-coded behaviour, and not Analyzer-specific.

The whitespace part is coded into QueryParser.jj, yes.  So are the quotes 
and : and other query-specific things.

> I want to search for directories with tokenizing them, e.g.
> /home/reuschling - this seems to be not possible with the current
> queryparser.

That's possible by changing the analyser.  For instance StandardAnalyzer will 
tokenise that as two terms, but WhitespaceAnalyzer will tokenise it as one.

> | If you subclass QueryParser than you can override this method and modify
> | it to do whatever evil trick you want to do.
>
> Overriding getFieldQuery() will not work because I can't differ between
> "home/reuschling", which should trigger a PhraseQuery, and home/reuschling
> without apostrophe, which should trigger a BooleanQuery...I will search
> whether I can find a better place for this:)

That much is true.  Likewise, there is no difference between quoting "cat" and 
typing cat without quotes.

You could possibly override the parse(String) method and mangle the string in 
some way so that you know.  So if the user enters /a/b it could pass 
down /a/b, but if they enter "/a/b" it could pass down "SOMETHING/a/b", and 
you then detect the SOMETHING in getFieldQuery.  Just have to make sure the 
something isn't tokenised out by the analyser.

Or you could clone QueryParser.jj itself and modify it to call different 
methods for the two situations.

Daniel

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32862-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 29 03:39:50 2008
Return-Path: <java-user-return-32862-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 87710 invoked from network); 29 Feb 2008 03:39:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Feb 2008 03:39:50 -0000
Received: (qmail 96410 invoked by uid 500); 29 Feb 2008 03:39:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96375 invoked by uid 500); 29 Feb 2008 03:39:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96364 invoked by uid 99); 29 Feb 2008 03:39:39 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Feb 2008 19:39:39 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [203.217.22.128] (HELO file1.syd.nuix.com.au) (203.217.22.128)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Feb 2008 03:38:54 +0000
Received: from host68.syd.nuix.com.au (host68.syd.nuix.com.au [192.168.222.68])
	by file1.syd.nuix.com.au (Postfix) with ESMTP id 7D77D4A8884
	for <java-user@lucene.apache.org>; Fri, 29 Feb 2008 14:38:47 +1100 (EST)
From: Daniel Noll <daniel@nuix.com>
Organization: Nuix Pty Ltd
To: java-user@lucene.apache.org
Subject: Re: Rebuilding Document from index?
Date: Fri, 29 Feb 2008 14:35:26 +1100
User-Agent: KMail/1.9.6 (enterprise 0.20070907.709405)
References: <20080226163228.B1612210214@out2.bezeqint.net>
In-Reply-To: <20080226163228.B1612210214@out2.bezeqint.net>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200802291435.27114.daniel@nuix.com>
X-Virus-Checked: Checked by ClamAV on apache.org

On Wednesday 27 February 2008 03:33:53 Itamar Syn-Hershko wrote:
> I'm still trying to engineer the best possible solution for Lucene with
> Hebrew, right now my path is NOT using a stemmer by default, only by
> explicit request of the user. MoreLikeThis would only return relevant
> results if I will use a non-stemmed scoring and lookup.

This appears to be the case for all languages too, the stemming will skew 
similarity and result in unrelated documents scoring higher than they need 
to.

Some people seem to be working around this by having two fields where one is 
stemmed and the other isn't.  You could then use the stemmed field when doing 
queries but use the non-stemmed field for MoreLikeThis.

Daniel

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32863-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 29 03:51:43 2008
Return-Path: <java-user-return-32863-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95766 invoked from network); 29 Feb 2008 03:51:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Feb 2008 03:51:42 -0000
Received: (qmail 9243 invoked by uid 500); 29 Feb 2008 03:51:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9209 invoked by uid 500); 29 Feb 2008 03:51:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9197 invoked by uid 99); 29 Feb 2008 03:51:32 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Feb 2008 19:51:32 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [203.217.22.128] (HELO file1.syd.nuix.com.au) (203.217.22.128)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Feb 2008 03:50:47 +0000
Received: from host68.syd.nuix.com.au (host68.syd.nuix.com.au [192.168.222.68])
	by file1.syd.nuix.com.au (Postfix) with ESMTP id E84BC4A8886
	for <java-user@lucene.apache.org>; Fri, 29 Feb 2008 14:50:39 +1100 (EST)
From: Daniel Noll <daniel@nuix.com>
Organization: Nuix Pty Ltd
To: java-user@lucene.apache.org
Subject: Re: Inconsistent Search Speed
Date: Fri, 29 Feb 2008 14:47:19 +1100
User-Agent: KMail/1.9.6 (enterprise 0.20070907.709405)
References: <15698325.post@talk.nabble.com> <993E6B60-E3D8-4F61-AE7E-D0FAD72BEAA3@apache.org> <359a92830802270652q2c357f7cve6295823d6ce4605@mail.gmail.com>
In-Reply-To: <359a92830802270652q2c357f7cve6295823d6ce4605@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="utf-8"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200802291447.19318.daniel@nuix.com>
X-Virus-Checked: Checked by ClamAV on apache.org

On Thursday 28 February 2008 01:52:27 Erick Erickson wrote:
> And don't iterate through the Hits object for more than 100 or so hits.
> Like Mark said. Really. Really don't <G>...

Is there a good trick for avoiding this?

Say you have a situation like this...
  - User searches
  - User sees first N hits, perhaps scrolls
  - User chooses to save results to a file

Clearly for the first two, using Hits is normal.  For the third step you would 
be iterating over potentially a larger number of results, so Hits is not 
recommended.  But implementing a HitCollector from scratch to get the same 
results as Hits seems silly, so what is the usual way out of this?  Do you 
re-execute the query using TopDocs?  Or do you call hitDoc(hits.length()) to 
force Hits itself to load the remainder, and then go back to the start and 
iterate through?

Using TopDocs up-front would be desirable but it turns out it tries to 
allocate the maximum you pass in, up-front...

Daniel

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32864-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 29 08:41:54 2008
Return-Path: <java-user-return-32864-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 52414 invoked from network); 29 Feb 2008 08:41:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Feb 2008 08:41:54 -0000
Received: (qmail 45958 invoked by uid 500); 29 Feb 2008 08:41:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45929 invoked by uid 500); 29 Feb 2008 08:41:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45911 invoked by uid 99); 29 Feb 2008 08:41:38 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Feb 2008 00:41:38 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [131.246.120.220] (HELO mailgw1.uni-kl.de) (131.246.120.220)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Feb 2008 08:41:03 +0000
Received: from dfki-1002.dfki.uni-kl.de (dfki-1002.dfki.uni-kl.de [131.246.195.2])
	by mailgw1.uni-kl.de (8.13.8/8.13.8/Debian-3) with ESMTP id m1T8fAIr004228
	for <java-user@lucene.apache.org>; Fri, 29 Feb 2008 09:41:10 +0100
Received: from serv-4100.kl.dfki.de (serv-4100.kl.dfki.de [192.168.41.180])
	by dfki-1002.dfki.uni-kl.de (8.13.8+Sun/8.11.4) with ESMTP id m1T8eLns020597
	for <java-user@lucene.apache.org>; Fri, 29 Feb 2008 09:40:21 +0100 (CET)
Received: from [192.168.41.166] (pc-4176.kl.dfki.de [192.168.41.166])
	by serv-4100.kl.dfki.de (8.13.8+Sun/8.13.8) with ESMTP id m1T8fAhG026760
	for <java-user@lucene.apache.org>; Fri, 29 Feb 2008 09:41:10 +0100 (CET)
Message-ID: <47C7C526.6060101@web.de>
Date: Fri, 29 Feb 2008 09:41:10 +0100
From: duiduder@web.de
User-Agent: Thunderbird 2.0.0.9 (X11/20071114)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: When does QueryParser creates PhraseQueries
References: <47C2CB27.2070609@web.de> <200802261130.17303.daniel@nuix.com> <47C4190C.4040109@web.de> <200802291433.19569.daniel@nuix.com>
In-Reply-To: <200802291433.19569.daniel@nuix.com>
X-Enigmail-Version: 0.95.6
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Thanks a lot for your help Daniel, I have found a solution :)

The 'token' field is public inside QueryParser, and inside
'token.image' you can read the origin String with apostrophe.

Thus, I can differ between the two situations - and simply
return a BooleanQuery in the case there is no apostrophe.

best regards


Christian


Daniel Noll schrieb:
| On Wednesday 27 February 2008 00:50:04 duiduder@web.de wrote:
|> Looks that this is really hard-coded behaviour, and not Analyzer-specific.
|
| The whitespace part is coded into QueryParser.jj, yes.  So are the quotes
| and : and other query-specific things.
|
|> I want to search for directories with tokenizing them, e.g.
|> /home/reuschling - this seems to be not possible with the current
|> queryparser.
|
| That's possible by changing the analyser.  For instance StandardAnalyzer will
| tokenise that as two terms, but WhitespaceAnalyzer will tokenise it as one.
|
|> | If you subclass QueryParser than you can override this method and modify
|> | it to do whatever evil trick you want to do.
|>
|> Overriding getFieldQuery() will not work because I can't differ between
|> "home/reuschling", which should trigger a PhraseQuery, and home/reuschling
|> without apostrophe, which should trigger a BooleanQuery...I will search
|> whether I can find a better place for this:)
|
| That much is true.  Likewise, there is no difference between quoting "cat" and
| typing cat without quotes.
|
| You could possibly override the parse(String) method and mangle the string in
| some way so that you know.  So if the user enters /a/b it could pass
| down /a/b, but if they enter "/a/b" it could pass down "SOMETHING/a/b", and
| you then detect the SOMETHING in getFieldQuery.  Just have to make sure the
| something isn't tokenised out by the analyser.
|
| Or you could clone QueryParser.jj itself and modify it to call different
| methods for the two situations.
|
| Daniel
|
| ---------------------------------------------------------------------
| To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
| For additional commands, e-mail: java-user-help@lucene.apache.org
|
|
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v2.0.4-svn0 (GNU/Linux)

iD8DBQFHx8UlQoTr50f1tpcRAtpvAKCPOzw/DbQeAbcAGr0gclWK+ROJawCfbmu9
9zM2QgBgozErW5sj7xGK1Ns=
=nL71
-----END PGP SIGNATURE-----

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32865-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 29 09:40:18 2008
Return-Path: <java-user-return-32865-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75248 invoked from network); 29 Feb 2008 09:40:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Feb 2008 09:40:17 -0000
Received: (qmail 9048 invoked by uid 500); 29 Feb 2008 09:40:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9013 invoked by uid 500); 29 Feb 2008 09:40:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9002 invoked by uid 99); 29 Feb 2008 09:40:07 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Feb 2008 01:40:07 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [213.162.48.15] (HELO soufre.accelance.net) (213.162.48.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Feb 2008 09:39:32 +0000
Received: from [192.168.3.104] (LSt-Amand-152-32-31-90.w82-127.abo.wanadoo.fr [82.127.74.90])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by soufre.accelance.net (Postfix) with ESMTP id 0722445060
	for <java-user@lucene.apache.org>; Fri, 29 Feb 2008 10:39:37 +0100 (CET)
Message-ID: <47C7E0E0.7080904@garambrogne.net>
Date: Fri, 29 Feb 2008 11:39:28 +0100
From: Mathieu Lecarme <mathieu@garambrogne.net>
User-Agent: Thunderbird 2.0.0.12 (X11/20080213)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: SOC: Lulu, a Lua implementation of Lucene
References: <17331C3E-5774-4F5E-B09E-C9950767BA9D@mac.com>
In-Reply-To: <17331C3E-5774-4F5E-B09E-C9950767BA9D@mac.com>
X-Enigmail-Version: 0.95.6
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

Petite Abeille a crit :
> A proposal for a Lua entry for the "Google Summer of Code" '08:
> A Lua implementation of Lucene.
For me, Lua is just a glue between C coded object, a super config file. 
Like used in lighttpd or WoW.
Lulu will work on top of Lucy?
Did I miss something?

M.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32866-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 29 10:55:00 2008
Return-Path: <java-user-return-32866-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5460 invoked from network); 29 Feb 2008 10:55:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Feb 2008 10:55:00 -0000
Received: (qmail 107 invoked by uid 500); 29 Feb 2008 10:54:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 99973 invoked by uid 500); 29 Feb 2008 10:54:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 99962 invoked by uid 99); 29 Feb 2008 10:54:48 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Feb 2008 02:54:48 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Feb 2008 10:54:01 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1JV2sg-0000aq-AJ
	for java-user@lucene.apache.org; Fri, 29 Feb 2008 02:54:22 -0800
Message-ID: <15756174.post@talk.nabble.com>
Date: Fri, 29 Feb 2008 02:54:22 -0800 (PST)
From: sandyg <gaddamsandeeps@gmail.com>
To: java-user@lucene.apache.org
Subject: how to all documents from
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: gaddamsandeeps@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


How to retreive all the documents from the index directory
please some one help me yar

-- 
View this message in context: http://www.nabble.com/how-to-all-documents-from-tp15756174p15756174.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32867-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 29 11:08:10 2008
Return-Path: <java-user-return-32867-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8797 invoked from network); 29 Feb 2008 11:08:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Feb 2008 11:08:10 -0000
Received: (qmail 15306 invoked by uid 500); 29 Feb 2008 11:07:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15282 invoked by uid 500); 29 Feb 2008 11:07:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15271 invoked by uid 99); 29 Feb 2008 11:07:56 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Feb 2008 03:07:56 -0800
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of shailendra.sharma@gmail.com designates 72.14.204.238 as permitted sender)
Received: from [72.14.204.238] (HELO qb-out-0506.google.com) (72.14.204.238)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Feb 2008 11:07:20 +0000
Received: by qb-out-0506.google.com with SMTP id o21so5459914qba.9
        for <java-user@lucene.apache.org>; Fri, 29 Feb 2008 03:07:29 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:from:to:references:in-reply-to:subject:date:mime-version:content-type:content-transfer-encoding:x-mailer:content-language:thread-index:message-id;
        bh=iK7fuKF3b1EUHgUngSp5AVyi/aEKijBKiauboLcgYBo=;
        b=BlZ4swAgA4cj7k8T3BoDJMZqwKNQJYy9YSPyzUwdOfFgsiMGiXae8jToZD/5phVECBYKpnjUTS4V32mjC1iAsdhn1Nml/psMs3CLnhwshtC/RftgFWEL9CHTazb704DmhsJvQj4hoaX9ne9REKJlIXMLRLM7NTnsGDQlTujBP/s=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=from:to:references:in-reply-to:subject:date:mime-version:content-type:content-transfer-encoding:x-mailer:content-language:thread-index:message-id;
        b=f89Hir3/posFb7QRUWC1Tl0oRcYOinwsa3vzaNeJXwVolmQ7Bmjz35bKph+W49qdflgx1XCKAkI9hiI4aCcs+K+uxCCZGPcsJjffdClx5gmr9fBGr4xRsA7sFPwafhI3omFNUpxNpvezysupk/gnJ4Rt29smhgfoxqDjlGo7+3I=
Received: by 10.114.53.1 with SMTP id b1mr538099waa.134.1204283247604;
        Fri, 29 Feb 2008 03:07:27 -0800 (PST)
Received: from SHAILENDRA ( [122.167.245.177])
        by mx.google.com with ESMTPS id y11sm17195455pod.9.2008.02.29.03.07.25
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Fri, 29 Feb 2008 03:07:27 -0800 (PST)
From: "Shailendra Sharma" <shailendra.sharma@gmail.com>
To: <java-user@lucene.apache.org>
References: <15756174.post@talk.nabble.com>
In-Reply-To: <15756174.post@talk.nabble.com>
Subject: RE: how to all documents from
Date: Fri, 29 Feb 2008 16:37:20 +0530
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 12.0
Content-language: en-us
Thread-Index: Ach6wYbdDp7efx0zQhGT0e32oev38QAAXLPg
Message-ID: <47c7e76e.0b97600a.4f15.fffff02d@mx.google.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Create a match all docs query like following:
	MatchAllDocsQuery matchAllDocsQuery = new MatchAllDocsQuery();
And then search as you search for any other query -
	searcher.search(matchAllDocsQuery) - it returns hit

Thanks,
Shailendra

-----Original Message-----
From: sandyg [mailto:gaddamsandeeps@gmail.com] 
Sent: Friday, February 29, 2008 4:24 PM
To: java-user@lucene.apache.org
Subject: how to all documents from


How to retreive all the documents from the index directory
please some one help me yar

-- 
View this message in context:
http://www.nabble.com/how-to-all-documents-from-tp15756174p15756174.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32868-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 29 12:02:38 2008
Return-Path: <java-user-return-32868-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21507 invoked from network); 29 Feb 2008 12:02:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Feb 2008 12:02:38 -0000
Received: (qmail 80179 invoked by uid 500); 29 Feb 2008 12:02:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79786 invoked by uid 500); 29 Feb 2008 12:02:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79775 invoked by uid 99); 29 Feb 2008 12:02:26 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Feb 2008 04:02:26 -0800
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: 80.76.149.213 is neither permitted nor denied by domain of karl.wettin@gmail.com)
Received: from [80.76.149.213] (HELO ch-smtp02.sth.basefarm.net) (80.76.149.213)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Feb 2008 12:01:37 +0000
Received: from c83-249-106-113.bredband.comhem.se ([83.249.106.113]:59777 helo=kodapan.lan)
	by ch-smtp02.sth.basefarm.net with esmtps (TLSv1:AES256-SHA:256)
	(Exim 4.68)
	(envelope-from <karl.wettin@gmail.com>)
	id 1JV3w4-0003Qj-9B
	for java-user@lucene.apache.org; Fri, 29 Feb 2008 13:01:57 +0100
Message-ID: <47C7F432.8070702@gmail.com>
Date: Fri, 29 Feb 2008 13:01:54 +0100
From: Karl Wettin <karl.wettin@gmail.com>
User-Agent: Thunderbird 2.0.0.12 (Macintosh/20080213)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: How do i get a text summary
References: <36A9B06E6B2FDA4D845E847C36A7AB0298DC52@BLR-MSG-02.i-flex.com>	 <000a01c879bc$ecddf1c0$fe3c10ac@desktop>	 <F59AE5DC4BC14155A7563ACC7889F275@msrvcn04> <47C6E831.70702@gmail.com> <f09790220802281835r2552b358w5421c4fb9209de50@mail.gmail.com>
In-Reply-To: <f09790220802281835r2552b358w5421c4fb9209de50@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Originating-IP: 83.249.106.113
X-Scan-Result: No virus found in message 1JV3w4-0003Qj-9B.
X-Scan-Signature: ch-smtp02.sth.basefarm.net 1JV3w4-0003Qj-9B c768026e66ad42e6656ce81e13114673
X-Virus-Checked: Checked by ClamAV on apache.org

h t skrev:
> Where is the introduction of below algorithm? Thanks.

I can't recall where I picked it up, but something like this:

Score terms by count and distribution. A term occuring 20 times in the 
same paragraph is not as important as a term occuring 20 times over 10 
paragraphs. Similar terms affect each others score (I used ngrams and I 
also detected abbreviations). Be sure to remove stop words using some 
term reduction algorithm. Language detection makes sense. Rank sentances 
by length normalized term score. The top n sentances is your summary. If 
enough of these sentances are parts of the same paragraph and the 
paragraph is small enough, that is your summary instead.

I hope this helps.


     karl


> "Very simple algorithmic solutions usually involve ranking top senstances
> by looking at distribution of terms in sentances, paragraphs and the
> whole document. I implemented something like this a couple of years back
> that worked fairly well."
> 
> 
> 
> 2008/2/29, Karl Wettin <karl.wettin@gmail.com>:
>> spring@gmx.eu skrev:
>>
>>>> If you want something from an index it has to be IN the
>>>> index. So, store a
>>>> summary field in each document and make sure that field is part of the
>>>> query.
>>> And how could one create automatically such a summary?
>>> Taking the first 2 lines of a document makes not always much sense.
>>> How does google this?
>>
>> Google don't summarize, they highlight parts that match the query. See
>> previous reponses.
>>
>> If you really want to summarize there are a number of more and less
>> scientific ways to figure out what's important and what's not.
>>
>> Very simple algorithmic solutions usually involve ranking top senstances
>> by looking at distribution of terms in sentances, paragraphs and the
>> whole document. I implemented something like this a couple of years back
>> that worked fairly well.
>>
>> Citeseer is a great source for papers on pretty much any IR related
>> subject: <http://citeseer.ist.psu.edu/cs?cs=1&q=text+summarization>
>>
>>
>>
>>     karl
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32869-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 29 12:09:45 2008
Return-Path: <java-user-return-32869-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 23203 invoked from network); 29 Feb 2008 12:09:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Feb 2008 12:09:45 -0000
Received: (qmail 91483 invoked by uid 500); 29 Feb 2008 12:09:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91451 invoked by uid 500); 29 Feb 2008 12:09:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 91440 invoked by uid 99); 29 Feb 2008 12:09:34 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Feb 2008 04:09:34 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.5] (HELO spunkymail-a19.g.dreamhost.com) (208.97.132.5)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Feb 2008 12:08:59 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a19.g.dreamhost.com (Postfix) with ESMTP id AAFB611EC6
	for <java-user@lucene.apache.org>; Fri, 29 Feb 2008 04:09:09 -0800 (PST)
Message-Id: <B280B1F8-EC33-4307-85B8-8617FC8DEA41@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <47C7E0E0.7080904@garambrogne.net>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed; delsp=yes
Content-Transfer-Encoding: quoted-printable
Mime-Version: 1.0 (Apple Message framework v919.2)
Subject: Re: SOC: Lulu, a Lua implementation of Lucene
Date: Fri, 29 Feb 2008 07:09:06 -0500
References: <17331C3E-5774-4F5E-B09E-C9950767BA9D@mac.com> <47C7E0E0.7080904@garambrogne.net>
X-Mailer: Apple Mail (2.919.2)
X-Virus-Checked: Checked by ClamAV on apache.org


On Feb 29, 2008, at 5:39 AM, Mathieu Lecarme wrote:

> Petite Abeille a =E9crit :
>> A proposal for a Lua entry for the "Google Summer of Code" '08:
>> A Lua implementation of Lucene.
> For me, Lua is just a glue between C coded object, a super config =20
> file. Like used in lighttpd or WoW.
> Lulu will work on top of Lucy?

That implies the Lucy actually is under development...  Perhaps they =20
will take up work on Lucy...=

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32870-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 29 12:55:37 2008
Return-Path: <java-user-return-32870-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 43448 invoked from network); 29 Feb 2008 12:55:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Feb 2008 12:55:37 -0000
Received: (qmail 54253 invoked by uid 500); 29 Feb 2008 12:55:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54139 invoked by uid 500); 29 Feb 2008 12:55:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54128 invoked by uid 99); 29 Feb 2008 12:55:25 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Feb 2008 04:55:25 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Feb 2008 12:54:49 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1JV4lP-0005zE-3R
	for java-user@lucene.apache.org; Fri, 29 Feb 2008 04:54:59 -0800
Message-ID: <15757977.post@talk.nabble.com>
Date: Fri, 29 Feb 2008 04:54:59 -0800 (PST)
From: sandyg <gaddamsandeeps@gmail.com>
To: java-user@lucene.apache.org
Subject: RE: how to all documents from
In-Reply-To: <47c7e76e.0b97600a.4f15.fffff02d@mx.google.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: gaddamsandeeps@gmail.com
References: <15756174.post@talk.nabble.com> <47c7e76e.0b97600a.4f15.fffff02d@mx.google.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Thanks for the immediate response Shailendra Sharma u had saved a lot of my
time .
Once again thanks for ur reply 

Shailendra Sharma wrote:
> 
> Create a match all docs query like following:
> 	MatchAllDocsQuery matchAllDocsQuery = new MatchAllDocsQuery();
> And then search as you search for any other query -
> 	searcher.search(matchAllDocsQuery) - it returns hit
> 
> Thanks,
> Shailendra
> 
> -----Original Message-----
> From: sandyg [mailto:gaddamsandeeps@gmail.com] 
> Sent: Friday, February 29, 2008 4:24 PM
> To: java-user@lucene.apache.org
> Subject: how to all documents from
> 
> 
> How to retreive all the documents from the index directory
> please some one help me yar
> 
> -- 
> View this message in context:
> http://www.nabble.com/how-to-all-documents-from-tp15756174p15756174.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/how-to-all-documents-from-tp15756174p15757977.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32871-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 29 14:43:03 2008
Return-Path: <java-user-return-32871-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89392 invoked from network); 29 Feb 2008 14:43:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Feb 2008 14:43:03 -0000
Received: (qmail 63394 invoked by uid 500); 29 Feb 2008 14:42:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63370 invoked by uid 500); 29 Feb 2008 14:42:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63358 invoked by uid 99); 29 Feb 2008 14:42:51 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Feb 2008 06:42:51 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [213.162.48.15] (HELO soufre.accelance.net) (213.162.48.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Feb 2008 14:42:16 +0000
Received: from [192.168.3.104] (LSt-Amand-152-32-31-90.w82-127.abo.wanadoo.fr [82.127.74.90])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by soufre.accelance.net (Postfix) with ESMTP id 688FD45252
	for <java-user@lucene.apache.org>; Fri, 29 Feb 2008 15:42:21 +0100 (CET)
Message-ID: <47C819CC.5000201@garambrogne.net>
Date: Fri, 29 Feb 2008 15:42:20 +0100
From: Mathieu Lecarme <mathieu@garambrogne.net>
User-Agent: Thunderbird 2.0.0.12 (X11/20080213)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: SOC: Lulu, a Lua implementation of Lucene
References: <17331C3E-5774-4F5E-B09E-C9950767BA9D@mac.com> <47C7E0E0.7080904@garambrogne.net> <B280B1F8-EC33-4307-85B8-8617FC8DEA41@apache.org>
In-Reply-To: <B280B1F8-EC33-4307-85B8-8617FC8DEA41@apache.org>
X-Enigmail-Version: 0.95.6
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

Grant Ingersoll a crit :
>
> On Feb 29, 2008, at 5:39 AM, Mathieu Lecarme wrote:
>
>> Petite Abeille a crit :
>>> A proposal for a Lua entry for the "Google Summer of Code" '08:
>>> A Lua implementation of Lucene.
>> For me, Lua is just a glue between C coded object, a super config 
>> file. Like used in lighttpd or WoW.
>> Lulu will work on top of Lucy?
>
> That implies the Lucy actually is under development...  Perhaps they 
> will take up work on Lucy...
In other hands, a Lucy with C for persistance and parsing, and Lua for 
filter and other fine configuration can be great.

M.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32872-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 29 15:47:29 2008
Return-Path: <java-user-return-32872-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89794 invoked from network); 29 Feb 2008 15:47:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Feb 2008 15:47:29 -0000
Received: (qmail 85517 invoked by uid 500); 29 Feb 2008 15:47:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85490 invoked by uid 500); 29 Feb 2008 15:47:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85479 invoked by uid 99); 29 Feb 2008 15:47:17 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Feb 2008 07:47:17 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Feb 2008 15:46:42 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1JV7Rj-0006RO-P1
	for java-user@lucene.apache.org; Fri, 29 Feb 2008 07:46:51 -0800
Message-ID: <15761243.post@talk.nabble.com>
Date: Fri, 29 Feb 2008 07:46:51 -0800 (PST)
From: JensBurkhardt <jensburkhardt@web.de>
To: java-user@lucene.apache.org
Subject: MultiFieldQueryParser - BooleanClause.Occur
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: jensburkhardt@web.de
X-Virus-Checked: Checked by ClamAV on apache.org


Hey everybody,

I read that it's possible to generate a query like:

(title:term1 OR author:term1) AND (title:term2 OR author:term2)

and so on. I also read that BooleanClause.Occur should help me handle this
problem.
But i have to admit that i totally don't understand how to use it.
If someone can explain or has a link to an explanation, this would be
terrific

Thanks and best regards

Jens Burkhardt
-- 
View this message in context: http://www.nabble.com/MultiFieldQueryParser---BooleanClause.Occur-tp15761243p15761243.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32873-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 29 17:05:30 2008
Return-Path: <java-user-return-32873-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25150 invoked from network); 29 Feb 2008 17:05:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Feb 2008 17:05:30 -0000
Received: (qmail 45931 invoked by uid 500); 29 Feb 2008 17:05:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45901 invoked by uid 500); 29 Feb 2008 17:05:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45890 invoked by uid 99); 29 Feb 2008 17:05:18 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Feb 2008 09:05:18 -0800
X-ASF-Spam-Status: No, hits=-2.0 required=10.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of gresh@us.ibm.com designates 32.97.182.143 as permitted sender)
Received: from [32.97.182.143] (HELO e3.ny.us.ibm.com) (32.97.182.143)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Feb 2008 17:04:31 +0000
Received: from d01relay02.pok.ibm.com (d01relay02.pok.ibm.com [9.56.227.234])
	by e3.ny.us.ibm.com (8.13.8/8.13.8) with ESMTP id m1TH4nqM004224
	for <java-user@lucene.apache.org>; Fri, 29 Feb 2008 12:04:49 -0500
Received: from d01av01.pok.ibm.com (d01av01.pok.ibm.com [9.56.224.215])
	by d01relay02.pok.ibm.com (8.13.8/8.13.8/NCO v8.7) with ESMTP id m1TH4ngI252596
	for <java-user@lucene.apache.org>; Fri, 29 Feb 2008 12:04:49 -0500
Received: from d01av01.pok.ibm.com (loopback [127.0.0.1])
	by d01av01.pok.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id m1TH4mk3017618
	for <java-user@lucene.apache.org>; Fri, 29 Feb 2008 12:04:48 -0500
Received: from d01ml605.pok.ibm.com (d01ml605.pok.ibm.com [9.56.227.91])
	by d01av01.pok.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id m1TH4mtt017607
	for <java-user@lucene.apache.org>; Fri, 29 Feb 2008 12:04:48 -0500
In-Reply-To: <15761243.post@talk.nabble.com>
To: java-user@lucene.apache.org
MIME-Version: 1.0
Subject: Re: MultiFieldQueryParser - BooleanClause.Occur
X-Mailer: Lotus Notes Release 7.0 HF277 June 21, 2006
From: Donna L Gresh <gresh@us.ibm.com>
Message-ID: <OFFE3783A0.D44B2683-ON852573FE.005CFAEC-852573FE.005DC2B1@us.ibm.com>
Date: Fri, 29 Feb 2008 12:04:47 -0500
X-MIMETrack: Serialize by Router on D01ML605/01/M/IBM(Release 8.0|August 02, 2007) at 02/29/2008
 12:04:48,
	Serialize complete at 02/29/2008 12:04:48
Content-Type: multipart/alternative; boundary="=_alternative 005DC251852573FE_="
X-Virus-Checked: Checked by ClamAV on apache.org

--=_alternative 005DC251852573FE_=
Content-Type: text/plain; charset="US-ASCII"

I believe something like the following will do what you want:

QueryParser parserTitle = new QueryParser("title", analyzer);
QueryParser parserAuthor = new QueryParser("author", analyzer);

BooleanQuery overallquery = new BooleanQuery();

BolleanQuery firstQuery = new BooleanQuery();
Query q1= parserTitle.parse(term1);
Query q2= parserAuthor.parse(term1);
firstQuery.add(q1, BooleanClause.Occur.SHOULD); //should is like an OR
firstQuery.add(q2, BooleanClause.Occur.SHOULD); 

BolleanQuery secondQuery = new BooleanQuery();
Query q3= parserTitle.parse(term2);
Query q4= parserAuthor.parse(term2);
secondQuery.add(q3, BooleanClause.Occur.SHOULD);
secondQuery.add(q4, BooleanClause.Occur.SHOULD);

overallquery.add(firstQuery, BooleanClause.Occur.MUST); //must is like an 
AND
overallquery.add(secondQuery, BooleanClause.Occur.MUST):

Donna  Gresh



JensBurkhardt <jensburkhardt@web.de> wrote on 02/29/2008 10:46:51 AM:

> 
> Hey everybody,
> 
> I read that it's possible to generate a query like:
> 
> (title:term1 OR author:term1) AND (title:term2 OR author:term2)
> 
> and so on. I also read that BooleanClause.Occur should help me handle 
this
> problem.
> But i have to admit that i totally don't understand how to use it.
> If someone can explain or has a link to an explanation, this would be
> terrific
> 
> Thanks and best regards
> 
> Jens Burkhardt
> -- 
> View this message in context: http://www.nabble.
> com/MultiFieldQueryParser---BooleanClause.Occur-tp15761243p15761243.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 

--=_alternative 005DC251852573FE_=--

From java-user-return-32874-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 29 18:11:07 2008
Return-Path: <java-user-return-32874-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61176 invoked from network); 29 Feb 2008 18:11:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Feb 2008 18:11:07 -0000
Received: (qmail 43678 invoked by uid 500); 29 Feb 2008 18:10:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42829 invoked by uid 500); 29 Feb 2008 18:10:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42816 invoked by uid 99); 29 Feb 2008 18:10:55 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Feb 2008 10:10:55 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of bill.w.au@gmail.com designates 72.14.214.225 as permitted sender)
Received: from [72.14.214.225] (HELO hu-out-0506.google.com) (72.14.214.225)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Feb 2008 18:10:18 +0000
Received: by hu-out-0506.google.com with SMTP id 27so4598018hub.15
        for <java-user@lucene.apache.org>; Fri, 29 Feb 2008 10:10:26 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=0MxDIPvQ2xlnX3Z8CqaqxKkT5lIHakQDsnnlnK4aVik=;
        b=YWQ/kb7SuTuXBcKKkXCazaWWOPaMyZgS/RMhGV0mryhPk9TZTi73O3ZiMZFEbHb+xkJqUUwt87eCiMGOuudlaArxACbSwOD7Awp+zgCq4cqpTnJT9x8Y05A8sQRP++19TEUGvdD9dqVO61qxHBZLYpfjvM8sL6CZgxWR4P3c+IU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=iNikOrY4MCjtNhx9+iZMOrHFJUeIfdhWmLO7G12fEucV+zwfkOt7y+kRbQ2vQ9Az/nokLEBUrNP91gkXGnzSUNcQ02gXnNHCdCnpGADjBz0Gi12ht5cXyOefspzkSvtxwMU2PpLP0A9K58B112dWNPEJ4j7sICk0aFKGFWah35g=
Received: by 10.67.15.8 with SMTP id s8mr1911747ugi.42.1204308626151;
        Fri, 29 Feb 2008 10:10:26 -0800 (PST)
Received: by 10.66.252.3 with HTTP; Fri, 29 Feb 2008 10:10:26 -0800 (PST)
Message-ID: <3b5f72030802291010h1c36806cmf42cdc05fbc7ce07@mail.gmail.com>
Date: Fri, 29 Feb 2008 13:10:26 -0500
From: "Bill Au" <bill.w.au@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Indexing source code files
In-Reply-To: <p06240806c3ec8e7407ed@192.168.1.39>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_26722_30270853.1204308626144"
References: <15738615.post@talk.nabble.com>
	 <p06240806c3ec8e7407ed@192.168.1.39>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_26722_30270853.1204308626144
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

There is an opensource project, OpenGrok, that uses Lucene for indexing and
searching source code:

http://opensolaris.org/os/project/opengrok/

It has Analyzers for different type of source files.  It does link source
code to requirements but you can
take a look at the source code to see how it does the indexing.

Bill

On Thu, Feb 28, 2008 at 11:18 AM, Ken Krugler <kkrugler_lists@transpac.com>
wrote:

> >I am working on some sort of search mechanism to link a requirement (i.e.
> a
> >query) to source code files (i.e., documents). For that purpose, I
> indexed
> >the source code files using Lucene. Contrary to traditional natural
> language
> >search scenario, we search for code files that are relevant to a given
> >requirement. One problem here is that the source files usually contain a
> lot
> >of abbreviations, words joint by _ or combination of words and/or
> >abbreviations (e.x., getAccountBalanceTbl).  I am wondering whether
> anyone
> >of you already did indexing of (source) files or documents which contain
> >that kind of words.
>
> Yes, that's been something we've spent a fair amount of time on...see
> http://www.krugle.org (public code search).
>
> As Mathieu noted, the first thing you really want to do is split the
> file up into at least comments vs. code. Then you can use a regular
> analyzer (or perhaps something more human language-specific, e.g.
> with stemming support) on the comment text, and your own custom
> tokenizer on the code.
>
> In the code, you might further want to treat literals (strings, etc)
> differently than other terms.
>
> And in "real" code terms, then you want to do essentially synonym
> processing, where youhttp://opensolaris.org/os/project/opengrok/ turn a
> single term into multiple terms based on
> the automatic splitting of the term using '_', '-', camelCasing,
> letter/digit transitions, etc.
>
> -- Ken
> --
> Ken Krugler
> Krugle, Inc.
> +1 530-210-6378
> "If you can't find it, you can't fix it"
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_26722_30270853.1204308626144--

From java-user-return-32875-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 29 18:30:09 2008
Return-Path: <java-user-return-32875-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71667 invoked from network); 29 Feb 2008 18:30:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Feb 2008 18:30:09 -0000
Received: (qmail 75828 invoked by uid 500); 29 Feb 2008 18:29:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75803 invoked by uid 500); 29 Feb 2008 18:29:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75788 invoked by uid 99); 29 Feb 2008 18:29:56 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Feb 2008 10:29:56 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [213.46.255.22] (HELO viefep19-int.chello.at) (213.46.255.22)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Feb 2008 18:29:09 +0000
Received: from genuine.home ([84.112.136.139]) by viefep19-int.chello.at
          (InterMail vM.7.08.02.00 201-2186-121-20061213) with ESMTP
          id <20080229182928.HCWP26776.viefep19-int.chello.at@genuine.home>
          for <java-user@lucene.apache.org>;
          Fri, 29 Feb 2008 19:29:28 +0100
Received: from ncvielp07.home ([192.168.1.51])
	by genuine.home with esmtpa (Exim 4.50)
	id 1JV9yA-0004yz-Tg
	for java-user@lucene.apache.org; Fri, 29 Feb 2008 19:28:31 +0100
Message-ID: <47C84F09.9000802@fischer.name>
Date: Fri, 29 Feb 2008 19:29:29 +0100
From: Markus Fischer <markus@fischer.name>
User-Agent: Thunderbird 2.0.0.9 (Windows/20071031)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Alternate spelling suggestion (was [Resent] Document boosting
 based on .. semantics? )
References: <47BBDBF2.4060502@fischer.name> <47BC24FF.3030805@garambrogne.net>
In-Reply-To: <47BC24FF.3030805@garambrogne.net>
X-Enigmail-Version: 0.95.6
OpenPGP: id=C2272BD0;
	url=http://markus.fischer.name/my_public_key.txt
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Spam-Score: -31
X-Spam-Level: ---
X-Spam-Report: Spam detection software, running on the system "genuine.home", has
	identified this incoming email as possible spam.  The original message
	has been attached to this so you can view it (if it isn't spam) or label
	similar future email.  If you have any questions, see
	the administrator of that system for details.
	Content preview:  Hi Mathieu Lecarme wrote: >> On a related topic, I'm
	also searching for a way to suggest alternate >> spelling of words to
	the user, when we found a word which is very less >> frequent used in
	the index or not in the index at all. I'm Austrian >> based, when I
	e.g. search for "retthich" (wrong spelled "rettich" >> which is
	radish), Google suggests me the proper spelled word. I'm >> searching
	for a way to figure how to accomplish this, but again this >> may be
	lucene off-topic and/or I should properly start a separate >> thread
	... > you can use the ngram pattern and levestein distance to find near
	words. > I try with phonetic and aspell dictionnary. [...] 
	Content analysis details:   (-3.2 points, 5.0 required)
	pts rule name              description
	---- ---------------------- --------------------------------------------------
	-3.3 ALL_TRUSTED            Did not pass through any untrusted hosts
	0.0 BAYES_50               BODY: Bayesian spam probability is 40 to 60%
	[score: 0.4998]
	0.0 AWL                    AWL: From: address is in the auto white-list
X-Virus-Checked: Checked by ClamAV on apache.org

Hi

Mathieu Lecarme wrote:
>> On a related topic, I'm also searching for a way to suggest alternate 
>> spelling of words to the user, when we found a word which is very less 
>> frequent used in the index or not in the index at all. I'm Austrian 
>> based, when I e.g. search for "retthich" (wrong spelled "rettich" 
>> which is radish), Google suggests me the proper spelled word. I'm 
>> searching for a way to figure how to accomplish this, but again this 
>> may be lucene off-topic and/or I should properly start a separate 
>> thread ...
> you can use the ngram pattern and levestein distance to find near words.
> I try with  phonetic and aspell dictionnary.

Thanks for the dictionary hint. So obvious, but still I haven't thought about 
it until you mentioned it!

I've had really great success with the following pattern:

* after the Lucene index was created, I generate a myspell compatible 
dictionary from it

* when the search returns no result, every term is ran through myspell suggestion

* the top five myspell suggestion of each term are re-sorted by their 
frequency from the Lucene index

Additionally: when the user only entered a single term, I'm also providing the 
second best results as alternative (did you mean x or y?).

The results have been very good so far, thanks again!

- Markus

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32876-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 29 18:43:33 2008
Return-Path: <java-user-return-32876-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79296 invoked from network); 29 Feb 2008 18:43:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Feb 2008 18:43:33 -0000
Received: (qmail 94713 invoked by uid 500); 29 Feb 2008 18:43:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94678 invoked by uid 500); 29 Feb 2008 18:43:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94667 invoked by uid 99); 29 Feb 2008 18:43:21 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Feb 2008 10:43:21 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [194.109.24.29] (HELO smtp-vbr9.xs4all.nl) (194.109.24.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Feb 2008 18:42:47 +0000
Received: from k8u.lan (porta.xs4all.nl [80.127.24.69])
	by smtp-vbr9.xs4all.nl (8.13.8/8.13.8) with ESMTP id m1TIgtBD073478
	for <java-user@lucene.apache.org>; Fri, 29 Feb 2008 19:42:56 +0100 (CET)
	(envelope-from paul.elschot@xs4all.nl)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: java-user@lucene.apache.org
Subject: Re: MultiFieldQueryParser - BooleanClause.Occur
Date: Fri, 29 Feb 2008 19:42:57 +0100
User-Agent: KMail/1.9.6 (enterprise 0.20070907.709405)
References: <OFFE3783A0.D44B2683-ON852573FE.005CFAEC-852573FE.005DC2B1@us.ibm.com>
In-Reply-To: <OFFE3783A0.D44B2683-ON852573FE.005CFAEC-852573FE.005DC2B1@us.ibm.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="utf-8"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200802291942.58036.paul.elschot@xs4all.nl>
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org

Op Friday 29 February 2008 18:04:47 schreef Donna L Gresh:
> I believe something like the following will do what you want:
>
> QueryParser parserTitle = new QueryParser("title", analyzer);
> QueryParser parserAuthor = new QueryParser("author", analyzer);
>
> BooleanQuery overallquery = new BooleanQuery();
>
> BolleanQuery firstQuery = new BooleanQuery();
> Query q1= parserTitle.parse(term1);
> Query q2= parserAuthor.parse(term1);
> firstQuery.add(q1, BooleanClause.Occur.SHOULD); //should is like an
> OR firstQuery.add(q2, BooleanClause.Occur.SHOULD);
>
> BolleanQuery secondQuery = new BooleanQuery();
> Query q3= parserTitle.parse(term2);
> Query q4= parserAuthor.parse(term2);
> secondQuery.add(q3, BooleanClause.Occur.SHOULD);
> secondQuery.add(q4, BooleanClause.Occur.SHOULD);
>
> overallquery.add(firstQuery, BooleanClause.Occur.MUST); //must is
> like an AND
> overallquery.add(secondQuery, BooleanClause.Occur.MUST):

There is no need for a QueryParser in this case when using a
TermQuery instead of a Query for q1, q2, q3 and q4:

TermQuery q1 = new TermQuery(new Term("title", "term1"));

Regards,
Paul Elschot


>
> Donna  Gresh
>
> JensBurkhardt <jensburkhardt@web.de> wrote on 02/29/2008 10:46:51 AM:
> > Hey everybody,
> >
> > I read that it's possible to generate a query like:
> >
> > (title:term1 OR author:term1) AND (title:term2 OR author:term2)
> >
> > and so on. I also read that BooleanClause.Occur should help me
> > handle
>
> this
>
> > problem.
> > But i have to admit that i totally don't understand how to use it.
> > If someone can explain or has a link to an explanation, this would
> > be terrific
> >
> > Thanks and best regards
> >
> > Jens Burkhardt
> > --
> > View this message in context: http://www.nabble.
> > com/MultiFieldQueryParser---BooleanClause.Occur-tp15761243p15761243
> >.html Sent from the Lucene - Java Users mailing list archive at
> > Nabble.com.
> >
> >
> > -------------------------------------------------------------------
> >-- To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32877-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 29 18:53:40 2008
Return-Path: <java-user-return-32877-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86565 invoked from network); 29 Feb 2008 18:53:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Feb 2008 18:53:40 -0000
Received: (qmail 7090 invoked by uid 500); 29 Feb 2008 18:53:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7059 invoked by uid 500); 29 Feb 2008 18:53:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7048 invoked by uid 99); 29 Feb 2008 18:53:29 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Feb 2008 10:53:29 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [212.27.42.28] (HELO smtp2-g19.free.fr) (212.27.42.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Feb 2008 18:52:43 +0000
Received: from smtp2-g19.free.fr (localhost.localdomain [127.0.0.1])
	by smtp2-g19.free.fr (Postfix) with ESMTP id AEE1212B6C1
	for <java-user@lucene.apache.org>; Fri, 29 Feb 2008 19:53:03 +0100 (CET)
Received: from [192.168.1.100] (ze.garambrogne.net [82.227.122.98])
	by smtp2-g19.free.fr (Postfix) with ESMTP id 8605512B6B2
	for <java-user@lucene.apache.org>; Fri, 29 Feb 2008 19:53:03 +0100 (CET)
Message-Id: <813F3A15-9AB5-473F-B8E9-39ACCC544CEA@garambrogne.net>
From: Mathieu Lecarme <mathieu@garambrogne.net>
To: java-user@lucene.apache.org
In-Reply-To: <47C84F09.9000802@fischer.name>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v919.2)
Subject: Re: Alternate spelling suggestion (was [Resent] Document boosting based on .. semantics? )
Date: Fri, 29 Feb 2008 19:53:02 +0100
References: <47BBDBF2.4060502@fischer.name> <47BC24FF.3030805@garambrogne.net> <47C84F09.9000802@fischer.name>
X-Mailer: Apple Mail (2.919.2)
X-Virus-Checked: Checked by ClamAV on apache.org


> Hi
>
> Mathieu Lecarme wrote:
>>> On a related topic, I'm also searching for a way to suggest  
>>> alternate spelling of words to the user, when we found a word  
>>> which is very less frequent used in the index or not in the index  
>>> at all. I'm Austrian based, when I e.g. search for  
>>> "retthich" (wrong spelled "rettich" which is radish), Google  
>>> suggests me the proper spelled word. I'm searching for a way to  
>>> figure how to accomplish this, but again this may be lucene off- 
>>> topic and/or I should properly start a separate thread ...
>> you can use the ngram pattern and levestein distance to find near  
>> words.
>> I try with  phonetic and aspell dictionnary.
>
> Thanks for the dictionary hint. So obvious, but still I haven't  
> thought about it until you mentioned it!
>
> I've had really great success with the following pattern:
>
> * after the Lucene index was created, I generate a myspell  
> compatible dictionary from it
>
> * when the search returns no result, every term is ran through  
> myspell suggestion
>
> * the top five myspell suggestion of each term are re-sorted by  
> their frequency from the Lucene index
>
> Additionally: when the user only entered a single term, I'm also  
> providing the second best results as alternative (did you mean x or  
> y?).
>
> The results have been very good so far, thanks again!
>
> - Markus

I submit a patch for doing that nicely :
https://issues.apache.org/jira/browse/LUCENE-1190

Here is an example code :

LexiconReader lexiconReader = new DirectoryReader(directory);
Lexicon lexicon = new Lexicon(new RAMDirectory());
lexicon.addAnalyser(new NGramAnalyzer());
lexicon.read(lexiconReader);
QueryParser parser = new QueryParser("txt", new WhitespaceAnalyzer());
Query query = parser.parse("bio:brawn");
SuggestiveSearcher searcher = new SuggestiveSearcher(new  
IndexSearcher(directory), lexicon);
SuggestiveHits hits = searcher.searchWithSuggestions(query);
System.out.println(hits.getSuggestedQuery());

In this example, a lexicon is build from a directory, with a Ngram  
analyzer.
The directory contains the term "brown" in field "bio".
Hits is final, so, you can't heritate from it, that's why there is a  
SuggestiveHits.
SuggestiveHits has a thresold, if there's to few answer, similar word  
search is triggered.

Using myspell dictionnary is a good idea, i'll implement this.

M.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32878-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 29 18:57:37 2008
Return-Path: <java-user-return-32878-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88871 invoked from network); 29 Feb 2008 18:57:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Feb 2008 18:57:37 -0000
Received: (qmail 19630 invoked by uid 500); 29 Feb 2008 18:57:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19444 invoked by uid 500); 29 Feb 2008 18:57:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19433 invoked by uid 99); 29 Feb 2008 18:57:26 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Feb 2008 10:57:26 -0800
X-ASF-Spam-Status: No, hits=-2.0 required=10.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of gresh@us.ibm.com designates 32.97.182.146 as permitted sender)
Received: from [32.97.182.146] (HELO e6.ny.us.ibm.com) (32.97.182.146)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Feb 2008 18:56:50 +0000
Received: from d01relay02.pok.ibm.com (d01relay02.pok.ibm.com [9.56.227.234])
	by e6.ny.us.ibm.com (8.13.8/8.13.8) with ESMTP id m1TIwps6007008
	for <java-user@lucene.apache.org>; Fri, 29 Feb 2008 13:58:51 -0500
Received: from d01av05.pok.ibm.com (d01av05.pok.ibm.com [9.56.224.195])
	by d01relay02.pok.ibm.com (8.13.8/8.13.8/NCO v8.7) with ESMTP id m1TIurNO207078
	for <java-user@lucene.apache.org>; Fri, 29 Feb 2008 13:56:53 -0500
Received: from d01av05.pok.ibm.com (loopback [127.0.0.1])
	by d01av05.pok.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id m1TItSH6014227
	for <java-user@lucene.apache.org>; Fri, 29 Feb 2008 13:55:28 -0500
Received: from d01ml605.pok.ibm.com (d01ml605.pok.ibm.com [9.56.227.91])
	by d01av05.pok.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id m1TItSTB014224
	for <java-user@lucene.apache.org>; Fri, 29 Feb 2008 13:55:28 -0500
In-Reply-To: <200802291942.58036.paul.elschot@xs4all.nl>
To: java-user@lucene.apache.org
MIME-Version: 1.0
Subject: Re: MultiFieldQueryParser - BooleanClause.Occur
X-Mailer: Lotus Notes Release 7.0 HF277 June 21, 2006
From: Donna L Gresh <gresh@us.ibm.com>
Message-ID: <OF0A432807.2A72D521-ON852573FE.0067EF18-852573FE.0068059C@us.ibm.com>
Date: Fri, 29 Feb 2008 13:56:51 -0500
X-MIMETrack: Serialize by Router on D01ML605/01/M/IBM(Release 8.0|August 02, 2007) at 02/29/2008
 13:56:52,
	Serialize complete at 02/29/2008 13:56:52
Content-Type: multipart/alternative; boundary="=_alternative 00680517852573FE_="
X-Virus-Checked: Checked by ClamAV on apache.org

--=_alternative 00680517852573FE_=
Content-Type: text/plain; charset="US-ASCII"

Paul-
Thanks (that was one of my ulterior motives for answering the question; I 
figured if there was something inefficient or unnecessary about my 
approach, I'd hear about it :) )

Donna Gresh


Paul Elschot <paul.elschot@xs4all.nl> wrote on 02/29/2008 01:42:57 PM:

> Op Friday 29 February 2008 18:04:47 schreef Donna L Gresh:
> > I believe something like the following will do what you want:
> >
> > QueryParser parserTitle = new QueryParser("title", analyzer);
> > QueryParser parserAuthor = new QueryParser("author", analyzer);
> >
> > BooleanQuery overallquery = new BooleanQuery();
> >
> > BolleanQuery firstQuery = new BooleanQuery();
> > Query q1= parserTitle.parse(term1);
> > Query q2= parserAuthor.parse(term1);
> > firstQuery.add(q1, BooleanClause.Occur.SHOULD); //should is like an
> > OR firstQuery.add(q2, BooleanClause.Occur.SHOULD);
> >
> > BolleanQuery secondQuery = new BooleanQuery();
> > Query q3= parserTitle.parse(term2);
> > Query q4= parserAuthor.parse(term2);
> > secondQuery.add(q3, BooleanClause.Occur.SHOULD);
> > secondQuery.add(q4, BooleanClause.Occur.SHOULD);
> >
> > overallquery.add(firstQuery, BooleanClause.Occur.MUST); //must is
> > like an AND
> > overallquery.add(secondQuery, BooleanClause.Occur.MUST):
> 
> There is no need for a QueryParser in this case when using a
> TermQuery instead of a Query for q1, q2, q3 and q4:
> 
> TermQuery q1 = new TermQuery(new Term("title", "term1"));
> 
> Regards,
> Paul Elschot
> 
> 
> >
> > Donna  Gresh
> >
> > JensBurkhardt <jensburkhardt@web.de> wrote on 02/29/2008 10:46:51 AM:
> > > Hey everybody,
> > >
> > > I read that it's possible to generate a query like:
> > >
> > > (title:term1 OR author:term1) AND (title:term2 OR author:term2)
> > >
> > > and so on. I also read that BooleanClause.Occur should help me
> > > handle
> >
> > this
> >
> > > problem.
> > > But i have to admit that i totally don't understand how to use it.
> > > If someone can explain or has a link to an explanation, this would
> > > be terrific
> > >
> > > Thanks and best regards
> > >
> > > Jens Burkhardt
> > > --
> > > View this message in context: http://www.nabble.
> > > com/MultiFieldQueryParser---BooleanClause.Occur-tp15761243p15761243
> > >.html Sent from the Lucene - Java Users mailing list archive at
> > > Nabble.com.
> > >
> > >
> > > -------------------------------------------------------------------
> > >-- To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 

--=_alternative 00680517852573FE_=--

From java-user-return-32879-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 29 19:22:59 2008
Return-Path: <java-user-return-32879-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97968 invoked from network); 29 Feb 2008 19:22:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Feb 2008 19:22:59 -0000
Received: (qmail 77337 invoked by uid 500); 29 Feb 2008 19:22:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77299 invoked by uid 500); 29 Feb 2008 19:22:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77288 invoked by uid 99); 29 Feb 2008 19:22:48 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Feb 2008 11:22:48 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [17.148.16.78] (HELO smtpoutm.mac.com) (17.148.16.78)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Feb 2008 19:21:59 +0000
Received: from mac.com (asmtp006-s [10.150.69.69])
	by smtpoutm.mac.com (Xserve/smtpout015/MantshX 4.0) with ESMTP id m1TJMJud018166
	for <java-user@lucene.apache.org>; Fri, 29 Feb 2008 11:22:19 -0800 (PST)
Received: from [192.168.1.4] (adsl-89-217-159-8.adslplus.ch [89.217.159.8])
	(authenticated bits=0)
	by mac.com (Xserve/asmtp006/MantshX 4.0) with ESMTP id m1TJM5lc017188
	(version=TLSv1/SSLv3 cipher=AES128-SHA bits=128 verify=NO)
	for <java-user@lucene.apache.org>; Fri, 29 Feb 2008 11:22:10 -0800 (PST)
Message-Id: <9A4F3058-B6F2-423A-A9E3-E528B63EB86D@mac.com>
From: Petite Abeille <petite_abeille@mac.com>
To: java-user@lucene.apache.org
In-Reply-To: <47C7E0E0.7080904@garambrogne.net>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v919.2)
Subject: Re: SOC: Lulu, a Lua implementation of Lucene
Date: Fri, 29 Feb 2008 20:22:04 +0100
References: <17331C3E-5774-4F5E-B09E-C9950767BA9D@mac.com> <47C7E0E0.7080904@garambrogne.net>
X-Mailer: Apple Mail (2.919.2)
X-Virus-Checked: Checked by ClamAV on apache.org


On Feb 29, 2008, at 11:39 AM, Mathieu Lecarme wrote:

> For me, Lua is just a glue between C coded object, a super config  
> file. Like used in lighttpd or WoW.

This is a rather very narrow view of what one could do with Lua.

For example, this wiki engine is written exclusively in Lua:

http://alt.textdrive.com/nanoki/
http://dev.alt.textdrive.com/browser/HTTP

>
> Lulu will work on top of Lucy?

No.

> Did I miss something?

Yes.

Lulu is a meant to be a pure Lua implementation of Lucene.

Cheers,

PA.




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32880-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 29 19:24:12 2008
Return-Path: <java-user-return-32880-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98185 invoked from network); 29 Feb 2008 19:24:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Feb 2008 19:24:11 -0000
Received: (qmail 81224 invoked by uid 500); 29 Feb 2008 19:24:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80940 invoked by uid 500); 29 Feb 2008 19:24:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80929 invoked by uid 99); 29 Feb 2008 19:24:00 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Feb 2008 11:24:00 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [17.148.16.77] (HELO smtpoutm.mac.com) (17.148.16.77)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Feb 2008 19:23:25 +0000
Received: from mac.com (asmtp003-s [10.150.69.66])
	by smtpoutm.mac.com (Xserve/smtpout014/MantshX 4.0) with ESMTP id m1TJNZrH004070
	for <java-user@lucene.apache.org>; Fri, 29 Feb 2008 11:23:35 -0800 (PST)
Received: from [192.168.1.4] (adsl-89-217-159-8.adslplus.ch [89.217.159.8])
	(authenticated bits=0)
	by mac.com (Xserve/asmtp003/MantshX 4.0) with ESMTP id m1TJNTdP005693
	(version=TLSv1/SSLv3 cipher=AES128-SHA bits=128 verify=NO)
	for <java-user@lucene.apache.org>; Fri, 29 Feb 2008 11:23:33 -0800 (PST)
Message-Id: <E48B4494-67B3-4708-A792-A46743970C1C@mac.com>
From: Petite Abeille <petite_abeille@mac.com>
To: java-user@lucene.apache.org
In-Reply-To: <B280B1F8-EC33-4307-85B8-8617FC8DEA41@apache.org>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v919.2)
Subject: Re: SOC: Lulu, a Lua implementation of Lucene
Date: Fri, 29 Feb 2008 20:23:27 +0100
References: <17331C3E-5774-4F5E-B09E-C9950767BA9D@mac.com> <47C7E0E0.7080904@garambrogne.net> <B280B1F8-EC33-4307-85B8-8617FC8DEA41@apache.org>
X-Mailer: Apple Mail (2.919.2)
X-Virus-Checked: Checked by ClamAV on apache.org


On Feb 29, 2008, at 1:09 PM, Grant Ingersoll wrote:

> That implies the Lucy actually is under development...  Perhaps they  
> will take up work on Lucy...

Lulu has nothing to do with Lucy... goes back to something at high  
school or something...


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32881-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 29 19:25:08 2008
Return-Path: <java-user-return-32881-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98374 invoked from network); 29 Feb 2008 19:25:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Feb 2008 19:25:05 -0000
Received: (qmail 83793 invoked by uid 500); 29 Feb 2008 19:24:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83765 invoked by uid 500); 29 Feb 2008 19:24:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83748 invoked by uid 99); 29 Feb 2008 19:24:53 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Feb 2008 11:24:52 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [17.148.16.82] (HELO smtpoutm.mac.com) (17.148.16.82)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Feb 2008 19:24:06 +0000
Received: from mac.com (asmtp003-s [10.150.69.66])
	by smtpoutm.mac.com (Xserve/smtpout019/MantshX 4.0) with ESMTP id m1TJOQSd022577
	for <java-user@lucene.apache.org>; Fri, 29 Feb 2008 11:24:26 -0800 (PST)
Received: from [192.168.1.4] (adsl-89-217-159-8.adslplus.ch [89.217.159.8])
	(authenticated bits=0)
	by mac.com (Xserve/asmtp003/MantshX 4.0) with ESMTP id m1TJNTdQ005693
	(version=TLSv1/SSLv3 cipher=AES128-SHA bits=128 verify=NO)
	for <java-user@lucene.apache.org>; Fri, 29 Feb 2008 11:24:24 -0800 (PST)
Message-Id: <0F379777-04F1-4E1C-A062-6168D5DAEA72@mac.com>
From: Petite Abeille <petite_abeille@mac.com>
To: java-user@lucene.apache.org
In-Reply-To: <47C819CC.5000201@garambrogne.net>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v919.2)
Subject: Re: SOC: Lulu, a Lua implementation of Lucene
Date: Fri, 29 Feb 2008 20:24:23 +0100
References: <17331C3E-5774-4F5E-B09E-C9950767BA9D@mac.com> <47C7E0E0.7080904@garambrogne.net> <B280B1F8-EC33-4307-85B8-8617FC8DEA41@apache.org> <47C819CC.5000201@garambrogne.net>
X-Mailer: Apple Mail (2.919.2)
X-Virus-Checked: Checked by ClamAV on apache.org


On Feb 29, 2008, at 3:42 PM, Mathieu Lecarme wrote:

> In other hands, a Lucy with C for persistance and parsing, and Lua  
> for filter and other fine configuration can be great.

Who is that Lucy you keep talking about? :P

Cheers,

PA.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32882-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 29 19:37:53 2008
Return-Path: <java-user-return-32882-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5579 invoked from network); 29 Feb 2008 19:37:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Feb 2008 19:37:53 -0000
Received: (qmail 18016 invoked by uid 500); 29 Feb 2008 19:37:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17505 invoked by uid 500); 29 Feb 2008 19:37:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17494 invoked by uid 99); 29 Feb 2008 19:37:41 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Feb 2008 11:37:41 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of simon.willnauer@googlemail.com designates 72.14.204.228 as permitted sender)
Received: from [72.14.204.228] (HELO qb-out-0506.google.com) (72.14.204.228)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Feb 2008 19:37:05 +0000
Received: by qb-out-0506.google.com with SMTP id o21so5743015qba.9
        for <java-user@lucene.apache.org>; Fri, 29 Feb 2008 11:37:15 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=googlemail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        bh=9WwDKCSuhbC/Ponm/Nen5GvcPQXX9XvFVgoHm7Os8uE=;
        b=b7Xt47drS9MncUCIxnLg1YWSGj4v4y0/nFxW572St90SSCUA595schYfP9s9lhRb0MYHEN/KQwJtPw8w/R4yKUJhl9+cKy+fFkaDEbd5tXMI+VqUKlkGc8q5ligNZszxet0jWbI/DZIeiunaHavw1fFQ7UvV60uOSmOaa/Q4xr0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=googlemail.com; s=gamma;
        h=message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=sogd8ZRc0rm4bJ/ezOMoQAiOwCwh5s+NL18Ps4VwIg5lkYincfP00m1VLDmFwCbhJ3ToZ+IVDQjzhRyX3iPY5RntoJXTQaoiDGu/BpK/bl3aXs0cG0cVGj2eN1xZXPsy9alMlNadon2GafYheBkALruwsy1d6E4hGELoc+GXWNU=
Received: by 10.114.57.1 with SMTP id f1mr12098433waa.15.1204313834441;
        Fri, 29 Feb 2008 11:37:14 -0800 (PST)
Received: by 10.114.15.16 with HTTP; Fri, 29 Feb 2008 11:37:14 -0800 (PST)
Message-ID: <f18c9dde0802291137j2ef43538w9d85caacd15f7dc0@mail.gmail.com>
Date: Fri, 29 Feb 2008 20:37:14 +0100
From: "Simon Willnauer" <simon.willnauer@googlemail.com>
Reply-To: simon.willnauer@gmail.com
To: java-user@lucene.apache.org
Subject: Re: SOC: Lulu, a Lua implementation of Lucene
In-Reply-To: <0F379777-04F1-4E1C-A062-6168D5DAEA72@mac.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <17331C3E-5774-4F5E-B09E-C9950767BA9D@mac.com>
	 <47C7E0E0.7080904@garambrogne.net>
	 <B280B1F8-EC33-4307-85B8-8617FC8DEA41@apache.org>
	 <47C819CC.5000201@garambrogne.net>
	 <0F379777-04F1-4E1C-A062-6168D5DAEA72@mac.com>
X-Virus-Checked: Checked by ClamAV on apache.org

goto www.google.com
type Lucy lucene

feel lucky

or go to http://lucene.apache.org/lucy/

simon



On Fri, Feb 29, 2008 at 8:24 PM, Petite Abeille <petite_abeille@mac.com> wrote:
>
>  On Feb 29, 2008, at 3:42 PM, Mathieu Lecarme wrote:
>
>  > In other hands, a Lucy with C for persistance and parsing, and Lua
>  > for filter and other fine configuration can be great.
>
>  Who is that Lucy you keep talking about? :P
>
>  Cheers,
>
>  PA.
>
>
>
>
>  ---------------------------------------------------------------------
>  To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>  For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32883-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 29 19:57:24 2008
Return-Path: <java-user-return-32883-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 13612 invoked from network); 29 Feb 2008 19:57:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Feb 2008 19:57:24 -0000
Received: (qmail 59459 invoked by uid 500); 29 Feb 2008 19:57:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59430 invoked by uid 500); 29 Feb 2008 19:57:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59418 invoked by uid 99); 29 Feb 2008 19:57:13 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Feb 2008 11:57:12 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [17.148.16.73] (HELO smtpoutm.mac.com) (17.148.16.73)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Feb 2008 19:56:26 +0000
Received: from mac.com (asmtp008-s [10.150.69.71])
	by smtpoutm.mac.com (Xserve/smtpout010/MantshX 4.0) with ESMTP id m1TJukPL017839
	for <java-user@lucene.apache.org>; Fri, 29 Feb 2008 11:56:46 -0800 (PST)
Received: from [192.168.1.4] (adsl-89-217-159-8.adslplus.ch [89.217.159.8])
	(authenticated bits=0)
	by mac.com (Xserve/asmtp008/MantshX 4.0) with ESMTP id m1TJueCt010427
	(version=TLSv1/SSLv3 cipher=AES128-SHA bits=128 verify=NO)
	for <java-user@lucene.apache.org>; Fri, 29 Feb 2008 11:56:44 -0800 (PST)
Message-Id: <BC1D5485-EAE3-479C-83AA-BAA1BC4A0302@mac.com>
From: Petite Abeille <petite_abeille@mac.com>
To: java-user@lucene.apache.org
In-Reply-To: <f18c9dde0802291137j2ef43538w9d85caacd15f7dc0@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v919.2)
Subject: Re: SOC: Lulu, a Lua implementation of Lucene
Date: Fri, 29 Feb 2008 20:56:39 +0100
References: <17331C3E-5774-4F5E-B09E-C9950767BA9D@mac.com> <47C7E0E0.7080904@garambrogne.net> <B280B1F8-EC33-4307-85B8-8617FC8DEA41@apache.org> <47C819CC.5000201@garambrogne.net> <0F379777-04F1-4E1C-A062-6168D5DAEA72@mac.com> <f18c9dde0802291137j2ef43538w9d85caacd15f7dc0@mail.gmail.com>
X-Mailer: Apple Mail (2.919.2)
X-Virus-Checked: Checked by ClamAV on apache.org


On Feb 29, 2008, at 8:37 PM, Simon Willnauer wrote:

> or go to http://lucene.apache.org/lucy/

Looks rather, hmmm, inactive:

http://svn.apache.org/viewvc/lucene/lucy/

Is there any working code anywhere?


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32884-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 29 20:16:09 2008
Return-Path: <java-user-return-32884-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19675 invoked from network); 29 Feb 2008 20:16:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Feb 2008 20:16:09 -0000
Received: (qmail 91659 invoked by uid 500); 29 Feb 2008 20:15:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91637 invoked by uid 500); 29 Feb 2008 20:15:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 91626 invoked by uid 99); 29 Feb 2008 20:15:57 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Feb 2008 12:15:57 -0800
X-ASF-Spam-Status: No, hits=3.2 required=10.0
	tests=HTML_MESSAGE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [213.171.192.50] (HELO exchange.livemail.co.uk) (213.171.192.50)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Feb 2008 20:15:23 +0000
Received: from exch-be11.exchange.local ([172.16.15.243]) by exchange.livemail.co.uk with Microsoft SMTPSVC(6.0.3790.1830);
	 Fri, 29 Feb 2008 20:15:32 +0000
X-MimeOLE: Produced By Microsoft Exchange V6.5
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C87B0F.D5C30DD3"
Content-class: urn:content-classes:message
Subject: Most efficient way to find related terms
Date: Fri, 29 Feb 2008 20:15:31 -0000
Message-ID: <74824EBD6AD59A45AF8741F39A60C34701040FFE@exch-be11.exchange.local>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Most efficient way to find related terms
x-taglocity-conversationindex: 01C87B0FCDE4CA57DE7695CC4E5B9D6984E8C4F75920
Thread-Index: Ach7D83kylfedpXMTludaYToxPdZIA==
From: "Martin Bayly" <Martin.Bayly@taglocity.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 29 Feb 2008 20:15:32.0005 (UTC) FILETIME=[D5B2CD50:01C87B0F]
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01C87B0F.D5C30DD3
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

I'm wondering what the most efficient approach is to finding all terms
which are related to a specific term X.

=20

By related I mean terms which appear in a specific document field that
also contains the target term X.

=20

e.g. Document has a keyword field, field1 that can contain multiple
keywords.

=20

document1 - field1 HAS key1, key2, key3

document2 - field1 HAS key2, key4

document3 - field1 HAS key5

=20

If I want to find terms related to key2, I need to return key1, key3,
key4

=20

Obviously I can do a search for key2, iterate all the docs and collect
there field1 terms manually.

=20

But presumably a more efficient way is to use TermDocs:

=20

1. TermDocs termdocs =3D IndexReader.termDocs(new Term("field1", "key2")

2. Iterate term docs to get documents containing that term=20

3. Now this is the bit I'm not sure of:

a. I could call Document doc =3D IndexReader.document(n), but that will
load all fields and I only want the field1

b. Presumably better to call Document doc =3D IndexReader.document(n,
fieldSelector)

c. Or would I be better to turn on TermFrequencyVectors for this field
so I can call IndexReader.getTermFrequencyVector(n, "field1") - don't
particularly care about the frequencies as it will always be 1 for a
particular doc.

=20

Other approaches?

=20

I'm going to perf test to see how (b) and (c) compare but would be glad
if anyone has any insights.

=20

Thanks

Martin


------_=_NextPart_001_01C87B0F.D5C30DD3--

From java-user-return-32885-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 29 20:22:36 2008
Return-Path: <java-user-return-32885-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 23068 invoked from network); 29 Feb 2008 20:22:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Feb 2008 20:22:36 -0000
Received: (qmail 97942 invoked by uid 500); 29 Feb 2008 20:22:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97913 invoked by uid 500); 29 Feb 2008 20:22:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97902 invoked by uid 99); 29 Feb 2008 20:22:24 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Feb 2008 12:22:24 -0800
X-ASF-Spam-Status: No, hits=1.5 required=10.0
	tests=SPF_PASS,WEIRD_PORT
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [17.148.16.67] (HELO smtpoutm.mac.com) (17.148.16.67)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Feb 2008 20:21:36 +0000
Received: from mac.com (asmtp001-s [10.150.69.64])
	by smtpoutm.mac.com (Xserve/smtpout004/MantshX 4.0) with ESMTP id m1TKLu9W019825
	for <java-user@lucene.apache.org>; Fri, 29 Feb 2008 12:21:56 -0800 (PST)
Received: from [192.168.1.4] (adsl-89-217-159-8.adslplus.ch [89.217.159.8])
	(authenticated bits=0)
	by mac.com (Xserve/asmtp001/MantshX 4.0) with ESMTP id m1TKLmH5000908
	(version=TLSv1/SSLv3 cipher=AES128-SHA bits=128 verify=NO)
	for <java-user@lucene.apache.org>; Fri, 29 Feb 2008 12:21:52 -0800 (PST)
Message-Id: <98973436-4168-48BD-B7A0-DB59D9ADE239@mac.com>
From: Petite Abeille <petite_abeille@mac.com>
To: java-user@lucene.apache.org
In-Reply-To: <47C7E0E0.7080904@garambrogne.net>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v919.2)
Subject: Re: SOC: Lulu, a Lua implementation of Lucene
Date: Fri, 29 Feb 2008 21:21:47 +0100
References: <17331C3E-5774-4F5E-B09E-C9950767BA9D@mac.com> <47C7E0E0.7080904@garambrogne.net>
X-Mailer: Apple Mail (2.919.2)
X-Virus-Checked: Checked by ClamAV on apache.org


On Feb 29, 2008, at 11:39 AM, Mathieu Lecarme wrote:

> For me, Lua is just a glue between C coded object, a super config  
> file. Like used in lighttpd or WoW.

Here is a an online demo of a wiki engine implemented purely in Lua:

http://svr225.stepx.com:3388/a
http://svr225.stepx.com:3388/nanoki


Cheers,

PA.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32886-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 29 21:47:05 2008
Return-Path: <java-user-return-32886-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53273 invoked from network); 29 Feb 2008 21:47:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Feb 2008 21:47:04 -0000
Received: (qmail 21683 invoked by uid 500); 29 Feb 2008 21:46:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21649 invoked by uid 500); 29 Feb 2008 21:46:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21638 invoked by uid 99); 29 Feb 2008 21:46:52 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Feb 2008 13:46:52 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.190.38.104] (HELO web50706.mail.re2.yahoo.com) (206.190.38.104)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 29 Feb 2008 21:46:17 +0000
Received: (qmail 49772 invoked by uid 60001); 29 Feb 2008 21:46:21 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=gz0sj5G+MgcU4C1Zl2Xx+4u29lwVvARv/MVxk4BaJYLk+6BTU9abAX2Btpdq0ak3+S+iWmlq1nnSJjK16Gte+tGeIywRV01ar8Nvd3zqOyVx4DLejhZh6Ar5bYqNc2hQktiDwbB8yp4gVzvzaJ3IB8cqHc6B/nt8jQ6T5G8WhjI=;
X-YMail-OSG: m6OC4.QVM1nt73c01gnjN_N07frvO9lcylCTaibO0QnocOM60WAMj6Q363c9qYyPPebKzJ1YD7Py8hLv3B8aHgdbB4RjKQD5DNAlVGt2NX.WxbiPF3o-
Received: from [71.232.7.212] by web50706.mail.re2.yahoo.com via HTTP; Fri, 29 Feb 2008 13:46:20 PST
X-Mailer: YahooMailRC/902.35 YahooMailWebService/0.7.162
Date: Fri, 29 Feb 2008 13:46:20 -0800 (PST)
From: Aaron Schon <aaron_schon@yahoo.com>
Subject: Lucene for Sentiment Analysis
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Message-ID: <935022.47311.qm@web50706.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hello, I was interested to learn about using Lucene for text analytics work such as for Sentiment Analysis. Has anyone done work along these lines? if so, could you share your approach, experiences, accuracy levels obtained etc.

Thanks,
AS


      ____________________________________________________________________________________
Looking for last minute shopping deals?  
Find them fast with Yahoo! Search.  http://tools.search.yahoo.com/newsearch/category.php?category=shopping

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32887-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 29 22:26:47 2008
Return-Path: <java-user-return-32887-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65865 invoked from network); 29 Feb 2008 22:26:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Feb 2008 22:26:47 -0000
Received: (qmail 66749 invoked by uid 500); 29 Feb 2008 22:26:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66709 invoked by uid 500); 29 Feb 2008 22:26:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66661 invoked by uid 99); 29 Feb 2008 22:26:28 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Feb 2008 14:26:27 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of tylervsd@gmail.com designates 216.239.58.189 as permitted sender)
Received: from [216.239.58.189] (HELO gv-out-0910.google.com) (216.239.58.189)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Feb 2008 22:25:53 +0000
Received: by gv-out-0910.google.com with SMTP id r4so2438933gve.23
        for <java-user@lucene.apache.org>; Fri, 29 Feb 2008 14:26:02 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        bh=cAx80ZwZ5dCeSAdRi/RPnAqdL0cm9KA2bYLTrhiHhxA=;
        b=r35cOVYM3yJHtAD2ujihU8xfN4Yd31ARjwmP98+KSHOvBjxzY8HC2+hA1eB5bdiBqs7tcfO1JNwLVN+h9SnamJWexGaMrl5zC2b9rbHAYw7q8nNkMT031N0mX6mDwWkUme9tF4jZbYH7h29PSmsZK/50F0IfdXVoK+QKoCC7QOw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=K8j8s9/sJ7zD2F0YqJ+fM/9RewC2pLG6w2vrQU5JtGCXdduuxfGv/09XCT9vsBw4kvNy2lcjiYYdq/jt0JaHkx0RyIhWobmMr47onVBuiAyolkgzXP3I5F0WI4MLtEpXTEOkkqZaq+GTfyVCVduzFO4vVkFC2CIMjZbyC6z0Lrk=
Received: by 10.150.177.20 with SMTP id z20mr3576230ybe.118.1204323961091;
        Fri, 29 Feb 2008 14:26:01 -0800 (PST)
Received: by 10.151.9.5 with HTTP; Fri, 29 Feb 2008 14:26:01 -0800 (PST)
Message-ID: <ac017d840802291426x7b0825d1raa1beb88dafab46f@mail.gmail.com>
Date: Fri, 29 Feb 2008 14:26:01 -0800
From: "Tyler V" <tylervsd@gmail.com>
To: java-user@lucene.apache.org
Subject: Corrupted Indexes Under Lucene 2.3 (and 2.3.1)
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org

After upgrading to Lucene 2.3 (and subsequently 2.3.1), our
application has experienced sporadic index corruptions on our larger
(and more frequently updated) indexes. These indexes experienced no
corruptions under any prior version of Lucene (which we have been
using for several years).

The pattern of failure seems to be consistent.  First, we receive an
exception like the following:

java.lang.IndexOutOfBoundsException: Index: 4788, Size: 4762
        at java.util.ArrayList.RangeCheck(ArrayList.java:547)
        at java.util.ArrayList.get(ArrayList.java:322)
        at org.apache.lucene.index.DocumentsWriter$ThreadState.init(DocumentsWriter.java:749)
        at org.apache.lucene.index.DocumentsWriter.getThreadState(DocumentsWriter.java:2391)
        at org.apache.lucene.index.DocumentsWriter.updateDocument(DocumentsWriter.java:2434)
        at org.apache.lucene.index.DocumentsWriter.addDocument(DocumentsWriter.java:2422)
        at org.apache.lucene.index.IndexWriter.addDocument(IndexWriter.java:1445)
        at org.apache.lucene.index.IndexWriter.addDocument(IndexWriter.java:1424)
        at com.myapp.indexing.IndexerRunner.run(IndexerRunner.java:134)
        at java.lang.Thread.run(Thread.java:619)

When we experience this error, we run a writer.flush() then a writer.close().

Then, we get this exception when trying to re-open the index:

org.apache.lucene.index.CorruptIndexException: doc counts differ for
segment _c2z13: fieldsReader shows 2 but segmentInfo shows 3
        at org.apache.lucene.index.SegmentReader.initialize(SegmentReader.java:313)
        at org.apache.lucene.index.SegmentReader.get(SegmentReader.java:262)
        at org.apache.lucene.index.SegmentReader.get(SegmentReader.java:197)
        at org.apache.lucene.index.MultiSegmentReader.<init>(MultiSegmentReader.java:55)
        at org.apache.lucene.index.DirectoryIndexReader$1.doBody(DirectoryIndexReader.java:75)
        at org.apache.lucene.index.SegmentInfos$FindSegmentsFile.run(SegmentInfos.java:636)
        at org.apache.lucene.index.DirectoryIndexReader.open(DirectoryIndexReader.java:63)
        at org.apache.lucene.index.IndexReader.open(IndexReader.java:209)
        at org.apache.lucene.index.IndexReader.open(IndexReader.java:192)
        at com.myapp.indexing.IndexerRunner.run(IndexerRunner.java:107)
        at java.lang.Thread.run(Thread.java:619)

Running the check index application included with 2.3 enables us to
remove the bad documents from the index, but this workaround is less
than desirable.  It would be greatly appreciated if anyone could shed
some light on our issue.

Regards,

Tyler

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32888-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 29 22:47:26 2008
Return-Path: <java-user-return-32888-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79394 invoked from network); 29 Feb 2008 22:47:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Feb 2008 22:47:26 -0000
Received: (qmail 97194 invoked by uid 500); 29 Feb 2008 22:47:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97168 invoked by uid 500); 29 Feb 2008 22:47:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97157 invoked by uid 99); 29 Feb 2008 22:47:15 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Feb 2008 14:47:15 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [72.14.246.250] (HELO ag-out-0708.google.com) (72.14.246.250)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Feb 2008 22:46:40 +0000
Received: by ag-out-0708.google.com with SMTP id 23so11114305agd.5
        for <java-user@lucene.apache.org>; Fri, 29 Feb 2008 14:46:48 -0800 (PST)
Received: by 10.100.201.16 with SMTP id y16mr11979001anf.110.1204325208817;
        Fri, 29 Feb 2008 14:46:48 -0800 (PST)
Received: from ?10.17.4.4? ( [72.93.214.93])
        by mx.google.com with ESMTPS id 7sm1118446hsx.10.2008.02.29.14.46.46
        (version=TLSv1/SSLv3 cipher=OTHER);
        Fri, 29 Feb 2008 14:46:47 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v753)
In-Reply-To: <ac017d840802291426x7b0825d1raa1beb88dafab46f@mail.gmail.com>
References: <ac017d840802291426x7b0825d1raa1beb88dafab46f@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <D06C4919-0D29-4D51-8E21-FF1EDF478569@mikemccandless.com>
Content-Transfer-Encoding: 7bit
From: Michael McCandless <lucene@mikemccandless.com>
Subject: Re: Corrupted Indexes Under Lucene 2.3 (and 2.3.1)
Date: Fri, 29 Feb 2008 17:46:44 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.753)
X-Virus-Checked: Checked by ClamAV on apache.org


Not good!  (I'm sorry).

That first exception is worrisome.  It's the root cause here.

Can you describe your documents?  That exception, if I'm reading it  
right, seems to imply that you have documents with 4762 fields.  Is  
that right?

Are you using multiple threads?  Is it possible that you cal  
addDocument with a given document, but another thread removing fields  
from that document (or, removing elements from the List returned by  
Document.getFields())?  That's the only way I can explain that first  
exception.

Mike

Tyler V wrote:

> After upgrading to Lucene 2.3 (and subsequently 2.3.1), our
> application has experienced sporadic index corruptions on our larger
> (and more frequently updated) indexes. These indexes experienced no
> corruptions under any prior version of Lucene (which we have been
> using for several years).
>
> The pattern of failure seems to be consistent.  First, we receive an
> exception like the following:
>
> java.lang.IndexOutOfBoundsException: Index: 4788, Size: 4762
>         at java.util.ArrayList.RangeCheck(ArrayList.java:547)
>         at java.util.ArrayList.get(ArrayList.java:322)
>         at org.apache.lucene.index.DocumentsWriter$ThreadState.init 
> (DocumentsWriter.java:749)
>         at org.apache.lucene.index.DocumentsWriter.getThreadState 
> (DocumentsWriter.java:2391)
>         at org.apache.lucene.index.DocumentsWriter.updateDocument 
> (DocumentsWriter.java:2434)
>         at org.apache.lucene.index.DocumentsWriter.addDocument 
> (DocumentsWriter.java:2422)
>         at org.apache.lucene.index.IndexWriter.addDocument 
> (IndexWriter.java:1445)
>         at org.apache.lucene.index.IndexWriter.addDocument 
> (IndexWriter.java:1424)
>         at com.myapp.indexing.IndexerRunner.run(IndexerRunner.java: 
> 134)
>         at java.lang.Thread.run(Thread.java:619)
>
> When we experience this error, we run a writer.flush() then a  
> writer.close().
>
> Then, we get this exception when trying to re-open the index:
>
> org.apache.lucene.index.CorruptIndexException: doc counts differ for
> segment _c2z13: fieldsReader shows 2 but segmentInfo shows 3
>         at org.apache.lucene.index.SegmentReader.initialize 
> (SegmentReader.java:313)
>         at org.apache.lucene.index.SegmentReader.get 
> (SegmentReader.java:262)
>         at org.apache.lucene.index.SegmentReader.get 
> (SegmentReader.java:197)
>         at org.apache.lucene.index.MultiSegmentReader.<init> 
> (MultiSegmentReader.java:55)
>         at org.apache.lucene.index.DirectoryIndexReader$1.doBody 
> (DirectoryIndexReader.java:75)
>         at org.apache.lucene.index.SegmentInfos$FindSegmentsFile.run 
> (SegmentInfos.java:636)
>         at org.apache.lucene.index.DirectoryIndexReader.open 
> (DirectoryIndexReader.java:63)
>         at org.apache.lucene.index.IndexReader.open 
> (IndexReader.java:209)
>         at org.apache.lucene.index.IndexReader.open 
> (IndexReader.java:192)
>         at com.myapp.indexing.IndexerRunner.run(IndexerRunner.java: 
> 107)
>         at java.lang.Thread.run(Thread.java:619)
>
> Running the check index application included with 2.3 enables us to
> remove the bad documents from the index, but this workaround is less
> than desirable.  It would be greatly appreciated if anyone could shed
> some light on our issue.
>
> Regards,
>
> Tyler
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-32889-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Feb 29 23:11:58 2008
Return-Path: <java-user-return-32889-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89333 invoked from network); 29 Feb 2008 23:11:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Feb 2008 23:11:57 -0000
Received: (qmail 25368 invoked by uid 500); 29 Feb 2008 23:11:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25336 invoked by uid 500); 29 Feb 2008 23:11:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25325 invoked by uid 99); 29 Feb 2008 23:11:46 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Feb 2008 15:11:46 -0800
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [66.216.127.90] (HELO rs35.luxsci.com) (66.216.127.90)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Feb 2008 23:10:56 +0000
Received: from [192.168.1.98] (dsl253-005-254.nyc1.dsl.speakeasy.net [66.253.5.254])
	(authenticated bits=0)
	by rs35.luxsci.com (8.13.1/8.13.7) with ESMTP id m1TNBEvd021277
	for <java-user@lucene.apache.org>; Fri, 29 Feb 2008 17:11:14 -0600
Message-ID: <47C8910F.3070504@alias-i.com>
Date: Fri, 29 Feb 2008 18:11:11 -0500
From: Bob Carpenter <carp@alias-i.com>
User-Agent: Thunderbird 2.0.0.12 (Windows/20080213)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: How do i get a text summary
References: <36A9B06E6B2FDA4D845E847C36A7AB0298DC52@BLR-MSG-02.i-flex.com> <000a01c879bc$ecddf1c0$fe3c10ac@desktop> <F59AE5DC4BC14155A7563ACC7889F275@msrvcn04> <47C6B201.7030906@garambrogne.net>
In-Reply-To: <47C6B201.7030906@garambrogne.net>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

Mathieu Lecarme wrote:
> spring@gmx.eu a crit :

>> And how could one create automatically such a summary?

Here's a site with some pointers to the literature
and some systems out there to do summarization:

http://www.summarization.com/

This is actually whole-document or even
multiple-document summarization.

Snippet production's a rather different problem,
which needs to be sensitive to the query.
What to show isn't so easy when there are many
instances of the query terms in the document
and very limited space.

> Have a look to http://alias-i.com/lingpipe/index.html 
 > or http://www.nzdl.org/Kea/

We haven't written any kind of text summarization
package for LingPipe.  Kea works at a keyphrase
level, not a doc summary level, though they reference
a paper on using it for summarization:

http://www.hicss.hawaii.edu/HICSS_35/HICSSpapers/PDFdocuments/DDUAC04.pdf

Both LingPipe and Kea are able to find significant
phrases, which is useful for query refinement or
summarizing sets of search results, but not so
useful for individual documents.  It can be a huge
help to add part-of-speech information to these
kinds of approaches.

- Bob Carpenter
   Alias-i

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


