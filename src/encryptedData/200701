From java-user-return-25255-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 02 09:25:04 2007
Return-Path: <java-user-return-25255-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47570 invoked from network); 2 Jan 2007 09:25:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Jan 2007 09:25:03 -0000
Received: (qmail 54225 invoked by uid 500); 2 Jan 2007 09:25:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54194 invoked by uid 500); 2 Jan 2007 09:25:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54182 invoked by uid 99); 2 Jan 2007 09:25:01 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Jan 2007 01:25:01 -0800
X-ASF-Spam-Status: No, hits=3.1 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST,DNS_FROM_RFC_WHOIS,MAILTO_TO_SPAM_ADDR
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [206.190.39.227] (HELO web50314.mail.yahoo.com) (206.190.39.227)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 02 Jan 2007 01:24:50 -0800
Received: (qmail 12757 invoked by uid 60001); 2 Jan 2007 09:24:28 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=ml/OTJsAceUaplqGhxSpDABQRH4jgE7krJbTVgtc3K9Sgpz1BAptq+5ICzD/aqXJQLk7rB8JkyzlcdwCssxeWVXQmys739RVSAsMyhClvIZcSmnRtAqDgz2OBWovX+IkgZjn9L8DVK8eH6ZG3fB1qIPWqzOWCjqvRUPLp2IgnII=  ;
Message-ID: <20070102092428.12755.qmail@web50314.mail.yahoo.com>
Received: from [58.63.151.120] by web50314.mail.yahoo.com via HTTP; Tue, 02 Jan 2007 01:24:28 PST
Date: Tue, 2 Jan 2007 01:24:27 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Clustering Lucene with 40 Servers
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=ascii
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Yes, if you think about how blogs and Technorati work (new blog post -> pin=
g -> ping server -> technorati -> index =3D=3D> searchable blog post), Adam=
 is correct.  Since Doug's implementation we (Technorati) have changed our =
clusters a LOT (think major rewrites).  I can't talk about the details, obv=
iously, but the first paragraph in Mark's email sounds like what we have.=
=0A=0ABiggy will want to provide more details about how they want things to=
 work (e.g. how quickly do changes need to be visible to searchers?  Is thi=
s a write + read system, or are there deletes? ...) before others can make =
useful suggestions.=0A=0AOtis=0A=0A----- Original Message ----=0AFrom: Adam=
 Fleming <aflem26@hotmail.com>=0ATo: java-user@lucene.apache.org=0ASent: Th=
ursday, December 28, 2006 2:33:37 AM=0ASubject: RE: Clustering Lucene with =
40 Servers=0A=0A=0AHello, =0A=0AI saw that Doug Cutting had an interesting =
solution for his Technorati website: =0Ahttp://www.mail-archive.com/lucene-=
user@jakarta.apache.org/msg12709.html=0A=0AIt sounds like it's a single-wri=
ter, many readers type of system, but quite robust and efficient.=0A=0AChee=
rs, =0A=0AAdam =0A=0A=0A=0A----------------------------------------=0A> Dat=
e: Wed, 27 Dec 2006 10:46:47 -0800=0A> From: sharrissf@gmail.com=0A> To: ja=
va-user@lucene.apache.org=0A> Subject: Re: Clustering Lucene with 40 Server=
s=0A> =0A> Some quick questions/points:=0A> =0A> What is the update rate?=
=0A> =0A> The number of nodes you described is no problem, the query rate w=
ould be=0A> no problem too (because they use read locks and act independent=
ly).=0A> =0A> Do all nodes do updates or just 1? How often do these updates=
 occur?=0A> =0A> Probably best thing to do is give it a try and run a few t=
ests.=0A> =0A> Cheers,=0A> Steve=0A> =0A> =0A> On 12/27/06, Biggy <biggy97@=
web.de> wrote:=0A> >=0A> > I'm currently investigating the best ways of clu=
stering Lucene.=0A> > I've heard of both Solr, Terracotta but do not know h=
ow well they scale.=0A> > Their examples talk of a 4 node cluster. This is =
way too small for my needs.=0A> >=0A> > I have 30x JVMs each handling 3 req=
uests/sec and each having their own=0A> > Lucene index. The index changes a=
re propagated to the cluster members using=0A> > JGroups messages. This sol=
ution has more than reached its limit as JGroups=0A> > has become unstable =
and a source of many JVMs crashes. Based on current=0A> > traffic trends I =
anticipate needing to upgrade to 40x + JVMS very soon.=0A> >=0A> > Can anyb=
ody suggest a way to effectivily cluster / replicate document=0A> > changes=
 ?=0A> >=0A> > P.S.:=0A> > JMS is not a possible solution as this was the p=
rior JGroups solution. We=0A> > had too many memory problems/queue full etc=
 crashing the servers thereafter.=0A> >=0A> > --=0A> > View this message in=
 context: http://www.nabble.com/Clustering-Lucene-with-40-Servers-tf2886546=
.html#a8064135=0A> > Sent from the Lucene - Java Users mailing list archive=
 at Nabble.com.=0A> >=0A> >=0A> > -----------------------------------------=
----------------------------=0A> > To unsubscribe, e-mail: java-user-unsubs=
cribe@lucene.apache.org=0A> > For additional commands, e-mail: java-user-he=
lp@lucene.apache.org=0A> >=0A> >=0A> =0A> ---------------------------------=
------------------------------------=0A> To unsubscribe, e-mail: java-user-=
unsubscribe@lucene.apache.org=0A> For additional commands, e-mail: java-use=
r-help@lucene.apache.org=0A> =0A=0A________________________________________=
_________________________=0AFixing up the home? Live Search can help.=0Ahtt=
p://imagine-windowslive.com/search/kits/default.aspx?kit=3Dimprove&locale=
=3Den-US&source=3Dwlmemailtaglinenov06=0A----------------------------------=
-----------------------------------=0ATo unsubscribe, e-mail: java-user-uns=
ubscribe@lucene.apache.org=0AFor additional commands, e-mail: java-user-hel=
p@lucene.apache.org=0A=0A=0A=0A

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25256-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 02 09:30:26 2007
Return-Path: <java-user-return-25256-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 49801 invoked from network); 2 Jan 2007 09:30:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Jan 2007 09:30:25 -0000
Received: (qmail 59960 invoked by uid 500); 2 Jan 2007 09:30:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59932 invoked by uid 500); 2 Jan 2007 09:30:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59920 invoked by uid 99); 2 Jan 2007 09:30:26 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Jan 2007 01:30:26 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [212.226.92.15] (HELO monkey.teamware.com) (212.226.92.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Jan 2007 01:30:17 -0800
Received: from nimitz (nimitz.teamw.com [10.142.128.10])
	by monkey.teamware.com (8.13.1/8.13.1) with ESMTP id l029TmYH001750
	for <java-user@lucene.apache.org>; Tue, 2 Jan 2007 11:29:48 +0200
Received: from [10.142.3.10] ([10.142.3.10]) by nimitz with ESMTP
	 id m12bt84f; 2 Jan 2007 11:29:00 +0200
Message-ID: <459A2608.5040105@teamware.com>
Date: Tue, 02 Jan 2007 20:29:44 +1100
From: Antony Bowesman <adb@teamware.com>
Organization: Teamware Group
User-Agent: Thunderbird 1.5 (Windows/20051201)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: IOException - The handle is invalid
References: <458B4991.8050108@teamware.com> <458C16F1.8030601@mikemccandless.com>
In-Reply-To: <458C16F1.8030601@mikemccandless.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Greylist: Sender IP whitelisted, not delayed by milter-greylist-1.6 (monkey.teamware.com [212.226.92.15]); Tue, 02 Jan 2007 11:29:48 +0200 (EET)
X-TWG-MailScanner-Information: See www.mailscanner.info for information
X-TWG-MailScanner: Found to be clean
X-TWG-MailScanner-SpamCheck: not spam, SpamAssassin (score=0.001, required 5,
	autolearn=not spam, BAYES_50 0.00)
X-MailScanner-From: adb@teamware.com
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Mike,

>> I saw Mike McCandless JIRA issue
>>
>> http://issues.apache.org/jira/browse/LUCENE-669
>>
>> Is the patch referenced there useful for a 2.0 system.  I would like 
>> to use the lockless commit stuff, but am waiting until I get the core 
>> system working well.
>>
>> I am also getting IOException in some of my classes, but from the JIRA 
>> comments, it seems that Lucene may be the culprit.
> 
> This does sound very much like LUCENE-669 (and that bug is indeed
> present in Lucene 2.0).  That patch was fairly simple; it may apply
> cleanly or require only small fixes.  I would recommend try it &
> seeing if it resolves your IOExceptions?

I made the patch, re-run the tests and the IOExceptions have gone away, so this 
fix looks good, though with Christmas and New Year between the previous test and 
these ones, I'm not 100% sure I had the same setup...

I'm glad you fixed this one already ;) !

Thanks
Antony



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25257-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 02 17:55:04 2007
Return-Path: <java-user-return-25257-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85011 invoked from network); 2 Jan 2007 17:55:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Jan 2007 17:55:04 -0000
Received: (qmail 40566 invoked by uid 500); 2 Jan 2007 17:55:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40502 invoked by uid 500); 2 Jan 2007 17:55:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40491 invoked by uid 99); 2 Jan 2007 17:55:01 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Jan 2007 09:55:01 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [66.111.4.28] (HELO out4.smtp.messagingengine.com) (66.111.4.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Jan 2007 09:54:50 -0800
Received: from out1.internal (unknown [10.202.2.149])
	by out1.messagingengine.com (Postfix) with ESMTP id D6D185AA18
	for <java-user@lucene.apache.org>; Tue,  2 Jan 2007 12:52:14 -0500 (EST)
Received: from heartbeat1.messagingengine.com ([10.202.2.160])
  by out1.internal (MEProxy); Tue, 02 Jan 2007 12:52:14 -0500
X-Sasl-enc: xg6cLZOV4E+Op4x3hoxyAoWo13XPBHYN5sQwYKwbN7WE 1167760334
Received: from [10.17.4.90] (pool-72-70-33-214.bstnma.fios.verizon.net [72.70.33.214])
	by mail.messagingengine.com (Postfix) with ESMTP id 9CF8E101
	for <java-user@lucene.apache.org>; Tue,  2 Jan 2007 12:52:14 -0500 (EST)
Message-ID: <459A9C50.7080605@mikemccandless.com>
Date: Tue, 02 Jan 2007 12:54:24 -0500
From: Michael McCandless <lucene@mikemccandless.com>
User-Agent: Thunderbird 1.5.0.9 (Windows/20061207)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: IOException - The handle is invalid
References: <458B4991.8050108@teamware.com> <458C16F1.8030601@mikemccandless.com> <459A2608.5040105@teamware.com>
In-Reply-To: <459A2608.5040105@teamware.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Antony Bowesman wrote:
> Hi Mike,
> 
>>> I saw Mike McCandless JIRA issue
>>>
>>> http://issues.apache.org/jira/browse/LUCENE-669
>>>
>>> Is the patch referenced there useful for a 2.0 system.  I would like 
>>> to use the lockless commit stuff, but am waiting until I get the core 
>>> system working well.
>>>
>>> I am also getting IOException in some of my classes, but from the 
>>> JIRA comments, it seems that Lucene may be the culprit.
>>
>> This does sound very much like LUCENE-669 (and that bug is indeed
>> present in Lucene 2.0).  That patch was fairly simple; it may apply
>> cleanly or require only small fixes.  I would recommend try it &
>> seeing if it resolves your IOExceptions?
> 
> I made the patch, re-run the tests and the IOExceptions have gone away, 
> so this fix looks good, though with Christmas and New Year between the 
> previous test and these ones, I'm not 100% sure I had the same setup...
> 
> I'm glad you fixed this one already ;) !

Awesome, I'm glad to hear that!  Let's tentatively hope that indeed
you were hitting that bug and now it's resolved :)

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25258-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 02 22:33:09 2007
Return-Path: <java-user-return-25258-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94172 invoked from network); 2 Jan 2007 22:33:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Jan 2007 22:33:08 -0000
Received: (qmail 39266 invoked by uid 500); 2 Jan 2007 22:33:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39188 invoked by uid 500); 2 Jan 2007 22:33:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39154 invoked by uid 99); 2 Jan 2007 22:33:07 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Jan 2007 14:33:07 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Jan 2007 14:32:57 -0800
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1H1sBR-00036G-AT
	for java-user@lucene.apache.org; Tue, 02 Jan 2007 14:32:37 -0800
Message-ID: <8132099.post@talk.nabble.com>
Date: Tue, 2 Jan 2007 14:32:37 -0800 (PST)
From: sdeck <scott.decker@gmail.com>
To: java-user@lucene.apache.org
Subject: Speed of grouped queries
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: scott.decker@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


Thanks for advanced on any insight on this one.

I have a fairly large query to run, and it takes roughly 20-40 seconds to
complete the way that i have it.
here is the best example I can give.

I have a set of roughly 25K documents indexed

I have queries that get documents matching a particular actor.

Then, I have a movie query that takes all of the documents found for each
actor query and combines them all together to say, here are all documents
that are relevant for this movie.

Then, and here is the time hog, I have a genre query that says, take all
movies and get their results and combine them together into this genre
result set.


The problem is, at indexing time, I do not have a way to say if a document
is a particular genre, or a particular actor, or movie etc.  If I try and
say for the genre query, get all documents and then filter for the queries
for movies and actors, I get heap space memory issues.

The query for collecting a specific actor is around 200-300 milliseconds,
and the movie one, that actually queries each actor, takes roughly 500-700
milliseconds. Yet, for a genre, where you may have 50-100 movies, it takes
500 milliseconds*# of movies

Any ideas on how I could run these queries differently? For a given actor
query, there is about 5-7 boolean query clauses. Just to give some insight.

I currently just create 1 HitSetCollector (I rolled my own bitsetcollector)
and just run searches with it.  I just get crapped on when it does that
genre search. I wish there was an easier way to aggregate all of those
documents together from all of those searches.  After it is done, I cache
the results, but the initial hit is bad.

Any help would be much appreciated.
Sdeck



-- 
View this message in context: http://www.nabble.com/Speed-of-grouped-queries-tf2910499.html#a8132099
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25259-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 03 02:34:02 2007
Return-Path: <java-user-return-25259-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69691 invoked from network); 3 Jan 2007 02:34:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Jan 2007 02:34:01 -0000
Received: (qmail 27260 invoked by uid 500); 3 Jan 2007 02:34:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26780 invoked by uid 500); 3 Jan 2007 02:34:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26769 invoked by uid 99); 3 Jan 2007 02:34:01 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Jan 2007 18:34:01 -0800
X-ASF-Spam-Status: No, hits=0.9 required=10.0
	tests=FORGED_YAHOO_RCVD,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Jan 2007 18:33:10 -0800
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1H1vvb-0001QX-9P
	for java-user@lucene.apache.org; Tue, 02 Jan 2007 18:32:31 -0800
Message-ID: <8134948.post@talk.nabble.com>
Date: Tue, 2 Jan 2007 18:32:31 -0800 (PST)
From: escher2k <escher2k@yahoo.com>
To: java-user@lucene.apache.org
Subject: Customize scoring for additive effect...
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: escher2k@yahoo.com
X-Virus-Checked: Checked by ClamAV on apache.org


I am trying to build a scoring function which is additive across multiple
fields that are searched.
For instance, if a user searches for "Web PHP", I want the search to happen
over fld1, fld2
and then compute the score as,
   score = similarity score(fld1) + similarity score(fld2) + <some system
constant>

I think I have figured out how to customize the similarity for the fields,
but I still don't know
how to get this additive effect. I didn't see any direct way to plug in a
custom scorer. 

Thanks.
-- 
View this message in context: http://www.nabble.com/Customize-scoring-for-additive-effect...-tf2911491.html#a8134948
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25260-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 03 04:59:06 2007
Return-Path: <java-user-return-25260-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92513 invoked from network); 3 Jan 2007 04:59:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Jan 2007 04:59:05 -0000
Received: (qmail 20256 invoked by uid 500); 3 Jan 2007 04:59:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20221 invoked by uid 500); 3 Jan 2007 04:59:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 20210 invoked by uid 99); 3 Jan 2007 04:59:05 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Jan 2007 20:59:05 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [66.104.95.4] (HELO listing.marketingbrokers.com) (66.104.95.4)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 02 Jan 2007 20:58:54 -0800
Received: from ip66-104-95-21.z95-104-66.customer.algx.net ([66.104.95.21])
          by listing.marketingbrokers.com (JAMES SMTP Server 2.2.0) with SMTP ID 462
          for <java-user@lucene.apache.org>;
          Tue, 2 Jan 2007 20:58:30 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <20070102092428.12755.qmail@web50314.mail.yahoo.com>
References: <20070102092428.12755.qmail@web50314.mail.yahoo.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <5D5C566E-A8E8-424E-A01C-E3383A356A7B@marketingbrokers.com>
Content-Transfer-Encoding: 7bit
From: "Peter W." <peter@marketingbrokers.com>
Subject: Re: Clustering Lucene with 40 Servers
Date: Tue, 2 Jan 2007 20:58:29 -0800
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org

Hello,

Don't have any of the scalability requirements mentioned in this  
thread but the problem is an interesting one.
Lucene needs a connection pool equivalent IMHO or a best practices  
method for load balancing.

Opening, locking, reading and writing to remote indexes over RMI  
seems good on paper but likely to melt
with anything approaching the kind of web traffic seen by a popular  
site. This is why you see people
running (so many) JVM's locally. Solr helps but passing long XML or  
JSON urls for thousands or millions of
requests between your own machines to maintain a Lucene index looks  
redundant to me.

Adding messaging layers to propagate changes or updates introduces  
more points of failure.

I wonder if a system where just a few machines capture say 100k  
updates (at a time) in memory then write .gz
to locally attached external drives would work. These separated data  
files would be exposed thru a web service
where load balanced remote boxes access them using servlets.

They connect in rotation downloading batched index updates. Heck,  
start splitting up big files using Hadoop's
HDFS and make it a party!

Regards,

Peter W.



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25261-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 03 10:59:44 2007
Return-Path: <java-user-return-25261-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 55379 invoked from network); 3 Jan 2007 10:59:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Jan 2007 10:59:43 -0000
Received: (qmail 55188 invoked by uid 500); 3 Jan 2007 10:59:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55021 invoked by uid 500); 3 Jan 2007 10:59:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55010 invoked by uid 99); 3 Jan 2007 10:59:41 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Jan 2007 02:59:41 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [212.90.213.186] (HELO netbreeze.ch) (212.90.213.186)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Jan 2007 02:59:31 -0800
Received: from [192.168.1.38] by netbreeze.ch
	(MDaemon PRO v9.5.4)
	with ESMTP id md50000034282.msg
	for <java-user@lucene.apache.org>; Wed, 03 Jan 2007 12:00:31 +0100
Message-ID: <459B8C01.40903@netbreeze.ch>
Date: Wed, 03 Jan 2007 11:57:05 +0100
From: Laurent Hoss <l.hoss@netbreeze.ch>
User-Agent: Thunderbird 1.5.0.9 (Windows/20061207)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
CC:  markrmiller@gmail.com
Subject: Re: New Lucene QueryParser
References: <45761B35.1060900@gmail.com>
In-Reply-To: <45761B35.1060900@gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Authenticated-Sender: l.hoss@netbreeze.ch
X-Spam-Processed: netbreeze.ch, Wed, 03 Jan 2007 12:00:31 +0100
	(not processed: message from valid local sender)
X-MDRemoteIP: 192.168.1.38
X-Return-Path: l.hoss@netbreeze.ch
X-Envelope-From: l.hoss@netbreeze.ch
X-MDaemon-Deliver-To: java-user@lucene.apache.org
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Mark

As said in a previous mail, I'm very interested in your Parser and I'm 
happy to hear you made progress , and implemented
Paragraph/Sentence proximity search functionality. :)
This is the killer feature for me!
 and if the execution of the resulting query  ( a mix containing 
SpanQuery 's)  is not (much) slower  than using Boolean/Pharse-Query 
Combos,  it would allow me to forget  our current  "1 lucene-doc per 
paragraph" Indexing Model.
But also the other features are very cool, like the DateParsing which I 
strongly miss in the standard QueryParser !

So let me hear, when you have a version ready to be tested, and how I 
can help.

-Laurent

PS: Some other notes
> Query-time thesaurus expansion / General token to query expansion : 
> Takes advantage of a general find/replace feature, "expand" might map 
> to "(expander | expanded)" ... or any other valid syntax. 
This I could also use, if can also do following ?
right now I've a little utility class which expands special strings 
(syntax is to be disc.) to all combinations :
"fest[,e] hypothek[,en,a]"
-> fest hypothek;fest hypotheken;fest hypotheka;feste hypothek;feste 
hypotheken;feste hypotheka

> Note that there may be some limitations...but so far this has proved 
> to be pretty powerful
Would still be good to know the limitations you see right now...



Mark Miller wrote:
> I have finally delved back into the Lucene Query parser that I started 
> a few months back. I am very closing to wrapping up it's initial 
> development. I am currently looking for anybody willing to help me out 
> with a little testing and maybe some design consultation (I am not 
> happy with the current range query  syntax for one). If you have any 
> interested  in using this parser and have a little time to help out, 
> please do. The parser is extremely customizable and you can basically 
> mold it into whatever you want. A brief outline of the feature set:
>
> The basics from Lucene query parser are covered: escaping operators, 
> handling tokens at the same position, range queries, etc.
>
> Default Operators are: & | ! ~ ( )
> New operators can be defined and default operators can be hidden on 
> the fly.
>
> Adds a proximity operator to the standard AND, OR, and ANDNOT 
> operators allowing for queries like:
> (search bear) ~5 (snake & horse ~4 pope) | crazy query
>
> The default space operator is customizable and can be made to bind 
> tighter than if you use the actual operator (the operator acts like 
> the actual operator but within parenthesis).
>
> The order of operations for the operators is customizable. The default 
> order is |, &, ~, !, ( )...you can change it to whatever you want.
>
> Query-time thesaurus expansion / General token to query expansion : 
> Takes advantage of a general find/replace feature, "expand" might map 
> to "(expander | expanded)" ... or any other valid syntax. There is 
> also a slower RegEx feature so that you can match tokens with a 
> Pattern and perform back reference enabled replacements. You can also 
> make the replacement behave as an operator...you might map NEAR to ~10 
> , creating a new operator that performs within 10 word proximity 
> searches.
>
> Did You Mean feature using the SpellCheck contrib: if you search for 
> 'date(Aug 3, 1952) & mackine | rabbit' you might get a suggestion of : 
> 'date(Aug 3, 1952) & machine | rabbit'
>
> Paragraph/Sentence proximity search functionality. You can inject 
> tokens to specify paragraph and sentence markers and perform 
> SpanNotWithin searches for paragraph sentence proximity searches.
>
> Customizable date parser.
>
> Everything is pretty much configurable on the fly.
>
> Note that there may be some limitations...but so far this has proved 
> to be pretty powerful. I could sure use some testing help making it 
> production ready though. I will be putting a new website up for the 
> parser soon. Please send me a note if you can help out at all. When I 
> put up the jar you can just run it with Java -jar and it will provide 
> a console input to enter queries and see the Lucene Query generated.
>
> - Mark Miller
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25262-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 03 11:43:27 2007
Return-Path: <java-user-return-25262-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71645 invoked from network); 3 Jan 2007 11:43:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Jan 2007 11:43:27 -0000
Received: (qmail 10854 invoked by uid 500); 3 Jan 2007 11:43:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10648 invoked by uid 500); 3 Jan 2007 11:43:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10637 invoked by uid 99); 3 Jan 2007 11:43:26 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Jan 2007 03:43:26 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [202.74.207.2] (HELO mail2.woosh.co.nz) (202.74.207.2)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Jan 2007 03:43:16 -0800
Received: from joostdell (202-74-196-254.ue.woosh.co.nz [202.74.196.254]) by woosh.co.nz
 (Rockliffe SMTPRA 6.1.22) with ESMTP id <B0066634495@mail2.woosh.co.nz> for <java-user@lucene.apache.org>;
 Thu, 4 Jan 2007 00:42:56 +1300
From: "Joost Schouten" <joost@jsportal.com>
To: <java-user@lucene.apache.org>
Subject: Field.TermVector usage
Date: Thu, 4 Jan 2007 00:42:47 +1300
Message-ID: <02c901c72f2c$4ac48c90$0201a8c0@joostdell>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Office Outlook 11
Thread-Index: AccvLEoFIW+wbq0fRamUIwx52eDK3w==
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3028
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

I've just started with the implementation of Lucene in my =
Shale-Hibernate
application. From the demo I understand most of the Field constructor:

Field(String name, String value, Field.Store store, Field.Index index,
Field.TermVector termVector)

Except what the Field.TermVector termVector does and how it is used. Can
anyone give me lucene-newbie description on why and how I should use =
this
argument?

Thank you,
Joost Schouten
Director
=A0
JS Portal
Dasstraat 21
2623CB Delft
the Netherlands
P: +31 6 160 160 14
E: joost@jsportal.com
W: www.jsportal.com=A0



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25263-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 03 13:01:23 2007
Return-Path: <java-user-return-25263-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96941 invoked from network); 3 Jan 2007 13:01:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Jan 2007 13:01:23 -0000
Received: (qmail 50483 invoked by uid 500); 3 Jan 2007 13:01:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50460 invoked by uid 500); 3 Jan 2007 13:01:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50449 invoked by uid 99); 3 Jan 2007 13:01:21 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Jan 2007 05:01:21 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of markrmiller@gmail.com designates 66.249.82.224 as permitted sender)
Received: from [66.249.82.224] (HELO wx-out-0506.google.com) (66.249.82.224)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Jan 2007 05:01:11 -0800
Received: by wx-out-0506.google.com with SMTP id i29so6253865wxd
        for <java-user@lucene.apache.org>; Wed, 03 Jan 2007 05:00:51 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:user-agent:mime-version:to:cc:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=nwOvXueB/toozZ1WRyfLvgojmUTwRWBapBAZIElg8mMHKbdSWsm6nlnbPWNXORhANPPUS3U2egGZ2AYabekBjDJrDXccJIoCPKn6l0Pp+LkhqWTTw0SNyXyOj5KkzTfn/9fxZkSUB7+S3Ss/NZwzVOQayDyXhnOTmRNGK0xcyNI=
Received: by 10.70.65.8 with SMTP id n8mr38865195wxa.1167829250762;
        Wed, 03 Jan 2007 05:00:50 -0800 (PST)
Received: from ?192.168.1.103? ( [216.66.114.42])
        by mx.google.com with ESMTP id 10sm39213508wrl.2007.01.03.05.00.48;
        Wed, 03 Jan 2007 05:00:49 -0800 (PST)
Message-ID: <459BA8F6.40002@gmail.com>
Date: Wed, 03 Jan 2007 08:00:38 -0500
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 1.5.0.9 (Windows/20061207)
MIME-Version: 1.0
To: Laurent Hoss <l.hoss@netbreeze.ch>
CC:  java-user@lucene.apache.org
Subject: Re: New Lucene QueryParser
References: <45761B35.1060900@gmail.com> <459B8C01.40903@netbreeze.ch>
In-Reply-To: <459B8C01.40903@netbreeze.ch>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hey Laurent,

I am actually pretty much ready for a beta/preview release right about 
now. All of the features are in and I am pretty happy with most of the 
work. Over the past month I have been squashing bugs and could certainly 
use as much help as I can get making sure this thing is as perfect as it 
can be. I am currently in the middle of migrating to a new laptop, so I 
may take a couple days to get a distribution jar together with some 
simple documentation, but I plan on doing that as soon as I get a chance.

>
>> Query-time thesaurus expansion / General token to query expansion : 
>> Takes advantage of a general find/replace feature, "expand" might map 
>> to "(expander | expanded)" ... or any other valid syntax. 
> This I could also use, if can also do following ?
> right now I've a little utility class which expands special strings 
> (syntax is to be disc.) to all combinations :
> "fest[,e] hypothek[,en,a]"
> -> fest hypothek;fest hypotheken;fest hypotheka;feste hypothek;feste 
> hypotheken;feste hypotheka
>
I require a similar feature, although in the form mark{s es ing} -> 
marks markes marking. Unfortunately, the way I have done it (in the 
JavaCC grammer) is not easily configurable.

>> Note that there may be some limitations...but so far this has proved 
>> to be pretty powerful
> Would still be good to know the limitations you see right now...
>
I mentioned there might be limitations because I kept running into new 
difficult problems and I just didn't know if something would come up I 
could not get around or if something would be too slow etc. Not to 
mention I am still a little (or a lot depending on who you talk to) wet 
behind the ears. So far I have not run into any limitations. That 
certainly does not mean they don't exists though :) I'm still crossing 
my fingers. My goal is to make this thing as perfect as I can. It's 
basically my new hobby.


- Mark



> Mark Miller wrote:
>> I have finally delved back into the Lucene Query parser that I 
>> started a few months back. I am very closing to wrapping up it's 
>> initial development. I am currently looking for anybody willing to 
>> help me out with a little testing and maybe some design consultation 
>> (I am not happy with the current range query  syntax for one). If you 
>> have any interested  in using this parser and have a little time to 
>> help out, please do. The parser is extremely customizable and you can 
>> basically mold it into whatever you want. A brief outline of the 
>> feature set:
>>
>> The basics from Lucene query parser are covered: escaping operators, 
>> handling tokens at the same position, range queries, etc.
>>
>> Default Operators are: & | ! ~ ( )
>> New operators can be defined and default operators can be hidden on 
>> the fly.
>>
>> Adds a proximity operator to the standard AND, OR, and ANDNOT 
>> operators allowing for queries like:
>> (search bear) ~5 (snake & horse ~4 pope) | crazy query
>>
>> The default space operator is customizable and can be made to bind 
>> tighter than if you use the actual operator (the operator acts like 
>> the actual operator but within parenthesis).
>>
>> The order of operations for the operators is customizable. The 
>> default order is |, &, ~, !, ( )...you can change it to whatever you 
>> want.
>>
>> Query-time thesaurus expansion / General token to query expansion : 
>> Takes advantage of a general find/replace feature, "expand" might map 
>> to "(expander | expanded)" ... or any other valid syntax. There is 
>> also a slower RegEx feature so that you can match tokens with a 
>> Pattern and perform back reference enabled replacements. You can also 
>> make the replacement behave as an operator...you might map NEAR to 
>> ~10 , creating a new operator that performs within 10 word proximity 
>> searches.
>>
>> Did You Mean feature using the SpellCheck contrib: if you search for 
>> 'date(Aug 3, 1952) & mackine | rabbit' you might get a suggestion of 
>> : 'date(Aug 3, 1952) & machine | rabbit'
>>
>> Paragraph/Sentence proximity search functionality. You can inject 
>> tokens to specify paragraph and sentence markers and perform 
>> SpanNotWithin searches for paragraph sentence proximity searches.
>>
>> Customizable date parser.
>>
>> Everything is pretty much configurable on the fly.
>>
>> Note that there may be some limitations...but so far this has proved 
>> to be pretty powerful. I could sure use some testing help making it 
>> production ready though. I will be putting a new website up for the 
>> parser soon. Please send me a note if you can help out at all. When I 
>> put up the jar you can just run it with Java -jar and it will provide 
>> a console input to enter queries and see the Lucene Query generated.
>>
>> - Mark Miller
>>
>>
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
>
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25264-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 03 13:17:02 2007
Return-Path: <java-user-return-25264-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 2114 invoked from network); 3 Jan 2007 13:17:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Jan 2007 13:17:01 -0000
Received: (qmail 86393 invoked by uid 500); 3 Jan 2007 13:17:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86370 invoked by uid 500); 3 Jan 2007 13:17:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86359 invoked by uid 99); 3 Jan 2007 13:17:00 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Jan 2007 05:17:00 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [208.97.132.119] (HELO spunkymail-a11.dreamhost.com) (208.97.132.119)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Jan 2007 05:16:50 -0800
Received: from [192.168.0.2] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a11.dreamhost.com (Postfix) with ESMTP id 03B0DB6CB9
	for <java-user@lucene.apache.org>; Wed,  3 Jan 2007 05:16:28 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <8134948.post@talk.nabble.com>
References: <8134948.post@talk.nabble.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <680A1AAE-E3AF-4BB4-8C3C-1CF0F7CDD6BB@apache.org>
Content-Transfer-Encoding: 7bit
From: Grant Ingersoll <gsingers@apache.org>
Subject: Re: Customize scoring for additive effect...
Date: Wed, 3 Jan 2007 08:16:23 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org

This _may_ help: http://lucene.apache.org/java/docs/scoring.html

It has links into the javadocs for creating Custom Query/Scorers, etc.

-Grant

On Jan 2, 2007, at 9:32 PM, escher2k wrote:

>
> I am trying to build a scoring function which is additive across  
> multiple
> fields that are searched.
> For instance, if a user searches for "Web PHP", I want the search  
> to happen
> over fld1, fld2
> and then compute the score as,
>    score = similarity score(fld1) + similarity score(fld2) + <some  
> system
> constant>
>
> I think I have figured out how to customize the similarity for the  
> fields,
> but I still don't know
> how to get this additive effect. I didn't see any direct way to  
> plug in a
> custom scorer.
>
> Thanks.
> -- 
> View this message in context: http://www.nabble.com/Customize- 
> scoring-for-additive-effect...-tf2911491.html#a8134948
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

--------------------------
Grant Ingersoll
Center for Natural Language Processing
http://www.cnlp.org

Read the Lucene Java FAQ at http://wiki.apache.org/jakarta-lucene/ 
LuceneFAQ



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25265-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 03 13:20:24 2007
Return-Path: <java-user-return-25265-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 2861 invoked from network); 3 Jan 2007 13:20:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Jan 2007 13:20:22 -0000
Received: (qmail 91797 invoked by uid 500); 3 Jan 2007 13:20:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91773 invoked by uid 500); 3 Jan 2007 13:20:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 91762 invoked by uid 99); 3 Jan 2007 13:20:22 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Jan 2007 05:20:22 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [208.97.132.74] (HELO spunkymail-a5.dreamhost.com) (208.97.132.74)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Jan 2007 05:20:12 -0800
Received: from [192.168.0.2] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a5.dreamhost.com (Postfix) with ESMTP id C2CD514D6AA
	for <java-user@lucene.apache.org>; Wed,  3 Jan 2007 05:19:52 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <02c901c72f2c$4ac48c90$0201a8c0@joostdell>
References: <02c901c72f2c$4ac48c90$0201a8c0@joostdell>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <BA38A768-5B9E-4F08-AC05-941C39B74D79@apache.org>
Content-Transfer-Encoding: 7bit
From: Grant Ingersoll <gsingers@apache.org>
Subject: Re: Field.TermVector usage
Date: Wed, 3 Jan 2007 08:19:50 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org

Term vector allows you to store frequency, position, offset info  
(last two are optional) on a per document basis so that you can  
retrieve this info for any given document.  I have a powerpoint and  
some examples of usage on it from my ApacheCon talk in 2005 at http:// 
www.cnlp.org/apachecon2005/


-Grant

On Jan 3, 2007, at 6:42 AM, Joost Schouten wrote:

> Hi,
>
> I've just started with the implementation of Lucene in my Shale- 
> Hibernate
> application. From the demo I understand most of the Field constructor:
>
> Field(String name, String value, Field.Store store, Field.Index index,
> Field.TermVector termVector)
>
> Except what the Field.TermVector termVector does and how it is  
> used. Can
> anyone give me lucene-newbie description on why and how I should  
> use this
> argument?
>
> Thank you,
> Joost Schouten
> Director
>
> JS Portal
> Dasstraat 21
> 2623CB Delft
> the Netherlands
> P: +31 6 160 160 14
> E: joost@jsportal.com
> W: www.jsportal.com
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

--------------------------
Grant Ingersoll
Center for Natural Language Processing
http://www.cnlp.org

Read the Lucene Java FAQ at http://wiki.apache.org/jakarta-lucene/ 
LuceneFAQ



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25266-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 03 14:32:44 2007
Return-Path: <java-user-return-25266-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30217 invoked from network); 3 Jan 2007 14:32:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Jan 2007 14:32:43 -0000
Received: (qmail 20827 invoked by uid 500); 3 Jan 2007 14:32:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20516 invoked by uid 500); 3 Jan 2007 14:32:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 20499 invoked by uid 99); 3 Jan 2007 14:32:43 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Jan 2007 06:32:43 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [128.230.18.29] (HELO mailer.syr.edu) (128.230.18.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Jan 2007 06:32:32 -0800
Received: from [128.230.84.138] (syru84-138.syr.edu) by mailer.syr.edu (LSMTP for Windows NT v1.1b) with SMTP id <0.15CEE473@mailer.syr.edu>; Wed, 3 Jan 2007 9:32:11 -0500
Message-ID: <459BBE6B.2030403@syr.edu>
Date: Wed, 03 Jan 2007 09:32:11 -0500
From: Steven Rowe <sarowe@syr.edu>
User-Agent: Mail/News 1.5.0.4-GroupWise-IMAP-fix (Windows/20060619)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Speed of grouped queries
References: <8132099.post@talk.nabble.com>
In-Reply-To: <8132099.post@talk.nabble.com>
X-Enigmail-Version: 0.94.1.2
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Sdeck,

sdeck wrote:
> The query for collecting a specific actor is around 200-300 milliseconds,
> and the movie one, that actually queries each actor, takes roughly 500-700
> milliseconds. Yet, for a genre, where you may have 50-100 movies, it takes
> 500 milliseconds*# of movies

I'm having trouble visualizing both what your documents and your queries
look like.  Can you please provide more concrete information?
Sometimes, actual code helps.

For example, how do actors, movies and genres relate to your documents?
 Do you have some external source(s) of information (i.e. external to
your Lucene index) that relate actors to movies?  And movies to genres?

If actors, movies and genres are supposed to be a metaphor for what
you're "really" representing, then you'll have to extend your metaphor a
little bit to make sense (for "me" anyway) of what you're trying to "do".

Steve


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25267-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 03 15:06:31 2007
Return-Path: <java-user-return-25267-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 41160 invoked from network); 3 Jan 2007 15:06:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Jan 2007 15:06:30 -0000
Received: (qmail 76303 invoked by uid 500); 3 Jan 2007 15:06:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76275 invoked by uid 500); 3 Jan 2007 15:06:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76264 invoked by uid 99); 3 Jan 2007 15:06:29 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Jan 2007 07:06:29 -0800
X-ASF-Spam-Status: No, hits=1.9 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [217.12.10.221] (HELO web26010.mail.ukl.yahoo.com) (217.12.10.221)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 03 Jan 2007 07:06:18 -0800
Received: (qmail 33196 invoked by uid 60001); 3 Jan 2007 15:05:56 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=Message-ID:Received:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=AXKud+vqy27U47FS9o1nj5JXnowoOGazPHe37Qxi7D1su6uKxM5kLBMffTg+jVURajec+YJpat/gsxW51S6iRez/WCZQd00qs4Dsp1mFb0ivUs6CTGno1aenT8PCyQ+sZCEoIiUVph23c1tPukZpS0JKUoJDsS5m0JHqYv84tOc=  ;
Message-ID: <20070103150555.33194.qmail@web26010.mail.ukl.yahoo.com>
Received: from [193.36.230.96] by web26010.mail.ukl.yahoo.com via HTTP; Wed, 03 Jan 2007 15:05:55 GMT
Date: Wed, 3 Jan 2007 15:05:55 +0000 (GMT)
From: mark harwood <markharw00d@yahoo.co.uk>
Subject: Re: Speed of grouped queries
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=ascii
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

While we're talking movies etc - did anyone else have a stab at the Netflix=
 prize using Lucene?  ( http://www.netflixprize.com/  )=0A=0AI did get onto=
 the leaderboard (briefly) using a Lucene-based solution which involved loa=
ding all 100 million movie reviews into a single RAMDirectory for fast proc=
essing/analysis. I found the user/movie rating matrix could be represented =
in a very compact form by (ab)using Lucene position info for rating values.=
=0A=0A=0A=0A=0ASend instant messages to your online friends http://uk.messe=
nger.yahoo.com 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25268-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 03 15:37:47 2007
Return-Path: <java-user-return-25268-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51887 invoked from network); 3 Jan 2007 15:37:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Jan 2007 15:37:45 -0000
Received: (qmail 56752 invoked by uid 500); 3 Jan 2007 15:37:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56719 invoked by uid 500); 3 Jan 2007 15:37:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56705 invoked by uid 99); 3 Jan 2007 15:37:44 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Jan 2007 07:37:44 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Jan 2007 07:37:34 -0800
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1H28B0-0006AK-40
	for java-user@lucene.apache.org; Wed, 03 Jan 2007 07:37:14 -0800
Message-ID: <8142785.post@talk.nabble.com>
Date: Wed, 3 Jan 2007 07:37:14 -0800 (PST)
From: sdeck <scott.decker@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Speed of grouped queries
In-Reply-To: <459BBE6B.2030403@syr.edu>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: scott.decker@gmail.com
References: <8132099.post@talk.nabble.com> <459BBE6B.2030403@syr.edu>
X-Virus-Checked: Checked by ClamAV on apache.org


Sure.

Yes, this is a metaphor for what I am actually doing, but movies are a great
example.

So, you go out to each of the news sites and you pull in their entertainment
articles.  These could be generic news, generic entertainment, whatever, so
right off the bat you have no way of saying that this article is about a
specific actor, movie or genre. That is what the search part is going to do
for you, which is where I run into trouble.

for a given actor, I would have queries like this (there are roughly 10-15
criteria matches for an actor)
+title:<last name> +content:"<first name> <LastName>"

for a movie, it is just booleanquery of all of the actors in a movie, plus
+title:<movie title>

So, again, those are fairly fast.
Yet, when you are doing a genre query, you need to loop through each movie
and combine results, something like this. pseudo code

HitCollector = new HitCollector
loop
   search(movie query, hitCollector)
end loop

The hitcollector handles any duplicates by using a bitset during the collect
method call.
The movie query is about .3-.5 seconds, but if you loop 40-50 times to
combine each, that is what takes so long.
I can't combine each of the movie queries together into one, because I get a
memory error because of how many clauses there are (setting the clause
higher did not help)

Does this help refine the problem?
Thanks for your help!
Scott







Steven Rowe wrote:
> 
> Hi Sdeck,
> 
> sdeck wrote:
>> The query for collecting a specific actor is around 200-300 milliseconds,
>> and the movie one, that actually queries each actor, takes roughly
>> 500-700
>> milliseconds. Yet, for a genre, where you may have 50-100 movies, it
>> takes
>> 500 milliseconds*# of movies
> 
> I'm having trouble visualizing both what your documents and your queries
> look like.  Can you please provide more concrete information?
> Sometimes, actual code helps.
> 
> For example, how do actors, movies and genres relate to your documents?
>  Do you have some external source(s) of information (i.e. external to
> your Lucene index) that relate actors to movies?  And movies to genres?
> 
> If actors, movies and genres are supposed to be a metaphor for what
> you're "really" representing, then you'll have to extend your metaphor a
> little bit to make sense (for "me" anyway) of what you're trying to "do".
> 
> Steve
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/Speed-of-grouped-queries-tf2910499.html#a8142785
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25269-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 03 15:49:15 2007
Return-Path: <java-user-return-25269-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56893 invoked from network); 3 Jan 2007 15:49:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Jan 2007 15:49:14 -0000
Received: (qmail 86331 invoked by uid 500); 3 Jan 2007 15:49:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86308 invoked by uid 500); 3 Jan 2007 15:49:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86296 invoked by uid 99); 3 Jan 2007 15:49:06 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Jan 2007 07:49:06 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of vmslucene@gmail.com designates 209.85.132.247 as permitted sender)
Received: from [209.85.132.247] (HELO an-out-0708.google.com) (209.85.132.247)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Jan 2007 07:48:57 -0800
Received: by an-out-0708.google.com with SMTP id c3so1229572ana
        for <java-user@lucene.apache.org>; Wed, 03 Jan 2007 07:48:37 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=IWVI7H1rUSb8kWXQoSQA8Vn6nnLZhaLXuuzxebsYIUWnS4PNqDiNKVS4+MlwNuVELCNvWm15vkXt+235LNfCs/e7r9j/4WU/LC/rkGbcKtavAVbB711aoDz29M66IvggJK56omhN4wrXwjpYrLW9jzU1eaXcipbMT3saHH89VJc=
Received: by 10.78.57.11 with SMTP id f11mr2247557hua.1167839316245;
        Wed, 03 Jan 2007 07:48:36 -0800 (PST)
Received: by 10.78.195.18 with HTTP; Wed, 3 Jan 2007 07:48:36 -0800 (PST)
Message-ID: <2e0306af0701030748i59f9c85dqe9958359de2328f7@mail.gmail.com>
Date: Wed, 3 Jan 2007 10:48:36 -0500
From: "Mark Mei" <vmslucene@gmail.com>
To: java-user@lucene.apache.org
Subject: digester/lucene runtime problems
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_162864_30565217.1167839316019"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_162864_30565217.1167839316019
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi,

We have 500k xml documents in a file. We ran the digest/lucene and get the
following error messages. We had ran a smaller size file with 20k xml
documents without any problems. Can anyone help us to resolve this problem?
Thank you very much.

Regards,

Mark


Jan 3, 2007 10:17:37 AM org.apache.commons.digester.Digester endElement
SEVERE: End event threw exception
java.lang.reflect.InvocationTargetException
        at sun.reflect.GeneratedMethodAccessor23.invoke(Unknown Source)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(
DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:585)
        at org.apache.commons.beanutils.MethodUtils.invokeMethod(
MethodUtils.java:216)
        at org.apache.commons.digester.SetNextRule.end(SetNextRule.java:217)
        at org.apache.commons.digester.Rule.end(Rule.java:253)
        at org.apache.commons.digester.Digester.endElement(Digester.java
:1222)
        at org.apache.xerces.parsers.AbstractSAXParser.endElement(Unknown
Source)
        at
org.apache.xerces.impl.XMLDocumentFragmentScannerImpl.scanEndElement(Unknown
Source)
        at
org.apache.xerces.impl.XMLDocumentFragmentScannerImpl$FragmentContentDispatcher.dispatch(Unknown
Source)
        at
org.apache.xerces.impl.XMLDocumentFragmentScannerImpl.scanDocument(Unknown
Source)
        at org.apache.xerces.parsers.XML11Configuration.parse(Unknown
Source)
        at org.apache.xerces.parsers.XML11Configuration.parse(Unknown
Source)
        at org.apache.xerces.parsers.XMLParser.parse(Unknown Source)
        at org.apache.xerces.parsers.AbstractSAXParser.parse(Unknown Source)
        at org.apache.xerces.jaxp.SAXParserImpl$JAXPSAXParser.parse(Unknown
Source)
        at org.apache.commons.digester.Digester.parse(Digester.java:1728)
        at DOCUMENTParserIndexer.main(DOCUMENTParserIndexer.java:127)
Caused by: java.lang.NullPointerException
        at org.apache.lucene.index.FieldsReader.doc(FieldsReader.java:82)
        at org.apache.lucene.index.SegmentReader.document(SegmentReader.java
:284)
        at org.apache.lucene.index.SegmentMerger.mergeFields(
SegmentMerger.java:186)
        at org.apache.lucene.index.SegmentMerger.merge(SegmentMerger.java
:88)
        at org.apache.lucene.index.IndexWriter.mergeSegments(
IndexWriter.java:681)
        at org.apache.lucene.index.IndexWriter.mergeSegments(
IndexWriter.java:658)
        at org.apache.lucene.index.IndexWriter.maybeMergeSegments(
IndexWriter.java:646)
        at org.apache.lucene.index.IndexWriter.addDocument(IndexWriter.java
:453)
        at org.apache.lucene.index.IndexWriter.addDocument(IndexWriter.java
:436)
        at DOCUMENTParserIndexer.addDOCUMENT(DOCUMENTParserIndexer.java:59)
        ... 18 more
Exception in thread "main" java.lang.NullPointerException
        at org.apache.commons.digester.Digester.createSAXException(
Digester.java:3181)
        at org.apache.commons.digester.Digester.createSAXException(
Digester.java:3207)
        at org.apache.commons.digester.Digester.endElement(Digester.java
:1225)
        at org.apache.xerces.parsers.AbstractSAXParser.endElement(Unknown
Source)
        at
org.apache.xerces.impl.XMLDocumentFragmentScannerImpl.scanEndElement(Unknown
Source)
        at
org.apache.xerces.impl.XMLDocumentFragmentScannerImpl$FragmentContentDispatcher.dispatch(Unknown
Source)
        at
org.apache.xerces.impl.XMLDocumentFragmentScannerImpl.scanDocument(Unknown
Source)
        at org.apache.xerces.parsers.XML11Configuration.parse(Unknown
Source)
        at org.apache.xerces.parsers.XML11Configuration.parse(Unknown
Source)
        at org.apache.xerces.parsers.XMLParser.parse(Unknown Source)
        at org.apache.xerces.parsers.AbstractSAXParser.parse(Unknown Source)
        at org.apache.xerces.jaxp.SAXParserImpl$JAXPSAXParser.parse(Unknown
Source)
        at org.apache.commons.digester.Digester.parse(Digester.java:1728)
        at DOCUMENTParserIndexer.main(DOCUMENTParserIndexer.java:127)

------=_Part_162864_30565217.1167839316019--

From java-user-return-25270-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 03 16:26:41 2007
Return-Path: <java-user-return-25270-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 66632 invoked from network); 3 Jan 2007 16:26:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Jan 2007 16:26:40 -0000
Received: (qmail 65391 invoked by uid 500); 3 Jan 2007 16:26:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65173 invoked by uid 500); 3 Jan 2007 16:26:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65162 invoked by uid 99); 3 Jan 2007 16:26:40 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Jan 2007 08:26:40 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of yseeley@gmail.com designates 66.249.92.171 as permitted sender)
Received: from [66.249.92.171] (HELO ug-out-1314.google.com) (66.249.92.171)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Jan 2007 08:26:30 -0800
Received: by ug-out-1314.google.com with SMTP id k40so5206002ugc
        for <java-user@lucene.apache.org>; Wed, 03 Jan 2007 08:26:09 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=NFmfU/kV3DzI3GuoyitCcgiFTNoo9RDGQ3ETeIsFSD89qoNmjtBPGPU4ad4QMPw4daCdexxJBRv5Y2h7CTEvXIhofxOt5rBdrI92lpsLUJ+4sLv+SjjLJdLb1kNlM5VlLPzR1h2NEJsXcjPOcEqy8bkcuVlBlx4DHQCGaJCce94=
Received: by 10.82.162.14 with SMTP id k14mr1379231bue.1167841569598;
        Wed, 03 Jan 2007 08:26:09 -0800 (PST)
Received: by 10.82.185.11 with HTTP; Wed, 3 Jan 2007 08:26:09 -0800 (PST)
Message-ID: <c68e39170701030826u4e8c7ce8y8540437e54466790@mail.gmail.com>
Date: Wed, 3 Jan 2007 11:26:09 -0500
From: "Yonik Seeley" <yonik@apache.org>
Sender: yseeley@gmail.com
To: java-user@lucene.apache.org
Subject: Re: New Lucene QueryParser
In-Reply-To: <45761B35.1060900@gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <45761B35.1060900@gmail.com>
X-Google-Sender-Auth: a11032ca2ea7afa0
X-Virus-Checked: Checked by ClamAV on apache.org

On 12/5/06, Mark Miller <markrmiller@gmail.com> wrote:
> I have finally delved back into the Lucene Query parser that I started a
> few months back.

Looks like interesting stuff Mark, but why did you make everything so
configurable (syntax-wise)?  IMO, there is a lot of value to
standards, and doing things like changing the precedence of operators
isn't necessarily a good thing :-)

Did you ever get a chance to look at Paul's surround language? (I've
never had the chance to dive into it myself)

> Query-time thesaurus expansion / General token to query expansion :
> Takes advantage of a general find/replace feature, "expand" might map to
> "(expander | expanded)" ... or any other valid syntax.

The QueryParser does this instead of TokenFilters?
Is it based on static configuration?

-Yonik
http://incubator.apache.org/solr Solr, the open-source Lucene search server

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25271-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 03 16:50:43 2007
Return-Path: <java-user-return-25271-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73043 invoked from network); 3 Jan 2007 16:50:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Jan 2007 16:50:43 -0000
Received: (qmail 12388 invoked by uid 500); 3 Jan 2007 16:50:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12010 invoked by uid 500); 3 Jan 2007 16:50:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11999 invoked by uid 99); 3 Jan 2007 16:50:42 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Jan 2007 08:50:42 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [128.230.18.29] (HELO mailer.syr.edu) (128.230.18.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Jan 2007 08:50:31 -0800
Received: from [128.230.84.138] (syru84-138.syr.edu) by mailer.syr.edu (LSMTP for Windows NT v1.1b) with SMTP id <0.15CEF6D2@mailer.syr.edu>; Wed, 3 Jan 2007 11:50:11 -0500
Message-ID: <459BDEC2.2060102@syr.edu>
Date: Wed, 03 Jan 2007 11:50:10 -0500
From: Steven Rowe <sarowe@syr.edu>
User-Agent: Mail/News 1.5.0.4-GroupWise-IMAP-fix (Windows/20060619)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Speed of grouped queries
References: <8132099.post@talk.nabble.com> <459BBE6B.2030403@syr.edu> <8142785.post@talk.nabble.com>
In-Reply-To: <8142785.post@talk.nabble.com>
X-Enigmail-Version: 0.94.1.2
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Scott,

sdeck wrote:
> I can't combine each of the movie queries together into one, because I get a
> memory error because of how many clauses there are (setting the clause
> higher did not help)

Have you tried increasing the memory available to the JVM?  Sun's JVM
takes an option "-Xmx" to change the maximum amount of heap space to use
(defaults to 64MB). For Java 1.5, see
<http://java.sun.com/j2se/1.5.0/docs/tooldocs/windows/java.html#Xms> for
Windows or
<http://java.sun.com/j2se/1.5.0/docs/tooldocs/solaris/java.html#Xms> for
Solaris and Linux.

You may have to increase the maximum # of allowed clauses too (sounds
like you're already aware of this one):
<http://lucene.apache.org/java/docs/api/org/apache/lucene/search/BooleanQuery.html#setMaxClauseCount(int)>

If this doesn't help, you may want to look into QueryFilter
<http://lucene.apache.org/java/2_0_0/api/org/apache/lucene/search/QueryFilter.html>.
 You might try using a ChainedFilter (from the Lucene Sandbox - note the
latest release of this class is not located in lucene-core-2.0.0.jar,
but rather in lucene-misc-2.0.0.jar)
<http://lucene.apache.org/java/2_0_0/api/org/apache/lucene/misc/ChainedFilter.html>
to connect movie QueryFilters for a genre.

To improve performance (beyond the first query execution), you could
wrap the individual QueryFilters in CachingWrapperFilters
<http://lucene.apache.org/java/2_0_0/api/org/apache/lucene/search/CachingWrapperFilter.html>.

For something completely different, since you seem to be interested in
online query performance, you could run all possible queries offline,
and use the results to construct a derived index, in which documents
contain "actor", "movie" and "genre" fields.  This derived index would
be plenty fast, I expect.  And if running all possible genre queries is
too resource-intensive, then you could compromise and construct your
derived index with just an "actor" field, or both an "actor" and a
"movie" field.

In any case, it sounds like the # of documents in your index is fairly
small -- have you tried using RAMDirectory
<http://lucene.apache.org/java/docs/api/org/apache/lucene/store/RAMDirectory.html>?


Hope it helps,
Steve

> Steven Rowe wrote:
>> Hi Sdeck,
>>
>> sdeck wrote:
>>> The query for collecting a specific actor is around 200-300 milliseconds,
>>> and the movie one, that actually queries each actor, takes roughly
>>> 500-700
>>> milliseconds. Yet, for a genre, where you may have 50-100 movies, it
>>> takes
>>> 500 milliseconds*# of movies
>> I'm having trouble visualizing both what your documents and your queries
>> look like.  Can you please provide more concrete information?
>> Sometimes, actual code helps.
>>
>> For example, how do actors, movies and genres relate to your documents?
>>  Do you have some external source(s) of information (i.e. external to
>> your Lucene index) that relate actors to movies?  And movies to genres?
>>
>> If actors, movies and genres are supposed to be a metaphor for what
>> you're "really" representing, then you'll have to extend your metaphor a
>> little bit to make sense (for "me" anyway) of what you're trying to "do".
>>
>> Steve


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25272-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 03 16:59:36 2007
Return-Path: <java-user-return-25272-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 74880 invoked from network); 3 Jan 2007 16:59:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Jan 2007 16:59:35 -0000
Received: (qmail 27560 invoked by uid 500); 3 Jan 2007 16:59:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27521 invoked by uid 500); 3 Jan 2007 16:59:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27510 invoked by uid 99); 3 Jan 2007 16:59:34 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Jan 2007 08:59:34 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Jan 2007 08:59:23 -0800
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1H29SA-0000lS-F9
	for java-user@lucene.apache.org; Wed, 03 Jan 2007 08:59:02 -0800
Message-ID: <8144324.post@talk.nabble.com>
Date: Wed, 3 Jan 2007 08:59:02 -0800 (PST)
From: sdeck <scott.decker@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Speed of grouped queries
In-Reply-To: <459BDEC2.2060102@syr.edu>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: scott.decker@gmail.com
References: <8132099.post@talk.nabble.com> <459BBE6B.2030403@syr.edu> <8142785.post@talk.nabble.com> <459BDEC2.2060102@syr.edu>
X-Virus-Checked: Checked by ClamAV on apache.org



Yes, indeed. I have tried each of those, hence my frustration.  
So, the max clause one did not seem to work, I ran out of heap memory for
some reason. I have my heap top set to -Xmx1024m
so, that should be enough.
Tried the query filter (that one also caused a heap memory error)

yeah, I have thought about pre-indexing some fields. Basically running the
queries I have now and inserting the actor, movie and genred ids, however,
what if my queries need to be tweaked, or they change completely? I now have
all of these stored documents with possibly incorrect matches.
That index would have to be created anytime I update the current index, plus
change my queries, which may be what I have to do eventually. I was just
trying to fix it from the query side first  and if that failed, then go the
secondary (almost inverted) index route.

I guess, any ideas why I would run out of heap memory by combining all of
those boolean queries together and then running the query? What is happening
in the background that would make that occur? Is it storing something in
memory, like all of the common terms or something, to cause that to occur?

Sdeck



Steven Rowe wrote:
> 
> Hi Scott,
> 
> sdeck wrote:
>> I can't combine each of the movie queries together into one, because I
>> get a
>> memory error because of how many clauses there are (setting the clause
>> higher did not help)
> 
> Have you tried increasing the memory available to the JVM?  Sun's JVM
> takes an option "-Xmx" to change the maximum amount of heap space to use
> (defaults to 64MB). For Java 1.5, see
> <http://java.sun.com/j2se/1.5.0/docs/tooldocs/windows/java.html#Xms> for
> Windows or
> <http://java.sun.com/j2se/1.5.0/docs/tooldocs/solaris/java.html#Xms> for
> Solaris and Linux.
> 
> You may have to increase the maximum # of allowed clauses too (sounds
> like you're already aware of this one):
> <http://lucene.apache.org/java/docs/api/org/apache/lucene/search/BooleanQuery.html#setMaxClauseCount(int)>
> 
> If this doesn't help, you may want to look into QueryFilter
> <http://lucene.apache.org/java/2_0_0/api/org/apache/lucene/search/QueryFilter.html>.
>  You might try using a ChainedFilter (from the Lucene Sandbox - note the
> latest release of this class is not located in lucene-core-2.0.0.jar,
> but rather in lucene-misc-2.0.0.jar)
> <http://lucene.apache.org/java/2_0_0/api/org/apache/lucene/misc/ChainedFilter.html>
> to connect movie QueryFilters for a genre.
> 
> To improve performance (beyond the first query execution), you could
> wrap the individual QueryFilters in CachingWrapperFilters
> <http://lucene.apache.org/java/2_0_0/api/org/apache/lucene/search/CachingWrapperFilter.html>.
> 
> For something completely different, since you seem to be interested in
> online query performance, you could run all possible queries offline,
> and use the results to construct a derived index, in which documents
> contain "actor", "movie" and "genre" fields.  This derived index would
> be plenty fast, I expect.  And if running all possible genre queries is
> too resource-intensive, then you could compromise and construct your
> derived index with just an "actor" field, or both an "actor" and a
> "movie" field.
> 
> In any case, it sounds like the # of documents in your index is fairly
> small -- have you tried using RAMDirectory
> <http://lucene.apache.org/java/docs/api/org/apache/lucene/store/RAMDirectory.html>?
> 
> 
> Hope it helps,
> Steve
> 
>> Steven Rowe wrote:
>>> Hi Sdeck,
>>>
>>> sdeck wrote:
>>>> The query for collecting a specific actor is around 200-300
>>>> milliseconds,
>>>> and the movie one, that actually queries each actor, takes roughly
>>>> 500-700
>>>> milliseconds. Yet, for a genre, where you may have 50-100 movies, it
>>>> takes
>>>> 500 milliseconds*# of movies
>>> I'm having trouble visualizing both what your documents and your queries
>>> look like.  Can you please provide more concrete information?
>>> Sometimes, actual code helps.
>>>
>>> For example, how do actors, movies and genres relate to your documents?
>>>  Do you have some external source(s) of information (i.e. external to
>>> your Lucene index) that relate actors to movies?  And movies to genres?
>>>
>>> If actors, movies and genres are supposed to be a metaphor for what
>>> you're "really" representing, then you'll have to extend your metaphor a
>>> little bit to make sense (for "me" anyway) of what you're trying to
>>> "do".
>>>
>>> Steve
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/Speed-of-grouped-queries-tf2910499.html#a8144324
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25273-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 03 17:32:29 2007
Return-Path: <java-user-return-25273-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84778 invoked from network); 3 Jan 2007 17:32:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Jan 2007 17:32:28 -0000
Received: (qmail 8729 invoked by uid 500); 3 Jan 2007 17:32:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8695 invoked by uid 500); 3 Jan 2007 17:32:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8684 invoked by uid 99); 3 Jan 2007 17:32:27 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Jan 2007 09:32:27 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of markrmiller@gmail.com designates 209.85.132.241 as permitted sender)
Received: from [209.85.132.241] (HELO an-out-0708.google.com) (209.85.132.241)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Jan 2007 09:32:16 -0800
Received: by an-out-0708.google.com with SMTP id c3so1244394ana
        for <java-user@lucene.apache.org>; Wed, 03 Jan 2007 09:31:55 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=jNysws74yYckUEppCMcQLbM92JFMMt0VwWhlBdkV0mP6+9No5irHZnY1F0vGgAAoPTYyuSfBMbol+WaDWM2ZAYKXP+4JsDZQ5MzYmPMjHdKbK/KJF7YNFt+e5PFbTfiKIB54wmbGwo83/kWn/sgQqybywfIkVXB7VcRkc6qLnRM=
Received: by 10.100.166.14 with SMTP id o14mr6800233ane.1167845515633;
        Wed, 03 Jan 2007 09:31:55 -0800 (PST)
Received: from ?192.168.1.103? ( [216.66.114.42])
        by mx.google.com with ESMTP id b18sm12426273ana.2007.01.03.09.31.53;
        Wed, 03 Jan 2007 09:31:54 -0800 (PST)
Message-ID: <459BE878.5080802@gmail.com>
Date: Wed, 03 Jan 2007 12:31:36 -0500
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 1.5.0.9 (Windows/20061207)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: New Lucene QueryParser
References: <45761B35.1060900@gmail.com> <c68e39170701030826u4e8c7ce8y8540437e54466790@mail.gmail.com>
In-Reply-To: <c68e39170701030826u4e8c7ce8y8540437e54466790@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org


>
> Looks like interesting stuff Mark, but why did you make everything so
> configurable (syntax-wise)?  IMO, there is a lot of value to
> standards, and doing things like changing the precedence of operators
> isn't necessarily a good thing :-)
>
I made it so configurable because I needed to implement a certain query 
language at work, but I think that the language is not that great. I 
don't like most of the choices in it. I needed something though, and it 
was going to require a lot of work...not only did we need arbitrary 
mixing of boolean and proximity operators, but we needed the sentence 
and paragraph proximity as well as the thesaurus expansion. We also have 
many people who ask for one offs that only apply to their setup, like 
NEAR being an operator that is really within 10. All of this was not 
something I could guarantee that I could do (I just entered the 
workforce), and I certainly didn't have time at work with everything 
else I needed to do for this project I am working on. I wasn't going to 
put so much free time into a parser that I did not like though. So I 
made it very configurable so that it could be configured into the parser 
I needed while still being the parser I wanted.

> Did you ever get a chance to look at Paul's surround language? (I've
> never had the chance to dive into it myself)
>
I have looked into Paul's parser and it is a very nice piece of work. 
Unfortunately, I needed to duplicate a very specific syntax. Also, 
Paul's parser would not give me sentence and paragraph proximity or 
<i>arbitrary</i> connecting of boolean and prox operators. That brings 
me back to why this is so configurable: a big reason is to be able to 
simulate a syntax that a customer may be familiar with and want 
retained. I think that order of operations should be standard too, but I 
see no problem with the standard at someones site being different than 
the standard I use for another site. Some people may want/need proximity 
to bind tighter than ANDNOR, while others might need/want the reverse. 
Being too configurable has it's draw backs, but I am attempting to 
create an alternative parser, not a QueryParser replacement. Choose the 
best weapon for the job ;)

>> Query-time thesaurus expansion / General token to query expansion :
>> Takes advantage of a general find/replace feature, "expand" might map to
>> "(expander | expanded)" ... or any other valid syntax.
>
> The QueryParser does this instead of TokenFilters?
> Is it based on static configuration?
>
I do not use TokenFilters as it does not fit my requirements (I think). 
Right now, a hashmap is used to map a token to replacement syntax. A 
queryparser is generated from a parserfactory. The parserfactory takes a 
configuration class. When you get a queryparser from the factory you can 
choose to inherit the config from the factory, or you can just set the 
options and configuration directly on the parser. I did this because I 
have a need for a base configuration to a common syntax that individual 
accounts than want to be able to tweak to their needs.

The queryparser is a two pass system. The first pass does not 
tokenize...it does query expansion and preps the suggested query (the 
suggested query must be suggested in the syntax the query was typed in, 
and without expansion). I had worried about speed when I made the 2 pass 
decision, but it has allowed me great flexibility, and with my testing 
so far I have had 0 speed problems.

By the way, I have recently tested the paragraph/sentence proximity 
searching (mark within 4 sentences of dog) on a 300k doc index (docs 
8-20k) and the perceived speed was as fast as a normal one or two work 
boolean search (not a very scientific test :))

A problem with the paragraph/sentence proximity search right now is that 
if there is only 1 doc in the index the proximity search will wrap. I am 
sure this can be fixed.

- Mark

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25274-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 03 18:20:09 2007
Return-Path: <java-user-return-25274-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97124 invoked from network); 3 Jan 2007 18:20:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Jan 2007 18:20:09 -0000
Received: (qmail 1618 invoked by uid 500); 3 Jan 2007 18:20:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 1580 invoked by uid 500); 3 Jan 2007 18:20:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 1568 invoked by uid 99); 3 Jan 2007 18:20:08 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Jan 2007 10:20:08 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of daniel.armbrust.list@gmail.com designates 64.233.162.225 as permitted sender)
Received: from [64.233.162.225] (HELO nz-out-0506.google.com) (64.233.162.225)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Jan 2007 10:19:57 -0800
Received: by nz-out-0506.google.com with SMTP id i1so2794553nzh
        for <java-user@lucene.apache.org>; Wed, 03 Jan 2007 10:19:36 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:content-type:content-transfer-encoding;
        b=QwkkiMmkbd7vTKjpl1veEX9MV1I4k/pwb4cBGbRKxddmcZ0F5bOB5nxKi6APm5oUOWqJOllXMC0SN9WjRSFzj8cJIRVhdkIhL6fLTdpAl0QEdgDujMqfAqmng+3ZfDtkCA8Uk+MwA0n9fkAm6LfFcnUQSFXjh/MSEU/IlxSVX1c=
Received: by 10.35.54.1 with SMTP id g1mr40266606pyk.1167848376462;
        Wed, 03 Jan 2007 10:19:36 -0800 (PST)
Received: from ?172.24.156.35? ( [129.176.197.15])
        by mx.google.com with ESMTP id p77sm20018455pyb.2007.01.03.10.19.35;
        Wed, 03 Jan 2007 10:19:35 -0800 (PST)
Message-ID: <459BF3AE.7070202@gmail.com>
Date: Wed, 03 Jan 2007 12:19:26 -0600
From: Dan Armbrust <daniel.armbrust.list@gmail.com>
User-Agent: Thunderbird 1.5.0.9 (Windows/20061207)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: obscure error...
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

This probably isn't a lucene error - but I'm hoping that maybe somebody 
here has seen it before, and can shed some light.

I'm trying to add a simple document to an empty index.  The toString on 
the document looks like this:

Document<stored/compressed,indexed<UNIQUE_DOCUMENT_IDENTIFIER_FIELD:Automobiles-0> 
stored/uncompressed,indexed<codingSchemeName:Automobiles> 
stored/uncompressed,indexed<codingSchemeId:urn:oid:11.11.0.1> 
indexed<codeBoundry:T> 
stored/uncompressed,indexed,tokenized<fields:codingSchemeName 
codingSchemeId codeBoundry >>


Simple enough.  This works fine on most systems / platforms.  However - 
when using this jvm:

java -version
java version "1.5.0_10"
Java(TM) 2 Runtime Environment, Standard Edition (build 1.5.0_10-b03)
Java HotSpot(TM) 64-Bit Server VM (build 1.5.0_10-b03, mixed mode)

On this system:

uname -a
Linux bmidev2 2.6.18-1.2239.fc5 #1 SMP Fri Nov 10 12:51:06 EST 2006 
x86_64 x86_64 x86_64 GNU/Linux

(Fedora Core 5)

I get this error:

Exception in thread "Thread-6" java.lang.InternalError
	at java.util.zip.Deflater.init(Native Method)
	at java.util.zip.Deflater.<init>(Deflater.java:117)
	at java.util.zip.Deflater.<init>(Deflater.java:134)
	at org.apache.lucene.index.FieldsWriter.compress(FieldsWriter.java:113)
	at org.apache.lucene.index.FieldsWriter.addDocument(FieldsWriter.java:88)
	at 
org.apache.lucene.index.DocumentWriter.addDocument(DocumentWriter.java:79)
	at org.apache.lucene.index.IndexWriter.addDocument(IndexWriter.java:476)
	at org.apache.lucene.index.IndexWriter.addDocument(IndexWriter.java:462)
	.....
	
The code works just fine if I use the 32 bit counterpart JVM on the same 
system.  The code also works fine if I use the same exact 64 bit JVM on 
a different (Fedora Core 6) system.

I suspect that I have a missing library or some such oddity that the JVM 
is expecting on this system - but how do I track it down?

Any suggestions welcome,

Thanks,

Dan


-- 
****************************
Daniel Armbrust
Biomedical Informatics
Mayo Clinic Rochester
daniel.armbrust(at)mayo.edu
http://informatics.mayo.edu/

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25275-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 03 18:37:52 2007
Return-Path: <java-user-return-25275-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 105 invoked from network); 3 Jan 2007 18:37:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Jan 2007 18:37:51 -0000
Received: (qmail 19596 invoked by uid 500); 3 Jan 2007 18:37:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18564 invoked by uid 500); 3 Jan 2007 18:37:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18553 invoked by uid 99); 3 Jan 2007 18:37:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Jan 2007 10:37:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [128.230.18.29] (HELO mailer.syr.edu) (128.230.18.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Jan 2007 10:37:42 -0800
Received: from [128.230.84.138] (syru84-138.syr.edu) by mailer.syr.edu (LSMTP for Windows NT v1.1b) with SMTP id <0.15CF0425@mailer.syr.edu>; Wed, 3 Jan 2007 13:37:21 -0500
Message-ID: <459BF7E1.2040503@syr.edu>
Date: Wed, 03 Jan 2007 13:37:21 -0500
From: Steven Rowe <sarowe@syr.edu>
User-Agent: Mail/News 1.5.0.4-GroupWise-IMAP-fix (Windows/20060619)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Speed of grouped queries
References: <8132099.post@talk.nabble.com> <459BBE6B.2030403@syr.edu> <8142785.post@talk.nabble.com> <459BDEC2.2060102@syr.edu> <8144324.post@talk.nabble.com>
In-Reply-To: <8144324.post@talk.nabble.com>
X-Enigmail-Version: 0.94.1.2
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Scott,

sdeck wrote:
> I guess, any ideas why I would run out of heap memory by combining all of
> those boolean queries together and then running the query? What is happening
> in the background that would make that occur? Is it storing something in
> memory, like all of the common terms or something, to cause that to occur?

Doug Cutting gives a formula for Lucene memory usage for queries here
(from 2001):

<http://mail-archives.apache.org/mod_mbox/lucene-java-user/200111.mbox/%3c4BC270C6AB8AD411AD0B00B0D0493DF0D78A1C@mail.grandcentral.com%3e>

And some more info here about the term dictionary (from 2003):

<http://mail-archives.apache.org/mod_mbox/lucene-java-dev/200305.mbox/%3c3EC555CE.4080906@lucene.com%3e>

You might want to look at this thread, which has some discussion about
omitting norms and the term dictionary (from 2005):

<http://www.nabble.com/Memory-Usage-tf523535.html>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25276-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 03 19:37:47 2007
Return-Path: <java-user-return-25276-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 15388 invoked from network); 3 Jan 2007 19:37:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Jan 2007 19:37:46 -0000
Received: (qmail 41429 invoked by uid 500); 3 Jan 2007 19:37:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41407 invoked by uid 500); 3 Jan 2007 19:37:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41396 invoked by uid 99); 3 Jan 2007 19:37:45 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Jan 2007 11:37:45 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Jan 2007 11:37:35 -0800
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1H2BvG-0006YF-Uw
	for java-user@lucene.apache.org; Wed, 03 Jan 2007 11:37:14 -0800
Message-ID: <8147121.post@talk.nabble.com>
Date: Wed, 3 Jan 2007 11:37:14 -0800 (PST)
From: sdeck <scott.decker@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Speed of grouped queries
In-Reply-To: <459BF7E1.2040503@syr.edu>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: scott.decker@gmail.com
References: <8132099.post@talk.nabble.com> <459BBE6B.2030403@syr.edu> <8142785.post@talk.nabble.com> <459BDEC2.2060102@syr.edu> <8144324.post@talk.nabble.com> <459BF7E1.2040503@syr.edu>
X-Virus-Checked: Checked by ClamAV on apache.org


Mucho thanks. I will look into these.
For more info, I have roughly 30000 documents now, and about 350,000 terms
When I do my queries I use the StandardAnalyzer with a whole slew of stop
words.
So, not sure if that might still be messing me up or not.
In the end, I may have to go with the prebuilt search indexes, which is no
fun.

I may just have to step through the lucene code to see if it is creating
large arrays somewhere that it doesn't need to, or could just cache. Not
sure. 

Will let you know more as I work on it tonight.
Sdeck


Steven Rowe wrote:
> 
> Hi Scott,
> 
> sdeck wrote:
>> I guess, any ideas why I would run out of heap memory by combining all of
>> those boolean queries together and then running the query? What is
>> happening
>> in the background that would make that occur? Is it storing something in
>> memory, like all of the common terms or something, to cause that to
>> occur?
> 
> Doug Cutting gives a formula for Lucene memory usage for queries here
> (from 2001):
> 
> <http://mail-archives.apache.org/mod_mbox/lucene-java-user/200111.mbox/%3c4BC270C6AB8AD411AD0B00B0D0493DF0D78A1C@mail.grandcentral.com%3e>
> 
> And some more info here about the term dictionary (from 2003):
> 
> <http://mail-archives.apache.org/mod_mbox/lucene-java-dev/200305.mbox/%3c3EC555CE.4080906@lucene.com%3e>
> 
> You might want to look at this thread, which has some discussion about
> omitting norms and the term dictionary (from 2005):
> 
> <http://www.nabble.com/Memory-Usage-tf523535.html>
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/Speed-of-grouped-queries-tf2910499.html#a8147121
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25277-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 03 19:40:42 2007
Return-Path: <java-user-return-25277-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 16118 invoked from network); 3 Jan 2007 19:40:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Jan 2007 19:40:41 -0000
Received: (qmail 48043 invoked by uid 500); 3 Jan 2007 19:40:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48006 invoked by uid 500); 3 Jan 2007 19:40:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47995 invoked by uid 99); 3 Jan 2007 19:40:40 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Jan 2007 11:40:40 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Jan 2007 11:40:30 -0800
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1H2By5-0006g0-Ur
	for java-user@lucene.apache.org; Wed, 03 Jan 2007 11:40:09 -0800
Message-ID: <8147174.post@talk.nabble.com>
Date: Wed, 3 Jan 2007 11:40:09 -0800 (PST)
From: sdeck <scott.decker@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Speed of grouped queries
In-Reply-To: <459BF7E1.2040503@syr.edu>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: scott.decker@gmail.com
References: <8132099.post@talk.nabble.com> <459BBE6B.2030403@syr.edu> <8142785.post@talk.nabble.com> <459BDEC2.2060102@syr.edu> <8144324.post@talk.nabble.com> <459BF7E1.2040503@syr.edu>
X-Virus-Checked: Checked by ClamAV on apache.org


Sorry, one more bit of info.
In the index, the contents of the article are stored/indexed.  These are
just the guts though, and it is around 1-3K worth of character data.
The current index, as it stands with 33K of documents is about 109 megs.

Again, it seems like I am just missing something somewhere. Thanks for being
the sounding board.
Scott



Steven Rowe wrote:
> 
> Hi Scott,
> 
> sdeck wrote:
>> I guess, any ideas why I would run out of heap memory by combining all of
>> those boolean queries together and then running the query? What is
>> happening
>> in the background that would make that occur? Is it storing something in
>> memory, like all of the common terms or something, to cause that to
>> occur?
> 
> Doug Cutting gives a formula for Lucene memory usage for queries here
> (from 2001):
> 
> <http://mail-archives.apache.org/mod_mbox/lucene-java-user/200111.mbox/%3c4BC270C6AB8AD411AD0B00B0D0493DF0D78A1C@mail.grandcentral.com%3e>
> 
> And some more info here about the term dictionary (from 2003):
> 
> <http://mail-archives.apache.org/mod_mbox/lucene-java-dev/200305.mbox/%3c3EC555CE.4080906@lucene.com%3e>
> 
> You might want to look at this thread, which has some discussion about
> omitting norms and the term dictionary (from 2005):
> 
> <http://www.nabble.com/Memory-Usage-tf523535.html>
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/Speed-of-grouped-queries-tf2910499.html#a8147174
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25278-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 03 21:09:42 2007
Return-Path: <java-user-return-25278-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 50377 invoked from network); 3 Jan 2007 21:09:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Jan 2007 21:09:41 -0000
Received: (qmail 28625 invoked by uid 500); 3 Jan 2007 21:09:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28597 invoked by uid 500); 3 Jan 2007 21:09:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28583 invoked by uid 99); 3 Jan 2007 21:09:40 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Jan 2007 13:09:40 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of findmath@gmail.com designates 64.233.182.191 as permitted sender)
Received: from [64.233.182.191] (HELO nf-out-0910.google.com) (64.233.182.191)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Jan 2007 13:09:28 -0800
Received: by nf-out-0910.google.com with SMTP id n28so6564329nfc
        for <java-user@lucene.apache.org>; Wed, 03 Jan 2007 13:09:07 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=CDc5p2fhobHAopT/xOc60OgJNROTW+VEYZVIWC0470voBQEHGlmbP1trisf4ygWKABczER8kfTZGK75yCjuVZTmXnW+aa45oJO0TpfOWsa1gqijzno5iPeLpunQHnPYEaUOej8fgI5Ctd0QTe4eKh/oeXuw0g1IFqr2smayoxfU=
Received: by 10.49.68.6 with SMTP id v6mr13434969nfk.1167858546458;
        Wed, 03 Jan 2007 13:09:06 -0800 (PST)
Received: by 10.49.60.1 with HTTP; Wed, 3 Jan 2007 13:09:06 -0800 (PST)
Message-ID: <abe188f20701031309w6f8b44b0q675393d343142b0@mail.gmail.com>
Date: Wed, 3 Jan 2007 15:09:06 -0600
From: "Find Me" <findmath@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Speed of grouped queries
In-Reply-To: <8132099.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_1490_15747580.1167858546286"
References: <8132099.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_1490_15747580.1167858546286
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

On 1/2/07, sdeck <scott.decker@gmail.com> wrote:
>
>
> Thanks for advanced on any insight on this one.
>
> I have a fairly large query to run, and it takes roughly 20-40 seconds to
> complete the way that i have it.
> here is the best example I can give.
>
> I have a set of roughly 25K documents indexed
>
> I have queries that get documents matching a particular actor.
>
> Then, I have a movie query that takes all of the documents found for each
> actor query and combines them all together to say, here are all documents
> that are relevant for this movie.
>
> Then, and here is the time hog, I have a genre query that says, take all
> movies and get their results and combine them together into this genre
> result set.


Is there any possibility to use Carrot clustering for genre? Could you
please give examples for the final complex query as well as individual
simple queries?  You can also state the aim of the query. Are you trying to
get clustered list of movies (based on genre) for a particular actor?

--Rajesh Munavalli

The problem is, at indexing time, I do not have a way to say if a document
> is a particular genre, or a particular actor, or movie etc.  If I try and
> say for the genre query, get all documents and then filter for the queries
> for movies and actors, I get heap space memory issues.
>
> The query for collecting a specific actor is around 200-300 milliseconds,
> and the movie one, that actually queries each actor, takes roughly 500-700
> milliseconds. Yet, for a genre, where you may have 50-100 movies, it takes
> 500 milliseconds*# of movies
>
> Any ideas on how I could run these queries differently? For a given actor
> query, there is about 5-7 boolean query clauses. Just to give some
> insight.
>
> I currently just create 1 HitSetCollector (I rolled my own
> bitsetcollector)
> and just run searches with it.  I just get crapped on when it does that
> genre search. I wish there was an easier way to aggregate all of those
> documents together from all of those searches.  After it is done, I cache
> the results, but the initial hit is bad.
>
> Any help would be much appreciated.
> Sdeck
>
>
>
> --
> View this message in context:
> http://www.nabble.com/Speed-of-grouped-queries-tf2910499.html#a8132099
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_1490_15747580.1167858546286--

From java-user-return-25279-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 04 02:24:15 2007
Return-Path: <java-user-return-25279-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 34030 invoked from network); 4 Jan 2007 02:24:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Jan 2007 02:24:14 -0000
Received: (qmail 24630 invoked by uid 500); 4 Jan 2007 02:24:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24492 invoked by uid 500); 4 Jan 2007 02:24:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24481 invoked by uid 99); 4 Jan 2007 02:24:10 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Jan 2007 18:24:10 -0800
X-ASF-Spam-Status: No, hits=0.9 required=10.0
	tests=FORGED_YAHOO_RCVD,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Jan 2007 18:23:59 -0800
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1H2IGZ-0002GV-0h
	for java-user@lucene.apache.org; Wed, 03 Jan 2007 18:23:39 -0800
Message-ID: <8152823.post@talk.nabble.com>
Date: Wed, 3 Jan 2007 18:23:39 -0800 (PST)
From: escher2k <escher2k@yahoo.com>
To: java-user@lucene.apache.org
Subject: Similarity modification...
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: escher2k@yahoo.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hi,
  I am trying to create a linear function  to influence the similarity
computation. For example -
if tf = 4, f(tf) = 150 * 1 + 150 * 0.3 
                    = 195

The first occurrence is multiplied by 150. The next three occurrences are
mulitplied by 150 and
divided by 10 (3/10).

However, we don't have access to the field name in the function public float
tf(float freq).
Then I thought of modifying the lengthNorm, but there is no input variable
there to 
get the term frequency public float lengthNorm(String fieldName, int
numTerms). Is there
any way out ? Is it safe to add a class variable that will save the term
frequency that can be reused
by lengthNorm (assuming that a new Similarity object is constructed for
every request) ?

Thanks.
-- 
View this message in context: http://www.nabble.com/Similarity-modification...-tf2917303.html#a8152823
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25280-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 04 08:40:17 2007
Return-Path: <java-user-return-25280-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 13357 invoked from network); 4 Jan 2007 08:40:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Jan 2007 08:40:16 -0000
Received: (qmail 9296 invoked by uid 500); 4 Jan 2007 08:40:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9255 invoked by uid 500); 4 Jan 2007 08:40:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9242 invoked by uid 99); 4 Jan 2007 08:40:16 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Jan 2007 00:40:16 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of maarsh@gmail.com designates 66.249.92.169 as permitted sender)
Received: from [66.249.92.169] (HELO ug-out-1314.google.com) (66.249.92.169)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Jan 2007 00:40:06 -0800
Received: by ug-out-1314.google.com with SMTP id k40so5369030ugc
        for <java-user@lucene.apache.org>; Thu, 04 Jan 2007 00:39:45 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=n2RK8j0/0mJc3itkNw+RuKu8jAvKwVsmyBmtX2TrTxndd4mCp9iqeDbEP5NvyO8dotzFGstyw2IFS/FNCh4NC7Z4nhRutOcLQYIsULiANWSi0FlxHPKbsRuzr2qer4IfGvXnn7hPl8DhGOjAHdEwvs4ttgStg1XA8miVdplIMe4=
Received: by 10.67.91.6 with SMTP id t6mr12743748ugl.1167899985498;
        Thu, 04 Jan 2007 00:39:45 -0800 (PST)
Received: by 10.67.30.5 with HTTP; Thu, 4 Jan 2007 00:39:45 -0800 (PST)
Message-ID: <8d8d9b4b0701040039w2999b3c1j7f7d2d2a4dc07332@mail.gmail.com>
Date: Thu, 4 Jan 2007 14:09:45 +0530
From: maarsh <maarsh@gmail.com>
To: java-user@lucene.apache.org
Subject: Query
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_4873_12790969.1167899985466"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_4873_12790969.1167899985466
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

hi ,

i am using Lucene2.0.0 with jre1.4.2_03 .

it is simple program in which i am indexing an xml file . but when i run it
, i get this error

java.lang.NoSuchMethodError:
com.trend.iwss.jscan.appscan.runtime.PolicyProps: method <init>()V not found
    at com.trend.iwss.jscan.appscan.runtime.Session.<init>(Session.java:58)
    at com.trend.iwss.jscan.appscan.runtime.Session.<clinit>(Session.java
:33)
    at org.apache.lucene.store.FSDirectory.<clinit>(FSDirectory.java)
    at org.apache.lucene.index.IndexWriter.<init>(IndexWriter.java:204)
    at MxGraphIndexer.<init>(MxGraphIndexer.java:45)
    at MxGraphIndexer.main(MxGraphIndexer.java:199)
Exception in thread "main"

i tried using jre1.4.2_05 and even jre1.5 . but am not able to fix it

is there anything which i am missing .

Regards
maarsh

------=_Part_4873_12790969.1167899985466--

From java-user-return-25281-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 04 12:01:05 2007
Return-Path: <java-user-return-25281-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75403 invoked from network); 4 Jan 2007 12:01:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Jan 2007 12:01:03 -0000
Received: (qmail 84362 invoked by uid 500); 4 Jan 2007 12:01:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84328 invoked by uid 500); 4 Jan 2007 12:01:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 84316 invoked by uid 99); 4 Jan 2007 12:01:01 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Jan 2007 04:01:01 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Jan 2007 04:00:50 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 1B5A230EFC18; Thu,  4 Jan 2007 07:00:30 -0500 (EST)
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on javelina
X-Spam-Level: 
Received: from [10.0.1.3] (va-71-53-203-135.dhcp.embarqhsd.net [71.53.203.135])
	by ehatchersolutions.com (Postfix) with ESMTP id 8FA5F30EFC16
	for <java-user@lucene.apache.org>; Thu,  4 Jan 2007 07:00:27 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <8d8d9b4b0701040039w2999b3c1j7f7d2d2a4dc07332@mail.gmail.com>
References: <8d8d9b4b0701040039w2999b3c1j7f7d2d2a4dc07332@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <0AA835F3-2FC6-472F-8186-62A73A9ABC34@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Query
Date: Thu, 4 Jan 2007 07:00:24 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-0.8 required=5.0 tests=AWL,BAYES_00,
	RCVD_IN_SORBS_DUL autolearn=no version=3.1.1

This is not a Lucene issue, but rather a 3rd party tool you're using,  
which seems to have instrumented your Java runtime.  Googling for  
"com.trend.iwss.jscan.appscan" turned up a lot of similar issues:

	<http://www.google.com/search? 
client=safari&rls=en&q=com.trend.iwss.jscan.appscan&ie=UTF-8&oe=UTF-8>


On Jan 4, 2007, at 3:39 AM, maarsh wrote:

> hi ,
>
> i am using Lucene2.0.0 with jre1.4.2_03 .
>
> it is simple program in which i am indexing an xml file . but when  
> i run it
> , i get this error
>
> java.lang.NoSuchMethodError:
> com.trend.iwss.jscan.appscan.runtime.PolicyProps: method <init>()V  
> not found
>    at com.trend.iwss.jscan.appscan.runtime.Session.<init> 
> (Session.java:58)
>    at com.trend.iwss.jscan.appscan.runtime.Session.<clinit> 
> (Session.java
> :33)
>    at org.apache.lucene.store.FSDirectory.<clinit>(FSDirectory.java)
>    at org.apache.lucene.index.IndexWriter.<init>(IndexWriter.java:204)
>    at MxGraphIndexer.<init>(MxGraphIndexer.java:45)
>    at MxGraphIndexer.main(MxGraphIndexer.java:199)
> Exception in thread "main"
>
> i tried using jre1.4.2_05 and even jre1.5 . but am not able to fix it
>
> is there anything which i am missing .
>
> Regards
> maarsh


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25282-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 04 13:52:59 2007
Return-Path: <java-user-return-25282-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 15992 invoked from network); 4 Jan 2007 13:52:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Jan 2007 13:52:58 -0000
Received: (qmail 61374 invoked by uid 500); 4 Jan 2007 13:52:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61341 invoked by uid 500); 4 Jan 2007 13:52:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61330 invoked by uid 99); 4 Jan 2007 13:52:44 -0000
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=MISSING_HEADERS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of daniel.armbrust.list@gmail.com designates 64.233.162.238 as permitted sender)
Received: from [64.233.162.238] (HELO nz-out-0506.google.com) (64.233.162.238)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Jan 2007 05:48:01 -0800
Received: by nz-out-0506.google.com with SMTP id i1so2950937nzh
        for <java-user@lucene.apache.org>; Thu, 04 Jan 2007 05:46:34 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:user-agent:mime-version:cc:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=GViNmrTMmbGpk2GTZystpfgvoFYrWm3EzufK7e0ZK9vsRtl1hiooe5MFQsyNjulIYPnOEjH1lVsQgxlownPDG6WkqVs6+Hn2emtGUq68Vgw3vmT3D8DXxrysOeSoHUPQlvdoSXbWZEaxl/G68WXSoXsPzdJRFCsMm8WTX18phAc=
Received: by 10.35.50.1 with SMTP id c1mr41712640pyk.1167918394246;
        Thu, 04 Jan 2007 05:46:34 -0800 (PST)
Received: from ?172.24.156.35? ( [129.176.197.15])
        by mx.google.com with ESMTP id a2sm28808707pyi.2007.01.04.05.46.33;
        Thu, 04 Jan 2007 05:46:33 -0800 (PST)
Message-ID: <459D0538.9050100@gmail.com>
Date: Thu, 04 Jan 2007 07:46:32 -0600
From: Dan Armbrust <daniel.armbrust.list@gmail.com>
User-Agent: Thunderbird 1.5.0.9 (Windows/20061207)
MIME-Version: 1.0
CC:  java-user@lucene.apache.org
Subject: Re: obscure error...
References: <459BF3AE.7070202@gmail.com>
In-Reply-To: <459BF3AE.7070202@gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

It turns out, this is somehow related to an interaction between SWT and 
the java Decompresser class - certainly not lucene related.

FYI:

https://bugs.eclipse.org/bugs/show_bug.cgi?id=169484


-- 
****************************
Daniel Armbrust
Biomedical Informatics
Mayo Clinic Rochester
daniel.armbrust(at)mayo.edu
http://informatics.mayo.edu/

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25283-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 04 13:57:07 2007
Return-Path: <java-user-return-25283-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 16665 invoked from network); 4 Jan 2007 13:57:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Jan 2007 13:57:06 -0000
Received: (qmail 67221 invoked by uid 500); 4 Jan 2007 13:57:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67178 invoked by uid 500); 4 Jan 2007 13:57:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67167 invoked by uid 99); 4 Jan 2007 13:57:07 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Jan 2007 05:57:07 -0800
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=MISSING_HEADERS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of daniel.armbrust.list@gmail.com designates 64.233.162.234 as permitted sender)
Received: from [64.233.162.234] (HELO nz-out-0506.google.com) (64.233.162.234)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Jan 2007 05:56:57 -0800
Received: by nz-out-0506.google.com with SMTP id i1so2952829nzh
        for <java-user@lucene.apache.org>; Thu, 04 Jan 2007 05:56:36 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:user-agent:mime-version:cc:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=GViNmrTMmbGpk2GTZystpfgvoFYrWm3EzufK7e0ZK9vsRtl1hiooe5MFQsyNjulIYPnOEjH1lVsQgxlownPDG6WkqVs6+Hn2emtGUq68Vgw3vmT3D8DXxrysOeSoHUPQlvdoSXbWZEaxl/G68WXSoXsPzdJRFCsMm8WTX18phAc=
Received: by 10.35.50.1 with SMTP id c1mr41712640pyk.1167918394246;
        Thu, 04 Jan 2007 05:46:34 -0800 (PST)
Received: from ?172.24.156.35? ( [129.176.197.15])
        by mx.google.com with ESMTP id a2sm28808707pyi.2007.01.04.05.46.33;
        Thu, 04 Jan 2007 05:46:33 -0800 (PST)
Message-ID: <459D0538.9050100@gmail.com>
Date: Thu, 04 Jan 2007 07:46:32 -0600
From: Dan Armbrust <daniel.armbrust.list@gmail.com>
User-Agent: Thunderbird 1.5.0.9 (Windows/20061207)
MIME-Version: 1.0
CC:  java-user@lucene.apache.org
Subject: Re: obscure error...
References: <459BF3AE.7070202@gmail.com>
In-Reply-To: <459BF3AE.7070202@gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

It turns out, this is somehow related to an interaction between SWT and 
the java Decompresser class - certainly not lucene related.

FYI:

https://bugs.eclipse.org/bugs/show_bug.cgi?id=169484


-- 
****************************
Daniel Armbrust
Biomedical Informatics
Mayo Clinic Rochester
daniel.armbrust(at)mayo.edu
http://informatics.mayo.edu/

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25284-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 04 15:16:35 2007
Return-Path: <java-user-return-25284-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47078 invoked from network); 4 Jan 2007 15:16:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Jan 2007 15:16:35 -0000
Received: (qmail 26269 invoked by uid 500); 4 Jan 2007 15:16:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26189 invoked by uid 500); 4 Jan 2007 15:16:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26136 invoked by uid 99); 4 Jan 2007 15:16:33 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Jan 2007 07:16:33 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [62.213.161.130] (HELO redhat.sirma.bg) (62.213.161.130)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Jan 2007 07:15:25 -0800
Received: from ivanvasilev2003 ([192.168.128.140])
	by redhat.sirma.bg (8.12.7/8.12.7/Sirma Linux 0.6) with SMTP id l04FEoeQ016996
	for <java-user@lucene.apache.org>; Thu, 4 Jan 2007 17:14:50 +0200
Message-ID: <018401c73013$13a5bfd0$8c80a8c0@sirma.int>
From: "Ivan Vasilev" <ivasilev@sirma.bg>
To: <java-user@lucene.apache.org>
References: <8d8d9b4b0701040039w2999b3c1j7f7d2d2a4dc07332@mail.gmail.com>
Subject: Lucene index update
Date: Thu, 4 Jan 2007 17:14:49 +0200
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="iso-8859-1";
	reply-type=original
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.3790.1830
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.3790.1830
X-Virus-Scanned: by Sirma Antivirus System             
X-Virus-Checked: Checked by ClamAV on apache.org

Hi All,



I want to update some documents in existing indexes by adding a new field to 
each of their documents. The documents contained in the indexes have some 
fields that are indexed and NOT stored. The new field that will be added 
will contain some metadata and will be Stored and not indexed.



To fulfill the task I think I have 4 possible approaches:



1. To use Lucene API to do this. According to my research I found that 
Lucene does not have methods for updating documents directly.



2. To extract documents including their fields (including the most important 
fields - those that are indexed but not stored). Then to add the new field 
with relevant value to these documents, delete them from the index and 
finally add them again in the index (including their new field).

    This is the approach recommended in the book "Lucene in Action" and in 
the FAQ page on the Lucene's site - delete documents and add them again.

    The problem here is that according to Lucene's documentation "fields 
which are not stored are not available in documents retrieved from the 
index, e.g. with Hits.doc(int), Searcher.doc(int) or 
IndexReader.document(int)". (The tests showed the same :) ). So if this 
approach could work the problem here is: How to extract information of the 
fields that are indexed but not stored?



3. To create a tool that changes the data stored in the indexes. This 
approach seems to be too "dangerous" but if anyone knows the format that 
Lucene uses to keep these data please tell me.



4. To reindex - means to delete existing indexes and create them in new by 
adding the necessary fields. As the indexes could be very large creating 
them in new will be too slow process and so this approach is least 
desirable. But I am afraid it is the only one that is practically possible.



If someone could help me with the approaches 1-3 or tell me some other 
please help me :)



Thanks in advance,

Ivan




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25285-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 04 15:40:43 2007
Return-Path: <java-user-return-25285-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56244 invoked from network); 4 Jan 2007 15:40:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Jan 2007 15:40:43 -0000
Received: (qmail 90172 invoked by uid 500); 4 Jan 2007 15:40:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89886 invoked by uid 500); 4 Jan 2007 15:40:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89874 invoked by uid 99); 4 Jan 2007 15:40:32 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Jan 2007 07:40:32 -0800
X-ASF-Spam-Status: No, hits=2.9 required=10.0
	tests=HTML_10_20,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 64.233.182.190 as permitted sender)
Received: from [64.233.182.190] (HELO nf-out-0910.google.com) (64.233.182.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Jan 2007 07:40:23 -0800
Received: by nf-out-0910.google.com with SMTP id n28so6820105nfc
        for <java-user@lucene.apache.org>; Thu, 04 Jan 2007 07:40:01 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=J+Go1xb+QsohrLdRUqX5knEs/eScCCJN5yLVwnrqturD+u0sRqpxEOx+rcd7wf9SMFim//z0mGQJNltgI6KaFAZFbeeBUcn/k2fXZ7QGH13kEo8cFubRiQB3PAU4c1Repmnaem6Wmdz+oHfB9oDzMt2innLkqPDFXLUB2iiRFMk=
Received: by 10.82.111.8 with SMTP id j8mr1970873buc.1167925201608;
        Thu, 04 Jan 2007 07:40:01 -0800 (PST)
Received: by 10.82.162.9 with HTTP; Thu, 4 Jan 2007 07:40:01 -0800 (PST)
Message-ID: <359a92830701040740l32da2d3fn8c83f9b6cc6b001@mail.gmail.com>
Date: Thu, 4 Jan 2007 10:40:01 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene index update
In-Reply-To: <018401c73013$13a5bfd0$8c80a8c0@sirma.int>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_8035_10656032.1167925201231"
References: <8d8d9b4b0701040039w2999b3c1j7f7d2d2a4dc07332@mail.gmail.com>
	 <018401c73013$13a5bfd0$8c80a8c0@sirma.int>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_8035_10656032.1167925201231
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

for approach <2>, I *think* you can extract information about unstored data
by playing with TermDocs/TermEnums. Conceptually, the idea is to go through
all the terms and, for document (lucene ID) 1 find the terms that appear in
document 1 and order them by their termpositions. Repeat for document 2
etc.. WARNING: I haven't done this personally, so I may be way off base.
Also, if the Luke source code is available, that program reconstructs
unstored fields, so you might want to take a look at that. But this will
inevitably be a lossy process.

I have to ask, though, why you're rejecting option <4> so early. To modify a
document in an index, you have to delete the document and re-add it. Unless
the time to assemble the document to be re-indexed is prohibitive, I'd think
about this option more seriously.

Remember that not all documents in an index have to have the same fields.
So, if you're only adding meta-data to *some* documents, you can freely just
change those docs and ignore all the others. Your searcher does have to deal
with null fields in some documents in this case.

If you're going to re-index all documents, I'd question whether playing
around with re-constructing them from the index is really a speed savings.
Again, it will be if the time to assemble each document is large (say lots
of DB queries or web crawling). But even in this case, is it the difference
between 1 hour and 3 hours? or 1 day and two weeks? If you can get it built
in a night, I'd do it the simple way.

How long did it take to create the index originally anyway?

Best
Erick

On 1/4/07, Ivan Vasilev <ivasilev@sirma.bg> wrote:
>
> Hi All,
>
>
>
> I want to update some documents in existing indexes by adding a new field
> to
> each of their documents. The documents contained in the indexes have some
> fields that are indexed and NOT stored. The new field that will be added
> will contain some metadata and will be Stored and not indexed.
>
>
>
> To fulfill the task I think I have 4 possible approaches:
>
>
>
> 1. To use Lucene API to do this. According to my research I found that
> Lucene does not have methods for updating documents directly.
>
>
>
> 2. To extract documents including their fields (including the most
> important
> fields - those that are indexed but not stored). Then to add the new field
> with relevant value to these documents, delete them from the index and
> finally add them again in the index (including their new field).
>
>     This is the approach recommended in the book "Lucene in Action" and in
> the FAQ page on the Lucene's site - delete documents and add them again.
>
>     The problem here is that according to Lucene's documentation "fields
> which are not stored are not available in documents retrieved from the
> index, e.g. with Hits.doc(int), Searcher.doc(int) or
> IndexReader.document(int)". (The tests showed the same :) ). So if this
> approach could work the problem here is: How to extract information of the
> fields that are indexed but not stored?
>
>
>
> 3. To create a tool that changes the data stored in the indexes. This
> approach seems to be too "dangerous" but if anyone knows the format that
> Lucene uses to keep these data please tell me.
>
>
>
> 4. To reindex - means to delete existing indexes and create them in new by
> adding the necessary fields. As the indexes could be very large creating
> them in new will be too slow process and so this approach is least
> desirable. But I am afraid it is the only one that is practically
> possible.
>
>
>
> If someone could help me with the approaches 1-3 or tell me some other
> please help me :)
>
>
>
> Thanks in advance,
>
> Ivan
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_8035_10656032.1167925201231--

From java-user-return-25286-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 04 15:55:19 2007
Return-Path: <java-user-return-25286-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59653 invoked from network); 4 Jan 2007 15:55:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Jan 2007 15:55:18 -0000
Received: (qmail 20085 invoked by uid 500); 4 Jan 2007 15:51:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19896 invoked by uid 500); 4 Jan 2007 15:51:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19795 invoked by uid 99); 4 Jan 2007 15:51:46 -0000
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=HTML_00_10,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of vmslucene@gmail.com designates 66.249.92.171 as permitted sender)
Received: from [66.249.92.171] (HELO ug-out-1314.google.com) (66.249.92.171)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Jan 2007 07:51:30 -0800
Received: by ug-out-1314.google.com with SMTP id k40so5454326ugc
        for <java-user@lucene.apache.org>; Thu, 04 Jan 2007 07:51:02 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=NiL4nNPVLN181wiohf3HMJr6OqsaKYYJNntvbWIAQ+JcTWr0LuzjnGol6whkrxoEWm3xy72NDike8PpWDL0wkE/P11PbX1V2YNxx/Vf4JumZ3lO81QzCpi/G2cmVfqYbLfQdXSVmP+9Xl6q6tsP/u8Epi7MiDb60L0/8uYD0v+U=
Received: by 10.78.157.8 with SMTP id f8mr2595498hue.1167925862803;
        Thu, 04 Jan 2007 07:51:02 -0800 (PST)
Received: by 10.78.195.18 with HTTP; Thu, 4 Jan 2007 07:51:02 -0800 (PST)
Message-ID: <2e0306af0701040751u1feef9eaq38906a89a64d3e10@mail.gmail.com>
Date: Thu, 4 Jan 2007 10:51:02 -0500
From: "Mark Mei" <vmslucene@gmail.com>
To: java-user@lucene.apache.org
Subject: lucene scalability questions
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_10758_206443.1167925862630"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_10758_206443.1167925862630
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

So this question has two parts:

1. How does Lucene scale, exactly? Do we distribute the index to multiple
servers somehow? Or is it one index, sitting on some sort of a shared
filesystem, shared by all Lucene servers? If it's the latter, the bottleneck
will be I/O ... anyway, elaborate on scalability please, and how you set it
up

2. High availability. How would one go about making Lucene redundant?

------=_Part_10758_206443.1167925862630--

From java-user-return-25287-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 04 20:15:16 2007
Return-Path: <java-user-return-25287-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36941 invoked from network); 4 Jan 2007 20:15:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Jan 2007 20:15:15 -0000
Received: (qmail 65705 invoked by uid 500); 4 Jan 2007 20:15:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65681 invoked by uid 500); 4 Jan 2007 20:15:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65670 invoked by uid 99); 4 Jan 2007 20:15:14 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Jan 2007 12:15:14 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [80.237.132.74] (HELO wp067.webpack.hosteurope.de) (80.237.132.74)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Jan 2007 12:15:05 -0800
Received: by wp067.webpack.hosteurope.de running ExIM  using esmtpa
	from e176154140.adsl.alicedsl.de ([85.176.154.140] helo=[192.168.1.101]); authenticated
	id 1H2Yz5-0004Md-5q; Thu, 04 Jan 2007 21:14:43 +0100
Subject: getting the maximum Hits doc
From: Nils =?ISO-8859-1?Q?H=F6ller?= <nutch@nhoeller.de>
To: java-user@lucene.apache.org
Content-Type: text/plain
Date: Thu, 04 Jan 2007 21:14:43 +0100
Message-Id: <1167941683.14540.3.camel@nils-laptop>
Mime-Version: 1.0
X-Mailer: Evolution 2.8.1 
Content-Transfer-Encoding: 7bit
X-bounce-key: webpack.hosteurope.de;nutch@nhoeller.de;1167941705;1021b26f;
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

this is a short beginner question:

I am searching for something in my program
Hits hits = MySearcher.search(queryStr, searchRes.indexPath); 

Now I only want the Document with the highest score.

Is there a better way, then iterating through all hits?
The Hits objects seems to be not sorted.

Thanks for your help

Nils


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25288-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 04 20:39:01 2007
Return-Path: <java-user-return-25288-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 49934 invoked from network); 4 Jan 2007 20:39:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Jan 2007 20:39:01 -0000
Received: (qmail 1547 invoked by uid 500); 4 Jan 2007 20:39:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 1517 invoked by uid 500); 4 Jan 2007 20:39:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 1500 invoked by uid 99); 4 Jan 2007 20:39:01 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Jan 2007 12:39:01 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [63.133.162.98] (HELO linuxfly.dragonflymc.com) (63.133.162.98)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Jan 2007 12:38:35 -0800
Received: from [192.168.1.246] (bigfly.visvo.com [192.168.1.246])
	by linuxfly.dragonflymc.com (Postfix) with ESMTP id B1EB3C20027
	for <java-user@lucene.apache.org>; Thu,  4 Jan 2007 14:38:41 -0600 (CST)
Message-ID: <459D65B5.9050108@dragonflymc.com>
Date: Thu, 04 Jan 2007 14:38:13 -0600
From: Dennis Kubes <nutch-dev@dragonflymc.com>
User-Agent: Thunderbird 1.5.0.9 (Windows/20061207)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: getting the maximum Hits doc
References: <1167941683.14540.3.camel@nils-laptop>
In-Reply-To: <1167941683.14540.3.camel@nils-laptop>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hits should be sorted according to score.  Getting the first document 
should give you the one with the highest score.

Dennis

Nils Hller wrote:
> Hi,
> 
> this is a short beginner question:
> 
> I am searching for something in my program
> Hits hits = MySearcher.search(queryStr, searchRes.indexPath); 
> 
> Now I only want the Document with the highest score.
> 
> Is there a better way, then iterating through all hits?
> The Hits objects seems to be not sorted.
> 
> Thanks for your help
> 
> Nils
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25289-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 04 22:02:34 2007
Return-Path: <java-user-return-25289-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71867 invoked from network); 4 Jan 2007 22:02:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Jan 2007 22:02:33 -0000
Received: (qmail 47962 invoked by uid 500); 4 Jan 2007 22:02:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47937 invoked by uid 500); 4 Jan 2007 22:02:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47926 invoked by uid 99); 4 Jan 2007 22:02:32 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Jan 2007 14:02:32 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [66.104.95.4] (HELO listing.marketingbrokers.com) (66.104.95.4)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 04 Jan 2007 14:02:22 -0800
Received: from ip66-104-95-21.z95-104-66.customer.algx.net ([66.104.95.21])
          by listing.marketingbrokers.com (JAMES SMTP Server 2.2.0) with SMTP ID 245
          for <java-user@lucene.apache.org>;
          Thu, 4 Jan 2007 14:02:01 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <2e0306af0701040751u1feef9eaq38906a89a64d3e10@mail.gmail.com>
References: <2e0306af0701040751u1feef9eaq38906a89a64d3e10@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <C5C504C1-3ADF-4C34-8CAC-5728B60A8A6F@marketingbrokers.com>
Content-Transfer-Encoding: 7bit
From: "Peter W." <peter@marketingbrokers.com>
Subject: Re: lucene scalability questions
Date: Thu, 4 Jan 2007 14:02:00 -0800
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org

Mark,

My understanding of Lucene is limited, but the issues
seem similar to web server farms in that it comes down to
linear scalability by adding more boxes.

This means separate machines with their own indexes.

Shared filesystems such as NFS work well in smaller environments
but experience problems with heavy load (lost mounts req. reboots).

There's no mysql-like 'replication' with masters using
binary files to update slaves. However, since the index is
file based, you can close Indexwriters and make hot copies or
perform backups for redundancy.

If you know XML, use Solr to post and retrieve documents to and from
your various Lucene indexes. It hides the complexity of remote
object brokering such as RMI.

Solr also allows you to get result sets using JSON so you could
provide distributed Lucene results to browsers as a .js widget.

While not reflecting the latest 2.0 version release the Lucene in Action
book provides good background on combining separate indexes.

Regards,

Peter W.


On Jan 4, 2007, at 7:51 AM, Mark Mei wrote:

> So this question has two parts:
>
> 1. How does Lucene scale, exactly? Do we distribute the index to  
> multiple
> servers somehow? Or is it one index, sitting on some sort of a shared
> filesystem, shared by all Lucene servers? If it's the latter, the  
> bottleneck
> will be I/O ... anyway, elaborate on scalability please, and how  
> you set it
> up
>
> 2. High availability. How would one go about making Lucene redundant?


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25290-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 04 22:11:31 2007
Return-Path: <java-user-return-25290-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73824 invoked from network); 4 Jan 2007 22:11:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Jan 2007 22:11:31 -0000
Received: (qmail 66734 invoked by uid 500); 4 Jan 2007 22:11:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66708 invoked by uid 500); 4 Jan 2007 22:11:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66697 invoked by uid 99); 4 Jan 2007 22:11:31 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Jan 2007 14:11:31 -0800
X-ASF-Spam-Status: No, hits=0.9 required=10.0
	tests=FORGED_YAHOO_RCVD,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Jan 2007 14:11:21 -0800
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1H2anZ-000658-Hp
	for java-user@lucene.apache.org; Thu, 04 Jan 2007 14:10:57 -0800
Message-ID: <8168660.post@talk.nabble.com>
Date: Thu, 4 Jan 2007 14:10:57 -0800 (PST)
From: escher2k <escher2k@yahoo.com>
To: java-user@lucene.apache.org
Subject: Hence Similarity to pass in fieldName...
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: escher2k@yahoo.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hi, 
  I am trying to create a linear function  to influence the similarity
computation. For example - 
  if tf = 4, f(tf) = 150 * 1 + 150 * 0.3 
                     = 195 

The first occurrence is multiplied by 150. The next three occurrences are
mulitplied by 150 and 
divided by 10 (3/10). 

However, we don't have access to the field name in the function public float
tf(float freq). 
Is there any way out ? I would think passing the field name along with the
freq to
create public float tf(float freq, String fieldName) would be useful -
unless there is a better way.

Thanks.
-- 
View this message in context: http://www.nabble.com/Hence-Similarity-to-pass-in-fieldName...-tf2922386.html#a8168660
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25291-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 04 22:44:00 2007
Return-Path: <java-user-return-25291-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80677 invoked from network); 4 Jan 2007 22:43:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Jan 2007 22:43:59 -0000
Received: (qmail 28249 invoked by uid 500); 4 Jan 2007 22:43:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28221 invoked by uid 500); 4 Jan 2007 22:43:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28209 invoked by uid 99); 4 Jan 2007 22:43:59 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Jan 2007 14:43:59 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=FROM_EXCESS_BASE64,MIME_BASE64_TEXT
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [216.9.248.52] (HELO smtp05.bis.na.blackberry.com) (216.9.248.52)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Jan 2007 14:43:49 -0800
Message-ID: <103695127-1167950606-cardhu_blackberry.rim.net-587231871-@bwe035-cell00.bisx.prod.on.blackberry>
Content-Transfer-Encoding: base64
Reply-To: rsivak@istandfor.com
References: <2e0306af0701040751u1feef9eaq38906a89a64d3e10@mail.gmail.com> <C5C504C1-3ADF-4C34-8CAC-5728B60A8A6F@marketingbrokers.com>
In-Reply-To: <C5C504C1-3ADF-4C34-8CAC-5728B60A8A6F@marketingbrokers.com>
Sensitivity: Normal
Importance: Normal
To: java-user@lucene.apache.org
Subject: Re: lucene scalability questions
From: "=?UTF-8?B?UnVzcw==?=" <rsivak@istandfor.com>
Date: Thu, 4 Jan 2007 22:40:40 +0000
Content-type: text/plain
MIME-Version: 1.0
X-Virus-Checked: Checked by ClamAV on apache.org

SWYgeW91IGRvIHRoaXMgb24gd2luZG93cywgeW91IG1pZ2h0IGJlIGFibGUgdG8gcmVwbGljYXRl
IHRoZSBpbmRleGVzIHVzaW5nIERGUy4gIE9uIGxpbnV4IHlvdSBjYW4gcHJvYmFibHkgdXNlIHJz
eW5jIHRvIGtlZXAgdGhlIGRpZmZlcmVudCBzZXJ2ZXJzIHVwIHRvIGRhdGUuDQoNCklmIHRoZSBz
aXplIG9mIHRoZSBpbmRleCBpcyBhbiBpc3N1ZSwgbHVzdHJlIGNvdWxkIGJlIHVzZWQgdG8gaGF2
ZSBvbmUgdm9sdW1lIHRoYXQncyBzcHJlYWQgb3ZlciBtYW55IHNlcnZlcnMuICBQZXJmb3JtYW5j
ZSBpcyBzdXBwb3NlZCB0byBiZSBnb29kIHdpdGggbHVzdHJlIGFzIHdlbGwuDQoNCklmIHlvdSB3
YW50IHRvIHNwZWVkIHVwIGluZGl2aWR1YWwgcXVlcmllcyB3aGVuIHNlYXJjaGluZyBhIGxhcmdl
IGluZGV4LCB5b3UgY2FuIHByb2JhYmx5IHNwbGl0IHVwIHRoZSBpbmRleCBpbiBzb21lIHdheSBh
bW9uZyB0aGUgc2VydmVycywgcXVlcnkgdGhlbSBhbGwgYXQgdGhlIHNhbWUgdGltZSBhbmQgdGhl
biBhZ2dyZWdhdGUgdGhlIHJlc3VsdHMuICBUaGlzIGlzIGp1c3QgYW4gaWRlYSwgYnV0IEkgYmVs
aWV2ZSBpdCB3YXMgbWVudGlvbmVkIGluICJsdWNlbmUgaW4gYWN0aW9uIi4NCg0KUnVzcw0KU2Vu
dCB3aXJlbGVzc2x5IHZpYSBCbGFja0JlcnJ5IGZyb20gVC1Nb2JpbGUuICANCg0KLS0tLS1Pcmln
aW5hbCBNZXNzYWdlLS0tLS0NCkZyb206ICJQZXRlciBXLiIgPHBldGVyQG1hcmtldGluZ2Jyb2tl
cnMuY29tPg0KRGF0ZTogVGh1LCA0IEphbiAyMDA3IDE0OjAyOjAwIA0KVG86amF2YS11c2VyQGx1
Y2VuZS5hcGFjaGUub3JnDQpTdWJqZWN0OiBSZTogbHVjZW5lIHNjYWxhYmlsaXR5IHF1ZXN0aW9u
cw0KDQpNYXJrLA0KDQpNeSB1bmRlcnN0YW5kaW5nIG9mIEx1Y2VuZSBpcyBsaW1pdGVkLCBidXQg
dGhlIGlzc3Vlcw0Kc2VlbSBzaW1pbGFyIHRvIHdlYiBzZXJ2ZXIgZmFybXMgaW4gdGhhdCBpdCBj
b21lcyBkb3duIHRvDQpsaW5lYXIgc2NhbGFiaWxpdHkgYnkgYWRkaW5nIG1vcmUgYm94ZXMuDQoN
ClRoaXMgbWVhbnMgc2VwYXJhdGUgbWFjaGluZXMgd2l0aCB0aGVpciBvd24gaW5kZXhlcy4NCg0K
U2hhcmVkIGZpbGVzeXN0ZW1zIHN1Y2ggYXMgTkZTIHdvcmsgd2VsbCBpbiBzbWFsbGVyIGVudmly
b25tZW50cw0KYnV0IGV4cGVyaWVuY2UgcHJvYmxlbXMgd2l0aCBoZWF2eSBsb2FkIChsb3N0IG1v
dW50cyByZXEuIHJlYm9vdHMpLg0KDQpUaGVyZSdzIG5vIG15c3FsLWxpa2UgJ3JlcGxpY2F0aW9u
JyB3aXRoIG1hc3RlcnMgdXNpbmcNCmJpbmFyeSBmaWxlcyB0byB1cGRhdGUgc2xhdmVzLiBIb3dl
dmVyLCBzaW5jZSB0aGUgaW5kZXggaXMNCmZpbGUgYmFzZWQsIHlvdSBjYW4gY2xvc2UgSW5kZXh3
cml0ZXJzIGFuZCBtYWtlIGhvdCBjb3BpZXMgb3INCnBlcmZvcm0gYmFja3VwcyBmb3IgcmVkdW5k
YW5jeS4NCg0KSWYgeW91IGtub3cgWE1MLCB1c2UgU29sciB0byBwb3N0IGFuZCByZXRyaWV2ZSBk
b2N1bWVudHMgdG8gYW5kIGZyb20NCnlvdXIgdmFyaW91cyBMdWNlbmUgaW5kZXhlcy4gSXQgaGlk
ZXMgdGhlIGNvbXBsZXhpdHkgb2YgcmVtb3RlDQpvYmplY3QgYnJva2VyaW5nIHN1Y2ggYXMgUk1J
Lg0KDQpTb2xyIGFsc28gYWxsb3dzIHlvdSB0byBnZXQgcmVzdWx0IHNldHMgdXNpbmcgSlNPTiBz
byB5b3UgY291bGQNCnByb3ZpZGUgZGlzdHJpYnV0ZWQgTHVjZW5lIHJlc3VsdHMgdG8gYnJvd3Nl
cnMgYXMgYSAuanMgd2lkZ2V0Lg0KDQpXaGlsZSBub3QgcmVmbGVjdGluZyB0aGUgbGF0ZXN0IDIu
MCB2ZXJzaW9uIHJlbGVhc2UgdGhlIEx1Y2VuZSBpbiBBY3Rpb24NCmJvb2sgcHJvdmlkZXMgZ29v
ZCBiYWNrZ3JvdW5kIG9uIGNvbWJpbmluZyBzZXBhcmF0ZSBpbmRleGVzLg0KDQpSZWdhcmRzLA0K
DQpQZXRlciBXLg0KDQoNCk9uIEphbiA0LCAyMDA3LCBhdCA3OjUxIEFNLCBNYXJrIE1laSB3cm90
ZToNCg0KPiBTbyB0aGlzIHF1ZXN0aW9uIGhhcyB0d28gcGFydHM6DQo+DQo+IDEuIEhvdyBkb2Vz
IEx1Y2VuZSBzY2FsZSwgZXhhY3RseT8gRG8gd2UgZGlzdHJpYnV0ZSB0aGUgaW5kZXggdG8gIA0K
PiBtdWx0aXBsZQ0KPiBzZXJ2ZXJzIHNvbWVob3c/IE9yIGlzIGl0IG9uZSBpbmRleCwgc2l0dGlu
ZyBvbiBzb21lIHNvcnQgb2YgYSBzaGFyZWQNCj4gZmlsZXN5c3RlbSwgc2hhcmVkIGJ5IGFsbCBM
dWNlbmUgc2VydmVycz8gSWYgaXQncyB0aGUgbGF0dGVyLCB0aGUgIA0KPiBib3R0bGVuZWNrDQo+
IHdpbGwgYmUgSS9PIC4uLiBhbnl3YXksIGVsYWJvcmF0ZSBvbiBzY2FsYWJpbGl0eSBwbGVhc2Us
IGFuZCBob3cgIA0KPiB5b3Ugc2V0IGl0DQo+IHVwDQo+DQo+IDIuIEhpZ2ggYXZhaWxhYmlsaXR5
LiBIb3cgd291bGQgb25lIGdvIGFib3V0IG1ha2luZyBMdWNlbmUgcmVkdW5kYW50Pw0KDQoNCi0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLQ0KVG8gdW5zdWJzY3JpYmUsIGUtbWFpbDogamF2YS11c2VyLXVuc3Vic2NyaWJl
QGx1Y2VuZS5hcGFjaGUub3JnDQpGb3IgYWRkaXRpb25hbCBjb21tYW5kcywgZS1tYWlsOiBqYXZh
LXVzZXItaGVscEBsdWNlbmUuYXBhY2hlLm9yZw0K



From java-user-return-25292-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 04 23:54:15 2007
Return-Path: <java-user-return-25292-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94754 invoked from network); 4 Jan 2007 23:54:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Jan 2007 23:54:15 -0000
Received: (qmail 11767 invoked by uid 500); 4 Jan 2007 23:54:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11739 invoked by uid 500); 4 Jan 2007 23:54:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11724 invoked by uid 99); 4 Jan 2007 23:54:15 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Jan 2007 15:54:15 -0800
X-ASF-Spam-Status: No, hits=0.9 required=10.0
	tests=FORGED_YAHOO_RCVD,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Jan 2007 15:54:05 -0800
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1H2cP2-0004bS-DE
	for java-user@lucene.apache.org; Thu, 04 Jan 2007 15:53:44 -0800
Message-ID: <8170311.post@talk.nabble.com>
Date: Thu, 4 Jan 2007 15:53:44 -0800 (PST)
From: escher2k <escher2k@yahoo.com>
To: java-user@lucene.apache.org
Subject: Enhance similarity to pass in field name (Reposting)
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: escher2k@yahoo.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hi, 
  I am trying to create a linear function  to influence the similarity
computation. For example - 
  if tf = 4, f(tf) = 150 * 1 + 150 * 0.3 
                     = 195 

The first occurrence is multiplied by 150. The next three occurrences are
mulitplied by 150 and 
divided by 10 (3/10). 

However, we don't have access to the field name in the function public float
tf(float freq). 
Is there any way out ? I would think passing the field name along with the
freq to 
create public float tf(float freq, String fieldName)  would be useful -
unless there is a better way. 

Sorry, the subject line was not clear previously.

Thanks.
-- 
View this message in context: http://www.nabble.com/Enhance-similarity-to-pass-in-field-name-%28Reposting%29-tf2922901.html#a8170311
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25293-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 05 01:29:44 2007
Return-Path: <java-user-return-25293-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 11979 invoked from network); 5 Jan 2007 01:29:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Jan 2007 01:29:44 -0000
Received: (qmail 11455 invoked by uid 500); 5 Jan 2007 01:29:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11309 invoked by uid 500); 5 Jan 2007 01:29:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11298 invoked by uid 99); 5 Jan 2007 01:29:43 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Jan 2007 17:29:43 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Jan 2007 17:29:34 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 9F9C55B763; Thu,  4 Jan 2007 17:29:13 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 906B67F403
	for <java-user@lucene.apache.org>; Thu,  4 Jan 2007 17:29:13 -0800 (PST)
Date: Thu, 4 Jan 2007 17:29:13 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Enhance similarity to pass in field name (Reposting)
In-Reply-To: <8170311.post@talk.nabble.com>
Message-ID: <Pine.LNX.4.58.0701041720180.20920@hal.rescomp.berkeley.edu>
References: <8170311.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org



: However, we don't have access to the field name in the function public float
: tf(float freq).
: Is there any way out ? I would think passing the field name along with the
: freq to
: create public float tf(float freq, String fieldName)  would be useful -
: unless there is a better way.

there was some discussion about this previously, see this thread and all
replies...

http://www.nabble.com/-jira--Created%3A-%28LUCENE-577%29-SweetSpotSimiliarity-tf1672444.html#a4536312

...but no one has ever taken the initiative to make sure change.

(note in particular Marvin's point about why adding a field name param to
the tf method is not as good of an idea as changing the
Searcher.getSimilarity method to take in a field name ... it's not clear
to me if that will play nice with every possible multi-field query thta
might ever exist, but it should work fine for every query i can think of
that exists at the moment).


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25294-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 05 04:43:08 2007
Return-Path: <java-user-return-25294-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44408 invoked from network); 5 Jan 2007 04:43:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Jan 2007 04:43:07 -0000
Received: (qmail 24539 invoked by uid 500); 5 Jan 2007 04:43:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24506 invoked by uid 500); 5 Jan 2007 04:43:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24495 invoked by uid 99); 5 Jan 2007 04:43:07 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Jan 2007 20:43:06 -0800
X-ASF-Spam-Status: No, hits=2.8 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [206.190.38.59] (HELO web50305.mail.yahoo.com) (206.190.38.59)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 04 Jan 2007 20:42:42 -0800
Received: (qmail 77031 invoked by uid 60001); 5 Jan 2007 04:42:21 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=5z+wlsGO2SKNa+FoMpYDy+VhZT9k6eZBx4eR66F5WHjHgAoTKIKGW+piDxQKMvydgXzXfJdc5W5mFxko9fAf7mBk5FoohepKlO6/RCpjq7w3mjPkXog3LIB413DqfCj3iwFi3dJgBZrCcMtTtugdOpHPidDOj8/6zFbeVl4rDZ4=  ;
Message-ID: <20070105044220.77029.qmail@web50305.mail.yahoo.com>
Received: from [58.63.149.183] by web50305.mail.yahoo.com via HTTP; Thu, 04 Jan 2007 20:42:20 PST
Date: Thu, 4 Jan 2007 20:42:20 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: digester/lucene runtime problems
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=ascii
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Mark, this is purely related to Digester, not Lucene.  It's hard to tell wh=
ich method Digester is trying to call, as it uses reflection and the except=
ion stack trace doesn't show enough.  My guess is it always happens on the =
same XML element, if you run this multiple times.  Add some print calls to =
see what it is that Digester chokes on.=0A=0AOtis=0A=0A----- Original Messa=
ge ----=0AFrom: Mark Mei <vmslucene@gmail.com>=0ATo: java-user@lucene.apach=
e.org=0ASent: Wednesday, January 3, 2007 10:48:36 AM=0ASubject: digester/lu=
cene runtime problems=0A=0AHi,=0A=0AWe have 500k xml documents in a file. W=
e ran the digest/lucene and get the=0Afollowing error messages. We had ran =
a smaller size file with 20k xml=0Adocuments without any problems. Can anyo=
ne help us to resolve this problem?=0AThank you very much.=0A=0ARegards,=0A=
=0AMark=0A=0A=0AJan 3, 2007 10:17:37 AM org.apache.commons.digester.Digeste=
r endElement=0ASEVERE: End event threw exception=0Ajava.lang.reflect.Invoca=
tionTargetException=0A        at sun.reflect.GeneratedMethodAccessor23.invo=
ke(Unknown Source)=0A        at sun.reflect.DelegatingMethodAccessorImpl.in=
voke(=0ADelegatingMethodAccessorImpl.java:25)=0A        at java.lang.reflec=
t.Method.invoke(Method.java:585)=0A        at org.apache.commons.beanutils.=
MethodUtils.invokeMethod(=0AMethodUtils.java:216)=0A        at org.apache.c=
ommons.digester.SetNextRule.end(SetNextRule.java:217)=0A        at org.apac=
he.commons.digester.Rule.end(Rule.java:253)=0A        at org.apache.commons=
.digester.Digester.endElement(Digester.java=0A:1222)=0A        at org.apach=
e.xerces.parsers.AbstractSAXParser.endElement(Unknown=0ASource)=0A        a=
t=0Aorg.apache.xerces.impl.XMLDocumentFragmentScannerImpl.scanEndElement(Un=
known=0ASource)=0A        at=0Aorg.apache.xerces.impl.XMLDocumentFragmentSc=
annerImpl$FragmentContentDispatcher.dispatch(Unknown=0ASource)=0A        at=
=0Aorg.apache.xerces.impl.XMLDocumentFragmentScannerImpl.scanDocument(Unkno=
wn=0ASource)=0A        at org.apache.xerces.parsers.XML11Configuration.pars=
e(Unknown=0ASource)=0A        at org.apache.xerces.parsers.XML11Configurati=
on.parse(Unknown=0ASource)=0A        at org.apache.xerces.parsers.XMLParser=
.parse(Unknown Source)=0A        at org.apache.xerces.parsers.AbstractSAXPa=
rser.parse(Unknown Source)=0A        at org.apache.xerces.jaxp.SAXParserImp=
l$JAXPSAXParser.parse(Unknown=0ASource)=0A        at org.apache.commons.dig=
ester.Digester.parse(Digester.java:1728)=0A        at DOCUMENTParserIndexer=
.main(DOCUMENTParserIndexer.java:127)=0ACaused by: java.lang.NullPointerExc=
eption=0A        at org.apache.lucene.index.FieldsReader.doc(FieldsReader.j=
ava:82)=0A        at org.apache.lucene.index.SegmentReader.document(Segment=
Reader.java=0A:284)=0A        at org.apache.lucene.index.SegmentMerger.merg=
eFields(=0ASegmentMerger.java:186)=0A        at org.apache.lucene.index.Seg=
mentMerger.merge(SegmentMerger.java=0A:88)=0A        at org.apache.lucene.i=
ndex.IndexWriter.mergeSegments(=0AIndexWriter.java:681)=0A        at org.ap=
ache.lucene.index.IndexWriter.mergeSegments(=0AIndexWriter.java:658)=0A    =
    at org.apache.lucene.index.IndexWriter.maybeMergeSegments(=0AIndexWrite=
r.java:646)=0A        at org.apache.lucene.index.IndexWriter.addDocument(In=
dexWriter.java=0A:453)=0A        at org.apache.lucene.index.IndexWriter.add=
Document(IndexWriter.java=0A:436)=0A        at DOCUMENTParserIndexer.addDOC=
UMENT(DOCUMENTParserIndexer.java:59)=0A        ... 18 more=0AException in t=
hread "main" java.lang.NullPointerException=0A        at org.apache.commons=
.digester.Digester.createSAXException(=0ADigester.java:3181)=0A        at o=
rg.apache.commons.digester.Digester.createSAXException(=0ADigester.java:320=
7)=0A        at org.apache.commons.digester.Digester.endElement(Digester.ja=
va=0A:1225)=0A        at org.apache.xerces.parsers.AbstractSAXParser.endEle=
ment(Unknown=0ASource)=0A        at=0Aorg.apache.xerces.impl.XMLDocumentFra=
gmentScannerImpl.scanEndElement(Unknown=0ASource)=0A        at=0Aorg.apache=
.xerces.impl.XMLDocumentFragmentScannerImpl$FragmentContentDispatcher.dispa=
tch(Unknown=0ASource)=0A        at=0Aorg.apache.xerces.impl.XMLDocumentFrag=
mentScannerImpl.scanDocument(Unknown=0ASource)=0A        at org.apache.xerc=
es.parsers.XML11Configuration.parse(Unknown=0ASource)=0A        at org.apac=
he.xerces.parsers.XML11Configuration.parse(Unknown=0ASource)=0A        at o=
rg.apache.xerces.parsers.XMLParser.parse(Unknown Source)=0A        at org.a=
pache.xerces.parsers.AbstractSAXParser.parse(Unknown Source)=0A        at o=
rg.apache.xerces.jaxp.SAXParserImpl$JAXPSAXParser.parse(Unknown=0ASource)=
=0A        at org.apache.commons.digester.Digester.parse(Digester.java:1728=
)=0A        at DOCUMENTParserIndexer.main(DOCUMENTParserIndexer.java:127)=
=0A=0A=0A

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25295-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 05 05:53:45 2007
Return-Path: <java-user-return-25295-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61302 invoked from network); 5 Jan 2007 05:53:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Jan 2007 05:53:44 -0000
Received: (qmail 79377 invoked by uid 500); 5 Jan 2007 05:53:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79344 invoked by uid 500); 5 Jan 2007 05:53:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79333 invoked by uid 99); 5 Jan 2007 05:53:43 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Jan 2007 21:53:43 -0800
X-ASF-Spam-Status: No, hits=2.8 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [209.191.86.96] (HELO web82201.mail.mud.yahoo.com) (209.191.86.96)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 04 Jan 2007 21:53:33 -0800
Received: (qmail 94867 invoked by uid 60001); 5 Jan 2007 05:53:12 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=mBM2yVE4fmsEnsKVc1npWXgtCW8mVSy4Rm/VdO1A4HSzEq2EKP3IJXm5Uk3x9SY7VIV0A6wuXe9lNkpnciPEsRWGLJSC3p5fuTVju1hrIpskmc+mtb0ImhjFi+X/n0QA2WJQy3zcBS7cUUR7Byzf4wPFqIHUeP9dsOMoJh28cuw=  ;
Message-ID: <20070105055312.94865.qmail@web82201.mail.mud.yahoo.com>
Received: from [75.31.98.180] by web82201.mail.mud.yahoo.com via HTTP; Thu, 04 Jan 2007 21:53:12 PST
Date: Thu, 4 Jan 2007 21:53:12 -0800 (PST)
From: John Song <delphi329@yahoo.com>
Subject: efficient ways of updating document
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=ascii
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

It seems to me that updating a document is rather tedious and slow in lucen=
e, especially for updating large number of documents.  Before opening an In=
dexWriter to add documents, one has to open an IndexReader/IndexSearcher to=
 search for the document of a particular id.  Upon finding its docnum, dele=
te it.  One then close the reader and open the writer to add the updated co=
ntent.  Move on to the next item, repeat the process. For large number of u=
pdating, the performance is bad.  =0A=0AOne way to speed it up is don't do =
this process for every single updates.  If one has a large number of update=
s, open the reader/searcher first.  But instead of searching/deleting for o=
ne document and then close it, search/delete all of them and then close the=
 reader/searcher.  Then one can open a writer and just do a batch add.=0A=
=0AHowever, I wonder whether we could change the writer to do update automa=
tically. Update will be consists of marking an old document invalid, but no=
t removing them and adding the new document.  We can clean things up later =
on.  Using this method, there is no need of switching between reader and wr=
iter during update.  =0A=0A=0Ajohn=0A=0A=0A=0A_____________________________=
_____________________=0ADo You Yahoo!?=0ATired of spam?  Yahoo! Mail has th=
e best spam protection around =0Ahttp://mail.yahoo.com 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25296-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 05 08:33:10 2007
Return-Path: <java-user-return-25296-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93545 invoked from network); 5 Jan 2007 08:33:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Jan 2007 08:33:09 -0000
Received: (qmail 2671 invoked by uid 500); 5 Jan 2007 08:33:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2630 invoked by uid 500); 5 Jan 2007 08:33:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2619 invoked by uid 99); 5 Jan 2007 08:33:10 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Jan 2007 00:33:10 -0800
X-ASF-Spam-Status: No, hits=3.1 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST,DNS_FROM_RFC_WHOIS,MAILTO_TO_SPAM_ADDR
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [206.190.38.58] (HELO web50304.mail.yahoo.com) (206.190.38.58)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 05 Jan 2007 00:32:57 -0800
Received: (qmail 70200 invoked by uid 60001); 5 Jan 2007 08:32:36 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=cITS8k9+F3Xkz5MnZgL0Hz8kdk8NdsrHRYgxV/YCRkrc2bkyO2YiA+IFc7HK0QA+qpnrzGp32vWnsP8BNM37z6kxqpBEXdA+KiUObfCSXugSLqoEbjuvqPhN9EzUuQU7XcV7Ux8uUaMUoNzJ6ySCa40MC+MJ7aotb6stkyd4lGU=  ;
Message-ID: <20070105083236.70198.qmail@web50304.mail.yahoo.com>
Received: from [58.63.149.183] by web50304.mail.yahoo.com via HTTP; Fri, 05 Jan 2007 00:32:36 PST
Date: Fri, 5 Jan 2007 00:32:36 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: efficient ways of updating document
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=ascii
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

John,=0A=0ABatch deletion followed by batch addition is the best practise. =
 Ning Li made some changes that improve the performance of non-batch mass d=
elete/add operations, but I'm not sure what the state of those changes is (=
whether they are still in Lucene's JIRA, or whether they are in CVS).=0A=0A=
Otis=0A=0A----- Original Message ----=0AFrom: John Song <delphi329@yahoo.co=
m>=0ATo: java-user@lucene.apache.org=0ASent: Friday, January 5, 2007 12:53:=
12 AM=0ASubject: efficient ways of updating document=0A=0AIt seems to me th=
at updating a document is rather tedious and slow in lucene, especially for=
 updating large number of documents.  Before opening an IndexWriter to add =
documents, one has to open an IndexReader/IndexSearcher to search for the d=
ocument of a particular id.  Upon finding its docnum, delete it.  One then =
close the reader and open the writer to add the updated content.  Move on t=
o the next item, repeat the process. For large number of updating, the perf=
ormance is bad.  =0A=0AOne way to speed it up is don't do this process for =
every single updates.  If one has a large number of updates, open the reade=
r/searcher first.  But instead of searching/deleting for one document and t=
hen close it, search/delete all of them and then close the reader/searcher.=
  Then one can open a writer and just do a batch add.=0A=0AHowever, I wonde=
r whether we could change the writer to do update automatically. Update wil=
l be consists of marking an old document invalid, but not removing them and=
 adding the new document.  We can clean things up later on.  Using this met=
hod, there is no need of switching between reader and writer during update.=
  =0A=0A=0Ajohn=0A=0A=0A=0A________________________________________________=
__=0ADo You Yahoo!?=0ATired of spam?  Yahoo! Mail has the best spam protect=
ion around =0Ahttp://mail.yahoo.com=0A=0A----------------------------------=
-----------------------------------=0ATo unsubscribe, e-mail: java-user-uns=
ubscribe@lucene.apache.org=0AFor additional commands, e-mail: java-user-hel=
p@lucene.apache.org=0A=0A=0A=0A

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25297-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 05 09:25:34 2007
Return-Path: <java-user-return-25297-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 18471 invoked from network); 5 Jan 2007 09:25:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Jan 2007 09:25:34 -0000
Received: (qmail 57473 invoked by uid 500); 5 Jan 2007 09:25:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57124 invoked by uid 500); 5 Jan 2007 09:25:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57107 invoked by uid 99); 5 Jan 2007 09:25:32 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Jan 2007 01:25:32 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of maarsh@gmail.com designates 66.249.92.175 as permitted sender)
Received: from [66.249.92.175] (HELO ug-out-1314.google.com) (66.249.92.175)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Jan 2007 01:25:23 -0800
Received: by ug-out-1314.google.com with SMTP id k40so5639917ugc
        for <java-user@lucene.apache.org>; Fri, 05 Jan 2007 01:25:02 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=mUCXWOIsJtAV6voRE2g2FkGdVqyM6egsFZxsyMCdp7ExnGI5Kj+h9oNstdzwiJJukJph3Ld1qnuTofDtJ0d1BP88AkzQFpunq1CaeM+erMGn84MG/mI+VGA01SYXpePTkzE1a1FQSkVSVujCSzRHYkw8cXz647MFhAaquoFCaUs=
Received: by 10.66.248.5 with SMTP id v5mr29574016ugh.1167989102135;
        Fri, 05 Jan 2007 01:25:02 -0800 (PST)
Received: by 10.67.30.5 with HTTP; Fri, 5 Jan 2007 01:25:01 -0800 (PST)
Message-ID: <8d8d9b4b0701050125k71857e5fuc2080555f81a1f4e@mail.gmail.com>
Date: Fri, 5 Jan 2007 14:55:01 +0530
From: maarsh <maarsh@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Query
In-Reply-To: <0AA835F3-2FC6-472F-8186-62A73A9ABC34@ehatchersolutions.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_23361_25151447.1167989101952"
References: <8d8d9b4b0701040039w2999b3c1j7f7d2d2a4dc07332@mail.gmail.com>
	 <0AA835F3-2FC6-472F-8186-62A73A9ABC34@ehatchersolutions.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_23361_25151447.1167989101952
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi,

i am not getting this error when i use lucene1.4.3 . but only with
lucene2.0.0 . is there something i need to do for this

regards
maarsh

On 1/4/07, Erik Hatcher <erik@ehatchersolutions.com> wrote:
>
> This is not a Lucene issue, but rather a 3rd party tool you're using,
> which seems to have instrumented your Java runtime.  Googling for
> "com.trend.iwss.jscan.appscan" turned up a lot of similar issues:
>
>         <http://www.google.com/search?
> client=safari&rls=en&q=com.trend.iwss.jscan.appscan&ie=UTF-8&oe=UTF-8>
>
>
> On Jan 4, 2007, at 3:39 AM, maarsh wrote:
>
> > hi ,
> >
> > i am using Lucene2.0.0 with jre1.4.2_03 .
> >
> > it is simple program in which i am indexing an xml file . but when
> > i run it
> > , i get this error
> >
> > java.lang.NoSuchMethodError:
> > com.trend.iwss.jscan.appscan.runtime.PolicyProps: method <init>()V
> > not found
> >    at com.trend.iwss.jscan.appscan.runtime.Session.<init>
> > (Session.java:58)
> >    at com.trend.iwss.jscan.appscan.runtime.Session.<clinit>
> > (Session.java
> > :33)
> >    at org.apache.lucene.store.FSDirectory.<clinit>(FSDirectory.java)
> >    at org.apache.lucene.index.IndexWriter.<init>(IndexWriter.java:204)
> >    at MxGraphIndexer.<init>(MxGraphIndexer.java:45)
> >    at MxGraphIndexer.main(MxGraphIndexer.java:199)
> > Exception in thread "main"
> >
> > i tried using jre1.4.2_05 and even jre1.5 . but am not able to fix it
> >
> > is there anything which i am missing .
> >
> > Regards
> > maarsh
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_23361_25151447.1167989101952--

From java-user-return-25298-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 05 09:26:33 2007
Return-Path: <java-user-return-25298-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 18917 invoked from network); 5 Jan 2007 09:26:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Jan 2007 09:26:33 -0000
Received: (qmail 59454 invoked by uid 500); 5 Jan 2007 09:26:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59424 invoked by uid 500); 5 Jan 2007 09:26:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59356 invoked by uid 99); 5 Jan 2007 09:26:28 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Jan 2007 01:26:28 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [62.213.161.130] (HELO redhat.sirma.bg) (62.213.161.130)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Jan 2007 01:26:18 -0800
Received: from ivanvasilev2003 ([192.168.128.140])
	by redhat.sirma.bg (8.12.7/8.12.7/Sirma Linux 0.6) with SMTP id l059PseQ012711
	for <java-user@lucene.apache.org>; Fri, 5 Jan 2007 11:25:54 +0200
Message-ID: <022701c730ab$7f9858e0$8c80a8c0@sirma.int>
From: "Ivan Vasilev" <ivasilev@sirma.bg>
To: <java-user@lucene.apache.org>
References: <8d8d9b4b0701040039w2999b3c1j7f7d2d2a4dc07332@mail.gmail.com> <018401c73013$13a5bfd0$8c80a8c0@sirma.int> <359a92830701040740l32da2d3fn8c83f9b6cc6b001@mail.gmail.com>
Subject: Re: Lucene index update
Date: Fri, 5 Jan 2007 11:25:53 +0200
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="iso-8859-1";
	reply-type=original
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.3790.1830
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.3790.1830
X-Virus-Scanned: by Sirma Antivirus System             
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks a lot for your help Erick,

I make simple class that uses your idea about extracting data that is 
indexed but unstored by using TermDocs/TermEnums classes. It works properly.
Yes I also think that in some cases the approach with re-indexing documents 
will be faster. It depends on the documents that will be updated - if for 
example they are short and contain almost only different words the 
re-indexing will be faster, but if they are big documents and contain not so 
many different words then the trick with the TermDocs/TermEnums will be 
faster. Also this is the case when gathering documents from some network, as 
you mentioned.

My task is not to update some indexes but to create a tool that does it. In 
this tool I can include both classes and give user chance to choose what 
approach to use by giving him advise in which cases which approach is 
better.

Thank you again for your help :).

By the way could you give me some link from where I can read about the Luke 
program that reconstructs unstored fields, that you mentioned?

Bets Regards,
Ivan

----- Original Message ----- 
From: "Erick Erickson" <erickerickson@gmail.com>
To: <java-user@lucene.apache.org>
Sent: Thursday, January 04, 2007 5:40 PM
Subject: Re: Lucene index update


> for approach <2>, I *think* you can extract information about unstored 
> data
> by playing with TermDocs/TermEnums. Conceptually, the idea is to go 
> through
> all the terms and, for document (lucene ID) 1 find the terms that appear 
> in
> document 1 and order them by their termpositions. Repeat for document 2
> etc.. WARNING: I haven't done this personally, so I may be way off base.
> Also, if the Luke source code is available, that program reconstructs
> unstored fields, so you might want to take a look at that. But this will
> inevitably be a lossy process.
>
> I have to ask, though, why you're rejecting option <4> so early. To modify 
> a
> document in an index, you have to delete the document and re-add it. 
> Unless
> the time to assemble the document to be re-indexed is prohibitive, I'd 
> think
> about this option more seriously.
>
> Remember that not all documents in an index have to have the same fields.
> So, if you're only adding meta-data to *some* documents, you can freely 
> just
> change those docs and ignore all the others. Your searcher does have to 
> deal
> with null fields in some documents in this case.
>
> If you're going to re-index all documents, I'd question whether playing
> around with re-constructing them from the index is really a speed savings.
> Again, it will be if the time to assemble each document is large (say lots
> of DB queries or web crawling). But even in this case, is it the 
> difference
> between 1 hour and 3 hours? or 1 day and two weeks? If you can get it 
> built
> in a night, I'd do it the simple way.
>
> How long did it take to create the index originally anyway?
>
> Best
> Erick
>
> On 1/4/07, Ivan Vasilev <ivasilev@sirma.bg> wrote:
>>
>> Hi All,
>>
>>
>>
>> I want to update some documents in existing indexes by adding a new field
>> to
>> each of their documents. The documents contained in the indexes have some
>> fields that are indexed and NOT stored. The new field that will be added
>> will contain some metadata and will be Stored and not indexed.
>>
>>
>>
>> To fulfill the task I think I have 4 possible approaches:
>>
>>
>>
>> 1. To use Lucene API to do this. According to my research I found that
>> Lucene does not have methods for updating documents directly.
>>
>>
>>
>> 2. To extract documents including their fields (including the most
>> important
>> fields - those that are indexed but not stored). Then to add the new 
>> field
>> with relevant value to these documents, delete them from the index and
>> finally add them again in the index (including their new field).
>>
>>     This is the approach recommended in the book "Lucene in Action" and 
>> in
>> the FAQ page on the Lucene's site - delete documents and add them again.
>>
>>     The problem here is that according to Lucene's documentation "fields
>> which are not stored are not available in documents retrieved from the
>> index, e.g. with Hits.doc(int), Searcher.doc(int) or
>> IndexReader.document(int)". (The tests showed the same :) ). So if this
>> approach could work the problem here is: How to extract information of 
>> the
>> fields that are indexed but not stored?
>>
>>
>>
>> 3. To create a tool that changes the data stored in the indexes. This
>> approach seems to be too "dangerous" but if anyone knows the format that
>> Lucene uses to keep these data please tell me.
>>
>>
>>
>> 4. To reindex - means to delete existing indexes and create them in new 
>> by
>> adding the necessary fields. As the indexes could be very large creating
>> them in new will be too slow process and so this approach is least
>> desirable. But I am afraid it is the only one that is practically
>> possible.
>>
>>
>>
>> If someone could help me with the approaches 1-3 or tell me some other
>> please help me :)
>>
>>
>>
>> Thanks in advance,
>>
>> Ivan
>>
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25299-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 05 10:13:10 2007
Return-Path: <java-user-return-25299-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 41275 invoked from network); 5 Jan 2007 10:13:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Jan 2007 10:13:09 -0000
Received: (qmail 26498 invoked by uid 500); 5 Jan 2007 10:13:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26091 invoked by uid 500); 5 Jan 2007 10:13:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26080 invoked by uid 99); 5 Jan 2007 10:13:09 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Jan 2007 02:13:09 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Jan 2007 02:12:59 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 0BE4430EFC16; Fri,  5 Jan 2007 05:12:38 -0500 (EST)
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on javelina
X-Spam-Level: 
Received: from [10.0.1.3] (va-71-53-203-135.dhcp.embarqhsd.net [71.53.203.135])
	by ehatchersolutions.com (Postfix) with ESMTP id 88B7230EFC16
	for <java-user@lucene.apache.org>; Fri,  5 Jan 2007 05:12:28 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <459D65B5.9050108@dragonflymc.com>
References: <1167941683.14540.3.camel@nils-laptop> <459D65B5.9050108@dragonflymc.com>
Content-Type: text/plain; charset=ISO-8859-1; delsp=yes; format=flowed
Message-Id: <747A855C-20F0-437C-8E85-E70A65CACFEC@ehatchersolutions.com>
Content-Transfer-Encoding: quoted-printable
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: getting the maximum Hits doc
Date: Fri, 5 Jan 2007 05:12:23 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-0.8 required=5.0 tests=AWL,BAYES_00,
	RCVD_IN_SORBS_DUL autolearn=no version=3.1.1

Maybe your MySearcher is doing something different than the "Hits =20
IndexSearcher.search()" method?


On Jan 4, 2007, at 3:38 PM, Dennis Kubes wrote:

> Hits should be sorted according to score.  Getting the first =20
> document should give you the one with the highest score.
>
> Dennis
>
> Nils H=F6ller wrote:
>> Hi,
>> this is a short beginner question:
>> I am searching for something in my program
>> Hits hits =3D MySearcher.search(queryStr, searchRes.indexPath); Now =20=

>> I only want the Document with the highest score.
>> Is there a better way, then iterating through all hits?
>> The Hits objects seems to be not sorted.
>> Thanks for your help
>> Nils
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25300-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 05 11:59:40 2007
Return-Path: <java-user-return-25300-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71044 invoked from network); 5 Jan 2007 11:59:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Jan 2007 11:59:40 -0000
Received: (qmail 70586 invoked by uid 500); 5 Jan 2007 11:59:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70496 invoked by uid 500); 5 Jan 2007 11:59:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70405 invoked by uid 99); 5 Jan 2007 11:59:39 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Jan 2007 03:59:38 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [80.237.132.74] (HELO wp067.webpack.hosteurope.de) (80.237.132.74)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Jan 2007 03:59:28 -0800
Received: by wp067.webpack.hosteurope.de running ExIM  using esmtpa
	from e176139009.adsl.alicedsl.de ([85.176.139.9] helo=[192.168.1.101]); authenticated
	id 1H2nj1-0000Nj-7d; Fri, 05 Jan 2007 12:59:07 +0100
Subject: Re: getting the maximum Hits doc
From: Nils =?ISO-8859-1?Q?H=F6ller?= <nutch@nhoeller.de>
To: java-user@lucene.apache.org
In-Reply-To: <459D65B5.9050108@dragonflymc.com>
References: <1167941683.14540.3.camel@nils-laptop>
	 <459D65B5.9050108@dragonflymc.com>
Content-Type: text/plain; charset=utf-8
Date: Fri, 05 Jan 2007 12:59:06 +0100
Message-Id: <1167998346.5339.1.camel@nils-laptop>
Mime-Version: 1.0
X-Mailer: Evolution 2.8.1 
Content-Transfer-Encoding: quoted-printable
X-bounce-key: webpack.hosteurope.de;nutch@nhoeller.de;1167998368;125297b2;
X-Virus-Checked: Checked by ClamAV on apache.org

Am Donnerstag, den 04.01.2007, 14:38 -0600 schrieb Dennis Kubes:
> Hits should be sorted according to score.  Getting the first document=20
> should give you the one with the highest score.
>=20
> Dennis

Hi

thanks for your comment,

I found the mistake.=20

Now the Hits are sorted.

Nils

>=20
> Nils H=C3=B6ller wrote:
> > Hi,
> >=20
> > this is a short beginner question:
> >=20
> > I am searching for something in my program
> > Hits hits =3D MySearcher.search(queryStr, searchRes.indexPath);=20
> >=20
> > Now I only want the Document with the highest score.
> >=20
> > Is there a better way, then iterating through all hits?
> > The Hits objects seems to be not sorted.
> >=20
> > Thanks for your help
> >=20
> > Nils
> >=20
> >=20
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>=20


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25301-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 05 12:08:21 2007
Return-Path: <java-user-return-25301-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73719 invoked from network); 5 Jan 2007 12:08:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Jan 2007 12:08:20 -0000
Received: (qmail 82894 invoked by uid 500); 5 Jan 2007 12:08:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82711 invoked by uid 500); 5 Jan 2007 12:08:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82700 invoked by uid 99); 5 Jan 2007 12:08:19 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Jan 2007 04:08:19 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Jan 2007 04:08:08 -0800
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1H2nrQ-00014y-3r
	for java-user@lucene.apache.org; Fri, 05 Jan 2007 04:07:48 -0800
Message-ID: <8176954.post@talk.nabble.com>
Date: Fri, 5 Jan 2007 04:07:48 -0800 (PST)
From: Aslam Bari <iamaslamok@yahoo.co.in>
To: java-user@lucene.apache.org
Subject: Lucene search returns Zip file Name
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: iamaslamok@yahoo.co.in
X-Virus-Checked: Checked by ClamAV on apache.org


Dear all,
I m using lucene to index zip files. Suppose a zip file contains 4 files.
All files get indexed well with uri of Zip file means when i search for any
content the result comes and the resutl file name is zip file, but i need to
know the real file name in which the data found. How to get that file
name???
Thanks....
-- 
View this message in context: http://www.nabble.com/Lucene-search-returns-Zip-file-Name-tf2925197.html#a8176954
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25302-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 05 12:10:01 2007
Return-Path: <java-user-return-25302-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 74279 invoked from network); 5 Jan 2007 12:10:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Jan 2007 12:10:00 -0000
Received: (qmail 89123 invoked by uid 500); 5 Jan 2007 12:09:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89092 invoked by uid 500); 5 Jan 2007 12:09:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89081 invoked by uid 99); 5 Jan 2007 12:09:59 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Jan 2007 04:09:59 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Jan 2007 04:09:49 -0800
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1H2nt2-0001DH-LQ
	for java-user@lucene.apache.org; Fri, 05 Jan 2007 04:09:28 -0800
Message-ID: <8176977.post@talk.nabble.com>
Date: Fri, 5 Jan 2007 04:09:28 -0800 (PST)
From: Aslam Bari <iamaslamok@yahoo.co.in>
To: java-user@lucene.apache.org
Subject: Is DWF extractor for Lucene exists?
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: iamaslamok@yahoo.co.in
X-Virus-Checked: Checked by ClamAV on apache.org


Dear All,
I need to index and search DWF files. Is it possible in Lucene. If yes, Then
which extractor should i use to index the DWF files.

Thanks...
-- 
View this message in context: http://www.nabble.com/Is-DWF-extractor-for-Lucene-exists--tf2925205.html#a8176977
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25303-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 05 12:37:28 2007
Return-Path: <java-user-return-25303-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80217 invoked from network); 5 Jan 2007 12:37:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Jan 2007 12:37:26 -0000
Received: (qmail 28634 invoked by uid 500); 5 Jan 2007 12:37:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28287 invoked by uid 500); 5 Jan 2007 12:37:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28256 invoked by uid 99); 5 Jan 2007 12:37:24 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Jan 2007 04:37:24 -0800
X-ASF-Spam-Status: No, hits=0.3 required=10.0
	tests=MAILTO_TO_SPAM_ADDR,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of marcelo.ochoa@gmail.com designates 66.249.92.174 as permitted sender)
Received: from [66.249.92.174] (HELO ug-out-1314.google.com) (66.249.92.174)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Jan 2007 04:37:15 -0800
Received: by ug-out-1314.google.com with SMTP id k40so5680507ugc
        for <java-user@lucene.apache.org>; Fri, 05 Jan 2007 04:36:54 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=qCUOv3yrJRox6H42rQN4rd+hzyiFbiqsDm+6KWHs9JEj3M0x2uKGwLLVBRoVnGU//YJvUZDn9COVCW+BE46QYavYilKpwHL4RTonMfjyXSltGffJl0Tmw2vmSj9I7Ss9XqdMHPA1/Lr3zeIPehUZgyMvYk916Dg0z/4bIg4/dBk=
Received: by 10.78.178.5 with SMTP id a5mr6432232huf.1168000614359;
        Fri, 05 Jan 2007 04:36:54 -0800 (PST)
Received: by 10.78.200.15 with HTTP; Fri, 5 Jan 2007 04:36:54 -0800 (PST)
Message-ID: <126142c0701050436l2b001915i4d032f428267eabe@mail.gmail.com>
Date: Fri, 5 Jan 2007 09:36:54 -0300
From: "Marcelo Ochoa" <marcelo.ochoa@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: efficient ways of updating document
In-Reply-To: <20070105083236.70198.qmail@web50304.mail.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <20070105083236.70198.qmail@web50304.mail.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

John:
   I had implemented a batch (delete,insert,update) operation for the
Oracle Lucene Domain Index using OJVMDirectory, see patch:
http://issues.apache.org/jira/browse/LUCENE-724
  The strategy used in this solution is to enqueue all operations on
the table which have a column indexed by Lucene and synchronize then
all the operations.
   For each operation into the index (Lucene Domain Context) do:
    on insert:
       enqueue the operation storing the rowid of the row inserted.
    on update:
       enqueue the operation storing the rowid of the row updated.
    on delete:
       open an IndexReader, delete the document using
deleteDocuments(new Term("rowid", rid));
       enqueue the operation storing the rowid of the row deleted.

     Delete operations require that the delete operation must be
performed at the time of the deletion because a following query using
the operator lcontains() can return non existing rowid.
     The sync process perform these steps:
     for each operation enqueued on the lucene_queue do {
        if operation is delete {
          remove the rowid from the lists scheduledDeleteForUpdate and
scheduledAdd
        } else {
           if operation is update {
              add the rowid to the list scheduledDeleteForUpdate
           }
           add the rowid to the list scheduledAdd
        }
     } // end do
     Open an IndexReader and delete all the rows on the list
scheduledDeleteForUpdate
     Open an IndexWriter and add all the rows on the list scheduledAdd

     Delete operations are enqueued too to eliminate rows inserted or
updated previous to the delete operation during the time between two
checkpoints. For example:
       insert a1;
       update a1;
       delete a1;
       sync(it1);
       With the above sequence the list scheduledDeleteForUpdate and
scheduledAdd, have an instance of the rowid a1, but when the loop
process the delete message remove both rowid from the two list.
       Best regards, Marcelo.

PD: OJVMDirectory and OJVMFile classes operate on Oracle BLOBs instead
of Files, so the sync operations can operate on the LOBs without
having problem of locking or copying the content to alternate
directories, because the concurrence system of the database
automatically maintain a copy of the LOBs into the undo area until the
commit is performed. When a commit is performed the OJVMDirectory
automatically remove all cached IndexReader opened by the application.
On 1/5/07, Otis Gospodnetic <otis_gospodnetic@yahoo.com> wrote:
> John,
>
> Batch deletion followed by batch addition is the best practise.  Ning Li made some changes that improve the performance of non-batch mass delete/add operations, but I'm not sure what the state of those changes is (whether they are still in Lucene's JIRA, or whether they are in CVS).
>
> Otis
>
> ----- Original Message ----
> From: John Song <delphi329@yahoo.com>
> To: java-user@lucene.apache.org
> Sent: Friday, January 5, 2007 12:53:12 AM
> Subject: efficient ways of updating document
>
> It seems to me that updating a document is rather tedious and slow in lucene, especially for updating large number of documents.  Before opening an IndexWriter to add documents, one has to open an IndexReader/IndexSearcher to search for the document of a particular id.  Upon finding its docnum, delete it.  One then close the reader and open the writer to add the updated content.  Move on to the next item, repeat the process. For large number of updating, the performance is bad.
>
> One way to speed it up is don't do this process for every single updates.  If one has a large number of updates, open the reader/searcher first.  But instead of searching/deleting for one document and then close it, search/delete all of them and then close the reader/searcher.  Then one can open a writer and just do a batch add.
>
> However, I wonder whether we could change the writer to do update automatically. Update will be consists of marking an old document invalid, but not removing them and adding the new document.  We can clean things up later on.  Using this method, there is no need of switching between reader and writer during update.
>
>
> john
>
>
>
> __________________________________________________
> Do You Yahoo!?
> Tired of spam?  Yahoo! Mail has the best spam protection around
> http://mail.yahoo.com
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
Marcelo F. Ochoa
http://marcelo.ochoa.googlepages.com/home
______________
Do you Know DBPrism? Look @ DB Prism's Web Site
http://www.dbprism.com.ar/index.html
More info?
Chapter 17 of the book "Programming the Oracle Database using Java &
Web Services"
http://www.amazon.com/gp/product/1555583296/
Chapter 21 of the book "Professional XML Databases" - Wrox Press
http://www.amazon.com/gp/product/1861003587/
Chapter 8 of the book "Oracle & Open Source" - O'Reilly
http://www.oreilly.com/catalog/oracleopen/

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25304-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 05 13:26:28 2007
Return-Path: <java-user-return-25304-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90603 invoked from network); 5 Jan 2007 13:26:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Jan 2007 13:26:27 -0000
Received: (qmail 84139 invoked by uid 500); 5 Jan 2007 13:26:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83690 invoked by uid 500); 5 Jan 2007 13:26:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83677 invoked by uid 99); 5 Jan 2007 13:26:26 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Jan 2007 05:26:26 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 64.233.182.189 as permitted sender)
Received: from [64.233.182.189] (HELO nf-out-0910.google.com) (64.233.182.189)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Jan 2007 05:26:16 -0800
Received: by nf-out-0910.google.com with SMTP id n28so7106078nfc
        for <java-user@lucene.apache.org>; Fri, 05 Jan 2007 05:25:54 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=lrdduSQRuImkFSSQ1kiBWCU2D+TphpnERAtpJQCNoGDCGYnjVDUj854MwaxduDiQawsUwxzdZNNwHxM5Yef8cM3DjSX7CQljdhU884WdlgJRbWUsdMzuEZ3tCo8NuYyuO38h0vH8iDw7paNCWSNTn9KYzaoNVVpkBgBeA0FM/mc=
Received: by 10.82.107.15 with SMTP id f15mr2206307buc.1168003554094;
        Fri, 05 Jan 2007 05:25:54 -0800 (PST)
Received: by 10.82.162.9 with HTTP; Fri, 5 Jan 2007 05:25:53 -0800 (PST)
Message-ID: <359a92830701050525t759f82f0s3b3c3b07a9c446b1@mail.gmail.com>
Date: Fri, 5 Jan 2007 08:25:53 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene index update
In-Reply-To: <022701c730ab$7f9858e0$8c80a8c0@sirma.int>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_23776_4799933.1168003553837"
References: <8d8d9b4b0701040039w2999b3c1j7f7d2d2a4dc07332@mail.gmail.com>
	 <018401c73013$13a5bfd0$8c80a8c0@sirma.int>
	 <359a92830701040740l32da2d3fn8c83f9b6cc6b001@mail.gmail.com>
	 <022701c730ab$7f9858e0$8c80a8c0@sirma.int>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_23776_4799933.1168003553837
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Try http://www.getopt.org/luke/ or just google lucene luke.

If you're going to be playing with the indexes, I really, really, really
recommend that you get a copy of Luke and get familiar with it. It allows
you to examine your indexes, explains queries, shows the effects of
different analyzers on queries, etc. It's invaluable. And it's free <G>..

Best
Erick

On 1/5/07, Ivan Vasilev <ivasilev@sirma.bg> wrote:
>
> Thanks a lot for your help Erick,
>
> I make simple class that uses your idea about extracting data that is
> indexed but unstored by using TermDocs/TermEnums classes. It works
> properly.
> Yes I also think that in some cases the approach with re-indexing
> documents
> will be faster. It depends on the documents that will be updated - if for
> example they are short and contain almost only different words the
> re-indexing will be faster, but if they are big documents and contain not
> so
> many different words then the trick with the TermDocs/TermEnums will be
> faster. Also this is the case when gathering documents from some network,
> as
> you mentioned.
>
> My task is not to update some indexes but to create a tool that does it.
> In
> this tool I can include both classes and give user chance to choose what
> approach to use by giving him advise in which cases which approach is
> better.
>
> Thank you again for your help :).
>
> By the way could you give me some link from where I can read about the
> Luke
> program that reconstructs unstored fields, that you mentioned?
>
> Bets Regards,
> Ivan
>
> ----- Original Message -----
> From: "Erick Erickson" <erickerickson@gmail.com>
> To: <java-user@lucene.apache.org>
> Sent: Thursday, January 04, 2007 5:40 PM
> Subject: Re: Lucene index update
>
>
> > for approach <2>, I *think* you can extract information about unstored
> > data
> > by playing with TermDocs/TermEnums. Conceptually, the idea is to go
> > through
> > all the terms and, for document (lucene ID) 1 find the terms that appear
> > in
> > document 1 and order them by their termpositions. Repeat for document 2
> > etc.. WARNING: I haven't done this personally, so I may be way off base.
> > Also, if the Luke source code is available, that program reconstructs
> > unstored fields, so you might want to take a look at that. But this will
> > inevitably be a lossy process.
> >
> > I have to ask, though, why you're rejecting option <4> so early. To
> modify
> > a
> > document in an index, you have to delete the document and re-add it.
> > Unless
> > the time to assemble the document to be re-indexed is prohibitive, I'd
> > think
> > about this option more seriously.
> >
> > Remember that not all documents in an index have to have the same
> fields.
> > So, if you're only adding meta-data to *some* documents, you can freely
> > just
> > change those docs and ignore all the others. Your searcher does have to
> > deal
> > with null fields in some documents in this case.
> >
> > If you're going to re-index all documents, I'd question whether playing
> > around with re-constructing them from the index is really a speed
> savings.
> > Again, it will be if the time to assemble each document is large (say
> lots
> > of DB queries or web crawling). But even in this case, is it the
> > difference
> > between 1 hour and 3 hours? or 1 day and two weeks? If you can get it
> > built
> > in a night, I'd do it the simple way.
> >
> > How long did it take to create the index originally anyway?
> >
> > Best
> > Erick
> >
> > On 1/4/07, Ivan Vasilev <ivasilev@sirma.bg> wrote:
> >>
> >> Hi All,
> >>
> >>
> >>
> >> I want to update some documents in existing indexes by adding a new
> field
> >> to
> >> each of their documents. The documents contained in the indexes have
> some
> >> fields that are indexed and NOT stored. The new field that will be
> added
> >> will contain some metadata and will be Stored and not indexed.
> >>
> >>
> >>
> >> To fulfill the task I think I have 4 possible approaches:
> >>
> >>
> >>
> >> 1. To use Lucene API to do this. According to my research I found that
> >> Lucene does not have methods for updating documents directly.
> >>
> >>
> >>
> >> 2. To extract documents including their fields (including the most
> >> important
> >> fields - those that are indexed but not stored). Then to add the new
> >> field
> >> with relevant value to these documents, delete them from the index and
> >> finally add them again in the index (including their new field).
> >>
> >>     This is the approach recommended in the book "Lucene in Action" and
> >> in
> >> the FAQ page on the Lucene's site - delete documents and add them
> again.
> >>
> >>     The problem here is that according to Lucene's documentation
> "fields
> >> which are not stored are not available in documents retrieved from the
> >> index, e.g. with Hits.doc(int), Searcher.doc(int) or
> >> IndexReader.document(int)". (The tests showed the same :) ). So if this
> >> approach could work the problem here is: How to extract information of
> >> the
> >> fields that are indexed but not stored?
> >>
> >>
> >>
> >> 3. To create a tool that changes the data stored in the indexes. This
> >> approach seems to be too "dangerous" but if anyone knows the format
> that
> >> Lucene uses to keep these data please tell me.
> >>
> >>
> >>
> >> 4. To reindex - means to delete existing indexes and create them in new
> >> by
> >> adding the necessary fields. As the indexes could be very large
> creating
> >> them in new will be too slow process and so this approach is least
> >> desirable. But I am afraid it is the only one that is practically
> >> possible.
> >>
> >>
> >>
> >> If someone could help me with the approaches 1-3 or tell me some other
> >> please help me :)
> >>
> >>
> >>
> >> Thanks in advance,
> >>
> >> Ivan
> >>
> >>
> >>
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_23776_4799933.1168003553837--

From java-user-return-25305-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 05 13:26:35 2007
Return-Path: <java-user-return-25305-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90659 invoked from network); 5 Jan 2007 13:26:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Jan 2007 13:26:34 -0000
Received: (qmail 84248 invoked by uid 500); 5 Jan 2007 13:26:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84209 invoked by uid 500); 5 Jan 2007 13:26:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 84186 invoked by uid 99); 5 Jan 2007 13:26:28 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Jan 2007 05:26:28 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [208.97.132.74] (HELO spunkymail-a7.dreamhost.com) (208.97.132.74)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Jan 2007 05:26:16 -0800
Received: from [192.168.0.2] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a7.dreamhost.com (Postfix) with ESMTP id 7F3805C017
	for <java-user@lucene.apache.org>; Fri,  5 Jan 2007 05:25:55 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <8176977.post@talk.nabble.com>
References: <8176977.post@talk.nabble.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <DFE1792D-BFEB-4293-AF22-7357C7438B52@apache.org>
Content-Transfer-Encoding: 7bit
From: Grant Ingersoll <gsingers@apache.org>
Subject: Re: Is DWF extractor for Lucene exists?
Date: Fri, 5 Jan 2007 08:25:54 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org

Lucene works with text; we don't provide any custom extractors.  You  
will need to parse DWF (I'm not even sure what a DWF file is) and  
construct the Document/Fields that you want based on your content.

-Grant

On Jan 5, 2007, at 7:09 AM, Aslam Bari wrote:

>
> Dear All,
> I need to index and search DWF files. Is it possible in Lucene. If  
> yes, Then
> which extractor should i use to index the DWF files.
>
> Thanks...
> -- 
> View this message in context: http://www.nabble.com/Is-DWF- 
> extractor-for-Lucene-exists--tf2925205.html#a8176977
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

--------------------------
Grant Ingersoll
Center for Natural Language Processing
http://www.cnlp.org

Read the Lucene Java FAQ at http://wiki.apache.org/jakarta-lucene/ 
LuceneFAQ



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25306-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 05 13:31:29 2007
Return-Path: <java-user-return-25306-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91805 invoked from network); 5 Jan 2007 13:31:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Jan 2007 13:31:29 -0000
Received: (qmail 94313 invoked by uid 500); 5 Jan 2007 13:31:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94271 invoked by uid 500); 5 Jan 2007 13:31:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94260 invoked by uid 99); 5 Jan 2007 13:31:28 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Jan 2007 05:31:28 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 64.233.182.186 as permitted sender)
Received: from [64.233.182.186] (HELO nf-out-0910.google.com) (64.233.182.186)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Jan 2007 05:31:19 -0800
Received: by nf-out-0910.google.com with SMTP id n28so7107115nfc
        for <java-user@lucene.apache.org>; Fri, 05 Jan 2007 05:30:58 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=IIiIi6FI5BREWun0fjswZ52Kh/O7pVAAu6T2089c25PoBsUqRHERXDJWIOp5E6/eXlkmICL7OOQilp2v+Xcbxd6ffNhLAxzCndmw0ULFrPrGpZzGUEBKOCQb+wpImg9f6Q9F4HbDAMnZv+Md2hU4BAm8QadlnHb5Y7sWd/DOhGI=
Received: by 10.82.120.15 with SMTP id s15mr2565853buc.1168003858216;
        Fri, 05 Jan 2007 05:30:58 -0800 (PST)
Received: by 10.82.162.9 with HTTP; Fri, 5 Jan 2007 05:30:58 -0800 (PST)
Message-ID: <359a92830701050530w467cca2doc1121051ef8c12ab@mail.gmail.com>
Date: Fri, 5 Jan 2007 08:30:58 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene search returns Zip file Name
In-Reply-To: <8176954.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_23836_6984383.1168003858187"
References: <8176954.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_23836_6984383.1168003858187
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

You only get things out of an index that you put in there. At index time,
you need to associate file names with content. Something like indexing the
text of each file in the zip file as a separate lucene document, perhaps
with the associated zip file name and the real file name.

Best
Erick


On 1/5/07, Aslam Bari <iamaslamok@yahoo.co.in> wrote:
>
>
> Dear all,
> I m using lucene to index zip files. Suppose a zip file contains 4 files.
> All files get indexed well with uri of Zip file means when i search for
> any
> content the result comes and the resutl file name is zip file, but i need
> to
> know the real file name in which the data found. How to get that file
> name???
> Thanks....
> --
> View this message in context:
> http://www.nabble.com/Lucene-search-returns-Zip-file-Name-tf2925197.html#a8176954
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_23836_6984383.1168003858187--

From java-user-return-25307-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 05 13:34:17 2007
Return-Path: <java-user-return-25307-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92300 invoked from network); 5 Jan 2007 13:34:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Jan 2007 13:34:16 -0000
Received: (qmail 99094 invoked by uid 500); 5 Jan 2007 13:34:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 99065 invoked by uid 500); 5 Jan 2007 13:34:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 99054 invoked by uid 99); 5 Jan 2007 13:34:15 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Jan 2007 05:34:15 -0800
X-ASF-Spam-Status: No, hits=2.3 required=10.0
	tests=HTML_MESSAGE,MAILTO_TO_SPAM_ADDR,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 64.233.182.186 as permitted sender)
Received: from [64.233.182.186] (HELO nf-out-0910.google.com) (64.233.182.186)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Jan 2007 05:34:06 -0800
Received: by nf-out-0910.google.com with SMTP id n28so7107675nfc
        for <java-user@lucene.apache.org>; Fri, 05 Jan 2007 05:33:45 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=oYS2IwyvcrqgQWtuehA9suntTkW4GA4v3Q0fTBDB0H3vxVajzW8KY91BHh8qkO/kKUZU70HPffp5OUAJmdy6Ddhl9zz3kQ2ZAa1qBILccbXNzivWuildw8VEXorR+zMxC5UFeqeM/UMrd9LAuY8EMTheO7o/Ug+Q8muH2rTtTb8=
Received: by 10.82.105.13 with SMTP id d13mr2093435buc.1168004024780;
        Fri, 05 Jan 2007 05:33:44 -0800 (PST)
Received: by 10.82.162.9 with HTTP; Fri, 5 Jan 2007 05:33:44 -0800 (PST)
Message-ID: <359a92830701050533h75ba55dck9d3ad12daad6479f@mail.gmail.com>
Date: Fri, 5 Jan 2007 08:33:44 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: efficient ways of updating document
In-Reply-To: <126142c0701050436l2b001915i4d032f428267eabe@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_23856_14136342.1168004024577"
References: <20070105083236.70198.qmail@web50304.mail.yahoo.com>
	 <126142c0701050436l2b001915i4d032f428267eabe@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_23856_14136342.1168004024577
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Also, look at the IndexModifier class, which hides a number of the ugly
details. Under the covers, I think (although I haven't looked) that it
pretty much does exactly what you outlined, at least the recommendation that
you do your deletes and adds in batches leads me to think so.

Best
Erick

On 1/5/07, Marcelo Ochoa <marcelo.ochoa@gmail.com> wrote:
>
> John:
>    I had implemented a batch (delete,insert,update) operation for the
> Oracle Lucene Domain Index using OJVMDirectory, see patch:
> http://issues.apache.org/jira/browse/LUCENE-724
>   The strategy used in this solution is to enqueue all operations on
> the table which have a column indexed by Lucene and synchronize then
> all the operations.
>    For each operation into the index (Lucene Domain Context) do:
>     on insert:
>        enqueue the operation storing the rowid of the row inserted.
>     on update:
>        enqueue the operation storing the rowid of the row updated.
>     on delete:
>        open an IndexReader, delete the document using
> deleteDocuments(new Term("rowid", rid));
>        enqueue the operation storing the rowid of the row deleted.
>
>      Delete operations require that the delete operation must be
> performed at the time of the deletion because a following query using
> the operator lcontains() can return non existing rowid.
>      The sync process perform these steps:
>      for each operation enqueued on the lucene_queue do {
>         if operation is delete {
>           remove the rowid from the lists scheduledDeleteForUpdate and
> scheduledAdd
>         } else {
>            if operation is update {
>               add the rowid to the list scheduledDeleteForUpdate
>            }
>            add the rowid to the list scheduledAdd
>         }
>      } // end do
>      Open an IndexReader and delete all the rows on the list
> scheduledDeleteForUpdate
>      Open an IndexWriter and add all the rows on the list scheduledAdd
>
>      Delete operations are enqueued too to eliminate rows inserted or
> updated previous to the delete operation during the time between two
> checkpoints. For example:
>        insert a1;
>        update a1;
>        delete a1;
>        sync(it1);
>        With the above sequence the list scheduledDeleteForUpdate and
> scheduledAdd, have an instance of the rowid a1, but when the loop
> process the delete message remove both rowid from the two list.
>        Best regards, Marcelo.
>
> PD: OJVMDirectory and OJVMFile classes operate on Oracle BLOBs instead
> of Files, so the sync operations can operate on the LOBs without
> having problem of locking or copying the content to alternate
> directories, because the concurrence system of the database
> automatically maintain a copy of the LOBs into the undo area until the
> commit is performed. When a commit is performed the OJVMDirectory
> automatically remove all cached IndexReader opened by the application.
> On 1/5/07, Otis Gospodnetic <otis_gospodnetic@yahoo.com> wrote:
> > John,
> >
> > Batch deletion followed by batch addition is the best practise.  Ning Li
> made some changes that improve the performance of non-batch mass delete/add
> operations, but I'm not sure what the state of those changes is (whether
> they are still in Lucene's JIRA, or whether they are in CVS).
> >
> > Otis
> >
> > ----- Original Message ----
> > From: John Song <delphi329@yahoo.com>
> > To: java-user@lucene.apache.org
> > Sent: Friday, January 5, 2007 12:53:12 AM
> > Subject: efficient ways of updating document
> >
> > It seems to me that updating a document is rather tedious and slow in
> lucene, especially for updating large number of documents.  Before opening
> an IndexWriter to add documents, one has to open an
> IndexReader/IndexSearcher to search for the document of a particular
> id.  Upon finding its docnum, delete it.  One then close the reader and open
> the writer to add the updated content.  Move on to the next item, repeat the
> process. For large number of updating, the performance is bad.
> >
> > One way to speed it up is don't do this process for every single
> updates.  If one has a large number of updates, open the reader/searcher
> first.  But instead of searching/deleting for one document and then close
> it, search/delete all of them and then close the reader/searcher.  Then one
> can open a writer and just do a batch add.
> >
> > However, I wonder whether we could change the writer to do update
> automatically. Update will be consists of marking an old document invalid,
> but not removing them and adding the new document.  We can clean things up
> later on.  Using this method, there is no need of switching between reader
> and writer during update.
> >
> >
> > john
> >
> >
> >
> > __________________________________________________
> > Do You Yahoo!?
> > Tired of spam?  Yahoo! Mail has the best spam protection around
> > http://mail.yahoo.com
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> >
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
>
> --
> Marcelo F. Ochoa
> http://marcelo.ochoa.googlepages.com/home
> ______________
> Do you Know DBPrism? Look @ DB Prism's Web Site
> http://www.dbprism.com.ar/index.html
> More info?
> Chapter 17 of the book "Programming the Oracle Database using Java &
> Web Services"
> http://www.amazon.com/gp/product/1555583296/
> Chapter 21 of the book "Professional XML Databases" - Wrox Press
> http://www.amazon.com/gp/product/1861003587/
> Chapter 8 of the book "Oracle & Open Source" - O'Reilly
> http://www.oreilly.com/catalog/oracleopen/
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_23856_14136342.1168004024577--

From java-user-return-25308-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 05 13:37:23 2007
Return-Path: <java-user-return-25308-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92832 invoked from network); 5 Jan 2007 13:37:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Jan 2007 13:37:22 -0000
Received: (qmail 3453 invoked by uid 500); 5 Jan 2007 13:37:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2938 invoked by uid 500); 5 Jan 2007 13:37:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2927 invoked by uid 99); 5 Jan 2007 13:37:22 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Jan 2007 05:37:22 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Jan 2007 05:37:12 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 2083630EFC1A; Fri,  5 Jan 2007 08:36:51 -0500 (EST)
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on javelina
X-Spam-Level: 
Received: from [128.143.193.79] (d-128-193-79.bootp.Virginia.EDU [128.143.193.79])
	by ehatchersolutions.com (Postfix) with ESMTP id C861E30EFC19
	for <java-user@lucene.apache.org>; Fri,  5 Jan 2007 08:36:47 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <8d8d9b4b0701050125k71857e5fuc2080555f81a1f4e@mail.gmail.com>
References: <8d8d9b4b0701040039w2999b3c1j7f7d2d2a4dc07332@mail.gmail.com> <0AA835F3-2FC6-472F-8186-62A73A9ABC34@ehatchersolutions.com> <8d8d9b4b0701050125k71857e5fuc2080555f81a1f4e@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <B5B585FB-5F78-498B-8ACF-CD49EE656E8A@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Query
Date: Fri, 5 Jan 2007 08:36:45 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.6 required=5.0 tests=BAYES_00 autolearn=ham 
	version=3.1.1


On Jan 5, 2007, at 4:25 AM, maarsh wrote:

> Hi,
>
> i am not getting this error when i use lucene1.4.3 . but only with
> lucene2.0.0 . is there something i need to do for this

Certainly there is something you'll need to do to get it working :)    
But as far as the problem being something Lucene-specific that this  
forum can help out with, I don't think so.  I recommend following the  
Google links to see what others have done in this same situation.

	Erik


>
> regards
> maarsh
>
> On 1/4/07, Erik Hatcher <erik@ehatchersolutions.com> wrote:
>>
>> This is not a Lucene issue, but rather a 3rd party tool you're using,
>> which seems to have instrumented your Java runtime.  Googling for
>> "com.trend.iwss.jscan.appscan" turned up a lot of similar issues:
>>
>>         <http://www.google.com/search?
>> client=safari&rls=en&q=com.trend.iwss.jscan.appscan&ie=UTF-8&oe=UTF-8 
>> >
>>
>>
>> On Jan 4, 2007, at 3:39 AM, maarsh wrote:
>>
>> > hi ,
>> >
>> > i am using Lucene2.0.0 with jre1.4.2_03 .
>> >
>> > it is simple program in which i am indexing an xml file . but when
>> > i run it
>> > , i get this error
>> >
>> > java.lang.NoSuchMethodError:
>> > com.trend.iwss.jscan.appscan.runtime.PolicyProps: method <init>()V
>> > not found
>> >    at com.trend.iwss.jscan.appscan.runtime.Session.<init>
>> > (Session.java:58)
>> >    at com.trend.iwss.jscan.appscan.runtime.Session.<clinit>
>> > (Session.java
>> > :33)
>> >    at org.apache.lucene.store.FSDirectory.<clinit> 
>> (FSDirectory.java)
>> >    at org.apache.lucene.index.IndexWriter.<init> 
>> (IndexWriter.java:204)
>> >    at MxGraphIndexer.<init>(MxGraphIndexer.java:45)
>> >    at MxGraphIndexer.main(MxGraphIndexer.java:199)
>> > Exception in thread "main"
>> >
>> > i tried using jre1.4.2_05 and even jre1.5 . but am not able to  
>> fix it
>> >
>> > is there anything which i am missing .
>> >
>> > Regards
>> > maarsh
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25309-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 05 14:19:07 2007
Return-Path: <java-user-return-25309-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1754 invoked from network); 5 Jan 2007 14:19:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Jan 2007 14:19:06 -0000
Received: (qmail 62102 invoked by uid 500); 5 Jan 2007 14:19:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61980 invoked by uid 500); 5 Jan 2007 14:19:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61968 invoked by uid 99); 5 Jan 2007 14:19:04 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Jan 2007 06:19:04 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [209.97.205.201] (HELO mail.seseit.com) (209.97.205.201)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Jan 2007 06:18:53 -0800
Received: by mail.seseit.com (Postfix, from userid 65534)
	id CEF6E18A38; Fri,  5 Jan 2007 14:18:23 +0000 (GMT)
Received: from max (cpc3-lewi6-0-0-cust798.bmly.cable.ntl.com [82.27.203.31])
	by mail.seseit.com (Postfix) with ESMTP id A825618A38
	for <java-user@lucene.apache.org>; Fri,  5 Jan 2007 14:18:16 +0000 (GMT)
From: "Rob Staveley (Tom)" <rstaveley@seseit.com>
To: <java-user@lucene.apache.org>
Subject: All readers must have same maxDoc: 16651064!=16507074
Date: Fri, 5 Jan 2007 14:18:10 -0000
MIME-Version: 1.0
Message-ID: <000801c730d4$571ae990$2302a8c0@max>
X-Mailer: Microsoft Office Outlook 11
Content-Type: multipart/signed;
	protocol="application/x-pkcs7-signature";
	micalg=SHA1;
	boundary="----=_NextPart_000_0003_01C730D4.40855B70"
Thread-Index: AccwzqYDXp4kKzBwRIq1hiZhLLwbkAABBcXw
In-Reply-To: <B5B585FB-5F78-498B-8ACF-CD49EE656E8A@ehatchersolutions.com>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3028
X-seseit-ltd-MailScanner: Found to be clean, Found to be clean
X-seseit-ltd-MailScanner-SpamScore: s, s
X-Spam-Checker-Version: SpamAssassin 3.0.3 (2005-04-27) on mini.seseit.net
X-Spam-Level: X
X-seseit-ltd-MailScanner-From: rstaveley@seseit.com
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=1.1 required=5.0 tests=SUBJ_HAS_UNIQ_ID autolearn=no 
	version=3.0.3

------=_NextPart_000_0003_01C730D4.40855B70
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit

I'm attempting to delete documents matching a term on a ParallelReader and
got the error message above, presumably while adding directories to the
ParallelReader. 

I'm puzzled, because I don't need to have the same maxDoc (and numDoc) in
index directories for a ParallelMultiSearcher, so what's the deal here?
Should I delete serially... one index at a time?

------=_NextPart_000_0003_01C730D4.40855B70
Content-Type: application/x-pkcs7-signature;
	name="smime.p7s"
Content-Transfer-Encoding: base64
Content-Disposition: attachment;
	filename="smime.p7s"

MIAGCSqGSIb3DQEHAqCAMIACAQExCzAJBgUrDgMCGgUAMIAGCSqGSIb3DQEHAQAAoIIKaDCCAj0w
ggGmAhEAzbp/VvDf5LxU/iKss3KqVTANBgkqhkiG9w0BAQIFADBfMQswCQYDVQQGEwJVUzEXMBUG
A1UEChMOVmVyaVNpZ24sIEluYy4xNzA1BgNVBAsTLkNsYXNzIDEgUHVibGljIFByaW1hcnkgQ2Vy
dGlmaWNhdGlvbiBBdXRob3JpdHkwHhcNOTYwMTI5MDAwMDAwWhcNMjgwODAxMjM1OTU5WjBfMQsw
CQYDVQQGEwJVUzEXMBUGA1UEChMOVmVyaVNpZ24sIEluYy4xNzA1BgNVBAsTLkNsYXNzIDEgUHVi
bGljIFByaW1hcnkgQ2VydGlmaWNhdGlvbiBBdXRob3JpdHkwgZ8wDQYJKoZIhvcNAQEBBQADgY0A
MIGJAoGBAOUZv22jVmEtmUhx9mfeuY3rt56GgAqRDvo4Ja9GiILlc6igmyRdDR/MZW4MsNBWhBiH
mgabEKFz37RYOWtuwfYV1aioP6oSBo0xrH+wNNePNGeICc0UEeJORVZpH3gCgNrcR5EpuzbJY1zF
4Ncth3uhtzKwezC6Ki8xqu6jZ9rbAgMBAAEwDQYJKoZIhvcNAQECBQADgYEATD+4i8Zo3+5DMw5d
6abLB4RNejP/khv0Nq3YlSI2aBFsfELM85wuxAc/FLAPT/+Qknb54rxK6Y/NoIAK98Up8YIiXbix
3YEjo3slFUYweRb46gVLlH8dwhzI47f0EEA8E8NfH1PoSOSGtHuhNbB7Jbq4046rPzidADQAmPPR
cZQwggNiMIICy6ADAgECAhAL2gsXwT+JjqsJdHq0zi4zMA0GCSqGSIb3DQEBAgUAMF8xCzAJBgNV
BAYTAlVTMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjE3MDUGA1UECxMuQ2xhc3MgMSBQdWJsaWMg
UHJpbWFyeSBDZXJ0aWZpY2F0aW9uIEF1dGhvcml0eTAeFw05ODA1MTIwMDAwMDBaFw0wODA1MTIy
MzU5NTlaMIHMMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMWVmVyaVNpZ24gVHJ1
c3QgTmV0d29yazFGMEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0b3J5L1JQQSBJbmNv
cnAuIEJ5IFJlZi4sTElBQi5MVEQoYyk5ODFIMEYGA1UEAxM/VmVyaVNpZ24gQ2xhc3MgMSBDQSBJ
bmRpdmlkdWFsIFN1YnNjcmliZXItUGVyc29uYSBOb3QgVmFsaWRhdGVkMIGfMA0GCSqGSIb3DQEB
AQUAA4GNADCBiQKBgQC7WkSKBBa7Vf0DeootlE8VeDa4DUqyb5xUv7zodyqdufBou5XZMUFweoFL
uUgTVi3HCOGEQqvAopKrRFyqQvCCDgLpL/vCO7u+yScKXbawNkIztW5UiE+HSr8Z2vkV6A+Hthzj
zMaajn9qJJLj/OBluqexfu/J2zdqyErICQbkmQIDAQABo4GwMIGtMA8GA1UdEwQIMAYBAf8CAQAw
RwYDVR0gBEAwPjA8BgtghkgBhvhFAQcBATAtMCsGCCsGAQUFBwIBFh93d3cudmVyaXNpZ24uY29t
L3JlcG9zaXRvcnkvUlBBMDEGA1UdHwQqMCgwJqAkoCKGIGh0dHA6Ly9jcmwudmVyaXNpZ24uY29t
L3BjYTEuY3JsMAsGA1UdDwQEAwIBBjARBglghkgBhvhCAQEEBAMCAQYwDQYJKoZIhvcNAQECBQAD
gYEAAn2eb0VLOKC43ulTZCG85Ewrjx7+kkCs2Ao5aqEyISwHm6tZ/tJiGn1VOLA3c9z0B2ZjYr3h
U3BSh+eo2FLpWy2q4d7PrDFU1IsZyNgjqO8EKzJ9LBgcyHyJqC538kTRZQpNdLXu0xuSc3QuiTs1
E3LnQDGa07LEq+dWvovj+xUwggS9MIIEJqADAgECAhAMCNjQ34mqyE4nzPikVv1BMA0GCSqGSIb3
DQEBBQUAMIHMMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMWVmVyaVNpZ24gVHJ1
c3QgTmV0d29yazFGMEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0b3J5L1JQQSBJbmNv
cnAuIEJ5IFJlZi4sTElBQi5MVEQoYyk5ODFIMEYGA1UEAxM/VmVyaVNpZ24gQ2xhc3MgMSBDQSBJ
bmRpdmlkdWFsIFN1YnNjcmliZXItUGVyc29uYSBOb3QgVmFsaWRhdGVkMB4XDTA2MTAxOTAwMDAw
MFoXDTA3MTAxOTIzNTk1OVowggEZMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMW
VmVyaVNpZ24gVHJ1c3QgTmV0d29yazFGMEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0
b3J5L1JQQSBJbmNvcnAuIGJ5IFJlZi4sTElBQi5MVEQoYyk5ODEeMBwGA1UECxMVUGVyc29uYSBO
b3QgVmFsaWRhdGVkMTMwMQYDVQQLEypEaWdpdGFsIElEIENsYXNzIDEgLSBOZXRzY2FwZSBGdWxs
IFNlcnZpY2UxGzAZBgNVBAMUElJvYiBTdGF2ZWxleSAoVG9tKTEjMCEGCSqGSIb3DQEJARYUcnN0
YXZlbGV5QHNlc2VpdC5jb20wggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQDNyaTYoePu
Q5MAkMiMXDFmmzjqw3yJZ0I/nBcM2kEMNmlpwG34SbhOB5WKLRd1FPOArm344LxH8PQd5n/i++p9
Wgdem+mxT8AAQCaiLC//wCOfIFhcKdCeIH0UdT6tUVQ1bmog7FVtLFKgqQzfhoPauUZcdClO4tA/
DcPNpy4XRO6b8XsttoMrRY/GqHRDY1zNJycBBdt3vpT7Q8vb6yQ3Hf32K/wUfalCzNo+SfzhGSsl
HBx8xfepQ6Xrz6jNS8jdkrimRGEjcGSzY5ixPd0kV7BIxFa3TtBK1u/LApMTGaAmeFilZeefsRWu
pEBr9tyetn4Wu/5q/tplVgAknCF9AgMBAAGjgcswgcgwCQYDVR0TBAIwADBEBgNVHSAEPTA7MDkG
C2CGSAGG+EUBBxcDMCowKAYIKwYBBQUHAgEWHGh0dHBzOi8vd3d3LnZlcmlzaWduLmNvbS9ycGEw
CwYDVR0PBAQDAgWgMB0GA1UdJQQWMBQGCCsGAQUFBwMEBggrBgEFBQcDAjAUBgpghkgBhvhFAQYH
BAYWBE5vbmUwMwYDVR0fBCwwKjAooCagJIYiaHR0cDovL2NybC52ZXJpc2lnbi5jb20vY2xhc3Mx
LmNybDANBgkqhkiG9w0BAQUFAAOBgQB5A9RgvBpfJsI8uueBWGaMe8/HCzuSE3HskLzgb+6/4x2z
d4YIrVrFEvmpQQz0B1+Vbom2GTshDK2Ib3vQuMcFMZuyZ6fuI80QsAGDQ33ZykSjcAgjuG6joW9m
0M0DISzAS5JjxLkeNCko8oBgq5ZHiTpNONUtEK5M8In2Fe73XjGCBL8wggS7AgEBMIHhMIHMMRcw
FQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMWVmVyaVNpZ24gVHJ1c3QgTmV0d29yazFG
MEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0b3J5L1JQQSBJbmNvcnAuIEJ5IFJlZi4s
TElBQi5MVEQoYyk5ODFIMEYGA1UEAxM/VmVyaVNpZ24gQ2xhc3MgMSBDQSBJbmRpdmlkdWFsIFN1
YnNjcmliZXItUGVyc29uYSBOb3QgVmFsaWRhdGVkAhAMCNjQ34mqyE4nzPikVv1BMAkGBSsOAwIa
BQCgggKyMBgGCSqGSIb3DQEJAzELBgkqhkiG9w0BBwEwHAYJKoZIhvcNAQkFMQ8XDTA3MDEwNTE0
MTczN1owIwYJKoZIhvcNAQkEMRYEFAHYh+bsqTgGe4B0X2U7CAhHpfJgMGcGCSqGSIb3DQEJDzFa
MFgwCgYIKoZIhvcNAwcwDgYIKoZIhvcNAwICAgCAMA0GCCqGSIb3DQMCAgFAMAcGBSsOAwIHMA0G
CCqGSIb3DQMCAgEoMAcGBSsOAwIaMAoGCCqGSIb3DQIFMIHyBgkrBgEEAYI3EAQxgeQwgeEwgcwx
FzAVBgNVBAoTDlZlcmlTaWduLCBJbmMuMR8wHQYDVQQLExZWZXJpU2lnbiBUcnVzdCBOZXR3b3Jr
MUYwRAYDVQQLEz13d3cudmVyaXNpZ24uY29tL3JlcG9zaXRvcnkvUlBBIEluY29ycC4gQnkgUmVm
LixMSUFCLkxURChjKTk4MUgwRgYDVQQDEz9WZXJpU2lnbiBDbGFzcyAxIENBIEluZGl2aWR1YWwg
U3Vic2NyaWJlci1QZXJzb25hIE5vdCBWYWxpZGF0ZWQCEAwI2NDfiarITifM+KRW/UEwgfQGCyqG
SIb3DQEJEAILMYHkoIHhMIHMMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMWVmVy
aVNpZ24gVHJ1c3QgTmV0d29yazFGMEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0b3J5
L1JQQSBJbmNvcnAuIEJ5IFJlZi4sTElBQi5MVEQoYyk5ODFIMEYGA1UEAxM/VmVyaVNpZ24gQ2xh
c3MgMSBDQSBJbmRpdmlkdWFsIFN1YnNjcmliZXItUGVyc29uYSBOb3QgVmFsaWRhdGVkAhAMCNjQ
34mqyE4nzPikVv1BMA0GCSqGSIb3DQEBAQUABIIBAG/qji1nV8/Djg8cf/iKiJoBVQV+KGgvFx3X
PykFJECCGTQnsGKTlX96LfCWqVk4wqaF8hd8VB2dnMRj8S7htuR3RQJ7w/qxpGtm/nfq/H4QzWZ2
0hDy2A+uaLfZdyAV8TvWchOkoi0ly37SlD/iGesdFE7GbaU2WSBU6W2nl9q0oAgti6fIgDJ/wS2V
JRFSr2lqFAw9eKbgKgUlOksHEYz9zW/r5MYIHI6bPNjwJMRtquhm38x9iU2m4Pf+7LLqtTv0s5Ps
C0srdrsqru1tuFcNrkO0oRqConwmB4afsHPx4vyYCYf83pyaTBsvvdB5y35Dt/pNnykwYs/O/fMj
Od0AAAAAAAA=

------=_NextPart_000_0003_01C730D4.40855B70--


From java-user-return-25310-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 05 17:39:46 2007
Return-Path: <java-user-return-25310-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63803 invoked from network); 5 Jan 2007 17:39:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Jan 2007 17:39:45 -0000
Received: (qmail 8331 invoked by uid 500); 5 Jan 2007 17:39:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8286 invoked by uid 500); 5 Jan 2007 17:39:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8274 invoked by uid 99); 5 Jan 2007 17:39:43 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Jan 2007 09:39:43 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=UNPARSEABLE_RELAY
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [159.14.214.193] (HELO genomemail.chop.edu) (159.14.214.193)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Jan 2007 09:38:56 -0800
Received: from [159.14.214.144] ([159.14.214.144]) BY genomemail.chop.edu ([159.14.214.193])
 WITH ESMTP (4D WebSTAR V Mail (5.3.4)); Fri, 05 Jan 2007 12:38:24 -0500
Mime-Version: 1.0 (Apple Message framework v752.2)
Content-Transfer-Encoding: 7bit
Message-Id: <5D483671-7073-414A-875F-74A460C9FDDC@genome.chop.edu>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
To: java-user@lucene.apache.org
From: Ryan O'Hara <ohara@genome.chop.edu>
Subject: Memory Allocation
Date: Fri, 5 Jan 2007 12:38:20 -0500
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org

I just started using SpellChecker and I have encountered a java heap  
space exception,  which may or may not be related to using  
SpellChecker.  I was wondering if there is a way to allocate the  
amount of memory Lucene uses during a search?

Thanks,
Ryan

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25311-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 05 17:59:25 2007
Return-Path: <java-user-return-25311-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 68324 invoked from network); 5 Jan 2007 17:59:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Jan 2007 17:59:24 -0000
Received: (qmail 42390 invoked by uid 500); 5 Jan 2007 17:59:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42358 invoked by uid 500); 5 Jan 2007 17:59:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42347 invoked by uid 99); 5 Jan 2007 17:59:22 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Jan 2007 09:59:22 -0800
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of DORONC@il.ibm.com designates 195.212.29.151 as permitted sender)
Received: from [195.212.29.151] (HELO mtagate2.de.ibm.com) (195.212.29.151)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Jan 2007 09:58:40 -0800
Received: from d12nrmr1607.megacenter.de.ibm.com (d12nrmr1607.megacenter.de.ibm.com [9.149.167.49])
	by mtagate2.de.ibm.com (8.13.8/8.13.8) with ESMTP id l05Hw6co078100
	for <java-user@lucene.apache.org>; Fri, 5 Jan 2007 17:58:06 GMT
Received: from d12av02.megacenter.de.ibm.com (d12av02.megacenter.de.ibm.com [9.149.165.228])
	by d12nrmr1607.megacenter.de.ibm.com (8.13.6/8.13.6/NCO v8.1.1) with ESMTP id l05Hw5C83125416
	for <java-user@lucene.apache.org>; Fri, 5 Jan 2007 18:58:05 +0100
Received: from d12av02.megacenter.de.ibm.com (loopback [127.0.0.1])
	by d12av02.megacenter.de.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id l05Hw5MO004067
	for <java-user@lucene.apache.org>; Fri, 5 Jan 2007 18:58:05 +0100
Received: from d12mc102.megacenter.de.ibm.com (d12mc102.megacenter.de.ibm.com [9.149.167.114])
	by d12av02.megacenter.de.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id l05Hw5OG004063
	for <java-user@lucene.apache.org>; Fri, 5 Jan 2007 18:58:05 +0100
In-Reply-To: <000801c730d4$571ae990$2302a8c0@max>
Subject: Re: All readers must have same maxDoc: 16651064!=16507074
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 7.0 HF277 June 21, 2006
Message-ID: <OFF769E891.E9C3AEDB-ON8825725A.00619E15-8825725A.00628E8B@il.ibm.com>
From: Doron Cohen <DORONC@il.ibm.com>
Date: Fri, 5 Jan 2007 09:56:30 -0800
X-MIMETrack: Serialize by Router on D12MC102/12/M/IBM(Release 7.0.2HF71 | November 3, 2006) at
 05/01/2007 19:58:05
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org

Rob,

"Rob Staveley (Tom)" <rstaveley@seseit.com> wrote on 05/01/2007 06:18:10:
> I'm attempting to delete documents matching a term on a ParallelReader
and
> got the error message above, presumably while adding directories to the
> ParallelReader.

See the javadocs for ParallelReader -
http://lucene.apache.org/java/docs/api/org/apache/lucene/index/ParallelReader.html
 -
-------------------
An IndexReader which reads multiple, parallel indexes. Each index added
must have the same number of documents, but typically each contains
different fields. Each document contains the union of the fields of all
documents with the same document number. When searching, matches for a
query term are from the first index added that has the field.

This is useful, e.g., with collections that have large fields which change
rarely and small fields that change more frequently. The smaller fields may
be re-indexed in a new index and both indexes may be searched together.

Warning: It is up to you to make sure all indexes are created and modified
the same way. For example, if you add documents to one index, you need to
add the same documents in the same order to the other indexes. Failure to
do so will result in undefined behavior.
-------------------

In other words, ParallelReader operates under the assumption that you split
your index to several indexes, [**] by fields [**] , so each index has
exactly the same number of documents.

>
> I'm puzzled, because I don't need to have the same maxDoc (and numDoc) in
> index directories for a ParallelMultiSearcher, so what's the deal here?
> Should I delete serially... one index at a time?

MultiSearcher and ParallelMultiReader are different - they operate against
a set of Searchables (not a set of Readers) and aggregate results from
those searchers. They operate under the assumption that you split your
indexed data [**] by documents [**] , so that there are distinct documents
in each index.

Hope this helps,
Doron


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25312-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 05 18:36:37 2007
Return-Path: <java-user-return-25312-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81121 invoked from network); 5 Jan 2007 18:36:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Jan 2007 18:36:36 -0000
Received: (qmail 154 invoked by uid 500); 5 Jan 2007 18:36:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 99802 invoked by uid 500); 5 Jan 2007 18:36:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 99791 invoked by uid 99); 5 Jan 2007 18:36:35 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Jan 2007 10:36:35 -0800
X-ASF-Spam-Status: No, hits=0.3 required=10.0
	tests=MAILTO_TO_SPAM_ADDR,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of sharrissf@gmail.com designates 64.233.184.233 as permitted sender)
Received: from [64.233.184.233] (HELO wr-out-0506.google.com) (64.233.184.233)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Jan 2007 10:36:26 -0800
Received: by wr-out-0506.google.com with SMTP id i28so1044535wra
        for <java-user@lucene.apache.org>; Fri, 05 Jan 2007 10:36:05 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=OOYghoL01qXSykThiwe+nEj2yS9kJ6UmmmrANfBnjyEk8DzK/Nedc4Oe2wpWPIKXOOJTgWU+kFvmjJd2kSLjRWUkUvnA53TGqh+IIXIpBKxKXPs0MfU+UNXeoN4obwMQM/NxppLhZ6rgkJU/3n2Imyb9zGK8RhhQOVX2hiNBsCY=
Received: by 10.78.39.16 with SMTP id m16mr3163330hum.1168022163664;
        Fri, 05 Jan 2007 10:36:03 -0800 (PST)
Received: by 10.78.148.11 with HTTP; Fri, 5 Jan 2007 10:36:03 -0800 (PST)
Message-ID: <8fcbd19a0701051036s32a6a5f9tb62ca28ed42ebff4@mail.gmail.com>
Date: Fri, 5 Jan 2007 10:36:03 -0800
From: "Steve Harris" <sharrissf@gmail.com>
To: java-user@lucene.apache.org
Subject: RE: Clustering Lucene with 40 Servers
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org

I don't know if terracotta is the right solution for you or not but...

--> Their examples talk of a 4 node cluster. This is way too small for my needs.

No 4 node limit. It was just a sample probably.

Cheers,
Steve

-----Original Message-----
From: Biggy [mailto:biggy97@web.de]
Sent: Wednesday, December 27, 2006 7:57 AM
To: java-user@lucene.apache.org
Subject: Clustering Lucene with 40 Servers


I'm currently investigating the best ways of clustering Lucene.
I've heard of both Solr, Terracotta but do not know how well they scale.
Their examples talk of a 4 node cluster. This is way too small for my needs.

I have 30x JVMs each handling 3 requests/sec and each having their own
Lucene index. The index changes are propagated to the cluster members using
JGroups messages. This solution has more than reached its limit as JGroups
has become unstable and a source of many JVMs crashes. Based on current
traffic trends I anticipate needing to upgrade to 40x + JVMS very soon.

Can anybody suggest a way to effectivily cluster / replicate document
changes ?

P.S.:
JMS is not a possible solution as this was the prior JGroups solution. We
had too many memory problems/queue full etc crashing the servers thereafter.

-- 
View this message in context:
http://www.nabble.com/Clustering-Lucene-with-40-Servers-tf2886546.html#a8064135
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25313-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 05 20:17:10 2007
Return-Path: <java-user-return-25313-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 13096 invoked from network); 5 Jan 2007 20:17:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Jan 2007 20:17:09 -0000
Received: (qmail 70837 invoked by uid 500); 5 Jan 2007 20:17:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70801 invoked by uid 500); 5 Jan 2007 20:17:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70790 invoked by uid 99); 5 Jan 2007 20:17:09 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Jan 2007 12:17:09 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [209.97.205.201] (HELO mail.seseit.com) (209.97.205.201)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Jan 2007 12:16:59 -0800
Received: by mail.seseit.com (Postfix, from userid 65534)
	id 093FE18A38; Fri,  5 Jan 2007 20:16:30 +0000 (GMT)
Received: from [192.168.2.207] (cpc3-lewi6-0-0-cust798.bmly.cable.ntl.com [82.27.203.31])
	by mail.seseit.com (Postfix) with ESMTP id 629D818A38
	for <java-user@lucene.apache.org>; Fri,  5 Jan 2007 20:16:18 +0000 (GMT)
Message-ID: <459EB20D.4030009@seseit.com>
Date: Fri, 05 Jan 2007 20:16:13 +0000
From: "Rob Staveley (Tom)" <rstaveley@seseit.com>
User-Agent: Thunderbird 1.5.0.9 (Macintosh/20061207)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: All readers must have same maxDoc: 16651064!=16507074
References: <OFF769E891.E9C3AEDB-ON8825725A.00619E15-8825725A.00628E8B@il.ibm.com>
In-Reply-To: <OFF769E891.E9C3AEDB-ON8825725A.00619E15-8825725A.00628E8B@il.ibm.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-seseit-ltd-MailScanner: Found to be clean, Found to be clean
X-seseit-ltd-MailScanner-SpamScore: s, s
X-Spam-Checker-Version: SpamAssassin 3.0.3 (2005-04-27) on mini.seseit.net
X-Spam-Level: X
X-seseit-ltd-MailScanner-From: rstaveley@seseit.com
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=1.1 required=5.0 tests=SUBJ_HAS_UNIQ_ID autolearn=no 
	version=3.0.3

Oh I get it now. That was a great explanation. Thanks Doron.

Doron Cohen wrote:
> Rob,
>
> "Rob Staveley (Tom)" <rstaveley@seseit.com> wrote on 05/01/2007 06:18:10:
>   
>> I'm attempting to delete documents matching a term on a ParallelReader
>>     
> and
>   
>> got the error message above, presumably while adding directories to the
>> ParallelReader.
>>     
>
> See the javadocs for ParallelReader -
> http://lucene.apache.org/java/docs/api/org/apache/lucene/index/ParallelReader.html
>  -
> -------------------
> An IndexReader which reads multiple, parallel indexes. Each index added
> must have the same number of documents, but typically each contains
> different fields. Each document contains the union of the fields of all
> documents with the same document number. When searching, matches for a
> query term are from the first index added that has the field.
>
> This is useful, e.g., with collections that have large fields which change
> rarely and small fields that change more frequently. The smaller fields may
> be re-indexed in a new index and both indexes may be searched together.
>
> Warning: It is up to you to make sure all indexes are created and modified
> the same way. For example, if you add documents to one index, you need to
> add the same documents in the same order to the other indexes. Failure to
> do so will result in undefined behavior.
> -------------------
>
> In other words, ParallelReader operates under the assumption that you split
> your index to several indexes, [**] by fields [**] , so each index has
> exactly the same number of documents.
>
>   
>> I'm puzzled, because I don't need to have the same maxDoc (and numDoc) in
>> index directories for a ParallelMultiSearcher, so what's the deal here?
>> Should I delete serially... one index at a time?
>>     
>
> MultiSearcher and ParallelMultiReader are different - they operate against
> a set of Searchables (not a set of Readers) and aggregate results from
> those searchers. They operate under the assumption that you split your
> indexed data [**] by documents [**] , so that there are distinct documents
> in each index.
>
> Hope this helps,
> Doron
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>   


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25314-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 05 20:41:40 2007
Return-Path: <java-user-return-25314-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 28265 invoked from network); 5 Jan 2007 20:41:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Jan 2007 20:41:40 -0000
Received: (qmail 12535 invoked by uid 500); 5 Jan 2007 20:41:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12504 invoked by uid 500); 5 Jan 2007 20:41:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12486 invoked by uid 99); 5 Jan 2007 20:41:18 -0000
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of erickerickson@gmail.com designates 66.249.92.170 as permitted sender)
Received: from [66.249.92.170] (HELO ug-out-1314.google.com) (66.249.92.170)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Jan 2007 12:41:05 -0800
Received: by ug-out-1314.google.com with SMTP id k40so5792419ugc
        for <java-user@lucene.apache.org>; Fri, 05 Jan 2007 12:39:12 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=Fh9mM21iHnmZr/oycBS3PN0PhJ3VrDHDOtKgdDWusSxcwuSr8+FvKrgVbPloY3T2mBKQcaYNudU8Ej5Q/PVdC3alzG40eLuffv44WcWiYMhuQjWMTSCrFj8UrxHf/dRlgq2FDNRX0KXR0Ui7ufzHU3hCDb1JhwqdgA4uKNIAtKc=
Received: by 10.82.114.3 with SMTP id m3mr2246694buc.1168029552770;
        Fri, 05 Jan 2007 12:39:12 -0800 (PST)
Received: by 10.82.162.9 with HTTP; Fri, 5 Jan 2007 12:39:12 -0800 (PST)
Message-ID: <359a92830701051239t328d7f35h2d45602245d87c36@mail.gmail.com>
Date: Fri, 5 Jan 2007 15:39:12 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Memory Allocation
In-Reply-To: <5D483671-7073-414A-875F-74A460C9FDDC@genome.chop.edu>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_30397_16411532.1168029552590"
References: <5D483671-7073-414A-875F-74A460C9FDDC@genome.chop.edu>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_30397_16411532.1168029552590
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Only by specifying the memory allowed for the JVM as far as I know (-Xmx).

Erick

On 1/5/07, Ryan O'Hara <ohara@genome.chop.edu> wrote:
>
> I just started using SpellChecker and I have encountered a java heap
> space exception,  which may or may not be related to using
> SpellChecker.  I was wondering if there is a way to allocate the
> amount of memory Lucene uses during a search?
>
> Thanks,
> Ryan
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_30397_16411532.1168029552590--

From java-user-return-25315-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jan 06 00:06:06 2007
Return-Path: <java-user-return-25315-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84392 invoked from network); 6 Jan 2007 00:06:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Jan 2007 00:06:05 -0000
Received: (qmail 91481 invoked by uid 500); 6 Jan 2007 00:06:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91442 invoked by uid 500); 6 Jan 2007 00:06:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 91430 invoked by uid 99); 6 Jan 2007 00:06:06 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Jan 2007 16:06:06 -0800
X-ASF-Spam-Status: No, hits=2.9 required=10.0
	tests=HTML_10_20,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of ekemokai@gmail.com designates 64.233.162.238 as permitted sender)
Received: from [64.233.162.238] (HELO nz-out-0506.google.com) (64.233.162.238)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Jan 2007 16:05:57 -0800
Received: by nz-out-0506.google.com with SMTP id n1so3439648nzf
        for <java-user@lucene.apache.org>; Fri, 05 Jan 2007 16:05:36 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=WZXi88YvHUAe3kN6scGGLwru8k1THHviKQ5rMXXqcREPtH/c2Az//Ujcx+1CCwslvsnKe6isuUe3/VZyoZ8pwfLh6hCwB/MdE8HSrt/vo9M6Zu/F7R0tPNUhD1+CbthlJR2DjeJ+68N2kSNLyGMWpUi7TN0wo5DzziaP7z+bLXE=
Received: by 10.65.180.7 with SMTP id h7mr32557741qbp.1168041936843;
        Fri, 05 Jan 2007 16:05:36 -0800 (PST)
Received: by 10.65.186.8 with HTTP; Fri, 5 Jan 2007 16:05:36 -0800 (PST)
Message-ID: <dac893430701051605k1d6dcb29u694748fc70299237@mail.gmail.com>
Date: Fri, 5 Jan 2007 19:05:36 -0500
From: "EDMOND KEMOKAI" <ekemokai@gmail.com>
To: "Tomcat Users List" <users@tomcat.apache.org>, java-user@lucene.apache.org
Subject: Standards Complaint Browser Campaign
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_19669_10615465.1168041936820"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_19669_10615465.1168041936820
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi Guys

Sorry about the off-topic posting but I thought the mailing list consist of
the audience for this campaign. A campaign has been launch to try to
encourage web developers and webmasters from using IE hacks to obscure the
browsers shortcomings. Please read the appeal from the  address below and
pass the message along to other mailing lists you may be a subscriber to, if
you wish to help.

http://www.nomoreiehacks.org/


-- 
"talk trash and carry a small stick."
PAUL KRUGMAN (NYT)

------=_Part_19669_10615465.1168041936820--

From java-user-return-25316-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jan 06 03:50:15 2007
Return-Path: <java-user-return-25316-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 23064 invoked from network); 6 Jan 2007 03:50:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Jan 2007 03:50:14 -0000
Received: (qmail 94486 invoked by uid 500); 6 Jan 2007 03:50:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94454 invoked by uid 500); 6 Jan 2007 03:50:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94438 invoked by uid 99); 6 Jan 2007 03:50:14 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Jan 2007 19:50:14 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Jan 2007 19:50:02 -0800
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1H32Yw-0004Vt-8Y
	for java-user@lucene.apache.org; Fri, 05 Jan 2007 19:49:42 -0800
Message-ID: <8190479.post@talk.nabble.com>
Date: Fri, 5 Jan 2007 19:49:42 -0800 (PST)
From: Aslam Bari <iamaslamok@yahoo.co.in>
To: java-user@lucene.apache.org
Subject: Re: Is DWF extractor for Lucene exists?
In-Reply-To: <DFE1792D-BFEB-4293-AF22-7357C7438B52@apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: iamaslamok@yahoo.co.in
References: <8176977.post@talk.nabble.com> <DFE1792D-BFEB-4293-AF22-7357C7438B52@apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org


Hi Grant,
Thanks for reply,
Can you tell me how to change indexer to store custom fields so that i can
store two new fields like "Main File Name" and "Real File Name". so i can
store Zip File name as Main file and Actual file where data found in Real
File.

Thanks...

Grant Ingersoll-6 wrote:
> 
> Lucene works with text; we don't provide any custom extractors.  You  
> will need to parse DWF (I'm not even sure what a DWF file is) and  
> construct the Document/Fields that you want based on your content.
> 
> -Grant
> 
> On Jan 5, 2007, at 7:09 AM, Aslam Bari wrote:
> 
>>
>> Dear All,
>> I need to index and search DWF files. Is it possible in Lucene. If  
>> yes, Then
>> which extractor should i use to index the DWF files.
>>
>> Thanks...
>> -- 
>> View this message in context: http://www.nabble.com/Is-DWF- 
>> extractor-for-Lucene-exists--tf2925205.html#a8176977
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
> 
> --------------------------
> Grant Ingersoll
> Center for Natural Language Processing
> http://www.cnlp.org
> 
> Read the Lucene Java FAQ at http://wiki.apache.org/jakarta-lucene/ 
> LuceneFAQ
> 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/Is-DWF-extractor-for-Lucene-exists--tf2925205.html#a8190479
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25317-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jan 06 03:51:04 2007
Return-Path: <java-user-return-25317-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 23297 invoked from network); 6 Jan 2007 03:51:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Jan 2007 03:51:02 -0000
Received: (qmail 96615 invoked by uid 500); 6 Jan 2007 03:51:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96549 invoked by uid 500); 6 Jan 2007 03:51:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96314 invoked by uid 99); 6 Jan 2007 03:51:01 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Jan 2007 19:51:01 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Jan 2007 19:50:51 -0800
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1H32Zi-0004fc-VA
	for java-user@lucene.apache.org; Fri, 05 Jan 2007 19:50:30 -0800
Message-ID: <8190488.post@talk.nabble.com>
Date: Fri, 5 Jan 2007 19:50:30 -0800 (PST)
From: Aslam Bari <iamaslamok@yahoo.co.in>
To: java-user@lucene.apache.org
Subject: Re: Lucene search returns Zip file Name
In-Reply-To: <359a92830701050530w467cca2doc1121051ef8c12ab@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: iamaslamok@yahoo.co.in
References: <8176954.post@talk.nabble.com> <359a92830701050530w467cca2doc1121051ef8c12ab@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Hi Erick,
Thanks for reply,
Can you tell me how to change indexer to store custom fields so that i can
store two new fields like "Main File Name" and "Real File Name". so i can
store Zip File name as Main file and Actual file where data found in Real
File.

Thanks...


Erick Erickson wrote:
> 
> You only get things out of an index that you put in there. At index time,
> you need to associate file names with content. Something like indexing the
> text of each file in the zip file as a separate lucene document, perhaps
> with the associated zip file name and the real file name.
> 
> Best
> Erick
> 
> 
> On 1/5/07, Aslam Bari <iamaslamok@yahoo.co.in> wrote:
>>
>>
>> Dear all,
>> I m using lucene to index zip files. Suppose a zip file contains 4 files.
>> All files get indexed well with uri of Zip file means when i search for
>> any
>> content the result comes and the resutl file name is zip file, but i need
>> to
>> know the real file name in which the data found. How to get that file
>> name???
>> Thanks....
>> --
>> View this message in context:
>> http://www.nabble.com/Lucene-search-returns-Zip-file-Name-tf2925197.html#a8176954
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
> 
> 

-- 
View this message in context: http://www.nabble.com/Lucene-search-returns-Zip-file-Name-tf2925197.html#a8190488
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25318-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jan 06 15:21:34 2007
Return-Path: <java-user-return-25318-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67847 invoked from network); 6 Jan 2007 15:21:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Jan 2007 15:21:33 -0000
Received: (qmail 92829 invoked by uid 500); 6 Jan 2007 15:21:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92788 invoked by uid 500); 6 Jan 2007 15:21:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92777 invoked by uid 99); 6 Jan 2007 15:21:33 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 06 Jan 2007 07:21:33 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 64.233.182.187 as permitted sender)
Received: from [64.233.182.187] (HELO nf-out-0910.google.com) (64.233.182.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 06 Jan 2007 07:21:24 -0800
Received: by nf-out-0910.google.com with SMTP id n28so7447047nfc
        for <java-user@lucene.apache.org>; Sat, 06 Jan 2007 07:21:03 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=YY67Q1/4w7ldCBhO639kioQfBxIDyrOuct25nQn9XmiQ5olM3HcbLiMUBKYcbtJ3kj+wOjGOJppRsTuKeTfgomZyGYTgP9fpoS5GbL6KaUrS0DlwE8VLd2Z4DMi2ukaQ8/RqgGuNyhisvksAu80kMFKk6TFILWAWymDs2vBYncQ=
Received: by 10.82.138.6 with SMTP id l6mr2351435bud.1168096863077;
        Sat, 06 Jan 2007 07:21:03 -0800 (PST)
Received: by 10.82.162.9 with HTTP; Sat, 6 Jan 2007 07:21:03 -0800 (PST)
Message-ID: <359a92830701060721h30ae9a0ct7015fe9ccd8ef917@mail.gmail.com>
Date: Sat, 6 Jan 2007 10:21:03 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene search returns Zip file Name
In-Reply-To: <8190488.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_38711_21130025.1168096863027"
References: <8176954.post@talk.nabble.com>
	 <359a92830701050530w467cca2doc1121051ef8c12ab@mail.gmail.com>
	 <8190488.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_38711_21130025.1168096863027
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

This is a confusing question. You have to create the index in the first
place. You can't just give the zip file to Lucene and expect it to do all
your work for you.

Somewhere, you have to have code like

Document doc = new Document();
doc.add(new Field("fieldname1", "stuff to store", Field.Store.***,
Field.Index.***));
doc.add(new Field("fieldname2", "more stuff to store", Field.Store.***,
Field.Index.***));
.
.
.
writer.add(doc);

the stuff you store in, say, fieldname1 is whatever you want. In this case,
say the real file name.
the stuff you store in, say, fieldname2 could be the zip file name.
the stuff you store in, say, fieldname3 could be the text of the file you
got from the zip file corresponding to fieldname1.

If this is conceptually unclear, I strongly recommend that you get a copy of
"Lucene in Action". It's has many examples of how to use lucene. Note that
it is written to the 1.4 code base, so there are some minor differences
between it and the latest 2.0 code.

Lucene isn't magic. It's an indexing and searching toolbox with an API that
you have to program with.

Best
Erick

On 1/5/07, Aslam Bari <iamaslamok@yahoo.co.in> wrote:
>
>
> Hi Erick,
> Thanks for reply,
> Can you tell me how to change indexer to store custom fields so that i can
> store two new fields like "Main File Name" and "Real File Name". so i can
> store Zip File name as Main file and Actual file where data found in Real
> File.
>
> Thanks...
>
>
> Erick Erickson wrote:
> >
> > You only get things out of an index that you put in there. At index
> time,
> > you need to associate file names with content. Something like indexing
> the
> > text of each file in the zip file as a separate lucene document, perhaps
> > with the associated zip file name and the real file name.
> >
> > Best
> > Erick
> >
> >
> > On 1/5/07, Aslam Bari <iamaslamok@yahoo.co.in> wrote:
> >>
> >>
> >> Dear all,
> >> I m using lucene to index zip files. Suppose a zip file contains 4
> files.
> >> All files get indexed well with uri of Zip file means when i search for
> >> any
> >> content the result comes and the resutl file name is zip file, but i
> need
> >> to
> >> know the real file name in which the data found. How to get that file
> >> name???
> >> Thanks....
> >> --
> >> View this message in context:
> >>
> http://www.nabble.com/Lucene-search-returns-Zip-file-Name-tf2925197.html#a8176954
> >> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
> >>
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >
> >
>
> --
> View this message in context:
> http://www.nabble.com/Lucene-search-returns-Zip-file-Name-tf2925197.html#a8190488
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_38711_21130025.1168096863027--

From java-user-return-25319-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jan 06 19:52:56 2007
Return-Path: <java-user-return-25319-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 16327 invoked from network); 6 Jan 2007 19:52:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Jan 2007 19:52:56 -0000
Received: (qmail 92102 invoked by uid 500); 6 Jan 2007 19:52:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91756 invoked by uid 500); 6 Jan 2007 19:52:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 91744 invoked by uid 99); 6 Jan 2007 19:52:56 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 06 Jan 2007 11:52:55 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [137.108.246.32] (HELO venus.open.ac.uk) (137.108.246.32)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 06 Jan 2007 11:52:45 -0800
Received: from sputnik.open.ac.uk ([137.108.170.76])
	by venus.open.ac.uk with esmtp (Exim 4.62)
	(envelope-from <J.Zhu@open.ac.uk>)
	id 1H3HaZ-0002QH-JY
	for java-user@lucene.apache.org; Sat, 06 Jan 2007 19:52:23 +0000
Received: from EPPING-EVS1.open.ac.uk ([137.108.170.246]) by sputnik.open.ac.uk with Microsoft SMTPSVC(5.0.2195.6713);
	 Sat, 6 Jan 2007 19:52:23 +0000
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C731CC.2F0FF66B"
Subject: Similarity for Span and Boolean query
Date: Sat, 6 Jan 2007 19:52:23 -0000
Message-ID: <E0FEA5DF00E59E409F90C854A1B45BAA0147064F@EPPING-EVS1.open.ac.uk>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Similarity for Span and Boolean query
thread-index: AccxzCv2u2qG6L0OSB+GYu0ltcQd5g==
From: "J.Zhu" <J.Zhu@open.ac.uk>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 06 Jan 2007 19:52:23.0551 (UTC) FILETIME=[2F0848F0:01C731CC]
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01C731CC.2F0FF66B
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: quoted-printable

Hi, all,
=20
The equation for similarity is given on this web page:
http://lucene.apache.org/java/docs/api/org/apache/lucene/search/Similari
ty.html
=20
I would like to know what are the equations for similarity if the query
is a span or boolean query.
=20
Jianhan

------_=_NextPart_001_01C731CC.2F0FF66B--

From java-user-return-25320-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jan 07 18:56:34 2007
Return-Path: <java-user-return-25320-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76013 invoked from network); 7 Jan 2007 18:56:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Jan 2007 18:56:33 -0000
Received: (qmail 72687 invoked by uid 500); 7 Jan 2007 18:56:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72648 invoked by uid 500); 7 Jan 2007 18:56:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72637 invoked by uid 99); 7 Jan 2007 18:56:33 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 07 Jan 2007 10:56:33 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [17.250.248.172] (HELO smtpout.mac.com) (17.250.248.172)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 07 Jan 2007 10:56:23 -0800
Received: from mac.com (smtpin07-en2 [10.13.10.152])
	by smtpout.mac.com (Xserve/8.12.11/smtpout02/MantshX 4.0) with ESMTP id l07ItwJf023314
	for <java-user@lucene.apache.org>; Sun, 7 Jan 2007 10:55:59 -0800 (PST)
Received: from [127.0.0.1] (216-12-26-136.va.mvl.ntelos.net [216.12.26.136])
	(authenticated bits=0)
	by mac.com (Xserve/smtpin07/MantshX 4.0) with ESMTP id l07Ittwh014063
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <java-user@lucene.apache.org>; Sun, 7 Jan 2007 10:55:57 -0800 (PST)
Message-ID: <45A1423D.3060503@mac.com>
Date: Sun, 07 Jan 2007 13:55:57 -0500
From: "Michael J. Prichard" <michael_prichard@mac.com>
User-Agent: Mozilla Thunderbird 1.0.2 (Windows/20050317)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: When to use HitCollector?
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Brightmail-Tracker: AAAAAA==
X-Brightmail-scanned: yes
X-Virus-Checked: Checked by ClamAV on apache.org

I have an index which has email and their attachments indexed.  This is 
ok but the issue I am having it when I am trying to filter the 
searches.  For example I can search the content of the email and the 
document (i.e. the attachment) and return the right results.  Basically, 
if it is a document I check the DB to see its parent and determine the 
email to display.  The problem comes in when I try to use to, from 
and/or cc in my searches.  It will only return emails since we did not 
index those fields along with the attachments.  Ideally we would reindex 
and add those but I need a temporary fix until we can do that.  SO...I 
tried a few various things including a basic search and then filtering 
on my own but that seriously slowed our interface since I had to check 
each result, etc.  SO...I broke the query into two...search the docs and 
emails seperately and only check the documents on return.  That is ok.

I was wondering...would HitCollector be something i should use.  
Basically have the searcher check documents to make sure they are ok to 
go (i.e. to, from. etc is correct)? 

Make sense?

Thanks!
Michael

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25321-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jan 07 22:50:43 2007
Return-Path: <java-user-return-25321-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 55540 invoked from network); 7 Jan 2007 22:50:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Jan 2007 22:50:42 -0000
Received: (qmail 86103 invoked by uid 500); 7 Jan 2007 22:50:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85991 invoked by uid 500); 7 Jan 2007 22:50:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85963 invoked by uid 99); 7 Jan 2007 22:50:30 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 07 Jan 2007 14:50:30 -0800
X-ASF-Spam-Status: No, hits=2.9 required=10.0
	tests=HTML_10_20,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 64.233.182.189 as permitted sender)
Received: from [64.233.182.189] (HELO nf-out-0910.google.com) (64.233.182.189)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 07 Jan 2007 14:49:43 -0800
Received: by nf-out-0910.google.com with SMTP id a27so242214nfc
        for <java-user@lucene.apache.org>; Sun, 07 Jan 2007 14:49:12 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=o1RRh8571vNQ2Ueywn+Pb3XZ0Z3izjn0ljIhkNaMJZW1bsDYL9WtWG1SL68RqCPUdnFNF+XJpE4FxZyoUYGWwKwiJQ4oejKl+5u5EkHP1kCebUuoZy7cuuWmxaSHO4WymQrbwyNGMv1tiSppnT9u8hEMIZ1Q1vZmlYQChiJu0Yc=
Received: by 10.82.183.19 with SMTP id g19mr2221869buf.1168210151861;
        Sun, 07 Jan 2007 14:49:11 -0800 (PST)
Received: by 10.82.162.9 with HTTP; Sun, 7 Jan 2007 14:49:11 -0800 (PST)
Message-ID: <359a92830701071449h6fbbee7dt3c391aace79917a@mail.gmail.com>
Date: Sun, 7 Jan 2007 17:49:11 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: When to use HitCollector?
In-Reply-To: <45A1423D.3060503@mac.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_51234_24251940.1168210151510"
References: <45A1423D.3060503@mac.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_51234_24251940.1168210151510
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I'm a little fuzzy on the structure of your index, but here's a stab....

First, let me see if I understand your problem...
For an e-mail, you have a body and an attachment that are indexed as
separate lucene documents.
For the body, you include from, to, cc (in other words, meta-data)
For the attachment, you do NOT include the meta-data.
For both the body and the attachment, you have an ID for the parent e-mail
that is the same for a body and attachment if they are from the same e-mail
(otherwise I don't see how you "determine the email to display" for an
attachment).

You've got a couple of problems here. Anything you do to break up the
clauses into separate queries will do bad things for your relevance scoring.
That is, one query on the body and one on the attachment will give you two
lists that you'll then have to manually reconcile if relevancy matters.

Depending upon how many emails and attachments you get hits for, you could
do something like
1> search for the body elements with the to/from/cc. Use the return (perhaps
with a HitCollector (definitely NOT a Hits object)) to assemble a clause
like ID=52343 or ID=985 or ID=8910 .... and the re-submit some query like

"text contains "search data" and (ID=52343 or ID=985 or ID=8910 ....)"

BEWARE that, depending upon how many e-mails you get, you'll run afoul of
TooManyClauses exceptions. The default is 1,024 but you can make it as big
as memory/time allows. And, as you say, this is temporary until you
reconstruct your index.

If this is totally irrelevant, perhaps you could add some more detail....

Best
Erick


On 1/7/07, Michael J. Prichard <michael_prichard@mac.com> wrote:
>
> I have an index which has email and their attachments indexed.  This is
> ok but the issue I am having it when I am trying to filter the
> searches.  For example I can search the content of the email and the
> document (i.e. the attachment) and return the right results.  Basically,
> if it is a document I check the DB to see its parent and determine the
> email to display.  The problem comes in when I try to use to, from
> and/or cc in my searches.  It will only return emails since we did not
> index those fields along with the attachments.  Ideally we would reindex
> and add those but I need a temporary fix until we can do that.  SO...I
> tried a few various things including a basic search and then filtering
> on my own but that seriously slowed our interface since I had to check
> each result, etc.  SO...I broke the query into two...search the docs and
> emails seperately and only check the documents on return.  That is ok.
>
> I was wondering...would HitCollector be something i should use.
> Basically have the searcher check documents to make sure they are ok to
> go (i.e. to, from. etc is correct)?
>
> Make sense?
>
> Thanks!
> Michael
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_51234_24251940.1168210151510--

From java-user-return-25322-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jan 07 23:19:17 2007
Return-Path: <java-user-return-25322-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58774 invoked from network); 7 Jan 2007 23:19:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Jan 2007 23:19:17 -0000
Received: (qmail 8496 invoked by uid 500); 7 Jan 2007 23:19:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8463 invoked by uid 500); 7 Jan 2007 23:19:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8452 invoked by uid 99); 7 Jan 2007 23:19:18 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 07 Jan 2007 15:19:18 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [17.250.248.178] (HELO smtpout.mac.com) (17.250.248.178)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 07 Jan 2007 15:19:08 -0800
Received: from mac.com (smtpin07-en2 [10.13.10.152])
	by smtpout.mac.com (Xserve/8.12.11/smtpout08/MantshX 4.0) with ESMTP id l07NIj6M023410
	for <java-user@lucene.apache.org>; Sun, 7 Jan 2007 15:18:45 -0800 (PST)
Received: from [127.0.0.1] (216-12-26-136.va.mvl.ntelos.net [216.12.26.136])
	(authenticated bits=0)
	by mac.com (Xserve/smtpin07/MantshX 4.0) with ESMTP id l07NIfPw029182
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <java-user@lucene.apache.org>; Sun, 7 Jan 2007 15:18:43 -0800 (PST)
Message-ID: <45A17FD5.2080102@mac.com>
Date: Sun, 07 Jan 2007 18:18:45 -0500
From: "Michael J. Prichard" <michael_prichard@mac.com>
User-Agent: Mozilla Thunderbird 1.0.2 (Windows/20050317)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: When to use HitCollector?
References: <45A1423D.3060503@mac.com> <359a92830701071449h6fbbee7dt3c391aace79917a@mail.gmail.com>
In-Reply-To: <359a92830701071449h6fbbee7dt3c391aace79917a@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Brightmail-Tracker: AAAAAA==
X-Brightmail-scanned: yes
X-Virus-Checked: Checked by ClamAV on apache.org

Hey Erick (and List).

Yeah you have it pretty correct.  I am totally kicking myself in the ass 
because I wrote all the indexing stuff!  Ugh...one of our indexes is 
about 8GB so it will take a while to rebuild. I figure I can put a 
temporary fix out and then refactor the index with the right info and 
make it more efficient.

I basically wrote the logic to search email with a FilteredQuery so it 
can remove what I don't want and then a seperate document query.  This 
is all in a BooleanQuery.   I then wrote my own code to parse through 
the hits.  It is not the best thing in the world but it seems to work ok.

I appreciate your help!

Thanks,
-Michael

Erick Erickson wrote:

> I'm a little fuzzy on the structure of your index, but here's a stab....
>
> First, let me see if I understand your problem...
> For an e-mail, you have a body and an attachment that are indexed as
> separate lucene documents.
> For the body, you include from, to, cc (in other words, meta-data)
> For the attachment, you do NOT include the meta-data.
> For both the body and the attachment, you have an ID for the parent 
> e-mail
> that is the same for a body and attachment if they are from the same 
> e-mail
> (otherwise I don't see how you "determine the email to display" for an
> attachment).
>
> You've got a couple of problems here. Anything you do to break up the
> clauses into separate queries will do bad things for your relevance 
> scoring.
> That is, one query on the body and one on the attachment will give you 
> two
> lists that you'll then have to manually reconcile if relevancy matters.
>
> Depending upon how many emails and attachments you get hits for, you 
> could
> do something like
> 1> search for the body elements with the to/from/cc. Use the return 
> (perhaps
> with a HitCollector (definitely NOT a Hits object)) to assemble a clause
> like ID=52343 or ID=985 or ID=8910 .... and the re-submit some query like
>
> "text contains "search data" and (ID=52343 or ID=985 or ID=8910 ....)"
>
> BEWARE that, depending upon how many e-mails you get, you'll run afoul of
> TooManyClauses exceptions. The default is 1,024 but you can make it as 
> big
> as memory/time allows. And, as you say, this is temporary until you
> reconstruct your index.
>
> If this is totally irrelevant, perhaps you could add some more detail....
>
> Best
> Erick
>
>
> On 1/7/07, Michael J. Prichard <michael_prichard@mac.com> wrote:
>
>>
>> I have an index which has email and their attachments indexed.  This is
>> ok but the issue I am having it when I am trying to filter the
>> searches.  For example I can search the content of the email and the
>> document (i.e. the attachment) and return the right results.  Basically,
>> if it is a document I check the DB to see its parent and determine the
>> email to display.  The problem comes in when I try to use to, from
>> and/or cc in my searches.  It will only return emails since we did not
>> index those fields along with the attachments.  Ideally we would reindex
>> and add those but I need a temporary fix until we can do that.  SO...I
>> tried a few various things including a basic search and then filtering
>> on my own but that seriously slowed our interface since I had to check
>> each result, etc.  SO...I broke the query into two...search the docs and
>> emails seperately and only check the documents on return.  That is ok.
>>
>> I was wondering...would HitCollector be something i should use.
>> Basically have the searcher check documents to make sure they are ok to
>> go (i.e. to, from. etc is correct)?
>>
>> Make sense?
>>
>> Thanks!
>> Michael
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25323-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 08 02:22:40 2007
Return-Path: <java-user-return-25323-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4718 invoked from network); 8 Jan 2007 02:22:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Jan 2007 02:22:39 -0000
Received: (qmail 41255 invoked by uid 500); 8 Jan 2007 02:22:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40420 invoked by uid 500); 8 Jan 2007 02:22:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40409 invoked by uid 99); 8 Jan 2007 02:22:37 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 07 Jan 2007 18:22:37 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 64.233.182.190 as permitted sender)
Received: from [64.233.182.190] (HELO nf-out-0910.google.com) (64.233.182.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 07 Jan 2007 18:22:26 -0800
Received: by nf-out-0910.google.com with SMTP id a27so289311nfc
        for <java-user@lucene.apache.org>; Sun, 07 Jan 2007 18:22:05 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=QaHprTeJuPpDFNaruJ1MHhlKcE15lTnw5PnUurAD02k2vjcYqWo0dpbX0gRpp3NrXH8Wuc4DKxDph+Ct35cZQpINrnjR/h8SsbHXSyadEJw3DEU6Bmh85aJAA3iKaajp0XVEgee+RC+bxgSt/PkNJNisWUthIgOmieMnXpC64BY=
Received: by 10.82.139.17 with SMTP id m17mr2530757bud.1168222925332;
        Sun, 07 Jan 2007 18:22:05 -0800 (PST)
Received: by 10.82.162.9 with HTTP; Sun, 7 Jan 2007 18:22:04 -0800 (PST)
Message-ID: <359a92830701071822u2d118d50s9d03ace3e763cf08@mail.gmail.com>
Date: Sun, 7 Jan 2007 21:22:04 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: When to use HitCollector?
In-Reply-To: <45A17FD5.2080102@mac.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_53018_12838774.1168222924878"
References: <45A1423D.3060503@mac.com>
	 <359a92830701071449h6fbbee7dt3c391aace79917a@mail.gmail.com>
	 <45A17FD5.2080102@mac.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_53018_12838774.1168222924878
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I've had to struggle with the reflex from RDBMS days that make me want to
normalize data, which sounds like what tripped you up.

It's just plain WRONG to repeat the data and eat up space <G>. Sound
familiar? Except, of course, it's not wrong in a search application. At
least not necessarily...

Good luck. If you can get away with it, your might have a decent chance of
getting the index rebuilt in about the same time you could write more
efficient logic for your current system.

Best
Erick

On 1/7/07, Michael J. Prichard <michael_prichard@mac.com> wrote:
>
> Hey Erick (and List).
>
> Yeah you have it pretty correct.  I am totally kicking myself in the ass
> because I wrote all the indexing stuff!  Ugh...one of our indexes is
> about 8GB so it will take a while to rebuild. I figure I can put a
> temporary fix out and then refactor the index with the right info and
> make it more efficient.
>
> I basically wrote the logic to search email with a FilteredQuery so it
> can remove what I don't want and then a seperate document query.  This
> is all in a BooleanQuery.   I then wrote my own code to parse through
> the hits.  It is not the best thing in the world but it seems to work ok.
>
> I appreciate your help!
>
> Thanks,
> -Michael
>
> Erick Erickson wrote:
>
> > I'm a little fuzzy on the structure of your index, but here's a stab....
> >
> > First, let me see if I understand your problem...
> > For an e-mail, you have a body and an attachment that are indexed as
> > separate lucene documents.
> > For the body, you include from, to, cc (in other words, meta-data)
> > For the attachment, you do NOT include the meta-data.
> > For both the body and the attachment, you have an ID for the parent
> > e-mail
> > that is the same for a body and attachment if they are from the same
> > e-mail
> > (otherwise I don't see how you "determine the email to display" for an
> > attachment).
> >
> > You've got a couple of problems here. Anything you do to break up the
> > clauses into separate queries will do bad things for your relevance
> > scoring.
> > That is, one query on the body and one on the attachment will give you
> > two
> > lists that you'll then have to manually reconcile if relevancy matters.
> >
> > Depending upon how many emails and attachments you get hits for, you
> > could
> > do something like
> > 1> search for the body elements with the to/from/cc. Use the return
> > (perhaps
> > with a HitCollector (definitely NOT a Hits object)) to assemble a clause
> > like ID=52343 or ID=985 or ID=8910 .... and the re-submit some query
> like
> >
> > "text contains "search data" and (ID=52343 or ID=985 or ID=8910 ....)"
> >
> > BEWARE that, depending upon how many e-mails you get, you'll run afoul
> of
> > TooManyClauses exceptions. The default is 1,024 but you can make it as
> > big
> > as memory/time allows. And, as you say, this is temporary until you
> > reconstruct your index.
> >
> > If this is totally irrelevant, perhaps you could add some more
> detail....
> >
> > Best
> > Erick
> >
> >
> > On 1/7/07, Michael J. Prichard <michael_prichard@mac.com> wrote:
> >
> >>
> >> I have an index which has email and their attachments indexed.  This is
> >> ok but the issue I am having it when I am trying to filter the
> >> searches.  For example I can search the content of the email and the
> >> document (i.e. the attachment) and return the right
> results.  Basically,
> >> if it is a document I check the DB to see its parent and determine the
> >> email to display.  The problem comes in when I try to use to, from
> >> and/or cc in my searches.  It will only return emails since we did not
> >> index those fields along with the attachments.  Ideally we would
> reindex
> >> and add those but I need a temporary fix until we can do that.  SO...I
> >> tried a few various things including a basic search and then filtering
> >> on my own but that seriously slowed our interface since I had to check
> >> each result, etc.  SO...I broke the query into two...search the docs
> and
> >> emails seperately and only check the documents on return.  That is ok.
> >>
> >> I was wondering...would HitCollector be something i should use.
> >> Basically have the searcher check documents to make sure they are ok to
> >> go (i.e. to, from. etc is correct)?
> >>
> >> Make sense?
> >>
> >> Thanks!
> >> Michael
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_53018_12838774.1168222924878--

From java-user-return-25324-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 08 04:20:22 2007
Return-Path: <java-user-return-25324-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26770 invoked from network); 8 Jan 2007 04:20:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Jan 2007 04:20:21 -0000
Received: (qmail 26022 invoked by uid 500); 8 Jan 2007 04:20:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25947 invoked by uid 500); 8 Jan 2007 04:20:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25920 invoked by uid 99); 8 Jan 2007 04:20:17 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 07 Jan 2007 20:20:17 -0800
X-ASF-Spam-Status: No, hits=2.9 required=10.0
	tests=HTML_10_20,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of maarsh@gmail.com designates 66.249.92.172 as permitted sender)
Received: from [66.249.92.172] (HELO ug-out-1314.google.com) (66.249.92.172)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 07 Jan 2007 20:20:08 -0800
Received: by ug-out-1314.google.com with SMTP id k40so6113031ugc
        for <java-user@lucene.apache.org>; Sun, 07 Jan 2007 20:19:47 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=mhzktcAl1fVfRLHPXFT38d4Ngy7qzLvmWjnV8vi1jzyx0rAdHEhh9hLiLCpCQpZS2V79QARm4KAvWdOwsbNG2DaLxLlb55cKiluglL8mrNqKBsxDO5ngGF/Zr+Wrsd+nAinCZPVMAW6z0raPqfwCEhvkO1+EAWR6NXLdckrgm9o=
Received: by 10.67.101.10 with SMTP id d10mr32832715ugm.1168229987552;
        Sun, 07 Jan 2007 20:19:47 -0800 (PST)
Received: by 10.67.30.5 with HTTP; Sun, 7 Jan 2007 20:19:47 -0800 (PST)
Message-ID: <8d8d9b4b0701072019l162b0dd1k9d12563349146434@mail.gmail.com>
Date: Mon, 8 Jan 2007 09:49:47 +0530
From: maarsh <maarsh@gmail.com>
To: java-user@lucene.apache.org
Subject: Searching the result set
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_54923_3263993.1168229987524"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_54923_3263993.1168229987524
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

hi ,

i have requirement where in i need to perform a search on a the searched
result .
first , i search to get a list of documents ? now i need to peform another
search on this result set .
is that possible in lucene ? please reply .

regards
maarsh

------=_Part_54923_3263993.1168229987524--

From java-user-return-25325-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 08 08:22:02 2007
Return-Path: <java-user-return-25325-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78859 invoked from network); 8 Jan 2007 08:22:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Jan 2007 08:22:01 -0000
Received: (qmail 28639 invoked by uid 500); 8 Jan 2007 08:21:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28605 invoked by uid 500); 8 Jan 2007 08:21:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28594 invoked by uid 99); 8 Jan 2007 08:21:42 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Jan 2007 00:21:42 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Jan 2007 00:20:35 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 817E35B766; Mon,  8 Jan 2007 00:19:42 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 7C81E7F403
	for <java-user@lucene.apache.org>; Mon,  8 Jan 2007 00:19:42 -0800 (PST)
Date: Mon, 8 Jan 2007 00:19:42 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Similarity for Span and Boolean query
In-Reply-To: <E0FEA5DF00E59E409F90C854A1B45BAA0147064F@EPPING-EVS1.open.ac.uk>
Message-ID: <Pine.LNX.4.58.0701080013490.30607@hal.rescomp.berkeley.edu>
References: <E0FEA5DF00E59E409F90C854A1B45BAA0147064F@EPPING-EVS1.open.ac.uk>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: The equation for similarity is given on this web page:
: http://lucene.apache.org/java/docs/api/org/apache/lucene/search/Similari
: ty.html
:
: I would like to know what are the equations for similarity if the query
: is a span or boolean query.

That equation does cover BooleanQueries -- the "coord" factor is a
BooleanQuery concept -- strictly speaking that equation describes the
basics of a boolean query containing multiple term queries.

beyond that, the calculations can get a little hard to discribe in generic
equations -- the best way to understand the score calculations for any of
the other query types (including the Span queries) is to look at the
"Explanation.toString()" output for a query on a matching document -- and
consult the code for the corisponding Scorer class to see if there are any
special cases you might not be noticing becuase of the particular
query/doc explanation you are looking at (ie: query boosts, the coord
factor on a boolean query, etc...)

-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25326-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 08 08:23:50 2007
Return-Path: <java-user-return-25326-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79106 invoked from network); 8 Jan 2007 08:23:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Jan 2007 08:23:49 -0000
Received: (qmail 31618 invoked by uid 500); 8 Jan 2007 08:23:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31329 invoked by uid 500); 8 Jan 2007 08:23:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31318 invoked by uid 99); 8 Jan 2007 08:23:47 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Jan 2007 00:23:47 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Jan 2007 00:22:44 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 85BD35B766; Mon,  8 Jan 2007 00:22:08 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 815587F403
	for <java-user@lucene.apache.org>; Mon,  8 Jan 2007 00:22:08 -0800 (PST)
Date: Mon, 8 Jan 2007 00:22:08 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Searching the result set
In-Reply-To: <8d8d9b4b0701072019l162b0dd1k9d12563349146434@mail.gmail.com>
Message-ID: <Pine.LNX.4.58.0701080021330.30607@hal.rescomp.berkeley.edu>
References: <8d8d9b4b0701072019l162b0dd1k9d12563349146434@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


this is covered in the FAQ if you look for "search within search" ...

http://wiki.apache.org/jakarta-lucene/LuceneFAQ


: Date: Mon, 8 Jan 2007 09:49:47 +0530
: From: maarsh <maarsh@gmail.com>
: Reply-To: java-user@lucene.apache.org
: To: java-user@lucene.apache.org
: Subject: Searching the result set
:
: hi ,
:
: i have requirement where in i need to perform a search on a the searched
: result .
: first , i search to get a list of documents ? now i need to peform another
: search on this result set .
: is that possible in lucene ? please reply .
:
: regards
: maarsh
:



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25327-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 08 10:45:28 2007
Return-Path: <java-user-return-25327-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36213 invoked from network); 8 Jan 2007 10:45:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Jan 2007 10:45:28 -0000
Received: (qmail 92076 invoked by uid 500); 8 Jan 2007 10:45:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92051 invoked by uid 500); 8 Jan 2007 10:45:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92040 invoked by uid 99); 8 Jan 2007 10:45:27 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Jan 2007 02:45:27 -0800
X-ASF-Spam-Status: No, hits=2.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [203.199.37.133] (HELO rediff.co.in) (203.199.37.133)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 08 Jan 2007 02:45:18 -0800
Received: (qmail 7521 invoked from network); 8 Jan 2007 10:42:17 -0000
Received: from unknown (HELO bhavin) (172.16.3.213)
  by mailserver with SMTP; 8 Jan 2007 10:42:17 -0000
Message-ID: <002501c73314$4ea2c0c0$d50310ac@bhavin>
Reply-To: "Bhavin Pandya" <bhavinp@rediff.co.in>
From: "Bhavin Pandya" <bhavinp@rediff.co.in>
To: <java-user@lucene.apache.org>
Subject: How to top ups recent documents
Date: Mon, 8 Jan 2007 16:31:08 +0530
Organization: rediff.com
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_0022_01C73342.665800D0"
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.2180
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2180
X-Virus-Checked: Checked by ClamAV on apache.org

------=_NextPart_000_0022_01C73342.665800D0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

Hello guys,

I think i have posted this questions earlier but didnt got satisfied =
answer...

I have a index...in which document has one field "update timestamp" ...
Index is gettting update daily....

now when someone searches for "usa" i wants result mixing of "recent + =
relevant". ...

I tried by writing "MyHitCollector" ..where i m mixing docs such a way =
that,
1. docs which has score more than one threshold ....sorting them on date =
descending
2. docs which has below score than that threshold ....keeping it as it =
is...

But on what basis i should take that "threshold value of score"...

Do anybody have tried any other trick to achieve this....something like =
boosting a recent documents at indexing time or with some different =
technique ....?

Or where i am doing mistake ?

Thanks.
Bhavin pandya


------=_NextPart_000_0022_01C73342.665800D0--


From java-user-return-25328-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 08 12:56:34 2007
Return-Path: <java-user-return-25328-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 83600 invoked from network); 8 Jan 2007 12:56:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Jan 2007 12:56:33 -0000
Received: (qmail 73908 invoked by uid 500); 8 Jan 2007 12:56:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72908 invoked by uid 500); 8 Jan 2007 12:56:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72897 invoked by uid 99); 8 Jan 2007 12:56:34 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Jan 2007 04:56:34 -0800
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [156.80.1.73] (HELO mclniron02-ext.bah.com) (156.80.1.73)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Jan 2007 04:56:23 -0800
Received: from mclnexbh03.resource.ds.bah.com ([156.80.7.153])
  by mclniron02-ext.bah.com with ESMTP; 08 Jan 2007 07:55:50 -0500
x-SBRS: None
X-REMOTE-IP: 156.80.7.153
X-IronPort-AV: i="4.13,159,1167627600"; 
   d="scan'208"; a="111801467:sNHT33053651722"
Received: from MCLNEXVS06.resource.ds.bah.com ([156.80.7.124]) by mclnexbh03.resource.ds.bah.com with Microsoft SMTPSVC(6.0.3790.1830);
	 Mon, 8 Jan 2007 07:55:49 -0500
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: Lucene Index of Oracle RDBMS
Date: Mon, 8 Jan 2007 07:55:56 -0500
Message-ID: <7B80849E30665C4CAE7FCDE953E42D4401ECA43E@MCLNEXVS06.resource.ds.bah.com>
In-Reply-To: <Pine.LNX.4.58.0701080013490.30607@hal.rescomp.berkeley.edu>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Lucene Index of Oracle RDBMS
Thread-Index: Accy/gfMIaXMHJg1QFuvjzYtp9dF9QAJSo7A
From: "Aronin, Maxim" <aronin_maxim@bah.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 08 Jan 2007 12:55:49.0777 (UTC) FILETIME=[52688810:01C73324]
X-Virus-Checked: Checked by ClamAV on apache.org

Hello,

Does anyone know of instances where Lucene was used to index Oracle
RDBMS at a recognizable company or a government agency? Powered by
Lucene list did not seem to have any such examples

Thanks for your help!

Max

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25329-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 08 13:22:35 2007
Return-Path: <java-user-return-25329-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89057 invoked from network); 8 Jan 2007 13:22:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Jan 2007 13:22:34 -0000
Received: (qmail 14869 invoked by uid 500); 8 Jan 2007 13:22:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14834 invoked by uid 500); 8 Jan 2007 13:22:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 14823 invoked by uid 99); 8 Jan 2007 13:22:33 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Jan 2007 05:22:33 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of marcelo.ochoa@gmail.com designates 64.233.184.230 as permitted sender)
Received: from [64.233.184.230] (HELO wr-out-0506.google.com) (64.233.184.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Jan 2007 05:22:24 -0800
Received: by wr-out-0506.google.com with SMTP id i28so1143481wra
        for <java-user@lucene.apache.org>; Mon, 08 Jan 2007 05:22:03 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=OGkfaA+mTEguAt4BqyDhx+OJtG0eK9QL9nbcgd3CLNZpUkxPtpPf0ghl9aD4vtcepLaAcJ0s56ewsyDupIocZ4NVkJImZF+j031kecRz3FU4DNeWkKh0wnRHDtTGM0IcoPC+35NyqOaOIH7JwbtuAojxVRU4BQqWspPhLBoLgMI=
Received: by 10.78.164.13 with SMTP id m13mr3985115hue.1168262522095;
        Mon, 08 Jan 2007 05:22:02 -0800 (PST)
Received: by 10.78.200.15 with HTTP; Mon, 8 Jan 2007 05:22:01 -0800 (PST)
Message-ID: <126142c0701080522g66aa304di9203f3c3ac30115b@mail.gmail.com>
Date: Mon, 8 Jan 2007 10:22:01 -0300
From: "Marcelo Ochoa" <marcelo.ochoa@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene Index of Oracle RDBMS
In-Reply-To: <7B80849E30665C4CAE7FCDE953E42D4401ECA43E@MCLNEXVS06.resource.ds.bah.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <Pine.LNX.4.58.0701080013490.30607@hal.rescomp.berkeley.edu>
	 <7B80849E30665C4CAE7FCDE953E42D4401ECA43E@MCLNEXVS06.resource.ds.bah.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Max:
  I am working in a Oracle-Lucene integration, see patch:
http://issues.apache.org/jira/browse/LUCENE-724
  Today I'll upload a latest development release which includes
several performance enhancement and new methods to integrate with the
Oracle Data Cartridge API without using data information which is
faster than the previous one.
  Unlike other Lucene data store implementation using BLOB, the
OJVMDirectory implementation runs inside the Oracle embedded virtual
machine. This architecture decision reduce network round trip and data
marshaling because it runs in the same memory space as the Oracle
data.
  Another feature is a Data Cartridge integration which provides
Lucene as a new Domain Index for the Oracle Databases like the Oracle
Text's ctxsys.context index, it means that you can index columns of
type VARCHAR2, CLOB or XMLType directly by using a simple "create
index" command. All DML operations on the base table automatically
update the Lucene Index.
  Also two new operators are provided to the SQL Engine,
lcontains(column_name,lucene_query_parser_syntax,corr_id) and
lscore(corr_id), these two operators can be used inside or outside the
SQL where.
  Best regards, Marcelo.

On 1/8/07, Aronin, Maxim <aronin_maxim@bah.com> wrote:
> Hello,
>
> Does anyone know of instances where Lucene was used to index Oracle
> RDBMS at a recognizable company or a government agency? Powered by
> Lucene list did not seem to have any such examples
>
> Thanks for your help!
>
> Max
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
Marcelo F. Ochoa
http://marcelo.ochoa.googlepages.com/home
______________
Do you Know DBPrism? Look @ DB Prism's Web Site
http://www.dbprism.com.ar/index.html
More info?
Chapter 17 of the book "Programming the Oracle Database using Java &
Web Services"
http://www.amazon.com/gp/product/1555583296/
Chapter 21 of the book "Professional XML Databases" - Wrox Press
http://www.amazon.com/gp/product/1861003587/
Chapter 8 of the book "Oracle & Open Source" - O'Reilly
http://www.oreilly.com/catalog/oracleopen/

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25330-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 08 14:13:31 2007
Return-Path: <java-user-return-25330-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4054 invoked from network); 8 Jan 2007 14:13:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Jan 2007 14:13:30 -0000
Received: (qmail 15244 invoked by uid 500); 8 Jan 2007 14:13:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15216 invoked by uid 500); 8 Jan 2007 14:13:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15205 invoked by uid 99); 8 Jan 2007 14:13:30 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Jan 2007 06:13:30 -0800
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [156.80.1.71] (HELO mclniron01-ext.bah.com) (156.80.1.71)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Jan 2007 06:13:20 -0800
Received: from bahmail.bah.com (HELO mclnexbh02.resource.ds.bah.com) ([156.80.7.152])
  by mclniron01-ext.bah.com with ESMTP; 08 Jan 2007 09:12:58 -0500
x-SBRS: None
X-REMOTE-IP: 156.80.7.152
X-IronPort-AV: i="4.13,159,1167627600"; 
   d="scan'208"; a="134257555:sNHT23473648"
Received: from MCLNEXVS06.resource.ds.bah.com ([156.80.7.124]) by mclnexbh02.resource.ds.bah.com with Microsoft SMTPSVC(6.0.3790.1830);
	 Mon, 8 Jan 2007 09:12:58 -0500
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Lucene Index of Oracle RDBMS
Date: Mon, 8 Jan 2007 09:13:05 -0500
Message-ID: <7B80849E30665C4CAE7FCDE953E42D4401ECA49F@MCLNEXVS06.resource.ds.bah.com>
In-Reply-To: <126142c0701080522g66aa304di9203f3c3ac30115b@mail.gmail.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Lucene Index of Oracle RDBMS
Thread-Index: AcczKA6YRvAzGdEaStyikB9dL+gw7gAAxuug
From: "Aronin, Maxim" <aronin_maxim@bah.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 08 Jan 2007 14:12:58.0136 (UTC) FILETIME=[19201180:01C7332F]
X-Virus-Checked: Checked by ClamAV on apache.org

Hello Marcelo,

Thanks for the details of your implementation.  I was wondering if you
could share where this implementation is taking place. Also, are you
aware of any implementations at companies or government agencies where
Lucene was used to index Oracle.

My client is thinking about implementing Lucene index instead of Oracle
Text, but would like to see a list of recognizable companies/agencies
where this has been done before.  Any additional suggestions for where I
can search for this information would be appreciated.

Again thanks for your help,

V/R,

Max Aronin

-----Original Message-----
From: Marcelo Ochoa [mailto:marcelo.ochoa@gmail.com]=20
Sent: Monday, January 08, 2007 8:22 AM
To: java-user@lucene.apache.org
Subject: Re: Lucene Index of Oracle RDBMS

Hi Max:
  I am working in a Oracle-Lucene integration, see patch:
http://issues.apache.org/jira/browse/LUCENE-724
  Today I'll upload a latest development release which includes several
performance enhancement and new methods to integrate with the Oracle
Data Cartridge API without using data information which is faster than
the previous one.
  Unlike other Lucene data store implementation using BLOB, the
OJVMDirectory implementation runs inside the Oracle embedded virtual
machine. This architecture decision reduce network round trip and data
marshaling because it runs in the same memory space as the Oracle data.
  Another feature is a Data Cartridge integration which provides Lucene
as a new Domain Index for the Oracle Databases like the Oracle Text's
ctxsys.context index, it means that you can index columns of type
VARCHAR2, CLOB or XMLType directly by using a simple "create index"
command. All DML operations on the base table automatically update the
Lucene Index.
  Also two new operators are provided to the SQL Engine,
lcontains(column_name,lucene_query_parser_syntax,corr_id) and
lscore(corr_id), these two operators can be used inside or outside the
SQL where.
  Best regards, Marcelo.

On 1/8/07, Aronin, Maxim <aronin_maxim@bah.com> wrote:
> Hello,
>
> Does anyone know of instances where Lucene was used to index Oracle=20
> RDBMS at a recognizable company or a government agency? Powered by=20
> Lucene list did not seem to have any such examples
>
> Thanks for your help!
>
> Max
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


--
Marcelo F. Ochoa
http://marcelo.ochoa.googlepages.com/home
______________
Do you Know DBPrism? Look @ DB Prism's Web Site
http://www.dbprism.com.ar/index.html
More info?
Chapter 17 of the book "Programming the Oracle Database using Java & Web
Services"
http://www.amazon.com/gp/product/1555583296/
Chapter 21 of the book "Professional XML Databases" - Wrox Press
http://www.amazon.com/gp/product/1861003587/
Chapter 8 of the book "Oracle & Open Source" - O'Reilly
http://www.oreilly.com/catalog/oracleopen/

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25331-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 08 14:37:44 2007
Return-Path: <java-user-return-25331-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 17511 invoked from network); 8 Jan 2007 14:37:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Jan 2007 14:37:44 -0000
Received: (qmail 50333 invoked by uid 500); 8 Jan 2007 14:37:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50310 invoked by uid 500); 8 Jan 2007 14:37:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50299 invoked by uid 99); 8 Jan 2007 14:37:43 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Jan 2007 06:37:43 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of marcelo.ochoa@gmail.com designates 209.85.132.242 as permitted sender)
Received: from [209.85.132.242] (HELO an-out-0708.google.com) (209.85.132.242)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Jan 2007 06:37:34 -0800
Received: by an-out-0708.google.com with SMTP id c3so1645273ana
        for <java-user@lucene.apache.org>; Mon, 08 Jan 2007 06:37:13 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=n6fz9Rq8Vos38o9iJc0MtDki3ogHIWUe/hXJStNbDtq1lUSVQLI8lcbiuwiCLSuGzQPvNidQHczOW0mgMBCldicvg1LDM6FAqAOxCx4TzhmYsKkSc1oeSz/0xx8w6NUt5I/4jLGKQn7j030EnohaL272Zms9+197qUSjf/Mku74=
Received: by 10.78.193.19 with SMTP id q19mr4005541huf.1168267032660;
        Mon, 08 Jan 2007 06:37:12 -0800 (PST)
Received: by 10.78.200.15 with HTTP; Mon, 8 Jan 2007 06:37:12 -0800 (PST)
Message-ID: <126142c0701080637v56f53113y3d94f4d1b2476b12@mail.gmail.com>
Date: Mon, 8 Jan 2007 11:37:12 -0300
From: "Marcelo Ochoa" <marcelo.ochoa@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene Index of Oracle RDBMS
In-Reply-To: <7B80849E30665C4CAE7FCDE953E42D4401ECA49F@MCLNEXVS06.resource.ds.bah.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <126142c0701080522g66aa304di9203f3c3ac30115b@mail.gmail.com>
	 <7B80849E30665C4CAE7FCDE953E42D4401ECA49F@MCLNEXVS06.resource.ds.bah.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Max:
   The code of the Oracle-Lucene integration is in a very early stage,
see the first patch released (22/Nov/06 03:44 PM), but it uses the
lucene-2.0.0 core API which is very stable.
   I don't know if somebody is using the code, but I testing it a lot
with small and large test suites and seem to be stable and scalable.
   If you want to test the code with large datasets, I can help you to
put the code running in an Oracle 10gR2+
   Best regards, Marcelo.

On 1/8/07, Aronin, Maxim <aronin_maxim@bah.com> wrote:
> Hello Marcelo,
>
> Thanks for the details of your implementation.  I was wondering if you
> could share where this implementation is taking place. Also, are you
> aware of any implementations at companies or government agencies where
> Lucene was used to index Oracle.
>
> My client is thinking about implementing Lucene index instead of Oracle
> Text, but would like to see a list of recognizable companies/agencies
> where this has been done before.  Any additional suggestions for where I
> can search for this information would be appreciated.
>
> Again thanks for your help,
>
> V/R,
>
> Max Aronin
>
> -----Original Message-----
> From: Marcelo Ochoa [mailto:marcelo.ochoa@gmail.com]
> Sent: Monday, January 08, 2007 8:22 AM
> To: java-user@lucene.apache.org
> Subject: Re: Lucene Index of Oracle RDBMS
>
> Hi Max:
>   I am working in a Oracle-Lucene integration, see patch:
> http://issues.apache.org/jira/browse/LUCENE-724
>   Today I'll upload a latest development release which includes several
> performance enhancement and new methods to integrate with the Oracle
> Data Cartridge API without using data information which is faster than
> the previous one.
>   Unlike other Lucene data store implementation using BLOB, the
> OJVMDirectory implementation runs inside the Oracle embedded virtual
> machine. This architecture decision reduce network round trip and data
> marshaling because it runs in the same memory space as the Oracle data.
>   Another feature is a Data Cartridge integration which provides Lucene
> as a new Domain Index for the Oracle Databases like the Oracle Text's
> ctxsys.context index, it means that you can index columns of type
> VARCHAR2, CLOB or XMLType directly by using a simple "create index"
> command. All DML operations on the base table automatically update the
> Lucene Index.
>   Also two new operators are provided to the SQL Engine,
> lcontains(column_name,lucene_query_parser_syntax,corr_id) and
> lscore(corr_id), these two operators can be used inside or outside the
> SQL where.
>   Best regards, Marcelo.
>
> On 1/8/07, Aronin, Maxim <aronin_maxim@bah.com> wrote:
> > Hello,
> >
> > Does anyone know of instances where Lucene was used to index Oracle
> > RDBMS at a recognizable company or a government agency? Powered by
> > Lucene list did not seem to have any such examples
> >
> > Thanks for your help!
> >
> > Max
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
>
> --
> Marcelo F. Ochoa
> http://marcelo.ochoa.googlepages.com/home
> ______________
> Do you Know DBPrism? Look @ DB Prism's Web Site
> http://www.dbprism.com.ar/index.html
> More info?
> Chapter 17 of the book "Programming the Oracle Database using Java & Web
> Services"
> http://www.amazon.com/gp/product/1555583296/
> Chapter 21 of the book "Professional XML Databases" - Wrox Press
> http://www.amazon.com/gp/product/1861003587/
> Chapter 8 of the book "Oracle & Open Source" - O'Reilly
> http://www.oreilly.com/catalog/oracleopen/
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
Marcelo F. Ochoa
http://marcelo.ochoa.googlepages.com/home
______________
Do you Know DBPrism? Look @ DB Prism's Web Site
http://www.dbprism.com.ar/index.html
More info?
Chapter 17 of the book "Programming the Oracle Database using Java &
Web Services"
http://www.amazon.com/gp/product/1555583296/
Chapter 21 of the book "Professional XML Databases" - Wrox Press
http://www.amazon.com/gp/product/1861003587/
Chapter 8 of the book "Oracle & Open Source" - O'Reilly
http://www.oreilly.com/catalog/oracleopen/

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25332-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 08 15:35:57 2007
Return-Path: <java-user-return-25332-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35927 invoked from network); 8 Jan 2007 15:35:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Jan 2007 15:35:56 -0000
Received: (qmail 30675 invoked by uid 500); 8 Jan 2007 15:35:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30630 invoked by uid 500); 8 Jan 2007 15:35:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30591 invoked by uid 99); 8 Jan 2007 15:35:43 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Jan 2007 07:35:43 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [206.190.53.28] (HELO smtp103.plus.mail.re2.yahoo.com) (206.190.53.28)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 08 Jan 2007 07:35:32 -0800
Received: (qmail 44801 invoked from network); 8 Jan 2007 15:35:11 -0000
Received: from unknown (HELO ?192.168.1.101?) (nhira@cognocys.com@70.56.160.101 with plain)
  by smtp103.plus.mail.re2.yahoo.com with SMTP; 8 Jan 2007 15:35:10 -0000
X-YMail-OSG: kJnebnwVM1mBCjX_z9vCgBmlVYiqw6etGTRK8RWQmvanVF4eu9STD.R7aE4bNTciOjkUXj4C5DF3ga9Z3RakBmNv2ww4dMKzalKS74B_.53x2NpFEOIlynsRMyT5_hWIteEwCkc9Roc_yss-
Subject: Re: Lucene Index of Oracle RDBMS
From: "N. Hira" <nhira@cognocys.com>
Reply-To: nhira@cognocys.com
To: java-user@lucene.apache.org
In-Reply-To: <7B80849E30665C4CAE7FCDE953E42D4401ECA43E@MCLNEXVS06.resource.ds.bah.com>
References:
	 <7B80849E30665C4CAE7FCDE953E42D4401ECA43E@MCLNEXVS06.resource.ds.bah.com>
Content-Type: text/plain
Organization: Cognocys, Inc.
Date: Mon, 08 Jan 2007 09:35:04 -0600
Message-Id: <1168270504.3111.11.camel@nhira.cognocys.com>
Mime-Version: 1.0
X-Mailer: Evolution 2.6.3 (2.6.3-1.fc5.5) 
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Max,

We use a (customized version of) Lucene as part of our Cognocys IAM
product, which is also available with Oracle RDBMS.

I can tell you that the software is used at Medtronic, a global medical
technology company.

-h
---------------------------------------------------------------------------
Hira, N.R.
Solutions Architect
Cognocys, Inc.

On Mon, 2007-01-08 at 07:55 -0500, Aronin, Maxim wrote:
> Hello,
> 
> Does anyone know of instances where Lucene was used to index Oracle
> RDBMS at a recognizable company or a government agency? Powered by
> Lucene list did not seem to have any such examples
> 
> Thanks for your help!
> 
> Max
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25333-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 08 15:36:56 2007
Return-Path: <java-user-return-25333-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36307 invoked from network); 8 Jan 2007 15:36:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Jan 2007 15:36:56 -0000
Received: (qmail 35934 invoked by uid 500); 8 Jan 2007 15:36:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 35907 invoked by uid 500); 8 Jan 2007 15:36:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 35896 invoked by uid 99); 8 Jan 2007 15:36:56 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Jan 2007 07:36:56 -0800
X-ASF-Spam-Status: No, hits=2.8 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [206.190.39.214] (HELO web50312.mail.yahoo.com) (206.190.39.214)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 08 Jan 2007 07:36:45 -0800
Received: (qmail 57004 invoked by uid 60001); 8 Jan 2007 15:36:24 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=PKBQrF9b/ygWcAiIIhaGuegC4WMuQC/m6N6GRy6LS5PcpFKnlNjzrVEgq5iuU+CTTJyR9Th/em2c+WmjADntthId3lIWkcDwv94UEMLsodwY5dZhS+RgLsjQN8IV1oJHBEBUdDv0GpJiVKn+FvTYZyRAZmmN7n4w7seHhqxzduI=  ;
Message-ID: <20070108153624.57002.qmail@web50312.mail.yahoo.com>
Received: from [58.63.155.58] by web50312.mail.yahoo.com via HTTP; Mon, 08 Jan 2007 07:36:24 PST
Date: Mon, 8 Jan 2007 07:36:24 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: How to top ups recent documents
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=ascii
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Steal the FunctionQuery from Solr.  In the past, Hoss has provided some exa=
mples of how it can be used either on this or on solr-user/dev list.=0A=0AO=
tis=0A=0A----- Original Message ----=0AFrom: Bhavin Pandya <bhavinp@rediff.=
co.in>=0ATo: java-user@lucene.apache.org=0ASent: Monday, January 8, 2007 7:=
01:08 PM=0ASubject: How to top ups recent documents=0A=0A=0AHello guys,=0A=
=0AI think i have posted this questions earlier but didnt got satisfied ans=
wer...=0A=0AI have a index...in which document has one field "update timest=
amp" ...=0AIndex is gettting update daily....=0A=0Anow when someone searche=
s for "usa" i wants result mixing of "recent + relevant". ...=0A=0AI tried =
by writing "MyHitCollector" ..where i m mixing docs such a way that,=0A1. d=
ocs which has score more than one threshold ....sorting them on date descen=
ding=0A2. docs which has below score than that threshold ....keeping it as =
it is...=0A=0ABut on what basis i should take that "threshold value of scor=
e"...=0A=0ADo anybody have tried any other trick to achieve this....somethi=
ng like boosting a recent documents at indexing time or with some different=
 technique ....?=0A=0AOr where i am doing mistake ?=0A=0AThanks.=0ABhavin p=
andya

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25334-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 08 16:01:20 2007
Return-Path: <java-user-return-25334-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 49189 invoked from network); 8 Jan 2007 16:01:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Jan 2007 16:01:19 -0000
Received: (qmail 5614 invoked by uid 500); 8 Jan 2007 16:00:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5558 invoked by uid 500); 8 Jan 2007 16:00:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5517 invoked by uid 99); 8 Jan 2007 16:00:34 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Jan 2007 08:00:34 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of danutchi@gmail.com designates 66.249.92.170 as permitted sender)
Received: from [66.249.92.170] (HELO ug-out-1314.google.com) (66.249.92.170)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Jan 2007 08:00:06 -0800
Received: by ug-out-1314.google.com with SMTP id k40so6246022ugc
        for <java-user@lucene.apache.org>; Mon, 08 Jan 2007 07:59:24 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=IurA6akj5scawmtHs46FJ10LeUGUpIPtZh9zCLeUYM8A4H2QYhBUx/H3wiP3KsYBGUCf+o4KEJMlbEnREzxNCB1QjL5xPoXZfGHs2f0v1yJFshpNN3xrQhw/bvBfq47g8SxjGTYWhs6ondtoxTTrfaoB/hWySZkrVdnChgUBzJk=
Received: by 10.78.180.18 with SMTP id c18mr4062271huf.1168271964257;
        Mon, 08 Jan 2007 07:59:24 -0800 (PST)
Received: by 10.78.152.8 with HTTP; Mon, 8 Jan 2007 07:59:24 -0800 (PST)
Message-ID: <d7a865a50701080759j5489e8f3u9aa500359df2bd7a@mail.gmail.com>
Date: Mon, 8 Jan 2007 16:59:24 +0100
From: "Dan Wiggin" <danutchi@gmail.com>
To: java-user@lucene.apache.org
Subject: Test my Lucene service
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_73683_16241972.1168271964195"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_73683_16241972.1168271964195
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi luceners, I don't have any question today.
Simply I want to know how you test the efficiency of yours systems that
works over Lucene.
I think it will be a very interesting for all newbie (like me) in Lucene
world some advices in this point.

Thanks in advance.

------=_Part_73683_16241972.1168271964195--

From java-user-return-25335-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 08 16:12:40 2007
Return-Path: <java-user-return-25335-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54860 invoked from network); 8 Jan 2007 16:12:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Jan 2007 16:12:39 -0000
Received: (qmail 39139 invoked by uid 500); 8 Jan 2007 16:12:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39107 invoked by uid 500); 8 Jan 2007 16:12:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39096 invoked by uid 99); 8 Jan 2007 16:12:39 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Jan 2007 08:12:38 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 64.233.182.189 as permitted sender)
Received: from [64.233.182.189] (HELO nf-out-0910.google.com) (64.233.182.189)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Jan 2007 08:12:29 -0800
Received: by nf-out-0910.google.com with SMTP id a27so484630nfc
        for <java-user@lucene.apache.org>; Mon, 08 Jan 2007 08:12:08 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=tgZpZY7idt/wDta0/98hPP8MW8CjRc52mqS08PIb6E1jzYMgcxBsGogHtiSGActONtEfhggEqSow26xlkFj96o749R2Avbyv5xOeEAScaVse1YGXVuwPilF0ehuQ44luhndgzCQZf3ku0KKPqoNPLsZBwtqbFSRjHrmrsxvylO4=
Received: by 10.82.152.16 with SMTP id z16mr2267466bud.1168272728344;
        Mon, 08 Jan 2007 08:12:08 -0800 (PST)
Received: by 10.82.162.9 with HTTP; Mon, 8 Jan 2007 08:12:07 -0800 (PST)
Message-ID: <359a92830701080812n113a934frd232f62aa6f603d8@mail.gmail.com>
Date: Mon, 8 Jan 2007 11:12:07 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Test my Lucene service
In-Reply-To: <d7a865a50701080759j5489e8f3u9aa500359df2bd7a@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_62604_2076670.1168272727706"
References: <d7a865a50701080759j5489e8f3u9aa500359df2bd7a@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_62604_2076670.1168272727706
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Well, my testing mostly consisted of capacity testing. I'm using XmlRpc as
my communication mechanism and simply fired up a (configurable) number of
threads to pound my search service with semi-random queries and measured the
response time. Your results may vary depending on how your index is
structured, the complexity of your queries, how you sort, etc....

Erick

On 1/8/07, Dan Wiggin <danutchi@gmail.com> wrote:
>
> Hi luceners, I don't have any question today.
> Simply I want to know how you test the efficiency of yours systems that
> works over Lucene.
> I think it will be a very interesting for all newbie (like me) in Lucene
> world some advices in this point.
>
> Thanks in advance.
>
>

------=_Part_62604_2076670.1168272727706--

From java-user-return-25336-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 08 16:25:31 2007
Return-Path: <java-user-return-25336-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58465 invoked from network); 8 Jan 2007 16:25:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Jan 2007 16:25:28 -0000
Received: (qmail 63562 invoked by uid 500); 8 Jan 2007 16:24:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63528 invoked by uid 500); 8 Jan 2007 16:24:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63436 invoked by uid 99); 8 Jan 2007 16:24:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Jan 2007 08:24:52 -0800
X-ASF-Spam-Status: No, hits=2.8 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [206.190.38.56] (HELO web50302.mail.yahoo.com) (206.190.38.56)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 08 Jan 2007 08:24:14 -0800
Received: (qmail 84569 invoked by uid 60001); 8 Jan 2007 16:23:35 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=drpp3cQoUsb+45HZ7ywWqg9CEpZHKJf6FvMxvMTLOxVkCdQDqJF+0GfEEzovg89hXH6THmAlFeEApY4/an94dh+amLs8a0/Q9qcjPIrDHcOFSICaOgMl+915v0bMNP96zgz8WvjGs/c2SuQkL13B98LUzoOeH9912IxpglKiwh4=  ;
Message-ID: <20070108162335.84567.qmail@web50302.mail.yahoo.com>
Received: from [58.63.155.58] by web50302.mail.yahoo.com via HTTP; Mon, 08 Jan 2007 08:23:35 PST
Date: Mon, 8 Jan 2007 08:23:35 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Test my Lucene service
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=ascii
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

In Lucene in Action we covered testing/monitoring performance with JUnitPer=
f: http://lucenebook.com/search?query=3Dtesting+performance , so that's one=
 way of doing it.=0A=0AI've also written multi-threaded search benchmarking=
 app that keeps the concurrency level constant, goes through a log of queri=
es extracted from production logs, and keeps running a number of parallel s=
earches while keeping track of how much time each query takes for calculati=
ng average, mean, Nth percentile, etc.=0A=0AOtis=0A=0A----- Original Messag=
e ----=0AFrom: Dan Wiggin <danutchi@gmail.com>=0ATo: java-user@lucene.apach=
e.org=0ASent: Monday, January 8, 2007 11:59:24 PM=0ASubject: Test my Lucene=
 service=0A=0A=0AHi luceners, I don't have any question today.=0ASimply I w=
ant to know how you test the efficiency of yours systems that=0Aworks over =
Lucene.=0AI think it will be a very interesting for all newbie (like me) in=
 Lucene=0Aworld some advices in this point.=0A=0AThanks in advance.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25337-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 08 16:49:26 2007
Return-Path: <java-user-return-25337-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67725 invoked from network); 8 Jan 2007 16:49:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Jan 2007 16:49:24 -0000
Received: (qmail 22752 invoked by uid 500); 8 Jan 2007 16:49:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22716 invoked by uid 500); 8 Jan 2007 16:49:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 22705 invoked by uid 99); 8 Jan 2007 16:49:23 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Jan 2007 08:49:22 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of ekemokai@gmail.com designates 64.233.162.233 as permitted sender)
Received: from [64.233.162.233] (HELO nz-out-0506.google.com) (64.233.162.233)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Jan 2007 08:49:13 -0800
Received: by nz-out-0506.google.com with SMTP id i1so3656739nzh
        for <java-user@lucene.apache.org>; Mon, 08 Jan 2007 08:48:52 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=QJsTu2fKOGe9sonPUNUbjDwGo3PtZfwpT698JDV9GNpft6CiM848wHkpucxwZWz5RrL4QoKuIrVxi1nl8EfBgxJO0DPwXQM++LQd+WKRcegdZE8FvIg4/YlXxnsDmCOSWDaHxRrbBfVYzsjWU4+JalRIHU8MCg+VADgjykYUP2I=
Received: by 10.65.219.16 with SMTP id w16mr20015024qbq.1168274932449;
        Mon, 08 Jan 2007 08:48:52 -0800 (PST)
Received: by 10.65.186.8 with HTTP; Mon, 8 Jan 2007 08:48:51 -0800 (PST)
Message-ID: <dac893430701080848h5bad3679y69f0d79c7b2cdb53@mail.gmail.com>
Date: Mon, 8 Jan 2007 11:48:51 -0500
From: "EDMOND KEMOKAI" <ekemokai@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Test my Lucene service
In-Reply-To: <20070108162335.84567.qmail@web50302.mail.yahoo.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_35963_2370615.1168274931429"
References: <20070108162335.84567.qmail@web50302.mail.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_35963_2370615.1168274931429
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Why test? LOL. just release your software and you'll find the answer, at
least that is what I did:)

www.megueii.com

On 1/8/07, Otis Gospodnetic <otis_gospodnetic@yahoo.com> wrote:
>
> In Lucene in Action we covered testing/monitoring performance with
> JUnitPerf: http://lucenebook.com/search?query=testing+performance , so
> that's one way of doing it.
>
> I've also written multi-threaded search benchmarking app that keeps the
> concurrency level constant, goes through a log of queries extracted from
> production logs, and keeps running a number of parallel searches while
> keeping track of how much time each query takes for calculating average,
> mean, Nth percentile, etc.
>
> Otis
>
> ----- Original Message ----
> From: Dan Wiggin <danutchi@gmail.com>
> To: java-user@lucene.apache.org
> Sent: Monday, January 8, 2007 11:59:24 PM
> Subject: Test my Lucene service
>
>
> Hi luceners, I don't have any question today.
> Simply I want to know how you test the efficiency of yours systems that
> works over Lucene.
> I think it will be a very interesting for all newbie (like me) in Lucene
> world some advices in this point.
>
> Thanks in advance.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
"talk trash and carry a small stick."
PAUL KRUGMAN (NYT)

------=_Part_35963_2370615.1168274931429--

From java-user-return-25338-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 08 16:50:57 2007
Return-Path: <java-user-return-25338-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 68708 invoked from network); 8 Jan 2007 16:50:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Jan 2007 16:50:56 -0000
Received: (qmail 25432 invoked by uid 500); 8 Jan 2007 16:50:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25394 invoked by uid 500); 8 Jan 2007 16:50:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25383 invoked by uid 99); 8 Jan 2007 16:50:56 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Jan 2007 08:50:56 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of markrmiller@gmail.com designates 66.249.82.238 as permitted sender)
Received: from [66.249.82.238] (HELO wx-out-0506.google.com) (66.249.82.238)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Jan 2007 08:50:46 -0800
Received: by wx-out-0506.google.com with SMTP id i29so7638071wxd
        for <java-user@lucene.apache.org>; Mon, 08 Jan 2007 08:50:25 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=BzAHXPGu4jNUb1MlMCaPRYBtfQ+cE/61DDuYE4Y2QIQ98Cl3aNzsTZhBtpONF3izPdlrArCViGnnU4R84Hvp4IXa56BSmn/WwGtaibnK9jdelLDNaebmlb0vQrwjOkCVPzIAUA8LHFjZSBje1En+02iVblHX3jm/6GRksV8i1bI=
Received: by 10.90.120.6 with SMTP id s6mr2358108agc.1168275024441;
        Mon, 08 Jan 2007 08:50:24 -0800 (PST)
Received: from ?192.168.1.103? ( [216.66.114.42])
        by mx.google.com with ESMTP id 8sm42336168wra.2007.01.08.08.50.22;
        Mon, 08 Jan 2007 08:50:23 -0800 (PST)
Message-ID: <45A2759E.8040408@gmail.com>
Date: Mon, 08 Jan 2007 11:47:26 -0500
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 1.5.0.9 (Windows/20061207)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Test my Lucene service
References: <20070108162335.84567.qmail@web50302.mail.yahoo.com>
In-Reply-To: <20070108162335.84567.qmail@web50302.mail.yahoo.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Jmeter

Otis Gospodnetic wrote:
> In Lucene in Action we covered testing/monitoring performance with JUnitPerf: http://lucenebook.com/search?query=testing+performance , so that's one way of doing it.
>
> I've also written multi-threaded search benchmarking app that keeps the concurrency level constant, goes through a log of queries extracted from production logs, and keeps running a number of parallel searches while keeping track of how much time each query takes for calculating average, mean, Nth percentile, etc.
>
> Otis
>
> ----- Original Message ----
> From: Dan Wiggin <danutchi@gmail.com>
> To: java-user@lucene.apache.org
> Sent: Monday, January 8, 2007 11:59:24 PM
> Subject: Test my Lucene service
>
>
> Hi luceners, I don't have any question today.
> Simply I want to know how you test the efficiency of yours systems that
> works over Lucene.
> I think it will be a very interesting for all newbie (like me) in Lucene
> world some advices in this point.
>
> Thanks in advance.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>   

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25339-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 08 17:24:49 2007
Return-Path: <java-user-return-25339-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78236 invoked from network); 8 Jan 2007 17:24:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Jan 2007 17:24:48 -0000
Received: (qmail 97532 invoked by uid 500); 8 Jan 2007 17:24:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97502 invoked by uid 500); 8 Jan 2007 17:24:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97491 invoked by uid 99); 8 Jan 2007 17:24:47 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Jan 2007 09:24:47 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of chris.lu@gmail.com designates 66.249.92.175 as permitted sender)
Received: from [66.249.92.175] (HELO ug-out-1314.google.com) (66.249.92.175)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Jan 2007 09:24:38 -0800
Received: by ug-out-1314.google.com with SMTP id k40so6268631ugc
        for <java-user@lucene.apache.org>; Mon, 08 Jan 2007 09:24:17 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=IZV3bSRAs9PhYokVsAx2VtaEmEVF/0NAfsh3VVm6oouO+qHwDkQamS3rZxljhBycxgNpMpNU9FzbVnMQ7agUmYbkalkJZo4E8ZBAwNtJl2SJaBEMalQlGl+x9wGPBYXEsj9CodxBRzqz7e9YWCgmZIujigvCSQLN9dFkRbclzgo=
Received: by 10.82.152.16 with SMTP id z16mr2285225bud.1168277056959;
        Mon, 08 Jan 2007 09:24:16 -0800 (PST)
Received: by 10.82.100.8 with HTTP; Mon, 8 Jan 2007 09:24:16 -0800 (PST)
Message-ID: <6e3ae6310701080924j35a24e6eu31d6c2e01499170b@mail.gmail.com>
Date: Mon, 8 Jan 2007 09:24:16 -0800
From: "Chris Lu" <chris.lu@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene Index of Oracle RDBMS
In-Reply-To: <7B80849E30665C4CAE7FCDE953E42D4401ECA43E@MCLNEXVS06.resource.ds.bah.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <Pine.LNX.4.58.0701080013490.30607@hal.rescomp.berkeley.edu>
	 <7B80849E30665C4CAE7FCDE953E42D4401ECA43E@MCLNEXVS06.resource.ds.bah.com>
X-Virus-Checked: Checked by ClamAV on apache.org

You can try DBSight. It's using a lucene+database+website domain
specific approach to facilitate rapid index design. It's used by
Computer Science Corporation for some military information project,
and websites like www.twenga.com.

-- 
Chris Lu
-------------------------
Instant Full-Text Search On Any Database/Application
site: http://www.dbsight.net
demo: http://search.dbsight.com


On 1/8/07, Aronin, Maxim <aronin_maxim@bah.com> wrote:
> Hello,
>
> Does anyone know of instances where Lucene was used to index Oracle
> RDBMS at a recognizable company or a government agency? Powered by
> Lucene list did not seem to have any such examples
>
> Thanks for your help!
>
> Max
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25340-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 08 18:14:18 2007
Return-Path: <java-user-return-25340-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88997 invoked from network); 8 Jan 2007 18:14:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Jan 2007 18:14:18 -0000
Received: (qmail 65668 invoked by uid 500); 8 Jan 2007 18:14:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65276 invoked by uid 500); 8 Jan 2007 18:14:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65265 invoked by uid 99); 8 Jan 2007 18:14:18 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Jan 2007 10:14:18 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [137.108.246.32] (HELO venus.open.ac.uk) (137.108.246.32)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Jan 2007 10:14:08 -0800
Received: from vostok.open.ac.uk ([137.108.140.139])
	by venus.open.ac.uk with esmtp (Exim 4.62)
	(envelope-from <J.Zhu@open.ac.uk>)
	id 1H3z0A-0007Ij-PN
	for java-user@lucene.apache.org; Mon, 08 Jan 2007 18:13:42 +0000
Received: from EPPING-EVS1.open.ac.uk ([137.108.170.246]) by vostok.open.ac.uk with Microsoft SMTPSVC(5.0.2195.6713);
	 Mon, 8 Jan 2007 18:13:42 +0000
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Similarity for Span and Boolean query
Date: Mon, 8 Jan 2007 18:13:42 -0000
Message-ID: <E0FEA5DF00E59E409F90C854A1B45BAA01470653@EPPING-EVS1.open.ac.uk>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Similarity for Span and Boolean query
thread-index: Accy/gnySD1GvMoiR0i0lPJIAwkswQAUl+/Q
From: "J.Zhu" <J.Zhu@open.ac.uk>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 08 Jan 2007 18:13:42.0854 (UTC) FILETIME=[BAD91E60:01C73350]
X-Virus-Checked: Checked by ClamAV on apache.org

Hi, Chris,

Thanks. Does this page provides the right equation for span query based
similarity?
http://xtf.sourceforge.net/docs/underHood.html#Scoring

Jianhan=20

-----Original Message-----
From: Chris Hostetter [mailto:hossman_lucene@fucit.org]=20
Sent: 08 January 2007 08:20
To: java-user@lucene.apache.org
Subject: Re: Similarity for Span and Boolean query


: The equation for similarity is given on this web page:
:
http://lucene.apache.org/java/docs/api/org/apache/lucene/search/Similari
: ty.html
:
: I would like to know what are the equations for similarity if the
query
: is a span or boolean query.

That equation does cover BooleanQueries -- the "coord" factor is a
BooleanQuery concept -- strictly speaking that equation describes the
basics of a boolean query containing multiple term queries.

beyond that, the calculations can get a little hard to discribe in
generic equations -- the best way to understand the score calculations
for any of the other query types (including the Span queries) is to look
at the "Explanation.toString()" output for a query on a matching
document -- and consult the code for the corisponding Scorer class to
see if there are any special cases you might not be noticing becuase of
the particular query/doc explanation you are looking at (ie: query
boosts, the coord factor on a boolean query, etc...)

-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25341-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 08 22:09:16 2007
Return-Path: <java-user-return-25341-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67981 invoked from network); 8 Jan 2007 22:09:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Jan 2007 22:09:15 -0000
Received: (qmail 85995 invoked by uid 500); 8 Jan 2007 22:09:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85971 invoked by uid 500); 8 Jan 2007 22:09:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85958 invoked by uid 99); 8 Jan 2007 22:09:14 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Jan 2007 14:09:14 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Jan 2007 14:09:04 -0800
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1H42fb-0005R5-Pq
	for java-user@lucene.apache.org; Mon, 08 Jan 2007 14:08:43 -0800
Message-ID: <8227705.post@talk.nabble.com>
Date: Mon, 8 Jan 2007 14:08:43 -0800 (PST)
From: sashaman <alex.devine@gmail.com>
To: java-user@lucene.apache.org
Subject: Remote Searcher performance and Document retrieval
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: alex.devine@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


I have a question about the performance of the following Lucene setup:

I have a MultiSearcher that contains 3 RemoteSearchables that point to
IndexSearchables on 3 different boxes, and each index contains about 20,000
docs. When an end user runs a search, results are displayed with 20 hits per
page, and each hits shows about 10 fields from the document. My issue is
that the remote protocol used to retrieve the Hits appears to be very
chatty, requiring one remote network call for each Hit retrieved (that is,
each call to Hits.doc(n) ends up making an individual remote call). Thus, to
display a result page to an end user, there are 3 remote search() calls (one
for each index) and 20 remote doc() calls. When I added some performance
monitoring logging to my code, I found that for each results page retrieving
the Documents took more than twice as long as the actual search() call.

It seems like things would be much more performant if instead there were a
method like "Document[] Hits.docs(int[] docIds)" (and a corresponding method
on the Searcher "Document[] Searcher.docs(int[] docIds)") that could return
a bulk set of Documents at once. This way I would only need to make one
remote call to each index for each page of results.

Can anyone comment on this performance issue? Am I doing something wrong, or
there is some other way I can retrieve Documents faster when using a Remote
index?

Thanks,
Alex
-- 
View this message in context: http://www.nabble.com/Remote-Searcher-performance-and-Document-retrieval-tf2942459.html#a8227705
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25342-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 08 22:20:58 2007
Return-Path: <java-user-return-25342-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71172 invoked from network); 8 Jan 2007 22:20:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Jan 2007 22:20:57 -0000
Received: (qmail 9663 invoked by uid 500); 8 Jan 2007 22:20:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9635 invoked by uid 500); 8 Jan 2007 22:20:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9624 invoked by uid 99); 8 Jan 2007 22:20:58 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Jan 2007 14:20:58 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lucenelist2005@danielnaber.de designates 80.67.18.16 as permitted sender)
Received: from [80.67.18.16] (HELO smtprelay04.ispgateway.de) (80.67.18.16)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Jan 2007 14:20:47 -0800
Received: (qmail 27575 invoked from network); 8 Jan 2007 22:20:23 -0000
Received: from unknown (HELO p5496ceee.dip.t-dialin.net) ([pbs]695637@[84.150.206.238])
          (envelope-sender <lucenelist2005@danielnaber.de>)
          by smtprelay04.ispgateway.de (qmail-ldap-1.03) with RC4-MD5 encrypted SMTP
          for <java-user@lucene.apache.org>; 8 Jan 2007 22:20:23 -0000
From: Daniel Naber <lucenelist2005@danielnaber.de>
To: java-user@lucene.apache.org
Subject: Re: Remote Searcher performance and Document retrieval
Date: Mon, 8 Jan 2007 23:22:31 +0100
User-Agent: KMail/1.8.2
References: <8227705.post@talk.nabble.com>
In-Reply-To: <8227705.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="us-ascii"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200701082322.31179@danielnaber.de>
X-Virus-Checked: Checked by ClamAV on apache.org

On Monday 08 January 2007 23:08, sashaman wrote:

> Can anyone comment on this performance issue?

Have you compared to a local index? It's not uncommon for several doc() 
calls to take more time than searching, as doc() requires a lot I/O, even 
locally.

Regards
 Daniel

-- 
http://www.danielnaber.de

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25343-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 08 22:48:44 2007
Return-Path: <java-user-return-25343-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79405 invoked from network); 8 Jan 2007 22:48:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Jan 2007 22:48:43 -0000
Received: (qmail 52227 invoked by uid 500); 8 Jan 2007 22:48:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 51920 invoked by uid 500); 8 Jan 2007 22:48:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 51909 invoked by uid 99); 8 Jan 2007 22:48:43 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Jan 2007 14:48:43 -0800
X-ASF-Spam-Status: No, hits=2.8 required=10.0
	tests=HTML_MESSAGE,INFO_TLD,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of edirisinghe.s@gmail.com designates 64.233.162.235 as permitted sender)
Received: from [64.233.162.235] (HELO nz-out-0506.google.com) (64.233.162.235)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Jan 2007 14:48:34 -0800
Received: by nz-out-0506.google.com with SMTP id i1so3735919nzh
        for <java-user@lucene.apache.org>; Mon, 08 Jan 2007 14:48:13 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=U12rx+6nVYiZbsa1W8Anasgdb4UArugzY47cQ1C8o/uATAdBuMpV2xT2MMVW4zCne9wP6XO/b5ndtZ1268QqMunbLyP3NpIY3fqUvdTKsr5aJ7G/3N0kUSWsNpHzvsyNejoyRWJHw2EZQ+AT9QhxYwWY+z6ou9ctywV1CUjM9SM=
Received: by 10.65.100.14 with SMTP id c14mr36339894qbm.1168296493501;
        Mon, 08 Jan 2007 14:48:13 -0800 (PST)
Received: by 10.65.251.19 with HTTP; Mon, 8 Jan 2007 14:48:13 -0800 (PST)
Message-ID: <ce5280a30701081448y7db1fe8bq896a7763ecc89981@mail.gmail.com>
Date: Mon, 8 Jan 2007 14:48:13 -0800
From: "S Edirisinghe" <edirisinghe.s@gmail.com>
To: java-user@lucene.apache.org
Subject: opening an IndexWriter for an exisiting index causing lock exception
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_47691_29118693.1168296493459"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_47691_29118693.1168296493459
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hello,

I'm having a write lock problem when I try to open an existing index.
When I try to open the index with the recreate set to false, I get this
exception

java.io.IOException: Lock obtain timed out: Lock@/tmp/lucene-
e683c0b3e52b8094bba62b22617efd41-write.lock
    at org.apache.lucene.store.Lock.obtain(Lock.java:58)
    at org.apache.lucene.index.IndexWriter.<init>(IndexWriter.java:255)
    at org.apache.lucene.index.IndexWriter.<init>(IndexWriter.java:205)
    at im.service.search.impl.InfomunityLuceneIndexManager.openIndex(
InfomunityLuceneIndexManager.java:108)
    at im.service.search.impl.InfomunityLuceneIndexManager.<init>(
InfomunityLuceneIndexManager.java:71)
    at im.service.search.impl.test.InfomunityLuceneIndexManagerTest.<init>(
InfomunityLuceneIndexManagerTest.java:31)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(
NativeConstructorAccessorImpl.java:39)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(
DelegatingConstructorAccessorImpl.java:27)
    at java.lang.reflect.Constructor.newInstance(Constructor.java:494)
    at org.junit.internal.runners.TestClassMethodsRunner.createTest(
TestClassMethodsRunner.java:60)

when I try to open it. If I open it with recreate set to false, it opens
fine, but obviously it destroys the exisiting files. This error happens at
the start of the application. the first thing it starts to do is
...
            try{
                openIndex(false);
            } catch (IOException fe){//if there is no index or it is
incomplete we will have to rebuild it
                log.info("rebuilding index: " + infomunity.getName() + "
id=" + infomunity.getId());

                String msg = "could not open index for " +
infomunity.getName() +
                "\n\t" + fe.getMessage();
                StringWriter sw = new StringWriter() ;
                PrintWriter stackWriter = new PrintWriter( sw );
                fe.printStackTrace(stackWriter);

                log.error(msg + "\n\n" + sw.toString());
            }
...
    private synchronized IndexWriter openIndex(boolean recreate) throws
IOException{
        return (indexWriter = new IndexWriter(path,new
KeywordAnalyzer(),recreate));
    }

All I'm doing is calling open. There is no documents being added. Is there
something I'm missing? At the time I start the application there are no lock
files in the tmp directory.

thanks

------=_Part_47691_29118693.1168296493459--

From java-user-return-25344-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 08 22:59:25 2007
Return-Path: <java-user-return-25344-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81219 invoked from network); 8 Jan 2007 22:59:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Jan 2007 22:59:24 -0000
Received: (qmail 66261 invoked by uid 500); 8 Jan 2007 22:59:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66227 invoked by uid 500); 8 Jan 2007 22:59:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66106 invoked by uid 99); 8 Jan 2007 22:59:23 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Jan 2007 14:59:23 -0800
X-ASF-Spam-Status: No, hits=0.9 required=10.0
	tests=FORGED_YAHOO_RCVD,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Jan 2007 14:58:18 -0800
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1H43Qv-0005Fe-Hm
	for java-user@lucene.apache.org; Mon, 08 Jan 2007 14:57:37 -0800
Message-ID: <8228447.post@talk.nabble.com>
Date: Mon, 8 Jan 2007 14:57:37 -0800 (PST)
From: escher2k <escher2k@yahoo.com>
To: java-user@lucene.apache.org
Subject: Build issue...
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: escher2k@yahoo.com
X-Virus-Checked: Checked by ClamAV on apache.org


I am trying to use the build from Jan. 5, 2007 to incorporate with Solr (
compiled using javac 1.5.0_02 on Solaris). When I try to add a new document
to the index, I always get a class def found error. 

Posting file vidcard.xml to http://localhost:8983/solr/update
<result status="1">java.lang.NoClassDefFoundError:
org/apache/lucene/index/Posting
        at
org.apache.lucene.index.DocumentWriter.addPosition(DocumentWriter.java:227)
        at
org.apache.lucene.index.DocumentWriter.invertDocument(DocumentWriter.java:149)
        at
org.apache.lucene.index.DocumentWriter.addDocument(DocumentWriter.java:95)
        at
org.apache.lucene.index.IndexWriter.addDocument(IndexWriter.java:640)
        at
org.apache.lucene.index.IndexWriter.addDocument(IndexWriter.java:622)
        at
org.apache.solr.update.DirectUpdateHandler2.addDoc(DirectUpdateHandler2.java:258)
        at org.apache.solr.core.SolrCore.update(SolrCore.java:716)
        at
org.apache.solr.servlet.SolrUpdateServlet.doPost(SolrUpdateServlet.java:53)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:616)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:689)
        at
org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:428)
        at
org.mortbay.jetty.servlet.WebApplicationHandler.dispatch(WebApplicationHandler.java:473)
        at
org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:568)
        at org.mortbay.http.HttpContext.handle(HttpContext.java:1530)
        at
org.mortbay.jetty.servlet.WebApplicationContext.handle(WebApplicationContext.java:633)
        at org.mortbay.http.HttpContext.handle(HttpContext.java:1482)
        at org.mortbay.http.HttpServer.service(HttpServer.java:909)
        at org.mortbay.http.HttpConnection.service(HttpConnection.java:820)
        at
org.mortbay.http.HttpConnection.handleNext(HttpConnection.java:986)
        at org.mortbay.http.HttpConnection.handle(HttpConnection.java:837)
        at
org.mortbay.http.SocketListener.handleConnection(SocketListener.java:245)
        at org.mortbay.util.ThreadedServer.handle(ThreadedServer.java:357)
        at org.mortbay.util.ThreadPool$PoolThread.run(ThreadPool.java:534)
</result>
<result status="0"></result>

Upon examining further, it looks like the Posting class is included in the
DocumentWriter.java file, but
the jar file doesn't seem to include this when it is built. The file is here
-
http://svn.apache.org/viewvc/lucene/java/branches/lucene_2_0/src/java/org/apache/lucene/index/DocumentWriter.java?view=markup

Anyone else face a similar issue.

-- 
View this message in context: http://www.nabble.com/Build-issue...-tf2942700.html#a8228447
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25345-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 08 23:09:46 2007
Return-Path: <java-user-return-25345-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 83582 invoked from network); 8 Jan 2007 23:09:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Jan 2007 23:09:46 -0000
Received: (qmail 81279 invoked by uid 500); 8 Jan 2007 23:09:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80592 invoked by uid 500); 8 Jan 2007 23:09:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80581 invoked by uid 99); 8 Jan 2007 23:09:46 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Jan 2007 15:09:46 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Jan 2007 15:09:36 -0800
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1H43cB-0007eq-LH
	for java-user@lucene.apache.org; Mon, 08 Jan 2007 15:09:15 -0800
Message-ID: <8228692.post@talk.nabble.com>
Date: Mon, 8 Jan 2007 15:09:15 -0800 (PST)
From: sashaman <alex.devine@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Remote Searcher performance and Document retrieval
In-Reply-To: <200701082322.31179@danielnaber.de>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: alex.devine@gmail.com
References: <8227705.post@talk.nabble.com> <200701082322.31179@danielnaber.de>
X-Virus-Checked: Checked by ClamAV on apache.org


No, I haven't compared it to a local index, but when working on other
projects in the past I've always seen that "chatty" remote access can really
hurt performance, and that batching up multiple calls into a single remote
access saves a lot of time.

Alex

-- 
View this message in context: http://www.nabble.com/Remote-Searcher-performance-and-Document-retrieval-tf2942459.html#a8228692
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25346-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 08 23:41:26 2007
Return-Path: <java-user-return-25346-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90136 invoked from network); 8 Jan 2007 23:41:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Jan 2007 23:41:23 -0000
Received: (qmail 8233 invoked by uid 500); 8 Jan 2007 23:40:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8070 invoked by uid 500); 8 Jan 2007 23:40:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8009 invoked by uid 99); 8 Jan 2007 23:40:26 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Jan 2007 15:40:26 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [66.111.4.29] (HELO out5.smtp.messagingengine.com) (66.111.4.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Jan 2007 15:39:19 -0800
Received: from out1.internal (unknown [10.202.2.149])
	by out1.messagingengine.com (Postfix) with ESMTP id 1C5787156C
	for <java-user@lucene.apache.org>; Mon,  8 Jan 2007 18:35:09 -0500 (EST)
Received: from heartbeat1.messagingengine.com ([10.202.2.160])
  by out1.internal (MEProxy); Mon, 08 Jan 2007 18:35:09 -0500
X-Sasl-enc: /XbyfOB1F0sg1UOPotw9udgOg5X1HztDY2+vSTH0/IY1 1168299308
Received: from [10.17.4.90] (pool-72-70-33-214.bstnma.fios.verizon.net [72.70.33.214])
	by mail.messagingengine.com (Postfix) with ESMTP id D31B52C4BF
	for <java-user@lucene.apache.org>; Mon,  8 Jan 2007 18:35:08 -0500 (EST)
Message-ID: <45A2D5F5.3010206@mikemccandless.com>
Date: Mon, 08 Jan 2007 18:38:29 -0500
From: Michael McCandless <lucene@mikemccandless.com>
User-Agent: Thunderbird 1.5.0.9 (Windows/20061207)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: opening an IndexWriter for an exisiting index causing lock exception
References: <ce5280a30701081448y7db1fe8bq896a7763ecc89981@mail.gmail.com>
In-Reply-To: <ce5280a30701081448y7db1fe8bq896a7763ecc89981@mail.gmail.com>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

S Edirisinghe wrote:

> I'm having a write lock problem when I try to open an existing index.
> When I try to open the index with the recreate set to false, I get this
> exception
> 
> java.io.IOException: Lock obtain timed out: Lock@/tmp/lucene-
> e683c0b3e52b8094bba62b22617efd41-write.lock
>    at org.apache.lucene.store.Lock.obtain(Lock.java:58)
>    at org.apache.lucene.index.IndexWriter.<init>(IndexWriter.java:255)
>    at org.apache.lucene.index.IndexWriter.<init>(IndexWriter.java:205)
>    at im.service.search.impl.InfomunityLuceneIndexManager.openIndex(
> InfomunityLuceneIndexManager.java:108)
>    at im.service.search.impl.InfomunityLuceneIndexManager.<init>(
> InfomunityLuceneIndexManager.java:71)
>    at im.service.search.impl.test.InfomunityLuceneIndexManagerTest.<init>(
> InfomunityLuceneIndexManagerTest.java:31)
>    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
>    at sun.reflect.NativeConstructorAccessorImpl.newInstance(
> NativeConstructorAccessorImpl.java:39)
>    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(
> DelegatingConstructorAccessorImpl.java:27)
>    at java.lang.reflect.Constructor.newInstance(Constructor.java:494)
>    at org.junit.internal.runners.TestClassMethodsRunner.createTest(
> TestClassMethodsRunner.java:60)

Which version of Lucene are you using?

By far the most common cause of this is a leftover lock file from a
previous un-graceful exit.

But it sounds like you've checked that already.

So if you're certain that this lock file name is not in fact present
when you start your application, maybe double check that no other code
is creating an IndexWriter (or that your openIndex is not being called
more than once)?  Or you're not running two threads through this code?

Actually, since you're running under Junit, are you sure there wasn't
another test case that had failed to close its writer against this
index?

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25347-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 09 01:53:40 2007
Return-Path: <java-user-return-25347-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 17444 invoked from network); 9 Jan 2007 01:53:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Jan 2007 01:53:39 -0000
Received: (qmail 46981 invoked by uid 500); 9 Jan 2007 01:53:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46897 invoked by uid 500); 9 Jan 2007 01:53:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46886 invoked by uid 99); 9 Jan 2007 01:53:40 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Jan 2007 17:53:40 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of edirisinghe.s@gmail.com designates 64.233.162.228 as permitted sender)
Received: from [64.233.162.228] (HELO nz-out-0506.google.com) (64.233.162.228)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Jan 2007 17:53:31 -0800
Received: by nz-out-0506.google.com with SMTP id i1so3768775nzh
        for <java-user@lucene.apache.org>; Mon, 08 Jan 2007 17:53:10 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=JFPh17IKRKPNSowbN3yeQqQ2e4eKjeofrhMkd1pSxDjruOkLIIk8QO9g1RTvXjNAse+dVZj+zUCbp7m1R+V3DmuurKHv/9ZjlzzVfQgyVWpdxwvyYf0WQn5TGkfI+4Wq2ISFXp5AAQi4ByxEE3iUDM8q/mLdMVW6qLhrl3al8Ek=
Received: by 10.65.154.10 with SMTP id g10mr29076qbo.1168307590545;
        Mon, 08 Jan 2007 17:53:10 -0800 (PST)
Received: by 10.65.251.19 with HTTP; Mon, 8 Jan 2007 17:53:10 -0800 (PST)
Message-ID: <ce5280a30701081753y33249250j955f38a4cf9112e1@mail.gmail.com>
Date: Mon, 8 Jan 2007 17:53:10 -0800
From: "S Edirisinghe" <edirisinghe.s@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: opening an IndexWriter for an exisiting index causing lock exception
In-Reply-To: <45A2D5F5.3010206@mikemccandless.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_49387_19387151.1168307590476"
References: <ce5280a30701081448y7db1fe8bq896a7763ecc89981@mail.gmail.com>
	 <45A2D5F5.3010206@mikemccandless.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_49387_19387151.1168307590476
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Thanks Mike, you are right. There was a really bad test method that didn't
clean up after itself. Thanks for the heads up. This was not a Lucene
problem, it was just me not going through all of the unit test methods.

On 1/8/07, Michael McCandless <lucene@mikemccandless.com> wrote:
>
> S Edirisinghe wrote:
>
> > I'm having a write lock problem when I try to open an existing index.
> > When I try to open the index with the recreate set to false, I get this
> > exception
> >
> > java.io.IOException: Lock obtain timed out: Lock@/tmp/lucene-
> > e683c0b3e52b8094bba62b22617efd41-write.lock
> >    at org.apache.lucene.store.Lock.obtain(Lock.java:58)
> >    at org.apache.lucene.index.IndexWriter.<init>(IndexWriter.java:255)
> >    at org.apache.lucene.index.IndexWriter.<init>(IndexWriter.java:205)
> >    at im.service.search.impl.InfomunityLuceneIndexManager.openIndex(
> > InfomunityLuceneIndexManager.java:108)
> >    at im.service.search.impl.InfomunityLuceneIndexManager.<init>(
> > InfomunityLuceneIndexManager.java:71)
> >    at im.service.search.impl.test.InfomunityLuceneIndexManagerTest
> .<init>(
> > InfomunityLuceneIndexManagerTest.java:31)
> >    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native
> Method)
> >    at sun.reflect.NativeConstructorAccessorImpl.newInstance(
> > NativeConstructorAccessorImpl.java:39)
> >    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(
> > DelegatingConstructorAccessorImpl.java:27)
> >    at java.lang.reflect.Constructor.newInstance(Constructor.java:494)
> >    at org.junit.internal.runners.TestClassMethodsRunner.createTest(
> > TestClassMethodsRunner.java:60)
>
> Which version of Lucene are you using?
>
> By far the most common cause of this is a leftover lock file from a
> previous un-graceful exit.
>
> But it sounds like you've checked that already.
>
> So if you're certain that this lock file name is not in fact present
> when you start your application, maybe double check that no other code
> is creating an IndexWriter (or that your openIndex is not being called
> more than once)?  Or you're not running two threads through this code?
>
> Actually, since you're running under Junit, are you sure there wasn't
> another test case that had failed to close its writer against this
> index?
>
> Mike
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_49387_19387151.1168307590476--

From java-user-return-25348-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 09 07:37:19 2007
Return-Path: <java-user-return-25348-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85965 invoked from network); 9 Jan 2007 07:37:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Jan 2007 07:37:18 -0000
Received: (qmail 61162 invoked by uid 500); 9 Jan 2007 07:37:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61138 invoked by uid 500); 9 Jan 2007 07:37:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61123 invoked by uid 99); 9 Jan 2007 07:37:18 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Jan 2007 23:37:18 -0800
X-ASF-Spam-Status: No, hits=2.8 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [206.190.38.56] (HELO web50302.mail.yahoo.com) (206.190.38.56)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 08 Jan 2007 23:37:07 -0800
Received: (qmail 30782 invoked by uid 60001); 9 Jan 2007 07:36:46 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=YDIuz/M0a9fErtCJN0AlCe1BUGwDalRTuxxw3TexERwyftZKVSwHm85H//NFo7quEXgro4Ts0HKxJjhBCBkNCjFPHsQztJj/K9MEZGJw7b+ysextWtLQcolEX2ZxzheCXNtbsVWg7wabXykTGlwMgblylvfeNKbdAMilMQXterw=  ;
Message-ID: <20070109073646.30780.qmail@web50302.mail.yahoo.com>
Received: from [58.63.157.46] by web50302.mail.yahoo.com via HTTP; Mon, 08 Jan 2007 23:36:46 PST
Date: Mon, 8 Jan 2007 23:36:46 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: .sN (separate norms files) and NO_NORMS
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=ascii
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,=0A=0AI recently run the FieldNormModifier (see http://issues.apache.org=
/jira/browse/LUCENE-741 ) on 8 fields that I wanted to turn into NO_NORMS f=
ields.  I run this on several optimized .cfs indices.  Afterwards I noticed=
 that *some* (but not all!) indices contained 8 .sN (where N is a number) f=
iles.  Those are norm files, I believe (Lucene 2.0.0).  Meanwhile, the .cfs=
 file remained untouched.  Does anyone know how to explain this?=0A=0AWhat =
bugs me is:=0A- Why was the original .cfs not modified?=0A- Why did .sN fil=
es show up separately?=0A=0AWhat bugs my colleague (hi Brian!) is:=0A- Why =
are there separate norms for each NO_NORMS field, and not just 1 for all of=
 them?=0A(my answer is that the files still exists like they exist for non-=
NO_NORMS fields, it's just that they are full of 1.0s, but I'm not absolute=
ly sure that's the correct answer.)=0A=0AI would have expected the .cfs fil=
e to get modified.  Or I'd expect to see 8 .sN files along the unmodified .=
cfs in *all* index directories I run this against, and not just some.=0A=0A=
The essential, index-modifying part of FieldNormModifier is this:=0A=0A    =
  reader =3D IndexReader.open(dir);=0A      for (int d =3D 0; d < termCount=
s.length; d++) {=0A        if (! reader.isDeleted(d)) {=0A          if (sim=
 =3D=3D null)=0A            reader.setNorm(d, fieldName, fakeNorms[0]);    =
    // this is my case - turning existing fields into Field.NO_NORMS fields=
.=0A          else=0A            reader.setNorm(d, fieldName, sim.encodeNor=
m(sim.lengthNorm(fieldName, termCounts[d])));=0A        }=0A      }=0A=0AAl=
so, looking at http://lucene.apache.org/java/docs/fileformats.html I don't =
even see any mention of .sN files.=0A=0ADoes anyone has an explanation for =
this before I start digging? =0A=0AThanks,=0AOtis=0A=0A=0A

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25349-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 09 10:56:00 2007
Return-Path: <java-user-return-25349-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59503 invoked from network); 9 Jan 2007 10:55:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Jan 2007 10:55:59 -0000
Received: (qmail 24481 invoked by uid 500); 9 Jan 2007 10:55:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24454 invoked by uid 500); 9 Jan 2007 10:55:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24443 invoked by uid 99); 9 Jan 2007 10:55:59 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Jan 2007 02:55:59 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of zhouchengly@gmail.com designates 64.233.182.189 as permitted sender)
Received: from [64.233.182.189] (HELO nf-out-0910.google.com) (64.233.182.189)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Jan 2007 02:55:50 -0800
Received: by nf-out-0910.google.com with SMTP id a27so85555nfc
        for <java-user@lucene.apache.org>; Tue, 09 Jan 2007 02:55:28 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=czkX5591rTPtKQiXGSbtVWcz+e1V4r8qtkvRDrk/XFYkCN5KAoNGCuds2rhVs8XCur7U3dZL/NyyogUneuFDqfjVkY0phfZyhz8AAm+Puzj/6Z5KViog5onCoO9bYlIZGa4dXQ1/Zd2QFcquRRXKk6YCp5M2KXjvdN6W0j/tgcQ=
Received: by 10.82.153.5 with SMTP id a5mr4868920bue.1168340128564;
        Tue, 09 Jan 2007 02:55:28 -0800 (PST)
Received: by 10.82.100.12 with HTTP; Tue, 9 Jan 2007 02:55:28 -0800 (PST)
Message-ID: <c2f9e9030701090255h6a468364t122a78ae8c1b745a@mail.gmail.com>
Date: Tue, 9 Jan 2007 02:55:28 -0800
From: David <zhouchengly@gmail.com>
To: java-user@lucene.apache.org
Subject: can Lucene index different amount of attributes to one document?
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_103513_13970873.1168340128544"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_103513_13970873.1168340128544
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi all:
    I know that we can use doc.add(attr, value) to add attributes to the
document, can we add different amount of attributes to one document?
for example, can this pseudo code  runnable?

public static Document Document(MyObject o)
{
    Document doc = new Document();

    for(i=0; i<o.attribute_len(); i++)
       if(o.attributes(i).value != "") //only if the attribute exist, we
index it.
              doc.add(new Field(o.attrbute(i).name, o.attrbute(i).value)
....);
    }
    return doc;
}

if we can do this, are there any special steps when search the on these
attributes?

Appreciate your help!



-- 
David

------=_Part_103513_13970873.1168340128544--

From java-user-return-25350-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 09 11:25:52 2007
Return-Path: <java-user-return-25350-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69617 invoked from network); 9 Jan 2007 11:25:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Jan 2007 11:25:51 -0000
Received: (qmail 90091 invoked by uid 500); 9 Jan 2007 11:25:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90064 invoked by uid 500); 9 Jan 2007 11:25:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90052 invoked by uid 99); 9 Jan 2007 11:25:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Jan 2007 03:25:50 -0800
X-ASF-Spam-Status: No, hits=4.0 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST,DNS_FROM_RFC_WHOIS,RCVD_IN_SORBS_WEB
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [206.190.38.62] (HELO web50308.mail.yahoo.com) (206.190.38.62)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 09 Jan 2007 03:25:39 -0800
Received: (qmail 66472 invoked by uid 60001); 9 Jan 2007 11:25:18 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=W8hLcOziOjrvgfb5l93J6fDVKWISvQpHwIOcdyQ7acJwvPxNgucpCLIPifTa04aTSLYG73IHyMxI79TzaZ4Pp+ovFjgdvv1wR2XG+6zD5A6WVXnjXPrRBCyaQY4ZSlfgMLlQU0gsCFZEnb730MhgmdSWYgmaspB0bzs8USYQ8Do=  ;
Message-ID: <20070109112518.66470.qmail@web50308.mail.yahoo.com>
Received: from [58.63.148.234] by web50308.mail.yahoo.com via HTTP; Tue, 09 Jan 2007 03:25:18 PST
Date: Tue, 9 Jan 2007 03:25:18 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: can Lucene index different amount of attributes to one document?
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=ascii
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Yes, documents can have different fields.  One document can have fields A a=
nd B, and another document can have fields C and D.=0A=0AOtis=0A=0A----- Or=
iginal Message ----=0AFrom: David <zhouchengly@gmail.com>=0ATo: java-user@l=
ucene.apache.org=0ASent: Tuesday, January 9, 2007 5:55:28 AM=0ASubject: can=
 Lucene index different amount of attributes to one document?=0A=0AHi all:=
=0A    I know that we can use doc.add(attr, value) to add attributes to the=
=0Adocument, can we add different amount of attributes to one document?=0Af=
or example, can this pseudo code  runnable?=0A=0Apublic static Document Doc=
ument(MyObject o)=0A{=0A    Document doc =3D new Document();=0A=0A    for(i=
=3D0; i<o.attribute_len(); i++)=0A       if(o.attributes(i).value !=3D "") =
//only if the attribute exist, we=0Aindex it.=0A              doc.add(new F=
ield(o.attrbute(i).name, o.attrbute(i).value)=0A....);=0A    }=0A    return=
 doc;=0A}=0A=0Aif we can do this, are there any special steps when search t=
he on these=0Aattributes?=0A=0AAppreciate your help!=0A=0A=0A=0A-- =0ADavid=
=0A=0A=0A

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25351-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 09 11:38:21 2007
Return-Path: <java-user-return-25351-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76177 invoked from network); 9 Jan 2007 11:38:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Jan 2007 11:38:19 -0000
Received: (qmail 16952 invoked by uid 500); 9 Jan 2007 11:38:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16710 invoked by uid 500); 9 Jan 2007 11:38:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16699 invoked by uid 99); 9 Jan 2007 11:38:19 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Jan 2007 03:38:19 -0800
X-ASF-Spam-Status: No, hits=4.0 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST,DNS_FROM_RFC_WHOIS,RCVD_IN_SORBS_WEB
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [206.190.38.57] (HELO web50303.mail.yahoo.com) (206.190.38.57)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 09 Jan 2007 03:38:08 -0800
Received: (qmail 77118 invoked by uid 60001); 9 Jan 2007 11:37:43 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=s4gqH0O6v/4sUsCRrq1vf8qOvM05YbFcpk8EFyI8AMOzyGZvzj4XgQ0/mFoFUnKHIq8SX+gVe2MFnnoSSi3W2uGTfVrqKFLfudAa+1F/UOBAsmJyUHINALSUUghr7dAdal4fJwwha5rnV5zVPSbkzz8PeP/E5Q1/wweHuVqhLfo=  ;
Message-ID: <20070109113743.77116.qmail@web50303.mail.yahoo.com>
Received: from [58.63.148.234] by web50303.mail.yahoo.com via HTTP; Tue, 09 Jan 2007 03:37:43 PST
Date: Tue, 9 Jan 2007 03:37:42 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: .sN (separate norms files) and NO_NORMS
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=ascii
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,=0A=0AAfter a little digging/debugging, it seems to me that what I am se=
eing is actually normal and expected behaviour.  Morever, it seems that onc=
e a Field is indexed without it being NO_NORMS field, it is not really poss=
ible to make it a trully NO_NORMS field.  From what I can tell, one of the =
key methods is in DocumentWriter:=0A=0A  private final void writeNorms(Stri=
ng segment) throws IOException { =0A    for(int n =3D 0; n < fieldInfos.siz=
e(); n++){=0A      FieldInfo fi =3D fieldInfos.fieldInfo(n);=0A      if(fi.=
isIndexed && !fi.omitNorms){                                               =
                  <=3D=3D here=0A        float norm =3D fieldBoosts[n] * si=
milarity.lengthNorm(fi.name, fieldLengths[n]);=0A        IndexOutput norms =
=3D directory.createOutput(segment + ".f" + n);=0A        try {=0A         =
 norms.writeByte(Similarity.encodeNorm(norm));=0A        } finally {=0A    =
      norms.close();=0A        }=0A      }=0A    }=0A  }=0A=0AThis is where=
 norms for a field are either written if the field is indexed and *not* a N=
O_NORMS field, or not written if the field is indexed and *is* a NO_NORMS f=
ield.=0A=0AI also see this in the FieldInfo class:=0A=0A      if (fi.omitNo=
rms !=3D omitNorms) {=0A        fi.omitNorms =3D false;                // o=
nce norms are stored, always store=0A      }=0A=0AThus, it's not really pos=
sible to completely kill field norms and make the field a genuine NO_NORMS =
field after the fact... is this correct?=0ATherefore, that FieldNormModifie=
r call that tries to turn an existing field into a NO_NORMS field doesn't r=
eally work:=0A=0A            reader.setNorm(d, fieldName, fakeNorms[0]);   =
     // this=0Ais my case - turning existing fields into Field.NO_NORMS fie=
lds.=0A=0AI think this just fakes out a norms file for a given field, and t=
his norms file ends up containing a byte[] of encoded 1.0f's, one for each =
Document.  But this really is completely fake - this just makes the norms b=
e 1.0, while NO_NORMS skips the *writing* of norms file for a given field c=
ompletely.=0A=0AIs the above correct?=0AIf so, is there any way to turn an =
existing field into a genuine NO_NORMS field?=0A=0AThanks,=0AOtis=0A=0A=0A=
=0A----- Original Message ----=0AFrom: Otis Gospodnetic <otis_gospodnetic@y=
ahoo.com>=0ATo: java-user@lucene.apache.org=0ASent: Tuesday, January 9, 200=
7 2:36:46 AM=0ASubject: .sN (separate norms files) and NO_NORMS=0A=0AHi,=0A=
=0AI recently run the FieldNormModifier (see http://issues.apache.org/jira/=
browse/LUCENE-741 ) on 8 fields that I wanted to turn into NO_NORMS fields.=
  I run this on several optimized .cfs indices.  Afterwards I noticed that =
*some* (but not all!) indices contained 8 .sN (where N is a number) files. =
 Those are norm files, I believe (Lucene 2.0.0).  Meanwhile, the .cfs file =
remained untouched.  Does anyone know how to explain this?=0A=0AWhat bugs m=
e is:=0A- Why was the original .cfs not modified?=0A- Why did .sN files sho=
w up separately?=0A=0AWhat bugs my colleague (hi Brian!) is:=0A- Why are th=
ere separate norms for each NO_NORMS field, and not just 1 for all of them?=
=0A(my answer is that the files still exists like they exist for non-NO_NOR=
MS fields, it's just that they are full of 1.0s, but I'm not absolutely sur=
e that's the correct answer.)=0A=0AI would have expected the .cfs file to g=
et modified.  Or I'd expect to see 8 .sN files along the unmodified .cfs in=
 *all* index directories I run this against, and not just some.=0A=0AThe es=
sential, index-modifying part of FieldNormModifier is this:=0A=0A      read=
er =3D IndexReader.open(dir);=0A      for (int d =3D 0; d < termCounts.leng=
th; d++) {=0A        if (! reader.isDeleted(d)) {=0A          if (sim =3D=
=3D null)=0A            reader.setNorm(d, fieldName, fakeNorms[0]);        =
// this is my case - turning existing fields into Field.NO_NORMS fields.=0A=
          else=0A            reader.setNorm(d, fieldName, sim.encodeNorm(si=
m.lengthNorm(fieldName, termCounts[d])));=0A        }=0A      }=0A=0AAlso, =
looking at http://lucene.apache.org/java/docs/fileformats.html I don't even=
 see any mention of .sN files.=0A=0ADoes anyone has an explanation for this=
 before I start digging? =0A=0AThanks,=0AOtis=0A=0A=0A=0A=0A---------------=
------------------------------------------------------=0ATo unsubscribe, e-=
mail: java-user-unsubscribe@lucene.apache.org=0AFor additional commands, e-=
mail: java-user-help@lucene.apache.org=0A=0A=0A=0A

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25352-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 09 13:50:37 2007
Return-Path: <java-user-return-25352-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31580 invoked from network); 9 Jan 2007 13:50:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Jan 2007 13:50:36 -0000
Received: (qmail 60355 invoked by uid 500); 9 Jan 2007 13:50:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60322 invoked by uid 500); 9 Jan 2007 13:50:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60291 invoked by uid 99); 9 Jan 2007 13:50:36 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Jan 2007 05:50:36 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 209.85.132.242 as permitted sender)
Received: from [209.85.132.242] (HELO an-out-0708.google.com) (209.85.132.242)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Jan 2007 05:50:27 -0800
Received: by an-out-0708.google.com with SMTP id c3so1812793ana
        for <java-user@lucene.apache.org>; Tue, 09 Jan 2007 05:50:07 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=DVjPySv6CCc42ddjMX3PeXKDvQucMwdf2srW+0DGxF/IAdgm9Bbt/7lijdsZj95CVYxwRw3m9AeGOONgoYlal1V8NAw2TOufseERtKEjo0rwie//iQdKbDXYPU1NNph4WfRgUxjAfwhVrTR8iiSYgk/PpSTBVJ0Fu/nvjh6MYGk=
Received: by 10.78.185.7 with SMTP id i7mr4464262huf.1168350606407;
        Tue, 09 Jan 2007 05:50:06 -0800 (PST)
Received: by 10.82.162.9 with HTTP; Tue, 9 Jan 2007 05:50:06 -0800 (PST)
Message-ID: <359a92830701090550t5847217braa1c08422c81c4c4@mail.gmail.com>
Date: Tue, 9 Jan 2007 08:50:06 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: can Lucene index different amount of attributes to one document?
In-Reply-To: <20070109112518.66470.qmail@web50308.mail.yahoo.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_79910_3220314.1168350606298"
References: <20070109112518.66470.qmail@web50308.mail.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_79910_3220314.1168350606298
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

But do be aware that, as one should expect, you can get a null result from
doc.get("a") if field "a" isn't in the document. You can use
doc.getFieldsto test ahead of the fetch if you need to.

Erick

On 1/9/07, Otis Gospodnetic <otis_gospodnetic@yahoo.com> wrote:
>
> Yes, documents can have different fields.  One document can have fields A
> and B, and another document can have fields C and D.
>
> Otis
>
> ----- Original Message ----
> From: David <zhouchengly@gmail.com>
> To: java-user@lucene.apache.org
> Sent: Tuesday, January 9, 2007 5:55:28 AM
> Subject: can Lucene index different amount of attributes to one document?
>
> Hi all:
>     I know that we can use doc.add(attr, value) to add attributes to the
> document, can we add different amount of attributes to one document?
> for example, can this pseudo code  runnable?
>
> public static Document Document(MyObject o)
> {
>     Document doc = new Document();
>
>     for(i=0; i<o.attribute_len(); i++)
>        if(o.attributes(i).value != "") //only if the attribute exist, we
> index it.
>               doc.add(new Field(o.attrbute(i).name, o.attrbute(i).value)
> ....);
>     }
>     return doc;
> }
>
> if we can do this, are there any special steps when search the on these
> attributes?
>
> Appreciate your help!
>
>
>
> --
> David
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_79910_3220314.1168350606298--

From java-user-return-25353-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 09 18:42:05 2007
Return-Path: <java-user-return-25353-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71485 invoked from network); 9 Jan 2007 18:42:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Jan 2007 18:42:05 -0000
Received: (qmail 8830 invoked by uid 500); 9 Jan 2007 18:42:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8538 invoked by uid 500); 9 Jan 2007 18:42:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8527 invoked by uid 99); 9 Jan 2007 18:42:05 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Jan 2007 10:42:05 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of yseeley@gmail.com designates 66.249.92.172 as permitted sender)
Received: from [66.249.92.172] (HELO ug-out-1314.google.com) (66.249.92.172)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Jan 2007 10:41:55 -0800
Received: by ug-out-1314.google.com with SMTP id k40so6607808ugc
        for <java-user@lucene.apache.org>; Tue, 09 Jan 2007 10:41:34 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=Kot8LrUucpuaJVlNMwnIUBfjHppbMAxpravW4FYmcmHBr47uiBbQLnm5eDzuMwlvbBtsVtOXRrhx7Vyz0faAQ09+8pwMgJX2ahMCSdtAKVtJGRAT9iOowlGz61w6KQR8FrRhDreESUVK1Yhgmvxnk0jG9hDpISyA49tSNm+p+rE=
Received: by 10.82.138.6 with SMTP id l6mr2899052bud.1168368094094;
        Tue, 09 Jan 2007 10:41:34 -0800 (PST)
Received: by 10.82.126.8 with HTTP; Tue, 9 Jan 2007 10:41:33 -0800 (PST)
Message-ID: <c68e39170701091041k7e178146u85cc6bc5e69f59f2@mail.gmail.com>
Date: Tue, 9 Jan 2007 13:41:33 -0500
From: "Yonik Seeley" <yonik@apache.org>
Sender: yseeley@gmail.com
To: java-user@lucene.apache.org
Subject: Re: .sN (separate norms files) and NO_NORMS
In-Reply-To: <20070109113743.77116.qmail@web50303.mail.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <20070109113743.77116.qmail@web50303.mail.yahoo.com>
X-Google-Sender-Auth: fdfc67cbb1f67308
X-Virus-Checked: Checked by ClamAV on apache.org

On 1/9/07, Otis Gospodnetic <otis_gospodnetic@yahoo.com> wrote:
> After a little digging/debugging, it seems to me that what I am seeing is actually normal and expected behaviour.  Morever, it seems that once a Field is indexed without it being NO_NORMS field, it is not really possible to make it a trully NO_NORMS field.

Correct.  As with many index changes, reindexing from scratch is the
best way to go.

-Yonik
http://incubator.apache.org/solr Solr, the open-source Lucene search server

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25354-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 09 20:05:37 2007
Return-Path: <java-user-return-25354-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94312 invoked from network); 9 Jan 2007 20:05:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Jan 2007 20:05:36 -0000
Received: (qmail 49068 invoked by uid 500); 9 Jan 2007 20:05:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49041 invoked by uid 500); 9 Jan 2007 20:05:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49030 invoked by uid 99); 9 Jan 2007 20:05:34 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Jan 2007 12:05:34 -0800
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of DORONC@il.ibm.com designates 195.212.29.151 as permitted sender)
Received: from [195.212.29.151] (HELO mtagate2.de.ibm.com) (195.212.29.151)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Jan 2007 12:05:23 -0800
Received: from d12nrmr1607.megacenter.de.ibm.com (d12nrmr1607.megacenter.de.ibm.com [9.149.167.49])
	by mtagate2.de.ibm.com (8.13.8/8.13.8) with ESMTP id l09K52UG165276
	for <java-user@lucene.apache.org>; Tue, 9 Jan 2007 20:05:02 GMT
Received: from d12av02.megacenter.de.ibm.com (d12av02.megacenter.de.ibm.com [9.149.165.228])
	by d12nrmr1607.megacenter.de.ibm.com (8.13.6/8.13.6/NCO v8.1.1) with ESMTP id l09K52qI2674784
	for <java-user@lucene.apache.org>; Tue, 9 Jan 2007 21:05:02 +0100
Received: from d12av02.megacenter.de.ibm.com (loopback [127.0.0.1])
	by d12av02.megacenter.de.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id l09K51QH017523
	for <java-user@lucene.apache.org>; Tue, 9 Jan 2007 21:05:01 +0100
Received: from d12mc102.megacenter.de.ibm.com (d12mc102.megacenter.de.ibm.com [9.149.167.114])
	by d12av02.megacenter.de.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id l09K51r4017520
	for <java-user@lucene.apache.org>; Tue, 9 Jan 2007 21:05:01 +0100
In-Reply-To: <20070109073646.30780.qmail@web50302.mail.yahoo.com>
Subject: Re: .sN (separate norms files) and NO_NORMS
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 7.0 HF277 June 21, 2006
Message-ID: <OFA91DF28E.5E415168-ON8825725E.006DE6FF-8825725E.006E2D5C@il.ibm.com>
From: Doron Cohen <DORONC@il.ibm.com>
Date: Tue, 9 Jan 2007 12:03:25 -0800
X-MIMETrack: Serialize by Router on D12MC102/12/M/IBM(Release 7.0.2HF71 | November 3, 2006) at
 09/01/2007 22:05:01
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org

Otis Gospodnetic <otis_gospodnetic@yahoo.com> wrote on 08/01/2007 23:36:46:
> Also, looking at http://lucene.apache.org/java/docs/fileformats.html
> I don't even see any mention of .sN files.

I am almost sure I added that info to fileformats (issue 756).
I'll check what's been with that.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25355-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 09 20:09:58 2007
Return-Path: <java-user-return-25355-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96483 invoked from network); 9 Jan 2007 20:09:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Jan 2007 20:09:58 -0000
Received: (qmail 63752 invoked by uid 500); 9 Jan 2007 20:09:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63725 invoked by uid 500); 9 Jan 2007 20:09:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63714 invoked by uid 99); 9 Jan 2007 20:09:58 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Jan 2007 12:09:58 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of yseeley@gmail.com designates 64.233.182.191 as permitted sender)
Received: from [64.233.182.191] (HELO nf-out-0910.google.com) (64.233.182.191)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Jan 2007 12:09:49 -0800
Received: by nf-out-0910.google.com with SMTP id a27so227342nfc
        for <java-user@lucene.apache.org>; Tue, 09 Jan 2007 12:09:28 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=OoZea7PisQA0RMvHJ9VspnHogabP/4e2CqBRe2ekF8zquiw/OK63wjwBdKs7mAorFzCHmXWJLaAg7sVlYQIRMnqqXimV4Yg+l5YWoq9hwYPtUJhzeXWJZeSHDNdpPV+f78H8XJVOq4lKoDzO4OxIouWidWCPZZ/7VL8eD/ns1OU=
Received: by 10.82.118.2 with SMTP id q2mr3011654buc.1168373368148;
        Tue, 09 Jan 2007 12:09:28 -0800 (PST)
Received: by 10.82.126.8 with HTTP; Tue, 9 Jan 2007 12:09:27 -0800 (PST)
Message-ID: <c68e39170701091209ldbce77ag3131fda901b63e30@mail.gmail.com>
Date: Tue, 9 Jan 2007 15:09:27 -0500
From: "Yonik Seeley" <yonik@apache.org>
Sender: yseeley@gmail.com
To: java-user@lucene.apache.org
Subject: Re: .sN (separate norms files) and NO_NORMS
In-Reply-To: <OFA91DF28E.5E415168-ON8825725E.006DE6FF-8825725E.006E2D5C@il.ibm.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <20070109073646.30780.qmail@web50302.mail.yahoo.com>
	 <OFA91DF28E.5E415168-ON8825725E.006DE6FF-8825725E.006E2D5C@il.ibm.com>
X-Google-Sender-Auth: 395a8a388cf0ba84
X-Virus-Checked: Checked by ClamAV on apache.org

On 1/9/07, Doron Cohen <DORONC@il.ibm.com> wrote:
> Otis Gospodnetic <otis_gospodnetic@yahoo.com> wrote on 08/01/2007 23:36:46:
> > Also, looking at http://lucene.apache.org/java/docs/fileformats.html
> > I don't even see any mention of .sN files.
>
> I am almost sure I added that info to fileformats (issue 756).
> I'll check what's been with that.

It may be in the xml, but I didn't regenerate or sync the site.

-Yonik
http://incubator.apache.org/solr Solr, the open-source Lucene search server

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25356-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 10 00:28:15 2007
Return-Path: <java-user-return-25356-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 87351 invoked from network); 10 Jan 2007 00:28:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Jan 2007 00:28:14 -0000
Received: (qmail 4204 invoked by uid 500); 10 Jan 2007 00:28:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4178 invoked by uid 500); 10 Jan 2007 00:28:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4167 invoked by uid 99); 10 Jan 2007 00:28:13 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Jan 2007 16:28:13 -0800
X-ASF-Spam-Status: No, hits=2.8 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [206.190.39.214] (HELO web50312.mail.yahoo.com) (206.190.39.214)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 09 Jan 2007 16:28:00 -0800
Received: (qmail 34830 invoked by uid 60001); 10 Jan 2007 00:27:39 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=K7Smker1sokmFLmlevsihl2Nwz0/8Iqb/rhAG68xKNjd0xM/Ql7tLfmKTbv3kbgwJltMoj3ehbuJDTASjyVDsqJ8f2fTE//wD0IzppjbftScA6tT2kDYGPdBtodtATfUYouVOcGE4xexp+HHFgeTbNtyP8EBsMXw4oU3IKY38fc=  ;
Message-ID: <20070110002739.34828.qmail@web50312.mail.yahoo.com>
Received: from [58.63.147.3] by web50312.mail.yahoo.com via HTTP; Tue, 09 Jan 2007 16:27:39 PST
Date: Tue, 9 Jan 2007 16:27:39 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: .sN (separate norms files) and NO_NORMS
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=ascii
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,=0AGot this thought while eating noodles yesterday...=0A=0ACouldn't one =
convert a non NO_NORMS field to a genuine NO_NORMS field by:=0A1. expanding=
 an index to a multi-file index (if the index was a .cfs one)=0A2. removing=
 the appropriate .fN file from the index directory=0A3. switching that omit=
Norms bit in FieldInfo=0A=0AI'm not sure how possible or how hard 3. is, bu=
t I see this omitNorms bit in FieldInfo.read(IndexInput) and FieldInfo.writ=
e(IndexOutput).=0A=0AMaybe something like:=0A=0A  public void change(IndexI=
nput input, IndexOutput output, boolean omitNorms) throws IOException {=0A =
   int size =3D input.readVInt();//read in the size=0A    for (int i =3D 0;=
 i < size; i++) {=0A      String name =3D input.readString().intern();=0A  =
    byte bits =3D input.readByte();=0A      boolean isIndexed =3D (bits & I=
S_INDEXED) !=3D 0;=0A      boolean storeTermVector =3D (bits & STORE_TERMVE=
CTOR) !=3D 0;=0A      boolean storePositionsWithTermVector =3D (bits & STOR=
E_POSITIONS_WITH_TERMVECTOR) !=3D 0;=0A      boolean storeOffsetWithTermVec=
tor =3D (bits & STORE_OFFSET_WITH_TERMVECTOR) !=3D 0;=0A      // ignore wha=
t's in the index, use what the caller says it wants=0A      //boolean omitN=
orms =3D (bits & OMIT_NORMS) !=3D 0;=0A      =0A      addInternal(name, isI=
ndexed, storeTermVector, storePositionsWithTermVector, storeOffsetWithTermV=
ector, omitNorms);=0A=0A      write(output);=0A    }=0A=0AI didn't try this=
, of course, but I'm curious if this general approach would work, at least =
in case of norms.  If it works for norms, maybe it would also work for othe=
r field attributes, if their data is stoerd in separate files and easily de=
tachable from the other index files.=0A=0AThanks,=0AOtis=0A=0A=0A----- Orig=
inal Message ----=0AFrom: Yonik Seeley <yonik@apache.org>=0ATo: java-user@l=
ucene.apache.org=0ASent: Tuesday, January 9, 2007 1:41:33 PM=0ASubject: Re:=
 .sN (separate norms files) and NO_NORMS=0A=0AOn 1/9/07, Otis Gospodnetic <=
otis_gospodnetic@yahoo.com> wrote:=0A> After a little digging/debugging, it=
 seems to me that what I am seeing is actually normal and expected behaviou=
r.  Morever, it seems that once a Field is indexed without it being NO_NORM=
S field, it is not really possible to make it a trully NO_NORMS field.=0A=
=0ACorrect.  As with many index changes, reindexing from scratch is the=0Ab=
est way to go.=0A=0A-Yonik=0Ahttp://incubator.apache.org/solr Solr, the ope=
n-source Lucene search server=0A=0A----------------------------------------=
-----------------------------=0ATo unsubscribe, e-mail: java-user-unsubscri=
be@lucene.apache.org=0AFor additional commands, e-mail: java-user-help@luce=
ne.apache.org=0A=0A=0A=0A

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25357-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 10 01:33:40 2007
Return-Path: <java-user-return-25357-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8433 invoked from network); 10 Jan 2007 01:33:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Jan 2007 01:33:39 -0000
Received: (qmail 99256 invoked by uid 500); 10 Jan 2007 01:33:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 99219 invoked by uid 500); 10 Jan 2007 01:33:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 99208 invoked by uid 99); 10 Jan 2007 01:33:39 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Jan 2007 17:33:39 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of yseeley@gmail.com designates 64.233.182.189 as permitted sender)
Received: from [64.233.182.189] (HELO nf-out-0910.google.com) (64.233.182.189)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Jan 2007 17:33:30 -0800
Received: by nf-out-0910.google.com with SMTP id a27so302075nfc
        for <java-user@lucene.apache.org>; Tue, 09 Jan 2007 17:33:09 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=gS0tpIsfb+x78MMqxdJW6Alg3jPm6hgZlnAmfjG7LkQRjpV05KApn7PBzOyCcn/ZH4zT7XY/QDG6UQz1VwtgiXUYxhCthwlZ28kudxaxeRT1d9RgYC7ywYJTR42+Dy6Bfs6Eip6xkHG7qZDArPqk4HIw3doAzxGU8nsdd3Ne73k=
Received: by 10.82.183.19 with SMTP id g19mr2776074buf.1168392789071;
        Tue, 09 Jan 2007 17:33:09 -0800 (PST)
Received: by 10.82.126.8 with HTTP; Tue, 9 Jan 2007 17:33:09 -0800 (PST)
Message-ID: <c68e39170701091733t676a67dbmf5010a86196226fd@mail.gmail.com>
Date: Tue, 9 Jan 2007 20:33:09 -0500
From: "Yonik Seeley" <yonik@apache.org>
Sender: yseeley@gmail.com
To: java-user@lucene.apache.org
Subject: Re: .sN (separate norms files) and NO_NORMS
In-Reply-To: <20070110002739.34828.qmail@web50312.mail.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <20070110002739.34828.qmail@web50312.mail.yahoo.com>
X-Google-Sender-Auth: cae992a7207600ca
X-Virus-Checked: Checked by ClamAV on apache.org

On 1/9/07, Otis Gospodnetic <otis_gospodnetic@yahoo.com> wrote:
> Couldn't one convert a non NO_NORMS field to a genuine NO_NORMS field by:
> 1. expanding an index to a multi-file index (if the index was a .cfs one)
> 2. removing the appropriate .fN file from the index directory
> 3. switching that omitNorms bit in FieldInfo

Yes, that would work for some custom code.  Step (2) might even be
done for you if you do step 3 first and then do an optimize.

This stuff seems more like the exception than the norm :-) though, so
I think it might not be worth the burden of supporting it in the
public API.

-Yonik

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25358-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 10 02:35:38 2007
Return-Path: <java-user-return-25358-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26743 invoked from network); 10 Jan 2007 02:35:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Jan 2007 02:35:37 -0000
Received: (qmail 55639 invoked by uid 500); 10 Jan 2007 02:35:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55605 invoked by uid 500); 10 Jan 2007 02:35:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55594 invoked by uid 99); 10 Jan 2007 02:35:36 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Jan 2007 18:35:36 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [203.16.214.141] (HELO ipmail02.adl2.internode.on.net) (203.16.214.141)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Jan 2007 18:35:26 -0800
Received: from hardlight.com.au (HELO [192.168.1.6]) ([203.122.246.130])
  by ipmail02.adl2.internode.on.net with ESMTP; 10 Jan 2007 13:05:01 +1030
X-IronPort-AV: i="4.13,165,1167571800"; 
   d="scan'208"; a="69496866:sNHT24512439"
Message-ID: <45A450CE.3000909@hardlight.com.au>
Date: Wed, 10 Jan 2007 13:04:54 +1030
From: Jason <jeacott@hardlight.com.au>
Reply-To:  jeacott@hardlight.com.au
User-Agent: Thunderbird 1.5.0.8 (Windows/20061025)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: hithighlighter bug
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi all,
	I have come across what I think is a curious but insidious bug with the 
java lucene hit highlighter. I updated to the latest version of lucene 
and the highlighter because I first found this problem in the lucene 
v1.4 version, unfortunately its still there in v2.0.0 versions.

I am indexing XML documents and am also using the hit highlighter for 
search results. This works perfectly in almost every case except for one.

in my I have this:

public class LuceneSearch implements 
org.apache.lucene.search.highlight.Formatter
{
...
	public String highlightTerm(String originalText , TokenGroup group)
	{
		if(group.getTotalScore()<=0)
		{
			return originalText;
		}
		return "<em>" + originalText + "</em>";
	}

when I search for -> Acquisition Plan <-
in my search results I get:
<summary>(ancilliary stuff deleted)....
attached to the <em>Acquisition</em>
< em>Plan</em>and signed</summary>

notice the space between the < and e in the second < em>
This only occurs for these search terms and for this document (as far as 
I know) but because its part of a much larger XML document it breaks the 
whole thing.

the original XML is unremarkable with no strange characters surrounding 
these terms - a snipit from the relevant paragraph from which these 
highlighted terms come:

-> attached to the Acquisition Plan and signed off<-

has anyone seen anything like this before? is this a genuine new bug or 
something of which the lucene folk (or at least whoever wrote the 
highlighter) are aware? can anyone think of a way to fix this without 
scanning every element in my result text for rogue spaces?

Thanks in advance
Jason.






---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25359-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 10 03:09:23 2007
Return-Path: <java-user-return-25359-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30724 invoked from network); 10 Jan 2007 03:09:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Jan 2007 03:09:22 -0000
Received: (qmail 75936 invoked by uid 500); 10 Jan 2007 03:09:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75897 invoked by uid 500); 10 Jan 2007 03:09:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75876 invoked by uid 99); 10 Jan 2007 03:09:23 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Jan 2007 19:09:23 -0800
X-ASF-Spam-Status: No, hits=2.9 required=10.0
	tests=HTML_10_20,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of zhouchengly@gmail.com designates 64.233.182.190 as permitted sender)
Received: from [64.233.182.190] (HELO nf-out-0910.google.com) (64.233.182.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Jan 2007 19:09:14 -0800
Received: by nf-out-0910.google.com with SMTP id a27so323603nfc
        for <java-user@lucene.apache.org>; Tue, 09 Jan 2007 19:08:52 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=Si0Iq/xC492QJrusaZHS64KY+yO6HhHNgiBfJsj2oYP0ugfHgame11bl7jy6UyG7nGC1NkckrYwC0L40cviihPAcy8byTMpUQyrL2Idz25Rv49yb1/HUig/Cv4x46HMA0BRAcsGY9uUO65BWc66UPULHn2ydoYsMEbisuSg6Za4=
Received: by 10.82.120.15 with SMTP id s15mr3483879buc.1168398532551;
        Tue, 09 Jan 2007 19:08:52 -0800 (PST)
Received: by 10.82.100.12 with HTTP; Tue, 9 Jan 2007 19:08:52 -0800 (PST)
Message-ID: <c2f9e9030701091908s65113f36wfca30e604a0130c0@mail.gmail.com>
Date: Tue, 9 Jan 2007 19:08:52 -0800
From: David <zhouchengly@gmail.com>
To: java-user@lucene.apache.org
Subject: How to support float type term in Lucene?
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_125023_15395507.1168398532474"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_125023_15395507.1168398532474
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi all:
    How can I index float type term in Lucene so that we can search in a
range? I learned that it is possible to convert float to sortable string,
but I don't know how to do it.

-- 
David

------=_Part_125023_15395507.1168398532474--

From java-user-return-25360-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 10 03:25:25 2007
Return-Path: <java-user-return-25360-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33042 invoked from network); 10 Jan 2007 03:25:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Jan 2007 03:25:24 -0000
Received: (qmail 92277 invoked by uid 500); 10 Jan 2007 03:25:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92244 invoked by uid 500); 10 Jan 2007 03:25:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92233 invoked by uid 99); 10 Jan 2007 03:25:24 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Jan 2007 19:25:24 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of zhouchengly@gmail.com designates 64.233.182.186 as permitted sender)
Received: from [64.233.182.186] (HELO nf-out-0910.google.com) (64.233.182.186)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Jan 2007 19:25:15 -0800
Received: by nf-out-0910.google.com with SMTP id a27so327338nfc
        for <java-user@lucene.apache.org>; Tue, 09 Jan 2007 19:24:53 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=k17Qq+Lyekc/arxu++tEN62iOUwhiXVQafQDBlFI80p0qyDspvWRMTBsSZwYd+9i1rbgkTOClReXCAZn/G8CK6Kq77fnuJDUveiP84QfhxT72exNiWrsPOu/P5U0jb4j3KEXcpGjW9bYv7nzDA0DpjbHUKisR2+7IKE0sBXTxLE=
Received: by 10.82.120.14 with SMTP id s14mr2996428buc.1168399493861;
        Tue, 09 Jan 2007 19:24:53 -0800 (PST)
Received: by 10.82.100.12 with HTTP; Tue, 9 Jan 2007 19:24:53 -0800 (PST)
Message-ID: <c2f9e9030701091924x481b6f94u7f74032330139e87@mail.gmail.com>
Date: Tue, 9 Jan 2007 19:24:53 -0800
From: David <zhouchengly@gmail.com>
To: java-user@lucene.apache.org
Subject: can we add duplicated field in Lucene?
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_125339_14543426.1168399493815"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_125339_14543426.1168399493815
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi all:
can we add duplicate field in Lucene like the following:

doc.add(new Field("author", "author1", Field.Store.YES,
Field.Index.UN_TOKENIZED));
doc.add(new Field("author", "author2", Field.Store.YES,
Field.Index.UN_TOKENIZED));

How will Lucene act?

if I want add two authors to the index , how can I do?   except concat the
authors' string, because maybe I should support Range search  for datetime.

Appreciate your help!


-- 
David

------=_Part_125339_14543426.1168399493815--

From java-user-return-25361-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 10 03:46:40 2007
Return-Path: <java-user-return-25361-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37148 invoked from network); 10 Jan 2007 03:46:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Jan 2007 03:46:39 -0000
Received: (qmail 8603 invoked by uid 500); 10 Jan 2007 03:46:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8580 invoked by uid 500); 10 Jan 2007 03:46:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8569 invoked by uid 99); 10 Jan 2007 03:46:38 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Jan 2007 19:46:38 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of markrmiller@gmail.com designates 66.249.82.238 as permitted sender)
Received: from [66.249.82.238] (HELO wx-out-0506.google.com) (66.249.82.238)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Jan 2007 19:46:27 -0800
Received: by wx-out-0506.google.com with SMTP id i29so8090812wxd
        for <java-user@lucene.apache.org>; Tue, 09 Jan 2007 19:46:07 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:content-type:content-transfer-encoding;
        b=QP75KJIyuRapKDXsQcA+2NnSCL7EGZQXkDVIu+KE2NTBiuI0SiQ0hZiv/2Amx5VC0gIQzaXOnurecK4vx32FpdIcdqBVyH9k0XuL3q5JJ9XyIuxxdSyLzB3OTBJL3UEwHd3TnNWS+VcAbzYvIq7tLOn/UQcvFw4Ui5CEWTtvx74=
Received: by 10.70.50.18 with SMTP id x18mr52337088wxx.1168400767201;
        Tue, 09 Jan 2007 19:46:07 -0800 (PST)
Received: from ?192.168.1.103? ( [216.66.114.42])
        by mx.google.com with ESMTP id 3sm16467345wrh.2007.01.09.19.46.06;
        Tue, 09 Jan 2007 19:46:06 -0800 (PST)
Message-ID: <45A460E2.8090508@gmail.com>
Date: Tue, 09 Jan 2007 22:43:30 -0500
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 1.5.0.9 (Windows/20061207)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Technology Preview of new Lucene QueryParser
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

I have released a Technology preview of my Lucene query parser Qsol. 
This is the first official release. The purpose of this release is to 
gather feedback for a 1.0 release.
If you have an interest in using this parser please lend a hand in 
testing it out and making suggestions.

A recap of the parser's features:

These where my goals in building Qsol:

1.Proximity Operators in the search syntax

 

2.Paragraph/Sentence proximity searching

 

3.Query abbreviation tokens

 

4.SuggestedQuery support

 

5.Very customizable search syntax

 

6.Easily replaceable Date Parser

 

7.A cleaner syntax without precedence issues


http://www.myhardshadow.com/qsol.php


Qsol is open source and released under the Apache 2.0 license.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25362-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 10 03:59:10 2007
Return-Path: <java-user-return-25362-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40815 invoked from network); 10 Jan 2007 03:59:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Jan 2007 03:59:10 -0000
Received: (qmail 23466 invoked by uid 500); 10 Jan 2007 03:57:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23343 invoked by uid 500); 10 Jan 2007 03:57:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23258 invoked by uid 99); 10 Jan 2007 03:57:02 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Jan 2007 19:57:02 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Jan 2007 19:56:10 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id F19BF30EFC17; Tue,  9 Jan 2007 22:55:29 -0500 (EST)
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on javelina
X-Spam-Level: 
Received: from [10.0.1.3] (va-71-53-203-135.dhcp.embarqhsd.net [71.53.203.135])
	by ehatchersolutions.com (Postfix) with ESMTP id 9263930EFC17
	for <java-user@lucene.apache.org>; Tue,  9 Jan 2007 22:55:23 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <c2f9e9030701091924x481b6f94u7f74032330139e87@mail.gmail.com>
References: <c2f9e9030701091924x481b6f94u7f74032330139e87@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <0E94CC10-A489-4157-8B2D-7B4D8CCD0450@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: can we add duplicated field in Lucene?
Date: Tue, 9 Jan 2007 22:55:06 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-0.8 required=5.0 tests=AWL,BAYES_00,
	RCVD_IN_SORBS_DUL autolearn=no version=3.1.1


On Jan 9, 2007, at 10:24 PM, David wrote:
> Hi all:
> can we add duplicate field in Lucene like the following:

Yup, no problem!

>
> doc.add(new Field("author", "author1", Field.Store.YES,
> Field.Index.UN_TOKENIZED));
> doc.add(new Field("author", "author2", Field.Store.YES,
> Field.Index.UN_TOKENIZED));
>
> How will Lucene act?

It'll be as if you did concatenate them yourself into a single field,  
with a slight caveat.  Multiple same-named fields can have a virtual  
positional gap added to them (see the setPositionGap feature).  This  
can prevent phrases searching across instances of the field.  For  
example, if you indexed "Samual Clemens" and "Mark Twain" as two  
separate "author" fields, but left the default position gap setting,  
someone could query for "clemons twain" and get a hit as an exact  
phrase match.

> if I want add two authors to the index , how can I do?   except  
> concat the
> authors' string, because maybe I should support Range search  for  
> datetime.

You'd do it just the way you're doing.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25363-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 10 04:06:49 2007
Return-Path: <java-user-return-25363-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 43100 invoked from network); 10 Jan 2007 04:06:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Jan 2007 04:06:48 -0000
Received: (qmail 37280 invoked by uid 500); 10 Jan 2007 04:06:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37253 invoked by uid 500); 10 Jan 2007 04:06:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37242 invoked by uid 99); 10 Jan 2007 04:06:48 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Jan 2007 20:06:48 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of yseeley@gmail.com designates 64.233.182.186 as permitted sender)
Received: from [64.233.182.186] (HELO nf-out-0910.google.com) (64.233.182.186)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Jan 2007 20:06:39 -0800
Received: by nf-out-0910.google.com with SMTP id a27so336975nfc
        for <java-user@lucene.apache.org>; Tue, 09 Jan 2007 20:06:17 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=r7rkUuxuaSkgG9h3OWIdufZlFBg9NAuD8mZpENpSOXjD9XzADok1f8eHDNEH5Bbc2VD0ojT0EPmM8h0EAm8CuNmR9Lja1hssQNnYhTtmelRxzL0/KRjMUivvU66n51hGZCVlsDK4VZvjlmJk5n5CS3tiOJlX5vSyr1Uawirn5OQ=
Received: by 10.82.107.15 with SMTP id f15mr240515buc.1168401977733;
        Tue, 09 Jan 2007 20:06:17 -0800 (PST)
Received: by 10.82.126.8 with HTTP; Tue, 9 Jan 2007 20:06:17 -0800 (PST)
Message-ID: <c68e39170701092006k74ae3ae2q2e21ff9af5a50535@mail.gmail.com>
Date: Tue, 9 Jan 2007 23:06:17 -0500
From: "Yonik Seeley" <yonik@apache.org>
Sender: yseeley@gmail.com
To: java-user@lucene.apache.org
Subject: Re: How to support float type term in Lucene?
In-Reply-To: <c2f9e9030701091908s65113f36wfca30e604a0130c0@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <c2f9e9030701091908s65113f36wfca30e604a0130c0@mail.gmail.com>
X-Google-Sender-Auth: 98b3d66878f4564f
X-Virus-Checked: Checked by ClamAV on apache.org

On 1/9/07, David <zhouchengly@gmail.com> wrote:
> Hi all:
>     How can I index float type term in Lucene so that we can search in a
> range? I learned that it is possible to convert float to sortable string,
> but I don't know how to do it.

It's easiest/fastest in binary.  The IEEE floating point format if
interpreted as a signed integer is already very close to sorting
correctly.  If you already know how to index an integer, then do this:
 get the float bits as an int, and if the high bit is set, flip all
other bits.
That's how Solr does it:
http://svn.apache.org/viewvc/incubator/solr/trunk/src/java/org/apache/solr/util/NumberUtils.java?view=markup

  public static String float2sortableStr(float val) {
    int f = Float.floatToRawIntBits(val);
    if (f<0) f ^= 0x7fffffff;
    return int2sortableStr(f);
  }


-Yonik
http://incubator.apache.org/solr Solr, the open-source Lucene search server

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25364-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 10 05:36:21 2007
Return-Path: <java-user-return-25364-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56954 invoked from network); 10 Jan 2007 05:36:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Jan 2007 05:36:20 -0000
Received: (qmail 19403 invoked by uid 500); 10 Jan 2007 05:36:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19367 invoked by uid 500); 10 Jan 2007 05:36:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19354 invoked by uid 99); 10 Jan 2007 05:36:20 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Jan 2007 21:36:20 -0800
X-ASF-Spam-Status: No, hits=2.8 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [206.190.38.62] (HELO web50308.mail.yahoo.com) (206.190.38.62)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 09 Jan 2007 21:36:08 -0800
Received: (qmail 83661 invoked by uid 60001); 10 Jan 2007 05:35:47 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=N1Y4MIu1QXMYTP9GwbgM6SzXy9CeJcwcSC++WFC1Gc1bipsPngHvT5anmavAZYCx3FtsSiN2OTNOyTV6Pbk2UZIQuUfssiYVoVeic9Ho2d5JG2XHB9q5325OHSbmAPnc5DBGGDZ/Ol7c4XMdWREDG90EbdL+rO23eA3Ug/HA1bY=  ;
Message-ID: <20070110053547.83659.qmail@web50308.mail.yahoo.com>
Received: from [58.63.147.3] by web50308.mail.yahoo.com via HTTP; Tue, 09 Jan 2007 21:35:47 PST
Date: Tue, 9 Jan 2007 21:35:47 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: .sN (separate norms files) and NO_NORMS
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=ascii
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,=0A=0AI agree.  I wrote a custom class and it actually works in the 1, 3=
, 2 order below.  I changed FieldInfos to non-final, but I think that's it.=
=0AActually, my class doesn't do 1 yet.  This used to work:=0A=0A        //=
 unpack cfs=0A        writer =3D new IndexWriter("/tmp/fnm", new SimpleAnal=
yzer(), false);=0A        writer.setUseCompoundFile(false);=0A        write=
r.optimize();=0A        writer.close();=0A=0ABut this doesn't seem to work =
any more.  I think now one has to modify the index ... holllly, nice condit=
ional in optimize()! :)=0A=0AWould adding forceOptimize() to IndexWriter be=
 a good thing?=0A=0A  public synchronized void forceOptimize() throws IOExc=
eption {=0A      flushRamSegments();=0A      int minSegment =3D segmentInfo=
s.size() - mergeFactor;=0A      mergeSegments(minSegment < 0 ? 0 : minSegme=
nt);      =0A  }=0A=0AThen the above cfs unpacking with writer.forceOptimiz=
e() call works.=0A=0AOtis=0A=0A----- Original Message ----=0AFrom: Yonik Se=
eley <yonik@apache.org>=0ATo: java-user@lucene.apache.org=0ASent: Tuesday, =
January 9, 2007 8:33:09 PM=0ASubject: Re: .sN (separate norms files) and NO=
_NORMS=0A=0AOn 1/9/07, Otis Gospodnetic <otis_gospodnetic@yahoo.com> wrote:=
=0A> Couldn't one convert a non NO_NORMS field to a genuine NO_NORMS field =
by:=0A> 1. expanding an index to a multi-file index (if the index was a .cf=
s one)=0A> 2. removing the appropriate .fN file from the index directory=0A=
> 3. switching that omitNorms bit in FieldInfo=0A=0AYes, that would work fo=
r some custom code.  Step (2) might even be=0Adone for you if you do step 3=
 first and then do an optimize.=0A=0AThis stuff seems more like the excepti=
on than the norm :-) though, so=0AI think it might not be worth the burden =
of supporting it in the=0Apublic API.=0A=0A-Yonik=0A=0A--------------------=
-------------------------------------------------=0ATo unsubscribe, e-mail:=
 java-user-unsubscribe@lucene.apache.org=0AFor additional commands, e-mail:=
 java-user-help@lucene.apache.org=0A=0A=0A=0A

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25365-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 10 15:33:14 2007
Return-Path: <java-user-return-25365-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48231 invoked from network); 10 Jan 2007 15:33:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Jan 2007 15:33:14 -0000
Received: (qmail 27554 invoked by uid 500); 10 Jan 2007 15:33:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27528 invoked by uid 500); 10 Jan 2007 15:33:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27517 invoked by uid 99); 10 Jan 2007 15:33:12 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Jan 2007 07:33:12 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [203.16.214.141] (HELO ipmail02.adl2.internode.on.net) (203.16.214.141)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Jan 2007 07:33:02 -0800
Received: from hardlight.com.au (HELO [192.168.1.6]) ([203.122.246.130])
  by ipmail02.adl2.internode.on.net with ESMTP; 11 Jan 2007 02:02:37 +1030
X-IronPort-AV: i="4.13,168,1167571800"; 
   d="scan'208"; a="69743139:sNHT20509090"
Message-ID: <45A50709.6070702@hardlight.com.au>
Date: Thu, 11 Jan 2007 02:02:25 +1030
From: Jason <jeacott@hardlight.com.au>
Reply-To:  jeacott@hardlight.com.au
User-Agent: Thunderbird 1.5.0.8 (Windows/20061025)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: how can I filter my search to not include items containing a particular
 field and value?
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

how can I filter my search to not include items containing a particular 
field and value?

I want effectively to add -myfieldname:myvalue to the end of  my search 
query, but I cant see how to do this via the api.
I have a complex query built up via the api and just want to filter it 
based on field name/value pairs.

I'm sure it must be simple - I just cant see how to do it.

thanks.
Jason.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25366-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 10 15:46:18 2007
Return-Path: <java-user-return-25366-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53192 invoked from network); 10 Jan 2007 15:46:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Jan 2007 15:46:17 -0000
Received: (qmail 57580 invoked by uid 500); 10 Jan 2007 15:46:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57500 invoked by uid 500); 10 Jan 2007 15:46:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57489 invoked by uid 99); 10 Jan 2007 15:46:17 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Jan 2007 07:46:17 -0800
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=FORGED_HOTMAIL_RCVD2,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Jan 2007 07:46:07 -0800
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1H4fe6-0002jv-Nd
	for java-user@lucene.apache.org; Wed, 10 Jan 2007 07:45:46 -0800
Message-ID: <8259883.post@talk.nabble.com>
Date: Wed, 10 Jan 2007 07:45:46 -0800 (PST)
From: moraleslos <moraleslos@hotmail.com>
To: java-user@lucene.apache.org
Subject: Text storing design and performance question
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: moraleslos@hotmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


I'm running into a little dilemma with Lucene highlighting and indexing.  I
currently index anything and everything that gets inserted into a database. 
This database includes all the content that is searched.  Now I'll have lots
and lots of content, thinking of the range of 50GB+, all stored in the DB. 
Using Lucene, I index all of this.  But since I'm using highlighting
features, I'll also need to store the content into the index.  Not sure what
the performance implications are during a search but I know that indexing
performance should be slower as well as the index size being enormous. 
Because I have duplicated data, one in the index and the other in the db,
are there other ways of handling this situation in a more efficient and
performant way?  Thanks in advance.

-los
-- 
View this message in context: http://www.nabble.com/Text-storing-design-and-performance-question-tf2953201.html#a8259883
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25367-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 10 16:04:11 2007
Return-Path: <java-user-return-25367-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59732 invoked from network); 10 Jan 2007 16:04:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Jan 2007 16:04:11 -0000
Received: (qmail 9218 invoked by uid 500); 10 Jan 2007 16:04:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9179 invoked by uid 500); 10 Jan 2007 16:04:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9167 invoked by uid 99); 10 Jan 2007 16:04:11 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Jan 2007 08:04:11 -0800
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=FORGED_HOTMAIL_RCVD2,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Jan 2007 08:04:01 -0800
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1H4fvQ-0005BT-Vr
	for java-user@lucene.apache.org; Wed, 10 Jan 2007 08:03:40 -0800
Message-ID: <8260262.post@talk.nabble.com>
Date: Wed, 10 Jan 2007 08:03:40 -0800 (PST)
From: wawa <shim0002@hotmail.com>
To: java-user@lucene.apache.org
Subject: Ingnore Case in Sorting
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: shim0002@hotmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hello,

I wonder that there is anyway to ignore case(up & lower) in sorting.
I just used Sort() method and Lucene sorted result Uppercase first and then
lowercase.

ex)
Apple
Banana
apple

Is there a way to sort like below?:

Apple
apple
Banana
-- 
View this message in context: http://www.nabble.com/Ingnore-Case-in-Sorting-tf2953305.html#a8260262
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25368-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 10 16:21:32 2007
Return-Path: <java-user-return-25368-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65205 invoked from network); 10 Jan 2007 16:21:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Jan 2007 16:21:31 -0000
Received: (qmail 53368 invoked by uid 500); 10 Jan 2007 16:21:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53119 invoked by uid 500); 10 Jan 2007 16:21:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53108 invoked by uid 99); 10 Jan 2007 16:21:30 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Jan 2007 08:21:30 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Jan 2007 08:21:19 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id A203530EFC18; Wed, 10 Jan 2007 11:20:58 -0500 (EST)
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on javelina
X-Spam-Level: 
Received: from [128.143.193.79] (d-128-193-79.bootp.Virginia.EDU [128.143.193.79])
	by ehatchersolutions.com (Postfix) with ESMTP id 2931130EFC17
	for <java-user@lucene.apache.org>; Wed, 10 Jan 2007 11:20:56 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <8259883.post@talk.nabble.com>
References: <8259883.post@talk.nabble.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <06695F9F-B4EE-4C6B-845E-BE703DC92B6C@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Text storing design and performance question
Date: Wed, 10 Jan 2007 11:20:52 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.6 required=5.0 tests=BAYES_00 autolearn=ham 
	version=3.1.1

You don't have to store a field to highlight text.  If you've got it  
in your database, retrieve it from there and pass that string to the  
highlighter instead.

	Erik


On Jan 10, 2007, at 10:45 AM, moraleslos wrote:

>
> I'm running into a little dilemma with Lucene highlighting and  
> indexing.  I
> currently index anything and everything that gets inserted into a  
> database.
> This database includes all the content that is searched.  Now I'll  
> have lots
> and lots of content, thinking of the range of 50GB+, all stored in  
> the DB.
> Using Lucene, I index all of this.  But since I'm using highlighting
> features, I'll also need to store the content into the index.  Not  
> sure what
> the performance implications are during a search but I know that  
> indexing
> performance should be slower as well as the index size being enormous.
> Because I have duplicated data, one in the index and the other in  
> the db,
> are there other ways of handling this situation in a more efficient  
> and
> performant way?  Thanks in advance.
>
> -los
> -- 
> View this message in context: http://www.nabble.com/Text-storing- 
> design-and-performance-question-tf2953201.html#a8259883
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25369-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 10 16:33:13 2007
Return-Path: <java-user-return-25369-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 68811 invoked from network); 10 Jan 2007 16:33:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Jan 2007 16:33:12 -0000
Received: (qmail 87976 invoked by uid 500); 10 Jan 2007 16:33:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87691 invoked by uid 500); 10 Jan 2007 16:33:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87674 invoked by uid 99); 10 Jan 2007 16:33:11 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Jan 2007 08:33:11 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of walt.stoneburner@gmail.com designates 209.85.132.244 as permitted sender)
Received: from [209.85.132.244] (HELO an-out-0708.google.com) (209.85.132.244)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Jan 2007 08:33:02 -0800
Received: by an-out-0708.google.com with SMTP id c3so76480ana
        for <java-user@lucene.apache.org>; Wed, 10 Jan 2007 08:32:41 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=rA7kgPelDxsXkQMpA4N/OV8s25ZxQYfbmaFMZUjIz/bDFA0PIqpStxNl8rTjYJSZkSPLYtgTF7bHYw64DRnWsYnfJLP7LMTTG37wNfFHXcuCekPs2WvIs2Upr7xsaF0BTXWzkq1u3QA3FuFZgliK+tD0IsHGvyYk5jxxtDcMo7w=
Received: by 10.78.157.8 with SMTP id f8mr148809hue.1168446760881;
        Wed, 10 Jan 2007 08:32:40 -0800 (PST)
Received: by 10.78.32.10 with HTTP; Wed, 10 Jan 2007 08:32:40 -0800 (PST)
Message-ID: <ae6f38f60701100832p1ec8b05do52769ca8f96bfede@mail.gmail.com>
Date: Wed, 10 Jan 2007 11:32:40 -0500
From: "Walt Stoneburner" <walt.stoneburner@gmail.com>
To: java-user@lucene.apache.org
Subject: Getting a Better Understanding of Lucene's Search Operators
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org

Hello, I'm trying to get a better understanding of Lucene's search
operators as described in the documentation at
http://lucene.apache.org/java/docs/queryparsersyntax.html

The documentation goes out of its way to identify two operators,
require and prohibit, but doesn't fully explain them against the
context of the other boolean operators.

For instance, the require operator (+) is described as:

  To search for documents that must contain "apples" and may contain
"oranges" use the query:  +apples oranges

My poor brain reads this statement as "We are looking for all
documents that contain the term apples, regardless of whether they do,
or do not, contain the word oranges."

As such, to me the equivalent expression would be just:  apples
...so I'm left to conclude that is going on that I'm not getting.

Clearly this is _not_ the same as 'apples OR oranges', which would
pick up documents without the term apples in them -- not what we want.
 Nor is it the same as 'apples AND oranges', which would pick up
documents with only both terms present -- also not what we want.

Can someone explain to me what the require operator is doing, perhaps
with a simple example that contrasts it to behavior that can't be
obtained with a carefully crafted boolean expression?


Conversely, the prohibit operator (-) is called out from the NOT operator:
  To search for documents that contain "apples" but not "oranges" use
the query:  "apples" -"oranges"

I do not understand why this isn't simply equivalent to:  apples AND NOT oranges

...if it is, why all the big fuss about calling it "prohibit" and not
just another alias for NOT?
...if it isn't, then what's the difference in behavior?


The fact that the documentation calls out these operators separately,
gives them their own unique names, and describes them in different
terms is enough to make me think something very important or very
subtle is going on.

If anyone could point me at some reference material or take a moment
to explain what's going on, I'd really appreciate it.

-Walt Stoneburner, <wls@wwco.com>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25370-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 10 16:58:14 2007
Return-Path: <java-user-return-25370-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79251 invoked from network); 10 Jan 2007 16:58:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Jan 2007 16:58:12 -0000
Received: (qmail 63061 invoked by uid 500); 10 Jan 2007 16:57:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62983 invoked by uid 500); 10 Jan 2007 16:57:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62819 invoked by uid 99); 10 Jan 2007 16:57:57 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Jan 2007 08:57:56 -0800
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=FORGED_HOTMAIL_RCVD2,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Jan 2007 08:57:46 -0800
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1H4glR-0003ML-Mk
	for java-user@lucene.apache.org; Wed, 10 Jan 2007 08:57:25 -0800
Message-ID: <8261408.post@talk.nabble.com>
Date: Wed, 10 Jan 2007 08:57:25 -0800 (PST)
From: moraleslos <moraleslos@hotmail.com>
To: java-user@lucene.apache.org
Subject: Re: Text storing design and performance question
In-Reply-To: <06695F9F-B4EE-4C6B-845E-BE703DC92B6C@ehatchersolutions.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: moraleslos@hotmail.com
References: <8259883.post@talk.nabble.com> <06695F9F-B4EE-4C6B-845E-BE703DC92B6C@ehatchersolutions.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Hi Erik,

Would that slow performance a bit?  For example, say I receive 50,000 hits
from a search.  From your explanation, I have to retrieve the DB id from
each hit, perform a query to the DB using the id to retrieve the full
contents for each hit, run highlighter on each content, and then return? 
Although I'll give this a shot, it will seem to slow performance on the
searching side of things, wouldn't it?  Thanks for the reply.

-los



Erik Hatcher wrote:
> 
> You don't have to store a field to highlight text.  If you've got it  
> in your database, retrieve it from there and pass that string to the  
> highlighter instead.
> 
> 	Erik
> 
> 
> On Jan 10, 2007, at 10:45 AM, moraleslos wrote:
> 
>>
>> I'm running into a little dilemma with Lucene highlighting and  
>> indexing.  I
>> currently index anything and everything that gets inserted into a  
>> database.
>> This database includes all the content that is searched.  Now I'll  
>> have lots
>> and lots of content, thinking of the range of 50GB+, all stored in  
>> the DB.
>> Using Lucene, I index all of this.  But since I'm using highlighting
>> features, I'll also need to store the content into the index.  Not  
>> sure what
>> the performance implications are during a search but I know that  
>> indexing
>> performance should be slower as well as the index size being enormous.
>> Because I have duplicated data, one in the index and the other in  
>> the db,
>> are there other ways of handling this situation in a more efficient  
>> and
>> performant way?  Thanks in advance.
>>
>> -los
>> -- 
>> View this message in context: http://www.nabble.com/Text-storing- 
>> design-and-performance-question-tf2953201.html#a8259883
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/Text-storing-design-and-performance-question-tf2953201.html#a8261408
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25371-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 10 17:00:34 2007
Return-Path: <java-user-return-25371-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79964 invoked from network); 10 Jan 2007 17:00:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Jan 2007 17:00:33 -0000
Received: (qmail 69185 invoked by uid 500); 10 Jan 2007 17:00:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69151 invoked by uid 500); 10 Jan 2007 17:00:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69140 invoked by uid 99); 10 Jan 2007 17:00:33 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Jan 2007 09:00:33 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 66.249.92.170 as permitted sender)
Received: from [66.249.92.170] (HELO ug-out-1314.google.com) (66.249.92.170)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Jan 2007 09:00:23 -0800
Received: by ug-out-1314.google.com with SMTP id k40so158846ugc
        for <java-user@lucene.apache.org>; Wed, 10 Jan 2007 09:00:01 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=kuY9mKYI5pHOYvG/K0Zg9bOfiU7/JPdbze1+SayAVPm0oIGera4K9YX7WxFLWk7eFkDX0KPoU3hVQ2w262PxiriWhD4N2wBlYzwzQdvIlCT6JfVrtHGzAeqUaOmQuMBR0klZq3+6Xrs+sp188ZIt1f+A583Xp3mgo/cW3FtUvp0=
Received: by 10.82.120.15 with SMTP id s15mr111359buc.1168448401630;
        Wed, 10 Jan 2007 09:00:01 -0800 (PST)
Received: by 10.82.162.9 with HTTP; Wed, 10 Jan 2007 09:00:01 -0800 (PST)
Message-ID: <359a92830701100900o6334bbb9k2ed9995c3b4b3c9a@mail.gmail.com>
Date: Wed, 10 Jan 2007 12:00:01 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org, jeacott@hardlight.com.au
Subject: Re: how can I filter my search to not include items containing a particular field and value?
In-Reply-To: <45A50709.6070702@hardlight.com.au>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_9487_11600815.1168448401185"
References: <45A50709.6070702@hardlight.com.au>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_9487_11600815.1168448401185
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Would something like the following work for you?

BooleanQuery bq = new BooleanQuery();
bq.add(your built-up query);
bq.add(your not clause, MUSTNOT);


Now you can use your bq as your query to search.


NOTE: there is continual confusion what the - syntax really does, you might
want to search the mail archive for one of several explications if you are
thinking of the NOT operator like a boolean logic operator. It's not, quite.

On 1/10/07, Jason <jeacott@hardlight.com.au> wrote:
>
> how can I filter my search to not include items containing a particular
> field and value?
>
> I want effectively to add -myfieldname:myvalue to the end of  my search
> query, but I cant see how to do this via the api.
> I have a complex query built up via the api and just want to filter it
> based on field name/value pairs.
>
> I'm sure it must be simple - I just cant see how to do it.
>
> thanks.
> Jason.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_9487_11600815.1168448401185--

From java-user-return-25372-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 10 17:00:48 2007
Return-Path: <java-user-return-25372-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80066 invoked from network); 10 Jan 2007 17:00:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Jan 2007 17:00:47 -0000
Received: (qmail 70875 invoked by uid 500); 10 Jan 2007 17:00:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70851 invoked by uid 500); 10 Jan 2007 17:00:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70840 invoked by uid 99); 10 Jan 2007 17:00:46 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Jan 2007 09:00:46 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of markrmiller@gmail.com designates 64.233.184.228 as permitted sender)
Received: from [64.233.184.228] (HELO wr-out-0506.google.com) (64.233.184.228)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Jan 2007 09:00:36 -0800
Received: by wr-out-0506.google.com with SMTP id i4so91033wra
        for <java-user@lucene.apache.org>; Wed, 10 Jan 2007 09:00:15 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=OHgEEaGiuBqPXvV7scTTQ75Qw0nTL0OkNV7f7kzi3aliv9+3z4Dyhvql0ckOBS1yf3vv5NKxGcNfLHvETV9GQEs4pO+z3cSyLH75m34cdlO9kOnjrR3Wv5mxXkS/UTqa8awpMCn/pJ9HQGrXBcQWkPNc/xm4XvMz0wUjQvDiiHc=
Received: by 10.90.49.1 with SMTP id w1mr381932agw.1168448413965;
        Wed, 10 Jan 2007 09:00:13 -0800 (PST)
Received: from ?192.168.1.103? ( [216.66.114.42])
        by mx.google.com with ESMTP id 8sm45909846wra.2007.01.10.09.00.10;
        Wed, 10 Jan 2007 09:00:12 -0800 (PST)
Message-ID: <45A51B38.3080904@gmail.com>
Date: Wed, 10 Jan 2007 11:58:32 -0500
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 1.5.0.9 (Windows/20061207)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Getting a Better Understanding of Lucene's Search Operators
References: <ae6f38f60701100832p1ec8b05do52769ca8f96bfede@mail.gmail.com>
In-Reply-To: <ae6f38f60701100832p1ec8b05do52769ca8f96bfede@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Lucene uses a scoring system that behaves similarly to a boolean system. 
Each piece of the query contributes to the score for each document...if 
a document scores 0, it is not returned in the results.

>  To search for documents that must contain "apples" and may contain
> "oranges" use the query:  +apples oranges
This query will score any document without apples as a 0. If a doc 
contains apples it will get a positive score and if the document also 
happens to have oranges, it will score higher. An absence of orange will 
not force a 0 score for a document, but the presence of it will boost 
the score.
>
> Clearly this is _not_ the same as 'apples OR oranges', which would
This would be : apples oranges
In this case, an absence of either term will not force a 0 score, but if 
no terms appear the score will be 0. Both terms appearing would score 
higher than just one.
> Conversely, the prohibit operator (-) is called out from the NOT 
> operator:
>  To search for documents that contain "apples" but not "oranges" use
> the query:  "apples" -"oranges"
> I do not understand why this isn't simply equivalent to:  apples AND 
> NOT oranges
This is equivalent. The prohibit operator will force a score of 0 on any 
doc that contains the term. Finding apples might put a positive score on 
a doc, but then finding oranges will set the score to 0 no matter what 
score the other terms generated. That is why this cannot be used as a 
unary not...-oranges would score every doc as a 0 and none would return. 
If you used the special MatchAllQueries and put it with -oranges you 
would have the effect of a unary not. MatchAllQueries would score each 
doc positively, and then - would 0 out all docs that had the - term.
>
> ...if it is, why all the big fuss about calling it "prohibit" and not
> just another alias for NOT?
> ...if it isn't, then what's the difference in behavior?
Its kind of like an ANDNOT in boolean terms...
>
>
> The fact that the documentation calls out these operators separately,
> gives them their own unique names, and describes them in different
> terms is enough to make me think something very important or very
> subtle is going on.
The subtle part is that a scoring system is being used that operates in 
something of a boolean fashion, but that has subtle difference.

- Mark

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25373-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 10 17:02:32 2007
Return-Path: <java-user-return-25373-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80719 invoked from network); 10 Jan 2007 17:02:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Jan 2007 17:02:32 -0000
Received: (qmail 78643 invoked by uid 500); 10 Jan 2007 17:02:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78614 invoked by uid 500); 10 Jan 2007 17:02:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78600 invoked by uid 99); 10 Jan 2007 17:02:26 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Jan 2007 09:02:26 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of markrmiller@gmail.com designates 64.233.184.239 as permitted sender)
Received: from [64.233.184.239] (HELO wr-out-0506.google.com) (64.233.184.239)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Jan 2007 09:02:14 -0800
Received: by wr-out-0506.google.com with SMTP id i4so91464wra
        for <java-user@lucene.apache.org>; Wed, 10 Jan 2007 09:01:52 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=ANY53gW/OFynK7E8VBHrIuO8a+Wf5l4+PO7MvNf/j3ZzpcWPqJS6+nu4i84hJ35hdXWg7zoB7iKNF5ugiQH7yLPf/Zi+Lwwxer6q3kTTrEL0kozqXuvQSsCOlXVtrIuzwzZfxt82rFSkfq/0g0Kcix9g4vVFmGvi62Yzly4LFn0=
Received: by 10.90.119.15 with SMTP id r15mr395292agc.1168448511589;
        Wed, 10 Jan 2007 09:01:51 -0800 (PST)
Received: from ?192.168.1.103? ( [216.66.114.42])
        by mx.google.com with ESMTP id 7sm8915557wrl.2007.01.10.09.01.46;
        Wed, 10 Jan 2007 09:01:50 -0800 (PST)
Message-ID: <45A51B99.8080304@gmail.com>
Date: Wed, 10 Jan 2007 12:00:09 -0500
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 1.5.0.9 (Windows/20061207)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Text storing design and performance question
References: <8259883.post@talk.nabble.com> <06695F9F-B4EE-4C6B-845E-BE703DC92B6C@ehatchersolutions.com> <8261408.post@talk.nabble.com>
In-Reply-To: <8261408.post@talk.nabble.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Usually a user cannot easily browse 50,000 on a single display, and so 
you would only highlight the docs as they became visible to the user. 
This is generally a small amount...often one at a time.

- Mark

moraleslos wrote:
> Hi Erik,
>
> Would that slow performance a bit?  For example, say I receive 50,000 hits
> from a search.  From your explanation, I have to retrieve the DB id from
> each hit, perform a query to the DB using the id to retrieve the full
> contents for each hit, run highlighter on each content, and then return? 
> Although I'll give this a shot, it will seem to slow performance on the
> searching side of things, wouldn't it?  Thanks for the reply.
>
> -los
>
>
>
> Erik Hatcher wrote:
>   
>> You don't have to store a field to highlight text.  If you've got it  
>> in your database, retrieve it from there and pass that string to the  
>> highlighter instead.
>>
>> 	Erik
>>
>>
>> On Jan 10, 2007, at 10:45 AM, moraleslos wrote:
>>
>>     
>>> I'm running into a little dilemma with Lucene highlighting and  
>>> indexing.  I
>>> currently index anything and everything that gets inserted into a  
>>> database.
>>> This database includes all the content that is searched.  Now I'll  
>>> have lots
>>> and lots of content, thinking of the range of 50GB+, all stored in  
>>> the DB.
>>> Using Lucene, I index all of this.  But since I'm using highlighting
>>> features, I'll also need to store the content into the index.  Not  
>>> sure what
>>> the performance implications are during a search but I know that  
>>> indexing
>>> performance should be slower as well as the index size being enormous.
>>> Because I have duplicated data, one in the index and the other in  
>>> the db,
>>> are there other ways of handling this situation in a more efficient  
>>> and
>>> performant way?  Thanks in advance.
>>>
>>> -los
>>> -- 
>>> View this message in context: http://www.nabble.com/Text-storing- 
>>> design-and-performance-question-tf2953201.html#a8259883
>>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>       
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>>     
>
>   

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25374-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 10 17:04:51 2007
Return-Path: <java-user-return-25374-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81320 invoked from network); 10 Jan 2007 17:04:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Jan 2007 17:04:50 -0000
Received: (qmail 85364 invoked by uid 500); 10 Jan 2007 17:04:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85333 invoked by uid 500); 10 Jan 2007 17:04:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85322 invoked by uid 99); 10 Jan 2007 17:04:49 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Jan 2007 09:04:49 -0800
X-ASF-Spam-Status: No, hits=2.3 required=10.0
	tests=HTML_MESSAGE,MAILTO_TO_SPAM_ADDR,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 66.249.92.173 as permitted sender)
Received: from [66.249.92.173] (HELO ug-out-1314.google.com) (66.249.92.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Jan 2007 09:04:40 -0800
Received: by ug-out-1314.google.com with SMTP id k40so159983ugc
        for <java-user@lucene.apache.org>; Wed, 10 Jan 2007 09:04:19 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=G8/NOrMaJDv7OdlXZEtyIsqhPNtu1Qj7MUPrw2KmtjG+vY7ohilMX07+tdD0b/oAUSlqva0b4JQNC+uaDkvUV/EC4XAGECQ3ILno0Z7Kga1a05vdAkWLmPS4EE5jKN7iO0/pa9QpvlobRFHn+7hsPchHS3Da0M3m3RhzK3QpZCQ=
Received: by 10.82.139.17 with SMTP id m17mr110821bud.1168448658935;
        Wed, 10 Jan 2007 09:04:18 -0800 (PST)
Received: by 10.82.162.9 with HTTP; Wed, 10 Jan 2007 09:04:18 -0800 (PST)
Message-ID: <359a92830701100904m4b7fe2d5g1dced7d8756ade20@mail.gmail.com>
Date: Wed, 10 Jan 2007 12:04:18 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Ingnore Case in Sorting
In-Reply-To: <8260262.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_9599_4215429.1168448658666"
References: <8260262.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_9599_4215429.1168448658666
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

You could always implement your own sorter, but I really have to ask why you
are storing things in your index case-sensitive in the first place. In the
above example, if you're searching on "banana", you'll get no hits. That may
be your desired behavior....

You could also store a sort field in your index that's lower-cased and sort
on that (as well as the case-sensitive field)

On 1/10/07, wawa <shim0002@hotmail.com> wrote:
>
>
> Hello,
>
> I wonder that there is anyway to ignore case(up & lower) in sorting.
> I just used Sort() method and Lucene sorted result Uppercase first and
> then
> lowercase.
>
> ex)
> Apple
> Banana
> apple
>
> Is there a way to sort like below?:
>
> Apple
> apple
> Banana
> --
> View this message in context:
> http://www.nabble.com/Ingnore-Case-in-Sorting-tf2953305.html#a8260262
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_9599_4215429.1168448658666--

From java-user-return-25375-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 10 17:07:53 2007
Return-Path: <java-user-return-25375-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82933 invoked from network); 10 Jan 2007 17:07:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Jan 2007 17:07:50 -0000
Received: (qmail 93701 invoked by uid 500); 10 Jan 2007 17:07:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93669 invoked by uid 500); 10 Jan 2007 17:07:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93655 invoked by uid 99); 10 Jan 2007 17:07:49 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Jan 2007 09:07:49 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 66.249.92.172 as permitted sender)
Received: from [66.249.92.172] (HELO ug-out-1314.google.com) (66.249.92.172)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Jan 2007 09:07:40 -0800
Received: by ug-out-1314.google.com with SMTP id k40so160754ugc
        for <java-user@lucene.apache.org>; Wed, 10 Jan 2007 09:07:19 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=MODpnRd3K4q2fji5G7FRFxrh6p6rg8HWupaSGA3HkmX8q/oVaSIEq6aKFsv8Nl1pS9m306TLb/VB7VQh2ZQgw/OxcDjfBw7PJyGVcrgPPpyN+x83IzDh2XNsZ76Wa/V1hL4SCb2Yc156Sr9bn+IsgUUgsaIie3qmdNO/bp7dBkg=
Received: by 10.82.182.8 with SMTP id e8mr113970buf.1168448838905;
        Wed, 10 Jan 2007 09:07:18 -0800 (PST)
Received: by 10.82.162.9 with HTTP; Wed, 10 Jan 2007 09:07:18 -0800 (PST)
Message-ID: <359a92830701100907o615195ceu8a131c3ee12ed2d9@mail.gmail.com>
Date: Wed, 10 Jan 2007 12:07:18 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org, jeacott@hardlight.com.au
Subject: Re: how can I filter my search to not include items containing a particular field and value?
In-Reply-To: <359a92830701100900o6334bbb9k2ed9995c3b4b3c9a@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_9647_3061639.1168448838529"
References: <45A50709.6070702@hardlight.com.au>
	 <359a92830701100900o6334bbb9k2ed9995c3b4b3c9a@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_9647_3061639.1168448838529
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

As luck would have it, there's an explanation of the NOT operator in the
thread below posted after your original one.......


*Getting a Better Understanding of Lucene's Search Operators


*
On 1/10/07, Erick Erickson <erickerickson@gmail.com> wrote:
>
> Would something like the following work for you?
>
> BooleanQuery bq = new BooleanQuery();
> bq.add(your built-up query);
> bq.add(your not clause, MUSTNOT);
>
>
> Now you can use your bq as your query to search.
>
>
> NOTE: there is continual confusion what the - syntax really does, you
> might want to search the mail archive for one of several explications if you
> are thinking of the NOT operator like a boolean logic operator. It's not,
> quite.
>
> On 1/10/07, Jason <jeacott@hardlight.com.au> wrote:
> >
> > how can I filter my search to not include items containing a particular
> > field and value?
> >
> > I want effectively to add -myfieldname:myvalue to the end of  my search
> > query, but I cant see how to do this via the api.
> > I have a complex query built up via the api and just want to filter it
> > based on field name/value pairs.
> >
> > I'm sure it must be simple - I just cant see how to do it.
> >
> > thanks.
> > Jason.
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>

------=_Part_9647_3061639.1168448838529--

From java-user-return-25376-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 10 17:12:32 2007
Return-Path: <java-user-return-25376-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85263 invoked from network); 10 Jan 2007 17:12:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Jan 2007 17:12:29 -0000
Received: (qmail 9472 invoked by uid 500); 10 Jan 2007 17:12:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9447 invoked by uid 500); 10 Jan 2007 17:12:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9395 invoked by uid 99); 10 Jan 2007 17:12:34 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Jan 2007 09:12:33 -0800
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=FORGED_HOTMAIL_RCVD2,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Jan 2007 09:12:23 -0800
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1H4gza-0005Oz-Rk
	for java-user@lucene.apache.org; Wed, 10 Jan 2007 09:12:02 -0800
Message-ID: <8261739.post@talk.nabble.com>
Date: Wed, 10 Jan 2007 09:12:02 -0800 (PST)
From: moraleslos <moraleslos@hotmail.com>
To: java-user@lucene.apache.org
Subject: Re: Text storing design and performance question
In-Reply-To: <45A51B99.8080304@gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: moraleslos@hotmail.com
References: <8259883.post@talk.nabble.com> <06695F9F-B4EE-4C6B-845E-BE703DC92B6C@ehatchersolutions.com> <8261408.post@talk.nabble.com> <45A51B99.8080304@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Hi Mark,

Looks like I've got to implement some sort of pagination for my clients. 
Problem is everything is stateless so looks like there's some work I need to
do on my end.  Thanks.

-los



markrmiller wrote:
> 
> Usually a user cannot easily browse 50,000 on a single display, and so 
> you would only highlight the docs as they became visible to the user. 
> This is generally a small amount...often one at a time.
> 
> - Mark
> 
> moraleslos wrote:
>> Hi Erik,
>>
>> Would that slow performance a bit?  For example, say I receive 50,000
>> hits
>> from a search.  From your explanation, I have to retrieve the DB id from
>> each hit, perform a query to the DB using the id to retrieve the full
>> contents for each hit, run highlighter on each content, and then return? 
>> Although I'll give this a shot, it will seem to slow performance on the
>> searching side of things, wouldn't it?  Thanks for the reply.
>>
>> -los
>>
>>
>>
>> Erik Hatcher wrote:
>>   
>>> You don't have to store a field to highlight text.  If you've got it  
>>> in your database, retrieve it from there and pass that string to the  
>>> highlighter instead.
>>>
>>> 	Erik
>>>
>>>
>>> On Jan 10, 2007, at 10:45 AM, moraleslos wrote:
>>>
>>>     
>>>> I'm running into a little dilemma with Lucene highlighting and  
>>>> indexing.  I
>>>> currently index anything and everything that gets inserted into a  
>>>> database.
>>>> This database includes all the content that is searched.  Now I'll  
>>>> have lots
>>>> and lots of content, thinking of the range of 50GB+, all stored in  
>>>> the DB.
>>>> Using Lucene, I index all of this.  But since I'm using highlighting
>>>> features, I'll also need to store the content into the index.  Not  
>>>> sure what
>>>> the performance implications are during a search but I know that  
>>>> indexing
>>>> performance should be slower as well as the index size being enormous.
>>>> Because I have duplicated data, one in the index and the other in  
>>>> the db,
>>>> are there other ways of handling this situation in a more efficient  
>>>> and
>>>> performant way?  Thanks in advance.
>>>>
>>>> -los
>>>> -- 
>>>> View this message in context: http://www.nabble.com/Text-storing- 
>>>> design-and-performance-question-tf2953201.html#a8259883
>>>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>>>
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>       
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>>
>>>     
>>
>>   
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/Text-storing-design-and-performance-question-tf2953201.html#a8261739
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25377-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 10 17:23:16 2007
Return-Path: <java-user-return-25377-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88258 invoked from network); 10 Jan 2007 17:23:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Jan 2007 17:23:15 -0000
Received: (qmail 43862 invoked by uid 500); 10 Jan 2007 17:23:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43836 invoked by uid 500); 10 Jan 2007 17:23:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43825 invoked by uid 99); 10 Jan 2007 17:23:15 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Jan 2007 09:23:15 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of walt.stoneburner@gmail.com designates 209.85.132.246 as permitted sender)
Received: from [209.85.132.246] (HELO an-out-0708.google.com) (209.85.132.246)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Jan 2007 09:23:06 -0800
Received: by an-out-0708.google.com with SMTP id c3so89212ana
        for <java-user@lucene.apache.org>; Wed, 10 Jan 2007 09:22:45 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=F/mUFbBbBNz3UeRG9ceeD81hlQO8y9P/k4VxvhihaRSWi4rv5gubGtYnGWhAJHB5WD4cEnNJgw3cFbXvtxshzywl7QhdwudtC7mny1zk7JL6Cne6aDmK/YjTwPIj+fx0OI57zy5ZNkHtSIotDgXXu+r29F/fvVUDy9o5UyzD5ps=
Received: by 10.78.97.7 with SMTP id u7mr181763hub.1168449764899;
        Wed, 10 Jan 2007 09:22:44 -0800 (PST)
Received: by 10.78.32.10 with HTTP; Wed, 10 Jan 2007 09:22:44 -0800 (PST)
Message-ID: <ae6f38f60701100922w748a234wada7e44a96a3396@mail.gmail.com>
Date: Wed, 10 Jan 2007 12:22:44 -0500
From: "Walt Stoneburner" <walt.stoneburner@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Getting a Better Understanding of Lucene's Search Operators
In-Reply-To: <45A51B38.3080904@gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_7997_21556050.1168449764712"
References: <ae6f38f60701100832p1ec8b05do52769ca8f96bfede@mail.gmail.com>
	 <45A51B38.3080904@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_7997_21556050.1168449764712
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

On 1/10/07, Mark Miller <markrmiller@gmail.com> wrote:
>
> The subtle part is that a scoring system is being used that operates in
> something of a boolean fashion, but that has subtle difference.
>

Mark, -thank you-.  This explains it beautifully.

So, if I understand you right, a simple query of NOT ORANGES gets me every
document that does not contain the word oranges, while a separate query with
-ORANGES added will force the score to zero for all documents in which
oranges does not appear.  One's a selector, the other is a filter.

The + operator, in turn, simply affects the score (which is used for
ranking).  Anything with a non-zero score is returned, but the better the
score, the more prominent it is in the ordered result list.

Do I have correct and complete understanding of the two operators?

-wls

------=_Part_7997_21556050.1168449764712--

From java-user-return-25378-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 10 17:37:16 2007
Return-Path: <java-user-return-25378-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94791 invoked from network); 10 Jan 2007 17:37:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Jan 2007 17:37:16 -0000
Received: (qmail 76311 invoked by uid 500); 10 Jan 2007 17:37:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76136 invoked by uid 500); 10 Jan 2007 17:37:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76125 invoked by uid 99); 10 Jan 2007 17:37:15 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Jan 2007 09:37:15 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [128.230.18.29] (HELO mailer.syr.edu) (128.230.18.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Jan 2007 09:37:05 -0800
Received: from [128.230.84.138] (syru84-138.syr.edu) by mailer.syr.edu (LSMTP for Windows NT v1.1b) with SMTP id <0.15D386EF@mailer.syr.edu>; Wed, 10 Jan 2007 12:36:44 -0500
Message-ID: <45A5242B.9010000@syr.edu>
Date: Wed, 10 Jan 2007 12:36:43 -0500
From: Steven Rowe <sarowe@syr.edu>
User-Agent: Mail/News 1.5.0.4-GroupWise-IMAP-fix (Windows/20060619)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: hithighlighter bug
References: <45A450CE.3000909@hardlight.com.au>
In-Reply-To: <45A450CE.3000909@hardlight.com.au>
X-Enigmail-Version: 0.94.1.2
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Jason wrote:
> Hi all,
>     I have come across what I think is a curious but insidious bug with
> the java lucene hit highlighter.
[...]
> when I search for -> Acquisition Plan <-
> in my search results I get:
> <summary>(ancilliary stuff deleted)....
> attached to the <em>Acquisition</em>
> < em>Plan</em>and signed</summary>
> 
> notice the space between the < and e in the second < em>

Sorry, Jason, I don't have a solutions for you, but in case there's any
question about whether "< em>" is well-formed XML/XHTML/HTML:

1. It is not well-formed XML (and thus cannot be well-formed XHTML) -
from <http://www.w3.org/TR/xml/#sec-starttags>:

  [40] STag ::= '<' Name (S Attribute)* S? '>'
   [5] Name ::= (Letter | '_' | ':') (NameChar)*

("Letter" & "NameChar" declarations omitted - suffice to say whitespace
is excluded.)


2. AFAICT (IANASG), SGML (and hence the [pre-XHTML] HTML profiles of it)
disallows space chars between the '<' and the element name (a.k.a.
"generic identifier") - from
<http://www.oasis-open.org/cover/sgmlsyn/sgmlsyn.htm#C7.4>:

 [14] start-tag =
        ( stago , <
          document type specification [28] ,
          generic identifier specification [29] ,
          attribute specification list [31] ,
          s [5] *,
          tagc ) | >
          minimized start-tag [15]
 [29] generic identifier specification =
          generic identifier [30] | rank stem [120]
 [30] generic identifier = name [55]
[120] rank stem = name [55]
 [55] name = name start character [53] , name character [52] *

(Note 1: "name" & "name start character" declarations omitted - suffice
to say whitespace is excluded.)

(Note 2: "document type specification" declaration omitted, because all
HTML profiles include the "CONCUR NO" option, thus excluding this syntax.)

(Note 3: "minimized start-tag" declaration omitted, because although all
HTML profiles include the "SHORTTAG YES" option, the
element-minimization aspects of this option [as distinct from attribute
minimization, e.g. omitted and unquoted attribute values] are not
supported by mainstream browsers; in any case, whitespace is disallowed
prior to generic identifiers in all of the minimized start tag forms.)


3. Firefox 2.0.0.1 and IE 7.0 on WinXP both render "< em>...</em>" as
literal "< em>..." - the (malformed) start tag is rendered as non-markup
plain text, and the close tag is not displayed.


Steve

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25379-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 10 17:50:59 2007
Return-Path: <java-user-return-25379-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99631 invoked from network); 10 Jan 2007 17:50:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Jan 2007 17:50:58 -0000
Received: (qmail 3190 invoked by uid 500); 10 Jan 2007 17:50:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3167 invoked by uid 500); 10 Jan 2007 17:50:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3156 invoked by uid 99); 10 Jan 2007 17:50:57 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Jan 2007 09:50:57 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [200.192.250.52] (HELO vnrproxy.visionnaire.com.br) (200.192.250.52)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Jan 2007 09:50:47 -0800
Received: from localhost (localhost.localdomain [127.0.0.1])
	by vnrproxy.visionnaire.com.br (Postfix) with ESMTP id BD6512FB9D
	for <java-user@lucene.apache.org>; Wed, 10 Jan 2007 14:39:29 -0400 (AMT)
Received: from vnrproxy.visionnaire.com.br ([127.0.0.1])
	by localhost (vnrproxy.visionnaire.com.br [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id 28643-09 for <java-user@lucene.apache.org>;
	Wed, 10 Jan 2007 14:39:23 -0400 (AMT)
Received: from [192.168.1.173] (unknown [200.192.250.53])
	by vnrproxy.visionnaire.com.br (Postfix) with ESMTP id BDF7D2FB95
	for <java-user@lucene.apache.org>; Wed, 10 Jan 2007 14:39:23 -0400 (AMT)
Message-ID: <45A52705.7090206@visionnaire.com.br>
Date: Wed, 10 Jan 2007 15:48:53 -0200
From: Fernando G Bernardino <fgbernardino@visionnaire.com.br>
User-Agent: Thunderbird 2.0b1 (Windows/20061206)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Remove Docs from Index
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Scanned: by amavisd-new-20030616-p10 (Debian) at visionnaire.com.br
X-Virus-Checked: Checked by ClamAV on apache.org

Hi People!

My app needs to update documents from index, so I have to remove and 
insert again, all right?

First I wrote this code:
---
        IndexReader reader = null;
        try
        {
            String index = Webp.getProperty("webp.search.indexFolder");
            Directory directory = FSDirectory.getDirectory(index, false);
           
            reader = IndexReader.open(directory);
            reader.delete(new Term("contentPid", 
String.valueOf("C_"+content.pidObject())));
        }
        ....
---

But It's not working well.. I want to use de method 'reader.delete(int)' 
but I can't discover the document 'ID' to use as parameter.
I wrote some code to return the documents that I have to delete. How can 
I get that ID?

Thanks!

--
Fernando Bernardino

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25380-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 10 17:55:00 2007
Return-Path: <java-user-return-25380-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1264 invoked from network); 10 Jan 2007 17:54:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Jan 2007 17:54:59 -0000
Received: (qmail 10872 invoked by uid 500); 10 Jan 2007 17:54:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10843 invoked by uid 500); 10 Jan 2007 17:54:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10832 invoked by uid 99); 10 Jan 2007 17:54:58 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Jan 2007 09:54:58 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of markrmiller@gmail.com designates 66.249.92.174 as permitted sender)
Received: from [66.249.92.174] (HELO ug-out-1314.google.com) (66.249.92.174)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Jan 2007 09:54:49 -0800
Received: by ug-out-1314.google.com with SMTP id m2so220549ugc
        for <java-user@lucene.apache.org>; Wed, 10 Jan 2007 09:54:27 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=HJ1IzDM4mFXA76SIEYzYQr1aily/S2jj1UDkHRN7ccP+GpHwpXSufqcw8JKYhwHcyzt/2zog9FWUHOJpeymJ+igU5HoGHzBCS0APwtCtOwOnIv9q35aKTQydNKLxJsZ6hmgSYTvLHbMwbxd5iiLW1H5CFoXGYeQPQT2BIlGO6VU=
Received: by 10.82.116.15 with SMTP id o15mr126407buc.1168451667448;
        Wed, 10 Jan 2007 09:54:27 -0800 (PST)
Received: by 10.82.141.10 with HTTP; Wed, 10 Jan 2007 09:54:27 -0800 (PST)
Message-ID: <ab0709bf0701100954m155221cajf7ef90b0d16b5cf1@mail.gmail.com>
Date: Wed, 10 Jan 2007 12:54:27 -0500
From: "Mark Miller" <markrmiller@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Text storing design and performance question
In-Reply-To: <8261739.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_10522_14410808.1168451667019"
References: <8259883.post@talk.nabble.com>
	 <06695F9F-B4EE-4C6B-845E-BE703DC92B6C@ehatchersolutions.com>
	 <8261408.post@talk.nabble.com> <45A51B99.8080304@gmail.com>
	 <8261739.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_10522_14410808.1168451667019
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Being stateless should not be much of an issue. As Erick mentioned, the
highlighter just expects you to pass it the query again and the text to be
highlighted. So when you show the pagination you just need to keep around
what query generated the current page...then shove each piece of relevant
text from the database through the highlighter (with the query) before
displaying it.

- Mark

On 1/10/07, moraleslos <moraleslos@hotmail.com> wrote:
>
>
> Hi Mark,
>
> Looks like I've got to implement some sort of pagination for my clients.
> Problem is everything is stateless so looks like there's some work I need
> to
> do on my end.  Thanks.
>
> -los
>
>
>
> markrmiller wrote:
> >
> > Usually a user cannot easily browse 50,000 on a single display, and so
> > you would only highlight the docs as they became visible to the user.
> > This is generally a small amount...often one at a time.
> >
> > - Mark
> >
> > moraleslos wrote:
> >> Hi Erik,
> >>
> >> Would that slow performance a bit?  For example, say I receive 50,000
> >> hits
> >> from a search.  From your explanation, I have to retrieve the DB id
> from
> >> each hit, perform a query to the DB using the id to retrieve the full
> >> contents for each hit, run highlighter on each content, and then
> return?
> >> Although I'll give this a shot, it will seem to slow performance on the
> >> searching side of things, wouldn't it?  Thanks for the reply.
> >>
> >> -los
> >>
> >>
> >>
> >> Erik Hatcher wrote:
> >>
> >>> You don't have to store a field to highlight text.  If you've got it
> >>> in your database, retrieve it from there and pass that string to the
> >>> highlighter instead.
> >>>
> >>>     Erik
> >>>
> >>>
> >>> On Jan 10, 2007, at 10:45 AM, moraleslos wrote:
> >>>
> >>>
> >>>> I'm running into a little dilemma with Lucene highlighting and
> >>>> indexing.  I
> >>>> currently index anything and everything that gets inserted into a
> >>>> database.
> >>>> This database includes all the content that is searched.  Now I'll
> >>>> have lots
> >>>> and lots of content, thinking of the range of 50GB+, all stored in
> >>>> the DB.
> >>>> Using Lucene, I index all of this.  But since I'm using highlighting
> >>>> features, I'll also need to store the content into the index.  Not
> >>>> sure what
> >>>> the performance implications are during a search but I know that
> >>>> indexing
> >>>> performance should be slower as well as the index size being
> enormous.
> >>>> Because I have duplicated data, one in the index and the other in
> >>>> the db,
> >>>> are there other ways of handling this situation in a more efficient
> >>>> and
> >>>> performant way?  Thanks in advance.
> >>>>
> >>>> -los
> >>>> --
> >>>> View this message in context: http://www.nabble.com/Text-storing-
> >>>> design-and-performance-question-tf2953201.html#a8259883
> >>>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
> >>>>
> >>>>
> >>>> ---------------------------------------------------------------------
> >>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >>>> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>>>
> >>> ---------------------------------------------------------------------
> >>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >>> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>>
> >>>
> >>>
> >>>
> >>
> >>
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> >
>
> --
> View this message in context:
> http://www.nabble.com/Text-storing-design-and-performance-question-tf2953201.html#a8261739
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_10522_14410808.1168451667019--

From java-user-return-25381-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 10 18:16:13 2007
Return-Path: <java-user-return-25381-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8667 invoked from network); 10 Jan 2007 18:16:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Jan 2007 18:16:13 -0000
Received: (qmail 39437 invoked by uid 500); 10 Jan 2007 18:16:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39166 invoked by uid 500); 10 Jan 2007 18:16:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39155 invoked by uid 99); 10 Jan 2007 18:16:13 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Jan 2007 10:16:13 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [128.230.18.29] (HELO mailer.syr.edu) (128.230.18.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Jan 2007 10:16:02 -0800
Received: from [128.230.84.138] (syru84-138.syr.edu) by mailer.syr.edu (LSMTP for Windows NT v1.1b) with SMTP id <0.15D38CDC@mailer.syr.edu>; Wed, 10 Jan 2007 13:15:41 -0500
Message-ID: <45A52D4D.4030803@syr.edu>
Date: Wed, 10 Jan 2007 13:15:41 -0500
From: Steven Rowe <sarowe@syr.edu>
User-Agent: Mail/News 1.5.0.4-GroupWise-IMAP-fix (Windows/20060619)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Getting a Better Understanding of Lucene's Search Operators
References: <ae6f38f60701100832p1ec8b05do52769ca8f96bfede@mail.gmail.com>	 <45A51B38.3080904@gmail.com> <ae6f38f60701100922w748a234wada7e44a96a3396@mail.gmail.com>
In-Reply-To: <ae6f38f60701100922w748a234wada7e44a96a3396@mail.gmail.com>
X-Enigmail-Version: 0.94.1.2
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Walt Stoneburner wrote:
> Do I have correct and complete understanding of the two operators?

Not entirely complete :) - more information in the October 2006 thread
"QueryParser is Badly Broken":

<http://www.gossamer-threads.com/lists/lucene/java-user/40945>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25382-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 10 18:30:48 2007
Return-Path: <java-user-return-25382-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 17234 invoked from network); 10 Jan 2007 18:30:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Jan 2007 18:30:47 -0000
Received: (qmail 62320 invoked by uid 500); 10 Jan 2007 18:30:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62292 invoked by uid 500); 10 Jan 2007 18:30:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62281 invoked by uid 99); 10 Jan 2007 18:30:46 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Jan 2007 10:30:46 -0800
X-ASF-Spam-Status: No, hits=2.1 required=10.0
	tests=HTML_MESSAGE,HTML_TAG_EXIST_TBODY,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of walt.stoneburner@gmail.com designates 209.85.132.240 as permitted sender)
Received: from [209.85.132.240] (HELO an-out-0708.google.com) (209.85.132.240)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Jan 2007 10:30:37 -0800
Received: by an-out-0708.google.com with SMTP id c3so107178ana
        for <java-user@lucene.apache.org>; Wed, 10 Jan 2007 10:30:16 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=ibl2JSAZriAU9YntBRIKvdRKeI9NkXSuHCSd1NrNatYtYk1mzsDL8rGXA4eLVNhxAzRDU9DGJ9Nf5n4+oCar9McAUntv6iQo+cvGuFhnIr3riu6wMFMNd/Gwry8ZFm/NGSX90R2BBbgFaCwKnhafyv7JEIi4nYn0yDCVgOFSPgs=
Received: by 10.78.193.19 with SMTP id q19mr228218huf.1168453815339;
        Wed, 10 Jan 2007 10:30:15 -0800 (PST)
Received: by 10.78.32.10 with HTTP; Wed, 10 Jan 2007 10:30:15 -0800 (PST)
Message-ID: <ae6f38f60701101030r287473fdtd6a4e3532e16bb14@mail.gmail.com>
Date: Wed, 10 Jan 2007 13:30:15 -0500
From: "Walt Stoneburner" <walt.stoneburner@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Getting a Better Understanding of Lucene's Search Operators
In-Reply-To: <45A52D4D.4030803@syr.edu>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_9007_26625701.1168453815186"
References: <ae6f38f60701100832p1ec8b05do52769ca8f96bfede@mail.gmail.com>
	 <45A51B38.3080904@gmail.com>
	 <ae6f38f60701100922w748a234wada7e44a96a3396@mail.gmail.com>
	 <45A52D4D.4030803@syr.edu>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_9007_26625701.1168453815186
Content-Type: text/plain; charset=WINDOWS-1252; format=flowed
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Based on responses from Steven Rowe <sarowe@syr.edu> and Mark Miller <
markmiller@gmail.com>:

> Lucene uses a scoring system that behaves similarly to a boolean system.
> ... more information in the October 2006 thread
> "QueryParser is Badly Broken<http://www.gossamer-threads.com/lists/lucene=
/java-user/40945>
> "


This is now my generalized understanding of the parser's operators.  Am I
closer?


*Document*

A OR B

A B

+A B

A

NOT B

-B

A AND NOT B

A =96B

*No Matching Terms*

0

0

0

0

1

0

0

0

A

1

1

1

1

1

0

1

1

B

1

1

0

0

0

0

0

*0*

A B

1

2

2

1

0

0

0

1* 0*
  Non-zero results are returned to the user.               *Walt Stoneburne=
r
<wls@wwco.com>   10-Jan-2007   v1.0*

-wls

------=_Part_9007_26625701.1168453815186--

From java-user-return-25383-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 10 18:47:37 2007
Return-Path: <java-user-return-25383-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 23377 invoked from network); 10 Jan 2007 18:47:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Jan 2007 18:47:37 -0000
Received: (qmail 98489 invoked by uid 500); 10 Jan 2007 18:47:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98445 invoked by uid 500); 10 Jan 2007 18:47:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98418 invoked by uid 99); 10 Jan 2007 18:47:29 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Jan 2007 10:47:28 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of markrmiller@gmail.com designates 66.249.92.171 as permitted sender)
Received: from [66.249.92.171] (HELO ug-out-1314.google.com) (66.249.92.171)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Jan 2007 10:47:19 -0800
Received: by ug-out-1314.google.com with SMTP id k40so187628ugc
        for <java-user@lucene.apache.org>; Wed, 10 Jan 2007 10:46:57 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=sHyyhBi16O8sJUG60uUi3+udW1g3GpX0A7VoSb5hhSlgYDqykWXstcaRy0IKSCwJPEXAjlk3pprVWce3uKSvPKx9DxJTFQ4QcW36cAO9kp1CJjB4bHmufJ8SRQs2/LF4NuBPwOLFnLQEVJ30uvFT3gZYfhjjBJ85k+fmas/I/4Q=
Received: by 10.82.116.15 with SMTP id o15mr138987buc.1168454817656;
        Wed, 10 Jan 2007 10:46:57 -0800 (PST)
Received: by 10.82.141.10 with HTTP; Wed, 10 Jan 2007 10:46:57 -0800 (PST)
Message-ID: <ab0709bf0701101046t446fbefcwe67c775cb5c8eb89@mail.gmail.com>
Date: Wed, 10 Jan 2007 13:46:57 -0500
From: "Mark Miller" <markrmiller@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Getting a Better Understanding of Lucene's Search Operators
In-Reply-To: <ae6f38f60701100922w748a234wada7e44a96a3396@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_11387_24548407.1168454817497"
References: <ae6f38f60701100832p1ec8b05do52769ca8f96bfede@mail.gmail.com>
	 <45A51B38.3080904@gmail.com>
	 <ae6f38f60701100922w748a234wada7e44a96a3396@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_11387_24548407.1168454817497
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

>
> So, if I understand you right, a simple query of NOT ORANGES gets me every
> document that does not contain the word oranges, while a separate query
> with
> -ORANGES added will force the score to zero for all documents in which
> oranges does not appear.  One's a selector, the other is a filter.


Not quite. NOT oranges is not possible. Neither is  -Oranges. Both will make
a query that score each doc to 0  if oranges is not found...but  ever doc
will start with 0 also...non will return. You need a piece of the query to
generate a positive score for the NOT or - to take effect -- otherwise every
document scores 0 and does not return.

- mark

------=_Part_11387_24548407.1168454817497--

From java-user-return-25384-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 10 18:52:17 2007
Return-Path: <java-user-return-25384-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25471 invoked from network); 10 Jan 2007 18:52:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Jan 2007 18:52:16 -0000
Received: (qmail 8122 invoked by uid 500); 10 Jan 2007 18:52:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8088 invoked by uid 500); 10 Jan 2007 18:52:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8077 invoked by uid 99); 10 Jan 2007 18:52:15 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Jan 2007 10:52:15 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [128.218.33.11] (HELO gossamer.ckm.ucsf.edu) (128.218.33.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Jan 2007 10:52:04 -0800
Received: from CKMPC08 (tikal.library.ucsf.edu [128.218.15.151])
	by gossamer.ckm.ucsf.edu (8.13.8/8.13.8) with ESMTP id l0AIpfvt025573
	for <java-user@lucene.apache.org>; Wed, 10 Jan 2007 10:51:44 -0800 (PST)
From: "Renaud Waldura" <renaud.waldura@library.ucsf.edu>
To: <java-user@lucene.apache.org>
Subject: RE: Text storing design and performance question
Date: Wed, 10 Jan 2007 10:51:43 -0800
Message-ID: <002901c734e8$61ec4680$970fda80@libraria.ucsf.edu>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
In-Reply-To: <ab0709bf0701100954m155221cajf7ef90b0d16b5cf1@mail.gmail.com>
Thread-Index: Acc04HHOVWqfjR2bRxKbjWjNLQuHPwABtakg
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3028
X-Virus-Checked: Checked by ClamAV on apache.org

We used to store a big text field for highlighting purposes too, and it
proved a big pain. The index was gigantic, it took forever to build, and the
search performance would sometimes suffer from it (just a hunch).

Now we keep this big text field on disk (in a file), and feed it to the
highlighter. Unfortunately the highlighter has to read the file, parse it,
etc... It's slooow, sometimes over a second on a large document.

I vaguely remember reading somewhere newer versions of the highlighter are
able to leverage term vectors to avoid re-parsing the field. (I could be
mistaken.) Maybe just storing term vectors would keep the index lean and
allow for fast highlighting?

--Renaud

 

-----Original Message-----
From: Mark Miller [mailto:markrmiller@gmail.com] 
Sent: Wednesday, January 10, 2007 9:54 AM
To: java-user@lucene.apache.org
Subject: Re: Text storing design and performance question

Being stateless should not be much of an issue. As Erick mentioned, the
highlighter just expects you to pass it the query again and the text to be
highlighted. So when you show the pagination you just need to keep around
what query generated the current page...then shove each piece of relevant
text from the database through the highlighter (with the query) before
displaying it.

- Mark

On 1/10/07, moraleslos <moraleslos@hotmail.com> wrote:
>
>
> Hi Mark,
>
> Looks like I've got to implement some sort of pagination for my clients.
> Problem is everything is stateless so looks like there's some work I 
> need to do on my end.  Thanks.
>
> -los
>
>
>
> markrmiller wrote:
> >
> > Usually a user cannot easily browse 50,000 on a single display, and 
> > so you would only highlight the docs as they became visible to the user.
> > This is generally a small amount...often one at a time.
> >
> > - Mark
> >
> > moraleslos wrote:
> >> Hi Erik,
> >>
> >> Would that slow performance a bit?  For example, say I receive 
> >> 50,000 hits from a search.  From your explanation, I have to 
> >> retrieve the DB id
> from
> >> each hit, perform a query to the DB using the id to retrieve the 
> >> full contents for each hit, run highlighter on each content, and 
> >> then
> return?
> >> Although I'll give this a shot, it will seem to slow performance on 
> >> the searching side of things, wouldn't it?  Thanks for the reply.
> >>
> >> -los
> >>
> >>
> >>
> >> Erik Hatcher wrote:
> >>
> >>> You don't have to store a field to highlight text.  If you've got 
> >>> it in your database, retrieve it from there and pass that string 
> >>> to the highlighter instead.
> >>>
> >>>     Erik
> >>>
> >>>
> >>> On Jan 10, 2007, at 10:45 AM, moraleslos wrote:
> >>>
> >>>
> >>>> I'm running into a little dilemma with Lucene highlighting and 
> >>>> indexing.  I currently index anything and everything that gets 
> >>>> inserted into a database.
> >>>> This database includes all the content that is searched.  Now 
> >>>> I'll have lots and lots of content, thinking of the range of 
> >>>> 50GB+, all stored in the DB.
> >>>> Using Lucene, I index all of this.  But since I'm using 
> >>>> highlighting features, I'll also need to store the content into 
> >>>> the index.  Not sure what the performance implications are during 
> >>>> a search but I know that indexing performance should be slower as 
> >>>> well as the index size being
> enormous.
> >>>> Because I have duplicated data, one in the index and the other in 
> >>>> the db, are there other ways of handling this situation in a more 
> >>>> efficient and performant way?  Thanks in advance.
> >>>>
> >>>> -los
> >>>> --
> >>>> View this message in context: http://www.nabble.com/Text-storing-
> >>>> design-and-performance-question-tf2953201.html#a8259883
> >>>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
> >>>>
> >>>>
> >>>> ---------------------------------------------------------------------
> >>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >>>> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>>>
> >>> ---------------------------------------------------------------------
> >>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >>> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>>
> >>>
> >>>
> >>>
> >>
> >>
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> >
>
> --
> View this message in context:
>
http://www.nabble.com/Text-storing-design-and-performance-question-tf2953201
.html#a8261739
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25385-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 10 18:54:34 2007
Return-Path: <java-user-return-25385-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 27810 invoked from network); 10 Jan 2007 18:54:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Jan 2007 18:54:30 -0000
Received: (qmail 12931 invoked by uid 500); 10 Jan 2007 18:54:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12907 invoked by uid 500); 10 Jan 2007 18:54:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12896 invoked by uid 99); 10 Jan 2007 18:54:29 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Jan 2007 10:54:29 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 66.249.92.174 as permitted sender)
Received: from [66.249.92.174] (HELO ug-out-1314.google.com) (66.249.92.174)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Jan 2007 10:54:19 -0800
Received: by ug-out-1314.google.com with SMTP id k40so189465ugc
        for <java-user@lucene.apache.org>; Wed, 10 Jan 2007 10:53:58 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=I+VK/Qu+MCtFHgfseuqCUMRQjMdRmCz6Jr996rKdN/KitFwSGLWZq90cOORvPxHT0Q/GMEO9Q4sAcAH1XK8Ycjezv6CPkI6kFskH+MKJxWz0p9w03bEoW341NSMik6Cc36rjtXBz+DYXon4evCgEcAuj9rzIrNDRLtpPwu/8lUQ=
Received: by 10.82.118.2 with SMTP id q2mr139861buc.1168455238020;
        Wed, 10 Jan 2007 10:53:58 -0800 (PST)
Received: by 10.82.162.9 with HTTP; Wed, 10 Jan 2007 10:53:57 -0800 (PST)
Message-ID: <359a92830701101053x207a929dhad1d37c08a982dea@mail.gmail.com>
Date: Wed, 10 Jan 2007 13:53:57 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Remove Docs from Index
In-Reply-To: <45A52705.7090206@visionnaire.com.br>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_11384_26723405.1168455237993"
References: <45A52705.7090206@visionnaire.com.br>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_11384_26723405.1168455237993
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

When you say it isn't working very well, what do you mean? It's slow? It's
not removing what you expect? If the latter, I suspect you're tokenizing the
term when you index such that it's not being found correctly....

You need to, somehow, get the Lucene document ID to remove. You can either
do a search, or you can use the termenum/termdocs classes to find out what
documents contain the term you want.


Best
Erick

On 1/10/07, Fernando G Bernardino <fgbernardino@visionnaire.com.br> wrote:
>
> Hi People!
>
> My app needs to update documents from index, so I have to remove and
> insert again, all right?
>
> First I wrote this code:
> ---
>         IndexReader reader = null;
>         try
>         {
>             String index = Webp.getProperty("webp.search.indexFolder");
>             Directory directory = FSDirectory.getDirectory(index, false);
>
>             reader = IndexReader.open(directory);
>             reader.delete(new Term("contentPid",
> String.valueOf("C_"+content.pidObject())));
>         }
>         ....
> ---
>
> But It's not working well.. I want to use de method 'reader.delete(int)'
> but I can't discover the document 'ID' to use as parameter.
> I wrote some code to return the documents that I have to delete. How can
> I get that ID?
>
> Thanks!
>
> --
> Fernando Bernardino
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_11384_26723405.1168455237993--

From java-user-return-25386-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 10 19:06:45 2007
Return-Path: <java-user-return-25386-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31166 invoked from network); 10 Jan 2007 19:06:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Jan 2007 19:06:44 -0000
Received: (qmail 43684 invoked by uid 500); 10 Jan 2007 19:06:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43496 invoked by uid 500); 10 Jan 2007 19:06:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43485 invoked by uid 99); 10 Jan 2007 19:06:44 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Jan 2007 11:06:44 -0800
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of DORONC@il.ibm.com designates 195.212.29.153 as permitted sender)
Received: from [195.212.29.153] (HELO mtagate4.de.ibm.com) (195.212.29.153)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Jan 2007 11:06:32 -0800
Received: from d12nrmr1607.megacenter.de.ibm.com (d12nrmr1607.megacenter.de.ibm.com [9.149.167.49])
	by mtagate4.de.ibm.com (8.13.8/8.13.8) with ESMTP id l0AJ6ACK106804
	for <java-user@lucene.apache.org>; Wed, 10 Jan 2007 19:06:10 GMT
Received: from d12av04.megacenter.de.ibm.com (d12av04.megacenter.de.ibm.com [9.149.165.229])
	by d12nrmr1607.megacenter.de.ibm.com (8.13.6/8.13.6/NCO v8.1.1) with ESMTP id l0AJ6Aur3035376
	for <java-user@lucene.apache.org>; Wed, 10 Jan 2007 20:06:10 +0100
Received: from d12av04.megacenter.de.ibm.com (loopback [127.0.0.1])
	by d12av04.megacenter.de.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id l0AJ6Aso023613
	for <java-user@lucene.apache.org>; Wed, 10 Jan 2007 20:06:10 +0100
Received: from d12mc102.megacenter.de.ibm.com (d12mc102.megacenter.de.ibm.com [9.149.167.114])
	by d12av04.megacenter.de.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id l0AJ6AAH023610
	for <java-user@lucene.apache.org>; Wed, 10 Jan 2007 20:06:10 +0100
In-Reply-To: <45A52705.7090206@visionnaire.com.br>
Subject: Re: Remove Docs from Index
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 7.0 HF277 June 21, 2006
Message-ID: <OFA35A62D7.2B719ED0-ON8825725F.0065BAB6-8825725F.0068CAEC@il.ibm.com>
From: Doron Cohen <DORONC@il.ibm.com>
Date: Wed, 10 Jan 2007 11:04:36 -0800
X-MIMETrack: Serialize by Router on D12MC102/12/M/IBM(Release 7.0.2HF71 | November 3, 2006) at
 10/01/2007 21:06:09
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org

Fernando, this code seems okay, in what sense is it "not working well"?

One thing to verify is that the "contentPid" field you are deleting by was
added to the index with Index.UN_TOKENIZED, otherwise the analyzer in use
while indexing might have broken or lower-cased that term (e.g.
"contentPid:C_1078") and in that case the delete-by-term would not delete
anything.

Deleting by term is a cleaner way to go, well, cleaner than deleting by id,
but if you prefer, you can do a search for the appropriate term, extract
the  docid (or docids) from the search result, and then use the (same)
reader to delete by docid. Make sure to use the same reader, because docids
found in one reader are not necessarily valid in another reader.

Fernando G Bernardino <fgbernardino@visionnaire.com.br> wrote on 10/01/2007
09:48:53:

> Hi People!
>
> My app needs to update documents from index, so I have to remove and
> insert again, all right?
>
> First I wrote this code:
> ---
>         IndexReader reader = null;
>         try
>         {
>             String index = Webp.getProperty("webp.search.indexFolder");
>             Directory directory = FSDirectory.getDirectory(index, false);
>
>             reader = IndexReader.open(directory);
>             reader.delete(new Term("contentPid",
> String.valueOf("C_"+content.pidObject())));
>         }
>         ....
> ---
>
> But It's not working well.. I want to use de method 'reader.delete(int)'
> but I can't discover the document 'ID' to use as parameter.
> I wrote some code to return the documents that I have to delete. How can
> I get that ID?
>
> Thanks!
>
> --
> Fernando Bernardino
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25387-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 10 20:00:25 2007
Return-Path: <java-user-return-25387-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 46613 invoked from network); 10 Jan 2007 20:00:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Jan 2007 20:00:25 -0000
Received: (qmail 31349 invoked by uid 500); 10 Jan 2007 20:00:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31312 invoked by uid 500); 10 Jan 2007 20:00:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31300 invoked by uid 99); 10 Jan 2007 20:00:25 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Jan 2007 12:00:25 -0800
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=FORGED_HOTMAIL_RCVD2,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Jan 2007 12:00:15 -0800
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1H4jc3-00016J-GF
	for java-user@lucene.apache.org; Wed, 10 Jan 2007 11:59:55 -0800
Message-ID: <8265113.post@talk.nabble.com>
Date: Wed, 10 Jan 2007 11:59:55 -0800 (PST)
From: moraleslos <moraleslos@hotmail.com>
To: java-user@lucene.apache.org
Subject: Re: Text storing design and performance question
In-Reply-To: <ab0709bf0701100954m155221cajf7ef90b0d16b5cf1@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: moraleslos@hotmail.com
References: <8259883.post@talk.nabble.com> <06695F9F-B4EE-4C6B-845E-BE703DC92B6C@ehatchersolutions.com> <8261408.post@talk.nabble.com> <45A51B99.8080304@gmail.com> <8261739.post@talk.nabble.com> <ab0709bf0701100954m155221cajf7ef90b0d16b5cf1@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


So I guess what you're stating is that Lucene is really fast on searches that
doing repeated searches for pagination wouldn't make much of a difference
(even though its redundant)...  I'll give this a shot.  Thanks Mark.

-los


markrmiller wrote:
> 
> Being stateless should not be much of an issue. As Erick mentioned, the
> highlighter just expects you to pass it the query again and the text to be
> highlighted. So when you show the pagination you just need to keep around
> what query generated the current page...then shove each piece of relevant
> text from the database through the highlighter (with the query) before
> displaying it.
> 
> - Mark
> 
> On 1/10/07, moraleslos <moraleslos@hotmail.com> wrote:
>>
>>
>> Hi Mark,
>>
>> Looks like I've got to implement some sort of pagination for my clients.
>> Problem is everything is stateless so looks like there's some work I need
>> to
>> do on my end.  Thanks.
>>
>> -los
>>
>>
>>
>> markrmiller wrote:
>> >
>> > Usually a user cannot easily browse 50,000 on a single display, and so
>> > you would only highlight the docs as they became visible to the user.
>> > This is generally a small amount...often one at a time.
>> >
>> > - Mark
>> >
>> > moraleslos wrote:
>> >> Hi Erik,
>> >>
>> >> Would that slow performance a bit?  For example, say I receive 50,000
>> >> hits
>> >> from a search.  From your explanation, I have to retrieve the DB id
>> from
>> >> each hit, perform a query to the DB using the id to retrieve the full
>> >> contents for each hit, run highlighter on each content, and then
>> return?
>> >> Although I'll give this a shot, it will seem to slow performance on
>> the
>> >> searching side of things, wouldn't it?  Thanks for the reply.
>> >>
>> >> -los
>> >>
>> >>
>> >>
>> >> Erik Hatcher wrote:
>> >>
>> >>> You don't have to store a field to highlight text.  If you've got it
>> >>> in your database, retrieve it from there and pass that string to the
>> >>> highlighter instead.
>> >>>
>> >>>     Erik
>> >>>
>> >>>
>> >>> On Jan 10, 2007, at 10:45 AM, moraleslos wrote:
>> >>>
>> >>>
>> >>>> I'm running into a little dilemma with Lucene highlighting and
>> >>>> indexing.  I
>> >>>> currently index anything and everything that gets inserted into a
>> >>>> database.
>> >>>> This database includes all the content that is searched.  Now I'll
>> >>>> have lots
>> >>>> and lots of content, thinking of the range of 50GB+, all stored in
>> >>>> the DB.
>> >>>> Using Lucene, I index all of this.  But since I'm using highlighting
>> >>>> features, I'll also need to store the content into the index.  Not
>> >>>> sure what
>> >>>> the performance implications are during a search but I know that
>> >>>> indexing
>> >>>> performance should be slower as well as the index size being
>> enormous.
>> >>>> Because I have duplicated data, one in the index and the other in
>> >>>> the db,
>> >>>> are there other ways of handling this situation in a more efficient
>> >>>> and
>> >>>> performant way?  Thanks in advance.
>> >>>>
>> >>>> -los
>> >>>> --
>> >>>> View this message in context: http://www.nabble.com/Text-storing-
>> >>>> design-and-performance-question-tf2953201.html#a8259883
>> >>>> Sent from the Lucene - Java Users mailing list archive at
>> Nabble.com.
>> >>>>
>> >>>>
>> >>>>
>> ---------------------------------------------------------------------
>> >>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> >>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>> >>>>
>> >>> ---------------------------------------------------------------------
>> >>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> >>> For additional commands, e-mail: java-user-help@lucene.apache.org
>> >>>
>> >>>
>> >>>
>> >>>
>> >>
>> >>
>> >
>> > ---------------------------------------------------------------------
>> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> > For additional commands, e-mail: java-user-help@lucene.apache.org
>> >
>> >
>> >
>>
>> --
>> View this message in context:
>> http://www.nabble.com/Text-storing-design-and-performance-question-tf2953201.html#a8261739
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
> 
> 

-- 
View this message in context: http://www.nabble.com/Text-storing-design-and-performance-question-tf2953201.html#a8265113
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25388-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 10 20:15:04 2007
Return-Path: <java-user-return-25388-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53559 invoked from network); 10 Jan 2007 20:15:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Jan 2007 20:15:02 -0000
Received: (qmail 88446 invoked by uid 500); 10 Jan 2007 20:15:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88425 invoked by uid 500); 10 Jan 2007 20:15:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88414 invoked by uid 99); 10 Jan 2007 20:15:01 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Jan 2007 12:15:01 -0800
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=FORGED_HOTMAIL_RCVD2,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Jan 2007 12:14:50 -0800
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1H4jq9-00037c-Jl
	for java-user@lucene.apache.org; Wed, 10 Jan 2007 12:14:29 -0800
Message-ID: <8265458.post@talk.nabble.com>
Date: Wed, 10 Jan 2007 12:14:29 -0800 (PST)
From: moraleslos <moraleslos@hotmail.com>
To: java-user@lucene.apache.org
Subject: RE: Text storing design and performance question
In-Reply-To: <002901c734e8$61ec4680$970fda80@libraria.ucsf.edu>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: moraleslos@hotmail.com
References: <8259883.post@talk.nabble.com> <06695F9F-B4EE-4C6B-845E-BE703DC92B6C@ehatchersolutions.com> <8261408.post@talk.nabble.com> <45A51B99.8080304@gmail.com> <8261739.post@talk.nabble.com> <ab0709bf0701100954m155221cajf7ef90b0d16b5cf1@mail.gmail.com> <002901c734e8$61ec4680$970fda80@libraria.ucsf.edu>
X-Virus-Checked: Checked by ClamAV on apache.org


Maybe keeping the data in the DB would make it quicker?  Seems like the I/O
performance would cause most of the performance issues you're seeing.  

-los


Renaud Waldura-5 wrote:
> 
> We used to store a big text field for highlighting purposes too, and it
> proved a big pain. The index was gigantic, it took forever to build, and
> the
> search performance would sometimes suffer from it (just a hunch).
> 
> Now we keep this big text field on disk (in a file), and feed it to the
> highlighter. Unfortunately the highlighter has to read the file, parse it,
> etc... It's slooow, sometimes over a second on a large document.
> 
> I vaguely remember reading somewhere newer versions of the highlighter are
> able to leverage term vectors to avoid re-parsing the field. (I could be
> mistaken.) Maybe just storing term vectors would keep the index lean and
> allow for fast highlighting?
> 
> --Renaud
> 
>  
> 
> -----Original Message-----
> From: Mark Miller [mailto:markrmiller@gmail.com] 
> Sent: Wednesday, January 10, 2007 9:54 AM
> To: java-user@lucene.apache.org
> Subject: Re: Text storing design and performance question
> 
> Being stateless should not be much of an issue. As Erick mentioned, the
> highlighter just expects you to pass it the query again and the text to be
> highlighted. So when you show the pagination you just need to keep around
> what query generated the current page...then shove each piece of relevant
> text from the database through the highlighter (with the query) before
> displaying it.
> 
> - Mark
> 
> On 1/10/07, moraleslos <moraleslos@hotmail.com> wrote:
>>
>>
>> Hi Mark,
>>
>> Looks like I've got to implement some sort of pagination for my clients.
>> Problem is everything is stateless so looks like there's some work I 
>> need to do on my end.  Thanks.
>>
>> -los
>>
>>
>>
>> markrmiller wrote:
>> >
>> > Usually a user cannot easily browse 50,000 on a single display, and 
>> > so you would only highlight the docs as they became visible to the
>> user.
>> > This is generally a small amount...often one at a time.
>> >
>> > - Mark
>> >
>> > moraleslos wrote:
>> >> Hi Erik,
>> >>
>> >> Would that slow performance a bit?  For example, say I receive 
>> >> 50,000 hits from a search.  From your explanation, I have to 
>> >> retrieve the DB id
>> from
>> >> each hit, perform a query to the DB using the id to retrieve the 
>> >> full contents for each hit, run highlighter on each content, and 
>> >> then
>> return?
>> >> Although I'll give this a shot, it will seem to slow performance on 
>> >> the searching side of things, wouldn't it?  Thanks for the reply.
>> >>
>> >> -los
>> >>
>> >>
>> >>
>> >> Erik Hatcher wrote:
>> >>
>> >>> You don't have to store a field to highlight text.  If you've got 
>> >>> it in your database, retrieve it from there and pass that string 
>> >>> to the highlighter instead.
>> >>>
>> >>>     Erik
>> >>>
>> >>>
>> >>> On Jan 10, 2007, at 10:45 AM, moraleslos wrote:
>> >>>
>> >>>
>> >>>> I'm running into a little dilemma with Lucene highlighting and 
>> >>>> indexing.  I currently index anything and everything that gets 
>> >>>> inserted into a database.
>> >>>> This database includes all the content that is searched.  Now 
>> >>>> I'll have lots and lots of content, thinking of the range of 
>> >>>> 50GB+, all stored in the DB.
>> >>>> Using Lucene, I index all of this.  But since I'm using 
>> >>>> highlighting features, I'll also need to store the content into 
>> >>>> the index.  Not sure what the performance implications are during 
>> >>>> a search but I know that indexing performance should be slower as 
>> >>>> well as the index size being
>> enormous.
>> >>>> Because I have duplicated data, one in the index and the other in 
>> >>>> the db, are there other ways of handling this situation in a more 
>> >>>> efficient and performant way?  Thanks in advance.
>> >>>>
>> >>>> -los
>> >>>> --
>> >>>> View this message in context: http://www.nabble.com/Text-storing-
>> >>>> design-and-performance-question-tf2953201.html#a8259883
>> >>>> Sent from the Lucene - Java Users mailing list archive at
>> Nabble.com.
>> >>>>
>> >>>>
>> >>>>
>> ---------------------------------------------------------------------
>> >>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> >>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>> >>>>
>> >>> ---------------------------------------------------------------------
>> >>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> >>> For additional commands, e-mail: java-user-help@lucene.apache.org
>> >>>
>> >>>
>> >>>
>> >>>
>> >>
>> >>
>> >
>> > ---------------------------------------------------------------------
>> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> > For additional commands, e-mail: java-user-help@lucene.apache.org
>> >
>> >
>> >
>>
>> --
>> View this message in context:
>>
> http://www.nabble.com/Text-storing-design-and-performance-question-tf2953201
> .html#a8261739
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
> 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/Text-storing-design-and-performance-question-tf2953201.html#a8265458
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25389-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 10 20:30:29 2007
Return-Path: <java-user-return-25389-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64436 invoked from network); 10 Jan 2007 20:30:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Jan 2007 20:30:29 -0000
Received: (qmail 10430 invoked by uid 500); 10 Jan 2007 20:30:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9424 invoked by uid 500); 10 Jan 2007 20:30:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9413 invoked by uid 99); 10 Jan 2007 20:30:30 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Jan 2007 12:30:30 -0800
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=FORGED_HOTMAIL_RCVD2,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Jan 2007 12:30:20 -0800
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1H4k5A-0004vg-IO
	for java-user@lucene.apache.org; Wed, 10 Jan 2007 12:30:00 -0800
Message-ID: <8265729.post@talk.nabble.com>
Date: Wed, 10 Jan 2007 12:30:00 -0800 (PST)
From: moraleslos <moraleslos@hotmail.com>
To: java-user@lucene.apache.org
Subject: sort on a searchable field
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: moraleslos@hotmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


>From what I understand about Lucene, one can only sort on a field that is
indexed but not tokenized (and hence not searchable).  I have content that
can be searched by keyword and also a date string, e.g. text:Lucene AND
date:[2007-01-01 TO 2007-01-10]

Since my date is searchable, I need to index + tokenize it.  I would like to
somehow return the hits sorted by date.  Is there a workaround for this
using Lucene?  Thanks in advance!

-los
-- 
View this message in context: http://www.nabble.com/sort-on-a-searchable-field-tf2954961.html#a8265729
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25390-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 10 20:32:45 2007
Return-Path: <java-user-return-25390-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65597 invoked from network); 10 Jan 2007 20:32:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Jan 2007 20:32:44 -0000
Received: (qmail 15986 invoked by uid 500); 10 Jan 2007 20:32:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15953 invoked by uid 500); 10 Jan 2007 20:32:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15942 invoked by uid 99); 10 Jan 2007 20:32:44 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Jan 2007 12:32:44 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of yseeley@gmail.com designates 64.233.182.190 as permitted sender)
Received: from [64.233.182.190] (HELO nf-out-0910.google.com) (64.233.182.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Jan 2007 12:32:35 -0800
Received: by nf-out-0910.google.com with SMTP id a27so578121nfc
        for <java-user@lucene.apache.org>; Wed, 10 Jan 2007 12:32:14 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=RWuXnrX9EkG6yUllDdKEIUaLxt+kGDmvAYtEkQF6PO5iQGQXSDuCVJyo3K/3AiLF+vWM3zdm4KEwsJfJHs5ILNPGdHroKXmaHF6Q27NW22sFYlHO2lpmMQIZogNRyOgescqwiMmVbLJ/zhuinJ1m2z709XjIkS4uPIQlVOdJ0yQ=
Received: by 10.82.116.15 with SMTP id o15mr162336buc.1168461134012;
        Wed, 10 Jan 2007 12:32:14 -0800 (PST)
Received: by 10.82.126.8 with HTTP; Wed, 10 Jan 2007 12:32:13 -0800 (PST)
Message-ID: <c68e39170701101232l2b2e8135ycdc1c1e237f41849@mail.gmail.com>
Date: Wed, 10 Jan 2007 15:32:13 -0500
From: "Yonik Seeley" <yonik@apache.org>
Sender: yseeley@gmail.com
To: java-user@lucene.apache.org
Subject: Re: sort on a searchable field
In-Reply-To: <8265729.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <8265729.post@talk.nabble.com>
X-Google-Sender-Auth: db84af38b3d70f97
X-Virus-Checked: Checked by ClamAV on apache.org

On 1/10/07, moraleslos <moraleslos@hotmail.com> wrote:
> From what I understand about Lucene, one can only sort on a field that is
> indexed but not tokenized (and hence not searchable).  I have content that
> can be searched by keyword and also a date string, e.g. text:Lucene AND
> date:[2007-01-01 TO 2007-01-10]
>
> Since my date is searchable, I need to index + tokenize it.  I would like to
> somehow return the hits sorted by date.  Is there a workaround for this
> using Lucene?  Thanks in advance!

The restriction is really that there shouldn't be more than one token
for that field per document.

-Yonik
http://incubator.apache.org/solr Solr, the open-source Lucene search server

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25391-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 10 20:45:46 2007
Return-Path: <java-user-return-25391-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69586 invoked from network); 10 Jan 2007 20:45:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Jan 2007 20:45:40 -0000
Received: (qmail 41242 invoked by uid 500); 10 Jan 2007 20:45:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41207 invoked by uid 500); 10 Jan 2007 20:45:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41196 invoked by uid 99); 10 Jan 2007 20:45:39 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Jan 2007 12:45:39 -0800
X-ASF-Spam-Status: No, hits=3.5 required=10.0
	tests=HTML_MESSAGE,SPF_SOFTFAIL
X-Spam-Check-By: apache.org
Received-SPF: softfail (herse.apache.org: transitioning domain of bim2006@basistech.com does not designate 199.88.205.99 as permitted sender)
Received: from [199.88.205.99] (HELO mail.basistech.com) (199.88.205.99)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Jan 2007 12:45:30 -0800
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C734F8.377F8EED"
Subject: isCurrent says no, but contents still invisible
Date: Wed, 10 Jan 2007 15:45:08 -0500
Message-ID: <E95FD77F0171D14DA1EEE0A785E92B43019AECBB@mail3.basistech.net>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: isCurrent says no, but contents still invisible
Thread-Index: Acc0+Dc3yYI0jXUvSJ65WNlWiEJ0mA==
From: "Benson Margulies" <bim2006@basistech.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01C734F8.377F8EED
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

I'm trying what should be the dumbest possible example of concurrency
management with 2.0 in Java with an ordinary FSDirectory.

=20

I create an IndexWriter from a pathname, an IndexReader from the same
pathname, and an IndexSearcher from the reader.

=20

I add one document.

=20

I call isCurrent() on the reader. It says, 'false'.

=20

So, I close the reader and the searcher, and I create a new reader and a
new searcher.  I search for the document, and I don't find it.

=20

I must be missing something simple.

=20


------_=_NextPart_001_01C734F8.377F8EED--

From java-user-return-25392-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 10 21:09:04 2007
Return-Path: <java-user-return-25392-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77013 invoked from network); 10 Jan 2007 21:09:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Jan 2007 21:09:03 -0000
Received: (qmail 85174 invoked by uid 500); 10 Jan 2007 21:09:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85145 invoked by uid 500); 10 Jan 2007 21:09:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85133 invoked by uid 99); 10 Jan 2007 21:09:02 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Jan 2007 13:09:01 -0800
X-ASF-Spam-Status: No, hits=0.8 required=10.0
	tests=DNS_FROM_RFC_ABUSE,MAILTO_TO_SPAM_ADDR,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of DORONC@il.ibm.com designates 195.212.29.154 as permitted sender)
Received: from [195.212.29.154] (HELO mtagate5.de.ibm.com) (195.212.29.154)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Jan 2007 13:08:50 -0800
Received: from d12nrmr1607.megacenter.de.ibm.com (d12nrmr1607.megacenter.de.ibm.com [9.149.167.49])
	by mtagate5.de.ibm.com (8.13.8/8.13.8) with ESMTP id l0AL8Sk0035688
	for <java-user@lucene.apache.org>; Wed, 10 Jan 2007 21:08:28 GMT
Received: from d12av04.megacenter.de.ibm.com (d12av04.megacenter.de.ibm.com [9.149.165.229])
	by d12nrmr1607.megacenter.de.ibm.com (8.13.6/8.13.6/NCO v8.1.1) with ESMTP id l0AL8S0K1601784
	for <java-user@lucene.apache.org>; Wed, 10 Jan 2007 22:08:28 +0100
Received: from d12av04.megacenter.de.ibm.com (loopback [127.0.0.1])
	by d12av04.megacenter.de.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id l0AL8SLU015336
	for <java-user@lucene.apache.org>; Wed, 10 Jan 2007 22:08:28 +0100
Received: from d12mc102.megacenter.de.ibm.com (d12mc102.megacenter.de.ibm.com [9.149.167.114])
	by d12av04.megacenter.de.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id l0AL8SYB015332
	for <java-user@lucene.apache.org>; Wed, 10 Jan 2007 22:08:28 +0100
In-Reply-To: <E95FD77F0171D14DA1EEE0A785E92B43019AECBB@mail3.basistech.net>
Subject: Re: isCurrent says no, but contents still invisible
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 7.0 HF277 June 21, 2006
Message-ID: <OF582682E5.9CCB5E07-ON8825725F.00736E36-8825725F.0073FF98@il.ibm.com>
From: Doron Cohen <DORONC@il.ibm.com>
Date: Wed, 10 Jan 2007 13:07:00 -0800
X-MIMETrack: Serialize by Router on D12MC102/12/M/IBM(Release 7.0.2HF71 | November 3, 2006) at
 10/01/2007 23:08:27
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org

That's strange. Since you don't close the writer usually adding the doc
would not modify the index (unless adding the doc triggered a merge).

You may want to check that:
1. writer and reader really opened against the same path;
2. reader isCurrent state also before adding the doc and after re-opening;
3. searched terms vs. added terms - might not be related to concurrency at
all.

Finally perhaps post here the code so people can take a look.

"Benson Margulies" <bim2006@basistech.com> wrote on 10/01/2007 12:45:08:

> I'm trying what should be the dumbest possible example of concurrency
> management with 2.0 in Java with an ordinary FSDirectory.
>
>
>
> I create an IndexWriter from a pathname, an IndexReader from the same
> pathname, and an IndexSearcher from the reader.
>
>
>
> I add one document.
>
>
>
> I call isCurrent() on the reader. It says, 'false'.
>
>
>
> So, I close the reader and the searcher, and I create a new reader and a
> new searcher.  I search for the document, and I don't find it.
>
>
>
> I must be missing something simple.
>
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25393-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 10 21:17:44 2007
Return-Path: <java-user-return-25393-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79809 invoked from network); 10 Jan 2007 21:17:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Jan 2007 21:17:43 -0000
Received: (qmail 4018 invoked by uid 500); 10 Jan 2007 21:17:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3978 invoked by uid 500); 10 Jan 2007 21:17:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3959 invoked by uid 99); 10 Jan 2007 21:17:42 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Jan 2007 13:17:42 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 66.249.92.174 as permitted sender)
Received: from [66.249.92.174] (HELO ug-out-1314.google.com) (66.249.92.174)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Jan 2007 13:17:33 -0800
Received: by ug-out-1314.google.com with SMTP id k40so226009ugc
        for <java-user@lucene.apache.org>; Wed, 10 Jan 2007 13:17:12 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=sEFoA6LQsOSH4Fd+ZgJQJeCsV3NTs1b609gZOOTSecXD91sP+Rqu+ifHS6xQYlWrSdmuJWC4QvJqiQH7vhoZdLjynkC47ePbC6hZe6Fg5JALBY0lZOFdl5gZUsPxJ5btFCC6XMjMblcUtMDRwXn+GR32J9A3vrzwcx7kay2QLd8=
Received: by 10.82.179.9 with SMTP id b9mr172454buf.1168463832026;
        Wed, 10 Jan 2007 13:17:12 -0800 (PST)
Received: by 10.82.162.9 with HTTP; Wed, 10 Jan 2007 13:17:11 -0800 (PST)
Message-ID: <359a92830701101317n21eab040vdca50a55861a7115@mail.gmail.com>
Date: Wed, 10 Jan 2007 16:17:11 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: sort on a searchable field
In-Reply-To: <8265729.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_13743_22832542.1168463831669"
References: <8265729.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_13743_22832542.1168463831669
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I'm pretty sure you can search UN_TOKENIZED fields, just be sure the
analyzers you use for querying don't break your query input up.... The
javadoc implies so (for the Sort class...)

**************
he fields used to determine sort order must be carefully chosen. Documents
must contain a single term in such a field, and the value of the term should
indicate the document's relative position in a given sort order. The field
must be indexed, but should not be tokenized, and does not need to be stored
(unless you happen to want it back with the rest of your document data). In
other words:

document.add (new Field ("byNumber", Integer.toString(x), Field.Store.NO,
Field.Index.UN_TOKENIZED));

*******************


Best
Erick


On 1/10/07, moraleslos <moraleslos@hotmail.com> wrote:
>
>
> From what I understand about Lucene, one can only sort on a field that is
> indexed but not tokenized (and hence not searchable).  I have content that
> can be searched by keyword and also a date string, e.g. text:Lucene AND
> date:[2007-01-01 TO 2007-01-10]
>
> Since my date is searchable, I need to index + tokenize it.  I would like
> to
> somehow return the hits sorted by date.  Is there a workaround for this
> using Lucene?  Thanks in advance!
>
> -los
> --
> View this message in context:
> http://www.nabble.com/sort-on-a-searchable-field-tf2954961.html#a8265729
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_13743_22832542.1168463831669--

From java-user-return-25394-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 10 21:46:09 2007
Return-Path: <java-user-return-25394-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86989 invoked from network); 10 Jan 2007 21:46:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Jan 2007 21:46:08 -0000
Received: (qmail 53488 invoked by uid 500); 10 Jan 2007 21:46:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53458 invoked by uid 500); 10 Jan 2007 21:46:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53447 invoked by uid 99); 10 Jan 2007 21:46:07 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Jan 2007 13:46:07 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [128.218.33.11] (HELO gossamer.ckm.ucsf.edu) (128.218.33.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Jan 2007 13:45:56 -0800
Received: from CKMPC08 (tikal.library.ucsf.edu [128.218.15.151])
	by gossamer.ckm.ucsf.edu (8.13.8/8.13.8) with ESMTP id l0ALjNkU025202
	for <java-user@lucene.apache.org>; Wed, 10 Jan 2007 13:45:26 -0800 (PST)
From: "Renaud Waldura" <renaud.waldura@library.ucsf.edu>
To: <java-user@lucene.apache.org>
Subject: RE: Text storing design and performance question
Date: Wed, 10 Jan 2007 13:45:18 -0800
Message-ID: <004201c73500$a1af97a0$970fda80@libraria.ucsf.edu>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
In-Reply-To: <8265458.post@talk.nabble.com>
Thread-Index: Acc09AL6WoKwTx+DRgGqY30BzBLufQAA9T2A
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3028
X-Virus-Checked: Checked by ClamAV on apache.org

It could well be. Or maybe not; one could speculate the JDBC overhead
(especially over a network) would make DB access slower than disk (local
filesystem). YMMV as they say.



-----Original Message-----
From: moraleslos [mailto:moraleslos@hotmail.com] 
Sent: Wednesday, January 10, 2007 12:14 PM
To: java-user@lucene.apache.org
Subject: RE: Text storing design and performance question


Maybe keeping the data in the DB would make it quicker?  Seems like the I/O
performance would cause most of the performance issues you're seeing.  

-los


Renaud Waldura-5 wrote:
> 
> We used to store a big text field for highlighting purposes too, and 
> it proved a big pain. The index was gigantic, it took forever to 
> build, and the search performance would sometimes suffer from it (just 
> a hunch).
> 
> Now we keep this big text field on disk (in a file), and feed it to 
> the highlighter. Unfortunately the highlighter has to read the file, 
> parse it, etc... It's slooow, sometimes over a second on a large document.
> 
> I vaguely remember reading somewhere newer versions of the highlighter 
> are able to leverage term vectors to avoid re-parsing the field. (I 
> could be
> mistaken.) Maybe just storing term vectors would keep the index lean 
> and allow for fast highlighting?
> 
> --Renaud
> 
>  
> 
> -----Original Message-----
> From: Mark Miller [mailto:markrmiller@gmail.com]
> Sent: Wednesday, January 10, 2007 9:54 AM
> To: java-user@lucene.apache.org
> Subject: Re: Text storing design and performance question
> 
> Being stateless should not be much of an issue. As Erick mentioned, 
> the highlighter just expects you to pass it the query again and the 
> text to be highlighted. So when you show the pagination you just need 
> to keep around what query generated the current page...then shove each 
> piece of relevant text from the database through the highlighter (with 
> the query) before displaying it.
> 
> - Mark
> 
> On 1/10/07, moraleslos <moraleslos@hotmail.com> wrote:
>>
>>
>> Hi Mark,
>>
>> Looks like I've got to implement some sort of pagination for my clients.
>> Problem is everything is stateless so looks like there's some work I 
>> need to do on my end.  Thanks.
>>
>> -los
>>
>>
>>
>> markrmiller wrote:
>> >
>> > Usually a user cannot easily browse 50,000 on a single display, and 
>> > so you would only highlight the docs as they became visible to the
>> user.
>> > This is generally a small amount...often one at a time.
>> >
>> > - Mark
>> >
>> > moraleslos wrote:
>> >> Hi Erik,
>> >>
>> >> Would that slow performance a bit?  For example, say I receive 
>> >> 50,000 hits from a search.  From your explanation, I have to 
>> >> retrieve the DB id
>> from
>> >> each hit, perform a query to the DB using the id to retrieve the 
>> >> full contents for each hit, run highlighter on each content, and 
>> >> then
>> return?
>> >> Although I'll give this a shot, it will seem to slow performance 
>> >> on the searching side of things, wouldn't it?  Thanks for the reply.
>> >>
>> >> -los
>> >>
>> >>
>> >>
>> >> Erik Hatcher wrote:
>> >>
>> >>> You don't have to store a field to highlight text.  If you've got 
>> >>> it in your database, retrieve it from there and pass that string 
>> >>> to the highlighter instead.
>> >>>
>> >>>     Erik
>> >>>
>> >>>
>> >>> On Jan 10, 2007, at 10:45 AM, moraleslos wrote:
>> >>>
>> >>>
>> >>>> I'm running into a little dilemma with Lucene highlighting and 
>> >>>> indexing.  I currently index anything and everything that gets 
>> >>>> inserted into a database.
>> >>>> This database includes all the content that is searched.  Now 
>> >>>> I'll have lots and lots of content, thinking of the range of
>> >>>> 50GB+, all stored in the DB.
>> >>>> Using Lucene, I index all of this.  But since I'm using 
>> >>>> highlighting features, I'll also need to store the content into 
>> >>>> the index.  Not sure what the performance implications are 
>> >>>> during a search but I know that indexing performance should be 
>> >>>> slower as well as the index size being
>> enormous.
>> >>>> Because I have duplicated data, one in the index and the other 
>> >>>> in the db, are there other ways of handling this situation in a 
>> >>>> more efficient and performant way?  Thanks in advance.
>> >>>>
>> >>>> -los
>> >>>> --
>> >>>> View this message in context: 
>> >>>> http://www.nabble.com/Text-storing-
>> >>>> design-and-performance-question-tf2953201.html#a8259883
>> >>>> Sent from the Lucene - Java Users mailing list archive at
>> Nabble.com.
>> >>>>
>> >>>>
>> >>>>
>> ---------------------------------------------------------------------
>> >>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> >>>> For additional commands, e-mail: 
>> >>>> java-user-help@lucene.apache.org
>> >>>>
>> >>> -----------------------------------------------------------------
>> >>> ---- To unsubscribe, e-mail: 
>> >>> java-user-unsubscribe@lucene.apache.org
>> >>> For additional commands, e-mail: java-user-help@lucene.apache.org
>> >>>
>> >>>
>> >>>
>> >>>
>> >>
>> >>
>> >
>> > -------------------------------------------------------------------
>> > -- To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> > For additional commands, e-mail: java-user-help@lucene.apache.org
>> >
>> >
>> >
>>
>> --
>> View this message in context:
>>
> http://www.nabble.com/Text-storing-design-and-performance-question-tf2
> 953201
> .html#a8261739
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
> 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

--
View this message in context:
http://www.nabble.com/Text-storing-design-and-performance-question-tf2953201
.html#a8265458
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25395-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 10 22:04:27 2007
Return-Path: <java-user-return-25395-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91366 invoked from network); 10 Jan 2007 22:04:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Jan 2007 22:04:26 -0000
Received: (qmail 87064 invoked by uid 500); 10 Jan 2007 22:04:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86872 invoked by uid 500); 10 Jan 2007 22:04:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86861 invoked by uid 99); 10 Jan 2007 22:04:22 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Jan 2007 14:04:22 -0800
X-ASF-Spam-Status: No, hits=1.7 required=10.0
	tests=MAILTO_TO_SPAM_ADDR,SPF_SOFTFAIL
X-Spam-Check-By: apache.org
Received-SPF: softfail (herse.apache.org: transitioning domain of bim2006@basistech.com does not designate 199.88.205.99 as permitted sender)
Received: from [199.88.205.99] (HELO mail.basistech.com) (199.88.205.99)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Jan 2007 14:04:12 -0800
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: isCurrent says no, but contents still invisible
Date: Wed, 10 Jan 2007 17:03:50 -0500
Message-ID: <E95FD77F0171D14DA1EEE0A785E92B43019AECCA@mail3.basistech.net>
In-Reply-To: <OF582682E5.9CCB5E07-ON8825725F.00736E36-8825725F.0073FF98@il.ibm.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: isCurrent says no, but contents still invisible
Thread-Index: Acc0+4v04B961ir9QpGOQUr8vtnoyQABxFzA
From: "Benson Margulies" <bim2006@basistech.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

#2 is a possible issue. I stared at the code some more:

The test case adds up to :

Create all the objects.

Add three docs.
Add a fourth doc.

Do a query aimed at the fourth doc.

isCurrent() returns false.

Close reader/searcher, open reader/searcher, numDocs() in the reader
returns 3. Not 4.

However, reading your message carefully, I realize that I'm probably
fundamentally misguided. There's no flush() API on a writer, so, of
course, the only possible way for a reader to see current contents is if
the writer gets closed and reopened. I keep trying to cook up some
scheme in which this is not true, but, with the stock classes, it now
seems self-evident to me that it has to be true.

I'll put in the requisite code, and slink away.


-----Original Message-----
From: Doron Cohen [mailto:DORONC@il.ibm.com]=20
Sent: Wednesday, January 10, 2007 4:07 PM
To: java-user@lucene.apache.org
Subject: Re: isCurrent says no, but contents still invisible

That's strange. Since you don't close the writer usually adding the doc
would not modify the index (unless adding the doc triggered a merge).

You may want to check that:
1. writer and reader really opened against the same path;
2. reader isCurrent state also before adding the doc and after
re-opening;
3. searched terms vs. added terms - might not be related to concurrency
at
all.

Finally perhaps post here the code so people can take a look.

"Benson Margulies" <bim2006@basistech.com> wrote on 10/01/2007 12:45:08:

> I'm trying what should be the dumbest possible example of concurrency
> management with 2.0 in Java with an ordinary FSDirectory.
>
>
>
> I create an IndexWriter from a pathname, an IndexReader from the same
> pathname, and an IndexSearcher from the reader.
>
>
>
> I add one document.
>
>
>
> I call isCurrent() on the reader. It says, 'false'.
>
>
>
> So, I close the reader and the searcher, and I create a new reader and
a
> new searcher.  I search for the document, and I don't find it.
>
>
>
> I must be missing something simple.
>
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25396-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 10 22:12:07 2007
Return-Path: <java-user-return-25396-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92836 invoked from network); 10 Jan 2007 22:12:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Jan 2007 22:12:06 -0000
Received: (qmail 552 invoked by uid 500); 10 Jan 2007 22:12:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 510 invoked by uid 500); 10 Jan 2007 22:12:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 497 invoked by uid 99); 10 Jan 2007 22:12:07 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Jan 2007 14:12:07 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Jan 2007 14:11:57 -0800
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1H4lfU-0001ro-MP
	for java-user@lucene.apache.org; Wed, 10 Jan 2007 14:11:36 -0800
Message-ID: <8267691.post@talk.nabble.com>
Date: Wed, 10 Jan 2007 14:11:36 -0800 (PST)
From: sdeck <scott.decker@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Speed of grouped queries
In-Reply-To: <abe188f20701031309w6f8b44b0q675393d343142b0@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: scott.decker@gmail.com
References: <8132099.post@talk.nabble.com> <abe188f20701031309w6f8b44b0q675393d343142b0@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


I guess I never saw this request. Here is my answer.

Carrot would give me things like this 
Genre - Horror
   Scary Movie - (40)
      - Luke Perry (10)

Which is not what I am going for.

Basically, think someone clicks on the "Horror" tab and they see all of the
articles for every movie/actor within that genre. I page the results of
course, and just use a hitcollector to combine all hits.  My total number of
articles being returned for a genre is around 3000-4000 out of a maximum of
about 42K worth of articles right now.

The problem, is that I have specific queries for getting the news for an
actor, and a specific query for getting results for a movie and the genre
level needs to aggregate each of those queries.  So, an actor may have a
maximum of 20 boolean queries, a movie may have 5 boolean queries + (40
actors * 20 boolean queries) so a genre would have something like ((50* (5 *
20)) boolean queries for a genre
Somewhere along the lines though that is throwing a out of memory error. I
am using the queryparser, but the queries themselves are fairly simple.
An example for actor would be:
(+title:luke +title:perry) (+content:"Luke Perry")
Some other items in there to make sure the article is about luke perry (just
using him as an example)

So, anyone else have any ideas why I may be running out of memory on these?

Or, any other ideas on how to combine everything together quickly, besides
doing it offline first and then using online.  My only issue with this one
is that, as soon as I change the query logic, the process to build the index
must change, and then the website has to change sometime after that. It
could be days to see it in production, versus hours if I have to do is
change the query code in the web application.


Scott






Find Me wrote:
> 
> On 1/2/07, sdeck <scott.decker@gmail.com> wrote:
>>
>>
>> Thanks for advanced on any insight on this one.
>>
>> I have a fairly large query to run, and it takes roughly 20-40 seconds to
>> complete the way that i have it.
>> here is the best example I can give.
>>
>> I have a set of roughly 25K documents indexed
>>
>> I have queries that get documents matching a particular actor.
>>
>> Then, I have a movie query that takes all of the documents found for each
>> actor query and combines them all together to say, here are all documents
>> that are relevant for this movie.
>>
>> Then, and here is the time hog, I have a genre query that says, take all
>> movies and get their results and combine them together into this genre
>> result set.
> 
> 
> Is there any possibility to use Carrot clustering for genre? Could you
> please give examples for the final complex query as well as individual
> simple queries?  You can also state the aim of the query. Are you trying
> to
> get clustered list of movies (based on genre) for a particular actor?
> 
> --Rajesh Munavalli
> 
> The problem is, at indexing time, I do not have a way to say if a document
>> is a particular genre, or a particular actor, or movie etc.  If I try and
>> say for the genre query, get all documents and then filter for the
>> queries
>> for movies and actors, I get heap space memory issues.
>>
>> The query for collecting a specific actor is around 200-300 milliseconds,
>> and the movie one, that actually queries each actor, takes roughly
>> 500-700
>> milliseconds. Yet, for a genre, where you may have 50-100 movies, it
>> takes
>> 500 milliseconds*# of movies
>>
>> Any ideas on how I could run these queries differently? For a given actor
>> query, there is about 5-7 boolean query clauses. Just to give some
>> insight.
>>
>> I currently just create 1 HitSetCollector (I rolled my own
>> bitsetcollector)
>> and just run searches with it.  I just get crapped on when it does that
>> genre search. I wish there was an easier way to aggregate all of those
>> documents together from all of those searches.  After it is done, I cache
>> the results, but the initial hit is bad.
>>
>> Any help would be much appreciated.
>> Sdeck
>>
>>
>>
>> --
>> View this message in context:
>> http://www.nabble.com/Speed-of-grouped-queries-tf2910499.html#a8132099
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
> 
> 

-- 
View this message in context: http://www.nabble.com/Speed-of-grouped-queries-tf2910499.html#a8267691
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25397-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 10 22:22:16 2007
Return-Path: <java-user-return-25397-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96924 invoked from network); 10 Jan 2007 22:22:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Jan 2007 22:22:14 -0000
Received: (qmail 25357 invoked by uid 500); 10 Jan 2007 22:22:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25320 invoked by uid 500); 10 Jan 2007 22:22:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25300 invoked by uid 99); 10 Jan 2007 22:22:10 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Jan 2007 14:22:10 -0800
X-ASF-Spam-Status: No, hits=2.3 required=10.0
	tests=HTML_MESSAGE,MAILTO_TO_SPAM_ADDR,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 66.249.92.170 as permitted sender)
Received: from [66.249.92.170] (HELO ug-out-1314.google.com) (66.249.92.170)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Jan 2007 14:22:00 -0800
Received: by ug-out-1314.google.com with SMTP id k40so241656ugc
        for <java-user@lucene.apache.org>; Wed, 10 Jan 2007 14:21:39 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=A0Af3vq+BZUPDngmRVHEdYG5ZpKikDN4P3xQcceVEbZc80llBlCdrWqFLc9Q8yJmZ48UcdD5NOowwpb4LbFP3hfgiPONMLHgpkUkpnRytyCcl9pq4aCEgU29qqzQB1YxzvmijYBApBGAmXCkJXCwOvADOaGOuCmVa25o+Nb7dho=
Received: by 10.82.105.13 with SMTP id d13mr184410buc.1168467698959;
        Wed, 10 Jan 2007 14:21:38 -0800 (PST)
Received: by 10.82.162.9 with HTTP; Wed, 10 Jan 2007 14:21:38 -0800 (PST)
Message-ID: <359a92830701101421y61c14b33p7782b01256646cfe@mail.gmail.com>
Date: Wed, 10 Jan 2007 17:21:38 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: isCurrent says no, but contents still invisible
In-Reply-To: <E95FD77F0171D14DA1EEE0A785E92B43019AECCA@mail3.basistech.net>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_14720_747635.1168467698927"
References: <OF582682E5.9CCB5E07-ON8825725F.00736E36-8825725F.0073FF98@il.ibm.com>
	 <E95FD77F0171D14DA1EEE0A785E92B43019AECCA@mail3.basistech.net>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_14720_747635.1168467698927
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

And don't forget that you need to close and re-open the reader to pick up
the changes.......

Erick@BeenThereDoneThat <G>.

On 1/10/07, Benson Margulies <bim2006@basistech.com> wrote:
>
> #2 is a possible issue. I stared at the code some more:
>
> The test case adds up to :
>
> Create all the objects.
>
> Add three docs.
> Add a fourth doc.
>
> Do a query aimed at the fourth doc.
>
> isCurrent() returns false.
>
> Close reader/searcher, open reader/searcher, numDocs() in the reader
> returns 3. Not 4.
>
> However, reading your message carefully, I realize that I'm probably
> fundamentally misguided. There's no flush() API on a writer, so, of
> course, the only possible way for a reader to see current contents is if
> the writer gets closed and reopened. I keep trying to cook up some
> scheme in which this is not true, but, with the stock classes, it now
> seems self-evident to me that it has to be true.
>
> I'll put in the requisite code, and slink away.
>
>
> -----Original Message-----
> From: Doron Cohen [mailto:DORONC@il.ibm.com]
> Sent: Wednesday, January 10, 2007 4:07 PM
> To: java-user@lucene.apache.org
> Subject: Re: isCurrent says no, but contents still invisible
>
> That's strange. Since you don't close the writer usually adding the doc
> would not modify the index (unless adding the doc triggered a merge).
>
> You may want to check that:
> 1. writer and reader really opened against the same path;
> 2. reader isCurrent state also before adding the doc and after
> re-opening;
> 3. searched terms vs. added terms - might not be related to concurrency
> at
> all.
>
> Finally perhaps post here the code so people can take a look.
>
> "Benson Margulies" <bim2006@basistech.com> wrote on 10/01/2007 12:45:08:
>
> > I'm trying what should be the dumbest possible example of concurrency
> > management with 2.0 in Java with an ordinary FSDirectory.
> >
> >
> >
> > I create an IndexWriter from a pathname, an IndexReader from the same
> > pathname, and an IndexSearcher from the reader.
> >
> >
> >
> > I add one document.
> >
> >
> >
> > I call isCurrent() on the reader. It says, 'false'.
> >
> >
> >
> > So, I close the reader and the searcher, and I create a new reader and
> a
> > new searcher.  I search for the document, and I don't find it.
> >
> >
> >
> > I must be missing something simple.
> >
> >
> >
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_14720_747635.1168467698927--

From java-user-return-25398-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 10 22:23:45 2007
Return-Path: <java-user-return-25398-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97864 invoked from network); 10 Jan 2007 22:23:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Jan 2007 22:23:44 -0000
Received: (qmail 32858 invoked by uid 500); 10 Jan 2007 22:23:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32826 invoked by uid 500); 10 Jan 2007 22:23:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32811 invoked by uid 99); 10 Jan 2007 22:23:37 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Jan 2007 14:23:37 -0800
X-ASF-Spam-Status: No, hits=1.7 required=10.0
	tests=MAILTO_TO_SPAM_ADDR,SPF_SOFTFAIL
X-Spam-Check-By: apache.org
Received-SPF: softfail (herse.apache.org: transitioning domain of bim2006@basistech.com does not designate 199.88.205.99 as permitted sender)
Received: from [199.88.205.99] (HELO mail.basistech.com) (199.88.205.99)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Jan 2007 14:23:28 -0800
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: isCurrent says no, but contents still invisible
Date: Wed, 10 Jan 2007 17:23:04 -0500
Message-ID: <E95FD77F0171D14DA1EEE0A785E92B43019AECD1@mail3.basistech.net>
In-Reply-To: <359a92830701101421y61c14b33p7782b01256646cfe@mail.gmail.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: isCurrent says no, but contents still invisible
Thread-Index: Acc1BcQlDqeU7BxzS6O1qbCZeolWTwAAB4ug
From: "Benson Margulies" <bim2006@basistech.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Yea, that part I got.

-----Original Message-----
From: Erick Erickson [mailto:erickerickson@gmail.com]=20
Sent: Wednesday, January 10, 2007 5:22 PM
To: java-user@lucene.apache.org
Subject: Re: isCurrent says no, but contents still invisible

And don't forget that you need to close and re-open the reader to pick
up
the changes.......

Erick@BeenThereDoneThat <G>.

On 1/10/07, Benson Margulies <bim2006@basistech.com> wrote:
>
> #2 is a possible issue. I stared at the code some more:
>
> The test case adds up to :
>
> Create all the objects.
>
> Add three docs.
> Add a fourth doc.
>
> Do a query aimed at the fourth doc.
>
> isCurrent() returns false.
>
> Close reader/searcher, open reader/searcher, numDocs() in the reader
> returns 3. Not 4.
>
> However, reading your message carefully, I realize that I'm probably
> fundamentally misguided. There's no flush() API on a writer, so, of
> course, the only possible way for a reader to see current contents is
if
> the writer gets closed and reopened. I keep trying to cook up some
> scheme in which this is not true, but, with the stock classes, it now
> seems self-evident to me that it has to be true.
>
> I'll put in the requisite code, and slink away.
>
>
> -----Original Message-----
> From: Doron Cohen [mailto:DORONC@il.ibm.com]
> Sent: Wednesday, January 10, 2007 4:07 PM
> To: java-user@lucene.apache.org
> Subject: Re: isCurrent says no, but contents still invisible
>
> That's strange. Since you don't close the writer usually adding the
doc
> would not modify the index (unless adding the doc triggered a merge).
>
> You may want to check that:
> 1. writer and reader really opened against the same path;
> 2. reader isCurrent state also before adding the doc and after
> re-opening;
> 3. searched terms vs. added terms - might not be related to
concurrency
> at
> all.
>
> Finally perhaps post here the code so people can take a look.
>
> "Benson Margulies" <bim2006@basistech.com> wrote on 10/01/2007
12:45:08:
>
> > I'm trying what should be the dumbest possible example of
concurrency
> > management with 2.0 in Java with an ordinary FSDirectory.
> >
> >
> >
> > I create an IndexWriter from a pathname, an IndexReader from the
same
> > pathname, and an IndexSearcher from the reader.
> >
> >
> >
> > I add one document.
> >
> >
> >
> > I call isCurrent() on the reader. It says, 'false'.
> >
> >
> >
> > So, I close the reader and the searcher, and I create a new reader
and
> a
> > new searcher.  I search for the document, and I don't find it.
> >
> >
> >
> > I must be missing something simple.
> >
> >
> >
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25399-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 10 22:27:14 2007
Return-Path: <java-user-return-25399-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99130 invoked from network); 10 Jan 2007 22:27:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Jan 2007 22:27:13 -0000
Received: (qmail 43130 invoked by uid 500); 10 Jan 2007 22:27:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43106 invoked by uid 500); 10 Jan 2007 22:27:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43095 invoked by uid 99); 10 Jan 2007 22:27:13 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Jan 2007 14:27:13 -0800
X-ASF-Spam-Status: No, hits=1.7 required=10.0
	tests=MAILTO_TO_SPAM_ADDR,SPF_SOFTFAIL
X-Spam-Check-By: apache.org
Received-SPF: softfail (herse.apache.org: transitioning domain of bim2006@basistech.com does not designate 199.88.205.99 as permitted sender)
Received: from [199.88.205.99] (HELO mail.basistech.com) (199.88.205.99)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Jan 2007 14:27:04 -0800
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: isCurrent says no, but contents still invisible
Date: Wed, 10 Jan 2007 17:26:42 -0500
Message-ID: <E95FD77F0171D14DA1EEE0A785E92B43019AECD3@mail3.basistech.net>
In-Reply-To: <359a92830701101421y61c14b33p7782b01256646cfe@mail.gmail.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: isCurrent says no, but contents still invisible
Thread-Index: Acc1BcQlDqeU7BxzS6O1qbCZeolWTwAAI4ZA
From: "Benson Margulies" <bim2006@basistech.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Oh, boy, what a mistake. I thought I was being clever by creating a
Directory object. All that did was prevent the writer from ever quite
flushing because I wasn't closing THAT.

-----Original Message-----
From: Erick Erickson [mailto:erickerickson@gmail.com]=20
Sent: Wednesday, January 10, 2007 5:22 PM
To: java-user@lucene.apache.org
Subject: Re: isCurrent says no, but contents still invisible

And don't forget that you need to close and re-open the reader to pick
up
the changes.......

Erick@BeenThereDoneThat <G>.

On 1/10/07, Benson Margulies <bim2006@basistech.com> wrote:
>
> #2 is a possible issue. I stared at the code some more:
>
> The test case adds up to :
>
> Create all the objects.
>
> Add three docs.
> Add a fourth doc.
>
> Do a query aimed at the fourth doc.
>
> isCurrent() returns false.
>
> Close reader/searcher, open reader/searcher, numDocs() in the reader
> returns 3. Not 4.
>
> However, reading your message carefully, I realize that I'm probably
> fundamentally misguided. There's no flush() API on a writer, so, of
> course, the only possible way for a reader to see current contents is
if
> the writer gets closed and reopened. I keep trying to cook up some
> scheme in which this is not true, but, with the stock classes, it now
> seems self-evident to me that it has to be true.
>
> I'll put in the requisite code, and slink away.
>
>
> -----Original Message-----
> From: Doron Cohen [mailto:DORONC@il.ibm.com]
> Sent: Wednesday, January 10, 2007 4:07 PM
> To: java-user@lucene.apache.org
> Subject: Re: isCurrent says no, but contents still invisible
>
> That's strange. Since you don't close the writer usually adding the
doc
> would not modify the index (unless adding the doc triggered a merge).
>
> You may want to check that:
> 1. writer and reader really opened against the same path;
> 2. reader isCurrent state also before adding the doc and after
> re-opening;
> 3. searched terms vs. added terms - might not be related to
concurrency
> at
> all.
>
> Finally perhaps post here the code so people can take a look.
>
> "Benson Margulies" <bim2006@basistech.com> wrote on 10/01/2007
12:45:08:
>
> > I'm trying what should be the dumbest possible example of
concurrency
> > management with 2.0 in Java with an ordinary FSDirectory.
> >
> >
> >
> > I create an IndexWriter from a pathname, an IndexReader from the
same
> > pathname, and an IndexSearcher from the reader.
> >
> >
> >
> > I add one document.
> >
> >
> >
> > I call isCurrent() on the reader. It says, 'false'.
> >
> >
> >
> > So, I close the reader and the searcher, and I create a new reader
and
> a
> > new searcher.  I search for the document, and I don't find it.
> >
> >
> >
> > I must be missing something simple.
> >
> >
> >
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25400-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 10 22:55:35 2007
Return-Path: <java-user-return-25400-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10209 invoked from network); 10 Jan 2007 22:55:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Jan 2007 22:55:35 -0000
Received: (qmail 9608 invoked by uid 500); 10 Jan 2007 22:55:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9584 invoked by uid 500); 10 Jan 2007 22:55:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9573 invoked by uid 99); 10 Jan 2007 22:55:34 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Jan 2007 14:55:34 -0800
X-ASF-Spam-Status: No, hits=0.8 required=10.0
	tests=DNS_FROM_RFC_ABUSE,MAILTO_TO_SPAM_ADDR,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of DORONC@il.ibm.com designates 195.212.29.155 as permitted sender)
Received: from [195.212.29.155] (HELO mtagate6.de.ibm.com) (195.212.29.155)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Jan 2007 14:55:23 -0800
Received: from d12nrmr1607.megacenter.de.ibm.com (d12nrmr1607.megacenter.de.ibm.com [9.149.167.49])
	by mtagate6.de.ibm.com (8.13.8/8.13.8) with ESMTP id l0AMt12j104036
	for <java-user@lucene.apache.org>; Wed, 10 Jan 2007 22:55:01 GMT
Received: from d12av04.megacenter.de.ibm.com (d12av04.megacenter.de.ibm.com [9.149.165.229])
	by d12nrmr1607.megacenter.de.ibm.com (8.13.6/8.13.6/NCO v8.1.1) with ESMTP id l0AMt1uW2978042
	for <java-user@lucene.apache.org>; Wed, 10 Jan 2007 23:55:01 +0100
Received: from d12av04.megacenter.de.ibm.com (loopback [127.0.0.1])
	by d12av04.megacenter.de.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id l0AMt1FL023708
	for <java-user@lucene.apache.org>; Wed, 10 Jan 2007 23:55:01 +0100
Received: from d12mc102.megacenter.de.ibm.com (d12mc102.megacenter.de.ibm.com [9.149.167.114])
	by d12av04.megacenter.de.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id l0AMt18s023703
	for <java-user@lucene.apache.org>; Wed, 10 Jan 2007 23:55:01 +0100
In-Reply-To: <E95FD77F0171D14DA1EEE0A785E92B43019AECD3@mail3.basistech.net>
Subject: RE: isCurrent says no, but contents still invisible
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 7.0 HF277 June 21, 2006
Message-ID: <OF775117AD.D79E8A5E-ON8825725F.007C5072-8825725F.007DC102@il.ibm.com>
From: Doron Cohen <DORONC@il.ibm.com>
Date: Wed, 10 Jan 2007 14:53:34 -0800
X-MIMETrack: Serialize by Router on D12MC102/12/M/IBM(Release 7.0.2HF71 | November 3, 2006) at
 11/01/2007 00:55:00
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org

"Benson Margulies" <bim2006@basistech.com> wrote on 10/01/2007 14:26:42:

> Oh, boy, what a mistake. I thought I was being clever by creating a
> Directory object. All that did was prevent the writer from ever quite
> flushing because I wasn't closing THAT.
>

No need to close the directory object for that.
Closing the IndexWriter will do.

I think you will find "Lucene In Action" book very useful in understanding
the life-cycle of an index.

Or you may want to start with the javadocs intro at
http://lucene.apache.org/java/docs/api (see the bottom of that page) and
explore the API from there.
In particular:
http://lucene.apache.org/java/docs/api/org/apache/lucene/index/IndexWriter.html#addDocument(org.apache.lucene.document.Document)
http://lucene.apache.org/java/docs/api/org/apache/lucene/index/IndexWriter.html#close()

Also relevant are FAQ entries:
http://wiki.apache.org/jakarta-lucene/LuceneFAQ#head-6c56b0449d114826586940dcc6fe51582676a36e
  (concurrency)
http://wiki.apache.org/jakarta-lucene/LuceneFAQ#head-3558e5121806fb4fce80fc022d889484a9248b71
  (why-no-hits)




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25401-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 10 23:40:39 2007
Return-Path: <java-user-return-25401-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25208 invoked from network); 10 Jan 2007 23:40:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Jan 2007 23:40:38 -0000
Received: (qmail 92440 invoked by uid 500); 10 Jan 2007 23:40:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92407 invoked by uid 500); 10 Jan 2007 23:40:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92396 invoked by uid 99); 10 Jan 2007 23:40:35 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Jan 2007 15:40:35 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Jan 2007 15:40:26 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id AB0AB5B775; Wed, 10 Jan 2007 15:40:05 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id A2D9C7F403
	for <java-user@lucene.apache.org>; Wed, 10 Jan 2007 15:40:05 -0800 (PST)
Date: Wed, 10 Jan 2007 15:40:05 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Getting a Better Understanding of Lucene's Search Operators
In-Reply-To: <ae6f38f60701101030r287473fdtd6a4e3532e16bb14@mail.gmail.com>
Message-ID: <Pine.LNX.4.58.0701101524540.9119@hal.rescomp.berkeley.edu>
References: <ae6f38f60701100832p1ec8b05do52769ca8f96bfede@mail.gmail.com> 
 <45A51B38.3080904@gmail.com>  <ae6f38f60701100922w748a234wada7e44a96a3396@mail.gmail.com>
  <45A52D4D.4030803@syr.edu> <ae6f38f60701101030r287473fdtd6a4e3532e16bb14@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: This is now my generalized understanding of the parser's operators.  Am I
: closer?

I'm guessing there is suppose to be some sort of table structure to the
mail you send ... it doesn't work in plain text mail readers so i'm not
sure whta ou were trying to say.

In a nut shell...

 1) Lucene's QueryParser class does not parse boolean expressions -- it
    might look like it, but it does not.
 2) Lucene's BooleanQuery clause does not model Boolean Queries ... it
    models aggregate queries.
 3) the most native way to represent the options available in a lucene
    "BooleanQuery" as a string is with the +/- prefixes, where...
     +foo ... means foo is a required clause and docs must match it
     -foo ... means foo is prohibited clause and docs must not match it
      foo ... means foo is an optional clause and docs that match it will
              get score benefits for doing so.
 4) in an attempt to make things easier for people who have
    simple needs, QueryParser "fakes" that it parses boolean expressions
    by interpreting "A AND B" as "+A +B"; "A OR B" as "A B" and "NOT A" as
    "-A"
 5) if you change the default operator on QueryParser to be AND then
    things get more complicated, mainly because then QueryParser treats
    "A B" the same as "+A +B"
 6) you should avoid thinking in terms of AND, OR, and NOT ... think in
    terms of OPTIONAL, REQUIRED, and PROHIBITED ... your life will be much
    easier: documentation will make more sense, conversations on the email
    list will be more synergistastic, wine will be sweeter, and food will
    taste better.

:
:
: *Document*
:
: A OR B
:
: A B
:
: +A B
:
: A
:
: NOT B
:
: -B
:
: A AND NOT B
:
: A ?B
:
: *No Matching Terms*
:
: 0
:
: 0
:
: 0
:
: 0
:
: 1
:
: 0
:
: 0
:
: 0
:
: A
:
: 1
:
: 1
:
: 1
:
: 1
:
: 1
:
: 0
:
: 1
:
: 1
:
: B
:
: 1
:
: 1
:
: 0
:
: 0
:
: 0
:
: 0
:
: 0
:
: *0*
:
: A B
:
: 1
:
: 2
:
: 2
:
: 1
:
: 0
:
: 0
:
: 0
:
: 1* 0*
:   Non-zero results are returned to the user.               *Walt Stoneburner
: <wls@wwco.com>   10-Jan-2007   v1.0*
:
: -wls
:



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25402-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 10 23:43:03 2007
Return-Path: <java-user-return-25402-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25819 invoked from network); 10 Jan 2007 23:43:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Jan 2007 23:43:02 -0000
Received: (qmail 98936 invoked by uid 500); 10 Jan 2007 23:43:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98903 invoked by uid 500); 10 Jan 2007 23:43:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98892 invoked by uid 99); 10 Jan 2007 23:43:03 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Jan 2007 15:43:03 -0800
X-ASF-Spam-Status: No, hits=1.7 required=10.0
	tests=MAILTO_TO_SPAM_ADDR,SPF_SOFTFAIL
X-Spam-Check-By: apache.org
Received-SPF: softfail (herse.apache.org: transitioning domain of bim2006@basistech.com does not designate 199.88.205.99 as permitted sender)
Received: from [199.88.205.99] (HELO mail.basistech.com) (199.88.205.99)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Jan 2007 15:42:54 -0800
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: isCurrent says no, but contents still invisible
Date: Wed, 10 Jan 2007 18:42:33 -0500
Message-ID: <E95FD77F0171D14DA1EEE0A785E92B43019AECDA@mail3.basistech.net>
In-Reply-To: <OF775117AD.D79E8A5E-ON8825725F.007C5072-8825725F.007DC102@il.ibm.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: isCurrent says no, but contents still invisible
Thread-Index: Acc1Cm5K7tEpWqvpQSao+erQF3CeLAABJt3A
From: "Benson Margulies" <bim2006@basistech.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

If all is well with the lifecycle, should IndexReader.numDocs() return
an accurate count?



-----Original Message-----
From: Doron Cohen [mailto:DORONC@il.ibm.com]=20
Sent: Wednesday, January 10, 2007 5:54 PM
To: java-user@lucene.apache.org
Subject: RE: isCurrent says no, but contents still invisible

"Benson Margulies" <bim2006@basistech.com> wrote on 10/01/2007 14:26:42:

> Oh, boy, what a mistake. I thought I was being clever by creating a
> Directory object. All that did was prevent the writer from ever quite
> flushing because I wasn't closing THAT.
>

No need to close the directory object for that.
Closing the IndexWriter will do.

I think you will find "Lucene In Action" book very useful in
understanding
the life-cycle of an index.

Or you may want to start with the javadocs intro at
http://lucene.apache.org/java/docs/api (see the bottom of that page) and
explore the API from there.
In particular:
http://lucene.apache.org/java/docs/api/org/apache/lucene/index/IndexWrit
er.html#addDocument(org.apache.lucene.document.Document)
http://lucene.apache.org/java/docs/api/org/apache/lucene/index/IndexWrit
er.html#close()

Also relevant are FAQ entries:
http://wiki.apache.org/jakarta-lucene/LuceneFAQ#head-6c56b0449d114826586
940dcc6fe51582676a36e
  (concurrency)
http://wiki.apache.org/jakarta-lucene/LuceneFAQ#head-3558e5121806fb4fce8
0fc022d889484a9248b71
  (why-no-hits)




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25403-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 10 23:48:21 2007
Return-Path: <java-user-return-25403-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 28770 invoked from network); 10 Jan 2007 23:48:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Jan 2007 23:48:20 -0000
Received: (qmail 6286 invoked by uid 500); 10 Jan 2007 23:48:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6258 invoked by uid 500); 10 Jan 2007 23:48:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6247 invoked by uid 99); 10 Jan 2007 23:48:21 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Jan 2007 15:48:21 -0800
X-ASF-Spam-Status: No, hits=1.5 required=10.0
	tests=SPF_SOFTFAIL
X-Spam-Check-By: apache.org
Received-SPF: softfail (herse.apache.org: transitioning domain of bim2006@basistech.com does not designate 199.88.205.99 as permitted sender)
Received: from [199.88.205.99] (HELO mail.basistech.com) (199.88.205.99)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Jan 2007 15:48:12 -0800
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: isCurrent says no, but contents still invisible
Date: Wed, 10 Jan 2007 18:47:51 -0500
Message-ID: <E95FD77F0171D14DA1EEE0A785E92B43019AECDB@mail3.basistech.net>
In-Reply-To: <OF775117AD.D79E8A5E-ON8825725F.007C5072-8825725F.007DC102@il.ibm.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: isCurrent says no, but contents still invisible
Thread-Index: Acc1Cm5K7tEpWqvpQSao+erQF3CeLAABvC1Q
From: "Benson Margulies" <bim2006@basistech.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

OK, all is well. I had a truly embarrassing logic error that I
introduced while getting all the closing and opening straightened out.
Thanks for the patience.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25404-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 10 23:53:32 2007
Return-Path: <java-user-return-25404-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 29868 invoked from network); 10 Jan 2007 23:53:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Jan 2007 23:53:31 -0000
Received: (qmail 14315 invoked by uid 500); 10 Jan 2007 23:53:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14117 invoked by uid 500); 10 Jan 2007 23:53:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 14106 invoked by uid 99); 10 Jan 2007 23:53:31 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Jan 2007 15:53:31 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [82.138.248.236] (HELO bacchus.thegestalt.org) (82.138.248.236)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Jan 2007 15:53:22 -0800
Received: from [82.138.248.236] (helo=bacchus.thegestalt.org)
	by jail0061.vps.exonetric.net with esmtp (Exim 4.61 (FreeBSD))
	(envelope-from <simon@thegestalt.org>)
	id 1H4nFb-000Jfj-PP
	for java-user@lucene.apache.org; Wed, 10 Jan 2007 23:52:59 +0000
Received: (from simon@localhost)
	by bacchus.thegestalt.org (8.13.6/8.13.6/Submit) id l0ANqx5o075607
	for java-user@lucene.apache.org; Wed, 10 Jan 2007 23:52:59 GMT
	(envelope-from simon@thegestalt.org)
X-Authentication-Warning: bacchus.thegestalt.org: simon set sender to simon@thegestalt.org using -f
Date: Wed, 10 Jan 2007 23:52:59 +0000
From: Simon Wistow <simon@thegestalt.org>
To: Lucene <java-user@lucene.apache.org>
Subject: Spelling Correction api
Message-ID: <20070110235259.GA39546@thegestalt.org>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
User-Agent: Mutt/1.4.2.1i
X-Virus-Checked: Checked by ClamAV on apache.org

I've been reading through the spelling correction API and I'm confused. 
It looks like you tell it the directory to hold the spelling correction 
DB and then give it an IndexReader and a field to retrieve spelling 
suggestions from.

But then I'd have to redo that operation everytime a new document was 
indexed. There didn't seem to be any apparent way to incrementally add 
new documents without creating my own dictionary by splitting up words 
from the incoming document.

Is that the only way?

Simon



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25405-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 11 00:07:25 2007
Return-Path: <java-user-return-25405-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33804 invoked from network); 11 Jan 2007 00:07:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Jan 2007 00:07:24 -0000
Received: (qmail 41119 invoked by uid 500); 11 Jan 2007 00:07:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41096 invoked by uid 500); 11 Jan 2007 00:07:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41081 invoked by uid 99); 11 Jan 2007 00:07:24 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Jan 2007 16:07:24 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of walt.stoneburner@gmail.com designates 66.249.92.168 as permitted sender)
Received: from [66.249.92.168] (HELO ug-out-1314.google.com) (66.249.92.168)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Jan 2007 16:07:14 -0800
Received: by ug-out-1314.google.com with SMTP id k40so265508ugc
        for <java-user@lucene.apache.org>; Wed, 10 Jan 2007 16:06:53 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=XijcPmm4LBgaYRv6O6LfujBQwCDoF+FzMzt6lEVTEC0vTXgvPcsA8hK8dDjoNj0ybLEyXsnH6O/7cSWSkzOxXx8JAglnLhBd5uaI7PqVZHo5gReORaDNk5KosD8GKctxSbN+1gAgwA/mLJdaBSbh8GH6NXOqbZiQUjGWnbRZXNk=
Received: by 10.78.136.9 with SMTP id j9mr299122hud.1168474012942;
        Wed, 10 Jan 2007 16:06:52 -0800 (PST)
Received: by 10.78.32.10 with HTTP; Wed, 10 Jan 2007 16:06:52 -0800 (PST)
Message-ID: <ae6f38f60701101606v38ac1428ub4248499d7df87b6@mail.gmail.com>
Date: Wed, 10 Jan 2007 19:06:52 -0500
From: "Walt Stoneburner" <walt.stoneburner@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Getting a Better Understanding of Lucene's Search Operators
In-Reply-To: <Pine.LNX.4.58.0701101524540.9119@hal.rescomp.berkeley.edu>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_13713_7142066.1168474012754"
References: <ae6f38f60701100832p1ec8b05do52769ca8f96bfede@mail.gmail.com>
	 <45A51B38.3080904@gmail.com>
	 <ae6f38f60701100922w748a234wada7e44a96a3396@mail.gmail.com>
	 <45A52D4D.4030803@syr.edu>
	 <ae6f38f60701101030r287473fdtd6a4e3532e16bb14@mail.gmail.com>
	 <Pine.LNX.4.58.0701101524540.9119@hal.rescomp.berkeley.edu>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_13713_7142066.1168474012754
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

On 1/10/07, Chris Hostetter <hossman_lucene@fucit.org> wrote:
>
> I'm guessing there is suppose to be some sort of table structure to the
> mail you send ... it doesn't work in plain text mail readers so i'm not
> sure whta ou were trying to say.


My bad, I was using GMail, and it was trying to produce a very simple logic
table.


6) you should avoid thinking in terms of AND, OR, and NOT ... think in
>     terms of OPTIONAL, REQUIRED, and PROHIBITED ...


Excellent!  You've provided a wonderful bit of insight.  This makes things
much easier to understand.

I should assume, though, that parenthesis work as expected?  So where I was
doing things like:
( A OR B ) AND ( C OR D ), that means that +(A B) +(C D) is actually
happening?

-wls

------=_Part_13713_7142066.1168474012754--

From java-user-return-25406-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 11 00:14:46 2007
Return-Path: <java-user-return-25406-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35692 invoked from network); 11 Jan 2007 00:14:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Jan 2007 00:14:45 -0000
Received: (qmail 53579 invoked by uid 500); 11 Jan 2007 00:14:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53523 invoked by uid 500); 11 Jan 2007 00:14:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53505 invoked by uid 99); 11 Jan 2007 00:14:45 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Jan 2007 16:14:45 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Jan 2007 16:13:55 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 7E14E5B775; Wed, 10 Jan 2007 16:12:57 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 780E97F403
	for <java-user@lucene.apache.org>; Wed, 10 Jan 2007 16:12:57 -0800 (PST)
Date: Wed, 10 Jan 2007 16:12:57 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: Lucene <java-user@lucene.apache.org>
Subject: Re: Spelling Correction api
In-Reply-To: <20070110235259.GA39546@thegestalt.org>
Message-ID: <Pine.LNX.4.58.0701101602500.9119@hal.rescomp.berkeley.edu>
References: <20070110235259.GA39546@thegestalt.org>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


(disclaimer: i've never acctaully used the SpellChecker contib, just read
the docs)

: I've been reading through the spelling correction API and I'm confused.
: It looks like you tell it the directory to hold the spelling correction
: DB and then give it an IndexReader and a field to retrieve spelling
: suggestions from.

not exactly: you start by constructing a SpellChecker instance specifying
the Directory it should use to store it's built up datastructures (which
just so happen to be a Lucene index with a special set of fields)

now you have an empty SpellChecker oject.

You can then call the indexDictionary method passing it anything you want
that impliments the Dictionary interface -- a handy LuceneDictionary
implimentations is provided so you can add all of hte words in a field of
your choice from an existing Lucene index.

now you've got a populated SpellChecker object that's usable.  you can
make other instances of it in the future by resuing the same Directory.

: But then I'd have to redo that operation everytime a new document was
: indexed. There didn't seem to be any apparent way to incrementally add
: new documents without creating my own dictionary by splitting up words
: from the incoming document.

just call the indexDictionary method again on some simple Dictionary
implimentation and the new words will be added.


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25407-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 11 00:16:02 2007
Return-Path: <java-user-return-25407-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37234 invoked from network); 11 Jan 2007 00:15:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Jan 2007 00:15:53 -0000
Received: (qmail 57518 invoked by uid 500); 11 Jan 2007 00:15:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57206 invoked by uid 500); 11 Jan 2007 00:15:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57195 invoked by uid 99); 11 Jan 2007 00:15:53 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Jan 2007 16:15:53 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Jan 2007 16:15:21 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 894E65B775; Wed, 10 Jan 2007 16:14:56 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 85D9A7F403
	for <java-user@lucene.apache.org>; Wed, 10 Jan 2007 16:14:56 -0800 (PST)
Date: Wed, 10 Jan 2007 16:14:56 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Getting a Better Understanding of Lucene's Search Operators
In-Reply-To: <ae6f38f60701101606v38ac1428ub4248499d7df87b6@mail.gmail.com>
Message-ID: <Pine.LNX.4.58.0701101613370.9119@hal.rescomp.berkeley.edu>
References: <ae6f38f60701100832p1ec8b05do52769ca8f96bfede@mail.gmail.com> 
 <45A51B38.3080904@gmail.com>  <ae6f38f60701100922w748a234wada7e44a96a3396@mail.gmail.com>
  <45A52D4D.4030803@syr.edu>  <ae6f38f60701101030r287473fdtd6a4e3532e16bb14@mail.gmail.com>
  <Pine.LNX.4.58.0701101524540.9119@hal.rescomp.berkeley.edu>
 <ae6f38f60701101606v38ac1428ub4248499d7df87b6@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: I should assume, though, that parenthesis work as expected?  So where I was
: doing things like:
: ( A OR B ) AND ( C OR D ), that means that +(A B) +(C D) is actually
: happening?

yes ... anywhere i used a simple example like "A" or "foo" could be
repalced with a parenthetical expression whose body is treated as a query
expression on it's own.


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25408-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 11 01:11:12 2007
Return-Path: <java-user-return-25408-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48262 invoked from network); 11 Jan 2007 01:11:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Jan 2007 01:11:11 -0000
Received: (qmail 11554 invoked by uid 500); 11 Jan 2007 01:11:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11521 invoked by uid 500); 11 Jan 2007 01:11:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11510 invoked by uid 99); 11 Jan 2007 01:11:11 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Jan 2007 17:11:11 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 66.249.92.169 as permitted sender)
Received: from [66.249.92.169] (HELO ug-out-1314.google.com) (66.249.92.169)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Jan 2007 17:11:02 -0800
Received: by ug-out-1314.google.com with SMTP id k40so279996ugc
        for <java-user@lucene.apache.org>; Wed, 10 Jan 2007 17:10:41 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=W4OBUXK6hkf7Gm4+BpOCu6zR1GOjRLKzDGKh6OIGTjBgtjv9p77cbEyCYE2A5QDEcMAbPRV1GoZmq1dbAhTWp6jjbY1H7gLwdz7+anaUHRaA5QmbJ2t247e0GJ2HAR7TK4b4OeNRqmqzLUbgBS+0mLexoi2/HTZfdsoCDSouf14=
Received: by 10.82.179.9 with SMTP id b9mr212758buf.1168477840591;
        Wed, 10 Jan 2007 17:10:40 -0800 (PST)
Received: by 10.82.162.9 with HTTP; Wed, 10 Jan 2007 17:10:40 -0800 (PST)
Message-ID: <359a92830701101710y484f7c95r495eff89bf091d60@mail.gmail.com>
Date: Wed, 10 Jan 2007 20:10:40 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Getting a Better Understanding of Lucene's Search Operators
In-Reply-To: <ae6f38f60701101606v38ac1428ub4248499d7df87b6@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_17345_5135864.1168477840258"
References: <ae6f38f60701100832p1ec8b05do52769ca8f96bfede@mail.gmail.com>
	 <45A51B38.3080904@gmail.com>
	 <ae6f38f60701100922w748a234wada7e44a96a3396@mail.gmail.com>
	 <45A52D4D.4030803@syr.edu>
	 <ae6f38f60701101030r287473fdtd6a4e3532e16bb14@mail.gmail.com>
	 <Pine.LNX.4.58.0701101524540.9119@hal.rescomp.berkeley.edu>
	 <ae6f38f60701101606v38ac1428ub4248499d7df87b6@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_17345_5135864.1168477840258
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

To answer questions like "what really happens" in terms of a lucene query,
I've been helped greatly by two things...

query.toString();

and Luke.

Of the two, luke (google lucene luke) is quickest. It will show you what
lucene request is produced by various query strings etc.

Sorry if you already know about them...

Best
Erick

On 1/10/07, Walt Stoneburner <walt.stoneburner@gmail.com> wrote:
>
> On 1/10/07, Chris Hostetter <hossman_lucene@fucit.org> wrote:
> >
> > I'm guessing there is suppose to be some sort of table structure to the
> > mail you send ... it doesn't work in plain text mail readers so i'm not
> > sure whta ou were trying to say.
>
>
> My bad, I was using GMail, and it was trying to produce a very simple
> logic
> table.
>
>
> 6) you should avoid thinking in terms of AND, OR, and NOT ... think in
> >     terms of OPTIONAL, REQUIRED, and PROHIBITED ...
>
>
> Excellent!  You've provided a wonderful bit of insight.  This makes things
> much easier to understand.
>
> I should assume, though, that parenthesis work as expected?  So where I
> was
> doing things like:
> ( A OR B ) AND ( C OR D ), that means that +(A B) +(C D) is actually
> happening?
>
> -wls
>
>

------=_Part_17345_5135864.1168477840258--

From java-user-return-25409-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 11 01:32:40 2007
Return-Path: <java-user-return-25409-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53393 invoked from network); 11 Jan 2007 01:32:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Jan 2007 01:32:40 -0000
Received: (qmail 37386 invoked by uid 500); 11 Jan 2007 01:32:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37362 invoked by uid 500); 11 Jan 2007 01:32:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37351 invoked by uid 99); 11 Jan 2007 01:32:39 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Jan 2007 17:32:39 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Jan 2007 17:32:30 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 248FA5B775; Wed, 10 Jan 2007 17:32:10 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 1CB947F403
	for <java-user@lucene.apache.org>; Wed, 10 Jan 2007 17:32:10 -0800 (PST)
Date: Wed, 10 Jan 2007 17:32:10 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Technology Preview of new Lucene QueryParser
In-Reply-To: <45A460E2.8090508@gmail.com>
Message-ID: <Pine.LNX.4.58.0701101726150.29321@hal.rescomp.berkeley.edu>
References: <45A460E2.8090508@gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: http://www.myhardshadow.com/qsol.php

Mark: I only read your querysyntax.php and didnt' dig into the source, but
i'm curious about the "There are no unary operators in Qsol syntax"
statement.... what is the Qsol equivilent of the QueryParser syntax: "A -B -C"

It's also not clear to me how differnet fields can be queried ... you give
creditcard[23907094 - 23094345] as an example of a range qery, but how
does one search for the word "foo" in the field "title" ?

Hmm... is there no support for query boosts?


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25410-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 11 02:46:20 2007
Return-Path: <java-user-return-25410-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 74913 invoked from network); 11 Jan 2007 02:46:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Jan 2007 02:46:19 -0000
Received: (qmail 13989 invoked by uid 500); 11 Jan 2007 02:46:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13954 invoked by uid 500); 11 Jan 2007 02:46:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13943 invoked by uid 99); 11 Jan 2007 02:46:19 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Jan 2007 18:46:19 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of markrmiller@gmail.com designates 66.249.82.228 as permitted sender)
Received: from [66.249.82.228] (HELO wx-out-0506.google.com) (66.249.82.228)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Jan 2007 18:46:09 -0800
Received: by wx-out-0506.google.com with SMTP id i29so295865wxd
        for <java-user@lucene.apache.org>; Wed, 10 Jan 2007 18:45:48 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=qQTJUDEMM0b18W3vYLFztaQHhTt8I59V1th5QNF9lCcSt+FegONbrWUJmnjEJGLMdx52OcgiwyesYlWB7affwk9W7cpBrOg/cJcvtWDk8wiz+hNgMDxMuiu60caUO/Dz1lS9z0FIHoxY2H80O7SuRFlbXvovRJSn1mmlP8dbFfY=
Received: by 10.70.31.6 with SMTP id e6mr1879784wxe.1168483548279;
        Wed, 10 Jan 2007 18:45:48 -0800 (PST)
Received: from ?192.168.1.103? ( [216.66.114.42])
        by mx.google.com with ESMTP id 34sm378249wra.2007.01.10.18.45.46;
        Wed, 10 Jan 2007 18:45:47 -0800 (PST)
Message-ID: <45A5A468.1030604@gmail.com>
Date: Wed, 10 Jan 2007 21:43:52 -0500
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 1.5.0.9 (Windows/20061207)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Technology Preview of new Lucene QueryParser
References: <45A460E2.8090508@gmail.com> <Pine.LNX.4.58.0701101726150.29321@hal.rescomp.berkeley.edu>
In-Reply-To: <Pine.LNX.4.58.0701101726150.29321@hal.rescomp.berkeley.edu>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hey Hoss,

I didn't realize that I had left out the field stuff...I really am still 
working on a lot with the parser's documentation and I apologize.
>
> Mark: I only read your querysyntax.php and didnt' dig into the source, but
> i'm curious about the "There are no unary operators in Qsol syntax"
> statement.... what is the Qsol equivilent of the QueryParser syntax: "A -B -C"
>   
Perhaps I am not being completely accurate with that statement, I'll let 
you be the judge.
It works like this: "A -B -C" would be expressed as "A ! B ! C"
By binary, I mean that each operator must connect two clauses...in that 
case A is connected to B and C is connected to A ! B.
I avoid the single prohibit clause issue, -query, by not really allowing 
it in the syntax. The operators are: AND, OR, ANDNOT, and PROXIMITY.
A ! B ! B = A ANDNOT B ANDNOT C
> It's also not clear to me how differnet fields can be queried ... you give
> creditcard[23907094 - 23094345] as an example of a range qery, but how
> does one search for the word "foo" in the field "title" ?
>   
I will add this...a field search is: field1,field2(foo) | field3(foobar)

I have to update that documentation...field search was '[ ]' but is now 
'( )'.
Thanks for pointing this out to me.
> Hmm... is there no support for query boosts?
>   
This is a glaring omission eh? I have to plead laziness...I havn't 
needed it  yet in my work so it is not there...I will add it before a 
1.0 release but was hoping for some syntax suggestions -- though I'm 
betting people are happy with Lucene's syntax for this.
> -Hoss
>   

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25411-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 11 03:11:37 2007
Return-Path: <java-user-return-25411-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80067 invoked from network); 11 Jan 2007 03:11:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Jan 2007 03:11:34 -0000
Received: (qmail 37241 invoked by uid 500); 11 Jan 2007 03:11:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36900 invoked by uid 500); 11 Jan 2007 03:11:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 59360 invoked by uid 99); 10 Jan 2007 21:49:40 -0000
X-ASF-Spam-Status: No, hits=2.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Message-ID: <45A55F54.609@mindspring.com>
Date: Wed, 10 Jan 2007 13:49:08 -0800
From: Jason Pump <jpump@mindspring.com>
User-Agent: Thunderbird 1.5.0.9 (X11/20061206)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Text storing design and performance question
References: <8259883.post@talk.nabble.com> <06695F9F-B4EE-4C6B-845E-BE703DC92B6C@ehatchersolutions.com> <8261408.post@talk.nabble.com> <45A51B99.8080304@gmail.com> <8261739.post@talk.nabble.com> <ab0709bf0701100954m155221cajf7ef90b0d16b5cf1@mail.gmail.com> <002901c734e8$61ec4680$970fda80@libraria.ucsf.edu> <8265458.post@talk.nabble.com>
In-Reply-To: <8265458.post@talk.nabble.com>
Content-Type: multipart/alternative;
 boundary="------------020801040707060808040006"
X-OriginalArrivalTime: 10 Jan 2007 21:48:26.0640 (UTC) FILETIME=[0F025900:01C73501]
X-Virus-Checked: Checked by ClamAV on apache.org

--------------020801040707060808040006
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit

Renaud, one optimization you can do on this is to try the first 10kb, 
see if it finds text worth highlighting, if not, with a slight overlap 
try the next 9.9kb - 19.9kb or just 9.9kb -> end if you're feeling lazy. 
This assumes that most good matches are at the start of the document, 
and that the files on disk are not compressed.

moraleslos wrote:
> Maybe keeping the data in the DB would make it quicker?  Seems like the I/O
> performance would cause most of the performance issues you're seeing.  
>
> -los
>
>
> Renaud Waldura-5 wrote:
>   
>> We used to store a big text field for highlighting purposes too, and it
>> proved a big pain. The index was gigantic, it took forever to build, and
>> the
>> search performance would sometimes suffer from it (just a hunch).
>>
>> Now we keep this big text field on disk (in a file), and feed it to the
>> highlighter. Unfortunately the highlighter has to read the file, parse it,
>> etc... It's slooow, sometimes over a second on a large document.
>>
>> I vaguely remember reading somewhere newer versions of the highlighter are
>> able to leverage term vectors to avoid re-parsing the field. (I could be
>> mistaken.) Maybe just storing term vectors would keep the index lean and
>> allow for fast highlighting?
>>
>> --Renaud
>>
>>  
>>
>> -----Original Message-----
>> From: Mark Miller [mailto:markrmiller@gmail.com] 
>> Sent: Wednesday, January 10, 2007 9:54 AM
>> To: java-user@lucene.apache.org
>> Subject: Re: Text storing design and performance question
>>
>> Being stateless should not be much of an issue. As Erick mentioned, the
>> highlighter just expects you to pass it the query again and the text to be
>> highlighted. So when you show the pagination you just need to keep around
>> what query generated the current page...then shove each piece of relevant
>> text from the database through the highlighter (with the query) before
>> displaying it.
>>
>> - Mark
>>
>> On 1/10/07, moraleslos <moraleslos@hotmail.com> wrote:
>>     
>>> Hi Mark,
>>>
>>> Looks like I've got to implement some sort of pagination for my clients.
>>> Problem is everything is stateless so looks like there's some work I 
>>> need to do on my end.  Thanks.
>>>
>>> -los
>>>
>>>
>>>
>>> markrmiller wrote:
>>>       
>>>> Usually a user cannot easily browse 50,000 on a single display, and 
>>>> so you would only highlight the docs as they became visible to the
>>>>         
>>> user.
>>>       
>>>> This is generally a small amount...often one at a time.
>>>>
>>>> - Mark
>>>>
>>>> moraleslos wrote:
>>>>         
>>>>> Hi Erik,
>>>>>
>>>>> Would that slow performance a bit?  For example, say I receive 
>>>>> 50,000 hits from a search.  From your explanation, I have to 
>>>>> retrieve the DB id
>>>>>           
>>> from
>>>       
>>>>> each hit, perform a query to the DB using the id to retrieve the 
>>>>> full contents for each hit, run highlighter on each content, and 
>>>>> then
>>>>>           
>>> return?
>>>       
>>>>> Although I'll give this a shot, it will seem to slow performance on 
>>>>> the searching side of things, wouldn't it?  Thanks for the reply.
>>>>>
>>>>> -los
>>>>>
>>>>>
>>>>>
>>>>> Erik Hatcher wrote:
>>>>>
>>>>>           
>>>>>> You don't have to store a field to highlight text.  If you've got 
>>>>>> it in your database, retrieve it from there and pass that string 
>>>>>> to the highlighter instead.
>>>>>>
>>>>>>     Erik
>>>>>>
>>>>>>
>>>>>> On Jan 10, 2007, at 10:45 AM, moraleslos wrote:
>>>>>>
>>>>>>
>>>>>>             
>>>>>>> I'm running into a little dilemma with Lucene highlighting and 
>>>>>>> indexing.  I currently index anything and everything that gets 
>>>>>>> inserted into a database.
>>>>>>> This database includes all the content that is searched.  Now 
>>>>>>> I'll have lots and lots of content, thinking of the range of 
>>>>>>> 50GB+, all stored in the DB.
>>>>>>> Using Lucene, I index all of this.  But since I'm using 
>>>>>>> highlighting features, I'll also need to store the content into 
>>>>>>> the index.  Not sure what the performance implications are during 
>>>>>>> a search but I know that indexing performance should be slower as 
>>>>>>> well as the index size being
>>>>>>>               
>>> enormous.
>>>       
>>>>>>> Because I have duplicated data, one in the index and the other in 
>>>>>>> the db, are there other ways of handling this situation in a more 
>>>>>>> efficient and performant way?  Thanks in advance.
>>>>>>>
>>>>>>> -los
>>>>>>> --
>>>>>>> View this message in context: http://www.nabble.com/Text-storing-
>>>>>>> design-and-performance-question-tf2953201.html#a8259883
>>>>>>> Sent from the Lucene - Java Users mailing list archive at
>>>>>>>               
>>> Nabble.com.
>>>       
>>>>>>>
>>>>>>>               
>>> ---------------------------------------------------------------------
>>>       
>>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>>
>>>>>>>               
>>>>>> ---------------------------------------------------------------------
>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>             
>>>>>           
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>>
>>>>         
>>> --
>>> View this message in context:
>>>
>>>       
>> http://www.nabble.com/Text-storing-design-and-performance-question-tf2953201
>> .html#a8261739
>>     
>>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>>       
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>>     
>
>   


--------------020801040707060808040006--

From java-user-return-25412-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 11 04:15:38 2007
Return-Path: <java-user-return-25412-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90999 invoked from network); 11 Jan 2007 04:15:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Jan 2007 04:15:37 -0000
Received: (qmail 80684 invoked by uid 500); 11 Jan 2007 04:15:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80652 invoked by uid 500); 11 Jan 2007 04:15:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80641 invoked by uid 99); 11 Jan 2007 04:15:36 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Jan 2007 20:15:36 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Jan 2007 20:15:27 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 981BA5B775; Wed, 10 Jan 2007 20:15:06 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 8CD9E7F403
	for <java-user@lucene.apache.org>; Wed, 10 Jan 2007 20:15:06 -0800 (PST)
Date: Wed, 10 Jan 2007 20:15:06 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Technology Preview of new Lucene QueryParser
In-Reply-To: <45A5A468.1030604@gmail.com>
Message-ID: <Pine.LNX.4.58.0701102008590.6750@hal.rescomp.berkeley.edu>
References: <45A460E2.8090508@gmail.com> <Pine.LNX.4.58.0701101726150.29321@hal.rescomp.berkeley.edu>
 <45A5A468.1030604@gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: It works like this: "A -B -C" would be expressed as "A ! B ! C"
: By binary, I mean that each operator must connect two clauses...in that
: case A is connected to B and C is connected to A ! B.
: I avoid the single prohibit clause issue, -query, by not really allowing

so do you convert A ! B ! C into a three clause boolean query, or a two
clause BooleanQuery that contains another two clause BooleanQuery?

: I will add this...a field search is: field1,field2(foo) | field3(foobar)

is that field1,field2(foo) construct a DisjunctionMaxQuery or just a
BooleanQuery?

: 1.0 release but was hoping for some syntax suggestions -- though I'm
: betting people are happy with Lucene's syntax for this.

yeah, "^" is pretty straight forward

incidently: what was there a motivating factor behind the mixed use of
both ~ and : to denote slop?


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25413-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 11 07:26:52 2007
Return-Path: <java-user-return-25413-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31814 invoked from network); 11 Jan 2007 07:26:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Jan 2007 07:26:51 -0000
Received: (qmail 48287 invoked by uid 500); 11 Jan 2007 07:26:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47699 invoked by uid 500); 11 Jan 2007 07:26:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47688 invoked by uid 99); 11 Jan 2007 07:26:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Jan 2007 23:26:51 -0800
X-ASF-Spam-Status: No, hits=2.8 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [206.190.38.18] (HELO web50003.mail.yahoo.com) (206.190.38.18)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 10 Jan 2007 23:26:40 -0800
Received: (qmail 98951 invoked by uid 60001); 11 Jan 2007 07:26:18 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=KEUJ6+H+oDuMzVCdEyZfv/sImydqG3rz2EEtxtSOazgjXab6d4YdnoVHM59Q7zN6YOfgg/Ci4nHQ8v8xsh6sTVa01fA0P6W96wju14bdll/fOm20Qt00ItHj/wuku54ghBVeWoqY7TEI/9x12OQC+a3xGJmEBhU6WbFu3ycBkTM=;
X-YMail-OSG: 0yFA59cVM1nfzNHhyCCAR6bvuxTnd55aHUQwzKOUPt4BV_P4H5U8Exrs1ezx3mhsJlq14eP5ndG8AdFXWoykwG.rNGM7DlyTcnvVWE5Bx.BCxzi.mo1JpuoK1l3G_IPsoXdnC3CMhGFWiSOK1HeFpfEudy0wFgjhyBf0agaHBW93OY3xqqpTIw5SAZ0_
Received: from [76.215.109.62] by web50003.mail.yahoo.com via HTTP; Wed, 10 Jan 2007 23:26:18 PST
Date: Wed, 10 Jan 2007 23:26:18 -0800 (PST)
From: Josh Joy <joshj551@yahoo.com>
Subject: SpellChecker Index - remove words?
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
Message-ID: <856933.98688.qm@web50003.mail.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi All,

The spellchecker api is very nice to use, and I can
easily add words to 
the index. However, because the words I am adding are
from another index 
that is user generated per se (meaning it may have
spelling errors), how 
can I safely remove words from the spell checker
index? If I know the 
exactly the word I would like to remove?

Thanks,
Josh

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25414-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 11 09:04:27 2007
Return-Path: <java-user-return-25414-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 68163 invoked from network); 11 Jan 2007 09:04:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Jan 2007 09:04:26 -0000
Received: (qmail 68727 invoked by uid 500); 11 Jan 2007 09:04:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68694 invoked by uid 500); 11 Jan 2007 09:04:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68668 invoked by uid 99); 11 Jan 2007 09:04:16 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Jan 2007 01:04:16 -0800
X-ASF-Spam-Status: No, hits=3.1 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST,DNS_FROM_RFC_WHOIS,MAILTO_TO_SPAM_ADDR
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [206.190.38.57] (HELO web50303.mail.yahoo.com) (206.190.38.57)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 11 Jan 2007 01:04:04 -0800
Received: (qmail 6448 invoked by uid 60001); 11 Jan 2007 09:03:43 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=otJtwdJrPWw5LGFcw49R+ZfarHfUCJ42z0YfaIZDztGe8mJSjDr/akgskmhDaRsw6BbC7Jaw+8GqaNsRim0qt6/XSF+41qzZ4IZddcxEi1A6Rr1O8ORvqIY/w72+Z+ACVgsTHAEC3gbU31WKrPjWJScpaGz/oqvmgyH/KPZwKqM=;
X-YMail-OSG: bbRkqyAVM1m0ipSF6qttvARJMzUL2cniKRGXSF2Zb20AirPV09UrrfYMxUw8XJJSnh.tLhQxvQ1Mv5aZmYm4ykLE0n6v2CyhqIjj52VVJzxv3kB.yMrHEQCtxu1Fe1zaa70FxnYqvnpagwQu1wPgxziuqA09e9yS_K_ZoiHxHkYgRT_0LduTMw6w4bS9
Received: from [58.63.155.204] by web50303.mail.yahoo.com via HTTP; Thu, 11 Jan 2007 01:03:42 PST
X-Mailer: YahooMailWebService/0.6.132.6
Date: Thu, 11 Jan 2007 01:03:42 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: SpellChecker Index - remove words?
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable
Message-ID: <37168.6425.qm@web50303.mail.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Josh,=0A=0AThe spellchecker index is just another Lucene index, so you can =
delete documents/words from it the same way you delete documents from any L=
ucene index - using IndexReader's delete(...) methods.  You can pass that d=
elete method a Term where the field name is "word" and the value is the miz=
pelt word.=0A=0AOtis =0A=0A----- Original Message ----=0AFrom: Josh Joy <jo=
shj551@yahoo.com>=0ATo: java-user@lucene.apache.org=0ASent: Thursday, Janua=
ry 11, 2007 2:26:18 AM=0ASubject: SpellChecker Index - remove words?=0A=0AH=
i All,=0A=0AThe spellchecker api is very nice to use, and I can=0Aeasily ad=
d words to =0Athe index. However, because the words I am adding are=0Afrom =
another index =0Athat is user generated per se (meaning it may have=0Aspell=
ing errors), how =0Acan I safely remove words from the spell checker=0Ainde=
x? If I know the =0Aexactly the word I would like to remove?=0A=0AThanks,=
=0AJosh=0A=0A--------------------------------------------------------------=
-------=0ATo unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org=
=0AFor additional commands, e-mail: java-user-help@lucene.apache.org=0A=0A=
=0A=0A

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25415-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 11 10:40:10 2007
Return-Path: <java-user-return-25415-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 6295 invoked from network); 11 Jan 2007 10:40:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Jan 2007 10:40:09 -0000
Received: (qmail 26118 invoked by uid 500); 11 Jan 2007 10:40:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26032 invoked by uid 500); 11 Jan 2007 10:40:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25870 invoked by uid 99); 11 Jan 2007 10:40:07 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Jan 2007 02:40:07 -0800
X-ASF-Spam-Status: No, hits=3.1 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST,DNS_FROM_RFC_WHOIS,MAILTO_TO_SPAM_ADDR
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [206.190.39.87] (HELO web50015.mail.yahoo.com) (206.190.39.87)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 11 Jan 2007 02:39:46 -0800
Received: (qmail 90200 invoked by uid 60001); 11 Jan 2007 10:39:24 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=3OwNdtO1k38cRAF8woRh4ec3z/jbpq/IbK6+s+ahX9zLVJWzG7a/CbyZB2jJrtq48RjCx9zGING+Oq4zTr5n5Nin+DyuWL+9hOSJV3lagi2MJ1JR74kLg6diJGB/5EqRrBaRbLZ8TEbnn1/r+BcmRu8GIeXzPlkksBsruHdcp/g=;
X-YMail-OSG: 6hgQkysVM1l7_rL5aSYIPYhk4j2NMKwQ4iChMeyAm5eaRRUkQfQQiRFpRZYa0hFofjm.ihpTGMgoupr1Gj9tXIhZujVELdpMU9SPhWkDb9BiAnO9cAO3uDAf0nVQlDBsiYAI4QuvJFzIKDmGiZYmGtj_3xxPkUL1coOq.BRwt3ouHACcrboNagHEZWEG
Received: from [76.215.109.62] by web50015.mail.yahoo.com via HTTP; Thu, 11 Jan 2007 02:39:24 PST
Date: Thu, 11 Jan 2007 02:39:24 -0800 (PST)
From: Josh Joy <joshj551@yahoo.com>
Subject: Re: SpellChecker Index - remove words?
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
Message-ID: <682618.89318.qm@web50015.mail.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks for the reply....I guess my concern is that I
want to ensure that 
I don't accidentally delete other words than the
intended word. Example, 
if I build a custom index, I can delete a word not
based on the term 
itself, though in the term I can include a "unique"
identifier as well. 
Can the same be done for the spell checker index?

Thanks in advance,
Josh

Otis Gospodnetic wrote:
> Josh,
>
> The spellchecker index is just another Lucene index,
so you can delete documents/words from it the same way
you delete documents from any Lucene index - using
IndexReader's delete(...) methods.  You can pass that
delete method a Term where the field name is "word"
and the value is the mizpelt word.
>
> Otis 
>
> ----- Original Message ----
> From: Josh Joy <joshj551@yahoo.com>
> To: java-user@lucene.apache.org
> Sent: Thursday, January 11, 2007 2:26:18 AM
> Subject: SpellChecker Index - remove words?
>
> Hi All,
>
> The spellchecker api is very nice to use, and I can
> easily add words to 
> the index. However, because the words I am adding
are
> from another index 
> that is user generated per se (meaning it may have
> spelling errors), how 
> can I safely remove words from the spell checker
> index? If I know the 
> exactly the word I would like to remove?
>
> Thanks,
> Josh
>
>
---------------------------------------------------------------------
> To unsubscribe, e-mail:
java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail:
java-user-help@lucene.apache.org
>
>
>
>
>
>
---------------------------------------------------------------------
> To unsubscribe, e-mail:
java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail:
java-user-help@lucene.apache.org
>
>
>
>   


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25416-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 11 10:45:41 2007
Return-Path: <java-user-return-25416-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7530 invoked from network); 11 Jan 2007 10:45:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Jan 2007 10:45:40 -0000
Received: (qmail 40861 invoked by uid 500); 11 Jan 2007 10:45:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40831 invoked by uid 500); 11 Jan 2007 10:45:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40815 invoked by uid 99); 11 Jan 2007 10:45:41 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Jan 2007 02:45:41 -0800
X-ASF-Spam-Status: No, hits=3.1 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST,DNS_FROM_RFC_WHOIS,MAILTO_TO_SPAM_ADDR
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [206.190.39.227] (HELO web50314.mail.yahoo.com) (206.190.39.227)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 11 Jan 2007 02:45:30 -0800
Received: (qmail 42948 invoked by uid 60001); 11 Jan 2007 10:45:07 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=3qQSekM5Zq36M++6kZ1HcfWgKjYrEqGtO3HUfPPEwPX3kh7iktcAFdTOD0QDfpILVYWR2hniSq0rACnOLC/gvULX0OoBOCyK4VVd4HS/CkRV01TlV4HF408I2GRkKZvY5H8o+Ey0rWf0Eul7IVgLDomoFhnJwy93EC0rWJXlj6A=;
X-YMail-OSG: X29T59QVM1muEwFEgW.14r9nE_ECaTyLUudNUGowP2eYw6dxFQeA8i5zGFyEcZnzcuOOQ4sxfqdYPgDsctotq.S8y85A_THldJ0m2JmEYg5Jfn6UUowg963KIpHhBO2ZriuXawR6IyplLmv.p3AjwRJV_Itsfp3dQ30pyw2IL5F129uGN3g0p5as.LYy
Received: from [58.63.155.204] by web50314.mail.yahoo.com via HTTP; Thu, 11 Jan 2007 02:45:07 PST
X-Mailer: YahooMailWebService/0.6.132.6
Date: Thu, 11 Jan 2007 02:45:07 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: SpellChecker Index - remove words?
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable
Message-ID: <744429.42682.qm@web50314.mail.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

The value of the word - the word itself, should be your unique identifier.=
=0A=0AOtis=0A=0A----- Original Message ----=0AFrom: Josh Joy <joshj551@yaho=
o.com>=0ATo: java-user@lucene.apache.org=0ASent: Thursday, January 11, 2007=
 5:39:24 AM=0ASubject: Re: SpellChecker Index - remove words?=0A=0AThanks f=
or the reply....I guess my concern is that I=0Awant to ensure that =0AI don=
't accidentally delete other words than the=0Aintended word. Example, =0Aif=
 I build a custom index, I can delete a word not=0Abased on the term =0Aits=
elf, though in the term I can include a "unique"=0Aidentifier as well. =0AC=
an the same be done for the spell checker index?=0A=0AThanks in advance,=0A=
Josh=0A=0AOtis Gospodnetic wrote:=0A> Josh,=0A>=0A> The spellchecker index =
is just another Lucene index,=0Aso you can delete documents/words from it t=
he same way=0Ayou delete documents from any Lucene index - using=0AIndexRea=
der's delete(...) methods.  You can pass that=0Adelete method a Term where =
the field name is "word"=0Aand the value is the mizpelt word.=0A>=0A> Otis =
=0A>=0A> ----- Original Message ----=0A> From: Josh Joy <joshj551@yahoo.com=
>=0A> To: java-user@lucene.apache.org=0A> Sent: Thursday, January 11, 2007 =
2:26:18 AM=0A> Subject: SpellChecker Index - remove words?=0A>=0A> Hi All,=
=0A>=0A> The spellchecker api is very nice to use, and I can=0A> easily add=
 words to =0A> the index. However, because the words I am adding=0Aare=0A> =
from another index =0A> that is user generated per se (meaning it may have=
=0A> spelling errors), how =0A> can I safely remove words from the spell ch=
ecker=0A> index? If I know the =0A> exactly the word I would like to remove=
?=0A>=0A> Thanks,=0A> Josh=0A>=0A>=0A--------------------------------------=
-------------------------------=0A> To unsubscribe, e-mail:=0Ajava-user-uns=
ubscribe@lucene.apache.org=0A> For additional commands, e-mail:=0Ajava-user=
-help@lucene.apache.org=0A>=0A>=0A>=0A>=0A>=0A>=0A-------------------------=
--------------------------------------------=0A> To unsubscribe, e-mail:=0A=
java-user-unsubscribe@lucene.apache.org=0A> For additional commands, e-mail=
:=0Ajava-user-help@lucene.apache.org=0A>=0A>=0A>=0A>   =0A=0A=0A-----------=
----------------------------------------------------------=0ATo unsubscribe=
, e-mail: java-user-unsubscribe@lucene.apache.org=0AFor additional commands=
, e-mail: java-user-help@lucene.apache.org=0A=0A=0A=0A

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25417-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 11 11:56:19 2007
Return-Path: <java-user-return-25417-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 27909 invoked from network); 11 Jan 2007 11:56:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Jan 2007 11:56:18 -0000
Received: (qmail 28565 invoked by uid 500); 11 Jan 2007 11:56:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28531 invoked by uid 500); 11 Jan 2007 11:56:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28520 invoked by uid 99); 11 Jan 2007 11:56:17 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Jan 2007 03:56:17 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [66.111.4.29] (HELO out5.smtp.messagingengine.com) (66.111.4.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Jan 2007 03:56:07 -0800
Received: from out1.internal (unknown [10.202.2.149])
	by out1.messagingengine.com (Postfix) with ESMTP id CB66C79AD3
	for <java-user@lucene.apache.org>; Thu, 11 Jan 2007 06:51:47 -0500 (EST)
Received: from heartbeat1.messagingengine.com ([10.202.2.160])
  by out1.internal (MEProxy); Thu, 11 Jan 2007 06:51:47 -0500
X-Sasl-enc: KGhbwdDOYW9JkOWFhlGOE0osVIHSfmpwB8DHtrzWYNKY 1168516307
Received: from [10.17.4.90] (pool-72-70-33-214.bstnma.fios.verizon.net [72.70.33.214])
	by mail.messagingengine.com (Postfix) with ESMTP id 7EE9B17BF5
	for <java-user@lucene.apache.org>; Thu, 11 Jan 2007 06:51:47 -0500 (EST)
Message-ID: <45A625BE.8000002@mikemccandless.com>
Date: Thu, 11 Jan 2007 06:55:42 -0500
From: Michael McCandless <lucene@mikemccandless.com>
User-Agent: Thunderbird 1.5.0.9 (Windows/20061207)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: "docs out of order" IllegalStateException during merge (LUCENE-140)
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org


Hi all,

I would like to draw your attention to an open and rather devious
long-standing index corruption issue that we've only now finally
gotten to the bottom of:

     https://issues.apache.org/jira/browse/LUCENE-140

If you hit this, you will typically see a "docs out of order"
IllegalStateException during merge (which can happen under-the-hood
during IndexWriter's addDocument, optimize, close, etc.).

It turns out there were two very different cases that could lead to
this:

   1: If you call reader.deleteDocument(int docNum) with a
      slightly-too-large (within up to 7 of the actual max docNum)
      docNum, then no exception would be thrown and your index is
      silently corrupted (only to hit that exception much later, during
      merge).

      This case only happens if you mis-use the deleteDocument API (ie
      give it invalid doc numbers).  Document numbers are only valid to
      the reader that you got them from.  If you follow that rule you
      would never have hit this case.

      Still, this case has now been fixed in the trunk (not released
      yet): we now catch this boundary case and raise an
      ArrayIndexOutOfBoundsException just like you get when the doc
      number is way too large.

   2: If you rebuild an index from scratch in an existing index
      directory (which is common I think), but, you do not first remove
      all index files in that directory.  In this case it's possible
      that an old leftover _XXX.del file will be incorrectly re-opened
      by Lucene, thus causing the exception (and possibly other
      exceptions).

      This is really a bug in Lucene, but it was already fixed in the
      trunk (not released yet) as side-effect of lockless commits.

      To avoid this it's best to make sure to remove all prior index
      files from your index directory, before creating a new index
      there.  The easiest way to do this is to instantiate IndexWriter
      with a String or Path directory argument, and create=true.  If
      instead you instantiate with a directory, make sure when you
      called FSDirectory.getDirectory(...) you passed create=true to
      that.

      Notably and quite surpisingly, passing create=false to
      FSDirectory.getDirectory(...)  and then create=true when you
      instantiate IndexWriter with that directory, will NOT remove the
      old index files and will result in hitting this bug.

      Given that this is fixed in the trunk and there is a simple
      workaround, we don't currently plan on fixing it in past releases
      of Lucene so I'm publicizing it here instead.

See the above link for all the gory details.

I would like to thank Jed Wesley-Smith for his persistent testing on
this issue that finally allowed us to get to the bottom of it!

Mike


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25418-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 11 12:01:56 2007
Return-Path: <java-user-return-25418-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 29578 invoked from network); 11 Jan 2007 12:01:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Jan 2007 12:01:55 -0000
Received: (qmail 41410 invoked by uid 500); 11 Jan 2007 12:01:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41383 invoked by uid 500); 11 Jan 2007 12:01:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41372 invoked by uid 99); 11 Jan 2007 12:01:54 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Jan 2007 04:01:54 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of markrmiller@gmail.com designates 66.249.82.235 as permitted sender)
Received: from [66.249.82.235] (HELO wx-out-0506.google.com) (66.249.82.235)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Jan 2007 04:01:44 -0800
Received: by wx-out-0506.google.com with SMTP id i29so417874wxd
        for <java-user@lucene.apache.org>; Thu, 11 Jan 2007 04:01:23 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=SHzknWoQIT7NxXfTbME0BMoIu7qXfghL5w5JOYvTrmFSBaHLWojK59eSf3QrOQMd9gn1dwtUwqKSjEhDsLpF4jNIcVcM9FWXdCwpmy15oIeVtQ52IYXniVu1T9ibO8iyINJJ3fDm6jNIvnBMntARVCry51BG+jKtTy2f8sPZp78=
Received: by 10.70.130.19 with SMTP id c19mr2829293wxd.1168516883207;
        Thu, 11 Jan 2007 04:01:23 -0800 (PST)
Received: from ?192.168.1.103? ( [216.66.114.42])
        by mx.google.com with ESMTP id 15sm1412624wrl.2007.01.11.04.01.21;
        Thu, 11 Jan 2007 04:01:22 -0800 (PST)
Message-ID: <45A626DA.3080008@gmail.com>
Date: Thu, 11 Jan 2007 07:00:26 -0500
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 1.5.0.9 (Windows/20061207)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Technology Preview of new Lucene QueryParser
References: <45A460E2.8090508@gmail.com> <Pine.LNX.4.58.0701101726150.29321@hal.rescomp.berkeley.edu> <45A5A468.1030604@gmail.com> <Pine.LNX.4.58.0701102008590.6750@hal.rescomp.berkeley.edu>
In-Reply-To: <Pine.LNX.4.58.0701102008590.6750@hal.rescomp.berkeley.edu>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org


> : It works like this: "A -B -C" would be expressed as "A ! B ! C"
> : By binary, I mean that each operator must connect two clauses...in that
> : case A is connected to B and C is connected to A ! B.
> : I avoid the single prohibit clause issue, -query, by not really allowing
>
> so do you convert A ! B ! C into a three clause boolean query, or a two
> clause BooleanQuery that contains another two clause BooleanQuery?
>   
It becomes a three clause boolean query...would there be a difference in 
scoring? I assumed not and it used to make a boolean that contained 
another boolean...these days it checks to see if its in a chain of the 
same operator and makes only one boolean.
> : I will add this...a field search is: field1,field2(foo) | field3(foobar)
>
> is that field1,field2(foo) construct a DisjunctionMaxQuery or just a
> BooleanQuery?
>   
Just a boolean right now. I will have to look at DisjuntionMaxQuery. 
Currently its just a boolean: +field1:foo +field2:foo
> : 1.0 release but was hoping for some syntax suggestions -- though I'm
> : betting people are happy with Lucene's syntax for this.
>
> yeah, "^" is pretty straight forward
>
> incidently: what was there a motivating factor behind the mixed use of
> both ~ and : to denote slop?
>   
':' is for slop on a phrase query. "the car is burning so get out":2 
will allow for each word to be within 2.
'~' is a binary operator...mark ~4 postman...or say: (mark ~5 (horse & 
car) ~6 tom brady | "hard knocks dude":3) ~6 garbage

Phrase slop could be specified with the '~' op too: the ~2 car ~2 is 
~burning ~2 so ~2 get ~2 out : but that is a pain in the butt.

Also, '~'  is needed for paragraph and sentence prox searches:  (old 
crooner) ~3p johnny

- Mark

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25419-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 11 15:49:14 2007
Return-Path: <java-user-return-25419-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7723 invoked from network); 11 Jan 2007 15:49:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Jan 2007 15:49:12 -0000
Received: (qmail 65387 invoked by uid 500); 11 Jan 2007 15:49:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65361 invoked by uid 500); 11 Jan 2007 15:49:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65347 invoked by uid 99); 11 Jan 2007 15:49:10 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Jan 2007 07:49:10 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of alicelista@gmail.com designates 66.249.82.228 as permitted sender)
Received: from [66.249.82.228] (HELO wx-out-0506.google.com) (66.249.82.228)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Jan 2007 07:48:59 -0800
Received: by wx-out-0506.google.com with SMTP id h30so518683wxd
        for <java-user@lucene.apache.org>; Thu, 11 Jan 2007 07:48:38 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:from:to:subject:date:message-id:mime-version:content-type:x-mailer:thread-index:x-mimeole;
        b=spAANCzFDWpERa3rAiAkRmfAqSThdd3yTsNVevRBiq2WNUOccFVwpq0mmSe5h5mo/V8n+jNulprQLMA9gC74BHe7FHa6Su5vb4mY03NHExdmTP6E/niAsBRopjAIdybuK7r8AUN6ucuzATua+1y6WdLyWnsTgZqIGcdbiaD5hno=
Received: by 10.90.49.1 with SMTP id w1mr1142824agw.1168530518789;
        Thu, 11 Jan 2007 07:48:38 -0800 (PST)
Received: from etiopia ( [200.152.100.56])
        by mx.google.com with ESMTP id 13sm1826133wrl.2007.01.11.07.48.35;
        Thu, 11 Jan 2007 07:48:38 -0800 (PST)
From: "Alice" <alicelista@gmail.com>
To: <java-user@lucene.apache.org>
Subject: Huge Index
Date: Thu, 11 Jan 2007 13:47:36 -0200
Message-ID: <003d01c73597$d3a30ac0$4900000a@m4u.com.br>
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_003E_01C73587.101A3AC0"
X-Mailer: Microsoft Office Outlook 11
Thread-Index: Acc1l8x5B74aDyK/S5uXY6R/UMY4TQ==
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3028
X-Virus-Checked: Checked by ClamAV on apache.org

------=_NextPart_000_003E_01C73587.101A3AC0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit

Hello!

 

I have to index 37million documents retrieved from the database.

 

I was trying to do by loading intervals of 10000 records but it is too slow.

 

Anybody could sugest a better way to get all the data indexed in a
reasonable time?

 

Thanks

 

 

 


------=_NextPart_000_003E_01C73587.101A3AC0--


From java-user-return-25420-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 11 16:37:18 2007
Return-Path: <java-user-return-25420-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31339 invoked from network); 11 Jan 2007 16:37:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Jan 2007 16:37:17 -0000
Received: (qmail 77900 invoked by uid 500); 11 Jan 2007 16:37:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77874 invoked by uid 500); 11 Jan 2007 16:37:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77851 invoked by uid 99); 11 Jan 2007 16:37:03 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Jan 2007 08:37:03 -0800
X-ASF-Spam-Status: No, hits=1.1 required=10.0
	tests=FROM_EXCESS_BASE64
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [216.9.248.50] (HELO smtp03.bis.na.blackberry.com) (216.9.248.50)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Jan 2007 08:36:53 -0800
Message-ID: <785812893-1168533390-cardhu_blackberry.rim.net-1584450235-@bwe029-cell00.bisx.prod.on.blackberry>
Reply-To: rsivak@istandfor.com
References: <003d01c73597$d3a30ac0$4900000a@m4u.com.br>
In-Reply-To: <003d01c73597$d3a30ac0$4900000a@m4u.com.br>
Sensitivity: Normal
Importance: Normal
To: java-user@lucene.apache.org
Subject: Re: Huge Index
From: "=?UTF-8?B?UnVzcw==?=" <rsivak@istandfor.com>
Date: Thu, 11 Jan 2007 16:32:58 +0000
Content-type: text/plain
MIME-Version: 1.0
X-Virus-Checked: Checked by ClamAV on apache.org

Can you use multiple threads/machines to index the data into separate indexes, and then combine them?

Russ
Sent wirelessly via BlackBerry from T-Mobile.  

-----Original Message-----
From: "Alice" <alicelista@gmail.com>
Date: Thu, 11 Jan 2007 13:47:36 
To:<java-user@lucene.apache.org>
Subject: Huge Index

Hello!

 

I have to index 37million documents retrieved from the database.

 

I was trying to do by loading intervals of 10000 records but it is too slow.

 

Anybody could sugest a better way to get all the data indexed in a
reasonable time?

 

Thanks

 

 

 




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25421-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 11 16:41:56 2007
Return-Path: <java-user-return-25421-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 34023 invoked from network); 11 Jan 2007 16:41:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Jan 2007 16:41:56 -0000
Received: (qmail 96623 invoked by uid 500); 11 Jan 2007 16:41:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96601 invoked by uid 500); 11 Jan 2007 16:41:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96590 invoked by uid 99); 11 Jan 2007 16:41:54 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Jan 2007 08:41:54 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of alicelista@gmail.com designates 66.249.82.229 as permitted sender)
Received: from [66.249.82.229] (HELO wx-out-0506.google.com) (66.249.82.229)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Jan 2007 08:41:44 -0800
Received: by wx-out-0506.google.com with SMTP id i29so496085wxd
        for <java-user@lucene.apache.org>; Thu, 11 Jan 2007 08:41:23 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:from:to:references:subject:date:message-id:mime-version:content-type:content-transfer-encoding:x-mailer:thread-index:x-mimeole:in-reply-to;
        b=TngVl6fW7086QzJGYN+4otaLeBhjPQ3floVzdbyCP2Nltjuyd6mv+6YarHpEKmsAkUx8tN8rfzRoI2gRbvxSjy+5b1xwjp5JXO0Hb9Wd9ky9o1rViNnit44Mcy/75O7f4tTqfBZkGh+JGQSf8Vch5Y8I+WBZSXVW8OA9GmRZ4Zo=
Received: by 10.90.65.11 with SMTP id n11mr1202124aga.1168533680636;
        Thu, 11 Jan 2007 08:41:20 -0800 (PST)
Received: from etiopia ( [200.152.100.56])
        by mx.google.com with ESMTP id 38sm1942597wrl.2007.01.11.08.41.16;
        Thu, 11 Jan 2007 08:41:19 -0800 (PST)
From: "Alice" <alicelista@gmail.com>
To: <java-user@lucene.apache.org>,
	<rsivak@istandfor.com>
References: <003d01c73597$d3a30ac0$4900000a@m4u.com.br> <785812893-1168533390-cardhu_blackberry.rim.net-1584450235-@bwe029-cell00.bisx.prod.on.blackberry>
Subject: RE: Huge Index
Date: Thu, 11 Jan 2007 14:40:07 -0200
Message-ID: <004201c7359f$2b532550$4900000a@m4u.com.br>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
Thread-Index: Acc1nsILQ6GUFLg4QmS9k+O9o6q3dAAABN6Q
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3028
In-Reply-To: <785812893-1168533390-cardhu_blackberry.rim.net-1584450235-@bwe029-cell00.bisx.prod.on.blackberry>
X-Virus-Checked: Checked by ClamAV on apache.org

Unfortunately I can't use multiple machines.

And I cannot start lots of threads because the server crashes.

-----Original Message-----
From: Russ [mailto:rsivak@istandfor.com] 
Sent: quinta-feira, 11 de janeiro de 2007 14:33
To: java-user@lucene.apache.org
Subject: Re: Huge Index

Can you use multiple threads/machines to index the data into separate
indexes, and then combine them?

Russ
Sent wirelessly via BlackBerry from T-Mobile.  

-----Original Message-----
From: "Alice" <alicelista@gmail.com>
Date: Thu, 11 Jan 2007 13:47:36 
To:<java-user@lucene.apache.org>
Subject: Huge Index

Hello!

 

I have to index 37million documents retrieved from the database.

 

I was trying to do by loading intervals of 10000 records but it is too slow.

 

Anybody could sugest a better way to get all the data indexed in a
reasonable time?

 

Thanks

 

 

 




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25422-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 11 16:54:34 2007
Return-Path: <java-user-return-25422-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 39112 invoked from network); 11 Jan 2007 16:54:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Jan 2007 16:54:33 -0000
Received: (qmail 31162 invoked by uid 500); 11 Jan 2007 16:54:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31138 invoked by uid 500); 11 Jan 2007 16:54:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31127 invoked by uid 99); 11 Jan 2007 16:54:32 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Jan 2007 08:54:32 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of muvavarirwa@gmail.com designates 66.249.92.169 as permitted sender)
Received: from [66.249.92.169] (HELO ug-out-1314.google.com) (66.249.92.169)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Jan 2007 08:54:23 -0800
Received: by ug-out-1314.google.com with SMTP id k40so500737ugc
        for <java-user@lucene.apache.org>; Thu, 11 Jan 2007 08:54:01 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:cc:in-reply-to:mime-version:content-type:references;
        b=q1hmLbGQuqWUvgfq1lrdW44kdKBSKmGWQW21PEkZZuwHsLlTZwxLFm7doQd+D4JyJcRj2jxbzt4UMPb5FxjFwAS85LCvqHBNHx3uWd36rykV8R/t47IuUJE1nXgW+Akr8VuMPTG4I5WcLaOC00FhfpY7zCApAerK8iDtDBKkQ34=
Received: by 10.78.160.2 with SMTP id i2mr573225hue.1168534441696;
        Thu, 11 Jan 2007 08:54:01 -0800 (PST)
Received: by 10.78.187.9 with HTTP; Thu, 11 Jan 2007 08:54:01 -0800 (PST)
Message-ID: <bdf0d4d80701110854u3fc39969r91d4058c74ec668b@mail.gmail.com>
Date: Thu, 11 Jan 2007 11:54:01 -0500
From: "Rangarirayi Muvavarirwa" <muvavarirwa@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Huge Index
Cc: rsivak@istandfor.com
In-Reply-To: <004201c7359f$2b532550$4900000a@m4u.com.br>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_32614_24685785.1168534441622"
References: <003d01c73597$d3a30ac0$4900000a@m4u.com.br>
	 <785812893-1168533390-cardhu_blackberry.rim.net-1584450235-@bwe029-cell00.bisx.prod.on.blackberry>
	 <004201c7359f$2b532550$4900000a@m4u.com.br>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_32614_24685785.1168534441622
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

One option: https://cool-apps-distributedindex.dev.java.net/

caveat: you would have to setup an account (you get 10CPUhr & 10GB account
upon signup)

On 1/11/07, Alice <alicelista@gmail.com> wrote:
>
> Unfortunately I can't use multiple machines.
>
> And I cannot start lots of threads because the server crashes.
>
> -----Original Message-----
> From: Russ [mailto:rsivak@istandfor.com]
> Sent: quinta-feira, 11 de janeiro de 2007 14:33
> To: java-user@lucene.apache.org
> Subject: Re: Huge Index
>
> Can you use multiple threads/machines to index the data into separate
> indexes, and then combine them?
>
> Russ
> Sent wirelessly via BlackBerry from T-Mobile.
>
> -----Original Message-----
> From: "Alice" <alicelista@gmail.com>
> Date: Thu, 11 Jan 2007 13:47:36
> To:<java-user@lucene.apache.org>
> Subject: Huge Index
>
> Hello!
>
>
>
> I have to index 37million documents retrieved from the database.
>
>
>
> I was trying to do by loading intervals of 10000 records but it is too
> slow.
>
>
>
> Anybody could sugest a better way to get all the data indexed in a
> reasonable time?
>
>
>
> Thanks
>
>
>
>
>
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_32614_24685785.1168534441622--

From java-user-return-25423-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 11 17:03:38 2007
Return-Path: <java-user-return-25423-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44613 invoked from network); 11 Jan 2007 17:03:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Jan 2007 17:03:37 -0000
Received: (qmail 60050 invoked by uid 500); 11 Jan 2007 17:03:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60006 invoked by uid 500); 11 Jan 2007 17:03:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59973 invoked by uid 99); 11 Jan 2007 17:03:32 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Jan 2007 09:03:32 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of jrrhodes@gmail.com designates 209.85.132.249 as permitted sender)
Received: from [209.85.132.249] (HELO an-out-0708.google.com) (209.85.132.249)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Jan 2007 09:03:23 -0800
Received: by an-out-0708.google.com with SMTP id c3so299726ana
        for <java-user@lucene.apache.org>; Thu, 11 Jan 2007 09:03:02 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=jxmAxAg5JdGIIUDhIJFIfWVBmyy15DIBQio6EPEpILz2R/JIX/Z2Ub/24N5E9Pjv/JL4+l4bYMp2kUDyO2+N5q64/lbYLnaFkfBogiz45++SF4kAC46+wBRCAYm1j/AsjJ4+8dBKyrxwM67veOCPOByDuo1FEsIZP6fN7bTgFDs=
Received: by 10.78.149.15 with SMTP id w15mr576994hud.1168534982145;
        Thu, 11 Jan 2007 09:03:02 -0800 (PST)
Received: by 10.78.21.5 with HTTP; Thu, 11 Jan 2007 09:03:02 -0800 (PST)
Message-ID: <386a4720701110903p7bc74ce1xca9d9bc831f86c41@mail.gmail.com>
Date: Thu, 11 Jan 2007 12:03:02 -0500
From: "James Rhodes" <jrrhodes@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Huge Index
In-Reply-To: <bdf0d4d80701110854u3fc39969r91d4058c74ec668b@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_21216_22100871.1168534982107"
References: <003d01c73597$d3a30ac0$4900000a@m4u.com.br>
	 <785812893-1168533390-cardhu_blackberry.rim.net-1584450235-@bwe029-cell00.bisx.prod.on.blackberry>
	 <004201c7359f$2b532550$4900000a@m4u.com.br>
	 <bdf0d4d80701110854u3fc39969r91d4058c74ec668b@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_21216_22100871.1168534982107
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I used the following settings for speeding up indexing on a similarly sized
db table
If you have enough ram it might help you.

IndexWriter writer = *new* IndexWriter(fdDir,*new* StandardAnalyzer(), *true
*);

writer.setMergeFactor(100);

writer.setMaxMergeDocs(999999);

writer.setMaxBufferedDocs(1500);




On 1/11/07, Rangarirayi Muvavarirwa <muvavarirwa@gmail.com> wrote:
>
> One option: https://cool-apps-distributedindex.dev.java.net/
>
> caveat: you would have to setup an account (you get 10CPUhr & 10GB account
> upon signup)
>
> On 1/11/07, Alice <alicelista@gmail.com> wrote:
> >
> > Unfortunately I can't use multiple machines.
> >
> > And I cannot start lots of threads because the server crashes.
> >
> > -----Original Message-----
> > From: Russ [mailto:rsivak@istandfor.com]
> > Sent: quinta-feira, 11 de janeiro de 2007 14:33
> > To: java-user@lucene.apache.org
> > Subject: Re: Huge Index
> >
> > Can you use multiple threads/machines to index the data into separate
> > indexes, and then combine them?
> >
> > Russ
> > Sent wirelessly via BlackBerry from T-Mobile.
> >
> > -----Original Message-----
> > From: "Alice" <alicelista@gmail.com>
> > Date: Thu, 11 Jan 2007 13:47:36
> > To:<java-user@lucene.apache.org>
> > Subject: Huge Index
> >
> > Hello!
> >
> >
> >
> > I have to index 37million documents retrieved from the database.
> >
> >
> >
> > I was trying to do by loading intervals of 10000 records but it is too
> > slow.
> >
> >
> >
> > Anybody could sugest a better way to get all the data indexed in a
> > reasonable time?
> >
> >
> >
> > Thanks
> >
> >
> >
> >
> >
> >
> >
> >
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
>

------=_Part_21216_22100871.1168534982107--

From java-user-return-25424-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 11 17:07:16 2007
Return-Path: <java-user-return-25424-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 46288 invoked from network); 11 Jan 2007 17:07:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Jan 2007 17:07:15 -0000
Received: (qmail 71411 invoked by uid 500); 11 Jan 2007 17:07:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71377 invoked by uid 500); 11 Jan 2007 17:07:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71363 invoked by uid 99); 11 Jan 2007 17:07:15 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Jan 2007 09:07:15 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [208.97.132.81] (HELO spunkymail-a12.dreamhost.com) (208.97.132.81)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Jan 2007 09:07:05 -0800
Received: from [192.168.0.2] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a12.dreamhost.com (Postfix) with ESMTP id E3B357FB3
	for <java-user@lucene.apache.org>; Thu, 11 Jan 2007 09:06:41 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <003d01c73597$d3a30ac0$4900000a@m4u.com.br>
References: <003d01c73597$d3a30ac0$4900000a@m4u.com.br>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <F165684B-3FC8-40BB-BD8D-174A68519EDF@apache.org>
Content-Transfer-Encoding: 7bit
From: Grant Ingersoll <gsingers@apache.org>
Subject: Re: Huge Index
Date: Thu, 11 Jan 2007 12:06:38 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Alice,

Can you define slow (hours, days, months and on what hardware)?  Have  
you done any profiling, etc. to see where the bottlenecks are?  What  
size documents are you talking about here?  What are your merge  
factors, etc.?

Thanks,
Grant

On Jan 11, 2007, at 10:47 AM, Alice wrote:

> Hello!
>
>
>
> I have to index 37million documents retrieved from the database.
>
>
>
> I was trying to do by loading intervals of 10000 records but it is  
> too slow.
>
>
>
> Anybody could sugest a better way to get all the data indexed in a
> reasonable time?
>
>
>
> Thanks
>
>
>
>
>
>
>

--------------------------
Grant Ingersoll
Center for Natural Language Processing
http://www.cnlp.org

Read the Lucene Java FAQ at http://wiki.apache.org/jakarta-lucene/ 
LuceneFAQ



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25425-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 11 17:12:48 2007
Return-Path: <java-user-return-25425-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 49921 invoked from network); 11 Jan 2007 17:12:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Jan 2007 17:12:47 -0000
Received: (qmail 94260 invoked by uid 500); 11 Jan 2007 17:12:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94213 invoked by uid 500); 11 Jan 2007 17:12:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94180 invoked by uid 99); 11 Jan 2007 17:12:46 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Jan 2007 09:12:46 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [72.3.240.46] (HELO s68659.istandfor.com) (72.3.240.46)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Jan 2007 09:12:35 -0800
Received: from [192.168.1.36] (pool-162-84-229-59.ny5030.east.verizon.net [162.84.229.59])
	(authenticated bits=0)
	by s68659.istandfor.com (8.12.11.20060308/8.12.11) with ESMTP id l0BHCDfq000757
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <java-user@lucene.apache.org>; Thu, 11 Jan 2007 11:12:14 -0600
Message-ID: <45A66FED.7010301@istandfor.com>
Date: Thu, 11 Jan 2007 12:12:13 -0500
From: Ruslan Sivak <rsivak@istandfor.com>
User-Agent: Thunderbird 1.5.0.9 (Windows/20061207)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Huge Index
References: <003d01c73597$d3a30ac0$4900000a@m4u.com.br> <785812893-1168533390-cardhu_blackberry.rim.net-1584450235-@bwe029-cell00.bisx.prod.on.blackberry> <004201c7359f$2b532550$4900000a@m4u.com.br>
In-Reply-To: <004201c7359f$2b532550$4900000a@m4u.com.br>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Alice,

If you have a computer that crashes once you put a lot of load on it, 
I'd say you have bigger problems then the speed of the indexing.  A 
computer should not crash, no matter how much load you put on it.  If 
you have such a huge database, I can't believe that you don't have 
access to other computers.  You can even use workstations and run the 
indexing at night, and then merge it to a central repository. 

Lucene does allow for index merging, right?

Russ



Alice wrote:
> Unfortunately I can't use multiple machines.
>
> And I cannot start lots of threads because the server crashes.
>
> -----Original Message-----
> From: Russ [mailto:rsivak@istandfor.com] 
> Sent: quinta-feira, 11 de janeiro de 2007 14:33
> To: java-user@lucene.apache.org
> Subject: Re: Huge Index
>
> Can you use multiple threads/machines to index the data into separate
> indexes, and then combine them?
>
> Russ
> Sent wirelessly via BlackBerry from T-Mobile.  
>
> -----Original Message-----
> From: "Alice" <alicelista@gmail.com>
> Date: Thu, 11 Jan 2007 13:47:36 
> To:<java-user@lucene.apache.org>
> Subject: Huge Index
>
> Hello!
>
>  
>
> I have to index 37million documents retrieved from the database.
>
>  
>
> I was trying to do by loading intervals of 10000 records but it is too slow.
>
>  
>
> Anybody could sugest a better way to get all the data indexed in a
> reasonable time?
>
>  
>
> Thanks
>
>  
>
>  
>
>  
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>   


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25426-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 11 17:18:50 2007
Return-Path: <java-user-return-25426-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51300 invoked from network); 11 Jan 2007 17:18:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Jan 2007 17:18:49 -0000
Received: (qmail 8736 invoked by uid 500); 11 Jan 2007 17:18:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8708 invoked by uid 500); 11 Jan 2007 17:18:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8697 invoked by uid 99); 11 Jan 2007 17:18:48 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Jan 2007 09:18:48 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of alicelista@gmail.com designates 66.249.82.234 as permitted sender)
Received: from [66.249.82.234] (HELO wx-out-0506.google.com) (66.249.82.234)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Jan 2007 09:18:35 -0800
Received: by wx-out-0506.google.com with SMTP id i29so507081wxd
        for <java-user@lucene.apache.org>; Thu, 11 Jan 2007 09:18:15 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:from:to:references:subject:date:message-id:mime-version:content-type:content-transfer-encoding:x-mailer:thread-index:x-mimeole:in-reply-to;
        b=Us3iNT+JsVl7RmO9+GB4q3kDRF+oECH+R8jKmAefChTXe08ZsB50qbJD7bEynlUh7dw15ZXQRidZ8faApV3e0A6wl82HcyJuBm9vFkEDzBp1VRa2J0nI/PEyojDxU3H8EMTqhM1hUqUPKFklg49togQxu3zMk2oTs49ib6ZMqCY=
Received: by 10.70.87.11 with SMTP id k11mr3303339wxb.1168535895386;
        Thu, 11 Jan 2007 09:18:15 -0800 (PST)
Received: from etiopia ( [200.152.100.56])
        by mx.google.com with ESMTP id 15sm2020689wrl.2007.01.11.09.18.11;
        Thu, 11 Jan 2007 09:18:14 -0800 (PST)
From: "Alice" <alicelista@gmail.com>
To: <java-user@lucene.apache.org>
References: <003d01c73597$d3a30ac0$4900000a@m4u.com.br> <F165684B-3FC8-40BB-BD8D-174A68519EDF@apache.org>
Subject: RE: Huge Index
Date: Thu, 11 Jan 2007 15:16:51 -0200
Message-ID: <005501c735a4$504f4730$4900000a@m4u.com.br>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
Thread-Index: Acc1ovCLX2S4M5/3TD2jYfiR1vMQnQAAOciQ
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3028
In-Reply-To: <F165684B-3FC8-40BB-BD8D-174A68519EDF@apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

I never got to index all the data but it is too slow. 
I got 3 million in 2,5 hours.

As suggested in Lucene in Action, I use ramDir and after I write 5000
documents I merge them to the fsDir.

The merge factor is now 100 I tried other variations but didn't make much
difference.

-----Original Message-----
From: Grant Ingersoll [mailto:gsingers@apache.org] 
Sent: quinta-feira, 11 de janeiro de 2007 15:07
To: java-user@lucene.apache.org
Subject: Re: Huge Index

Hi Alice,

Can you define slow (hours, days, months and on what hardware)?  Have  
you done any profiling, etc. to see where the bottlenecks are?  What  
size documents are you talking about here?  What are your merge  
factors, etc.?

Thanks,
Grant

On Jan 11, 2007, at 10:47 AM, Alice wrote:

> Hello!
>
>
>
> I have to index 37million documents retrieved from the database.
>
>
>
> I was trying to do by loading intervals of 10000 records but it is  
> too slow.
>
>
>
> Anybody could sugest a better way to get all the data indexed in a
> reasonable time?
>
>
>
> Thanks
>
>
>
>
>
>
>

--------------------------
Grant Ingersoll
Center for Natural Language Processing
http://www.cnlp.org

Read the Lucene Java FAQ at http://wiki.apache.org/jakarta-lucene/ 
LuceneFAQ



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25427-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 11 17:21:24 2007
Return-Path: <java-user-return-25427-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 52952 invoked from network); 11 Jan 2007 17:21:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Jan 2007 17:21:23 -0000
Received: (qmail 16942 invoked by uid 500); 11 Jan 2007 17:21:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16903 invoked by uid 500); 11 Jan 2007 17:21:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16892 invoked by uid 99); 11 Jan 2007 17:21:22 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Jan 2007 09:21:22 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of alicelista@gmail.com designates 66.249.82.230 as permitted sender)
Received: from [66.249.82.230] (HELO wx-out-0506.google.com) (66.249.82.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Jan 2007 09:21:12 -0800
Received: by wx-out-0506.google.com with SMTP id i29so507934wxd
        for <java-user@lucene.apache.org>; Thu, 11 Jan 2007 09:20:51 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:from:to:references:subject:date:message-id:mime-version:content-type:content-transfer-encoding:x-mailer:thread-index:x-mimeole:in-reply-to;
        b=EuKy4LSfndSs957ZRR7rVqVPxcMiaLh916PM+h6mc4AxLntfzo85g64DR6SGeOlocc4WNx0k4rMVWr1kVT4oke+DkVTqn/lK+G67OZd8OaVh/iLfdUtwcYAwG8FF6nT92Sr4yZIrjrE+kDZ7VqJrOasFeh+yy5bz4EeGL0TjCSM=
Received: by 10.90.66.9 with SMTP id o9mr1219339aga.1168536051861;
        Thu, 11 Jan 2007 09:20:51 -0800 (PST)
Received: from etiopia ( [200.152.100.56])
        by mx.google.com with ESMTP id 26sm1992280wrl.2007.01.11.09.20.45;
        Thu, 11 Jan 2007 09:20:51 -0800 (PST)
From: "Alice" <alicelista@gmail.com>
To: <java-user@lucene.apache.org>
References: <003d01c73597$d3a30ac0$4900000a@m4u.com.br> <785812893-1168533390-cardhu_blackberry.rim.net-1584450235-@bwe029-cell00.bisx.prod.on.blackberry> <004201c7359f$2b532550$4900000a@m4u.com.br> <45A66FED.7010301@istandfor.com>
Subject: RE: Huge Index
Date: Thu, 11 Jan 2007 15:19:29 -0200
Message-ID: <005601c735a4$ad595510$4900000a@m4u.com.br>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
Thread-Index: Acc1o7ZuKtyl9u6oSAKzsTT8xR5m5QAAJqRQ
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3028
In-Reply-To: <45A66FED.7010301@istandfor.com>
X-Virus-Checked: Checked by ClamAV on apache.org

You're right. The computer doesn't crash but slows to death.

I'm developing in my workstation and the application will run in a server, a
better machine but not that great.

The indexing will sure run at night no matter the performance but it is not
desired to take many hours.

-----Original Message-----
From: Ruslan Sivak [mailto:rsivak@istandfor.com] 
Sent: quinta-feira, 11 de janeiro de 2007 15:12
To: java-user@lucene.apache.org
Subject: Re: Huge Index

Alice,

If you have a computer that crashes once you put a lot of load on it, 
I'd say you have bigger problems then the speed of the indexing.  A 
computer should not crash, no matter how much load you put on it.  If 
you have such a huge database, I can't believe that you don't have 
access to other computers.  You can even use workstations and run the 
indexing at night, and then merge it to a central repository. 

Lucene does allow for index merging, right?

Russ



Alice wrote:
> Unfortunately I can't use multiple machines.
>
> And I cannot start lots of threads because the server crashes.
>
> -----Original Message-----
> From: Russ [mailto:rsivak@istandfor.com] 
> Sent: quinta-feira, 11 de janeiro de 2007 14:33
> To: java-user@lucene.apache.org
> Subject: Re: Huge Index
>
> Can you use multiple threads/machines to index the data into separate
> indexes, and then combine them?
>
> Russ
> Sent wirelessly via BlackBerry from T-Mobile.  
>
> -----Original Message-----
> From: "Alice" <alicelista@gmail.com>
> Date: Thu, 11 Jan 2007 13:47:36 
> To:<java-user@lucene.apache.org>
> Subject: Huge Index
>
> Hello!
>
>  
>
> I have to index 37million documents retrieved from the database.
>
>  
>
> I was trying to do by loading intervals of 10000 records but it is too
slow.
>
>  
>
> Anybody could sugest a better way to get all the data indexed in a
> reasonable time?
>
>  
>
> Thanks
>
>  
>
>  
>
>  
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>   


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25428-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 11 17:35:32 2007
Return-Path: <java-user-return-25428-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 57377 invoked from network); 11 Jan 2007 17:35:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Jan 2007 17:35:32 -0000
Received: (qmail 42603 invoked by uid 500); 11 Jan 2007 17:35:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42573 invoked by uid 500); 11 Jan 2007 17:35:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42562 invoked by uid 99); 11 Jan 2007 17:35:31 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Jan 2007 09:35:31 -0800
X-ASF-Spam-Status: No, hits=2.8 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [206.190.38.62] (HELO web50308.mail.yahoo.com) (206.190.38.62)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 11 Jan 2007 09:35:21 -0800
Received: (qmail 89922 invoked by uid 60001); 11 Jan 2007 17:35:00 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=kHJD+JWt79XzlTfW0Ud561hNeaOaDgbgdZiEAZHcZSkyoEG5vCpM18rSgyiSS12H6P10Peqz7t2C282ZHWXD2EZgrzWksxAl21u+Sdc5F9JKKiRg01BCwH6KjdlINM+5YY0GFyvRRwRJEhP0Xk5pW7nv9+u/NN52qfC3ByO5GtA=;
X-YMail-OSG: qT1HRPoVM1msiMS1.HhO6xU8jckssvUQ1VmGScigi36suzvGny3.8TbPvSgbAeJ5sGSL2SXf68Vd9GxEGIJ1UmSuEq3RH.lt8.jDDaFRTB2No0fbORkgPgMLqdh8SXEfxb..HQsMlkc5cNkRvcATjYowSTHWYLl54xdE7EkE5Ga4Gx1gO_nQqHUrir1H
Received: from [218.20.134.52] by web50308.mail.yahoo.com via HTTP; Thu, 11 Jan 2007 09:34:59 PST
X-Mailer: YahooMailRC/368.3 YahooMailWebService/0.6.132.6
Date: Thu, 11 Jan 2007 09:34:59 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Huge Index
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable
Message-ID: <935236.89359.qm@web50308.mail.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Increase maxBufferedDocs as much as you can (the more RAM the better).=0AIn=
crease max heap for the JVM (-Xmx).=0AIf you are on UNIX, increase the max =
open file descriptors limits and then increase mergeFactor somewhat, say 10=
0.=0AUser -server mode for the JVM.=0ADon't worry about RAMDir, those guys =
who wrote Lucene in Action were smoking something when they wrote that sect=
ion. ;)=0ADon't tokenize fields if you don't have to.=0ADon't store term ve=
ctors if you don't need them.=0A=0AOtis=0A=0A----- Original Message ----=0A=
From: Alice <alicelista@gmail.com>=0ATo: java-user@lucene.apache.org=0ASent=
: Thursday, January 11, 2007 12:16:51 PM=0ASubject: RE: Huge Index=0A=0AI n=
ever got to index all the data but it is too slow. =0AI got 3 million in 2,=
5 hours.=0A=0AAs suggested in Lucene in Action, I use ramDir and after I wr=
ite 5000=0Adocuments I merge them to the fsDir.=0A=0AThe merge factor is no=
w 100 I tried other variations but didn't make much=0Adifference.=0A=0A----=
-Original Message-----=0AFrom: Grant Ingersoll [mailto:gsingers@apache.org]=
 =0ASent: quinta-feira, 11 de janeiro de 2007 15:07=0ATo: java-user@lucene.=
apache.org=0ASubject: Re: Huge Index=0A=0AHi Alice,=0A=0ACan you define slo=
w (hours, days, months and on what hardware)?  Have  =0Ayou done any profil=
ing, etc. to see where the bottlenecks are?  What  =0Asize documents are yo=
u talking about here?  What are your merge  =0Afactors, etc.?=0A=0AThanks,=
=0AGrant=0A=0AOn Jan 11, 2007, at 10:47 AM, Alice wrote:=0A=0A> Hello!=0A>=
=0A>=0A>=0A> I have to index 37million documents retrieved from the databas=
e.=0A>=0A>=0A>=0A> I was trying to do by loading intervals of 10000 records=
 but it is  =0A> too slow.=0A>=0A>=0A>=0A> Anybody could sugest a better wa=
y to get all the data indexed in a=0A> reasonable time?=0A>=0A>=0A>=0A> Tha=
nks=0A>=0A>=0A>=0A>=0A>=0A>=0A>=0A=0A--------------------------=0AGrant Ing=
ersoll=0ACenter for Natural Language Processing=0Ahttp://www.cnlp.org=0A=0A=
Read the Lucene Java FAQ at http://wiki.apache.org/jakarta-lucene/ =0ALucen=
eFAQ=0A=0A=0A=0A-----------------------------------------------------------=
----------=0ATo unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.or=
g=0AFor additional commands, e-mail: java-user-help@lucene.apache.org=0A=0A=
=0A---------------------------------------------------------------------=0A=
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org=0AFor addit=
ional commands, e-mail: java-user-help@lucene.apache.org=0A=0A=0A=0A

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25429-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 11 17:37:35 2007
Return-Path: <java-user-return-25429-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58081 invoked from network); 11 Jan 2007 17:37:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Jan 2007 17:37:34 -0000
Received: (qmail 46806 invoked by uid 500); 11 Jan 2007 17:37:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46777 invoked by uid 500); 11 Jan 2007 17:37:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46743 invoked by uid 99); 11 Jan 2007 17:37:27 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Jan 2007 09:37:27 -0800
X-ASF-Spam-Status: No, hits=1.5 required=10.0
	tests=SPF_SOFTFAIL
X-Spam-Check-By: apache.org
Received-SPF: softfail (herse.apache.org: transitioning domain of bim2006@basistech.com does not designate 199.88.205.99 as permitted sender)
Received: from [199.88.205.99] (HELO mail.basistech.com) (199.88.205.99)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Jan 2007 09:37:18 -0800
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Huge Index
Date: Thu, 11 Jan 2007 12:36:52 -0500
Message-ID: <E95FD77F0171D14DA1EEE0A785E92B43019AED20@mail3.basistech.net>
In-Reply-To: <005501c735a4$504f4730$4900000a@m4u.com.br>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Huge Index
Thread-Index: Acc1ovCLX2S4M5/3TD2jYfiR1vMQnQAAOciQAADMTPA=
From: "Benson Margulies" <bim2006@basistech.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Given the ram directory inside of the IndexWriter in 2.0, is there still
any reason to stage this manually?

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25430-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 11 18:07:37 2007
Return-Path: <java-user-return-25430-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 74321 invoked from network); 11 Jan 2007 18:07:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Jan 2007 18:07:37 -0000
Received: (qmail 99539 invoked by uid 500); 11 Jan 2007 18:07:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 99461 invoked by uid 500); 11 Jan 2007 18:07:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 99443 invoked by uid 99); 11 Jan 2007 18:07:36 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Jan 2007 10:07:36 -0800
X-ASF-Spam-Status: No, hits=3.1 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST,DNS_FROM_RFC_WHOIS,MAILTO_TO_SPAM_ADDR
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [206.190.39.228] (HELO web50315.mail.yahoo.com) (206.190.39.228)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 11 Jan 2007 10:07:25 -0800
Received: (qmail 15814 invoked by uid 60001); 11 Jan 2007 18:07:04 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=sI0MMtkZx0tiTNSN9Z87RE+64034cEB22Cz/4is/vbB/8BDvyZa1Pvp7cPOM0WoLinBa67DdSSDJjibk3O8lEP40WKWMxcw2bGOROvAVFkod3F8JMCf1XvR0sC34g9ayjPpl0KXYotTei1fsmLJa6eaofHTt1BZNJzIMHHD7UBw=;
X-YMail-OSG: Nk6M6doVM1ngLqwNrDjT3H4Ugq5Be_JA71.vggK8wKXD0M9aH7BRcgxXGzgnbSf9mJoSgJCmdsXT_lVzob6ZBytdTsSOJQBkwpiF6oZ8HJAyAqaVAQYkQ2ypzA3JmRkSEc8ae71OrvnSU8k-
Received: from [218.20.134.52] by web50315.mail.yahoo.com via HTTP; Thu, 11 Jan 2007 10:07:04 PST
X-Mailer: YahooMailRC/368.3 YahooMailWebService/0.6.132.6
Date: Thu, 11 Jan 2007 10:07:04 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Huge Index
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable
Message-ID: <271520.14669.qm@web50315.mail.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Nah, see that "Don't worry about RAMDir, those guys who wrote Lucene in Act=
ion were smoking something when they wrote that section. ;)" line from my e=
arlier email.=0A=0AAha, another Basis Tech person!  Good, good :)=0A=0AOtis=
=0A=0A----- Original Message ----=0AFrom: Benson Margulies <bim2006@basiste=
ch.com>=0ATo: java-user@lucene.apache.org=0ASent: Thursday, January 11, 200=
7 12:36:52 PM=0ASubject: RE: Huge Index=0A=0AGiven the ram directory inside=
 of the IndexWriter in 2.0, is there still=0Aany reason to stage this manua=
lly?=0A=0A-----------------------------------------------------------------=
----=0ATo unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org=0AFo=
r additional commands, e-mail: java-user-help@lucene.apache.org=0A=0A=0A=0A

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25431-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 11 19:18:54 2007
Return-Path: <java-user-return-25431-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 2434 invoked from network); 11 Jan 2007 19:18:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Jan 2007 19:18:54 -0000
Received: (qmail 1437 invoked by uid 500); 11 Jan 2007 19:18:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 1405 invoked by uid 500); 11 Jan 2007 19:18:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 1385 invoked by uid 99); 11 Jan 2007 19:18:53 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Jan 2007 11:18:53 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [128.218.33.11] (HELO gossamer.ckm.ucsf.edu) (128.218.33.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Jan 2007 11:18:42 -0800
Received: from CKMPC08 (tikal.library.ucsf.edu [128.218.15.151])
	by gossamer.ckm.ucsf.edu (8.13.8/8.13.8) with ESMTP id l0BJIJbc009728
	for <java-user@lucene.apache.org>; Thu, 11 Jan 2007 11:18:22 -0800 (PST)
From: "Renaud Waldura" <renaud.waldura@library.ucsf.edu>
To: <java-user@lucene.apache.org>
Subject: RE: Text storing design and performance question
Date: Thu, 11 Jan 2007 11:18:14 -0800
Message-ID: <003a01c735b5$40b67300$970fda80@libraria.ucsf.edu>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
In-Reply-To: <45A55F54.609@mindspring.com>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3028
Thread-Index: Acc1LjNfwaCBmt2bRHKh7L2YkHlQzgAhpD4g
X-Virus-Checked: Checked by ClamAV on apache.org

Jason:

Interesting idea, thanks. But how do you know whether the highlighting is
any good? I thought highlighter implemented some kind of strategy to find
the best fragment. 

Say my query is "apple banana orange". The word "apple" is near the start of
the document, "banana" and "orange" at the end. Wouldn't your optimization
stop at the word "apple" and just return this word highlighted? Or do you
know of a way to quantify the match?

 

-----Original Message-----
From: Jason Pump [mailto:jpump@mindspring.com] 
Sent: Wednesday, January 10, 2007 1:49 PM
To: java-user@lucene.apache.org
Subject: Re: Text storing design and performance question

Renaud, one optimization you can do on this is to try the first 10kb, see if
it finds text worth highlighting, if not, with a slight overlap try the next
9.9kb - 19.9kb or just 9.9kb -> end if you're feeling lazy. 
This assumes that most good matches are at the start of the document, and
that the files on disk are not compressed.

moraleslos wrote:
> Maybe keeping the data in the DB would make it quicker?  Seems like 
> the I/O performance would cause most of the performance issues you're
seeing.
>
> -los
>
>
> Renaud Waldura-5 wrote:
>   
>> We used to store a big text field for highlighting purposes too, and 
>> it proved a big pain. The index was gigantic, it took forever to 
>> build, and the search performance would sometimes suffer from it 
>> (just a hunch).
>>
>> Now we keep this big text field on disk (in a file), and feed it to 
>> the highlighter. Unfortunately the highlighter has to read the file, 
>> parse it, etc... It's slooow, sometimes over a second on a large
document.
>>
>> I vaguely remember reading somewhere newer versions of the 
>> highlighter are able to leverage term vectors to avoid re-parsing the 
>> field. (I could be
>> mistaken.) Maybe just storing term vectors would keep the index lean 
>> and allow for fast highlighting?
>>
>> --Renaud
>>
>>  
>>
>> -----Original Message-----
>> From: Mark Miller [mailto:markrmiller@gmail.com]
>> Sent: Wednesday, January 10, 2007 9:54 AM
>> To: java-user@lucene.apache.org
>> Subject: Re: Text storing design and performance question
>>
>> Being stateless should not be much of an issue. As Erick mentioned, 
>> the highlighter just expects you to pass it the query again and the 
>> text to be highlighted. So when you show the pagination you just need 
>> to keep around what query generated the current page...then shove 
>> each piece of relevant text from the database through the highlighter 
>> (with the query) before displaying it.
>>
>> - Mark
>>
>> On 1/10/07, moraleslos <moraleslos@hotmail.com> wrote:
>>     
>>> Hi Mark,
>>>
>>> Looks like I've got to implement some sort of pagination for my clients.
>>> Problem is everything is stateless so looks like there's some work I 
>>> need to do on my end.  Thanks.
>>>
>>> -los
>>>
>>>
>>>
>>> markrmiller wrote:
>>>       
>>>> Usually a user cannot easily browse 50,000 on a single display, and 
>>>> so you would only highlight the docs as they became visible to the
>>>>         
>>> user.
>>>       
>>>> This is generally a small amount...often one at a time.
>>>>
>>>> - Mark
>>>>
>>>> moraleslos wrote:
>>>>         
>>>>> Hi Erik,
>>>>>
>>>>> Would that slow performance a bit?  For example, say I receive 
>>>>> 50,000 hits from a search.  From your explanation, I have to 
>>>>> retrieve the DB id
>>>>>           
>>> from
>>>       
>>>>> each hit, perform a query to the DB using the id to retrieve the 
>>>>> full contents for each hit, run highlighter on each content, and 
>>>>> then
>>>>>           
>>> return?
>>>       
>>>>> Although I'll give this a shot, it will seem to slow performance 
>>>>> on the searching side of things, wouldn't it?  Thanks for the reply.
>>>>>
>>>>> -los
>>>>>
>>>>>
>>>>>
>>>>> Erik Hatcher wrote:
>>>>>
>>>>>           
>>>>>> You don't have to store a field to highlight text.  If you've got 
>>>>>> it in your database, retrieve it from there and pass that string 
>>>>>> to the highlighter instead.
>>>>>>
>>>>>>     Erik
>>>>>>
>>>>>>
>>>>>> On Jan 10, 2007, at 10:45 AM, moraleslos wrote:
>>>>>>
>>>>>>
>>>>>>             
>>>>>>> I'm running into a little dilemma with Lucene highlighting and 
>>>>>>> indexing.  I currently index anything and everything that gets 
>>>>>>> inserted into a database.
>>>>>>> This database includes all the content that is searched.  Now 
>>>>>>> I'll have lots and lots of content, thinking of the range of
>>>>>>> 50GB+, all stored in the DB.
>>>>>>> Using Lucene, I index all of this.  But since I'm using 
>>>>>>> highlighting features, I'll also need to store the content into 
>>>>>>> the index.  Not sure what the performance implications are 
>>>>>>> during a search but I know that indexing performance should be 
>>>>>>> slower as well as the index size being
>>>>>>>               
>>> enormous.
>>>       
>>>>>>> Because I have duplicated data, one in the index and the other 
>>>>>>> in the db, are there other ways of handling this situation in a 
>>>>>>> more efficient and performant way?  Thanks in advance.
>>>>>>>
>>>>>>> -los
>>>>>>> --
>>>>>>> View this message in context: 
>>>>>>> http://www.nabble.com/Text-storing-
>>>>>>> design-and-performance-question-tf2953201.html#a8259883
>>>>>>> Sent from the Lucene - Java Users mailing list archive at
>>>>>>>               
>>> Nabble.com.
>>>       
>>>>>>>
>>>>>>>               
>>> --------------------------------------------------------------------
>>> -
>>>       
>>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>>> For additional commands, e-mail: 
>>>>>>> java-user-help@lucene.apache.org
>>>>>>>
>>>>>>>               
>>>>>> -----------------------------------------------------------------
>>>>>> ---- To unsubscribe, e-mail: 
>>>>>> java-user-unsubscribe@lucene.apache.org
>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>             
>>>>>           
>>>> -------------------------------------------------------------------
>>>> -- To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>>
>>>>         
>>> --
>>> View this message in context:
>>>
>>>       
>> http://www.nabble.com/Text-storing-design-and-performance-question-tf
>> 2953201
>> .html#a8261739
>>     
>>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>>
>>>
>>> --------------------------------------------------------------------
>>> - To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>>       
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>>     
>
>   




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25432-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 11 20:17:37 2007
Return-Path: <java-user-return-25432-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78036 invoked from network); 11 Jan 2007 20:17:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Jan 2007 20:17:36 -0000
Received: (qmail 7009 invoked by uid 500); 11 Jan 2007 20:17:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6849 invoked by uid 500); 11 Jan 2007 20:17:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6838 invoked by uid 99); 11 Jan 2007 20:17:35 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Jan 2007 12:17:35 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Jan 2007 12:17:23 -0800
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1H56M9-0005z5-0R
	for java-user@lucene.apache.org; Thu, 11 Jan 2007 12:17:01 -0800
Message-ID: <8285283.post@talk.nabble.com>
Date: Thu, 11 Jan 2007 12:17:00 -0800 (PST)
From: sdeck <scott.decker@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Speed of grouped queries
In-Reply-To: <8132099.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: scott.decker@gmail.com
References: <8132099.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org


So, to reply to myself with info learned (since I like reading this forum for
what people have done with lucene. kudos to cnet by the way)

In tracking down some of the speed, I was able to manage some speed
improvements

Again, the movie examples are just metaphors for what I am really working on

1) I created a very simple in memory LRU cache for all of the movies bitset
collectors.  The movies will boolean query each of their actors together and
the run a overall query. This runs in about 20-30 ms, the actor queries them
selves run in 20-30ms.  So, I now have a simple and separate cache for both
movies and actors and store their bitset collectors.

2) using the cached bitset collectors, I then do a merge of all movies
within a genre and store that bitset collector into it's own cache. This one
would really only contain 5-10 elements.

So far, memory is handling things pretty well.

The final item, one in which seems to sometime affect things and other times
not is the highlighter process after the bitsets have been collected. This,
I found, threw off timing many times. It seems as though the highlighter
will run quickly on some documents, but then it ran slowly on others.  Will
probably need to dig into this, but since I have put in my paging system,
and the results them selves will be cached, speed is now all synched up.

I do have a prelim process that will go through each actor, movie and genre
and get a count of number of results that would be returned for their
searches and store that in a file. That way, I can at least show the user
how many results are available in side of the interface without actually
having to query for it.

Hopefully in a month or so I will be able to give a link to the public
website I am working on.
Fun stuff.

Scott



sdeck wrote:
> 
> Thanks for advanced on any insight on this one.
> 
> I have a fairly large query to run, and it takes roughly 20-40 seconds to
> complete the way that i have it.
> here is the best example I can give.
> 
> I have a set of roughly 25K documents indexed
> 
> I have queries that get documents matching a particular actor.
> 
> Then, I have a movie query that takes all of the documents found for each
> actor query and combines them all together to say, here are all documents
> that are relevant for this movie.
> 
> Then, and here is the time hog, I have a genre query that says, take all
> movies and get their results and combine them together into this genre
> result set.
> 
> 
> The problem is, at indexing time, I do not have a way to say if a document
> is a particular genre, or a particular actor, or movie etc.  If I try and
> say for the genre query, get all documents and then filter for the queries
> for movies and actors, I get heap space memory issues.
> 
> The query for collecting a specific actor is around 200-300 milliseconds,
> and the movie one, that actually queries each actor, takes roughly 500-700
> milliseconds. Yet, for a genre, where you may have 50-100 movies, it takes
> 500 milliseconds*# of movies
> 
> Any ideas on how I could run these queries differently? For a given actor
> query, there is about 5-7 boolean query clauses. Just to give some
> insight.
> 
> I currently just create 1 HitSetCollector (I rolled my own
> bitsetcollector) and just run searches with it.  I just get crapped on
> when it does that genre search. I wish there was an easier way to
> aggregate all of those documents together from all of those searches. 
> After it is done, I cache the results, but the initial hit is bad.
> 
> Any help would be much appreciated.
> Sdeck
> 
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/Speed-of-grouped-queries-tf2910499.html#a8285283
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25433-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 11 21:02:42 2007
Return-Path: <java-user-return-25433-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4296 invoked from network); 11 Jan 2007 21:02:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Jan 2007 21:02:41 -0000
Received: (qmail 96013 invoked by uid 500); 11 Jan 2007 21:02:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95991 invoked by uid 500); 11 Jan 2007 21:02:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 68808 invoked by uid 99); 11 Jan 2007 20:52:01 -0000
X-ASF-Spam-Status: No, hits=2.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Message-ID: <45A6A352.4030908@mindspring.com>
Date: Thu, 11 Jan 2007 12:51:30 -0800
From: Jason Pump <jpump@mindspring.com>
User-Agent: Thunderbird 1.5.0.9 (X11/20061206)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Text storing design and performance question
References: <003a01c735b5$40b67300$970fda80@libraria.ucsf.edu>
In-Reply-To: <003a01c735b5$40b67300$970fda80@libraria.ucsf.edu>
Content-Type: multipart/alternative;
 boundary="------------070804010901070307030707"
X-OriginalArrivalTime: 11 Jan 2007 20:50:48.0218 (UTC) FILETIME=[2C0AC7A0:01C735C2]
X-Virus-Checked: Checked by ClamAV on apache.org

--------------070804010901070307030707
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit

Say my query is "apple banana orange". The word "apple" is near the start of
the document, "banana" and "orange" at the end. Wouldn't your optimization
stop at the word "apple" and just return this word highlighted?

Yes

Or do you know of a way to quantify the match?

I guess you could count how many <em> there are, I'm not that familiar with the highlighter. If there's not enough highlighted words you could always fall back to scanning the whole document. A good search result is one which has most of the terms together, near the start of the document. Most queries should have results that meet that criteria. 





Renaud Waldura wrote:
> Jason:
>
> Interesting idea, thanks. But how do you know whether the highlighting is
> any good? I thought highlighter implemented some kind of strategy to find
> the best fragment. 
>
> Say my query is "apple banana orange". The word "apple" is near the start of
> the document, "banana" and "orange" at the end. Wouldn't your optimization
> stop at the word "apple" and just return this word highlighted? Or do you
> know of a way to quantify the match?
>
>  
>
> -----Original Message-----
> From: Jason Pump [mailto:jpump@mindspring.com] 
> Sent: Wednesday, January 10, 2007 1:49 PM
> To: java-user@lucene.apache.org
> Subject: Re: Text storing design and performance question
>
> Renaud, one optimization you can do on this is to try the first 10kb, see if
> it finds text worth highlighting, if not, with a slight overlap try the next
> 9.9kb - 19.9kb or just 9.9kb -> end if you're feeling lazy. 
> This assumes that most good matches are at the start of the document, and
> that the files on disk are not compressed.
>
> moraleslos wrote:
>   
>> Maybe keeping the data in the DB would make it quicker?  Seems like 
>> the I/O performance would cause most of the performance issues you're
>>     
> seeing.
>   
>> -los
>>
>>
>> Renaud Waldura-5 wrote:
>>   
>>     
>>> We used to store a big text field for highlighting purposes too, and 
>>> it proved a big pain. The index was gigantic, it took forever to 
>>> build, and the search performance would sometimes suffer from it 
>>> (just a hunch).
>>>
>>> Now we keep this big text field on disk (in a file), and feed it to 
>>> the highlighter. Unfortunately the highlighter has to read the file, 
>>> parse it, etc... It's slooow, sometimes over a second on a large
>>>       
> document.
>   
>>> I vaguely remember reading somewhere newer versions of the 
>>> highlighter are able to leverage term vectors to avoid re-parsing the 
>>> field. (I could be
>>> mistaken.) Maybe just storing term vectors would keep the index lean 
>>> and allow for fast highlighting?
>>>
>>> --Renaud
>>>
>>>  
>>>
>>> -----Original Message-----
>>> From: Mark Miller [mailto:markrmiller@gmail.com]
>>> Sent: Wednesday, January 10, 2007 9:54 AM
>>> To: java-user@lucene.apache.org
>>> Subject: Re: Text storing design and performance question
>>>
>>> Being stateless should not be much of an issue. As Erick mentioned, 
>>> the highlighter just expects you to pass it the query again and the 
>>> text to be highlighted. So when you show the pagination you just need 
>>> to keep around what query generated the current page...then shove 
>>> each piece of relevant text from the database through the highlighter 
>>> (with the query) before displaying it.
>>>
>>> - Mark
>>>
>>> On 1/10/07, moraleslos <moraleslos@hotmail.com> wrote:
>>>     
>>>       
>>>> Hi Mark,
>>>>
>>>> Looks like I've got to implement some sort of pagination for my clients.
>>>> Problem is everything is stateless so looks like there's some work I 
>>>> need to do on my end.  Thanks.
>>>>
>>>> -los
>>>>
>>>>
>>>>
>>>> markrmiller wrote:
>>>>       
>>>>         
>>>>> Usually a user cannot easily browse 50,000 on a single display, and 
>>>>> so you would only highlight the docs as they became visible to the
>>>>>         
>>>>>           
>>>> user.
>>>>       
>>>>         
>>>>> This is generally a small amount...often one at a time.
>>>>>
>>>>> - Mark
>>>>>
>>>>> moraleslos wrote:
>>>>>         
>>>>>           
>>>>>> Hi Erik,
>>>>>>
>>>>>> Would that slow performance a bit?  For example, say I receive 
>>>>>> 50,000 hits from a search.  From your explanation, I have to 
>>>>>> retrieve the DB id
>>>>>>           
>>>>>>             
>>>> from
>>>>       
>>>>         
>>>>>> each hit, perform a query to the DB using the id to retrieve the 
>>>>>> full contents for each hit, run highlighter on each content, and 
>>>>>> then
>>>>>>           
>>>>>>             
>>>> return?
>>>>       
>>>>         
>>>>>> Although I'll give this a shot, it will seem to slow performance 
>>>>>> on the searching side of things, wouldn't it?  Thanks for the reply.
>>>>>>
>>>>>> -los
>>>>>>
>>>>>>
>>>>>>
>>>>>> Erik Hatcher wrote:
>>>>>>
>>>>>>           
>>>>>>             
>>>>>>> You don't have to store a field to highlight text.  If you've got 
>>>>>>> it in your database, retrieve it from there and pass that string 
>>>>>>> to the highlighter instead.
>>>>>>>
>>>>>>>     Erik
>>>>>>>
>>>>>>>
>>>>>>> On Jan 10, 2007, at 10:45 AM, moraleslos wrote:
>>>>>>>
>>>>>>>
>>>>>>>             
>>>>>>>               
>>>>>>>> I'm running into a little dilemma with Lucene highlighting and 
>>>>>>>> indexing.  I currently index anything and everything that gets 
>>>>>>>> inserted into a database.
>>>>>>>> This database includes all the content that is searched.  Now 
>>>>>>>> I'll have lots and lots of content, thinking of the range of
>>>>>>>> 50GB+, all stored in the DB.
>>>>>>>> Using Lucene, I index all of this.  But since I'm using 
>>>>>>>> highlighting features, I'll also need to store the content into 
>>>>>>>> the index.  Not sure what the performance implications are 
>>>>>>>> during a search but I know that indexing performance should be 
>>>>>>>> slower as well as the index size being
>>>>>>>>               
>>>>>>>>                 
>>>> enormous.
>>>>       
>>>>         
>>>>>>>> Because I have duplicated data, one in the index and the other 
>>>>>>>> in the db, are there other ways of handling this situation in a 
>>>>>>>> more efficient and performant way?  Thanks in advance.
>>>>>>>>
>>>>>>>> -los
>>>>>>>> --
>>>>>>>> View this message in context: 
>>>>>>>> http://www.nabble.com/Text-storing-
>>>>>>>> design-and-performance-question-tf2953201.html#a8259883
>>>>>>>> Sent from the Lucene - Java Users mailing list archive at
>>>>>>>>               
>>>>>>>>                 
>>>> Nabble.com.
>>>>       
>>>>         
>>>>>>>>               
>>>>>>>>                 
>>>> --------------------------------------------------------------------
>>>> -
>>>>       
>>>>         
>>>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>>>> For additional commands, e-mail: 
>>>>>>>> java-user-help@lucene.apache.org
>>>>>>>>
>>>>>>>>               
>>>>>>>>                 
>>>>>>> -----------------------------------------------------------------
>>>>>>> ---- To unsubscribe, e-mail: 
>>>>>>> java-user-unsubscribe@lucene.apache.org
>>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>             
>>>>>>>               
>>>>>>           
>>>>>>             
>>>>> -------------------------------------------------------------------
>>>>> -- To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>
>>>>>
>>>>>
>>>>>         
>>>>>           
>>>> --
>>>> View this message in context:
>>>>
>>>>       
>>>>         
>>> http://www.nabble.com/Text-storing-design-and-performance-question-tf
>>> 2953201
>>> .html#a8261739
>>>     
>>>       
>>>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>>>
>>>>
>>>> --------------------------------------------------------------------
>>>> - To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>>       
>>>>         
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>>
>>>     
>>>       
>>   
>>     
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>   

--------------070804010901070307030707--

From java-user-return-25434-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 11 21:58:35 2007
Return-Path: <java-user-return-25434-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 46588 invoked from network); 11 Jan 2007 21:58:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Jan 2007 21:58:35 -0000
Received: (qmail 27068 invoked by uid 500); 11 Jan 2007 21:58:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27049 invoked by uid 500); 11 Jan 2007 21:58:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27038 invoked by uid 99); 11 Jan 2007 21:58:34 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Jan 2007 13:58:34 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Jan 2007 13:58:25 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 1DD365B775; Thu, 11 Jan 2007 13:58:05 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 15BF97F403
	for <java-user@lucene.apache.org>; Thu, 11 Jan 2007 13:58:05 -0800 (PST)
Date: Thu, 11 Jan 2007 13:58:05 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Text storing design and performance question
In-Reply-To: <45A6A352.4030908@mindspring.com>
Message-ID: <Pine.LNX.4.58.0701111350330.12602@hal.rescomp.berkeley.edu>
References: <003a01c735b5$40b67300$970fda80@libraria.ucsf.edu>
 <45A6A352.4030908@mindspring.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


In general, if you are having performance issues with highlighting, the
first thing to do is double check what the bottleneck is: is it accessing
the text to by highlighted, or is it running the highlighter?

you suggested earlier in the thread that the problem was with accessing
the text...

: >>> Now we keep this big text field on disk (in a file), and feed it to
: >>> the highlighter. Unfortunately the highlighter has to read the file,
: >>> parse it, etc... It's slooow, sometimes over a second on a large

the first question to ask is: are you storing just the text that you want
to highlight, or is it in a higher level format -- i ask because you use
the expression "parse it" which suggests to me that perhaps you are
storing raw HTML or RDF odcuments or something like that ... things might
be faster for you if you store only the extracted text.

second: for many applications, only a small percentage of the documents
every wind up getting surfaced via search, and more importantly: a small
percentage tend to be surfaced a high percentage of hte time ... perhaps
you could add an in memory cache of the most frequently highlighted
documents (without hte highlighting being applied, so cache hits can occur
on popular documents even if the search words are different)

if you find that accessing the text isn't the bottleneck, and the acctual
highlighting call is what's slow, then perhaps the issue is that the
fragmenter is working too hard to come up with good snippets, and you
could write your own that does leswork but takes less time?


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25435-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 11 22:10:27 2007
Return-Path: <java-user-return-25435-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 50930 invoked from network); 11 Jan 2007 22:10:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Jan 2007 22:10:26 -0000
Received: (qmail 53185 invoked by uid 500); 11 Jan 2007 22:10:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53154 invoked by uid 500); 11 Jan 2007 22:10:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53143 invoked by uid 99); 11 Jan 2007 22:10:24 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Jan 2007 14:10:24 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Jan 2007 14:10:14 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 358485B775; Thu, 11 Jan 2007 14:09:54 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 2B7357F403
	for <java-user@lucene.apache.org>; Thu, 11 Jan 2007 14:09:54 -0800 (PST)
Date: Thu, 11 Jan 2007 14:09:54 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Technology Preview of new Lucene QueryParser
In-Reply-To: <45A626DA.3080008@gmail.com>
Message-ID: <Pine.LNX.4.58.0701111400020.12602@hal.rescomp.berkeley.edu>
References: <45A460E2.8090508@gmail.com> <Pine.LNX.4.58.0701101726150.29321@hal.rescomp.berkeley.edu>
 <45A5A468.1030604@gmail.com> <Pine.LNX.4.58.0701102008590.6750@hal.rescomp.berkeley.edu>
 <45A626DA.3080008@gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: > so do you convert A ! B ! C into a three clause boolean query, or a two
: > clause BooleanQuery that contains another two clause BooleanQuery?
: >
: It becomes a three clause boolean query...would there be a difference in
: scoring? I assumed not and it used to make a boolean that contained
: another boolean...these days it checks to see if its in a chain of the
: same operator and makes only one boolean.

there is in fact a difference in score ... a big difference depending
on how the coordFactor comes into play.  your three-clause approach makes
sense to me as the "right" approach, but your "in a chain of the same
operator" comment scares me ... how does "A | B | C ! D ! E" get parsed?
I would assume it should result in the QueryParser equivilent of
"A B C -D -E" ... is there any way to produce a the same underlying
BooleanQuery using your syntax?

: Just a boolean right now. I will have to look at DisjuntionMaxQuery.
: Currently its just a boolean: +field1:foo +field2:foo

hmmm... so field1,field2(foo) requires that foo match on both field1 and
field2, even if you've used it in this context...

                fieldX(bar) | field1,field2(foo)

...it seems like a shortcut for "match on foo in ANY of the following
fields" would be needed in more cases then a shortfut for "match on foo in
ALL of the following fields"

: > incidently: what was there a motivating factor behind the mixed use of
: > both ~ and : to denote slop?
: >
: ':' is for slop on a phrase query. "the car is burning so get out":2
: will allow for each word to be within 2.
: '~' is a binary operator...mark ~4 postman...or say: (mark ~5 (horse &
: car) ~6 tom brady | "hard knocks dude":3) ~6 garbage
:
: Phrase slop could be specified with the '~' op too: the ~2 car ~2 is
: ~burning ~2 so ~2 get ~2 out : but that is a pain in the butt.

you kind of lost me there ... i get that ~ is a binary operator, but in
both cases the intent is to say "these words must appear near eachother"
...s oi'm wondering why you cose to use "hard knocks dude":3 instead of
"hard knocks dude"~3 .... oh wiat, i think i get it ... was it to
eliminate ambiguity of something like ("hard knocks dude" ~3 foo) ...
is the whitespace arround binary operators optional?




-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25436-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 11 23:15:23 2007
Return-Path: <java-user-return-25436-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 6385 invoked from network); 11 Jan 2007 23:15:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Jan 2007 23:15:21 -0000
Received: (qmail 15739 invoked by uid 500); 11 Jan 2007 23:15:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15702 invoked by uid 500); 11 Jan 2007 23:15:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15691 invoked by uid 99); 11 Jan 2007 23:15:20 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Jan 2007 15:15:20 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of geneticflyer@googlemail.com designates 66.249.92.171 as permitted sender)
Received: from [66.249.92.171] (HELO ug-out-1314.google.com) (66.249.92.171)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Jan 2007 15:15:11 -0800
Received: by ug-out-1314.google.com with SMTP id k40so607145ugc
        for <java-user@lucene.apache.org>; Thu, 11 Jan 2007 15:14:50 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=googlemail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=Hw+Nyk+GpslEqp0hQq6UxryUUzD7M3WFPGYqN+6mSRSnGJ70ebIUoJbu2yPmIEDAnJ+OtSCE0x4GnBxuvallxsc9nLhYjlCr/0iqFUocAcgnbFP/NkHSRGAIIEe/JGLCcat8YKT87UsJTknhwhqbeEnqkWyJgd3Kf3GRM7nS7ig=
Received: by 10.82.116.15 with SMTP id o15mr1473buc.1168557288356;
        Thu, 11 Jan 2007 15:14:48 -0800 (PST)
Received: by 10.82.119.7 with HTTP; Thu, 11 Jan 2007 15:14:48 -0800 (PST)
Message-ID: <78bc38bc0701111514q500dd6b6hc68fdc4122ecd2@mail.gmail.com>
Date: Thu, 11 Jan 2007 23:14:48 +0000
From: "M A" <geneticflyer@googlemail.com>
To: java-user@lucene.apache.org
Subject: Excluding partial match for query result
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_31742_26371178.1168557288332"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_31742_26371178.1168557288332
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi,

We are having some trouble with the results that we get from certain
queries.

Basically .. we have documents that we index, each document has a bunch of
tags, the tags could be of the sort

tags: A, B, C, D.P, E.A etc ..

Each story will contain only a subset of the tags ..

For example

Story 1: tags : A, C, E
Story 2: tags : B.A, P, Q  (note "B.A" is one tag) .

Problem occurs when we run a search with query  "A" we get both results,
but what we should be getting is just Story 1.
Query "B.A" returns the correct value.

What would i have to  ensure that a search for "A" only matches "A" and not
"B.A"?

thanx

------=_Part_31742_26371178.1168557288332--

From java-user-return-25437-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 11 23:22:13 2007
Return-Path: <java-user-return-25437-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8462 invoked from network); 11 Jan 2007 23:22:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Jan 2007 23:22:12 -0000
Received: (qmail 26143 invoked by uid 500); 11 Jan 2007 23:22:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26118 invoked by uid 500); 11 Jan 2007 23:22:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26107 invoked by uid 99); 11 Jan 2007 23:22:11 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Jan 2007 15:22:11 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of markrmiller@gmail.com designates 66.249.82.231 as permitted sender)
Received: from [66.249.82.231] (HELO wx-out-0506.google.com) (66.249.82.231)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Jan 2007 15:22:01 -0800
Received: by wx-out-0506.google.com with SMTP id i29so606007wxd
        for <java-user@lucene.apache.org>; Thu, 11 Jan 2007 15:21:40 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=e41MRtMnunyRtACgbhzr4KWWWOuEiWMvcLrOz6QZ3fmuOOe8dRwVSBcgtfHgI4tJMklW3zBvAxCEXQFoXayp6FEuVUMuHY0FveMC6NYChyYU2rXgpaur1hKVFOV7XeizIaELAp219F+5eJe5/5XlMRky282jd/n5ebrcxT2Gd98=
Received: by 10.70.32.13 with SMTP id f13mr3876742wxf.1168557700536;
        Thu, 11 Jan 2007 15:21:40 -0800 (PST)
Received: from ?192.168.1.103? ( [216.66.114.42])
        by mx.google.com with ESMTP id 8sm1855687wra.2007.01.11.15.21.38;
        Thu, 11 Jan 2007 15:21:39 -0800 (PST)
Message-ID: <45A6C5E0.10406@gmail.com>
Date: Thu, 11 Jan 2007 18:18:56 -0500
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 1.5.0.9 (Windows/20061207)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Technology Preview of new Lucene QueryParser
References: <45A460E2.8090508@gmail.com> <Pine.LNX.4.58.0701101726150.29321@hal.rescomp.berkeley.edu> <45A5A468.1030604@gmail.com> <Pine.LNX.4.58.0701102008590.6750@hal.rescomp.berkeley.edu> <45A626DA.3080008@gmail.com> <Pine.LNX.4.58.0701111400020.12602@hal.rescomp.berkeley.edu>
In-Reply-To: <Pine.LNX.4.58.0701111400020.12602@hal.rescomp.berkeley.edu>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org


> : > so do you convert A ! B ! C into a three clause boolean query, or a two
> : > clause BooleanQuery that contains another two clause BooleanQuery?
> : >
> : It becomes a three clause boolean query...would there be a difference in
> : scoring? I assumed not and it used to make a boolean that contained
> : another boolean...these days it checks to see if its in a chain of the
> : same operator and makes only one boolean.
>
> there is in fact a difference in score ... a big difference depending
> on how the coordFactor comes into play.  your three-clause approach makes
> sense to me as the "right" approach, but your "in a chain of the same
> operator" comment scares me ... how does "A | B | C ! D ! E" get parsed?
> I would assume it should result in the QueryParser equivilent of
> "A B C -D -E" ... is there any way to produce a the same underlying
> BooleanQuery using your syntax?
>   
This sounds troubling to me now :) I may need to clear up my 
understanding of this and rework the parser:
"A | B | C ! D ! E" wold get parsed as allFields:a allFields:b 
(+allFields:c -allFields:d -allFields:e)
This is because ! binds tighter than |...
Sounds like I need to bone up on how I thought this query would operate. 
I set up this logic back when I was new to Lucene and have not 
considered it since. Seems as though the hits will be right but perhaps 
the scoring will not be correct?
> : Just a boolean right now. I will have to look at DisjuntionMaxQuery.
> : Currently its just a boolean: +field1:foo +field2:foo
>
> hmmm... so field1,field2(foo) requires that foo match on both field1 and
> field2, even if you've used it in this context...
>
>                 fieldX(bar) | field1,field2(foo)
>
> ...it seems like a shortcut for "match on foo in ANY of the following
> fields" would be needed in more cases then a shortfut for "match on foo in
> ALL of the following fields"
>   
I was mistaken: it is actually field1:foo field2:foo. OR instead of AND. 
Sorry about that. Obviously it looks like I should be looking into 
DisjunctionMaxQuery instead though.
> : > incidently: what was there a motivating factor behind the mixed use of
> : > both ~ and : to denote slop?
> : >
> : ':' is for slop on a phrase query. "the car is burning so get out":2
> : will allow for each word to be within 2.
> : '~' is a binary operator...mark ~4 postman...or say: (mark ~5 (horse &
> : car) ~6 tom brady | "hard knocks dude":3) ~6 garbage
> :
> : Phrase slop could be specified with the '~' op too: the ~2 car ~2 is
> : ~burning ~2 so ~2 get ~2 out : but that is a pain in the butt.
>
> you kind of lost me there ... i get that ~ is a binary operator, but in
> both cases the intent is to say "these words must appear near eachother"
> ...s oi'm wondering why you cose to use "hard knocks dude":3 instead of
> "hard knocks dude"~3 .... oh wiat, i think i get it ... was it to
> eliminate ambiguity of something like ("hard knocks dude" ~3 foo) ...
> is the whitespace arround binary operators optional?
>   
Eliminating ambiguity was the intention. You think they should be the same?
The whitespace is not optional. I chose this route so that you would be 
able to query m&m without escaping the &..instead you would use m & m 
for an AND search.
> -Hoss
>   
I can't thank you enough even for this brief exchange Hoss. You are a 
tremendous help. I will be using this system in a production environment 
and need it to be perfect before I am done.
The booleanquery question you brought up seems very troubling.

- Mark

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25438-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 11 23:50:03 2007
Return-Path: <java-user-return-25438-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 17257 invoked from network); 11 Jan 2007 23:50:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Jan 2007 23:50:02 -0000
Received: (qmail 69034 invoked by uid 500); 11 Jan 2007 23:50:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69008 invoked by uid 500); 11 Jan 2007 23:50:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68995 invoked by uid 99); 11 Jan 2007 23:50:02 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Jan 2007 15:50:02 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of markrmiller@gmail.com designates 66.249.82.234 as permitted sender)
Received: from [66.249.82.234] (HELO wx-out-0506.google.com) (66.249.82.234)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Jan 2007 15:49:52 -0800
Received: by wx-out-0506.google.com with SMTP id i29so611566wxd
        for <java-user@lucene.apache.org>; Thu, 11 Jan 2007 15:49:32 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=XoKp7irDT7oHUxyiUfAZGk/VNn3RdjhgJmpXKLJCOqp2gUf1MJ3Q0cSgfdjYRMpS50603kuBTHZR4W7dRt5iBkHixSKqdOay+8SCBm93IDij12VdAFxIyb90q85u0Xk7QdbtZVfLWI41CJKW1z5PqJpeEkVfSd6/YVLb3oWVe+Y=
Received: by 10.70.50.10 with SMTP id x10mr60544wxx.1168559371969;
        Thu, 11 Jan 2007 15:49:31 -0800 (PST)
Received: from ?192.168.1.103? ( [216.66.114.42])
        by mx.google.com with ESMTP id g9sm2709468wra.2007.01.11.15.49.30;
        Thu, 11 Jan 2007 15:49:31 -0800 (PST)
Message-ID: <45A6CC67.2080400@gmail.com>
Date: Thu, 11 Jan 2007 18:46:47 -0500
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 1.5.0.9 (Windows/20061207)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Technology Preview of new Lucene QueryParser
References: <45A460E2.8090508@gmail.com> <Pine.LNX.4.58.0701101726150.29321@hal.rescomp.berkeley.edu> <45A5A468.1030604@gmail.com> <Pine.LNX.4.58.0701102008590.6750@hal.rescomp.berkeley.edu> <45A626DA.3080008@gmail.com> <Pine.LNX.4.58.0701111400020.12602@hal.rescomp.berkeley.edu>
In-Reply-To: <Pine.LNX.4.58.0701111400020.12602@hal.rescomp.berkeley.edu>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org


> you kind of lost me there ... i get that ~ is a binary operator, but in
> both cases the intent is to say "these words must appear near eachother"
> ...s oi'm wondering why you cose to use "hard knocks dude":3 instead of
> "hard knocks dude"~3 .... oh wiat, i think i get it ... was it to
> eliminate ambiguity of something like ("hard knocks dude" ~3 foo) ...
> is the whitespace arround binary operators optional?
>   
I wasn't clear on this answer. The problem was not grammar ambiguity but 
from a user standpoint...I wanted to differentiate the proximity binary 
operator from the phrase distance operator...even though they are 
similar. Perhaps the differentiation is more confusing then helpful.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25439-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 12 00:47:51 2007
Return-Path: <java-user-return-25439-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30528 invoked from network); 12 Jan 2007 00:47:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Jan 2007 00:47:50 -0000
Received: (qmail 45134 invoked by uid 500); 12 Jan 2007 00:47:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45102 invoked by uid 500); 12 Jan 2007 00:47:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45066 invoked by uid 99); 12 Jan 2007 00:47:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Jan 2007 16:47:50 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 66.249.92.169 as permitted sender)
Received: from [66.249.92.169] (HELO ug-out-1314.google.com) (66.249.92.169)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Jan 2007 16:47:41 -0800
Received: by ug-out-1314.google.com with SMTP id k40so624410ugc
        for <java-user@lucene.apache.org>; Thu, 11 Jan 2007 16:47:21 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=XUIqdtamQKDkZmOxq3PTRHNRbZpTJi2elitpQf0mQVgSh75plywnExyCpJRPQmtpqs+M42C3B8ZPujfSfA24JmKV5iB2fhrkaeKVWCmm1Nh+mpxKUJn4dcNxdiDZIPKPYr051ElZWyzaznuMR2VbofqtFBKWVFgiNctpmz64Wqk=
Received: by 10.82.165.1 with SMTP id n1mr17353bue.1168562840632;
        Thu, 11 Jan 2007 16:47:20 -0800 (PST)
Received: by 10.82.162.9 with HTTP; Thu, 11 Jan 2007 16:47:20 -0800 (PST)
Message-ID: <359a92830701111647n28064e21u925b9782e9257987@mail.gmail.com>
Date: Thu, 11 Jan 2007 19:47:20 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Excluding partial match for query result
In-Reply-To: <78bc38bc0701111514q500dd6b6hc68fdc4122ecd2@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_36623_13651925.1168562840378"
References: <78bc38bc0701111514q500dd6b6hc68fdc4122ecd2@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_36623_13651925.1168562840378
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

What analyzers are you using for your queries and your indexing?
StandardAnalyzer (I believe) will break "A.B" into two tokens , so your
index could contain both tags. So what you really have in the index would be
story1  A  C  E
story2: A B P Q (note no '.').

searching for B.A would really search for B OR A because of 2 things:
1> the tokenizer (assuming StandardAnalyzer or any other analyzer that
breaks tokens at punctuation) would break the query into two terms.
2> the default is OR unless you set the default to AND or specify it in the
query.

If you're using different analyzers, this is irrelevant. Also, this assumes
you're using the query parser.

If you haven't already, I *strongly* recommend you get a copy of Luke
(google lucene luke). It lets you examine your indexes to see what's
actually been indexed and lets you examine queries to see what the actual
search terms are. It even lets you use different analyzers to see how they
behave when it comes to creating a query.

Best
Erick

On 1/11/07, M A <geneticflyer@googlemail.com> wrote:
>
> Hi,
>
> We are having some trouble with the results that we get from certain
> queries.
>
> Basically .. we have documents that we index, each document has a bunch of
> tags, the tags could be of the sort
>
> tags: A, B, C, D.P, E.A etc ..
>
> Each story will contain only a subset of the tags ..
>
> For example
>
> Story 1: tags : A, C, E
> Story 2: tags : B.A, P, Q  (note "B.A" is one tag) .
>
> Problem occurs when we run a search with query  "A" we get both results,
> but what we should be getting is just Story 1.
> Query "B.A" returns the correct value.
>
> What would i have to  ensure that a search for "A" only matches "A" and
> not
> "B.A"?
>
> thanx
>
>

------=_Part_36623_13651925.1168562840378--

From java-user-return-25440-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 12 01:13:32 2007
Return-Path: <java-user-return-25440-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35709 invoked from network); 12 Jan 2007 01:13:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Jan 2007 01:13:31 -0000
Received: (qmail 67581 invoked by uid 500); 12 Jan 2007 01:13:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67542 invoked by uid 500); 12 Jan 2007 01:13:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67531 invoked by uid 99); 12 Jan 2007 01:13:31 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Jan 2007 17:13:31 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,UPPERCASE_25_50
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of vnguyen@ur.com designates 63.241.148.49 as permitted sender)
Received: from [63.241.148.49] (HELO iris.ur.com) (63.241.148.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Jan 2007 17:13:22 -0800
Received: from unknown (HELO UREXCHSRV5.ur.com) ([10.6.134.35])
  by iris.ur.com with ESMTP; 12 Jan 2007 01:13:38 +0000
X-OriginatingIP: 10.6.134.35
X-InternalServer: 10.6.134.35
Received: from UREXCHVS3.ur.com ([10.6.138.35]) by UREXCHSRV5.ur.com with Microsoft SMTPSVC(6.0.3790.1830);
	 Thu, 11 Jan 2007 20:11:06 -0500
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C735E6.88EC7D1C"
Subject: Modifying StandardAnalyzer
Date: Thu, 11 Jan 2007 20:12:59 -0500
Message-ID: <0D6A3C278F4DC346B98DF4D2F1397E811862F19E@UREXCHVS3.ur.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Modifying StandardAnalyzer
Thread-Index: Acc15sy9dSFMShubQi+XU7jMheoJ7A==
From: "Van Nguyen" <vnguyen@ur.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 12 Jan 2007 01:11:06.0023 (UTC) FILETIME=[88FAB370:01C735E6]
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01C735E6.88EC7D1C
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Hi,

=20

I need to modify the StandardAnalyzer so that it will tokenize zip codes
that look like this:

=20

92626-2646

=20

I think the part I need to modify is in here - specifically:

=20

<HAS_DIGIT> <P> <ALPHANUM>

=20

// floating point, serial, model numbers, ip addresses, etc.

  // every other segment must have at least one digit

| <NUM: (<ALPHANUM> <P> <HAS_DIGIT>

       | <HAS_DIGIT> <P> <ALPHANUM>

       | <HAS_DIGIT> <M>

       | <HAS_DIGIT> (<P> <HAS_DIGIT>)+ <M>

       | <LETTER> (<P> <LETTER>)+

       | <ALPHANUM> (<P> <HAS_DIGIT> <P> <ALPHANUM>)+

       | <HAS_DIGIT> (<P> <ALPHANUM> <P> <HAS_DIGIT>)+

       | <ALPHANUM> <P> <HAS_DIGIT> (<P> <ALPHANUM> <P> <HAS_DIGIT>)+

       | <HAS_DIGIT> <P> <ALPHANUM> (<P> <HAS_DIGIT> <P> <ALPHANUM>)+

        )

  >

=20

Is there a way to keep that line so that the StandardAnalyzer works as
is - but tokenize anything that looks like=20

=20

(HAS_DIGITS) <P>) | (<HAS_DIGITS> <P> <HAS_DIGITS>) or even better:

=20

(<DIGIT><DIGIT><DIGIT><DIGIT><DIGIT><P>) |
<DIGIT><DIGIT><DIGIT><DIGIT><DIGIT><P><DIGIT><DIGIT><DIGIT><DIGIT>) - I
have zip codes that look like 92626, 92626-, and 92626-2646

=20

I've tried adding that both lines to the "SKIP" section - but to no
avail.

=20


------_=_NextPart_001_01C735E6.88EC7D1C--

From java-user-return-25441-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 12 01:38:03 2007
Return-Path: <java-user-return-25441-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40090 invoked from network); 12 Jan 2007 01:38:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Jan 2007 01:38:03 -0000
Received: (qmail 89852 invoked by uid 500); 12 Jan 2007 01:38:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89615 invoked by uid 500); 12 Jan 2007 01:38:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89604 invoked by uid 99); 12 Jan 2007 01:38:02 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Jan 2007 17:38:02 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS,UPPERCASE_25_50
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of markrmiller@gmail.com designates 66.249.82.238 as permitted sender)
Received: from [66.249.82.238] (HELO wx-out-0506.google.com) (66.249.82.238)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Jan 2007 17:37:50 -0800
Received: by wx-out-0506.google.com with SMTP id i29so630832wxd
        for <java-user@lucene.apache.org>; Thu, 11 Jan 2007 17:37:29 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=WJWEm9QJGvPz6pW5PIkGOTu09LKU2Rn/FaNFYus5fAv7y77LmlxwmhVNli8VWDHIuLSqfPJcFQibE2Grboik+xohm7UAXUIBiJkppQwJ2Hmoq3s1bHyt/NFUzVduf39EMYKM2ZkVt+WFBHniLy524MQXE53emVT6A3nWL7WWvFE=
Received: by 10.70.84.6 with SMTP id h6mr136518wxb.1168565849735;
        Thu, 11 Jan 2007 17:37:29 -0800 (PST)
Received: from ?192.168.1.103? ( [216.66.114.42])
        by mx.google.com with ESMTP id 26sm2056825wra.2007.01.11.17.37.27;
        Thu, 11 Jan 2007 17:37:28 -0800 (PST)
Message-ID: <45A6E5B0.7010809@gmail.com>
Date: Thu, 11 Jan 2007 20:34:40 -0500
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 1.5.0.9 (Windows/20061207)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Modifying StandardAnalyzer
References: <0D6A3C278F4DC346B98DF4D2F1397E811862F19E@UREXCHVS3.ur.com>
In-Reply-To: <0D6A3C278F4DC346B98DF4D2F1397E811862F19E@UREXCHVS3.ur.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

I would try adding this (or your regex)

| <ZIPCODE: <DIGIT><DIGIT><DIGIT><DIGIT><DIGIT> (("-" <DIGIT><DIGIT><DIGIT><DIGIT>)|(<DIGIT><DIGIT><DIGIT><DIGIT>))


between the EMAIL and HOST line or something,


And change this:

org.apache.lucene.analysis.Token next() throws IOException :
{
  Token token = null;
}
{
  ( token = <ALPHANUM> |
    token = <APOSTROPHE> |
    token = <ACRONYM> |
    token = <COMPANY> |
    token = <EMAIL> |
    token = <HOST> |
    token = <NUM> |
    token = <CJ> |
    token = <EOF>
   )
    {
      if (token.kind == EOF) {
    return null;
      } else {
    return
      new org.apache.lucene.analysis.Token(token.image,
                    token.beginColumn,token.endColumn,
                    tokenImage[token.kind]);
      }
    }
}

TO:

org.apache.lucene.analysis.Token next() throws IOException :
{
  Token token = null;
}
{
  ( token = <ALPHANUM> |
    token = <APOSTROPHE> |
    token = <ACRONYM> |
    tokrn = <ZIPCODE>
    token = <COMPANY> |
    token = <EMAIL> |
    token = <HOST> |
    token = <NUM> |
    token = <CJ> |
    token = <EOF>
   )
    {
      if (token.kind == EOF) {
    return null;
      } else {
    return
      new org.apache.lucene.analysis.Token(token.image,
                    token.beginColumn,token.endColumn,
                    tokenImage[token.kind]);
      }
    }
}
- Mark
>   

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25442-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 12 01:48:23 2007
Return-Path: <java-user-return-25442-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42320 invoked from network); 12 Jan 2007 01:48:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Jan 2007 01:48:22 -0000
Received: (qmail 6064 invoked by uid 500); 12 Jan 2007 01:48:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5349 invoked by uid 500); 12 Jan 2007 01:48:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5338 invoked by uid 99); 12 Jan 2007 01:48:22 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Jan 2007 17:48:22 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Jan 2007 17:48:13 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 5D8A05B783; Thu, 11 Jan 2007 17:47:53 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 56AC37F403
	for <java-user@lucene.apache.org>; Thu, 11 Jan 2007 17:47:53 -0800 (PST)
Date: Thu, 11 Jan 2007 17:47:53 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Technology Preview of new Lucene QueryParser
In-Reply-To: <45A6CC67.2080400@gmail.com>
Message-ID: <Pine.LNX.4.58.0701111745370.29125@hal.rescomp.berkeley.edu>
References: <45A460E2.8090508@gmail.com> <Pine.LNX.4.58.0701101726150.29321@hal.rescomp.berkeley.edu>
 <45A5A468.1030604@gmail.com> <Pine.LNX.4.58.0701102008590.6750@hal.rescomp.berkeley.edu>
 <45A626DA.3080008@gmail.com> <Pine.LNX.4.58.0701111400020.12602@hal.rescomp.berkeley.edu>
 <45A6CC67.2080400@gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: I wasn't clear on this answer. The problem was not grammar ambiguity but
: from a user standpoint...I wanted to differentiate the proximity binary
: operator from the phrase distance operator...even though they are
: similar. Perhaps the differentiation is more confusing then helpful.

it's not confusing if your target audience isn't confused. .. i asked only
as someone who understands LUcene fairly well, and recognised that under
the covers they were (probably) both producing PhraseQueries ... i was
mainly just curious as to your motivation, which makes sense now

(it's mainly just one more special character people have to worry about
escaping)


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25443-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 12 01:48:53 2007
Return-Path: <java-user-return-25443-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42412 invoked from network); 12 Jan 2007 01:48:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Jan 2007 01:48:52 -0000
Received: (qmail 7137 invoked by uid 500); 12 Jan 2007 01:48:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6866 invoked by uid 500); 12 Jan 2007 01:48:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6855 invoked by uid 99); 12 Jan 2007 01:48:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Jan 2007 17:48:51 -0800
X-ASF-Spam-Status: No, hits=3.5 required=10.0
	tests=HTML_MESSAGE,SPF_SOFTFAIL
X-Spam-Check-By: apache.org
Received-SPF: softfail (herse.apache.org: transitioning domain of bim2006@basistech.com does not designate 199.88.205.99 as permitted sender)
Received: from [199.88.205.99] (HELO mail.basistech.com) (199.88.205.99)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Jan 2007 17:48:42 -0800
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C735EB.BCA351A9"
Subject: Use the Luke, Force
Date: Thu, 11 Jan 2007 20:48:19 -0500
Message-ID: <E95FD77F0171D14DA1EEE0A785E92B43019AED5D@mail3.basistech.net>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Use the Luke, Force
Thread-Index: Acc167wJ9Awq2WMcTH23tB6oHDZVjw==
From: "Benson Margulies" <bim2006@basistech.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01C735EB.BCA351A9
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

My experience tonight is that the stock 1.9-based Luke won't open my 2.0
indices. So I fixed up a version of the source.

=20

Anyone else want it?

=20


------_=_NextPart_001_01C735EB.BCA351A9--

From java-user-return-25444-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 12 01:55:49 2007
Return-Path: <java-user-return-25444-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44203 invoked from network); 12 Jan 2007 01:55:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Jan 2007 01:55:48 -0000
Received: (qmail 16192 invoked by uid 500); 12 Jan 2007 01:55:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16159 invoked by uid 500); 12 Jan 2007 01:55:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16148 invoked by uid 99); 12 Jan 2007 01:55:49 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Jan 2007 17:55:49 -0800
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [130.57.169.10] (HELO peabody.ximian.com) (130.57.169.10)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Jan 2007 17:55:40 -0800
Received: (qmail 16596 invoked from network); 12 Jan 2007 01:55:20 -0000
Received: from localhost (HELO caleb.local.joeshaw.org) (joe@127.0.0.1)
  by localhost with SMTP; 12 Jan 2007 01:55:20 -0000
Message-ID: <45A6EA6F.6080406@novell.com>
Date: Thu, 11 Jan 2007 20:54:55 -0500
From: Joe Shaw <joeshaw@novell.com>
User-Agent: Mozilla/5.0 (Macintosh; U; Intel Mac OS X; en-US; rv:1.8.1.1pre) Gecko/20061206 Thunderbird/2.0b1 Mnenhy/0.7.4.0
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Use the Luke, Force
References: <E95FD77F0171D14DA1EEE0A785E92B43019AED5D@mail3.basistech.net>
In-Reply-To: <E95FD77F0171D14DA1EEE0A785E92B43019AED5D@mail3.basistech.net>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

Benson Margulies wrote:
> My experience tonight is that the stock 1.9-based Luke won't open my 2.0
> indices. So I fixed up a version of the source.

I've been seeing this too.

> Anyone else want it?

That would be great, if you don't mind.  A jar would be nice too. :)

Joe

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25445-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 12 01:57:53 2007
Return-Path: <java-user-return-25445-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44400 invoked from network); 12 Jan 2007 01:57:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Jan 2007 01:57:53 -0000
Received: (qmail 17995 invoked by uid 500); 12 Jan 2007 01:57:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17959 invoked by uid 500); 12 Jan 2007 01:57:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17948 invoked by uid 99); 12 Jan 2007 01:57:47 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Jan 2007 17:57:47 -0800
X-ASF-Spam-Status: No, hits=1.5 required=10.0
	tests=SPF_SOFTFAIL
X-Spam-Check-By: apache.org
Received-SPF: softfail (herse.apache.org: transitioning domain of bim2006@basistech.com does not designate 199.88.205.99 as permitted sender)
Received: from [199.88.205.99] (HELO mail.basistech.com) (199.88.205.99)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Jan 2007 17:57:38 -0800
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Use the Luke, Force
Date: Thu, 11 Jan 2007 20:57:16 -0500
Message-ID: <E95FD77F0171D14DA1EEE0A785E92B43019AED5E@mail3.basistech.net>
In-Reply-To: <45A6EA6F.6080406@novell.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Use the Luke, Force
Thread-Index: Acc17Mmo1Qorp5sDTZ65z32dYciYcwAAB9Dg
From: "Benson Margulies" <bim2006@basistech.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

I don't know how to build up that magic, signed, auto-launching device.
I'll post diffs, however, momentarily.

-----Original Message-----
From: Joe Shaw [mailto:joeshaw@novell.com]=20
Sent: Thursday, January 11, 2007 8:55 PM
To: java-user@lucene.apache.org
Subject: Re: Use the Luke, Force

Hi,

Benson Margulies wrote:
> My experience tonight is that the stock 1.9-based Luke won't open my
2.0
> indices. So I fixed up a version of the source.

I've been seeing this too.

> Anyone else want it?

That would be great, if you don't mind.  A jar would be nice too. :)

Joe

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25446-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 12 02:01:18 2007
Return-Path: <java-user-return-25446-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45101 invoked from network); 12 Jan 2007 02:01:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Jan 2007 02:01:17 -0000
Received: (qmail 23036 invoked by uid 500); 12 Jan 2007 02:01:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23004 invoked by uid 500); 12 Jan 2007 02:01:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 22993 invoked by uid 99); 12 Jan 2007 02:01:18 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Jan 2007 18:01:18 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Jan 2007 18:01:09 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id B97115B77F; Thu, 11 Jan 2007 18:00:48 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id B69DA7F403
	for <java-user@lucene.apache.org>; Thu, 11 Jan 2007 18:00:48 -0800 (PST)
Date: Thu, 11 Jan 2007 18:00:48 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Technology Preview of new Lucene QueryParser
In-Reply-To: <45A6C5E0.10406@gmail.com>
Message-ID: <Pine.LNX.4.58.0701111747550.29125@hal.rescomp.berkeley.edu>
References: <45A460E2.8090508@gmail.com> <Pine.LNX.4.58.0701101726150.29321@hal.rescomp.berkeley.edu>
 <45A5A468.1030604@gmail.com> <Pine.LNX.4.58.0701102008590.6750@hal.rescomp.berkeley.edu>
 <45A626DA.3080008@gmail.com> <Pine.LNX.4.58.0701111400020.12602@hal.rescomp.berkeley.edu>
 <45A6C5E0.10406@gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: This sounds troubling to me now :) I may need to clear up my
: understanding of this and rework the parser:
: "A | B | C ! D ! E" wold get parsed as allFields:a allFields:b
: (+allFields:c -allFields:d -allFields:e)
: This is because ! binds tighter than |...
: Sounds like I need to bone up on how I thought this query would operate.
: I set up this logic back when I was new to Lucene and have not
: considered it since. Seems as though the hits will be right but perhaps
: the scoring will not be correct?

it depends on your definition of "correct" .. take a look at the
Query.toString and Explanation.toString output from a query for something
like "A X Y B C -D" vs the same results of "A X Y B (C -D)" or "(A X Y B)
(C -D)" .. particulararly when X and Y aren't in the documents and you'll
see what i mean.

: > ...it seems like a shortcut for "match on foo in ANY of the following
: > fields" would be needed in more cases then a shortfut for "match on foo in
: > ALL of the following fields"
: >
: I was mistaken: it is actually field1:foo field2:foo. OR instead of AND.
: Sorry about that. Obviously it looks like I should be looking into
: DisjunctionMaxQuery instead though.

well, i have an unhealthy obsession with DisjunctionMaxQuery, so don't
assume you *should* use it ... it's just the first thing that occured to
me what i saw your field1,field2(foo) syntax ... making that be a shortcut
for (field1(foo) field2(foo)) is perfectly fine too if that's the use case
you expect to be more useful.

where supporting DisjunctionMaxQuery would really be cool is if you
allowed people to specify the tiebreaker value, with something like...

	field1,field2(foo):0.05

..and if a tiebreaker isn't specified, you default to just using a
BooleanQuery.

Incidently, is field1(foo bar) a shortcut for field1(foo) field1(bar) like
in the regular QueryParser?



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25447-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 12 02:01:50 2007
Return-Path: <java-user-return-25447-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45165 invoked from network); 12 Jan 2007 02:01:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Jan 2007 02:01:49 -0000
Received: (qmail 24809 invoked by uid 500); 12 Jan 2007 02:01:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24517 invoked by uid 500); 12 Jan 2007 02:01:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24506 invoked by uid 99); 12 Jan 2007 02:01:49 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Jan 2007 18:01:49 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of markrmiller@gmail.com designates 66.249.82.227 as permitted sender)
Received: from [66.249.82.227] (HELO wx-out-0506.google.com) (66.249.82.227)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Jan 2007 18:01:39 -0800
Received: by wx-out-0506.google.com with SMTP id i29so634896wxd
        for <java-user@lucene.apache.org>; Thu, 11 Jan 2007 18:01:18 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=aauSOhXRSGTBCgIx+r8H2fXvk9OB35ZHsfzcs4v8LbrwK8aFud3nySHQ9FZ4/Usmk+y5rEdCSJqyf82E4eM09SJcfpFVl4z2dbRwJW7jEvM9jDbl1r7lbG0B4rsl0jI//2UYzNkN50bEN6PBgaq2GHgO7MT9C/SzluzzOenhO7E=
Received: by 10.90.105.20 with SMTP id d20mr42680agc.1168567278479;
        Thu, 11 Jan 2007 18:01:18 -0800 (PST)
Received: from ?192.168.1.103? ( [216.66.114.42])
        by mx.google.com with ESMTP id 34sm2052321wra.2007.01.11.18.01.17;
        Thu, 11 Jan 2007 18:01:18 -0800 (PST)
Message-ID: <45A6EB45.6050909@gmail.com>
Date: Thu, 11 Jan 2007 20:58:29 -0500
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 1.5.0.9 (Windows/20061207)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Technology Preview of new Lucene QueryParser
References: <45A460E2.8090508@gmail.com> <Pine.LNX.4.58.0701101726150.29321@hal.rescomp.berkeley.edu> <45A5A468.1030604@gmail.com> <Pine.LNX.4.58.0701102008590.6750@hal.rescomp.berkeley.edu> <45A626DA.3080008@gmail.com> <Pine.LNX.4.58.0701111400020.12602@hal.rescomp.berkeley.edu> <45A6CC67.2080400@gmail.com> <Pine.LNX.4.58.0701111745370.29125@hal.rescomp.berkeley.edu>
In-Reply-To: <Pine.LNX.4.58.0701111745370.29125@hal.rescomp.berkeley.edu>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org



Chris Hostetter wrote:
> : I wasn't clear on this answer. The problem was not grammar ambiguity but
> : from a user standpoint...I wanted to differentiate the proximity binary
> : operator from the phrase distance operator...even though they are
> : similar. Perhaps the differentiation is more confusing then helpful.
>
> it's not confusing if your target audience isn't confused. .. i asked only
> as someone who understands LUcene fairly well, and recognised that under
> the covers they were (probably) both producing PhraseQueries ... i was
> mainly just curious as to your motivation, which makes sense now
>   
Both actually produce SpanQueries...I think that Surround makes this 
compromise as well. Because the Phrase search must be able to
be in a span search and it is desirable to have the same type of phrase 
search in a Span search or not, both must produce a SpanQuery.
I just worry that after saying ~ is a binary proximity operator that it 
is confusing to say
"old horse"~3 cow
is different then
"old horse" ~3 cow
is dfferent from
"old horse"~3 ~3 cow
> (it's mainly just one more special character people have to worry about
> escaping)
>   
I hope that this will not be much of a problem...the ':' will only be 
recognized if it follows two sets of quotes and a series of digits 
follows it..."the search":4
if it does not fit that pattern here is no need to escape it. Also, no 
need to escape ~ unless its surrounded by spaces.



I'm most curious to hear what you think of the nested boolean query 
issue...will my scores be screwed up? behave in a usable fashion? Any 
insight to offer?


- Mark

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25448-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 12 02:03:34 2007
Return-Path: <java-user-return-25448-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45531 invoked from network); 12 Jan 2007 02:03:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Jan 2007 02:03:33 -0000
Received: (qmail 29062 invoked by uid 500); 12 Jan 2007 02:03:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29026 invoked by uid 500); 12 Jan 2007 02:03:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29015 invoked by uid 99); 12 Jan 2007 02:03:33 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Jan 2007 18:03:33 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of markrmiller@gmail.com designates 66.249.82.237 as permitted sender)
Received: from [66.249.82.237] (HELO wx-out-0506.google.com) (66.249.82.237)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Jan 2007 18:03:23 -0800
Received: by wx-out-0506.google.com with SMTP id i29so635160wxd
        for <java-user@lucene.apache.org>; Thu, 11 Jan 2007 18:03:02 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=fwYrP0fZaCe/4qA5ziwhX8cOvn6gp4Vx4GeDYOnplAMAycS363RZxjN6UUCJfbI/HE61ZusMkQ5NsYEA7kIcOwuFRvp4TplooCc1D3WDhlpIuyanLBZx7gJgCQD4uiINSrc/cQdNTbYbj9ytJ1zNbwc7aY0ekKg8qNKuvCu3O7c=
Received: by 10.70.38.12 with SMTP id l12mr255814wxl.1168567381790;
        Thu, 11 Jan 2007 18:03:01 -0800 (PST)
Received: from ?192.168.1.103? ( [216.66.114.42])
        by mx.google.com with ESMTP id 67sm2092411wra.2007.01.11.18.03.00;
        Thu, 11 Jan 2007 18:03:01 -0800 (PST)
Message-ID: <45A6EBAC.302@gmail.com>
Date: Thu, 11 Jan 2007 21:00:12 -0500
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 1.5.0.9 (Windows/20061207)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Use the Luke, Force
References: <E95FD77F0171D14DA1EEE0A785E92B43019AED5D@mail3.basistech.net>
In-Reply-To: <E95FD77F0171D14DA1EEE0A785E92B43019AED5D@mail3.basistech.net>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Yes. The other option is to download the jar and run it with a command 
line argument pointing to the lucene2 jar. I would love to avoid that step.
Hook me up. (responding to list to point out second option - I prefer 
this one)

- Mark

Benson Margulies wrote:
> My experience tonight is that the stock 1.9-based Luke won't open my 2.0
> indices. So I fixed up a version of the source.
>
>  
>
> Anyone else want it?
>
>  
>
>
>   

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25449-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 12 02:05:51 2007
Return-Path: <java-user-return-25449-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 46296 invoked from network); 12 Jan 2007 02:05:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Jan 2007 02:05:49 -0000
Received: (qmail 32535 invoked by uid 500); 12 Jan 2007 02:05:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32507 invoked by uid 500); 12 Jan 2007 02:05:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32496 invoked by uid 99); 12 Jan 2007 02:05:47 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Jan 2007 18:05:47 -0800
X-ASF-Spam-Status: No, hits=2.1 required=10.0
	tests=SPF_SOFTFAIL,UPPERCASE_50_75
X-Spam-Check-By: apache.org
Received-SPF: softfail (herse.apache.org: transitioning domain of bim2006@basistech.com does not designate 199.88.205.99 as permitted sender)
Received: from [199.88.205.99] (HELO mail.basistech.com) (199.88.205.99)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Jan 2007 18:05:38 -0800
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
Subject: Luke diffs
Date: Thu, 11 Jan 2007 21:05:15 -0500
Message-ID: <E95FD77F0171D14DA1EEE0A785E92B43019AED60@mail3.basistech.net>
X-MS-Has-Attach: yes
X-MS-TNEF-Correlator: 
Thread-Topic: Luke diffs
Thread-Index: Acc17hnqiH0Ns7iXT72hlCum5JFLjw==
From: "Benson Margulies" <bim2006@basistech.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org




begin 666 luke_diffs.dat
M3VYL>2!I;B N+B]L=6ME.B!B=6EL9 ID:69F("UU("UR("XO<W)C+V]R9R]G
M971O<'0O;'5K92],=6ME+FIA=F$@+BXO;'5K92]S<F,O;W)G+V=E=&]P="]L
M=6ME+TQU:V4N:F%V80HM+2T@+B]S<F,O;W)G+V=E=&]P="]L=6ME+TQU:V4N
M:F%V80DR,# U+3 R+3$X(#$W.C4Q.C4P+C P,# P,# P," M,#4P, HK*RL@
M+BXO;'5K92]S<F,O;W)G+V=E=&]P="]L=6ME+TQU:V4N:F%V80DR,# W+3 Q
M+3$Q(#(P.C0Q.C$T+C@P,S,U.#8P," M,#4P, I 0" M,3(S-BPX("LQ,C,V
M+#D@0$ *(" @(" @(" @(" @(&EF("AK(#X@,"D@<V(N87!P96YD*"=<;B<I
M.PH@(" @(" @(" @(" @<V(N87!P96YD*&9;:UTN<W1R:6YG5F%L=64H*2D[
M"B @(" @(" @(" @?0HM(" @(" @(" @($9I96QD(&9I96QD(#T@;F5W($9I
M96QD*&ED>$9I96QD<UMI72P@<V(N=&]3=')I;F<H*2P@9ELP72YI<U-T;W)E
M9"@I+"!F6S!=+FES26YD97AE9"@I+"!F6S!=+FES5&]K96YI>F5D*"DL"BT@
M(" @(" @(" @(" @(" @("!F6S!=+FES5&5R;59E8W1O<E-T;W)E9"@I*3L*
M*R @(" @(" @("!&:65L9"!F:65L9" ](&YE=R!&:65L9"AI9'A&:65L9'-;
M:5TL('-B+G1O4W1R:6YG*"DL(&9;,%TN:7-3=&]R960H*2 _($9I96QD+E-T
M;W)E+EE%4R Z($9I96QD+E-T;W)E+DY/+ HK(" @(" @(" @(" @(" @(" @
M9ELP72YI<TEN9&5X960H*2 ]/2!F86QS92 _($9I96QD+DEN9&5X+DY/(#H@
M*&9;,%TN:7-4;VME;FEZ960H*2 _($9I96QD+DEN9&5X+E1/2T5.25I%1" Z
M($9I96QD+DEN9&5X+E5.7U1/2T5.25I%1"DL"BL@(" @(" @(" @(" @(" @
M("!F6S!=+FES5&5R;59E8W1O<E-T;W)E9"@I(#\@1FEE;&0N5&5R;59E8W1O
M<BY915,@.B!&:65L9"Y497)M5F5C=&]R+DY/*3L*(" @(" @(" @("!F:65L
M9"YS971";V]S="AF6S!=+F=E=$)O;W-T*"DI.PH@(" @(" @(" @(&1O8RYP
M=70H(G-F7R(@*R!I9'A&:65L9'-;:5TL(&9I96QD*3L*(" @(" @(" @("!S
M9BYA9&0H:61X1FEE;&1S6VE=*3L*0$ @+3$S.#@L." K,3,X.2PQ,"! 0 H@
M(" @(" @3V)J96-T(&-B5&]K96YI>F5D(#T@9FEN9"AT86)S6VE=+" B8V)4
M;VME;FEZ960B*3L*(" @(" @($]B:F5C="!C8E161B ](&9I;F0H=&%B<UMI
M72P@(F-B5%9&(BD["B @(" @("!3=')I;F<@=&5X=" ](&=E=%-T<FEN9RAF
M5&5X="P@(G1E>'0B*3L*+2 @(" @($9I96QD(&8@/2!N97<@1FEE;&0H;F%M
M92P@=&5X="P@9V5T0F]O;&5A;BAC8E-T;W)E9"P@(G-E;&5C=&5D(BDL(&=E
M=$)O;VQE86XH8V));F1E>&5D+" B<V5L96-T960B*2P@9V5T0F]O;&5A;B@*
M+2 @(" @(" @(" @(" @8V)4;VME;FEZ960L(")S96QE8W1E9"(I+"!G971"
M;V]L96%N*&-B5%9&+" B<V5L96-T960B*2D["BL@(" @("!&:65L9"!F(#T@
M;F5W($9I96QD*&YA;64L('1E>'0L(&=E=$)O;VQE86XH8V)3=&]R960L(")S
M96QE8W1E9"(I(#\@1FEE;&0N4W1O<F4N6453(#H@1FEE;&0N4W1O<F4N3D\L
M"BL@(" @(" @(" @(" @(&=E=$)O;VQE86XH8V));F1E>&5D+" B<V5L96-T
M960B*2 _( HK(" @(" @(" @(" @(" @(" @(" @("AG971";V]L96%N*&-B
M5&]K96YI>F5D+" B<V5L96-T960B*2 _($9I96QD+DEN9&5X+E1/2T5.25I%
M1" Z($9I96QD+DEN9&5X+E5.7U1/2T5.25I%1"D@.B!&:65L9"Y);F1E>"Y.
M3R L( HK(" @(" @(" @(" @(" @(" @(" @(&=E=$)O;VQE86XH8V)45D8L
M(")S96QE8W1E9"(I(#\@1FEE;&0N5&5R;59E8W1O<BY915,@.B!&:65L9"Y4
M97)M5F5C=&]R+DY/*3L*(" @(" @(%-T<FEN9R!B;V]S=%,@/2!G9713=')I
M;F<H9D)O;W-T+" B=&5X="(I+G1R:6TH*3L*(" @(" @(&EF("@A8F]O<W13
M+F5Q=6%L<R@B(BD@)B8@(6)O;W-T4RYE<75A;',H(C$N,"(I*2!["B @(" @
M(" @(&9L;V%T(&)O;W-T(#T@,2XP9CL*0$ @+3$T-#0L-R K,30T-RPW($! 
M"B @(" @26YT96=E<B!$;V-.=6T@/2 H26YT96=E<BD@9V5T4')O<&5R='DH
M961I=&1O8RP@(F1O8TYU;2(I.PH@(" @(&EF("A$;V-.=6T@/3T@;G5L;"D@
M<F5T=7)N.PH@(" @('1R>2!["BT@(" @("!I<BYD96QE=&4H1&]C3G5M+FEN
M=%9A;'5E*"DI.PHK(" @(" @:7(N9&5L971E1&]C=6UE;G0H1&]C3G5M+FEN
M=%9A;'5E*"DI.PH@(" @('T@8V%T8V@@*$5X8V5P=&EO;B!E*2!["B @(" @
M("!E+G!R:6YT4W1A8VM4<F%C92@I.PH@(" @(" @97)R;W)-<V<H(D524D]2
M(&1E;&5T:6YG.B B("L@92YG971-97-S86=E*"DI.PI 0" M,C R."PW("LR
M,#,Q+#<@0$ *(" @("!]"B @(" @=')Y('L*(" @(" @('-H;W=.97AT5&5R
M;2AF:6YD*")F0V]M8F\B*2P@9E1E>'0I.PHM(" @(" @:7(N9&5L971E*'0I
M.PHK(" @(" @:7(N9&5L971E1&]C=6UE;G1S*'0I.PH@(" @('T@8V%T8V@@
M*$5X8V5P=&EO;B!E*2!["B @(" @("!E+G!R:6YT4W1A8VM4<F%C92@I.PH@
M(" @(" @<VAO=U-T871U<RAE+F=E=$UE<W-A9V4H*2D["D! ("TR,#0X+#<@
M*S(P-3$L-R! 0 H@(" @('T*(" @("!T<GD@>PH@(" @(" @9&]C:60@/2!)
M;G1E9V5R+G!A<G-E26YT*&=E=%-T<FEN9RAD;V-.=6TL(")T97AT(BDI.PHM
M(" @(" @:7(N9&5L971E*&1O8VED*3L**R @(" @(&ER+F1E;&5T941O8W5M
M96YT*&1O8VED*3L*(" @(" @('-H;W=$;V,H9&]C3G5M*3L*(" @(" @(&EN
M:71/=F5R=FEE=R@I.PH@(" @(" @<VAO=U-T871U<R@B1&]C=6UE;G0@(R(@
M*R!D;V-I9" K("(@9&5L971E9"!/2RXB*3L*0$ @+3(P-S0L-R K,C W-RPW
M($! "B @(" @("!);G1E9V5R(&1O8TED(#T@*$EN=&5G97(I(&=E=%!R;W!E
M<G1Y*')O=W-;:5TL(")D;V-I9"(I.PH@(" @(" @:68@*&1O8TED(#T](&YU
M;&PI(&-O;G1I;G5E.PH@(" @(" @=')Y('L*+2 @(" @(" @:7(N9&5L971E
M*&1O8TED+FEN=%9A;'5E*"DI.PHK(" @(" @("!I<BYD96QE=&5$;V-U;65N
M="AD;V-)9"YI;G1686QU92@I*3L*(" @(" @('T@8V%T8V@@*$5X8V5P=&EO
M;B!E*2!["B @(" @(" @(&-O;G1I;G5E.PH@(" @(" @?0ID:69F("UU("UR
M("XO<W)C+V]R9R]G971O<'0O;'5K92]P;'5G:6YS+T%N86QY>F5R5&]O;%!L
M=6=I;BYJ879A("XN+VQU:V4O<W)C+V]R9R]G971O<'0O;'5K92]P;'5G:6YS
M+T%N86QY>F5R5&]O;%!L=6=I;BYJ879A"BTM+2 N+W-R8R]O<F<O9V5T;W!T
M+VQU:V4O<&QU9VEN<R]!;F%L>7IE<E1O;VQ0;'5G:6XN:F%V80DR,# U+3 R
M+3$X(#$W.C,Y.C V+C P,# P,# P," M,#4P, HK*RL@+BXO;'5K92]S<F,O
M;W)G+V=E=&]P="]L=6ME+W!L=6=I;G,O06YA;'EZ97)4;V]L4&QU9VEN+FIA
M=F$),C P-RTP,2TQ,2 R,#HT,CHR."XU-3(W-S4V,# @+3 U,# *0$ @+3<T
M+#@@*S<T+#<@0$ *(" @(" @(" @(" @('T*(" @(" @(" @(" @(&%P<"YS
M9713=')I;F<H;W5T<'5T5&5X="P@(G1E>'0B+"!A<' N9V5T4W1R:6YG*&EN
M<'5T5&5X="P*(" @(" @(" @(" @(" @(" @(" @(G1E>'0B*2D["BT@(" @
M(" @(" @("!4;VME;E-T<F5A;2!T<R ](&%N86QY>F5R+G1O:V5N4W1R96%M
M*&YE=R!3=')I;F=296%D97(H87!P"BT@(" @(" @(" @(" @(" @(" @("YG
M9713=')I;F<H:6YP=71497AT+" B=&5X="(I*2D["BL@(" @(" @(" @("!4
M;VME;E-T<F5A;2!T<R ](&%N86QY>F5R+G1O:V5N4W1R96%M*")T97AT(BP@
M;F5W(%-T<FEN9U)E861E<BAA<' N9V5T4W1R:6YG*&EN<'5T5&5X="P@(G1E
M>'0B*2DI.PH@(" @(" @(" @(" @5&]K96X@=&]K96X@/2!T<RYN97AT*"D[
L"B @(" @(" @(" @("!A<' N<F5M;W9E06QL*')E<W5L='-,:7-T*3L*( H`
`
end

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25450-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 12 02:10:32 2007
Return-Path: <java-user-return-25450-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47167 invoked from network); 12 Jan 2007 02:10:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Jan 2007 02:10:31 -0000
Received: (qmail 38910 invoked by uid 500); 12 Jan 2007 02:10:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38868 invoked by uid 500); 12 Jan 2007 02:10:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38855 invoked by uid 99); 12 Jan 2007 02:10:22 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Jan 2007 18:10:22 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [203.16.214.141] (HELO ipmail02.adl2.internode.on.net) (203.16.214.141)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Jan 2007 18:10:12 -0800
Received: from hardlight.com.au (HELO [192.168.1.6]) ([203.122.246.130])
  by ipmail02.adl2.internode.on.net with ESMTP; 12 Jan 2007 12:39:47 +1030
X-IronPort-AV: i="4.13,175,1167571800"; 
   d="scan'208"; a="70396345:sNHT24576804"
Message-ID: <45A6EDE8.6070200@hardlight.com.au>
Date: Fri, 12 Jan 2007 12:39:44 +1030
From: Jason <jeacott@hardlight.com.au>
Reply-To:  jeacott@hardlight.com.au
User-Agent: Thunderbird 1.5.0.8 (Windows/20061025)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
CC:  erickerickson@gmail.com
Subject: Re: how can I filter my search to not include items containing a
 particular field and value?
References: <45A50709.6070702@hardlight.com.au> <359a92830701100900o6334bbb9k2ed9995c3b4b3c9a@mail.gmail.com>
In-Reply-To: <359a92830701100900o6334bbb9k2ed9995c3b4b3c9a@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks Erick,
	this is what I ended up doing more or less but I'm not happy with it 
really,
						 hparser.setDefaultOperator(QueryParser.Operator.AND);
Query hideQuery =hparser.parse("properties@"+hideterm+":"+hidevalue); 

cquery.add(hideQuery, BooleanClause.Occur.MUST_NOT);

what I was really looking for was a way to code the fields I wanted 
hidden without such a loose interface. I was expecting something like a 
fieldQuery object but couldn't find anything appropriate.

Thank you for your help.

Erick Erickson wrote:
> Would something like the following work for you?
> 
> BooleanQuery bq = new BooleanQuery();
> bq.add(your built-up query);
> bq.add(your not clause, MUSTNOT);
> 
> 
> Now you can use your bq as your query to search.
> 
> 
> NOTE: there is continual confusion what the - syntax really does, you might
> want to search the mail archive for one of several explications if you are
> thinking of the NOT operator like a boolean logic operator. It's not, 
> quite.
> 
> On 1/10/07, Jason <jeacott@hardlight.com.au> wrote:
>>
>> how can I filter my search to not include items containing a particular
>> field and value?
>>
>> I want effectively to add -myfieldname:myvalue to the end of  my search
>> query, but I cant see how to do this via the api.
>> I have a complex query built up via the api and just want to filter it
>> based on field name/value pairs.
>>
>> I'm sure it must be simple - I just cant see how to do it.
>>
>> thanks.
>> Jason.
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
> 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25451-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 12 02:11:50 2007
Return-Path: <java-user-return-25451-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47316 invoked from network); 12 Jan 2007 02:11:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Jan 2007 02:11:49 -0000
Received: (qmail 42399 invoked by uid 500); 12 Jan 2007 02:11:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42191 invoked by uid 500); 12 Jan 2007 02:11:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42179 invoked by uid 99); 12 Jan 2007 02:11:49 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Jan 2007 18:11:49 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,UPPERCASE_25_50
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 64.233.182.188 as permitted sender)
Received: from [64.233.182.188] (HELO nf-out-0910.google.com) (64.233.182.188)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Jan 2007 18:11:40 -0800
Received: by nf-out-0910.google.com with SMTP id a27so1032856nfc
        for <java-user@lucene.apache.org>; Thu, 11 Jan 2007 18:11:19 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=CyblEH1gsEfpXeNLevcQcvBkYGhgx3O4Fb6xEOac1gzQKDa60o83A+C2buJPzAShJuh2rmGImCUypeS14+yB0t+o1nmAPYRtibw5ZZrd644rSKhqNPtiVdXr8tFczVqPVVh4YCRIsQvRa843C+EiBi+jgDEM4qraazVF8N/V3n8=
Received: by 10.82.135.13 with SMTP id i13mr26270bud.1168567879100;
        Thu, 11 Jan 2007 18:11:19 -0800 (PST)
Received: by 10.82.162.9 with HTTP; Thu, 11 Jan 2007 18:11:19 -0800 (PST)
Message-ID: <359a92830701111811m6d027ff2n7e4f4eba656357dd@mail.gmail.com>
Date: Thu, 11 Jan 2007 21:11:19 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Modifying StandardAnalyzer
In-Reply-To: <0D6A3C278F4DC346B98DF4D2F1397E811862F19E@UREXCHVS3.ur.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_37727_22468310.1168567879021"
References: <0D6A3C278F4DC346B98DF4D2F1397E811862F19E@UREXCHVS3.ur.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_37727_22468310.1168567879021
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Would it be simpler just to modify the input with a regex rather than risk
messing with StandardANalyzer? Or wouldn't that do what you need?

On 1/11/07, Van Nguyen <vnguyen@ur.com> wrote:
>
> Hi,
>
>
>
> I need to modify the StandardAnalyzer so that it will tokenize zip codes
> that look like this:
>
>
>
> 92626-2646
>
>
>
> I think the part I need to modify is in here - specifically:
>
>
>
> <HAS_DIGIT> <P> <ALPHANUM>
>
>
>
> // floating point, serial, model numbers, ip addresses, etc.
>
>   // every other segment must have at least one digit
>
> | <NUM: (<ALPHANUM> <P> <HAS_DIGIT>
>
>        | <HAS_DIGIT> <P> <ALPHANUM>
>
>        | <HAS_DIGIT> <M>
>
>        | <HAS_DIGIT> (<P> <HAS_DIGIT>)+ <M>
>
>        | <LETTER> (<P> <LETTER>)+
>
>        | <ALPHANUM> (<P> <HAS_DIGIT> <P> <ALPHANUM>)+
>
>        | <HAS_DIGIT> (<P> <ALPHANUM> <P> <HAS_DIGIT>)+
>
>        | <ALPHANUM> <P> <HAS_DIGIT> (<P> <ALPHANUM> <P> <HAS_DIGIT>)+
>
>        | <HAS_DIGIT> <P> <ALPHANUM> (<P> <HAS_DIGIT> <P> <ALPHANUM>)+
>
>         )
>
>   >
>
>
>
> Is there a way to keep that line so that the StandardAnalyzer works as
> is - but tokenize anything that looks like
>
>
>
> (HAS_DIGITS) <P>) | (<HAS_DIGITS> <P> <HAS_DIGITS>) or even better:
>
>
>
> (<DIGIT><DIGIT><DIGIT><DIGIT><DIGIT><P>) |
> <DIGIT><DIGIT><DIGIT><DIGIT><DIGIT><P><DIGIT><DIGIT><DIGIT><DIGIT>) - I
> have zip codes that look like 92626, 92626-, and 92626-2646
>
>
>
> I've tried adding that both lines to the "SKIP" section - but to no
> avail.
>
>
>
>
>

------=_Part_37727_22468310.1168567879021--

From java-user-return-25452-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 12 02:17:37 2007
Return-Path: <java-user-return-25452-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48341 invoked from network); 12 Jan 2007 02:17:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Jan 2007 02:17:36 -0000
Received: (qmail 48473 invoked by uid 500); 12 Jan 2007 02:17:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48442 invoked by uid 500); 12 Jan 2007 02:17:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48431 invoked by uid 99); 12 Jan 2007 02:17:36 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Jan 2007 18:17:36 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of markrmiller@gmail.com designates 66.249.82.237 as permitted sender)
Received: from [66.249.82.237] (HELO wx-out-0506.google.com) (66.249.82.237)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Jan 2007 18:17:25 -0800
Received: by wx-out-0506.google.com with SMTP id i29so637527wxd
        for <java-user@lucene.apache.org>; Thu, 11 Jan 2007 18:17:05 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=aKABYA8Itm/mNxXstY+qsMir8/tYvYbRDGlkMeH4QEasj2gwrR69bMtQlGwcrcfFTeUBGXkDBtdUN6GszUdXk4rk8+ZiwECXhcHKQdJ8yGyU5Bj4KTqlhacWMLO1KBKaxYvyli7H1iFPtxOYDvsiTy4u6n7AjTDKYckpCdr/ctU=
Received: by 10.70.80.6 with SMTP id d6mr289536wxb.1168568225116;
        Thu, 11 Jan 2007 18:17:05 -0800 (PST)
Received: from ?192.168.1.103? ( [216.66.114.42])
        by mx.google.com with ESMTP id 33sm2085453wra.2007.01.11.18.17.03;
        Thu, 11 Jan 2007 18:17:04 -0800 (PST)
Message-ID: <45A6EEF8.3010803@gmail.com>
Date: Thu, 11 Jan 2007 21:14:16 -0500
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 1.5.0.9 (Windows/20061207)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Technology Preview of new Lucene QueryParser
References: <45A460E2.8090508@gmail.com> <Pine.LNX.4.58.0701101726150.29321@hal.rescomp.berkeley.edu> <45A5A468.1030604@gmail.com> <Pine.LNX.4.58.0701102008590.6750@hal.rescomp.berkeley.edu> <45A626DA.3080008@gmail.com> <Pine.LNX.4.58.0701111400020.12602@hal.rescomp.berkeley.edu> <45A6C5E0.10406@gmail.com> <Pine.LNX.4.58.0701111747550.29125@hal.rescomp.berkeley.edu>
In-Reply-To: <Pine.LNX.4.58.0701111747550.29125@hal.rescomp.berkeley.edu>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org


>
> Incidently, is field1(foo bar) a shortcut for field1(foo) field1(bar) like
> in the regular QueryParser?
>   
I believe I just or the queries together:

        example = "field1,field2((search & old) ~3 horse)";
        expected = "(+spanNear([field1:search, field1:horse], 3, false) 
+spanNear([field1:old, field1:horse], 3, false)) 
(+spanNear([field2:search, field2:horse], 3, false) 
+spanNear([field2:old, field2:horse], 3, false))";

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25453-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 12 02:50:23 2007
Return-Path: <java-user-return-25453-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59977 invoked from network); 12 Jan 2007 02:50:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Jan 2007 02:50:22 -0000
Received: (qmail 70792 invoked by uid 500); 12 Jan 2007 02:50:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70756 invoked by uid 500); 12 Jan 2007 02:50:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70738 invoked by uid 99); 12 Jan 2007 02:50:20 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Jan 2007 18:50:20 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [203.16.214.141] (HELO ipmail02.adl2.internode.on.net) (203.16.214.141)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Jan 2007 18:50:10 -0800
Received: from hardlight.com.au (HELO [192.168.1.6]) ([203.122.246.130])
  by ipmail02.adl2.internode.on.net with ESMTP; 12 Jan 2007 13:19:44 +1030
X-IronPort-AV: i="4.13,175,1167571800"; 
   d="scan'208"; a="70415022:sNHT1830983791"
Message-ID: <45A6F738.9000808@hardlight.com.au>
Date: Fri, 12 Jan 2007 13:19:28 +1030
From: Jason <jeacott@hardlight.com.au>
Reply-To:  jeacott@hardlight.com.au
User-Agent: Thunderbird 1.5.0.8 (Windows/20061025)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: where is the proper place to report lucene bugs?
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

can someone please tell me where the most appropriate place to report 
bugs might be - in this case for the hit-highlighter contribution

Thanks
Jason.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25454-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 12 03:18:10 2007
Return-Path: <java-user-return-25454-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 66009 invoked from network); 12 Jan 2007 03:18:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Jan 2007 03:18:09 -0000
Received: (qmail 98120 invoked by uid 500); 12 Jan 2007 03:18:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98080 invoked by uid 500); 12 Jan 2007 03:18:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98069 invoked by uid 99); 12 Jan 2007 03:18:10 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Jan 2007 19:18:10 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [208.97.132.177] (HELO spunkymail-a12.dreamhost.com) (208.97.132.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Jan 2007 19:18:00 -0800
Received: from [192.168.0.2] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a12.dreamhost.com (Postfix) with ESMTP id 827277FAB
	for <java-user@lucene.apache.org>; Thu, 11 Jan 2007 19:17:33 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <45A6F738.9000808@hardlight.com.au>
References: <45A6F738.9000808@hardlight.com.au>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <66E6E637-7532-4D6F-BF4C-4C5F39A5108E@apache.org>
Content-Transfer-Encoding: 7bit
From: Grant Ingersoll <gsingers@apache.org>
Subject: Re: where is the proper place to report lucene bugs?
Date: Thu, 11 Jan 2007 22:17:32 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org

 From the resources section of the website, the Issue Tracking link  
is: http://issues.apache.org/jira/browse/LUCENE

Also, it is helpful if you have done a preliminary search on the  
topic and some reasonable investigation to confirm that it is in fact  
a bug.  If your not sure, please ask on this list.

-Grant

On Jan 11, 2007, at 9:49 PM, Jason wrote:

> can someone please tell me where the most appropriate place to  
> report bugs might be - in this case for the hit-highlighter  
> contribution
>
> Thanks
> Jason.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

--------------------------
Grant Ingersoll
Center for Natural Language Processing
http://www.cnlp.org

Read the Lucene Java FAQ at http://wiki.apache.org/jakarta-lucene/ 
LuceneFAQ



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25455-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 12 04:19:08 2007
Return-Path: <java-user-return-25455-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 74688 invoked from network); 12 Jan 2007 04:19:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Jan 2007 04:19:07 -0000
Received: (qmail 46610 invoked by uid 500); 12 Jan 2007 04:19:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46191 invoked by uid 500); 12 Jan 2007 04:19:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46180 invoked by uid 99); 12 Jan 2007 04:19:07 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Jan 2007 20:19:07 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [203.16.214.141] (HELO ipmail02.adl2.internode.on.net) (203.16.214.141)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Jan 2007 20:18:57 -0800
Received: from hardlight.com.au (HELO [192.168.1.6]) ([203.122.246.130])
  by ipmail02.adl2.internode.on.net with ESMTP; 12 Jan 2007 14:48:33 +1030
X-IronPort-AV: i="4.13,176,1167571800"; 
   d="scan'208"; a="70453765:sNHT108221589"
Message-ID: <45A70C15.9060007@hardlight.com.au>
Date: Fri, 12 Jan 2007 14:48:29 +1030
From: Jason <jeacott@hardlight.com.au>
Reply-To:  jeacott@hardlight.com.au
User-Agent: Thunderbird 1.5.0.8 (Windows/20061025)
MIME-Version: 1.0
To:  java-user@lucene.apache.org,  gsingers@apache.org
Subject: Re: where is the proper place to report lucene bugs?
References: <45A6F738.9000808@hardlight.com.au> <66E6E637-7532-4D6F-BF4C-4C5F39A5108E@apache.org>
In-Reply-To: <66E6E637-7532-4D6F-BF4C-4C5F39A5108E@apache.org>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks Grant,
	I did make an initial posting on this list but got zero responses so 
I'm guessing nobody else has seen the problem.

basically from this:

public String highlightTerm(String originalText , TokenGroup group)
	{
		if(group.getTotalScore()<=0)
		{
			return originalText;
		}
		return "<em>" + originalText + "</em>";
	}

I'm getting '< em> some text </em>' as the result in just one case. This 
is an xml fragment and clearly the introduced space between '< e' is not 
a good thing.

Thanks for the response.
Jason.



Grant Ingersoll wrote:
>  From the resources section of the website, the Issue Tracking link is: 
> http://issues.apache.org/jira/browse/LUCENE
> 
> Also, it is helpful if you have done a preliminary search on the topic 
> and some reasonable investigation to confirm that it is in fact a bug.  
> If your not sure, please ask on this list.
> 
> -Grant
> 
> On Jan 11, 2007, at 9:49 PM, Jason wrote:
> 
>> can someone please tell me where the most appropriate place to report 
>> bugs might be - in this case for the hit-highlighter contribution
>>
>> Thanks
>> Jason.
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
> 
> --------------------------
> Grant Ingersoll
> Center for Natural Language Processing
> http://www.cnlp.org
> 
> Read the Lucene Java FAQ at http://wiki.apache.org/jakarta-lucene/LuceneFAQ
> 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25456-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 12 04:47:48 2007
Return-Path: <java-user-return-25456-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79484 invoked from network); 12 Jan 2007 04:47:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Jan 2007 04:47:47 -0000
Received: (qmail 76967 invoked by uid 500); 12 Jan 2007 04:47:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76937 invoked by uid 500); 12 Jan 2007 04:47:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76921 invoked by uid 99); 12 Jan 2007 04:47:48 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Jan 2007 20:47:48 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Jan 2007 20:47:39 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 1B99B5B77B; Thu, 11 Jan 2007 20:47:18 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 05FFE7F403;
	Thu, 11 Jan 2007 20:47:18 -0800 (PST)
Date: Thu, 11 Jan 2007 20:47:17 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org, jeacott@hardlight.com.au
Cc: gsingers@apache.org
Subject: Re: where is the proper place to report lucene bugs?
In-Reply-To: <45A70C15.9060007@hardlight.com.au>
Message-ID: <Pine.LNX.4.58.0701112040290.4058@hal.rescomp.berkeley.edu>
References: <45A6F738.9000808@hardlight.com.au> <66E6E637-7532-4D6F-BF4C-4C5F39A5108E@apache.org>
 <45A70C15.9060007@hardlight.com.au>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: public String highlightTerm(String originalText , TokenGroup group)
: 	{
: 		if(group.getTotalScore()<=0)
: 		{
: 			return originalText;
: 		}
: 		return "<em>" + originalText + "</em>";
: 	}
:
: I'm getting '< em> some text </em>' as the result in just one case. This

...it's not clear to me the code example you just posted could ever
produce the sequence "< em>" unless "< em>" exists in the string
originalTerm ... you're not using the TokenGroup for anything besides
getTotalScore().

can you post a self contained executable example that demonstrates this
problem?



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25457-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 12 08:11:16 2007
Return-Path: <java-user-return-25457-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 29163 invoked from network); 12 Jan 2007 08:11:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Jan 2007 08:11:16 -0000
Received: (qmail 67716 invoked by uid 500); 12 Jan 2007 08:11:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67683 invoked by uid 500); 12 Jan 2007 08:11:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67672 invoked by uid 99); 12 Jan 2007 08:11:16 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 12 Jan 2007 00:11:16 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of zhouchengly@gmail.com designates 64.233.182.191 as permitted sender)
Received: from [64.233.182.191] (HELO nf-out-0910.google.com) (64.233.182.191)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 12 Jan 2007 00:11:07 -0800
Received: by nf-out-0910.google.com with SMTP id a27so1097823nfc
        for <java-user@lucene.apache.org>; Fri, 12 Jan 2007 00:10:45 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=C1mOANDnmKanWRoTV+rPui6EJpX/9u4tK8pc2fLt0Xfu0CqKLOhdjxDzHWcECtnX739C5jo1vWeZ3K4Zhgy+pl97VsYOlaClRCBmAPlMnnkjlDlOWAzgt8mg2tMhlmoeFFUMmGmlvLH0eI2ZJ/97Fiwb21/4GjLpL+NZ70cZ74M=
Received: by 10.82.182.8 with SMTP id e8mr71227buf.1168589442847;
        Fri, 12 Jan 2007 00:10:42 -0800 (PST)
Received: by 10.82.100.12 with HTTP; Fri, 12 Jan 2007 00:10:42 -0800 (PST)
Message-ID: <c2f9e9030701120010j26a1fa7fr4a6aa72869a17af6@mail.gmail.com>
Date: Fri, 12 Jan 2007 16:10:42 +0800
From: David <zhouchengly@gmail.com>
To: java-user@lucene.apache.org
Subject: How to retrieve the document by document ID?
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_59946_29203511.1168589442830"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_59946_29203511.1168589442830
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi all:
       How do Lucene give each document an ID  when the document is added
and  How do we retrieve a document  by document ID?  appreciate your help!
-- 
David

------=_Part_59946_29203511.1168589442830--

From java-user-return-25458-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 12 10:13:52 2007
Return-Path: <java-user-return-25458-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88983 invoked from network); 12 Jan 2007 10:13:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Jan 2007 10:13:51 -0000
Received: (qmail 27339 invoked by uid 500); 12 Jan 2007 10:13:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27311 invoked by uid 500); 12 Jan 2007 10:13:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27300 invoked by uid 99); 12 Jan 2007 10:13:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 12 Jan 2007 02:13:50 -0800
X-ASF-Spam-Status: No, hits=2.8 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [206.190.39.214] (HELO web50312.mail.yahoo.com) (206.190.39.214)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 12 Jan 2007 02:13:40 -0800
Received: (qmail 24308 invoked by uid 60001); 12 Jan 2007 10:13:19 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=Ibf8HMGU+jB/C30tycWICUyiHLCkKnCCFmCm/PFeeuK0n8umQECX2OK2gIKhZRCSSjGAmm9BGQZ9eWdu9383Iqw/xG0MeNb3QkkZVWQZn0cO7kFJSNGp1kNP/9irFcnPzbJM43EAZF7Ms8o4jGmPTunhnoE70vPXPCsieZ3EnxU=;
X-YMail-OSG: l3Dhj4cVM1n1bTm84bwtBOVJf2kWsUPxDBy0M_Up9OqJZjrkDq4rl1daiYYvvEpQ1DiekJvf4WSlYCZrqdSTHwivhGDcEV7Tu1UDubHbj04Di0oLTw3NFgYRGd2gfbHYY7F2N2m4_0bcYOS6mBKDLA1jLSblu62IEUnnAzdRckH7w8I0DDl4nPtLKB3febGxfcU5XkC5RNctnA--
Received: from [58.63.152.33] by web50312.mail.yahoo.com via HTTP; Fri, 12 Jan 2007 02:13:19 PST
X-Mailer: YahooMailRC/368.3 YahooMailWebService/0.6.132.6
Date: Fri, 12 Jan 2007 02:13:19 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: How to retrieve the document by document ID?
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable
Message-ID: <262766.22517.qm@web50312.mail.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

David, please look at the Javadoc for IndexReader.  I believe the API is re=
ader.document(int), where reader is an instance of IndexReader.=0A=0AOtis=
=0A=0A----- Original Message ----=0AFrom: David <zhouchengly@gmail.com>=0AT=
o: java-user@lucene.apache.org=0ASent: Friday, January 12, 2007 3:10:42 AM=
=0ASubject: How to retrieve the document by document ID?=0A=0AHi all:=0A   =
    How do Lucene give each document an ID  when the document is added=0Aan=
d  How do we retrieve a document  by document ID?  appreciate your help!=0A=
-- =0ADavid=0A=0A=0A

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25459-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 12 11:03:13 2007
Return-Path: <java-user-return-25459-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4777 invoked from network); 12 Jan 2007 11:03:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Jan 2007 11:03:12 -0000
Received: (qmail 7533 invoked by uid 500); 12 Jan 2007 11:03:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7503 invoked by uid 500); 12 Jan 2007 11:03:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7492 invoked by uid 99); 12 Jan 2007 11:03:11 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 12 Jan 2007 03:03:11 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [209.235.102.146] (HELO relay.airimba.com) (209.235.102.146)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 12 Jan 2007 03:03:01 -0800
Received: from [70.150.217.228] (helo=[10.113.73.179])
	by relay.airimba.com with esmtpa (Exim 4.63)
	(envelope-from <ktaneja@ncsu.edu>)
	id 1H5JtU-0007da-2E
	for java-user@lucene.apache.org; Fri, 12 Jan 2007 04:44:21 -0600
Message-ID: <45A76AC4.80306@ncsu.edu>
Date: Fri, 12 Jan 2007 06:02:28 -0500
From: Kunal Taneja <ktaneja@ncsu.edu>
User-Agent: Thunderbird 1.5.0.9 (Windows/20061207)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Lucene 1.3
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Spam-Score: 0.0 (/) relay.airimba.com
X-Spam_bar: /
X-Virus-Checked: Checked by ClamAV on apache.org

Can somebody, please let me know if it it possible to get the source 
code for Lucene version 1.3 and other earlier versions. I need them for 
research purpose.

Best Regards,
Kunal


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25460-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 12 11:32:53 2007
Return-Path: <java-user-return-25460-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 15944 invoked from network); 12 Jan 2007 11:32:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Jan 2007 11:32:52 -0000
Received: (qmail 60675 invoked by uid 500); 12 Jan 2007 11:32:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60646 invoked by uid 500); 12 Jan 2007 11:32:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60635 invoked by uid 99); 12 Jan 2007 11:32:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 12 Jan 2007 03:32:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [208.97.132.81] (HELO spunkymail-a12.dreamhost.com) (208.97.132.81)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 12 Jan 2007 03:32:41 -0800
Received: from [192.168.0.2] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a12.dreamhost.com (Postfix) with ESMTP id 12C077FA9
	for <java-user@lucene.apache.org>; Fri, 12 Jan 2007 03:32:19 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <45A76AC4.80306@ncsu.edu>
References: <45A76AC4.80306@ncsu.edu>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <291925E3-0C4B-4EE5-B1CF-BD06A74512CE@apache.org>
Content-Transfer-Encoding: 7bit
From: Grant Ingersoll <gsingers@apache.org>
Subject: Re: Lucene 1.3
Date: Fri, 12 Jan 2007 06:32:07 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Kunal,

http://svn.apache.org/viewvc/lucene/java/tags/ should have all the  
past versions you could ever desire.

-Grant


On Jan 12, 2007, at 6:02 AM, Kunal Taneja wrote:

> Can somebody, please let me know if it it possible to get the  
> source code for Lucene version 1.3 and other earlier versions. I  
> need them for research purpose.
>
> Best Regards,
> Kunal
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

--------------------------
Grant Ingersoll
Center for Natural Language Processing
http://www.cnlp.org

Read the Lucene Java FAQ at http://wiki.apache.org/jakarta-lucene/ 
LuceneFAQ



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25461-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 12 11:35:38 2007
Return-Path: <java-user-return-25461-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 16556 invoked from network); 12 Jan 2007 11:35:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Jan 2007 11:35:37 -0000
Received: (qmail 65006 invoked by uid 500); 12 Jan 2007 11:35:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64978 invoked by uid 500); 12 Jan 2007 11:35:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64967 invoked by uid 99); 12 Jan 2007 11:35:37 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 12 Jan 2007 03:35:37 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of koji.sekiguchi@m4.dion.ne.jp designates 219.125.112.15 as permitted sender)
Received: from [219.125.112.15] (HELO nm05omta05f.dion.ne.jp) (219.125.112.15)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 12 Jan 2007 03:35:27 -0800
Received: from sekiguchi ([219.125.49.207])
	by nm05mta.dion.ne.jp
	id <20070112203505002.MAE2.8150AF0@nm05mta.dion.ne.jp>;
	Fri, 12 Jan 2007 20:35:05 +0900
From: "Koji Sekiguchi" <koji.sekiguchi@m4.dion.ne.jp>
To: <java-user@lucene.apache.org>
Subject: RE: Lucene 1.3
Date: Fri, 12 Jan 2007 20:35:03 +0900
Message-ID: <PKEIKOCKCHNIIHNECPCCEELFCPAA.koji.sekiguchi@m4.dion.ne.jp>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="ISO-8859-1"
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook IMO, Build 9.0.2416 (9.0.2910.0)
In-Reply-To: <45A76AC4.80306@ncsu.edu>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1807
Importance: Normal
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Kunal,

You can get them from subversion repository. For example,
for Lucene 1.3:

$ svn co http://svn.apache.org/repos/asf/lucene/java/tags/lucene_1_3_final

See also:
http://wiki.apache.org/jakarta-lucene/SourceRepository
http://svn.apache.org/viewvc/lucene/java/tags/

regards,

Koji




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25462-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 12 11:51:35 2007
Return-Path: <java-user-return-25462-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20166 invoked from network); 12 Jan 2007 11:51:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Jan 2007 11:51:35 -0000
Received: (qmail 77570 invoked by uid 500); 12 Jan 2007 11:51:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77539 invoked by uid 500); 12 Jan 2007 11:51:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77528 invoked by uid 99); 12 Jan 2007 11:51:34 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 12 Jan 2007 03:51:34 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [209.235.102.146] (HELO relay.airimba.com) (209.235.102.146)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 12 Jan 2007 03:51:24 -0800
Received: from [70.150.217.228] (helo=[10.113.73.179])
	by relay.airimba.com with esmtpa (Exim 4.63)
	(envelope-from <ktaneja@ncsu.edu>)
	id 1H5KeE-0001e0-1f
	for java-user@lucene.apache.org; Fri, 12 Jan 2007 05:32:44 -0600
Message-ID: <45A77615.60507@ncsu.edu>
Date: Fri, 12 Jan 2007 06:50:45 -0500
From: Kunal Taneja <ktaneja@ncsu.edu>
User-Agent: Thunderbird 1.5.0.9 (Windows/20061207)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Lucene 1.3
References: <45A76AC4.80306@ncsu.edu> <291925E3-0C4B-4EE5-B1CF-BD06A74512CE@apache.org>
In-Reply-To: <291925E3-0C4B-4EE5-B1CF-BD06A74512CE@apache.org>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Spam-Score: 0.0 (/) relay.airimba.com
X-Spam_bar: /
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks a bunch, Grant and Koji

Best Regards,
Kunal

Grant Ingersoll wrote:
> Hi Kunal,
>
> http://svn.apache.org/viewvc/lucene/java/tags/ should have all the 
> past versions you could ever desire.
>
> -Grant
>
>
> On Jan 12, 2007, at 6:02 AM, Kunal Taneja wrote:
>
>> Can somebody, please let me know if it it possible to get the source 
>> code for Lucene version 1.3 and other earlier versions. I need them 
>> for research purpose.
>>
>> Best Regards,
>> Kunal
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
> --------------------------
> Grant Ingersoll
> Center for Natural Language Processing
> http://www.cnlp.org
>
> Read the Lucene Java FAQ at 
> http://wiki.apache.org/jakarta-lucene/LuceneFAQ
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


-- 
*_________________________________________*
Kunal Taneja,
Graduate Student,
Computer Science Department,
North Carolina State University,
Raleigh, NC, USA
Homepage: http://www4.ncsu.edu/~ktaneja/

"I wanna change this world but unfortunately I don't have the source code"

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25463-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 12 14:32:07 2007
Return-Path: <java-user-return-25463-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69613 invoked from network); 12 Jan 2007 14:32:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Jan 2007 14:32:07 -0000
Received: (qmail 93846 invoked by uid 500); 12 Jan 2007 14:32:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93399 invoked by uid 500); 12 Jan 2007 14:32:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93388 invoked by uid 99); 12 Jan 2007 14:32:07 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 12 Jan 2007 06:32:07 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of supriya.shyamal@artnology.com designates 80.67.18.44 as permitted sender)
Received: from [80.67.18.44] (HELO smtprelay06.ispgateway.de) (80.67.18.44)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 12 Jan 2007 06:31:56 -0800
Received: (qmail 26806 invoked from network); 12 Jan 2007 14:31:33 -0000
Received: from unknown (HELO [192.168.100.19]) ([pbs]383542@[195.143.217.178])
          (envelope-sender <supriya.shyamal@artnology.com>)
          by smtprelay06.ispgateway.de (qmail-ldap-1.03) with SMTP
          for <java-user@lucene.apache.org>; 12 Jan 2007 14:31:33 -0000
Message-ID: <45A79BB7.9020309@artnology.com>
Date: Fri, 12 Jan 2007 15:31:19 +0100
From: Supriya Kumar Shyamal <supriya.shyamal@artnology.com>
User-Agent: Thunderbird 1.5.0.9 (Windows/20061207)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: wilcard search with terms contains _ or -
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

I have problem searching wildcards terms contains _ or -.
When I search for  non-linear I see the query as title:"non linear" but 
when I search for non-lin* I get the query as title:non-lin* and it does 
not return any result as it interprets as single token with wildcard.

I have gone through the StandardTokenizer and I can see that the string 
non-linear splitted into 2 tokens and index as 2 different terms but why 
we don't have the same functionality in the QueryParser.

Any help will be very appreciable.

Thanks,
supriya

-- 
Mit freundlichen Gren / Regards
 
Supriya Kumar Shyamal

Software Developer
tel +49 (30) 443 50 99 -22
fax +49 (30) 443 50 99 -99
email supriya.shyamal@artnology.com
___________________________
artnology GmbH
Milastr. 4
10437 Berlin
___________________________

http://www.artnology.com
__________________________________________________________________________

 News / Aktuelle Projekte:
 * artnology gewinnt Ausschreibung des Bundesministeriums des Innern:
   Softwarelsung fr die Verwaltung der Sammlung zeitgenssischer
   Kunstwerke zur kulturellen Reprsentation des Bundes.

 Projektreferenzen:
 * Globaler eShop und Corporate-Site fr Springer: www.springeronline.com
 * E-Detailing-Portal fr Novartis: www.interaktiv.novartis.de
 * Service-Center-Plattform fr Biogen: www.ms-life.de
 * eCRM-System fr Grnenthal: www.gruenenthal.com

___________________________________________________________________________ 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25464-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 12 15:56:20 2007
Return-Path: <java-user-return-25464-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97071 invoked from network); 12 Jan 2007 15:56:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Jan 2007 15:56:19 -0000
Received: (qmail 50300 invoked by uid 500); 12 Jan 2007 15:56:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50271 invoked by uid 500); 12 Jan 2007 15:56:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50259 invoked by uid 99); 12 Jan 2007 15:56:19 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 12 Jan 2007 07:56:19 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of markrmiller@gmail.com designates 64.233.184.224 as permitted sender)
Received: from [64.233.184.224] (HELO wr-out-0506.google.com) (64.233.184.224)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 12 Jan 2007 07:56:09 -0800
Received: by wr-out-0506.google.com with SMTP id i4so622848wra
        for <java-user@lucene.apache.org>; Fri, 12 Jan 2007 07:55:44 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=MdO5+LGSiEV/XIFYwZ8ycrJnq4FCY0wJ8p65Kjt23CCy+hQqKbK5MzlIIgkg2BiiI946TRFE/HMiaQVE+p7Epa3mfmw7Hxl6lXJ8wYSPSLuHNebfJcz6SdtxQFIdFmmmRIGbHcgkRRzCL6mDsP5SYGobk8r34bFWlHxqB73Sb58=
Received: by 10.90.98.10 with SMTP id v10mr670691agb.1168617344711;
        Fri, 12 Jan 2007 07:55:44 -0800 (PST)
Received: from ?192.168.1.103? ( [216.66.114.42])
        by mx.google.com with ESMTP id 45sm3113125wri.2007.01.12.07.55.42;
        Fri, 12 Jan 2007 07:55:43 -0800 (PST)
Message-ID: <45A7AFB5.6000606@gmail.com>
Date: Fri, 12 Jan 2007 10:56:37 -0500
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 1.5.0.9 (Windows/20061207)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: wilcard search with terms contains _ or -
References: <45A79BB7.9020309@artnology.com>
In-Reply-To: <45A79BB7.9020309@artnology.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Wildcard queries are not analyzed...they are only lowercased unless you 
have changed that behavior.

- Mark

Supriya Kumar Shyamal wrote:
> Hi,
>
> I have problem searching wildcards terms contains _ or -.
> When I search for  non-linear I see the query as title:"non linear" 
> but when I search for non-lin* I get the query as title:non-lin* and 
> it does not return any result as it interprets as single token with 
> wildcard.
>
> I have gone through the StandardTokenizer and I can see that the 
> string non-linear splitted into 2 tokens and index as 2 different 
> terms but why we don't have the same functionality in the QueryParser.
>
> Any help will be very appreciable.
>
> Thanks,
> supriya
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25465-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 12 19:25:30 2007
Return-Path: <java-user-return-25465-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82993 invoked from network); 12 Jan 2007 19:25:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Jan 2007 19:25:29 -0000
Received: (qmail 20583 invoked by uid 500); 12 Jan 2007 19:25:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20546 invoked by uid 500); 12 Jan 2007 19:25:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 20535 invoked by uid 99); 12 Jan 2007 19:25:29 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 12 Jan 2007 11:25:29 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of markrmiller@gmail.com designates 64.233.184.236 as permitted sender)
Received: from [64.233.184.236] (HELO wr-out-0506.google.com) (64.233.184.236)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 12 Jan 2007 11:25:19 -0800
Received: by wr-out-0506.google.com with SMTP id i4so678068wra
        for <java-user@lucene.apache.org>; Fri, 12 Jan 2007 11:24:58 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=BR0GopKALwrVBVIcgr7Al8LKXeigF66EaW6vJBKbp2X13HxK/q1CSeaD+xLVrjrUnMW/YqRLqwwcRYgqcneF7YQfXFWEZWhu6Y4jA20icABJDu7oBtkjO34Hqgtgpdsng8MKvuZMrnR7X2oFE+Rr1UVskOFFImovMVNJvU34AeU=
Received: by 10.90.51.17 with SMTP id y17mr936866agy.1168629898719;
        Fri, 12 Jan 2007 11:24:58 -0800 (PST)
Received: from ?192.168.1.103? ( [216.66.114.42])
        by mx.google.com with ESMTP id 6sm3388108wrh.2007.01.12.11.24.56;
        Fri, 12 Jan 2007 11:24:57 -0800 (PST)
Message-ID: <45A7E0D5.1070003@gmail.com>
Date: Fri, 12 Jan 2007 14:26:13 -0500
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 1.5.0.9 (Windows/20061207)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Technology Preview of new Lucene QueryParser
References: <45A460E2.8090508@gmail.com> <Pine.LNX.4.58.0701101726150.29321@hal.rescomp.berkeley.edu> <45A5A468.1030604@gmail.com> <Pine.LNX.4.58.0701102008590.6750@hal.rescomp.berkeley.edu> <45A626DA.3080008@gmail.com> <Pine.LNX.4.58.0701111400020.12602@hal.rescomp.berkeley.edu> <45A6C5E0.10406@gmail.com> <Pine.LNX.4.58.0701111747550.29125@hal.rescomp.berkeley.edu>
In-Reply-To: <Pine.LNX.4.58.0701111747550.29125@hal.rescomp.berkeley.edu>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org


> : This sounds troubling to me now :) I may need to clear up my
> : understanding of this and rework the parser:
> : "A | B | C ! D ! E" wold get parsed as allFields:a allFields:b
> : (+allFields:c -allFields:d -allFields:e)
> : This is because ! binds tighter than |...
> : Sounds like I need to bone up on how I thought this query would operate.
> : I set up this logic back when I was new to Lucene and have not
> : considered it since. Seems as though the hits will be right but perhaps
> : the scoring will not be correct?
>
> it depends on your definition of "correct" .. take a look at the
> Query.toString and Explanation.toString output from a query for something
> like "A X Y B C -D" vs the same results of "A X Y B (C -D)" or "(A X Y B)
> (C -D)" .. particulararly when X and Y aren't in the documents and you'll
> see what i mean.
>
>   
I will certainly start experimenting with this. For clarification 
though, you are telling me that the Lucene syntax query: 'Mark AND pig 
AND man' is different than the query: '(Mark AND pig) AND man', correct?


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25466-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 12 19:57:16 2007
Return-Path: <java-user-return-25466-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91697 invoked from network); 12 Jan 2007 19:57:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Jan 2007 19:57:16 -0000
Received: (qmail 68095 invoked by uid 500); 12 Jan 2007 19:57:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68076 invoked by uid 500); 12 Jan 2007 19:57:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68065 invoked by uid 99); 12 Jan 2007 19:57:16 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 12 Jan 2007 11:57:16 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 12 Jan 2007 11:57:07 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 65A1E5B772; Fri, 12 Jan 2007 11:56:47 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 628577F403
	for <java-user@lucene.apache.org>; Fri, 12 Jan 2007 11:56:47 -0800 (PST)
Date: Fri, 12 Jan 2007 11:56:47 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Technology Preview of new Lucene QueryParser
In-Reply-To: <45A7E0D5.1070003@gmail.com>
Message-ID: <Pine.LNX.4.58.0701121153450.26906@hal.rescomp.berkeley.edu>
References: <45A460E2.8090508@gmail.com> <Pine.LNX.4.58.0701101726150.29321@hal.rescomp.berkeley.edu>
 <45A5A468.1030604@gmail.com> <Pine.LNX.4.58.0701102008590.6750@hal.rescomp.berkeley.edu>
 <45A626DA.3080008@gmail.com> <Pine.LNX.4.58.0701111400020.12602@hal.rescomp.berkeley.edu>
 <45A6C5E0.10406@gmail.com> <Pine.LNX.4.58.0701111747550.29125@hal.rescomp.berkeley.edu>
 <45A7E0D5.1070003@gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: I will certainly start experimenting with this. For clarification
: though, you are telling me that the Lucene syntax query: 'Mark AND pig
: AND man' is different than the query: '(Mark AND pig) AND man', correct?

Ummm... because you are making all of the clauses required, the parens
*may* not affect the final scores .. i can't remember off the top of my
head (it depends on how the queryNorm is calculated)

i know for a fact that you will see lots of score differences however
between the queries   'Mark OR pig OR man'  and  '(Mark OR pig) OR man'
for documents which only contain one or two of those terms -- that's
because of the coordFactor.


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25467-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 12 23:10:58 2007
Return-Path: <java-user-return-25467-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53106 invoked from network); 12 Jan 2007 23:10:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Jan 2007 23:10:58 -0000
Received: (qmail 9692 invoked by uid 500); 12 Jan 2007 23:10:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9663 invoked by uid 500); 12 Jan 2007 23:10:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9645 invoked by uid 99); 12 Jan 2007 23:10:57 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 12 Jan 2007 15:10:57 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of geneticflyer@googlemail.com designates 64.233.182.184 as permitted sender)
Received: from [64.233.182.184] (HELO nf-out-0910.google.com) (64.233.182.184)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 12 Jan 2007 15:10:48 -0800
Received: by nf-out-0910.google.com with SMTP id a27so1279625nfc
        for <java-user@lucene.apache.org>; Fri, 12 Jan 2007 15:10:27 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=googlemail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=suj/Ke15+t48N4AjPei4PDjBm5rqJXDp5R8NGUuGweiC1qFSaRFsSc3drhk/okJ6AzYEYzoWEzpzqlYH3mmJ7OWQP3XgJqedOfe8t9k5SrPmmwIIN5F16rSy7HFKLf3oHNX4XxJjD0JhjLcMJZtRsObPOiRGHOJUToYHB9X+4Ik=
Received: by 10.82.152.16 with SMTP id z16mr228645bud.1168643417560;
        Fri, 12 Jan 2007 15:10:17 -0800 (PST)
Received: by 10.82.119.7 with HTTP; Fri, 12 Jan 2007 15:10:17 -0800 (PST)
Message-ID: <78bc38bc0701121510k77ae53day5cfed5c22d3e0a1c@mail.gmail.com>
Date: Fri, 12 Jan 2007 23:10:17 +0000
From: "M A" <geneticflyer@googlemail.com>
To: java-user@lucene.apache.org
Subject: Re: Excluding partial match for query result
In-Reply-To: <359a92830701111647n28064e21u925b9782e9257987@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_45922_14378789.1168643417483"
References: <78bc38bc0701111514q500dd6b6hc68fdc4122ecd2@mail.gmail.com>
	 <359a92830701111647n28064e21u925b9782e9257987@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_45922_14378789.1168643417483
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Analyzer analyzer = new StandardAnalyzer(new String[]{});
The analyzer used in both cases, would be this one in the code, above.


Does this mean i would have to create a new Analyzer and reindex the whole
lot?

Bearing in mind ofcourse that there is also a free text element also,

See this becomes the problem, for the tags I would like an analyser that i
can tokenize by space alone since the tags are fed separated by a space,
However for the free text, need that to be the Analyser above .
i.e. Analyzer analyzer = new StandardAnalyzer(new String[]{});

Is it possible to add 2 different fields to the same document using 2
different analysers? thisis to say

field 1 analyser 1
field 2 analyser 2
int he same document ..

Are there any implications wrt to doing this





On 1/12/07, Erick Erickson <erickerickson@gmail.com> wrote:
>
> What analyzers are you using for your queries and your indexing?
> StandardAnalyzer (I believe) will break "A.B" into two tokens , so your
> index could contain both tags. So what you really have in the index would
> be
> story1  A  C  E
> story2: A B P Q (note no '.').
>
> searching for B.A would really search for B OR A because of 2 things:
> 1> the tokenizer (assuming StandardAnalyzer or any other analyzer that
> breaks tokens at punctuation) would break the query into two terms.
> 2> the default is OR unless you set the default to AND or specify it in
> the
> query.
>
> If you're using different analyzers, this is irrelevant. Also, this
> assumes
> you're using the query parser.
>
> If you haven't already, I *strongly* recommend you get a copy of Luke
> (google lucene luke). It lets you examine your indexes to see what's
> actually been indexed and lets you examine queries to see what the actual
> search terms are. It even lets you use different analyzers to see how they
> behave when it comes to creating a query.
>
> Best
> Erick
>
> On 1/11/07, M A <geneticflyer@googlemail.com> wrote:
> >
> > Hi,
> >
> > We are having some trouble with the results that we get from certain
> > queries.
> >
> > Basically .. we have documents that we index, each document has a bunch
> of
> > tags, the tags could be of the sort
> >
> > tags: A, B, C, D.P, E.A etc ..
> >
> > Each story will contain only a subset of the tags ..
> >
> > For example
> >
> > Story 1: tags : A, C, E
> > Story 2: tags : B.A, P, Q  (note "B.A" is one tag) .
> >
> > Problem occurs when we run a search with query  "A" we get both results,
> > but what we should be getting is just Story 1.
> > Query "B.A" returns the correct value.
> >
> > What would i have to  ensure that a search for "A" only matches "A" and
> > not
> > "B.A"?
> >
> > thanx
> >
> >
>
>

------=_Part_45922_14378789.1168643417483--

From java-user-return-25468-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 12 23:54:04 2007
Return-Path: <java-user-return-25468-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63155 invoked from network); 12 Jan 2007 23:54:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Jan 2007 23:54:03 -0000
Received: (qmail 45863 invoked by uid 500); 12 Jan 2007 23:54:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45832 invoked by uid 500); 12 Jan 2007 23:54:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45821 invoked by uid 99); 12 Jan 2007 23:54:04 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 12 Jan 2007 15:54:04 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS,UPPERCASE_25_50
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of vnguyen@ur.com designates 63.241.148.49 as permitted sender)
Received: from [63.241.148.49] (HELO iris.ur.com) (63.241.148.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 12 Jan 2007 15:53:55 -0800
Received: from unknown (HELO UREXCHSRV5.ur.com) ([10.6.134.35])
  by iris.ur.com with ESMTP; 12 Jan 2007 23:54:11 +0000
X-OriginatingIP: 10.6.134.35
X-InternalServer: 10.6.134.35
Received: from UREXCHVS3.ur.com ([10.6.138.34]) by UREXCHSRV5.ur.com with Microsoft SMTPSVC(6.0.3790.1830);
	 Fri, 12 Jan 2007 18:51:39 -0500
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Modifying StandardAnalyzer
Date: Fri, 12 Jan 2007 18:53:33 -0500
Message-ID: <0D6A3C278F4DC346B98DF4D2F1397E811862F832@UREXCHVS3.ur.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Modifying StandardAnalyzer
Thread-Index: Acc17r4i1rblIa8xRsWxKRyVQ57bLQAgn10A
From: "Van Nguyen" <vnguyen@ur.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 12 Jan 2007 23:51:39.0368 (UTC) FILETIME=[9A3E9E80:01C736A4]
X-Virus-Checked: Checked by ClamAV on apache.org

It won't do what I need.  I may have something like:

"All-In-One is located in 92226-4446 and has an E-A-R"

I want it to be tokenized as follows:

all
one
located
92226
4446
E-A-R

Right now... it is tokenizing it as this:

all
one
located
92226-4446
E-A-R



-----Original Message-----
From: Erick Erickson [mailto:erickerickson@gmail.com]=20
Sent: Thursday, January 11, 2007 6:11 PM
To: java-user@lucene.apache.org
Subject: Re: Modifying StandardAnalyzer

Would it be simpler just to modify the input with a regex rather than
risk
messing with StandardANalyzer? Or wouldn't that do what you need?

On 1/11/07, Van Nguyen <vnguyen@ur.com> wrote:
>
> Hi,
>
>
>
> I need to modify the StandardAnalyzer so that it will tokenize zip
codes
> that look like this:
>
>
>
> 92626-2646
>
>
>
> I think the part I need to modify is in here - specifically:
>
>
>
> <HAS_DIGIT> <P> <ALPHANUM>
>
>
>
> // floating point, serial, model numbers, ip addresses, etc.
>
>   // every other segment must have at least one digit
>
> | <NUM: (<ALPHANUM> <P> <HAS_DIGIT>
>
>        | <HAS_DIGIT> <P> <ALPHANUM>
>
>        | <HAS_DIGIT> <M>
>
>        | <HAS_DIGIT> (<P> <HAS_DIGIT>)+ <M>
>
>        | <LETTER> (<P> <LETTER>)+
>
>        | <ALPHANUM> (<P> <HAS_DIGIT> <P> <ALPHANUM>)+
>
>        | <HAS_DIGIT> (<P> <ALPHANUM> <P> <HAS_DIGIT>)+
>
>        | <ALPHANUM> <P> <HAS_DIGIT> (<P> <ALPHANUM> <P> <HAS_DIGIT>)+
>
>        | <HAS_DIGIT> <P> <ALPHANUM> (<P> <HAS_DIGIT> <P> <ALPHANUM>)+
>
>         )
>
>   >
>
>
>
> Is there a way to keep that line so that the StandardAnalyzer works as
> is - but tokenize anything that looks like
>
>
>
> (HAS_DIGITS) <P>) | (<HAS_DIGITS> <P> <HAS_DIGITS>) or even better:
>
>
>
> (<DIGIT><DIGIT><DIGIT><DIGIT><DIGIT><P>) |
> <DIGIT><DIGIT><DIGIT><DIGIT><DIGIT><P><DIGIT><DIGIT><DIGIT><DIGIT>) -
I
> have zip codes that look like 92626, 92626-, and 92626-2646
>
>
>
> I've tried adding that both lines to the "SKIP" section - but to no
> avail.
>
>
>
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25469-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jan 13 00:16:19 2007
Return-Path: <java-user-return-25469-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67980 invoked from network); 13 Jan 2007 00:16:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Jan 2007 00:16:19 -0000
Received: (qmail 66157 invoked by uid 500); 13 Jan 2007 00:16:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66119 invoked by uid 500); 13 Jan 2007 00:16:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66108 invoked by uid 99); 13 Jan 2007 00:16:20 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 12 Jan 2007 16:16:20 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS,UPPERCASE_25_50
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of markrmiller@gmail.com designates 66.249.82.227 as permitted sender)
Received: from [66.249.82.227] (HELO wx-out-0506.google.com) (66.249.82.227)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 12 Jan 2007 16:16:09 -0800
Received: by wx-out-0506.google.com with SMTP id i29so893818wxd
        for <java-user@lucene.apache.org>; Fri, 12 Jan 2007 16:15:49 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=q5J9A4GhhfdiTHewnqvGKlalrKhBUQsBoOU+b9R/1xtq5BPhdImo+/VbW5u2tSbFaFqkSpdAXFxKckLWhIFJkZaYfz4T+ImTo1y/Wrb+m3X6rh+YJR6v+CoT/53G59vHwT4i4iWR70/Y6LxJOxx+pkjSjw5mAGNuX63usDDn2y4=
Received: by 10.70.29.7 with SMTP id c7mr2379890wxc.1168647349005;
        Fri, 12 Jan 2007 16:15:49 -0800 (PST)
Received: from ?192.168.1.103? ( [216.66.114.42])
        by mx.google.com with ESMTP id 7sm3824303wrh.2007.01.12.16.15.46;
        Fri, 12 Jan 2007 16:15:47 -0800 (PST)
Message-ID: <45A82504.6030606@gmail.com>
Date: Fri, 12 Jan 2007 19:17:08 -0500
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 1.5.0.9 (Windows/20061207)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Modifying StandardAnalyzer
References: <0D6A3C278F4DC346B98DF4D2F1397E811862F832@UREXCHVS3.ur.com>
In-Reply-To: <0D6A3C278F4DC346B98DF4D2F1397E811862F832@UREXCHVS3.ur.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org


> It won't do what I need.  I may have something like:
>
> "All-In-One is located in 92226-4446 and has an E-A-R"
>
> I want it to be tokenized as follows:
>
> all
> one
> located
> 92226
> 4446
> E-A-R
>
> Right now... it is tokenizing it as this:
>
> all
> one
> located
> 92226-4446
> E-A-R
>   
Thats the type of information you give when you ask the question the 
first time (not to be a pompous ass or anything <g> ). The problem is 
that your zip code is match by NUM

| <NUM: (<ALPHANUM> <P> <HAS_DIGIT>
       | <HAS_DIGIT> <P> <ALPHANUM>
       | <ALPHANUM> (<P> <HAS_DIGIT> <P> <ALPHANUM>)+
       | <HAS_DIGIT> (<P> <ALPHANUM> <P> <HAS_DIGIT>)+
       | <ALPHANUM> <P> <HAS_DIGIT> (<P> <ALPHANUM> <P> <HAS_DIGIT>)+
       | <HAS_DIGIT> <P> <ALPHANUM> (<P> <HAS_DIGIT> <P> <ALPHANUM>)+
        )
  >

You could try and remove the first two OR options. Other than that, it 
gets tricky. And if you remove them than other things they might 
normally match (other than zip-codes) will not be matched.

- Mark

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25470-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jan 13 00:23:03 2007
Return-Path: <java-user-return-25470-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70172 invoked from network); 13 Jan 2007 00:23:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Jan 2007 00:23:03 -0000
Received: (qmail 72024 invoked by uid 500); 13 Jan 2007 00:23:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71987 invoked by uid 500); 13 Jan 2007 00:23:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71976 invoked by uid 99); 13 Jan 2007 00:23:03 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 12 Jan 2007 16:23:03 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 64.233.182.184 as permitted sender)
Received: from [64.233.182.184] (HELO nf-out-0910.google.com) (64.233.182.184)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 12 Jan 2007 16:22:54 -0800
Received: by nf-out-0910.google.com with SMTP id a27so1291742nfc
        for <java-user@lucene.apache.org>; Fri, 12 Jan 2007 16:22:32 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=E9LcVT+dkHW3L7vCY/456Oc6tjpdpqVae8ujueFUrU4S33U9zU5B/Jg+C+IpbM1SzmriEHEJrZXUtBCmkSm+TRWyTxSHPanbRIKFqxmtgduNY1785X2qwqwNy9+4+npm7yz9pu6TOJk/ETglz89qmVP03bW9fUfcgvMsTnrgZak=
Received: by 10.82.118.2 with SMTP id q2mr243372buc.1168647751943;
        Fri, 12 Jan 2007 16:22:31 -0800 (PST)
Received: by 10.82.162.9 with HTTP; Fri, 12 Jan 2007 16:22:31 -0800 (PST)
Message-ID: <359a92830701121622t10104d40y31a45e68725cead5@mail.gmail.com>
Date: Fri, 12 Jan 2007 19:22:31 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Excluding partial match for query result
In-Reply-To: <78bc38bc0701121510k77ae53day5cfed5c22d3e0a1c@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_53141_13428064.1168647751313"
References: <78bc38bc0701111514q500dd6b6hc68fdc4122ecd2@mail.gmail.com>
	 <359a92830701111647n28064e21u925b9782e9257987@mail.gmail.com>
	 <78bc38bc0701121510k77ae53day5cfed5c22d3e0a1c@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_53141_13428064.1168647751313
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Sure, see PerFieldAnalyzerWrapper. It's designed to allow different
analyzers for different fields.

Erick

On 1/12/07, M A <geneticflyer@googlemail.com> wrote:
>
> Analyzer analyzer = new StandardAnalyzer(new String[]{});
> The analyzer used in both cases, would be this one in the code, above.
>
>
> Does this mean i would have to create a new Analyzer and reindex the whole
> lot?
>
> Bearing in mind ofcourse that there is also a free text element also,
>
> See this becomes the problem, for the tags I would like an analyser that i
> can tokenize by space alone since the tags are fed separated by a space,
> However for the free text, need that to be the Analyser above .
> i.e. Analyzer analyzer = new StandardAnalyzer(new String[]{});
>
> Is it possible to add 2 different fields to the same document using 2
> different analysers? thisis to say
>
> field 1 analyser 1
> field 2 analyser 2
> int he same document ..
>
> Are there any implications wrt to doing this
>
>
>
>
>
> On 1/12/07, Erick Erickson <erickerickson@gmail.com> wrote:
> >
> > What analyzers are you using for your queries and your indexing?
> > StandardAnalyzer (I believe) will break "A.B" into two tokens , so your
> > index could contain both tags. So what you really have in the index
> would
> > be
> > story1  A  C  E
> > story2: A B P Q (note no '.').
> >
> > searching for B.A would really search for B OR A because of 2 things:
> > 1> the tokenizer (assuming StandardAnalyzer or any other analyzer that
> > breaks tokens at punctuation) would break the query into two terms.
> > 2> the default is OR unless you set the default to AND or specify it in
> > the
> > query.
> >
> > If you're using different analyzers, this is irrelevant. Also, this
> > assumes
> > you're using the query parser.
> >
> > If you haven't already, I *strongly* recommend you get a copy of Luke
> > (google lucene luke). It lets you examine your indexes to see what's
> > actually been indexed and lets you examine queries to see what the
> actual
> > search terms are. It even lets you use different analyzers to see how
> they
> > behave when it comes to creating a query.
> >
> > Best
> > Erick
> >
> > On 1/11/07, M A <geneticflyer@googlemail.com> wrote:
> > >
> > > Hi,
> > >
> > > We are having some trouble with the results that we get from certain
> > > queries.
> > >
> > > Basically .. we have documents that we index, each document has a
> bunch
> > of
> > > tags, the tags could be of the sort
> > >
> > > tags: A, B, C, D.P, E.A etc ..
> > >
> > > Each story will contain only a subset of the tags ..
> > >
> > > For example
> > >
> > > Story 1: tags : A, C, E
> > > Story 2: tags : B.A, P, Q  (note "B.A" is one tag) .
> > >
> > > Problem occurs when we run a search with query  "A" we get both
> results,
> > > but what we should be getting is just Story 1.
> > > Query "B.A" returns the correct value.
> > >
> > > What would i have to  ensure that a search for "A" only matches "A"
> and
> > > not
> > > "B.A"?
> > >
> > > thanx
> > >
> > >
> >
> >
>
>

------=_Part_53141_13428064.1168647751313--

From java-user-return-25471-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jan 13 01:01:28 2007
Return-Path: <java-user-return-25471-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78166 invoked from network); 13 Jan 2007 01:01:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Jan 2007 01:01:28 -0000
Received: (qmail 3329 invoked by uid 500); 13 Jan 2007 01:01:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3292 invoked by uid 500); 13 Jan 2007 01:01:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3280 invoked by uid 99); 13 Jan 2007 01:01:29 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 12 Jan 2007 17:01:29 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of markrmiller@gmail.com designates 66.249.82.230 as permitted sender)
Received: from [66.249.82.230] (HELO wx-out-0506.google.com) (66.249.82.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 12 Jan 2007 17:01:18 -0800
Received: by wx-out-0506.google.com with SMTP id i29so901390wxd
        for <java-user@lucene.apache.org>; Fri, 12 Jan 2007 17:00:57 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=io4rLDzPr/V9+hmfbvn5RCrpX6UQa1zVZiD4PzGHDTM/FISg69KLwXgBe7QI/sWzltEcJy0g8I+04mYlUaErM2gjLdXEqG/qCJuzmnE3GgOnUwxfKAke2Czjf78u8yVbz14tHMcZvOmga0EkGXN0C2WSACiow08bhBdfQUXq9E4=
Received: by 10.70.42.20 with SMTP id p20mr2453151wxp.1168650057238;
        Fri, 12 Jan 2007 17:00:57 -0800 (PST)
Received: from ?192.168.1.103? ( [216.66.114.42])
        by mx.google.com with ESMTP id 34sm3803373wra.2007.01.12.17.00.54;
        Fri, 12 Jan 2007 17:00:56 -0800 (PST)
Message-ID: <45A82F97.5030405@gmail.com>
Date: Fri, 12 Jan 2007 20:02:15 -0500
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 1.5.0.9 (Windows/20061207)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Modifying StandardAnalyzer
References: <0D6A3C278F4DC346B98DF4D2F1397E811862F832@UREXCHVS3.ur.com>
In-Reply-To: <0D6A3C278F4DC346B98DF4D2F1397E811862F832@UREXCHVS3.ur.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Figures...I don't even think removing those pieces from OR will 
work...that will just skip both pieces because they will appear as pure 
numbers. What you want is a bit tricky. I will think about it if someone 
else doesn't chime in...it is difficult to recognize one token and then 
return it as two, though not impossible of course...

- Mark

Van Nguyen wrote:
> It won't do what I need.  I may have something like:
>
> "All-In-One is located in 92226-4446 and has an E-A-R"
>
> I want it to be tokenized as follows:
>
> all
> one
> located
> 92226
> 4446
> E-A-R
>
> Right now... it is tokenizing it as this:
>
> all
> one
> located
> 92226-4446
> E-A-R
>
>
>
> -----Original Message-----
> From: Erick Erickson [mailto:erickerickson@gmail.com] 
> Sent: Thursday, January 11, 2007 6:11 PM
> To: java-user@lucene.apache.org
> Subject: Re: Modifying StandardAnalyzer
>
> Would it be simpler just to modify the input with a regex rather than
> risk
> messing with StandardANalyzer? Or wouldn't that do what you need?
>
> On 1/11/07, Van Nguyen <vnguyen@ur.com> wrote:
>   
>> Hi,
>>
>>
>>
>> I need to modify the StandardAnalyzer so that it will tokenize zip
>>     
> codes
>   
>> that look like this:
>>
>>
>>
>> 92626-2646
>>
>>
>>
>> I think the part I need to modify is in here - specifically:
>>
>>
>>
>> <HAS_DIGIT> <P> <ALPHANUM>
>>
>>
>>
>> // floating point, serial, model numbers, ip addresses, etc.
>>
>>   // every other segment must have at least one digit
>>
>> | <NUM: (<ALPHANUM> <P> <HAS_DIGIT>
>>
>>        | <HAS_DIGIT> <P> <ALPHANUM>
>>
>>        | <HAS_DIGIT> <M>
>>
>>        | <HAS_DIGIT> (<P> <HAS_DIGIT>)+ <M>
>>
>>        | <LETTER> (<P> <LETTER>)+
>>
>>        | <ALPHANUM> (<P> <HAS_DIGIT> <P> <ALPHANUM>)+
>>
>>        | <HAS_DIGIT> (<P> <ALPHANUM> <P> <HAS_DIGIT>)+
>>
>>        | <ALPHANUM> <P> <HAS_DIGIT> (<P> <ALPHANUM> <P> <HAS_DIGIT>)+
>>
>>        | <HAS_DIGIT> <P> <ALPHANUM> (<P> <HAS_DIGIT> <P> <ALPHANUM>)+
>>
>>         )
>>
>>   >
>>
>>
>>
>> Is there a way to keep that line so that the StandardAnalyzer works as
>> is - but tokenize anything that looks like
>>
>>
>>
>> (HAS_DIGITS) <P>) | (<HAS_DIGITS> <P> <HAS_DIGITS>) or even better:
>>
>>
>>
>> (<DIGIT><DIGIT><DIGIT><DIGIT><DIGIT><P>) |
>> <DIGIT><DIGIT><DIGIT><DIGIT><DIGIT><P><DIGIT><DIGIT><DIGIT><DIGIT>) -
>>     
> I
>   
>> have zip codes that look like 92626, 92626-, and 92626-2646
>>
>>
>>
>> I've tried adding that both lines to the "SKIP" section - but to no
>> avail.
>>
>>
>>
>>
>>
>>     
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>   

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25472-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jan 13 09:50:27 2007
Return-Path: <java-user-return-25472-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 66186 invoked from network); 13 Jan 2007 09:50:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Jan 2007 09:50:26 -0000
Received: (qmail 82916 invoked by uid 500); 13 Jan 2007 09:50:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82886 invoked by uid 500); 13 Jan 2007 09:50:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82875 invoked by uid 99); 13 Jan 2007 09:50:27 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 13 Jan 2007 01:50:27 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 13 Jan 2007 01:50:17 -0800
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1H5fWP-0005aZ-9U
	for java-user@lucene.apache.org; Sat, 13 Jan 2007 01:49:57 -0800
Message-ID: <8312744.post@talk.nabble.com>
Date: Sat, 13 Jan 2007 01:49:57 -0800 (PST)
From: Melange <cs@rekoba.de>
To: java-user@lucene.apache.org
Subject: Using Lucene to index a web forum
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: cs@rekoba.de
X-Virus-Checked: Checked by ClamAV on apache.org


Hello, I'd like to index a web forum (phpBB) with Lucene. I wonder how to
best map the forum document model (topics and their messages) to the Lucene
document model.

Usually, some forum member creates a new topic with its first message text,
then other members add reply messages to that topic. Messages are sometimes
updated, but most of the time topics grow incrementally. There's no limit
for the number of replies, thousands is nothing unusual.

Currently, I see two options for my Lucene data model: A single document
type or two document types (one for the topics and one for the messages).
When using only a single document type, things are fairly clear but there
would obviously be a lot of unneccessary index modifications (their would be
one field with all messages concatenated). To reduce the amount of index
updates, the separation of topics and messages seems to be the right thing
to do.

So I'd like to use two document types for my document model, but I do not
understand how I could bring these two together when searching. I don't want
to list all messages but I want the messages grouped by topic, how can I go
about that?

The topic documents could be boosted, but perhaps that's not even necessary
because of their relativly short length (compared to message documents).

Thanks,
Melange.
-- 
View this message in context: http://www.nabble.com/Using-Lucene-to-index-a-web-forum-tf2970740.html#a8312744
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25473-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jan 13 13:27:05 2007
Return-Path: <java-user-return-25473-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31124 invoked from network); 13 Jan 2007 13:27:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Jan 2007 13:27:03 -0000
Received: (qmail 33610 invoked by uid 500); 13 Jan 2007 13:27:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33569 invoked by uid 500); 13 Jan 2007 13:27:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33558 invoked by uid 99); 13 Jan 2007 13:27:03 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 13 Jan 2007 05:27:03 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [82.216.111.38] (HELO smtp2.tech.numericable.fr) (82.216.111.38)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 13 Jan 2007 05:26:53 -0800
Received: from [192.168.1.102] (ip-3.net-82-216-252.rev.numericable.fr [82.216.252.3])
	by smtp2.tech.numericable.fr (Postfix) with ESMTP id 0941B18D822
	for <java-user@lucene.apache.org>; Sat, 13 Jan 2007 14:26:31 +0100 (CET)
From: Nicolas =?iso-8859-1?q?Lalev=E9e?= <nicolas.lalevee@anyware-tech.com>
To: java-user@lucene.apache.org
Subject: Re: Using Lucene to index a web forum
Date: Sat, 13 Jan 2007 14:26:29 +0100
User-Agent: KMail/1.9.5
References: <8312744.post@talk.nabble.com>
In-Reply-To: <8312744.post@talk.nabble.com>
Organization: Anyware Technologies
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
Message-Id: <200701131426.29962.nicolas.lalevee@anyware-tech.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Le Samedi 13 Janvier 2007 10:49, Melange a =E9crit=A0:
> Hello, I'd like to index a web forum (phpBB) with Lucene. I wonder how to
> best map the forum document model (topics and their messages) to the Luce=
ne
> document model.
>
> Usually, some forum member creates a new topic with its first message tex=
t,
> then other members add reply messages to that topic. Messages are sometim=
es
> updated, but most of the time topics grow incrementally. There's no limit
> for the number of replies, thousands is nothing unusual.
>
> Currently, I see two options for my Lucene data model: A single document
> type or two document types (one for the topics and one for the messages).
> When using only a single document type, things are fairly clear but there
> would obviously be a lot of unneccessary index modifications (their would
> be one field with all messages concatenated). To reduce the amount of ind=
ex
> updates, the separation of topics and messages seems to be the right thing
> to do.
>
> So I'd like to use two document types for my document model, but I do not
> understand how I could bring these two together when searching. I don't
> want to list all messages but I want the messages grouped by topic, how c=
an
> I go about that?
>
> The topic documents could be boosted, but perhaps that's not even necessa=
ry
> because of their relativly short length (compared to message documents).

Hi Melange,

The two document types design will be only usefull if you want to search fo=
r=20
topics and search for messages. Here you want to search for messages groupe=
d=20
by topic. So you should have one kind of document : message documents. In=20
this message docment, you will refer the topic's id, so you will be able to=
=20
group by topic. To group by topic some search results, you might be=20
interested by Solr's [1] faceted search [2].

cheers,
Nicolas

[1] http://incubator.apache.org/solr/
[2] http://wiki.apache.org/solr/SimpleFacetParameters

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25474-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jan 13 15:48:54 2007
Return-Path: <java-user-return-25474-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54396 invoked from network); 13 Jan 2007 15:48:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Jan 2007 15:48:53 -0000
Received: (qmail 11670 invoked by uid 500); 13 Jan 2007 15:48:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11645 invoked by uid 500); 13 Jan 2007 15:48:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11634 invoked by uid 99); 13 Jan 2007 15:48:53 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 13 Jan 2007 07:48:53 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 13 Jan 2007 07:48:42 -0800
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1H5l7F-0007nQ-Sb
	for java-user@lucene.apache.org; Sat, 13 Jan 2007 07:48:21 -0800
Message-ID: <8315049.post@talk.nabble.com>
Date: Sat, 13 Jan 2007 07:48:21 -0800 (PST)
From: Melange <cs@rekoba.de>
To: java-user@lucene.apache.org
Subject: Re: Using Lucene to index a web forum
In-Reply-To: <200701131426.29962.nicolas.lalevee@anyware-tech.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Nabble-From: cs@rekoba.de
References: <8312744.post@talk.nabble.com> <200701131426.29962.nicolas.lalevee@anyware-tech.com>
X-Virus-Checked: Checked by ClamAV on apache.org




Nicolas Lalev=C3=A9e-2 wrote:
>=20
> Le Samedi 13 Janvier 2007 10:49, Melange a =C3=A9crit :
>> Hello, I'd like to index a web forum (phpBB) with Lucene. I wonder how t=
o
>> best map the forum document model (topics and their messages) to the
>> Lucene
>> document model.
>>
>> Usually, some forum member creates a new topic with its first message
>> text,
>> then other members add reply messages to that topic. Messages are
>> sometimes
>> updated, but most of the time topics grow incrementally. There's no limi=
t
>> for the number of replies, thousands is nothing unusual.
>>
>> Currently, I see two options for my Lucene data model: A single document
>> type or two document types (one for the topics and one for the messages)=
.
>> When using only a single document type, things are fairly clear but ther=
e
>> would obviously be a lot of unneccessary index modifications (their woul=
d
>> be one field with all messages concatenated). To reduce the amount of
>> index
>> updates, the separation of topics and messages seems to be the right
>> thing
>> to do.
>>
>> So I'd like to use two document types for my document model, but I do no=
t
>> understand how I could bring these two together when searching. I don't
>> want to list all messages but I want the messages grouped by topic, how
>> can
>> I go about that?
>>
>> The topic documents could be boosted, but perhaps that's not even
>> necessary
>> because of their relativly short length (compared to message documents).
>=20
> Hi Melange,
>=20
> The two document types design will be only usefull if you want to search
> for=20
> topics and search for messages. Here you want to search for messages
> grouped=20
> by topic. So you should have one kind of document : message documents. In=
=20
> this message docment, you will refer the topic's id, so you will be able
> to=20
> group by topic. To group by topic some search results, you might be=20
> interested by Solr's [1] faceted search [2].
>=20
> cheers,
> Nicolas
>=20
> [1] http://incubator.apache.org/solr/
> [2] http://wiki.apache.org/solr/SimpleFacetParameters
>=20

Thank you Nicolas, good idea with the message documents, I'll do that
instead.

Sorry, I couldn't really find anything at the Solr links you provided
regarding the grouping of search results (hits). Will I have to load all th=
e
hits into RAM in order to perform the grouping myself or is there a way to
have Lucene do that for me? Or how is this to be done, roughly?

Thanks,
Christian.
--=20
View this message in context: http://www.nabble.com/Using-Lucene-to-index-a=
-web-forum-tf2970740.html#a8315049
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25475-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jan 13 17:35:51 2007
Return-Path: <java-user-return-25475-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70040 invoked from network); 13 Jan 2007 17:35:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Jan 2007 17:35:50 -0000
Received: (qmail 87612 invoked by uid 500); 13 Jan 2007 17:35:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87587 invoked by uid 500); 13 Jan 2007 17:35:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87576 invoked by uid 99); 13 Jan 2007 17:35:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 13 Jan 2007 09:35:51 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=HTML_00_10,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of heikki.doeleman@gmail.com designates 64.233.184.227 as permitted sender)
Received: from [64.233.184.227] (HELO wr-out-0506.google.com) (64.233.184.227)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 13 Jan 2007 09:35:42 -0800
Received: by wr-out-0506.google.com with SMTP id i4so792042wra
        for <java-user@lucene.apache.org>; Sat, 13 Jan 2007 09:35:22 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=Xa80FMUDmEnzfSKCt9i0QOLUO5EXvq5Bfm3T1ckEE0MVZctcxK1DW9LjkGNpMpnVmH3JKt2QaMcffeUuX5YA5WVk+A1aYeNcDbeN8bjdTRnkucFBbW8AorskytcvSgARs4FyGltOEhhQrsiD1I86KK8dpC9EIJzQOMJ0n1LPNG0=
Received: by 10.65.188.20 with SMTP id q20mr2637994qbp.1168709721566;
        Sat, 13 Jan 2007 09:35:21 -0800 (PST)
Received: by 10.65.20.19 with HTTP; Sat, 13 Jan 2007 09:35:21 -0800 (PST)
Message-ID: <f43d06890701130935g78999928w6df86e3e5cd05e97@mail.gmail.com>
Date: Sat, 13 Jan 2007 18:35:21 +0100
From: "heikki doeleman" <heikki.doeleman@gmail.com>
To: java-user@lucene.apache.org
Subject: Highlighting brackets bug ?
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_35135_4243663.1168709721045"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_35135_4243663.1168709721045
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi there,

I'm having some strange behaviour using the highlighter and I'm wondering if
it is a bug or should I take a different approach ?

I want to highlight the search terms that were used to execute a query. If
the search terms end in an end-bracket or end-square-bracket (so ')' or ']'
), the resulting highlighted piece no longer contains the end bracket; it
just disappeared !

For exqmple searching for Vera, Yvonne (1964- ) and highlighting the
results, would produce <span class="highlight">Vera, Yvonne (1964- </span>.

The same thing happens if I use quotes to try phrase searching, for example
"Vera, Yvonne (1964- )".

The field is indexed using a standard tokenizer. It makes no difference if I
use Field.Index.UN_TOKENIZED or Field.Index.TOKENIZED when creating the
index.

In the highlighting I create a query from the search terms and rewrite it. I
tried both creating a PhraseQuery, and I tried the QueryParser.parse() using
the same analyzer used for indexing and searching. Nothing helps !! Also
tried escaping the brackets, to no avail.

Any help would be very much appreciated !

thank you
Heikki Doeleman

------=_Part_35135_4243663.1168709721045--

From java-user-return-25476-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jan 13 18:15:20 2007
Return-Path: <java-user-return-25476-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80947 invoked from network); 13 Jan 2007 18:15:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Jan 2007 18:15:20 -0000
Received: (qmail 19781 invoked by uid 500); 13 Jan 2007 18:15:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19750 invoked by uid 500); 13 Jan 2007 18:15:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19739 invoked by uid 99); 13 Jan 2007 18:15:20 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 13 Jan 2007 10:15:20 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [213.9.79.74] (HELO box7974.elkhouse.de) (213.9.79.74)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 13 Jan 2007 10:15:10 -0800
Received: from [192.168.0.196] (c168227.adsl.hansenet.de [::ffff:213.39.168.227])
  (AUTH: LOGIN kroepke@classdump.org)
  by box7974.elkhouse.de with esmtp; Sat, 13 Jan 2007 19:14:48 +0100
  id 00000BCA.45A92198.00001653
Mime-Version: 1.0 (Apple Message framework v752.2)
Content-Type: text/plain; charset=ISO-8859-1; delsp=yes; format=flowed
Message-Id: <CD64156E-20CE-4BB1-969F-133DC1F02F2F@classdump.org>
Content-Transfer-Encoding: quoted-printable
From: Kay Roepke <kroepke@classdump.org>
Subject: Making document numbers persistent
Date: Sat, 13 Jan 2007 19:14:47 +0100
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org

Hi!

With a project we want to use Lucene in, we are running into =20
performance problems with regard to building filter sets.
Let me give you a quick overview of what we need to do:
We are indexing information about users (index magnitude is ranging =20
between 2 - 10 million documents). Each of those
documents has a unique id (which is a primary key from a database). =20
Indexing and querying works fine and is really fast,
so that is not the issue. We don't need to store much information in =20
the Lucene index, we are just interested in
retrieving those unique ids by Lucene queries.

The problem arises with search option we have. All of the users =20
(documents we index) are "connected" to certain
other users, in a network fashion. We must be able to restrict the =20
query (or filter it after searching the complete index)
to certain "levels of connectedness", i.e. you can search within say =20
three hops of yourself. We compute a list of user ids
which are in the set of the applicable "contacts". This information =20
about connection cannot be stored in the index, as it
is changing often and is expensive to compute in advance.

The problem now is to construct the filter sets, because we cannot =20
cache the document numbers of the documents in the Lucene
index. Making BooleanQuery objects to programmtically include in the =20
query is out the question, since the "filter set" can
be enormously huge (we have instances of the set having a magnitude =20
of 500,000 - 1 million ids, on average they will be much
smaller but they are not trivially small in any case).
Creating the filter involves querying for each document by using our =20
internal unique id, and this is the primary bottleneck,
for large sets it takes around 35 seconds to build the bit set, =20
several orders magnitudes longer than the search itself.

So what we want to do is to cache the filters, once created. Since =20
the document ids would not be the same across the Lucene
servers we'll be using, we can only cache the filters per server, =20
which is a big performance loss. We also cannot reasonably control
on which Lucene server the request will be made (no persistence). =20
Caching the document ids externally is also out of the question
because they won't be the same across multiple servers and they can =20
possibly change at any time.

That's the gist of the problem. To further complicate matters, we =20
have quite a large number of updates per second on that index, so
I expect segment merges to happen quite often.

We have discussed these potential solutions to this problem:

- Ideally we would use our internal unique ids as document ids. I =20
know that the document number essentially
   is the offset into the index file. This would potentially waste =20
space, I'm aware of that, but let's just assume that this doesn't
   concern us right now. One problem to solve would be the segment =20
files, I haven't got a solution for that right now.
   My question for this solution would be: Where, in general terms, =20
would I have to look to change the meaning of the document id, codewise?
   I have identified a couple spots, but would like to get some =20
further advice from people who are way more familiar with the code ;)

- To keep the document ids from changing we could prevent segment =20
merging - I'm not concerned with optimizing indices, this can be done =20=

offline,
   and I'm prepared to build the caches after that. What would be the =20=

ballpark figure for query time degradation, approximately?
   The code changes are obvious, I think, or are there more places =20
I'd need to touch, other than maybeMergeSegments?

- Somewhat related is the question why a document cannot be updated =20
"in place", i.e. what is the reason for the "delete/insert document"
   paradigm? I assume it is because the field list isn't necessarily =20
the same length for each document, right? =46rom all I have seen, it
   is stems from the file format used, not something that is inherent =20=

to the idea behind Lucene?

To round it off, I'm prepared to do some heavy modification of the =20
Lucene codebase to make this work, so even if you have suggestions that
would require that, I'm more than happy to listen ;)

This is probably a hard question to ask, and might not be clear =20
enough, so if I'm not making sense please tell me :)

Thanks in advance,

Kay

--=20
Kay R=F6pke
http://classdump.org/





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25477-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jan 13 18:54:44 2007
Return-Path: <java-user-return-25477-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 87503 invoked from network); 13 Jan 2007 18:54:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Jan 2007 18:54:44 -0000
Received: (qmail 39689 invoked by uid 500); 13 Jan 2007 18:54:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39661 invoked by uid 500); 13 Jan 2007 18:54:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39649 invoked by uid 99); 13 Jan 2007 18:54:44 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 13 Jan 2007 10:54:44 -0800
X-ASF-Spam-Status: No, hits=2.9 required=10.0
	tests=HTML_10_20,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 66.249.92.174 as permitted sender)
Received: from [66.249.92.174] (HELO ug-out-1314.google.com) (66.249.92.174)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 13 Jan 2007 10:54:35 -0800
Received: by ug-out-1314.google.com with SMTP id k40so1007314ugc
        for <java-user@lucene.apache.org>; Sat, 13 Jan 2007 10:54:13 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=LkDw4ccQg9w1l1Yk0fv55tt2R/DQVvF+0BCP438odN8T+LysJwU71xDkKZMiG2AwtB7rul+4ajoXI9EwrGmhdzk39Gue0BDG3O2ga0rY1u1cyZZ7b9aV9ZOF50UxtU2HQbMEHPqi9c7eIbD6Ir6Pb7yIHA5iAJcMsW/2sXYa3+U=
Received: by 10.82.111.8 with SMTP id j8mr340430buc.1168714452933;
        Sat, 13 Jan 2007 10:54:12 -0800 (PST)
Received: by 10.82.162.9 with HTTP; Sat, 13 Jan 2007 10:54:12 -0800 (PST)
Message-ID: <359a92830701131054v1ef9e9c3h67351c8f90cc77c0@mail.gmail.com>
Date: Sat, 13 Jan 2007 13:54:12 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Making document numbers persistent
In-Reply-To: <CD64156E-20CE-4BB1-969F-133DC1F02F2F@classdump.org>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_58852_22337566.1168714452745"
References: <CD64156E-20CE-4BB1-969F-133DC1F02F2F@classdump.org>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_58852_22337566.1168714452745
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

you say <<<Creating the filter involves querying for each document by using
our
internal unique id, and this is the primary bottleneck,
for large sets it takes around 35 seconds to build the bit set,
several orders magnitudes longer than the search itself.>>>

Before going off into modifying things, could you expand a bit on how you
query to build up the filter? Perhaps providing a code snippet?

Just to be sure we're talking about the same thing, when you say filter, ar=
e
you talking about Lucene filters? I'm assuming you are, in which case there
is probably wisdom on the list (although I won't provide very much <G>).
building up a Lucene filter with termenum/termdocs has been quite fast in m=
y
experience, but I don't know if my experience has any relevance to your
situation....

Best
Erick

On 1/13/07, Kay Roepke <kroepke@classdump.org> wrote:
>
> Hi!
>
> With a project we want to use Lucene in, we are running into
> performance problems with regard to building filter sets.
> Let me give you a quick overview of what we need to do:
> We are indexing information about users (index magnitude is ranging
> between 2 - 10 million documents). Each of those
> documents has a unique id (which is a primary key from a database).
> Indexing and querying works fine and is really fast,
> so that is not the issue. We don't need to store much information in
> the Lucene index, we are just interested in
> retrieving those unique ids by Lucene queries.
>
> The problem arises with search option we have. All of the users
> (documents we index) are "connected" to certain
> other users, in a network fashion. We must be able to restrict the
> query (or filter it after searching the complete index)
> to certain "levels of connectedness", i.e. you can search within say
> three hops of yourself. We compute a list of user ids
> which are in the set of the applicable "contacts". This information
> about connection cannot be stored in the index, as it
> is changing often and is expensive to compute in advance.
>
> The problem now is to construct the filter sets, because we cannot
> cache the document numbers of the documents in the Lucene
> index. Making BooleanQuery objects to programmtically include in the
> query is out the question, since the "filter set" can
> be enormously huge (we have instances of the set having a magnitude
> of 500,000 - 1 million ids, on average they will be much
> smaller but they are not trivially small in any case).
> Creating the filter involves querying for each document by using our
> internal unique id, and this is the primary bottleneck,
> for large sets it takes around 35 seconds to build the bit set,
> several orders magnitudes longer than the search itself.
>
> So what we want to do is to cache the filters, once created. Since
> the document ids would not be the same across the Lucene
> servers we'll be using, we can only cache the filters per server,
> which is a big performance loss. We also cannot reasonably control
> on which Lucene server the request will be made (no persistence).
> Caching the document ids externally is also out of the question
> because they won't be the same across multiple servers and they can
> possibly change at any time.
>
> That's the gist of the problem. To further complicate matters, we
> have quite a large number of updates per second on that index, so
> I expect segment merges to happen quite often.
>
> We have discussed these potential solutions to this problem:
>
> - Ideally we would use our internal unique ids as document ids. I
> know that the document number essentially
>    is the offset into the index file. This would potentially waste
> space, I'm aware of that, but let's just assume that this doesn't
>    concern us right now. One problem to solve would be the segment
> files, I haven't got a solution for that right now.
>    My question for this solution would be: Where, in general terms,
> would I have to look to change the meaning of the document id, codewise?
>    I have identified a couple spots, but would like to get some
> further advice from people who are way more familiar with the code ;)
>
> - To keep the document ids from changing we could prevent segment
> merging - I'm not concerned with optimizing indices, this can be done
> offline,
>    and I'm prepared to build the caches after that. What would be the
> ballpark figure for query time degradation, approximately?
>    The code changes are obvious, I think, or are there more places
> I'd need to touch, other than maybeMergeSegments?
>
> - Somewhat related is the question why a document cannot be updated
> "in place", i.e. what is the reason for the "delete/insert document"
>    paradigm? I assume it is because the field list isn't necessarily
> the same length for each document, right? From all I have seen, it
>    is stems from the file format used, not something that is inherent
> to the idea behind Lucene?
>
> To round it off, I'm prepared to do some heavy modification of the
> Lucene codebase to make this work, so even if you have suggestions that
> would require that, I'm more than happy to listen ;)
>
> This is probably a hard question to ask, and might not be clear
> enough, so if I'm not making sense please tell me :)
>
> Thanks in advance,
>
> Kay
>
> --
> Kay R=F6pke
> http://classdump.org/
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_58852_22337566.1168714452745--

From java-user-return-25478-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jan 13 19:13:09 2007
Return-Path: <java-user-return-25478-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90848 invoked from network); 13 Jan 2007 19:13:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Jan 2007 19:13:08 -0000
Received: (qmail 51465 invoked by uid 500); 13 Jan 2007 19:13:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 51439 invoked by uid 500); 13 Jan 2007 19:13:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 51424 invoked by uid 99); 13 Jan 2007 19:13:08 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 13 Jan 2007 11:13:08 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of karl.wettin@gmail.com designates 66.249.92.172 as permitted sender)
Received: from [66.249.92.172] (HELO ug-out-1314.google.com) (66.249.92.172)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 13 Jan 2007 11:12:58 -0800
Received: by ug-out-1314.google.com with SMTP id k40so1009619ugc
        for <java-user@lucene.apache.org>; Sat, 13 Jan 2007 11:12:37 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=IM4tuVhM4WDvcri6qQ4hBTOI3QJ+gMA9u2BzT5XWIef2Yh5xPJxDQRuct+fN//vvbC2KDZieEHgPAFOCl8g/vLwo8afWJBBq+Bj3FFr0BvDDtvgWy5MYa4w/uq26lJAVtGboQ4YGzc2yxbKY2WTQ6H8ZjqOSS0kgGDOjyEAjihg=
Received: by 10.67.101.10 with SMTP id d10mr2764474ugm.1168715556800;
        Sat, 13 Jan 2007 11:12:36 -0800 (PST)
Received: from ?192.168.0.131? ( [83.249.127.91])
        by mx.google.com with ESMTP id j34sm3314381ugc.2007.01.13.11.12.31;
        Sat, 13 Jan 2007 11:12:36 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <CD64156E-20CE-4BB1-969F-133DC1F02F2F@classdump.org>
References: <CD64156E-20CE-4BB1-969F-133DC1F02F2F@classdump.org>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <6DB30C07-0793-42C2-994F-29D01AA356B0@gmail.com>
Content-Transfer-Encoding: 7bit
From: karl wettin <karl.wettin@gmail.com>
Subject: Re: Making document numbers persistent
Date: Sat, 13 Jan 2007 20:12:15 +0100
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org


13 jan 2007 kl. 19.14 skrev Kay Roepke:

> All of the users (documents we index) are "connected" to certain  
> other users,
> in a network fashion. We must be able to restrict the query (or  
> filter it after
> searching the complete index) to certain "levels of connectedness",  
> i.e. you
> can search within say three hops of yourself.  We compute a list of  
> user ids
> which are in the set of the applicable "contacts". This information  
> about
> connection cannot be stored in the index, as it is changing often  
> and is
> expensive to compute in advance.

Given you don't have too many users, you could do it the other way  
around, storing
the distance to all users from each document.

But the bottom line really is that Lucene is not designed for this  
sort of thing.

If I was you, I would make a filter that navigates an in heap object  
graph of all
users and their connections using a breadth first (or perhaps even  
A*). I'm
certain it will turn out to be much simpler to maintain, and probably  
several
thousand times faster than implementing such a feature in the Lucene  
storage.

http://en.wikipedia.org/wiki/Breadth-first_search
http://en.wikipedia.org/wiki/A%2A_search_algorithm


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25479-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jan 13 21:42:46 2007
Return-Path: <java-user-return-25479-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 17900 invoked from network); 13 Jan 2007 21:42:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Jan 2007 21:42:45 -0000
Received: (qmail 52572 invoked by uid 500); 13 Jan 2007 21:42:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52538 invoked by uid 500); 13 Jan 2007 21:42:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52527 invoked by uid 99); 13 Jan 2007 21:42:45 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 13 Jan 2007 13:42:45 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of markrmiller@gmail.com designates 66.249.82.231 as permitted sender)
Received: from [66.249.82.231] (HELO wx-out-0506.google.com) (66.249.82.231)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 13 Jan 2007 13:42:34 -0800
Received: by wx-out-0506.google.com with SMTP id i29so1110122wxd
        for <java-user@lucene.apache.org>; Sat, 13 Jan 2007 13:42:13 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=q0Cixg2x1UVgGl+RcSaTci9Tj6oWACNtPF3RaB7udqWTl+ntxSLFm6upKeG/El9WuvEXMJThHROKQyQQDjbR2yqzoCfJT8vCMPx30rBXDjY7vhc5sauVdzoAKg6HzNR5CYZTrjNmwM2Cp6MmiCNkq5/qiTGxcAfWZnwhAijd6XM=
Received: by 10.70.19.20 with SMTP id 20mr4285100wxs.1168724533782;
        Sat, 13 Jan 2007 13:42:13 -0800 (PST)
Received: from ?192.168.1.103? ( [216.66.114.42])
        by mx.google.com with ESMTP id 14sm7500965wrl.2007.01.13.13.42.12;
        Sat, 13 Jan 2007 13:42:12 -0800 (PST)
Message-ID: <45A9528D.5090701@gmail.com>
Date: Sat, 13 Jan 2007 16:43:41 -0500
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 1.5.0.9 (Windows/20061207)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Highlighting brackets bug ?
References: <f43d06890701130935g78999928w6df86e3e5cd05e97@mail.gmail.com>
In-Reply-To: <f43d06890701130935g78999928w6df86e3e5cd05e97@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Which version are you using? I believe that this is a bug that was fixed 
last August...but that the fix is only in the 2.1 Highlighter version. 
Try grabbing the latest highlighter code from the trunk.

- Mark

heikki doeleman wrote:
> Hi there,
>
> I'm having some strange behaviour using the highlighter and I'm 
> wondering if
> it is a bug or should I take a different approach ?
>
> I want to highlight the search terms that were used to execute a 
> query. If
> the search terms end in an end-bracket or end-square-bracket (so ')' 
> or ']'
> ), the resulting highlighted piece no longer contains the end bracket; it
> just disappeared !
>
> For exqmple searching for Vera, Yvonne (1964- ) and highlighting the
> results, would produce <span class="highlight">Vera, Yvonne (1964- 
> </span>.
>
> The same thing happens if I use quotes to try phrase searching, for 
> example
> "Vera, Yvonne (1964- )".
>
> The field is indexed using a standard tokenizer. It makes no 
> difference if I
> use Field.Index.UN_TOKENIZED or Field.Index.TOKENIZED when creating the
> index.
>
> In the highlighting I create a query from the search terms and rewrite 
> it. I
> tried both creating a PhraseQuery, and I tried the QueryParser.parse() 
> using
> the same analyzer used for indexing and searching. Nothing helps !! Also
> tried escaping the brackets, to no avail.
>
> Any help would be very much appreciated !
>
> thank you
> Heikki Doeleman
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25480-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jan 14 01:05:34 2007
Return-Path: <java-user-return-25480-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44590 invoked from network); 14 Jan 2007 01:05:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Jan 2007 01:05:33 -0000
Received: (qmail 52335 invoked by uid 500); 14 Jan 2007 01:05:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52300 invoked by uid 500); 14 Jan 2007 01:05:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52287 invoked by uid 99); 14 Jan 2007 01:05:34 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 13 Jan 2007 17:05:34 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [213.9.79.74] (HELO box7974.elkhouse.de) (213.9.79.74)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 13 Jan 2007 17:05:24 -0800
Received: from [192.168.0.196] (c168227.adsl.hansenet.de [::ffff:213.39.168.227])
  (AUTH: LOGIN kroepke@classdump.org)
  by box7974.elkhouse.de with esmtp; Sun, 14 Jan 2007 02:05:02 +0100
  id 00000BC3.45A981BE.00001B6F
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <359a92830701131054v1ef9e9c3h67351c8f90cc77c0@mail.gmail.com>
References: <CD64156E-20CE-4BB1-969F-133DC1F02F2F@classdump.org> <359a92830701131054v1ef9e9c3h67351c8f90cc77c0@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; delsp=yes; format=flowed
Message-Id: <4F1C9AE1-C182-4A36-A06E-5AEF47F40F2D@classdump.org>
Content-Transfer-Encoding: quoted-printable
From: Kay Roepke <kroepke@classdump.org>
Subject: Re: Making document numbers persistent
Date: Sun, 14 Jan 2007 02:05:01 +0100
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Erick!

On 13. Jan 2007, at 19:54 , Erick Erickson wrote:

> Before going off into modifying things, could you expand a bit on =20
> how you
> query to build up the filter? Perhaps providing a code snippet?

We are passing in our unique ids from our database which we have to =20
translate
to lucene document ids. This is done by an API (our own API) call, =20
because the
main application isn't written in Java. Lucene will function as a =20
remote service
for the other application servers.

> Just to be sure we're talking about the same thing, when you say =20
> filter, are
> you talking about Lucene filters? I'm assuming you are, in which =20
> case there
> is probably wisdom on the list (although I won't provide very much =20
> <G>).
> building up a Lucene filter with termenum/termdocs has been quite =20
> fast in my
> experience, but I don't know if my experience has any relevance to =20
> your
> situation....

Yes, I was talking about Lucene filters. Here's what we do currently =20
(pretty much
standard, if I'm correct):

public class IdQueryFilter extends Filter {

     Collection users;

     public IdQueryFilter(Collection users) {
         this.users =3D users;
     }

     public BitSet bits(IndexReader index) throws IOException {
         BitSet result =3D new BitSet();
         Iterator it =3D users.iterator();
         while (it.hasNext()) {
             Term term =3D new Term( "id", new Long(((User)it.next=20
()).id).toString());
             TermDocs terms =3D ((IndexReader)index).termDocs( term );
             if (terms.next()) {
                 result.set(terms.doc());
             }
             terms =3D null; term =3D null;
         }
         return result;
     }
}

This can take up to 30sec for a large (~500.000 elements) collections =20=

of users and it
it the thing I'm currently trying to solve.
I can handle situations where this can take long once, since I'm =20
really asking something
that Lucene isn't designed for, but the culprit is that I can't =20
really cache the resulting
bitset. I can cache it on one of the Lucene servers, but can't share =20
it among the rest of
the servers (we will eventually have way more than one for scalabilty/=20=

reliability reasons).
We cannot afford to calculate these bitsets on all servers (think of =20
a repeated search, or
paging, when you cannot make sure that you will hit the same Lucene =20
application to do the
search - you might end up on a different server that hasn't seen a =20
request before).

I hope this makes it more clear of what I'm up against. I'm not =20
running around to change things
for the change's sake. If I can get around it, fine. If not, I can =20
deal :)

Thanks,

Kay
--=20
Kay R=F6pke
http://classdump.org/





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25481-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jan 14 01:15:11 2007
Return-Path: <java-user-return-25481-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45836 invoked from network); 14 Jan 2007 01:15:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Jan 2007 01:15:11 -0000
Received: (qmail 57224 invoked by uid 500); 14 Jan 2007 01:15:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57189 invoked by uid 500); 14 Jan 2007 01:15:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57177 invoked by uid 99); 14 Jan 2007 01:15:12 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 13 Jan 2007 17:15:12 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [213.9.79.74] (HELO box7974.elkhouse.de) (213.9.79.74)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 13 Jan 2007 17:15:02 -0800
Received: from [192.168.0.196] (c168227.adsl.hansenet.de [::ffff:213.39.168.227])
  (AUTH: LOGIN kroepke@classdump.org)
  by box7974.elkhouse.de with esmtp; Sun, 14 Jan 2007 02:14:41 +0100
  id 00000BC3.45A98401.00001B9E
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <6DB30C07-0793-42C2-994F-29D01AA356B0@gmail.com>
References: <CD64156E-20CE-4BB1-969F-133DC1F02F2F@classdump.org> <6DB30C07-0793-42C2-994F-29D01AA356B0@gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; delsp=yes; format=flowed
Message-Id: <4B3ABBF8-821E-4655-BDE3-581A8BEC30D5@classdump.org>
Content-Transfer-Encoding: quoted-printable
From: Kay Roepke <kroepke@classdump.org>
Subject: Re: Making document numbers persistent
Date: Sun, 14 Jan 2007 02:14:40 +0100
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Karl!

On 13. Jan 2007, at 20:12 , karl wettin wrote:

>
> 13 jan 2007 kl. 19.14 skrev Kay Roepke:
>
>> All of the users (documents we index) are "connected" to certain =20
>> other users,
>> in a network fashion. We must be able to restrict the query (or =20
>> filter it after
>> searching the complete index) to certain "levels of =20
>> connectedness", i.e. you
>> can search within say three hops of yourself.  We compute a list =20
>> of user ids
>> which are in the set of the applicable "contacts". This =20
>> information about
>> connection cannot be stored in the index, as it is changing often =20
>> and is
>> expensive to compute in advance.
>
> Given you don't have too many users, you could do it the other way =20
> around, storing
> the distance to all users from each document.

Unfortunately (or fortunately, depending how you look at it ;)), we =20
do have a lot of users.
Precalculation isn't an option with the rate of change in that database.

> But the bottom line really is that Lucene is not designed for this =20
> sort of thing.

Yeah, exactly what I have been muttering for the last few days now. =20
Nevertheless
Lucene is ideal for all the other types of searches we want to =20
provide. This
"network search" option is the only thing that really gets in the =20
way, and I'd hate
to have to abandon Lucene for that reason alone.

> If I was you, I would make a filter that navigates an in heap =20
> object graph of all
> users and their connections using a breadth first (or perhaps even =20
> A*). I'm
> certain it will turn out to be much simpler to maintain, and =20
> probably several
> thousand times faster than implementing such a feature in the =20
> Lucene storage.

An option I have considered previously, too. I haven't had time to =20
implement it, though.
Anyway, I do have a list of the connected users from a different =20
source, I don't expect
to get that information out of Lucene. Sorry if I haven't made clear =20
in my earlier post.
My problem is really only to filter the search results to just =20
include the previously
calculated documents.
I would essentially have the same problem with a in-memory graph: I =20
cannot be sure
of the Lucene document ids those users will have, so I would have to =20
look those up
- exactly as I do now. The bottleneck would remain the same :(

Thanks,

Kay
--=20
Kay R=F6pke
http://classdump.org/





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25482-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jan 14 01:39:45 2007
Return-Path: <java-user-return-25482-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48608 invoked from network); 14 Jan 2007 01:39:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Jan 2007 01:39:45 -0000
Received: (qmail 67313 invoked by uid 500); 14 Jan 2007 01:39:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67282 invoked by uid 500); 14 Jan 2007 01:39:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67268 invoked by uid 99); 14 Jan 2007 01:39:45 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 13 Jan 2007 17:39:45 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of markrmiller@gmail.com designates 66.249.82.231 as permitted sender)
Received: from [66.249.82.231] (HELO wx-out-0506.google.com) (66.249.82.231)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 13 Jan 2007 17:39:35 -0800
Received: by wx-out-0506.google.com with SMTP id i29so1149725wxd
        for <java-user@lucene.apache.org>; Sat, 13 Jan 2007 17:39:13 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=o/q009uZ3HCOnalU7QwWvAA/QrT4T78UbbVWV6iBSNFhVI8bWXhwPwAGnKz8D4sK+QZYa9oZ/o9e5VWaa+ApPxGN8OxjMWtYKpaWbW7VPVaAB1hnIqanT94Kj4lqZCX3YKLRWJn+zjR5KdxNczqwr5bdeerrm5mS/HRhY1v7dYg=
Received: by 10.70.34.3 with SMTP id h3mr4740434wxh.1168738753279;
        Sat, 13 Jan 2007 17:39:13 -0800 (PST)
Received: from ?192.168.1.103? ( [216.66.114.42])
        by mx.google.com with ESMTP id 43sm5737773wri.2007.01.13.17.39.11;
        Sat, 13 Jan 2007 17:39:12 -0800 (PST)
Message-ID: <45A98A10.50901@gmail.com>
Date: Sat, 13 Jan 2007 20:40:32 -0500
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 1.5.0.9 (Windows/20061207)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Making document numbers persistent
References: <CD64156E-20CE-4BB1-969F-133DC1F02F2F@classdump.org> <359a92830701131054v1ef9e9c3h67351c8f90cc77c0@mail.gmail.com> <4F1C9AE1-C182-4A36-A06E-5AEF47F40F2D@classdump.org>
In-Reply-To: <4F1C9AE1-C182-4A36-A06E-5AEF47F40F2D@classdump.org>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org


>
> I can handle situations where this can take long once, since I'm 
> really asking something
> that Lucene isn't designed for, but the culprit is that I can't really 
> cache the resulting
> bitset. I can cache it on one of the Lucene servers, but can't share 
> it among the rest of
> the servers (we will eventually have way more than one for 
> scalabilty/reliability reasons).
> We cannot afford to calculate these bitsets on all servers (think of a 
> repeated search, or
> paging, when you cannot make sure that you will hit the same Lucene 
> application to do the
> search - you might end up on a different server that hasn't seen a 
> request before).
First, have you looked at SwarmCache? Cluster aware caching for java...

Second...does it matter that you cannot share the same cache across 
multiple servers? How about a separate cache on each server? When a 
request hits a particular server for the first time it builds the filter 
and caches it. I do a lot of filter caching that way with EHcache.

There must be some way to cache that filter...

- Mark

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25483-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jan 14 01:59:55 2007
Return-Path: <java-user-return-25483-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 49849 invoked from network); 14 Jan 2007 01:59:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Jan 2007 01:59:54 -0000
Received: (qmail 75149 invoked by uid 500); 14 Jan 2007 01:59:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75100 invoked by uid 500); 14 Jan 2007 01:59:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75089 invoked by uid 99); 14 Jan 2007 01:59:54 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 13 Jan 2007 17:59:54 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [213.9.79.74] (HELO box7974.elkhouse.de) (213.9.79.74)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 13 Jan 2007 17:59:44 -0800
Received: from [192.168.0.196] (c142063.adsl.hansenet.de [::ffff:213.39.142.63])
  (AUTH: LOGIN kroepke@classdump.org)
  by box7974.elkhouse.de with esmtp; Sun, 14 Jan 2007 02:59:23 +0100
  id 00000BC3.45A98E7B.00001C77
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <45A98A10.50901@gmail.com>
References: <CD64156E-20CE-4BB1-969F-133DC1F02F2F@classdump.org> <359a92830701131054v1ef9e9c3h67351c8f90cc77c0@mail.gmail.com> <4F1C9AE1-C182-4A36-A06E-5AEF47F40F2D@classdump.org> <45A98A10.50901@gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; delsp=yes; format=flowed
Message-Id: <2C1A85C9-535A-4F1F-85AB-8D33E7D7AF41@classdump.org>
Content-Transfer-Encoding: quoted-printable
From: Kay Roepke <kroepke@classdump.org>
Subject: Re: Making document numbers persistent
Date: Sun, 14 Jan 2007 02:59:22 +0100
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org


On 14. Jan 2007, at 2:40 , Mark Miller wrote:

> First, have you looked at SwarmCache? Cluster aware caching for =20
> java...

No, I haven't come across that one. I'll take a look, thanks!
As a matter of fact, we do have a network-wide caching mechanism, so =20
that's what we use.

> Second...does it matter that you cannot share the same cache across =20=

> multiple servers? How about a separate cache on each server? When a =20=

> request hits a particular server for the first time it builds the =20
> filter and caches it. I do a lot of filter caching that way with =20
> EHcache.

I currently cache it in each server (just by using a Map<Integer, =20
Filter> type of dumb cache). This works fine, but I'm concerned about =20=

production
use. The problem is that having the first cache miss is really =20
hurting us already (and you can't avoid the first, as you have to =20
calculate it at least once...) but going through it a second time on =20
a second server is distastrous. In our application there are =20
thousands of concurrent users querying the database interactively, =20
and as it is used over the web, this has to be fast. Really fast. In =20
general I require a sub-second response time. Calculating the filter =20
currently takes anywhere between 0.5 - 40 seconds, depending on the =20
user that makes the query. When he is paging, we probably will just =20
rexecute the search instead of caching that, but we might not end up =20
doing the search on the same Lucene server. Having the delay on the =20
first query is bad. Potentially having it on the following pages, =20
too, is not going to work. We might end up with 10 or more Lucene =20
servers, so ending up on a different server for each page isn't that =20
unlikely.

> There must be some way to cache that filter...

My ever recurring thought over the last couple of days...;)

The reasoning I put forth in my first mail lead me to the insight =20
that we cannot cache the filter the way Lucene is implementing them =20
right now. Even when caching the filter, the document ids may change. =20=

This would lead to potentially wrong results, because my filter cache =20=

is now stale (filtering the wrong documents). This I must avoid, =20
naturally. Lucene is giving me a cache practically for free already, =20
but I find its ever changing document ids a problem.
What I'd really like to do is to be able to assign documents ids, and =20=

have them stay at that position. The fact that I have to query for a =20
field, that I moreover know to be unique, is a huge bottleneck. Ok, I =20=

understand that this isn't an issue for fulltext search and most of =20
the applications we are using it for don't have that id requirement, =20
but having cheap, direct access to the documents in a externally =20
cacheable manner appeals to me. I'm sure there are others that have =20
been bitten by this, too, and I'm willing to invest some time into =20
the implementation. I'm just not familiar enough with the codebase to =20=

just begin hacking. Also, of course I might be missing something =20
crucial here, that makes my problem a non-issue (which I would =20
prefer :))

Thanks,

Kay

--=20
Kay R=F6pke
http://classdump.org/





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25484-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jan 14 02:19:49 2007
Return-Path: <java-user-return-25484-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58853 invoked from network); 14 Jan 2007 02:19:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Jan 2007 02:19:48 -0000
Received: (qmail 87696 invoked by uid 500); 14 Jan 2007 02:19:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87668 invoked by uid 500); 14 Jan 2007 02:19:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87657 invoked by uid 99); 14 Jan 2007 02:19:48 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 13 Jan 2007 18:19:48 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of markrmiller@gmail.com designates 66.249.82.238 as permitted sender)
Received: from [66.249.82.238] (HELO wx-out-0506.google.com) (66.249.82.238)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 13 Jan 2007 18:19:38 -0800
Received: by wx-out-0506.google.com with SMTP id i29so1156154wxd
        for <java-user@lucene.apache.org>; Sat, 13 Jan 2007 18:19:17 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=g8K8N4I6BsD+NHHiIq9dkdIBFvAoyeEWYpYf+DFy8sgXhkRUydkJ/2bH/PmN9fN/n9A6m4/ORf5QLMrVMeXNWM12KF1v+Ko2i6wG7IKmahnMu8kaIqF8zUfS1SELWg/xm3Mio+ZQSMIZpA5msYPJRkKraEiPSnc6PklA9PFgz74=
Received: by 10.70.129.4 with SMTP id b4mr4746405wxd.1168741157595;
        Sat, 13 Jan 2007 18:19:17 -0800 (PST)
Received: from ?192.168.1.103? ( [216.66.114.42])
        by mx.google.com with ESMTP id 14sm7991395wrl.2007.01.13.18.19.15;
        Sat, 13 Jan 2007 18:19:16 -0800 (PST)
Message-ID: <45A99372.7090605@gmail.com>
Date: Sat, 13 Jan 2007 21:20:34 -0500
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 1.5.0.9 (Windows/20061207)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Making document numbers persistent
References: <CD64156E-20CE-4BB1-969F-133DC1F02F2F@classdump.org> <359a92830701131054v1ef9e9c3h67351c8f90cc77c0@mail.gmail.com> <4F1C9AE1-C182-4A36-A06E-5AEF47F40F2D@classdump.org> <45A98A10.50901@gmail.com> <2C1A85C9-535A-4F1F-85AB-8D33E7D7AF41@classdump.org>
In-Reply-To: <2C1A85C9-535A-4F1F-85AB-8D33E7D7AF41@classdump.org>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Sorry Kay, I jumped in midstream...I should have read your first post 
more thoroughly. By the way, many of the experts rarely comment much on 
the weekend so you will probably get some good answers come Monday (lots 
of replies often attract their attention <g>).

I do have one more whack though:

I don't have anything to help with the first computation...but how about 
using a stale cache of the filter until the new filter is populated? A 
similar idea to warming up a Searcher for field based sorting? This 
would cause a slight lag, but would hide the filter building time from 
the user (after the first is built of course).

- Mark

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25485-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jan 14 02:32:43 2007
Return-Path: <java-user-return-25485-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62104 invoked from network); 14 Jan 2007 02:32:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Jan 2007 02:32:42 -0000
Received: (qmail 92583 invoked by uid 500); 14 Jan 2007 02:32:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92551 invoked by uid 500); 14 Jan 2007 02:32:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92540 invoked by uid 99); 14 Jan 2007 02:32:43 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 13 Jan 2007 18:32:43 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [213.9.79.74] (HELO box7974.elkhouse.de) (213.9.79.74)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 13 Jan 2007 18:32:33 -0800
Received: from [192.168.0.196] (c142063.adsl.hansenet.de [::ffff:213.39.142.63])
  (AUTH: LOGIN kroepke@classdump.org)
  by box7974.elkhouse.de with esmtp; Sun, 14 Jan 2007 03:32:11 +0100
  id 048004EC.45A9962B.00001D32
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <45A99372.7090605@gmail.com>
References: <CD64156E-20CE-4BB1-969F-133DC1F02F2F@classdump.org> <359a92830701131054v1ef9e9c3h67351c8f90cc77c0@mail.gmail.com> <4F1C9AE1-C182-4A36-A06E-5AEF47F40F2D@classdump.org> <45A98A10.50901@gmail.com> <2C1A85C9-535A-4F1F-85AB-8D33E7D7AF41@classdump.org> <45A99372.7090605@gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; delsp=yes; format=flowed
Message-Id: <FB2B86E9-6C19-4427-99C6-FA625877580D@classdump.org>
Content-Transfer-Encoding: quoted-printable
From: Kay Roepke <kroepke@classdump.org>
Subject: Re: Making document numbers persistent
Date: Sun, 14 Jan 2007 03:32:07 +0100
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org


On 14. Jan 2007, at 3:20 , Mark Miller wrote:

> Sorry Kay, I jumped in midstream...I should have read your first =20
> post more thoroughly.

No problem, it was a bit lenghty, anyway...sorry about that. I just =20
tried to give enough information so that people don't get confused =20
too much.

> By the way, many of the experts rarely comment much on the weekend =20
> so you will probably get some good answers come Monday (lots of =20
> replies often attract their attention <g>).

Cool :) I shouldn't be working on the weekend either, come to think =20
of it.

> I do have one more whack though:
>
> I don't have anything to help with the first computation...but how =20
> about using a stale cache of the filter until the new filter is =20
> populated? A similar idea to warming up a Searcher for field based =20
> sorting? This would cause a slight lag, but would hide the filter =20
> building time from the user (after the first is built of course).

Yes, I assume we will be doing all sorts of wacky stuff to hide the =20
computation of even the first built. Probably something along the =20
lines of "predictive execution". But my primary goal is to keep the =20
application itself as clean and simple as possible. If that means I =20
have to change some of the guts of Lucene, so be it.
It'd be wonderful to be able to just use our unique ids in place of =20
the Lucene document ids somehow - then I wouldn't even have to spent =20
any significant time at all constructing the filter bitsets. It =20
couldn't get much faster than that. We are quite obsessed with =20
response times, as you probably guessed by now ;) Thus my obnoxious =20
insistence about sharing filter caches etc.

In essence, what I want to achieve are persistent document numbers. ;)

cheers,
-k
--=20
Kay R=F6pke
http://classdump.org/





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25486-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jan 14 02:54:44 2007
Return-Path: <java-user-return-25486-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64136 invoked from network); 14 Jan 2007 02:54:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Jan 2007 02:54:44 -0000
Received: (qmail 4907 invoked by uid 500); 14 Jan 2007 02:54:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4883 invoked by uid 500); 14 Jan 2007 02:54:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4872 invoked by uid 99); 14 Jan 2007 02:54:44 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 13 Jan 2007 18:54:44 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 64.233.182.187 as permitted sender)
Received: from [64.233.182.187] (HELO nf-out-0910.google.com) (64.233.182.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 13 Jan 2007 18:54:35 -0800
Received: by nf-out-0910.google.com with SMTP id a27so1554183nfc
        for <java-user@lucene.apache.org>; Sat, 13 Jan 2007 18:54:14 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=qfyAmew939ND7bEv8dUkf1JX/nWsBOGHwlGNBmkXVBjB+e1wTUElZRZzVDoBYnCQ/Vnyzzgeum8gYAIurw7YoFEKrPQh42+zVCjJI7AWLlTyWZE4Qo5utoLsPcCTmNveuq7zBNhO2FYRIIaCLETHop7Q8dLTFHygUkbz4Z8xkng=
Received: by 10.82.135.13 with SMTP id i13mr383014bud.1168743245476;
        Sat, 13 Jan 2007 18:54:05 -0800 (PST)
Received: by 10.82.162.9 with HTTP; Sat, 13 Jan 2007 18:54:05 -0800 (PST)
Message-ID: <359a92830701131854l7ed499f3u27bd803ab2fd73c8@mail.gmail.com>
Date: Sat, 13 Jan 2007 21:54:05 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Making document numbers persistent
In-Reply-To: <4F1C9AE1-C182-4A36-A06E-5AEF47F40F2D@classdump.org>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_62196_16845277.1168743245419"
References: <CD64156E-20CE-4BB1-969F-133DC1F02F2F@classdump.org>
	 <359a92830701131054v1ef9e9c3h67351c8f90cc77c0@mail.gmail.com>
	 <4F1C9AE1-C182-4A36-A06E-5AEF47F40F2D@classdump.org>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_62196_16845277.1168743245419
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

A couple of things...

1> You're probably already aware that the indexreader doesn't reflect
updates until it is re-opened, so any filters you cached would be valid
until you re-opened the reader. CachingWrapperFilter will store the Lucene
filters for you. But this probably isn't germane to your problem..

2> If you are closing and re-opening your readers, this is a big performanc=
e
hit. Is it possible that that's what you're seeing? (I doubt this, but I
thought I'd bring it up).

3> I doubt it really will make a performance difference, but you could use
TermDocs.seek rather than get a new termdocs for each term from the reader.
(and if this *does* make a difference, please let me know)

4> It's playing with fire, but.... you say "in essence, we want persistent
Lucene document numbers". I believe they *are* persistent until and unless
you optimize *after* deleting documents. So you control when they change
(you'll get more information by searching the mail archive, but what to
search for escapes my poor memory). So it *may* be possible to, say,
optimize your index (and record the user-id/luceneid pairs) at discrete
points in time and/or synchronize this correspondence when convenient.
Perhaps in another index or orthogonal documents.

5> Is there any chance whatsoever of inverting your problem? That is, make
the database use the Lucene IDs as the primary key (assuming you can contro=
l
when the Lucene IDs change as above)? This is out there on the fringes of
possibility and I'd be really surprised if you could.... but you're
desperate <G>. You'd essentially have to be able to rebuild your database
whenever you re-optimized your index, a bit of the tail wagging the dog
here.....

6> Can you post-filter instead of pre-filter your queries? Essentially, whe=
n
you get your search results, ask "is the user in the my set of users"? It
depends upon whether you need to return the whole set or the top N document=
s
I suppose, as well as the result-set size. If your results (without the
filter) are too high probably not..... I'm assuming that there must be othe=
r
clauses you attach the filter to.

7> If you can't re-order your database, can you invert the problem by
maintaining a table in the database with this correspondence that changes a=
s
the Lucene index changes and use a query on *that* to populate your filter?
You're right in that this part of your application is using Lucene for
something other than it was intended for. You're really running into troubl=
e
when you're trying to use Lucene like a RDBMS. Maybe it's the correct thing
to do to move the RDBMS-like actions to one of those....

Anyway, that exhausts my creativity this evening. And Mark's right. People
way more knowledgeable than me will be on the lists Monday.....

Best of luck!
Erick

On 1/13/07, Kay Roepke <kroepke@classdump.org> wrote:
>
> Hi Erick!
>
> On 13. Jan 2007, at 19:54 , Erick Erickson wrote:
>
> > Before going off into modifying things, could you expand a bit on
> > how you
> > query to build up the filter? Perhaps providing a code snippet?
>
> We are passing in our unique ids from our database which we have to
> translate
> to lucene document ids. This is done by an API (our own API) call,
> because the
> main application isn't written in Java. Lucene will function as a
> remote service
> for the other application servers.
>
> > Just to be sure we're talking about the same thing, when you say
> > filter, are
> > you talking about Lucene filters? I'm assuming you are, in which
> > case there
> > is probably wisdom on the list (although I won't provide very much
> > <G>).
> > building up a Lucene filter with termenum/termdocs has been quite
> > fast in my
> > experience, but I don't know if my experience has any relevance to
> > your
> > situation....
>
> Yes, I was talking about Lucene filters. Here's what we do currently
> (pretty much
> standard, if I'm correct):
>
> public class IdQueryFilter extends Filter {
>
>      Collection users;
>
>      public IdQueryFilter(Collection users) {
>          this.users =3D users;
>      }
>
>      public BitSet bits(IndexReader index) throws IOException {
>          BitSet result =3D new BitSet();
>          Iterator it =3D users.iterator();
>          while (it.hasNext()) {
>              Term term =3D new Term( "id", new Long(((User)it.next
> ()).id).toString());
>              TermDocs terms =3D ((IndexReader)index).termDocs( term );
>              if (terms.next()) {
>                  result.set(terms.doc());
>              }
>              terms =3D null; term =3D null;
>          }
>          return result;
>      }
> }
>
> This can take up to 30sec for a large (~500.000 elements) collections
> of users and it
> it the thing I'm currently trying to solve.
> I can handle situations where this can take long once, since I'm
> really asking something
> that Lucene isn't designed for, but the culprit is that I can't
> really cache the resulting
> bitset. I can cache it on one of the Lucene servers, but can't share
> it among the rest of
> the servers (we will eventually have way more than one for scalabilty/
> reliability reasons).
> We cannot afford to calculate these bitsets on all servers (think of
> a repeated search, or
> paging, when you cannot make sure that you will hit the same Lucene
> application to do the
> search - you might end up on a different server that hasn't seen a
> request before).
>
> I hope this makes it more clear of what I'm up against. I'm not
> running around to change things
> for the change's sake. If I can get around it, fine. If not, I can
> deal :)
>
> Thanks,
>
> Kay
> --
> Kay R=F6pke
> http://classdump.org/
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_62196_16845277.1168743245419--

From java-user-return-25487-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jan 14 06:10:54 2007
Return-Path: <java-user-return-25487-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 83321 invoked from network); 14 Jan 2007 06:10:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Jan 2007 06:10:54 -0000
Received: (qmail 72500 invoked by uid 500); 14 Jan 2007 06:10:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72475 invoked by uid 500); 14 Jan 2007 06:10:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72464 invoked by uid 99); 14 Jan 2007 06:10:54 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 13 Jan 2007 22:10:54 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 13 Jan 2007 22:10:45 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 169125B764; Sat, 13 Jan 2007 22:10:25 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 0EC2A7F403
	for <java-user@lucene.apache.org>; Sat, 13 Jan 2007 22:10:25 -0800 (PST)
Date: Sat, 13 Jan 2007 22:10:25 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Making document numbers persistent
In-Reply-To: <CD64156E-20CE-4BB1-969F-133DC1F02F2F@classdump.org>
Message-ID: <Pine.LNX.4.58.0701132144400.6139@hal.rescomp.berkeley.edu>
References: <CD64156E-20CE-4BB1-969F-133DC1F02F2F@classdump.org>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: So what we want to do is to cache the filters, once created. Since
: the document ids would not be the same across the Lucene
: servers we'll be using, we can only cache the filters per server,
: which is a big performance loss. We also cannot reasonably control
: on which Lucene server the request will be made (no persistence).
: Caching the document ids externally is also out of the question
: because they won't be the same across multiple servers and they can
: possibly change at any time.

if you're talking about multiple identical servers used for load
balancing, then there is no reason why those indexes wouldn't be kept in
sync (the merge model is deterministic, so if you apply the same
operations to every server in the same order, you'll get identical
indexes) ... so you could concievably use a shared cache -- if you aren't
talking about indentical copies of hte index, then i'm not sure i
understand your situation -- since it would seem you'd need something to
ensure that the query got sent to the *right* server, and that would imply
that subsequent requests would be able to talk advantage of the cache.

: That's the gist of the problem. To further complicate matters, we
: have quite a large number of updates per second on that index, so
: I expect segment merges to happen quite often.

practically speaking, there is a differnce between the rate at which
updates come in, and the rate at which you have to make updates available
to your users ... reopening an indexreader no more frequently then once
ever X minutes -- and not reopening at all unless the index has changed --
can drasticly improve your ability to cache things effectively.

: - Ideally we would use our internal unique ids as document ids. I
: know that the document number essentially
:    is the offset into the index file. This would potentially waste
: space, I'm aware of that, but let's just assume that this doesn't

i'm not a fileformat guy, i don't really get into those internals much,
but the document number isn't "esentially" the offest -- it *is* the
offset -- each segment maintains it's own list of documents from 1 to size
of segment, and the document number for a given doc is the number used to
identify it in it's segment, plus the offset of that segment in the index
as a whole -- i don't believe the document number you use when calling
reader.document(docId) is ever stored in the index (unless your index
happens to have a single segment.

:    My question for this solution would be: Where, in general terms,
: would I have to look to change the meaning of the document id, codewise?

Don't take this the wrong way, but i read that question the same way i
would read "Where, in general terms, would i have to look to change the
meaning of integer addition, codewise?" ... there is no
DocumentNumberFactory, no getNextDocId() ... the concept of document ids
is so ingrained and pervasive i can't even imagine what it would take to
change it.

: - To keep the document ids from changing we could prevent segment
: merging - I'm not concerned with optimizing indices, this can be done
: offline,
:    and I'm prepared to build the caches after that. What would be the
: ballpark figure for query time degradation, approximately?
:    The code changes are obvious, I think, or are there more places
: I'd need to touch, other than maybeMergeSegments?

As i recall, everytime you open a new IndexWriter (which you would need to
do frequently since you have to close your old IndexWriter for your
multiple updates a second to be visible) a new segment is opened ... if
you really manage to competely eliminate segment merges you are talking
about potentially having 100,000 segments after 24 hours ... I think the
search performance cost there would breaty significantly outway your
current Filter building costs ... but that's just speculation since i've
never seen an index with that many segments -- at least not on a machine
that was acctually *functioning* :)

: - Somewhat related is the question why a document cannot be updated
: "in place", i.e. what is the reason for the "delete/insert document"
:    paradigm? I assume it is because the field list isn't necessarily
: the same length for each document, right? From all I have seen, it
:    is stems from the file format used, not something that is inherent
: to the idea behind Lucene?

it's inherent to the idea of an Inverted Index -- there is no single
document stored anywhere, the indexed terms are stored and they refrence
the list of docIds (as offsets in the current segment) that the are in ...
deleting a document just adds the docId to a list of documents to be
ignored (because they are deleted) when searchers are performed ... if you
really wanted to update in place, you would need to scan every term, see
if it was mapped to the doc, and then zero out that mapping, and then
apend the list of <term,doc> mappings for hte terms that are in the
updated doc -- which would take a lot longer then the current
delete/update approach.




-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25488-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jan 14 06:14:36 2007
Return-Path: <java-user-return-25488-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 83771 invoked from network); 14 Jan 2007 06:14:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Jan 2007 06:14:36 -0000
Received: (qmail 75112 invoked by uid 500); 14 Jan 2007 06:14:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75081 invoked by uid 500); 14 Jan 2007 06:14:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75070 invoked by uid 99); 14 Jan 2007 06:14:37 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 13 Jan 2007 22:14:37 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 13 Jan 2007 22:14:28 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 91D065B764; Sat, 13 Jan 2007 22:14:08 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 79C997F403
	for <java-user@lucene.apache.org>; Sat, 13 Jan 2007 22:14:08 -0800 (PST)
Date: Sat, 13 Jan 2007 22:14:08 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Making document numbers persistent
In-Reply-To: <359a92830701131854l7ed499f3u27bd803ab2fd73c8@mail.gmail.com>
Message-ID: <Pine.LNX.4.58.0701132210530.6139@hal.rescomp.berkeley.edu>
References: <CD64156E-20CE-4BB1-969F-133DC1F02F2F@classdump.org> 
 <359a92830701131054v1ef9e9c3h67351c8f90cc77c0@mail.gmail.com> 
 <4F1C9AE1-C182-4A36-A06E-5AEF47F40F2D@classdump.org>
 <359a92830701131854l7ed499f3u27bd803ab2fd73c8@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: 4> It's playing with fire, but.... you say "in essence, we want persistent
: Lucene document numbers". I believe they *are* persistent until and unless
: you optimize *after* deleting documents. So you control when they change
: (you'll get more information by searching the mail archive, but what to
: search for escapes my poor memory). So it *may* be possible to, say,
: optimize your index (and record the user-id/luceneid pairs) at discrete
: points in time and/or synchronize this correspondence when convenient.
: Perhaps in another index or orthogonal documents.

it's not just optimizing ... note the FAQ ...

http://wiki.apache.org/jakarta-lucene/LuceneFAQ#head-e1de2630fe33fb6eb6733747a5bf870f600e1b4c

When is it possible for document IDs to change?

Documents are only re-numbered after there have been deletions. Once there
have been deletions, renumbering may be triggered by any document addition
or index optimization. Once an index is optimized, no renumbering will be
performed until more deletions are made.






-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25489-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jan 14 07:53:37 2007
Return-Path: <java-user-return-25489-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90905 invoked from network); 14 Jan 2007 07:53:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Jan 2007 07:53:36 -0000
Received: (qmail 94447 invoked by uid 500); 14 Jan 2007 07:53:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94418 invoked by uid 500); 14 Jan 2007 07:53:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94407 invoked by uid 99); 14 Jan 2007 07:53:37 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 13 Jan 2007 23:53:37 -0800
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of DORONC@il.ibm.com designates 195.212.29.154 as permitted sender)
Received: from [195.212.29.154] (HELO mtagate5.de.ibm.com) (195.212.29.154)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 13 Jan 2007 23:53:26 -0800
Received: from d12nrmr1607.megacenter.de.ibm.com (d12nrmr1607.megacenter.de.ibm.com [9.149.167.49])
	by mtagate5.de.ibm.com (8.13.8/8.13.8) with ESMTP id l0E7r4Kr186022
	for <java-user@lucene.apache.org>; Sun, 14 Jan 2007 07:53:04 GMT
Received: from d12av04.megacenter.de.ibm.com (d12av04.megacenter.de.ibm.com [9.149.165.229])
	by d12nrmr1607.megacenter.de.ibm.com (8.13.8/8.13.8/NCO v8.2) with ESMTP id l0E7r4Lh3023008
	for <java-user@lucene.apache.org>; Sun, 14 Jan 2007 08:53:04 +0100
Received: from d12av04.megacenter.de.ibm.com (loopback [127.0.0.1])
	by d12av04.megacenter.de.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id l0E7r4S3031043
	for <java-user@lucene.apache.org>; Sun, 14 Jan 2007 08:53:04 +0100
Received: from d12mc102.megacenter.de.ibm.com (d12mc102.megacenter.de.ibm.com [9.149.167.114])
	by d12av04.megacenter.de.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id l0E7r4E5031040
	for <java-user@lucene.apache.org>; Sun, 14 Jan 2007 08:53:04 +0100
In-Reply-To: <Pine.LNX.4.58.0701132144400.6139@hal.rescomp.berkeley.edu>
Subject: Re: Making document numbers persistent
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 7.0 HF277 June 21, 2006
Message-ID: <OF11F979E0.5CEEF822-ON88257263.0028D4D2-88257263.002B2DBF@il.ibm.com>
From: Doron Cohen <DORONC@il.ibm.com>
Date: Sat, 13 Jan 2007 23:51:37 -0800
X-MIMETrack: Serialize by Router on D12MC102/12/M/IBM(Release 7.0.2HF71 | November 3, 2006) at
 14/01/2007 09:53:03
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org

>
> : - To keep the document ids from changing we could prevent segment
> : merging - I'm not concerned with optimizing indices, this can be done
> : offline,
> :    and I'm prepared to build the caches after that. What would be the
> : ballpark figure for query time degradation, approximately?
> :    The code changes are obvious, I think, or are there more places
> : I'd need to touch, other than maybeMergeSegments?
>
> As i recall, everytime you open a new IndexWriter (which you would need
to
> do frequently since you have to close your old IndexWriter for your
> multiple updates a second to be visible) a new segment is opened ... if
> you really manage to competely eliminate segment merges you are talking
> about potentially having 100,000 segments after 24 hours ... I think the
> search performance cost there would breaty significantly outway your
> current Filter building costs ... but that's just speculation since i've
> never seen an index with that many segments -- at least not on a machine
> that was acctually *functioning* :)
>

I think that one effective way to control docids changes, assuming
delete/update rate significantly lower than add rate, is to modify Lucene
such that deleted docs are only 'squeezed out' when calling optimize().
This would involve delicate changes in the merging code, but is possible.
Then, once there are 'too many' deletions, the application could call
optimize().

This way, having full control on when deleted docs are 'squeezed', and also
knowing which docs these are (same docs that same app deleted during last X
hours) - that application can at that point update the mapping between
Lucene IDs and the database IDs, again, knowing that Lucene IDs are set -
deterministically - by the order of adding docs.

This would allow - as Erick mentioned earlier in this thread - to create
the filter from the database only, no need to query Lucene for that. You
would probably need to copy that table so existing table can be still used
by searchers referencing the index before optimize() was called, at least
until db table is updated and some index warming is done.

I am not sure that I am happy with this direction, just wanted to point out
the possibility. Would have been convenient for this if Lucene's writer had
an option like "keepDeletions" or something, though I am not sure yet if
this can be implemented without too much complication of the code, or if
this is general enough to be in the API.

Doron



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25490-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jan 14 09:59:23 2007
Return-Path: <java-user-return-25490-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 27287 invoked from network); 14 Jan 2007 09:59:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Jan 2007 09:59:22 -0000
Received: (qmail 26465 invoked by uid 500); 14 Jan 2007 09:59:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26425 invoked by uid 500); 14 Jan 2007 09:59:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26414 invoked by uid 99); 14 Jan 2007 09:59:23 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 14 Jan 2007 01:59:23 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of karl.wettin@gmail.com designates 66.249.92.169 as permitted sender)
Received: from [66.249.92.169] (HELO ug-out-1314.google.com) (66.249.92.169)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 14 Jan 2007 01:59:13 -0800
Received: by ug-out-1314.google.com with SMTP id k40so1067169ugc
        for <java-user@lucene.apache.org>; Sun, 14 Jan 2007 01:58:51 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=fBplGbiN4Wide4zU51X3WpD2azOU6DnaObVv7jWYnWSoq85sq80mijb1I+c3z6MdlWUKFTtbEWx1OHu0lOsgOar6F6732yyWo8YaQHoqWftkkZNiaLr3DkFZBd6PXid8x0IJegxqfX1FV+JOpe544zDRqs3EclkjGoWihYO9ioo=
Received: by 10.67.97.18 with SMTP id z18mr3581652ugl.1168768731716;
        Sun, 14 Jan 2007 01:58:51 -0800 (PST)
Received: from ?192.168.0.131? ( [83.249.127.91])
        by mx.google.com with ESMTP id 34sm4031413uga.2007.01.14.01.58.50;
        Sun, 14 Jan 2007 01:58:50 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <4B3ABBF8-821E-4655-BDE3-581A8BEC30D5@classdump.org>
References: <CD64156E-20CE-4BB1-969F-133DC1F02F2F@classdump.org> <6DB30C07-0793-42C2-994F-29D01AA356B0@gmail.com> <4B3ABBF8-821E-4655-BDE3-581A8BEC30D5@classdump.org>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <9ADF1D94-B8F0-4E4C-9381-BEE30DE42ADB@gmail.com>
Content-Transfer-Encoding: 7bit
From: karl wettin <karl.wettin@gmail.com>
Subject: Re: Making document numbers persistent
Date: Sun, 14 Jan 2007 10:58:40 +0100
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org


14 jan 2007 kl. 02.14 skrev Kay Roepke:
>
>> If I was you, I would make a filter that navigates an in heap  
>> object graph of all
>> users and their connections using a breadth first (or perhaps even  
>> A*).
>
> I would essentially have the same problem with a in-memory graph: I  
> cannot be sure
> of the Lucene document ids those users will have, so I would have  
> to look those up
> - exactly as I do now. The bottleneck would remain the same :(

In the original post you mention 2-10 million documents. How much is  
that is bytes?

If you can fit it in RAM, I think that http://issues.apache.org/jira/ 
browse/LUCENE-550
could be your friend. It keeps each document as an instance in  
memory. Extend the
InstantiatedIndexDocument class with an association to the user  
owning the document.

I wrote the index for this particular case where I due to very heavy  
load needed to
retreive some 100,000 aggregated class instances per second, based on  
a field value.


-- 
karl


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25491-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jan 14 12:49:55 2007
Return-Path: <java-user-return-25491-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51224 invoked from network); 14 Jan 2007 12:49:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Jan 2007 12:49:54 -0000
Received: (qmail 2526 invoked by uid 500); 14 Jan 2007 12:49:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2488 invoked by uid 500); 14 Jan 2007 12:49:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2477 invoked by uid 99); 14 Jan 2007 12:49:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 14 Jan 2007 04:49:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [213.9.79.74] (HELO box7974.elkhouse.de) (213.9.79.74)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 14 Jan 2007 04:49:41 -0800
Received: from [192.168.0.196] (c142063.adsl.hansenet.de [::ffff:213.39.142.63])
  (AUTH: LOGIN kroepke@classdump.org)
  by box7974.elkhouse.de with esmtp; Sun, 14 Jan 2007 13:49:18 +0100
  id 00000BC4.45AA26CE.000024C3
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <Pine.LNX.4.58.0701132144400.6139@hal.rescomp.berkeley.edu>
References: <CD64156E-20CE-4BB1-969F-133DC1F02F2F@classdump.org> <Pine.LNX.4.58.0701132144400.6139@hal.rescomp.berkeley.edu>
Content-Type: text/plain; charset=ISO-8859-1; delsp=yes; format=flowed
Message-Id: <6009A0C3-B012-4223-8137-7560D5FA3EF9@classdump.org>
Content-Transfer-Encoding: quoted-printable
From: Kay Roepke <kroepke@classdump.org>
Subject: Re: Making document numbers persistent
Date: Sun, 14 Jan 2007 13:49:07 +0100
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org


On 14. Jan 2007, at 7:10 , Chris Hostetter wrote:

> if you're talking about multiple identical servers used for load
> balancing, then there is no reason why those indexes wouldn't be =20
> kept in
> sync (the merge model is deterministic, so if you apply the same
> operations to every server in the same order, you'll get identical
> indexes) ... so you could concievably use a shared cache -- if you =20
> aren't
> talking about indentical copies of hte index, then i'm not sure i
> understand your situation -- since it would seem you'd need =20
> something to
> ensure that the query got sent to the *right* server, and that =20
> would imply
> that subsequent requests would be able to talk advantage of the cache.

In principle the servers would have the exact same index, but it =20
might be possible
for them to be out of sync temporarily, say when one or more servers =20
are down
for one reason or another. They would be restarted and then would be =20
feed the
changes they missed. Thus I could end up with different indices =20
across the
servers. This is pretty much like database replication.
We have thought about doing some kind of connection persistence like you
suggest, but that has some nasty production level problems. We could =20
deal
probably, but I rather would like to avoid that.

> practically speaking, there is a differnce between the rate at which
> updates come in, and the rate at which you have to make updates =20
> available
> to your users ... reopening an indexreader no more frequently then =20
> once
> ever X minutes -- and not reopening at all unless the index has =20
> changed --
> can drasticly improve your ability to cache things effectively.

mmh, that sounds like something that I have missed ;) I'll have to do =20=

some
testing to see at what repopening interval I would end up and still =20
have a
decent cache usage. Thanks for the refresher!

> i'm not a fileformat guy, i don't really get into those internals =20
> much,
> but the document number isn't "esentially" the offest -- it *is* the
> offset -- each segment maintains it's own list of documents from 1 =20
> to size
> of segment, and the document number for a given doc is the number =20
> used to
> identify it in it's segment, plus the offset of that segment in the =20=

> index
> as a whole -- i don't believe the document number you use when calling
> reader.document(docId) is ever stored in the index (unless your index
> happens to have a single segment.

Ok, then I haven't read the code the wrong way :)


> :    My question for this solution would be: Where, in general terms,
> : would I have to look to change the meaning of the document id, =20
> codewise?
>
> Don't take this the wrong way, but i read that question the same way i
> would read "Where, in general terms, would i have to look to change =20=

> the
> meaning of integer addition, codewise?" ... there is no
> DocumentNumberFactory, no getNextDocId() ... the concept of =20
> document ids
> is so ingrained and pervasive i can't even imagine what it would =20
> take to
> change it.

I get it ;) Of course I know that there isn't a =20
DocumentNumberFactory, but at some
point it must be decided which document number a document will have =20
for a given point
in time, right? Now this doesn't have to be spelled out in code, and =20
indeed is very implicit,
but if I was able to hook into that and maybe record the changing =20
document numbers how they relate
to our unique ids, I could look up the docid from that table without =20
enumerating terms.

> As i recall, everytime you open a new IndexWriter (which you would =20
> need to
> do frequently since you have to close your old IndexWriter for your
> multiple updates a second to be visible) a new segment is =20
> opened ... if
> you really manage to competely eliminate segment merges you are =20
> talking
> about potentially having 100,000 segments after 24 hours ... I =20
> think the
> search performance cost there would breaty significantly outway your
> current Filter building costs ... but that's just speculation since =20=

> i've
> never seen an index with that many segments -- at least not on a =20
> machine
> that was acctually *functioning* :)

Ok, that confirms my suspicions. I was afraid that it would seriously =20=

affect
query time and general performance (number of open files). Then that =20
solution
is out.

> it's inherent to the idea of an Inverted Index -- there is no single
> document stored anywhere, the indexed terms are stored and they =20
> refrence
> the list of docIds (as offsets in the current segment) that the are =20=

> in ...
> deleting a document just adds the docId to a list of documents to be
> ignored (because they are deleted) when searchers are performed ... =20=

> if you
> really wanted to update in place, you would need to scan every =20
> term, see
> if it was mapped to the doc, and then zero out that mapping, and then
> apend the list of <term,doc> mappings for hte terms that are in the
> updated doc -- which would take a lot longer then the current
> delete/update approach.

Ok, it was just that I couldn't find the explanation in the archives.
I agree, it would probably be a performance nightmare to do updates =20
that way.


Thanks very much for your input!

cheers,

-k

--=20
Kay R=F6pke
http://classdump.org/





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25492-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jan 14 12:58:09 2007
Return-Path: <java-user-return-25492-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53560 invoked from network); 14 Jan 2007 12:58:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Jan 2007 12:58:08 -0000
Received: (qmail 8188 invoked by uid 500); 14 Jan 2007 12:58:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8159 invoked by uid 500); 14 Jan 2007 12:58:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8148 invoked by uid 99); 14 Jan 2007 12:58:09 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 14 Jan 2007 04:58:09 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [213.9.79.74] (HELO box7974.elkhouse.de) (213.9.79.74)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 14 Jan 2007 04:57:59 -0800
Received: from [192.168.0.196] (c142063.adsl.hansenet.de [::ffff:213.39.142.63])
  (AUTH: LOGIN kroepke@classdump.org)
  by box7974.elkhouse.de with esmtp; Sun, 14 Jan 2007 13:57:38 +0100
  id 00000BC4.45AA28C2.000024F4
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <9ADF1D94-B8F0-4E4C-9381-BEE30DE42ADB@gmail.com>
References: <CD64156E-20CE-4BB1-969F-133DC1F02F2F@classdump.org> <6DB30C07-0793-42C2-994F-29D01AA356B0@gmail.com> <4B3ABBF8-821E-4655-BDE3-581A8BEC30D5@classdump.org> <9ADF1D94-B8F0-4E4C-9381-BEE30DE42ADB@gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; delsp=yes; format=flowed
Message-Id: <019F9E59-079A-42F4-AF45-42AB9EA1CF87@classdump.org>
Content-Transfer-Encoding: quoted-printable
From: Kay Roepke <kroepke@classdump.org>
Subject: Re: Making document numbers persistent
Date: Sun, 14 Jan 2007 13:57:35 +0100
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org


On 14. Jan 2007, at 10:58 , karl wettin wrote:

> In the original post you mention 2-10 million documents. How much =20
> is that is bytes?

On my development machine I have 1.5 million documents and those are =20
weighing in at
~950MB. I suspect that for production we will add more fields, so it =20
would be bit bigger
than that. To be able to scale for some time, I think 30-40 GB index =20
size is the upper limit.

> If you can fit it in RAM, I think that http://issues.apache.org/=20
> jira/browse/LUCENE-550
> could be your friend. It keeps each document as an instance in =20
> memory. Extend the
> InstantiatedIndexDocument class with an association to the user =20
> owning the document.
>
> I wrote the index for this particular case where I due to very =20
> heavy load needed to
> retreive some 100,000 aggregated class instances per second, based =20
> on a field value.

Yeah, I have seen that, and it looks awesome! Unfortunately, I think =20
I cannot use it here,
though it might come in handy for some other problem.
As I understand it, I must create it from a RAMDirectory/FSDirectory, =20=

right?

Thanks,

-k
--=20
Kay R=F6pke
http://classdump.org/





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25493-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jan 14 13:03:42 2007
Return-Path: <java-user-return-25493-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54038 invoked from network); 14 Jan 2007 13:03:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Jan 2007 13:03:42 -0000
Received: (qmail 10631 invoked by uid 500); 14 Jan 2007 13:03:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10604 invoked by uid 500); 14 Jan 2007 13:03:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10593 invoked by uid 99); 14 Jan 2007 13:03:42 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 14 Jan 2007 05:03:42 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [213.9.79.74] (HELO box7974.elkhouse.de) (213.9.79.74)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 14 Jan 2007 05:03:32 -0800
Received: from [192.168.0.196] (c142063.adsl.hansenet.de [::ffff:213.39.142.63])
  (AUTH: LOGIN kroepke@classdump.org)
  by box7974.elkhouse.de with esmtp; Sun, 14 Jan 2007 14:03:11 +0100
  id 00000BC4.45AA2A0F.00002519
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <OF11F979E0.5CEEF822-ON88257263.0028D4D2-88257263.002B2DBF@il.ibm.com>
References: <OF11F979E0.5CEEF822-ON88257263.0028D4D2-88257263.002B2DBF@il.ibm.com>
Content-Type: text/plain; charset=ISO-8859-1; delsp=yes; format=flowed
Message-Id: <24AFF08F-3CD2-48CA-8943-A553DA0AE323@classdump.org>
Content-Transfer-Encoding: quoted-printable
From: Kay Roepke <kroepke@classdump.org>
Subject: Re: Making document numbers persistent
Date: Sun, 14 Jan 2007 14:03:08 +0100
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org


On 14. Jan 2007, at 8:51 , Doron Cohen wrote:

>
> I think that one effective way to control docids changes, assuming
> delete/update rate significantly lower than add rate, is to modify =20
> Lucene
> such that deleted docs are only 'squeezed out' when calling optimize=20=

> ().
> This would involve delicate changes in the merging code, but is =20
> possible.
> Then, once there are 'too many' deletions, the application could call
> optimize().

We will have a high delete/update to add ratio, i.e. we will change a =20=

lot, but not
add new documents that often. Other than that, I will give that =20
suggestion some thought,
I can live with the index size growing until we do an optimize.

> This way, having full control on when deleted docs are 'squeezed', =20
> and also
> knowing which docs these are (same docs that same app deleted =20
> during last X
> hours) - that application can at that point update the mapping between
> Lucene IDs and the database IDs, again, knowing that Lucene IDs are =20=

> set -
> deterministically - by the order of adding docs.
>
> This would allow - as Erick mentioned earlier in this thread - to =20
> create
> the filter from the database only, no need to query Lucene for =20
> that. You
> would probably need to copy that table so existing table can be =20
> still used
> by searchers referencing the index before optimize() was called, at =20=

> least
> until db table is updated and some index warming is done.

Yes, I like this idea a lot - tracking the doc ids and saving them. =20
It would
allow for a speedy bitset creation. I'm not totally sure it can be =20
done though.

> I am not sure that I am happy with this direction, just wanted to =20
> point out
> the possibility. Would have been convenient for this if Lucene's =20
> writer had
> an option like "keepDeletions" or something, though I am not sure =20
> yet if
> this can be implemented without too much complication of the code, =20
> or if
> this is general enough to be in the API.

I'm also not sure this would be a good addition to a stock Lucene, =20
since it is a
really special requirement. But it would be cool to have something =20
like this in case
someone wants to do weird things, as we do ;)

Thanks a bunch!

cheers,

-k

--=20
Kay R=F6pke
http://classdump.org/





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25494-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jan 14 13:19:32 2007
Return-Path: <java-user-return-25494-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56312 invoked from network); 14 Jan 2007 13:19:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Jan 2007 13:19:32 -0000
Received: (qmail 17987 invoked by uid 500); 14 Jan 2007 13:19:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17950 invoked by uid 500); 14 Jan 2007 13:19:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17939 invoked by uid 99); 14 Jan 2007 13:19:32 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 14 Jan 2007 05:19:32 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [213.9.79.74] (HELO box7974.elkhouse.de) (213.9.79.74)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 14 Jan 2007 05:19:22 -0800
Received: from [192.168.0.196] (c142063.adsl.hansenet.de [::ffff:213.39.142.63])
  (AUTH: LOGIN kroepke@classdump.org)
  by box7974.elkhouse.de with esmtp; Sun, 14 Jan 2007 14:19:00 +0100
  id 050106D4.45AA2DC4.00002565
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <359a92830701131854l7ed499f3u27bd803ab2fd73c8@mail.gmail.com>
References: <CD64156E-20CE-4BB1-969F-133DC1F02F2F@classdump.org> <359a92830701131054v1ef9e9c3h67351c8f90cc77c0@mail.gmail.com> <4F1C9AE1-C182-4A36-A06E-5AEF47F40F2D@classdump.org> <359a92830701131854l7ed499f3u27bd803ab2fd73c8@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; delsp=yes; format=flowed
Message-Id: <72820A7D-F858-4A06-A909-FE6ABC2BE6D0@classdump.org>
Content-Transfer-Encoding: quoted-printable
From: Kay Roepke <kroepke@classdump.org>
Subject: Re: Making document numbers persistent
Date: Sun, 14 Jan 2007 14:18:57 +0100
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org


On 14. Jan 2007, at 3:54 , Erick Erickson wrote:

> 3> I doubt it really will make a performance difference, but you =20
> could use
> TermDocs.seek rather than get a new termdocs for each term from the =20=

> reader.
> (and if this *does* make a difference, please let me know)

It seems it does. I have just changed it to use seek, and the time =20
went from 40 sec to a little
over 29secs. Still to slow, but it's the right direction :)

cheers,
-k
--=20
Kay R=F6pke
http://classdump.org/





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25495-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jan 14 16:47:31 2007
Return-Path: <java-user-return-25495-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92236 invoked from network); 14 Jan 2007 16:47:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Jan 2007 16:47:30 -0000
Received: (qmail 49836 invoked by uid 500); 14 Jan 2007 16:47:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49811 invoked by uid 500); 14 Jan 2007 16:47:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49800 invoked by uid 99); 14 Jan 2007 16:47:29 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 14 Jan 2007 08:47:29 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 64.233.182.191 as permitted sender)
Received: from [64.233.182.191] (HELO nf-out-0910.google.com) (64.233.182.191)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 14 Jan 2007 08:47:20 -0800
Received: by nf-out-0910.google.com with SMTP id a27so1700224nfc
        for <java-user@lucene.apache.org>; Sun, 14 Jan 2007 08:46:59 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=Su8BuKSWlcKw2RBqWar2t04DOJMSAnmhUlkmDYYvNpiPTD+t4vMGFlri1scFplajJA4ERW42L6U6mHFT7ulFvk+aniuUmU9vGjbbos66sFsV0pbAHyOH5e6CllsPeUplVvaHDY/IAP+6i3Ls7ETeoucXY/qRdTbj/5mZObQifJQ=
Received: by 10.82.184.2 with SMTP id h2mr443379buf.1168793218947;
        Sun, 14 Jan 2007 08:46:58 -0800 (PST)
Received: by 10.82.162.9 with HTTP; Sun, 14 Jan 2007 08:46:57 -0800 (PST)
Message-ID: <359a92830701140846k574e4ae7y93bb62c5a356ac25@mail.gmail.com>
Date: Sun, 14 Jan 2007 11:46:57 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Making document numbers persistent
In-Reply-To: <72820A7D-F858-4A06-A909-FE6ABC2BE6D0@classdump.org>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_66206_6544642.1168793217929"
References: <CD64156E-20CE-4BB1-969F-133DC1F02F2F@classdump.org>
	 <359a92830701131054v1ef9e9c3h67351c8f90cc77c0@mail.gmail.com>
	 <4F1C9AE1-C182-4A36-A06E-5AEF47F40F2D@classdump.org>
	 <359a92830701131854l7ed499f3u27bd803ab2fd73c8@mail.gmail.com>
	 <72820A7D-F858-4A06-A909-FE6ABC2BE6D0@classdump.org>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_66206_6544642.1168793217929
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

I just love it when I get so wrapped up in a particular approach that
alternatives don't occur to me. So I wondered what would happen if I just
got stupid simple and tried solving what I think is your problem without
involving lucene.

So, I wrote a little program to fill up a HashMap with <Integer, Integer>
pairs, with the key being a random number and the value an integer starting
with 0. Really, mimicking a map of your <dbid, lucdocid> pairs. Then fill u=
p
a bitset by looking up a bunch of dbids and setting the corresponding
lucdocid in the bitset.

Map size, 10,000,000 <userid, lucdocid> pairs
Looking up 1,000,000 user ids and setting them in a bitset.

Total time to set all the bits, 1.016 seconds. Running inside of Eclipse on
a 2700 MH AMD with 1G memory (and I used up almost all this memory, but mad=
e
no attempt to optimize it at all).

Yes, that's close enough to one second not to matter.

I started by wondering what would happen if I used a RAMDir to map the
<userid, lucdocid> pairs, thinking you could generate that RAMDir during
warmup, but wanted to get a baseline for the bitset part before dealing wit=
h
Lucene. But it *is* Sunday, and this is *not* my problem, so after I got
this number I decided to leave the rest of it as an "exercise for the reade=
r
<G>". But we're having rain/sleet combinations here in SE Michigan, so what
the heck....

I  wonder, if this approach doesn't work for you, what would happen if you
built a RAMDir with this mapping (which  keeps your issues with updating
under control). If memory use is too intensive, I also wonder what would
happen if you built a FSDirectory index with these pairs as part of warm-up=
.

Just creating the map takes considerable time in my test program, so you
probably want to consider some kind of warm-up process....

Best of luck!
Erick

On 1/14/07, Kay Roepke < kroepke@classdump.org> wrote:
>
>
> On 14. Jan 2007, at 3:54 , Erick Erickson wrote:
>
> > 3> I doubt it really will make a performance difference, but you
> > could use
> > TermDocs.seek rather than get a new termdocs for each term from the
> > reader.
> > (and if this *does* make a difference, please let me know)
>
> It seems it does. I have just changed it to use seek, and the time
> went from 40 sec to a little
> over 29secs. Still to slow, but it's the right direction :)
>
> cheers,
> -k
> --
> Kay R=F6pke
> http://classdump.org/
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_66206_6544642.1168793217929--

From java-user-return-25496-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jan 14 16:58:19 2007
Return-Path: <java-user-return-25496-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95967 invoked from network); 14 Jan 2007 16:58:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Jan 2007 16:58:18 -0000
Received: (qmail 65921 invoked by uid 500); 14 Jan 2007 16:58:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65731 invoked by uid 500); 14 Jan 2007 16:58:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65719 invoked by uid 99); 14 Jan 2007 16:58:17 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 14 Jan 2007 08:58:17 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [213.9.79.74] (HELO box7974.elkhouse.de) (213.9.79.74)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 14 Jan 2007 08:58:07 -0800
Received: from [192.168.0.196] (c142063.adsl.hansenet.de [::ffff:213.39.142.63])
  (AUTH: LOGIN kroepke@classdump.org)
  by box7974.elkhouse.de with esmtp; Sun, 14 Jan 2007 17:57:45 +0100
  id 010163EA.45AA6109.0000289B
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <359a92830701140846k574e4ae7y93bb62c5a356ac25@mail.gmail.com>
References: <CD64156E-20CE-4BB1-969F-133DC1F02F2F@classdump.org> <359a92830701131054v1ef9e9c3h67351c8f90cc77c0@mail.gmail.com> <4F1C9AE1-C182-4A36-A06E-5AEF47F40F2D@classdump.org> <359a92830701131854l7ed499f3u27bd803ab2fd73c8@mail.gmail.com> <72820A7D-F858-4A06-A909-FE6ABC2BE6D0@classdump.org> <359a92830701140846k574e4ae7y93bb62c5a356ac25@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; delsp=yes; format=flowed
Message-Id: <DB08B2C8-A874-4790-BFB3-3F5950E30EC2@classdump.org>
Content-Transfer-Encoding: quoted-printable
From: Kay Roepke <kroepke@classdump.org>
Subject: Re: Making document numbers persistent
Date: Sun, 14 Jan 2007 17:57:44 +0100
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org


On 14. Jan 2007, at 17:46 , Erick Erickson wrote:

> I just love it when I get so wrapped up in a particular approach that
> alternatives don't occur to me. So I wondered what would happen if =20
> I just
> got stupid simple and tried solving what I think is your problem =20
> without
> involving lucene.
>
> So, I wrote a little program to fill up a HashMap with <Integer, =20
> Integer>
> pairs, with the key being a random number and the value an integer =20
> starting
> with 0. Really, mimicking a map of your <dbid, lucdocid> pairs. =20
> Then fill up
> a bitset by looking up a bunch of dbids and setting the corresponding
> lucdocid in the bitset.
>
> Map size, 10,000,000 <userid, lucdocid> pairs
> Looking up 1,000,000 user ids and setting them in a bitset.
>
> Total time to set all the bits, 1.016 seconds. Running inside of =20
> Eclipse on
> a 2700 MH AMD with 1G memory (and I used up almost all this memory, =20=

> but made
> no attempt to optimize it at all).
>
> Yes, that's close enough to one second not to matter.

Cool! :D I should be able to get that down even further with the =20
production hardware.

> I started by wondering what would happen if I used a RAMDir to map the
> <userid, lucdocid> pairs, thinking you could generate that RAMDir =20
> during
> warmup, but wanted to get a baseline for the bitset part before =20
> dealing with
> Lucene.

Yep, that could work, all I need

> But it *is* Sunday, and this is *not* my problem, so after I got
> this number I decided to leave the rest of it as an "exercise for =20
> the reader
> <G>".

hehe, right you are! I really appreciate your interest in playing =20
around with that!

> But we're having rain/sleet combinations here in SE Michigan, so what
> the heck....

We actually had a bit of sunshine today here in Hamburg, Germany, who =20=

would've thought that! :)

> I  wonder, if this approach doesn't work for you, what would happen =20=

> if you
> built a RAMDir with this mapping (which  keeps your issues with =20
> updating
> under control). If memory use is too intensive, I also wonder what =20
> would
> happen if you built a FSDirectory index with these pairs as part of =20=

> warm-up.
>
> Just creating the map takes considerable time in my test program, =20
> so you
> probably want to consider some kind of warm-up process....

Yes, the controlled warm-up is definitely going to be crucial in our =20
application, but
we do this kind of thing all over the place to ensure near-linear =20
behavior in normal
usage. The actual computations are all non-linear and that in a very =20
uncomfortable way,
but we can't do anything about that. It is an inherently non-linear =20
problem, after all.

I guess the best option I have would be to track the document numbers =20=

as they are changing,
and use the process you mentioned earlier. If that's close enough to =20
what we need, then I
wouldn't have to mess with Lucene's guts - and that's a good thing!

I really appreciate the high quality of help you guys give! Just =20
plain awesome!

Thanks,

-k
--=20
Kay R=F6pke
http://classdump.org/





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25497-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jan 14 17:54:17 2007
Return-Path: <java-user-return-25497-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7339 invoked from network); 14 Jan 2007 17:54:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Jan 2007 17:54:16 -0000
Received: (qmail 6135 invoked by uid 500); 14 Jan 2007 17:54:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5672 invoked by uid 500); 14 Jan 2007 17:54:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5661 invoked by uid 99); 14 Jan 2007 17:54:17 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 14 Jan 2007 09:54:17 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of karl.wettin@gmail.com designates 66.249.92.173 as permitted sender)
Received: from [66.249.92.173] (HELO ug-out-1314.google.com) (66.249.92.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 14 Jan 2007 09:54:07 -0800
Received: by ug-out-1314.google.com with SMTP id k40so1124777ugc
        for <java-user@lucene.apache.org>; Sun, 14 Jan 2007 09:53:45 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=KT+NS+GyIVjHS+JFubpxPdF/+LtjtmAcqNoddzdLc0Qj5PHJZlGvTbX6aLK5eE3/k//qWpfmQnEMY01BqS4USCL1YEg5ycVc7f5Z5sU203xtUnkxR5WshfIOOhGFbaDEWrDN6Co/qQ0BNKbSH4FIJvidImqN1lTu0Fyf5pCXTmA=
Received: by 10.67.19.17 with SMTP id w17mr4168445ugi.1168797225328;
        Sun, 14 Jan 2007 09:53:45 -0800 (PST)
Received: from ?192.168.0.131? ( [83.249.127.91])
        by mx.google.com with ESMTP id 5sm4533905ugc.2007.01.14.09.53.44;
        Sun, 14 Jan 2007 09:53:44 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <359a92830701140846k574e4ae7y93bb62c5a356ac25@mail.gmail.com>
References: <CD64156E-20CE-4BB1-969F-133DC1F02F2F@classdump.org> <359a92830701131054v1ef9e9c3h67351c8f90cc77c0@mail.gmail.com> <4F1C9AE1-C182-4A36-A06E-5AEF47F40F2D@classdump.org> <359a92830701131854l7ed499f3u27bd803ab2fd73c8@mail.gmail.com> <72820A7D-F858-4A06-A909-FE6ABC2BE6D0@classdump.org> <359a92830701140846k574e4ae7y93bb62c5a356ac25@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <503E2704-E0F9-4F1B-A884-D9FFB68F7CCB@gmail.com>
Content-Transfer-Encoding: 7bit
From: karl wettin <karl.wettin@gmail.com>
Subject: Re: Making document numbers persistent
Date: Sun, 14 Jan 2007 18:53:33 +0100
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org


14 jan 2007 kl. 17.46 skrev Erick Erickson:

>
> Map size, 10,000,000 <userid, lucdocid> pairs
> Looking up 1,000,000 user ids and setting them in a bitset.
>
> Total time to set all the bits, 1.016 seconds. Running inside of  
> Eclipse on
> a 2700 MH AMD with 1G memory (and I used up almost all this memory,  
> but made
> no attempt to optimize it at all).

If those user identities are incremental and without gaps, you can  
save a bunch of memory by using a NIO buffer:

http://java.sun.com/j2se/1.4.2/docs/api/java/nio/IntBuffer.html



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25498-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jan 14 19:40:45 2007
Return-Path: <java-user-return-25498-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 23426 invoked from network); 14 Jan 2007 19:40:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Jan 2007 19:40:44 -0000
Received: (qmail 92815 invoked by uid 500); 14 Jan 2007 19:40:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92785 invoked by uid 500); 14 Jan 2007 19:40:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92774 invoked by uid 99); 14 Jan 2007 19:40:45 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 14 Jan 2007 11:40:45 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [82.216.111.43] (HELO smtp7.tech.numericable.fr) (82.216.111.43)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 14 Jan 2007 11:40:35 -0800
Received: from [192.168.1.102] (ip-3.net-82-216-252.rev.numericable.fr [82.216.252.3])
	by smtp7.tech.numericable.fr (Postfix) with ESMTP id AC3E8163829
	for <java-user@lucene.apache.org>; Sun, 14 Jan 2007 20:40:13 +0100 (CET)
From: Nicolas =?utf-8?q?Lalev=C3=A9e?= <nicolas.lalevee@anyware-tech.com>
To: java-user@lucene.apache.org
Subject: Re: Using Lucene to index a web forum
Date: Sun, 14 Jan 2007 20:39:57 +0100
User-Agent: KMail/1.9.5
References: <8312744.post@talk.nabble.com> <200701131426.29962.nicolas.lalevee@anyware-tech.com> <8315049.post@talk.nabble.com>
In-Reply-To: <8315049.post@talk.nabble.com>
Organization: Anyware Technologies
MIME-Version: 1.0
Content-Disposition: inline
X-Length: 3982
X-UID: 13
Content-Type: text/plain;
  charset="utf-8"
Content-Transfer-Encoding: quoted-printable
Message-Id: <200701142039.58159.nicolas.lalevee@anyware-tech.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Le Samedi 13 Janvier 2007 16:48, Melange a =C3=A9crit=C2=A0:
> Nicolas Lalev=C3=A9e-2 wrote:
> > Le Samedi 13 Janvier 2007 10:49, Melange a =C3=A9crit :
> >> Hello, I'd like to index a web forum (phpBB) with Lucene. I wonder how
> >> to best map the forum document model (topics and their messages) to the
> >> Lucene
> >> document model.
> >>
> >> Usually, some forum member creates a new topic with its first message
> >> text,
> >> then other members add reply messages to that topic. Messages are
> >> sometimes
> >> updated, but most of the time topics grow incrementally. There's no
> >> limit for the number of replies, thousands is nothing unusual.
> >>
> >> Currently, I see two options for my Lucene data model: A single docume=
nt
> >> type or two document types (one for the topics and one for the
> >> messages). When using only a single document type, things are fairly
> >> clear but there would obviously be a lot of unneccessary index
> >> modifications (their would be one field with all messages concatenated=
).
> >> To reduce the amount of index
> >> updates, the separation of topics and messages seems to be the right
> >> thing
> >> to do.
> >>
> >> So I'd like to use two document types for my document model, but I do
> >> not understand how I could bring these two together when searching. I
> >> don't want to list all messages but I want the messages grouped by
> >> topic, how can
> >> I go about that?
> >>
> >> The topic documents could be boosted, but perhaps that's not even
> >> necessary
> >> because of their relativly short length (compared to message documents=
).
> >
> > Hi Melange,
> >
> > The two document types design will be only usefull if you want to search
> > for
> > topics and search for messages. Here you want to search for messages
> > grouped
> > by topic. So you should have one kind of document : message documents. =
In
> > this message docment, you will refer the topic's id, so you will be able
> > to
> > group by topic. To group by topic some search results, you might be
> > interested by Solr's [1] faceted search [2].
> >
> > cheers,
> > Nicolas
> >
> > [1] http://incubator.apache.org/solr/
> > [2] http://wiki.apache.org/solr/SimpleFacetParameters
>
> Thank you Nicolas, good idea with the message documents, I'll do that
> instead.
>
> Sorry, I couldn't really find anything at the Solr links you provided
> regarding the grouping of search results (hits). Will I have to load all
> the hits into RAM in order to perform the grouping myself or is there a w=
ay
> to have Lucene do that for me? Or how is this to be done, roughly?

In fact I should have given more details...  ;)

Solr is a search server based on Lucene. As you are intended to use phpbb, =
you=20
could probably use also solr. Then, you will develop some php I think to=20
request the solr engine. And you will be able to use the facet search of=20
Solr.

I don't know what are your exact constraint about integrating a search engi=
ne=20
in your forum, so I may be wrong. If you want to stay in Java, I recommand=
=20
you to see how Solr does the facet search. I have get of lot of good idea i=
n=20
there. I just don't remember where I found the facet stuff in solr. The bas=
ic=20
idea was to do facet search with a set of filters, each filter representing=
 a=20
category. Then, when agregating the results of a query in a hitcollector, y=
ou=20
just dispatch the doc in a queue associated with a filter.

But rethinking about it, for a forum, the updates are done quite often, and=
 in=20
the design I presented to you, you would have as many filter as the number =
of=20
thread. And this is a scalability issue.

But maybe you want a simpler "group by" feature. Your search return a bunch=
 of=20
documents (Hits for instance) representing your messages. You select the 20=
=20
best matching ones and only then your group them by thread id.

Nicolas, trying to give not too bad advise... :p

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25499-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 15 03:11:44 2007
Return-Path: <java-user-return-25499-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 14913 invoked from network); 15 Jan 2007 03:11:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Jan 2007 03:11:43 -0000
Received: (qmail 6441 invoked by uid 500); 15 Jan 2007 03:11:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6149 invoked by uid 500); 15 Jan 2007 03:11:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6135 invoked by uid 99); 15 Jan 2007 03:11:37 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 14 Jan 2007 19:11:36 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 14 Jan 2007 19:11:26 -0800
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1H6IFW-00043y-2d
	for java-user@lucene.apache.org; Sun, 14 Jan 2007 19:11:06 -0800
Message-ID: <8365907.post@talk.nabble.com>
Date: Sun, 14 Jan 2007 19:11:06 -0800 (PST)
From: spinergywmy <spinergywmy@gmail.com>
To: java-user@lucene.apache.org
Subject: Perform indexing and searching concurrently
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: spinergywmy@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hi,

   I'm wondering what will happened if I performance indexing and have 10
peoples do searching at the same time? Can I retrieve the results while I do
index, and the other way around?

   Thanks.


regards,
Wooi Meng
-- 
View this message in context: http://www.nabble.com/Perform-indexing-and-searching-concurrently-tf3012374.html#a8365907
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25500-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 15 04:08:37 2007
Return-Path: <java-user-return-25500-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 24566 invoked from network); 15 Jan 2007 04:08:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Jan 2007 04:08:37 -0000
Received: (qmail 56690 invoked by uid 500); 15 Jan 2007 04:08:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56656 invoked by uid 500); 15 Jan 2007 04:08:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56644 invoked by uid 99); 15 Jan 2007 04:08:36 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 14 Jan 2007 20:08:36 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of zhouchengly@gmail.com designates 64.233.182.190 as permitted sender)
Received: from [64.233.182.190] (HELO nf-out-0910.google.com) (64.233.182.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 14 Jan 2007 20:08:27 -0800
Received: by nf-out-0910.google.com with SMTP id a27so1818441nfc
        for <java-user@lucene.apache.org>; Sun, 14 Jan 2007 20:08:06 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=Sd9MxmLCxClIQ07dJDEWhMzSO+tecxk5LRmyHUFeAETJi5csxu12lKWIX5Y2wro0++azg+nomdihYzbKivnXSadKnqRDv9VH87vQEQncIz6pVvvzuM1p1jevTQnyWpjDgsFQ+7/g9yQCzPxxzexD/BaRgnDE5wVEVdR/LJfMpSg=
Received: by 10.82.113.6 with SMTP id l6mr518389buc.1168834085775;
        Sun, 14 Jan 2007 20:08:05 -0800 (PST)
Received: by 10.82.100.12 with HTTP; Sun, 14 Jan 2007 20:08:05 -0800 (PST)
Message-ID: <c2f9e9030701142008u73150522w90acff6e3bb31e07@mail.gmail.com>
Date: Mon, 15 Jan 2007 12:08:05 +0800
From: David <zhouchengly@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: How to retrieve the document by document ID?
In-Reply-To: <262766.22517.qm@web50312.mail.yahoo.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_104878_16702796.1168834085303"
References: <262766.22517.qm@web50312.mail.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_104878_16702796.1168834085303
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

thanks, How do Lucene give each document an ID  when the document is added?
Is the document ID unchanged until the document is deleted?

2007/1/12, Otis Gospodnetic <otis_gospodnetic@yahoo.com>:
>
> David, please look at the Javadoc for IndexReader.  I believe the API is
> reader.document(int), where reader is an instance of IndexReader.
>
> Otis
>
> ----- Original Message ----
> From: David <zhouchengly@gmail.com>
> To: java-user@lucene.apache.org
> Sent: Friday, January 12, 2007 3:10:42 AM
> Subject: How to retrieve the document by document ID?
>
> Hi all:
>        How do Lucene give each document an ID  when the document is added
> and  How do we retrieve a document  by document ID?  appreciate your help!
> --
> David
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
David

------=_Part_104878_16702796.1168834085303--

From java-user-return-25501-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 15 06:39:02 2007
Return-Path: <java-user-return-25501-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 52146 invoked from network); 15 Jan 2007 06:39:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Jan 2007 06:39:00 -0000
Received: (qmail 63265 invoked by uid 500); 15 Jan 2007 06:39:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63149 invoked by uid 500); 15 Jan 2007 06:39:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63138 invoked by uid 99); 15 Jan 2007 06:39:00 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 14 Jan 2007 22:39:00 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 14 Jan 2007 22:38:51 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id AF4845B763; Sun, 14 Jan 2007 22:38:30 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 9F5797F403
	for <java-user@lucene.apache.org>; Sun, 14 Jan 2007 22:38:30 -0800 (PST)
Date: Sun, 14 Jan 2007 22:38:30 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Perform indexing and searching concurrently
In-Reply-To: <8365907.post@talk.nabble.com>
Message-ID: <Pine.LNX.4.58.0701142237520.6886@hal.rescomp.berkeley.edu>
References: <8365907.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


:    I'm wondering what will happened if I performance indexing and have 10
: peoples do searching at the same time? Can I retrieve the results while I do
: index, and the other way around?

>From the FAQ....

http://wiki.apache.org/jakarta-lucene/LuceneFAQ#head-6c56b0449d114826586940dcc6fe51582676a36e

Does Lucene allow searching and indexing simultaneously?

Yes. However, an IndexReader only searches the index as of the "point in
time" that it was opened. Any updates to the index, either added or
deleted documents, will not be visible until the IndexReader is re-opened.
So your application must periodically re-open its IndexReaders to see the
latest updates. The [WWW] IndexReader.isCurrent() method allows you to
test whether any updates have occurred to the index since your IndexReader
was opened.



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25502-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 15 07:06:40 2007
Return-Path: <java-user-return-25502-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 57333 invoked from network); 15 Jan 2007 07:06:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Jan 2007 07:06:39 -0000
Received: (qmail 87581 invoked by uid 500); 15 Jan 2007 07:06:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87549 invoked by uid 500); 15 Jan 2007 07:06:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87534 invoked by uid 99); 15 Jan 2007 07:06:40 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 14 Jan 2007 23:06:40 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of DORONC@il.ibm.com designates 195.212.29.153 as permitted sender)
Received: from [195.212.29.153] (HELO mtagate4.de.ibm.com) (195.212.29.153)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 14 Jan 2007 23:06:29 -0800
Received: from d12nrmr1607.megacenter.de.ibm.com (d12nrmr1607.megacenter.de.ibm.com [9.149.167.49])
	by mtagate4.de.ibm.com (8.13.8/8.13.8) with ESMTP id l0F766Pb149566
	for <java-user@lucene.apache.org>; Mon, 15 Jan 2007 07:06:06 GMT
Received: from d12av02.megacenter.de.ibm.com (d12av02.megacenter.de.ibm.com [9.149.165.228])
	by d12nrmr1607.megacenter.de.ibm.com (8.13.8/8.13.8/NCO v8.2) with ESMTP id l0F765rD3125484
	for <java-user@lucene.apache.org>; Mon, 15 Jan 2007 08:06:05 +0100
Received: from d12av02.megacenter.de.ibm.com (loopback [127.0.0.1])
	by d12av02.megacenter.de.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id l0F765ES000784
	for <java-user@lucene.apache.org>; Mon, 15 Jan 2007 08:06:05 +0100
Received: from d12mc102.megacenter.de.ibm.com (d12mc102.megacenter.de.ibm.com [9.149.167.114])
	by d12av02.megacenter.de.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id l0F7650l000781
	for <java-user@lucene.apache.org>; Mon, 15 Jan 2007 08:06:05 +0100
In-Reply-To: <c2f9e9030701142008u73150522w90acff6e3bb31e07@mail.gmail.com>
Subject: Re: How to retrieve the document by document ID?
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 7.0 HF277 June 21, 2006
Message-ID: <OF6F788781.F307794A-ON88257264.00255928-88257264.0026DC58@il.ibm.com>
From: Doron Cohen <DORONC@il.ibm.com>
Date: Sun, 14 Jan 2007 23:04:27 -0800
X-MIMETrack: Serialize by Router on D12MC102/12/M/IBM(Release 7.0.2HF71 | November 3, 2006) at
 15/01/2007 09:06:04
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org

David <zhouchengly@gmail.com> wrote on 14/01/2007 20:08:05:

> thanks, How do Lucene give each document an ID  when the document is
added?
> Is the document ID unchanged until the document is deleted?
>

Not exactly.

When the first doc is added, it is assigned id 0.
Next one assigned id 1, etc.
When a doc is deleted, it is first only marked as such.
So if there are 10 docs they have ids 0 to 9.

Now doc 2 and 4 are deleted, - there is no change in ids.
Next doc added is assigned id 10.

Now if/when the segment containing the deleted docs is merged, all info on
those docs is really removed, and docids are modified to remove any holes
in the numbering - result is: 0 docs with ids 0 to 8. Now, next doc added
gets id 9.

Btw, segments are merged either as result of explicit call to optimize(),
or implicitly following addDoc or indexWriter.close() (and depending on
Lucene's merge policy).

Docids are therefore internal, with unstable values.

See also the FAQ - http://wiki.apache.org/jakarta-lucene/LuceneFAQ
Especially "When is it possible for document IDs to change?"


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25503-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 15 07:56:57 2007
Return-Path: <java-user-return-25503-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65196 invoked from network); 15 Jan 2007 07:56:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Jan 2007 07:56:57 -0000
Received: (qmail 43308 invoked by uid 500); 15 Jan 2007 07:56:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43275 invoked by uid 500); 15 Jan 2007 07:56:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43264 invoked by uid 99); 15 Jan 2007 07:56:55 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 14 Jan 2007 23:56:55 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of zhouchengly@gmail.com designates 64.233.182.190 as permitted sender)
Received: from [64.233.182.190] (HELO nf-out-0910.google.com) (64.233.182.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 14 Jan 2007 23:56:46 -0800
Received: by nf-out-0910.google.com with SMTP id a27so1859518nfc
        for <java-user@lucene.apache.org>; Sun, 14 Jan 2007 23:56:24 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=UgLYbUuBz8H/bIov/9cxgN1pblj/uISHKFFwuhSfcCXJfs39siBgo9kgNvJvdgK2jOATWDqreGQoBin4FcG4rxgo2l1uQVLxiBtHHYcHzYklSMH39EjrgLOUCb03d7cQda8SlEe9cdqMLUncTiRbq4TB61VWA2ayYFdRdVs3tOI=
Received: by 10.82.111.8 with SMTP id j8mr545002buc.1168847784022;
        Sun, 14 Jan 2007 23:56:24 -0800 (PST)
Received: by 10.82.100.12 with HTTP; Sun, 14 Jan 2007 23:56:23 -0800 (PST)
Message-ID: <c2f9e9030701142356t75288b78mcab0eaede04fe282@mail.gmail.com>
Date: Mon, 15 Jan 2007 15:56:23 +0800
From: David <zhouchengly@gmail.com>
To: java-user@lucene.apache.org
Subject: How to open IndexWriter to append document?
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_108372_9742664.1168847783465"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_108372_9742664.1168847783465
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi all:
    I want first erase the original index and then create an index for
appending, I use the following python code using ports pyLucene.

   def store(doc)
        store = PyLucene.FSDirectory.getDirectory("index", True)
        writer = PyLucene.IndexWriter(store, StandardAnalyzer, False ) #
error occurs in this line!
        writer.addDocument(doc);
        writer.optimize()
        writer.close()
   if __name__ == '__main__':
        store(doc1)
        store(doc2)

    But I get the following errors:

 File "D:\work\contentstore\contentstore\backends\lucene\base.py", line 30,
in store
    writer = PyLucene.IndexWriter(store, self.analyzer, False )
PyLucene.JavaError: java.io.FileNotFoundException:
D:\work\contentstore\contentstore\backends\lucene\index\segments: The system
cannot find the file specified.

    How to fix it?
Appreciate your help!

-- 
David

------=_Part_108372_9742664.1168847783465--

From java-user-return-25504-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 15 08:04:47 2007
Return-Path: <java-user-return-25504-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 66656 invoked from network); 15 Jan 2007 08:04:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Jan 2007 08:04:46 -0000
Received: (qmail 53540 invoked by uid 500); 15 Jan 2007 08:04:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53313 invoked by uid 500); 15 Jan 2007 08:04:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53302 invoked by uid 99); 15 Jan 2007 08:04:45 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Jan 2007 00:04:45 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of DORONC@il.ibm.com designates 195.212.29.150 as permitted sender)
Received: from [195.212.29.150] (HELO mtagate1.de.ibm.com) (195.212.29.150)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Jan 2007 00:04:33 -0800
Received: from d12nrmr1607.megacenter.de.ibm.com (d12nrmr1607.megacenter.de.ibm.com [9.149.167.49])
	by mtagate1.de.ibm.com (8.13.8/8.13.8) with ESMTP id l0F84CR8164286
	for <java-user@lucene.apache.org>; Mon, 15 Jan 2007 08:04:12 GMT
Received: from d12av04.megacenter.de.ibm.com (d12av04.megacenter.de.ibm.com [9.149.165.229])
	by d12nrmr1607.megacenter.de.ibm.com (8.13.8/8.13.8/NCO v8.2) with ESMTP id l0F84Cat1081366
	for <java-user@lucene.apache.org>; Mon, 15 Jan 2007 09:04:12 +0100
Received: from d12av04.megacenter.de.ibm.com (loopback [127.0.0.1])
	by d12av04.megacenter.de.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id l0F84BBQ005737
	for <java-user@lucene.apache.org>; Mon, 15 Jan 2007 09:04:11 +0100
Received: from d12mc102.megacenter.de.ibm.com (d12mc102.megacenter.de.ibm.com [9.149.167.114])
	by d12av04.megacenter.de.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id l0F84B5K005732
	for <java-user@lucene.apache.org>; Mon, 15 Jan 2007 09:04:11 +0100
In-Reply-To: <OF6F788781.F307794A-ON88257264.00255928-88257264.0026DC58@il.ibm.com>
Subject: Re: How to retrieve the document by document ID?
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 7.0 HF277 June 21, 2006
Message-ID: <OF4233B86F.412520BA-ON88257264.002B8569-88257264.002C20BF@il.ibm.com>
From: Doron Cohen <DORONC@il.ibm.com>
Date: Mon, 15 Jan 2007 00:01:59 -0800
X-MIMETrack: Serialize by Router on D12MC102/12/M/IBM(Release 7.0.2HF71 | November 3, 2006) at
 15/01/2007 10:04:11
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org

Doron Cohen/Haifa/IBM@IBMIL wrote on 14/01/2007 23:04:27:

> David <zhouchengly@gmail.com> wrote on 14/01/2007 20:08:05:
>
> > thanks, How do Lucene give each document an ID  when the document is
> added?
> > Is the document ID unchanged until the document is deleted?
> >
>
> Not exactly.
>
> When the first doc is added, it is assigned id 0.
> Next one assigned id 1, etc.
> When a doc is deleted, it is first only marked as such.
> So if there are 10 docs they have ids 0 to 9.
>
> Now doc 2 and 4 are deleted, - there is no change in ids.
> Next doc added is assigned id 10.
>
> Now if/when the segment containing the deleted docs is merged, all info
on
> those docs is really removed, and docids are modified to remove any holes
> in the numbering - result is: 0 docs with ids 0 to 8. Now, next doc added

That shuld be 9 docs (not 0...)

> gets id 9.
>
> Btw, segments are merged either as result of explicit call to optimize(),
> or implicitly following addDoc or indexWriter.close() (and depending on
> Lucene's merge policy).
>
> Docids are therefore internal, with unstable values.
>
> See also the FAQ - http://wiki.apache.org/jakarta-lucene/LuceneFAQ
> Especially "When is it possible for document IDs to change?"
>

Also take a look at the http://lucene.apache.org/java/docs/fileformats.html
- at the "Document Numbers" section.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25505-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 15 08:08:00 2007
Return-Path: <java-user-return-25505-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67008 invoked from network); 15 Jan 2007 08:08:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Jan 2007 08:08:00 -0000
Received: (qmail 58313 invoked by uid 500); 15 Jan 2007 08:08:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57415 invoked by uid 500); 15 Jan 2007 08:07:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57404 invoked by uid 99); 15 Jan 2007 08:07:59 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Jan 2007 00:07:59 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of DORONC@il.ibm.com designates 195.212.29.151 as permitted sender)
Received: from [195.212.29.151] (HELO mtagate2.de.ibm.com) (195.212.29.151)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Jan 2007 00:07:48 -0800
Received: from d12nrmr1607.megacenter.de.ibm.com (d12nrmr1607.megacenter.de.ibm.com [9.149.167.49])
	by mtagate2.de.ibm.com (8.13.8/8.13.8) with ESMTP id l0F87MAC183466
	for <java-user@lucene.apache.org>; Mon, 15 Jan 2007 08:07:25 GMT
Received: from d12av02.megacenter.de.ibm.com (d12av02.megacenter.de.ibm.com [9.149.165.228])
	by d12nrmr1607.megacenter.de.ibm.com (8.13.8/8.13.8/NCO v8.2) with ESMTP id l0F87M7J3174634
	for <java-user@lucene.apache.org>; Mon, 15 Jan 2007 09:07:22 +0100
Received: from d12av02.megacenter.de.ibm.com (loopback [127.0.0.1])
	by d12av02.megacenter.de.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id l0F87MAU031985
	for <java-user@lucene.apache.org>; Mon, 15 Jan 2007 09:07:22 +0100
Received: from d12mc102.megacenter.de.ibm.com (d12mc102.megacenter.de.ibm.com [9.149.167.114])
	by d12av02.megacenter.de.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id l0F87MEk031977
	for <java-user@lucene.apache.org>; Mon, 15 Jan 2007 09:07:22 +0100
In-Reply-To: <c2f9e9030701142356t75288b78mcab0eaede04fe282@mail.gmail.com>
Subject: Re: How to open IndexWriter to append document?
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 7.0 HF277 June 21, 2006
Message-ID: <OF5F6DD89E.C06F72CB-ON88257264.002BC579-88257264.002C4ACF@il.ibm.com>
From: Doron Cohen <DORONC@il.ibm.com>
Date: Mon, 15 Jan 2007 00:03:47 -0800
X-MIMETrack: Serialize by Router on D12MC102/12/M/IBM(Release 7.0.2HF71 | November 3, 2006) at
 15/01/2007 10:07:21
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org

You should instantiate the writer with create=true :

      IndexWriter(store, StandardAnalyzer, True )

Because with create=False, an existing index is expected.

David <zhouchengly@gmail.com> wrote on 14/01/2007 23:56:23:

> Hi all:
>     I want first erase the original index and then create an index for
> appending, I use the following python code using ports pyLucene.
>
>    def store(doc)
>         store = PyLucene.FSDirectory.getDirectory("index", True)
>         writer = PyLucene.IndexWriter(store, StandardAnalyzer, False ) #
> error occurs in this line!
>         writer.addDocument(doc);
>         writer.optimize()
>         writer.close()
>    if __name__ == '__main__':
>         store(doc1)
>         store(doc2)
>
>     But I get the following errors:
>
>  File "D:\work\contentstore\contentstore\backends\lucene\base.py", line
30,
> in store
>     writer = PyLucene.IndexWriter(store, self.analyzer, False )
> PyLucene.JavaError: java.io.FileNotFoundException:
> D:\work\contentstore\contentstore\backends\lucene\index\segments: The
system
> cannot find the file specified.
>
>     How to fix it?
> Appreciate your help!
>
> --
> David


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25506-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 15 08:37:04 2007
Return-Path: <java-user-return-25506-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79014 invoked from network); 15 Jan 2007 08:37:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Jan 2007 08:37:04 -0000
Received: (qmail 95554 invoked by uid 500); 15 Jan 2007 08:37:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95520 invoked by uid 500); 15 Jan 2007 08:37:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95508 invoked by uid 99); 15 Jan 2007 08:37:04 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Jan 2007 00:37:04 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of zhouchengly@gmail.com designates 64.233.182.187 as permitted sender)
Received: from [64.233.182.187] (HELO nf-out-0910.google.com) (64.233.182.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Jan 2007 00:36:55 -0800
Received: by nf-out-0910.google.com with SMTP id a27so1866715nfc
        for <java-user@lucene.apache.org>; Mon, 15 Jan 2007 00:36:34 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=NnnsFolwKugD+XYGTzLNBclQ3Y7u2TmX/FdBSu75E5FQvvwpElVwh2TtoebfG2FWywQIOzKjj0bBW8DQn8/N4MA09Sq5nyy2G199I72pjvpD4UkeUCYK+0QSwJGshwu49qi5489t7YaRqB3HOkwtfVivX+jTElHYCbRpvaMGvTU=
Received: by 10.82.136.4 with SMTP id j4mr543375bud.1168850188495;
        Mon, 15 Jan 2007 00:36:28 -0800 (PST)
Received: by 10.82.100.12 with HTTP; Mon, 15 Jan 2007 00:36:28 -0800 (PST)
Message-ID: <c2f9e9030701150036k56e0a6c9o8015007fcc326b43@mail.gmail.com>
Date: Mon, 15 Jan 2007 16:36:28 +0800
From: David <zhouchengly@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: How to open IndexWriter to append document?
In-Reply-To: <OF5F6DD89E.C06F72CB-ON88257264.002BC579-88257264.002C4ACF@il.ibm.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_108957_14976026.1168850188210"
References: <c2f9e9030701142356t75288b78mcab0eaede04fe282@mail.gmail.com>
	 <OF5F6DD89E.C06F72CB-ON88257264.002BC579-88257264.002C4ACF@il.ibm.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_108957_14976026.1168850188210
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Thanks, I think I did not describe my problem exactly.
What I want to do is:
     if the index file exist, append document
     if the index file does not exist, create a new , empty index file.
How can I implement that?
Appreciate your help!


2007/1/15, Doron Cohen <DORONC@il.ibm.com>:
>
> You should instantiate the writer with create=true :
>
>       IndexWriter(store, StandardAnalyzer, True )
>
> Because with create=False, an existing index is expected.
>
> David <zhouchengly@gmail.com> wrote on 14/01/2007 23:56:23:
>
> > Hi all:
> >     I want first erase the original index and then create an index for
> > appending, I use the following python code using ports pyLucene.
> >
> >    def store(doc)
> >         store = PyLucene.FSDirectory.getDirectory("index", True)
> >         writer = PyLucene.IndexWriter(store, StandardAnalyzer, False ) #
> > error occurs in this line!
> >         writer.addDocument(doc);
> >         writer.optimize()
> >         writer.close()
> >    if __name__ == '__main__':
> >         store(doc1)
> >         store(doc2)
> >
> >     But I get the following errors:
> >
> >  File "D:\work\contentstore\contentstore\backends\lucene\base.py", line
> 30,
> > in store
> >     writer = PyLucene.IndexWriter(store, self.analyzer, False )
> > PyLucene.JavaError: java.io.FileNotFoundException:
> > D:\work\contentstore\contentstore\backends\lucene\index\segments: The
> system
> > cannot find the file specified.
> >
> >     How to fix it?
> > Appreciate your help!
> >
> > --
> > David
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
David

------=_Part_108957_14976026.1168850188210--

From java-user-return-25507-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 15 09:01:02 2007
Return-Path: <java-user-return-25507-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88618 invoked from network); 15 Jan 2007 09:01:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Jan 2007 09:01:01 -0000
Received: (qmail 25501 invoked by uid 500); 15 Jan 2007 09:01:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25474 invoked by uid 500); 15 Jan 2007 09:01:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25463 invoked by uid 99); 15 Jan 2007 09:01:00 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Jan 2007 01:01:00 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of zhouchengly@gmail.com designates 66.249.92.169 as permitted sender)
Received: from [66.249.92.169] (HELO ug-out-1314.google.com) (66.249.92.169)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Jan 2007 01:00:49 -0800
Received: by ug-out-1314.google.com with SMTP id k40so1257113ugc
        for <java-user@lucene.apache.org>; Mon, 15 Jan 2007 01:00:27 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=mekLv+lH3hVogzboTm9aAf/ekAV8AeXSuH3oPaJ8LyIiTZveidiYMvUN+4UhYau+gpZvjBg/lshqDzzAZ9vkYQg7UXC9+64Cm4eQGWDR/FAbwfOiFbHwu8cmFVsfXX9SE8DmjUWVhnwwLkVlPM0LE9p/A55/Y08bmABxXOEOrH0=
Received: by 10.82.111.8 with SMTP id j8mr553656buc.1168851627545;
        Mon, 15 Jan 2007 01:00:27 -0800 (PST)
Received: by 10.82.100.12 with HTTP; Mon, 15 Jan 2007 01:00:27 -0800 (PST)
Message-ID: <c2f9e9030701150100y62ff728en52f03d7946e28459@mail.gmail.com>
Date: Mon, 15 Jan 2007 17:00:27 +0800
From: David <zhouchengly@gmail.com>
To: java-user@lucene.apache.org
Subject: Do frequent addition and deletion affect the search speed?
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_109249_32009094.1168851627007"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_109249_32009094.1168851627007
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi all:
    I want use to Lucene to store GData format data, the user case is:
    1. The data is only stored in Lucene, Lucene is used for Store, Index
and Search.
    2. each data have different attributes, user can specify their own
attributes.
    3. addition and deletion operations are frequent,
    4. user can search on the attributes, range search should be supported.
    Is Lucene sortable for this case, do the addition and deletion affect
the search speed? when the index file become large, is there something
unstable?

Appreciate your help!

-- 
David

------=_Part_109249_32009094.1168851627007--

From java-user-return-25508-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 15 09:01:10 2007
Return-Path: <java-user-return-25508-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88707 invoked from network); 15 Jan 2007 09:01:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Jan 2007 09:01:09 -0000
Received: (qmail 26588 invoked by uid 500); 15 Jan 2007 09:01:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26498 invoked by uid 500); 15 Jan 2007 09:01:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26433 invoked by uid 99); 15 Jan 2007 09:01:03 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Jan 2007 01:01:03 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of DORONC@il.ibm.com designates 195.212.29.154 as permitted sender)
Received: from [195.212.29.154] (HELO mtagate5.de.ibm.com) (195.212.29.154)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Jan 2007 01:00:49 -0800
Received: from d12nrmr1607.megacenter.de.ibm.com (d12nrmr1607.megacenter.de.ibm.com [9.149.167.49])
	by mtagate5.de.ibm.com (8.13.8/8.13.8) with ESMTP id l0F90RZ7241196
	for <java-user@lucene.apache.org>; Mon, 15 Jan 2007 09:00:27 GMT
Received: from d12av04.megacenter.de.ibm.com (d12av04.megacenter.de.ibm.com [9.149.165.229])
	by d12nrmr1607.megacenter.de.ibm.com (8.13.8/8.13.8/NCO v8.2) with ESMTP id l0F90RiK3174482
	for <java-user@lucene.apache.org>; Mon, 15 Jan 2007 10:00:27 +0100
Received: from d12av04.megacenter.de.ibm.com (loopback [127.0.0.1])
	by d12av04.megacenter.de.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id l0F90QQc023438
	for <java-user@lucene.apache.org>; Mon, 15 Jan 2007 10:00:27 +0100
Received: from d12mc102.megacenter.de.ibm.com (d12mc102.megacenter.de.ibm.com [9.149.167.114])
	by d12av04.megacenter.de.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id l0F90QiY023425
	for <java-user@lucene.apache.org>; Mon, 15 Jan 2007 10:00:26 +0100
In-Reply-To: <c2f9e9030701150036k56e0a6c9o8015007fcc326b43@mail.gmail.com>
Subject: Re: How to open IndexWriter to append document?
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 7.0 HF277 June 21, 2006
Message-ID: <OF0E40F525.286C999E-ON88257264.002F934B-88257264.003153ED@il.ibm.com>
From: Doron Cohen <DORONC@il.ibm.com>
Date: Mon, 15 Jan 2007 00:58:47 -0800
X-MIMETrack: Serialize by Router on D12MC102/12/M/IBM(Release 7.0.2HF71 | November 3, 2006) at
 15/01/2007 11:00:25
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org

David <zhouchengly@gmail.com> wrote on 15/01/2007 00:36:28:

> Thanks, I think I did not describe my problem exactly.
> What I want to do is:
>      if the index file exist, append document
>      if the index file does not exist, create a new , empty index file.
> How can I implement that?

If this is what you need, this (Lucene Java) conostructor would do:
   IndexWriter(File path, Analyzer a)
          Constructs an IndexWriter for the index in path, creating it
first if it does not already exist, otherwise appending to the existing
index.

Your current code really cannot work, becuase for FSDirectory.get(),
create=true, which erases everything first, and for IndexWriter(),
create=false, which expects an existing index.

> Appreciate your help!
>
>
> 2007/1/15, Doron Cohen <DORONC@il.ibm.com>:
> >
> > You should instantiate the writer with create=true :
> >
> >       IndexWriter(store, StandardAnalyzer, True )
> >
> > Because with create=False, an existing index is expected.
> >
> > David <zhouchengly@gmail.com> wrote on 14/01/2007 23:56:23:
> >
> > > Hi all:
> > >     I want first erase the original index and then create an index
for
> > > appending, I use the following python code using ports pyLucene.
> > >
> > >    def store(doc)
> > >         store = PyLucene.FSDirectory.getDirectory("index", True)
> > >         writer = PyLucene.IndexWriter(store, StandardAnalyzer, False
) #
> > > error occurs in this line!
> > >         writer.addDocument(doc);
> > >         writer.optimize()
> > >         writer.close()
> > >    if __name__ == '__main__':
> > >         store(doc1)
> > >         store(doc2)
> > >
> > >     But I get the following errors:
> > >
> > >  File "D:\work\contentstore\contentstore\backends\lucene\base.py",
line
> > 30,
> > > in store
> > >     writer = PyLucene.IndexWriter(store, self.analyzer, False )
> > > PyLucene.JavaError: java.io.FileNotFoundException:
> > > D:\work\contentstore\contentstore\backends\lucene\index\segments: The
> > system
> > > cannot find the file specified.
> > >
> > >     How to fix it?
> > > Appreciate your help!
> > >
> > > --
> > > David
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
>
> --
> David


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25509-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 15 09:10:18 2007
Return-Path: <java-user-return-25509-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92767 invoked from network); 15 Jan 2007 09:10:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Jan 2007 09:10:17 -0000
Received: (qmail 38712 invoked by uid 500); 15 Jan 2007 09:10:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38689 invoked by uid 500); 15 Jan 2007 09:10:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38678 invoked by uid 99); 15 Jan 2007 09:10:16 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Jan 2007 01:10:16 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [203.199.37.133] (HELO rediff.co.in) (203.199.37.133)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 15 Jan 2007 01:10:07 -0800
Received: (qmail 5852 invoked from network); 15 Jan 2007 09:06:59 -0000
Received: from unknown (HELO bhavin) (172.16.3.213)
  by mailserver with SMTP; 15 Jan 2007 09:06:59 -0000
Message-ID: <001401c73887$363d35b0$d50310ac@bhavin>
Reply-To: "Bhavin Pandya" <bhavinp@rediff.co.in>
From: "Bhavin Pandya" <bhavinp@rediff.co.in>
To: <java-user@lucene.apache.org>
References: <c2f9e9030701142356t75288b78mcab0eaede04fe282@mail.gmail.com> <OF5F6DD89E.C06F72CB-ON88257264.002BC579-88257264.002C4ACF@il.ibm.com> <c2f9e9030701150036k56e0a6c9o8015007fcc326b43@mail.gmail.com>
Subject: Re: How to open IndexWriter to append document?
Date: Mon, 15 Jan 2007 14:56:12 +0530
Organization: rediff.com
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="iso-8859-1";
	reply-type=original
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.2180
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2180
X-Virus-Checked: Checked by ClamAV on apache.org

Hi david,

> What I want to do is:
>     if the index file exist, append document
>     if the index file does not exist, create a new , empty index file.

Please check Lucene api for IndexReader...

It has one method which u can use before opening 
IndexWriter..."indexExists(Directory directory)"

- Bhavin pandya


----- Original Message ----- 
From: "David" <zhouchengly@gmail.com>
To: <java-user@lucene.apache.org>
Sent: Monday, January 15, 2007 2:06 PM
Subject: Re: How to open IndexWriter to append document?


> Thanks, I think I did not describe my problem exactly.
> What I want to do is:
>     if the index file exist, append document
>     if the index file does not exist, create a new , empty index file.
> How can I implement that?
> Appreciate your help!
>
>
> 2007/1/15, Doron Cohen <DORONC@il.ibm.com>:
>>
>> You should instantiate the writer with create=true :
>>
>>       IndexWriter(store, StandardAnalyzer, True )
>>
>> Because with create=False, an existing index is expected.
>>
>> David <zhouchengly@gmail.com> wrote on 14/01/2007 23:56:23:
>>
>> > Hi all:
>> >     I want first erase the original index and then create an index for
>> > appending, I use the following python code using ports pyLucene.
>> >
>> >    def store(doc)
>> >         store = PyLucene.FSDirectory.getDirectory("index", True)
>> >         writer = PyLucene.IndexWriter(store, StandardAnalyzer, False ) 
>> > #
>> > error occurs in this line!
>> >         writer.addDocument(doc);
>> >         writer.optimize()
>> >         writer.close()
>> >    if __name__ == '__main__':
>> >         store(doc1)
>> >         store(doc2)
>> >
>> >     But I get the following errors:
>> >
>> >  File "D:\work\contentstore\contentstore\backends\lucene\base.py", line
>> 30,
>> > in store
>> >     writer = PyLucene.IndexWriter(store, self.analyzer, False )
>> > PyLucene.JavaError: java.io.FileNotFoundException:
>> > D:\work\contentstore\contentstore\backends\lucene\index\segments: The
>> system
>> > cannot find the file specified.
>> >
>> >     How to fix it?
>> > Appreciate your help!
>> >
>> > --
>> > David
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
>
> -- 
> David
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25510-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 15 09:33:52 2007
Return-Path: <java-user-return-25510-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4992 invoked from network); 15 Jan 2007 09:33:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Jan 2007 09:33:51 -0000
Received: (qmail 88171 invoked by uid 500); 15 Jan 2007 09:33:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88024 invoked by uid 500); 15 Jan 2007 09:33:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88013 invoked by uid 99); 15 Jan 2007 09:33:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Jan 2007 01:33:50 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Jan 2007 01:33:40 -0800
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1H6ODP-0001kz-G9
	for java-user@lucene.apache.org; Mon, 15 Jan 2007 01:33:19 -0800
Message-ID: <8368747.post@talk.nabble.com>
Date: Mon, 15 Jan 2007 01:33:19 -0800 (PST)
From: montif <florent.monti@yahoo-inc.com>
To: java-user@lucene.apache.org
Subject: ordered by the default
X-Virus-Checked: Checked by ClamAV on apache.org

default order is different between L1 and
 L2
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: florent.monti@yahoo-inc.com


Hi,

My search application is returning hits ordered by the default relevance. I
migrated my application from lucene 1.3 to lucene 2.0. I observed that the
documents are returned with a different order. I tested in using the new
Scorer (BooleanScorer2) and in using the old scorer class (BooleanScorer)
but that didn't fix the problem. 

Did someone observe this problem in his application ?

Thanks so much. 

Florent.   
-- 
View this message in context: http://www.nabble.com/ordered-by-the-default%0D%0Adefault-order-is-different-between-L1-and-L2-tf3013543.html#a8368747
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25511-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 15 10:13:37 2007
Return-Path: <java-user-return-25511-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 18658 invoked from network); 15 Jan 2007 10:13:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Jan 2007 10:13:36 -0000
Received: (qmail 39408 invoked by uid 500); 15 Jan 2007 10:13:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39376 invoked by uid 500); 15 Jan 2007 10:13:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39359 invoked by uid 99); 15 Jan 2007 10:13:35 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Jan 2007 02:13:35 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of heikki.doeleman@gmail.com designates 209.85.132.243 as permitted sender)
Received: from [209.85.132.243] (HELO an-out-0708.google.com) (209.85.132.243)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Jan 2007 02:13:26 -0800
Received: by an-out-0708.google.com with SMTP id c3so719116ana
        for <java-user@lucene.apache.org>; Mon, 15 Jan 2007 02:13:06 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=pqre9b8u6+rF07OPXE+pv4FSOJzIR0aaucdxeVF/cXqnXmezZQ6T4uFUvDD9sKshncM6SvMAxyBXiuuB2D6bj82h5ghEhbeDTDnqP5vGvDBkiZoDRxMV9LcCVJT2KeL8kvBqZS/zimH7XZvcTfiCTipR6FxFbY0i9C+5dSg5HRc=
Received: by 10.65.248.19 with SMTP id a19mr5280601qbs.1168855985741;
        Mon, 15 Jan 2007 02:13:05 -0800 (PST)
Received: by 10.65.20.19 with HTTP; Mon, 15 Jan 2007 02:13:05 -0800 (PST)
Message-ID: <f43d06890701150213k2acc7f89x342b7a505df0873e@mail.gmail.com>
Date: Mon, 15 Jan 2007 11:13:05 +0100
From: "heikki doeleman" <heikki.doeleman@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Highlighting brackets bug ?
In-Reply-To: <45A9528D.5090701@gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_45256_13127412.1168855985699"
References: <f43d06890701130935g78999928w6df86e3e5cd05e97@mail.gmail.com>
	 <45A9528D.5090701@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_45256_13127412.1168855985699
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

yes, thank you ! I built a highlighter jar from here
http://svn.apache.org/repos/asf/lucene/java/trunk/contrib/highlighter/src/java/org/apache/lucene/search/highlight/(revision
496265) and it is working fine !

One question though .. is there an easy way to download the sources from the
svn repository, in one go ? I did it now by right-clicking links to files
and doing save-as, for each file.. this was maybe OK for the highlighter,
but what if you want an entire big project ?

thanks again
heikki doeleman



On 1/13/07, Mark Miller <markrmiller@gmail.com> wrote:
>
> Which version are you using? I believe that this is a bug that was fixed
> last August...but that the fix is only in the 2.1 Highlighter version.
> Try grabbing the latest highlighter code from the trunk.
>
> - Mark
>
> heikki doeleman wrote:
> > Hi there,
> >
> > I'm having some strange behaviour using the highlighter and I'm
> > wondering if
> > it is a bug or should I take a different approach ?
> >
> > I want to highlight the search terms that were used to execute a
> > query. If
> > the search terms end in an end-bracket or end-square-bracket (so ')'
> > or ']'
> > ), the resulting highlighted piece no longer contains the end bracket;
> it
> > just disappeared !
> >
> > For exqmple searching for Vera, Yvonne (1964- ) and highlighting the
> > results, would produce <span class="highlight">Vera, Yvonne (1964-
> > </span>.
> >
> > The same thing happens if I use quotes to try phrase searching, for
> > example
> > "Vera, Yvonne (1964- )".
> >
> > The field is indexed using a standard tokenizer. It makes no
> > difference if I
> > use Field.Index.UN_TOKENIZED or Field.Index.TOKENIZED when creating the
> > index.
> >
> > In the highlighting I create a query from the search terms and rewrite
> > it. I
> > tried both creating a PhraseQuery, and I tried the QueryParser.parse()
> > using
> > the same analyzer used for indexing and searching. Nothing helps !! Also
> > tried escaping the brackets, to no avail.
> >
> > Any help would be very much appreciated !
> >
> > thank you
> > Heikki Doeleman
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_45256_13127412.1168855985699--

From java-user-return-25512-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 15 10:54:12 2007
Return-Path: <java-user-return-25512-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 29728 invoked from network); 15 Jan 2007 10:54:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Jan 2007 10:54:11 -0000
Received: (qmail 83866 invoked by uid 500); 15 Jan 2007 10:54:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83839 invoked by uid 500); 15 Jan 2007 10:54:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83828 invoked by uid 99); 15 Jan 2007 10:54:11 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Jan 2007 02:54:11 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [66.111.4.29] (HELO out5.smtp.messagingengine.com) (66.111.4.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Jan 2007 02:54:00 -0800
Received: from out1.internal (unknown [10.202.2.149])
	by out1.messagingengine.com (Postfix) with ESMTP id EB6407BE02
	for <java-user@lucene.apache.org>; Mon, 15 Jan 2007 05:53:39 -0500 (EST)
Received: from heartbeat1.messagingengine.com ([10.202.2.160])
  by out1.internal (MEProxy); Mon, 15 Jan 2007 05:53:39 -0500
X-Sasl-enc: 3WKQqywaczwI3x6HMOOQTgci/twE1WLcjciq0QRXQ+Bq 1168858419
Received: from [10.17.4.90] (pool-72-70-33-214.bstnma.fios.verizon.net [72.70.33.214])
	by mail.messagingengine.com (Postfix) with ESMTP id B1B2B1408C
	for <java-user@lucene.apache.org>; Mon, 15 Jan 2007 05:53:39 -0500 (EST)
Message-ID: <45AB5D2D.5030809@mikemccandless.com>
Date: Mon, 15 Jan 2007 05:53:33 -0500
From: Michael McCandless <lucene@mikemccandless.com>
User-Agent: Thunderbird 1.5.0.9 (Windows/20061207)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: How to open IndexWriter to append document?
References: <c2f9e9030701142356t75288b78mcab0eaede04fe282@mail.gmail.com> <OF5F6DD89E.C06F72CB-ON88257264.002BC579-88257264.002C4ACF@il.ibm.com> <c2f9e9030701150036k56e0a6c9o8015007fcc326b43@mail.gmail.com> <001401c73887$363d35b0$d50310ac@bhavin>
In-Reply-To: <001401c73887$363d35b0$d50310ac@bhavin>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Bhavin Pandya wrote:
>> What I want to do is:
>>     if the index file exist, append document
>>     if the index file does not exist, create a new , empty index file.
> 
> Please check Lucene api for IndexReader...
> 
> It has one method which u can use before opening 
> IndexWriter..."indexExists(Directory directory)"

Also note that in the unreleased version of Lucene there
are now constructors for IndexWriter (one for String, File
and Directory) that do this exact logic for you.  This was
the fix for JIRA issue LUCENE-301:

     http://issues.apache.org/jira/browse/LUCENE-301

So the next release of Lucene will have this functionality.

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25513-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 15 11:10:44 2007
Return-Path: <java-user-return-25513-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 34058 invoked from network); 15 Jan 2007 11:10:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Jan 2007 11:10:43 -0000
Received: (qmail 6662 invoked by uid 500); 15 Jan 2007 11:10:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6407 invoked by uid 500); 15 Jan 2007 11:10:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6389 invoked by uid 99); 15 Jan 2007 11:10:40 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Jan 2007 03:10:40 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [66.111.4.29] (HELO out5.smtp.messagingengine.com) (66.111.4.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Jan 2007 03:10:30 -0800
Received: from out1.internal (unknown [10.202.2.149])
	by out1.messagingengine.com (Postfix) with ESMTP id C31BD7BE83
	for <java-user@lucene.apache.org>; Mon, 15 Jan 2007 06:10:09 -0500 (EST)
Received: from heartbeat1.messagingengine.com ([10.202.2.160])
  by out1.internal (MEProxy); Mon, 15 Jan 2007 06:10:09 -0500
X-Sasl-enc: B4y/+KORZKo3kSiZ19sWvkmSDcJGvgs5ZXBYuGaSW528 1168859409
Received: from [10.17.4.90] (pool-72-70-33-214.bstnma.fios.verizon.net [72.70.33.214])
	by mail.messagingengine.com (Postfix) with ESMTP id 8A4DD15B8D
	for <java-user@lucene.apache.org>; Mon, 15 Jan 2007 06:10:09 -0500 (EST)
Message-ID: <45AB610B.9090600@mikemccandless.com>
Date: Mon, 15 Jan 2007 06:10:03 -0500
From: Michael McCandless <lucene@mikemccandless.com>
User-Agent: Thunderbird 1.5.0.9 (Windows/20061207)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: How to open IndexWriter to append document?
References: <OF0E40F525.286C999E-ON88257264.002F934B-88257264.003153ED@il.ibm.com>
In-Reply-To: <OF0E40F525.286C999E-ON88257264.002F934B-88257264.003153ED@il.ibm.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Doron Cohen wrote:
> David <zhouchengly@gmail.com> wrote on 15/01/2007 00:36:28:
> 
>> Thanks, I think I did not describe my problem exactly.
>> What I want to do is:
>>      if the index file exist, append document
>>      if the index file does not exist, create a new , empty index file.
>> How can I implement that?
> 
> If this is what you need, this (Lucene Java) conostructor would do:
>    IndexWriter(File path, Analyzer a)
>           Constructs an IndexWriter for the index in path, creating it
> first if it does not already exist, otherwise appending to the existing
> index.

But please note these are not yet part of any release (ie, only
committed to the "trunk" right now).

> Your current code really cannot work, becuase for FSDirectory.get(),
> create=true, which erases everything first, and for IndexWriter(),
> create=false, which expects an existing index.

See also JIRA issue LUCENE-773:

     http://issues.apache.org/jira/browse/LUCENE-773

The fact that there are two "create" options (one at the FSDirectory
level and one at the IndexWriter level) has been a source of confusion
/ mistakes / bugs in the past.  So the plan is to deprecate
FSDirectory's create and only use IndexWriter's create going forward.

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25514-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 15 15:00:02 2007
Return-Path: <java-user-return-25514-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99386 invoked from network); 15 Jan 2007 15:00:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Jan 2007 15:00:01 -0000
Received: (qmail 961 invoked by uid 500); 15 Jan 2007 15:00:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 918 invoked by uid 500); 15 Jan 2007 15:00:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 907 invoked by uid 99); 15 Jan 2007 14:59:59 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Jan 2007 06:59:59 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Jan 2007 06:59:50 -0800
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1H6TJ4-0002KQ-Dm
	for java-user@lucene.apache.org; Mon, 15 Jan 2007 06:59:30 -0800
Message-ID: <8372827.post@talk.nabble.com>
Date: Mon, 15 Jan 2007 06:59:30 -0800 (PST)
From: spinergywmy <spinergywmy@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Perform indexing and searching concurrently
In-Reply-To: <Pine.LNX.4.58.0701142237520.6886@hal.rescomp.berkeley.edu>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: spinergywmy@gmail.com
References: <8365907.post@talk.nabble.com> <Pine.LNX.4.58.0701142237520.6886@hal.rescomp.berkeley.edu>
X-Virus-Checked: Checked by ClamAV on apache.org


Hi,

   What I have done is I declare a reader = IndexReader.open(dir); then
mSearcher = new IndexSearcher(reader); after the above I close the searcher
but I didn't close the reader. And I'm wondering is it ok if I did not close
the reader, and what will happened if I did not close it?

   Thanks


regards,
Wooi Meng 
-- 
View this message in context: http://www.nabble.com/Perform-indexing-and-searching-concurrently-tf3012374.html#a8372827
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25515-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 15 18:50:13 2007
Return-Path: <java-user-return-25515-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78714 invoked from network); 15 Jan 2007 18:50:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Jan 2007 18:50:13 -0000
Received: (qmail 54136 invoked by uid 500); 15 Jan 2007 18:50:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54107 invoked by uid 500); 15 Jan 2007 18:50:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54096 invoked by uid 99); 15 Jan 2007 18:50:12 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Jan 2007 10:50:12 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [66.9.58.34] (HELO infsrv00.InfinityInfo.com) (66.9.58.34)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Jan 2007 10:50:03 -0800
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: Another MultiFieldQueryParser question...
Date: Mon, 15 Jan 2007 13:50:14 -0500
Message-ID: <89ACF43E70DC0C4B812FEA71B98CE2EE2882F9@infsrv00.InfinityInfo.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Another MultiFieldQueryParser question...
Thread-Index: Acc41f3dJ78S791bS6a5bidZR2QyXA==
From: "Jiho Han" <jhan@InfinityInfo.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

I looked through the archive a bit and found some Q & A's regarding this
but I didn't see anything definitive so I thought I'd ask again...

Basically, I have a web page that can search through a database table
across multiple servers.
So imagine that there are 100 different databases spread across a number
of servers but the schema is same.
I created an index with fields specific to each row in a particular
table such as NAME, TYPE, COMPANY, etc. in addition to SERVER, DATABASE
so I can capture where they are from.

Ultimately, what I want is a single HTML input field that can capture a
query expression and instantiate a searcher and return a result set.
This querystring should be in any number of forms:

Ex)
John Doe ABC Company (which would search for each word OR'ed in all of
the fields)
"John Doe" And "ABC Company" (which would search for "John Doe" AND'ed
with "ABC Company" in all of the fields)
NAME:"John Doe" COMPANY:"ABC Company" (which would search for results
where either NAME contains "John Doe" OR COMPANY contains "ABC Company")
NAME:"John Doe" And COMPANY:"ABC Company" (which would search in each
field but must match both fields)
+NAME:"John Doe" +COMPANY:"ABC Company" (which I understand is same as
the previous line - if not please correct me)

So I am wondering if a single instance of Query and
MultiFieldQueryParser can do this.  Do I need any other special
processing?

Here's what I have right now (C#):

        string[] searchFields =3D new string[] {
            "SERVER", "DATABASE", "NAME", "COMPANY", "TYPE"
        };

        MultiFieldQueryParser parser =3D new
MultiFieldQueryParser(searchFields, new StandardAnalyzer());
        parser.SetDefaultOperator(QueryParser.Operator.OR);
        Query query =3D parser.Parse(querystring);

Then I pass 'query' into MultiSearcher.  Well, it's not returning the
results as I expect.
Can some show me what I need to change?
Thanks

Jiho Han
Senior Software Engineer
Infinity Info Systems
The Sales Technology Experts
Tel: 212.563.4400 x6375
Fax: 212.760.0540
jhan@infinityinfo.com
www.infinityinfo.com <http://www.infinityinfo.com/>=20



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25516-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 15 19:00:05 2007
Return-Path: <java-user-return-25516-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81358 invoked from network); 15 Jan 2007 19:00:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Jan 2007 19:00:04 -0000
Received: (qmail 71812 invoked by uid 500); 15 Jan 2007 19:00:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71785 invoked by uid 500); 15 Jan 2007 19:00:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71774 invoked by uid 99); 15 Jan 2007 19:00:04 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Jan 2007 11:00:04 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of DORONC@il.ibm.com designates 195.212.29.150 as permitted sender)
Received: from [195.212.29.150] (HELO mtagate1.de.ibm.com) (195.212.29.150)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Jan 2007 10:59:53 -0800
Received: from d12nrmr1607.megacenter.de.ibm.com (d12nrmr1607.megacenter.de.ibm.com [9.149.167.49])
	by mtagate1.de.ibm.com (8.13.8/8.13.8) with ESMTP id l0FIxV1f158720
	for <java-user@lucene.apache.org>; Mon, 15 Jan 2007 18:59:31 GMT
Received: from d12av02.megacenter.de.ibm.com (d12av02.megacenter.de.ibm.com [9.149.165.228])
	by d12nrmr1607.megacenter.de.ibm.com (8.13.8/8.13.8/NCO v8.2) with ESMTP id l0FIxU033076124
	for <java-user@lucene.apache.org>; Mon, 15 Jan 2007 19:59:30 +0100
Received: from d12av02.megacenter.de.ibm.com (loopback [127.0.0.1])
	by d12av02.megacenter.de.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id l0FIxUD5017091
	for <java-user@lucene.apache.org>; Mon, 15 Jan 2007 19:59:30 +0100
Received: from d12mc102.megacenter.de.ibm.com (d12mc102.megacenter.de.ibm.com [9.149.167.114])
	by d12av02.megacenter.de.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id l0FIxU7I017088
	for <java-user@lucene.apache.org>; Mon, 15 Jan 2007 19:59:30 +0100
In-Reply-To: <45AB610B.9090600@mikemccandless.com>
Subject: Re: How to open IndexWriter to append document?
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 7.0 HF277 June 21, 2006
Message-ID: <OF6BE35BA1.7B2062A0-ON88257264.0067C5E3-88257264.0067E929@il.ibm.com>
From: Doron Cohen <DORONC@il.ibm.com>
Date: Mon, 15 Jan 2007 10:54:58 -0800
X-MIMETrack: Serialize by Router on D12MC102/12/M/IBM(Release 7.0.2HF71 | November 3, 2006) at
 15/01/2007 20:59:30
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org

Michael McCandless <lucene@mikemccandless.com> wrote on 15/01/2007
03:10:03:

> Doron Cohen wrote:
> > David <zhouchengly@gmail.com> wrote on 15/01/2007 00:36:28:
> >
> >> Thanks, I think I did not describe my problem exactly.
> >> What I want to do is:
> >>      if the index file exist, append document
> >>      if the index file does not exist, create a new , empty index
file.
> >> How can I implement that?
> >
> > If this is what you need, this (Lucene Java) conostructor would do:
> >    IndexWriter(File path, Analyzer a)
> >           Constructs an IndexWriter for the index in path, creating it
> > first if it does not already exist, otherwise appending to the existing
> > index.
>
> But please note these are not yet part of any release (ie, only
> committed to the "trunk" right now).

Yes, I was referring to the most recent code here.

>
> > Your current code really cannot work, becuase for FSDirectory.get(),
> > create=true, which erases everything first, and for IndexWriter(),
> > create=false, which expects an existing index.
>
> See also JIRA issue LUCENE-773:
>
>      http://issues.apache.org/jira/browse/LUCENE-773
>
> The fact that there are two "create" options (one at the FSDirectory
> level and one at the IndexWriter level) has been a source of confusion
> / mistakes / bugs in the past.  So the plan is to deprecate
> FSDirectory's create and only use IndexWriter's create going forward.
>
> Mike
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25517-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 15 19:02:28 2007
Return-Path: <java-user-return-25517-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81908 invoked from network); 15 Jan 2007 19:02:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Jan 2007 19:02:27 -0000
Received: (qmail 76554 invoked by uid 500); 15 Jan 2007 19:02:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76525 invoked by uid 500); 15 Jan 2007 19:02:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76514 invoked by uid 99); 15 Jan 2007 19:02:26 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Jan 2007 11:02:26 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of markrmiller@gmail.com designates 66.249.82.229 as permitted sender)
Received: from [66.249.82.229] (HELO wx-out-0506.google.com) (66.249.82.229)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Jan 2007 11:02:16 -0800
Received: by wx-out-0506.google.com with SMTP id i29so1624750wxd
        for <java-user@lucene.apache.org>; Mon, 15 Jan 2007 11:01:55 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=D4XFrm/O2slzYrMcCQjHAa/J1sQJ64Nm4aLyr7XbJH0TbcSA9yLJ5pe9mijHRgzwlapfHXwVYIQueZW5lOc+pnHlwtUv0dhJuFL7GGxOyrVag0xjE3CwgW1hMbdnUP3lXp4YxiX4ixvhqnjAR+FWRNZUdjwNVJj0NgP2rbublH8=
Received: by 10.90.105.20 with SMTP id d20mr3262907agc.1168887715637;
        Mon, 15 Jan 2007 11:01:55 -0800 (PST)
Received: from ?192.168.1.103? ( [216.66.114.42])
        by mx.google.com with ESMTP id 43sm9143603wri.2007.01.15.11.01.53;
        Mon, 15 Jan 2007 11:01:54 -0800 (PST)
Message-ID: <45ABCFD3.8030705@gmail.com>
Date: Mon, 15 Jan 2007 14:02:43 -0500
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 1.5.0.9 (Windows/20061207)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Highlighting brackets bug ?
References: <f43d06890701130935g78999928w6df86e3e5cd05e97@mail.gmail.com>	 <45A9528D.5090701@gmail.com> <f43d06890701150213k2acc7f89x342b7a505df0873e@mail.gmail.com>
In-Reply-To: <f43d06890701150213k2acc7f89x342b7a505df0873e@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Depends on your environment...I think you need an SVN client to 
efficiently check out many files...ever try tortoise SVN? I use eclipse 
and the subclipse plugin...working with the latest version of Lucene is 
as easy as adding the Lucene svn browse url and then checking Lucene out 
as a new project...this grabs core lucene and all the contribs...then I 
can just do an update to get the latest stuff...

- Mark

heikki doeleman wrote:
> yes, thank you ! I built a highlighter jar from here
> http://svn.apache.org/repos/asf/lucene/java/trunk/contrib/highlighter/src/java/org/apache/lucene/search/highlight/(revision 
>
> 496265) and it is working fine !
>
> One question though .. is there an easy way to download the sources 
> from the
> svn repository, in one go ? I did it now by right-clicking links to files
> and doing save-as, for each file.. this was maybe OK for the highlighter,
> but what if you want an entire big project ?
>
> thanks again
> heikki doeleman
>
>
>
> On 1/13/07, Mark Miller <markrmiller@gmail.com> wrote:
>>
>> Which version are you using? I believe that this is a bug that was fixed
>> last August...but that the fix is only in the 2.1 Highlighter version.
>> Try grabbing the latest highlighter code from the trunk.
>>
>> - Mark
>>
>> heikki doeleman wrote:
>> > Hi there,
>> >
>> > I'm having some strange behaviour using the highlighter and I'm
>> > wondering if
>> > it is a bug or should I take a different approach ?
>> >
>> > I want to highlight the search terms that were used to execute a
>> > query. If
>> > the search terms end in an end-bracket or end-square-bracket (so ')'
>> > or ']'
>> > ), the resulting highlighted piece no longer contains the end bracket;
>> it
>> > just disappeared !
>> >
>> > For exqmple searching for Vera, Yvonne (1964- ) and highlighting the
>> > results, would produce <span class="highlight">Vera, Yvonne (1964-
>> > </span>.
>> >
>> > The same thing happens if I use quotes to try phrase searching, for
>> > example
>> > "Vera, Yvonne (1964- )".
>> >
>> > The field is indexed using a standard tokenizer. It makes no
>> > difference if I
>> > use Field.Index.UN_TOKENIZED or Field.Index.TOKENIZED when creating 
>> the
>> > index.
>> >
>> > In the highlighting I create a query from the search terms and rewrite
>> > it. I
>> > tried both creating a PhraseQuery, and I tried the QueryParser.parse()
>> > using
>> > the same analyzer used for indexing and searching. Nothing helps !! 
>> Also
>> > tried escaping the brackets, to no avail.
>> >
>> > Any help would be very much appreciated !
>> >
>> > thank you
>> > Heikki Doeleman
>> >
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25518-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 15 19:52:30 2007
Return-Path: <java-user-return-25518-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91975 invoked from network); 15 Jan 2007 19:52:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Jan 2007 19:52:29 -0000
Received: (qmail 45601 invoked by uid 500); 15 Jan 2007 19:52:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45429 invoked by uid 500); 15 Jan 2007 19:52:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45418 invoked by uid 99); 15 Jan 2007 19:52:29 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Jan 2007 11:52:29 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Jan 2007 11:52:20 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 6091B5B778; Mon, 15 Jan 2007 11:52:00 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 576DE7F403
	for <java-user@lucene.apache.org>; Mon, 15 Jan 2007 11:52:00 -0800 (PST)
Date: Mon, 15 Jan 2007 11:52:00 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: ordered by the default
In-Reply-To: <8368747.post@talk.nabble.com>
Message-ID: <Pine.LNX.4.58.0701151141350.3802@hal.rescomp.berkeley.edu>
References: <8368747.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: My search application is returning hits ordered by the default relevance. I
: migrated my application from lucene 1.3 to lucene 2.0. I observed that the
: documents are returned with a different order. I tested in using the new
: Scorer (BooleanScorer2) and in using the old scorer class (BooleanScorer)
: but that didn't fix the problem.

my tenure started post-1.4.3, so i don't know if any delibeate score
changes were introduced between 1.3 and 1.4.3.  There aren't any
intentional score changes thta i can recall between 1.4.3 and 2.0 -- but
depending on what types of queries you do, there have been some bug fixes
for various query types which have had a side effect of changing the
scores (becuase they now score correctly).  The other possibility is that
QueryPArser semantics which were somewhat undefined before have been
formalized a bit more, so if you use that class you may find that it's
parsing your queries slightly differently and producing differnet query
objects.



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25519-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 15 23:29:47 2007
Return-Path: <java-user-return-25519-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 55362 invoked from network); 15 Jan 2007 23:29:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Jan 2007 23:29:46 -0000
Received: (qmail 50949 invoked by uid 500); 15 Jan 2007 23:29:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50909 invoked by uid 500); 15 Jan 2007 23:29:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50898 invoked by uid 99); 15 Jan 2007 23:29:46 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Jan 2007 15:29:46 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [128.230.18.29] (HELO mailer.syr.edu) (128.230.18.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Jan 2007 15:29:35 -0800
Received: from [128.230.84.138] (syru84-138.syr.edu) by mailer.syr.edu (LSMTP for Windows NT v1.1b) with SMTP id <0.15D6D16A@mailer.syr.edu>; Mon, 15 Jan 2007 18:29:14 -0500
Message-ID: <45AC0E4A.8020508@syr.edu>
Date: Mon, 15 Jan 2007 18:29:14 -0500
From: Steven Rowe <sarowe@syr.edu>
User-Agent: Mail/News 1.5.0.4-GroupWise-IMAP-fix (Windows/20060619)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Highlighting brackets bug ?
References: <f43d06890701130935g78999928w6df86e3e5cd05e97@mail.gmail.com>	 <45A9528D.5090701@gmail.com> <f43d06890701150213k2acc7f89x342b7a505df0873e@mail.gmail.com>
In-Reply-To: <f43d06890701150213k2acc7f89x342b7a505df0873e@mail.gmail.com>
X-Enigmail-Version: 0.94.1.2
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

heikki doeleman wrote:
> One question though .. is there an easy way to download the sources
> from the svn repository, in one go ? I did it now by right-clicking
> links to files

The "Source Code" section of the Lucene Java Developer Resources page
<http://lucene.apache.org/java/docs/developer-resources.html#source>
gives the command you can use with the Subversion command-line interface
to do what you want.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25520-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 16 07:17:50 2007
Return-Path: <java-user-return-25520-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 50416 invoked from network); 16 Jan 2007 07:17:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Jan 2007 07:17:49 -0000
Received: (qmail 22214 invoked by uid 500); 16 Jan 2007 07:17:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22166 invoked by uid 500); 16 Jan 2007 07:17:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 22155 invoked by uid 99); 16 Jan 2007 07:17:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Jan 2007 23:17:50 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [202.60.64.64] (HELO md151.servers.net.au) (202.60.64.64)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Jan 2007 23:17:40 -0800
Received: from hasbeen (55.120.233.220.exetel.com.au [220.233.120.55])
	(authenticated bits=0)
	by md151.servers.net.au (8.12.10/8.12.10) with ESMTP id l0G6ilAr016059
	for <java-user@lucene.apache.org>; Tue, 16 Jan 2007 17:44:48 +1100
Message-Id: <200701160644.l0G6ilAr016059@md151.servers.net.au>
From: "Vijay Santhanam" <vijay@spectrumwired.com>
To: <java-user@lucene.apache.org>
Subject: My Category Search Problem
Date: Tue, 16 Jan 2007 18:18:22 +1100
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_0050_01C7399A.B55B39F0"
X-Mailer: Microsoft Office Outlook, Build 11.0.5510
Thread-Index: Acc5PoEUQ3YG8C5USDSJ7TBXNx6C4A==
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3028
X-Virus-Checked: Checked by ClamAV on apache.org

------=_NextPart_000_0050_01C7399A.B55B39F0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit

Hi Lucene Users!

 

I've been playing around with dotLucene on a few projects since for about 4
months, and I've found Lucene to be exceptionally powerful, speedy and
thanks to LIA, really easy to use. 

But I've hit a problem that I fear will pose a performance problem for our
architecture and Lucene installation.

 

We have an index of about 100,000 documents with about 30 fields, built from
our database.

Each document in the index contains a TOKENIZED field of Category Names, so
that each document can belong to many categories. The category field is a
tokenized string field.

 

We have a new requirement to not only allow searches across the whole index,
but to return the number of documents in each of the (150) possible
categories. This is like in an Amazon search
(http://amazon.com/s/ref=nb_ss_gw/105-0072880-3737226?url=search-alias%3Daps
&field-keywords=diamond&Go.x=0&Go.y=0&Go=Go), where a category list is
presented on the left with the number of results in each category.

 

So far, I can think of two possible ways to implement this:

 

1.	Create a QueryFilter for the user enterered query, and perform a
category field search for each category.
2.	Create a separate index for each category, and sequentially (or
concurrently) search across all the indexes. 

 

Does anyone know which solution is better than the other? 

 

Both solutions seem taxing to me because they both involve "number of
categories + 1" searches.

 

Regards,

 -V

 

 


------=_NextPart_000_0050_01C7399A.B55B39F0--


From java-user-return-25521-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 16 07:45:22 2007
Return-Path: <java-user-return-25521-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 55986 invoked from network); 16 Jan 2007 07:45:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Jan 2007 07:45:21 -0000
Received: (qmail 52452 invoked by uid 500); 16 Jan 2007 07:45:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52415 invoked by uid 500); 16 Jan 2007 07:45:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52403 invoked by uid 99); 16 Jan 2007 07:45:19 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Jan 2007 23:45:19 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [220.225.240.22] (HELO mail01.naukri.com) (220.225.240.22)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Jan 2007 23:45:10 -0800
Received: from [172.16.0.162] ([172.16.0.162])
          by mail01.naukri.com (Lotus Domino Release 7.0)
          with ESMTP id 2007011613043228-947362 ;
          Tue, 16 Jan 2007 13:04:32 +0530 
Message-ID: <45AC821E.8020003@naukri.com>
Date: Tue, 16 Jan 2007 13:13:26 +0530
From: Kapil Chhabra <kapil.chhabra@naukri.com>
User-Agent: Thunderbird 1.5.0.8 (X11/20061107)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: My Category Search Problem
References: <200701160644.l0G6ilAr016059@md151.servers.net.au>
In-Reply-To: <200701160644.l0G6ilAr016059@md151.servers.net.au>
X-MIMETrack: Itemize by SMTP Server on noidaa88/naukri(Release 7.0|August 18, 2005) at
 01/16/2007 01:04:32 PM,
	Serialize by Router on noidaa88/naukri(Release 7.0|August 18, 2005) at 01/16/2007
 01:04:56 PM,
	Serialize complete at 01/16/2007 01:04:56 PM
Content-Transfer-Encoding: 7bit
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Vijay,
I have hit the same problem in the past and have evaluated various 
techniques to solve the same.
1. Using the QueryFilter
The idea is to
    a) create BitSets for each category once initially
    b) run the search and extract the BitSet for the search results
    c) Logically "AND" the result set with the category sets
    d) find the cardinality of each such result and finally display
This was working just fine in my scenario but was not scalable. The 
performance decreased with the increase in the number categories. 
(because of the "AND"ing in the loop)

2. Override the collect method of the HitCollector.
This method is called by lucene for every document in the search results.
The idea is to:
    a) override the method to use a HashMap (this works just fine for 
me) for the category to count (hits) mapping
    b) just keep incrementing the count for each category as and when it 
is encountered in the search results.
    c) the HashMap can be blank in the beginning and new categories can 
be added to it when encountered.

I am currently using the second method and it works.

Hope this helps.

Regards,
kapilChhabra


Vijay Santhanam wrote:
> Hi Lucene Users!
>
>  
>
> I've been playing around with dotLucene on a few projects since for about 4
> months, and I've found Lucene to be exceptionally powerful, speedy and
> thanks to LIA, really easy to use. 
>
> But I've hit a problem that I fear will pose a performance problem for our
> architecture and Lucene installation.
>
>  
>
> We have an index of about 100,000 documents with about 30 fields, built from
> our database.
>
> Each document in the index contains a TOKENIZED field of Category Names, so
> that each document can belong to many categories. The category field is a
> tokenized string field.
>
>  
>
> We have a new requirement to not only allow searches across the whole index,
> but to return the number of documents in each of the (150) possible
> categories. This is like in an Amazon search
> (http://amazon.com/s/ref=nb_ss_gw/105-0072880-3737226?url=search-alias%3Daps
> &field-keywords=diamond&Go.x=0&Go.y=0&Go=Go), where a category list is
> presented on the left with the number of results in each category.
>
>  
>
> So far, I can think of two possible ways to implement this:
>
>  
>
> 1.	Create a QueryFilter for the user enterered query, and perform a
> category field search for each category.
> 2.	Create a separate index for each category, and sequentially (or
> concurrently) search across all the indexes. 
>
>  
>
> Does anyone know which solution is better than the other? 
>
>  
>
> Both solutions seem taxing to me because they both involve "number of
> categories + 1" searches.
>
>  
>
> Regards,
>
>  -V
>
>  
>
>  
>
>
>   


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25522-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 16 07:48:11 2007
Return-Path: <java-user-return-25522-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56288 invoked from network); 16 Jan 2007 07:48:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Jan 2007 07:48:10 -0000
Received: (qmail 54307 invoked by uid 500); 16 Jan 2007 07:48:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54275 invoked by uid 500); 16 Jan 2007 07:48:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54264 invoked by uid 99); 16 Jan 2007 07:48:11 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Jan 2007 23:48:11 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of DORONC@il.ibm.com designates 195.212.29.154 as permitted sender)
Received: from [195.212.29.154] (HELO mtagate5.de.ibm.com) (195.212.29.154)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Jan 2007 23:48:00 -0800
Received: from d12nrmr1607.megacenter.de.ibm.com (d12nrmr1607.megacenter.de.ibm.com [9.149.167.49])
	by mtagate5.de.ibm.com (8.13.8/8.13.8) with ESMTP id l0G7ldZg064364
	for <java-user@lucene.apache.org>; Tue, 16 Jan 2007 07:47:39 GMT
Received: from d12av04.megacenter.de.ibm.com (d12av04.megacenter.de.ibm.com [9.149.165.229])
	by d12nrmr1607.megacenter.de.ibm.com (8.13.8/8.13.8/NCO v8.2) with ESMTP id l0G7ldpP3276906
	for <java-user@lucene.apache.org>; Tue, 16 Jan 2007 08:47:39 +0100
Received: from d12av04.megacenter.de.ibm.com (loopback [127.0.0.1])
	by d12av04.megacenter.de.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id l0G7lcCI001130
	for <java-user@lucene.apache.org>; Tue, 16 Jan 2007 08:47:38 +0100
Received: from d12mc102.megacenter.de.ibm.com (d12mc102.megacenter.de.ibm.com [9.149.167.114])
	by d12av04.megacenter.de.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id l0G7lcmo001125
	for <java-user@lucene.apache.org>; Tue, 16 Jan 2007 08:47:38 +0100
In-Reply-To: <89ACF43E70DC0C4B812FEA71B98CE2EE2882F9@infsrv00.InfinityInfo.com>
Subject: Re: Another MultiFieldQueryParser question...
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 7.0 HF277 June 21, 2006
Message-ID: <OF257CE09C.ACEB9290-ON88257265.002A3CC0-88257265.002AAC13@il.ibm.com>
From: Doron Cohen <DORONC@il.ibm.com>
Date: Mon, 15 Jan 2007 23:46:05 -0800
X-MIMETrack: Serialize by Router on D12MC102/12/M/IBM(Release 7.0.2HF71 | November 3, 2006) at
 16/01/2007 09:47:37
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org

"Jiho Han" <jhan@InfinityInfo.com> wrote on 15/01/2007 10:50:14:

> I looked through the archive a bit and found some Q & A's regarding this
> but I didn't see anything definitive so I thought I'd ask again...
>
> Basically, I have a web page that can search through a database table
> across multiple servers.
> So imagine that there are 100 different databases spread across a number
> of servers but the schema is same.
> I created an index with fields specific to each row in a particular
> table such as NAME, TYPE, COMPANY, etc. in addition to SERVER, DATABASE
> so I can capture where they are from.
>
> Ultimately, what I want is a single HTML input field that can capture a
> query expression and instantiate a searcher and return a result set.
> This querystring should be in any number of forms:
>
> Ex)
> John Doe ABC Company (which would search for each word OR'ed in all of
> the fields)
> "John Doe" And "ABC Company" (which would search for "John Doe" AND'ed
> with "ABC Company" in all of the fields)
> NAME:"John Doe" COMPANY:"ABC Company" (which would search for results
> where either NAME contains "John Doe" OR COMPANY contains "ABC Company")
> NAME:"John Doe" And COMPANY:"ABC Company" (which would search in each
> field but must match both fields)
> +NAME:"John Doe" +COMPANY:"ABC Company" (which I understand is same as
> the previous line - if not please correct me)
>
> So I am wondering if a single instance of Query and
> MultiFieldQueryParser can do this.  Do I need any other special
> processing?
>
> Here's what I have right now (C#):
>
>         string[] searchFields = new string[] {
>             "SERVER", "DATABASE", "NAME", "COMPANY", "TYPE"
>         };
>
>         MultiFieldQueryParser parser = new
> MultiFieldQueryParser(searchFields, new StandardAnalyzer());
>         parser.SetDefaultOperator(QueryParser.Operator.OR);
>         Query query = parser.Parse(querystring);
>
> Then I pass 'query' into MultiSearcher.  Well, it's not returning the
> results as I expect.

How is it different from what you expect?
One thing to fix is: change And to AND
If still results seem wrong try printing the query (toString()) - is that
as you expect?

Doron

> Can some show me what I need to change?
> Thanks
>
> Jiho Han
> Senior Software Engineer
> Infinity Info Systems
> The Sales Technology Experts
> Tel: 212.563.4400 x6375
> Fax: 212.760.0540
> jhan@infinityinfo.com
> www.infinityinfo.com <http://www.infinityinfo.com/>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25523-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 16 09:32:13 2007
Return-Path: <java-user-return-25523-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 293 invoked from network); 16 Jan 2007 09:32:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Jan 2007 09:32:12 -0000
Received: (qmail 63869 invoked by uid 500); 16 Jan 2007 09:31:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63695 invoked by uid 500); 16 Jan 2007 09:31:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63684 invoked by uid 99); 16 Jan 2007 09:31:58 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Jan 2007 01:31:58 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of zhouchengly@gmail.com designates 64.233.182.186 as permitted sender)
Received: from [64.233.182.186] (HELO nf-out-0910.google.com) (64.233.182.186)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Jan 2007 01:31:50 -0800
Received: by nf-out-0910.google.com with SMTP id a27so2178530nfc
        for <java-user@lucene.apache.org>; Tue, 16 Jan 2007 01:31:29 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=R5DUa9rBDDNay/3CCA55hiw6uNmu87r74GUtk25bmtcnC54Bee7Pc8xDTEToSU2P5VCKW3nhTr87wLY11oqrSdmLSehx6l/hnJdmXfZj4hct9HRx50xDXDgJpdA2ATaTrmi34uLjNt0Sdv5kxZFglPK66X7VFiQcuTiB5Uz9MOg=
Received: by 10.82.113.6 with SMTP id l6mr834244buc.1168939888653;
        Tue, 16 Jan 2007 01:31:28 -0800 (PST)
Received: by 10.82.100.12 with HTTP; Tue, 16 Jan 2007 01:31:28 -0800 (PST)
Message-ID: <c2f9e9030701160131l2afe6dfcw6f6d88dac9f2879f@mail.gmail.com>
Date: Tue, 16 Jan 2007 17:31:28 +0800
From: David <zhouchengly@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: How to support float type term in Lucene?
In-Reply-To: <c68e39170701092006k74ae3ae2q2e21ff9af5a50535@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_141668_17131514.1168939888288"
References: <c2f9e9030701091908s65113f36wfca30e604a0130c0@mail.gmail.com>
	 <c68e39170701092006k74ae3ae2q2e21ff9af5a50535@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_141668_17131514.1168939888288
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

thanks, I use the port PyLucene, and I wonder if there is some utils in
Lucene that can convert floating point number to sortable string,
somebody tell me there should be such utils, but I can't find it in Lucene
document.

Appreciate your help!

2007/1/10, Yonik Seeley <yonik@apache.org>:
>
> On 1/9/07, David <zhouchengly@gmail.com> wrote:
> > Hi all:
> >     How can I index float type term in Lucene so that we can search in a
> > range? I learned that it is possible to convert float to sortable
> string,
> > but I don't know how to do it.
>
> It's easiest/fastest in binary.  The IEEE floating point format if
> interpreted as a signed integer is already very close to sorting
> correctly.  If you already know how to index an integer, then do this:
> get the float bits as an int, and if the high bit is set, flip all
> other bits.
> That's how Solr does it:
>
> http://svn.apache.org/viewvc/incubator/solr/trunk/src/java/org/apache/solr/util/NumberUtils.java?view=markup
>
>   public static String float2sortableStr(float val) {
>     int f = Float.floatToRawIntBits(val);
>     if (f<0) f ^= 0x7fffffff;
>     return int2sortableStr(f);
>   }
>
>
> -Yonik
> http://incubator.apache.org/solr Solr, the open-source Lucene search
> server
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
David

------=_Part_141668_17131514.1168939888288--

From java-user-return-25524-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 16 14:58:42 2007
Return-Path: <java-user-return-25524-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92499 invoked from network); 16 Jan 2007 14:58:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Jan 2007 14:58:41 -0000
Received: (qmail 54853 invoked by uid 500); 16 Jan 2007 14:58:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54775 invoked by uid 500); 16 Jan 2007 14:58:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54733 invoked by uid 99); 16 Jan 2007 14:58:23 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Jan 2007 06:58:23 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [68.230.241.31] (HELO fed1rmmtao08.cox.net) (68.230.241.31)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Jan 2007 06:58:11 -0800
Received: from fed1rmimpo02.cox.net ([70.169.32.72])
          by fed1rmmtao08.cox.net
          (InterMail vM.6.01.06.03 201-2131-130-104-20060516) with ESMTP
          id <20070116145749.FNQH16632.fed1rmmtao08.cox.net@fed1rmimpo02.cox.net>
          for <java-user@lucene.apache.org>;
          Tue, 16 Jan 2007 09:57:49 -0500
Received: from dv1040 ([68.111.207.19])
	by fed1rmimpo02.cox.net with bizsmtp
	id Bqy21W0010Reif00000000; Tue, 16 Jan 2007 09:58:06 -0500
Reply-To: <gstead@ieee.org>
From: "Graham Stead" <gstead@ieee.org>
To: <java-user@lucene.apache.org>
Subject: RE: My Category Search Problem
Date: Tue, 16 Jan 2007 06:57:44 -0800
Message-ID: <014f01c7397e$adc91ed0$0401a8c0@dv1040>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
In-Reply-To: <45AC821E.8020003@naukri.com>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3028
Thread-Index: Acc5QkaxCqUIYOCIQ5iuakwGGx3xWwAO7azw
X-Virus-Checked: Checked by ClamAV on apache.org

Hello Vijay,

I'm not sure whether such a change is feasible for you, but Solr has
supported facets for some time now. Solr is a front-end for Lucene that
provides a number of valuable features  not found in Lucene itself: caching,
FunctionQueries, and facets, to name a few. It has an XML interface and can
be accessed from any language.

Best regards,
-Graham

> -----Original Message-----
> From: Kapil Chhabra [mailto:kapil.chhabra@naukri.com] 
> Sent: Monday, January 15, 2007 11:43 PM
> To: java-user@lucene.apache.org
> Subject: Re: My Category Search Problem
> 
> Hi Vijay,
> I have hit the same problem in the past and have evaluated 
> various techniques to solve the same.
> 1. Using the QueryFilter
> The idea is to
>     a) create BitSets for each category once initially
>     b) run the search and extract the BitSet for the search results
>     c) Logically "AND" the result set with the category sets
>     d) find the cardinality of each such result and finally 
> display This was working just fine in my scenario but was not 
> scalable. The performance decreased with the increase in the 
> number categories. 
> (because of the "AND"ing in the loop)
> 
> 2. Override the collect method of the HitCollector.
> This method is called by lucene for every document in the 
> search results.
> The idea is to:
>     a) override the method to use a HashMap (this works just fine for
> me) for the category to count (hits) mapping
>     b) just keep incrementing the count for each category as 
> and when it is encountered in the search results.
>     c) the HashMap can be blank in the beginning and new 
> categories can be added to it when encountered.
> 
> I am currently using the second method and it works.
> 
> Hope this helps.
> 
> Regards,
> kapilChhabra
> 
> 
> Vijay Santhanam wrote:
> > Hi Lucene Users!
> >
> >  
> >
> > I've been playing around with dotLucene on a few projects since for 
> > about 4 months, and I've found Lucene to be exceptionally powerful, 
> > speedy and thanks to LIA, really easy to use.
> >
> > But I've hit a problem that I fear will pose a performance 
> problem for 
> > our architecture and Lucene installation.
> >
> >  
> >
> > We have an index of about 100,000 documents with about 30 fields, 
> > built from our database.
> >
> > Each document in the index contains a TOKENIZED field of Category 
> > Names, so that each document can belong to many categories. The 
> > category field is a tokenized string field.
> >
> >  
> >
> > We have a new requirement to not only allow searches across 
> the whole 
> > index, but to return the number of documents in each of the (150) 
> > possible categories. This is like in an Amazon search 
> > 
> (http://amazon.com/s/ref=nb_ss_gw/105-0072880-3737226?url=search-alias
> > %3Daps &field-keywords=diamond&Go.x=0&Go.y=0&Go=Go), where 
> a category 
> > list is presented on the left with the number of results in each 
> > category.
> >
> >  
> >
> > So far, I can think of two possible ways to implement this:
> >
> >  
> >
> > 1.	Create a QueryFilter for the user enterered query, and perform a
> > category field search for each category.
> > 2.	Create a separate index for each category, and sequentially (or
> > concurrently) search across all the indexes. 
> >
> >  
> >
> > Does anyone know which solution is better than the other? 
> >
> >  
> >
> > Both solutions seem taxing to me because they both involve 
> "number of 
> > categories + 1" searches.
> >
> >  
> >
> > Regards,
> >
> >  -V
> >
> >  
> >
> >  
> >
> >
> >   
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25525-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 16 16:03:44 2007
Return-Path: <java-user-return-25525-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12496 invoked from network); 16 Jan 2007 16:03:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Jan 2007 16:03:43 -0000
Received: (qmail 12188 invoked by uid 500); 16 Jan 2007 16:03:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12151 invoked by uid 500); 16 Jan 2007 16:03:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12140 invoked by uid 99); 16 Jan 2007 16:03:42 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Jan 2007 08:03:42 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [212.100.241.107] (HELO mail.thinkwebhosting.com) (212.100.241.107)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 16 Jan 2007 08:03:31 -0800
Received: (qmail 5674 invoked by uid 399); 16 Jan 2007 16:03:10 -0000
Received: from unknown (HELO ?10.88.9.76?) (rollo.dupre@i-solutionsglobal.com@194.74.191.146)
  by 192.168.1.107 with SMTP; 16 Jan 2007 16:03:10 -0000
X-Originating-IP: 194.74.191.146
Message-ID: <45ACF734.2030508@i-nexus.com>
Date: Tue, 16 Jan 2007 16:03:00 +0000
From: Rollo du Pre <rollo.dupre@i-nexus.com>
User-Agent: Thunderbird 1.5.0.9 (Windows/20061207)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Websphere and Dark Matter
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

Has anyone encountered significant amounts of Websphere Dark Matter
generation when using Lucene?

We have a scenario where a web search app using Lucene causes
Websphere 5.1 allocated memory to grow but not shrink. JProfiler shows
the heap shrinks back ok, leaving the JVM with over 1GB allocated to
the jvm but only 400MB in use. Websphere does not perform a level 2
garbage collection and there is significant dark matter in the
allocated memory.

Thanks in advance for any help.

Rol.
-- 
Rollo du Pre
Software Architect

www.i-nexus.com

NOTICE: The information contained in this e-mail, including
any attachments, is confidential. If you have received this
in error you should not disclose, copy, circulate or in any
way use the information contained herein. This e-mail may
be legally privileged and unauthorised use may be unlawful.
If you have received this e-mail in error, please telephone
us on +44 (0)870 011 0622 immediately so we can arrange for
its return. Thank you.

In addition, the opinions expressed in this e-mail are those
of the employee and for the intended recipient(s) only. They
do not necessarily represent the opinions of i-solutions
Global Ltd.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25526-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 16 16:41:12 2007
Return-Path: <java-user-return-25526-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 23445 invoked from network); 16 Jan 2007 16:41:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Jan 2007 16:41:10 -0000
Received: (qmail 93241 invoked by uid 500); 16 Jan 2007 16:41:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93218 invoked by uid 500); 16 Jan 2007 16:41:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93207 invoked by uid 99); 16 Jan 2007 16:41:09 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Jan 2007 08:41:09 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [85.118.4.17] (HELO snorlax.uk.scalix.com) (85.118.4.17)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Jan 2007 08:41:00 -0800
Received: from snorlax.uk.scalix.com (localhost.localdomain [127.0.0.1])
	by snorlax.uk.scalix.com (8.12.11.20060308/8.12.11) with ESMTP id l0GGecxQ012600
	for <java-user@lucene.apache.org>; Tue, 16 Jan 2007 16:40:38 GMT
Received: from [10.11.108.231] (snorlax.uk.scalix.com [10.11.108.216])
    by snorlax.uk.scalix.com (Scalix SMTP Relay 11.0.0.431)
    via ESMTP; Tue, 16 Jan 2007 16:40:37 +0000 (GMT)
Date: Tue, 16 Jan 2007 16:40:37 +0000
From: John Haxby <jch@scalix.com>
To: java-user@lucene.apache.org
Message-ID: <45AD0005.40405@scalix.com>
In-Reply-To: <45ACF734.2030508@i-nexus.com>
References: <45ACF734.2030508@i-nexus.com>
Subject: Re: Websphere and Dark Matter
x-scalix-Hops: 1
User-Agent: Thunderbird 1.5.0.9 (X11/20061219)
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII";
	format="flowed"
Content-Disposition: inline
X-Spam-Checker-Version: SpamAssassin 3.1.7 (2006-10-05) on 
	snorlax.uk.scalix.com
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.5 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.1.7

Rollo du Pre wrote:
> We have a scenario where a web search app using Lucene causes
> Websphere 5.1 allocated memory to grow but not shrink. JProfiler shows
> the heap shrinks back ok, leaving the JVM with over 1GB allocated to
> the jvm but only 400MB in use. Websphere does not perform a level 2
> garbage collection and there is significant dark matter in the
> allocated memory.
Are you expecting the process to shrink?   They don't normally.

jch

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25527-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 16 17:15:31 2007
Return-Path: <java-user-return-25527-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35229 invoked from network); 16 Jan 2007 17:15:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Jan 2007 17:15:30 -0000
Received: (qmail 74555 invoked by uid 500); 16 Jan 2007 17:15:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73601 invoked by uid 500); 16 Jan 2007 17:15:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73590 invoked by uid 99); 16 Jan 2007 17:15:30 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Jan 2007 09:15:30 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [212.100.241.107] (HELO mail.thinkwebhosting.com) (212.100.241.107)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 16 Jan 2007 09:15:20 -0800
Received: (qmail 531 invoked by uid 399); 16 Jan 2007 17:14:55 -0000
Received: from unknown (HELO ?10.88.9.76?) (rollo.dupre@i-solutionsglobal.com@194.74.191.146)
  by 192.168.1.107 with SMTP; 16 Jan 2007 17:14:55 -0000
X-Originating-IP: 194.74.191.146
Message-ID: <45AD0816.2080201@i-nexus.com>
Date: Tue, 16 Jan 2007 17:15:02 +0000
From: Rollo du Pre <rollo.dupre@i-nexus.com>
User-Agent: Thunderbird 1.5.0.9 (Windows/20061207)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Websphere and Dark Matter
References: <45ACF734.2030508@i-nexus.com> <45AD0005.40405@scalix.com>
In-Reply-To: <45AD0005.40405@scalix.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi John,

I was hoping it would, yes. Does websphere not release memory back to 
the OS when it not longer needs it? I'm concerned that if the memory 
spiked for some reason (indexing a large document) then that would 
hamper the rest of the OS because it'd hold on to far more memory than 
is needed.

Thanks,

Rol.

John Haxby wrote:
> Rollo du Pre wrote:
>> We have a scenario where a web search app using Lucene causes
>> Websphere 5.1 allocated memory to grow but not shrink. JProfiler shows
>> the heap shrinks back ok, leaving the JVM with over 1GB allocated to
>> the jvm but only 400MB in use. Websphere does not perform a level 2
>> garbage collection and there is significant dark matter in the
>> allocated memory.
> Are you expecting the process to shrink?   They don't normally.
> 
> jch
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
Rollo du Pre
Software Architect
rollo.dupre@i-nexus.com

www.i-nexus.com

NOTICE: The information contained in this e-mail, including
any attachments, is confidential. If you have received this
in error you should not disclose, copy, circulate or in any
way use the information contained herein. This e-mail may
be legally privileged and unauthorised use may be unlawful.
If you have received this e-mail in error, please telephone
us on +44 (0)870 011 0622 immediately so we can arrange for
its return. Thank you.

In addition, the opinions expressed in this e-mail are those
of the employee and for the intended recipient(s) only. They
do not necessarily represent the opinions of i-solutions
Global Ltd.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25528-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 16 19:58:29 2007
Return-Path: <java-user-return-25528-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89619 invoked from network); 16 Jan 2007 19:58:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Jan 2007 19:58:29 -0000
Received: (qmail 30109 invoked by uid 500); 16 Jan 2007 19:58:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29989 invoked by uid 500); 16 Jan 2007 19:58:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29978 invoked by uid 99); 16 Jan 2007 19:58:26 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Jan 2007 11:58:26 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Jan 2007 11:58:16 -0800
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1H6uRN-0000yR-CH
	for java-user@lucene.apache.org; Tue, 16 Jan 2007 11:57:53 -0800
Message-ID: <8397645.post@talk.nabble.com>
Date: Tue, 16 Jan 2007 11:57:53 -0800 (PST)
From: ohad <ohad@eng.tau.ac.il>
To: java-user@lucene.apache.org
Subject: Re: html parsers and numers of terms
In-Reply-To: <Pine.LNX.4.63.0512130716100.5510@jimwormold>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: ohad@eng.tau.ac.il
References: <Pine.LNX.4.63.0512130716100.5510@jimwormold>
X-Virus-Checked: Checked by ClamAV on apache.org


Hi All
Just wanted to fill you in on an open source project i have recently
published. It is called Java Mozilla Html Parser ( on sourceforge ,
http://sourceforge.net/projects/mozillaparser ).
I had to create a java html parser that works just like browser do , so the
natural selection was using mozilla's parser. I tried to use JavaXPCOM at
first , but i could not access any of the classes i required (nsParser and
nsContentSink ) - somehow they were not included in the javaIDL... so... I
had to build a jni wrapper around mozilla's parser.

The outcome is a very nice parser that does the job and is stable so far of
what i have seen ( no crashes , no memory leaks). it is even compareable in
performacnce with tagsoup and neko , which are the ones that i have checked.

There are , however , some serious drawbacks that i would appreciate if
anyone will care to show me how to solve them. first and most annoying is
the fact that all parsing is done on a single thread - as you know , when
starting initXPCOM() one creates an event queue that can only be accessed
threw the thread that owns it. I could not proxy the parser objects i had no
matter what i did.

I would appreceate it if someone would try it out and tell me what the
parser feels like , as well as download the code from sourceforge and try to
compile it and see why the proxy things doesn't work.

Thanks everyone in advance
Ohad Serfaty
-- 
View this message in context: http://www.nabble.com/html-parsers-and-numers-of-terms-tf733866.html#a8397645
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25529-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 16 20:23:04 2007
Return-Path: <java-user-return-25529-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7072 invoked from network); 16 Jan 2007 20:23:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Jan 2007 20:23:04 -0000
Received: (qmail 85217 invoked by uid 500); 16 Jan 2007 20:23:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85189 invoked by uid 500); 16 Jan 2007 20:23:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85178 invoked by uid 99); 16 Jan 2007 20:23:03 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Jan 2007 12:23:03 -0800
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=FORGED_HOTMAIL_RCVD2,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Jan 2007 12:22:53 -0800
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1H6upF-0007ZL-Gw
	for java-user@lucene.apache.org; Tue, 16 Jan 2007 12:22:33 -0800
Message-ID: <8398063.post@talk.nabble.com>
Date: Tue, 16 Jan 2007 12:22:33 -0800 (PST)
From: moraleslos <moraleslos@hotmail.com>
To: java-user@lucene.apache.org
Subject: Sorting using Lucene search query syntax
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: moraleslos@hotmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


Is it possible to specify a sort on a field using standard Lucene search
query syntax?  I was not able to find it in the query doc so I assume not
but I would like to make sure before going on to use the API.  Thanks in
advance!

-los
-- 
View this message in context: http://www.nabble.com/Sorting-using-Lucene-search-query-syntax-tf3023249.html#a8398063
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25530-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 16 20:48:29 2007
Return-Path: <java-user-return-25530-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 18446 invoked from network); 16 Jan 2007 20:48:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Jan 2007 20:48:28 -0000
Received: (qmail 36960 invoked by uid 500); 16 Jan 2007 20:48:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36914 invoked by uid 500); 16 Jan 2007 20:48:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36903 invoked by uid 99); 16 Jan 2007 20:48:28 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Jan 2007 12:48:28 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Jan 2007 12:48:18 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 0533A30EFC18; Tue, 16 Jan 2007 15:47:57 -0500 (EST)
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on javelina
X-Spam-Level: 
Received: from [128.143.193.79] (d-128-193-79.bootp.Virginia.EDU [128.143.193.79])
	by ehatchersolutions.com (Postfix) with ESMTP id 8744530EFC17
	for <java-user@lucene.apache.org>; Tue, 16 Jan 2007 15:47:54 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <8398063.post@talk.nabble.com>
References: <8398063.post@talk.nabble.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <10AC619A-7800-4160-B834-4CC95A84FE36@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Sorting using Lucene search query syntax
Date: Tue, 16 Jan 2007 15:47:48 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.6 required=5.0 tests=BAYES_00 autolearn=ham 
	version=3.1.1


On Jan 16, 2007, at 3:22 PM, moraleslos wrote:
> Is it possible to specify a sort on a field using standard Lucene  
> search
> query syntax?  I was not able to find it in the query doc so I  
> assume not
> but I would like to make sure before going on to use the API.   
> Thanks in
> advance!

No, the QueryParser does not support any sort syntax.  QueryParser is  
purely for the Query creation.

Look at how Solr does it, and perhaps borrow their idea:

	<http://wiki.apache.org/solr/StandardRequestHandler>  (the 'q' field  
details)

Erik



	

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25531-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 16 22:54:24 2007
Return-Path: <java-user-return-25531-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63479 invoked from network); 16 Jan 2007 22:54:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Jan 2007 22:54:23 -0000
Received: (qmail 44111 invoked by uid 500); 16 Jan 2007 22:54:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44066 invoked by uid 500); 16 Jan 2007 22:54:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44055 invoked by uid 99); 16 Jan 2007 22:54:22 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Jan 2007 14:54:22 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [66.9.58.34] (HELO infsrv00.InfinityInfo.com) (66.9.58.34)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Jan 2007 14:54:12 -0800
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Another MultiFieldQueryParser question...
Date: Tue, 16 Jan 2007 17:54:23 -0500
Message-ID: <89ACF43E70DC0C4B812FEA71B98CE2EE288362@infsrv00.InfinityInfo.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Another MultiFieldQueryParser question...
Thread-Index: Acc5Qrxax1G02kIRSLqqcNbbmtnMkwAdfDpA
From: "Jiho Han" <jhan@InfinityInfo.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks for the information.

After checking out the query using ToString(), I did not see anything
unusual really.
But I noticed that the search result was a miss only for certain field
combinations.  And eventually it led me to the conclusion that the
search was not returning results where the fields weren't tokenized.  So
searching through the mailing list archive, I found some information and
I successfully used PerFieldAnalyzerWrapper and KeywordAnalyzer to
return correct results.

One question I have is though, what the difference between TOKENIZED vs.
UNTOKENIZED is.  What really confuses me is that I have a numeric field
that is untokenized and that does not require the wrapper.

Jiho

-----Original Message-----
From: Doron Cohen [mailto:DORONC@il.ibm.com]=20
Sent: Tuesday, January 16, 2007 2:46 AM
To: java-user@lucene.apache.org
Subject: Re: Another MultiFieldQueryParser question...

"Jiho Han" <jhan@InfinityInfo.com> wrote on 15/01/2007 10:50:14:

> I looked through the archive a bit and found some Q & A's regarding=20
> this but I didn't see anything definitive so I thought I'd ask
again...
>
> Basically, I have a web page that can search through a database table=20
> across multiple servers.
> So imagine that there are 100 different databases spread across a=20
> number of servers but the schema is same.
> I created an index with fields specific to each row in a particular=20
> table such as NAME, TYPE, COMPANY, etc. in addition to SERVER,=20
> DATABASE so I can capture where they are from.
>
> Ultimately, what I want is a single HTML input field that can capture=20
> a query expression and instantiate a searcher and return a result set.
> This querystring should be in any number of forms:
>
> Ex)
> John Doe ABC Company (which would search for each word OR'ed in all of

> the fields) "John Doe" And "ABC Company" (which would search for "John

> Doe" AND'ed with "ABC Company" in all of the fields) NAME:"John Doe"=20
> COMPANY:"ABC Company" (which would search for results where either=20
> NAME contains "John Doe" OR COMPANY contains "ABC Company") NAME:"John

> Doe" And COMPANY:"ABC Company" (which would search in each field but=20
> must match both fields)
> +NAME:"John Doe" +COMPANY:"ABC Company" (which I understand is same as
> the previous line - if not please correct me)
>
> So I am wondering if a single instance of Query and=20
> MultiFieldQueryParser can do this.  Do I need any other special=20
> processing?
>
> Here's what I have right now (C#):
>
>         string[] searchFields =3D new string[] {
>             "SERVER", "DATABASE", "NAME", "COMPANY", "TYPE"
>         };
>
>         MultiFieldQueryParser parser =3D new=20
> MultiFieldQueryParser(searchFields, new StandardAnalyzer());
>         parser.SetDefaultOperator(QueryParser.Operator.OR);
>         Query query =3D parser.Parse(querystring);
>
> Then I pass 'query' into MultiSearcher.  Well, it's not returning the=20
> results as I expect.

How is it different from what you expect?
One thing to fix is: change And to AND
If still results seem wrong try printing the query (toString()) - is
that as you expect?

Doron

> Can some show me what I need to change?
> Thanks
>
> Jiho Han
> Senior Software Engineer
> Infinity Info Systems
> The Sales Technology Experts
> Tel: 212.563.4400 x6375
> Fax: 212.760.0540
> jhan@infinityinfo.com
> www.infinityinfo.com <http://www.infinityinfo.com/>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25532-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 17 00:38:35 2007
Return-Path: <java-user-return-25532-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86134 invoked from network); 17 Jan 2007 00:38:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Jan 2007 00:38:35 -0000
Received: (qmail 46852 invoked by uid 500); 17 Jan 2007 00:38:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46814 invoked by uid 500); 17 Jan 2007 00:38:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46800 invoked by uid 99); 17 Jan 2007 00:38:36 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Jan 2007 16:38:36 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Jan 2007 16:38:24 -0800
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1H6yoW-0004hV-Ev
	for java-user@lucene.apache.org; Tue, 16 Jan 2007 16:38:04 -0800
Message-ID: <8402496.post@talk.nabble.com>
Date: Tue, 16 Jan 2007 16:38:04 -0800 (PST)
From: silegav_k <kotsonis.v@gmail.com>
To: java-user@lucene.apache.org
Subject: only one search result
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: kotsonis.v@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hi!
I am quite new to lucene, so forgive me if I cannot see something obvious.

I have the following code:

<----------------------------------------------------------Code Start
------------------------------------------------------------>

  IndexReader reader = IndexReader.open(index);
        Searcher searcher = new IndexSearcher(reader);

       //Custom Analyzer...I think it works quite good. It performs stemming
and stopwords removal
        ClirAnalyzer analyzer=new ClirAnalyzer();

        QueryParser parser = new QueryParser(field, analyzer);

        Query query = parser.parse(querytext);
        
        Hits hits = searcher.search(query);

 <--------------------------------------------------------------- Code
End------------------------------------------------------------------------->

My documents are parts of a dictionary and are consisted of 2 fields:
English, Greek e.g.
"political correct" - "Greek translation"

In the dictionary I have repeated word e.g.
"political system' - "Greek translation"
"political' - "Greek translation"

When I Index the dictionary I use for each field with the following:

(new Field("english",text,Field.Store.YES,Field.Index.TOKENIZED)

The problem is that I cannot get more than 1 results. For example I enter as
search term the word "political" and I get a Hits object with length=1,
while it is obvious that I have more results with various similarity scores.

What can be happening?
-- 
View this message in context: http://www.nabble.com/only-one-search-result-tf3024628.html#a8402496
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25533-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 17 01:01:31 2007
Return-Path: <java-user-return-25533-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90483 invoked from network); 17 Jan 2007 01:01:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Jan 2007 01:01:31 -0000
Received: (qmail 63738 invoked by uid 500); 17 Jan 2007 01:01:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63711 invoked by uid 500); 17 Jan 2007 01:01:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63700 invoked by uid 99); 17 Jan 2007 01:01:31 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Jan 2007 17:01:31 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 66.249.92.169 as permitted sender)
Received: from [66.249.92.169] (HELO ug-out-1314.google.com) (66.249.92.169)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Jan 2007 17:01:22 -0800
Received: by ug-out-1314.google.com with SMTP id k40so1825113ugc
        for <java-user@lucene.apache.org>; Tue, 16 Jan 2007 17:01:00 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=cih0DpRYFhgQmMqt1S8r3akQPzVcCRpnu9GwrcO1EDY9V0Lrxf7ndo2wscfruzMnxKrYju82epjLlWI4cbCkXoMZ3x3TzXcZsryxqq7SQOKQ2CKGVftzmAsv5IalU4ZjCtnMgAC4q5u1jWJETCO5JLXH2/C0EHtgje7m4oLU8N8=
Received: by 10.82.118.2 with SMTP id q2mr1404375buc.1168995659988;
        Tue, 16 Jan 2007 17:00:59 -0800 (PST)
Received: by 10.82.162.9 with HTTP; Tue, 16 Jan 2007 17:00:59 -0800 (PST)
Message-ID: <359a92830701161700n30e28a32t241c0d0662c6b77a@mail.gmail.com>
Date: Tue, 16 Jan 2007 20:00:59 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Another MultiFieldQueryParser question...
In-Reply-To: <89ACF43E70DC0C4B812FEA71B98CE2EE288362@infsrv00.InfinityInfo.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_110096_8189915.1168995659869"
References: <89ACF43E70DC0C4B812FEA71B98CE2EE288362@infsrv00.InfinityInfo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_110096_8189915.1168995659869
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

UN_TOKENIZED fields are indexed "as is", without going through an analyzer.
What that means is....
1> no casing is done.
2> multi-word values are stored just like they are put in. So indexing
"wordone wordtwo" results in exactly one token being indexed... you guessed
it, "wordone wordtwo". Which means that searching for "wordone" will NOT
result in a hit. DItto for hyphens, punctuation, etc (although I'd check out
my punctuation claim <G>).

when you store a field TOKENIZED, the input stream is put through whatever
analyzer you specified and the resulting tokens are indexed. So, depending
on the tokenizer the analyzer uses, you'll index a varying number of
strings.

>From the javadoc <<<Index the field's value without using an Analyzer, so it
can be searched. As no analyzer is used the value will be stored as a single
term. This is useful for unique Ids like product numbers.>>>

If you haven't, I'd strongly recommend getting a copy of Luke (google lucene
luke) and use it to examine your index. I've found it quite useful for
getting a handle on similar questions....

Best
Erick

On 1/16/07, Jiho Han <jhan@infinityinfo.com> wrote:
>
> Thanks for the information.
>
> After checking out the query using ToString(), I did not see anything
> unusual really.
> But I noticed that the search result was a miss only for certain field
> combinations.  And eventually it led me to the conclusion that the
> search was not returning results where the fields weren't tokenized.  So
> searching through the mailing list archive, I found some information and
> I successfully used PerFieldAnalyzerWrapper and KeywordAnalyzer to
> return correct results.
>
> One question I have is though, what the difference between TOKENIZED vs.
> UNTOKENIZED is.  What really confuses me is that I have a numeric field
> that is untokenized and that does not require the wrapper.
>
> Jiho
>
> -----Original Message-----
> From: Doron Cohen [mailto:DORONC@il.ibm.com]
> Sent: Tuesday, January 16, 2007 2:46 AM
> To: java-user@lucene.apache.org
> Subject: Re: Another MultiFieldQueryParser question...
>
> "Jiho Han" <jhan@InfinityInfo.com> wrote on 15/01/2007 10:50:14:
>
> > I looked through the archive a bit and found some Q & A's regarding
> > this but I didn't see anything definitive so I thought I'd ask
> again...
> >
> > Basically, I have a web page that can search through a database table
> > across multiple servers.
> > So imagine that there are 100 different databases spread across a
> > number of servers but the schema is same.
> > I created an index with fields specific to each row in a particular
> > table such as NAME, TYPE, COMPANY, etc. in addition to SERVER,
> > DATABASE so I can capture where they are from.
> >
> > Ultimately, what I want is a single HTML input field that can capture
> > a query expression and instantiate a searcher and return a result set.
> > This querystring should be in any number of forms:
> >
> > Ex)
> > John Doe ABC Company (which would search for each word OR'ed in all of
>
> > the fields) "John Doe" And "ABC Company" (which would search for "John
>
> > Doe" AND'ed with "ABC Company" in all of the fields) NAME:"John Doe"
> > COMPANY:"ABC Company" (which would search for results where either
> > NAME contains "John Doe" OR COMPANY contains "ABC Company") NAME:"John
>
> > Doe" And COMPANY:"ABC Company" (which would search in each field but
> > must match both fields)
> > +NAME:"John Doe" +COMPANY:"ABC Company" (which I understand is same as
> > the previous line - if not please correct me)
> >
> > So I am wondering if a single instance of Query and
> > MultiFieldQueryParser can do this.  Do I need any other special
> > processing?
> >
> > Here's what I have right now (C#):
> >
> >         string[] searchFields = new string[] {
> >             "SERVER", "DATABASE", "NAME", "COMPANY", "TYPE"
> >         };
> >
> >         MultiFieldQueryParser parser = new
> > MultiFieldQueryParser(searchFields, new StandardAnalyzer());
> >         parser.SetDefaultOperator(QueryParser.Operator.OR);
> >         Query query = parser.Parse(querystring);
> >
> > Then I pass 'query' into MultiSearcher.  Well, it's not returning the
> > results as I expect.
>
> How is it different from what you expect?
> One thing to fix is: change And to AND
> If still results seem wrong try printing the query (toString()) - is
> that as you expect?
>
> Doron
>
> > Can some show me what I need to change?
> > Thanks
> >
> > Jiho Han
> > Senior Software Engineer
> > Infinity Info Systems
> > The Sales Technology Experts
> > Tel: 212.563.4400 x6375
> > Fax: 212.760.0540
> > jhan@infinityinfo.com
> > www.infinityinfo.com <http://www.infinityinfo.com/>
> >
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_110096_8189915.1168995659869--

From java-user-return-25534-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 17 01:08:14 2007
Return-Path: <java-user-return-25534-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91476 invoked from network); 17 Jan 2007 01:08:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Jan 2007 01:08:13 -0000
Received: (qmail 69896 invoked by uid 500); 17 Jan 2007 01:08:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69856 invoked by uid 500); 17 Jan 2007 01:08:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69845 invoked by uid 99); 17 Jan 2007 01:08:14 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Jan 2007 17:08:14 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=RCVD_IN_BL_SPAMCOP_NET
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [209.191.86.107] (HELO web82212.mail.mud.yahoo.com) (209.191.86.107)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 16 Jan 2007 17:08:03 -0800
Received: (qmail 72851 invoked by uid 60001); 17 Jan 2007 01:07:42 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=ps+0WBo5kVMUcRhxdxGg34u4Pg++eAbN34s5xxFYfJjGURmWrlGxA2hm104S5ORMG4oRE9SZKDJVlOgwOst7pp7DCV+G0IneVQG35/Af5yS05hSFF9P385PBxvKU3eCZKebCdgBGuQoatJVUxw950Dy+T+NKWCBUHIB6RHLHqp8=  ;
Message-ID: <20070117010742.72849.qmail@web82212.mail.mud.yahoo.com>
Received: from [207.126.230.225] by web82212.mail.mud.yahoo.com via HTTP; Tue, 16 Jan 2007 17:07:42 PST
Date: Tue, 16 Jan 2007 17:07:42 -0800 (PST)
From: John Song <delphi329@yahoo.com>
Subject: rangequery not tokenizer
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=ascii
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

It seems that range query is not going through tokenization process.  E.g.:=
 I have a field call "iso" which contains the photographic iso number such =
as 100, 200, 400, ...  I have a special tokenizer that convert the integer =
using lucene's NumberTools.longToString.  If I search "iso:100" everything =
is fine.  However, "iso:[100 To 400]" returns no result.  I found out that =
the analyzer's tokenStream function is not called in the rangequery.  Is th=
is a bug?=0A=0Ajian=0A=0A=0A=0A____________________________________________=
______=0ADo You Yahoo!?=0ATired of spam?  Yahoo! Mail has the best spam pro=
tection around =0Ahttp://mail.yahoo.com 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25535-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 17 01:11:09 2007
Return-Path: <java-user-return-25535-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92084 invoked from network); 17 Jan 2007 01:11:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Jan 2007 01:11:08 -0000
Received: (qmail 73499 invoked by uid 500); 17 Jan 2007 01:11:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73470 invoked by uid 500); 17 Jan 2007 01:11:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73458 invoked by uid 99); 17 Jan 2007 01:11:08 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Jan 2007 17:11:08 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 64.233.182.184 as permitted sender)
Received: from [64.233.182.184] (HELO nf-out-0910.google.com) (64.233.182.184)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Jan 2007 17:10:59 -0800
Received: by nf-out-0910.google.com with SMTP id a27so44251nfc
        for <java-user@lucene.apache.org>; Tue, 16 Jan 2007 17:10:38 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=bTjCVgit1lorxv+/BOMPajObg96ft4gjtZaJvYE7vWxBL+F1sOZ3Zxan6o6Ing21cYG5YQPocgnHG1VtefqqDrSdTUhUoTgqybWDrKXhjwaRTW0VYOewoTUpfHwAAE5Wv5l7X8Ek424L6ymdK8b1J52zGrbS7rTU2vTLchAue28=
Received: by 10.82.135.13 with SMTP id i13mr1402329bud.1168996237851;
        Tue, 16 Jan 2007 17:10:37 -0800 (PST)
Received: by 10.82.162.9 with HTTP; Tue, 16 Jan 2007 17:10:37 -0800 (PST)
Message-ID: <359a92830701161710j37baf6acube4077dd5c920e8b@mail.gmail.com>
Date: Tue, 16 Jan 2007 20:10:37 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: only one search result
In-Reply-To: <8402496.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_110292_22193611.1168996237152"
References: <8402496.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_110292_22193611.1168996237152
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

What analyzer are you using when you *index*? Just as the analyzer you use
when you query breaks up the query string, the analyzer you use when you
index breaks up the indexing stream. You can easily get unexpected results
when you use one analyzer for indexing and another for parsing your query.

I'd recommend a couple of things.

1> just use the StandardAnalyzer first. When you start getting expected
results, substitute in your custom analyzer. That way you can deal with one
new thing at a time.

2> get a copy of Luke (google lucene luke). It lets you examine your index
and see if the things you *think* are in the index actually *are*. It also
lets you submit queries using various analyzers and see what is produced for
queries. I don't know if you can plug in your own custom one though....

Whenever I have this kind of problem, it almost always turns out to be an
issue with analyzers not doing what I *think* they're doing, or using the
wrong analyzer when indexing or searching or.....

By the way, you can easily use different analyzers on different fields, See
PerFieldAnalyzerWrapper.

Finally, the Snowball analyzer also does stemming, and I'd always prefer a
stock analyzer to a custom one if it does what I want. You might want to
take a look at it if you haven't already.....

Hope this helps!
Erick

On 1/16/07, silegav_k <kotsonis.v@gmail.com> wrote:
>
>
> Hi!
> I am quite new to lucene, so forgive me if I cannot see something obvious.
>
> I have the following code:
>
> <----------------------------------------------------------Code Start
> ------------------------------------------------------------>
>
>   IndexReader reader = IndexReader.open(index);
>         Searcher searcher = new IndexSearcher(reader);
>
>        //Custom Analyzer...I think it works quite good. It performs
> stemming
> and stopwords removal
>         ClirAnalyzer analyzer=new ClirAnalyzer();
>
>         QueryParser parser = new QueryParser(field, analyzer);
>
>         Query query = parser.parse(querytext);
>
>         Hits hits = searcher.search(query);
>
> <--------------------------------------------------------------- Code
>
> End------------------------------------------------------------------------->
>
> My documents are parts of a dictionary and are consisted of 2 fields:
> English, Greek e.g.
> "political correct" - "Greek translation"
>
> In the dictionary I have repeated word e.g.
> "political system' - "Greek translation"
> "political' - "Greek translation"
>
> When I Index the dictionary I use for each field with the following:
>
> (new Field("english",text,Field.Store.YES,Field.Index.TOKENIZED)
>
> The problem is that I cannot get more than 1 results. For example I enter
> as
> search term the word "political" and I get a Hits object with length=1,
> while it is obvious that I have more results with various similarity
> scores.
>
> What can be happening?
> --
> View this message in context:
> http://www.nabble.com/only-one-search-result-tf3024628.html#a8402496
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_110292_22193611.1168996237152--

From java-user-return-25536-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 17 07:51:41 2007
Return-Path: <java-user-return-25536-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70898 invoked from network); 17 Jan 2007 07:51:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Jan 2007 07:51:40 -0000
Received: (qmail 60860 invoked by uid 500); 17 Jan 2007 07:51:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60826 invoked by uid 500); 17 Jan 2007 07:51:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60815 invoked by uid 99); 17 Jan 2007 07:51:38 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Jan 2007 23:51:38 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [132.68.238.33] (HELO mailgw2.technion.ac.il) (132.68.238.33)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Jan 2007 23:51:27 -0800
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mailgw2.technion.ac.il (Postfix) with ESMTP id 90F4E390243
	for <java-user@lucene.apache.org>; Wed, 17 Jan 2007 09:51:04 +0200 (IST)
X-Virus-Scanned: by amavisd-new at technion.ac.il
Received: from mailgw2.technion.ac.il ([127.0.0.1])
	by localhost (mailgw2.technion.ac.il [127.0.0.1]) (amavisd-new, port 10024)
	with LMTP id siV-GxApYsfk for <java-user@lucene.apache.org>;
	Wed, 17 Jan 2007 09:51:04 +0200 (IST)
Received: from fermat.math.technion.ac.il (fermat.math.technion.ac.il [132.68.115.6])
	by mailgw2.technion.ac.il (Postfix) with ESMTP id 3C3553902A7
	for <java-user@lucene.apache.org>; Wed, 17 Jan 2007 09:51:04 +0200 (IST)
Received: from fermat.math.technion.ac.il (localhost [127.0.0.1])
	by fermat.math.technion.ac.il (8.12.10/8.12.10) with ESMTP id l0H7k3r2024900
	for <java-user@lucene.apache.org>; Wed, 17 Jan 2007 09:46:03 +0200 (IST)
Received: (from nyh@localhost)
	by fermat.math.technion.ac.il (8.12.10/8.12.10/Submit) id l0H7k1fS024899
	for java-user@lucene.apache.org; Wed, 17 Jan 2007 09:46:01 +0200 (IST)
X-Authentication-Warning: fermat.math.technion.ac.il: nyh set sender to nyh@math.technion.ac.il using -f
Date: Wed, 17 Jan 2007 09:46:01 +0200
From: "Nadav Har'El" <nyh@math.technion.ac.il>
To: java-user@lucene.apache.org
Subject: Re: Websphere and Dark Matter
Message-ID: <20070117074601.GA23522@fermat.math.technion.ac.il>
References: <45ACF734.2030508@i-nexus.com> <45AD0005.40405@scalix.com> <45AD0816.2080201@i-nexus.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
In-Reply-To: <45AD0816.2080201@i-nexus.com>
User-Agent: Mutt/1.4.2.2i
Hebrew-Date: 27 Tevet 5767
X-Virus-Checked: Checked by ClamAV on apache.org

On Tue, Jan 16, 2007, Rollo du Pre wrote about "Re: Websphere and Dark Matter":
> I was hoping it would, yes. Does websphere not release memory back to 
> the OS when it not longer needs it? I'm concerned that if the memory 
> spiked for some reason (indexing a large document) then that would 
> hamper the rest of the OS because it'd hold on to far more memory than 
> is needed.

This is a well known, may I say infamous, Java issue. Java could, in theory,
easily shrink its heap as soon as it needs less memory, because in Java's GC
model, memory can be moved around so fragmentation is not a problem. But
unfortunately, the JVM's heap rarely does shrink by default: once the JVM's
heap grows, it rarely ever shrinks back.

It turns out that in Sun's JVM (at least in the 1.4 version which I tried),
you can actually control and improve the shrinking behavior. There's an option
"-XX:MaxHeapFreeRatio=" (see [1]) which basically means how much of the Heap
should be free before it is physically shrunk. Another option
"-XX:MinHeapFreeRatio=" specifies how much of the heap to leave free after
the shrinking.

The default values are 70 and 40 respectively, which means that the JVM only
shrinks its memory use after 70% (!!!) of the heap is free, and it only shrinks
to the point that 40% of the heap is still free. A few numbers to put this
waste into perspective: If your JVM's heap grew to 300 MB, and now only
requires 100 MB, it will NOT shrink (because only 66% is free). If later
you need just 90 MB, the heap will finally shrink, but only to 150 MB (so
that 40% still remains free).

One important thing you should note if you decide to lower these percentages,
is that much of the JVM's excellent GC performance relies on its "generation"
approach and the availability of a lot of free heap (so that by the time the
heap is exausted, most of the new stuff in it is already garbage). So to
keep performance - not just minimal memory use - you might want to tune other
GC parameters as well. A good combination I once used is this:

	-XX:NewRatio=2 -XX:MinHeapFreeRatio=20 -XX:MaxHeapFreeRatio=30

But your milage may vary.

[1] http://java.sun.com/javase/technologies/hotspot/vmoptions.jsp

-- 
Nadav Har'El                        |    Wednesday, Jan 17 2007, 27 Tevet 5767
IBM Haifa Research Lab              |-----------------------------------------
                                    |Unix is user friendly - it's just picky
http://nadav.harel.org.il           |about its friends.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25537-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 17 08:29:46 2007
Return-Path: <java-user-return-25537-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 83080 invoked from network); 17 Jan 2007 08:29:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Jan 2007 08:29:45 -0000
Received: (qmail 972 invoked by uid 500); 17 Jan 2007 08:29:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 695 invoked by uid 500); 17 Jan 2007 08:29:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 684 invoked by uid 99); 17 Jan 2007 08:29:45 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Jan 2007 00:29:45 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Jan 2007 00:29:35 -0800
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1H76AU-0006LC-BI
	for java-user@lucene.apache.org; Wed, 17 Jan 2007 00:29:14 -0800
Message-ID: <8406325.post@talk.nabble.com>
Date: Wed, 17 Jan 2007 00:29:14 -0800 (PST)
From: silegav_k <kotsonis.v@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: only one search result
In-Reply-To: <359a92830701161710j37baf6acube4077dd5c920e8b@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: kotsonis.v@gmail.com
References: <8402496.post@talk.nabble.com> <359a92830701161710j37baf6acube4077dd5c920e8b@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


I have used the same analyzer before and had no problems at all. The only
difference is that I used it to search through full documents and not
dictionary-like data. 

I also use the same analyzer in indexing and in searching, so this must not
be the problem.

I just tried the StandardAnalyzer as you correctly guided me but for now the
only thing I got is the following exeption

java.lang.NoSuchMethodError:
org.apache.lucene.analysis.StopFilter.makeStopSet([Ljava/lang/String;)Ljava/util/Set;

The PerFieldAnalyzerWrapper and Luke I think are going to be extremelly
helpfull. I wil check them later when I will have the time. I will try the
snowball anayzer in order to get a proper English Stemmer. Stemming english
words is my other problem. I simply cannot stem english words. But this is
another problem that I postponed for the next stage.

If you come up with an idea of what goes wrong, please post it! 

Thank you!
Vagelis


Erick Erickson wrote:
> 
> What analyzer are you using when you *index*? Just as the analyzer you use
> when you query breaks up the query string, the analyzer you use when you
> index breaks up the indexing stream. You can easily get unexpected results
> when you use one analyzer for indexing and another for parsing your query.
> 
> I'd recommend a couple of things.
> 
> 1> just use the StandardAnalyzer first. When you start getting expected
> results, substitute in your custom analyzer. That way you can deal with
> one
> new thing at a time.
> 
> 2> get a copy of Luke (google lucene luke). It lets you examine your index
> and see if the things you *think* are in the index actually *are*. It also
> lets you submit queries using various analyzers and see what is produced
> for
> queries. I don't know if you can plug in your own custom one though....
> 
> Whenever I have this kind of problem, it almost always turns out to be an
> issue with analyzers not doing what I *think* they're doing, or using the
> wrong analyzer when indexing or searching or.....
> 
> By the way, you can easily use different analyzers on different fields,
> See
> PerFieldAnalyzerWrapper.
> 
> Finally, the Snowball analyzer also does stemming, and I'd always prefer a
> stock analyzer to a custom one if it does what I want. You might want to
> take a look at it if you haven't already.....
> 
> Hope this helps!
> Erick
> 
-- 
View this message in context: http://www.nabble.com/only-one-search-result-tf3024628.html#a8406325
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25538-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 17 08:32:00 2007
Return-Path: <java-user-return-25538-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84526 invoked from network); 17 Jan 2007 08:31:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Jan 2007 08:31:59 -0000
Received: (qmail 4197 invoked by uid 500); 17 Jan 2007 08:31:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4160 invoked by uid 500); 17 Jan 2007 08:31:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4148 invoked by uid 99); 17 Jan 2007 08:31:58 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Jan 2007 00:31:58 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of zhouchengly@gmail.com designates 64.233.182.185 as permitted sender)
Received: from [64.233.182.185] (HELO nf-out-0910.google.com) (64.233.182.185)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Jan 2007 00:31:49 -0800
Received: by nf-out-0910.google.com with SMTP id a27so122315nfc
        for <java-user@lucene.apache.org>; Wed, 17 Jan 2007 00:31:28 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=m8s0Y1J5+mH4HUI2ojp61kQ7evdqVDWEEW5UpNOxhWEGtMLMOi34c5+oj/THfEXcilGICBUaVCK40mxT63TyUW4t8+DN075fci/fR+KvYxsSUTirdG6eiXZoSaF0IExFFQNJYHbkezmp5mhRG9YtrnnzTOOekF1tbAcb5U3ko00=
Received: by 10.82.120.14 with SMTP id s14mr1444513buc.1169022685520;
        Wed, 17 Jan 2007 00:31:25 -0800 (PST)
Received: by 10.82.100.12 with HTTP; Wed, 17 Jan 2007 00:31:25 -0800 (PST)
Message-ID: <c2f9e9030701170031p429f4c6q13367cccd87cde69@mail.gmail.com>
Date: Wed, 17 Jan 2007 16:31:25 +0800
From: David <zhouchengly@gmail.com>
To: java-user@lucene.apache.org
Subject: what's the newest version of "Lucene in Action"
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_175614_12659403.1169022685234"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_175614_12659403.1169022685234
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi all:
    the pdf format "Lucene in Action" I'm reading now is talk about Lucene
1.4,  Is the book updated with Lucene 2.0? I don't have any information
about it.
Appreciate your help

-- 
David

------=_Part_175614_12659403.1169022685234--

From java-user-return-25539-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 17 09:25:37 2007
Return-Path: <java-user-return-25539-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 9367 invoked from network); 17 Jan 2007 09:25:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Jan 2007 09:25:36 -0000
Received: (qmail 70370 invoked by uid 500); 17 Jan 2007 09:25:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70348 invoked by uid 500); 17 Jan 2007 09:25:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70333 invoked by uid 99); 17 Jan 2007 09:25:35 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Jan 2007 01:25:35 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [206.190.38.61] (HELO web50307.mail.yahoo.com) (206.190.38.61)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 17 Jan 2007 01:25:24 -0800
Received: (qmail 32424 invoked by uid 60001); 17 Jan 2007 09:25:02 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=xnPe/jweJKlNvmoAhOkmamBfXNbmCY5Qrod7niUAnfc8lW2kpJ/tLf4JxMR0TOwzg1i9t1Ni7TQiuhK8QZzxnX4mZBMbMJLF4OlybzjSqpOhHfaCinmtmiFw2GeQPoLBdPJEJ9eQAnAC+jlCbtu4KILx05tDKau8LgZapmMM0Qg=;
X-YMail-OSG: a2sWFgAVM1liAAT6AmP5OfOcoAZ5OW4bhded4CW_kfvTAdHJpTJfw0PtO4jy8j4D7YomKsrJT5h6KAdgoQSh0yDE1i0gLVJbh9VGlBoSgWKcUK8psMASjFp9yvutHdZT.8qiy5mDKXB29A4MXHqJmmyKKNVsQuE15dIRV_O2O8SRuRkflPhXxEpOCc3E
Received: from [58.63.152.175] by web50307.mail.yahoo.com via HTTP; Wed, 17 Jan 2007 01:25:02 PST
X-Mailer: YahooMailRC/368.3 YahooMailWebService/0.6.132.7
Date: Wed, 17 Jan 2007 01:25:02 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: what's the newest version of "Lucene in Action"
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable
Message-ID: <765062.31972.qm@web50307.mail.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Lucene in Action (print and ebook/PDF) cover Lucene 1.4.3.  Most of what's =
described in LIA still applies to Lucene 2.0 and even the development versi=
on, although some APIs have changed (the concepts are mostly the same).  Th=
ere will be LIA2, and Erik might send a relevant email in a few hours.=0A=
=0AOtis=0A=0A----- Original Message ----=0AFrom: David <zhouchengly@gmail.c=
om>=0ATo: java-user@lucene.apache.org=0ASent: Wednesday, January 17, 2007 3=
:31:25 AM=0ASubject: what's the newest version of "Lucene in Action"=0A=0AH=
i all:=0A    the pdf format "Lucene in Action" I'm reading now is talk abou=
t Lucene=0A1.4,  Is the book updated with Lucene 2.0? I don't have any info=
rmation=0Aabout it.=0AAppreciate your help=0A=0A-- =0ADavid=0A=0A=0A

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25540-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 17 10:31:32 2007
Return-Path: <java-user-return-25540-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30848 invoked from network); 17 Jan 2007 10:31:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Jan 2007 10:31:30 -0000
Received: (qmail 99094 invoked by uid 500); 17 Jan 2007 10:31:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 99065 invoked by uid 500); 17 Jan 2007 10:31:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 99054 invoked by uid 99); 17 Jan 2007 10:31:30 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Jan 2007 02:31:30 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of zhouchengly@gmail.com designates 66.249.92.174 as permitted sender)
Received: from [66.249.92.174] (HELO ug-out-1314.google.com) (66.249.92.174)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Jan 2007 02:31:21 -0800
Received: by ug-out-1314.google.com with SMTP id k40so1923628ugc
        for <java-user@lucene.apache.org>; Wed, 17 Jan 2007 02:31:00 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=gybs0DcbaZJ8tk9cxJ5jWf6f+qvG+Z0WYSrV1X2dUxvCX+Z47+a2nqe9wIipBSl9E/mFshYxL6QHQqy2IgktSNNnNRi0yzgC7/mkHDydy5yViZvP0d+JlOL9o6+QSc9LZg4s7SzU36krda+MELsmQGoG/AU2rP02Rvb1/JPlo/Y=
Received: by 10.82.116.15 with SMTP id o15mr1488233buc.1169029857873;
        Wed, 17 Jan 2007 02:30:57 -0800 (PST)
Received: by 10.82.100.12 with HTTP; Wed, 17 Jan 2007 02:30:52 -0800 (PST)
Message-ID: <c2f9e9030701170230r5f09c290la73cf8da2362e793@mail.gmail.com>
Date: Wed, 17 Jan 2007 18:30:52 +0800
From: David <zhouchengly@gmail.com>
To: java-user@lucene.apache.org
Subject: confuse of required and prohibited in BooleanQuery
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_177591_17745417.1169029852308"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_177591_17745417.1169029852308
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi all:
    I'm confused by the two argument "required" and "prohibited" in
BooleanQuery function
         public void add(Query query, boolean required, boolean prohibited)
   There are two statement in "Lucene in Action"
   1. Performing an OR query only requires setting the required and
prohibited flags both to false
   2.There are four logical combinations of these flags, but the case where
both are true is an illogical and invalid combination
   but I don't know why, Can anybody explain it to me?

Appreciate your help!
-- 
David

------=_Part_177591_17745417.1169029852308--

From java-user-return-25541-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 17 11:00:46 2007
Return-Path: <java-user-return-25541-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36750 invoked from network); 17 Jan 2007 11:00:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Jan 2007 11:00:45 -0000
Received: (qmail 46518 invoked by uid 500); 17 Jan 2007 11:00:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46485 invoked by uid 500); 17 Jan 2007 11:00:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46474 invoked by uid 99); 17 Jan 2007 11:00:45 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Jan 2007 03:00:45 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [203.199.37.133] (HELO rediff.co.in) (203.199.37.133)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 17 Jan 2007 03:00:36 -0800
Received: (qmail 22583 invoked from network); 17 Jan 2007 10:57:31 -0000
Received: from unknown (HELO bhavin) (172.16.3.213)
  by mailserver with SMTP; 17 Jan 2007 10:57:31 -0000
Message-ID: <003801c73a28$f6fe43f0$d50310ac@bhavin>
Reply-To: "Bhavin Pandya" <bhavinp@rediff.co.in>
From: "Bhavin Pandya" <bhavinp@rediff.co.in>
To: <java-user@lucene.apache.org>
Subject: IndexReader.docFreq
Date: Wed, 17 Jan 2007 16:46:38 +0530
Organization: rediff.com
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_0035_01C73A57.0EBF6AE0"
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.2180
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2180
X-Virus-Checked: Checked by ClamAV on apache.org

------=_NextPart_000_0035_01C73A57.0EBF6AE0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

Hi,

I am confused using IndexReader.docFreq...

I am using lucene 1.9 ....my code snippet is,


int noofdoc =3D mreader.docFreq(new Term("TITLE","friends"));

where mreader is MultiReader...

few doc from index which has TITLE likes...

friends in usa
girl friends
boy friends

but "noofdoc" is showing zero.......

Any pointer....

- Bhavin pandya

------=_NextPart_000_0035_01C73A57.0EBF6AE0--


From java-user-return-25542-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 17 11:06:09 2007
Return-Path: <java-user-return-25542-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38028 invoked from network); 17 Jan 2007 11:06:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Jan 2007 11:06:08 -0000
Received: (qmail 55230 invoked by uid 500); 17 Jan 2007 11:06:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55091 invoked by uid 500); 17 Jan 2007 11:06:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55080 invoked by uid 99); 17 Jan 2007 11:06:06 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Jan 2007 03:06:06 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [206.190.38.60] (HELO web50306.mail.yahoo.com) (206.190.38.60)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 17 Jan 2007 03:05:53 -0800
Received: (qmail 85036 invoked by uid 60001); 17 Jan 2007 11:05:31 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=nAH/pctYgULM4RlRKp6tIHv6ANtf/rEE0gEJ0SghV+PI1seEQr9R6mUJn/4CoaiJ+gSGGaV1A24ApR6LucBNOJ5n9tCxiXl6IG/yfxE9jurFJWO5GdFudgSg5mcP5pU5nIqxCgk2tgjICIuR7p5Z29i3HD5QeR6Vf2sOVzc81LE=;
X-YMail-OSG: 6zYDFN4VM1lp19WpHB1YtKJDiBSQsxfjqZQF_itdR6Nl.n1z6yG2R40QUgd.FersaOENQW2Y27nGrpOpKGR88O4sYABBPldinqnS.x5DEyde2Kjto3q3_RAIdADcne_KGaYx3CDg08Rx9xg-
Received: from [58.63.152.175] by web50306.mail.yahoo.com via HTTP; Wed, 17 Jan 2007 03:05:31 PST
X-Mailer: YahooMailRC/368.3 YahooMailWebService/0.6.132.7
Date: Wed, 17 Jan 2007 03:05:31 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: IndexReader.docFreq
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable
Message-ID: <166364.33459.qm@web50306.mail.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Random guess:=0A=0AYou are using an analyzer that stored "friend" (or some =
other stem), and not "friends", so term "friends" doesn't really exist in y=
our inex - it's frequency is zero.=0A=0AOtis=0A=0A----- Original Message --=
--=0AFrom: Bhavin Pandya <bhavinp@rediff.co.in>=0ATo: java-user@lucene.apac=
he.org=0ASent: Wednesday, January 17, 2007 6:16:38 AM=0ASubject: IndexReade=
r.docFreq=0A=0AHi,=0A=0AI am confused using IndexReader.docFreq...=0A=0AI a=
m using lucene 1.9 ....my code snippet is,=0A=0A=0Aint noofdoc =3D mreader.=
docFreq(new Term("TITLE","friends"));=0A=0Awhere mreader is MultiReader...=
=0A=0Afew doc from index which has TITLE likes...=0A=0Afriends in usa=0Agir=
l friends=0Aboy friends=0A=0Abut "noofdoc" is showing zero.......=0A=0AAny =
pointer....=0A=0A- Bhavin pandya=0A=0A=0A

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25543-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 17 11:14:53 2007
Return-Path: <java-user-return-25543-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40314 invoked from network); 17 Jan 2007 11:14:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Jan 2007 11:14:52 -0000
Received: (qmail 66608 invoked by uid 500); 17 Jan 2007 11:14:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66574 invoked by uid 500); 17 Jan 2007 11:14:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66563 invoked by uid 99); 17 Jan 2007 11:14:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Jan 2007 03:14:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [203.199.37.133] (HELO rediff.co.in) (203.199.37.133)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 17 Jan 2007 03:14:42 -0800
Received: (qmail 2044 invoked from network); 17 Jan 2007 11:11:38 -0000
Received: from unknown (HELO bhavin) (172.16.3.213)
  by mailserver with SMTP; 17 Jan 2007 11:11:38 -0000
Message-ID: <004601c73a2a$f00cb2f0$d50310ac@bhavin>
Reply-To: "Bhavin Pandya" <bhavinp@rediff.co.in>
From: "Bhavin Pandya" <bhavinp@rediff.co.in>
To: <java-user@lucene.apache.org>
References: <166364.33459.qm@web50306.mail.yahoo.com>
Subject: Re: IndexReader.docFreq
Date: Wed, 17 Jan 2007 17:00:46 +0530
Organization: rediff.com
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="iso-8859-1";
	reply-type=original
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.2180
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2180
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Otis,

Thanks for your prompt reply...

But its happening for all search strings...not only for friends...
If i fire "friend" or "boy" then also its not showing any results while it 
has...

Is it something like that docFreq is checking for only Exact match...

- Bhavin

----- Original Message ----- 
From: "Otis Gospodnetic" <otis_gospodnetic@yahoo.com>
To: <java-user@lucene.apache.org>
Sent: Wednesday, January 17, 2007 4:35 PM
Subject: Re: IndexReader.docFreq


Random guess:

You are using an analyzer that stored "friend" (or some other stem), and not 
"friends", so term "friends" doesn't really exist in your inex - it's 
frequency is zero.

Otis

----- Original Message ----
From: Bhavin Pandya <bhavinp@rediff.co.in>
To: java-user@lucene.apache.org
Sent: Wednesday, January 17, 2007 6:16:38 AM
Subject: IndexReader.docFreq

Hi,

I am confused using IndexReader.docFreq...

I am using lucene 1.9 ....my code snippet is,


int noofdoc = mreader.docFreq(new Term("TITLE","friends"));

where mreader is MultiReader...

few doc from index which has TITLE likes...

friends in usa
girl friends
boy friends

but "noofdoc" is showing zero.......

Any pointer....

- Bhavin pandya




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25544-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 17 12:59:11 2007
Return-Path: <java-user-return-25544-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82735 invoked from network); 17 Jan 2007 12:59:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Jan 2007 12:59:10 -0000
Received: (qmail 11957 invoked by uid 500); 17 Jan 2007 12:59:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11834 invoked by uid 500); 17 Jan 2007 12:59:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11810 invoked by uid 99); 17 Jan 2007 12:59:02 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Jan 2007 04:59:02 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [206.190.39.215] (HELO web50313.mail.yahoo.com) (206.190.39.215)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 17 Jan 2007 04:58:49 -0800
Received: (qmail 31512 invoked by uid 60001); 17 Jan 2007 12:58:28 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=zrAw8g2empdHyyUPjSXpO1GbMPPbgnVAHYn6gYGeRzkeY9b07/4zpD6KV5PveLGB+clMzeWzWsj2X+Objc03wZm/IXmMDEGSn1BT/bOcn1Lyc05pzNulaXUwoipFYcv8tkYZj+5C/xkm5JHOpz4Ppl8dnS9dDro5zL3rMt7108M=;
X-YMail-OSG: 2kTdj20VM1kaRibLn8nImoXyRpNwmcbe.sK5Sh5KnsQsTwOFj8._M..2hYklnIWSMSLsCafExQkKbUjU6nSna9na_vchuTYydrlasPYHRO3pw_LPZIj4GAShAtjl1MQSfDHwM_Rf6Q4e8Lc-
Received: from [58.63.152.175] by web50313.mail.yahoo.com via HTTP; Wed, 17 Jan 2007 04:58:28 PST
X-Mailer: YahooMailRC/368.3 YahooMailWebService/0.6.132.7
Date: Wed, 17 Jan 2007 04:58:28 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: IndexReader.docFreq
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable
Message-ID: <586147.31145.qm@web50313.mail.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Use Luke, Bhavin, use Luke.  Yes, that's looking for the exact match.  You =
are not performing a search and you are not analyzing that term you are loo=
king for in the index.=0AOtis=0A=0A----- Original Message ----=0AFrom: Bhav=
in Pandya <bhavinp@rediff.co.in>=0ATo: java-user@lucene.apache.org=0ASent: =
Wednesday, January 17, 2007 6:30:46 AM=0ASubject: Re: IndexReader.docFreq=
=0A=0AHi Otis,=0A=0AThanks for your prompt reply...=0A=0ABut its happening =
for all search strings...not only for friends...=0AIf i fire "friend" or "b=
oy" then also its not showing any results while it =0Ahas...=0A=0AIs it som=
ething like that docFreq is checking for only Exact match...=0A=0A- Bhavin=
=0A=0A----- Original Message ----- =0AFrom: "Otis Gospodnetic" <otis_gospod=
netic@yahoo.com>=0ATo: <java-user@lucene.apache.org>=0ASent: Wednesday, Jan=
uary 17, 2007 4:35 PM=0ASubject: Re: IndexReader.docFreq=0A=0A=0ARandom gue=
ss:=0A=0AYou are using an analyzer that stored "friend" (or some other stem=
), and not =0A"friends", so term "friends" doesn't really exist in your ine=
x - it's =0Afrequency is zero.=0A=0AOtis=0A=0A----- Original Message ----=
=0AFrom: Bhavin Pandya <bhavinp@rediff.co.in>=0ATo: java-user@lucene.apache=
.org=0ASent: Wednesday, January 17, 2007 6:16:38 AM=0ASubject: IndexReader.=
docFreq=0A=0AHi,=0A=0AI am confused using IndexReader.docFreq...=0A=0AI am =
using lucene 1.9 ....my code snippet is,=0A=0A=0Aint noofdoc =3D mreader.do=
cFreq(new Term("TITLE","friends"));=0A=0Awhere mreader is MultiReader...=0A=
=0Afew doc from index which has TITLE likes...=0A=0Afriends in usa=0Agirl f=
riends=0Aboy friends=0A=0Abut "noofdoc" is showing zero.......=0A=0AAny poi=
nter....=0A=0A- Bhavin pandya=0A=0A=0A=0A=0A-------------------------------=
--------------------------------------=0ATo unsubscribe, e-mail: java-user-=
unsubscribe@lucene.apache.org=0AFor additional commands, e-mail: java-user-=
help@lucene.apache.org=0A=0A=0A--------------------------------------------=
-------------------------=0ATo unsubscribe, e-mail: java-user-unsubscribe@l=
ucene.apache.org=0AFor additional commands, e-mail: java-user-help@lucene.a=
pache.org=0A=0A=0A=0A

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25545-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 17 13:34:05 2007
Return-Path: <java-user-return-25545-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94137 invoked from network); 17 Jan 2007 13:34:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Jan 2007 13:34:04 -0000
Received: (qmail 62006 invoked by uid 500); 17 Jan 2007 13:34:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61356 invoked by uid 500); 17 Jan 2007 13:34:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61345 invoked by uid 99); 17 Jan 2007 13:34:03 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Jan 2007 05:34:03 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [212.144.243.129] (HELO wwk.de) (212.144.243.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Jan 2007 05:33:54 -0800
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C73A3C.14966686"
Subject: Indexing PURE jsp-code
Date: Wed, 17 Jan 2007 14:33:32 +0100
Message-ID: <99585773B6B1BA42BC4FE5DF14BB842F09B56F60@SERV211.wwk-group.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Indexing PURE jsp-code
Thread-Index: Acc6PBR5iLuJF8QCSdSE+8v39ou7tQ==
From: "Keshishian, Arsineh" <ARSINEH.KESHISHIAN@wwk.de>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01C73A3C.14966686
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: quoted-printable

Hi everyone!
=20
I'm trying to index .jsp-pages.
I dont want to index jsp pages that the user would see but the pure jsp
code before translation to html pages.
=20
Is there any way? Can I simply use the htmparser?
=20
Thanks for any help
Arsineh

------_=_NextPart_001_01C73A3C.14966686--



From java-user-return-25546-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 17 13:43:15 2007
Return-Path: <java-user-return-25546-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97499 invoked from network); 17 Jan 2007 13:43:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Jan 2007 13:43:13 -0000
Received: (qmail 77282 invoked by uid 500); 17 Jan 2007 13:43:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77252 invoked by uid 500); 17 Jan 2007 13:43:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77241 invoked by uid 99); 17 Jan 2007 13:43:13 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Jan 2007 05:43:13 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 66.249.92.172 as permitted sender)
Received: from [66.249.92.172] (HELO ug-out-1314.google.com) (66.249.92.172)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Jan 2007 05:43:04 -0800
Received: by ug-out-1314.google.com with SMTP id k40so1961361ugc
        for <java-user@lucene.apache.org>; Wed, 17 Jan 2007 05:42:43 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=r5k7XXSe6QuGbH8rI/jyujd7K5JQHEBdN0FxHVc7ui7SlWTU3agKuR9q405CM4hSgRECH6Z5n/KE8QJTujRP01Ogm0B1ZJuxqP1r9M3S76PinNbODauAh7rjzz4m+HM/xYchqlYO4ePVPcxeSfarviP6nwYaEcZ42RxMEicNe3k=
Received: by 10.82.116.15 with SMTP id o15mr1530096buc.1169041359559;
        Wed, 17 Jan 2007 05:42:39 -0800 (PST)
Received: by 10.82.162.9 with HTTP; Wed, 17 Jan 2007 05:42:38 -0800 (PST)
Message-ID: <359a92830701170542l26d7afaana4d1572ebf92498b@mail.gmail.com>
Date: Wed, 17 Jan 2007 08:42:38 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: only one search result
In-Reply-To: <8406325.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_120598_12564651.1169041358005"
References: <8402496.post@talk.nabble.com>
	 <359a92830701161710j37baf6acube4077dd5c920e8b@mail.gmail.com>
	 <8406325.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_120598_12564651.1169041358005
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I've never had any problems with StandardAnalyzer. Could you perhaps post
the code snippet that causes this? I'm wondering about things like what JVM
you're using, what your classpath looks like, what Lucene version you're
using etc.

Erick

On 1/17/07, silegav_k <kotsonis.v@gmail.com> wrote:
>
>
> I have used the same analyzer before and had no problems at all. The only
> difference is that I used it to search through full documents and not
> dictionary-like data.
>
> I also use the same analyzer in indexing and in searching, so this must
> not
> be the problem.
>
> I just tried the StandardAnalyzer as you correctly guided me but for now
> the
> only thing I got is the following exeption
>
> java.lang.NoSuchMethodError:
> org.apache.lucene.analysis.StopFilter.makeStopSet
> ([Ljava/lang/String;)Ljava/util/Set;
>
> The PerFieldAnalyzerWrapper and Luke I think are going to be extremelly
> helpfull. I wil check them later when I will have the time. I will try the
> snowball anayzer in order to get a proper English Stemmer. Stemming
> english
> words is my other problem. I simply cannot stem english words. But this is
> another problem that I postponed for the next stage.
>
> If you come up with an idea of what goes wrong, please post it!
>
> Thank you!
> Vagelis
>
>
> Erick Erickson wrote:
> >
> > What analyzer are you using when you *index*? Just as the analyzer you
> use
> > when you query breaks up the query string, the analyzer you use when you
> > index breaks up the indexing stream. You can easily get unexpected
> results
> > when you use one analyzer for indexing and another for parsing your
> query.
> >
> > I'd recommend a couple of things.
> >
> > 1> just use the StandardAnalyzer first. When you start getting expected
> > results, substitute in your custom analyzer. That way you can deal with
> > one
> > new thing at a time.
> >
> > 2> get a copy of Luke (google lucene luke). It lets you examine your
> index
> > and see if the things you *think* are in the index actually *are*. It
> also
> > lets you submit queries using various analyzers and see what is produced
> > for
> > queries. I don't know if you can plug in your own custom one though....
> >
> > Whenever I have this kind of problem, it almost always turns out to be
> an
> > issue with analyzers not doing what I *think* they're doing, or using
> the
> > wrong analyzer when indexing or searching or.....
> >
> > By the way, you can easily use different analyzers on different fields,
> > See
> > PerFieldAnalyzerWrapper.
> >
> > Finally, the Snowball analyzer also does stemming, and I'd always prefer
> a
> > stock analyzer to a custom one if it does what I want. You might want to
> > take a look at it if you haven't already.....
> >
> > Hope this helps!
> > Erick
> >
> --
> View this message in context:
> http://www.nabble.com/only-one-search-result-tf3024628.html#a8406325
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_120598_12564651.1169041358005--

From java-user-return-25547-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 17 14:27:02 2007
Return-Path: <java-user-return-25547-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19207 invoked from network); 17 Jan 2007 14:27:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Jan 2007 14:27:02 -0000
Received: (qmail 63076 invoked by uid 500); 17 Jan 2007 14:27:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62772 invoked by uid 500); 17 Jan 2007 14:27:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62761 invoked by uid 99); 17 Jan 2007 14:27:01 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Jan 2007 06:27:01 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of smallbadguy@gmail.com designates 66.249.92.173 as permitted sender)
Received: from [66.249.92.173] (HELO ug-out-1314.google.com) (66.249.92.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Jan 2007 06:26:52 -0800
Received: by ug-out-1314.google.com with SMTP id k40so1971215ugc
        for <java-user@lucene.apache.org>; Wed, 17 Jan 2007 06:26:31 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=gOI2DGldQNBm2QHHu/yhmhi+mOBBZZCxOHbFakv/WDkjYqYmCRpdMq8GeWksoeB/alMp6imgm5AMlGg4y05H1suOOznUevByMpNNyUbF8c+wFX95mrOmdCV1IVJmpRESY+k/b/g7UUCJJbAE8Ja0QgmahoUQi8vTs2XBsS2x0Xc=
Received: by 10.82.182.8 with SMTP id e8mr1537214buf.1169043990276;
        Wed, 17 Jan 2007 06:26:30 -0800 (PST)
Received: by 10.82.174.2 with HTTP; Wed, 17 Jan 2007 06:26:30 -0800 (PST)
Message-ID: <6036f89e0701170626k3941ebdbu5be0251373f99890@mail.gmail.com>
Date: Wed, 17 Jan 2007 22:26:30 +0800
From: "Scott Green" <smallbadguy@gmail.com>
To: java-user@lucene.apache.org
Subject: Fwd: How to index in real time?
In-Reply-To: <6036f89e0701161915g169a1a3fv909c92d17c14d155@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <6036f89e0701161915g169a1a3fv909c92d17c14d155@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

---------- Forwarded message ----------
From: Scott Green <smallbadguy@gmail.com>
Date: Jan 17, 2007 11:15 AM
Subject: How to index in real time?
To: nutch-dev@lucene.apache.org


Hi list,

Firstly, i don't know whether nutch-dev mail list is suitable for this
topic or not. If I post in the wrong place, pls tell me where should I
ask this question. Thanks.

The question is how to index resource in real time in lucene/nutch? This
question is raised from GMail. I don't know what exactly behind GMail,
but it should be built on GFS. When I get one email or send one email
out,  push the "Search Mail" immediately and it always get it. I'll
appreciate if someone will to explain how GMail works.

And any advice to hack Lucene/Nutch/Hadoop to archive this? Thanks

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25548-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 17 15:36:25 2007
Return-Path: <java-user-return-25548-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48251 invoked from network); 17 Jan 2007 15:36:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Jan 2007 15:36:24 -0000
Received: (qmail 41790 invoked by uid 500); 17 Jan 2007 15:36:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41750 invoked by uid 500); 17 Jan 2007 15:36:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41738 invoked by uid 99); 17 Jan 2007 15:36:22 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Jan 2007 07:36:22 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Jan 2007 07:36:12 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id AA49E30EFC18; Wed, 17 Jan 2007 10:35:51 -0500 (EST)
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on javelina
X-Spam-Level: 
Received: from [128.143.193.79] (d-128-193-79.bootp.Virginia.EDU [128.143.193.79])
	by ehatchersolutions.com (Postfix) with ESMTP id D672230EFC17
	for <java-user@lucene.apache.org>; Wed, 17 Jan 2007 10:35:48 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <765062.31972.qm@web50307.mail.yahoo.com>
References: <765062.31972.qm@web50307.mail.yahoo.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <74E4FD61-DB49-43A0-AF55-1913626E3581@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: what's the newest version of "Lucene in Action"
Date: Wed, 17 Jan 2007 10:35:40 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.6 required=5.0 tests=BAYES_00 autolearn=ham 
	version=3.1.1

David,

I was moments away from sending out a status on LIA2.  I posted the  
short and sweet version here:

	<http://www.manning-sandbox.com/thread.jspa?messageID=56559&#56559>

Excerpted: "Yes, we are planning a 2nd edition. The road from LIA1 to  
LIA2 has been a combination of busyness, lazyness, and now its just  
plain pragmatic. Lucene has been undergoing massive changes (for the  
better, if you can imagine that Lucene could actually get better!!!)  
which are still works in progress. Otis and I have decided that it is  
best to wait for at least the next 6 months or so and let Lucene  
stabilize in functionality and we'll shake it out in the 2nd edition.  
Don't hold your breath, except only briefly at times. I can't say  
when for sure, but I'd put money on seeing a new edition before  
2010  :)"

I've posted some other bits about converting the LIA1 codebase to be  
Lucene 2.0 compatible on this list, with a pointer to the thread here:

	<http://www.manning-sandbox.com/thread.jspa?threadID=17404&tstart=0>

All the concepts from LIA1 and the bulk of the API still apply.  Some  
API was changed, and it is a relatively minor adjustment to convert  
to 2.0 style following the instructions indirectly linked to above.

LIA2 will be a fairly massive undertaking, requiring that Otis and I  
both put our lives, wives, and children on hold for a bit.  When  
Lucene is ready for the second edition to begin, we'll do our best to  
jump right in and get to work.

	Erik





On Jan 17, 2007, at 4:25 AM, Otis Gospodnetic wrote:

> Lucene in Action (print and ebook/PDF) cover Lucene 1.4.3.  Most of  
> what's described in LIA still applies to Lucene 2.0 and even the  
> development version, although some APIs have changed (the concepts  
> are mostly the same).  There will be LIA2, and Erik might send a  
> relevant email in a few hours.
>
> Otis
>
> ----- Original Message ----
> From: David <zhouchengly@gmail.com>
> To: java-user@lucene.apache.org
> Sent: Wednesday, January 17, 2007 3:31:25 AM
> Subject: what's the newest version of "Lucene in Action"
>
> Hi all:
>     the pdf format "Lucene in Action" I'm reading now is talk about  
> Lucene
> 1.4,  Is the book updated with Lucene 2.0? I don't have any  
> information
> about it.
> Appreciate your help
>
> -- 
> David
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25549-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 17 17:06:39 2007
Return-Path: <java-user-return-25549-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82342 invoked from network); 17 Jan 2007 17:06:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Jan 2007 17:06:38 -0000
Received: (qmail 32755 invoked by uid 500); 17 Jan 2007 17:06:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32724 invoked by uid 500); 17 Jan 2007 17:06:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32713 invoked by uid 99); 17 Jan 2007 17:06:37 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Jan 2007 09:06:37 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [66.9.58.34] (HELO infsrv00.InfinityInfo.com) (66.9.58.34)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Jan 2007 09:06:27 -0800
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Another MultiFieldQueryParser question...
Date: Wed, 17 Jan 2007 12:06:38 -0500
Message-ID: <89ACF43E70DC0C4B812FEA71B98CE2EE28837E@infsrv00.InfinityInfo.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Another MultiFieldQueryParser question...
Thread-Index: Acc50xLLQw5fh9BzT3OTkc8bjOFIYQAhmquQ
From: "Jiho Han" <jhan@InfinityInfo.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

I'll try Luke.

Something is definitely not right because if your explanation of
UNTOKENIZED is correct - and I believe it is - then my searches using
the exact text with matching casing should have returned results.=20

-----Original Message-----
From: Erick Erickson [mailto:erickerickson@gmail.com]=20
Sent: Tuesday, January 16, 2007 8:01 PM
To: java-user@lucene.apache.org
Subject: Re: Another MultiFieldQueryParser question...

UN_TOKENIZED fields are indexed "as is", without going through an
analyzer.
What that means is....
1> no casing is done.
2> multi-word values are stored just like they are put in. So indexing
"wordone wordtwo" results in exactly one token being indexed... you
guessed it, "wordone wordtwo". Which means that searching for "wordone"
will NOT result in a hit. DItto for hyphens, punctuation, etc (although
I'd check out my punctuation claim <G>).

when you store a field TOKENIZED, the input stream is put through
whatever analyzer you specified and the resulting tokens are indexed.
So, depending on the tokenizer the analyzer uses, you'll index a varying
number of strings.

>From the javadoc <<<Index the field's value without using an Analyzer,
so it can be searched. As no analyzer is used the value will be stored
as a single term. This is useful for unique Ids like product numbers.>>>

If you haven't, I'd strongly recommend getting a copy of Luke (google
lucene
luke) and use it to examine your index. I've found it quite useful for
getting a handle on similar questions....

Best
Erick

On 1/16/07, Jiho Han <jhan@infinityinfo.com> wrote:
>
> Thanks for the information.
>
> After checking out the query using ToString(), I did not see anything=20
> unusual really.
> But I noticed that the search result was a miss only for certain field

> combinations.  And eventually it led me to the conclusion that the=20
> search was not returning results where the fields weren't tokenized. =20
> So searching through the mailing list archive, I found some=20
> information and I successfully used PerFieldAnalyzerWrapper and=20
> KeywordAnalyzer to return correct results.
>
> One question I have is though, what the difference between TOKENIZED
vs.
> UNTOKENIZED is.  What really confuses me is that I have a numeric=20
> field that is untokenized and that does not require the wrapper.
>
> Jiho
>
> -----Original Message-----
> From: Doron Cohen [mailto:DORONC@il.ibm.com]
> Sent: Tuesday, January 16, 2007 2:46 AM
> To: java-user@lucene.apache.org
> Subject: Re: Another MultiFieldQueryParser question...
>
> "Jiho Han" <jhan@InfinityInfo.com> wrote on 15/01/2007 10:50:14:
>
> > I looked through the archive a bit and found some Q & A's regarding=20
> > this but I didn't see anything definitive so I thought I'd ask
> again...
> >
> > Basically, I have a web page that can search through a database=20
> > table across multiple servers.
> > So imagine that there are 100 different databases spread across a=20
> > number of servers but the schema is same.
> > I created an index with fields specific to each row in a particular=20
> > table such as NAME, TYPE, COMPANY, etc. in addition to SERVER,=20
> > DATABASE so I can capture where they are from.
> >
> > Ultimately, what I want is a single HTML input field that can=20
> > capture a query expression and instantiate a searcher and return a
result set.
> > This querystring should be in any number of forms:
> >
> > Ex)
> > John Doe ABC Company (which would search for each word OR'ed in all=20
> > of
>
> > the fields) "John Doe" And "ABC Company" (which would search for=20
> > "John
>
> > Doe" AND'ed with "ABC Company" in all of the fields) NAME:"John Doe"
> > COMPANY:"ABC Company" (which would search for results where either=20
> > NAME contains "John Doe" OR COMPANY contains "ABC Company")=20
> > NAME:"John
>
> > Doe" And COMPANY:"ABC Company" (which would search in each field but

> > must match both fields)
> > +NAME:"John Doe" +COMPANY:"ABC Company" (which I understand is same=20
> > +as
> > the previous line - if not please correct me)
> >
> > So I am wondering if a single instance of Query and=20
> > MultiFieldQueryParser can do this.  Do I need any other special=20
> > processing?
> >
> > Here's what I have right now (C#):
> >
> >         string[] searchFields =3D new string[] {
> >             "SERVER", "DATABASE", "NAME", "COMPANY", "TYPE"
> >         };
> >
> >         MultiFieldQueryParser parser =3D new=20
> > MultiFieldQueryParser(searchFields, new StandardAnalyzer());
> >         parser.SetDefaultOperator(QueryParser.Operator.OR);
> >         Query query =3D parser.Parse(querystring);
> >
> > Then I pass 'query' into MultiSearcher.  Well, it's not returning=20
> > the results as I expect.
>
> How is it different from what you expect?
> One thing to fix is: change And to AND If still results seem wrong try

> printing the query (toString()) - is that as you expect?
>
> Doron
>
> > Can some show me what I need to change?
> > Thanks
> >
> > Jiho Han
> > Senior Software Engineer
> > Infinity Info Systems
> > The Sales Technology Experts
> > Tel: 212.563.4400 x6375
> > Fax: 212.760.0540
> > jhan@infinityinfo.com
> > www.infinityinfo.com <http://www.infinityinfo.com/>
> >
> >
> >
> > --------------------------------------------------------------------
> > - To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25550-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 17 17:58:04 2007
Return-Path: <java-user-return-25550-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4816 invoked from network); 17 Jan 2007 17:57:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Jan 2007 17:57:59 -0000
Received: (qmail 29196 invoked by uid 500); 17 Jan 2007 17:57:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29171 invoked by uid 500); 17 Jan 2007 17:57:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29160 invoked by uid 99); 17 Jan 2007 17:57:57 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Jan 2007 09:57:57 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [66.9.58.34] (HELO infsrv00.InfinityInfo.com) (66.9.58.34)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Jan 2007 09:57:48 -0800
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Another MultiFieldQueryParser question...
Date: Wed, 17 Jan 2007 12:58:01 -0500
Message-ID: <89ACF43E70DC0C4B812FEA71B98CE2EE288390@infsrv00.InfinityInfo.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Another MultiFieldQueryParser question...
Thread-Index: Acc50xLLQw5fh9BzT3OTkc8bjOFIYQAhmquQAAHBfXA=
From: "Jiho Han" <jhan@InfinityInfo.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

After investigating using Luke, I found that the field in question is
indeed being stored as-is.  But the query is lowercasing the query
value.  I guess that's why I needed KeywordAnalyzer for the particular
field.
An alternative approach would have been to store all lowercase values
during indexing, assuming StandardAnalyzer implementation will always
lowercase its query values.

Thanks everyone for your inputs!
Jiho=20

-----Original Message-----
From: Jiho Han [mailto:jhan@InfinityInfo.com]=20
Sent: Wednesday, January 17, 2007 12:07 PM
To: java-user@lucene.apache.org
Subject: RE: Another MultiFieldQueryParser question...

I'll try Luke.

Something is definitely not right because if your explanation of
UNTOKENIZED is correct - and I believe it is - then my searches using
the exact text with matching casing should have returned results.=20

-----Original Message-----
From: Erick Erickson [mailto:erickerickson@gmail.com]
Sent: Tuesday, January 16, 2007 8:01 PM
To: java-user@lucene.apache.org
Subject: Re: Another MultiFieldQueryParser question...

UN_TOKENIZED fields are indexed "as is", without going through an
analyzer.
What that means is....
1> no casing is done.
2> multi-word values are stored just like they are put in. So indexing
"wordone wordtwo" results in exactly one token being indexed... you
guessed it, "wordone wordtwo". Which means that searching for "wordone"
will NOT result in a hit. DItto for hyphens, punctuation, etc (although
I'd check out my punctuation claim <G>).

when you store a field TOKENIZED, the input stream is put through
whatever analyzer you specified and the resulting tokens are indexed.
So, depending on the tokenizer the analyzer uses, you'll index a varying
number of strings.

>From the javadoc <<<Index the field's value without using an Analyzer,
so it can be searched. As no analyzer is used the value will be stored
as a single term. This is useful for unique Ids like product numbers.>>>

If you haven't, I'd strongly recommend getting a copy of Luke (google
lucene
luke) and use it to examine your index. I've found it quite useful for
getting a handle on similar questions....

Best
Erick

On 1/16/07, Jiho Han <jhan@infinityinfo.com> wrote:
>
> Thanks for the information.
>
> After checking out the query using ToString(), I did not see anything=20
> unusual really.
> But I noticed that the search result was a miss only for certain field

> combinations.  And eventually it led me to the conclusion that the=20
> search was not returning results where the fields weren't tokenized.
> So searching through the mailing list archive, I found some=20
> information and I successfully used PerFieldAnalyzerWrapper and=20
> KeywordAnalyzer to return correct results.
>
> One question I have is though, what the difference between TOKENIZED
vs.
> UNTOKENIZED is.  What really confuses me is that I have a numeric=20
> field that is untokenized and that does not require the wrapper.
>
> Jiho
>
> -----Original Message-----
> From: Doron Cohen [mailto:DORONC@il.ibm.com]
> Sent: Tuesday, January 16, 2007 2:46 AM
> To: java-user@lucene.apache.org
> Subject: Re: Another MultiFieldQueryParser question...
>
> "Jiho Han" <jhan@InfinityInfo.com> wrote on 15/01/2007 10:50:14:
>
> > I looked through the archive a bit and found some Q & A's regarding=20
> > this but I didn't see anything definitive so I thought I'd ask
> again...
> >
> > Basically, I have a web page that can search through a database=20
> > table across multiple servers.
> > So imagine that there are 100 different databases spread across a=20
> > number of servers but the schema is same.
> > I created an index with fields specific to each row in a particular=20
> > table such as NAME, TYPE, COMPANY, etc. in addition to SERVER,=20
> > DATABASE so I can capture where they are from.
> >
> > Ultimately, what I want is a single HTML input field that can=20
> > capture a query expression and instantiate a searcher and return a
result set.
> > This querystring should be in any number of forms:
> >
> > Ex)
> > John Doe ABC Company (which would search for each word OR'ed in all=20
> > of
>
> > the fields) "John Doe" And "ABC Company" (which would search for=20
> > "John
>
> > Doe" AND'ed with "ABC Company" in all of the fields) NAME:"John Doe"
> > COMPANY:"ABC Company" (which would search for results where either=20
> > NAME contains "John Doe" OR COMPANY contains "ABC Company")=20
> > NAME:"John
>
> > Doe" And COMPANY:"ABC Company" (which would search in each field but

> > must match both fields)
> > +NAME:"John Doe" +COMPANY:"ABC Company" (which I understand is same=20
> > +as
> > the previous line - if not please correct me)
> >
> > So I am wondering if a single instance of Query and=20
> > MultiFieldQueryParser can do this.  Do I need any other special=20
> > processing?
> >
> > Here's what I have right now (C#):
> >
> >         string[] searchFields =3D new string[] {
> >             "SERVER", "DATABASE", "NAME", "COMPANY", "TYPE"
> >         };
> >
> >         MultiFieldQueryParser parser =3D new=20
> > MultiFieldQueryParser(searchFields, new StandardAnalyzer());
> >         parser.SetDefaultOperator(QueryParser.Operator.OR);
> >         Query query =3D parser.Parse(querystring);
> >
> > Then I pass 'query' into MultiSearcher.  Well, it's not returning=20
> > the results as I expect.
>
> How is it different from what you expect?
> One thing to fix is: change And to AND If still results seem wrong try

> printing the query (toString()) - is that as you expect?
>
> Doron
>
> > Can some show me what I need to change?
> > Thanks
> >
> > Jiho Han
> > Senior Software Engineer
> > Infinity Info Systems
> > The Sales Technology Experts
> > Tel: 212.563.4400 x6375
> > Fax: 212.760.0540
> > jhan@infinityinfo.com
> > www.infinityinfo.com <http://www.infinityinfo.com/>
> >
> >
> >
> > --------------------------------------------------------------------
> > - To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25551-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 17 18:04:28 2007
Return-Path: <java-user-return-25551-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7834 invoked from network); 17 Jan 2007 18:04:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Jan 2007 18:04:27 -0000
Received: (qmail 44996 invoked by uid 500); 17 Jan 2007 18:04:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44957 invoked by uid 500); 17 Jan 2007 18:04:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44946 invoked by uid 99); 17 Jan 2007 18:04:25 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Jan 2007 10:04:25 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Jan 2007 10:04:14 -0800
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1H7F8b-0002HM-PQ
	for java-user@lucene.apache.org; Wed, 17 Jan 2007 10:03:53 -0800
Message-ID: <8415561.post@talk.nabble.com>
Date: Wed, 17 Jan 2007 10:03:53 -0800 (PST)
From: silegav_k <kotsonis.v@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: only one search result
In-Reply-To: <359a92830701170542l26d7afaana4d1572ebf92498b@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: kotsonis.v@gmail.com
References: <8402496.post@talk.nabble.com> <359a92830701161710j37baf6acube4077dd5c920e8b@mail.gmail.com> <8406325.post@talk.nabble.com> <359a92830701170542l26d7afaana4d1572ebf92498b@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


I'll try downloading Lucene again and use the new untouched version.
I have the lucene-core-2.0.0.jar but I think I have made some "changes" in
some of its classes. 
I will download it again and try one step at a time. I will come up with new
questions soon!

Thank you
Vagelis


Erick Erickson wrote:
> 
> I've never had any problems with StandardAnalyzer. Could you perhaps post
> the code snippet that causes this? I'm wondering about things like what
> JVM
> you're using, what your classpath looks like, what Lucene version you're
> using etc.
> 
> Erick
> 
> On 1/17/07, silegav_k <kotsonis.v@gmail.com> wrote:
>>
>>
>> I have used the same analyzer before and had no problems at all. The only
>> difference is that I used it to search through full documents and not
>> dictionary-like data.
>>
>> I also use the same analyzer in indexing and in searching, so this must
>> not
>> be the problem.
>>
>> I just tried the StandardAnalyzer as you correctly guided me but for now
>> the
>> only thing I got is the following exeption
>>
>> java.lang.NoSuchMethodError:
>> org.apache.lucene.analysis.StopFilter.makeStopSet
>> ([Ljava/lang/String;)Ljava/util/Set;
>>
>> The PerFieldAnalyzerWrapper and Luke I think are going to be extremelly
>> helpfull. I wil check them later when I will have the time. I will try
>> the
>> snowball anayzer in order to get a proper English Stemmer. Stemming
>> english
>> words is my other problem. I simply cannot stem english words. But this
>> is
>> another problem that I postponed for the next stage.
>>
>> If you come up with an idea of what goes wrong, please post it!
>>
>> Thank you!
>> Vagelis
>>
>>
>> Erick Erickson wrote:
>> >
>> > What analyzer are you using when you *index*? Just as the analyzer you
>> use
>> > when you query breaks up the query string, the analyzer you use when
>> you
>> > index breaks up the indexing stream. You can easily get unexpected
>> results
>> > when you use one analyzer for indexing and another for parsing your
>> query.
>> >
>> > I'd recommend a couple of things.
>> >
>> > 1> just use the StandardAnalyzer first. When you start getting expected
>> > results, substitute in your custom analyzer. That way you can deal with
>> > one
>> > new thing at a time.
>> >
>> > 2> get a copy of Luke (google lucene luke). It lets you examine your
>> index
>> > and see if the things you *think* are in the index actually *are*. It
>> also
>> > lets you submit queries using various analyzers and see what is
>> produced
>> > for
>> > queries. I don't know if you can plug in your own custom one though....
>> >
>> > Whenever I have this kind of problem, it almost always turns out to be
>> an
>> > issue with analyzers not doing what I *think* they're doing, or using
>> the
>> > wrong analyzer when indexing or searching or.....
>> >
>> > By the way, you can easily use different analyzers on different fields,
>> > See
>> > PerFieldAnalyzerWrapper.
>> >
>> > Finally, the Snowball analyzer also does stemming, and I'd always
>> prefer
>> a
>> > stock analyzer to a custom one if it does what I want. You might want
>> to
>> > take a look at it if you haven't already.....
>> >
>> > Hope this helps!
>> > Erick
>> >
>> --
>> View this message in context:
>> http://www.nabble.com/only-one-search-result-tf3024628.html#a8406325
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
> 
> 

-- 
View this message in context: http://www.nabble.com/only-one-search-result-tf3024628.html#a8415561
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25552-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 17 18:13:53 2007
Return-Path: <java-user-return-25552-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 11600 invoked from network); 17 Jan 2007 18:13:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Jan 2007 18:13:52 -0000
Received: (qmail 62863 invoked by uid 500); 17 Jan 2007 18:13:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62826 invoked by uid 500); 17 Jan 2007 18:13:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62787 invoked by uid 99); 17 Jan 2007 18:13:45 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Jan 2007 10:13:45 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [66.9.58.34] (HELO infsrv00.InfinityInfo.com) (66.9.58.34)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Jan 2007 10:13:36 -0800
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: Searching/indexing date/time values or numeric values?
Date: Wed, 17 Jan 2007 13:13:47 -0500
Message-ID: <89ACF43E70DC0C4B812FEA71B98CE2EE288396@infsrv00.InfinityInfo.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Searching/indexing date/time values or numeric values?
Thread-Index: Acc6Yzs+5/uXTZIFTE68NSLPhQsH7A==
From: "Jiho Han" <jhan@InfinityInfo.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Is there a way to index/search so that a query could be written to
search on a field using arithmetic comparison operators?

What I mean is if I had a date/time field called CREATEDATE, I would
search for all documents where:

CREATEDATE > "1/1/2007"

The above is obvisouly pseudo-query expression.  I did find something
called Range searches on the query syntax documentation page and it says
the sorting is done lexicographically.  I guess that means it's sorted
by letter.  I would then need to store all my date/time values in a
format like yyyymmdd hh:mm:ss.
And search, CREATEDATE:[20070101 00:00:00 TO 20070118 00:00:00], where
the second date/time value is something like midnight tonight.

But what about a decimal value?  If I have a VERSION field where values
are like 1.0, 2.5, 11.3, etc.  That wouldn't work.  Because the values
would be sorted:
1.0
11.3
2.5
In that order.  And if I do VERSION:[1.0 TO 3.0], search would return
all 3 of them.  The only workaround seems to be prepending 0's and that
would also only work as long as the maximum digits for the interger part
is known ahead of time.

Can someone verify/suggest ways to make this work?
Thanks

Jiho Han
Senior Software Engineer
Infinity Info Systems
The Sales Technology Experts
Tel: 212.563.4400 x6375
Fax: 212.760.0540
jhan@infinityinfo.com
www.infinityinfo.com <http://www.infinityinfo.com/>=20



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25553-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 17 19:09:42 2007
Return-Path: <java-user-return-25553-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38347 invoked from network); 17 Jan 2007 19:09:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Jan 2007 19:09:41 -0000
Received: (qmail 55600 invoked by uid 500); 17 Jan 2007 19:09:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55570 invoked by uid 500); 17 Jan 2007 19:09:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55559 invoked by uid 99); 17 Jan 2007 19:09:40 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Jan 2007 11:09:40 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lucenelist2005@danielnaber.de designates 80.67.18.16 as permitted sender)
Received: from [80.67.18.16] (HELO smtprelay04.ispgateway.de) (80.67.18.16)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Jan 2007 11:09:29 -0800
Received: (qmail 23302 invoked from network); 17 Jan 2007 19:08:53 -0000
Received: from unknown (HELO p5496ca06.dip.t-dialin.net) ([pbs]695637@[84.150.202.6])
          (envelope-sender <lucenelist2005@danielnaber.de>)
          by smtprelay04.ispgateway.de (qmail-ldap-1.03) with RC4-MD5 encrypted SMTP
          for <java-user@lucene.apache.org>; 17 Jan 2007 19:08:53 -0000
From: Daniel Naber <lucenelist2005@danielnaber.de>
To: java-user@lucene.apache.org
Subject: Re: confuse of required and prohibited in BooleanQuery
Date: Wed, 17 Jan 2007 20:09:29 +0100
User-Agent: KMail/1.8.2
References: <c2f9e9030701170230r5f09c290la73cf8da2362e793@mail.gmail.com>
In-Reply-To: <c2f9e9030701170230r5f09c290la73cf8da2362e793@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="utf-8"
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
Message-Id: <200701172009.29764@danielnaber.de>
X-Virus-Checked: Checked by ClamAV on apache.org

On Wednesday 17 January 2007 11:30, David wrote:

> =C2=A0 =C2=A02.There are four logical combinations of these flags, but th=
e case
> where both are true is an illogical and invalid combination
> =C2=A0 =C2=A0but I don't know why, Can anybody explain it to me?

You're right. Because of this the API was changed in Lucene 2.0 so only=20
settings that make sense are possible now.

Regards
 Daniel

=2D-=20
http://www.danielnaber.de

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25554-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 17 19:10:13 2007
Return-Path: <java-user-return-25554-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38508 invoked from network); 17 Jan 2007 19:10:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Jan 2007 19:10:12 -0000
Received: (qmail 57485 invoked by uid 500); 17 Jan 2007 19:10:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57251 invoked by uid 500); 17 Jan 2007 19:10:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57240 invoked by uid 99); 17 Jan 2007 19:10:11 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Jan 2007 11:10:11 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=RCVD_IN_BL_SPAMCOP_NET
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [209.191.86.96] (HELO web82201.mail.mud.yahoo.com) (209.191.86.96)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 17 Jan 2007 11:10:01 -0800
Received: (qmail 19159 invoked by uid 60001); 17 Jan 2007 19:09:40 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=N0AIpsZkQm6yoXj1xknErLB0jCnx/ZLo9kBTo6Fwn0dT6UnNxyaEUp6u1CC65bDsAvgXty4VeDgyaFwHMttIyGslpKtBEDUREuqJG+fUJz782P8jX7BpJ8XFQk4qZRxtl/656JtzNcnT1I889Go0Sv1/L1/bsxWsERAmtC+gtTs=  ;
Message-ID: <20070117190940.19157.qmail@web82201.mail.mud.yahoo.com>
Received: from [207.126.230.225] by web82201.mail.mud.yahoo.com via HTTP; Wed, 17 Jan 2007 11:09:40 PST
Date: Wed, 17 Jan 2007 11:09:40 -0800 (PST)
From: John Song <delphi329@yahoo.com>
Subject: Re: Searching/indexing date/time values or numeric values?
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=ascii
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

ultimately, everything is text search.  For decimal number, what you do is =
to write a customized analyzer which multiple the number by some factor, ro=
und it to a long and then use NumberTools to convert that into a text strin=
g.  Here is what I did for latitude/longitude search: multiple it by 10e6.=
=0A=0Ajohn=0A=0A----- Original Message ----=0AFrom: Jiho Han <jhan@Infinity=
Info.com>=0ATo: java-user@lucene.apache.org=0ASent: Wednesday, January 17, =
2007 10:13:47 AM=0ASubject: Searching/indexing date/time values or numeric =
values?=0A=0AIs there a way to index/search so that a query could be writte=
n to=0Asearch on a field using arithmetic comparison operators?=0A=0AWhat I=
 mean is if I had a date/time field called CREATEDATE, I would=0Asearch for=
 all documents where:=0A=0ACREATEDATE > "1/1/2007"=0A=0AThe above is obviso=
uly pseudo-query expression.  I did find something=0Acalled Range searches =
on the query syntax documentation page and it says=0Athe sorting is done le=
xicographically.  I guess that means it's sorted=0Aby letter.  I would then=
 need to store all my date/time values in a=0Aformat like yyyymmdd hh:mm:ss=
.=0AAnd search, CREATEDATE:[20070101 00:00:00 TO 20070118 00:00:00], where=
=0Athe second date/time value is something like midnight tonight.=0A=0ABut =
what about a decimal value?  If I have a VERSION field where values=0Aare l=
ike 1.0, 2.5, 11.3, etc.  That wouldn't work.  Because the values=0Awould b=
e sorted:=0A1.0=0A11.3=0A2.5=0AIn that order.  And if I do VERSION:[1.0 TO =
3.0], search would return=0Aall 3 of them.  The only workaround seems to be=
 prepending 0's and that=0Awould also only work as long as the maximum digi=
ts for the interger part=0Ais known ahead of time.=0A=0ACan someone verify/=
suggest ways to make this work?=0AThanks=0A=0AJiho Han=0ASenior Software En=
gineer=0AInfinity Info Systems=0AThe Sales Technology Experts=0ATel: 212.56=
3.4400 x6375=0AFax: 212.760.0540=0Ajhan@infinityinfo.com=0Awww.infinityinfo=
.com <http://www.infinityinfo.com/> =0A=0A=0A=0A---------------------------=
------------------------------------------=0ATo unsubscribe, e-mail: java-u=
ser-unsubscribe@lucene.apache.org=0AFor additional commands, e-mail: java-u=
ser-help@lucene.apache.org=0A=0A=0A=0A=0A=0A=0A =0A________________________=
____________________________________________________________=0ACheap talk?=
=0ACheck out Yahoo! Messenger's low PC-to-Phone call rates.=0Ahttp://voice.=
yahoo.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25555-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 17 20:18:05 2007
Return-Path: <java-user-return-25555-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61882 invoked from network); 17 Jan 2007 20:18:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Jan 2007 20:18:03 -0000
Received: (qmail 64788 invoked by uid 500); 17 Jan 2007 20:18:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64760 invoked by uid 500); 17 Jan 2007 20:18:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64748 invoked by uid 99); 17 Jan 2007 20:18:03 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Jan 2007 12:18:02 -0800
X-ASF-Spam-Status: No, hits=0.3 required=10.0
	tests=MAILTO_TO_SPAM_ADDR,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of DORONC@il.ibm.com designates 195.212.29.150 as permitted sender)
Received: from [195.212.29.150] (HELO mtagate1.de.ibm.com) (195.212.29.150)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Jan 2007 12:17:52 -0800
Received: from d12nrmr1607.megacenter.de.ibm.com (d12nrmr1607.megacenter.de.ibm.com [9.149.167.49])
	by mtagate1.de.ibm.com (8.13.8/8.13.8) with ESMTP id l0HKHACl087276
	for <java-user@lucene.apache.org>; Wed, 17 Jan 2007 20:17:10 GMT
Received: from d12av04.megacenter.de.ibm.com (d12av04.megacenter.de.ibm.com [9.149.165.229])
	by d12nrmr1607.megacenter.de.ibm.com (8.13.8/8.13.8/NCO v8.2) with ESMTP id l0HKHAwP3051528
	for <java-user@lucene.apache.org>; Wed, 17 Jan 2007 21:17:10 +0100
Received: from d12av04.megacenter.de.ibm.com (loopback [127.0.0.1])
	by d12av04.megacenter.de.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id l0HKHAZ4030905
	for <java-user@lucene.apache.org>; Wed, 17 Jan 2007 21:17:10 +0100
Received: from d12mc102.megacenter.de.ibm.com (d12mc102.megacenter.de.ibm.com [9.149.167.114])
	by d12av04.megacenter.de.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id l0HKHA1q030902
	for <java-user@lucene.apache.org>; Wed, 17 Jan 2007 21:17:10 +0100
In-Reply-To: <20070117190940.19157.qmail@web82201.mail.mud.yahoo.com>
Subject: Re: Searching/indexing date/time values or numeric values?
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 7.0 HF277 June 21, 2006
Message-ID: <OF2FA65522.BD7CA137-ON88257266.006B7291-88257266.006F49D1@il.ibm.com>
From: Doron Cohen <DORONC@il.ibm.com>
Date: Wed, 17 Jan 2007 12:15:33 -0800
X-MIMETrack: Serialize by Router on D12MC102/12/M/IBM(Release 7.0.2HF71 | November 3, 2006) at
 17/01/2007 22:17:09
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org

John Song <delphi329@yahoo.com> wrote on 17/01/2007 11:09:40:

> ultimately, everything is text search.  For decimal number, what you
> do is to write a customized analyzer which multiple the number by
> some factor, round it to a long and then use NumberTools to convert
> that into a text string.  Here is what I did for latitude/longitude
> search: multiple it by 10e6.
>

For most cases this would be sufficient.

Won't work if multiplying by precision takes beyond Long.MAX.
I think an alternative that would work in that case too could
be to prefix X with P, where:
X == original number.
K == number of digits left side of decimal point.
P == lexicographically valid representation of K.

P is defined as "n0"+D+"n", where D is a one char
representation of K, that is: '0', .. '9','a'..'z'.

Examples for values of K, prefix P, and result string S:
X=.17   K=0 P=n00n S=n00n_.17
X=0.170 K=0 P=n00n S=n00n_.17  (no leading/trailing redundant zeros)
X=5.8   K=1 P=n01n S=n01n_5.8
X=17.66 K=2 P=n02n S=n02n_17.66
...
X=123456789.22    K=9  P=n09n  S=n09n_123456789.22
X=1234567890.22   K=10 P=n0an  S=n0an_1234567890.22
X=12345678901.22  K=11 P=n0bn  S=n0bn_12345678901.22
X=123456789012.22 K=12 P=n0cn  S=n0cn_123456789012.22

You get the idea - the prefix prevents the sorting error.
No special care required for the fraction part.

Negative values can work using 'm' instead of 'n' in the
prefix, e.g.:
X=-123456789.22    K=9  P=n09n  S=m09m_123456789.22

This should work for long values as well.
I like the fixed length prefix.
But code for this would need to be written...

> john
>
> ----- Original Message ----
> From: Jiho Han <jhan@InfinityInfo.com>
> To: java-user@lucene.apache.org
> Sent: Wednesday, January 17, 2007 10:13:47 AM
> Subject: Searching/indexing date/time values or numeric values?
>
> Is there a way to index/search so that a query could be written to
> search on a field using arithmetic comparison operators?
>
> What I mean is if I had a date/time field called CREATEDATE, I would
> search for all documents where:
>
> CREATEDATE > "1/1/2007"
>
> The above is obvisouly pseudo-query expression.  I did find something
> called Range searches on the query syntax documentation page and it says
> the sorting is done lexicographically.  I guess that means it's sorted
> by letter.  I would then need to store all my date/time values in a
> format like yyyymmdd hh:mm:ss.
> And search, CREATEDATE:[20070101 00:00:00 TO 20070118 00:00:00], where
> the second date/time value is something like midnight tonight.
>
> But what about a decimal value?  If I have a VERSION field where values
> are like 1.0, 2.5, 11.3, etc.  That wouldn't work.  Because the values
> would be sorted:
> 1.0
> 11.3
> 2.5
> In that order.  And if I do VERSION:[1.0 TO 3.0], search would return
> all 3 of them.  The only workaround seems to be prepending 0's and that
> would also only work as long as the maximum digits for the interger part
> is known ahead of time.
>
> Can someone verify/suggest ways to make this work?
> Thanks
>
> Jiho Han
> Senior Software Engineer
> Infinity Info Systems
> The Sales Technology Experts
> Tel: 212.563.4400 x6375
> Fax: 212.760.0540
> jhan@infinityinfo.com
> www.infinityinfo.com <http://www.infinityinfo.com/>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>
>
>
>
>
____________________________________________________________________________________

> Cheap talk?
> Check out Yahoo! Messenger's low PC-to-Phone call rates.
> http://voice.yahoo.com
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25556-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 17 20:33:54 2007
Return-Path: <java-user-return-25556-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75360 invoked from network); 17 Jan 2007 20:33:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Jan 2007 20:33:54 -0000
Received: (qmail 95107 invoked by uid 500); 17 Jan 2007 20:33:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95083 invoked by uid 500); 17 Jan 2007 20:33:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95071 invoked by uid 99); 17 Jan 2007 20:33:54 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Jan 2007 12:33:54 -0800
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=FORGED_HOTMAIL_RCVD2,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Jan 2007 12:33:43 -0800
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1H7HTH-0000wE-Ja
	for java-user@lucene.apache.org; Wed, 17 Jan 2007 12:33:23 -0800
Message-ID: <8418417.post@talk.nabble.com>
Date: Wed, 17 Jan 2007 12:33:23 -0800 (PST)
From: moraleslos <moraleslos@hotmail.com>
To: java-user@lucene.apache.org
Subject: sorting issue with un-tokenized field
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: moraleslos@hotmail.com
X-Virus-Checked: Checked by ClamAV on apache.org



-- 
View this message in context: http://www.nabble.com/sorting-issue-with-un-tokenized-field-tf3029674.html#a8418417
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25557-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 17 20:40:38 2007
Return-Path: <java-user-return-25557-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78795 invoked from network); 17 Jan 2007 20:40:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Jan 2007 20:40:11 -0000
Received: (qmail 6076 invoked by uid 500); 17 Jan 2007 20:40:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6047 invoked by uid 500); 17 Jan 2007 20:40:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6036 invoked by uid 99); 17 Jan 2007 20:40:12 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Jan 2007 12:40:12 -0800
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=FORGED_HOTMAIL_RCVD2,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Jan 2007 12:40:02 -0800
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1H7HZN-0001sY-Qw
	for java-user@lucene.apache.org; Wed, 17 Jan 2007 12:39:41 -0800
Message-ID: <8418521.post@talk.nabble.com>
Date: Wed, 17 Jan 2007 12:39:41 -0800 (PST)
From: moraleslos <moraleslos@hotmail.com>
To: java-user@lucene.apache.org
Subject: Re: sorting issue with un-tokenized field
In-Reply-To: <8418417.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: moraleslos@hotmail.com
References: <8418417.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Oops, accidently pressed the ENTER key before doing anything  ;-)

I have a field called "bookTitle" that I specified as UN_TOKENIZED and
STORED in the index (i.e. keyword).  However, when I do a sort on this field
during a search I get this error:

Exception occurred during search: java.lang.RuntimeException: there are more
terms than documents in field "bookTitles", but it's impossible to sort on
tokenized fields 

My gut feeling on this is that some of my "bookTitles" are long, e.g. > 10
words, although I'm not sure if this is the cause.  Again I don't tokenized
this when storing in the index.  Any suggestions on how to sort this field
(which is just a String field) w/o running into this RuntimeException? 
Thanks in advance!

-los
-- 
View this message in context: http://www.nabble.com/sorting-issue-with-un-tokenized-field-tf3029674.html#a8418521
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25558-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 17 21:08:24 2007
Return-Path: <java-user-return-25558-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93085 invoked from network); 17 Jan 2007 21:08:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Jan 2007 21:08:23 -0000
Received: (qmail 47450 invoked by uid 500); 17 Jan 2007 21:08:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47423 invoked by uid 500); 17 Jan 2007 21:08:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47412 invoked by uid 99); 17 Jan 2007 21:08:22 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Jan 2007 13:08:22 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of DORONC@il.ibm.com designates 195.212.29.135 as permitted sender)
Received: from [195.212.29.135] (HELO mtagate2.uk.ibm.com) (195.212.29.135)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Jan 2007 13:08:12 -0800
Received: from d12nrmr1607.megacenter.de.ibm.com (d12nrmr1607.megacenter.de.ibm.com [9.149.167.49])
	by mtagate2.uk.ibm.com (8.13.8/8.13.8) with ESMTP id l0HL7p20136960
	for <java-user@lucene.apache.org>; Wed, 17 Jan 2007 21:07:51 GMT
Received: from d12av02.megacenter.de.ibm.com (d12av02.megacenter.de.ibm.com [9.149.165.228])
	by d12nrmr1607.megacenter.de.ibm.com (8.13.8/8.13.8/NCO v8.2) with ESMTP id l0HL7otu3141798
	for <java-user@lucene.apache.org>; Wed, 17 Jan 2007 22:07:50 +0100
Received: from d12av02.megacenter.de.ibm.com (loopback [127.0.0.1])
	by d12av02.megacenter.de.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id l0HL7ogd013435
	for <java-user@lucene.apache.org>; Wed, 17 Jan 2007 22:07:50 +0100
Received: from d12mc102.megacenter.de.ibm.com (d12mc102.megacenter.de.ibm.com [9.149.167.114])
	by d12av02.megacenter.de.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id l0HL7oCc013432
	for <java-user@lucene.apache.org>; Wed, 17 Jan 2007 22:07:50 +0100
In-Reply-To: <8418521.post@talk.nabble.com>
Subject: Re: sorting issue with un-tokenized field
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 7.0 HF277 June 21, 2006
Message-ID: <OF9390A17E.BD627D36-ON88257266.0072F7FA-88257266.0073CCC5@il.ibm.com>
From: Doron Cohen <DORONC@il.ibm.com>
Date: Wed, 17 Jan 2007 13:04:50 -0800
X-MIMETrack: Serialize by Router on D12MC102/12/M/IBM(Release 7.0.2HF71 | November 3, 2006) at
 17/01/2007 23:07:50
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org

For sorting by, that field must be added to the document
exactly *once*, as UN_TOKENIZED.
This way there would be at most one token in that field
for each document.

If, for instance, that field is added twice to the document,
with same or different values, then although UN_TOKENIZED
is specified in both additions, there would be two tokens,
and sort would raise an error.

You can use Luke to see the content of your index - that would help.
(or use IndexReader.termDocs() to examine the index.)

moraleslos <moraleslos@hotmail.com> wrote on 17/01/2007 12:39:41:

>
> Oops, accidently pressed the ENTER key before doing anything  ;-)
>
> I have a field called "bookTitle" that I specified as UN_TOKENIZED and
> STORED in the index (i.e. keyword).  However, when I do a sort on this
field
> during a search I get this error:
>
> Exception occurred during search: java.lang.RuntimeException: there are
more
> terms than documents in field "bookTitles", but it's impossible to sort
on
> tokenized fields
>
> My gut feeling on this is that some of my "bookTitles" are long, e.g. >
10

Why should this matter?

> words, although I'm not sure if this is the cause.  Again I don't
tokenized
> this when storing in the index.  Any suggestions on how to sort this
field
> (which is just a String field) w/o running into this RuntimeException?
> Thanks in advance!
>
> -los
> --
> View this message in context: http://www.nabble.com/sorting-issue-
> with-un-tokenized-field-tf3029674.html#a8418521
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25559-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 17 21:10:20 2007
Return-Path: <java-user-return-25559-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93497 invoked from network); 17 Jan 2007 21:10:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Jan 2007 21:10:20 -0000
Received: (qmail 51086 invoked by uid 500); 17 Jan 2007 21:10:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 51061 invoked by uid 500); 17 Jan 2007 21:10:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 51050 invoked by uid 99); 17 Jan 2007 21:10:15 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Jan 2007 13:10:15 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 66.249.92.171 as permitted sender)
Received: from [66.249.92.171] (HELO ug-out-1314.google.com) (66.249.92.171)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Jan 2007 13:10:06 -0800
Received: by ug-out-1314.google.com with SMTP id k40so4017ugc
        for <java-user@lucene.apache.org>; Wed, 17 Jan 2007 13:09:45 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=E9J83yqB5tJz5EkKykPwUDCoqE0dD6ojuS5gNxk5iSBK3q7F2A5uLTZ1HCTfQNFB173gbXFUK/+Z65+NpMxbE7w9g8APV37CjTSZiqB5p4qp10dVgJHJ7aj08CptPmWaj+wj7WkrK4MNAg8nTP76i3oQSpomH+eRNhbgf2wiVVw=
Received: by 10.82.139.17 with SMTP id m17mr1646951bud.1169068184523;
        Wed, 17 Jan 2007 13:09:44 -0800 (PST)
Received: by 10.82.162.9 with HTTP; Wed, 17 Jan 2007 13:09:44 -0800 (PST)
Message-ID: <359a92830701171309p1285387et6705da08f11fb7ee@mail.gmail.com>
Date: Wed, 17 Jan 2007 16:09:44 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: sorting issue with un-tokenized field
In-Reply-To: <8418521.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_132293_643903.1169068184478"
References: <8418417.post@talk.nabble.com> <8418521.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_132293_643903.1169068184478
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I'd look at a couple of things:

1> are you absolutely sure you didn't store bookTitles more than once? i.e.
doc = new DOcument();
doc.add(new Term("bookTitles", .....));
doc.add(new Term("bookTitles", .....));
writer.add(doc);

2> When you built your index, did you append to an old one or replace it?
I'm wondering if you have what you think you do in your index (you can look
with Luke <G>)...

3> If you're really stuck, you could use termdocs/termenum to count your
terms and see what document has more than one entry and try to work
backwards.

Hope this helps
Erick

On 1/17/07, moraleslos <moraleslos@hotmail.com> wrote:
>
>
> Oops, accidently pressed the ENTER key before doing anything  ;-)
>
> I have a field called "bookTitle" that I specified as UN_TOKENIZED and
> STORED in the index (i.e. keyword).  However, when I do a sort on this
> field
> during a search I get this error:
>
> Exception occurred during search: java.lang.RuntimeException: there are
> more
> terms than documents in field "bookTitles", but it's impossible to sort on
> tokenized fields
>
> My gut feeling on this is that some of my "bookTitles" are long, e.g. > 10
> words, although I'm not sure if this is the cause.  Again I don't
> tokenized
> this when storing in the index.  Any suggestions on how to sort this field
> (which is just a String field) w/o running into this RuntimeException?
> Thanks in advance!
>
> -los
> --
> View this message in context:
> http://www.nabble.com/sorting-issue-with-un-tokenized-field-tf3029674.html#a8418521
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_132293_643903.1169068184478--

From java-user-return-25560-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 17 22:15:49 2007
Return-Path: <java-user-return-25560-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22928 invoked from network); 17 Jan 2007 22:15:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Jan 2007 22:15:47 -0000
Received: (qmail 45461 invoked by uid 500); 17 Jan 2007 22:15:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45432 invoked by uid 500); 17 Jan 2007 22:15:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45421 invoked by uid 99); 17 Jan 2007 22:15:47 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Jan 2007 14:15:47 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Jan 2007 14:15:38 -0800
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1H7J3u-0001yw-IK
	for java-user@lucene.apache.org; Wed, 17 Jan 2007 14:15:18 -0800
Message-ID: <8420807.post@talk.nabble.com>
Date: Wed, 17 Jan 2007 14:15:18 -0800 (PST)
From: silegav_k <kotsonis.v@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: only one search result
In-Reply-To: <8415561.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: kotsonis.v@gmail.com
References: <8402496.post@talk.nabble.com> <359a92830701161710j37baf6acube4077dd5c920e8b@mail.gmail.com> <8406325.post@talk.nabble.com> <359a92830701170542l26d7afaana4d1572ebf92498b@mail.gmail.com> <8415561.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Found my mistake.
After all it was not something about lucene, but it was an algorithmic
problem

Thank you!
Vagelis


I'll try downloading Lucene again and use the new untouched version.
I have the lucene-core-2.0.0.jar but I think I have made some "changes" in
some of its classes. 
I will download it again and try one step at a time. I will come up with new
questions soon!

Thank you
Vagelis


Erick Erickson wrote:
> 
> I've never had any problems with StandardAnalyzer. Could you perhaps post
> the code snippet that causes this? I'm wondering about things like what
> JVM
> you're using, what your classpath looks like, what Lucene version you're
> using etc.
> 
> Erick
> 

-- 
View this message in context: http://www.nabble.com/only-one-search-result-tf3024628.html#a8420807
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25561-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 18 00:59:23 2007
Return-Path: <java-user-return-25561-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80444 invoked from network); 18 Jan 2007 00:59:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Jan 2007 00:59:22 -0000
Received: (qmail 62123 invoked by uid 500); 18 Jan 2007 00:59:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61881 invoked by uid 500); 18 Jan 2007 00:59:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61870 invoked by uid 99); 18 Jan 2007 00:59:21 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Jan 2007 16:59:21 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of vnguyen@ur.com designates 63.241.148.49 as permitted sender)
Received: from [63.241.148.49] (HELO iris.ur.com) (63.241.148.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Jan 2007 16:59:12 -0800
Received: from unknown (HELO UREXCHSRV5.ur.com) ([10.6.134.35])
  by iris.ur.com with ESMTP; 18 Jan 2007 00:59:24 +0000
X-OriginatingIP: 10.6.134.35
X-InternalServer: 10.6.134.35
Received: from UREXCHVS3.ur.com ([10.6.138.34]) by UREXCHSRV5.ur.com with Microsoft SMTPSVC(6.0.3790.1830);
	 Wed, 17 Jan 2007 19:56:54 -0500
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C73A9B.D0E863AF"
Subject: is there a Query for this?
Date: Wed, 17 Jan 2007 19:58:50 -0500
Message-ID: <0D6A3C278F4DC346B98DF4D2F1397E81188FA1C0@UREXCHVS3.ur.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: is there a Query for this?
Thread-Index: Acc6m9D7neAULkTXQBaUIt9ejYxPZQ==
From: "Van Nguyen" <vnguyen@ur.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 18 Jan 2007 00:56:54.0739 (UTC) FILETIME=[8C0D9230:01C73A9B]
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01C73A9B.D0E863AF
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Just wondering if there was a query for this:

=20

Let's say I want to query: "white hard hat".  Is there a query that will
build something like this:

=20

(+field:white +field:hard field:hat) (+field:white field:hard
+field:hat) (field:white +field:hard +field:hat)

=20

In other words... the query needs to contain most of the words, but not
all.


------_=_NextPart_001_01C73A9B.D0E863AF--

From java-user-return-25562-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 18 02:40:23 2007
Return-Path: <java-user-return-25562-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1786 invoked from network); 18 Jan 2007 02:40:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Jan 2007 02:40:23 -0000
Received: (qmail 63531 invoked by uid 500); 18 Jan 2007 02:40:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63490 invoked by uid 500); 18 Jan 2007 02:40:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63476 invoked by uid 99); 18 Jan 2007 02:40:22 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Jan 2007 18:40:22 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of DORONC@il.ibm.com designates 195.212.29.155 as permitted sender)
Received: from [195.212.29.155] (HELO mtagate6.de.ibm.com) (195.212.29.155)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Jan 2007 18:40:12 -0800
Received: from d12nrmr1607.megacenter.de.ibm.com (d12nrmr1607.megacenter.de.ibm.com [9.149.167.49])
	by mtagate6.de.ibm.com (8.13.8/8.13.8) with ESMTP id l0I2dosk099556
	for <java-user@lucene.apache.org>; Thu, 18 Jan 2007 02:39:50 GMT
Received: from d12av04.megacenter.de.ibm.com (d12av04.megacenter.de.ibm.com [9.149.165.229])
	by d12nrmr1607.megacenter.de.ibm.com (8.13.8/8.13.8/NCO v8.2) with ESMTP id l0I2doXu3235876
	for <java-user@lucene.apache.org>; Thu, 18 Jan 2007 03:39:50 +0100
Received: from d12av04.megacenter.de.ibm.com (loopback [127.0.0.1])
	by d12av04.megacenter.de.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id l0I2doEL007741
	for <java-user@lucene.apache.org>; Thu, 18 Jan 2007 03:39:50 +0100
Received: from d12mc102.megacenter.de.ibm.com (d12mc102.megacenter.de.ibm.com [9.149.167.114])
	by d12av04.megacenter.de.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id l0I2do9c007738
	for <java-user@lucene.apache.org>; Thu, 18 Jan 2007 03:39:50 +0100
In-Reply-To: <0D6A3C278F4DC346B98DF4D2F1397E81188FA1C0@UREXCHVS3.ur.com>
Subject: Re: is there a Query for this?
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 7.0 HF277 June 21, 2006
Message-ID: <OF22A14454.B75C92E9-ON88257267.000E30AD-88257267.000E518B@il.ibm.com>
From: Doron Cohen <DORONC@il.ibm.com>
Date: Wed, 17 Jan 2007 18:36:23 -0800
X-MIMETrack: Serialize by Router on D12MC102/12/M/IBM(Release 7.0.2HF71 | November 3, 2006) at
 18/01/2007 04:39:49
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org

How about BooleanQuery.setMinimumNumberShouldMatch(int min)?

"Van Nguyen" <vnguyen@ur.com> wrote on 17/01/2007 16:58:50:

> Just wondering if there was a query for this:
>
>
>
> Let's say I want to query: "white hard hat".  Is there a query that will
> build something like this:
>
>
>
> (+field:white +field:hard field:hat) (+field:white field:hard
> +field:hat) (field:white +field:hard +field:hat)
>
>
>
> In other words... the query needs to contain most of the words, but not
> all.
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25563-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 18 08:22:38 2007
Return-Path: <java-user-return-25563-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 66296 invoked from network); 18 Jan 2007 08:22:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Jan 2007 08:22:38 -0000
Received: (qmail 34011 invoked by uid 500); 18 Jan 2007 08:22:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33977 invoked by uid 500); 18 Jan 2007 08:22:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33966 invoked by uid 99); 18 Jan 2007 08:22:37 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Jan 2007 00:22:37 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [209.191.85.28] (HELO web36611.mail.mud.yahoo.com) (209.191.85.28)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 18 Jan 2007 00:22:26 -0800
Received: (qmail 81022 invoked by uid 60001); 18 Jan 2007 08:22:05 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Reply-To:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=iIfPk3ZRzen/ZNpGtrdE86glvwj0daz4Fwk5IUIu5/a3+pvfPBWa5v+4jNBXIgcv8RQF4+xE/aVp/h5iJJ8YDKsg8j8GjwWa0ZjspPt/KJWXtskvrWPBm3qMMtdeGKvXEXO2pbapINbUe7Hi1bHqXmCWIXzkEfkW8LA8eife96I=;
X-YMail-OSG: 8U498cQVM1m4ubksITzrCtbqH8NBGC5BNLVgfmbcq_XBb2wkWKaXDQilkAG2kxxGUPusE5NDQ2YMunIv3YVj
Received: from [133.9.4.11] by web36611.mail.mud.yahoo.com via HTTP; Thu, 18 Jan 2007 00:22:05 PST
X-Mailer: YahooMailRC/368.3 YahooMailWebService/0.6.132.7
Date: Thu, 18 Jan 2007 00:22:05 -0800 (PST)
From: Supheakmungkol SARIN <supheakmungkol@yahoo.com>
Reply-To: Supheakmungkol SARIN <supheakmungkol.sarin@gmail.com>
Subject: Integrated File parser available?
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-1445684423-1169108525=:80409"
Message-ID: <843481.80409.qm@web36611.mail.mud.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

--0-1445684423-1169108525=:80409
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable

Dear all,=0A=0AI'd like to know whether there exists any integrated JAVA AP=
I that we can use to parse most of today's popular file formats? Currently =
I have been using one API for one file format and it's not so convenient.=
=0A=0AThank in advance for your response.=0A=0ABest regards,=0A=0AS.S.=0A=
=0A
--0-1445684423-1169108525=:80409--

From java-user-return-25564-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 18 08:54:53 2007
Return-Path: <java-user-return-25564-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80066 invoked from network); 18 Jan 2007 08:54:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Jan 2007 08:54:52 -0000
Received: (qmail 70664 invoked by uid 500); 18 Jan 2007 08:54:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70634 invoked by uid 500); 18 Jan 2007 08:54:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70622 invoked by uid 99); 18 Jan 2007 08:54:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Jan 2007 00:54:52 -0800
X-ASF-Spam-Status: No, hits=2.9 required=10.0
	tests=HTML_10_20,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of zhouchengly@gmail.com designates 66.249.92.174 as permitted sender)
Received: from [66.249.92.174] (HELO ug-out-1314.google.com) (66.249.92.174)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Jan 2007 00:54:43 -0800
Received: by ug-out-1314.google.com with SMTP id k40so121990ugc
        for <java-user@lucene.apache.org>; Thu, 18 Jan 2007 00:54:21 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=urmVuERIvwjjCxkTy1avfM7nfDCxWojKLyB7zXF4hcFCmD+/ka7k4QHIV2HdSguXsBJ41SnGSt4fcJuQO8fOGTDDZhBxnYwYxZnU9XpJOQo2aTOF3UogGdGzuKo4Ku2UlyrWU84yhqinBAcp0hE1ypG9NdM5Hl7Q3Qxjxut7OGk=
Received: by 10.82.138.6 with SMTP id l6mr127729bud.1169110461141;
        Thu, 18 Jan 2007 00:54:21 -0800 (PST)
Received: by 10.82.100.12 with HTTP; Thu, 18 Jan 2007 00:54:20 -0800 (PST)
Message-ID: <c2f9e9030701180054x3f1bc226wba8482a67d8aaca4@mail.gmail.com>
Date: Thu, 18 Jan 2007 16:54:20 +0800
From: David <zhouchengly@gmail.com>
To: java-user@lucene.apache.org
Subject: search in all fields
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_209050_9749532.1169110460959"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_209050_9749532.1169110460959
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi all:
     I study Lucene and I want build search on all the fields, I find
MultiFieldQueryParser can search on multiple fields, but we must specify
fields. maybe we can add a field named all_field that contain all the fields
when indexing, but it make the index file larger.
    so how to make search on all fields without specify any fields ?
Appreciate your help!
-- 
David

------=_Part_209050_9749532.1169110460959--

From java-user-return-25565-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 18 09:12:09 2007
Return-Path: <java-user-return-25565-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88554 invoked from network); 18 Jan 2007 09:12:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Jan 2007 09:12:09 -0000
Received: (qmail 89754 invoked by uid 500); 18 Jan 2007 09:12:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89652 invoked by uid 500); 18 Jan 2007 09:12:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89641 invoked by uid 99); 18 Jan 2007 09:12:08 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Jan 2007 01:12:08 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [209.191.86.100] (HELO web82205.mail.mud.yahoo.com) (209.191.86.100)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 18 Jan 2007 01:11:58 -0800
Received: (qmail 46703 invoked by uid 60001); 18 Jan 2007 09:11:37 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=2utwbVsJZbHD0ScLVT57C8FMi7rl+W0KR2SMySF+HmsoSUUeUFXzPvHINUDqz0kactV+bFJSkZc1tPKnvP3A16m8pHd+l/EtT/O2ENDeleMiLWismHGm2xQmK5eiEovbYDdWfipph2Kpywq7Z6gyNkmumwzQIGx/wgs3snHvw/o=  ;
Message-ID: <20070118091137.46701.qmail@web82205.mail.mud.yahoo.com>
Received: from [75.39.68.117] by web82205.mail.mud.yahoo.com via HTTP; Thu, 18 Jan 2007 01:11:37 PST
Date: Thu, 18 Jan 2007 01:11:37 -0800 (PST)
From: John Song <delphi329@yahoo.com>
Subject: Re: search in all fields
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=ascii
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Here is my experience of getting a good search relevancy: pre processing is=
 paramount.  Pre process your data and using perl is much powerful and flex=
ible then putting all the logic in a customized analyzer.  And if you want =
to search multiple fields, create a field called "all" and cat all the data=
 there.  It is much better than using MultiFieldQuery.  MultiFieldQuery jus=
t permutates your query with all default fields.  If you have more than 3 d=
efault fields, the query starts to look unnecessarily complex.  However, th=
ere is one case that MultiFieldQuery is needed: if you can't use the same t=
okenizer/analyzer for all default fields.=0A=0Ajohn=0A=0A----- Original Mes=
sage ----=0AFrom: David <zhouchengly@gmail.com>=0ATo: java-user@lucene.apac=
he.org=0ASent: Thursday, January 18, 2007 12:54:20 AM=0ASubject: search in =
all fields=0A=0AHi all:=0A     I study Lucene and I want build search on al=
l the fields, I find=0AMultiFieldQueryParser can search on multiple fields,=
 but we must specify=0Afields. maybe we can add a field named all_field tha=
t contain all the fields=0Awhen indexing, but it make the index file larger=
.=0A    so how to make search on all fields without specify any fields ?=0A=
Appreciate your help!=0A-- =0ADavid=0A=0A=0A=0A=0A=0A =0A__________________=
__________________________________________________________________=0AGet yo=
ur own web address.  =0AHave a HUGE year through Yahoo! Small Business.=0Ah=
ttp://smallbusiness.yahoo.com/domains/?p=3DBESTDEAL

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25566-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 18 10:14:13 2007
Return-Path: <java-user-return-25566-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 13912 invoked from network); 18 Jan 2007 10:14:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Jan 2007 10:14:12 -0000
Received: (qmail 85808 invoked by uid 500); 18 Jan 2007 10:14:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85173 invoked by uid 500); 18 Jan 2007 10:14:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85162 invoked by uid 99); 18 Jan 2007 10:14:12 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Jan 2007 02:14:12 -0800
X-ASF-Spam-Status: No, hits=2.3 required=10.0
	tests=HTML_MESSAGE,PLING_QUERY,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of zhouchengly@gmail.com designates 66.249.92.174 as permitted sender)
Received: from [66.249.92.174] (HELO ug-out-1314.google.com) (66.249.92.174)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Jan 2007 02:14:03 -0800
Received: by ug-out-1314.google.com with SMTP id k40so136996ugc
        for <java-user@lucene.apache.org>; Thu, 18 Jan 2007 02:13:42 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=ljPiFGA1E6pkHRzsjXrsctiJ2J0/TvH02KyWDB0ue1ggTjdrfoUWsdq3SKxJ+vmJ59e+7do4xiJlIqXC0z/twdbQvdN0FRK7K7kGOcDM88T1kCZep6H5SAJo+hPrX4iZlEW3xL/vDHFfcRR+Ol7Of9YnZidU/HCR6SSJTReT2Eg=
Received: by 10.82.139.17 with SMTP id m17mr135092bud.1169115221645;
        Thu, 18 Jan 2007 02:13:41 -0800 (PST)
Received: by 10.82.100.12 with HTTP; Thu, 18 Jan 2007 02:13:41 -0800 (PST)
Message-ID: <c2f9e9030701180213n25f4665cj272a087b73cbf7dd@mail.gmail.com>
Date: Thu, 18 Jan 2007 18:13:41 +0800
From: David <zhouchengly@gmail.com>
To: java-user@lucene.apache.org
Subject: how to make RangeQuery action as > < != operators?
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_210070_21378337.1169115221464"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_210070_21378337.1169115221464
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi all:
    I need to make range query actions as > < and != operators, The
RangeQuery class just support RangeQuery(begin, end, inclusive), but How to
support > < and != ?

Appreciate your help!

-- 
David

------=_Part_210070_21378337.1169115221464--

From java-user-return-25567-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 18 10:33:27 2007
Return-Path: <java-user-return-25567-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 18100 invoked from network); 18 Jan 2007 10:33:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Jan 2007 10:33:26 -0000
Received: (qmail 13192 invoked by uid 500); 18 Jan 2007 10:33:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12856 invoked by uid 500); 18 Jan 2007 10:33:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12845 invoked by uid 99); 18 Jan 2007 10:33:24 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Jan 2007 02:33:24 -0800
X-ASF-Spam-Status: No, hits=2.3 required=10.0
	tests=HTML_MESSAGE,PLING_QUERY
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [220.225.240.22] (HELO mail01.naukri.com) (220.225.240.22)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Jan 2007 02:33:15 -0800
Received: from [172.16.0.162] ([172.16.0.162])
          by mail01.naukri.com (Lotus Domino Release 7.0)
          with ESMTP id 2007011815574092-5804 ;
          Thu, 18 Jan 2007 15:57:40 +0530 
Message-ID: <45AF4CD4.4030800@naukri.com>
Date: Thu, 18 Jan 2007 16:02:52 +0530
From: Kapil Chhabra <kapil.chhabra@naukri.com>
User-Agent: Thunderbird 1.5.0.8 (X11/20061107)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: how to make RangeQuery action as > < != operators?
References: <c2f9e9030701180213n25f4665cj272a087b73cbf7dd@mail.gmail.com>
In-Reply-To: <c2f9e9030701180213n25f4665cj272a087b73cbf7dd@mail.gmail.com>
X-MIMETrack: Itemize by SMTP Server on noidaa88/naukri(Release 7.0|August 18, 2005) at
 01/18/2007 03:57:40 PM,
	Serialize by Router on noidaa88/naukri(Release 7.0|August 18, 2005) at 01/18/2007
 03:58:03 PM,
	Serialize complete at 01/18/2007 03:58:03 PM
Content-Type: multipart/alternative;
 boundary="------------000509050505070108090202"
X-Virus-Checked: Checked by ClamAV on apache.org

--------------000509050505070108090202
Content-Transfer-Encoding: 7bit
Content-Type: text/plain; charset=ISO-8859-1; format=flowed

In my case, I know the upper and lower limits of my field.
So it becomes easy for me to run such queries.

eg.

*>  *
RangeQuery(value, upperLimit, inc)

*<*
RangeQuery(lowerLimit, value, inc)

*!=*
Use the in this case.
eg:
-field:value

Regards,
kapilChhabra

David wrote:
> Hi all:
>    I need to make range query actions as > < and != operators, The
> RangeQuery class just support RangeQuery(begin, end, inclusive), but 
> How to
> support > < and != ?
>
> Appreciate your help!
>


--------------000509050505070108090202--

From java-user-return-25568-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 18 10:49:38 2007
Return-Path: <java-user-return-25568-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 23881 invoked from network); 18 Jan 2007 10:49:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Jan 2007 10:49:36 -0000
Received: (qmail 39703 invoked by uid 500); 18 Jan 2007 10:49:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39675 invoked by uid 500); 18 Jan 2007 10:49:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39664 invoked by uid 99); 18 Jan 2007 10:49:35 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Jan 2007 02:49:35 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [212.100.241.107] (HELO mail.thinkwebhosting.com) (212.100.241.107)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 18 Jan 2007 02:49:25 -0800
Received: (qmail 3822 invoked by uid 399); 18 Jan 2007 10:49:03 -0000
Received: from unknown (HELO ?10.88.9.76?) (rollo.dupre@i-solutionsglobal.com@194.74.191.146)
  by 192.168.1.107 with SMTP; 18 Jan 2007 10:49:03 -0000
X-Originating-IP: 194.74.191.146
Message-ID: <45AF50A8.60303@i-nexus.com>
Date: Thu, 18 Jan 2007 10:49:12 +0000
From: Rollo du Pre <rollo.dupre@i-nexus.com>
User-Agent: Thunderbird 1.5.0.9 (Windows/20061207)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Websphere and Dark Matter
References: <45ACF734.2030508@i-nexus.com> <45AD0005.40405@scalix.com> <45AD0816.2080201@i-nexus.com> <20070117074601.GA23522@fermat.math.technion.ac.il>
In-Reply-To: <20070117074601.GA23522@fermat.math.technion.ac.il>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks for this information, it was very useful.

Rol.

Nadav Har'El wrote:
> On Tue, Jan 16, 2007, Rollo du Pre wrote about "Re: Websphere and Dark Matter":
>> I was hoping it would, yes. Does websphere not release memory back to 
>> the OS when it not longer needs it? I'm concerned that if the memory 
>> spiked for some reason (indexing a large document) then that would 
>> hamper the rest of the OS because it'd hold on to far more memory than 
>> is needed.
> 
> This is a well known, may I say infamous, Java issue. Java could, in theory,
> easily shrink its heap as soon as it needs less memory, because in Java's GC
> model, memory can be moved around so fragmentation is not a problem. But
> unfortunately, the JVM's heap rarely does shrink by default: once the JVM's
> heap grows, it rarely ever shrinks back.
> 
> It turns out that in Sun's JVM (at least in the 1.4 version which I tried),
> you can actually control and improve the shrinking behavior. There's an option
> "-XX:MaxHeapFreeRatio=" (see [1]) which basically means how much of the Heap
> should be free before it is physically shrunk. Another option
> "-XX:MinHeapFreeRatio=" specifies how much of the heap to leave free after
> the shrinking.
> 
> The default values are 70 and 40 respectively, which means that the JVM only
> shrinks its memory use after 70% (!!!) of the heap is free, and it only shrinks
> to the point that 40% of the heap is still free. A few numbers to put this
> waste into perspective: If your JVM's heap grew to 300 MB, and now only
> requires 100 MB, it will NOT shrink (because only 66% is free). If later
> you need just 90 MB, the heap will finally shrink, but only to 150 MB (so
> that 40% still remains free).
> 
> One important thing you should note if you decide to lower these percentages,
> is that much of the JVM's excellent GC performance relies on its "generation"
> approach and the availability of a lot of free heap (so that by the time the
> heap is exausted, most of the new stuff in it is already garbage). So to
> keep performance - not just minimal memory use - you might want to tune other
> GC parameters as well. A good combination I once used is this:
> 
> 	-XX:NewRatio=2 -XX:MinHeapFreeRatio=20 -XX:MaxHeapFreeRatio=30
> 
> But your milage may vary.
> 
> [1] http://java.sun.com/javase/technologies/hotspot/vmoptions.jsp
> 

-- 
Rollo du Pre
Software Architect
rollo.dupre@i-nexus.com

www.i-nexus.com

NOTICE: The information contained in this e-mail, including
any attachments, is confidential. If you have received this
in error you should not disclose, copy, circulate or in any
way use the information contained herein. This e-mail may
be legally privileged and unauthorised use may be unlawful.
If you have received this e-mail in error, please telephone
us on +44 (0)870 011 0622 immediately so we can arrange for
its return. Thank you.

In addition, the opinions expressed in this e-mail are those
of the employee and for the intended recipient(s) only. They
do not necessarily represent the opinions of i-solutions
Global Ltd.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25569-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 18 11:18:20 2007
Return-Path: <java-user-return-25569-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33011 invoked from network); 18 Jan 2007 11:18:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Jan 2007 11:18:20 -0000
Received: (qmail 85082 invoked by uid 500); 18 Jan 2007 11:18:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85062 invoked by uid 500); 18 Jan 2007 11:18:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85050 invoked by uid 99); 18 Jan 2007 11:18:18 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Jan 2007 03:18:18 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of karl.wettin@gmail.com designates 66.249.92.172 as permitted sender)
Received: from [66.249.92.172] (HELO ug-out-1314.google.com) (66.249.92.172)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Jan 2007 03:18:08 -0800
Received: by ug-out-1314.google.com with SMTP id k40so149232ugc
        for <java-user@lucene.apache.org>; Thu, 18 Jan 2007 03:17:46 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=ZOPNui6oiuk1tMMwEnt4OevmEaCmTXm1OUuW4D15NMQ4Ioi/tElOV+xvAmvFtZoXrn5YiA0TGNry+AhEoysl6Iiker69z401dy7YTimXqf/9ACzZE5CjP/qyc4nNkeeNlM/nltO73SEGMK/3cva1XaF0cBXREc4NrN1Nd7TvpgQ=
Received: by 10.67.103.7 with SMTP id f7mr1122428ugm.1169119066478;
        Thu, 18 Jan 2007 03:17:46 -0800 (PST)
Received: from ?192.168.0.131? ( [83.249.127.91])
        by mx.google.com with ESMTP id o24sm797842ugd.2007.01.18.03.17.45;
        Thu, 18 Jan 2007 03:17:45 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <c2f9e9030701180054x3f1bc226wba8482a67d8aaca4@mail.gmail.com>
References: <c2f9e9030701180054x3f1bc226wba8482a67d8aaca4@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <A8562E0D-5F27-4993-8499-976B0C4E1934@gmail.com>
Content-Transfer-Encoding: 7bit
From: karl wettin <karl.wettin@gmail.com>
Subject: Re: search in all fields
Date: Thu, 18 Jan 2007 12:17:23 +0100
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org


18 jan 2007 kl. 09.54 skrev David:

> Hi all:
>     I study Lucene and I want build search on all the fields, I find
> MultiFieldQueryParser can search on multiple fields, but we must  
> specify
> fields. maybe we can add a field named all_field that contain all  
> the fields
> when indexing, but it make the index file larger.
>    so how to make search on all fields without specify any fields ?
> Appreciate your help!

You can use the IndexReader to see what fields is in an index.

<http://lucene.apache.org/java/docs/api/org/apache/lucene/index/ 
IndexReader.html#getFieldNames 
(org.apache.lucene.index.IndexReader.FieldOption)>

<http://lucene.apache.org/java/docs/api/org/apache/lucene/index/ 
IndexReader.FieldOption.html>

HTH

-- 
karl

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25570-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 18 13:49:20 2007
Return-Path: <java-user-return-25570-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76433 invoked from network); 18 Jan 2007 13:49:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Jan 2007 13:49:18 -0000
Received: (qmail 95477 invoked by uid 500); 18 Jan 2007 13:49:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95210 invoked by uid 500); 18 Jan 2007 13:49:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95199 invoked by uid 99); 18 Jan 2007 13:49:16 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Jan 2007 05:49:16 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=HTML_00_10,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of markrmiller@gmail.com designates 66.249.92.171 as permitted sender)
Received: from [66.249.92.171] (HELO ug-out-1314.google.com) (66.249.92.171)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Jan 2007 05:49:08 -0800
Received: by ug-out-1314.google.com with SMTP id k40so178599ugc
        for <java-user@lucene.apache.org>; Thu, 18 Jan 2007 05:48:47 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=D/mdEuEgfXwBFTkBTRTvooWGyg7oU1MRFMKotiZ420oVdbxpRAI8lSe5Cw+Jod6EX94vC4P/LCZ8RSR8+G7VMx5sGw5MQcvbQeNqdWWm6HPmvLEp5kcRG5KKVZj3PymflwV1jk9jPXwbOo89aVOyNluCO7sUHhhJi8DllzSejOU=
Received: by 10.82.118.2 with SMTP id q2mr178169buc.1169128127124;
        Thu, 18 Jan 2007 05:48:47 -0800 (PST)
Received: by 10.82.141.10 with HTTP; Thu, 18 Jan 2007 05:48:47 -0800 (PST)
Message-ID: <ab0709bf0701180548x5bfa8f0fr9712c2b6846048ea@mail.gmail.com>
Date: Thu, 18 Jan 2007 08:48:47 -0500
From: "Mark Miller" <markrmiller@gmail.com>
To: java-user@lucene.apache.org
Subject: rewriting wildcard query before highlighting
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_148453_18200528.1169128127100"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_148453_18200528.1169128127100
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Looking for opinions:

If I pass the reader of a large index to the query rewrite method just to
highlight a single doc it seems the query I generate will expand to much
more than I need. Would it be more efficient to make a RAM index with just
the doc to be highlighted and then pass the reader of that into the rewrite
method before highlighting a query that expands? This would also alleviate
having to get the reader for the large index (a synchronized call). No go?

- Mark

------=_Part_148453_18200528.1169128127100--

From java-user-return-25571-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 18 14:12:19 2007
Return-Path: <java-user-return-25571-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84669 invoked from network); 18 Jan 2007 14:12:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Jan 2007 14:12:18 -0000
Received: (qmail 40390 invoked by uid 500); 18 Jan 2007 14:12:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40277 invoked by uid 500); 18 Jan 2007 14:12:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40248 invoked by uid 99); 18 Jan 2007 14:12:18 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Jan 2007 06:12:18 -0800
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=FROM_HAS_ULINE_NUMS
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [217.146.189.96] (HELO web23411.mail.ird.yahoo.com) (217.146.189.96)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 18 Jan 2007 06:12:08 -0800
Received: (qmail 95143 invoked by uid 60001); 18 Jan 2007 14:11:46 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.de;
  h=X-YMail-OSG:Received:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=n+2VOvcATHvA1WgaVdNNrprmstbTk9OkRMT5relOBMQEkPTesQU+zIpmM1MCT8DuKIp6F1yh56nyZxRoSk3VaGBD1boOYrgz4ewhv1xde+MPAHF7hh8LwWcIgpodA1dA1Xb0D3Gt0CJUCdn7rX5R4HcCd/04fTAsj/wvd3ycmPo=;
X-YMail-OSG: iKTdlQ4VM1nLXFCxjhnLEqCCA7RlueT88UumR3dyuqkPxG9FixUlUVT4YWOK04y12RC_BvVXr8uS0zlizxFPtU6Z3EVZ81b_7zyfJXPPwFQ03Wk.WFgTuVVHvDc.SK0ryNpuJURryHAr
Received: from [132.230.129.203] by web23411.mail.ird.yahoo.com via HTTP; Thu, 18 Jan 2007 15:11:46 CET
Date: Thu, 18 Jan 2007 15:11:46 +0100 (CET)
From: Tomas Fischer <tomas_fischer99@yahoo.de>
Subject: meta information of hits
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
Message-ID: <360635.94935.qm@web23411.mail.ird.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi!

I got lost.

Short version:
Is it possible to index tons of files, execute a query
for word 'foo'.
Look at *each* hit in the 10 best files and receive
some meta information?


Extended version:
I have html like files, which I want to index with
Lucene.

FileA:
<tag1>
<tag2 attr1=a attr2=b> foo </tag2>
<tag2 attr1=c attr2=d> bar </tag2>
<tag2 attr1=e attr2=e> foo </tag2>
</tag1>

FileB:
<tag1>
<tag2 attr1=a attr2=d> foo </tag2>
<tag2 attr1=c attr2=d> bar </tag2>
</tag1>

How can I build the index, that if I search for 'foo',

all corresponding attributes for each hit are returned
from Lucene, but the
ranking is calculated over the files:
FileA a b foo [site ranking value for FileA]
FileA e e foo [site ranking value for FileA]
FileB a d foo [site ranking value for FileB]


First I tried to instance an Document with two fields
for each file. On field for the filename, 
the other one with the tokenized file content:

doc.add(new Field("filename", "FileA");
doc.add(new Field("content", new FileReader(FileA));

Then, the ranking is fine (each file has it own
value), but who can I find now the
specific hits 'foo' in the file with the corresponding
attributes?

Second I tried to add a Document for each word in the
file:

doc.add(new Field("filename", "FileA"))
doc.add(new Field("attr1", "a"))
doc.add(new Field("attr1", "b"))
doc.add(new Field("content", "foo"))

Now, a query returns each hit of 'foo', with the
corresponding attributes, but the ranking is
calculated about each hit, and not of the whole file.


What is the Lucene way to solve my problem?

Thanks.

Best regards,
Tomas




	
		
___________________________________________________________ 
Der frhe Vogel fngt den Wurm. Hier gelangen Sie zum neuen Yahoo! Mail: http://mail.yahoo.de

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25572-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 18 14:21:46 2007
Return-Path: <java-user-return-25572-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93304 invoked from network); 18 Jan 2007 14:21:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Jan 2007 14:21:46 -0000
Received: (qmail 56254 invoked by uid 500); 18 Jan 2007 14:21:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56230 invoked by uid 500); 18 Jan 2007 14:21:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56219 invoked by uid 99); 18 Jan 2007 14:21:45 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Jan 2007 06:21:45 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Jan 2007 06:21:35 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id CC6DB30EFC17; Thu, 18 Jan 2007 09:21:14 -0500 (EST)
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on javelina
X-Spam-Level: 
Received: from [10.0.1.3] (va-71-53-203-135.dhcp.embarqhsd.net [71.53.203.135])
	by ehatchersolutions.com (Postfix) with ESMTP id 55A1E30EFC17
	for <java-user@lucene.apache.org>; Thu, 18 Jan 2007 09:21:12 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <843481.80409.qm@web36611.mail.mud.yahoo.com>
References: <843481.80409.qm@web36611.mail.mud.yahoo.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <4A547CB9-796C-4799-A6A7-47C96EDEC6A6@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Integrated File parser available?
Date: Thu, 18 Jan 2007 09:21:06 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-0.8 required=5.0 tests=AWL,BAYES_00,
	RCVD_IN_SORBS_DUL autolearn=no version=3.1.1


On Jan 18, 2007, at 3:22 AM, Supheakmungkol SARIN wrote:
> I'd like to know whether there exists any integrated JAVA API that  
> we can use to parse most of today's popular file formats? Currently  
> I have been using one API for one file format and it's not so  
> convenient.

If you wrapped all your one-to-one mappings behind a single API,  
you'd have what you want :)  In fact, we did this in Lucene in  
Action's code, with a DocumentHandler interface.  It's simplistic,  
but you're welcome to borrow from it if you like.  http:// 
www.lucenebook.com

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25573-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 18 21:07:34 2007
Return-Path: <java-user-return-25573-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42950 invoked from network); 18 Jan 2007 21:07:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Jan 2007 21:07:33 -0000
Received: (qmail 78465 invoked by uid 500); 18 Jan 2007 21:07:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78439 invoked by uid 500); 18 Jan 2007 21:07:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78428 invoked by uid 99); 18 Jan 2007 21:07:32 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Jan 2007 13:07:32 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=HTML_00_10,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 66.249.92.169 as permitted sender)
Received: from [66.249.92.169] (HELO ug-out-1314.google.com) (66.249.92.169)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Jan 2007 13:07:23 -0800
Received: by ug-out-1314.google.com with SMTP id k40so286571ugc
        for <java-user@lucene.apache.org>; Thu, 18 Jan 2007 13:07:02 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=F3IWd5GwK0V/2xE+fyqzgaHoCQzoLU4AvtShveSQw1XXGpRS/s0BmsHdn1zgynrUcpwcsvDV2IMZFOvwV49WcCFBffi6+T1V/7TYIirAnA25KrgXGQUWTCHPXpDgbS/soOoELL9XIr+PTKLiFVRp9vXgezc7JDCEOnilxs7o0QA=
Received: by 10.82.172.15 with SMTP id u15mr357683bue.1169154421928;
        Thu, 18 Jan 2007 13:07:01 -0800 (PST)
Received: by 10.82.162.9 with HTTP; Thu, 18 Jan 2007 13:06:57 -0800 (PST)
Message-ID: <359a92830701181306k2d97c9d2we5e85ce08f008c06@mail.gmail.com>
Date: Thu, 18 Jan 2007 16:06:57 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Counting hits in a document
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_156286_30634032.1169154417783"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_156286_30634032.1169154417783
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi again.

I've been struggling for the last couple of days and getting nowhere, so
it's time to swallow my pride and say "Help"....

OK, let's say I have a document indexed and I do NOT have access to the raw
text. I need to find the offset of all the hits for a query on a single
document. Advice was offered a while ago to use getSpans from a spanquery,
but for the life of me I don't see how to make this work. As I remember,
Erik was talking about rewriting the original query as a set of spans.

The trouble I'm having is that I sure don't see how to rewrite the standard
query as a span query, then feed that back into my index for a particular
document (that I have a unique ID for). It seems that the getSpans looks
through my entire index, which is *probably* prohibitive.

I can make each part of the query into a SpanTermQuery. I can assemble these
together into a bunch of nested span queries. At the end of this, I have a
single Span query that I can call getSpans on. But what now? I don't see how
the spans relate to the document I need to focus on. From what I see of the
Spans interface, it's intended to look at the entire index rather than be
confined to a subset of the documents (in this case, exactly one.
Guaranteed).

I've thought about putting the documentID in a MUST clause of a
BooleanQuery, and adding my span query to that, but it doesn't look like
getSpans does me any good there.

I looked at the SrndQuery family and don't see anything there that lets me
get the offsets of my matches.

I don't have the text, so I can't highlight all the hits and count.

The code I've been writing feels like the wrong solution to the wrong
problem at the wrong time. Given that I know the document ID on the way in,
is my best bet to roll my own? That is, enumerate the relevant terms in my
document and measure the distance between the terms and aggregate the
results myself? I'd rather not do that, of course, but can if necessary.

I *want* someone to say "just call <fill in magic method here>"....

Any help greatly appreciated...

Thanks
Erick

------=_Part_156286_30634032.1169154417783--

From java-user-return-25574-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 18 21:27:57 2007
Return-Path: <java-user-return-25574-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 50761 invoked from network); 18 Jan 2007 21:27:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Jan 2007 21:27:57 -0000
Received: (qmail 12099 invoked by uid 500); 18 Jan 2007 21:27:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12066 invoked by uid 500); 18 Jan 2007 21:27:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12051 invoked by uid 99); 18 Jan 2007 21:27:56 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Jan 2007 13:27:56 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lucenelist2005@danielnaber.de designates 80.67.18.15 as permitted sender)
Received: from [80.67.18.15] (HELO smtprelay03.ispgateway.de) (80.67.18.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Jan 2007 13:27:46 -0800
Received: (qmail 3068 invoked from network); 18 Jan 2007 21:27:23 -0000
Received: from unknown (HELO p5496fcc0.dip.t-dialin.net) ([pbs]695637@[84.150.252.192])
          (envelope-sender <lucenelist2005@danielnaber.de>)
          by smtprelay03.ispgateway.de (qmail-ldap-1.03) with RC4-MD5 encrypted SMTP
          for <java-user@lucene.apache.org>; 18 Jan 2007 21:27:23 -0000
From: Daniel Naber <lucenelist2005@danielnaber.de>
To: java-user@lucene.apache.org
Subject: Re: rewriting wildcard query before highlighting
Date: Thu, 18 Jan 2007 22:28:04 +0100
User-Agent: KMail/1.8.2
References: <ab0709bf0701180548x5bfa8f0fr9712c2b6846048ea@mail.gmail.com>
In-Reply-To: <ab0709bf0701180548x5bfa8f0fr9712c2b6846048ea@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="us-ascii"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200701182228.04256@danielnaber.de>
X-Virus-Checked: Checked by ClamAV on apache.org

On Thursday 18 January 2007 14:48, Mark Miller wrote:

> Would it be more efficient to make a RAM index with just
> the doc to be highlighted and then pass the reader of that into the
> rewrite method before highlighting a query that expands?

Yes, that's a valid approach, especially using MemoryIndex instead of 
RAMdirectory.

Regards
 Daniel

-- 
http://www.danielnaber.de

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25575-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 18 22:00:35 2007
Return-Path: <java-user-return-25575-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59555 invoked from network); 18 Jan 2007 22:00:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Jan 2007 22:00:35 -0000
Received: (qmail 62853 invoked by uid 500); 18 Jan 2007 22:00:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62819 invoked by uid 500); 18 Jan 2007 22:00:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62808 invoked by uid 99); 18 Jan 2007 22:00:34 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Jan 2007 14:00:34 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Jan 2007 14:00:25 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 952175B766; Thu, 18 Jan 2007 14:00:04 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 8CC5F7F403
	for <java-user@lucene.apache.org>; Thu, 18 Jan 2007 14:00:04 -0800 (PST)
Date: Thu, 18 Jan 2007 14:00:04 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Counting hits in a document
In-Reply-To: <359a92830701181306k2d97c9d2we5e85ce08f008c06@mail.gmail.com>
Message-ID: <Pine.LNX.4.58.0701181355250.5096@hal.rescomp.berkeley.edu>
References: <359a92830701181306k2d97c9d2we5e85ce08f008c06@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


The Spans interface has a skipTo for jumping to a specific documentId (or
the first matching document with a higher documentId)
once you've done that, then the doc(), start(), and end() calls will tell
you info about the match (which doc it's in, where that match starts, nd
where it ends) ... use next() to advance tothe next match -- if doc()
returns the same number as before, then you've got two matches in one
document, if doc returns a new number, you have finished with the matches
in that document, and moved on to the next matching document.

the key to all of this is that if you want to find docs matching "+FOO
+BAR" and then find where exactly the instances of FOO and BAR are you can
do one query to get the matching docIds in whatever order you want, then
use seperate SpamTermQUeries to find where exactly each term is.


: Date: Thu, 18 Jan 2007 16:06:57 -0500
: From: Erick Erickson <erickerickson@gmail.com>
: Reply-To: java-user@lucene.apache.org
: To: java-user@lucene.apache.org
: Subject: Counting hits in a document
:
: Hi again.
:
: I've been struggling for the last couple of days and getting nowhere, so
: it's time to swallow my pride and say "Help"....
:
: OK, let's say I have a document indexed and I do NOT have access to the raw
: text. I need to find the offset of all the hits for a query on a single
: document. Advice was offered a while ago to use getSpans from a spanquery,
: but for the life of me I don't see how to make this work. As I remember,
: Erik was talking about rewriting the original query as a set of spans.
:
: The trouble I'm having is that I sure don't see how to rewrite the standard
: query as a span query, then feed that back into my index for a particular
: document (that I have a unique ID for). It seems that the getSpans looks
: through my entire index, which is *probably* prohibitive.
:
: I can make each part of the query into a SpanTermQuery. I can assemble these
: together into a bunch of nested span queries. At the end of this, I have a
: single Span query that I can call getSpans on. But what now? I don't see how
: the spans relate to the document I need to focus on. From what I see of the
: Spans interface, it's intended to look at the entire index rather than be
: confined to a subset of the documents (in this case, exactly one.
: Guaranteed).
:
: I've thought about putting the documentID in a MUST clause of a
: BooleanQuery, and adding my span query to that, but it doesn't look like
: getSpans does me any good there.
:
: I looked at the SrndQuery family and don't see anything there that lets me
: get the offsets of my matches.
:
: I don't have the text, so I can't highlight all the hits and count.
:
: The code I've been writing feels like the wrong solution to the wrong
: problem at the wrong time. Given that I know the document ID on the way in,
: is my best bet to roll my own? That is, enumerate the relevant terms in my
: document and measure the distance between the terms and aggregate the
: results myself? I'd rather not do that, of course, but can if necessary.
:
: I *want* someone to say "just call <fill in magic method here>"....
:
: Any help greatly appreciated...
:
: Thanks
: Erick
:



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25576-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 18 22:06:35 2007
Return-Path: <java-user-return-25576-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62112 invoked from network); 18 Jan 2007 22:06:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Jan 2007 22:06:34 -0000
Received: (qmail 71498 invoked by uid 500); 18 Jan 2007 22:06:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71462 invoked by uid 500); 18 Jan 2007 22:06:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71451 invoked by uid 99); 18 Jan 2007 22:06:34 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Jan 2007 14:06:34 -0800
X-ASF-Spam-Status: No, hits=0.3 required=10.0
	tests=MAILTO_TO_SPAM_ADDR
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Jan 2007 14:06:25 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 8A7405B766; Thu, 18 Jan 2007 14:06:05 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 6AA897F403
	for <java-user@lucene.apache.org>; Thu, 18 Jan 2007 14:06:05 -0800 (PST)
Date: Thu, 18 Jan 2007 14:06:05 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Searching/indexing date/time values or numeric values?
In-Reply-To: <OF2FA65522.BD7CA137-ON88257266.006B7291-88257266.006F49D1@il.ibm.com>
Message-ID: <Pine.LNX.4.58.0701181401560.5096@hal.rescomp.berkeley.edu>
References: <OF2FA65522.BD7CA137-ON88257266.006B7291-88257266.006F49D1@il.ibm.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org



NumberTools in the lucene java code base can handle any long regardless of
size ... if you look at NumberUtils in the Solr code base you'll find lots
of great utilities for dealing with ints, longs, floats, and doubles.


: Date: Wed, 17 Jan 2007 12:15:33 -0800
: From: Doron Cohen <DORONC@il.ibm.com>
: Reply-To: java-user@lucene.apache.org
: To: java-user@lucene.apache.org
: Subject: Re: Searching/indexing date/time values or numeric values?
:
: John Song <delphi329@yahoo.com> wrote on 17/01/2007 11:09:40:
:
: > ultimately, everything is text search.  For decimal number, what you
: > do is to write a customized analyzer which multiple the number by
: > some factor, round it to a long and then use NumberTools to convert
: > that into a text string.  Here is what I did for latitude/longitude
: > search: multiple it by 10e6.
: >
:
: For most cases this would be sufficient.
:
: Won't work if multiplying by precision takes beyond Long.MAX.
: I think an alternative that would work in that case too could
: be to prefix X with P, where:
: X == original number.
: K == number of digits left side of decimal point.
: P == lexicographically valid representation of K.
:
: P is defined as "n0"+D+"n", where D is a one char
: representation of K, that is: '0', .. '9','a'..'z'.
:
: Examples for values of K, prefix P, and result string S:
: X=.17   K=0 P=n00n S=n00n_.17
: X=0.170 K=0 P=n00n S=n00n_.17  (no leading/trailing redundant zeros)
: X=5.8   K=1 P=n01n S=n01n_5.8
: X=17.66 K=2 P=n02n S=n02n_17.66
: ...
: X=123456789.22    K=9  P=n09n  S=n09n_123456789.22
: X=1234567890.22   K=10 P=n0an  S=n0an_1234567890.22
: X=12345678901.22  K=11 P=n0bn  S=n0bn_12345678901.22
: X=123456789012.22 K=12 P=n0cn  S=n0cn_123456789012.22
:
: You get the idea - the prefix prevents the sorting error.
: No special care required for the fraction part.
:
: Negative values can work using 'm' instead of 'n' in the
: prefix, e.g.:
: X=-123456789.22    K=9  P=n09n  S=m09m_123456789.22
:
: This should work for long values as well.
: I like the fixed length prefix.
: But code for this would need to be written...
:
: > john
: >
: > ----- Original Message ----
: > From: Jiho Han <jhan@InfinityInfo.com>
: > To: java-user@lucene.apache.org
: > Sent: Wednesday, January 17, 2007 10:13:47 AM
: > Subject: Searching/indexing date/time values or numeric values?
: >
: > Is there a way to index/search so that a query could be written to
: > search on a field using arithmetic comparison operators?
: >
: > What I mean is if I had a date/time field called CREATEDATE, I would
: > search for all documents where:
: >
: > CREATEDATE > "1/1/2007"
: >
: > The above is obvisouly pseudo-query expression.  I did find something
: > called Range searches on the query syntax documentation page and it says
: > the sorting is done lexicographically.  I guess that means it's sorted
: > by letter.  I would then need to store all my date/time values in a
: > format like yyyymmdd hh:mm:ss.
: > And search, CREATEDATE:[20070101 00:00:00 TO 20070118 00:00:00], where
: > the second date/time value is something like midnight tonight.
: >
: > But what about a decimal value?  If I have a VERSION field where values
: > are like 1.0, 2.5, 11.3, etc.  That wouldn't work.  Because the values
: > would be sorted:
: > 1.0
: > 11.3
: > 2.5
: > In that order.  And if I do VERSION:[1.0 TO 3.0], search would return
: > all 3 of them.  The only workaround seems to be prepending 0's and that
: > would also only work as long as the maximum digits for the interger part
: > is known ahead of time.
: >
: > Can someone verify/suggest ways to make this work?
: > Thanks
: >
: > Jiho Han
: > Senior Software Engineer
: > Infinity Info Systems
: > The Sales Technology Experts
: > Tel: 212.563.4400 x6375
: > Fax: 212.760.0540
: > jhan@infinityinfo.com
: > www.infinityinfo.com <http://www.infinityinfo.com/>
: >
: >
: >
: > ---------------------------------------------------------------------
: > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
: > For additional commands, e-mail: java-user-help@lucene.apache.org
: >
: >
: >
: >
: >
: >
: >
: >
: ____________________________________________________________________________________
:
: > Cheap talk?
: > Check out Yahoo! Messenger's low PC-to-Phone call rates.
: > http://voice.yahoo.com
: >
: > ---------------------------------------------------------------------
: > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
: > For additional commands, e-mail: java-user-help@lucene.apache.org
: >
:
:
: ---------------------------------------------------------------------
: To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
: For additional commands, e-mail: java-user-help@lucene.apache.org
:



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25577-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 18 22:14:22 2007
Return-Path: <java-user-return-25577-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64795 invoked from network); 18 Jan 2007 22:14:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Jan 2007 22:14:21 -0000
Received: (qmail 85979 invoked by uid 500); 18 Jan 2007 22:14:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85951 invoked by uid 500); 18 Jan 2007 22:14:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85940 invoked by uid 99); 18 Jan 2007 22:14:21 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Jan 2007 14:14:21 -0800
X-ASF-Spam-Status: No, hits=0.3 required=10.0
	tests=PLING_QUERY
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Jan 2007 14:14:12 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 9069B5B780; Thu, 18 Jan 2007 14:13:52 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 87EE57F403
	for <java-user@lucene.apache.org>; Thu, 18 Jan 2007 14:13:52 -0800 (PST)
Date: Thu, 18 Jan 2007 14:13:52 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: how to make RangeQuery action as > < != operators?
In-Reply-To: <c2f9e9030701180213n25f4665cj272a087b73cbf7dd@mail.gmail.com>
Message-ID: <Pine.LNX.4.58.0701181410500.5096@hal.rescomp.berkeley.edu>
References: <c2f9e9030701180213n25f4665cj272a087b73cbf7dd@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


1) "!=" is really not a range operation at all.
2) if you look at the javadocs for RangeQuery you will see...

  Constructs a query selecting all terms greater than lowerTerm but less
  than upperTerm. There must be at least one term and either term may be
  null, in which case there is no bound on that side, but if there are two
  terms, both terms must be for the same field.

...which explains how you can get a <, <=, >, and >= queries.

3) don't use RangeQuery ... use ConstantScoreRange ... the mailing list
archives have lots of discussion on why it's better and what the limited
use cases are where using a RangeQuery may make sense.



: Date: Thu, 18 Jan 2007 18:13:41 +0800
: From: David <zhouchengly@gmail.com>
: Reply-To: java-user@lucene.apache.org
: To: java-user@lucene.apache.org
: Subject: how to make RangeQuery action as > < != operators?
:
: Hi all:
:     I need to make range query actions as > < and != operators, The
: RangeQuery class just support RangeQuery(begin, end, inclusive), but How to
: support > < and != ?
:
: Appreciate your help!
:
: --
: David
:



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25578-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 18 22:22:56 2007
Return-Path: <java-user-return-25578-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67769 invoked from network); 18 Jan 2007 22:22:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Jan 2007 22:22:54 -0000
Received: (qmail 95306 invoked by uid 500); 18 Jan 2007 22:22:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95272 invoked by uid 500); 18 Jan 2007 22:22:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95261 invoked by uid 99); 18 Jan 2007 22:22:55 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Jan 2007 14:22:55 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Jan 2007 14:22:45 -0800
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1H7feK-0003Gj-Sg
	for java-user@lucene.apache.org; Thu, 18 Jan 2007 14:22:24 -0800
Message-ID: <8440390.post@talk.nabble.com>
Date: Thu, 18 Jan 2007 14:22:24 -0800 (PST)
From: Vagelis Kotsonis <kotsonis.v@gmail.com>
To: java-user@lucene.apache.org
Subject: custom similarity based on tf but greater than 1.0
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: kotsonis.v@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hi all.
I am trying to make some experiments in an algorithm that scores results by
counting how many words of the query submited are in a document.

For example if i enter the query 

A B D A

The similarities I want to get for the documents follows:

A A C F D (2-found A and D)
A B D S S A (3 - found A, B and D)
D D D (1 - only found D)

I built a Similarity that actually sets everything's price as 1.0f except tf

The tf functions returns 1.0f if freq>0 and 0.0f else.

I think that this change does count what I want, but when it comes to show
the score, all are normalized. So, the greater similarity is equal to 1.0f
and the others are lower than 1.0f

How can I "deactivate" the score normalization?

Thank you!

I want to 
-- 
View this message in context: http://www.nabble.com/custom-similarity-based-on-tf-but-greater-than-1.0-tf3037071.html#a8440390
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25579-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 18 22:27:15 2007
Return-Path: <java-user-return-25579-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70638 invoked from network); 18 Jan 2007 22:27:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Jan 2007 22:27:14 -0000
Received: (qmail 4159 invoked by uid 500); 18 Jan 2007 22:27:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4124 invoked by uid 500); 18 Jan 2007 22:27:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4113 invoked by uid 99); 18 Jan 2007 22:27:13 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Jan 2007 14:27:13 -0800
X-ASF-Spam-Status: No, hits=0.3 required=10.0
	tests=MAILTO_TO_SPAM_ADDR,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of DORONC@il.ibm.com designates 195.212.29.135 as permitted sender)
Received: from [195.212.29.135] (HELO mtagate2.uk.ibm.com) (195.212.29.135)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Jan 2007 14:27:02 -0800
Received: from d12nrmr1607.megacenter.de.ibm.com (d12nrmr1607.megacenter.de.ibm.com [9.149.167.49])
	by mtagate2.uk.ibm.com (8.13.8/8.13.8) with ESMTP id l0IMQedW059890
	for <java-user@lucene.apache.org>; Thu, 18 Jan 2007 22:26:40 GMT
Received: from d12av02.megacenter.de.ibm.com (d12av02.megacenter.de.ibm.com [9.149.165.228])
	by d12nrmr1607.megacenter.de.ibm.com (8.13.8/8.13.8/NCO v8.2) with ESMTP id l0IMQerW2715886
	for <java-user@lucene.apache.org>; Thu, 18 Jan 2007 23:26:40 +0100
Received: from d12av02.megacenter.de.ibm.com (loopback [127.0.0.1])
	by d12av02.megacenter.de.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id l0IMQeSj015849
	for <java-user@lucene.apache.org>; Thu, 18 Jan 2007 23:26:40 +0100
Received: from d12mc102.megacenter.de.ibm.com (d12mc102.megacenter.de.ibm.com [9.149.167.114])
	by d12av02.megacenter.de.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id l0IMQeT6015846
	for <java-user@lucene.apache.org>; Thu, 18 Jan 2007 23:26:40 +0100
In-Reply-To: <Pine.LNX.4.58.0701181401560.5096@hal.rescomp.berkeley.edu>
Subject: Re: Searching/indexing date/time values or numeric values?
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 7.0 HF277 June 21, 2006
Message-ID: <OF4DD12061.68D6B171-ON88257267.007A9F39-88257267.007B1715@il.ibm.com>
From: Doron Cohen <DORONC@il.ibm.com>
Date: Thu, 18 Jan 2007 14:24:28 -0800
X-MIMETrack: Serialize by Router on D12MC102/12/M/IBM(Release 7.0.2HF71 | November 3, 2006) at
 19/01/2007 00:26:39
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org

Chris Hostetter <hossman_lucene@fucit.org> wrote on 18/01/2007 14:06:05:

>
>
> NumberTools in the lucene java code base can handle any long regardless
of
> size ...

That's true, just that John's suggested to multiply by e.g. 10e6
might exceed Long.MAX_VALUE (before even applying NumberTools).

> if you look at NumberUtils in the Solr code base you'll find lots
> of great utilities for dealing with ints, longs, floats, and doubles.
>
>
> : Date: Wed, 17 Jan 2007 12:15:33 -0800
> : From: Doron Cohen <DORONC@il.ibm.com>
> : Reply-To: java-user@lucene.apache.org
> : To: java-user@lucene.apache.org
> : Subject: Re: Searching/indexing date/time values or numeric values?
> :
> : John Song <delphi329@yahoo.com> wrote on 17/01/2007 11:09:40:
> :
> : > ultimately, everything is text search.  For decimal number, what you
> : > do is to write a customized analyzer which multiple the number by
> : > some factor, round it to a long and then use NumberTools to convert
> : > that into a text string.  Here is what I did for latitude/longitude
> : > search: multiple it by 10e6.
> : >
> :
> : For most cases this would be sufficient.
> :
> : Won't work if multiplying by precision takes beyond Long.MAX.
> : I think an alternative that would work in that case too could
> : be to prefix X with P, where:
> : X == original number.
> : K == number of digits left side of decimal point.
> : P == lexicographically valid representation of K.
> :
> : P is defined as "n0"+D+"n", where D is a one char
> : representation of K, that is: '0', .. '9','a'..'z'.
> :
> : Examples for values of K, prefix P, and result string S:
> : X=.17   K=0 P=n00n S=n00n_.17
> : X=0.170 K=0 P=n00n S=n00n_.17  (no leading/trailing redundant zeros)
> : X=5.8   K=1 P=n01n S=n01n_5.8
> : X=17.66 K=2 P=n02n S=n02n_17.66
> : ...
> : X=123456789.22    K=9  P=n09n  S=n09n_123456789.22
> : X=1234567890.22   K=10 P=n0an  S=n0an_1234567890.22
> : X=12345678901.22  K=11 P=n0bn  S=n0bn_12345678901.22
> : X=123456789012.22 K=12 P=n0cn  S=n0cn_123456789012.22
> :
> : You get the idea - the prefix prevents the sorting error.
> : No special care required for the fraction part.
> :
> : Negative values can work using 'm' instead of 'n' in the
> : prefix, e.g.:
> : X=-123456789.22    K=9  P=n09n  S=m09m_123456789.22
> :
> : This should work for long values as well.
> : I like the fixed length prefix.
> : But code for this would need to be written...
> :
> : > john
> : >
> : > ----- Original Message ----
> : > From: Jiho Han <jhan@InfinityInfo.com>
> : > To: java-user@lucene.apache.org
> : > Sent: Wednesday, January 17, 2007 10:13:47 AM
> : > Subject: Searching/indexing date/time values or numeric values?
> : >
> : > Is there a way to index/search so that a query could be written to
> : > search on a field using arithmetic comparison operators?
> : >
> : > What I mean is if I had a date/time field called CREATEDATE, I would
> : > search for all documents where:
> : >
> : > CREATEDATE > "1/1/2007"
> : >
> : > The above is obvisouly pseudo-query expression.  I did find something
> : > called Range searches on the query syntax documentation page and it
says
> : > the sorting is done lexicographically.  I guess that means it's
sorted
> : > by letter.  I would then need to store all my date/time values in a
> : > format like yyyymmdd hh:mm:ss.
> : > And search, CREATEDATE:[20070101 00:00:00 TO 20070118 00:00:00],
where
> : > the second date/time value is something like midnight tonight.
> : >
> : > But what about a decimal value?  If I have a VERSION field where
values
> : > are like 1.0, 2.5, 11.3, etc.  That wouldn't work.  Because the
values
> : > would be sorted:
> : > 1.0
> : > 11.3
> : > 2.5
> : > In that order.  And if I do VERSION:[1.0 TO 3.0], search would return
> : > all 3 of them.  The only workaround seems to be prepending 0's and
that
> : > would also only work as long as the maximum digits for the interger
part
> : > is known ahead of time.
> : >
> : > Can someone verify/suggest ways to make this work?
> : > Thanks
> : >
> : > Jiho Han
> : > Senior Software Engineer
> : > Infinity Info Systems
> : > The Sales Technology Experts
> : > Tel: 212.563.4400 x6375
> : > Fax: 212.760.0540
> : > jhan@infinityinfo.com
> : > www.infinityinfo.com <http://www.infinityinfo.com/>
> : >
> : >
> : >
> : > ---------------------------------------------------------------------
> : > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> : > For additional commands, e-mail: java-user-help@lucene.apache.org
> : >
> : >
> : >
> : >
> : >
> : >
> : >
> : >
> :
>
____________________________________________________________________________________

> :
> : > Cheap talk?
> : > Check out Yahoo! Messenger's low PC-to-Phone call rates.
> : > http://voice.yahoo.com
> : >
> : > ---------------------------------------------------------------------
> : > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> : > For additional commands, e-mail: java-user-help@lucene.apache.org
> : >
> :
> :
> : ---------------------------------------------------------------------
> : To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> : For additional commands, e-mail: java-user-help@lucene.apache.org
> :
>
>
>
> -Hoss
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25580-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 18 22:36:21 2007
Return-Path: <java-user-return-25580-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75262 invoked from network); 18 Jan 2007 22:36:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Jan 2007 22:36:20 -0000
Received: (qmail 17162 invoked by uid 500); 18 Jan 2007 22:36:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16668 invoked by uid 500); 18 Jan 2007 22:36:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16657 invoked by uid 99); 18 Jan 2007 22:36:20 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Jan 2007 14:36:20 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of markrmiller@gmail.com designates 66.249.82.232 as permitted sender)
Received: from [66.249.82.232] (HELO wx-out-0506.google.com) (66.249.82.232)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Jan 2007 14:36:10 -0800
Received: by wx-out-0506.google.com with SMTP id i29so295833wxd
        for <java-user@lucene.apache.org>; Thu, 18 Jan 2007 14:35:49 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=uZOgQuc2T8S940jYOQxC+TZ2xZvk2RRVsNiZKeTbiIaSJ8tGELcCn8KQ4ZPvHRQ3iVR8Z1ctK9uewWvUaFKbjPU3TC7dHEKelXWtOe8/tM6tNRsMGlYDOsTGz77hyW/EnLidWND+XrIf1gRBkeCaoTVRyOGHqcB+iJuy6p+Zaz0=
Received: by 10.90.75.10 with SMTP id x10mr2078911aga.1169159749278;
        Thu, 18 Jan 2007 14:35:49 -0800 (PST)
Received: from ?192.168.1.103? ( [216.66.114.42])
        by mx.google.com with ESMTP id 12sm3330793wrl.2007.01.18.14.35.47;
        Thu, 18 Jan 2007 14:35:48 -0800 (PST)
Message-ID: <45AFF665.5010905@gmail.com>
Date: Thu, 18 Jan 2007 17:36:21 -0500
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 1.5.0.9 (Windows/20061207)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: custom similarity based on tf but greater than 1.0
References: <8440390.post@talk.nabble.com>
In-Reply-To: <8440390.post@talk.nabble.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

I just did the same thing. If you search the list you'll find the thread 
where Hoss gave me the info you need. It really comes down to makeing a 
FakeNormsIndexReader. The problem you are having is a result of the 
field size normalization.

- mark

Vagelis Kotsonis wrote:
> Hi all.
> I am trying to make some experiments in an algorithm that scores results by
> counting how many words of the query submited are in a document.
>
> For example if i enter the query 
>
> A B D A
>
> The similarities I want to get for the documents follows:
>
> A A C F D (2-found A and D)
> A B D S S A (3 - found A, B and D)
> D D D (1 - only found D)
>
> I built a Similarity that actually sets everything's price as 1.0f except tf
>
> The tf functions returns 1.0f if freq>0 and 0.0f else.
>
> I think that this change does count what I want, but when it comes to show
> the score, all are normalized. So, the greater similarity is equal to 1.0f
> and the others are lower than 1.0f
>
> How can I "deactivate" the score normalization?
>
> Thank you!
>
> I want to 
>   

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25581-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 18 23:15:53 2007
Return-Path: <java-user-return-25581-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95136 invoked from network); 18 Jan 2007 23:15:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Jan 2007 23:15:52 -0000
Received: (qmail 76101 invoked by uid 500); 18 Jan 2007 23:15:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76064 invoked by uid 500); 18 Jan 2007 23:15:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76053 invoked by uid 99); 18 Jan 2007 23:15:53 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Jan 2007 15:15:53 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of markrmiller@gmail.com designates 64.233.184.234 as permitted sender)
Received: from [64.233.184.234] (HELO wr-out-0506.google.com) (64.233.184.234)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Jan 2007 15:15:43 -0800
Received: by wr-out-0506.google.com with SMTP id i3so310438wra
        for <java-user@lucene.apache.org>; Thu, 18 Jan 2007 15:15:23 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=W+Xrj9td/nYzbg6tOy1LE6WVeS8hns8Mnv44YiV0UmUsrXX+sQiytq/g8CIu+nzqbv6C6nY750P61/zexiem9+RNyXNHs+XXQM651Jn+bu1ZZGcPBqq1izACQ6/Yzie/hSzEj44RJLCZCIHUhiCPL5NqcrJKkPqz4SeCFC4MoG8=
Received: by 10.90.88.13 with SMTP id l13mr2130027agb.1169162122524;
        Thu, 18 Jan 2007 15:15:22 -0800 (PST)
Received: from ?192.168.1.103? ( [216.66.114.42])
        by mx.google.com with ESMTP id 66sm2395113wra.2007.01.18.15.15.20;
        Thu, 18 Jan 2007 15:15:21 -0800 (PST)
Message-ID: <45AFFF87.6040608@gmail.com>
Date: Thu, 18 Jan 2007 18:15:19 -0500
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 1.5.0.9 (Windows/20061207)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Counting hits in a document
References: <359a92830701181306k2d97c9d2we5e85ce08f008c06@mail.gmail.com>
In-Reply-To: <359a92830701181306k2d97c9d2we5e85ce08f008c06@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Just threw together a highlighter that can handle spans (combining a 
rewrite with dumspans from LIA) and used this: 
http://issues.apache.org/bugzilla/attachment.cgi?id=15568

Nice spans extractor from Mark (not me <G>). Give it a query it will 
give you the spans.

- Mark

Erick Erickson wrote:
> Hi again.
>
> I've been struggling for the last couple of days and getting nowhere, so
> it's time to swallow my pride and say "Help"....
>
> OK, let's say I have a document indexed and I do NOT have access to 
> the raw
> text. I need to find the offset of all the hits for a query on a single
> document. Advice was offered a while ago to use getSpans from a 
> spanquery,
> but for the life of me I don't see how to make this work. As I remember,
> Erik was talking about rewriting the original query as a set of spans.
>
> The trouble I'm having is that I sure don't see how to rewrite the 
> standard
> query as a span query, then feed that back into my index for a particular
> document (that I have a unique ID for). It seems that the getSpans looks
> through my entire index, which is *probably* prohibitive.
>
> I can make each part of the query into a SpanTermQuery. I can assemble 
> these
> together into a bunch of nested span queries. At the end of this, I 
> have a
> single Span query that I can call getSpans on. But what now? I don't 
> see how
> the spans relate to the document I need to focus on. From what I see 
> of the
> Spans interface, it's intended to look at the entire index rather than be
> confined to a subset of the documents (in this case, exactly one.
> Guaranteed).
>
> I've thought about putting the documentID in a MUST clause of a
> BooleanQuery, and adding my span query to that, but it doesn't look like
> getSpans does me any good there.
>
> I looked at the SrndQuery family and don't see anything there that 
> lets me
> get the offsets of my matches.
>
> I don't have the text, so I can't highlight all the hits and count.
>
> The code I've been writing feels like the wrong solution to the wrong
> problem at the wrong time. Given that I know the document ID on the 
> way in,
> is my best bet to roll my own? That is, enumerate the relevant terms 
> in my
> document and measure the distance between the terms and aggregate the
> results myself? I'd rather not do that, of course, but can if necessary.
>
> I *want* someone to say "just call <fill in magic method here>"....
>
> Any help greatly appreciated...
>
> Thanks
> Erick
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25582-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 18 23:19:09 2007
Return-Path: <java-user-return-25582-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95774 invoked from network); 18 Jan 2007 23:19:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Jan 2007 23:19:07 -0000
Received: (qmail 79401 invoked by uid 500); 18 Jan 2007 23:19:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79361 invoked by uid 500); 18 Jan 2007 23:19:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79350 invoked by uid 99); 18 Jan 2007 23:19:08 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Jan 2007 15:19:08 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Jan 2007 15:18:57 -0800
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1H7gWi-0004Jl-Te
	for java-user@lucene.apache.org; Thu, 18 Jan 2007 15:18:36 -0800
Message-ID: <8441331.post@talk.nabble.com>
Date: Thu, 18 Jan 2007 15:18:36 -0800 (PST)
From: Vagelis Kotsonis <kotsonis.v@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: custom similarity based on tf but greater than 1.0
In-Reply-To: <45AFF665.5010905@gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: kotsonis.v@gmail.com
References: <8440390.post@talk.nabble.com> <45AFF665.5010905@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Before I make this questions I have been looking the list for over 2 hours
and I didn't find something to make me understand how to do what I want.

After you sent the message I made a quick pass through all your messages,
but I didn't find something. I also searched for FakeNormsIndexReader and
still didn't find something.

Can you plz tell me, if you remember, how you did it? 

Thank you!
Vagelis


markrmiller wrote:
> 
> I just did the same thing. If you search the list you'll find the thread 
> where Hoss gave me the info you need. It really comes down to makeing a 
> FakeNormsIndexReader. The problem you are having is a result of the 
> field size normalization.
> 
> - mark
> 
-- 
View this message in context: http://www.nabble.com/custom-similarity-based-on-tf-but-greater-than-1.0-tf3037071.html#a8441331
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25583-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 18 23:29:32 2007
Return-Path: <java-user-return-25583-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98134 invoked from network); 18 Jan 2007 23:29:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Jan 2007 23:29:31 -0000
Received: (qmail 90608 invoked by uid 500); 18 Jan 2007 23:29:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90573 invoked by uid 500); 18 Jan 2007 23:29:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90562 invoked by uid 99); 18 Jan 2007 23:29:32 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Jan 2007 15:29:32 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 66.249.92.175 as permitted sender)
Received: from [66.249.92.175] (HELO ug-out-1314.google.com) (66.249.92.175)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Jan 2007 15:29:23 -0800
Received: by ug-out-1314.google.com with SMTP id k40so315205ugc
        for <java-user@lucene.apache.org>; Thu, 18 Jan 2007 15:29:01 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=YPKFbcYG4XNnkTAwXg508Md0hZhTowReWyZ0iIaZmXkt8G4NPU9zgfR13KeSovu22rJPKrexnNXEmc1F8dFyMVPLNLPEvGoGhYA/TodbZHKvC5aEsGrtobbSVcHqXsPkhZbIWMT/C8gTU4qV9KvU7qXbLTidRIGUlTzpZdg4vYU=
Received: by 10.82.152.16 with SMTP id z16mr382621bud.1169162941193;
        Thu, 18 Jan 2007 15:29:01 -0800 (PST)
Received: by 10.82.162.9 with HTTP; Thu, 18 Jan 2007 15:29:01 -0800 (PST)
Message-ID: <359a92830701181529l5fda4835jadfd54e2f02478f9@mail.gmail.com>
Date: Thu, 18 Jan 2007 18:29:01 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Counting hits in a document
In-Reply-To: <45AFFF87.6040608@gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_159063_8633415.1169162941044"
References: <359a92830701181306k2d97c9d2we5e85ce08f008c06@mail.gmail.com>
	 <45AFFF87.6040608@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_159063_8633415.1169162941044
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hoss:

It was late this afternooon and I was square-eyed, so I didn't add the
detail. The app we're working on first returns a summary list of all the
books that match a query, no hit information. Next, the user clicks on a
returned title and we show the hits by chapter. That is, a list of chapters
and the count of the hits for each. The index is nearing 15G at present, so
I *assumed* that I really didn't want to re-query the entire index when I
know the particular document I care about already. But what do I know?

Mark:

Very most excellent. I'll give it a look in the morning. I hope that the
class doesn't need the raw text since I don't have it any more, but your
comment "Give it a query it will give you the spans" makes me hopeful.



The real issue is that it looks like I'm reverting to my old "C" days. The
code I was writing the last couple of days started to look like a program
from...well...a long time ago. So I *know* it must be wrong <G>...... It's a
real pain in the neck to *think* in Java terms when much of my training was
before this new-fangled way of looking at programming problems happened. I
suppose I could go into management, but that would be giving in to the dark
side....

Thanks all
Erick


On 1/18/07, Mark Miller <markrmiller@gmail.com> wrote:
>
> Just threw together a highlighter that can handle spans (combining a
> rewrite with dumspans from LIA) and used this:
> http://issues.apache.org/bugzilla/attachment.cgi?id=15568
>
> Nice spans extractor from Mark (not me <G>). Give it a query it will
> give you the spans.
>
> - Mark
>
> Erick Erickson wrote:
> > Hi again.
> >
> > I've been struggling for the last couple of days and getting nowhere, so
> > it's time to swallow my pride and say "Help"....
> >
> > OK, let's say I have a document indexed and I do NOT have access to
> > the raw
> > text. I need to find the offset of all the hits for a query on a single
> > document. Advice was offered a while ago to use getSpans from a
> > spanquery,
> > but for the life of me I don't see how to make this work. As I remember,
> > Erik was talking about rewriting the original query as a set of spans.
> >
> > The trouble I'm having is that I sure don't see how to rewrite the
> > standard
> > query as a span query, then feed that back into my index for a
> particular
> > document (that I have a unique ID for). It seems that the getSpans looks
> > through my entire index, which is *probably* prohibitive.
> >
> > I can make each part of the query into a SpanTermQuery. I can assemble
> > these
> > together into a bunch of nested span queries. At the end of this, I
> > have a
> > single Span query that I can call getSpans on. But what now? I don't
> > see how
> > the spans relate to the document I need to focus on. From what I see
> > of the
> > Spans interface, it's intended to look at the entire index rather than
> be
> > confined to a subset of the documents (in this case, exactly one.
> > Guaranteed).
> >
> > I've thought about putting the documentID in a MUST clause of a
> > BooleanQuery, and adding my span query to that, but it doesn't look like
> > getSpans does me any good there.
> >
> > I looked at the SrndQuery family and don't see anything there that
> > lets me
> > get the offsets of my matches.
> >
> > I don't have the text, so I can't highlight all the hits and count.
> >
> > The code I've been writing feels like the wrong solution to the wrong
> > problem at the wrong time. Given that I know the document ID on the
> > way in,
> > is my best bet to roll my own? That is, enumerate the relevant terms
> > in my
> > document and measure the distance between the terms and aggregate the
> > results myself? I'd rather not do that, of course, but can if necessary.
> >
> > I *want* someone to say "just call <fill in magic method here>"....
> >
> > Any help greatly appreciated...
> >
> > Thanks
> > Erick
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_159063_8633415.1169162941044--

From java-user-return-25584-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 18 23:43:54 2007
Return-Path: <java-user-return-25584-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5580 invoked from network); 18 Jan 2007 23:43:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Jan 2007 23:43:53 -0000
Received: (qmail 11297 invoked by uid 500); 18 Jan 2007 23:43:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11260 invoked by uid 500); 18 Jan 2007 23:43:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11249 invoked by uid 99); 18 Jan 2007 23:43:53 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Jan 2007 15:43:53 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of markrmiller@gmail.com designates 64.233.184.234 as permitted sender)
Received: from [64.233.184.234] (HELO wr-out-0506.google.com) (64.233.184.234)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Jan 2007 15:43:43 -0800
Received: by wr-out-0506.google.com with SMTP id i3so316585wra
        for <java-user@lucene.apache.org>; Thu, 18 Jan 2007 15:43:22 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=hvy4CXELSF1YdxoL9AUtC0I2BCAB8yt9LBUsppfFceDKBUl0mUcLqTTQjlrRD7jDu/ghJsyjXbQKHuZ7tTyh19kUK+t0kNbg/JlN5WJnw7yOQGhWWDMqgo057hghsl9hleKcuEHymQ/WGoHS0nONAtSzjpGdfZFgEqX3jHLkx58=
Received: by 10.90.49.19 with SMTP id w19mr2053758agw.1169163802437;
        Thu, 18 Jan 2007 15:43:22 -0800 (PST)
Received: from ?192.168.1.103? ( [216.66.114.42])
        by mx.google.com with ESMTP id g5sm1646370wra.2007.01.18.15.43.21;
        Thu, 18 Jan 2007 15:43:22 -0800 (PST)
Message-ID: <45B00616.5030106@gmail.com>
Date: Thu, 18 Jan 2007 18:43:18 -0500
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 1.5.0.9 (Windows/20061207)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: custom similarity based on tf but greater than 1.0
References: <8440390.post@talk.nabble.com> <45AFF665.5010905@gmail.com> <8441331.post@talk.nabble.com>
In-Reply-To: <8441331.post@talk.nabble.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Sorry your having trouble find it! Allow me...bingo: 
http://www.gossamer-threads.com/lists/lucene/java-user/43251?search_string=sorting%20by%20per%20doc%20hit;#43251

Prob doesn't have great keyword for finding it. That should get you 
going though. Let me know if you have any questions.

- Mark

Vagelis Kotsonis wrote:
> Before I make this questions I have been looking the list for over 2 hours
> and I didn't find something to make me understand how to do what I want.
>
> After you sent the message I made a quick pass through all your messages,
> but I didn't find something. I also searched for FakeNormsIndexReader and
> still didn't find something.
>
> Can you plz tell me, if you remember, how you did it? 
>
> Thank you!
> Vagelis
>
>
> markrmiller wrote:
>   
>> I just did the same thing. If you search the list you'll find the thread 
>> where Hoss gave me the info you need. It really comes down to makeing a 
>> FakeNormsIndexReader. The problem you are having is a result of the 
>> field size normalization.
>>
>> - mark
>>
>>     

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25585-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 18 23:46:29 2007
Return-Path: <java-user-return-25585-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5908 invoked from network); 18 Jan 2007 23:46:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Jan 2007 23:46:29 -0000
Received: (qmail 13524 invoked by uid 500); 18 Jan 2007 23:46:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13488 invoked by uid 500); 18 Jan 2007 23:46:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13476 invoked by uid 99); 18 Jan 2007 23:46:30 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Jan 2007 15:46:30 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of markrmiller@gmail.com designates 64.233.184.226 as permitted sender)
Received: from [64.233.184.226] (HELO wr-out-0506.google.com) (64.233.184.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Jan 2007 15:46:20 -0800
Received: by wr-out-0506.google.com with SMTP id i21so321719wra
        for <java-user@lucene.apache.org>; Thu, 18 Jan 2007 15:45:59 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=NAjJ9Pxym5H5WiIRlMpVDxXq5BOGOHGg1lDeCdeiUeohxLzmzj745HvOmf3doHp9gaY0v0zkEuizMGAcC0vKYwRq4uqRB9Fj+PoyA87GgKOdDQPF7wA3/FWhy+g8HE7povSESmYf0+/ouqRf1wDMVAETmQA4xScggPR6FIy94BQ=
Received: by 10.90.68.15 with SMTP id q15mr2127004aga.1169163958047;
        Thu, 18 Jan 2007 15:45:58 -0800 (PST)
Received: from ?192.168.1.103? ( [216.66.114.42])
        by mx.google.com with ESMTP id 8sm2432924wra.2007.01.18.15.45.54;
        Thu, 18 Jan 2007 15:45:55 -0800 (PST)
Message-ID: <45B006AF.4060702@gmail.com>
Date: Thu, 18 Jan 2007 18:45:51 -0500
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 1.5.0.9 (Windows/20061207)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Counting hits in a document
References: <359a92830701181306k2d97c9d2we5e85ce08f008c06@mail.gmail.com>	 <45AFFF87.6040608@gmail.com> <359a92830701181529l5fda4835jadfd54e2f02478f9@mail.gmail.com>
In-Reply-To: <359a92830701181529l5fda4835jadfd54e2f02478f9@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org


>
> Mark:
>
> Very most excellent. I'll give it a look in the morning. I hope that the
> class doesn't need the raw text since I don't have it any more, but your
> comment "Give it a query it will give you the spans" makes me hopeful.
>
Should have been more specific: Just give it a query and an appropriate 
IndexReader <g>. No source text needed. Hope it works for you. Been a 
real boon for me.

- Mark

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25586-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 19 00:46:02 2007
Return-Path: <java-user-return-25586-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22265 invoked from network); 19 Jan 2007 00:46:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Jan 2007 00:46:01 -0000
Received: (qmail 78039 invoked by uid 500); 19 Jan 2007 00:46:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78011 invoked by uid 500); 19 Jan 2007 00:46:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78000 invoked by uid 99); 19 Jan 2007 00:46:01 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Jan 2007 16:46:01 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Jan 2007 16:45:51 -0800
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1H7hso-0003jw-F3
	for java-user@lucene.apache.org; Thu, 18 Jan 2007 16:45:30 -0800
Message-ID: <8442395.post@talk.nabble.com>
Date: Thu, 18 Jan 2007 16:45:30 -0800 (PST)
From: Vagelis Kotsonis <kotsonis.v@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: custom similarity based on tf but greater than 1.0
In-Reply-To: <45B00616.5030106@gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: kotsonis.v@gmail.com
References: <8440390.post@talk.nabble.com> <45AFF665.5010905@gmail.com> <8441331.post@talk.nabble.com> <45B00616.5030106@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


I feel kind of stupid...I don't get what hossman says in his post.

I got the thing abou the OMMIT_NORMS and I tried to do it by calling
Field.setOmitNorms(true); before adding a field in the index. After that I
re-indexed my collection but still not making any difference.

Tell me if I got it right. The second solution that you followed is building
a custom FilteredIndexReader and implement these 2 functions :

byte[] norms(String field)
void norms(String field, byte[] result, int offset)

Did I  get it right?

Thank you and excuse me for continuously asking the same thing.
Vagelis


markrmiller wrote:
> 
> Sorry your having trouble find it! Allow me...bingo: 
> http://www.gossamer-threads.com/lists/lucene/java-user/43251?search_string=sorting%20by%20per%20doc%20hit;#43251
> 
> Prob doesn't have great keyword for finding it. That should get you 
> going though. Let me know if you have any questions.
> 
> - Mark
> 
> 

-- 
View this message in context: http://www.nabble.com/custom-similarity-based-on-tf-but-greater-than-1.0-tf3037071.html#a8442395
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25587-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 19 01:00:22 2007
Return-Path: <java-user-return-25587-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25371 invoked from network); 19 Jan 2007 01:00:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Jan 2007 01:00:21 -0000
Received: (qmail 89121 invoked by uid 500); 19 Jan 2007 01:00:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89095 invoked by uid 500); 19 Jan 2007 01:00:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89084 invoked by uid 99); 19 Jan 2007 01:00:22 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Jan 2007 17:00:22 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of markrmiller@gmail.com designates 64.233.184.235 as permitted sender)
Received: from [64.233.184.235] (HELO wr-out-0506.google.com) (64.233.184.235)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Jan 2007 17:00:12 -0800
Received: by wr-out-0506.google.com with SMTP id i21so335924wra
        for <java-user@lucene.apache.org>; Thu, 18 Jan 2007 16:59:51 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=VsSnrwjoxPPze5TQBM/69YzJx+AM3s/rEuulxZMlYcLF3GH4peMCWDhXhh+KqXNduw2EOyWZppWEdbMZgVqEiFu3ZLz6JrHGIh4wUg8cPeJZbnSGG9umc/Zxi+0GQKy6JA8H/sknQHO2jRzSJiN+oUJYMkqZV8C1eEX4TqCFZvY=
Received: by 10.90.52.2 with SMTP id z2mr2132326agz.1169168391613;
        Thu, 18 Jan 2007 16:59:51 -0800 (PST)
Received: from ?192.168.1.103? ( [216.66.114.42])
        by mx.google.com with ESMTP id g7sm2565171wra.2007.01.18.16.59.49;
        Thu, 18 Jan 2007 16:59:50 -0800 (PST)
Message-ID: <45B01800.8090000@gmail.com>
Date: Thu, 18 Jan 2007 19:59:44 -0500
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 1.5.0.9 (Windows/20061207)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: custom similarity based on tf but greater than 1.0
References: <8440390.post@talk.nabble.com> <45AFF665.5010905@gmail.com> <8441331.post@talk.nabble.com> <45B00616.5030106@gmail.com> <8442395.post@talk.nabble.com>
In-Reply-To: <8442395.post@talk.nabble.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Dont return 1 for tf...just return the tf straight with no 
changes...return freq. For everything else return 1. After that 
OMIT_NORMS should work. If you want to try a custom reader:

public class FakeNormsIndexReader extends FilterIndexReader {
    byte[] ones = SegmentReader.createFakeNorms(maxDoc());

    public FakeNormsIndexReader(IndexReader in) {
        super(in);
    }
    public synchronized byte[] norms(String field) throws IOException {
          System.out.println("returning fake norms...");
        return ones;
    }

    public synchronized void norms(String field, byte[] result, int 
offset) {
          System.out.println("writing fake norms...");
        System.arraycopy(ones, 0, result, offset, maxDoc());
    }
}

The beauty of this reader is that you can flip between it and your 
custom similarity and Lucene's default implementations live on the same 
index.

- Mark


Vagelis Kotsonis wrote:
> I feel kind of stupid...I don't get what hossman says in his post.
>
> I got the thing abou the OMMIT_NORMS and I tried to do it by calling
> Field.setOmitNorms(true); before adding a field in the index. After that I
> re-indexed my collection but still not making any difference.
>
> Tell me if I got it right. The second solution that you followed is building
> a custom FilteredIndexReader and implement these 2 functions :
>
> byte[] norms(String field)
> void norms(String field, byte[] result, int offset)
>
> Did I  get it right?
>
> Thank you and excuse me for continuously asking the same thing.
> Vagelis
>
>
> markrmiller wrote:
>   
>> Sorry your having trouble find it! Allow me...bingo: 
>> http://www.gossamer-threads.com/lists/lucene/java-user/43251?search_string=sorting%20by%20per%20doc%20hit;#43251
>>
>> Prob doesn't have great keyword for finding it. That should get you 
>> going though. Let me know if you have any questions.
>>
>> - Mark
>>
>>
>>     
>
>   

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25588-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 19 01:17:47 2007
Return-Path: <java-user-return-25588-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30255 invoked from network); 19 Jan 2007 01:17:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Jan 2007 01:17:46 -0000
Received: (qmail 4235 invoked by uid 500); 19 Jan 2007 01:17:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4003 invoked by uid 500); 19 Jan 2007 01:17:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3992 invoked by uid 99); 19 Jan 2007 01:17:46 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Jan 2007 17:17:46 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Jan 2007 17:17:36 -0800
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1H7iNX-0001Q1-NE
	for java-user@lucene.apache.org; Thu, 18 Jan 2007 17:17:15 -0800
Message-ID: <8442711.post@talk.nabble.com>
Date: Thu, 18 Jan 2007 17:17:15 -0800 (PST)
From: Vagelis Kotsonis <kotsonis.v@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: custom similarity based on tf but greater than 1.0
In-Reply-To: <45B01800.8090000@gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: kotsonis.v@gmail.com
References: <8440390.post@talk.nabble.com> <45AFF665.5010905@gmail.com> <8441331.post@talk.nabble.com> <45B00616.5030106@gmail.com> <8442395.post@talk.nabble.com> <45B01800.8090000@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


But i don't want to get the frequency of each term in the doc.

what I want is 1 if the term exists in the doc and 0 if it doesn't. After
this, I want all thes 1s and 0s to be summed and give me a number to use as
a score.

If I set the TF value as 1 or 0, as I described above, I get the right
number, but this number is normalized to 1.0 and smaller numbers.

It is the normalization that I want to avoid.

Thanks again!
Vagelis


markrmiller wrote:
> 
> Dont return 1 for tf...just return the tf straight with no 
> changes...return freq. For everything else return 1. After that 
> OMIT_NORMS should work. If you want to try a custom reader:
> 
> public class FakeNormsIndexReader extends FilterIndexReader {
>     byte[] ones = SegmentReader.createFakeNorms(maxDoc());
> 
>     public FakeNormsIndexReader(IndexReader in) {
>         super(in);
>     }
>     public synchronized byte[] norms(String field) throws IOException {
>           System.out.println("returning fake norms...");
>         return ones;
>     }
> 
>     public synchronized void norms(String field, byte[] result, int 
> offset) {
>           System.out.println("writing fake norms...");
>         System.arraycopy(ones, 0, result, offset, maxDoc());
>     }
> }
> 
> The beauty of this reader is that you can flip between it and your 
> custom similarity and Lucene's default implementations live on the same 
> index.
> 
> - Mark
> 
> 

-- 
View this message in context: http://www.nabble.com/custom-similarity-based-on-tf-but-greater-than-1.0-tf3037071.html#a8442711
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25589-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 19 01:31:07 2007
Return-Path: <java-user-return-25589-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33523 invoked from network); 19 Jan 2007 01:31:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Jan 2007 01:31:06 -0000
Received: (qmail 25912 invoked by uid 500); 19 Jan 2007 01:31:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25879 invoked by uid 500); 19 Jan 2007 01:31:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25862 invoked by uid 99); 19 Jan 2007 01:31:07 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Jan 2007 17:31:07 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of markrmiller@gmail.com designates 66.249.82.232 as permitted sender)
Received: from [66.249.82.232] (HELO wx-out-0506.google.com) (66.249.82.232)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Jan 2007 17:30:56 -0800
Received: by wx-out-0506.google.com with SMTP id i29so326125wxd
        for <java-user@lucene.apache.org>; Thu, 18 Jan 2007 17:30:36 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=R3wdlB72KJwRxkLBk4UaQdz7uwSBXFKlnBh/GRtW8rZqGJfXVt0tOTo1yGeTFxQMPvZtTRRLsAfLnJWH+ESOoRYJ2I6E34fC6TnwAmmEXXtgPPlQ/1e1Vy1o+XT9xW5tQnMEJSK4FnQKMhOy+eO+zCtYyzU1NtAm9ne4dAaTZws=
Received: by 10.90.66.9 with SMTP id o9mr2131559aga.1169170236058;
        Thu, 18 Jan 2007 17:30:36 -0800 (PST)
Received: from ?192.168.1.103? ( [216.66.114.42])
        by mx.google.com with ESMTP id 26sm3708965wrl.2007.01.18.17.30.34;
        Thu, 18 Jan 2007 17:30:35 -0800 (PST)
Message-ID: <45B01F35.8040605@gmail.com>
Date: Thu, 18 Jan 2007 20:30:29 -0500
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 1.5.0.9 (Windows/20061207)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: custom similarity based on tf but greater than 1.0
References: <8440390.post@talk.nabble.com> <45AFF665.5010905@gmail.com> <8441331.post@talk.nabble.com> <45B00616.5030106@gmail.com> <8442395.post@talk.nabble.com> <45B01800.8090000@gmail.com> <8442711.post@talk.nabble.com>
In-Reply-To: <8442711.post@talk.nabble.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Ahhhh...I brushed over your example too fast...looked like normal 
counting to me...I see now what you mean. So OMIT_NORMS probably did 
work. Are you getting the results through hits? Hits will normalize. Use 
topdocs or a hitcollector.

- Mark

Vagelis Kotsonis wrote:
> But i don't want to get the frequency of each term in the doc.
>
> what I want is 1 if the term exists in the doc and 0 if it doesn't. After
> this, I want all thes 1s and 0s to be summed and give me a number to use as
> a score.
>
> If I set the TF value as 1 or 0, as I described above, I get the right
> number, but this number is normalized to 1.0 and smaller numbers.
>
> It is the normalization that I want to avoid.
>
> Thanks again!
> Vagelis
>
>
> markrmiller wrote:
>   
>> Dont return 1 for tf...just return the tf straight with no 
>> changes...return freq. For everything else return 1. After that 
>> OMIT_NORMS should work. If you want to try a custom reader:
>>
>> public class FakeNormsIndexReader extends FilterIndexReader {
>>     byte[] ones = SegmentReader.createFakeNorms(maxDoc());
>>
>>     public FakeNormsIndexReader(IndexReader in) {
>>         super(in);
>>     }
>>     public synchronized byte[] norms(String field) throws IOException {
>>           System.out.println("returning fake norms...");
>>         return ones;
>>     }
>>
>>     public synchronized void norms(String field, byte[] result, int 
>> offset) {
>>           System.out.println("writing fake norms...");
>>         System.arraycopy(ones, 0, result, offset, maxDoc());
>>     }
>> }
>>
>> The beauty of this reader is that you can flip between it and your 
>> custom similarity and Lucene's default implementations live on the same 
>> index.
>>
>> - Mark
>>
>>
>>     
>
>   

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25590-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 19 01:44:32 2007
Return-Path: <java-user-return-25590-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35643 invoked from network); 19 Jan 2007 01:44:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Jan 2007 01:44:31 -0000
Received: (qmail 38409 invoked by uid 500); 19 Jan 2007 01:44:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38370 invoked by uid 500); 19 Jan 2007 01:44:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38359 invoked by uid 99); 19 Jan 2007 01:44:32 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Jan 2007 17:44:32 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Jan 2007 17:44:21 -0800
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1H7inQ-0006PO-PF
	for java-user@lucene.apache.org; Thu, 18 Jan 2007 17:44:00 -0800
Message-ID: <8442944.post@talk.nabble.com>
Date: Thu, 18 Jan 2007 17:44:00 -0800 (PST)
From: Vagelis Kotsonis <kotsonis.v@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: custom similarity based on tf but greater than 1.0
In-Reply-To: <45B01F35.8040605@gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: kotsonis.v@gmail.com
References: <8440390.post@talk.nabble.com> <45AFF665.5010905@gmail.com> <8441331.post@talk.nabble.com> <45B00616.5030106@gmail.com> <8442395.post@talk.nabble.com> <45B01800.8090000@gmail.com> <8442711.post@talk.nabble.com> <45B01F35.8040605@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


It is 4 in the morning here in Greece, so I will try it tomorrow...sometime I
must sleep!
I will come up with the results tomorrow.

Thanks!
Vagelis


markrmiller wrote:
> 
> Ahhhh...I brushed over your example too fast...looked like normal 
> counting to me...I see now what you mean. So OMIT_NORMS probably did 
> work. Are you getting the results through hits? Hits will normalize. Use 
> topdocs or a hitcollector.
> 
> - Mark
> 
> 

-- 
View this message in context: http://www.nabble.com/custom-similarity-based-on-tf-but-greater-than-1.0-tf3037071.html#a8442944
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25591-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 19 04:22:47 2007
Return-Path: <java-user-return-25591-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79697 invoked from network); 19 Jan 2007 04:22:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Jan 2007 04:22:46 -0000
Received: (qmail 57066 invoked by uid 500); 19 Jan 2007 04:22:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56854 invoked by uid 500); 19 Jan 2007 04:22:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56843 invoked by uid 99); 19 Jan 2007 04:22:46 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Jan 2007 20:22:46 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of zhouchengly@gmail.com designates 66.249.92.169 as permitted sender)
Received: from [66.249.92.169] (HELO ug-out-1314.google.com) (66.249.92.169)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Jan 2007 20:22:38 -0800
Received: by ug-out-1314.google.com with SMTP id k40so368314ugc
        for <java-user@lucene.apache.org>; Thu, 18 Jan 2007 20:22:17 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=QSkBnpnp4gLOl4jANt3OpATB2mLegPopqFmawD3OUVafFiqUK1LibGAAPvc0OQke4PYzdmVujNtgQCE3sx1D80/V1bsdBkCK9KZxZStgoM0QeqX80VCt5W1Q/DQMyP2DfgFOUM2sTYQt1w0GwHwCq8MyOp5clKFN09T395CKsQQ=
Received: by 10.82.136.4 with SMTP id j4mr428541bud.1169180536692;
        Thu, 18 Jan 2007 20:22:16 -0800 (PST)
Received: by 10.82.100.12 with HTTP; Thu, 18 Jan 2007 20:22:16 -0800 (PST)
Message-ID: <c2f9e9030701182022p7b2c014av86a1562672b8152@mail.gmail.com>
Date: Fri, 19 Jan 2007 12:22:16 +0800
From: David <zhouchengly@gmail.com>
To: java-user@lucene.apache.org
Subject: doc.getFields argument error
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_239787_20561227.1169180536667"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_239787_20561227.1169180536667
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi all :
     in Lucene JavaDoc,   the getFields signature is :  public final
List<http://java.sun.com/j2se/1.4/docs/api/java/util/List.html>
*getFields*()
     I use PyLucene and write the following code:
        for i, doc in hits:
            fields = doc.getFields()
            for field in fields:
                rev[field] = doc(field)
            yield rev
     but the interpreter give me the following error:
         File "D:\work\contentstore\contentstore\backends\lucene\base.py",
line 157, in search
            fields = doc.getFields()
         TypeError: getFields() takes exactly one argument (0 given)

     how to fix this error?

Appreciate your help!

-- 
David

------=_Part_239787_20561227.1169180536667--

From java-user-return-25592-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 19 05:43:00 2007
Return-Path: <java-user-return-25592-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98163 invoked from network); 19 Jan 2007 05:42:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Jan 2007 05:42:58 -0000
Received: (qmail 14466 invoked by uid 500); 19 Jan 2007 05:42:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14432 invoked by uid 500); 19 Jan 2007 05:42:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 14421 invoked by uid 99); 19 Jan 2007 05:42:59 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Jan 2007 21:42:59 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Jan 2007 21:42:50 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id BAE9C5B766; Thu, 18 Jan 2007 21:42:29 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 9C1E37F403
	for <java-user@lucene.apache.org>; Thu, 18 Jan 2007 21:42:29 -0800 (PST)
Date: Thu, 18 Jan 2007 21:42:29 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: Lucene Users <java-user@lucene.apache.org>
Subject: Re: Counting hits in a document
In-Reply-To: <359a92830701181529l5fda4835jadfd54e2f02478f9@mail.gmail.com>
Message-ID: <Pine.LNX.4.58.0701182129360.5232@hal.rescomp.berkeley.edu>
References: <359a92830701181306k2d97c9d2we5e85ce08f008c06@mail.gmail.com> 
 <45AFFF87.6040608@gmail.com> <359a92830701181529l5fda4835jadfd54e2f02478f9@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: It was late this afternooon and I was square-eyed, so I didn't add the
: detail. The app we're working on first returns a summary list of all the
: books that match a query, no hit information. Next, the user clicks on a
: returned title and we show the hits by chapter. That is, a list of chapters
: and the count of the hits for each. The index is nearing 15G at present, so
: I *assumed* that I really didn't want to re-query the entire index when I
: know the particular document I care about already. But what do I know?

i never said anything about requerying the whole index, i said skipTo the
docid you care about...

one the second user click, figure out the docid (do a TermQuery or
an indexReader.termDocs on a Term containing whatever unique id you have
for each title) then do something like this using whatever SpanQuery you
want (it doesn't have to be your orriginal SpanQuery, it could be a
SpanTermQuery that was part of your larger SpanQuery) ...

    SpanQuery whatever = ...
    Spans s = whatever.getSpans(indexReader)
    s.skipTo(yourDocId);
    while (s.doc() == yourDocId) {
      print("match between " + s.start() + " and " + s.end());
      s.next();
    }


-Hoss

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25593-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 19 05:59:53 2007
Return-Path: <java-user-return-25593-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3629 invoked from network); 19 Jan 2007 05:59:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Jan 2007 05:59:52 -0000
Received: (qmail 41416 invoked by uid 500); 19 Jan 2007 05:59:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40617 invoked by uid 500); 19 Jan 2007 05:59:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40600 invoked by uid 99); 19 Jan 2007 05:59:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Jan 2007 21:59:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Jan 2007 21:59:44 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 299AE5B766; Thu, 18 Jan 2007 21:59:24 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 245DE7F403
	for <java-user@lucene.apache.org>; Thu, 18 Jan 2007 21:59:24 -0800 (PST)
Date: Thu, 18 Jan 2007 21:59:24 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: doc.getFields argument error
In-Reply-To: <c2f9e9030701182022p7b2c014av86a1562672b8152@mail.gmail.com>
Message-ID: <Pine.LNX.4.58.0701182151540.5232@hal.rescomp.berkeley.edu>
References: <c2f9e9030701182022p7b2c014av86a1562672b8152@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


:             fields = doc.getFields()
:          TypeError: getFields() takes exactly one argument (0 given)
:
:      how to fix this error?

this sounds like a problem with the port ... when you have questions about
using pylucene please start by mailing the pylucene community before
mailing the java-user list.

forgive me if you already tried this -- but there's no record of it in the
pylucene mailing list archive...

http://lists.osafoundation.org/pipermail/pylucene-dev/2007-January/author.html




-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25594-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 19 07:06:01 2007
Return-Path: <java-user-return-25594-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 17183 invoked from network); 19 Jan 2007 07:06:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Jan 2007 07:06:00 -0000
Received: (qmail 83402 invoked by uid 500); 19 Jan 2007 07:06:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83376 invoked by uid 500); 19 Jan 2007 07:06:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83365 invoked by uid 99); 19 Jan 2007 07:06:00 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Jan 2007 23:06:00 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of zhouchengly@gmail.com designates 64.233.182.191 as permitted sender)
Received: from [64.233.182.191] (HELO nf-out-0910.google.com) (64.233.182.191)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Jan 2007 23:05:50 -0800
Received: by nf-out-0910.google.com with SMTP id a27so370305nfc
        for <java-user@lucene.apache.org>; Thu, 18 Jan 2007 23:05:29 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=QmioJxwDcwgL2GeKcmZNQCxqTzuwOKdHe+uYQd12bgozymVmAtr5O3eb2g0wDzVORJ8j2GQwQA02cqdoQmojQnZGqv5Z8wcBPz97ZPf0uRtzBScppRqRXKm0Zt/wjpQ5zxnyIcZfRAjyjua7NkD1eJEwHJjRXeyFr2POskgIUzc=
Received: by 10.82.184.2 with SMTP id h2mr448901buf.1169190329253;
        Thu, 18 Jan 2007 23:05:29 -0800 (PST)
Received: by 10.82.100.12 with HTTP; Thu, 18 Jan 2007 23:05:29 -0800 (PST)
Message-ID: <c2f9e9030701182305rf04f589y5ea6c0ca82692e7f@mail.gmail.com>
Date: Fri, 19 Jan 2007 15:05:29 +0800
From: David <zhouchengly@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: doc.getFields argument error
In-Reply-To: <Pine.LNX.4.58.0701182151540.5232@hal.rescomp.berkeley.edu>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_241924_6980530.1169190329141"
References: <c2f9e9030701182022p7b2c014av86a1562672b8152@mail.gmail.com>
	 <Pine.LNX.4.58.0701182151540.5232@hal.rescomp.berkeley.edu>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_241924_6980530.1169190329141
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Yes, It is a bug of PyLucene.Thanks!

2007/1/19, Chris Hostetter <hossman_lucene@fucit.org>:
>
>
> :             fields = doc.getFields()
> :          TypeError: getFields() takes exactly one argument (0 given)
> :
> :      how to fix this error?
>
> this sounds like a problem with the port ... when you have questions about
> using pylucene please start by mailing the pylucene community before
> mailing the java-user list.
>
> forgive me if you already tried this -- but there's no record of it in the
> pylucene mailing list archive...
>
>
> http://lists.osafoundation.org/pipermail/pylucene-dev/2007-January/author.html
>
>
>
>
> -Hoss
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
David

------=_Part_241924_6980530.1169190329141--

From java-user-return-25595-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 19 08:36:37 2007
Return-Path: <java-user-return-25595-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48332 invoked from network); 19 Jan 2007 08:36:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Jan 2007 08:36:36 -0000
Received: (qmail 76924 invoked by uid 500); 19 Jan 2007 08:36:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76890 invoked by uid 500); 19 Jan 2007 08:36:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76879 invoked by uid 99); 19 Jan 2007 08:36:35 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Jan 2007 00:36:35 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,UNPARSEABLE_RELAY
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [193.63.50.168] (HELO gw.ncet.cov.net) (193.63.50.168)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Jan 2007 00:36:25 -0800
Received: from cov1mx1.becta.org..uk by gw.ncet.cov.net
          via smtpd (for herse.apache.org [140.211.11.133]) with ESMTP; Fri, 19 Jan 2007 08:34:01 +0000
Received: from cov1mb2.becta.org.uk (cov1mb2.becta.org.uk) by cov1mx2.becta.org.uk
 (Clearswift SMTPRS 5.1.4) with ESMTP id <T7d45e83a1d0a000064978@cov1mx2.becta.org.uk> for <java-user@lucene.apache.org>;
 Fri, 19 Jan 2007 08:35:59 +0000
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C73BA4.D5E01345"
Subject: Most Frequent Terms
Date: Fri, 19 Jan 2007 08:35:55 -0000
Message-ID: <0BAF375089C4A0479B63BEA1AF54A29202DF5948@cov1mb2.becta.org.uk>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Most Frequent Terms
Thread-Index: Acc7pNWwZAngb6EdTMmvpo9YkGUKQg==
From: "Paul Williams" <Paul.Williams@becta.org.uk>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01C73BA4.D5E01345
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Hopefully this a straight forward question, but what's the recommended
approach for finding the most frequent terms in an index?  Should this
sort of thing be done overnight?

=20

Regards,

Paul.

=20

=20


------_=_NextPart_001_01C73BA4.D5E01345--


From java-user-return-25596-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 19 08:55:32 2007
Return-Path: <java-user-return-25596-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 55336 invoked from network); 19 Jan 2007 08:55:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Jan 2007 08:55:31 -0000
Received: (qmail 93672 invoked by uid 500); 19 Jan 2007 08:55:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93634 invoked by uid 500); 19 Jan 2007 08:55:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93623 invoked by uid 99); 19 Jan 2007 08:55:31 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Jan 2007 00:55:31 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=UNPARSEABLE_RELAY
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [193.63.50.168] (HELO gw.ncet.cov.net) (193.63.50.168)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Jan 2007 00:55:22 -0800
Received: from cov1mx1.becta.org..uk by gw.ncet.cov.net
          via smtpd (for herse.apache.org [140.211.11.133]) with ESMTP; Fri, 19 Jan 2007 08:52:59 +0000
Received: from cov1mb2.becta.org.uk (cov1mb2.becta.org.uk) by cov1mx2.becta.org.uk
 (Clearswift SMTPRS 5.1.4) with ESMTP id <T7d45f9a40a0a000064978@cov1mx2.becta.org.uk> for <java-user@lucene.apache.org>;
 Fri, 19 Jan 2007 08:55:00 +0000
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Most Frequent Terms
Date: Fri, 19 Jan 2007 08:55:00 -0000
Message-ID: <0BAF375089C4A0479B63BEA1AF54A29202DF5949@cov1mb2.becta.org.uk>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Most Frequent Terms
Thread-Index: Acc7pNWwZAngb6EdTMmvpo9YkGUKQgAApTyw
From: "Paul Williams" <Paul.Williams@becta.org.uk>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

To answer my own question; I've just found the HighFreqTerms class in
luke which point me in the right direction!

Regards,
Paul.
=20

-----Original Message-----
From: Paul Williams [mailto:Paul.Williams@becta.org.uk]=20
Sent: 19 January 2007 08:36 am
To: java-user@lucene.apache.org
Subject: Most Frequent Terms

Hopefully this a straight forward question, but what's the recommended
approach for finding the most frequent terms in an index?  Should this
sort of thing be done overnight?

=20

Regards,

Paul.

=20

=20



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25597-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 19 09:03:12 2007
Return-Path: <java-user-return-25597-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59420 invoked from network); 19 Jan 2007 09:03:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Jan 2007 09:03:05 -0000
Received: (qmail 6701 invoked by uid 500); 19 Jan 2007 09:03:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6674 invoked by uid 500); 19 Jan 2007 09:03:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6663 invoked by uid 99); 19 Jan 2007 09:03:04 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Jan 2007 01:03:04 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [220.225.240.22] (HELO mail01.naukri.com) (220.225.240.22)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Jan 2007 01:02:55 -0800
Received: from [172.16.0.162] ([172.16.0.162])
          by mail01.naukri.com (Lotus Domino Release 7.0)
          with ESMTP id 2007011914272028-3861 ;
          Fri, 19 Jan 2007 14:27:20 +0530 
Message-ID: <45B08928.8080607@naukri.com>
Date: Fri, 19 Jan 2007 14:32:32 +0530
From: Kapil Chhabra <kapil.chhabra@naukri.com>
User-Agent: Thunderbird 1.5.0.8 (X11/20061107)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Most Frequent Terms
References: <0BAF375089C4A0479B63BEA1AF54A29202DF5948@cov1mb2.becta.org.uk>
In-Reply-To: <0BAF375089C4A0479B63BEA1AF54A29202DF5948@cov1mb2.becta.org.uk>
X-MIMETrack: Itemize by SMTP Server on noidaa88/naukri(Release 7.0|August 18, 2005) at
 01/19/2007 02:27:20 PM,
	Serialize by Router on noidaa88/naukri(Release 7.0|August 18, 2005) at 01/19/2007
 02:27:42 PM,
	Serialize complete at 01/19/2007 02:27:42 PM
Content-Type: multipart/alternative;
 boundary="------------010702020406060405010109"
X-Virus-Checked: Checked by ClamAV on apache.org

--------------010702020406060405010109
Content-Transfer-Encoding: 7bit
Content-Type: text/plain; charset=ISO-8859-1; format=flowed

Hi Paul,
I like the implementation of this in Luke (www.getopt.org/*luke*/)
There is a HighFreqTerms class in src/org/getopt/luke/. Have a look. I 
am sure you'll find your answer there.

Regards,
kapilChhabra


Paul Williams wrote:
> Hopefully this a straight forward question, but what's the recommended
> approach for finding the most frequent terms in an index?  Should this
> sort of thing be done overnight?
>
>  
>
> Regards,
>
> Paul.
>
>  
>
>  
>
>
>   


--------------010702020406060405010109--

From java-user-return-25598-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 19 10:07:01 2007
Return-Path: <java-user-return-25598-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88912 invoked from network); 19 Jan 2007 10:07:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Jan 2007 10:07:01 -0000
Received: (qmail 14774 invoked by uid 500); 19 Jan 2007 10:07:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14520 invoked by uid 500); 19 Jan 2007 10:06:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 14509 invoked by uid 99); 19 Jan 2007 10:06:59 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Jan 2007 02:06:59 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [206.190.38.55] (HELO web50301.mail.yahoo.com) (206.190.38.55)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 19 Jan 2007 02:06:47 -0800
Received: (qmail 67350 invoked by uid 60001); 19 Jan 2007 10:06:26 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=Supwp58vcgeF5HWPYGJ0qXiev4OSxNdc7xwtzjC2IaweFb4S4x54HRESeBLnTWmhoGA8YmxLNyJuhijXOyccZvzJDcIr6Ht73MGmDn1dFcUspsxrkelhiGATbURCXVNyQbqfKQ8aCx6fj8VQNfkfgLQ07LVgEGIotTb/NQHtTzU=;
X-YMail-OSG: F_.l.5kVM1mIP297_j_q7J.EazodTHa14orz3r8vvjKoaEtDOYCduxfpNmvxX6_FPkbTioVWnOlwpK_t8f5dFsb.rsDeM8KqQOY.pIcnzwiOUvUbroz_BCFcrxU0kNV_VQliO8MN1sOoG7Y-
Received: from [58.62.84.35] by web50301.mail.yahoo.com via HTTP; Fri, 19 Jan 2007 02:06:26 PST
X-Mailer: YahooMailRC/368.3 YahooMailWebService/0.6.132.7
Date: Fri, 19 Jan 2007 02:06:26 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Most Frequent Terms
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable
Message-ID: <524550.66682.qm@web50301.mail.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

There is also an impl in Lucene's own contrib/miscellaneous.  You can optio=
nally specify the field you want to limit terms to.=0A=0AOtis=0A=0A----- Or=
iginal Message ----=0AFrom: Paul Williams <Paul.Williams@becta.org.uk>=0ATo=
: java-user@lucene.apache.org=0ASent: Friday, January 19, 2007 3:55:00 AM=
=0ASubject: RE: Most Frequent Terms=0A=0ATo answer my own question; I've ju=
st found the HighFreqTerms class in=0Aluke which point me in the right dire=
ction!=0A=0ARegards,=0APaul.=0A =0A=0A-----Original Message-----=0AFrom: Pa=
ul Williams [mailto:Paul.Williams@becta.org.uk] =0ASent: 19 January 2007 08=
:36 am=0ATo: java-user@lucene.apache.org=0ASubject: Most Frequent Terms=0A=
=0AHopefully this a straight forward question, but what's the recommended=
=0Aapproach for finding the most frequent terms in an index?  Should this=
=0Asort of thing be done overnight?=0A=0A =0A=0ARegards,=0A=0APaul.=0A=0A =
=0A=0A =0A=0A=0A=0A--------------------------------------------------------=
-------------=0ATo unsubscribe, e-mail: java-user-unsubscribe@lucene.apache=
.org=0AFor additional commands, e-mail: java-user-help@lucene.apache.org=0A=
=0A=0A=0A

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25599-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 19 10:29:03 2007
Return-Path: <java-user-return-25599-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96031 invoked from network); 19 Jan 2007 10:29:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Jan 2007 10:29:02 -0000
Received: (qmail 58059 invoked by uid 500); 19 Jan 2007 10:29:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58033 invoked by uid 500); 19 Jan 2007 10:29:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58022 invoked by uid 99); 19 Jan 2007 10:29:01 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Jan 2007 02:29:01 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [206.190.38.57] (HELO web50303.mail.yahoo.com) (206.190.38.57)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 19 Jan 2007 02:28:51 -0800
Received: (qmail 81191 invoked by uid 60001); 19 Jan 2007 10:28:30 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=5KHF+1zI7dn4QqvGW730DBH9oE3Fz2hNMy0+LFVVsViz0gEz/+UJVT0AQB8u6dye0NDahjPNNZ+OJJD2E5uQPRv0fU4KRAVS9v5ygeucEZj4xn4khpHXJk2KqhndYndBNsaGkMYoIwFKZ8bMdcyDVnRINDxudfEBxx+ecCvMYqM=;
X-YMail-OSG: 0dXelSMVM1kUApeUPlCUqnKvu0RuZWg_BEGFiV9mRh3.OFYFIzuFFhYQDyuXRJeXfNYnecbgJiANshvfMcKdqRLbSqRUcHTmn_K3SKnCOZ_WHmqfRXhSo2HeRMKY1VtQpE737b0cigTFvW4-
Received: from [58.62.84.35] by web50303.mail.yahoo.com via HTTP; Fri, 19 Jan 2007 02:28:29 PST
X-Mailer: YahooMailRC/368.3 YahooMailWebService/0.6.132.7
Date: Fri, 19 Jan 2007 02:28:29 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: custom similarity based on tf but greater than 1.0
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable
Message-ID: <906873.70236.qm@web50303.mail.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Jumping in at this point and not having read other responses, I think the f=
unction that Vangelis is looking for is coord method in Similarity - that's=
 for document terms/query terms overlap, I believe.=0A=0AOtis=0A=0A----- Or=
iginal Message ----=0AFrom: Mark Miller <markrmiller@gmail.com>=0ATo: java-=
user@lucene.apache.org=0ASent: Thursday, January 18, 2007 5:36:21 PM=0ASubj=
ect: Re: custom similarity based on tf but greater than 1.0=0A=0AI just did=
 the same thing. If you search the list you'll find the thread =0Awhere Hos=
s gave me the info you need. It really comes down to makeing a =0AFakeNorms=
IndexReader. The problem you are having is a result of the =0Afield size no=
rmalization.=0A=0A- mark=0A=0AVagelis Kotsonis wrote:=0A> Hi all.=0A> I am =
trying to make some experiments in an algorithm that scores results by=0A> =
counting how many words of the query submited are in a document.=0A>=0A> Fo=
r example if i enter the query =0A>=0A> A B D A=0A>=0A> The similarities I =
want to get for the documents follows:=0A>=0A> A A C F D (2-found A and D)=
=0A> A B D S S A (3 - found A, B and D)=0A> D D D (1 - only found D)=0A>=0A=
> I built a Similarity that actually sets everything's price as 1.0f except=
 tf=0A>=0A> The tf functions returns 1.0f if freq>0 and 0.0f else.=0A>=0A> =
I think that this change does count what I want, but when it comes to show=
=0A> the score, all are normalized. So, the greater similarity is equal to =
1.0f=0A> and the others are lower than 1.0f=0A>=0A> How can I "deactivate" =
the score normalization?=0A>=0A> Thank you!=0A>=0A> I want to =0A>   =0A=0A=
---------------------------------------------------------------------=0ATo =
unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org=0AFor addition=
al commands, e-mail: java-user-help@lucene.apache.org=0A=0A=0A=0A

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25600-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 19 15:15:39 2007
Return-Path: <java-user-return-25600-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82912 invoked from network); 19 Jan 2007 15:15:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Jan 2007 15:15:38 -0000
Received: (qmail 10855 invoked by uid 500); 19 Jan 2007 15:15:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10827 invoked by uid 500); 19 Jan 2007 15:15:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10816 invoked by uid 99); 19 Jan 2007 15:15:37 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Jan 2007 07:15:37 -0800
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=DATE_IN_PAST_06_12,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of DORONC@il.ibm.com designates 195.212.29.154 as permitted sender)
Received: from [195.212.29.154] (HELO mtagate5.de.ibm.com) (195.212.29.154)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Jan 2007 07:15:26 -0800
Received: from d12nrmr1607.megacenter.de.ibm.com (d12nrmr1607.megacenter.de.ibm.com [9.149.167.49])
	by mtagate5.de.ibm.com (8.13.8/8.13.8) with ESMTP id l0JFF4I9229866
	for <java-user@lucene.apache.org>; Fri, 19 Jan 2007 15:15:04 GMT
Received: from d12av04.megacenter.de.ibm.com (d12av04.megacenter.de.ibm.com [9.149.165.229])
	by d12nrmr1607.megacenter.de.ibm.com (8.13.8/8.13.8/NCO v8.2) with ESMTP id l0JFF4Nt2146440
	for <java-user@lucene.apache.org>; Fri, 19 Jan 2007 16:15:04 +0100
Received: from d12av04.megacenter.de.ibm.com (loopback [127.0.0.1])
	by d12av04.megacenter.de.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id l0JFF4fr029016
	for <java-user@lucene.apache.org>; Fri, 19 Jan 2007 16:15:04 +0100
Received: from d12mc102.megacenter.de.ibm.com (d12mc102.megacenter.de.ibm.com [9.149.167.114])
	by d12av04.megacenter.de.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id l0JFF3pf029008
	for <java-user@lucene.apache.org>; Fri, 19 Jan 2007 16:15:03 +0100
In-Reply-To: <0BAF375089C4A0479B63BEA1AF54A29202DF5948@cov1mb2.becta.org.uk>
Subject: Re: Most Frequent Terms
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 7.0 HF277 June 21, 2006
Message-ID: <OFA34BF33F.9AE16E07-ON88257268.002F926D-88257268.002FB7AB@il.ibm.com>
From: Doron Cohen <DORONC@il.ibm.com>
Date: Fri, 19 Jan 2007 00:41:12 -0800
X-MIMETrack: Serialize by Router on D12MC102/12/M/IBM(Release 7.0.2HF71 | November 3, 2006) at
 19/01/2007 17:15:03
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org

See contrib -> misc -> HighFreqTerms

"Paul Williams" <Paul.Williams@becta.org.uk> wrote on 19/01/2007 00:35:55:

> Hopefully this a straight forward question, but what's the recommended
> approach for finding the most frequent terms in an index?  Should this
> sort of thing be done overnight?
>
>
>
> Regards,
>
> Paul.
>
>
>
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25601-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 19 18:56:30 2007
Return-Path: <java-user-return-25601-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60889 invoked from network); 19 Jan 2007 18:56:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Jan 2007 18:56:29 -0000
Received: (qmail 92898 invoked by uid 500); 19 Jan 2007 18:56:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92268 invoked by uid 500); 19 Jan 2007 18:56:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92257 invoked by uid 99); 19 Jan 2007 18:56:28 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Jan 2007 10:56:28 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [194.109.24.34] (HELO smtp-vbr14.xs4all.nl) (194.109.24.34)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Jan 2007 10:56:18 -0800
Received: from k8l.lan (porta.xs4all.nl [80.127.24.69])
	by smtp-vbr14.xs4all.nl (8.13.8/8.13.8) with ESMTP id l0JItt7M014599
	for <java-user@lucene.apache.org>; Fri, 19 Jan 2007 19:55:56 +0100 (CET)
	(envelope-from paul.elschot@xs4all.nl)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: java-user@lucene.apache.org
Subject: Re: Counting hits in a document
Date: Fri, 19 Jan 2007 19:55:52 +0100
User-Agent: KMail/1.8.2
References: <359a92830701181306k2d97c9d2we5e85ce08f008c06@mail.gmail.com> <359a92830701181529l5fda4835jadfd54e2f02478f9@mail.gmail.com> <Pine.LNX.4.58.0701182129360.5232@hal.rescomp.berkeley.edu>
In-Reply-To: <Pine.LNX.4.58.0701182129360.5232@hal.rescomp.berkeley.edu>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200701191955.54169.paul.elschot@xs4all.nl>
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org

Adding a few details:

On Friday 19 January 2007 06:42, Chris Hostetter wrote:
> 
> 
>     SpanQuery whatever = ...
>     Spans s = whatever.getSpans(indexReader)
     if (!s.skipTo(yourDocId)) {
        ... // no match
      } else {
>     while (s.doc() == yourDocId) {
>       print("match between " + s.start() + " and " + s.end());
         if (! s.next()) break;
>     }
    }

For performance, make sure not to go the the same disk the index is on
while using the spans like this.

In case you have multiple docs to treat, skip to them in increasing docId 
order using the same spans.

And if you ever want to write a Scorer, just add more details...

Regards,
Paul  Eschot

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25602-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 19 19:13:22 2007
Return-Path: <java-user-return-25602-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65746 invoked from network); 19 Jan 2007 19:13:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Jan 2007 19:13:21 -0000
Received: (qmail 20953 invoked by uid 500); 19 Jan 2007 19:13:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20919 invoked by uid 500); 19 Jan 2007 19:13:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 20900 invoked by uid 99); 19 Jan 2007 19:13:19 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Jan 2007 11:13:19 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of karl.wettin@gmail.com designates 66.249.92.169 as permitted sender)
Received: from [66.249.92.169] (HELO ug-out-1314.google.com) (66.249.92.169)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Jan 2007 11:13:09 -0800
Received: by ug-out-1314.google.com with SMTP id k40so539167ugc
        for <java-user@lucene.apache.org>; Fri, 19 Jan 2007 11:12:47 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:mime-version:content-transfer-encoding:message-id:content-type:to:from:subject:date:x-mailer;
        b=Yqews2YtqT1A1xgQJcNDNU8m7fy9MWQXvYUyEgT2OxDVXkwy5//Y/X7rn2fomltcCGMKdF+gUwexnpuQfL/hV1gYqpejxzTeFwkUEdKmCIUlLzZk+0qMs4dwRyaiZdQjkPpf5n++e/i3epYYNbc325YLIGDxocG3gFG4TLskF9E=
Received: by 10.67.89.5 with SMTP id r5mr3452243ugl.1169233967656;
        Fri, 19 Jan 2007 11:12:47 -0800 (PST)
Received: from ?192.168.0.131? ( [83.249.127.91])
        by mx.google.com with ESMTP id j1sm3001424ugf.2007.01.19.11.12.04;
        Fri, 19 Jan 2007 11:12:47 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v752.3)
Content-Transfer-Encoding: 7bit
Message-Id: <994CD21D-A8CE-460E-911C-D0AE97851FA5@gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
To: java-user@lucene.apache.org
From: karl wettin <karl.wettin@gmail.com>
Subject: IndexReader can not be decorated
Date: Fri, 19 Jan 2007 20:11:33 +0100
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org

For some reason I can't figure out, IndexReaders can not be  
decorated. It is when commiting something deleted that it goes wrong.  
Does anyone here know what the problem might be? I've been debugging  
this more or less the whole day. Even tried desperate attempts with  
get/settify use of the protected IndexFileDeleter deleter, et c, but  
no luck so far.

Here is a test case that demonstrate my problem:


package org.apache.lucene.index;

import junit.framework.TestCase;
import org.apache.lucene.store.RAMDirectory;
import org.apache.lucene.store.Directory;
import org.apache.lucene.analysis.WhitespaceAnalyzer;
import org.apache.lucene.document.Document;
import org.apache.lucene.document.Field;
import org.apache.lucene.document.FieldSelector;
import org.apache.lucene.search.IndexSearcher;
import org.apache.lucene.search.TermQuery;

import java.io.IOException;
import java.util.Collection;

/**
* @author karl wettin <karl.wettin@gmail.com>
* Date: 2007-jan-19
* Time: 19:47:33
*/
public class TestDecoratedReader extends TestCase {

   private RAMDirectory dir;

   protected void setUp() throws Exception {
     dir = new RAMDirectory();
     IndexWriter iw = new IndexWriter(dir, new WhitespaceAnalyzer(),  
true);
     Document doc = new Document();
     doc.add(new Field("foo", "bar", Field.Store.YES,  
Field.Index.TOKENIZED));
     iw.addDocument(doc);
     iw.close();
   }

   public void testVanillaReader() throws Exception {
     test(IndexReader.open(dir));
   }

   public void testDecorated() throws Exception {
     test(new IndexReaderDecorator(IndexReader.open(dir)));
   }

   public void test(IndexReader reader) throws Exception {

     IndexSearcher searcher = new IndexSearcher(reader);

     assertEquals(1, searcher.search(new TermQuery(new Term("foo",  
"bar"))).length());
     assertEquals(1, reader.numDocs());
     reader.deleteDocument(0);
     assertEquals(0, searcher.search(new TermQuery(new Term("foo",  
"bar"))).length());
     reader.close();

     searcher.close();

     reader = IndexReader.open(dir);
     assertEquals(0, reader.numDocs()); // boom
     reader.close();
   }

   public static class IndexReaderDecorator extends IndexReader {
     private final IndexReader decorated;

      public IndexReader getDecorated() {
        return decorated;
      }

      public IndexReaderDecorator(IndexReader indexReader) {
        super(null);
        this.decorated = indexReader;
      }

      public Document document(int n, FieldSelector fieldSelector)  
throws IOException {
        return decorated.document(n, fieldSelector);
      }

      public TermFreqVector[] getTermFreqVectors(int docNumber)  
throws IOException {
        return decorated.getTermFreqVectors(docNumber);
      }

      public TermFreqVector getTermFreqVector(int docNumber, String  
field) throws IOException {
        return decorated.getTermFreqVector(docNumber, field);
      }

      public int numDocs() {
        return decorated.numDocs();
      }

      public int maxDoc() {
        return decorated.maxDoc();
      }

      public Document document(int n) throws IOException {
        return decorated.document(n);
      }

      public boolean isDeleted(int n) {
        return decorated.isDeleted(n);
      }

      public boolean hasDeletions() {
        return decorated.hasDeletions();
      }

      public byte[] norms(String field) throws IOException {
        return decorated.norms(field);
      }

      public void norms(String field, byte[] bytes, int offset)  
throws IOException {
        decorated.norms(field, bytes, offset);
      }

      protected void doSetNorm(int doc, String field, byte value)  
throws IOException {
        decorated.doSetNorm(doc, field, value);
      }

      public TermEnum terms() throws IOException {
        return decorated.terms();
      }

      public TermEnum terms(Term t) throws IOException {
        return decorated.terms(t);
      }

      public int docFreq(Term t) throws IOException {
        return decorated.docFreq(t);
      }

      public TermDocs termDocs() throws IOException {
        return decorated.termDocs();
      }

      public TermPositions termPositions() throws IOException {
        return decorated.termPositions();
      }

      protected void doDelete(int docNum) throws IOException {
        decorated.doDelete(docNum);
      }

      protected void doUndeleteAll() throws IOException {
        decorated.doUndeleteAll();
      }

      protected void doCommit() throws IOException {
        decorated.doCommit();
      }

      protected void doClose() throws IOException {
        decorated.doClose();
      }

      public Collection getFieldNames(FieldOption fldOption) {
        return decorated.getFieldNames(fldOption);
      }


      public long getVersion() {
        return decorated.getVersion();
      }

      public boolean isCurrent() throws IOException {
        return decorated.isCurrent();
      }

      public boolean isOptimized() {
        return decorated.isOptimized();
      }

      public boolean hasNorms(String field) throws IOException {
        return decorated.hasNorms(field);
      }

      public void setNorm(int doc, String field, float value) throws  
IOException {
        decorated.setNorm(doc, field, value);
      }

      public TermDocs termDocs(Term term) throws IOException {
        return decorated.termDocs(term);
      }

      public TermPositions termPositions(Term term) throws IOException {
        return decorated.termPositions(term);
      }

      void startCommit() {
        decorated.startCommit();
      }

      void rollbackCommit() {
        decorated.rollbackCommit();
      }

      protected void setDeleter(IndexFileDeleter deleter) {
        decorated.setDeleter(deleter);
      }

      protected IndexFileDeleter getDeleter() {
        return decorated.getDeleter();
      }

      void init(Directory directory, SegmentInfos segmentInfos,  
boolean closeDirectory, boolean directoryOwner) {
        decorated.init(directory, segmentInfos, closeDirectory,  
directoryOwner);
      }

      public Directory directory() {
        return decorated.directory();
      }
   }

}


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25603-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jan 20 02:42:48 2007
Return-Path: <java-user-return-25603-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84732 invoked from network); 20 Jan 2007 02:42:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Jan 2007 02:42:47 -0000
Received: (qmail 78770 invoked by uid 500); 20 Jan 2007 02:42:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78746 invoked by uid 500); 20 Jan 2007 02:42:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 77828 invoked by uid 99); 20 Jan 2007 02:39:18 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
X-DSPAM-Result: Innocent
X-DSPAM-Processed: Sat Jan 20 02:38:43 2007
X-DSPAM-Confidence: 0.9997
X-DSPAM-Probability: 0.0000
X-DSPAM-Signature: 45b180b3148959801715053
X-DSPAM-Factors: 27,
X-Virus-Scanned: amavisd-new at 
X-Spam-Score: -4.413
X-Spam-Level: 
In-Reply-To: <994CD21D-A8CE-460E-911C-D0AE97851FA5@gmail.com>
References: <994CD21D-A8CE-460E-911C-D0AE97851FA5@gmail.com>
Mime-Version: 1.0 (Apple Message framework v752.3)
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <17F1CD6B-2D2F-44FF-8634-A455F229DF73@polarrose.com>
Cc: java-user@lucene.apache.org
Content-Transfer-Encoding: 7bit
From: karl wettin <karl@polarrose.com>
Subject: Re: IndexReader can not be decorated
Date: Sat, 20 Jan 2007 03:38:10 +0100
To: karl wettin <karl.wettin@gmail.com>
X-Mailer: Apple Mail (2.752.3)
X-VirusChecked: Checked (www.simplymailsolutions.com AVscan 1.0)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-4.413 tagged_above=-10 required=2
	tests=[ALL_TRUSTED=-1.8, AWL=0.086, BAYES_00=-2.599, DSPAM_HAM=-0.1]


19 jan 2007 kl. 20.11 skrev karl wettin:

> For some reason I can't figure out, IndexReaders can not be  
> decorated. It is when commiting something deleted that it goes  
> wrong. Does anyone here know what the problem might be? I've been  
> debugging this more or less the whole day. Even tried desperate  
> attempts with get/settify use of the protected IndexFileDeleter  
> deleter, et c, but no luck so far.

Definializing in IndexReader and adding the following helped:

     public synchronized void deleteDocument(int docNum) throws  
IOException {
       decorated.deleteDocument(docNum);
     }
     protected synchronized void commit() throws IOException {
       decorated.commit();
     }

I still don't understand why. But then it's getting kind of late too.


> Here is a test case that demonstrate my problem:
>
>
> package org.apache.lucene.index;
>
> import junit.framework.TestCase;
> import org.apache.lucene.store.RAMDirectory;
> import org.apache.lucene.store.Directory;
> import org.apache.lucene.analysis.WhitespaceAnalyzer;
> import org.apache.lucene.document.Document;
> import org.apache.lucene.document.Field;
> import org.apache.lucene.document.FieldSelector;
> import org.apache.lucene.search.IndexSearcher;
> import org.apache.lucene.search.TermQuery;
>
> import java.io.IOException;
> import java.util.Collection;
>
> /**
> * @author karl wettin <karl.wettin@gmail.com>
> * Date: 2007-jan-19
> * Time: 19:47:33
> */
> public class TestDecoratedReader extends TestCase {
>
>   private RAMDirectory dir;
>
>   protected void setUp() throws Exception {
>     dir = new RAMDirectory();
>     IndexWriter iw = new IndexWriter(dir, new WhitespaceAnalyzer(),  
> true);
>     Document doc = new Document();
>     doc.add(new Field("foo", "bar", Field.Store.YES,  
> Field.Index.TOKENIZED));
>     iw.addDocument(doc);
>     iw.close();
>   }
>
>   public void testVanillaReader() throws Exception {
>     test(IndexReader.open(dir));
>   }
>
>   public void testDecorated() throws Exception {
>     test(new IndexReaderDecorator(IndexReader.open(dir)));
>   }
>
>   public void test(IndexReader reader) throws Exception {
>
>     IndexSearcher searcher = new IndexSearcher(reader);
>
>     assertEquals(1, searcher.search(new TermQuery(new Term("foo",  
> "bar"))).length());
>     assertEquals(1, reader.numDocs());
>     reader.deleteDocument(0);
>     assertEquals(0, searcher.search(new TermQuery(new Term("foo",  
> "bar"))).length());
>     reader.close();
>
>     searcher.close();
>
>     reader = IndexReader.open(dir);
>     assertEquals(0, reader.numDocs()); // boom
>     reader.close();
>   }
>
>   public static class IndexReaderDecorator extends IndexReader {
>     private final IndexReader decorated;
>
>      public IndexReader getDecorated() {
>        return decorated;
>      }
>
>      public IndexReaderDecorator(IndexReader indexReader) {
>        super(null);
>        this.decorated = indexReader;
>      }
>
>      public Document document(int n, FieldSelector fieldSelector)  
> throws IOException {
>        return decorated.document(n, fieldSelector);
>      }
>
>      public TermFreqVector[] getTermFreqVectors(int docNumber)  
> throws IOException {
>        return decorated.getTermFreqVectors(docNumber);
>      }
>
>      public TermFreqVector getTermFreqVector(int docNumber, String  
> field) throws IOException {
>        return decorated.getTermFreqVector(docNumber, field);
>      }
>
>      public int numDocs() {
>        return decorated.numDocs();
>      }
>
>      public int maxDoc() {
>        return decorated.maxDoc();
>      }
>
>      public Document document(int n) throws IOException {
>        return decorated.document(n);
>      }
>
>      public boolean isDeleted(int n) {
>        return decorated.isDeleted(n);
>      }
>
>      public boolean hasDeletions() {
>        return decorated.hasDeletions();
>      }
>
>      public byte[] norms(String field) throws IOException {
>        return decorated.norms(field);
>      }
>
>      public void norms(String field, byte[] bytes, int offset)  
> throws IOException {
>        decorated.norms(field, bytes, offset);
>      }
>
>      protected void doSetNorm(int doc, String field, byte value)  
> throws IOException {
>        decorated.doSetNorm(doc, field, value);
>      }
>
>      public TermEnum terms() throws IOException {
>        return decorated.terms();
>      }
>
>      public TermEnum terms(Term t) throws IOException {
>        return decorated.terms(t);
>      }
>
>      public int docFreq(Term t) throws IOException {
>        return decorated.docFreq(t);
>      }
>
>      public TermDocs termDocs() throws IOException {
>        return decorated.termDocs();
>      }
>
>      public TermPositions termPositions() throws IOException {
>        return decorated.termPositions();
>      }
>
>      protected void doDelete(int docNum) throws IOException {
>        decorated.doDelete(docNum);
>      }
>
>      protected void doUndeleteAll() throws IOException {
>        decorated.doUndeleteAll();
>      }
>
>      protected void doCommit() throws IOException {
>        decorated.doCommit();
>      }
>
>      protected void doClose() throws IOException {
>        decorated.doClose();
>      }
>
>      public Collection getFieldNames(FieldOption fldOption) {
>        return decorated.getFieldNames(fldOption);
>      }
>
>
>      public long getVersion() {
>        return decorated.getVersion();
>      }
>
>      public boolean isCurrent() throws IOException {
>        return decorated.isCurrent();
>      }
>
>      public boolean isOptimized() {
>        return decorated.isOptimized();
>      }
>
>      public boolean hasNorms(String field) throws IOException {
>        return decorated.hasNorms(field);
>      }
>
>      public void setNorm(int doc, String field, float value) throws  
> IOException {
>        decorated.setNorm(doc, field, value);
>      }
>
>      public TermDocs termDocs(Term term) throws IOException {
>        return decorated.termDocs(term);
>      }
>
>      public TermPositions termPositions(Term term) throws  
> IOException {
>        return decorated.termPositions(term);
>      }
>
>      void startCommit() {
>        decorated.startCommit();
>      }
>
>      void rollbackCommit() {
>        decorated.rollbackCommit();
>      }
>
>      protected void setDeleter(IndexFileDeleter deleter) {
>        decorated.setDeleter(deleter);
>      }
>
>      protected IndexFileDeleter getDeleter() {
>        return decorated.getDeleter();
>      }
>
>      void init(Directory directory, SegmentInfos segmentInfos,  
> boolean closeDirectory, boolean directoryOwner) {
>        decorated.init(directory, segmentInfos, closeDirectory,  
> directoryOwner);
>      }
>
>      public Directory directory() {
>        return decorated.directory();
>      }
>   }
>
> }
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25604-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jan 20 13:52:08 2007
Return-Path: <java-user-return-25604-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32561 invoked from network); 20 Jan 2007 13:52:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Jan 2007 13:52:07 -0000
Received: (qmail 4647 invoked by uid 500); 20 Jan 2007 13:52:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4618 invoked by uid 500); 20 Jan 2007 13:52:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4607 invoked by uid 99); 20 Jan 2007 13:52:05 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 20 Jan 2007 05:52:05 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of pvsaikrishna@gmail.com designates 66.249.92.175 as permitted sender)
Received: from [66.249.92.175] (HELO ug-out-1314.google.com) (66.249.92.175)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 20 Jan 2007 05:51:56 -0800
Received: by ug-out-1314.google.com with SMTP id k40so684402ugc
        for <java-user@lucene.apache.org>; Sat, 20 Jan 2007 05:51:35 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=Xg9NE+E0fDX+bmOHu73hch6L7NxayGnyD4Nov9NVkjpavFjaTh5Raw1GGvfQjdtvmrEDs3KHBRvJ1/lp/daSe+hXBsbfwbLenuPrdCyY8OuvMJdSAJd8ZpJV/Wa3gQvMZYeTkessGCZ7m5gSG2gGbzmqt8tzgOd5/QK1x3DBoKY=
Received: by 10.67.121.15 with SMTP id y15mr4619323ugm.1169301095066;
        Sat, 20 Jan 2007 05:51:35 -0800 (PST)
Received: by 10.67.102.10 with HTTP; Sat, 20 Jan 2007 05:51:34 -0800 (PST)
Message-ID: <171dbfa60701200551u5cc7eb65vb6cece88239dd274@mail.gmail.com>
Date: Sat, 20 Jan 2007 19:21:35 +0530
From: "saikrishna venkata pendyala" <pvsaikrishna@gmail.com>
To: java-user@lucene.apache.org
Subject: Re : Spell Checker Index
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_216142_11638070.1169301095002"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_216142_11638070.1169301095002
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hai all,
         This is what I did.
         """
         IndexReader reader = IndexReader.open("index");
         //static final File INDEX_DIR = new File("index");
         Directory directory = new RAMDirectory(index);
         SpellChecker spellchecker = new SpellChecker(directory);
         // To index a field of a user index:
         spellchecker.indexDictionary(new
LuceneDictionary(reader,"content"));
         String[] suggestions = spellchecker.suggestSimilar("fredom", 5);
         """

The problem with above code is every time I run the code it is indexing text
in "content" field.
                       {
spellchecker.indexDictionary(newLuceneDictionary(reader,"content"));
}
Is there any way I could save the spell checker index and use it straight
away.

------=_Part_216142_11638070.1169301095002--

From java-user-return-25605-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jan 20 14:09:32 2007
Return-Path: <java-user-return-25605-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35954 invoked from network); 20 Jan 2007 14:09:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Jan 2007 14:09:31 -0000
Received: (qmail 20031 invoked by uid 500); 20 Jan 2007 14:09:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20001 invoked by uid 500); 20 Jan 2007 14:09:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19990 invoked by uid 99); 20 Jan 2007 14:09:30 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 20 Jan 2007 06:09:30 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of karl.wettin@gmail.com designates 66.249.92.172 as permitted sender)
Received: from [66.249.92.172] (HELO ug-out-1314.google.com) (66.249.92.172)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 20 Jan 2007 06:09:21 -0800
Received: by ug-out-1314.google.com with SMTP id k40so686753ugc
        for <java-user@lucene.apache.org>; Sat, 20 Jan 2007 06:09:00 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=H7ac4CQ/t5+WH2Zeb8y1+dZ9PAXqcdSmsMIkX+nJfAexlBsXsvYkBqa5Nx2U+vN9+/z6D/fwRU2pQ+Yfhc1W0jmwix4DBjw1AfDh1h4i4xulHxsIR9XKJPJmX8rk2W8hmb2Ny8fOH5VRoXrLdUu1WxrsXIt7SgBaxz53DjQrGXs=
Received: by 10.67.93.6 with SMTP id v6mr4660718ugl.1169302140417;
        Sat, 20 Jan 2007 06:09:00 -0800 (PST)
Received: from ?192.168.0.131? ( [83.249.127.91])
        by mx.google.com with ESMTP id k2sm3380640ugf.2007.01.20.06.08.59;
        Sat, 20 Jan 2007 06:08:59 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <171dbfa60701200551u5cc7eb65vb6cece88239dd274@mail.gmail.com>
References: <171dbfa60701200551u5cc7eb65vb6cece88239dd274@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <7E943490-EF26-4B9B-BB57-021EFAB27A46@gmail.com>
Content-Transfer-Encoding: 7bit
From: karl wettin <karl.wettin@gmail.com>
Subject: Re: Re : Spell Checker Index
Date: Sat, 20 Jan 2007 15:08:30 +0100
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org


20 jan 2007 kl. 14.51 skrev saikrishna venkata pendyala:

> Hai all,
>         This is what I did.
>         """
>         IndexReader reader = IndexReader.open("index");
>         //static final File INDEX_DIR = new File("index");
>         Directory directory = new RAMDirectory(index);
>         SpellChecker spellchecker = new SpellChecker(directory);
>         // To index a field of a user index:
>         spellchecker.indexDictionary(new
> LuceneDictionary(reader,"content"));
>         String[] suggestions = spellchecker.suggestSimilar 
> ("fredom", 5);
>         """
>
> The problem with above code is every time I run the code it is  
> indexing text
> in "content" field.
>                       {
> spellchecker.indexDictionary(newLuceneDictionary(reader,"content"));
> }
> Is there any way I could save the spell checker index and use it  
> straight
> away.

You can use an FSDirectory instead of a RAMDirectory? It is simple to  
load an FSDirectory to a RAMDirectory and vice verse if that is  
something you need.





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25606-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jan 20 18:08:24 2007
Return-Path: <java-user-return-25606-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90514 invoked from network); 20 Jan 2007 18:08:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Jan 2007 18:08:23 -0000
Received: (qmail 87311 invoked by uid 500); 20 Jan 2007 18:08:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87272 invoked by uid 500); 20 Jan 2007 18:08:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87260 invoked by uid 99); 20 Jan 2007 18:08:23 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 20 Jan 2007 10:08:23 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of markrmiller@gmail.com designates 66.249.82.226 as permitted sender)
Received: from [66.249.82.226] (HELO wx-out-0506.google.com) (66.249.82.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 20 Jan 2007 10:08:13 -0800
Received: by wx-out-0506.google.com with SMTP id i29so751356wxd
        for <java-user@lucene.apache.org>; Sat, 20 Jan 2007 10:07:52 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=YCHYd9ljPDN9Zq8LcLJqCvlG+D9gDDR3vzslIp4hKS9VNXONydnLVUjsUVx99F4hvAYxGeXQqV8GOKTJjx9x1LYuaiaxqnXYHKWPqBj/fsvFEMkGGfa9Kmh+OuegJR1bosVnuHE7g1NTSHIKME6ntk9pB6/xd3Xpk0wOnB1DIs4=
Received: by 10.90.75.10 with SMTP id x10mr4487703aga.1169316472584;
        Sat, 20 Jan 2007 10:07:52 -0800 (PST)
Received: from ?192.168.1.103? ( [216.66.114.42])
        by mx.google.com with ESMTP id 33sm6062065wra.2007.01.20.10.07.50;
        Sat, 20 Jan 2007 10:07:51 -0800 (PST)
Message-ID: <45B25A64.405@gmail.com>
Date: Sat, 20 Jan 2007 13:07:32 -0500
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 1.5.0.9 (Windows/20061207)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Technology Preview of new Lucene QueryParser
References: <45A460E2.8090508@gmail.com> <Pine.LNX.4.58.0701101726150.29321@hal.rescomp.berkeley.edu> <45A5A468.1030604@gmail.com> <Pine.LNX.4.58.0701102008590.6750@hal.rescomp.berkeley.edu> <45A626DA.3080008@gmail.com> <Pine.LNX.4.58.0701111400020.12602@hal.rescomp.berkeley.edu>
In-Reply-To: <Pine.LNX.4.58.0701111400020.12602@hal.rescomp.berkeley.edu>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Chris Hostetter wrote:
> : > so do you convert A ! B ! C into a three clause boolean query, or a two
> : > clause BooleanQuery that contains another two clause BooleanQuery?
> : >
> : It becomes a three clause boolean query...would there be a difference in
> : scoring? I assumed not and it used to make a boolean that contained
> : another boolean...these days it checks to see if its in a chain of the
> : same operator and makes only one boolean.
>
> there is in fact a difference in score ... a big difference depending
> on how the coordFactor comes into play.  your three-clause approach makes
> sense to me as the "right" approach, but your "in a chain of the same
> operator" comment scares me ... how does "A | B | C ! D ! E" get parsed?
> I would assume it should result in the QueryParser equivilent of
> "A B C -D -E" ... is there any way to produce a the same underlying
> BooleanQuery using your syntax?
>   
This exchange has caused me to reassess my syntax. It seems that 
QueryParser's handling of A B C -D -E is special because QueryParser 
does not have any operator precedence rules (unless the 1 rule is that 
all operators resolve with the same precedence <g>). What would appear 
in my parser to map to A B C -D -E i.e.  A | B | C ! D ! E, actually 
maps to: A B (+C -D -E). If you want precedence applied to your query, 
there is no way around this-- that is what operator precedence creates. 
Unfortunately, that means my parser is not quite as "rich" as 
QueryParser. While I can duplicate the same hits, QueryParser has a 
greater scoring expressiveness (QueryParser can express precedence 
queries, but you must use parenthesis). My current idea (and mostly 
implemented) is to add a set of operators to my syntax that force a 
first level precedence resolve. To express the query A B C -D -E you 
would use A || B || C !! D !! E . Doubling the operator would 
effectively make the operator bind at the level of parenthesis. You 
could then mix like this: A B ! C & A || Z || B !! H & Q.

I think that this change will be a large step forward in supporting the 
entire Lucene Query/Scoring language with my parser.

- Mark

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25607-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jan 21 02:14:44 2007
Return-Path: <java-user-return-25607-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 83891 invoked from network); 21 Jan 2007 02:14:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Jan 2007 02:14:44 -0000
Received: (qmail 73417 invoked by uid 500); 21 Jan 2007 02:14:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73380 invoked by uid 500); 21 Jan 2007 02:14:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73369 invoked by uid 99); 21 Jan 2007 02:14:44 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 20 Jan 2007 18:14:44 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 20 Jan 2007 18:14:35 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 157CC5B763; Sat, 20 Jan 2007 18:14:14 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id EC74E7F403
	for <java-user@lucene.apache.org>; Sat, 20 Jan 2007 18:14:14 -0800 (PST)
Date: Sat, 20 Jan 2007 18:14:14 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Technology Preview of new Lucene QueryParser
In-Reply-To: <45B25A64.405@gmail.com>
Message-ID: <Pine.LNX.4.58.0701201810120.3448@hal.rescomp.berkeley.edu>
References: <45A460E2.8090508@gmail.com> <Pine.LNX.4.58.0701101726150.29321@hal.rescomp.berkeley.edu>
 <45A5A468.1030604@gmail.com> <Pine.LNX.4.58.0701102008590.6750@hal.rescomp.berkeley.edu>
 <45A626DA.3080008@gmail.com> <Pine.LNX.4.58.0701111400020.12602@hal.rescomp.berkeley.edu>
 <45B25A64.405@gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org

: This exchange has caused me to reassess my syntax. It seems that
: QueryParser's handling of A B C -D -E is special because QueryParser
: does not have any operator precedence rules (unless the 1 rule is that
: all operators resolve with the same precedence <g>). What would appear

there are some precedence rules, but they really only apply when using
"AND", "OR", or "NOT" -- which as i've gone on record with many teams: are
big freaking hasks that people shouldn't use.

the big reason QueryParser doesn't have to wory about precidence, is
because it's core operators: "+" and "-" are unary, which makes sense
given the way BooleanQuery works: the "prohibited" and "mandatory"
options apply to individual clauses... in your syntax you've made all
operators binary, so you have to decide how to map those binary
opertor concepts to the unary "options" of BooleanQuery.





-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25608-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jan 21 03:09:46 2007
Return-Path: <java-user-return-25608-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96711 invoked from network); 21 Jan 2007 03:09:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Jan 2007 03:09:45 -0000
Received: (qmail 95316 invoked by uid 500); 21 Jan 2007 03:09:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95273 invoked by uid 500); 21 Jan 2007 03:09:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95262 invoked by uid 99); 21 Jan 2007 03:09:42 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 20 Jan 2007 19:09:42 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of markrmiller@gmail.com designates 66.249.82.226 as permitted sender)
Received: from [66.249.82.226] (HELO wx-out-0506.google.com) (66.249.82.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 20 Jan 2007 19:09:32 -0800
Received: by wx-out-0506.google.com with SMTP id i29so839558wxd
        for <java-user@lucene.apache.org>; Sat, 20 Jan 2007 19:09:11 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=NZaLjfRHSxLm+VNzxEzqEO3IWpE2qD0NWdUo8t8/X5fRrTZLupFWheQ2u8yyHMFxAPoyXWql/JEDd9WQkX1DzPo5mst2N2CGhSi4d8qxLLg43PsuJP/2/ocDJImUYVmwi6sG9qniS+96knDLX4+2V87lrVLQfHTS6ridQ7oso9Y=
Received: by 10.70.11.1 with SMTP id 1mr7425479wxk.1169348951051;
        Sat, 20 Jan 2007 19:09:11 -0800 (PST)
Received: from ?192.168.1.103? ( [216.66.114.42])
        by mx.google.com with ESMTP id 43sm6788468wri.2007.01.20.19.09.09;
        Sat, 20 Jan 2007 19:09:10 -0800 (PST)
Message-ID: <45B2D976.8040707@gmail.com>
Date: Sat, 20 Jan 2007 22:09:42 -0500
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 1.5.0.9 (Windows/20061207)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Technology Preview of new Lucene QueryParser
References: <45A460E2.8090508@gmail.com> <Pine.LNX.4.58.0701101726150.29321@hal.rescomp.berkeley.edu> <45A5A468.1030604@gmail.com> <Pine.LNX.4.58.0701102008590.6750@hal.rescomp.berkeley.edu> <45A626DA.3080008@gmail.com> <Pine.LNX.4.58.0701111400020.12602@hal.rescomp.berkeley.edu> <45B25A64.405@gmail.com> <Pine.LNX.4.58.0701201810120.3448@hal.rescomp.berkeley.edu>
In-Reply-To: <Pine.LNX.4.58.0701201810120.3448@hal.rescomp.berkeley.edu>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org



Chris Hostetter wrote:
> : This exchange has caused me to reassess my syntax. It seems that
> : QueryParser's handling of A B C -D -E is special because QueryParser
> : does not have any operator precedence rules (unless the 1 rule is that
> : all operators resolve with the same precedence <g>). What would appear
>
> there are some precedence rules, but they really only apply when using
> "AND", "OR", or "NOT" -- which as i've gone on record with many teams: are
> big freaking hasks that people shouldn't use.
>
>   
 From what I understand "AND", "OR", and "NOT" do not follow normal 
precedence rules. I thought instead that AND just means to MUST both 
sides of the AND and OR means to SHOULD both sides etc. While this might 
create a form of precedence, it's a confusing oddity that I am not a fan 
of either. I am sure I saw a comment from Erick explaining that the 
QueryParser to works this way.

With my syntax you can get real precedence that mixes with how no 
precedence (Lucene's unary operators) works. No precedence is created by 
allowing you to make any operator resolve first...any operator that 
resolves first connected with another operator that resolves first will 
behave as if neither has precedence over the other and generate a single 
BooleanQuery.

- Mark

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25609-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jan 21 12:14:45 2007
Return-Path: <java-user-return-25609-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98627 invoked from network); 21 Jan 2007 12:14:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Jan 2007 12:14:44 -0000
Received: (qmail 73096 invoked by uid 500); 21 Jan 2007 12:14:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73054 invoked by uid 500); 21 Jan 2007 12:14:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73043 invoked by uid 99); 21 Jan 2007 12:14:45 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 21 Jan 2007 04:14:44 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [217.146.176.33] (HELO web26409.mail.ukl.yahoo.com) (217.146.176.33)
    by apache.org (qpsmtpd/0.29) with SMTP; Sun, 21 Jan 2007 04:14:35 -0800
Received: (qmail 10929 invoked by uid 60001); 21 Jan 2007 12:14:13 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.fr;
  h=X-YMail-OSG:Received:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=Syraru+M8p6BiagK2GykD588SxBZaRiuS9GFGZ0GrI4OOqDc+iR8iGbUQz1XPOdyXprNq+GS3m1OLeXRTfnHu0vs9kq+NlzpS67Lj1JvnYPaNIMV32h9uFU3NIvkW4EdCS3cUI+tXI3DJ7AgpUG91ctg9DgMCoyZGZUFegnsDFU=;
X-YMail-OSG: f8S1Zg0VM1k9802e.kgkEKZczNrwMDqdBLJYRdUA6mcbHZ4uiansv4TyehfID51LluSDmhjhd4tNJbXNn.8uhx77p4a3holE0gtlHuwA.KwWuDJU1QlXTCdXkqBljTetcOKQpnhfMhonTQTeW0V80GNY499VVWDmiTKbh_2NGt.lNu8xiEO_VLyV
Received: from [204.16.126.252] by web26409.mail.ukl.yahoo.com via HTTP; Sun, 21 Jan 2007 13:14:12 CET
Date: Sun, 21 Jan 2007 13:14:12 +0100 (CET)
From: david chris <orlondodavid@yahoo.fr>
Subject: Lucene and queries
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-160013034-1169381652=:10021"
Content-Transfer-Encoding: 8bit
Message-ID: <150731.10021.qm@web26409.mail.ukl.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

--0-160013034-1169381652=:10021
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit

Hi,

I am wondering if Lucene can handle the following queries:
(1) A * *
give me all documents with word A followed by exactly two words
(2) A * * B *
give me all documents with words A and B exactly separated by 2 words and word B followed by one word
(3) * * A
give me all documents with word A prefixed by exactly two words

Thanks.

David.

 		
---------------------------------
 Dcouvrez une nouvelle faon d'obtenir des rponses  toutes vos questions ! Profitez des connaissances, des opinions et des expriences des internautes sur Yahoo! Questions/Rponses.
--0-160013034-1169381652=:10021--

From java-user-return-25610-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jan 21 15:14:51 2007
Return-Path: <java-user-return-25610-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32226 invoked from network); 21 Jan 2007 15:14:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Jan 2007 15:14:51 -0000
Received: (qmail 53373 invoked by uid 500); 21 Jan 2007 15:14:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53338 invoked by uid 500); 21 Jan 2007 15:14:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53327 invoked by uid 99); 21 Jan 2007 15:14:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 21 Jan 2007 07:14:51 -0800
X-ASF-Spam-Status: No, hits=2.9 required=10.0
	tests=HTML_10_20,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 66.249.92.175 as permitted sender)
Received: from [66.249.92.175] (HELO ug-out-1314.google.com) (66.249.92.175)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 21 Jan 2007 07:14:42 -0800
Received: by ug-out-1314.google.com with SMTP id k40so844927ugc
        for <java-user@lucene.apache.org>; Sun, 21 Jan 2007 07:14:21 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=crdWQLbyrNXS3oqP8xaBMZY0eeUEmHsZlXmDyRIWjl8NICo4/1GQJ4Jz5bIYfe/zLV2PJlJ4mVmH1kqrB2dClVfn000dQREibPe0U3OdcGwd9GN1viGx8l969f/J8sSlGHTp/ffPpg8DhzPtDdl6idar9mZlXrCwWVfjGME/qkw=
Received: by 10.82.162.14 with SMTP id k14mr4575380bue.1169392460084;
        Sun, 21 Jan 2007 07:14:20 -0800 (PST)
Received: by 10.82.162.20 with HTTP; Sun, 21 Jan 2007 07:14:20 -0800 (PST)
Message-ID: <359a92830701210714q5433f166gf904965f38a1d76d@mail.gmail.com>
Date: Sun, 21 Jan 2007 10:14:20 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene and queries
In-Reply-To: <150731.10021.qm@web26409.mail.ukl.yahoo.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_219611_28630711.1169392460055"
References: <150731.10021.qm@web26409.mail.ukl.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_219611_28630711.1169392460055
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

My question is "what are you trying to accomplish"? The reason I ask is tha=
t
all three queries pre-suppose that the search you're performing is on a ver=
y
precisely defined fields. (1) supposes a field where the A is exactly three
words from the end. (3) supposes the A is exactly three words from the
beginning. (2) must be a field that has the A exactly 5 words from the end
and B exactly two words from the end. This seems kind of an odd requirement
and doesn't map into problem spaces I'm familiar with. I wonder if there ar=
e
parts of your problem you're leaving out, for instance "in a sentence" or
some such....

I'm pretty sure the information you need to create a custom HitCollector is
in the index, and there are a bunch of indexing tricks you can play to make
this easier, but I suspect the contributors to this list will have much mor=
e
helpful answers for you if you add a bit of detail....

There's no syntax I know of that'll give you this kind of query out of the
box. The closest thing would be span queries, which will give you things
like A**B, meaning "give me all documents where A is NOT MORE THAN 2 words
away from B. This is not what you're asking for, since it would also return
A*B and AB though...

Best
Erick

On 1/21/07, david chris <orlondodavid@yahoo.fr> wrote:
>
> Hi,
>
> I am wondering if Lucene can handle the following queries:
> (1) A * *
> give me all documents with word A followed by exactly two words
> (2) A * * B *
> give me all documents with words A and B exactly separated by 2 words and
> word B followed by one word
> (3) * * A
> give me all documents with word A prefixed by exactly two words
>
> Thanks.
>
> David.
>
>
> ---------------------------------
> D=E9couvrez une nouvelle fa=E7on d'obtenir des r=E9ponses =E0 toutes vos =
questions
> ! Profitez des connaissances, des opinions et des exp=E9riences des
> internautes sur Yahoo! Questions/R=E9ponses.
>

------=_Part_219611_28630711.1169392460055--

From java-user-return-25611-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jan 21 19:04:45 2007
Return-Path: <java-user-return-25611-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69619 invoked from network); 21 Jan 2007 19:04:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Jan 2007 19:04:43 -0000
Received: (qmail 48026 invoked by uid 500); 21 Jan 2007 19:04:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47992 invoked by uid 500); 21 Jan 2007 19:04:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47981 invoked by uid 99); 21 Jan 2007 19:04:43 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 21 Jan 2007 11:04:43 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 21 Jan 2007 11:04:35 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id C7DBA5B763; Sun, 21 Jan 2007 11:04:14 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id AA0FA7F403
	for <java-user@lucene.apache.org>; Sun, 21 Jan 2007 11:04:14 -0800 (PST)
Date: Sun, 21 Jan 2007 11:04:14 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: Lucene Users <java-user@lucene.apache.org>
Subject: Re: Lucene and queries
In-Reply-To: <359a92830701210714q5433f166gf904965f38a1d76d@mail.gmail.com>
Message-ID: <Pine.LNX.4.58.0701211100220.6326@hal.rescomp.berkeley.edu>
References: <150731.10021.qm@web26409.mail.ukl.yahoo.com>
 <359a92830701210714q5433f166gf904965f38a1d76d@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: There's no syntax I know of that'll give you this kind of query out of the
: box. The closest thing would be span queries, which will give you things
: like A**B, meaning "give me all documents where A is NOT MORE THAN 2 words
: away from B. This is not what you're asking for, since it would also return
: A*B and AB though...

there's also some ambiguity in wether or not the "*"s inthese examples can
be any term, or must not be the other terms you are dealing wiht (ie: does
"A A A" match #1 and #3? ... does "A A B B B" match #2.

: > (1) A * *
: > give me all documents with word A followed by exactly two words
: > (2) A * * B *
: > give me all documents with words A and B exactly separated by 2 words and
: > word B followed by one word
: > (3) * * A
: > give me all documents with word A prefixed by exactly two words


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25612-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jan 21 23:59:22 2007
Return-Path: <java-user-return-25612-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61337 invoked from network); 21 Jan 2007 23:59:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Jan 2007 23:59:21 -0000
Received: (qmail 72577 invoked by uid 500); 21 Jan 2007 23:59:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72551 invoked by uid 500); 21 Jan 2007 23:59:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72540 invoked by uid 99); 21 Jan 2007 23:59:20 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 21 Jan 2007 15:59:20 -0800
X-ASF-Spam-Status: No, hits=2.9 required=10.0
	tests=HTML_10_20,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [217.146.177.57] (HELO web26415.mail.ukl.yahoo.com) (217.146.177.57)
    by apache.org (qpsmtpd/0.29) with SMTP; Sun, 21 Jan 2007 15:59:11 -0800
Received: (qmail 64122 invoked by uid 60001); 21 Jan 2007 23:58:49 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.fr;
  h=X-YMail-OSG:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=DTTlX3MUbJNi9IlXXr6hnEGnzrV6bKathQ6r8VK7gEThl/XSNkUqb/xOrlhaQmL+IbxFiu5U36txUzC+agHffg2OWERbwAbC9Cgjas6vZFXyXMCuOolmYPU+pb8fLag+BczKan+Oivt5Xo5ynr4R2RlZdGViI72SltD3SU2b2vs=;
X-YMail-OSG: BhKpSuYVM1nzTlAR8NyqTR.3Seq7gIVvHZVShbOfgwI169YzvBLpS5LHbFCMc2AEkKgwRC3AvXNoxKqX92TjyOhfPkWlXF9ZCYMErQYGBw7KkkrOzv.oXhb8ng4tFejGnhxWGO1i7Zh7o176d28KryPAvfwIVT94
Received: from [204.16.126.252] by web26415.mail.ukl.yahoo.com via HTTP; Mon, 22 Jan 2007 00:58:48 CET
Date: Mon, 22 Jan 2007 00:58:48 +0100 (CET)
From: david chris <orlondodavid@yahoo.fr>
Subject: RE : Re: Lucene and queries
To: java-user@lucene.apache.org
In-Reply-To: <Pine.LNX.4.58.0701211100220.6326@hal.rescomp.berkeley.edu>
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-128997802-1169423928=:61033"
Content-Transfer-Encoding: 8bit
Message-ID: <46633.61033.qm@web26415.mail.ukl.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

--0-128997802-1169423928=:61033
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit

thank you for your posts ..

the "*" is any word .. hopefully, i should be able to identify sentences in a text and then apply one of these 3 rules ..

(1) A  * * 
find the sentences that include the word A and to its left exactly two words (any words)
(2)  A * * B *
find the sentences that include the words A and B with between the word A and B exactly two words (any words) and to  the left of word B exactly one word (any)
(3) * * A
find  the sentences that include the word A and to its right exactly two words (any words)

hope it is better

thanks
 

Chris Hostetter <hossman_lucene@fucit.org> a crit : 
: There's no syntax I know of that'll give you this kind of query out of the
: box. The closest thing would be span queries, which will give you things
: like A**B, meaning "give me all documents where A is NOT MORE THAN 2 words
: away from B. This is not what you're asking for, since it would also return
: A*B and AB though...

there's also some ambiguity in wether or not the "*"s inthese examples can
be any term, or must not be the other terms you are dealing wiht (ie: does
"A A A" match #1 and #3? ... does "A A B B B" match #2.

: > (1) A * *
: > give me all documents with word A followed by exactly two words
: > (2) A * * B *
: > give me all documents with words A and B exactly separated by 2 words and
: > word B followed by one word
: > (3) * * A
: > give me all documents with word A prefixed by exactly two words


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



 		
---------------------------------
 Dcouvrez une nouvelle faon d'obtenir des rponses  toutes vos questions ! Profitez des connaissances, des opinions et des expriences des internautes sur Yahoo! Questions/Rponses.
--0-128997802-1169423928=:61033--

From java-user-return-25613-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 22 04:23:11 2007
Return-Path: <java-user-return-25613-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 14268 invoked from network); 22 Jan 2007 04:23:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Jan 2007 04:23:10 -0000
Received: (qmail 57580 invoked by uid 500); 22 Jan 2007 04:23:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57544 invoked by uid 500); 22 Jan 2007 04:23:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57533 invoked by uid 99); 22 Jan 2007 04:23:10 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 21 Jan 2007 20:23:10 -0800
X-ASF-Spam-Status: No, hits=2.3 required=10.0
	tests=HTML_MESSAGE,RCVD_IN_NJABL_PROXY
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [203.84.221.132] (HELO web8711.mail.in.yahoo.com) (203.84.221.132)
    by apache.org (qpsmtpd/0.29) with SMTP; Sun, 21 Jan 2007 20:23:00 -0800
Received: (qmail 78906 invoked by uid 60001); 22 Jan 2007 04:22:36 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.in;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=ECLbGwe7UinlB9/yiggm2DmYfuEiKvTwliaTwXSyF8ntzK4mYu4m530P4oXq+9ncHFjSIPkhyr7NZO7BNV49ATW/BkBAl7VhiC0kDN4WJ8TvQLhGzEZGyWaU60m5G0Evpt6XFY2K9qbyfFRiJjNf/M7rCMJbBAAUpFN9sZikuuc=;
X-YMail-OSG: zVbDNnoVM1lHdrG_2W5oJVW_X_jQTEVes6BQAbNGGuBGsF9GKzlsm1lX.0gCFZixs8aekqRAPLlW2.Fa2FZPmCvP2Hl1JJ5ZfAo9aC4g5CptpHnxOhCT8LUKQ11cpePfsqxF
Received: from [59.95.163.125] by web8711.mail.in.yahoo.com via HTTP; Mon, 22 Jan 2007 09:52:36 IST
X-Mailer: YahooMailRC/368.3 YahooMailWebService/0.6.132.7
Date: Mon, 22 Jan 2007 09:52:36 +0530 (IST)
From: aslam bari <iamaslamok@yahoo.co.in>
Subject: Big size xml file indexing
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-1525298833-1169439756=:77357"
Message-ID: <708562.77357.qm@web8711.mail.in.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

--0-1525298833-1169439756=:77357
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable

Dear all,=0AI m using lucene to index xml files. For parsing i m using JDOM=
 to get XPATH nodes and do some manipulation on them and indexed them. All =
things work well but when the file size is very big about 35 - 50 MB. Then =
it goes out of memory or take a lot of time. How can i set some parameters =
to speed up and took less memory to parse the file. The problem is that i c=
annot increase much high Heap Size. So i have to limit to use heap size of =
300 - 500 MB. Has anybody some solution for this.=0A=0AThanks...=0A=0A=0A=
=09=09=0A__________________________________________________________=0AYahoo=
! India Answers: Share what you know. Learn something new=0Ahttp://in.answe=
rs.yahoo.com/
--0-1525298833-1169439756=:77357--

From java-user-return-25614-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 22 04:37:59 2007
Return-Path: <java-user-return-25614-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 18667 invoked from network); 22 Jan 2007 04:37:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Jan 2007 04:37:58 -0000
Received: (qmail 66773 invoked by uid 500); 22 Jan 2007 04:37:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66735 invoked by uid 500); 22 Jan 2007 04:37:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66724 invoked by uid 99); 22 Jan 2007 04:37:58 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 21 Jan 2007 20:37:58 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of pvsaikrishna@gmail.com designates 66.249.92.173 as permitted sender)
Received: from [66.249.92.173] (HELO ug-out-1314.google.com) (66.249.92.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 21 Jan 2007 20:37:48 -0800
Received: by ug-out-1314.google.com with SMTP id k40so995263ugc
        for <java-user@lucene.apache.org>; Sun, 21 Jan 2007 20:37:27 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=DOOtSO5pC3En/2KctFIq6cOETPdQu6lBjIPckUPeWgeKuSstf+iGCEa3/Wd4BkndbLBRtRZD5joIUvyCAY4fVD5uUy8jg3oLUYXEceMxxZXEN6E2wfRPeW559vDL9q5w9MOafyz2dj55zhTWYgOoRYNlqMhCaNZb5pCN42ZkVYs=
Received: by 10.67.91.6 with SMTP id t6mr6902908ugl.1169440647606;
        Sun, 21 Jan 2007 20:37:27 -0800 (PST)
Received: by 10.67.102.10 with HTTP; Sun, 21 Jan 2007 20:37:27 -0800 (PST)
Message-ID: <171dbfa60701212037h52b89f6eh29d6aa4dbd7206d3@mail.gmail.com>
Date: Mon, 22 Jan 2007 10:07:27 +0530
From: "saikrishna venkata pendyala" <pvsaikrishna@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Big size xml file indexing
In-Reply-To: <708562.77357.qm@web8711.mail.in.yahoo.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_236065_18621078.1169440647569"
References: <708562.77357.qm@web8711.mail.in.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_236065_18621078.1169440647569
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hai ,
       I have indexed 6.2 gb xml file using lucene. What I did was
        1 .  I have splitted the 6.2gb file into small files each of size
10mb.
        2 .  And then I worte a python script to quantize number
no.ofdocuments in each file.

        Structure of my xml file is """
       <document>
        -----
        -----
        </document>
        <document>
        -----
        -----
        </document> """

Since you cannot go beyond 500MB this technique might help you of course if
file sturcture is the same.

On 1/22/07, aslam bari <iamaslamok@yahoo.co.in> wrote:
>
> Dear all,
> I m using lucene to index xml files. For parsing i m using JDOM to get
> XPATH nodes and do some manipulation on them and indexed them. All things
> work well but when the file size is very big about 35 - 50 MB. Then it goes
> out of memory or take a lot of time. How can i set some parameters to speed
> up and took less memory to parse the file. The problem is that i cannot
> increase much high Heap Size. So i have to limit to use heap size of 300 -
> 500 MB. Has anybody some solution for this.
>
> Thanks...
>
>
>
> __________________________________________________________
> Yahoo! India Answers: Share what you know. Learn something new
> http://in.answers.yahoo.com/
>

------=_Part_236065_18621078.1169440647569--

From java-user-return-25615-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 22 04:50:44 2007
Return-Path: <java-user-return-25615-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20428 invoked from network); 22 Jan 2007 04:50:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Jan 2007 04:50:42 -0000
Received: (qmail 75519 invoked by uid 500); 22 Jan 2007 04:50:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75134 invoked by uid 500); 22 Jan 2007 04:50:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75123 invoked by uid 99); 22 Jan 2007 04:50:43 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 21 Jan 2007 20:50:43 -0800
X-ASF-Spam-Status: No, hits=2.3 required=10.0
	tests=HTML_MESSAGE,RCVD_IN_NJABL_PROXY
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [203.84.221.123] (HELO web8702.mail.in.yahoo.com) (203.84.221.123)
    by apache.org (qpsmtpd/0.29) with SMTP; Sun, 21 Jan 2007 20:50:33 -0800
Received: (qmail 77071 invoked by uid 60001); 22 Jan 2007 04:50:09 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.in;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type;
  b=y2Si20xBNVyVThELEQgVtad7d2WwkRhE3p3X7zz75SgKtcoiKu8AZdDGuV0c6U0uDTGBkbCfUdVORIkgcDhBfBG6N76g+lgkIkLU5z9IJE+svcw8aUQZfh0N+BeS8aDLDoIRUSF/43uNzFdSzq0EB69MDS6qx/g020lsVNigM1Q=  ;
Message-ID: <20070122045009.77069.qmail@web8702.mail.in.yahoo.com>
X-YMail-OSG: IF2VJyYVM1lbX0jcyWzohzxTAh_E6iEGxfzGeoqvVV1S6NeymqCy_Of_afoXqXE2Vg--
Received: from [59.95.163.125] by web8702.mail.in.yahoo.com via HTTP; Mon, 22 Jan 2007 10:20:09 IST
X-Mailer: YahooMailRC/368.3 YahooMailWebService/0.6.132.7
Date: Mon, 22 Jan 2007 10:20:09 +0530 (IST)
From: aslam bari <iamaslamok@yahoo.co.in>
Subject: Re: Big size xml file indexing
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-1254545609-1169441409=:75786"
X-Virus-Checked: Checked by ClamAV on apache.org

--0-1254545609-1169441409=:75786
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable

Hi Saikrishna,=0AThanks for reply,=0ABut i don't know how i can go with thi=
s. Here is my code sample, let me know where to change.=0A=0ASAXBuilder bui=
lder =3D new SAXBuilder();=0A=0A//CONTENT here is bytearrayinputstream , i =
know i can give here file url also. Let me know whta is best.=0ADocument do=
c =3D builder.build(CONTENT);=0A=0Aloop(---)=0A{=0A    doc.selectNodes(xpat=
hquery);=0A}=0A=0AThanks...=0A----- Original Message ----=0AFrom: saikrishn=
a venkata pendyala <pvsaikrishna@gmail.com>=0ATo: java-user@lucene.apache.o=
rg=0ASent: Monday, 22 January, 2007 10:07:27 AM=0ASubject: Re: Big size xml=
 file indexing=0A=0A=0AHai ,=0A       I have indexed 6.2 gb xml file using =
lucene. What I did was=0A        1 .  I have splitted the 6.2gb file into s=
mall files each of size=0A10mb.=0A        2 .  And then I worte a python sc=
ript to quantize number=0Ano.ofdocuments in each file.=0A=0A        Structu=
re of my xml file is """=0A       <document>=0A        -----=0A        ----=
-=0A        </document>=0A        <document>=0A        -----=0A        ----=
-=0A        </document> """=0A=0ASince you cannot go beyond 500MB this tech=
nique might help you of course if=0Afile sturcture is the same.=0A=0AOn 1/2=
2/07, aslam bari <iamaslamok@yahoo.co.in> wrote:=0A>=0A> Dear all,=0A> I m =
using lucene to index xml files. For parsing i m using JDOM to get=0A> XPAT=
H nodes and do some manipulation on them and indexed them. All things=0A> w=
ork well but when the file size is very big about 35 - 50 MB. Then it goes=
=0A> out of memory or take a lot of time. How can i set some parameters to =
speed=0A> up and took less memory to parse the file. The problem is that i =
cannot=0A> increase much high Heap Size. So i have to limit to use heap siz=
e of 300 -=0A> 500 MB. Has anybody some solution for this.=0A>=0A> Thanks..=
.=0A>=0A>=0A>=0A> _________________________________________________________=
_=0A> Yahoo! India Answers: Share what you know. Learn something new=0A> ht=
tp://in.answers.yahoo.com/=0A>=0A=0A=0A=09=09=0A___________________________=
_______________________________=0AYahoo! India Answers: Share what you know=
. Learn something new=0Ahttp://in.answers.yahoo.com/
--0-1254545609-1169441409=:75786--

From java-user-return-25616-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 22 05:15:20 2007
Return-Path: <java-user-return-25616-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 24513 invoked from network); 22 Jan 2007 05:15:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Jan 2007 05:15:20 -0000
Received: (qmail 7181 invoked by uid 500); 22 Jan 2007 05:15:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6233 invoked by uid 500); 22 Jan 2007 05:15:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6222 invoked by uid 99); 22 Jan 2007 05:15:21 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 21 Jan 2007 21:15:21 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of pvsaikrishna@gmail.com designates 66.249.92.171 as permitted sender)
Received: from [66.249.92.171] (HELO ug-out-1314.google.com) (66.249.92.171)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 21 Jan 2007 21:15:12 -0800
Received: by ug-out-1314.google.com with SMTP id k40so1000321ugc
        for <java-user@lucene.apache.org>; Sun, 21 Jan 2007 21:14:50 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=qs0ghGCGHIeVAjVCgtjI9H+CS6MLUWgGI47hIgu4dPMz8qycTotWhX79SaV1I7R90OMSbQa0SRIPtSZoeAS7F9rcMp3GjDv0bXNv7MAMS9XOdPC80GoqtluHZGZHr4syu+ESD3PhGrzcEOLqH+gTLnsnf9lSv1ctJJp3I30Yg+c=
Received: by 10.67.119.13 with SMTP id w13mr7005029ugm.1169442890534;
        Sun, 21 Jan 2007 21:14:50 -0800 (PST)
Received: by 10.67.102.10 with HTTP; Sun, 21 Jan 2007 21:14:50 -0800 (PST)
Message-ID: <171dbfa60701212114s160d0f6dq3c3a5a1c49dab18c@mail.gmail.com>
Date: Mon, 22 Jan 2007 10:44:50 +0530
From: "saikrishna venkata pendyala" <pvsaikrishna@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Big size xml file indexing
In-Reply-To: <20070122045009.77069.qmail@web8702.mail.in.yahoo.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_236533_15940135.1169442890499"
References: <20070122045009.77069.qmail@web8702.mail.in.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_236533_15940135.1169442890499
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hai ,
       Nothing to change in Indexing process. What requires is a little
pre-processing.
       If the structure of ur xml file is same as what I said earlier,then
split the 35MB file into small files and make sure that new small files
generated are of correct xml syntax.
       Now Index small files{more than one} generated instead of one large
file.

       Could you say the sturcture of ur xml file and what ur trying to
index.

On 1/22/07, aslam bari <iamaslamok@yahoo.co.in> wrote:
>
> Hi Saikrishna,
> Thanks for reply,
> But i don't know how i can go with this. Here is my code sample, let me
> know where to change.
>
> SAXBuilder builder = new SAXBuilder();
>
> //CONTENT here is bytearrayinputstream , i know i can give here file url
> also. Let me know whta is best.
> Document doc = builder.build(CONTENT);
>
> loop(---)
> {
>     doc.selectNodes(xpathquery);
> }
>
> Thanks...
> ----- Original Message ----
> From: saikrishna venkata pendyala <pvsaikrishna@gmail.com>
> To: java-user@lucene.apache.org
> Sent: Monday, 22 January, 2007 10:07:27 AM
> Subject: Re: Big size xml file indexing
>
>
> Hai ,
>        I have indexed 6.2 gb xml file using lucene. What I did was
>         1 .  I have splitted the 6.2gb file into small files each of size
> 10mb.
>         2 .  And then I worte a python script to quantize number
> no.ofdocuments in each file.
>
>         Structure of my xml file is """
>        <document>
>         -----
>         -----
>         </document>
>         <document>
>         -----
>         -----
>         </document> """
>
> Since you cannot go beyond 500MB this technique might help you of course
> if
> file sturcture is the same.
>
> On 1/22/07, aslam bari <iamaslamok@yahoo.co.in> wrote:
> >
> > Dear all,
> > I m using lucene to index xml files. For parsing i m using JDOM to get
> > XPATH nodes and do some manipulation on them and indexed them. All
> things
> > work well but when the file size is very big about 35 - 50 MB. Then it
> goes
> > out of memory or take a lot of time. How can i set some parameters to
> speed
> > up and took less memory to parse the file. The problem is that i cannot
> > increase much high Heap Size. So i have to limit to use heap size of 300
> -
> > 500 MB. Has anybody some solution for this.
> >
> > Thanks...
> >
> >
> >
> > __________________________________________________________
> > Yahoo! India Answers: Share what you know. Learn something new
> > http://in.answers.yahoo.com/
> >
>
>
>
> __________________________________________________________
> Yahoo! India Answers: Share what you know. Learn something new
> http://in.answers.yahoo.com/
>

------=_Part_236533_15940135.1169442890499--

From java-user-return-25617-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 22 05:46:27 2007
Return-Path: <java-user-return-25617-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31437 invoked from network); 22 Jan 2007 05:46:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Jan 2007 05:46:26 -0000
Received: (qmail 26825 invoked by uid 500); 22 Jan 2007 05:46:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26774 invoked by uid 500); 22 Jan 2007 05:46:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26763 invoked by uid 99); 22 Jan 2007 05:46:26 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 21 Jan 2007 21:46:26 -0800
X-ASF-Spam-Status: No, hits=2.3 required=10.0
	tests=HTML_MESSAGE,RCVD_IN_NJABL_PROXY
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [203.84.221.122] (HELO web8701.mail.in.yahoo.com) (203.84.221.122)
    by apache.org (qpsmtpd/0.29) with SMTP; Sun, 21 Jan 2007 21:46:14 -0800
Received: (qmail 47276 invoked by uid 60001); 22 Jan 2007 05:45:49 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.in;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type;
  b=W7Fz96DnO5dXNmP+VgCTyMm0VPhBM59jgap63BMUrYN78mGQrRNTQ9frIGdXB4NqvwZ+QRZ0bmMQw0nJ6x1KJxegR1z1eiv3lUgwhK/t4sbxECA4nCjREcq014eLpsYm4QtF/2NBx6hr3q5fN7dP7DC8NPPf618D5rDfOOiNJC4=  ;
Message-ID: <20070122054549.47274.qmail@web8701.mail.in.yahoo.com>
X-YMail-OSG: tc3yuEUVM1kRdhpMQvmvQ6tUxR4uhTYLheZGL4.vHp9UIvjpqjE93rIoTzvYrQTIOtt5nXFpIeKgF7Z4dwvK1jxP.mgrRw3dWMSUXkibGBVKpcU7sJhU2Koss1eeKnSDyE5QHE4bfzoUsO1oCxpN0pkmUZgrBrt.Xy.TdFGAYPc6jyoDQQaJmwy9_H2YNiIl0MSKfcg-
Received: from [59.95.163.125] by web8701.mail.in.yahoo.com via HTTP; Mon, 22 Jan 2007 11:15:49 IST
X-Mailer: YahooMailRC/368.3 YahooMailWebService/0.6.132.7
Date: Mon, 22 Jan 2007 11:15:49 +0530 (IST)
From: aslam bari <iamaslamok@yahoo.co.in>
Subject: Re: Big size xml file indexing
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-494884866-1169444749=:45101"
X-Virus-Checked: Checked by ClamAV on apache.org

--0-494884866-1169444749=:45101
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable

Hi Saikrishna,=0AUnluckily my xml structure is not the same, some times it =
goes too long and some times too small on nodes. It may be one element go t=
hrought the whole document or there may be many elements of different types=
 come. So need your help on it how to parse in good and efficient way so th=
at less memory use and fast processing.=0A=0Ai read that SAXBuilder is slow=
er and memory consuming. How to replace it with other, like my code is :-=
=0A=0ASAXBuilder builder  =3D new SAXBuilder();=0A=0A//content is ByteArray=
inputstram, Can i change it to any better way=0A(JDOM type ) Document doc =
=3D builder.build(content);=0A=0A=0A=0Afor loop()=0A{=0A    // it is for ge=
tting nodes for given many xpath query=0A    XPATH xpath =3D new XPATH(...)=
;=0A     xpath.selectNodes(doc);=0A...................................=0A}=
=0A =0AThanks...=0A=0A----- Original Message ----=0AFrom: saikrishna venkat=
a pendyala <pvsaikrishna@gmail.com>=0ATo: java-user@lucene.apache.org=0ASen=
t: Monday, 22 January, 2007 10:44:50 AM=0ASubject: Re: Big size xml file in=
dexing=0A=0A=0AHai ,=0A       Nothing to change in Indexing process. What r=
equires is a little=0Apre-processing.=0A       If the structure of ur xml f=
ile is same as what I said earlier,then=0Asplit the 35MB file into small fi=
les and make sure that new small files=0Agenerated are of correct xml synta=
x.=0A       Now Index small files{more than one} generated instead of one l=
arge=0Afile.=0A=0A       Could you say the sturcture of ur xml file and wha=
t ur trying to=0Aindex.=0A=0AOn 1/22/07, aslam bari <iamaslamok@yahoo.co.in=
> wrote:=0A>=0A> Hi Saikrishna,=0A> Thanks for reply,=0A> But i don't know =
how i can go with this. Here is my code sample, let me=0A> know where to ch=
ange.=0A>=0A> SAXBuilder builder =3D new SAXBuilder();=0A>=0A> //CONTENT he=
re is bytearrayinputstream , i know i can give here file url=0A> also. Let =
me know whta is best.=0A> Document doc =3D builder.build(CONTENT);=0A>=0A> =
loop(---)=0A> {=0A>     doc.selectNodes(xpathquery);=0A> }=0A>=0A> Thanks..=
.=0A> ----- Original Message ----=0A> From: saikrishna venkata pendyala <pv=
saikrishna@gmail.com>=0A> To: java-user@lucene.apache.org=0A> Sent: Monday,=
 22 January, 2007 10:07:27 AM=0A> Subject: Re: Big size xml file indexing=
=0A>=0A>=0A> Hai ,=0A>        I have indexed 6.2 gb xml file using lucene. =
What I did was=0A>         1 .  I have splitted the 6.2gb file into small f=
iles each of size=0A> 10mb.=0A>         2 .  And then I worte a python scri=
pt to quantize number=0A> no.ofdocuments in each file.=0A>=0A>         Stru=
cture of my xml file is """=0A>        <document>=0A>         -----=0A>    =
     -----=0A>         </document>=0A>         <document>=0A>         -----=
=0A>         -----=0A>         </document> """=0A>=0A> Since you cannot go =
beyond 500MB this technique might help you of course=0A> if=0A> file sturct=
ure is the same.=0A>=0A> On 1/22/07, aslam bari <iamaslamok@yahoo.co.in> wr=
ote:=0A> >=0A> > Dear all,=0A> > I m using lucene to index xml files. For p=
arsing i m using JDOM to get=0A> > XPATH nodes and do some manipulation on =
them and indexed them. All=0A> things=0A> > work well but when the file siz=
e is very big about 35 - 50 MB. Then it=0A> goes=0A> > out of memory or tak=
e a lot of time. How can i set some parameters to=0A> speed=0A> > up and to=
ok less memory to parse the file. The problem is that i cannot=0A> > increa=
se much high Heap Size. So i have to limit to use heap size of 300=0A> -=0A=
> > 500 MB. Has anybody some solution for this.=0A> >=0A> > Thanks...=0A> >=
=0A> >=0A> >=0A> > ________________________________________________________=
__=0A> > Yahoo! India Answers: Share what you know. Learn something new=0A>=
 > http://in.answers.yahoo.com/=0A> >=0A>=0A>=0A>=0A> _____________________=
_____________________________________=0A> Yahoo! India Answers: Share what =
you know. Learn something new=0A> http://in.answers.yahoo.com/=0A>=0A=0A=0A=
=09=09=0A__________________________________________________________=0AYahoo=
! India Answers: Share what you know. Learn something new=0Ahttp://in.answe=
rs.yahoo.com/
--0-494884866-1169444749=:45101--

From java-user-return-25618-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 22 11:35:16 2007
Return-Path: <java-user-return-25618-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 16884 invoked from network); 22 Jan 2007 11:35:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Jan 2007 11:35:15 -0000
Received: (qmail 77396 invoked by uid 500); 22 Jan 2007 11:35:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77370 invoked by uid 500); 22 Jan 2007 11:35:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77359 invoked by uid 99); 22 Jan 2007 11:35:13 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Jan 2007 03:35:13 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of somnath.banerjee@gmail.com designates 209.85.132.244 as permitted sender)
Received: from [209.85.132.244] (HELO an-out-0708.google.com) (209.85.132.244)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Jan 2007 03:35:04 -0800
Received: by an-out-0708.google.com with SMTP id c3so343056ana
        for <java-user@lucene.apache.org>; Mon, 22 Jan 2007 03:34:43 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=fUfomjcMLeiHercle2Yef4wt9BbTnO+e6R/jfhnRzL290H8qbQEx25aRCFyxKR9qBiDRR19perkMVZhSs3o5uJoy5oyObKJ6qxEdn69a9ActIZpNG2//ff6r1BwDhZHjQ4NTxEkjW/ToQfUX8Y8P9NIbBq/SgBSQ0osJ+C8ZUyw=
Received: by 10.49.13.14 with SMTP id q14mr6369360nfi.1169465682305;
        Mon, 22 Jan 2007 03:34:42 -0800 (PST)
Received: by 10.78.90.8 with HTTP; Mon, 22 Jan 2007 03:34:42 -0800 (PST)
Message-ID: <17e2e1b50701220334g4fdf6497h311e5844abb5f6f6@mail.gmail.com>
Date: Mon, 22 Jan 2007 17:04:42 +0530
From: "Somnath Banerjee" <somnath.banerjee@gmail.com>
To: java-user@lucene.apache.org
Subject: Long Query Performance
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_110361_32950996.1169465682257"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_110361_32950996.1169465682257
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi All,

            I have created a 8GB index of almost 2 million documents. My
requirement is to run nearly 0.72 million query on this index. Each query
consists of 200 - 400 words. I have created a Boolean Query by ORing these
words. But each query is taking nearly 5 - 10 seconds to execute ( 2.78 GHz,
1.5 GB RAM). That's mean the entire batch of 0.72M query will take more than
70 days to execute. Is it expected or there is a way to improve the
performance? From earlier posts I gathered that complex query is expected to
take more time (this much???).

    I have tried some of the improvements mentioned in other posts (e.g.
increasing JVM heap space) without much benefit. Please let me know if you
can think of any optimization technique given that my requirement is to
execute all those queries in a batch run (additional hardware is not an
option for me). Also, I just need top 150-200 results for each query. Can
that be used to speed up the process?

    In case I'm doing something wrong I have mentioned below the way I'm
constructing the query and few lines of logs

    IndexSearcher sh = new IndexSearcher("IndexPath");

    for each query {
         BooleanQuery bq = new BooleanQuery();
         For each word in the query text {
               bq.add(new TermQuery(new Term("text", tktext)),
BooleanClause.Occur.SHOULD);
         }
        sh.search(bq);
    }
    sh.close();


Performance Log (Query Length = No. Of Words; Time= Millisecond)
Query Length: 332 Time Taken: 8609
Query Length: 276 Time Taken: 5172
Query Length: 345 Time Taken: 9313

Thanks in advance,
Somnath

------=_Part_110361_32950996.1169465682257--

From java-user-return-25619-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 22 12:32:24 2007
Return-Path: <java-user-return-25619-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38332 invoked from network); 22 Jan 2007 12:32:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Jan 2007 12:32:23 -0000
Received: (qmail 50582 invoked by uid 500); 22 Jan 2007 12:32:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50544 invoked by uid 500); 22 Jan 2007 12:32:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50533 invoked by uid 99); 22 Jan 2007 12:32:22 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Jan 2007 04:32:22 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of SRS0=oJ5x=G7=hcmeyer.com=hannes@srs.kundenserver.de designates 212.227.126.177 as permitted sender)
Received: from [212.227.126.177] (HELO moutng.kundenserver.de) (212.227.126.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Jan 2007 04:32:13 -0800
Received: from [84.131.27.85] (helo=[127.0.0.1])
	by mrelayeu.kundenserver.de (node=mrelayeu0) with ESMTP (Nemesis),
	id 0MKwh2-1H8yKu436V-0004ei; Mon, 22 Jan 2007 13:31:48 +0100
Message-ID: <45B4AEA3.50204@hcmeyer.com>
Date: Mon, 22 Jan 2007 13:31:31 +0100
From: hannes <hannes@hcmeyer.com>
Reply-To:  java-user@lucene.apache.org
User-Agent: Thunderbird 1.5.0.9 (Windows/20061207)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Storing Stemmed and Original Tokens
Content-Type: text/plain; charset=ISO-8859-15; format=flowed
Content-Transfer-Encoding: 7bit
X-Provags-ID: kundenserver.de abuse@kundenserver.de login:a42d25494c1e4d7d8aa0d52bc18a9cb2
X-Provags-ID2: V01U2FsdGVkX1/+RwpaTJNNJF32WN1xjdUMmGs8iCMJ141MBjozvwabukVmgtNCMixfrPS8GwIC7J1tNToIthHVpGgA5eq6UokRnltbKIEUFgkTJEmCD1OLtlLYjogs0kB2
X-Virus-Checked: Checked by ClamAV on apache.org

Hi All,

I'm using the SnowballAnalyzer to "stemm" tokens - which is working fine!

Now I got the requirement to also keep the original Tokens in the index 
for search. According to this 
http://mail-archives.apache.org/mod_mbox/lucene-java-user/200302.mbox/%3C187D6D956106D84E9D8B280F6458FE140F5B2A@merc12.na.sas.com%3E 
Mail, I extended the SnowballAnalyzer
in the way Eric described it.

Does anyone has experience in storing stemmed and original tokens in the 
same field and same position? Is it the "right" way to do it?

I also found some Discussions about storing stemmed tokens in an extra 
field, but that would mean I would have to rewrite the query ...


thanks
hannes

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25620-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 22 13:07:37 2007
Return-Path: <java-user-return-25620-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 49428 invoked from network); 22 Jan 2007 13:07:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Jan 2007 13:07:36 -0000
Received: (qmail 99804 invoked by uid 500); 22 Jan 2007 13:07:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 99770 invoked by uid 500); 22 Jan 2007 13:07:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 99759 invoked by uid 99); 22 Jan 2007 13:07:35 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Jan 2007 05:07:35 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [68.142.229.98] (HELO smtp107.sbc.mail.re2.yahoo.com) (68.142.229.98)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 22 Jan 2007 05:07:24 -0800
Received: (qmail 11025 invoked from network); 22 Jan 2007 13:07:03 -0000
Received: from unknown (HELO ?10.1.1.2?) (mdc102254@sbcglobal.net@75.45.172.212 with plain)
  by smtp107.sbc.mail.re2.yahoo.com with SMTP; 22 Jan 2007 13:07:03 -0000
X-YMail-OSG: Xxwb90oVM1nzWiiOXmgfELeSm5_X4Oa0PMkUQYDeFRSqqmX0eavcu7HYrGs9eLIcG6g6q4TKq9ROTCAg6ZRZ7jNDJWvj.iGcMwHWHCbtoFFkpqvAEnGWwwq7TVHKOKVM3mwnL3XJgOSJvA--
Message-ID: <45B4B6F7.7010100@curtin.com>
Date: Mon, 22 Jan 2007 08:07:03 -0500
From: "Michael D. Curtin" <mike@curtin.com>
User-Agent: Thunderbird 1.5.0.9 (Windows/20061207)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Long Query Performance
References: <17e2e1b50701220334g4fdf6497h311e5844abb5f6f6@mail.gmail.com>
In-Reply-To: <17e2e1b50701220334g4fdf6497h311e5844abb5f6f6@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Somnath Banerjee wrote:

>            I have created a 8GB index of almost 2 million documents. My
> requirement is to run nearly 0.72 million query on this index. Each query
> consists of 200 - 400 words. I have created a Boolean Query by ORing these
> words. But each query is taking nearly 5 - 10 seconds to execute ( 2.78 
> GHz,
> 1.5 GB RAM). That's mean the entire batch of 0.72M query will take more 
> than
> 70 days to execute. Is it expected or there is a way to improve the
> performance? From earlier posts I gathered that complex query is 
> expected to
> take more time (this much???).

A back of the envelope calculation:
     8GB / 2M docs = 4KB per doc, on avg
                   / 5 B per word, on avg = 800 words per doc, on avg

So, each query is a quarter to half the size of the average document.  I 
suspect that just about every query is hitting almost every document in 
the db, i.e. the queries are not very selective at all.  That's going to 
be slow, no two ways about it.

Could you tell us a bit more about the db and what your application is 
looking for in it, at a higher level of abstraction?

--MDC

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25621-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 22 13:28:29 2007
Return-Path: <java-user-return-25621-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 57561 invoked from network); 22 Jan 2007 13:28:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Jan 2007 13:28:28 -0000
Received: (qmail 34312 invoked by uid 500); 22 Jan 2007 13:28:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34283 invoked by uid 500); 22 Jan 2007 13:28:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34272 invoked by uid 99); 22 Jan 2007 13:28:28 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Jan 2007 05:28:28 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 66.249.92.174 as permitted sender)
Received: from [66.249.92.174] (HELO ug-out-1314.google.com) (66.249.92.174)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Jan 2007 05:28:19 -0800
Received: by ug-out-1314.google.com with SMTP id k40so1094449ugc
        for <java-user@lucene.apache.org>; Mon, 22 Jan 2007 05:27:57 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=GxOTWrcinLQq6oXufYUoHGwTWHELBQiTyDIUhQKVt21CKSI2X48mc2rDKhmQBKyE1bObC4hnO9UKyH9WPuzwNIM2CY4LHqeB81oet+siFLfnSIT4T9hZsyLn3K3CMEoOtaSs5ca2HtN9rrDX9QVfPu0lbSjwaesoWBLjm7cZQ2I=
Received: by 10.82.136.4 with SMTP id j4mr4941914bud.1169472477462;
        Mon, 22 Jan 2007 05:27:57 -0800 (PST)
Received: by 10.82.162.20 with HTTP; Mon, 22 Jan 2007 05:27:57 -0800 (PST)
Message-ID: <359a92830701220527t5cfb88fp34d907bc99dc4465@mail.gmail.com>
Date: Mon, 22 Jan 2007 08:27:57 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Storing Stemmed and Original Tokens
In-Reply-To: <45B4AEA3.50204@hcmeyer.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_235116_18408750.1169472477091"
References: <45B4AEA3.50204@hcmeyer.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_235116_18408750.1169472477091
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Take a look at the book Lucene In Action, particularly the SynonymAnalyzer
example. It shows you how to store multiple tokens at the same offset in a
document, and sounds like what you need. The basic idea is to use
SetNextPositionIncrement(0) on the 2-nth tokens you want to wind up in the
same position.

At least that's my guess <G>..

Best
Erick

On 1/22/07, hannes <hannes@hcmeyer.com> wrote:
>
> Hi All,
>
> I'm using the SnowballAnalyzer to "stemm" tokens - which is working fine!
>
> Now I got the requirement to also keep the original Tokens in the index
> for search. According to this
>
> http://mail-archives.apache.org/mod_mbox/lucene-java-user/200302.mbox/%3C187D6D956106D84E9D8B280F6458FE140F5B2A@merc12.na.sas.com%3E
> Mail, I extended the SnowballAnalyzer
> in the way Eric described it.
>
> Does anyone has experience in storing stemmed and original tokens in the
> same field and same position? Is it the "right" way to do it?
>
> I also found some Discussions about storing stemmed tokens in an extra
> field, but that would mean I would have to rewrite the query ...
>
>
> thanks
> hannes
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_235116_18408750.1169472477091--

From java-user-return-25622-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 22 13:28:56 2007
Return-Path: <java-user-return-25622-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 57746 invoked from network); 22 Jan 2007 13:28:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Jan 2007 13:28:55 -0000
Received: (qmail 37790 invoked by uid 500); 22 Jan 2007 13:28:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37766 invoked by uid 500); 22 Jan 2007 13:28:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37751 invoked by uid 99); 22 Jan 2007 13:28:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Jan 2007 05:28:50 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of somnath.banerjee@gmail.com designates 64.233.182.191 as permitted sender)
Received: from [64.233.182.191] (HELO nf-out-0910.google.com) (64.233.182.191)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Jan 2007 05:28:42 -0800
Received: by nf-out-0910.google.com with SMTP id a27so1229711nfc
        for <java-user@lucene.apache.org>; Mon, 22 Jan 2007 05:28:20 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=L9coahsHGfcF1wRzR9qktFxdMinThtpzShJ/PY/sBv6xk3dfQpplIQsTSFgANEu6xLbXcipXRY8oDpFLqlsVyQRKevWfQ5yd8I+OEpDVIucFOf6uzbhHrZQEtEjJW5TGHTTZtGtttrvIACC+a3EVSvFK0k9lUV3GEc6mB1cm5aM=
Received: by 10.48.162.15 with SMTP id k15mr6591119nfe.1169472500340;
        Mon, 22 Jan 2007 05:28:20 -0800 (PST)
Received: by 10.78.90.8 with HTTP; Mon, 22 Jan 2007 05:28:20 -0800 (PST)
Message-ID: <17e2e1b50701220528h409c9faue1f7fa739a69f10@mail.gmail.com>
Date: Mon, 22 Jan 2007 18:58:20 +0530
From: "Somnath Banerjee" <somnath.banerjee@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Long Query Performance
In-Reply-To: <45B4B6F7.7010100@curtin.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_111294_19651581.1169472500286"
References: <17e2e1b50701220334g4fdf6497h311e5844abb5f6f6@mail.gmail.com>
	 <45B4B6F7.7010100@curtin.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_111294_19651581.1169472500286
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Thanks for the reply. Good guess I think.

DB (Index) is basically a collection of encyclopedia documents. Queries are
also a collection of documents but of various domains. My task is to find
out for each "query document" top 100 matching encyclopedia contents.

I tried by using only the title of (5-8 words) the query documents instead
of full text of the document. But that is also taking 0.5-1 sec for each
query. That's mean it will also take nearly 6 and half days to run
0.72Mqueries (and expectedly the precision will suffer).

Thanks,
Somnath

On 1/22/07, Michael D. Curtin <mike@curtin.com> wrote:
>
> Somnath Banerjee wrote:
>
> >            I have created a 8GB index of almost 2 million documents. My
> > requirement is to run nearly 0.72 million query on this index. Each
> query
> > consists of 200 - 400 words. I have created a Boolean Query by ORing
> these
> > words. But each query is taking nearly 5 - 10 seconds to execute ( 2.78
> > GHz,
> > 1.5 GB RAM). That's mean the entire batch of 0.72M query will take more
> > than
> > 70 days to execute. Is it expected or there is a way to improve the
> > performance? From earlier posts I gathered that complex query is
> > expected to
> > take more time (this much???).
>
> A back of the envelope calculation:
>      8GB / 2M docs = 4KB per doc, on avg
>                    / 5 B per word, on avg = 800 words per doc, on avg
>
> So, each query is a quarter to half the size of the average document.  I
> suspect that just about every query is hitting almost every document in
> the db, i.e. the queries are not very selective at all.  That's going to
> be slow, no two ways about it.
>
> Could you tell us a bit more about the db and what your application is
> looking for in it, at a higher level of abstraction?
>
> --MDC
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_111294_19651581.1169472500286--

From java-user-return-25623-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 22 13:53:47 2007
Return-Path: <java-user-return-25623-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62597 invoked from network); 22 Jan 2007 13:53:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Jan 2007 13:53:46 -0000
Received: (qmail 64230 invoked by uid 500); 22 Jan 2007 13:53:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63792 invoked by uid 500); 22 Jan 2007 13:53:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63781 invoked by uid 99); 22 Jan 2007 13:53:46 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Jan 2007 05:53:46 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [68.142.229.92] (HELO smtp113.sbc.mail.re2.yahoo.com) (68.142.229.92)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 22 Jan 2007 05:53:36 -0800
Received: (qmail 35657 invoked from network); 22 Jan 2007 13:53:13 -0000
Received: from unknown (HELO ?10.1.1.2?) (mdc102254@sbcglobal.net@75.45.172.212 with plain)
  by smtp113.sbc.mail.re2.yahoo.com with SMTP; 22 Jan 2007 13:53:12 -0000
X-YMail-OSG: OVlxTWYVM1nW1HWghuwoTMEw3Rz4DQ85Nv8qhLN2PyZs_7h0CVMGNAyeOg5lvN00XE1rP0LC8gmd_mQ0SCg5g6ePW7ek6CIkVOSRu8VgJkPv_kJ0pIF5vuT5tjplw1w5WtgBwbT5ezmq9cQ-
Message-ID: <45B4C1C9.5060102@curtin.com>
Date: Mon, 22 Jan 2007 08:53:13 -0500
From: "Michael D. Curtin" <mike@curtin.com>
User-Agent: Thunderbird 1.5.0.9 (Windows/20061207)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Long Query Performance
References: <17e2e1b50701220334g4fdf6497h311e5844abb5f6f6@mail.gmail.com>	 <45B4B6F7.7010100@curtin.com> <17e2e1b50701220528h409c9faue1f7fa739a69f10@mail.gmail.com>
In-Reply-To: <17e2e1b50701220528h409c9faue1f7fa739a69f10@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Somnath Banerjee wrote:
> Thanks for the reply. Good guess I think.
> 
> DB (Index) is basically a collection of encyclopedia documents. Queries are
> also a collection of documents but of various domains. My task is to find
> out for each "query document" top 100 matching encyclopedia contents.
> 
> I tried by using only the title of (5-8 words) the query documents instead
> of full text of the document. But that is also taking 0.5-1 sec for each
> query. That's mean it will also take nearly 6 and half days to run
> 0.72Mqueries (and expectedly the precision will suffer).

Thank you, the problem is a little clearer now.  This is a big search 
problem, so your biggest obstacle is running it on a tiny computer (from 
what you've said, only a fraction of the *queries* fit in your RAM 
budget, not to mention the database).  I'm confident that spending a 
little $$ on your computing resources, particularly RAM, would be FAR, 
FAR more cost-effective than programming labor.

But, if you can't get a bigger computer, then you can't.  In that case, 
I'm not sure that Lucene is the best tool for this problem, at least not 
exclusively.  You might find that some preprocessing, of the 
encyclopedia and query documents, could be used to quickly find the 
highest-probability candidates, then use Lucene to score them.  I'm 
think of a merge-sort kind of algorithm between the query "documents" 
and the encyclopedia documents.  For each query, find the top several 
hundred candidate documents from the encyclopedia, perhaps by number of 
matching non-"stop words" (see below).  You could also get more 
sophisticated by looking at word frequencies from your Lucene index, but 
I doubt it would make a huge difference for queries of hundreds of words 
that are looking for hundreds of hits.

A couple more suggestions:

-   Search the archives for the topic "more documents like this" and 
variations on that theme.  Several people have used Lucene in this way, 
with varying degrees of success.

-  If you haven't already, ditch "stop words", like "a", "the", 
prepositions, etc.  Your index will be smaller and so will your queries, 
making each search faster.

Good luck!

--MDC

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25624-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 22 14:37:21 2007
Return-Path: <java-user-return-25624-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80865 invoked from network); 22 Jan 2007 14:37:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Jan 2007 14:37:20 -0000
Received: (qmail 38982 invoked by uid 500); 22 Jan 2007 14:37:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38942 invoked by uid 500); 22 Jan 2007 14:37:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38931 invoked by uid 99); 22 Jan 2007 14:37:19 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Jan 2007 06:37:19 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [217.146.177.36] (HELO web26014.mail.ukl.yahoo.com) (217.146.177.36)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 22 Jan 2007 06:37:07 -0800
Received: (qmail 20605 invoked by uid 60001); 22 Jan 2007 14:36:45 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=3K72vdLWTJCj9+4Wsl1cfqzGHc+6aZy0de3zRtMhbDllxVd9aq46xzBsLuq8H6lpWY/+zTgkdb7w+2Lm+RgrEJRxJJTQvMz0XqcFc0yVQwN68Akg5xInFxVL/ZgSRWNShlbk5JBOi1hRblO9XVcuKoeTOVM8m3VXud+79Zb5WC8=;
X-YMail-OSG: HsR2ev8VM1kIrP4Ev_bgWiCH_zqNapCdWGVfhoFSRcsV7HJ0_pBqrFnkWiD1GTx1PP9B9fwhcthMwOPD8qy36PEkCv9MjdbVBysCc6Ww.S9JXW.8KVXUazH0JaaYqWE5dxQscU53Q61BNXhzrWs.w7MVIh81gFtMxDokvUKW3oBSSAjMgGvqhGcgxA--
Received: from [193.36.230.96] by web26014.mail.ukl.yahoo.com via HTTP; Mon, 22 Jan 2007 14:36:45 GMT
X-Mailer: YahooMailRC/368.3 YahooMailWebService/0.6.132.7
Date: Mon, 22 Jan 2007 14:36:45 +0000 (GMT)
From: mark harwood <markharw00d@yahoo.co.uk>
Subject: Re: Long Query Performance
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable
Message-ID: <888407.17142.qm@web26014.mail.ukl.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

"MoreLikeThis.java" is in the "contrib" section of SVN and this will help o=
ptimise your queries to searching for only the most discriminating terms.=
=0AOn a large index, very common terms can really kill performance (reading=
 lots of docIds from disk) and the MoreLikeThis class will help to trim you=
r query terms down to avoid such words.=0A=0AThis will still take some time=
 to run but at least the job sounds like one that can easily be split to ru=
n in parallel on multiple machines (assuming you have some to hand!)=0A=0AC=
heers=0AMark=0A=0A=0A----- Original Message ----=0AFrom: Somnath Banerjee <=
somnath.banerjee@gmail.com>=0ATo: java-user@lucene.apache.org=0ASent: Monda=
y, 22 January, 2007 1:28:20 PM=0ASubject: Re: Long Query Performance=0A=0AT=
hanks for the reply. Good guess I think.=0A=0ADB (Index) is basically a col=
lection of encyclopedia documents. Queries are=0Aalso a collection of docum=
ents but of various domains. My task is to find=0Aout for each "query docum=
ent" top 100 matching encyclopedia contents.=0A=0AI tried by using only the=
 title of (5-8 words) the query documents instead=0Aof full text of the doc=
ument. But that is also taking 0.5-1 sec for each=0Aquery. That's mean it w=
ill also take nearly 6 and half days to run=0A0.72Mqueries (and expectedly =
the precision will suffer).=0A=0AThanks,=0ASomnath=0A=0AOn 1/22/07, Michael=
 D. Curtin <mike@curtin.com> wrote:=0A>=0A> Somnath Banerjee wrote:=0A>=0A>=
 >            I have created a 8GB index of almost 2 million documents. My=
=0A> > requirement is to run nearly 0.72 million query on this index. Each=
=0A> query=0A> > consists of 200 - 400 words. I have created a Boolean Quer=
y by ORing=0A> these=0A> > words. But each query is taking nearly 5 - 10 se=
conds to execute ( 2.78=0A> > GHz,=0A> > 1.5 GB RAM). That's mean the entir=
e batch of 0.72M query will take more=0A> > than=0A> > 70 days to execute. =
Is it expected or there is a way to improve the=0A> > performance? From ear=
lier posts I gathered that complex query is=0A> > expected to=0A> > take mo=
re time (this much???).=0A>=0A> A back of the envelope calculation:=0A>    =
  8GB / 2M docs =3D 4KB per doc, on avg=0A>                    / 5 B per wo=
rd, on avg =3D 800 words per doc, on avg=0A>=0A> So, each query is a quarte=
r to half the size of the average document.  I=0A> suspect that just about =
every query is hitting almost every document in=0A> the db, i.e. the querie=
s are not very selective at all.  That's going to=0A> be slow, no two ways =
about it.=0A>=0A> Could you tell us a bit more about the db and what your a=
pplication is=0A> looking for in it, at a higher level of abstraction?=0A>=
=0A> --MDC=0A>=0A> --------------------------------------------------------=
-------------=0A> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apac=
he.org=0A> For additional commands, e-mail: java-user-help@lucene.apache.or=
g=0A>=0A>=0A=0A=0A=0A=0A=0A=09=0A=09=0A=09=09=0A___________________________=
________________________________ =0ANew Yahoo! Mail is the ultimate force i=
n competitive emailing. Find out more at the Yahoo! Mail Championships. Plu=
s: play games and win prizes. =0Ahttp://uk.rd.yahoo.com/evt=3D44106/*http:/=
/mail.yahoo.net/uk 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25625-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 22 14:49:44 2007
Return-Path: <java-user-return-25625-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85668 invoked from network); 22 Jan 2007 14:49:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Jan 2007 14:49:43 -0000
Received: (qmail 69616 invoked by uid 500); 22 Jan 2007 14:49:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69352 invoked by uid 500); 22 Jan 2007 14:49:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69341 invoked by uid 99); 22 Jan 2007 14:49:41 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Jan 2007 06:49:41 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of SRS0=oJ5x=G7=hcmeyer.com=hannes@srs.kundenserver.de designates 212.227.126.179 as permitted sender)
Received: from [212.227.126.179] (HELO moutng.kundenserver.de) (212.227.126.179)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Jan 2007 06:49:33 -0800
Received: from [84.131.27.85] (helo=[127.0.0.1])
	by mrelayeu.kundenserver.de (node=mrelayeu0) with ESMTP (Nemesis),
	id 0MKwh2-1H90Tv3172-0004Yp; Mon, 22 Jan 2007 15:49:11 +0100
Message-ID: <45B4CEE0.90703@hcmeyer.com>
Date: Mon, 22 Jan 2007 15:49:04 +0100
From: hannes <hannes@hcmeyer.com>
Reply-To:  java-user@lucene.apache.org
User-Agent: Thunderbird 1.5.0.9 (Windows/20061207)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Storing Stemmed and Original Tokens
References: <45B4AEA3.50204@hcmeyer.com> <359a92830701220527t5cfb88fp34d907bc99dc4465@mail.gmail.com>
In-Reply-To: <359a92830701220527t5cfb88fp34d907bc99dc4465@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Provags-ID: kundenserver.de abuse@kundenserver.de login:a42d25494c1e4d7d8aa0d52bc18a9cb2
X-Provags-ID2: V01U2FsdGVkX19+G4istpBaG5ooCz6QeZk1ohst9VCIjHtTTZ/pk1fVsH1o/npFEsweCMPUYjOXlJJvi1qEbyXUJ448VdbwkwfaztC6SJwzVoCbsN9C/1QLrtWi7kP1yCQ9
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Erick,

thanks for your reply, thats exactly how I implemented it - to me this 
solution is pretty simple and I just want to know if there are any 
pitfalls beside spanqueries :-)

Erick Erickson schrieb:
> Take a look at the book Lucene In Action, particularly the 
> SynonymAnalyzer
> example. It shows you how to store multiple tokens at the same offset 
> in a
> document, and sounds like what you need. The basic idea is to use
> SetNextPositionIncrement(0) on the 2-nth tokens you want to wind up in 
> the
> same position.
>
> At least that's my guess <G>..
>
> Best
> Erick
>
> On 1/22/07, hannes <hannes@hcmeyer.com> wrote:
>>
>> Hi All,
>>
>> I'm using the SnowballAnalyzer to "stemm" tokens - which is working 
>> fine!
>>
>> Now I got the requirement to also keep the original Tokens in the index
>> for search. According to this
>>
>> http://mail-archives.apache.org/mod_mbox/lucene-java-user/200302.mbox/%3C187D6D956106D84E9D8B280F6458FE140F5B2A@merc12.na.sas.com%3E 
>>
>> Mail, I extended the SnowballAnalyzer
>> in the way Eric described it.
>>
>> Does anyone has experience in storing stemmed and original tokens in the
>> same field and same position? Is it the "right" way to do it?
>>
>> I also found some Discussions about storing stemmed tokens in an extra
>> field, but that would mean I would have to rewrite the query ...
>>
>>
>> thanks
>> hannes
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25626-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 22 15:53:26 2007
Return-Path: <java-user-return-25626-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5358 invoked from network); 22 Jan 2007 15:53:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Jan 2007 15:53:25 -0000
Received: (qmail 9204 invoked by uid 500); 22 Jan 2007 15:53:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9019 invoked by uid 500); 22 Jan 2007 15:53:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9008 invoked by uid 99); 22 Jan 2007 15:53:23 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Jan 2007 07:53:23 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [85.118.4.17] (HELO snorlax.uk.scalix.com) (85.118.4.17)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Jan 2007 07:53:14 -0800
Received: from snorlax.uk.scalix.com (localhost.localdomain [127.0.0.1])
	by snorlax.uk.scalix.com (8.12.11.20060308/8.12.11) with ESMTP id l0MFqkxX021283
	for <java-user@lucene.apache.org>; Mon, 22 Jan 2007 15:52:46 GMT
Received: from [10.11.108.231] (snorlax.uk.scalix.com [10.11.108.216])
    by snorlax.uk.scalix.com (Scalix SMTP Relay 11.0.1.9)
    via ESMTP; Mon, 22 Jan 2007 15:52:46 +0000 (GMT)
Date: Mon, 22 Jan 2007 15:52:45 +0000
From: John Haxby <jch@scalix.com>
To: java-user@lucene.apache.org
Message-ID: <45B4DDCD.9000203@scalix.com>
In-Reply-To: <20070117074601.GA23522@fermat.math.technion.ac.il>
References: <45ACF734.2030508@i-nexus.com>
References: <45AD0005.40405@scalix.com>
References: <45AD0816.2080201@i-nexus.com>
References: <20070117074601.GA23522@fermat.math.technion.ac.il>
Subject: Re: Websphere and Dark Matter
x-scalix-Hops: 1
User-Agent: Thunderbird 1.5.0.9 (X11/20061219)
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii";
	format="flowed"
Content-Disposition: inline
X-Spam-Checker-Version: SpamAssassin 3.1.7 (2006-10-05) on 
	snorlax.uk.scalix.com
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.5 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.1.7

Nadav Har'El wrote:
> On Tue, Jan 16, 2007, Rollo du Pre wrote about "Re: Websphere and Dark Matter":
>   
>> I was hoping it would, yes. Does websphere not release memory back to 
>> the OS when it not longer needs it? I'm concerned that if the memory 
>> spiked for some reason (indexing a large document) then that would 
>> hamper the rest of the OS because it'd hold on to far more memory than 
>> is needed.
>>     
>
> This is a well known, may I say infamous, Java issue. Java could, in theory,
> easily shrink its heap as soon as it needs less memory, because in Java's GC
> model, memory can be moved around so fragmentation is not a problem. But
> unfortunately, the JVM's heap rarely does shrink by default: once the JVM's
> heap grows, it rarely ever shrinks back.
>   
Are you implying that the process memory shrinks, that memory is 
returned to the kernel? I didn't read the page you referenced that way.

I know that if I allocate memory by memory mapping anonymous regions 
with Linux/Unix I can give it back, but is that the technique that JVMs use?

It's not generally a problem though. Provided you have a compacting 
garbage collector (and the Sun Java GC is one) then the unused memory 
will just get paged out. It may be a different story on windows and it's 
certainly a different story on an embedded platform, but releasing 
memory to the kernel under Linux is not generally necessary or desirable.

jch

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25627-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 22 16:20:34 2007
Return-Path: <java-user-return-25627-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 16974 invoked from network); 22 Jan 2007 16:20:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Jan 2007 16:20:32 -0000
Received: (qmail 77428 invoked by uid 500); 22 Jan 2007 16:20:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77395 invoked by uid 500); 22 Jan 2007 16:20:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77384 invoked by uid 99); 22 Jan 2007 16:20:31 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Jan 2007 08:20:31 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [155.245.48.25] (HELO sernt12.essex.ac.uk) (155.245.48.25)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Jan 2007 08:20:20 -0800
Received: from sernt14.essex.ac.uk ([155.245.48.26]) by sernt12.essex.ac.uk with Microsoft SMTPSVC(6.0.3790.1830);
	 Mon, 22 Jan 2007 16:19:57 +0000
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: quoted-printable
Subject: search keyword Fields +Text Field with BooleanQuery
Date: Mon, 22 Jan 2007 16:19:56 -0000
Message-ID: <7AC902A40BEDD411A3A800D0B7847B66146C1443@sernt14.essex.ac.uk>
In-Reply-To: <45B4C1C9.5060102@curtin.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: search keyword Fields +Text Field with BooleanQuery
Thread-Index: Acc+LMWFMt1Xzs6tTWe+8hC0Hx3sdAAClZ6g
References: <17e2e1b50701220334g4fdf6497h311e5844abb5f6f6@mail.gmail.com>	 <45B4B6F7.7010100@curtin.com> <17e2e1b50701220528h409c9faue1f7fa739a69f10@mail.gmail.com> <45B4C1C9.5060102@curtin.com>
From: "Xue, Yijun" <yxue@essex.ac.uk>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 22 Jan 2007 16:19:57.0350 (UTC) FILETIME=[28505C60:01C73E41]
X-Virus-Checked: Checked by ClamAV on apache.org


Hello

I created an index for some xml files which contains 10 keyword fields
and one text field.

I created a TermQuery for searching text field. code like this,=20

------Dim textQuery As TermQuery =3D New TermQuery(New Term("content",
"school"))

I also created a Query using QueryParser.Parse for 10 keyword fields.
code like this,
------analyzer =3D New StandardAnalyzer()
------allkeywordsQuery =3D QueryParser.Parse("Secondname:Beckwith AND
Firstname:Louise", "Firstname", analyzer)

I try to use BooleanQuery to allow user to search XML data with the
textQuery and filter the result with the allkeywordsQuery.
code like this

------myBooleanQuery.Add(allkeywordsQuery, True, False)
------myBooleanQuery.Add(textQuery, True, False)
------Dim hits As Hits =3D searcher.Search(myBooleanQuery)


I should get a xml file contain=20

<Secondname>Beckwith</Secondname>=20
<Firstname>Louise<Firstname>
<content>...He used to pick us up from the first school...</content>
...

But I always get 0 hits.=20

Please tell me where I did wrong or other better solution for search and
filter XML data.


I try a query "Secondname:Beckwith AND Firstname:Louise AND
content:school"
on Luke with WhitespaceAnalyzer, I can get hits, but nothing if I use
StandardAnalyzer




Thanks

Yj









-----Original Message-----
From: Michael D. Curtin [mailto:mike@curtin.com]=20
Sent: 22 January 2007 13:53
To: java-user@lucene.apache.org
Subject: Re: Long Query Performance

Somnath Banerjee wrote:
> Thanks for the reply. Good guess I think.
>=20
> DB (Index) is basically a collection of encyclopedia documents.
Queries are
> also a collection of documents but of various domains. My task is to
find
> out for each "query document" top 100 matching encyclopedia contents.
>=20
> I tried by using only the title of (5-8 words) the query documents
instead
> of full text of the document. But that is also taking 0.5-1 sec for
each
> query. That's mean it will also take nearly 6 and half days to run
> 0.72Mqueries (and expectedly the precision will suffer).

Thank you, the problem is a little clearer now.  This is a big search=20
problem, so your biggest obstacle is running it on a tiny computer (from

what you've said, only a fraction of the *queries* fit in your RAM=20
budget, not to mention the database).  I'm confident that spending a=20
little $$ on your computing resources, particularly RAM, would be FAR,=20
FAR more cost-effective than programming labor.

But, if you can't get a bigger computer, then you can't.  In that case,=20
I'm not sure that Lucene is the best tool for this problem, at least not

exclusively.  You might find that some preprocessing, of the=20
encyclopedia and query documents, could be used to quickly find the=20
highest-probability candidates, then use Lucene to score them.  I'm=20
think of a merge-sort kind of algorithm between the query "documents"=20
and the encyclopedia documents.  For each query, find the top several=20
hundred candidate documents from the encyclopedia, perhaps by number of=20
matching non-"stop words" (see below).  You could also get more=20
sophisticated by looking at word frequencies from your Lucene index, but

I doubt it would make a huge difference for queries of hundreds of words

that are looking for hundreds of hits.

A couple more suggestions:

-   Search the archives for the topic "more documents like this" and=20
variations on that theme.  Several people have used Lucene in this way,=20
with varying degrees of success.

-  If you haven't already, ditch "stop words", like "a", "the",=20
prepositions, etc.  Your index will be smaller and so will your queries,

making each search faster.

Good luck!

--MDC

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25628-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 22 18:25:05 2007
Return-Path: <java-user-return-25628-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56276 invoked from network); 22 Jan 2007 18:25:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Jan 2007 18:25:04 -0000
Received: (qmail 46352 invoked by uid 500); 22 Jan 2007 18:25:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46317 invoked by uid 500); 22 Jan 2007 18:25:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46306 invoked by uid 99); 22 Jan 2007 18:25:03 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Jan 2007 10:25:03 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [194.109.24.30] (HELO smtp-vbr10.xs4all.nl) (194.109.24.30)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Jan 2007 10:24:54 -0800
Received: from k8l.lan (porta.xs4all.nl [80.127.24.69])
	by smtp-vbr10.xs4all.nl (8.13.8/8.13.8) with ESMTP id l0MIOUbc067837
	for <java-user@lucene.apache.org>; Mon, 22 Jan 2007 19:24:30 +0100 (CET)
	(envelope-from paul.elschot@xs4all.nl)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: java-user@lucene.apache.org
Subject: Re: Long Query Performance
Date: Mon, 22 Jan 2007 19:24:29 +0100
User-Agent: KMail/1.8.2
References: <888407.17142.qm@web26014.mail.ukl.yahoo.com>
In-Reply-To: <888407.17142.qm@web26014.mail.ukl.yahoo.com>
MIME-Version: 1.0
Content-Type: multipart/alternative;
  boundary="Boundary-00=_dFQtF2a9w8WtTyO"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200701221924.29414.paul.elschot@xs4all.nl>
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org

--Boundary-00=_dFQtF2a9w8WtTyO
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit

Somnath,

In addition to everything said, you could try and use:
- BooleanQuery.setUseScorer14(true), which works for long OR like
  queries as yours,
- a search method that returns a TopDocs instead of a Hits, and with that
- a FieldCache to retrieve the (primary key) values of the documents.

Regards,
Paul Elschot

P.S. Instead of setUseScorer14(true) you might try this patch, which  should be just as quick:  http://issues.apache.org/jira/browse/LUCENE-730 .


On Monday 22 January 2007 15:36, mark harwood wrote:
> "MoreLikeThis.java" is in the "contrib" section of SVN and this will help optimise your queries to searching for only the most discriminating terms.
> On a large index, very common terms can really kill performance (reading lots of docIds from disk) and the MoreLikeThis class will help to trim your query terms down to avoid such words.
> 
> This will still take some time to run but at least the job sounds like one that can easily be split to run in parallel on multiple machines (assuming you have some to hand!)
> 
> Cheers
> Mark
> 
> 
> ----- Original Message ----
> From: Somnath Banerjee <somnath.banerjee@gmail.com>
> To: java-user@lucene.apache.org
> Sent: Monday, 22 January, 2007 1:28:20 PM
> Subject: Re: Long Query Performance
> 
> Thanks for the reply. Good guess I think.
> 
> DB (Index) is basically a collection of encyclopedia documents. Queries are
> also a collection of documents but of various domains. My task is to find
> out for each "query document" top 100 matching encyclopedia contents.
> 
> I tried by using only the title of (5-8 words) the query documents instead
> of full text of the document. But that is also taking 0.5-1 sec for each
> query. That's mean it will also take nearly 6 and half days to run
> 0.72Mqueries (and expectedly the precision will suffer).
> 
> Thanks,
> Somnath
> 
> On 1/22/07, Michael D. Curtin <mike@curtin.com> wrote:
> >
> > Somnath Banerjee wrote:
> >
> > >            I have created a 8GB index of almost 2 million documents. My
> > > requirement is to run nearly 0.72 million query on this index. Each
> > query
> > > consists of 200 - 400 words. I have created a Boolean Query by ORing
> > these
> > > words. But each query is taking nearly 5 - 10 seconds to execute ( 2.78
> > > GHz,
> > > 1.5 GB RAM). That's mean the entire batch of 0.72M query will take more
> > > than
> > > 70 days to execute. Is it expected or there is a way to improve the
> > > performance? From earlier posts I gathered that complex query is
> > > expected to
> > > take more time (this much???).
> >
> > A back of the envelope calculation:
> >      8GB / 2M docs = 4KB per doc, on avg
> >                    / 5 B per word, on avg = 800 words per doc, on avg
> >
> > So, each query is a quarter to half the size of the average document.  I
> > suspect that just about every query is hitting almost every document in
> > the db, i.e. the queries are not very selective at all.  That's going to
> > be slow, no two ways about it.
> >
> > Could you tell us a bit more about the db and what your application is
> > looking for in it, at a higher level of abstraction?
> >
> > --MDC
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> 
> 
> 
> 
> 
> 	
> 	
> 		
> ___________________________________________________________ 
> New Yahoo! Mail is the ultimate force in competitive emailing. Find out more at the Yahoo! Mail Championships. Plus: play games and win prizes. 
> http://uk.rd.yahoo.com/evt=44106/*http://mail.yahoo.net/uk 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 
> 

--Boundary-00=_dFQtF2a9w8WtTyO--

From java-user-return-25629-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 22 18:34:04 2007
Return-Path: <java-user-return-25629-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59285 invoked from network); 22 Jan 2007 18:34:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Jan 2007 18:34:03 -0000
Received: (qmail 61187 invoked by uid 500); 22 Jan 2007 18:34:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61135 invoked by uid 500); 22 Jan 2007 18:34:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61123 invoked by uid 99); 22 Jan 2007 18:34:02 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Jan 2007 10:34:02 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=HTML_00_10,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of ekemokai@gmail.com designates 64.233.184.229 as permitted sender)
Received: from [64.233.184.229] (HELO wr-out-0506.google.com) (64.233.184.229)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Jan 2007 10:33:54 -0800
Received: by wr-out-0506.google.com with SMTP id i21so767136wra
        for <java-user@lucene.apache.org>; Mon, 22 Jan 2007 10:33:33 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=ajPOV6Rbn1KI7aRxg/qAIRXTXVgoqOmNr044X/MJB1+NpWuUfDz/In+LjBswxl3eVgNSGMMKF6Q6VYRjSvjICCT2jZqWb40SjjjzUCpA4hMfS2LSLrYCCQTKH97qx/Oh1njoHZnDwLR6+VA+HNrZRYPs1uKoE9adIDEhWi7oqwc=
Received: by 10.82.118.2 with SMTP id q2mr7273960buc.1169490811514;
        Mon, 22 Jan 2007 10:33:31 -0800 (PST)
Received: by 10.82.134.18 with HTTP; Mon, 22 Jan 2007 10:33:31 -0800 (PST)
Message-ID: <dac893430701221033l2a837a21n614bef54f7366398@mail.gmail.com>
Date: Mon, 22 Jan 2007 13:33:31 -0500
From: "EDMOND KEMOKAI" <ekemokai@gmail.com>
To: java-user@lucene.apache.org
Subject: Lucene Internals question
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_203187_6999518.1169490811483"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_203187_6999518.1169490811483
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi All
This is a question for those familiar with lucene document scoring. How does
it compare with googles PageRank or HITS, or are they very different? I have
being looking at the PageRank algorithm but I'll need to brush-off my math
skills before delving into it:)

-- 
"talk trash and carry a small stick."
PAUL KRUGMAN (NYT)

------=_Part_203187_6999518.1169490811483--

From java-user-return-25630-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 22 19:26:36 2007
Return-Path: <java-user-return-25630-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 74422 invoked from network); 22 Jan 2007 19:26:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Jan 2007 19:26:35 -0000
Received: (qmail 53642 invoked by uid 500); 22 Jan 2007 19:26:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53495 invoked by uid 500); 22 Jan 2007 19:26:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53483 invoked by uid 99); 22 Jan 2007 19:26:33 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Jan 2007 11:26:33 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lucenelist2005@danielnaber.de designates 80.67.18.15 as permitted sender)
Received: from [80.67.18.15] (HELO smtprelay03.ispgateway.de) (80.67.18.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Jan 2007 11:26:23 -0800
Received: (qmail 16054 invoked from network); 22 Jan 2007 19:26:01 -0000
Received: from unknown (HELO p5496e453.dip.t-dialin.net) ([pbs]695637@[84.150.228.83])
          (envelope-sender <lucenelist2005@danielnaber.de>)
          by smtprelay03.ispgateway.de (qmail-ldap-1.03) with RC4-MD5 encrypted SMTP
          for <java-user@lucene.apache.org>; 22 Jan 2007 19:26:01 -0000
From: Daniel Naber <lucenelist2005@danielnaber.de>
To: java-user@lucene.apache.org
Subject: Re: search keyword Fields +Text Field with BooleanQuery
Date: Mon, 22 Jan 2007 20:26:59 +0100
User-Agent: KMail/1.8.2
References: <17e2e1b50701220334g4fdf6497h311e5844abb5f6f6@mail.gmail.com> <45B4C1C9.5060102@curtin.com> <7AC902A40BEDD411A3A800D0B7847B66146C1443@sernt14.essex.ac.uk>
In-Reply-To: <7AC902A40BEDD411A3A800D0B7847B66146C1443@sernt14.essex.ac.uk>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="us-ascii"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200701222026.59764@danielnaber.de>
X-Virus-Checked: Checked by ClamAV on apache.org

On Monday 22 January 2007 17:19, Xue, Yijun wrote:

> I try a query "Secondname:Beckwith AND Firstname:Louise AND
> content:school"
> on Luke with WhitespaceAnalyzer, I can get hits, but nothing if I use
> StandardAnalyzer

You need to use the same analyzer for indexing and searching. For example, 
WhitespaceAnalyzer doesn't lowercase the words. Also see the FAQ:

http://wiki.apache.org/jakarta-lucene/LuceneFAQ#head-3558e5121806fb4fce80fc022d889484a9248b71

-- 
http://www.danielnaber.de

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25631-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 22 19:34:03 2007
Return-Path: <java-user-return-25631-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76311 invoked from network); 22 Jan 2007 19:34:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Jan 2007 19:34:02 -0000
Received: (qmail 69373 invoked by uid 500); 22 Jan 2007 19:34:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69341 invoked by uid 500); 22 Jan 2007 19:34:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69329 invoked by uid 99); 22 Jan 2007 19:34:01 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Jan 2007 11:34:01 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [82.216.111.37] (HELO smtp1.tech.numericable.fr) (82.216.111.37)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Jan 2007 11:33:52 -0800
Received: from [192.168.1.101] (ip-3.net-82-216-252.rev.numericable.fr [82.216.252.3])
	by smtp1.tech.numericable.fr (Postfix) with ESMTP id 49780E081D
	for <java-user@lucene.apache.org>; Mon, 22 Jan 2007 20:33:31 +0100 (CET)
From: Nicolas =?utf-8?q?Lalev=C3=A9e?= <nicolas.lalevee@anyware-tech.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene Internals question
Date: Mon, 22 Jan 2007 20:33:29 +0100
User-Agent: KMail/1.9.5
References: <dac893430701221033l2a837a21n614bef54f7366398@mail.gmail.com>
In-Reply-To: <dac893430701221033l2a837a21n614bef54f7366398@mail.gmail.com>
Organization: Anyware Technologies
MIME-Version: 1.0
Content-Type: text/plain;
  charset="utf-8"
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
Message-Id: <200701222033.29717.nicolas.lalevee@anyware-tech.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Le Lundi 22 Janvier 2007 19:33, EDMOND KEMOKAI a =C3=A9crit=C2=A0:
> Hi All
> This is a question for those familiar with lucene document scoring. How
> does it compare with googles PageRank or HITS, or are they very different?
> I have being looking at the PageRank algorithm but I'll need to brush-off
> my math skills before delving into it:)

In fact Lucene is just a search engine. Then you can use the search engine =
to=20
search in web pages, like Nutch is using Lucene. And Google is more like=20
Nutch : a web crawler plus a web-search engine. So when you are taking abou=
t=20
page raking, it has nothing to do with Lucene scoring. Lucene scoring is ho=
w=20
about the result entry match your query. Page raking is more about how=20
relevant is the web page. So for a document, the Lucene scoring depends on=
=20
the query, and the page raking is quite absolute.

Nicolas

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25632-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 22 19:48:17 2007
Return-Path: <java-user-return-25632-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81027 invoked from network); 22 Jan 2007 19:48:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Jan 2007 19:48:16 -0000
Received: (qmail 97414 invoked by uid 500); 22 Jan 2007 19:48:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97252 invoked by uid 500); 22 Jan 2007 19:48:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97124 invoked by uid 99); 22 Jan 2007 19:48:15 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Jan 2007 11:48:15 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of ekemokai@gmail.com designates 64.233.184.239 as permitted sender)
Received: from [64.233.184.239] (HELO wr-out-0506.google.com) (64.233.184.239)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Jan 2007 11:48:06 -0800
Received: by wr-out-0506.google.com with SMTP id i21so786574wra
        for <java-user@lucene.apache.org>; Mon, 22 Jan 2007 11:47:45 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=K9Nf33k2tmeLVTN//bcq9Vltfvdf0jvtHHjVjJuGGYy5mhg+j13AancwaymQVHGCr+GSQ/E/35KMaUcB4t3apKkS78cnhAr431NTuhBJZxRuO6Es/FhmKIzI/FeE9xplkAJMtSgRuVKi2MEv7xVizCFnHhozkAXoFz9Hx54gP+Q=
Received: by 10.82.114.3 with SMTP id m3mr5526709buc.1169495079978;
        Mon, 22 Jan 2007 11:44:39 -0800 (PST)
Received: by 10.82.134.18 with HTTP; Mon, 22 Jan 2007 11:44:39 -0800 (PST)
Message-ID: <dac893430701221144h322d7084q840ea15893b46f5e@mail.gmail.com>
Date: Mon, 22 Jan 2007 14:44:39 -0500
From: "EDMOND KEMOKAI" <ekemokai@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene Internals question
In-Reply-To: <200701222033.29717.nicolas.lalevee@anyware-tech.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_204636_10310062.1169495079895"
References: <dac893430701221033l2a837a21n614bef54f7366398@mail.gmail.com>
	 <200701222033.29717.nicolas.lalevee@anyware-tech.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_204636_10310062.1169495079895
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Hmm..doesn't lucene scoring determine how relevant a document is to your
query? That is what PageRank and HITS do as well, I believe. Page and
document are the same, if you want to index a page you'll obviously try to
convert it into a document. PageRank does link analysis to determine how
relevant that page is as it relates to the query you entered, does lucene
have something similar? How does lucene determine between two documents
which one should score higher if they both contain a certain term? Google
uses PageRank to make that determination, how does lucene do it?

On 1/22/07, Nicolas Lalev=E9e <nicolas.lalevee@anyware-tech.com> wrote:
>
> Le Lundi 22 Janvier 2007 19:33, EDMOND KEMOKAI a =E9crit:
> > Hi All
> > This is a question for those familiar with lucene document scoring. How
> > does it compare with googles PageRank or HITS, or are they very
> different?
> > I have being looking at the PageRank algorithm but I'll need to
> brush-off
> > my math skills before delving into it:)
>
> In fact Lucene is just a search engine. Then you can use the search engin=
e
> to
> search in web pages, like Nutch is using Lucene. And Google is more like
> Nutch : a web crawler plus a web-search engine. So when you are taking
> about
> page raking, it has nothing to do with Lucene scoring. Lucene scoring is
> how
> about the result entry match your query. Page raking is more about how
> relevant is the web page. So for a document, the Lucene scoring depends o=
n
> the query, and the page raking is quite absolute.
>
> Nicolas
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


--=20
"talk trash and carry a small stick."
PAUL KRUGMAN (NYT)

------=_Part_204636_10310062.1169495079895--

From java-user-return-25633-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 22 20:01:36 2007
Return-Path: <java-user-return-25633-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84581 invoked from network); 22 Jan 2007 20:01:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Jan 2007 20:01:34 -0000
Received: (qmail 18928 invoked by uid 500); 22 Jan 2007 20:01:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18323 invoked by uid 500); 22 Jan 2007 20:01:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18312 invoked by uid 99); 22 Jan 2007 20:01:34 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Jan 2007 12:01:34 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of markrmiller@gmail.com designates 66.249.82.234 as permitted sender)
Received: from [66.249.82.234] (HELO wx-out-0506.google.com) (66.249.82.234)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Jan 2007 12:01:24 -0800
Received: by wx-out-0506.google.com with SMTP id i29so1292093wxd
        for <java-user@lucene.apache.org>; Mon, 22 Jan 2007 12:01:03 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=WoGSDkE4pRQxiYsAiw+WgJQbw+O8saGZYgBOatvks9oDZK85HJkMs+LrySzkvRWNOpkYd/U/0WxTWBQocck3q1V1SVR2p07wHqePzMXuwNC1Lyc1tFSLA2VMogZEe5Crbfm2TghWBDaPpbSOIzea3ghkDmkxhB90lT212qxRJc4=
Received: by 10.90.50.1 with SMTP id x1mr6864041agx.1169496063280;
        Mon, 22 Jan 2007 12:01:03 -0800 (PST)
Received: from ?192.168.1.103? ( [216.66.114.42])
        by mx.google.com with ESMTP id 67sm10260184wra.2007.01.22.12.01.01;
        Mon, 22 Jan 2007 12:01:02 -0800 (PST)
Message-ID: <45B517DD.8020806@gmail.com>
Date: Mon, 22 Jan 2007 15:00:29 -0500
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 1.5.0.9 (Windows/20061207)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Lucene Internals question
References: <dac893430701221033l2a837a21n614bef54f7366398@mail.gmail.com>	 <200701222033.29717.nicolas.lalevee@anyware-tech.com> <dac893430701221144h322d7084q840ea15893b46f5e@mail.gmail.com>
In-Reply-To: <dac893430701221144h322d7084q840ea15893b46f5e@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

Well first Lucene checks all of the other documents in the world for any 
that that refer to the document that your adding to Lucene...and 
then...oh wait...

http://lucene.apache.org/java/docs/api/org/apache/lucene/search/Similarity.html

EDMOND KEMOKAI wrote:
> Hmm..doesn't lucene scoring determine how relevant a document is to your
> query? That is what PageRank and HITS do as well, I believe. Page and
> document are the same, if you want to index a page you'll obviously 
> try to
> convert it into a document. PageRank does link analysis to determine how
> relevant that page is as it relates to the query you entered, does lucene
> have something similar? How does lucene determine between two documents
> which one should score higher if they both contain a certain term? Google
> uses PageRank to make that determination, how does lucene do it?
>
> On 1/22/07, Nicolas Laleve <nicolas.lalevee@anyware-tech.com> wrote:
>>
>> Le Lundi 22 Janvier 2007 19:33, EDMOND KEMOKAI a crit:
>> > Hi All
>> > This is a question for those familiar with lucene document scoring. 
>> How
>> > does it compare with googles PageRank or HITS, or are they very
>> different?
>> > I have being looking at the PageRank algorithm but I'll need to
>> brush-off
>> > my math skills before delving into it:)
>>
>> In fact Lucene is just a search engine. Then you can use the search 
>> engine
>> to
>> search in web pages, like Nutch is using Lucene. And Google is more like
>> Nutch : a web crawler plus a web-search engine. So when you are taking
>> about
>> page raking, it has nothing to do with Lucene scoring. Lucene scoring is
>> how
>> about the result entry match your query. Page raking is more about how
>> relevant is the web page. So for a document, the Lucene scoring 
>> depends on
>> the query, and the page raking is quite absolute.
>>
>> Nicolas
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25634-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 22 21:29:57 2007
Return-Path: <java-user-return-25634-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 15825 invoked from network); 22 Jan 2007 21:29:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Jan 2007 21:29:56 -0000
Received: (qmail 54051 invoked by uid 500); 22 Jan 2007 21:29:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54025 invoked by uid 500); 22 Jan 2007 21:29:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54013 invoked by uid 99); 22 Jan 2007 21:29:55 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Jan 2007 13:29:55 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Jan 2007 13:29:47 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 9E2BF5B764; Mon, 22 Jan 2007 13:29:26 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 970887F403
	for <java-user@lucene.apache.org>; Mon, 22 Jan 2007 13:29:26 -0800 (PST)
Date: Mon, 22 Jan 2007 13:29:26 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Technology Preview of new Lucene QueryParser
In-Reply-To: <45B2D976.8040707@gmail.com>
Message-ID: <Pine.LNX.4.58.0701221324020.28497@hal.rescomp.berkeley.edu>
References: <45A460E2.8090508@gmail.com> <Pine.LNX.4.58.0701101726150.29321@hal.rescomp.berkeley.edu>
 <45A5A468.1030604@gmail.com> <Pine.LNX.4.58.0701102008590.6750@hal.rescomp.berkeley.edu>
 <45A626DA.3080008@gmail.com> <Pine.LNX.4.58.0701111400020.12602@hal.rescomp.berkeley.edu>
 <45B25A64.405@gmail.com> <Pine.LNX.4.58.0701201810120.3448@hal.rescomp.berkeley.edu>
 <45B2D976.8040707@gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: With my syntax you can get real precedence that mixes with how no
: precedence (Lucene's unary operators) works. No precedence is created by
: allowing you to make any operator resolve first...any operator that
: resolves first connected with another operator that resolves first will
: behave as if neither has precedence over the other and generate a single
: BooleanQuery.

what i was trying to get at is that i don't think precedence is really the
issue -- it's the lack of unary operators.  If the only way to get a
single BooleanQuery is to use operators that have the exact same
precedence, and all operators are binary, then how to you create the
equivilent of QueryParser "+a b c -d -e" ? ... if i remember your syntax
correctly the only way to match the same documents is...
	"a & ( b | c ) ! d ! e"

...but it won't score the same way because the parens force a nested
boolean query to be created.


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25635-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 22 21:43:40 2007
Return-Path: <java-user-return-25635-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19125 invoked from network); 22 Jan 2007 21:43:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Jan 2007 21:43:40 -0000
Received: (qmail 71832 invoked by uid 500); 22 Jan 2007 21:43:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71209 invoked by uid 500); 22 Jan 2007 21:43:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71198 invoked by uid 99); 22 Jan 2007 21:43:39 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Jan 2007 13:43:39 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [66.104.95.4] (HELO listing.marketingbrokers.com) (66.104.95.4)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 22 Jan 2007 13:43:29 -0800
Received: from ip66-104-95-21.z95-104-66.customer.algx.net ([66.104.95.21])
          by listing.marketingbrokers.com (JAMES SMTP Server 2.2.0) with SMTP ID 179
          for <java-user@lucene.apache.org>;
          Mon, 22 Jan 2007 13:42:22 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <45B517DD.8020806@gmail.com>
References: <dac893430701221033l2a837a21n614bef54f7366398@mail.gmail.com>	 <200701222033.29717.nicolas.lalevee@anyware-tech.com> <dac893430701221144h322d7084q840ea15893b46f5e@mail.gmail.com> <45B517DD.8020806@gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; delsp=yes; format=flowed
Message-Id: <FAA7C8CB-4553-4FCA-A4CD-75275A0EF626@marketingbrokers.com>
Content-Transfer-Encoding: quoted-printable
From: Peter W. <peter@marketingbrokers.com>
Subject: Re: Lucene Internals question
Date: Mon, 22 Jan 2007 13:42:22 -0800
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org

Hello,

Lucene gives the best documents for a given query and PageRank uses =20
citation
analysis with similar results but requires a large set of metadata to =20=

complete.

Scoring in Lucene delivers pure search while PageRank attempts to =20
establish source authority.
I''m not strong in math, those who are can find an explanation of the =20=

latter here:

http://www.ams.org/featurecolumn/archive/pagerank.html

Regards,

Peter W.


On Jan 22, 2007, at 12:00 PM, Mark Miller wrote:

> Well first Lucene checks all of the other documents in the world =20
> for any that that refer to the document that your adding to =20
> Lucene...and then...oh wait...
>
> http://lucene.apache.org/java/docs/api/org/apache/lucene/search/=20
> Similarity.html
>
> EDMOND KEMOKAI wrote:
>> Hmm..doesn't lucene scoring determine how relevant a document is =20
>> to your
>> query? That is what PageRank and HITS do as well, I believe. Page and
>> document are the same, if you want to index a page you'll =20
>> obviously try to
>> convert it into a document. PageRank does link analysis to =20
>> determine how
>> relevant that page is as it relates to the query you entered, does =20=

>> lucene
>> have something similar? How does lucene determine between two =20
>> documents
>> which one should score higher if they both contain a certain term? =20=

>> Google
>> uses PageRank to make that determination, how does lucene do it?
>>
>> On 1/22/07, Nicolas Lalev=E9e <nicolas.lalevee@anyware-tech.com> =
wrote:
>>>
>>> Le Lundi 22 Janvier 2007 19:33, EDMOND KEMOKAI a =E9crit:
>>> > Hi All
>>> > This is a question for those familiar with lucene document =20
>>> scoring. How
>>> > does it compare with googles PageRank or HITS, or are they very
>>> different?
>>> > I have being looking at the PageRank algorithm but I'll need to
>>> brush-off
>>> > my math skills before delving into it:)
>>>
>>> In fact Lucene is just a search engine. Then you can use the =20
>>> search engine
>>> to
>>> search in web pages, like Nutch is using Lucene. And Google is =20
>>> more like
>>> Nutch : a web crawler plus a web-search engine. So when you are =20
>>> taking
>>> about
>>> page raking, it has nothing to do with Lucene scoring. Lucene =20
>>> scoring is
>>> how
>>> about the result entry match your query. Page raking is more =20
>>> about how
>>> relevant is the web page. So for a document, the Lucene scoring =20
>>> depends on
>>> the query, and the page raking is quite absolute.
>>>
>>> Nicolas
>>>
>>> --------------------------------------------------------------------=20=

>>> -
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25636-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 22 21:45:20 2007
Return-Path: <java-user-return-25636-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19587 invoked from network); 22 Jan 2007 21:45:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Jan 2007 21:45:19 -0000
Received: (qmail 75191 invoked by uid 500); 22 Jan 2007 21:45:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75031 invoked by uid 500); 22 Jan 2007 21:45:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75020 invoked by uid 99); 22 Jan 2007 21:45:19 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Jan 2007 13:45:19 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [82.216.111.39] (HELO smtp3.tech.numericable.fr) (82.216.111.39)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Jan 2007 13:45:10 -0800
Received: from [192.168.1.101] (ip-3.net-82-216-252.rev.numericable.fr [82.216.252.3])
	by smtp3.tech.numericable.fr (Postfix) with ESMTP id 9B84E3E410
	for <java-user@lucene.apache.org>; Mon, 22 Jan 2007 22:44:48 +0100 (CET)
From: Nicolas =?utf-8?q?Lalev=C3=A9e?= <nicolas.lalevee@anyware-tech.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene Internals question
Date: Mon, 22 Jan 2007 22:44:43 +0100
User-Agent: KMail/1.9.5
References: <dac893430701221033l2a837a21n614bef54f7366398@mail.gmail.com> <200701222033.29717.nicolas.lalevee@anyware-tech.com> <dac893430701221144h322d7084q840ea15893b46f5e@mail.gmail.com>
In-Reply-To: <dac893430701221144h322d7084q840ea15893b46f5e@mail.gmail.com>
Organization: Anyware Technologies
MIME-Version: 1.0
Content-Type: text/plain;
  charset="utf-8"
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
Message-Id: <200701222244.43585.nicolas.lalevee@anyware-tech.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Le Lundi 22 Janvier 2007 20:44, EDMOND KEMOKAI a =C3=A9crit=C2=A0:
> Hmm..doesn't lucene scoring determine how relevant a document is to your
> query? That is what PageRank and HITS do as well, I believe. Page and
> document are the same, if you want to index a page you'll obviously try to
> convert it into a document. PageRank does link analysis to determine how
> relevant that page is as it relates to the query you entered, does lucene
> have something similar? How does lucene determine between two documents
> which one should score higher if they both contain a certain term? Google
> uses PageRank to make that determination, how does lucene do it?

The thing is that Google can use both its PageRank and Lucene.

The PageRank caculation doesn't depend on the query. It's value is quite=20
absolute. It depends of how the other pages refer to it.

And the Lucene scoring is calculating how a document (document is the gener=
ic=20
Lucene term, beacause Lucene can be used for other things that web search)=
=20
match the query. Searching for "foo bar", a document with no "foo", no "bar=
"=20
in it it scored at 0, even more not scored at all. A document with one "foo=
",=20
but no "bar" will be scored to 0.5, with one "foo" and one "bar", separated=
=20
with 15 words, will be scored 0.8, and a document with "foo bar", scored to=
=20
1.0.

Then you can combine the both, as Google is probably doing. Same exemple :
=2D a page with no "foo", neither "bar", whatever is its page rank, won't b=
e=20
scored.
=2D a page with a "foo" and a "bar", with a low page rank, let say 0.5
=2D a page with a "foo" and a "bar", with a high page rank, let say 0.9

If you want to know more about Lucene scoring and Page rank, you should go =
see=20
Nutch and its mailing list : http://lucene.apache.org/nutch/

Nicolas

>
> On 1/22/07, Nicolas Lalev=C3=A9e <nicolas.lalevee@anyware-tech.com> wrote:
> > Le Lundi 22 Janvier 2007 19:33, EDMOND KEMOKAI a =C3=A9crit:
> > > Hi All
> > > This is a question for those familiar with lucene document scoring. H=
ow
> > > does it compare with googles PageRank or HITS, or are they very
> >
> > different?
> >
> > > I have being looking at the PageRank algorithm but I'll need to
> >
> > brush-off
> >
> > > my math skills before delving into it:)
> >
> > In fact Lucene is just a search engine. Then you can use the search
> > engine to
> > search in web pages, like Nutch is using Lucene. And Google is more like
> > Nutch : a web crawler plus a web-search engine. So when you are taking
> > about
> > page raking, it has nothing to do with Lucene scoring. Lucene scoring is
> > how
> > about the result entry match your query. Page raking is more about how
> > relevant is the web page. So for a document, the Lucene scoring depends
> > on the query, and the page raking is quite absolute.
> >
> > Nicolas
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25637-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 22 22:55:12 2007
Return-Path: <java-user-return-25637-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32715 invoked from network); 22 Jan 2007 22:55:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Jan 2007 22:55:11 -0000
Received: (qmail 55155 invoked by uid 500); 22 Jan 2007 22:55:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55122 invoked by uid 500); 22 Jan 2007 22:55:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55107 invoked by uid 99); 22 Jan 2007 22:55:10 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Jan 2007 14:55:10 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [194.109.24.24] (HELO smtp-vbr4.xs4all.nl) (194.109.24.24)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Jan 2007 14:55:01 -0800
Received: from k8l.lan (porta.xs4all.nl [80.127.24.69])
	by smtp-vbr4.xs4all.nl (8.13.8/8.13.8) with ESMTP id l0MMsekG016755
	for <java-user@lucene.apache.org>; Mon, 22 Jan 2007 23:54:40 +0100 (CET)
	(envelope-from paul.elschot@xs4all.nl)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: java-user@lucene.apache.org
Subject: Re: Technology Preview of new Lucene QueryParser
Date: Mon, 22 Jan 2007 23:54:39 +0100
User-Agent: KMail/1.8.2
References: <45A460E2.8090508@gmail.com> <45B2D976.8040707@gmail.com> <Pine.LNX.4.58.0701221324020.28497@hal.rescomp.berkeley.edu>
In-Reply-To: <Pine.LNX.4.58.0701221324020.28497@hal.rescomp.berkeley.edu>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200701222354.39692.paul.elschot@xs4all.nl>
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org

On Monday 22 January 2007 22:29, Chris Hostetter wrote:
> 
> : With my syntax you can get real precedence that mixes with how no
> : precedence (Lucene's unary operators) works. No precedence is created by
> : allowing you to make any operator resolve first...any operator that
> : resolves first connected with another operator that resolves first will
> : behave as if neither has precedence over the other and generate a single
> : BooleanQuery.
> 
> what i was trying to get at is that i don't think precedence is really the
> issue -- it's the lack of unary operators.  If the only way to get a
> single BooleanQuery is to use operators that have the exact same
> precedence, and all operators are binary, then how to you create the
> equivilent of QueryParser "+a b c -d -e" ? ... if i remember your syntax
> correctly the only way to match the same documents is...
> 	"a & ( b | c ) ! d ! e"
> 
> ...but it won't score the same way because the parens force a nested
> boolean query to be created.

I considered adding the removal of such nests to the surround
query language, but I never took the time to actually do it.

Anyway, which of the two forms is more user friendly? I wish I knew,
but the lack of brackets in the prefix form is tempting.

Thanks for spelling this out,

Paul Elschot

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25638-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 22 22:55:37 2007
Return-Path: <java-user-return-25638-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32828 invoked from network); 22 Jan 2007 22:55:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Jan 2007 22:55:37 -0000
Received: (qmail 57112 invoked by uid 500); 22 Jan 2007 22:55:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56862 invoked by uid 500); 22 Jan 2007 22:55:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56851 invoked by uid 99); 22 Jan 2007 22:55:37 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Jan 2007 14:55:37 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [203.217.22.128] (HELO file1.syd.nuix.com.au) (203.217.22.128)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Jan 2007 14:55:28 -0800
Received: from [192.168.222.102] (demo1.syd.nuix.com.au [192.168.222.102])
	by file1.syd.nuix.com.au (Postfix) with ESMTP id 054C24A814C
	for <java-user@lucene.apache.org>; Tue, 23 Jan 2007 09:55:49 +1100 (EST)
Message-ID: <45B54228.5060007@nuix.com>
Date: Tue, 23 Jan 2007 10:00:56 +1100
From: Daniel Noll <daniel@nuix.com>
Organization: NUIX Pty Limited
User-Agent: Thunderbird 3.0a1 (Windows/20061207)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Big size xml file indexing
References: <20070122054549.47274.qmail@web8701.mail.in.yahoo.com>
In-Reply-To: <20070122054549.47274.qmail@web8701.mail.in.yahoo.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

aslam bari wrote:
> Hi Saikrishna, Unluckily my xml structure is not the same, some times
> it goes too long and some times too small on nodes. It may be one
> element go throught the whole document or there may be many elements
> of different types come. So need your help on it how to parse in good
> and efficient way so that less memory use and fast processing.

You haven't given many details on what you expect the output to be, but 
assuming you mean something like this:

     XML document => Lucene document with one field

What I would do is implement a Reader subclass which parses the XML 
document on the fly, perhaps using the StAX API, or some similar 
stream-based parser API.  That way, no matter how large the document is, 
it will only take up as much memory as you choose to store.

For multiple fields, things get a little more interesting.  And if you 
expect the XML document to contain multiple Lucene documents, then 
things get more interesting again.

Daniel

-- 
Daniel Noll

Nuix Pty Ltd
Suite 79, 89 Jones St, Ultimo NSW 2007, Australia    Ph: +61 2 9280 0699
Web: http://nuix.com/                               Fax: +61 2 9212 6902

This message is intended only for the named recipient. If you are not
the intended recipient you are notified that disclosing, copying,
distributing or taking any action in reliance on the contents of this
message or attachment is strictly prohibited.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25639-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 22 23:30:58 2007
Return-Path: <java-user-return-25639-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 39620 invoked from network); 22 Jan 2007 23:30:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Jan 2007 23:30:57 -0000
Received: (qmail 96863 invoked by uid 500); 22 Jan 2007 23:30:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96832 invoked by uid 500); 22 Jan 2007 23:30:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96821 invoked by uid 99); 22 Jan 2007 23:30:55 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Jan 2007 15:30:55 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Jan 2007 15:30:47 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 738BB5B764; Mon, 22 Jan 2007 15:30:27 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 5BD1B7F403
	for <java-user@lucene.apache.org>; Mon, 22 Jan 2007 15:30:27 -0800 (PST)
Date: Mon, 22 Jan 2007 15:30:27 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Long Query Performance
In-Reply-To: <17e2e1b50701220528h409c9faue1f7fa739a69f10@mail.gmail.com>
Message-ID: <Pine.LNX.4.58.0701221526050.2290@hal.rescomp.berkeley.edu>
References: <17e2e1b50701220334g4fdf6497h311e5844abb5f6f6@mail.gmail.com> 
 <45B4B6F7.7010100@curtin.com> <17e2e1b50701220528h409c9faue1f7fa739a69f10@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: I tried by using only the title of (5-8 words) the query documents instead
: of full text of the document. But that is also taking 0.5-1 sec for each

i can't speak to your 200-300 word BooleanQuery timings, but 0.5-1
seconds for an 8 clause BooleanQuery is very very wrong.  i suspect
there's something going on in your acctually code that wasn't conveyed in
your spuedo code.

can you post a real functional bit of java showing what exactly you are
timing (we don't need the whole index -- jsut the part of the code you
are timing)




-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25640-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 22 23:43:35 2007
Return-Path: <java-user-return-25640-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 46666 invoked from network); 22 Jan 2007 23:43:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Jan 2007 23:43:34 -0000
Received: (qmail 16811 invoked by uid 500); 22 Jan 2007 23:43:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16778 invoked by uid 500); 22 Jan 2007 23:43:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16767 invoked by uid 99); 22 Jan 2007 23:43:35 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Jan 2007 15:43:35 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of markrmiller@gmail.com designates 66.249.82.239 as permitted sender)
Received: from [66.249.82.239] (HELO wx-out-0506.google.com) (66.249.82.239)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Jan 2007 15:43:25 -0800
Received: by wx-out-0506.google.com with SMTP id i29so1337612wxd
        for <java-user@lucene.apache.org>; Mon, 22 Jan 2007 15:43:04 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=LK2Xehu0lfCBnA9YWZZ3ArSe94yPNO5WjFcqij7vnTEywPf7pdOaSJLbg1GTPMTBct+s2+brpVrzNCnL650r3uHa3HkOeerjq+eNPIh15w9+fC0EwSrTbJ0h8VC8SkXxsTOi/BTLBRoPMEiydIqPKS/GlY6B5BwVMKmVk69nwIs=
Received: by 10.70.125.2 with SMTP id x2mr11826721wxc.1169509384000;
        Mon, 22 Jan 2007 15:43:04 -0800 (PST)
Received: from ?192.168.1.103? ( [216.66.114.42])
        by mx.google.com with ESMTP id 6sm10663286wrh.2007.01.22.15.43.02;
        Mon, 22 Jan 2007 15:43:03 -0800 (PST)
Message-ID: <45B54C04.6080508@gmail.com>
Date: Mon, 22 Jan 2007 18:43:00 -0500
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 1.5.0.9 (Windows/20061207)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Technology Preview of new Lucene QueryParser
References: <45A460E2.8090508@gmail.com> <Pine.LNX.4.58.0701101726150.29321@hal.rescomp.berkeley.edu> <45A5A468.1030604@gmail.com> <Pine.LNX.4.58.0701102008590.6750@hal.rescomp.berkeley.edu> <45A626DA.3080008@gmail.com> <Pine.LNX.4.58.0701111400020.12602@hal.rescomp.berkeley.edu> <45B25A64.405@gmail.com> <Pine.LNX.4.58.0701201810120.3448@hal.rescomp.berkeley.edu> <45B2D976.8040707@gmail.com> <Pine.LNX.4.58.0701221324020.28497@hal.rescomp.berkeley.edu>
In-Reply-To: <Pine.LNX.4.58.0701221324020.28497@hal.rescomp.berkeley.edu>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

As I humbly ran into. I thought of '-a', and 'a' but hadn't thought too 
far ahead. It covers enough ground to satisfy me for now though. Mixing 
real precedence and unary operators is something I experimented with a 
little a few months back and couldn't find anything good. This is my 
first parser so I am sure I am a bit limited in this regard. Unary 
syntax equivalence will have to be pushed aside for now. Thanks for all 
your input Hoss.

- Mark

Chris Hostetter wrote:
> : With my syntax you can get real precedence that mixes with how no
> : precedence (Lucene's unary operators) works. No precedence is created by
> : allowing you to make any operator resolve first...any operator that
> : resolves first connected with another operator that resolves first will
> : behave as if neither has precedence over the other and generate a single
> : BooleanQuery.
>
> what i was trying to get at is that i don't think precedence is really the
> issue -- it's the lack of unary operators.  If the only way to get a
> single BooleanQuery is to use operators that have the exact same
> precedence, and all operators are binary, then how to you create the
> equivilent of QueryParser "+a b c -d -e" ? ... if i remember your syntax
> correctly the only way to match the same documents is...
> 	"a & ( b | c ) ! d ! e"
>
> ...but it won't score the same way because the parens force a nested
> boolean query to be created.
>
>
> -Hoss
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>   

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25641-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 23 10:38:46 2007
Return-Path: <java-user-return-25641-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 2327 invoked from network); 23 Jan 2007 10:38:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Jan 2007 10:38:45 -0000
Received: (qmail 71369 invoked by uid 500); 23 Jan 2007 10:38:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71314 invoked by uid 500); 23 Jan 2007 10:38:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71303 invoked by uid 99); 23 Jan 2007 10:38:44 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Jan 2007 02:38:44 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,MIME_BOUND_NEXTPART
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [212.190.206.154] (HELO srs2na11.bgl.lu) (212.190.206.154)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 23 Jan 2007 02:38:36 -0800
Received: from spmwf02l.luinternal.fortis.bank (unverified) by srs2na12.domain
 (Content Technologies SMTPRS 4.2.10) with ESMTP id <T7d5b2c2c880aaf150a162@srs2na12.domain> for <java-user@lucene.apache.org>;
 Tue, 23 Jan 2007 11:42:13 +0100
Received: from SPMWB02L.luinternal.fortis.bank ([10.172.252.140]) by spmwf02l.luinternal.fortis.bank with Microsoft SMTPSVC(6.0.3790.0);
	 Tue, 23 Jan 2007 11:38:04 +0100
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/mixed;
	boundary="----=_NextPartTM-000-dd0c89b3-90e4-429c-afe8-13065160d6cd"
X-MimeOLE: Produced By Microsoft Exchange V6.5
Subject: Low hits
Date: Tue, 23 Jan 2007 11:38:04 +0100
Message-ID: <EBC8F228BDB35A4394D0BE53DA25248808A9A231@SPMWB02L.luinternal.fortis.bank>
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
Thread-Topic: Low hits
Thread-Index: Acc+2pTVb1eF1YDUR0ismOoebLZZrA==
From: "DECAFFMEYER MATHIEU" <MATHIEU.DECAFFMAYER@fortis.lu>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 23 Jan 2007 10:38:04.0686 (UTC) FILETIME=[9039FAE0:01C73EDA]
X-Virus-Checked: Checked by ClamAV on apache.org

------=_NextPartTM-000-dd0c89b3-90e4-429c-afe8-13065160d6cd
Content-Type: multipart/alternative; 
	boundary="----_=_NextPart_001_01C73EDA.9010EBAF"

------_=_NextPart_001_01C73EDA.9010EBAF
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable


Hi,

I'm pretty new to Lucene and I try to find some help here.
I added  the title of the document :=20
doc.add(Field.Text("title", title));
e.g. the title is "Constructions"
When I do a search on this title I have as result 2%
Can someone help me udnerstanding what I am doing wrong ?

Thank u.

__________________________________

   Mathieu Decaffmeyer



=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D
Internet communications are not secure and therefore Fortis Banque Luxembou=
rg S.A. does not accept legal responsibility for the contents of this messa=
ge. The information contained in this e-mail is confidential and may be leg=
ally privileged. It is intended solely for the addressee. If you are not th=
e intended recipient, any disclosure, copying, distribution or any action t=
aken or omitted to be taken in reliance on it, is prohibited and may be unl=
awful. Nothing in the message is capable or intended to create any legally =
binding obligations on either party and it is not intended to provide legal=
 advice.
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D


------_=_NextPart_001_01C73EDA.9010EBAF
Content-Type: text/html; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
<HEAD>
<META HTTP-EQUIV=3D"Content-Type" CONTENT=3D"text/html; charset=3Dus-ascii">
<META NAME=3D"Generator" CONTENT=3D"MS Exchange Server version 6.5.7651.52">
<TITLE>Low hits</TITLE>
</HEAD>
<BODY>
<!-- Converted from text/rtf format -->
<BR>

<P><FONT SIZE=3D2 FACE=3D"Arial">Hi,</FONT>
</P>

<P><FONT SIZE=3D2 FACE=3D"Arial">I'm pretty new to Lucene and I try to find=
 some help here.</FONT>

<BR><FONT SIZE=3D2 FACE=3D"Arial">I added&nbsp; the title of the document :=
 </FONT>

<BR><FONT COLOR=3D"#000000" SIZE=3D2 FACE=3D"Courier New">doc.add(Field.Tex=
t(</FONT><FONT COLOR=3D"#2A00FF" SIZE=3D2 FACE=3D"Courier New">&quot;title&=
quot;</FONT><FONT COLOR=3D"#000000" SIZE=3D2 FACE=3D"Courier New">,</FONT><=
FONT SIZE=3D2 FACE=3D"Courier New"> </FONT><FONT COLOR=3D"#000000" SIZE=3D2=
 FACE=3D"Courier New">title));</FONT>

<BR><SPAN LANG=3D"fr-be"><FONT COLOR=3D"#000000" SIZE=3D2 FACE=3D"Courier N=
ew">e.g. the title is &quot;Constructions&quot;</FONT></SPAN>

<BR><SPAN LANG=3D"fr-be"><FONT COLOR=3D"#000000" SIZE=3D2 FACE=3D"Courier N=
ew">When I do a search on this title I have as result 2%</FONT></SPAN>

<BR><SPAN LANG=3D"fr-be"><FONT COLOR=3D"#000000" SIZE=3D2 FACE=3D"Courier N=
ew">Can someone help me udnerstanding what I am doing wrong ?</FONT></SPAN>
</P>

<P><SPAN LANG=3D"fr-be"><FONT COLOR=3D"#000000" SIZE=3D2 FACE=3D"Courier Ne=
w">Thank u.</FONT></SPAN><SPAN LANG=3D"en-us"></SPAN>
</P>

<P><B><SPAN LANG=3D"fr"><WBR><WBR><WBR><WBR><WBR><WBR><WBR><WBR><WBR><WBR><=
WBR><WBR><WBR><WBR><WBR><WBR><FONT COLOR=3D"#006699" SIZE=3D1 FACE=3D"Verda=
na">__________________________________</FONT></SPAN></B>
</P>

<P><B><SPAN LANG=3D"fr"><FONT COLOR=3D"#006699" SIZE=3D1 FACE=3D"Verdana">&=
nbsp;&nbsp; Mathieu Decaffmeyer</FONT></SPAN></B>
</P>

<CODE><FONT SIZE=3D3><BR>
<BR>
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D<BR>
Internet communications are not secure and therefore Fortis Banque Luxembou=
rg S.A. does not accept legal responsibility for the contents of this messa=
ge. The information contained in this e-mail is confidential and may be leg=
ally privileged. It is intended solely for the addressee. If you are not th=
e intended recipient, any disclosure, copying, distribution or any action t=
aken or omitted to be taken in reliance on it, is prohibited and may be unl=
awful. Nothing in the message is capable or intended to create any legally =
binding obligations on either party and it is not intended to provide legal=
 advice.<BR>
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D<BR>
</FONT></CODE>
</BODY>
</HTML>
------_=_NextPart_001_01C73EDA.9010EBAF--


------=_NextPartTM-000-dd0c89b3-90e4-429c-afe8-13065160d6cd
Content-Type: text/plain; charset=us-ascii

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org
------=_NextPartTM-000-dd0c89b3-90e4-429c-afe8-13065160d6cd--


From java-user-return-25642-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 23 13:01:45 2007
Return-Path: <java-user-return-25642-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45715 invoked from network); 23 Jan 2007 13:01:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Jan 2007 13:01:44 -0000
Received: (qmail 74738 invoked by uid 500); 23 Jan 2007 13:01:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74699 invoked by uid 500); 23 Jan 2007 13:01:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74688 invoked by uid 99); 23 Jan 2007 13:01:42 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Jan 2007 05:01:42 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 64.233.182.190 as permitted sender)
Received: from [64.233.182.190] (HELO nf-out-0910.google.com) (64.233.182.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Jan 2007 05:01:33 -0800
Received: by nf-out-0910.google.com with SMTP id a27so210456nfc
        for <java-user@lucene.apache.org>; Tue, 23 Jan 2007 05:01:09 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=W0bVAidA+r1zKZn5Ag9jS5FqoB3qaiv01EGUHwNdDMDWoSChIUOYkUIuvje1dj4YAXC65pFll9SeNGqkSo8ggjctYXC2mLoeizgLcIkC+xNRjvqgThuYXZjRm34LCt3Ucu9ldHnoZ17XV+sY8WkjIxm2sH7Pz8bE1LHKtPK3a4M=
Received: by 10.82.169.4 with SMTP id r4mr486296bue.1169557268370;
        Tue, 23 Jan 2007 05:01:08 -0800 (PST)
Received: by 10.82.162.20 with HTTP; Tue, 23 Jan 2007 05:01:07 -0800 (PST)
Message-ID: <359a92830701230501w4f3679d1w1b37c4e22bdd27db@mail.gmail.com>
Date: Tue, 23 Jan 2007 08:01:07 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Low hits
In-Reply-To: <EBC8F228BDB35A4394D0BE53DA25248808A9A231@SPMWB02L.luinternal.fortis.bank>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_261064_8063113.1169557267842"
References: <EBC8F228BDB35A4394D0BE53DA25248808A9A231@SPMWB02L.luinternal.fortis.bank>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_261064_8063113.1169557267842
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

What version of Lucene are you using? 2.0 doesn't have a doc.add like that.
You'd do something like
doc.add(new Field("title", title, Field.Store.YES, Field.Index.TOKENIZED);

So I really don't understand what you're trying to do. Nor do I understand
what "2%" means in this context....

But there are two things you should be aware of.
1> the analyzer you use when you create your index AND when you query your
index should be the same, at least when you start. There are reasons why you
might want to use different ones, but certainly not when you are starting.
Otherwise you, say, index something and it's automatically folded into
lowercase (StandardAnalyzer certainly does this) but your query could be
uppercase if you use, say SimpleAnalyzer for the query phase.

2> get Luke (google lucene luke). It allows you to examine your index and
see what's actually in it. Otherwise you're flying blind. It also allows you
to enter queries manually (see Lucene In Action for lucene's query syntax).
Really, really get Luke. It'll make your life much easier.

You probably want to post bigger snippets of actual code for folks to look
at, since one line of code and "it doesn't work" don't give us much to go on
<G>.

Best
Erick

On 1/23/07, DECAFFMEYER MATHIEU <MATHIEU.DECAFFMAYER@fortis.lu> wrote:
>
>
> Hi,
>
> I'm pretty new to Lucene and I try to find some help here.
> I added  the title of the document :
> doc.add(Field.Text("title", title));
> e.g. the title is "Constructions"
> When I do a search on this title I have as result 2%
> Can someone help me udnerstanding what I am doing wrong ?
>
> Thank u.
>
> *__________________________________*
>
> *   Mathieu Decaffmeyer*
>
>
> ============================================
> Internet communications are not secure and therefore Fortis Banque
> Luxembourg S.A. does not accept legal responsibility for the contents of
> this message. The information contained in this e-mail is confidential and
> may be legally privileged. It is intended solely for the addressee. If you
> are not the intended recipient, any disclosure, copying, distribution or any
> action taken or omitted to be taken in reliance on it, is prohibited and may
> be unlawful. Nothing in the message is capable or intended to create any
> legally binding obligations on either party and it is not intended to
> provide legal advice.
> ============================================
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_261064_8063113.1169557267842--

From java-user-return-25643-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 23 13:03:51 2007
Return-Path: <java-user-return-25643-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 46170 invoked from network); 23 Jan 2007 13:03:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Jan 2007 13:03:50 -0000
Received: (qmail 78888 invoked by uid 500); 23 Jan 2007 13:03:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78662 invoked by uid 500); 23 Jan 2007 13:03:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78651 invoked by uid 99); 23 Jan 2007 13:03:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Jan 2007 05:03:50 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [132.68.238.36] (HELO mailgw4.technion.ac.il) (132.68.238.36)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Jan 2007 05:03:40 -0800
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mailgw4.technion.ac.il (Postfix) with ESMTP id 46CD523FAEF
	for <java-user@lucene.apache.org>; Tue, 23 Jan 2007 15:03:30 +0200 (IST)
X-Virus-Scanned: by amavisd-new at technion.ac.il
Received: from mailgw4.technion.ac.il ([127.0.0.1])
	by localhost (mailgw4.technion.ac.il [127.0.0.1]) (amavisd-new, port 10024)
	with LMTP id FlT+URi6bEdM for <java-user@lucene.apache.org>;
	Tue, 23 Jan 2007 15:03:30 +0200 (IST)
Received: from fermat.math.technion.ac.il (fermat.math.technion.ac.il [132.68.115.6])
	by mailgw4.technion.ac.il (Postfix) with ESMTP id 147AD23FACA
	for <java-user@lucene.apache.org>; Tue, 23 Jan 2007 15:03:30 +0200 (IST)
Received: from fermat.math.technion.ac.il (localhost [127.0.0.1])
	by fermat.math.technion.ac.il (8.12.10/8.12.10) with ESMTP id l0ND3Hr2012999
	for <java-user@lucene.apache.org>; Tue, 23 Jan 2007 15:03:17 +0200 (IST)
Received: (from nyh@localhost)
	by fermat.math.technion.ac.il (8.12.10/8.12.10/Submit) id l0ND3H93012998
	for java-user@lucene.apache.org; Tue, 23 Jan 2007 15:03:17 +0200 (IST)
X-Authentication-Warning: fermat.math.technion.ac.il: nyh set sender to nyh@math.technion.ac.il using -f
Date: Tue, 23 Jan 2007 15:03:17 +0200
From: "Nadav Har'El" <nyh@math.technion.ac.il>
To: java-user@lucene.apache.org
Subject: Re: Websphere and Dark Matter
Message-ID: <20070123130317.GA10911@fermat.math.technion.ac.il>
References: <20070117074601.GA23522@fermat.math.technion.ac.il> <45B4DDCD.9000203@scalix.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
In-Reply-To: <45B4DDCD.9000203@scalix.com>
User-Agent: Mutt/1.4.2.2i
Hebrew-Date: 4 Shevat 5767
X-Virus-Checked: Checked by ClamAV on apache.org

On Mon, Jan 22, 2007, John Haxby wrote about "Re: Websphere and Dark Matter":
> Nadav Har'El wrote:
> Are you implying that the process memory shrinks, that memory is 
> returned to the kernel? I didn't read the page you referenced that way.
> I know that if I allocate memory by memory mapping anonymous regions 
> with Linux/Unix I can give it back, but is that the technique that JVMs use?

Indeed - I've seen this actually happen in Windows (I didn't check on Linux).
Once more than 70% of the heap is free (which is the default setting on Sun's
JVM 1.4) the heap is shrunk and the memory use of the process (according to
Windows "Task Manager") is actually reduced.

You could easily verify whether this happens on Linux as well. Just write
a trivial program that allocates a large, say, 100 MB, object, sleeps for
a few seconds (or runs "ps"), and then "forgets" about this object and runs
System.gc() (perhaps a few times), and then runs ps again and see that the
process shrunk. You might want to use the "-verbose:gc" JVM option to see
some debugging messages about what the GC's do, and how large Java thinks its
heap is. I did not check this myself, so if you have any conclusions, please
report it back to this list - I think it's interesting for many people here.

Anyway, theoretically, Java should have no problem to shrink its memory use
because of the fact that it can (and does) move objects around, so memory
fragmentation is not a problem like it is in many other languages. This is
also possible technically to do in Linux (there are several ways to do this,
including anonymous maps). If Java was Open-Source, I could find out how they
did it (if at all), but last time I checked, it wasn't (I heard this is
changing, though).

> It's not generally a problem though. Provided you have a compacting 
> garbage collector (and the Sun Java GC is one) then the unused memory 
> will just get paged out. It may be a different story on windows and it's 
> certainly a different story on an embedded platform, but releasing 
> memory to the kernel under Linux is not generally necessary or desirable.

Believe it or not, this is exactly what every GC expert told me when I
asked this question (how can I force the JVM to reduce its memory use when
it doesn't need all of it): "don't worry about it". This is "conventional
wisdom" second only to "never run System.gc()". But this answer ("virtual
memory means you don't care about the process not shrinking") ignores two
very important issues (not just on embedded platforms, like you suggested):

1. If the JVM heap itself doesn't shrink (it's not just that the memory isn't
   returned to the system), Java will continue to fill the entire huge heap,
   allowing itself to gather more garbage before a GC is necessary. Since Java
   goes over all this memory filling it with garbage all the time, none of
   this memory can ever be paged out and "forgotten".

   For example, with the default setting (of 70%), it is possible that you
   need just 100 MB of memory, but the JVM will keep a 300 MB heap, and
   continuously go over the entire 200 MB free heap filling it with soon-to-
   become garbage objects.

2. The thinking behind your statement (which, like I said, was shared by most
   GC experts I asked) is usually rooted on the idea that the machine is
   running one huge JVM. If that is the case, then indeed, nobody cares if
   when the JVM's memory needs fluctuates, whether the heep stays large,
   whether it gets swapped to disk, or the JVM gets smaller.
   But think about a machine running dozens of separate JVMs: this was *NOT*
   the intention of the designers of Java, but it is what happens in reality
   on modern desktops (and sometimes servers): you run several independent
   programs written in Java. In this case, if every one of these programs
   takes up the maximum size that it ever needed, even if this waste is just
   in the swap space, we can be in trouble. Swap space is "cheap", but not
   cheap enough that you don't mind that each Java program you run takes up
   hundreds of megabytes of it more than it actually needs.

The use-case that led me to these insights was a desktop search program
written in Java. This program had large peak memory needs (when parsing
large files, and when building the index), at the order of 150 MB. But then,
the JVM did not shrink, and continued to waste 150 MB of memory on each
desktop. This was unacceptable, even if (like you said), when you don't
perform a search the entire 150 MB gets swapped out. It was unacceptable for
several reasons: First, this is not the only program running on the machine,
so what if each one wasted 150 MB of swap space? Second, when you do use
the search, the entire 150 MB heap gets used and swapped in, and worse -
swaps out 150 MB of other useful memory (slowing your work in other
applications).

-- 
Nadav Har'El                        |      Tuesday, Jan 23 2007, 4 Shevat 5767
IBM Haifa Research Lab              |-----------------------------------------
                                    |"Do you want to restart Windows now or
http://nadav.harel.org.il           |wait for the next crash?"

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25644-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 23 13:21:28 2007
Return-Path: <java-user-return-25644-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 50246 invoked from network); 23 Jan 2007 13:21:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Jan 2007 13:21:28 -0000
Received: (qmail 4656 invoked by uid 500); 23 Jan 2007 13:21:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4617 invoked by uid 500); 23 Jan 2007 13:21:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4606 invoked by uid 99); 23 Jan 2007 13:21:28 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Jan 2007 05:21:28 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of somnath.banerjee@gmail.com designates 64.233.184.234 as permitted sender)
Received: from [64.233.184.234] (HELO wr-out-0506.google.com) (64.233.184.234)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Jan 2007 05:21:20 -0800
Received: by wr-out-0506.google.com with SMTP id i21so1004082wra
        for <java-user@lucene.apache.org>; Tue, 23 Jan 2007 05:20:57 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=gD73+uufMahjIyXqr9iFvW66O3pziTZBSD5F7yoHqlimdc138xaFXAZNVlHJupKXJn4LiI2eoVT7u2p6EdSF+VHsFpLkuc1ueP7KIAjYOMOx5rvj9rlgcd+AX2hClEIenYZzCk41+x0Ax1JgaKVNjRn7qWnRkG91Aa8SbxLWxbw=
Received: by 10.78.193.5 with SMTP id q5mr335292huf.1169558451939;
        Tue, 23 Jan 2007 05:20:51 -0800 (PST)
Received: by 10.78.90.8 with HTTP; Tue, 23 Jan 2007 05:20:51 -0800 (PST)
Message-ID: <17e2e1b50701230520y66c4e147t744eddda122bda0a@mail.gmail.com>
Date: Tue, 23 Jan 2007 18:50:51 +0530
From: "Somnath Banerjee" <somnath.banerjee@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Long Query Performance
In-Reply-To: <Pine.LNX.4.58.0701221526050.2290@hal.rescomp.berkeley.edu>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_123152_7751086.1169558451854"
References: <17e2e1b50701220334g4fdf6497h311e5844abb5f6f6@mail.gmail.com>
	 <45B4B6F7.7010100@curtin.com>
	 <17e2e1b50701220528h409c9faue1f7fa739a69f10@mail.gmail.com>
	 <Pine.LNX.4.58.0701221526050.2290@hal.rescomp.berkeley.edu>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_123152_7751086.1169558451854
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Thanks for all the reply. I'll try the methods suggested by you will post
the result of my experiment.

Chris, I was measuring the query time only. I have increased the heap size
of java to 1 GB. Now, 5 - 8 words query is taking about 0.1 - 0.4 second.
That's reasonable I guess.

Thanks,
Somnath

On 1/23/07, Chris Hostetter <hossman_lucene@fucit.org> wrote:
>
>
> : I tried by using only the title of (5-8 words) the query documents
> instead
> : of full text of the document. But that is also taking 0.5-1 sec for each
>
> i can't speak to your 200-300 word BooleanQuery timings, but 0.5-1
> seconds for an 8 clause BooleanQuery is very very wrong.  i suspect
> there's something going on in your acctually code that wasn't conveyed in
> your spuedo code.
>
> can you post a real functional bit of java showing what exactly you are
> timing (we don't need the whole index -- jsut the part of the code you
> are timing)
>
>
>
>
> -Hoss
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_123152_7751086.1169558451854--

From java-user-return-25645-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 23 13:34:37 2007
Return-Path: <java-user-return-25645-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 52166 invoked from network); 23 Jan 2007 13:34:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Jan 2007 13:34:35 -0000
Received: (qmail 18438 invoked by uid 500); 23 Jan 2007 13:34:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18407 invoked by uid 500); 23 Jan 2007 13:34:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18396 invoked by uid 99); 23 Jan 2007 13:34:34 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Jan 2007 05:34:34 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [212.190.206.154] (HELO srs2na11.bgl.lu) (212.190.206.154)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 23 Jan 2007 05:34:25 -0800
Received: from spmwf02l.luinternal.fortis.bank (unverified) by srs2na12.domain
 (Content Technologies SMTPRS 4.2.10) with ESMTP id <T7d5bcd1c7c0aaf150a162@srs2na12.domain> for <java-user@lucene.apache.org>;
 Tue, 23 Jan 2007 14:38:00 +0100
Received: from SPMWB02L.luinternal.fortis.bank ([10.172.252.140]) by spmwf02l.luinternal.fortis.bank with Microsoft SMTPSVC(6.0.3790.0);
	 Tue, 23 Jan 2007 14:33:51 +0100
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
X-MimeOLE: Produced By Microsoft Exchange V6.5
Subject: RE: Low hits
Date: Tue, 23 Jan 2007 14:33:51 +0100
Message-ID: <EBC8F228BDB35A4394D0BE53DA25248808A9A23C@SPMWB02L.luinternal.fortis.bank>
In-Reply-To: <359a92830701230501w4f3679d1w1b37c4e22bdd27db@mail.gmail.com>
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
Thread-Topic: Low hits
Thread-Index: Acc+7qNDfXL83uskQ6yL0uDv7acFOAAA88yQ
From: "DECAFFMEYER MATHIEU" <MATHIEU.DECAFFMAYER@fortis.lu>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 23 Jan 2007 13:33:51.0764 (UTC) FILETIME=[1EC65D40:01C73EF3]
X-Virus-Checked: Checked by ClamAV on apache.org

=20
Actually I am using Regain over Lucene for URL indexing.
And Regain uses in its last stable release Lucene 1.4.3

When I index the whole website, then when I type a title of a document I
have like 60 to 70 % as score.
When I index only one page, then when I type the title I have like 2% as
score.

It is very annoying for me since I have, for some reasons, to index all
the pages separetely.

That's why I am looking through the code of Regain, I will paste some
more code except if someone of you has an idea of this behaviour with
this explanation ...

Thank u for any further help.

__________________________________

   Mathieu Decaffmeyer

   =20

-----Original Message-----
From: Erick Erickson [mailto:erickerickson@gmail.com]=20
Sent: Tuesday, January 23, 2007 2:01 PM
To: java-user@lucene.apache.org
Subject: Re: Low hits

*****  This message comes from the Internet Network *****

What version of Lucene are you using? 2.0 doesn't have a doc.add like
that.
You'd do something like
doc.add(new Field("title", title, Field.Store.YES,
Field.Index.TOKENIZED);

So I really don't understand what you're trying to do. Nor do I
understand
what "2%" means in this context....

But there are two things you should be aware of.
1> the analyzer you use when you create your index AND when you query
your
index should be the same, at least when you start. There are reasons why
you
might want to use different ones, but certainly not when you are
starting.
Otherwise you, say, index something and it's automatically folded into
lowercase (StandardAnalyzer certainly does this) but your query could be
uppercase if you use, say SimpleAnalyzer for the query phase.

2> get Luke (google lucene luke). It allows you to examine your index
and
see what's actually in it. Otherwise you're flying blind. It also allows
you
to enter queries manually (see Lucene In Action for lucene's query
syntax).
Really, really get Luke. It'll make your life much easier.

You probably want to post bigger snippets of actual code for folks to
look
at, since one line of code and "it doesn't work" don't give us much to
go on
<G>.

Best
Erick

On 1/23/07, DECAFFMEYER MATHIEU <MATHIEU.DECAFFMAYER@fortis.lu> wrote:
>
>
> Hi,
>
> I'm pretty new to Lucene and I try to find some help here.
> I added  the title of the document :
> doc.add(Field.Text("title", title));
> e.g. the title is "Constructions"
> When I do a search on this title I have as result 2%
> Can someone help me udnerstanding what I am doing wrong ?
>
> Thank u.
>
> *__________________________________*
>
> *   Mathieu Decaffmeyer*
>
>
> =3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D
> Internet communications are not secure and therefore Fortis Banque
> Luxembourg S.A. does not accept legal responsibility for the contents
of
> this message. The information contained in this e-mail is confidential
and
> may be legally privileged. It is intended solely for the addressee. If
you
> are not the intended recipient, any disclosure, copying, distribution
or any
> action taken or omitted to be taken in reliance on it, is prohibited
and may
> be unlawful. Nothing in the message is capable or intended to create
any
> legally binding obligations on either party and it is not intended to
> provide legal advice.
> =3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D
Internet communications are not secure and therefore Fortis Banque Luxembou=
rg S.A. does not accept legal responsibility for the contents of this messa=
ge. The information contained in this e-mail is confidential and may be leg=
ally privileged. It is intended solely for the addressee. If you are not th=
e intended recipient, any disclosure, copying, distribution or any action t=
aken or omitted to be taken in reliance on it, is prohibited and may be unl=
awful. Nothing in the message is capable or intended to create any legally =
binding obligations on either party and it is not intended to provide legal=
 advice.
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25646-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 23 15:16:52 2007
Return-Path: <java-user-return-25646-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88602 invoked from network); 23 Jan 2007 15:16:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Jan 2007 15:16:51 -0000
Received: (qmail 13288 invoked by uid 500); 23 Jan 2007 15:16:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12904 invoked by uid 500); 23 Jan 2007 15:16:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12892 invoked by uid 99); 23 Jan 2007 15:16:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Jan 2007 07:16:50 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [132.68.238.36] (HELO mailgw4.technion.ac.il) (132.68.238.36)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Jan 2007 07:16:40 -0800
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mailgw4.technion.ac.il (Postfix) with ESMTP id AFF4723FC20
	for <java-user@lucene.apache.org>; Tue, 23 Jan 2007 17:16:30 +0200 (IST)
X-Virus-Scanned: by amavisd-new at technion.ac.il
Received: from mailgw4.technion.ac.il ([127.0.0.1])
	by localhost (mailgw4.technion.ac.il [127.0.0.1]) (amavisd-new, port 10024)
	with LMTP id t1Z11HB0e4Gy for <java-user@lucene.apache.org>;
	Tue, 23 Jan 2007 17:16:30 +0200 (IST)
Received: from fermat.math.technion.ac.il (fermat.math.technion.ac.il [132.68.115.6])
	by mailgw4.technion.ac.il (Postfix) with ESMTP id 962F723FB89
	for <java-user@lucene.apache.org>; Tue, 23 Jan 2007 17:16:30 +0200 (IST)
Received: from fermat.math.technion.ac.il (localhost [127.0.0.1])
	by fermat.math.technion.ac.il (8.12.10/8.12.10) with ESMTP id l0NFGHr2017927
	for <java-user@lucene.apache.org>; Tue, 23 Jan 2007 17:16:17 +0200 (IST)
Received: (from nyh@localhost)
	by fermat.math.technion.ac.il (8.12.10/8.12.10/Submit) id l0NFGHKU017926
	for java-user@lucene.apache.org; Tue, 23 Jan 2007 17:16:17 +0200 (IST)
X-Authentication-Warning: fermat.math.technion.ac.il: nyh set sender to nyh@math.technion.ac.il using -f
Date: Tue, 23 Jan 2007 17:16:17 +0200
From: "Nadav Har'El" <nyh@math.technion.ac.il>
To: java-user@lucene.apache.org
Subject: NO_NORMS and TOKENIZED?
Message-ID: <20070123151617.GA17694@fermat.math.technion.ac.il>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
User-Agent: Mutt/1.4.2.2i
Hebrew-Date: 4 Shevat 5767
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

When adding a field to a document, Field.Index gives me four options: NO,
NO_NORMS, TOKENIZED and UN_TOKENIZED.

NO_NORMS means, according to the documentation "index the field's value
without an Analyzer, and disable the storing of norms."

What can I do if I want to index the field's value *with* an Analyzer, but
still disable the storing of norms (because the field length should not be
considered in scoring)? Can't I do that? Was this intentional, or is this
an oversight and a fifth option should be added?

Thanks,
Nadav.

-- 
Nadav Har'El                        |      Tuesday, Jan 23 2007, 4 Shevat 5767
IBM Haifa Research Lab              |-----------------------------------------
                                    |echo '[q]sa[ln0=aln256%Pln256/snlbx]
http://nadav.harel.org.il           |sb3135071790101768542287578439snlbxq'|dc

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25647-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 23 15:25:30 2007
Return-Path: <java-user-return-25647-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90697 invoked from network); 23 Jan 2007 15:25:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Jan 2007 15:25:29 -0000
Received: (qmail 27517 invoked by uid 500); 23 Jan 2007 15:25:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26957 invoked by uid 500); 23 Jan 2007 15:25:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26946 invoked by uid 99); 23 Jan 2007 15:25:29 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Jan 2007 07:25:29 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of yseeley@gmail.com designates 64.233.182.186 as permitted sender)
Received: from [64.233.182.186] (HELO nf-out-0910.google.com) (64.233.182.186)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Jan 2007 07:25:20 -0800
Received: by nf-out-0910.google.com with SMTP id a27so260536nfc
        for <java-user@lucene.apache.org>; Tue, 23 Jan 2007 07:24:58 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=kk0OaiJQvraPRTkGW0twOdHnO2sbk6Ulr02/PmtlhJYZWsz1qUyluz1rmGQU8h9fnbJIK5H7QjWzF32NbQdlVq7uyba9Q1TDr3DUJ3vxmgHVDmAV3Yrd6e5zihGB5SCGxxe9rxyOxS7UPIaXvf5LiUPu7TcXNfb4ODtH/ytBNgU=
Received: by 10.82.162.14 with SMTP id k14mr7987817bue.1169565898390;
        Tue, 23 Jan 2007 07:24:58 -0800 (PST)
Received: by 10.82.106.19 with HTTP; Tue, 23 Jan 2007 07:24:58 -0800 (PST)
Message-ID: <c68e39170701230724u339f81b2h671d852a67be0ea9@mail.gmail.com>
Date: Tue, 23 Jan 2007 10:24:58 -0500
From: "Yonik Seeley" <yonik@apache.org>
Sender: yseeley@gmail.com
To: java-user@lucene.apache.org
Subject: Re: NO_NORMS and TOKENIZED?
In-Reply-To: <20070123151617.GA17694@fermat.math.technion.ac.il>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <20070123151617.GA17694@fermat.math.technion.ac.il>
X-Google-Sender-Auth: e5ab41bd2d24fe21
X-Virus-Checked: Checked by ClamAV on apache.org

On 1/23/07, Nadav Har'El <nyh@math.technion.ac.il> wrote:
> Hi,
>
> When adding a field to a document, Field.Index gives me four options: NO,
> NO_NORMS, TOKENIZED and UN_TOKENIZED.
>
> NO_NORMS means, according to the documentation "index the field's value
> without an Analyzer, and disable the storing of norms."
>
> What can I do if I want to index the field's value *with* an Analyzer, but
> still disable the storing of norms (because the field length should not be
> considered in scoring)?

That works fine.

> Can't I do that? Was this intentional, or is this
> an oversight and a fifth option should be added?

Yes, that was intentional.
see http://issues.apache.org/jira/browse/LUCENE-448

I hadn't added a Field.Index option at all, and Doug suggested
NO_NORMS, probably because it's mostly harmless to new users who might
disable length normalization without realizing the implications.

For other fields, I prefer use of setOmitNorms()

-Yonik

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25648-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 23 15:50:08 2007
Return-Path: <java-user-return-25648-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99317 invoked from network); 23 Jan 2007 15:50:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Jan 2007 15:50:07 -0000
Received: (qmail 90006 invoked by uid 500); 23 Jan 2007 15:50:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89979 invoked by uid 500); 23 Jan 2007 15:50:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89968 invoked by uid 99); 23 Jan 2007 15:50:05 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Jan 2007 07:50:05 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [132.68.238.33] (HELO mailgw2.technion.ac.il) (132.68.238.33)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Jan 2007 07:49:56 -0800
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mailgw2.technion.ac.il (Postfix) with ESMTP id 72D7C390231
	for <java-user@lucene.apache.org>; Tue, 23 Jan 2007 17:49:34 +0200 (IST)
X-Virus-Scanned: by amavisd-new at technion.ac.il
Received: from mailgw2.technion.ac.il ([127.0.0.1])
	by localhost (mailgw2.technion.ac.il [127.0.0.1]) (amavisd-new, port 10024)
	with LMTP id zauMqr11cMN8 for <java-user@lucene.apache.org>;
	Tue, 23 Jan 2007 17:49:34 +0200 (IST)
Received: from fermat.math.technion.ac.il (fermat.math.technion.ac.il [132.68.115.6])
	by mailgw2.technion.ac.il (Postfix) with ESMTP id 48109390136
	for <java-user@lucene.apache.org>; Tue, 23 Jan 2007 17:49:34 +0200 (IST)
Received: from fermat.math.technion.ac.il (localhost [127.0.0.1])
	by fermat.math.technion.ac.il (8.12.10/8.12.10) with ESMTP id l0NFnXr2018952
	for <java-user@lucene.apache.org>; Tue, 23 Jan 2007 17:49:33 +0200 (IST)
Received: (from nyh@localhost)
	by fermat.math.technion.ac.il (8.12.10/8.12.10/Submit) id l0NFnXQl018951
	for java-user@lucene.apache.org; Tue, 23 Jan 2007 17:49:33 +0200 (IST)
X-Authentication-Warning: fermat.math.technion.ac.il: nyh set sender to nyh@math.technion.ac.il using -f
Date: Tue, 23 Jan 2007 17:49:33 +0200
From: "Nadav Har'El" <nyh@math.technion.ac.il>
To: java-user@lucene.apache.org
Subject: Re: NO_NORMS and TOKENIZED?
Message-ID: <20070123154933.GA18721@fermat.math.technion.ac.il>
References: <20070123151617.GA17694@fermat.math.technion.ac.il> <c68e39170701230724u339f81b2h671d852a67be0ea9@mail.gmail.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
In-Reply-To: <c68e39170701230724u339f81b2h671d852a67be0ea9@mail.gmail.com>
User-Agent: Mutt/1.4.2.2i
Hebrew-Date: 4 Shevat 5767
X-Virus-Checked: Checked by ClamAV on apache.org

On Tue, Jan 23, 2007, Yonik Seeley wrote about "Re: NO_NORMS and TOKENIZED?":
> >When adding a field to a document, Field.Index gives me four options: NO,
> >NO_NORMS, TOKENIZED and UN_TOKENIZED.
>..
> >What can I do if I want to index the field's value *with* an Analyzer, but
> >still disable the storing of norms (because the field length should not be
> >considered in scoring)?
>...
> I hadn't added a Field.Index option at all, and Doug suggested
> NO_NORMS, probably because it's mostly harmless to new users who might
> disable length normalization without realizing the implications.
> 
> For other fields, I prefer use of setOmitNorms()

Thanks! I wasn't aware of this method. It's exactly what I needed.

I never thought of trying to modify the Field after construction...
Perhaps the NO_NORMS javadoc should refer to setOmitNorms()? (Or I should
learn to search the documentation better :-)).

-- 
Nadav Har'El                        |      Tuesday, Jan 23 2007, 4 Shevat 5767
IBM Haifa Research Lab              |-----------------------------------------
                                    |Today is the tomorrow you worried about
http://nadav.harel.org.il           |yesterday, and now you know why.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25649-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 23 17:08:44 2007
Return-Path: <java-user-return-25649-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22620 invoked from network); 23 Jan 2007 17:08:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Jan 2007 17:08:43 -0000
Received: (qmail 63444 invoked by uid 500); 23 Jan 2007 17:08:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63422 invoked by uid 500); 23 Jan 2007 17:08:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63411 invoked by uid 99); 23 Jan 2007 17:08:41 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Jan 2007 09:08:41 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of grant.ingersoll@gmail.com designates 209.85.132.248 as permitted sender)
Received: from [209.85.132.248] (HELO an-out-0708.google.com) (209.85.132.248)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Jan 2007 09:08:31 -0800
Received: by an-out-0708.google.com with SMTP id c3so671830ana
        for <java-user@lucene.apache.org>; Tue, 23 Jan 2007 09:08:10 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=aXTDuDq0QlVT/dRjplj3ye69nOPWfU+5Hjcm2apuw5iBVtQB4PdZ1ren4U+MH7mPmyN4EuqplI8uYs73NfSay2M2XwLVow26YjAtmklg0WYwBQmQooUA9C/2eSdfioClmZnhBTxW0cDr2iA+m7nmLt9BnDfKR+PED7mfE7WXR+k=
Received: by 10.100.152.9 with SMTP id z9mr932233and.1169572080261;
        Tue, 23 Jan 2007 09:08:00 -0800 (PST)
Received: from ?192.168.0.2? ( [74.229.189.244])
        by mx.google.com with ESMTP id 34sm12253602wra.2007.01.23.09.07.58;
        Tue, 23 Jan 2007 09:07:59 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <200701222244.43585.nicolas.lalevee@anyware-tech.com>
References: <dac893430701221033l2a837a21n614bef54f7366398@mail.gmail.com> <200701222033.29717.nicolas.lalevee@anyware-tech.com> <dac893430701221144h322d7084q840ea15893b46f5e@mail.gmail.com> <200701222244.43585.nicolas.lalevee@anyware-tech.com>
Content-Type: text/plain; charset=ISO-8859-1; delsp=yes; format=flowed
Message-Id: <640CA4BF-06C8-4C3C-BC44-A89648155F52@gmail.com>
Content-Transfer-Encoding: quoted-printable
From: Grant Ingersoll <grant.ingersoll@gmail.com>
Subject: Re: Lucene Internals question
Date: Tue, 23 Jan 2007 12:07:56 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org

You might also be interested in https://issues.apache.org/jira/browse/=20=

LUCENE-755 (aka the Payloads patch) which will enable storing =20
information at the token level and allow for plugging in more scoring =20=

options related to it.

There has been a variety of discussions over on java-dev related to =20
topics that would enable things like PageRank, etc. at a lower level =20
in Lucene.  Search java-dev for "Flexible Indexing", "Payloads", etc.

You will also find additional Lucene scoring information at http://=20
lucene.apache.org/java/docs/scoring.html

-Grant

On Jan 22, 2007, at 4:44 PM, Nicolas Lalev=E9e wrote:

> Le Lundi 22 Janvier 2007 20:44, EDMOND KEMOKAI a =E9crit :
>> Hmm..doesn't lucene scoring determine how relevant a document is =20
>> to your
>> query? That is what PageRank and HITS do as well, I believe. Page and
>> document are the same, if you want to index a page you'll =20
>> obviously try to
>> convert it into a document. PageRank does link analysis to =20
>> determine how
>> relevant that page is as it relates to the query you entered, does =20=

>> lucene
>> have something similar? How does lucene determine between two =20
>> documents
>> which one should score higher if they both contain a certain term? =20=

>> Google
>> uses PageRank to make that determination, how does lucene do it?
>
> The thing is that Google can use both its PageRank and Lucene.
>
> The PageRank caculation doesn't depend on the query. It's value is =20
> quite
> absolute. It depends of how the other pages refer to it.
>
> And the Lucene scoring is calculating how a document (document is =20
> the generic
> Lucene term, beacause Lucene can be used for other things that web =20
> search)
> match the query. Searching for "foo bar", a document with no "foo", =20=

> no "bar"
> in it it scored at 0, even more not scored at all. A document with =20
> one "foo",
> but no "bar" will be scored to 0.5, with one "foo" and one "bar", =20
> separated
> with 15 words, will be scored 0.8, and a document with "foo bar", =20
> scored to
> 1.0.
>
> Then you can combine the both, as Google is probably doing. Same =20
> exemple :
> - a page with no "foo", neither "bar", whatever is its page rank, =20
> won't be
> scored.
> - a page with a "foo" and a "bar", with a low page rank, let say 0.5
> - a page with a "foo" and a "bar", with a high page rank, let say 0.9
>
> If you want to know more about Lucene scoring and Page rank, you =20
> should go see
> Nutch and its mailing list : http://lucene.apache.org/nutch/
>
> Nicolas
>
>>
>> On 1/22/07, Nicolas Lalev=E9e <nicolas.lalevee@anyware-tech.com> =
wrote:
>>> Le Lundi 22 Janvier 2007 19:33, EDMOND KEMOKAI a =E9crit:
>>>> Hi All
>>>> This is a question for those familiar with lucene document =20
>>>> scoring. How
>>>> does it compare with googles PageRank or HITS, or are they very
>>>
>>> different?
>>>
>>>> I have being looking at the PageRank algorithm but I'll need to
>>>
>>> brush-off
>>>
>>>> my math skills before delving into it:)
>>>
>>> In fact Lucene is just a search engine. Then you can use the search
>>> engine to
>>> search in web pages, like Nutch is using Lucene. And Google is =20
>>> more like
>>> Nutch : a web crawler plus a web-search engine. So when you are =20
>>> taking
>>> about
>>> page raking, it has nothing to do with Lucene scoring. Lucene =20
>>> scoring is
>>> how
>>> about the result entry match your query. Page raking is more =20
>>> about how
>>> relevant is the web page. So for a document, the Lucene scoring =20
>>> depends
>>> on the query, and the page raking is quite absolute.
>>>
>>> Nicolas
>>>
>>> --------------------------------------------------------------------=20=

>>> -
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

------------------------------------------------------
Grant Ingersoll
http://www.grantingersoll.com/
http://www.paperoftheweek.com/



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25650-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 23 17:18:51 2007
Return-Path: <java-user-return-25650-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25314 invoked from network); 23 Jan 2007 17:18:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Jan 2007 17:18:50 -0000
Received: (qmail 95728 invoked by uid 500); 23 Jan 2007 17:18:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95701 invoked by uid 500); 23 Jan 2007 17:18:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95655 invoked by uid 99); 23 Jan 2007 17:18:39 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Jan 2007 09:18:39 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of yseeley@gmail.com designates 64.233.182.184 as permitted sender)
Received: from [64.233.182.184] (HELO nf-out-0910.google.com) (64.233.182.184)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Jan 2007 09:18:30 -0800
Received: by nf-out-0910.google.com with SMTP id a27so301243nfc
        for <java-user@lucene.apache.org>; Tue, 23 Jan 2007 09:18:07 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=pzJ3tZ75QYaj/jOoDrr/VwgaWz7qYu2Hx8qlgEpr+eigjv09Ae1JXv4V5gCF/Gmn5ebuPIPdCilwTf/qoi5pSFFa4a3vPotPlv8+SZNr6s3c2mc2Rgw3BWQ8gC3tkvMpRY3vRGtL/1I7HJlHTSuApYFsb5OKUz2F6cPK1MMiUWw=
Received: by 10.82.139.17 with SMTP id m17mr368290bud.1169572687011;
        Tue, 23 Jan 2007 09:18:07 -0800 (PST)
Received: by 10.82.106.19 with HTTP; Tue, 23 Jan 2007 09:18:06 -0800 (PST)
Message-ID: <c68e39170701230918r6dba2438pb2422051f6604ec3@mail.gmail.com>
Date: Tue, 23 Jan 2007 12:18:06 -0500
From: "Yonik Seeley" <yonik@apache.org>
Sender: yseeley@gmail.com
To: java-user@lucene.apache.org
Subject: Re: Lucene Internals question
In-Reply-To: <640CA4BF-06C8-4C3C-BC44-A89648155F52@gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <dac893430701221033l2a837a21n614bef54f7366398@mail.gmail.com>
	 <200701222033.29717.nicolas.lalevee@anyware-tech.com>
	 <dac893430701221144h322d7084q840ea15893b46f5e@mail.gmail.com>
	 <200701222244.43585.nicolas.lalevee@anyware-tech.com>
	 <640CA4BF-06C8-4C3C-BC44-A89648155F52@gmail.com>
X-Google-Sender-Auth: e22b0ffdf53cb5fb
X-Virus-Checked: Checked by ClamAV on apache.org

On 1/23/07, Grant Ingersoll <grant.ingersoll@gmail.com> wrote:
> You might also be interested in https://issues.apache.org/jira/browse/
> LUCENE-755 (aka the Payloads patch) which will enable storing
> information at the token level and allow for plugging in more scoring
> options related to it.
>
> There has been a variety of discussions over on java-dev related to
> topics that would enable things like PageRank, etc. at a lower level
> in Lucene.  Search java-dev for "Flexible Indexing", "Payloads", etc.

If page-rank itself is static/per-document, one could already handle
that case with lucene today.

-Yonik

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25651-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 23 17:36:28 2007
Return-Path: <java-user-return-25651-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31846 invoked from network); 23 Jan 2007 17:36:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Jan 2007 17:36:27 -0000
Received: (qmail 44065 invoked by uid 500); 23 Jan 2007 17:36:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44034 invoked by uid 500); 23 Jan 2007 17:36:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44023 invoked by uid 99); 23 Jan 2007 17:36:26 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Jan 2007 09:36:26 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [209.191.86.198] (HELO web82511.mail.mud.yahoo.com) (209.191.86.198)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 23 Jan 2007 09:36:16 -0800
Received: (qmail 50039 invoked by uid 60001); 23 Jan 2007 17:35:54 -0000
Message-ID: <20070123173554.50037.qmail@web82511.mail.mud.yahoo.com>
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=pacbell.net;
  h=X-YMail-OSG:Received:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=4pkyTjHjxaUorZMfnmStOoWqDq5HecR2HJFfgVSzE2lmGqJmfgxBsxAOOQ9jm0JglwCb01XdZMvH6YeIqRjOy5DGLLSPElwWDSvOkkfzlwdBOX9mSyP2mqXTStIl/l/T+ANxrsYlHffN2Cq1qIt/V5XRaL7smnseCjAwpTKS3VY=;
X-YMail-OSG: JFLIo2YVM1mQ3vn7YhtNi7CwqUZJXSdESQcA8SP.
Received: from [71.146.50.31] by web82511.mail.mud.yahoo.com via HTTP; Tue, 23 Jan 2007 09:35:54 PST
Date: Tue, 23 Jan 2007 09:35:54 -0800 (PST)
From: Felix Litman <f_litman@pacbell.net>
Subject: query parser syntax  -- does "-" require no-space after it to act as "prohibitor"?
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-706439449-1169573754=:46626"
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

--0-706439449-1169573754=:46626
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit

Does a special character lika a "-" prohibitor operator require no-space after it in order to work as a prohibitor?
   
  Typically on the web, e.g. Google and others, the "-" operator works as a boolean prohibitor only when not followed by a space. Otherwise it is treated as just a dash query term.
   
  But in our Lucene implementation the the "-" seem to be acting as a prohibitor even if there is space after it.   For example. in a query:  Sales +    service    , the 'service' term is excluded by Lucene.  (Same for the "+" operator.)
   
  Is this space-treatment a bug or a standard Lucene query parser behavior?
  
Thank you,
  Felix

--0-706439449-1169573754=:46626--

From java-user-return-25652-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 23 18:01:35 2007
Return-Path: <java-user-return-25652-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 41090 invoked from network); 23 Jan 2007 18:01:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Jan 2007 18:01:34 -0000
Received: (qmail 3730 invoked by uid 500); 23 Jan 2007 18:01:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3706 invoked by uid 500); 23 Jan 2007 18:01:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3695 invoked by uid 99); 23 Jan 2007 18:01:31 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Jan 2007 10:01:31 -0800
X-ASF-Spam-Status: No, hits=2.9 required=10.0
	tests=HTML_10_20,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [209.191.86.201] (HELO web82514.mail.mud.yahoo.com) (209.191.86.201)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 23 Jan 2007 10:01:21 -0800
Received: (qmail 35554 invoked by uid 60001); 23 Jan 2007 18:01:00 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=pacbell.net;
  h=X-YMail-OSG:Received:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=UDjjWDtEt8+i2ZlpTxP98m3r2A7YPPsMukKGlWHrVOmlkmNEJMCNTTgN1cbo+LLUBIq8NfY113yzrM+J6Z7C9UiuHyExulet4S4KHXrF0PGTzm7gai3pY8qnVambVUly7RjdDgCq0BoiRtke+KOfrq7qDloXJxhI5VGpTxlOECA=;
X-YMail-OSG: 9UjztjgVM1n__T_uR.jE9snwKHCWCQSlKo8NmJiYQrC3q0NE
Received: from [71.146.50.31] by web82514.mail.mud.yahoo.com via HTTP; Tue, 23 Jan 2007 10:01:00 PST
Date: Tue, 23 Jan 2007 10:01:00 -0800 (PST)
From: Felix Litman <f_litman@pacbell.net>
Subject: proximity and location scoring
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-1464385149-1169575260=:34405"
Content-Transfer-Encoding: 8bit
Message-ID: <94049.34405.qm@web82514.mail.mud.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

--0-1464385149-1169575260=:34405
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit

Is there a straightforward way to extend the "standard" parser to incorporate proximity into the score in multi-word queries, including boost factors?  I.e. score results higher when query terms appear closer toghether then when scattered?
   
  How about incorporating search term location in the score?  I.e. score results higher where terms appear closer to the beginning of the search field...
   
  Thank you,
  Felix

--0-1464385149-1169575260=:34405--

From java-user-return-25653-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 23 18:05:20 2007
Return-Path: <java-user-return-25653-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42108 invoked from network); 23 Jan 2007 18:05:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Jan 2007 18:05:19 -0000
Received: (qmail 17822 invoked by uid 500); 23 Jan 2007 18:05:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17790 invoked by uid 500); 23 Jan 2007 18:05:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17779 invoked by uid 99); 23 Jan 2007 18:05:16 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Jan 2007 10:05:16 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of yseeley@gmail.com designates 64.233.182.184 as permitted sender)
Received: from [64.233.182.184] (HELO nf-out-0910.google.com) (64.233.182.184)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Jan 2007 10:05:07 -0800
Received: by nf-out-0910.google.com with SMTP id a27so312666nfc
        for <java-user@lucene.apache.org>; Tue, 23 Jan 2007 10:04:46 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=NTmbvrY/Mit5CTi7pxLjiMyr9LItV/qhqs6yGzFHdVnYffZ+xyGRVxeGCvsby2NMp4NS7bmeNza8OP3CTHjPb/TWIVy+ORahwxajvAuhmKT4VW1fA2LoJXJu1nG86kuWokGwMhT59VdEArtQr+yrPfnxB+ropzq+JIy2+xz4Rfg=
Received: by 10.82.152.16 with SMTP id z16mr171106bud.1169575485633;
        Tue, 23 Jan 2007 10:04:45 -0800 (PST)
Received: by 10.82.106.19 with HTTP; Tue, 23 Jan 2007 10:04:45 -0800 (PST)
Message-ID: <c68e39170701231004s5d6db500od847f452be32fd09@mail.gmail.com>
Date: Tue, 23 Jan 2007 13:04:45 -0500
From: "Yonik Seeley" <yonik@apache.org>
Sender: yseeley@gmail.com
To: java-user@lucene.apache.org
Subject: Re: query parser syntax -- does "-" require no-space after it to act as "prohibitor"?
In-Reply-To: <20070123173554.50037.qmail@web82511.mail.mud.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <20070123173554.50037.qmail@web82511.mail.mud.yahoo.com>
X-Google-Sender-Auth: c05a011555752e42
X-Virus-Checked: Checked by ClamAV on apache.org

On 1/23/07, Felix Litman <f_litman@pacbell.net> wrote:
> Does a special character lika a "-" prohibitor operator require no-space after it in order to work as a prohibitor?
>
>   Typically on the web, e.g. Google and others, the "-" operator works as a boolean prohibitor only when not followed by a space. Otherwise it is treated as just a dash query term.
>
>   But in our Lucene implementation the the "-" seem to be acting as a prohibitor even if there is space after it.   For example. in a query:  Sales +    service    , the 'service' term is excluded by Lucene.  (Same for the "+" operator.)
>
>   Is this space-treatment a bug or a standard Lucene query parser behavior?

I think this is expected, and changing it would be more confusing.  Consider:
If "-" is expected to find a dash, surely "-x" should find a dash
followed by an x?

If you want literals, put quotes around your terms...
"Sales +    service"

-Yonik

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25654-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 23 18:58:25 2007
Return-Path: <java-user-return-25654-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56191 invoked from network); 23 Jan 2007 18:58:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Jan 2007 18:58:24 -0000
Received: (qmail 58965 invoked by uid 500); 23 Jan 2007 18:58:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58934 invoked by uid 500); 23 Jan 2007 18:58:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58923 invoked by uid 99); 23 Jan 2007 18:58:22 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Jan 2007 10:58:22 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of DORONC@il.ibm.com designates 195.212.29.154 as permitted sender)
Received: from [195.212.29.154] (HELO mtagate5.de.ibm.com) (195.212.29.154)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Jan 2007 10:58:11 -0800
Received: from d12nrmr1607.megacenter.de.ibm.com (d12nrmr1607.megacenter.de.ibm.com [9.149.167.49])
	by mtagate5.de.ibm.com (8.13.8/8.13.8) with ESMTP id l0NIvnsL159432
	for <java-user@lucene.apache.org>; Tue, 23 Jan 2007 18:57:49 GMT
Received: from d12av02.megacenter.de.ibm.com (d12av02.megacenter.de.ibm.com [9.149.165.228])
	by d12nrmr1607.megacenter.de.ibm.com (8.13.8/8.13.8/NCO v8.2) with ESMTP id l0NIvnt52793598
	for <java-user@lucene.apache.org>; Tue, 23 Jan 2007 19:57:49 +0100
Received: from d12av02.megacenter.de.ibm.com (loopback [127.0.0.1])
	by d12av02.megacenter.de.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id l0NIvniR030235
	for <java-user@lucene.apache.org>; Tue, 23 Jan 2007 19:57:49 +0100
Received: from d12mc102.megacenter.de.ibm.com (d12mc102.megacenter.de.ibm.com [9.149.167.114])
	by d12av02.megacenter.de.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id l0NIvmPT030230
	for <java-user@lucene.apache.org>; Tue, 23 Jan 2007 19:57:49 +0100
In-Reply-To: <94049.34405.qm@web82514.mail.mud.yahoo.com>
Subject: Re: proximity and location scoring
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 7.0 HF277 June 21, 2006
Message-ID: <OFC9131E40.0EB7F8F4-ON8825726C.0066B0A9-8825726C.0068049A@il.ibm.com>
From: Doron Cohen <DORONC@il.ibm.com>
Date: Tue, 23 Jan 2007 10:56:09 -0800
X-MIMETrack: Serialize by Router on D12MC102/12/M/IBM(Release 7.0.2HF71 | November 3, 2006) at
 23/01/2007 20:57:48
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org

Felix Litman <f_litman@pacbell.net> wrote on 23/01/2007 10:01:00:

> Is there a straightforward way to extend the "standard" parser to
> incorporate proximity into the score in multi-word queries,
> including boost factors?

Current parser supports relaxed phrase syntax:
http://lucene.apache.org/java/docs/queryparsersyntax.html#Proximity%20Searches

>  I.e. score results higher when query terms
> appear closer toghether then when scattered?

So for query "x y"~10 doc with "x a y" would score
higher than doc with "x a b y". You can control the effect of the
distance, programmatically, providing your own similarity class,
especially sloppyFreq(int distance);

(Doesn't help you much if you already knew all this but just
looking for how to extend the query parser...)

>
>   How about incorporating search term location in the score?  I.e.
> score results higher where terms appear closer to the beginning of
> the search field...

Current query parser (and syntax) does not support this, but see
http://lucene.apache.org/java/docs/api/org/apache/lucene/search/spans/SpanQuery.html

and all its sub-classes, especially SpanFirst and SpanNear - with both
scoring takes into account the distance between terms.

>
>   Thank you,
>   Felix


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25655-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 23 19:25:47 2007
Return-Path: <java-user-return-25655-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63414 invoked from network); 23 Jan 2007 19:25:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Jan 2007 19:25:46 -0000
Received: (qmail 31340 invoked by uid 500); 23 Jan 2007 19:25:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31316 invoked by uid 500); 23 Jan 2007 19:25:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31305 invoked by uid 99); 23 Jan 2007 19:25:45 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Jan 2007 11:25:45 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Jan 2007 11:25:36 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 874165B764; Tue, 23 Jan 2007 11:25:16 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 7E6C97F403
	for <java-user@lucene.apache.org>; Tue, 23 Jan 2007 11:25:16 -0800 (PST)
Date: Tue, 23 Jan 2007 11:25:16 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: query parser syntax -- does "-" require no-space after it to
 act as "prohibitor"?
In-Reply-To: <c68e39170701231004s5d6db500od847f452be32fd09@mail.gmail.com>
Message-ID: <Pine.LNX.4.58.0701231124120.17988@hal.rescomp.berkeley.edu>
References: <20070123173554.50037.qmail@web82511.mail.mud.yahoo.com>
 <c68e39170701231004s5d6db500od847f452be32fd09@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: If you want literals, put quotes around your terms...
: "Sales +    service"

or if you don't want a full phrase, you just want "-" to be treated as
a term match you can escape it, or quote it by itself...

    Sales \- service
    Sales "-" service



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25656-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 23 19:28:20 2007
Return-Path: <java-user-return-25656-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63991 invoked from network); 23 Jan 2007 19:28:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Jan 2007 19:28:19 -0000
Received: (qmail 39592 invoked by uid 500); 23 Jan 2007 19:28:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39563 invoked by uid 500); 23 Jan 2007 19:28:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39552 invoked by uid 99); 23 Jan 2007 19:28:16 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Jan 2007 11:28:16 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Jan 2007 11:28:07 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 510935B763; Tue, 23 Jan 2007 11:27:47 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 4C66E7F403
	for <java-user@lucene.apache.org>; Tue, 23 Jan 2007 11:27:47 -0800 (PST)
Date: Tue, 23 Jan 2007 11:27:47 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Long Query Performance
In-Reply-To: <17e2e1b50701230520y66c4e147t744eddda122bda0a@mail.gmail.com>
Message-ID: <Pine.LNX.4.58.0701231125590.17988@hal.rescomp.berkeley.edu>
References: <17e2e1b50701220334g4fdf6497h311e5844abb5f6f6@mail.gmail.com> 
 <45B4B6F7.7010100@curtin.com>  <17e2e1b50701220528h409c9faue1f7fa739a69f10@mail.gmail.com>
  <Pine.LNX.4.58.0701221526050.2290@hal.rescomp.berkeley.edu>
 <17e2e1b50701230520y66c4e147t744eddda122bda0a@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: Chris, I was measuring the query time only. I have increased the heap size

that's still doesn't tell us what you are doing -- "query time" can mean a
lot of things ... are you using the Hits class? are you iterating over
results? are you pulling out stored fields? are you sorting? are you using
any Filters?

questions about improving concrete performance can only be answered by
looking at concrete code -- not vague discussions about the type of
activity being performed.




-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25657-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 23 19:36:02 2007
Return-Path: <java-user-return-25657-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65933 invoked from network); 23 Jan 2007 19:36:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Jan 2007 19:36:01 -0000
Received: (qmail 54617 invoked by uid 500); 23 Jan 2007 19:36:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54582 invoked by uid 500); 23 Jan 2007 19:36:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54571 invoked by uid 99); 23 Jan 2007 19:36:00 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Jan 2007 11:36:00 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [69.50.2.12] (HELO ex8.myhostedexchange.com) (69.50.2.12)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Jan 2007 11:35:52 -0800
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: proximity and location scoring
Date: Tue, 23 Jan 2007 11:36:30 -0800
Message-ID: <F43898E1E0300149BEB43F3A66423D6C0CD496DA@ex8.hostedexchange.local>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: proximity and location scoring
Thread-Index: Acc/IHLSB4IsY2E/Sees9bu1mECB7QABN6ng
References: <OFC9131E40.0EB7F8F4-ON8825726C.0066B0A9-8825726C.0068049A@il.ibm.com>
From: "Chima Echeruo" <cecheruo@mediosystems.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

=20
What about implementing a scoring policy that computes the score based
only on which word position the term is matched?=20

If the match occurred in the first word position, the score should be
highest, if in the second word position it would be least highest etc..
Finally for matches that share the same word position, alphabetic
sorting order will break ties.

In this scenario I expect exact or prefix matches only and don't care
how many times a term is matched or its inverse document frequency.

-c


-----Original Message-----
From: Doron Cohen [mailto:DORONC@il.ibm.com]=20
Sent: Tuesday, January 23, 2007 10:56 AM
To: java-user@lucene.apache.org
Subject: Re: proximity and location scoring

Felix Litman <f_litman@pacbell.net> wrote on 23/01/2007 10:01:00:

> Is there a straightforward way to extend the "standard" parser to=20
> incorporate proximity into the score in multi-word queries, including=20
> boost factors?

Current parser supports relaxed phrase syntax:
http://lucene.apache.org/java/docs/queryparsersyntax.html#Proximity%20Se
arches

>  I.e. score results higher when query terms appear closer toghether=20
> then when scattered?

So for query "x y"~10 doc with "x a y" would score higher than doc with
"x a b y". You can control the effect of the distance, programmatically,
providing your own similarity class, especially sloppyFreq(int
distance);

(Doesn't help you much if you already knew all this but just looking for
how to extend the query parser...)

>
>   How about incorporating search term location in the score?  I.e.
> score results higher where terms appear closer to the beginning of the

> search field...

Current query parser (and syntax) does not support this, but see
http://lucene.apache.org/java/docs/api/org/apache/lucene/search/spans/Sp
anQuery.html

and all its sub-classes, especially SpanFirst and SpanNear - with both
scoring takes into account the distance between terms.

>
>   Thank you,
>   Felix


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25658-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 23 19:37:58 2007
Return-Path: <java-user-return-25658-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 66196 invoked from network); 23 Jan 2007 19:37:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Jan 2007 19:37:57 -0000
Received: (qmail 57359 invoked by uid 500); 23 Jan 2007 19:37:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57333 invoked by uid 500); 23 Jan 2007 19:37:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57322 invoked by uid 99); 23 Jan 2007 19:37:57 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Jan 2007 11:37:57 -0800
X-ASF-Spam-Status: No, hits=0.6 required=10.0
	tests=NO_REAL_NAME
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [68.142.199.170] (HELO web81706.mail.mud.yahoo.com) (68.142.199.170)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 23 Jan 2007 11:37:47 -0800
Received: (qmail 47489 invoked by uid 60001); 23 Jan 2007 19:37:26 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=QyS/uz6bOPehdqrXCK3w5zWOEACfjhnHc0YINNUhlDig6x7ADIjJFJki1pn8mZtoPrZXZDz9i41kR50TdhwXk5mDrRWdkPz7C+1gKmYp648uNgEYGTvqdv0xYnQ43V9Ev8AlQjIgEXxXtsNpAQzdl9sD9EJJ4J0lQGFWd8Lkouo=  ;
Message-ID: <20070123193726.47487.qmail@web81706.mail.mud.yahoo.com>
Received: from [66.201.45.201] by web81706.mail.mud.yahoo.com via HTTP; Tue, 23 Jan 2007 11:37:26 PST
Date: Tue, 23 Jan 2007 11:37:26 -0800 (PST)
From: rayvittal-lists@yahoo.com
Subject: Extending scoring to eliminate sorting on timestamp
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=ascii
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

For various reasons, we'd like to eliminate the sort step.=0AOur current qu=
ery interface takes a start time and end time as an input range:=0A        =
      RangeFilter rf =3D new RangeFilter("day", start, end, true, true);=0A=
            hits =3D searcher.search(query,rf,new Sort(new SortField[]{=0A =
                   new SortField("timestamp",SortField.STRING,true)}));=0A=
=0AThe idea is to stuff the start and end into the query object. During sco=
ring, documents closer in timestamp to the start should score higher (exact=
 match to the start time should score the highest). =0AWhere would I start =
?=0A -- Extend (subclass ) BooleanQuery ?=0A -- Extend  BooleanScorer2 ?=0A=
 -- Extend DefaultSimilarity ?=0A=0AHow do I get a score the timestamp fiel=
d in the same range (normalized) as the term score? What precision can I ge=
t given that the timestamps are in milliseconds since 1970 ? That is, Jan 2=
3, 12:00:00:000 should score higher than Jan 23, 12:00:00:001 =0A=0AThanks=
=0A--=0Asolidguy=0A=0A=0A

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25659-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 23 19:44:27 2007
Return-Path: <java-user-return-25659-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 68371 invoked from network); 23 Jan 2007 19:44:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Jan 2007 19:44:26 -0000
Received: (qmail 73964 invoked by uid 500); 23 Jan 2007 19:44:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73935 invoked by uid 500); 23 Jan 2007 19:44:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73924 invoked by uid 99); 23 Jan 2007 19:44:26 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Jan 2007 11:44:26 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Jan 2007 11:44:17 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 3B7E55B76E; Tue, 23 Jan 2007 11:43:57 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 2ABED7F403
	for <java-user@lucene.apache.org>; Tue, 23 Jan 2007 11:43:57 -0800 (PST)
Date: Tue, 23 Jan 2007 11:43:57 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: RE: Low hits
In-Reply-To: <EBC8F228BDB35A4394D0BE53DA25248808A9A23C@SPMWB02L.luinternal.fortis.bank>
Message-ID: <Pine.LNX.4.58.0701231139420.17988@hal.rescomp.berkeley.edu>
References: <EBC8F228BDB35A4394D0BE53DA25248808A9A23C@SPMWB02L.luinternal.fortis.bank>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: When I index the whole website, then when I type a title of a document I
: have like 60 to 70 % as score.
: When I index only one page, then when I type the title I have like 2% as
: score.

I don't know what Regain is ... but this sounds like some issue between
how it reports the scores Lucene generates.  Lucene scores are not
percentages, they are either a "raw score" which is an absolute
calculation absed on the query boosts and constants in your Similarity
class -- raw scores can be any floating point number; or they are a "Hits
semi-nomalized score" which are garunteed to be between 0 and 1, but the
"best" matching document is only garunteed to have a score no greater then
1 -- it is not garunteed to have a score that *is* 1.

perhaps Regain is translating the Hits score as a percentage -- in which
case there is nothing wrong with the top matching document haveing a score
of "2%" ... it's still the top matching document.


I would suggest you start by asking some questions of the Regain user
community or Regain is a commercial product, ask their customer support
people aboutthe scores.


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25660-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 23 19:58:39 2007
Return-Path: <java-user-return-25660-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72033 invoked from network); 23 Jan 2007 19:58:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Jan 2007 19:58:38 -0000
Received: (qmail 3488 invoked by uid 500); 23 Jan 2007 19:58:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3451 invoked by uid 500); 23 Jan 2007 19:58:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3436 invoked by uid 99); 23 Jan 2007 19:58:38 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Jan 2007 11:58:38 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Jan 2007 11:58:29 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 0370F5B76E; Tue, 23 Jan 2007 11:58:08 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id E7BAD7F403
	for <java-user@lucene.apache.org>; Tue, 23 Jan 2007 11:58:08 -0800 (PST)
Date: Tue, 23 Jan 2007 11:58:08 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: RE: proximity and location scoring
In-Reply-To: <F43898E1E0300149BEB43F3A66423D6C0CD496DA@ex8.hostedexchange.local>
Message-ID: <Pine.LNX.4.58.0701231152530.17988@hal.rescomp.berkeley.edu>
References: <OFC9131E40.0EB7F8F4-ON8825726C.0066B0A9-8825726C.0068049A@il.ibm.com>
 <F43898E1E0300149BEB43F3A66423D6C0CD496DA@ex8.hostedexchange.local>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: What about implementing a scoring policy that computes the score based
: only on which word position the term is matched?

if you wrote your own Similarity class and used SpanFirst queries that
should be possible.  It's the same basic principle as a Similarity
that scores entirely by tf, except that instead of tf being the only
method in your similarity class that doesn't return a 0 or 1, your
sloppyFreq method would be the only method returning something
interesting.


the Explanation class will be your best friend when debugging your code.



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25661-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 23 21:39:38 2007
Return-Path: <java-user-return-25661-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5665 invoked from network); 23 Jan 2007 21:39:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Jan 2007 21:39:37 -0000
Received: (qmail 83390 invoked by uid 500); 23 Jan 2007 21:39:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83364 invoked by uid 500); 23 Jan 2007 21:39:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83353 invoked by uid 99); 23 Jan 2007 21:39:34 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Jan 2007 13:39:34 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Jan 2007 13:39:24 -0800
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1H9TM8-0000bt-3e
	for java-user@lucene.apache.org; Tue, 23 Jan 2007 13:39:04 -0800
Message-ID: <8550043.post@talk.nabble.com>
Date: Tue, 23 Jan 2007 13:39:04 -0800 (PST)
From: Vagelis Kotsonis <kotsonis.v@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: custom similarity based on tf but greater than 1.0
In-Reply-To: <906873.70236.qm@web50303.mail.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: kotsonis.v@gmail.com
References: <8440390.post@talk.nabble.com> <45AFF665.5010905@gmail.com> <8441331.post@talk.nabble.com> <45B00616.5030106@gmail.com> <8442395.post@talk.nabble.com> <45B01800.8090000@gmail.com> <8442711.post@talk.nabble.com> <45B01F35.8040605@gmail.com> <8442944.post@talk.nabble.com> <906873.70236.qm@web50303.mail.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Even if I get what a I want using the coord method, I would still have the
same problem becuase the similarity would return a number > 1 and
afterwards, the scoring mechanisms would normilize these number to something
<1.0

Thank you!
Vagelis


Otis Gospodnetic wrote:
> 
> Jumping in at this point and not having read other responses, I think the
> function that Vangelis is looking for is coord method in Similarity -
> that's for document terms/query terms overlap, I believe.
> 
> Otis
> 
> ----- Original Message ----
> From: Mark Miller <markrmiller@gmail.com>
> To: java-user@lucene.apache.org
> Sent: Thursday, January 18, 2007 5:36:21 PM
> Subject: Re: custom similarity based on tf but greater than 1.0
> 
> I just did the same thing. If you search the list you'll find the thread 
> where Hoss gave me the info you need. It really comes down to makeing a 
> FakeNormsIndexReader. The problem you are having is a result of the 
> field size normalization.
> 
> - mark
> 
> Vagelis Kotsonis wrote:
>> Hi all.
>> I am trying to make some experiments in an algorithm that scores results
>> by
>> counting how many words of the query submited are in a document.
>>
>> For example if i enter the query 
>>
>> A B D A
>>
>> The similarities I want to get for the documents follows:
>>
>> A A C F D (2-found A and D)
>> A B D S S A (3 - found A, B and D)
>> D D D (1 - only found D)
>>
>> I built a Similarity that actually sets everything's price as 1.0f except
>> tf
>>
>> The tf functions returns 1.0f if freq>0 and 0.0f else.
>>
>> I think that this change does count what I want, but when it comes to
>> show
>> the score, all are normalized. So, the greater similarity is equal to
>> 1.0f
>> and the others are lower than 1.0f
>>
>> How can I "deactivate" the score normalization?
>>
>> Thank you!
>>
>> I want to 
>>   
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/custom-similarity-based-on-tf-but-greater-than-1.0-tf3037071.html#a8550043
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25662-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 23 22:21:47 2007
Return-Path: <java-user-return-25662-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 23972 invoked from network); 23 Jan 2007 22:21:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Jan 2007 22:21:46 -0000
Received: (qmail 70070 invoked by uid 500); 23 Jan 2007 22:21:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70050 invoked by uid 500); 23 Jan 2007 22:21:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70038 invoked by uid 99); 23 Jan 2007 22:21:45 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Jan 2007 14:21:45 -0800
X-ASF-Spam-Status: No, hits=2.9 required=10.0
	tests=HTML_10_20,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [209.191.86.199] (HELO web82512.mail.mud.yahoo.com) (209.191.86.199)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 23 Jan 2007 14:21:36 -0800
Received: (qmail 55420 invoked by uid 60001); 23 Jan 2007 22:21:12 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=pacbell.net;
  h=X-YMail-OSG:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=Ob34ueT8aoxekBp0tuYBRYujXKKuDPRi5g8I5my88eLOhbwjANnuxZwAGmnUAS8FMMV8dTJ7u9KJonZxfbTeAwPfMvt4KOr8SbszOHMU2KT85//mPIntj8YOfV3QsgzQ0u9urDm/JqItKr+QKGWSVO+3CzaXn9/aYmI+rtmV/q8=;
X-YMail-OSG: tMkpEmQVM1nqflOUshKsEDDKTzF1QQlRfWr.EGGY5rz72LnM6MiM6O_CZD6TsAVMTb5KNTGDFfN5ywD6p4WKmqpWKg--
Received: from [71.146.41.200] by web82512.mail.mud.yahoo.com via HTTP; Tue, 23 Jan 2007 14:21:12 PST
Date: Tue, 23 Jan 2007 14:21:12 -0800 (PST)
From: Felix Litman <f_litman@pacbell.net>
Subject: Re: query parser syntax -- does "-" require no-space after it to act as "prohibitor"?
To: java-user@lucene.apache.org
In-Reply-To: <c68e39170701231004s5d6db500od847f452be32fd09@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-796756000-1169590872=:55172"
Content-Transfer-Encoding: 8bit
Message-ID: <741352.55172.qm@web82512.mail.mud.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

--0-796756000-1169590872=:55172
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit

Thank you. Lucene documentation is vague on this subject.

On the LIA-book -earch powered by Lucene it seems the "-" operator works as a prohibitor regardless of the number of spaces after the "-".   Still can't tell if this is a bug or by design.

A Nutch parser, however, seems to have changed that.  I checked two Nutch/Lucene implementations the web - Indeed.com and at Oregon State. Their parsers provide a more "standard" public web search behavior.  I.e. the "-" is treated as a minus only if no space between it and the search term.  Otherwise the "-"becomes just another search term in the query.

-Felix

Yonik Seeley <yonik@apache.org> wrote: On 1/23/07, Felix Litman  wrote:
> Does a special character lika a "-" prohibitor operator require no-space after it in order to work as a prohibitor?
>
>   Typically on the web, e.g. Google and others, the "-" operator works as a boolean prohibitor only when not followed by a space. Otherwise it is treated as just a dash query term.
>
>   But in our Lucene implementation the the "-" seem to be acting as a prohibitor even if there is space after it.   For example. in a query:  Sales +    service    , the 'service' term is excluded by Lucene.  (Same for the "+" operator.)
>
>   Is this space-treatment a bug or a standard Lucene query parser behavior?

I think this is expected, and changing it would be more confusing.  Consider:
If "-" is expected to find a dash, surely "-x" should find a dash
followed by an x?

If you want literals, put quotes around your terms...
"Sales +    service"

-Yonik

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



--0-796756000-1169590872=:55172--

From java-user-return-25663-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 23 22:43:02 2007
Return-Path: <java-user-return-25663-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30125 invoked from network); 23 Jan 2007 22:43:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Jan 2007 22:43:01 -0000
Received: (qmail 11107 invoked by uid 500); 23 Jan 2007 22:43:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11072 invoked by uid 500); 23 Jan 2007 22:43:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11061 invoked by uid 99); 23 Jan 2007 22:43:00 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Jan 2007 14:43:00 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Jan 2007 14:42:50 -0800
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1H9ULV-0000zu-Sd
	for java-user@lucene.apache.org; Tue, 23 Jan 2007 14:42:29 -0800
Message-ID: <8550786.post@talk.nabble.com>
Date: Tue, 23 Jan 2007 14:42:29 -0800 (PST)
From: Vagelis Kotsonis <kotsonis.v@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: custom similarity based on tf but greater than 1.0
In-Reply-To: <45B01F35.8040605@gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: kotsonis.v@gmail.com
References: <8440390.post@talk.nabble.com> <45AFF665.5010905@gmail.com> <8441331.post@talk.nabble.com> <45B00616.5030106@gmail.com> <8442395.post@talk.nabble.com> <45B01800.8090000@gmail.com> <8442711.post@talk.nabble.com> <45B01F35.8040605@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


So the normalization was made through Hits. That was something I didn't
understand. 
If I was alone I would search in Scorer and query classes. 

Thank you for this.

Finally I used the following:

final HitQueue hq = new HitQueue(results.length());
            searcher.search(qr, new HitCollector() {
                public void collect(int doc, float score) {
                    hq.insert(new ScoreDoc(doc, score));
                }
            });
            ScoreDoc[] scoreDocs = new ScoreDoc[hq.size()];
            for (int i = hq.size()-1; i >= 0; i--)	  // put docs in array
                scoreDocs[i] = (ScoreDoc)hq.pop();

(the HitQueue extend PriorityQueue of lucene library)

I didn't understand how to use the TopDocs, so I followed the above example
I found in the following link:
http://www.devdaily.com/java/jwarehouse/lucene-1.3-final/src/java/org/apache/lucene/search/IndexSearcher.java.shtml
http://www.devdaily.com/java/jwarehouse/lucene-1.3-final/src/java/org/apache/lucene/search/IndexSearcher.java.shtml 

The only problem I have is the case when the HitsQueue size must be
predefined...I don't know what to do then.
Currently I submit the same query twice, one for getting the size of the
results and one to use with the above code.

Thank you very much for your help!
Vagelis


markrmiller wrote:
> 
> Ahhhh...I brushed over your example too fast...looked like normal 
> counting to me...I see now what you mean. So OMIT_NORMS probably did 
> work. Are you getting the results through hits? Hits will normalize. Use 
> topdocs or a hitcollector.
> 
> - Mark
> 
> Vagelis Kotsonis wrote:
>> But i don't want to get the frequency of each term in the doc.
>>
>> what I want is 1 if the term exists in the doc and 0 if it doesn't. After
>> this, I want all thes 1s and 0s to be summed and give me a number to use
>> as
>> a score.
>>
>> If I set the TF value as 1 or 0, as I described above, I get the right
>> number, but this number is normalized to 1.0 and smaller numbers.
>>
>> It is the normalization that I want to avoid.
>>
>> Thanks again!
>> Vagelis
>>
>>
>> markrmiller wrote:
>>   
>>> Dont return 1 for tf...just return the tf straight with no 
>>> changes...return freq. For everything else return 1. After that 
>>> OMIT_NORMS should work. If you want to try a custom reader:
>>>
>>> public class FakeNormsIndexReader extends FilterIndexReader {
>>>     byte[] ones = SegmentReader.createFakeNorms(maxDoc());
>>>
>>>     public FakeNormsIndexReader(IndexReader in) {
>>>         super(in);
>>>     }
>>>     public synchronized byte[] norms(String field) throws IOException {
>>>           System.out.println("returning fake norms...");
>>>         return ones;
>>>     }
>>>
>>>     public synchronized void norms(String field, byte[] result, int 
>>> offset) {
>>>           System.out.println("writing fake norms...");
>>>         System.arraycopy(ones, 0, result, offset, maxDoc());
>>>     }
>>> }
>>>
>>> The beauty of this reader is that you can flip between it and your 
>>> custom similarity and Lucene's default implementations live on the same 
>>> index.
>>>
>>> - Mark
>>>
>>>
>>>     
>>
>>   
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/custom-similarity-based-on-tf-but-greater-than-1.0-tf3037071.html#a8550786
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25664-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 24 05:03:23 2007
Return-Path: <java-user-return-25664-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 41767 invoked from network); 24 Jan 2007 05:03:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Jan 2007 05:03:22 -0000
Received: (qmail 41373 invoked by uid 500); 24 Jan 2007 05:03:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41348 invoked by uid 500); 24 Jan 2007 05:03:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41332 invoked by uid 99); 24 Jan 2007 05:03:21 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Jan 2007 21:03:21 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of somnath.banerjee@gmail.com designates 66.249.92.172 as permitted sender)
Received: from [66.249.92.172] (HELO ug-out-1314.google.com) (66.249.92.172)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Jan 2007 21:03:12 -0800
Received: by ug-out-1314.google.com with SMTP id k40so72267ugc
        for <java-user@lucene.apache.org>; Tue, 23 Jan 2007 21:02:51 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=YrY1VjgB/gNhAObbOSVszCXIZPVzxlHg4DeHkkc8Lo9btl5k1HTBGW6RFtiX4woqMdHRrbLMKaD27zOyUSG5S+oboLRlP6/h8SedtZwLY45xBCVCGtSEcrR00x+dFS9EuA/5Rrh+1OL+x8eUc25DLaMzqxl3QhBvwlMDYKI+oWA=
Received: by 10.78.164.13 with SMTP id m13mr212777hue.1169614969967;
        Tue, 23 Jan 2007 21:02:49 -0800 (PST)
Received: by 10.78.90.8 with HTTP; Tue, 23 Jan 2007 21:02:49 -0800 (PST)
Message-ID: <17e2e1b50701232102h3d50accbx96959abdee31ed35@mail.gmail.com>
Date: Wed, 24 Jan 2007 10:32:49 +0530
From: "Somnath Banerjee" <somnath.banerjee@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Long Query Performance
In-Reply-To: <Pine.LNX.4.58.0701231125590.17988@hal.rescomp.berkeley.edu>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_132376_5141581.1169614969925"
References: <17e2e1b50701220334g4fdf6497h311e5844abb5f6f6@mail.gmail.com>
	 <45B4B6F7.7010100@curtin.com>
	 <17e2e1b50701220528h409c9faue1f7fa739a69f10@mail.gmail.com>
	 <Pine.LNX.4.58.0701221526050.2290@hal.rescomp.berkeley.edu>
	 <17e2e1b50701230520y66c4e147t744eddda122bda0a@mail.gmail.com>
	 <Pine.LNX.4.58.0701231125590.17988@hal.rescomp.berkeley.edu>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_132376_5141581.1169614969925
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Here is the code. Let me know if you need any clarification

// MaxConcepts is set to 100

long stTime = System.currentTimeMillis();

// bq is the Boolean query constructed out of the title of the query
document
TopDocs docs = searcher.search(bq, null, MaxConcepts);

// Store the title of the result documents in a HashTable
for(int i=0; i<MaxConcepts && i<docs .scoreDocs.length; i++) {

         String title = reader.document(docs
.scoreDocs[i].doc).get("title");
         encycloConcepts.put(title, docs .scoreDocs[i].score);  //
encycloConcepts
is a HashTable

}

System.out.println("Query Length: "+clauseCnt+" Time Taken: "+(
System.currentTimeMillis()-stTime));   // clauseCnt is the number of clause
in the query

On 1/24/07, Chris Hostetter <hossman_lucene@fucit.org> wrote:
>
>
> that's still doesn't tell us what you are doing -- "query time" can mean a
> lot of things ... are you using the Hits class? are you iterating over
> results? are you pulling out stored fields? are you sorting? are you using
> any Filters?
>
> questions about improving concrete performance can only be answered by
> looking at concrete code -- not vague discussions about the type of
> activity being performed.
>
>
>
>
> -Hoss
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_132376_5141581.1169614969925--

From java-user-return-25665-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 24 10:15:31 2007
Return-Path: <java-user-return-25665-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51000 invoked from network); 24 Jan 2007 10:15:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Jan 2007 10:15:31 -0000
Received: (qmail 85493 invoked by uid 500); 24 Jan 2007 10:15:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84531 invoked by uid 500); 24 Jan 2007 10:15:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 84519 invoked by uid 99); 24 Jan 2007 10:15:27 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Jan 2007 02:15:27 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [217.12.10.213] (HELO web26002.mail.ukl.yahoo.com) (217.12.10.213)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 24 Jan 2007 02:15:16 -0800
Received: (qmail 87898 invoked by uid 60001); 24 Jan 2007 10:14:55 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=O+oJL1viQGRn3gqmOC/mI8rUbMUtNd1CdBuhtfYeM8VLP0wCznHLjB1ZCsJhBYHOjmdxbirbYLqayAyx87H61BOP65SZt9cTZviXHe0FO4vwpjmKfjaDffPhrkiLsebMcU7ulb8Q0ABqGtEdjFFc8uIAutShUT/xQ56PN92q/ow=;
X-YMail-OSG: 9TqLZHAVM1nieKL.6hh83WmMVfJA7O65ibv.K.RjL6BWJ6CPabGhv4Qh_._x131vXcT6QfjUk8JEsYTj6q_Kfk_lT73xvjO9sF9baCqnr3vHjTPjM.fj_9AUPA7wwlZkIcOcA4cyOG9GXQIzlTW2.O_VBFczhusxhJxvTY6EFM7jidMSUnmjOpmu4w--
Received: from [193.36.230.96] by web26002.mail.ukl.yahoo.com via HTTP; Wed, 24 Jan 2007 10:14:55 GMT
X-Mailer: YahooMailRC/368.3 YahooMailWebService/0.6.132.7
Date: Wed, 24 Jan 2007 10:14:54 +0000 (GMT)
From: mark harwood <markharw00d@yahoo.co.uk>
Subject: Re: Long Query Performance
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable
Message-ID: <45127.87557.qm@web26002.mail.ukl.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Some thoughts=0A1) Very common words can have a large impact on performance=
. Use MoreLikeThis to build an optimised boolean query. It costs very littl=
e for this to determine how rare/common a term is compared to the cost of a=
 query having to iterate reader.termDocs for a common word. Try iterating a=
cross reader.termDocs(veryCommonTerm) for yourself - I just measured 10ms f=
or a single term in a 250k index. If your query must include a very common =
term turn it into a cached filter.=0A2) Any retrieval of document content i=
n your timed loop will be costly. Even if you are just reading the title fi=
eld Lucene may be pulling all of a larger "fullArticleContent" field off di=
sk. Look at the new features in the latest SVN version for partial read of =
a document's fields - it looks from your code like you only need the title =
from the results.=0A=0ACheers=0AMark=0A=0A----- Original Message ----=0AFro=
m: Somnath Banerjee <somnath.banerjee@gmail.com>=0ATo: java-user@lucene.apa=
che.org=0ASent: Wednesday, 24 January, 2007 5:02:49 AM=0ASubject: Re: Long =
Query Performance=0A=0AHere is the code. Let me know if you need any clarif=
ication=0A=0A// MaxConcepts is set to 100=0A=0Along stTime =3D System.curre=
ntTimeMillis();=0A=0A// bq is the Boolean query constructed out of the titl=
e of the query=0Adocument=0ATopDocs docs =3D searcher.search(bq, null, MaxC=
oncepts);=0A=0A// Store the title of the result documents in a HashTable=0A=
for(int i=3D0; i<MaxConcepts && i<docs .scoreDocs.length; i++) {=0A=0A     =
    String title =3D reader.document(docs=0A.scoreDocs[i].doc).get("title")=
;=0A         encycloConcepts.put(title, docs .scoreDocs[i].score);  //=0Aen=
cycloConcepts=0Ais a HashTable=0A=0A}=0A=0ASystem.out.println("Query Length=
: "+clauseCnt+" Time Taken: "+(=0ASystem.currentTimeMillis()-stTime));   //=
 clauseCnt is the number of clause=0Ain the query=0A=0AOn 1/24/07, Chris Ho=
stetter <hossman_lucene@fucit.org> wrote:=0A>=0A>=0A> that's still doesn't =
tell us what you are doing -- "query time" can mean a=0A> lot of things ...=
 are you using the Hits class? are you iterating over=0A> results? are you =
pulling out stored fields? are you sorting? are you using=0A> any Filters?=
=0A>=0A> questions about improving concrete performance can only be answere=
d by=0A> looking at concrete code -- not vague discussions about the type o=
f=0A> activity being performed.=0A>=0A>=0A>=0A>=0A> -Hoss=0A>=0A>=0A> -----=
----------------------------------------------------------------=0A> To uns=
ubscribe, e-mail: java-user-unsubscribe@lucene.apache.org=0A> For additiona=
l commands, e-mail: java-user-help@lucene.apache.org=0A>=0A>=0A=0A=0A=0A=0A=
=0A=09=09=0A___________________________________________________________ =0A=
Copy addresses and emails from any email account to Yahoo! Mail - quick, ea=
sy and free. http://uk.docs.yahoo.com/trueswitch2.html

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25666-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 24 10:29:46 2007
Return-Path: <java-user-return-25666-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56851 invoked from network); 24 Jan 2007 10:29:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Jan 2007 10:29:46 -0000
Received: (qmail 9525 invoked by uid 500); 24 Jan 2007 10:29:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9184 invoked by uid 500); 24 Jan 2007 10:29:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9171 invoked by uid 99); 24 Jan 2007 10:29:42 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Jan 2007 02:29:42 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [193.93.8.41] (HELO khmerdev.com) (193.93.8.41)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Jan 2007 02:29:32 -0800
X-AuthUser: fournaux@khmerdev.com
Received: from nicolas ([202.93.10.94]:56927)
	by khmerdev.com with [XMail 1.22 ESMTP Server]
	id <S607A8> for <java-user@lucene.apache.org> from <fournaux@khmerdev.com>;
	Wed, 24 Jan 2007 11:28:48 +0100
From: "Fournaux Nicolas" <fournaux@khmerdev.com>
To: <java-user@lucene.apache.org>
Subject: Lucene with Khmer ? (Language in cambodia)
Date: Wed, 24 Jan 2007 17:29:03 +0700
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_0019_01C73FDD.26FAEE50"
X-Mailer: Microsoft Office Outlook, Build 11.0.5510
Thread-Index: Acc/onffozRo37J2RA2iS1SHIgykew==
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2670
X-Virus-Checked: Checked by ClamAV on apache.org
Message-Id: <20070124102935.D198110FB000@herse.apache.org>

------=_NextPart_000_0019_01C73FDD.26FAEE50
Content-Type: text/plain;
	charset="windows-1250"
Content-Transfer-Encoding: quoted-printable

Good morning all (or good afternoon)

=20

I used Lucene many times before, to search text in French Or English. =
All
worked fine :-)

=20

But now I have a new challenge, I need to use Lucene with Khmer (Khmer =
is
the Cambodia=92s language, it looks like Thai or Indian)

=20

But it doesn=92t work, my code is well executed but it found no results, =
I
give you my code below

=20

I thought UTF-8 is 100% handled by Java and that we have =93nothing to =
do=94

=20

My code is working fine when I use English words.

=20

Thanks in advance for your help :-)

=20

Here is my source code :

=20

/************************************************************************=
***
*************************************/

=20

public class TestKhmer

{

=20

            public static void main(String[] args) throws Exception

            {          =20

Analyzer analyzer =3D new StandardAnalyzer();

Directory directory =3D =
FSDirectory.getDirectory("C:\\Folder\\indexLucene",
true);

IndexWriter iwriter =3D new IndexWriter(directory, analyzer, true);

=20

iwriter.setMaxFieldLength(25000);

           =20

                        Document doc =3D new Document();

                        String text =3D =
getContents("C:\\Folder\\file.txt");
// this file was saved as UTF-8 format by UltraEdit , when I open it I =
see
my Khmer charactere

=20

=20

                        Field field =3D new Field("text", text,
Field.Store.YES, Field.Index.TOKENIZED);

                        Field field2 =3D new Field("filename", =
"file.txt" ,
Field.Store.YES, Field.Index.TOKENIZED);

                        doc.add(field);

                        doc.add(field2);

                        iwriter.addDocument(doc);

=20

                        iwriter.close();

=20

                        // Now search the index:

                        IndexSearcher isearcher =3D new
IndexSearcher(directory);

                        String stringToSearch =3D
getContents("C:\\Folder\\dataToSearch.txt"); // my search string is =
located
in a text file, this file was saved as UTF-8 format by UltraEdit, when I
open it I see my Khmer charactere

                        String stringQuery =3D "text:" + stringToSearch =
;

                        QueryParser queryParser =3D new =
QueryParser("text" ,
analyzer);

                        Query query =3D queryParser.parse(stringQuery);

=20

                        Hits hits =3D isearcher.search(query);

=20

                        // Iterate through the results:

                        for (int i =3D 0; i < hits.length(); i++)

                         {

                                    Document hitDoc =3D hits.doc(i);

                                    System.out.println("Result : " +
hitDoc.get("filename"));

                        }

=20

                        isearcher.close();

                        directory.close();

            }

=20

private static String getContents(String path) throws Exception

            {

String line =3D null;

                        StringBuffer sb =3D new StringBuffer();

                        BufferedReader br;

=20

                        try

                        {

                                    br =3D new BufferedReader( new
InputStreamReader( new FileInputStream(path), "UTF-8")); // as I told =
you,
my file is in UTF-8 format

=20

while((line =3D br.readLine()) !=3D null)

{

    sb.append(line + "\n");

}

=20

                        } catch (Exception e)

{

=20

e.printStackTrace();

}

=20

                                    return sb.toString();

}

=20

}

=20

/************************************************************************=
***
*************************************/

=20

Best regards

=20

Nicolas


--=20
No virus found in this outgoing message.
Checked by AVG Free Edition.
Version: 7.1.410 / Virus Database: 268.17.8/649 - Release Date: =
1/23/2007
=20

------=_NextPart_000_0019_01C73FDD.26FAEE50--


From java-user-return-25667-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 24 10:35:59 2007
Return-Path: <java-user-return-25667-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60536 invoked from network); 24 Jan 2007 10:35:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Jan 2007 10:35:58 -0000
Received: (qmail 25885 invoked by uid 500); 24 Jan 2007 10:35:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25850 invoked by uid 500); 24 Jan 2007 10:35:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25663 invoked by uid 99); 24 Jan 2007 10:35:44 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Jan 2007 02:35:43 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [195.70.32.130] (HELO mail.interware.hu) (195.70.32.130)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Jan 2007 02:35:34 -0800
Received: from caracas-3238.adsl.interware.hu ([213.178.112.166] helo=mahakala.czinkos.hu)
	by mail.interware.hu with esmtp (Exim 4.52 #1 (Debian))
	id 1H9fTD-0008Qs-H4
	for <java-user@lucene.apache.org>; Wed, 24 Jan 2007 11:35:11 +0100
Received: from mahakala.czinkos.hu (mahakala.czinkos.hu [127.0.0.1])
	by mahakala.czinkos.hu (8.13.7/8.13.4) with ESMTP id l0OAYWmC012408
	for <java-user@lucene.apache.org>; Wed, 24 Jan 2007 11:34:32 +0100
Received: (from czinkos@localhost)
	by mahakala.czinkos.hu (8.13.7/8.13.7/Submit) id l0OAYV57012407
	for java-user@lucene.apache.org; Wed, 24 Jan 2007 11:34:31 +0100
Date: Wed, 24 Jan 2007 11:34:31 +0100
From: Zsolt Czinkos <czinkos@interware.hu>
To: java-user@lucene.apache.org
Subject: Re: Lucene with Khmer ? (Language in cambodia)
Message-ID: <20070124103431.GA12386@interware.hu>
References: <20070124102935.D198110FB000@herse.apache.org>
Mime-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Disposition: inline
Content-Transfer-Encoding: 8bit
In-Reply-To: <20070124102935.D198110FB000@herse.apache.org>
User-Agent: Mutt/1.4.2.1i
X-Virus-Checked: Checked by ClamAV on apache.org

Hello

>From the API:

"public class StandardAnalyzer
extends Analyzer

Filters StandardTokenizer with StandardFilter, LowerCaseFilter and
StopFilter, using a list of English stop words."


Are you sure that these filters won't filter your Khmer characters out?


Best,

czinkos


On Wed, Jan 24, 2007 at 05:29:03PM +0700, Fournaux Nicolas wrote:
> Good morning all (or good afternoon)
> 
>  
> 
> I used Lucene many times before, to search text in French Or English. All
> worked fine :-)
> 
>  
> 
> But now I have a new challenge, I need to use Lucene with Khmer (Khmer is
> the Cambodias language, it looks like Thai or Indian)
> 
>  
> 
> But it doesnt work, my code is well executed but it found no results, I
> give you my code below

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25668-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 24 10:49:47 2007
Return-Path: <java-user-return-25668-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65699 invoked from network); 24 Jan 2007 10:49:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Jan 2007 10:49:46 -0000
Received: (qmail 61500 invoked by uid 500); 24 Jan 2007 10:49:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61322 invoked by uid 500); 24 Jan 2007 10:49:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61311 invoked by uid 99); 24 Jan 2007 10:49:45 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Jan 2007 02:49:45 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [193.93.8.41] (HELO khmerdev.com) (193.93.8.41)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Jan 2007 02:49:35 -0800
X-AuthUser: fournaux@khmerdev.com
Received: from nicolas ([202.93.10.94]:62474)
	by khmerdev.com with [XMail 1.22 ESMTP Server]
	id <S607C4> for <java-user@lucene.apache.org> from <fournaux@khmerdev.com>;
	Wed, 24 Jan 2007 11:49:02 +0100
From: "Fournaux Nicolas" <fournaux@khmerdev.com>
To: <java-user@lucene.apache.org>
Subject: RE: Lucene with Khmer ? (Language in cambodia)
Date: Wed, 24 Jan 2007 17:49:17 +0700
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Office Outlook, Build 11.0.5510
Thread-Index: Acc/o2f5j6MljzdFRyCfjl/ipnx7oQAAbvtQ
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2670
In-Reply-To: <20070124103431.GA12386@interware.hu>
X-Virus-Checked: Checked by ClamAV on apache.org
Message-Id: <20070124104938.7C06710FB000@herse.apache.org>

One more thing I forgot to tell you ...

It is working with dotnet lucene :)

-----Message d'origine-----
De=A0: Zsolt Czinkos [mailto:czinkos@interware.hu]=20
Envoy=E9=A0: Wednesday, January 24, 2007 5:35 PM
=C0=A0: java-user@lucene.apache.org
Objet=A0: Re: Lucene with Khmer ? (Language in cambodia)

Hello

>From the API:

"public class StandardAnalyzer
extends Analyzer

Filters StandardTokenizer with StandardFilter, LowerCaseFilter and
StopFilter, using a list of English stop words."


Are you sure that these filters won't filter your Khmer characters out?


Best,

czinkos


On Wed, Jan 24, 2007 at 05:29:03PM +0700, Fournaux Nicolas wrote:
> Good morning all (or good afternoon)
>=20
> =20
>=20
> I used Lucene many times before, to search text in French Or English. =
All
> worked fine :-)
>=20
> =20
>=20
> But now I have a new challenge, I need to use Lucene with Khmer (Khmer =
is
> the Cambodia=92s language, it looks like Thai or Indian)
>=20
> =20
>=20
> But it doesn=92t work, my code is well executed but it found no =
results, I
> give you my code below

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org

--=20
No virus found in this incoming message.
Checked by AVG Free Edition.
Version: 7.1.410 / Virus Database: 268.17.8/649 - Release Date: =
1/23/2007
=20

--=20
No virus found in this outgoing message.
Checked by AVG Free Edition.
Version: 7.1.410 / Virus Database: 268.17.8/649 - Release Date: =
1/23/2007
=20


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25669-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 24 11:17:54 2007
Return-Path: <java-user-return-25669-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72594 invoked from network); 24 Jan 2007 11:17:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Jan 2007 11:17:53 -0000
Received: (qmail 8893 invoked by uid 500); 24 Jan 2007 11:17:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8769 invoked by uid 500); 24 Jan 2007 11:17:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 89448 invoked by uid 99); 24 Jan 2007 11:07:05 -0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of SRS0=kyvI=HB=hcmeyer.com=hannes@srs.kundenserver.de designates 212.227.126.187 as permitted sender)
Message-ID: <45B73DB5.4070600@hcmeyer.com>
Date: Wed, 24 Jan 2007 12:06:29 +0100
From: hannes <hannes@hcmeyer.com>
Reply-To:  java-user@lucene.apache.org
User-Agent: Thunderbird 1.5.0.9 (Windows/20061207)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Lucene with Khmer ? (Language in cambodia)
References: <20070124102935.D198110FB000@herse.apache.org> <20070124103431.GA12386@interware.hu>
In-Reply-To: <20070124103431.GA12386@interware.hu>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 8bit
X-Provags-ID: kundenserver.de abuse@kundenserver.de login:a42d25494c1e4d7d8aa0d52bc18a9cb2
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

I would suggest to perform a Test with your Analyzers, something like:

 >>StringReader reader = new StringReader(new String("your khmer text"));
 >>TokenStream stream = analyzer.tokenStream("content", reader);

Iterate through the TokenStream and check wether the analyzed Tokens are 
correct!

Thats the way I test my analyzers/tokenization/filtering without the 
overhead of indexing, search etc.

Bests

hannes

Zsolt Czinkos schrieb:
> Hello
>
> >From the API:
>
> "public class StandardAnalyzer
> extends Analyzer
>
> Filters StandardTokenizer with StandardFilter, LowerCaseFilter and
> StopFilter, using a list of English stop words."
>
>
> Are you sure that these filters won't filter your Khmer characters out?
>
>
> Best,
>
> czinkos
>
>
> On Wed, Jan 24, 2007 at 05:29:03PM +0700, Fournaux Nicolas wrote:
>   
>> Good morning all (or good afternoon)
>>
>>  
>>
>> I used Lucene many times before, to search text in French Or English. All
>> worked fine :-)
>>
>>  
>>
>> But now I have a new challenge, I need to use Lucene with Khmer (Khmer is
>> the Cambodias language, it looks like Thai or Indian)
>>
>>  
>>
>> But it doesnt work, my code is well executed but it found no results, I
>> give you my code below
>>     
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>   


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25670-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 24 13:05:00 2007
Return-Path: <java-user-return-25670-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 6801 invoked from network); 24 Jan 2007 13:04:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Jan 2007 13:04:59 -0000
Received: (qmail 97882 invoked by uid 500); 24 Jan 2007 13:04:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97816 invoked by uid 500); 24 Jan 2007 13:04:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97802 invoked by uid 99); 24 Jan 2007 13:04:53 -0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of grant.ingersoll@gmail.com designates 64.233.184.228 as permitted sender)
Received: from [64.233.184.228] (HELO wr-out-0506.google.com) (64.233.184.228)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Jan 2007 05:04:49 -0800
Received: by wr-out-0506.google.com with SMTP id i21so113807wra
        for <java-user@lucene.apache.org>; Wed, 24 Jan 2007 05:03:20 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=fd1OBcti8U37p4WvoUBl0TPEUVGvtbwsUcB6BsMw2y/2DyoomZzg71+h/QfMpDt5MLHAXFdSiqwXCPNHNoxABnf3DGen/idcXXZgw1voaHyGkpL34Byw63V3SCnU7IBrtJNkKA+EnI8Dznu6wXjRLvbAExFOrliqAzwoG5t2P6s=
Received: by 10.90.81.14 with SMTP id e14mr574988agb.1169643798731;
        Wed, 24 Jan 2007 05:03:18 -0800 (PST)
Received: from ?192.168.0.2? ( [74.229.189.244])
        by mx.google.com with ESMTP id 7sm1242752wrh.2007.01.24.05.03.17;
        Wed, 24 Jan 2007 05:03:18 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <20070124102935.D198110FB000@herse.apache.org>
References: <20070124102935.D198110FB000@herse.apache.org>
Content-Type: text/plain; charset=WINDOWS-1252; delsp=yes; format=flowed
Message-Id: <5247FB19-C4D3-471E-8D9B-89D04BF7454C@gmail.com>
Content-Transfer-Encoding: quoted-printable
From: Grant Ingersoll <grant.ingersoll@gmail.com>
Subject: Re: Lucene with Khmer ? (Language in cambodia)
Date: Wed, 24 Jan 2007 08:03:15 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org

Luke is your friend.  Use it to see what you have in your index.

On Jan 24, 2007, at 5:29 AM, Fournaux Nicolas wrote:

> Good morning all (or good afternoon)
>
>
>
> I used Lucene many times before, to search text in French Or =20
> English. All
> worked fine :-)
>
>
>
> But now I have a new challenge, I need to use Lucene with Khmer =20
> (Khmer is
> the Cambodia=92s language, it looks like Thai or Indian)
>
>
>
> But it doesn=92t work, my code is well executed but it found no =20
> results, I
> give you my code below
>
>
>
> I thought UTF-8 is 100% handled by Java and that we have =93nothing =20=

> to do=94
>
>
>
> My code is working fine when I use English words.
>
>
>
> Thanks in advance for your help :-)
>
>
>
> Here is my source code :
>
>
>
> /=20
> **********************************************************************=20=

> *****
> *************************************/
>
>
>
> public class TestKhmer
>
> {
>
>
>
>             public static void main(String[] args) throws Exception
>
>             {
>
> Analyzer analyzer =3D new StandardAnalyzer();
>
> Directory directory =3D FSDirectory.getDirectory("C:\\Folder\=20
> \indexLucene",
> true);
>
> IndexWriter iwriter =3D new IndexWriter(directory, analyzer, true);
>
>
>
> iwriter.setMaxFieldLength(25000);
>
>
>
>                         Document doc =3D new Document();
>
>                         String text =3D getContents("C:\\Folder\=20
> \file.txt");
> // this file was saved as UTF-8 format by UltraEdit , when I open =20
> it I see
> my Khmer charactere
>
>
>
>
>
>                         Field field =3D new Field("text", text,
> Field.Store.YES, Field.Index.TOKENIZED);
>
>                         Field field2 =3D new Field("filename", =20
> "file.txt" ,
> Field.Store.YES, Field.Index.TOKENIZED);
>
>                         doc.add(field);
>
>                         doc.add(field2);
>
>                         iwriter.addDocument(doc);
>
>
>
>                         iwriter.close();
>
>
>
>                         // Now search the index:
>
>                         IndexSearcher isearcher =3D new
> IndexSearcher(directory);
>
>                         String stringToSearch =3D
> getContents("C:\\Folder\\dataToSearch.txt"); // my search string is =20=

> located
> in a text file, this file was saved as UTF-8 format by UltraEdit, =20
> when I
> open it I see my Khmer charactere
>
>                         String stringQuery =3D "text:" + =20
> stringToSearch ;
>
>                         QueryParser queryParser =3D new QueryParser=20
> ("text" ,
> analyzer);
>
>                         Query query =3D =
queryParser.parse(stringQuery);
>
>
>
>                         Hits hits =3D isearcher.search(query);
>
>
>
>                         // Iterate through the results:
>
>                         for (int i =3D 0; i < hits.length(); i++)
>
>                          {
>
>                                     Document hitDoc =3D hits.doc(i);
>
>                                     System.out.println("Result : " +
> hitDoc.get("filename"));
>
>                         }
>
>
>
>                         isearcher.close();
>
>                         directory.close();
>
>             }
>
>
>
> private static String getContents(String path) throws Exception
>
>             {
>
> String line =3D null;
>
>                         StringBuffer sb =3D new StringBuffer();
>
>                         BufferedReader br;
>
>
>
>                         try
>
>                         {
>
>                                     br =3D new BufferedReader( new
> InputStreamReader( new FileInputStream(path), "UTF-8")); // as I =20
> told you,
> my file is in UTF-8 format
>
>
>
> while((line =3D br.readLine()) !=3D null)
>
> {
>
>     sb.append(line + "\n");
>
> }
>
>
>
>                         } catch (Exception e)
>
> {
>
>
>
> e.printStackTrace();
>
> }
>
>
>
>                                     return sb.toString();
>
> }
>
>
>
> }
>
>
>
> /=20
> **********************************************************************=20=

> *****
> *************************************/
>
>
>
> Best regards
>
>
>
> Nicolas
>
>
> --=20
> No virus found in this outgoing message.
> Checked by AVG Free Edition.
> Version: 7.1.410 / Virus Database: 268.17.8/649 - Release Date: =20
> 1/23/2007
>

------------------------------------------------------
Grant Ingersoll
http://www.grantingersoll.com/
http://www.paperoftheweek.com/



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25671-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 24 14:39:53 2007
Return-Path: <java-user-return-25671-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44273 invoked from network); 24 Jan 2007 14:39:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Jan 2007 14:39:52 -0000
Received: (qmail 77546 invoked by uid 500); 24 Jan 2007 14:39:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77483 invoked by uid 500); 24 Jan 2007 14:39:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77455 invoked by uid 99); 24 Jan 2007 14:39:38 -0000
X-ASF-Spam-Status: No, hits=3.9 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [202.86.4.31] (HELO web7612.mail.in.yahoo.com) (202.86.4.31)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 24 Jan 2007 06:39:35 -0800
Received: (qmail 81202 invoked by uid 60001); 24 Jan 2007 14:38:05 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.in;
  h=X-YMail-OSG:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=hEXTbDMgcYlBraOV8iR6d/UrwMxUm0CvNNpoynpi4SUUlgk8yONmzivodexhQX4ozW2L6yrgaLVwzZVosHmCIxAG20pos6e01ubw5bFvxx+aECubzAbCDB4Ar7e4EfyA7OqqiXvrML1dxZzhW9r9teYI7/Ie9Un8NRaCS9jI7Ao=;
X-YMail-OSG: 1bruARQVM1ki.JcRBFtrceq_JpaBZk91_HtrUoWbJt_SFdZHdF_zroYzgx34ee9oMnX1ZIoFAP7jS54MpYttNGRbotvM7cdct3PlTVKo5dlkFqdv_zEoYxlTD8hgRHr.
Received: from [220.225.42.205] by web7612.mail.in.yahoo.com via HTTP; Wed, 24 Jan 2007 14:38:05 GMT
Date: Wed, 24 Jan 2007 14:38:05 +0000 (GMT)
From: Mukesh Bhardwaj <sbmukesh@yahoo.co.in>
Subject: Exception while retrieving 100th element id in hits.id()
To: java-user@lucene.apache.org
In-Reply-To: <5247FB19-C4D3-471E-8D9B-89D04BF7454C@gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-476127415-1169649485=:81094"
Content-Transfer-Encoding: 8bit
Message-ID: <260429.81094.qm@web7612.mail.in.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

--0-476127415-1169649485=:81094
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit

Hi,
   
  I'm getting exception while retrieving 100th element id in hits.my sample code is given below:
  for(int i=0;<hits.length();i++) 
     {
      docID = hits.id(i);
       --   --  --
  } 
   
  Here my hits.length() is much greater than 100.The exception that I got is as follow:
  STACKTRACE: java.lang.ArrayIndexOutOfBoundsException: 100 &gt;= 100 
              at java.util.Vector.elementAt(Vector.java:431) 
              at org.apache.lucene.search.Hits.hitDoc(Hits.java:141) 
              at org.apache.lucene.search.Hits.id(Hits.java:116) 
   
  I'm using StandardAnalyzer for indexing and searching.If any one has any idea about the same pls let me know.
   
  Thanks
  --Mukesh  

 				
---------------------------------
 Heres a new way to find what you're looking for - Yahoo! Answers 
--0-476127415-1169649485=:81094--

From java-user-return-25672-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 24 14:47:52 2007
Return-Path: <java-user-return-25672-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47427 invoked from network); 24 Jan 2007 14:47:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Jan 2007 14:47:51 -0000
Received: (qmail 4352 invoked by uid 500); 24 Jan 2007 14:47:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4322 invoked by uid 500); 24 Jan 2007 14:47:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4311 invoked by uid 99); 24 Jan 2007 14:47:47 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Jan 2007 06:47:47 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [145.253.96.155] (HELO DMZ-Mailsrv1.jobsintime.de) (145.253.96.155)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Jan 2007 06:47:39 -0800
Received: from [192.168.200.46] (helo=smx1hhrz.jobsintime.de)
	by proxy.jobsintime.de with esmtp (Exim 4.43)
	id 1H9jSN-0000zj-Bz
	for java-user@lucene.apache.org; Wed, 24 Jan 2007 15:50:35 +0100
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: quoted-printable
Subject: modifier.optimize() causes Java heap space (OutOfMemoryException)
Date: Wed, 24 Jan 2007 15:48:00 +0100
Message-ID: <68D5F830DB106C408AE294A00A1645F0DDA16A@smx1hhrz.jobsintime.de>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: modifier.optimize() causes Java heap space (OutOfMemoryException)
thread-index: Acc/uIIiv7uUzmNBTYSEop/VGi+MRAACxOYg
From: "Marcel Morisse" <Marcel.Morisse@jobsintime.de>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Hey,

I have a problem with Lucene and because I am little bit inexperienced,
I would like to ask you.

I have a database with ca. 2500 items in it. I store these items in a
RAMIndex and try to rebuild it every 10 minutes. I use the same
procedure like updating a FSDirectory - deleting and adding again.

Everything works fine for the first time, but after 30 minutes the
method IndexModifier.optimize() causes a OutofMemoryException: Java heap
space

I tried to increase the java heap space, which is probably not the best
solution. So the exception waits a little bit longer (let's say 60
minutes), but then returns always during rebuilding.

So my questions: Is it possible to rebuild a RAMIndex in the same way
like a FSDirectory and if it so, do I have to pay regard to something?

I am using Lucene nightly build 2007-01-09 with a 512 MB RAM PC.

Thanks for any help


++++++++++
protected synchronized void rebuildRAMIndex() {
 IndexModifier modifier =3D new =
IndexModifier(_directory,_analyzer,false);
    			    		=09
    			int count =3D countAllObjects();
		        int maxResults =3D 100;
		        Document doc =3D new Document();
		        // load maxResults from Database
		        for (int firstResult =3D 0; firstResult < count;
firstResult +=3D maxResults) {
		  // get the items from a database with the method
findAllObjects
		 for (Iterator it =3D findAllObjects(firstResult,
maxResults)
		                 .iterator(); it.hasNext();){
             //convert the database items to Lucene Documents

		 doc =3D convertToDocument(it.next());
		 try{
     		 modifier.deleteDocuments(new Term("id",
doc.get("id")));	           =20
           	 }
           	 catch (Exception ignore)
           	 {
           	 }
           	 try{
             modifier.addDocument(doc);		           =20
           	 }
           	 catch (Exception ignore)
           	 {
          	 }=09
}   =20
}
modifier.optimize();
modifier.close();=20
}
+++++++

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25673-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 24 15:20:41 2007
Return-Path: <java-user-return-25673-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59023 invoked from network); 24 Jan 2007 15:20:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Jan 2007 15:20:39 -0000
Received: (qmail 62414 invoked by uid 500); 24 Jan 2007 15:20:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62259 invoked by uid 500); 24 Jan 2007 15:20:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62248 invoked by uid 99); 24 Jan 2007 15:20:35 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [66.111.4.28] (HELO out4.smtp.messagingengine.com) (66.111.4.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Jan 2007 07:20:32 -0800
Received: from out1.internal (unknown [10.202.2.149])
	by out1.messagingengine.com (Postfix) with ESMTP id 8C0BB94A0E
	for <java-user@lucene.apache.org>; Wed, 24 Jan 2007 10:16:55 -0500 (EST)
Received: from heartbeat1.messagingengine.com ([10.202.2.160])
  by out1.internal (MEProxy); Wed, 24 Jan 2007 10:16:55 -0500
X-Sasl-enc: kJfRvZ8KX/abAJyW47ENjZoA6AJJxtx2xr9TtmgJK3qF 1169651815
Received: from [10.17.4.90] (pool-72-70-33-214.bstnma.fios.verizon.net [72.70.33.214])
	by mail.messagingengine.com (Postfix) with ESMTP id 3E29B29440
	for <java-user@lucene.apache.org>; Wed, 24 Jan 2007 10:16:54 -0500 (EST)
Message-ID: <45B77855.3020300@mikemccandless.com>
Date: Wed, 24 Jan 2007 10:16:37 -0500
From: Michael McCandless <lucene@mikemccandless.com>
User-Agent: Thunderbird 1.5.0.9 (Windows/20061207)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: modifier.optimize() causes Java heap space (OutOfMemoryException)
References: <68D5F830DB106C408AE294A00A1645F0DDA16A@smx1hhrz.jobsintime.de>
In-Reply-To: <68D5F830DB106C408AE294A00A1645F0DDA16A@smx1hhrz.jobsintime.de>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Marcel Morisse wrote:

> I have a problem with Lucene and because I am little bit inexperienced,
> I would like to ask you.
> 
> I have a database with ca. 2500 items in it. I store these items in a
> RAMIndex and try to rebuild it every 10 minutes. I use the same
> procedure like updating a FSDirectory - deleting and adding again.
> 
> Everything works fine for the first time, but after 30 minutes the
> method IndexModifier.optimize() causes a OutofMemoryException: Java heap
> space
> 
> I tried to increase the java heap space, which is probably not the best
> solution. So the exception waits a little bit longer (let's say 60
> minutes), but then returns always during rebuilding.
> 
> So my questions: Is it possible to rebuild a RAMIndex in the same way
> like a FSDirectory and if it so, do I have to pay regard to something?
> 
> I am using Lucene nightly build 2007-01-09 with a 512 MB RAM PC.

This approach sounds fine to me, as long as you give the JVM enough heap
to store your index.

It does sound like there is an unexplained memory (reference) leak
somewhere.

A couple ideas to verify / try:

   * Is your overall set of documents increasing over time (during the
     30 or 60 minutes) or does it remain roughly around 2500?  If it's
     increasing with time it would be expected to require more RAM with
     time.

   * After each iteration try printing _directory.sizeInBytes() to see
     if the RAMDirectory itself is growing in its size (vs some other
     references somewhere not being freed).  This is only available in
     trunk.

   * Print the value you get back from the deleteDocuments() call.  This
     tells you how many docs were actually deleted.  If this is 0 then
     the delete call is doing nothing and that would explain increasing
     memory usage.

   * Where you are catching Exception & ignoring, try at least calling
     ignore.printStackTrace so we can see if you are hitting an
     exception?

   * Try this code on the last release (2.0.0) instead of the trunk
     build: does it still run out of memory?

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25674-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 24 15:43:45 2007
Return-Path: <java-user-return-25674-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65889 invoked from network); 24 Jan 2007 15:43:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Jan 2007 15:43:42 -0000
Received: (qmail 7525 invoked by uid 500); 24 Jan 2007 15:43:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7484 invoked by uid 500); 24 Jan 2007 15:43:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7451 invoked by uid 99); 24 Jan 2007 15:43:26 -0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of karl.wettin@gmail.com designates 66.249.92.174 as permitted sender)
Received: from [66.249.92.174] (HELO ug-out-1314.google.com) (66.249.92.174)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Jan 2007 07:43:22 -0800
Received: by ug-out-1314.google.com with SMTP id k40so200517ugc
        for <java-user@lucene.apache.org>; Wed, 24 Jan 2007 07:41:50 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=iyznAG3vGGOuIUZM9/7GuWSCtgBglsRx2c2x+/fjtfXtr85c2jE/6NycMtq1p1q4BJS8WmI4i3vSHJn8CTGzS+4oUGie2JWlCkTumKssEPVee4+eA1F91yk9EuF+6n4kYVIW4jQv/N7iInE1VzTkfQ+dfN64xfF8VbyKRtCXSdw=
Received: by 10.66.216.6 with SMTP id o6mr46172ugg.1169653310030;
        Wed, 24 Jan 2007 07:41:50 -0800 (PST)
Received: from ?192.168.0.131? ( [83.249.127.91])
        by mx.google.com with ESMTP id m1sm1009107ugc.2007.01.24.07.41.48;
        Wed, 24 Jan 2007 07:41:48 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <45B77855.3020300@mikemccandless.com>
References: <68D5F830DB106C408AE294A00A1645F0DDA16A@smx1hhrz.jobsintime.de> <45B77855.3020300@mikemccandless.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <2EE351BD-F734-43B6-9593-3BF5F139D696@gmail.com>
Content-Transfer-Encoding: 7bit
From: karl wettin <karl.wettin@gmail.com>
Subject: Re: modifier.optimize() causes Java heap space (OutOfMemoryException)
Date: Wed, 24 Jan 2007 16:41:09 +0100
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org


24 jan 2007 kl. 16.16 skrev Michael McCandless:

> A couple ideas to verify / try:

You can also use a profiler to see what is hogging the resources. I  
personally prefere JProfiler as it plugs right in to my IDE.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25675-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 24 16:36:36 2007
Return-Path: <java-user-return-25675-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85001 invoked from network); 24 Jan 2007 16:36:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Jan 2007 16:36:35 -0000
Received: (qmail 32145 invoked by uid 500); 24 Jan 2007 16:36:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32120 invoked by uid 500); 24 Jan 2007 16:36:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32109 invoked by uid 99); 24 Jan 2007 16:36:32 -0000
X-ASF-Spam-Status: No, hits=2.9 required=10.0
	tests=HTML_10_20,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of sairaj.sunil@gmail.com designates 66.249.92.174 as permitted sender)
Received: from [66.249.92.174] (HELO ug-out-1314.google.com) (66.249.92.174)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Jan 2007 08:36:30 -0800
Received: by ug-out-1314.google.com with SMTP id k40so214731ugc
        for <java-user@lucene.apache.org>; Wed, 24 Jan 2007 08:35:03 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=N08N9Nk0Q07Ke0bVdf/oH8+siwktNbQcx6J50hFL4e7VV6/Sz9c61o1+smwXbqyxRghG6me67dTmC5lySTLOPu+b16e9DSwe/L7lR+7/4Dt0CGlQ/x42+Sd5HA7CXAq2OOOQRpwq5M0C08zv0gzJk6mhYeJ8zbTv3XxPHakD89E=
Received: by 10.82.179.9 with SMTP id b9mr264404buf.1169655737339;
        Wed, 24 Jan 2007 08:22:17 -0800 (PST)
Received: by 10.82.157.16 with HTTP; Wed, 24 Jan 2007 08:22:13 -0800 (PST)
Message-ID: <fae460120701240822t745e747r139a7749bbda3774@mail.gmail.com>
Date: Wed, 24 Jan 2007 21:52:13 +0530
From: "Sairaj Sunil" <sairaj.sunil@gmail.com>
To: java-user@lucene.apache.org
Subject: Lucene Indexing
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_12899_28282953.1169655733466"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_12899_28282953.1169655733466
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi all,
Can you tell me the exact indexing algorithm used by Lucene. or give some
links to the documents that describe the algorithm used by lucene
Thanks in advance
-- 
Sairaj Sunil

------=_Part_12899_28282953.1169655733466--

From java-user-return-25676-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 24 16:50:13 2007
Return-Path: <java-user-return-25676-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89436 invoked from network); 24 Jan 2007 16:50:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Jan 2007 16:50:11 -0000
Received: (qmail 60638 invoked by uid 500); 24 Jan 2007 16:49:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60597 invoked by uid 500); 24 Jan 2007 16:49:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60575 invoked by uid 99); 24 Jan 2007 16:49:56 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Jan 2007 08:49:56 -0800
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=FROM_HAS_ULINE_NUMS
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [217.146.189.93] (HELO web23408.mail.ird.yahoo.com) (217.146.189.93)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 24 Jan 2007 08:49:46 -0800
Received: (qmail 61123 invoked by uid 60001); 24 Jan 2007 16:47:01 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.de;
  h=Message-ID:X-YMail-OSG:Received:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=6V1A1hKqQwmIJ7Dkyqsjwp4tj/aamzmwdjv5X0UK7342tUkv64n5LatlHFcPUGxm2FA3r0z8xcH87anDBByC4j8cBDjtsIS34xImS/9Yo3qTqGPGUgKiYYSW0jRY2pEhGZ4AAocWzOo6fj4yiAZaIQN0CbHAbGVL7HpxQIphF1Q=  ;
Message-ID: <20070124164701.61121.qmail@web23408.mail.ird.yahoo.com>
X-YMail-OSG: .aUdEc0VM1kFE0t3iKa6RuW0tusosBjd5Z4XKh7_
Received: from [132.230.129.134] by web23408.mail.ird.yahoo.com via HTTP; Wed, 24 Jan 2007 17:47:01 CET
Date: Wed, 24 Jan 2007 17:47:01 +0100 (CET)
From: Tomas Fischer <tomas_fischer99@yahoo.de>
Subject: Problems with highlighting
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

I build my index with the StandardAnalyzer and
two fields:
Field field= new Field("text", new
FileReader(fullPath));
field= new Field("filepath", fullPath, Store.YES,
Index.TOKENIZED);
	            

Now, I want to highlight the search result. 
First version is fine:

TokenStream stream = new
StandardAnalyzer().tokenStream("text", new
StringReader("foo bar"));

String fragment= highlighter.getBestFragment(stream,
"foo");

But 2nd version, reading text from file, fails with an
String index out of range:
TokenStream stream = new
StandardAnalyzer().tokenStream("text", new
FileReader(filePath));
			
Why does the second version not work? The api
mentioned only the java.io.Reader class, and both used
readers are subclasses of it.

Thanks.

Best regards,
Tomas




	
		
___________________________________________________________ 
Der frhe Vogel fngt den Wurm. Hier gelangen Sie zum neuen Yahoo! Mail: http://mail.yahoo.de

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25677-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 24 19:17:28 2007
Return-Path: <java-user-return-25677-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 46345 invoked from network); 24 Jan 2007 19:17:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Jan 2007 19:17:27 -0000
Received: (qmail 8106 invoked by uid 500); 24 Jan 2007 19:17:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8064 invoked by uid 500); 24 Jan 2007 19:17:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8053 invoked by uid 99); 24 Jan 2007 19:17:25 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Jan 2007 11:17:25 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of DORONC@il.ibm.com designates 195.212.29.150 as permitted sender)
Received: from [195.212.29.150] (HELO mtagate1.de.ibm.com) (195.212.29.150)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Jan 2007 11:17:14 -0800
Received: from d12nrmr1607.megacenter.de.ibm.com (d12nrmr1607.megacenter.de.ibm.com [9.149.167.49])
	by mtagate1.de.ibm.com (8.13.8/8.13.8) with ESMTP id l0OJGqHW123544
	for <java-user@lucene.apache.org>; Wed, 24 Jan 2007 19:16:52 GMT
Received: from d12av02.megacenter.de.ibm.com (d12av02.megacenter.de.ibm.com [9.149.165.228])
	by d12nrmr1607.megacenter.de.ibm.com (8.13.8/8.13.8/NCO v8.2) with ESMTP id l0OJGqLf2777254
	for <java-user@lucene.apache.org>; Wed, 24 Jan 2007 20:16:52 +0100
Received: from d12av02.megacenter.de.ibm.com (loopback [127.0.0.1])
	by d12av02.megacenter.de.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id l0OJGqGF019814
	for <java-user@lucene.apache.org>; Wed, 24 Jan 2007 20:16:52 +0100
Received: from d12mc102.megacenter.de.ibm.com (d12mc102.megacenter.de.ibm.com [9.149.167.114])
	by d12av02.megacenter.de.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id l0OJGqlf019809
	for <java-user@lucene.apache.org>; Wed, 24 Jan 2007 20:16:52 +0100
In-Reply-To: <260429.81094.qm@web7612.mail.in.yahoo.com>
Subject: Re: Exception while retrieving 100th element id in hits.id()
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 7.0 HF277 June 21, 2006
Message-ID: <OF3BC09075.645EF41D-ON8825726D.006797C3-8825726D.0069C309@il.ibm.com>
From: Doron Cohen <DORONC@il.ibm.com>
Date: Wed, 24 Jan 2007 11:15:12 -0800
X-MIMETrack: Serialize by Router on D12MC102/12/M/IBM(Release 7.0.2HF71 | November 3, 2006) at
 24/01/2007 21:16:52
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Mukesh,

Are you by a chance deleting docs in that loop, using
the same reader as the one used the searcher?
If so, using a separate reader for delete would fix that.

Also see related discussion -
http://www.nabble.com/Iterating-hits-tf1129306.html#a2955956

Regards,
Doron

Mukesh Bhardwaj <sbmukesh@yahoo.co.in> wrote on 24/01/2007 06:38:05:

> Hi,
>
>   I'm getting exception while retrieving 100th element id in hits.my
> sample code is given below:
>   for(int i=0;<hits.length();i++)
>      {
>       docID = hits.id(i);
>        --   --  --
>   }
>
>   Here my hits.length() is much greater than 100.The exception that
> I got is as follow:
>   STACKTRACE: java.lang.ArrayIndexOutOfBoundsException: 100 &gt;= 100
>               at java.util.Vector.elementAt(Vector.java:431)
>               at org.apache.lucene.search.Hits.hitDoc(Hits.java:141)
>               at org.apache.lucene.search.Hits.id(Hits.java:116)
>
>   I'm using StandardAnalyzer for indexing and searching.If any one
> has any idea about the same pls let me know.
>
>   Thanks
>   --Mukesh


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25678-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 24 19:55:56 2007
Return-Path: <java-user-return-25678-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59396 invoked from network); 24 Jan 2007 19:55:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Jan 2007 19:55:55 -0000
Received: (qmail 1215 invoked by uid 500); 24 Jan 2007 19:55:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 1178 invoked by uid 500); 24 Jan 2007 19:55:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 1167 invoked by uid 99); 24 Jan 2007 19:55:54 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Jan 2007 11:55:54 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [209.73.178.152] (HELO web60424.mail.yahoo.com) (209.73.178.152)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 24 Jan 2007 11:55:45 -0800
Received: (qmail 48990 invoked by uid 60001); 24 Jan 2007 19:55:23 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=PMsj6GKXrTrbctWVcbZXXCuRO6xnb8CUUr2SbgcJEQmAVMa8nXAemhY4eGCVqmc3yoArBtFuNy9MR1Tu0yaovWLhKxmTyhoACLuFvCMfwpi2lFuDniZe9UZ8TRLNJ9WSWch7BBuEOb8LZbJzrQ2EnFdsoWV0BFfE05CGaRQ5f38=;
X-YMail-OSG: uweYcVYVM1nOMtcujbFQRTkpSctGc9E6fISIreMpJS7kQglyncn2Lo8xZh9dsyPdvBnn2afP_zzbOoiOno2OKMi78_cxBDNwQmGY26fuzGNekkMksz_MwVUoSObqRO1vlvNbAf2O4xxo.8a3_e4XFGa_5Rxz0jBInAX5rticTNuPruseThWmIEPxoWvpTnqY_AR9bDoj
Received: from [155.69.172.213] by web60424.mail.yahoo.com via HTTP; Wed, 24 Jan 2007 11:55:23 PST
Date: Wed, 24 Jan 2007 11:55:23 -0800 (PST)
From: maureen tanuwidjaja <autumn_musique@yahoo.com>
Subject: Building Lucene index for XML document
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-756258630-1169668523=:48983"
Content-Transfer-Encoding: 8bit
Message-ID: <797593.48983.qm@web60424.mail.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

--0-756258630-1169668523=:48983
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit

Hi...
  I am a Final Year Undergrad.My Final year project is about search  engine for  XML Document..I am currently building this system  using Lucene.
  
  The example of XML element from an XML document :
  ----------------------------------------------
  <article>
      <body>
          <section>
          This is my first text
          </section>
         <p>
          This is my second text
        </p>
      </body>
  </article>
  ----------------------------------------------
  After the XML Document is parsed,I will get
  
  tag       : article
    value    : 
  
  tag       : article/body
    value    : 
  
  tag       : article/body/section
  value    : This is my first text
  
    tag       : article/body/p
    value    : This is my second text
  
  
  Constructing the Lucene Index, I treat : 
  1.the XML tag as the field
  2.the value of it as the terms to be indexed
  
  
  Before implementing this search engine,I have designed to build the index in such a way that every XML tag is converted using binary value,in order to reduce the size index and perhaps for faster searching.To illustrate:
  
  article will be converted to 0
  article/body will be converted to 0.0
  article/body/section will be converted to 0.0.0
    article/body/p will be converted to 0.0.1
  
  Now,because of using lucene for the implementation,i wonder wheter such conversion will still be useful for efficiency..I  wonder wheter inside the lucene index itself, such kind of conversion  or perhaps even further optimization is already done in order to reduce  the size index or for  faster searching.
  
  Can anyone give me some information?
  
  Really need help...Thanks a lot
  
  
  Regards, 
  
  Maureen
  
  
  
  
 
---------------------------------
Be a PS3 game guru.
Get your game face on with the latest PS3 news and previews at Yahoo! Games.
--0-756258630-1169668523=:48983--

From java-user-return-25679-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 24 21:13:23 2007
Return-Path: <java-user-return-25679-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 87579 invoked from network); 24 Jan 2007 21:13:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Jan 2007 21:13:23 -0000
Received: (qmail 38544 invoked by uid 500); 24 Jan 2007 21:13:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38467 invoked by uid 500); 24 Jan 2007 21:13:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38437 invoked by uid 99); 24 Jan 2007 21:13:19 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Jan 2007 13:13:19 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of rajiv.roopan@gmail.com designates 64.233.162.235 as permitted sender)
Received: from [64.233.162.235] (HELO nz-out-0506.google.com) (64.233.162.235)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Jan 2007 13:13:10 -0800
Received: by nz-out-0506.google.com with SMTP id i1so263912nzh
        for <java-user@lucene.apache.org>; Wed, 24 Jan 2007 13:12:50 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=RDpDfycpWmee64k6eoMtBQEUq/lUxuWFb18YVbnG3m8gfXNP2Ek3LNjTuPLbyANT/aX/TpdOSfcGQMYlUc4zQpPDapLeMT35H9I7hntHjVn6mPEDA7d+2IN8NALLJBacFxzP9eeoK/vJXh9ziSC2Kix5Cgw8doKyTl9EUW5tSwM=
Received: by 10.65.237.19 with SMTP id o19mr1998783qbr.1169673169793;
        Wed, 24 Jan 2007 13:12:49 -0800 (PST)
Received: by 10.65.23.2 with HTTP; Wed, 24 Jan 2007 13:12:49 -0800 (PST)
Message-ID: <5a8b64620701241312u73562396od3adf2e30cdc38c5@mail.gmail.com>
Date: Wed, 24 Jan 2007 16:12:49 -0500
From: "Rajiv Roopan" <rajiv.roopan@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene Indexing
In-Reply-To: <fae460120701240822t745e747r139a7749bbda3774@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_8195_3004705.1169673169754"
References: <fae460120701240822t745e747r139a7749bbda3774@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_8195_3004705.1169673169754
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

http://lucene.apache.org/java/docs/api/org/apache/lucene/search/Similarity.html


On 1/24/07, Sairaj Sunil <sairaj.sunil@gmail.com> wrote:
>
> Hi all,
> Can you tell me the exact indexing algorithm used by Lucene. or give some
> links to the documents that describe the algorithm used by lucene
> Thanks in advance
> --
> Sairaj Sunil
>
>

------=_Part_8195_3004705.1169673169754--

From java-user-return-25680-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 24 22:26:13 2007
Return-Path: <java-user-return-25680-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 9310 invoked from network); 24 Jan 2007 22:26:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Jan 2007 22:26:11 -0000
Received: (qmail 81866 invoked by uid 500); 24 Jan 2007 22:26:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81829 invoked by uid 500); 24 Jan 2007 22:26:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81818 invoked by uid 99); 24 Jan 2007 22:26:10 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Jan 2007 14:26:10 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [203.217.22.128] (HELO file1.syd.nuix.com.au) (203.217.22.128)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Jan 2007 14:26:02 -0800
Received: from [192.168.222.102] (demo1.syd.nuix.com.au [192.168.222.102])
	by file1.syd.nuix.com.au (Postfix) with ESMTP id 4DFAA4A814A
	for <java-user@lucene.apache.org>; Thu, 25 Jan 2007 09:26:28 +1100 (EST)
Message-ID: <45B7DE4B.7070508@nuix.com>
Date: Thu, 25 Jan 2007 09:31:39 +1100
From: Daniel Noll <daniel@nuix.com>
Organization: NUIX Pty Limited
User-Agent: Thunderbird 3.0a1 (Windows/20061207)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Exception while retrieving 100th element id in hits.id()
References: <OF3BC09075.645EF41D-ON8825726D.006797C3-8825726D.0069C309@il.ibm.com>
In-Reply-To: <OF3BC09075.645EF41D-ON8825726D.006797C3-8825726D.0069C309@il.ibm.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Doron Cohen wrote:
> Hi Mukesh,
> 
> Are you by a chance deleting docs in that loop, using
> the same reader as the one used the searcher?
> If so, using a separate reader for delete would fix that.
> 
> Also see related discussion -
> http://www.nabble.com/Iterating-hits-tf1129306.html#a2955956

Also another thing which causes this issue is using a filter whose 
results change each time (e.g. database dependent.)  In this situation 
you have to cache the filter bits by wrapping a CachingWrapperFilter 
around it.

Daniel


-- 
Daniel Noll

Nuix Pty Ltd
Suite 79, 89 Jones St, Ultimo NSW 2007, Australia    Ph: +61 2 9280 0699
Web: http://nuix.com/                               Fax: +61 2 9212 6902

This message is intended only for the named recipient. If you are not
the intended recipient you are notified that disclosing, copying,
distributing or taking any action in reliance on the contents of this
message or attachment is strictly prohibited.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25681-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 24 22:30:36 2007
Return-Path: <java-user-return-25681-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 11319 invoked from network); 24 Jan 2007 22:30:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Jan 2007 22:30:35 -0000
Received: (qmail 92239 invoked by uid 500); 24 Jan 2007 22:30:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92204 invoked by uid 500); 24 Jan 2007 22:30:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92191 invoked by uid 99); 24 Jan 2007 22:30:35 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Jan 2007 14:30:35 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [203.217.22.128] (HELO file1.syd.nuix.com.au) (203.217.22.128)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Jan 2007 14:30:26 -0800
Received: from [192.168.222.102] (host102.syd.nuix.com.au [192.168.222.102])
	by file1.syd.nuix.com.au (Postfix) with ESMTP id 645164A814A
	for <java-user@lucene.apache.org>; Thu, 25 Jan 2007 09:30:52 +1100 (EST)
Message-ID: <45B7DF53.4020008@nuix.com>
Date: Thu, 25 Jan 2007 09:36:03 +1100
From: Daniel Noll <daniel@nuix.com>
Organization: NUIX Pty Limited
User-Agent: Thunderbird 3.0a1 (Windows/20061207)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Building Lucene index for XML document
References: <797593.48983.qm@web60424.mail.yahoo.com>
In-Reply-To: <797593.48983.qm@web60424.mail.yahoo.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

maureen tanuwidjaja wrote:

> Before implementing this search engine,I have designed to build the
> index in such a way that every XML tag is converted using binary
> value,in order to reduce the size index and perhaps for faster
> searching.To illustrate:
>
>   article will be converted to 0
>   article/body will be converted to 0.0
>   article/body/section will be converted to 0.0.0
>     article/body/p will be converted to 0.0.1
>   
> Now,because of using lucene for the implementation,i wonder wheter
> such conversion will still be useful for efficiency..I wonder wheter
> inside the lucene index itself, such kind of conversion or perhaps even
> further optimization is already done in order to reduce the size index
> or for faster searching.

Indeed you don't need to do this because each field stores its name as 
an integer lookup already.  See SegmentTermEnum / FieldInfos.

Daniel

-- 
Daniel Noll

Nuix Pty Ltd
Suite 79, 89 Jones St, Ultimo NSW 2007, Australia    Ph: +61 2 9280 0699
Web: http://nuix.com/                               Fax: +61 2 9212 6902

This message is intended only for the named recipient. If you are not
the intended recipient you are notified that disclosing, copying,
distributing or taking any action in reliance on the contents of this
message or attachment is strictly prohibited.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25682-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 25 08:59:26 2007
Return-Path: <java-user-return-25682-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67644 invoked from network); 25 Jan 2007 08:59:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Jan 2007 08:59:24 -0000
Received: (qmail 11995 invoked by uid 500); 25 Jan 2007 08:59:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11956 invoked by uid 500); 25 Jan 2007 08:59:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11945 invoked by uid 99); 25 Jan 2007 08:59:23 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Jan 2007 00:59:23 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [203.199.37.133] (HELO rediff.co.in) (203.199.37.133)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 25 Jan 2007 00:59:15 -0800
Received: (qmail 2675 invoked from network); 25 Jan 2007 08:56:01 -0000
Received: from unknown (HELO bhavin) (172.16.3.213)
  by mailserver with SMTP; 25 Jan 2007 08:56:01 -0000
Message-ID: <002b01c74061$65759ac0$d50310ac@bhavin>
Reply-To: "Bhavin Pandya" <bhavinp@rediff.co.in>
From: "Bhavin Pandya" <bhavinp@rediff.co.in>
To: <java-user@lucene.apache.org>
Subject: lucene with dbx reader
Date: Thu, 25 Jan 2007 14:45:42 +0530
Organization: rediff.com
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_0028_01C7408F.7D3450B0"
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.2180
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2180
X-Virus-Checked: Checked by ClamAV on apache.org

------=_NextPart_000_0028_01C7408F.7D3450B0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

Hi guys,

Can i open outlook express mails ( dbx file) in java and index the mails =
using lucene.. ?

Do anybody aware of such dbx reader ???

I tried one "mstos" but its not working properly...

- Bhavin pandya
------=_NextPart_000_0028_01C7408F.7D3450B0--


From java-user-return-25683-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 25 09:01:15 2007
Return-Path: <java-user-return-25683-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 68573 invoked from network); 25 Jan 2007 09:01:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Jan 2007 09:01:14 -0000
Received: (qmail 15736 invoked by uid 500); 25 Jan 2007 09:01:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15711 invoked by uid 500); 25 Jan 2007 09:01:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15700 invoked by uid 99); 25 Jan 2007 09:01:13 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Jan 2007 01:01:13 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [209.73.178.149] (HELO web60421.mail.yahoo.com) (209.73.178.149)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 25 Jan 2007 01:01:03 -0800
Received: (qmail 81365 invoked by uid 60001); 25 Jan 2007 09:00:42 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=yU5dDUpc2eiV/y7QicdUaWu5zGpsxyZnFKUCwd7KuNfB2DkwXYnzCqKSTN8yyEqqjf/Pj3nyTi/efMTDA59A4XooHrII4vECfwXAZG6ZLX9u09xOJeVUGvXg5dXntqLEb/dRnlPYGnNKBYowYTrOs9EhbUYx25kTLJE6pGpetPc=  ;
Message-ID: <20070125090042.81363.qmail@web60421.mail.yahoo.com>
X-YMail-OSG: AYBVa_MVM1lvsMIxQF98RFGOTF7eLFKvruAbR9Wt1qy0DafHkM.UwbBXsR1sAkbyScm3wTPdokZQRQX0zw1tIFI4CU_47PqxILkF4w3l.G6e9n8.mAwTg9MmXOk.m4rBgWdyixjZKUkNB83.bC3VNdv.XuY4_893DjsccM6pV.ZEtDARuUi5pkAJ9yReWAnOV26RZhLL
Received: from [155.69.188.222] by web60421.mail.yahoo.com via HTTP; Thu, 25 Jan 2007 01:00:42 PST
Date: Thu, 25 Jan 2007 01:00:42 -0800 (PST)
From: maureen tanuwidjaja <autumn_musique@yahoo.com>
Subject: Re: Building Lucene index for XML document
To: java-user@lucene.apache.org
In-Reply-To: <45B7DF53.4020008@nuix.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-1446518200-1169715642=:76818"
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

--0-1446518200-1169715642=:76818
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit


 
  Thanks a lot Daniel :)
   
  Regards,
  Maureen

Daniel Noll <daniel@nuix.com> wrote:
  maureen tanuwidjaja wrote:

> Before implementing this search engine,I have designed to build the
> index in such a way that every XML tag is converted using binary
> value,in order to reduce the size index and perhaps for faster
> searching.To illustrate:
>
> article will be converted to 0
> article/body will be converted to 0.0
> article/body/section will be converted to 0.0.0
> article/body/p will be converted to 0.0.1
> 
> Now,because of using lucene for the implementation,i wonder wheter
> such conversion will still be useful for efficiency..I wonder wheter
> inside the lucene index itself, such kind of conversion or perhaps even
> further optimization is already done in order to reduce the size index
> or for faster searching.

Indeed you don't need to do this because each field stores its name as 
an integer lookup already. See SegmentTermEnum / FieldInfos.

Daniel

-- 
Daniel Noll

Nuix Pty Ltd
Suite 79, 89 Jones St, Ultimo NSW 2007, Australia Ph: +61 2 9280 0699
Web: http://nuix.com/ Fax: +61 2 9212 6902

This message is intended only for the named recipient. If you are not
the intended recipient you are notified that disclosing, copying,
distributing or taking any action in reliance on the contents of this
message or attachment is strictly prohibited.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



 
---------------------------------
Bored stiff? Loosen up...
Download and play hundreds of games for free on Yahoo! Games.
--0-1446518200-1169715642=:76818--

From java-user-return-25684-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 25 09:04:39 2007
Return-Path: <java-user-return-25684-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70297 invoked from network); 25 Jan 2007 09:04:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Jan 2007 09:04:38 -0000
Received: (qmail 19819 invoked by uid 500); 25 Jan 2007 09:04:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18894 invoked by uid 500); 25 Jan 2007 09:04:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18883 invoked by uid 99); 25 Jan 2007 09:04:37 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Jan 2007 01:04:37 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [202.86.4.23] (HELO web7604.mail.in.yahoo.com) (202.86.4.23)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 25 Jan 2007 01:04:27 -0800
Received: (qmail 29374 invoked by uid 60001); 25 Jan 2007 09:04:03 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.in;
  h=X-YMail-OSG:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=cIcd/4ylEmqPoMnLHr3VTvRhNQyKSTCTjr4fL+LTKIEUKj1oNE23rTSB+W/kN/BvIJH9hcMS1HxwdIJdPN/yp6TsSn0EhDQ3lv/JfUN1F7kFTwIqLtENYAHDgvNrHREuPAGzPctoWAleKyKWunnoloLN/ZuHioJGrBJ5Q8qvxGk=;
X-YMail-OSG: _oMq1PcVM1mjJXyK6qKV7BHJqpVDG0bT861sqpec4LxWlJuYB9iopUo0yTrrww8se43Igg26VBbtBn.iXRd2qVnWTP41Frx1sx6OWXMhl0sBQRQERLvZtRJtTBhT30.Qh85G4GedJVVyybBtaBMMVXvP5EuVibKUVnU-
Received: from [220.225.42.205] by web7604.mail.in.yahoo.com via HTTP; Thu, 25 Jan 2007 09:04:03 GMT
Date: Thu, 25 Jan 2007 09:04:03 +0000 (GMT)
From: Mukesh Bhardwaj <sbmukesh@yahoo.co.in>
Subject: Re: Exception while retrieving 100th element id in hits.id()
To: java-user@lucene.apache.org
In-Reply-To: <OF3BC09075.645EF41D-ON8825726D.006797C3-8825726D.0069C309@il.ibm.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-825843953-1169715843=:28966"
Content-Transfer-Encoding: 8bit
Message-ID: <448420.28966.qm@web7604.mail.in.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

--0-825843953-1169715843=:28966
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit

Thanks Doron,you are right ,I'm performing delete operation.
   

Doron Cohen <DORONC@il.ibm.com> wrote:
  Hi Mukesh,

Are you by a chance deleting docs in that loop, using
the same reader as the one used the searcher?
If so, using a separate reader for delete would fix that.

Also see related discussion -
http://www.nabble.com/Iterating-hits-tf1129306.html#a2955956

Regards,
Doron

Mukesh Bhardwaj wrote on 24/01/2007 06:38:05:

> Hi,
>
> I'm getting exception while retrieving 100th element id in hits.my
> sample code is given below:
> for(int i=0;> {
> docID = hits.id(i);
> -- -- --
> }
>
> Here my hits.length() is much greater than 100.The exception that
> I got is as follow:
> STACKTRACE: java.lang.ArrayIndexOutOfBoundsException: 100 >= 100
> at java.util.Vector.elementAt(Vector.java:431)
> at org.apache.lucene.search.Hits.hitDoc(Hits.java:141)
> at org.apache.lucene.search.Hits.id(Hits.java:116)
>
> I'm using StandardAnalyzer for indexing and searching.If any one
> has any idea about the same pls let me know.
>
> Thanks
> --Mukesh


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



 				
---------------------------------
 Heres a new way to find what you're looking for - Yahoo! Answers 
--0-825843953-1169715843=:28966--

From java-user-return-25685-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 25 09:05:45 2007
Return-Path: <java-user-return-25685-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71256 invoked from network); 25 Jan 2007 09:05:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Jan 2007 09:05:44 -0000
Received: (qmail 21347 invoked by uid 500); 25 Jan 2007 09:05:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21323 invoked by uid 500); 25 Jan 2007 09:05:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21312 invoked by uid 99); 25 Jan 2007 09:05:44 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Jan 2007 01:05:44 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [202.86.4.31] (HELO web7612.mail.in.yahoo.com) (202.86.4.31)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 25 Jan 2007 01:05:32 -0800
Received: (qmail 69571 invoked by uid 60001); 25 Jan 2007 09:05:09 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.in;
  h=X-YMail-OSG:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=29HKlFhR4NZF2yeoYC6wyppRM4lRVAGG91HUNu6TFyVyUDCOh0+c7rDEHiALcepdpRvQgDE4ql5lDhKIYKQeFk7J1uVJHuP6xqYgTHWFrovzo1B/ORbe1gxpmC1LA/vX1Vr7ekaNn+sUuGNoSD7fqXk/6voojDX0D1GidD3SU6E=;
X-YMail-OSG: aQ5aWdMVM1khPsPnKuhz0Q8luXcGbdusUk7hBzhWPMFB3xOVYrhbrxtXKI7apvY5Lg--
Received: from [220.225.42.205] by web7612.mail.in.yahoo.com via HTTP; Thu, 25 Jan 2007 09:05:09 GMT
Date: Thu, 25 Jan 2007 09:05:09 +0000 (GMT)
From: Mukesh Bhardwaj <sbmukesh@yahoo.co.in>
Subject: Re: Exception while retrieving 100th element id in hits.id()
To: java-user@lucene.apache.org
In-Reply-To: <OF3BC09075.645EF41D-ON8825726D.006797C3-8825726D.0069C309@il.ibm.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-1680095774-1169715909=:69092"
Content-Transfer-Encoding: 8bit
Message-ID: <259515.69092.qm@web7612.mail.in.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

--0-1680095774-1169715909=:69092
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit

Thanks Doron,you are right ,I'm performing delete operation.
  

Doron Cohen <DORONC@il.ibm.com> wrote:
  Hi Mukesh,

Are you by a chance deleting docs in that loop, using
the same reader as the one used the searcher?
If so, using a separate reader for delete would fix that.

Also see related discussion -
http://www.nabble.com/Iterating-hits-tf1129306.html#a2955956

Regards,
Doron

Mukesh Bhardwaj wrote on 24/01/2007 06:38:05:

> Hi,
>
> I'm getting exception while retrieving 100th element id in hits.my
> sample code is given below:
> for(int i=0;> {
> docID = hits.id(i);
> -- -- --
> }
>
> Here my hits.length() is much greater than 100.The exception that
> I got is as follow:
> STACKTRACE: java.lang.ArrayIndexOutOfBoundsException: 100 >= 100
> at java.util.Vector.elementAt(Vector.java:431)
> at org.apache.lucene.search.Hits.hitDoc(Hits.java:141)
> at org.apache.lucene.search.Hits.id(Hits.java:116)
>
> I'm using StandardAnalyzer for indexing and searching.If any one
> has any idea about the same pls let me know.
>
> Thanks
> --Mukesh


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



 				
---------------------------------
 Heres a new way to find what you're looking for - Yahoo! Answers 
--0-1680095774-1169715909=:69092--

From java-user-return-25686-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 25 09:09:50 2007
Return-Path: <java-user-return-25686-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73979 invoked from network); 25 Jan 2007 09:09:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Jan 2007 09:09:48 -0000
Received: (qmail 30860 invoked by uid 500); 25 Jan 2007 09:09:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30826 invoked by uid 500); 25 Jan 2007 09:09:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30815 invoked by uid 99); 25 Jan 2007 09:09:48 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Jan 2007 01:09:48 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of karl.wettin@gmail.com designates 66.249.92.171 as permitted sender)
Received: from [66.249.92.171] (HELO ug-out-1314.google.com) (66.249.92.171)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Jan 2007 01:09:37 -0800
Received: by ug-out-1314.google.com with SMTP id k40so407988ugc
        for <java-user@lucene.apache.org>; Thu, 25 Jan 2007 01:09:14 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:in-reply-to:references:mime-version:x-priority:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=b6yWjXEVFS11QhrD1PBbuKouTLIQ5L54Tco2KZiJuGvX+2bvXENPRGTeXthC+yQkZzlcOL5etH0eLHjh4LcfOhLoHgjVtePTiCh3+l/Xn3e9SqQvrAfu5ozdaEaGPtqbtxZjOHHJ7BohLw5WIY1g36PrdhYdc17lzpPRGCQZNfA=
Received: by 10.67.103.7 with SMTP id f7mr2420999ugm.1169716154100;
        Thu, 25 Jan 2007 01:09:14 -0800 (PST)
Received: from ?192.168.0.131? ( [83.249.127.91])
        by mx.google.com with ESMTP id q1sm2438980uge.2007.01.25.01.09.13;
        Thu, 25 Jan 2007 01:09:13 -0800 (PST)
In-Reply-To: <002b01c74061$65759ac0$d50310ac@bhavin>
References: <002b01c74061$65759ac0$d50310ac@bhavin>
Mime-Version: 1.0 (Apple Message framework v752.3)
X-Priority: 3
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <0B20478B-1866-448E-BEFB-DB5C0EF3F5CB@gmail.com>
Content-Transfer-Encoding: 7bit
From: karl wettin <karl.wettin@gmail.com>
Subject: Re: lucene with dbx reader
Date: Thu, 25 Jan 2007 10:08:33 +0100
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org


25 jan 2007 kl. 10.15 skrev Bhavin Pandya:

> Can i open outlook express mails ( dbx file) in java and index the  
> mails using lucene.. ?

Not out of the box, sorry.

But I think Outlook express files are nothing but OLE2 documents. If  
that is true, then you could use the POIFS part of Jakarta POI to  
read them. If that is not the case, search the POI formums or pop the  
question in there.

-- 
karl



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25687-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 25 09:12:57 2007
Return-Path: <java-user-return-25687-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75261 invoked from network); 25 Jan 2007 09:12:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Jan 2007 09:12:56 -0000
Received: (qmail 33709 invoked by uid 500); 25 Jan 2007 09:12:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33674 invoked by uid 500); 25 Jan 2007 09:12:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33663 invoked by uid 99); 25 Jan 2007 09:12:56 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Jan 2007 01:12:56 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [209.73.178.155] (HELO web60412.mail.yahoo.com) (209.73.178.155)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 25 Jan 2007 01:12:46 -0800
Received: (qmail 29604 invoked by uid 60001); 25 Jan 2007 09:12:25 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=BjQwMZj5HKphQijnpt1xYEUoqKSPHFgVATYLZ2sAKNxjKKJlYZcgeVIHKBuNQmNWyRSep3LFlEVqaCgXN1xKCaIzPtK3tbMpprznkiwVseCtDPQJ2cVC/Z2wpT/U1ycyPXYNrUdIUSK2fmczB7rXCcpxm5/Tiq6J6ATsGVSMzWo=;
X-YMail-OSG: pIFuyV4VM1meJXJ3Ahc.XfRIV7x1DYIhf7.DAP1yNhQID0txaKQTSv8IKD7lsPxGGJdxI9b0qhUgJ1PTbAIgpZ16AI3d.PFinirtlGOK1icGpSLHCahUF7nQgSwIToiVpRHMdRl7F8VcUMJPr_85
Received: from [155.69.188.222] by web60412.mail.yahoo.com via HTTP; Thu, 25 Jan 2007 01:12:25 PST
Date: Thu, 25 Jan 2007 01:12:25 -0800 (PST)
From: maureen tanuwidjaja <autumn_musique@yahoo.com>
Subject:  Lock obtain timed out SimpleFSLock
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-1033102452-1169716345=:23679"
Content-Transfer-Encoding: 8bit
Message-ID: <70147.23679.qm@web60412.mail.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

--0-1033102452-1169716345=:23679
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit

  Hi,
  I am indexing thousands of XML document,then it stops after indexing for about 7 hrs
   
  ...
  Indexing C:\sweetpea\wikipedia_xmlfiles\part-0\37003.xml
  Indexing C:\sweetpea\wikipedia_xmlfiles\part-0\37004.xml
  Indexing C:\sweetpea\wikipedia_xmlfiles\part-0\37008.xml
  Indexing C:\sweetpea\wikipedia_xmlfiles\part-0\3701.xml
  Indexing C:\sweetpea\wikipedia_xmlfiles\part-0\37010.xml
  Indexing C:\sweetpea\wikipedia_xmlfiles\part-0\37015.xml
  Indexing C:\sweetpea\wikipedia_xmlfiles\part-0\3702.xml
  Indexing C:\sweetpea\wikipedia_xmlfiles\part-0\37022.xml
  Indexing C:\sweetpea\wikipedia_xmlfiles\part-0\37027.xml
  java.io.IOException: Lock obtain timed out: SimpleFSLock@C:\sweetpea\dual_index\DI\write.lock
  java.lang.NullPointerException
   
  Can anyone suggest how to overcome this lock time out error?
   
  Thanks and Regards,
  Maureen
   
   

 
---------------------------------
Sucker-punch spam with award-winning protection.
 Try the free Yahoo! Mail Beta.
--0-1033102452-1169716345=:23679--

From java-user-return-25688-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 25 09:31:59 2007
Return-Path: <java-user-return-25688-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85894 invoked from network); 25 Jan 2007 09:31:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Jan 2007 09:31:58 -0000
Received: (qmail 60488 invoked by uid 500); 25 Jan 2007 09:31:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60455 invoked by uid 500); 25 Jan 2007 09:31:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60444 invoked by uid 99); 25 Jan 2007 09:31:56 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Jan 2007 01:31:56 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [209.73.178.151] (HELO web60423.mail.yahoo.com) (209.73.178.151)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 25 Jan 2007 01:31:47 -0800
Received: (qmail 91795 invoked by uid 60001); 25 Jan 2007 09:31:26 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=S2AUgmGWh0c5xnYo2usIwZlAR54D5qOq+KifiJgHw8mURdZmw5GX+CjMq9gw1cl0O9g2UPgzuVclOnxsFQPhHUl3CxvyiOFUVNdj934UeNZzq7eSWPSHivz+YQnsRxsflkX/POq9x1byk8XoO8dvl5fi5np5Gqh4Qdik6iVU5ao=;
X-YMail-OSG: 88q7WZUVM1mT5mZc_ubWNXTrrzHyjQG5.1ZJlBiyYEisCqvZgz93QAc4Vovza4E8fGZUX0n4TYhUNBuHEJpSTNR5vQ9D_34q7rSCjPDBb3ntVCFvFtHWrovDSzfjF0vkfBv7ylHvEIXiX.PbvHXyZ9c0RExKcDmpTE5KsuarHlo3dfwuPp889D785kiSuAzug5.3egcH
Received: from [155.69.188.222] by web60423.mail.yahoo.com via HTTP; Thu, 25 Jan 2007 01:31:25 PST
Date: Thu, 25 Jan 2007 01:31:25 -0800 (PST)
From: maureen tanuwidjaja <autumn_musique@yahoo.com>
Subject: Re: Building Lucene index for XML document
To: java-user@lucene.apache.org
In-Reply-To: <20070125090042.81363.qmail@web60421.mail.yahoo.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-736202042-1169717485=:90448"
Content-Transfer-Encoding: 8bit
Message-ID: <954266.90448.qm@web60423.mail.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

--0-736202042-1169717485=:90448
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit

btw Daniel,can please give me the reference to find the explanation about SegmentTermEnum/Field Infos if such one exist? I search but best can only find http://lucene.apache.org/java/docs/clover/org/apache/lucene/index/SegmentTermEnum.html which is the source code only...
   
  Many thanks and Best regards ^^
  Maureen
   
  

maureen tanuwidjaja <autumn_musique@yahoo.com> wrote:
  

Thanks a lot Daniel :)

Regards,
Maureen

Daniel Noll wrote:
maureen tanuwidjaja wrote:

> Before implementing this search engine,I have designed to build the
> index in such a way that every XML tag is converted using binary
> value,in order to reduce the size index and perhaps for faster
> searching.To illustrate:
>
> article will be converted to 0
> article/body will be converted to 0.0
> article/body/section will be converted to 0.0.0
> article/body/p will be converted to 0.0.1
> 
> Now,because of using lucene for the implementation,i wonder wheter
> such conversion will still be useful for efficiency..I wonder wheter
> inside the lucene index itself, such kind of conversion or perhaps even
> further optimization is already done in order to reduce the size index
> or for faster searching.

Indeed you don't need to do this because each field stores its name as 
an integer lookup already. See SegmentTermEnum / FieldInfos.

Daniel

-- 
Daniel Noll

Nuix Pty Ltd
Suite 79, 89 Jones St, Ultimo NSW 2007, Australia Ph: +61 2 9280 0699
Web: http://nuix.com/ Fax: +61 2 9212 6902

This message is intended only for the named recipient. If you are not
the intended recipient you are notified that disclosing, copying,
distributing or taking any action in reliance on the contents of this
message or attachment is strictly prohibited.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org




---------------------------------
Bored stiff? Loosen up...
Download and play hundreds of games for free on Yahoo! Games.

 
---------------------------------
Expecting? Get great news right away with email Auto-Check.
Try the Yahoo! Mail Beta.
--0-736202042-1169717485=:90448--

From java-user-return-25689-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 25 10:13:26 2007
Return-Path: <java-user-return-25689-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1143 invoked from network); 25 Jan 2007 10:13:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Jan 2007 10:13:25 -0000
Received: (qmail 9777 invoked by uid 500); 25 Jan 2007 10:13:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9738 invoked by uid 500); 25 Jan 2007 10:13:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9727 invoked by uid 99); 25 Jan 2007 10:13:23 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Jan 2007 02:13:23 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [66.111.4.28] (HELO out4.smtp.messagingengine.com) (66.111.4.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Jan 2007 02:13:13 -0800
Received: from out1.internal (unknown [10.202.2.149])
	by out1.messagingengine.com (Postfix) with ESMTP id A6007954FB
	for <java-user@lucene.apache.org>; Thu, 25 Jan 2007 05:12:52 -0500 (EST)
Received: from heartbeat1.messagingengine.com ([10.202.2.160])
  by out1.internal (MEProxy); Thu, 25 Jan 2007 05:12:52 -0500
X-Sasl-enc: jGYhccJ/FB+cJPKnOTnoNe+0oLqNL7QsmV+9i3N6uMHP 1169719972
Received: from [10.17.4.90] (pool-72-70-33-214.bstnma.fios.verizon.net [72.70.33.214])
	by mail.messagingengine.com (Postfix) with ESMTP id 669AD19DA9
	for <java-user@lucene.apache.org>; Thu, 25 Jan 2007 05:12:52 -0500 (EST)
Message-ID: <45B88290.10007@mikemccandless.com>
Date: Thu, 25 Jan 2007 05:12:32 -0500
From: Michael McCandless <lucene@mikemccandless.com>
User-Agent: Thunderbird 1.5.0.9 (Windows/20061207)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Lock obtain timed out SimpleFSLock
References: <70147.23679.qm@web60412.mail.yahoo.com>
In-Reply-To: <70147.23679.qm@web60412.mail.yahoo.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

maureen tanuwidjaja wrote:

>   I am indexing thousands of XML document,then it stops after indexing for about 7 hrs
>    
>   ...
>   Indexing C:\sweetpea\wikipedia_xmlfiles\part-0\37027.xml
>   java.io.IOException: Lock obtain timed out: SimpleFSLock@C:\sweetpea\dual_index\DI\write.lock
>   java.lang.NullPointerException
>    
>   Can anyone suggest how to overcome this lock time out error?

Which version of Lucene are you using?

(Looks like it may be a recent trunk nightly build since the
write.lock is stored in the index directory?).

This often happens if the JVM exited un-gracefully previously and left
the "write.lock" in the filesystem.  If that's what's hitting you then
you can just remove that file and restart your indexing process.  You
also might want to try switching to the NativeFSLockFactory (if you
are using trunk) locking implementation.  Because it uses native (OS
level) locking, the locks are always freed by the OS when the JVM
exits.

Also make sure you're not accidentally trying to create two writers
in the same index.  There can be only one.

If that's not what's happening here, can you provide more details
about how you are using Lucene?  Is there only one IndexWriter, that you
periodically close / reopen?  The IndexWriter only acquires this lock
when it's first instantiated.

Also: where is the java.lang.NullPointerException coming from?  Can
you provide a traceback?

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25690-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 25 10:27:39 2007
Return-Path: <java-user-return-25690-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4060 invoked from network); 25 Jan 2007 10:27:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Jan 2007 10:27:38 -0000
Received: (qmail 25260 invoked by uid 500); 25 Jan 2007 10:27:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25239 invoked by uid 500); 25 Jan 2007 10:27:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25226 invoked by uid 99); 25 Jan 2007 10:27:19 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Jan 2007 02:27:19 -0800
X-ASF-Spam-Status: No, hits=0.6 required=10.0
	tests=NO_REAL_NAME
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [130.89.4.34] (HELO mail.service.utwente.nl) (130.89.4.34)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Jan 2007 02:27:11 -0800
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: jetspeed lucene portlet example
Date: Thu, 25 Jan 2007 11:26:48 +0100
Message-ID: <3F5099632A78C7488A80D6535C4F4E802662D2@EX01.service.utwente.nl>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: jetspeed lucene portlet example
Thread-Index: AcdAa1I2FjiCBR1OTfWsLl0jNWIj8A==
From: <e.j.w.vanbloem@student.utwente.nl>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Hello,
=20
I am new to lucene and I tried the make a simple search engine by =
following the book 'portla development with open source tools' but I can =
not get it to work.
=20
Can somebody give/ direct me to a simple search code example for =
jetspeed2
=20
Regards,
Erik

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25691-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 25 11:38:33 2007
Return-Path: <java-user-return-25691-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 27749 invoked from network); 25 Jan 2007 11:38:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Jan 2007 11:38:32 -0000
Received: (qmail 18658 invoked by uid 500); 25 Jan 2007 11:38:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18621 invoked by uid 500); 25 Jan 2007 11:38:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18606 invoked by uid 99); 25 Jan 2007 11:38:32 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Jan 2007 03:38:32 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [145.253.96.155] (HELO DMZ-Mailsrv1.jobsintime.de) (145.253.96.155)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Jan 2007 03:38:23 -0800
Received: from [192.168.200.46] (helo=smx1hhrz.jobsintime.de)
	by proxy.jobsintime.de with esmtp (Exim 4.43)
	id 1HA2zf-0004Gv-UI
	for java-user@lucene.apache.org; Thu, 25 Jan 2007 12:42:15 +0100
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: AW: modifier.optimize() causes Java heap space (OutOfMemoryException)
Date: Thu, 25 Jan 2007 12:39:38 +0100
Message-ID: <68D5F830DB106C408AE294A00A1645F0E084F9@smx1hhrz.jobsintime.de>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: modifier.optimize() causes Java heap space (OutOfMemoryException)
thread-index: Acc/zq0VCrvCYMp5QKmS/dzhvl+mVQApBhgg
From: "Marcel Morisse" <Marcel.Morisse@jobsintime.de>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Hey,

thank you for all your help, I could likely fix the problem.

Unfortunately I needed 10 hours to find the error (1 line of code) ;-)=20

I forgot to close the IndexSearcher after an index query, so, I think, =
lots of instances of IndexSearchers (one for every query) were hold in =
the memory. This caused the OutofMemoryException during the rebuild =
method.

In the old version of our application the RAMIndex was built new every =
night, so the OutofMemoryException was never a problem.

But now, without throwing the existing index away, the instances of the =
Searcher were hold in Memory until the end of the days (or the server =
crashes)

I added a IndexSearcher.close() to the query method and until now the =
error does not occur again.

Best wishes=20
Marcel


-----Urspr=FCngliche Nachricht-----
Von: karl wettin [mailto:karl.wettin@gmail.com]=20
Gesendet: Mittwoch, 24. Januar 2007 16:41
An: java-user@lucene.apache.org
Betreff: Re: modifier.optimize() causes Java heap space =
(OutOfMemoryException)


24 jan 2007 kl. 16.16 skrev Michael McCandless:

> A couple ideas to verify / try:

You can also use a profiler to see what is hogging the resources. I =20
personally prefere JProfiler as it plugs right in to my IDE.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25692-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 25 13:02:14 2007
Return-Path: <java-user-return-25692-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51068 invoked from network); 25 Jan 2007 13:02:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Jan 2007 13:02:13 -0000
Received: (qmail 45540 invoked by uid 500); 25 Jan 2007 13:02:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45518 invoked by uid 500); 25 Jan 2007 13:02:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45507 invoked by uid 99); 25 Jan 2007 13:02:12 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Jan 2007 05:02:12 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 66.249.92.174 as permitted sender)
Received: from [66.249.92.174] (HELO ug-out-1314.google.com) (66.249.92.174)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Jan 2007 05:02:03 -0800
Received: by ug-out-1314.google.com with SMTP id k40so454456ugc
        for <java-user@lucene.apache.org>; Thu, 25 Jan 2007 05:01:42 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=cTBtukrVkqNBktolllQ+IUjukr9sRai4NLpEiqe3Yfh687Tw/z4KMZueLcXUZInvYihi/M+Q/YskRRoQ4H0wmEW4R6JYTG47gU9o/WL02NZEJedEDaDKK2sBc5Fbepnp1BDBIZlXuTSU9bQbkY/LAUmi1FU2fQg2CYVMtXzbByc=
Received: by 10.82.169.4 with SMTP id r4mr1051645bue.1169730101263;
        Thu, 25 Jan 2007 05:01:41 -0800 (PST)
Received: by 10.82.162.20 with HTTP; Thu, 25 Jan 2007 05:01:41 -0800 (PST)
Message-ID: <359a92830701250501n7ba5dcc6j2607941137d2e6aa@mail.gmail.com>
Date: Thu, 25 Jan 2007 08:01:41 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lock obtain timed out SimpleFSLock
In-Reply-To: <70147.23679.qm@web60412.mail.yahoo.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_25783_19425098.1169730101176"
References: <70147.23679.qm@web60412.mail.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_25783_19425098.1169730101176
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

One way to mitigate the cost of this kind of thing is to create a series of
indexes on portions of your corpus and then merge them. Say you have 10,000
documents. Create 10 separate indexes of 1,000 documents each then use
IndexWriter.addIndexes to make them all into a single index.

This pre-supposes you have a neat way of partitioning your files so don't
index any of them in more than one of your sub-indexes.

This doesn't really solve the underlying problem, but at least when the
thing crashes, you spend less time trying the next thing <G>....

Erick

On 1/25/07, maureen tanuwidjaja <autumn_musique@yahoo.com> wrote:
>
>   Hi,
>   I am indexing thousands of XML document,then it stops after indexing for
> about 7 hrs
>
>   ...
>   Indexing C:\sweetpea\wikipedia_xmlfiles\part-0\37003.xml
>   Indexing C:\sweetpea\wikipedia_xmlfiles\part-0\37004.xml
>   Indexing C:\sweetpea\wikipedia_xmlfiles\part-0\37008.xml
>   Indexing C:\sweetpea\wikipedia_xmlfiles\part-0\3701.xml
>   Indexing C:\sweetpea\wikipedia_xmlfiles\part-0\37010.xml
>   Indexing C:\sweetpea\wikipedia_xmlfiles\part-0\37015.xml
>   Indexing C:\sweetpea\wikipedia_xmlfiles\part-0\3702.xml
>   Indexing C:\sweetpea\wikipedia_xmlfiles\part-0\37022.xml
>   Indexing C:\sweetpea\wikipedia_xmlfiles\part-0\37027.xml
>   java.io.IOException: Lock obtain timed out: SimpleFSLock@C
> :\sweetpea\dual_index\DI\write.lock
>   java.lang.NullPointerException
>
>   Can anyone suggest how to overcome this lock time out error?
>
>   Thanks and Regards,
>   Maureen
>
>
>
>
> ---------------------------------
> Sucker-punch spam with award-winning protection.
> Try the free Yahoo! Mail Beta.
>

------=_Part_25783_19425098.1169730101176--

From java-user-return-25693-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 25 13:03:07 2007
Return-Path: <java-user-return-25693-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51283 invoked from network); 25 Jan 2007 13:03:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Jan 2007 13:03:04 -0000
Received: (qmail 49896 invoked by uid 500); 25 Jan 2007 13:03:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49866 invoked by uid 500); 25 Jan 2007 13:03:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49779 invoked by uid 99); 25 Jan 2007 13:03:05 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Jan 2007 05:03:04 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [209.73.178.153] (HELO web60425.mail.yahoo.com) (209.73.178.153)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 25 Jan 2007 05:02:53 -0800
Received: (qmail 79581 invoked by uid 60001); 25 Jan 2007 13:02:32 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=EQiMAZzRoK6qb50Vwn7N5jaypp9IID4WFAwPb2H+eNze2XJ7Qh2cZT/dPB0+Rerw3oGAshV6b5vL1B23Jz1TGRtj97igU7iNtVrQwSF88vV4Oer5FMuBp9M6p2oi3q6ZY4Av7Ou14U2WOVLpd33CI3oMY5bT4Jq6DzEqQHO36FQ=;
X-YMail-OSG: wP17A_YVM1kBtKHhQwfW5Pkj0OxGOwNflZC.XqHPbY5_fav1vJd6Xsgn58dK2_Cq.oMaYmbR62vY5QCsYj76B9awmF2_uskWA68y2JpQiqkPXuJ_tmjynHz6Rie416lIav20zhRLDftwbzXeSL.nab15Bss7feN.2klXEQPObH94R69qUncU3ZFUuGqps2BjmQ3Mxpp4
Received: from [155.69.171.250] by web60425.mail.yahoo.com via HTTP; Thu, 25 Jan 2007 05:02:32 PST
Date: Thu, 25 Jan 2007 05:02:32 -0800 (PST)
From: maureen tanuwidjaja <autumn_musique@yahoo.com>
Subject: Re: Lock obtain timed out SimpleFSLock
To: java-user@lucene.apache.org
In-Reply-To: <45B88290.10007@mikemccandless.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-516085688-1169730152=:79013"
Content-Transfer-Encoding: 8bit
Message-ID: <173570.79013.qm@web60425.mail.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

--0-516085688-1169730152=:79013
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit


  Hi Mike,thanks for the reply...
  
  
  1.Here is the class that I use for indexing..
  
  package edu.ntu.ce.maureen.index;
  
  import org.apache.lucene.index.IndexWriter;
  import org.apache.lucene.analysis.Analyzer;
  import org.apache.lucene.analysis.standard.StandardAnalyzer;
  import org.apache.lucene.document.Document;
  import org.apache.lucene.document.Field;
  import edu.ntu.ce.maureen.search.MySimilarity;
  
  import java.lang.String;
  
  
  public class DocumentIndexer
  {
      public IndexWriter writer;
      public Analyzer analyzer;
      public Document doc;
      public String indexDir;
  
      public Document getDoc(){
          return doc;
      }
      public DocumentIndexer(int index,String f)
      {
      indexDir = "C:/sweetpea/dual_index/DI";
      analyzer = new StandardAnalyzer();
      
      try{
      writer = new IndexWriter(indexDir, analyzer,index  ==0);//true if index ==0,or the first document is indexed...which means  it creates new lucene indexfile,and false for the next documents  (append to existing indexfile)
  
      writer.setSimilarity(new MySimilarity());
          doc = new Document();
          doc.add(new  Field("filename",f,Field.Store.YES,Field.Index.TOKENIZED,Field.TermVector.YES));
      }catch (Exception e) {
          System.out.println(e.toString());
      }
      
      }
  
  
      public void setIndex(XMLData current,String f){
      try{
      doc.add(new Field(current.tag,current.value,Field.Store.YES,Field.Index.TOKENIZED,Field.TermVector.YES));
      }catch(Exception e){}
      }
      
      public Document closeIndex(){
          try{
          writer.addDocument(doc);
          writer.close();
          //System.out.println("index closed..");
          }
          catch(Exception e){
              
          }
          return doc;
      }
  }

  2.The class above(DocumentIndexer.java) is called by the main ,here is the part of the code:
  
  
          File[] listfiles = dir.listFiles();
          for (int i = 0;i< listfiles.length ;i++)
          {
              if (listfiles[i].isDirectory())
              {
                  FileTraverse(listfiles[i], myMap2,counter);
                  continue;
              }
  
              if (!listfiles[i].toString().endsWith(".xml")) continue;
              
              String filename = listfiles[i].getAbsolutePath();
               DocumentIndexer luceneIndex = new  DocumentIndexer(counter,filename);//this counter is initially set to 0  so that for the first file  indexed,it creates new index (the IndexWriter flag set to true and  false otherwise) and later it is incremented.
  
              
              System.out.println("Indexing "+luceneIndex.getDoc().get("filename"));
               indexing(luceneIndex,filename,myMap2);//this method will basically  call  setIndex(XMLData current,String f) of the DocumentIndexer  class
              
              AssignTagNormFactor("article/",1.0,myMap2,luceneIndex.getDoc());
              counter++;//a file has succesfully indexed,increment the counter
               luceneIndex.closeIndex();//  ==>I close the index already,so it  should have released the lock....
          }
  
  
  3.I have deleted the directory where the indexfile exist and try to  index from the beginning...I dunno wheter 7 hrs later it will raise the  same problem"Lock obtain timed out"
  
  4.I use the latest version of Lucene (nightly build)
  
  Thanks and Regards,
  Maureen
  
Michael McCandless <lucene@mikemccandless.com> wrote:  maureen tanuwidjaja wrote:

>   I am indexing thousands of XML document,then it stops after indexing for about 7 hrs
>    
>   ...
>   Indexing C:\sweetpea\wikipedia_xmlfiles\part-0\37027.xml
>   java.io.IOException: Lock obtain timed out: SimpleFSLock@C:\sweetpea\dual_index\DI\write.lock
>   java.lang.NullPointerException
>    
>   Can anyone suggest how to overcome this lock time out error?

Which version of Lucene are you using?

(Looks like it may be a recent trunk nightly build since the
write.lock is stored in the index directory?).

This often happens if the JVM exited un-gracefully previously and left
the "write.lock" in the filesystem.  If that's what's hitting you then
you can just remove that file and restart your indexing process.  You
also might want to try switching to the NativeFSLockFactory (if you
are using trunk) locking implementation.  Because it uses native (OS
level) locking, the locks are always freed by the OS when the JVM
exits.

Also make sure you're not accidentally trying to create two writers
in the same index.  There can be only one.

If that's not what's happening here, can you provide more details
about how you are using Lucene?  Is there only one IndexWriter, that you
periodically close / reopen?  The IndexWriter only acquires this lock
when it's first instantiated.

Also: where is the java.lang.NullPointerException coming from?  Can
you provide a traceback?

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



 
---------------------------------
Don't get soaked.  Take a quick peak at the forecast 
 with theYahoo! Search weather shortcut.
--0-516085688-1169730152=:79013--

From java-user-return-25694-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 25 13:18:19 2007
Return-Path: <java-user-return-25694-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54466 invoked from network); 25 Jan 2007 13:18:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Jan 2007 13:18:18 -0000
Received: (qmail 84085 invoked by uid 500); 25 Jan 2007 13:18:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83925 invoked by uid 500); 25 Jan 2007 13:18:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83914 invoked by uid 99); 25 Jan 2007 13:18:16 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Jan 2007 05:18:16 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 64.233.184.233 as permitted sender)
Received: from [64.233.184.233] (HELO wr-out-0506.google.com) (64.233.184.233)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Jan 2007 05:18:08 -0800
Received: by wr-out-0506.google.com with SMTP id i21so396349wra
        for <java-user@lucene.apache.org>; Thu, 25 Jan 2007 05:17:47 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=B6hwaggxUQKZyDclM9aF4qWbv5SywP30ZRl4fzWjNrdY9ZcG/nylCkUdijOOiLYYIeJ6BfKavLFECXaiO8PmNWpi/sB4Tnc9/Ib32YhCRy9bFym5CO08l/UGOvfeR2Lh8m9UUCs5RjND3ceWI1eUoVWTaB/nQdA4bOI2w0/IgUQ=
Received: by 10.82.139.17 with SMTP id m17mr1066200bud.1169731065727;
        Thu, 25 Jan 2007 05:17:45 -0800 (PST)
Received: by 10.82.162.20 with HTTP; Thu, 25 Jan 2007 05:17:45 -0800 (PST)
Message-ID: <359a92830701250517j8735a87uc9f429e004bd9eca@mail.gmail.com>
Date: Thu, 25 Jan 2007 08:17:45 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lock obtain timed out SimpleFSLock
In-Reply-To: <173570.79013.qm@web60425.mail.yahoo.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_26179_23315865.1169731065689"
References: <45B88290.10007@mikemccandless.com>
	 <173570.79013.qm@web60425.mail.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_26179_23315865.1169731065689
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Don't do it that way. You're opening and closing your indexwrwiter for each
document, which is extremely wasteful. And given locking has been a source
of much discussion on this list, it's not clear that locking will withstand
this kind of hammering. You want to do something like

IndexWriter writer = new IndexWriter();

for each document {
    writer.add(document);
}

close writer.


I'd guess this will be much faster as well.

And one style note: You'll save yourself endless grief if you avoid starting
an operation one place (especially in a called method) and clean up after it
someplace else. In your code snippet, opening the IndexWriter in your
DocumentIndexer then having to remember to close it in main is a recipe for
disaster. Trust me on this one, I've spent waaaaay more time than I'd like
to admit debugging this kind of problem <G>.

Best
Erick


On 1/25/07, maureen tanuwidjaja <autumn_musique@yahoo.com> wrote:
>
>
>   Hi Mike,thanks for the reply...
>
>
>   1.Here is the class that I use for indexing..
>
>   package edu.ntu.ce.maureen.index;
>
>   import org.apache.lucene.index.IndexWriter;
>   import org.apache.lucene.analysis.Analyzer;
>   import org.apache.lucene.analysis.standard.StandardAnalyzer;
>   import org.apache.lucene.document.Document;
>   import org.apache.lucene.document.Field;
>   import edu.ntu.ce.maureen.search.MySimilarity;
>
>   import java.lang.String;
>
>
>   public class DocumentIndexer
>   {
>       public IndexWriter writer;
>       public Analyzer analyzer;
>       public Document doc;
>       public String indexDir;
>
>       public Document getDoc(){
>           return doc;
>       }
>       public DocumentIndexer(int index,String f)
>       {
>       indexDir = "C:/sweetpea/dual_index/DI";
>       analyzer = new StandardAnalyzer();
>
>       try{
>       writer = new IndexWriter(indexDir, analyzer,index  ==0);//true if
> index ==0,or the first document is indexed...which means  it creates new
> lucene indexfile,and false for the next documents  (append to existing
> indexfile)
>
>       writer.setSimilarity(new MySimilarity());
>           doc = new Document();
>           doc.add(new  Field("filename",f,Field.Store.YES,
> Field.Index.TOKENIZED,Field.TermVector.YES));
>       }catch (Exception e) {
>           System.out.println(e.toString());
>       }
>
>       }
>
>
>       public void setIndex(XMLData current,String f){
>       try{
>       doc.add(new Field(current.tag,current.value,Field.Store.YES,
> Field.Index.TOKENIZED,Field.TermVector.YES));
>       }catch(Exception e){}
>       }
>
>       public Document closeIndex(){
>           try{
>           writer.addDocument(doc);
>           writer.close();
>           //System.out.println("index closed..");
>           }
>           catch(Exception e){
>
>           }
>           return doc;
>       }
>   }
>
>   2.The class above(DocumentIndexer.java) is called by the main ,here is
> the part of the code:
>
>
>           File[] listfiles = dir.listFiles();
>           for (int i = 0;i< listfiles.length ;i++)
>           {
>               if (listfiles[i].isDirectory())
>               {
>                   FileTraverse(listfiles[i], myMap2,counter);
>                   continue;
>               }
>
>               if (!listfiles[i].toString().endsWith(".xml")) continue;
>
>               String filename = listfiles[i].getAbsolutePath();
>                DocumentIndexer luceneIndex =
> new  DocumentIndexer(counter,filename);//this counter is initially set to
> 0  so that for the first file  indexed,it creates new index (the IndexWriter
> flag set to true and  false otherwise) and later it is incremented.
>
>
>               System.out.println("Indexing
> "+luceneIndex.getDoc().get("filename"));
>                indexing(luceneIndex,filename,myMap2);//this method will
> basically  call  setIndex(XMLData current,String f) of the
> DocumentIndexer  class
>
>               AssignTagNormFactor("article/",1.0,myMap2,luceneIndex.getDoc
> ());
>               counter++;//a file has succesfully indexed,increment the
> counter
>                luceneIndex.closeIndex();//  ==>I close the index
> already,so it  should have released the lock....
>           }
>
>
>   3.I have deleted the directory where the indexfile exist and try
> to  index from the beginning...I dunno wheter 7 hrs later it will raise
> the  same problem"Lock obtain timed out"
>
>   4.I use the latest version of Lucene (nightly build)
>
>   Thanks and Regards,
>   Maureen
>
> Michael McCandless <lucene@mikemccandless.com> wrote:  maureen tanuwidjaja
> wrote:
>
> >   I am indexing thousands of XML document,then it stops after indexing
> for about 7 hrs
> >
> >   ...
> >   Indexing C:\sweetpea\wikipedia_xmlfiles\part-0\37027.xml
> >   java.io.IOException: Lock obtain timed out: SimpleFSLock@C
> :\sweetpea\dual_index\DI\write.lock
> >   java.lang.NullPointerException
> >
> >   Can anyone suggest how to overcome this lock time out error?
>
> Which version of Lucene are you using?
>
> (Looks like it may be a recent trunk nightly build since the
> write.lock is stored in the index directory?).
>
> This often happens if the JVM exited un-gracefully previously and left
> the "write.lock" in the filesystem.  If that's what's hitting you then
> you can just remove that file and restart your indexing process.  You
> also might want to try switching to the NativeFSLockFactory (if you
> are using trunk) locking implementation.  Because it uses native (OS
> level) locking, the locks are always freed by the OS when the JVM
> exits.
>
> Also make sure you're not accidentally trying to create two writers
> in the same index.  There can be only one.
>
> If that's not what's happening here, can you provide more details
> about how you are using Lucene?  Is there only one IndexWriter, that you
> periodically close / reopen?  The IndexWriter only acquires this lock
> when it's first instantiated.
>
> Also: where is the java.lang.NullPointerException coming from?  Can
> you provide a traceback?
>
> Mike
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>
> ---------------------------------
> Don't get soaked.  Take a quick peak at the forecast
> with theYahoo! Search weather shortcut.
>

------=_Part_26179_23315865.1169731065689--

From java-user-return-25695-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 25 14:13:46 2007
Return-Path: <java-user-return-25695-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69506 invoked from network); 25 Jan 2007 14:13:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Jan 2007 14:13:45 -0000
Received: (qmail 83929 invoked by uid 500); 25 Jan 2007 14:13:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83898 invoked by uid 500); 25 Jan 2007 14:13:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83882 invoked by uid 99); 25 Jan 2007 14:13:44 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Jan 2007 06:13:44 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [66.111.4.28] (HELO out4.smtp.messagingengine.com) (66.111.4.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Jan 2007 06:13:34 -0800
Received: from out1.internal (unknown [10.202.2.149])
	by out1.messagingengine.com (Postfix) with ESMTP id 161A8964E4
	for <java-user@lucene.apache.org>; Thu, 25 Jan 2007 09:13:13 -0500 (EST)
Received: from heartbeat2.messagingengine.com ([10.202.2.161])
  by out1.internal (MEProxy); Thu, 25 Jan 2007 09:13:13 -0500
X-Sasl-enc: xkBPWocbEjELCGkb8MpkJLV8EJiCBWZcb0kCpCo7PlvN 1169734392
Received: from [10.17.4.90] (pool-72-70-33-214.bstnma.fios.verizon.net [72.70.33.214])
	by mail.messagingengine.com (Postfix) with ESMTP id 8E3C9141CA
	for <java-user@lucene.apache.org>; Thu, 25 Jan 2007 09:13:12 -0500 (EST)
Message-ID: <45B8BAE4.3050203@mikemccandless.com>
Date: Thu, 25 Jan 2007 09:12:52 -0500
From: Michael McCandless <lucene@mikemccandless.com>
User-Agent: Thunderbird 1.5.0.9 (Windows/20061207)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Lock obtain timed out SimpleFSLock
References: <45B88290.10007@mikemccandless.com>	 <173570.79013.qm@web60425.mail.yahoo.com> <359a92830701250517j8735a87uc9f429e004bd9eca@mail.gmail.com>
In-Reply-To: <359a92830701250517j8735a87uc9f429e004bd9eca@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Erick Erickson wrote:
> Don't do it that way. You're opening and closing your indexwrwiter for each
> document, which is extremely wasteful. And given locking has been a source
> of much discussion on this list, it's not clear that locking will withstand
> this kind of hammering. You want to do something like

Agreed, this is very inefficient.  You will get much better
performance by creating the writer once, doing all your adds, then
closing it.

But, locking should be fine even for this "hammering" use case (and if
it's not, that's a bug, and I'd really like to know about it!).  So it
would still be good to get to the root cause if this comes up again.

Also I see you're ignoring all Exceptions coming out of the
writer.addDocument(...) and writer.close().  At least you should print
the exception & save it somewhere.  Your locking problem could very
well be an exception that occurred in addDocument and thus the writer
failed to be closed.

Also it's best to do this:

   writer = new IndexWriter(...);

   try {
     ...do lots of stuff with writer...
   } finally {
     writer.close();
   }

Mike

> IndexWriter writer = new IndexWriter();
> 
> for each document {
>    writer.add(document);
> }
> 
> close writer.
> 
> 
> I'd guess this will be much faster as well.
> 
> And one style note: You'll save yourself endless grief if you avoid 
> starting
> an operation one place (especially in a called method) and clean up 
> after it
> someplace else. In your code snippet, opening the IndexWriter in your
> DocumentIndexer then having to remember to close it in main is a recipe for
> disaster. Trust me on this one, I've spent waaaaay more time than I'd like
> to admit debugging this kind of problem <G>.
> 
> Best
> Erick
> 
> 
> On 1/25/07, maureen tanuwidjaja <autumn_musique@yahoo.com> wrote:
>>
>>
>>   Hi Mike,thanks for the reply...
>>
>>
>>   1.Here is the class that I use for indexing..
>>
>>   package edu.ntu.ce.maureen.index;
>>
>>   import org.apache.lucene.index.IndexWriter;
>>   import org.apache.lucene.analysis.Analyzer;
>>   import org.apache.lucene.analysis.standard.StandardAnalyzer;
>>   import org.apache.lucene.document.Document;
>>   import org.apache.lucene.document.Field;
>>   import edu.ntu.ce.maureen.search.MySimilarity;
>>
>>   import java.lang.String;
>>
>>
>>   public class DocumentIndexer
>>   {
>>       public IndexWriter writer;
>>       public Analyzer analyzer;
>>       public Document doc;
>>       public String indexDir;
>>
>>       public Document getDoc(){
>>           return doc;
>>       }
>>       public DocumentIndexer(int index,String f)
>>       {
>>       indexDir = "C:/sweetpea/dual_index/DI";
>>       analyzer = new StandardAnalyzer();
>>
>>       try{
>>       writer = new IndexWriter(indexDir, analyzer,index  ==0);//true if
>> index ==0,or the first document is indexed...which means  it creates new
>> lucene indexfile,and false for the next documents  (append to existing
>> indexfile)
>>
>>       writer.setSimilarity(new MySimilarity());
>>           doc = new Document();
>>           doc.add(new  Field("filename",f,Field.Store.YES,
>> Field.Index.TOKENIZED,Field.TermVector.YES));
>>       }catch (Exception e) {
>>           System.out.println(e.toString());
>>       }
>>
>>       }
>>
>>
>>       public void setIndex(XMLData current,String f){
>>       try{
>>       doc.add(new Field(current.tag,current.value,Field.Store.YES,
>> Field.Index.TOKENIZED,Field.TermVector.YES));
>>       }catch(Exception e){}
>>       }
>>
>>       public Document closeIndex(){
>>           try{
>>           writer.addDocument(doc);
>>           writer.close();
>>           //System.out.println("index closed..");
>>           }
>>           catch(Exception e){
>>
>>           }
>>           return doc;
>>       }
>>   }
>>
>>   2.The class above(DocumentIndexer.java) is called by the main ,here is
>> the part of the code:
>>
>>
>>           File[] listfiles = dir.listFiles();
>>           for (int i = 0;i< listfiles.length ;i++)
>>           {
>>               if (listfiles[i].isDirectory())
>>               {
>>                   FileTraverse(listfiles[i], myMap2,counter);
>>                   continue;
>>               }
>>
>>               if (!listfiles[i].toString().endsWith(".xml")) continue;
>>
>>               String filename = listfiles[i].getAbsolutePath();
>>                DocumentIndexer luceneIndex =
>> new  DocumentIndexer(counter,filename);//this counter is initially set to
>> 0  so that for the first file  indexed,it creates new index (the 
>> IndexWriter
>> flag set to true and  false otherwise) and later it is incremented.
>>
>>
>>               System.out.println("Indexing
>> "+luceneIndex.getDoc().get("filename"));
>>                indexing(luceneIndex,filename,myMap2);//this method will
>> basically  call  setIndex(XMLData current,String f) of the
>> DocumentIndexer  class
>>
>>               
>> AssignTagNormFactor("article/",1.0,myMap2,luceneIndex.getDoc
>> ());
>>               counter++;//a file has succesfully indexed,increment the
>> counter
>>                luceneIndex.closeIndex();//  ==>I close the index
>> already,so it  should have released the lock....
>>           }
>>
>>
>>   3.I have deleted the directory where the indexfile exist and try
>> to  index from the beginning...I dunno wheter 7 hrs later it will raise
>> the  same problem"Lock obtain timed out"
>>
>>   4.I use the latest version of Lucene (nightly build)
>>
>>   Thanks and Regards,
>>   Maureen
>>
>> Michael McCandless <lucene@mikemccandless.com> wrote:  maureen 
>> tanuwidjaja
>> wrote:
>>
>> >   I am indexing thousands of XML document,then it stops after indexing
>> for about 7 hrs
>> >
>> >   ...
>> >   Indexing C:\sweetpea\wikipedia_xmlfiles\part-0\37027.xml
>> >   java.io.IOException: Lock obtain timed out: SimpleFSLock@C
>> :\sweetpea\dual_index\DI\write.lock
>> >   java.lang.NullPointerException
>> >
>> >   Can anyone suggest how to overcome this lock time out error?
>>
>> Which version of Lucene are you using?
>>
>> (Looks like it may be a recent trunk nightly build since the
>> write.lock is stored in the index directory?).
>>
>> This often happens if the JVM exited un-gracefully previously and left
>> the "write.lock" in the filesystem.  If that's what's hitting you then
>> you can just remove that file and restart your indexing process.  You
>> also might want to try switching to the NativeFSLockFactory (if you
>> are using trunk) locking implementation.  Because it uses native (OS
>> level) locking, the locks are always freed by the OS when the JVM
>> exits.
>>
>> Also make sure you're not accidentally trying to create two writers
>> in the same index.  There can be only one.
>>
>> If that's not what's happening here, can you provide more details
>> about how you are using Lucene?  Is there only one IndexWriter, that you
>> periodically close / reopen?  The IndexWriter only acquires this lock
>> when it's first instantiated.
>>
>> Also: where is the java.lang.NullPointerException coming from?  Can
>> you provide a traceback?
>>
>> Mike
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>>
>> ---------------------------------
>> Don't get soaked.  Take a quick peak at the forecast
>> with theYahoo! Search weather shortcut.
>>
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25696-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 25 14:50:33 2007
Return-Path: <java-user-return-25696-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91626 invoked from network); 25 Jan 2007 14:50:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Jan 2007 14:50:33 -0000
Received: (qmail 44605 invoked by uid 500); 25 Jan 2007 14:50:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44463 invoked by uid 500); 25 Jan 2007 14:50:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44452 invoked by uid 99); 25 Jan 2007 14:50:31 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Jan 2007 06:50:31 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [212.190.206.154] (HELO srs2na11.bgl.lu) (212.190.206.154)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 25 Jan 2007 06:50:22 -0800
Received: from spmwf02l.luinternal.fortis.bank (unverified) by srs2na12.domain
 (Content Technologies SMTPRS 4.2.10) with ESMTP id <T7d665f65140aaf150a159@srs2na12.domain> for <java-user@lucene.apache.org>;
 Thu, 25 Jan 2007 15:53:59 +0100
Received: from SPMWB02L.luinternal.fortis.bank ([10.172.252.140]) by spmwf02l.luinternal.fortis.bank with Microsoft SMTPSVC(6.0.3790.0);
	 Thu, 25 Jan 2007 15:49:14 +0100
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
X-MimeOLE: Produced By Microsoft Exchange V6.5
Subject: RE: Low hits
Date: Thu, 25 Jan 2007 15:49:49 +0100
Message-ID: <EBC8F228BDB35A4394D0BE53DA25248808A9A25E@SPMWB02L.luinternal.fortis.bank>
In-Reply-To: <Pine.LNX.4.58.0701231139420.17988@hal.rescomp.berkeley.edu>
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
Thread-Topic: Low hits
Thread-Index: Acc/JuHDwJM/K5oVRw+Fxob3LrJk+wBaKx6A
From: "DECAFFMEYER MATHIEU" <MATHIEU.DECAFFMAYER@fortis.lu>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 25 Jan 2007 14:49:14.0853 (UTC) FILETIME=[FB927950:01C7408F]
X-Virus-Checked: Checked by ClamAV on apache.org

Thank u for your reply,

There is not much help in Regain community,

But I can see that when I type e.g.=20
title:logistics
I have like 0.70
also headlines:logistics 0.70

But when I type logistics I have 0.02

I do not udnerstand since I added this word as title and headlines and I
need a higher score for titles of the web pages for the people I
develop.

I will try Luke but for some reason I can't install it in my company,

Can someone give me some suggestions on what I should do ?

Thank u.

__________________________________

   Mathieu Decaffmeyer
   Web Developer
   Fortis Banque Luxembourg
   IS Retail Banking - Web Content Management
   Mobile : 0032  479 / 69 . 42 . 96

   =20

-----Original Message-----
From: Chris Hostetter [mailto:hossman_lucene@fucit.org]=20
Sent: Tuesday, January 23, 2007 8:44 PM
To: java-user@lucene.apache.org
Subject: RE: Low hits

*****  This message comes from the Internet Network *****


: When I index the whole website, then when I type a title of a document
I
: have like 60 to 70 % as score.
: When I index only one page, then when I type the title I have like 2%
as
: score.

I don't know what Regain is ... but this sounds like some issue between
how it reports the scores Lucene generates.  Lucene scores are not
percentages, they are either a "raw score" which is an absolute
calculation absed on the query boosts and constants in your Similarity
class -- raw scores can be any floating point number; or they are a
"Hits
semi-nomalized score" which are garunteed to be between 0 and 1, but the
"best" matching document is only garunteed to have a score no greater
then
1 -- it is not garunteed to have a score that *is* 1.

perhaps Regain is translating the Hits score as a percentage -- in which
case there is nothing wrong with the top matching document haveing a
score
of "2%" ... it's still the top matching document.


I would suggest you start by asking some questions of the Regain user
community or Regain is a commercial product, ask their customer support
people aboutthe scores.


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D
Internet communications are not secure and therefore Fortis Banque Luxembou=
rg S.A. does not accept legal responsibility for the contents of this messa=
ge. The information contained in this e-mail is confidential and may be leg=
ally privileged. It is intended solely for the addressee. If you are not th=
e intended recipient, any disclosure, copying, distribution or any action t=
aken or omitted to be taken in reliance on it, is prohibited and may be unl=
awful. Nothing in the message is capable or intended to create any legally =
binding obligations on either party and it is not intended to provide legal=
 advice.
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25697-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 25 16:35:03 2007
Return-Path: <java-user-return-25697-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38302 invoked from network); 25 Jan 2007 16:35:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Jan 2007 16:35:02 -0000
Received: (qmail 593 invoked by uid 500); 25 Jan 2007 16:35:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 564 invoked by uid 500); 25 Jan 2007 16:35:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 545 invoked by uid 99); 25 Jan 2007 16:35:00 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Jan 2007 08:35:00 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [209.73.178.152] (HELO web60424.mail.yahoo.com) (209.73.178.152)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 25 Jan 2007 08:34:49 -0800
Received: (qmail 17813 invoked by uid 60001); 25 Jan 2007 16:34:28 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=RNEfCIeL0hBCAeQ6wPi0w3ABB55aG6JwoGxWHN5dU1pPHat6ftf9/jY+RiJd49Pp+xMDGxvoiESuc7IChPKFbvtZO00dBc/Qm8jV5gU/wEHmZUFPLU7LzkhCtPaqEsl79DkjSp9SHS1hWT1mdJhz0mNHQRXzzeGicgll8u+M8yQ=;
X-YMail-OSG: X0op8FQVM1mc6bbxYt2rXhCZBzqBIH2go5rxhDZlnPYTOjC6tRDBJ3FVdC1Ys2ObH109kNJNcs7QfQOof6PyC2Gzfrbl4jdtOlyfYt4QutgXosHrpYrZVpFPkRd3xA9Rww1ropmxy2Jvcc8g1M7SkvKXrtMsQ4TMgPBzNfO53upL0RAPy7i4oH1JNTwu1QoBBTJ9KajW
Received: from [155.69.171.250] by web60424.mail.yahoo.com via HTTP; Thu, 25 Jan 2007 08:34:28 PST
Date: Thu, 25 Jan 2007 08:34:28 -0800 (PST)
From: maureen tanuwidjaja <autumn_musique@yahoo.com>
Subject: Re: Lock obtain timed out SimpleFSLock
To: java-user@lucene.apache.org
In-Reply-To: <45B8BAE4.3050203@mikemccandless.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-1942277186-1169742868=:16950"
Content-Transfer-Encoding: 8bit
Message-ID: <436206.16950.qm@web60424.mail.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

--0-1942277186-1169742868=:16950
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit

Hi Erick and Mike
  
  Really thanks a lot for the advice... =)
  
  I will fix my code..I'll let you guys know if any problem arises.
  
  
  Many thanks and best regards ^ ^
  
  MauReen
  
  

Michael McCandless <lucene@mikemccandless.com> wrote:  Erick Erickson wrote:
> Don't do it that way. You're opening and closing your indexwrwiter for each
> document, which is extremely wasteful. And given locking has been a source
> of much discussion on this list, it's not clear that locking will withstand
> this kind of hammering. You want to do something like

Agreed, this is very inefficient.  You will get much better
performance by creating the writer once, doing all your adds, then
closing it.

But, locking should be fine even for this "hammering" use case (and if
it's not, that's a bug, and I'd really like to know about it!).  So it
would still be good to get to the root cause if this comes up again.

Also I see you're ignoring all Exceptions coming out of the
writer.addDocument(...) and writer.close().  At least you should print
the exception & save it somewhere.  Your locking problem could very
well be an exception that occurred in addDocument and thus the writer
failed to be closed.

Also it's best to do this:

   writer = new IndexWriter(...);

   try {
     ...do lots of stuff with writer...
   } finally {
     writer.close();
   }

Mike

> IndexWriter writer = new IndexWriter();
> 
> for each document {
>    writer.add(document);
> }
> 
> close writer.
> 
> 
> I'd guess this will be much faster as well.
> 
> And one style note: You'll save yourself endless grief if you avoid 
> starting
> an operation one place (especially in a called method) and clean up 
> after it
> someplace else. In your code snippet, opening the IndexWriter in your
> DocumentIndexer then having to remember to close it in main is a recipe for
> disaster. Trust me on this one, I've spent waaaaay more time than I'd like
> to admit debugging this kind of problem .
> 
> Best
> Erick
> 
> 
> On 1/25/07, maureen tanuwidjaja  wrote:
>>
>>
>>   Hi Mike,thanks for the reply...
>>
>>
>>   1.Here is the class that I use for indexing..
>>
>>   package edu.ntu.ce.maureen.index;
>>
>>   import org.apache.lucene.index.IndexWriter;
>>   import org.apache.lucene.analysis.Analyzer;
>>   import org.apache.lucene.analysis.standard.StandardAnalyzer;
>>   import org.apache.lucene.document.Document;
>>   import org.apache.lucene.document.Field;
>>   import edu.ntu.ce.maureen.search.MySimilarity;
>>
>>   import java.lang.String;
>>
>>
>>   public class DocumentIndexer
>>   {
>>       public IndexWriter writer;
>>       public Analyzer analyzer;
>>       public Document doc;
>>       public String indexDir;
>>
>>       public Document getDoc(){
>>           return doc;
>>       }
>>       public DocumentIndexer(int index,String f)
>>       {
>>       indexDir = "C:/sweetpea/dual_index/DI";
>>       analyzer = new StandardAnalyzer();
>>
>>       try{
>>       writer = new IndexWriter(indexDir, analyzer,index  ==0);//true if
>> index ==0,or the first document is indexed...which means  it creates new
>> lucene indexfile,and false for the next documents  (append to existing
>> indexfile)
>>
>>       writer.setSimilarity(new MySimilarity());
>>           doc = new Document();
>>           doc.add(new  Field("filename",f,Field.Store.YES,
>> Field.Index.TOKENIZED,Field.TermVector.YES));
>>       }catch (Exception e) {
>>           System.out.println(e.toString());
>>       }
>>
>>       }
>>
>>
>>       public void setIndex(XMLData current,String f){
>>       try{
>>       doc.add(new Field(current.tag,current.value,Field.Store.YES,
>> Field.Index.TOKENIZED,Field.TermVector.YES));
>>       }catch(Exception e){}
>>       }
>>
>>       public Document closeIndex(){
>>           try{
>>           writer.addDocument(doc);
>>           writer.close();
>>           //System.out.println("index closed..");
>>           }
>>           catch(Exception e){
>>
>>           }
>>           return doc;
>>       }
>>   }
>>
>>   2.The class above(DocumentIndexer.java) is called by the main ,here is
>> the part of the code:
>>
>>
>>           File[] listfiles = dir.listFiles();
>>           for (int i = 0;i< listfiles.length ;i++)
>>           {
>>               if (listfiles[i].isDirectory())
>>               {
>>                   FileTraverse(listfiles[i], myMap2,counter);
>>                   continue;
>>               }
>>
>>               if (!listfiles[i].toString().endsWith(".xml")) continue;
>>
>>               String filename = listfiles[i].getAbsolutePath();
>>                DocumentIndexer luceneIndex =
>> new  DocumentIndexer(counter,filename);//this counter is initially set to
>> 0  so that for the first file  indexed,it creates new index (the 
>> IndexWriter
>> flag set to true and  false otherwise) and later it is incremented.
>>
>>
>>               System.out.println("Indexing
>> "+luceneIndex.getDoc().get("filename"));
>>                indexing(luceneIndex,filename,myMap2);//this method will
>> basically  call  setIndex(XMLData current,String f) of the
>> DocumentIndexer  class
>>
>>               
>> AssignTagNormFactor("article/",1.0,myMap2,luceneIndex.getDoc
>> ());
>>               counter++;//a file has succesfully indexed,increment the
>> counter
>>                luceneIndex.closeIndex();//  ==>I close the index
>> already,so it  should have released the lock....
>>           }
>>
>>
>>   3.I have deleted the directory where the indexfile exist and try
>> to  index from the beginning...I dunno wheter 7 hrs later it will raise
>> the  same problem"Lock obtain timed out"
>>
>>   4.I use the latest version of Lucene (nightly build)
>>
>>   Thanks and Regards,
>>   Maureen
>>
>> Michael McCandless  wrote:  maureen 
>> tanuwidjaja
>> wrote:
>>
>> >   I am indexing thousands of XML document,then it stops after indexing
>> for about 7 hrs
>> >
>> >   ...
>> >   Indexing C:\sweetpea\wikipedia_xmlfiles\part-0\37027.xml
>> >   java.io.IOException: Lock obtain timed out: SimpleFSLock@C
>> :\sweetpea\dual_index\DI\write.lock
>> >   java.lang.NullPointerException
>> >
>> >   Can anyone suggest how to overcome this lock time out error?
>>
>> Which version of Lucene are you using?
>>
>> (Looks like it may be a recent trunk nightly build since the
>> write.lock is stored in the index directory?).
>>
>> This often happens if the JVM exited un-gracefully previously and left
>> the "write.lock" in the filesystem.  If that's what's hitting you then
>> you can just remove that file and restart your indexing process.  You
>> also might want to try switching to the NativeFSLockFactory (if you
>> are using trunk) locking implementation.  Because it uses native (OS
>> level) locking, the locks are always freed by the OS when the JVM
>> exits.
>>
>> Also make sure you're not accidentally trying to create two writers
>> in the same index.  There can be only one.
>>
>> If that's not what's happening here, can you provide more details
>> about how you are using Lucene?  Is there only one IndexWriter, that you
>> periodically close / reopen?  The IndexWriter only acquires this lock
>> when it's first instantiated.
>>
>> Also: where is the java.lang.NullPointerException coming from?  Can
>> you provide a traceback?
>>
>> Mike
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>>
>> ---------------------------------
>> Don't get soaked.  Take a quick peak at the forecast
>> with theYahoo! Search weather shortcut.
>>
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



 
---------------------------------
 Get your own web address.
 Have a HUGE year through Yahoo! Small Business.
--0-1942277186-1169742868=:16950--

From java-user-return-25698-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 25 19:43:42 2007
Return-Path: <java-user-return-25698-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93217 invoked from network); 25 Jan 2007 19:43:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Jan 2007 19:43:41 -0000
Received: (qmail 76292 invoked by uid 500); 25 Jan 2007 19:43:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76265 invoked by uid 500); 25 Jan 2007 19:43:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76254 invoked by uid 99); 25 Jan 2007 19:43:39 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Jan 2007 11:43:39 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=UNPARSEABLE_RELAY
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [159.14.214.193] (HELO genomemail.chop.edu) (159.14.214.193)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Jan 2007 11:43:30 -0800
Received: from [159.14.214.144] ([159.14.214.144]) BY genomemail.chop.edu ([159.14.214.193])
 WITH ESMTP (4D WebSTAR V Mail (5.3.4)); Thu, 25 Jan 2007 14:43:57 -0500
Mime-Version: 1.0 (Apple Message framework v752.2)
Content-Transfer-Encoding: 7bit
Message-Id: <7972DE03-9910-4329-B08A-F1DCD1620D92@genome.chop.edu>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
To: java-user@lucene.apache.org
From: Ryan O'Hara <ohara@genome.chop.edu>
Subject: SpellChecker::suggestSimilar() Question
Date: Thu, 25 Jan 2007 14:43:04 -0500
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org

It seems that the suggestions returned by SpellChecker::suggestSimilar 
(queryText, num_sug, reader, field, bool) are randomly chosen, then  
sorted.  By altering num_sug (10, 5, 3,2,1), I received the following  
suggestions for "gnetics":

suggestion0: genetics
suggestion1: ginetics
suggestion2: inetics
suggestion3: gynetics
suggestion4: netics
suggestion5: kinetics
suggestion6: magnetics
suggestion7: cinetics
suggestion8: kenetics
suggestion9: kynetics

suggestion0: genetics
suggestion1: kenetics
suggestion2: epigenetics
suggestion3: innogenetics
suggestion4: oncogenetics

suggestion0: genetics
suggestion1: epigenetics
suggestion2: innogenetics

suggestion0: magnetics
suggestion1: gnetin

suggestion0: magnetics

Is there anyway to sort the suggestions prior, so that grabbing only  
one suggestion would give you the best suggestion, in this case  
"genetics"?

Thanks in advance,
Ryan

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25699-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 25 20:03:02 2007
Return-Path: <java-user-return-25699-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99751 invoked from network); 25 Jan 2007 20:03:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Jan 2007 20:03:01 -0000
Received: (qmail 19176 invoked by uid 500); 25 Jan 2007 20:03:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19137 invoked by uid 500); 25 Jan 2007 20:03:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19126 invoked by uid 99); 25 Jan 2007 20:03:00 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Jan 2007 12:03:00 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of jak-lucene-user@m.gmane.org designates 80.91.229.2 as permitted sender)
Received: from [80.91.229.2] (HELO ciao.gmane.org) (80.91.229.2)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Jan 2007 12:02:50 -0800
Received: from list by ciao.gmane.org with local (Exim 4.43)
	id 1HAAnb-00048U-B7
	for java-user@lucene.apache.org; Thu, 25 Jan 2007 21:02:19 +0100
Received: from mail2.hayesinc.com ([207.10.43.2])
        by main.gmane.org with esmtp (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <java-user@lucene.apache.org>; Thu, 25 Jan 2007 21:02:19 +0100
Received: from aperez by mail2.hayesinc.com with local (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <java-user@lucene.apache.org>; Thu, 25 Jan 2007 21:02:19 +0100
X-Injected-Via-Gmane: http://gmane.org/
To: java-user@lucene.apache.org
From:  Arturo Perez <aperez@hayesinc.com>
Subject:  What type of query best for OR with high score?
Date:  Thu, 25 Jan 2007 15:02:06 -0500
Organization:  Hayes, Inc.
Lines: 19
Message-ID:  <pan.2007.01.25.20.02.06.151102@hayesinc.com>
Mime-Version:  1.0
Content-Type:  text/plain; charset=ISO-8859-1
Content-Transfer-Encoding:  8bit
X-Complaints-To: usenet@sea.gmane.org
X-Gmane-NNTP-Posting-Host: mail2.hayesinc.com
User-Agent: Pan/0.14.2 (This is not a psychotic episode. It's a cleansing moment of clarity.)
Sender: news <news@sea.gmane.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi all,

Which type of query should I use for the following type of thing.

I have multiple words/phrases.  I want to run a search for them all OR'd
together.  But I want the documents with the most distinct matches to have
the highest score.

An example.  I want to search for "TOM OR DICK OR HARRY". I want the
documents with TOM AND DICK AND HARRY to score highest, followed by those
with any two of the words then followed by those with only one of the
words.

Things get really interesting when the search string contains subphrases;
e.g "TOM SMITH" OR "DICK JONES" or "HARRY SMELTZER".

suggestions?
arturo



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25700-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 25 20:05:48 2007
Return-Path: <java-user-return-25700-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 750 invoked from network); 25 Jan 2007 20:05:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Jan 2007 20:05:47 -0000
Received: (qmail 23807 invoked by uid 500); 25 Jan 2007 20:05:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23321 invoked by uid 500); 25 Jan 2007 20:05:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23310 invoked by uid 99); 25 Jan 2007 20:05:46 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Jan 2007 12:05:46 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of jak-lucene-user@m.gmane.org designates 80.91.229.2 as permitted sender)
Received: from [80.91.229.2] (HELO ciao.gmane.org) (80.91.229.2)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Jan 2007 12:05:36 -0800
Received: from root by ciao.gmane.org with local (Exim 4.43)
	id 1HAAqG-0004b5-1J
	for java-user@lucene.apache.org; Thu, 25 Jan 2007 21:05:04 +0100
Received: from mail2.hayesinc.com ([207.10.43.2])
        by main.gmane.org with esmtp (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <java-user@lucene.apache.org>; Thu, 25 Jan 2007 21:05:04 +0100
Received: from aperez by mail2.hayesinc.com with local (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <java-user@lucene.apache.org>; Thu, 25 Jan 2007 21:05:04 +0100
X-Injected-Via-Gmane: http://gmane.org/
To: java-user@lucene.apache.org
From:  Arturo Perez <aperez@hayesinc.com>
Subject:  Anyone have an XMLAnalyzer?
Date:  Thu, 25 Jan 2007 15:03:29 -0500
Organization:  Hayes, Inc.
Lines: 4
Message-ID:  <pan.2007.01.25.20.03.29.303869@hayesinc.com>
Mime-Version:  1.0
Content-Type:  text/plain; charset=ISO-8859-1
Content-Transfer-Encoding:  8bit
X-Complaints-To: usenet@sea.gmane.org
X-Gmane-NNTP-Posting-Host: mail2.hayesinc.com
User-Agent: Pan/0.14.2 (This is not a psychotic episode. It's a cleansing moment of clarity.)
Sender: news <news@sea.gmane.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Is there an analyzer that can work with XML?  Any suggestions for such?

-arturo



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25701-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 25 20:16:35 2007
Return-Path: <java-user-return-25701-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5062 invoked from network); 25 Jan 2007 20:16:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Jan 2007 20:16:34 -0000
Received: (qmail 36224 invoked by uid 500); 25 Jan 2007 20:16:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36191 invoked by uid 500); 25 Jan 2007 20:16:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36180 invoked by uid 99); 25 Jan 2007 20:16:33 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Jan 2007 12:16:33 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of karl.wettin@gmail.com designates 64.233.184.226 as permitted sender)
Received: from [64.233.184.226] (HELO wr-out-0506.google.com) (64.233.184.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Jan 2007 12:16:24 -0800
Received: by wr-out-0506.google.com with SMTP id i21so508683wra
        for <java-user@lucene.apache.org>; Thu, 25 Jan 2007 12:16:03 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=Un/3sg2kZ2ZWv8tYobU1Jmm84j3joDFhaWUmitJTe19xQQGtJO/JJm/HXx1jC4YpDjO74NvLbn7q8958/5XTV+dz2Oo55odAfLQX2kAqRuXgO/Oi5zR35QNXv2oDZGz2M4DPiEOyIKJmyyTuPWzkvu8UgyFyQ4BZgVh84ZckTn4=
Received: by 10.90.102.20 with SMTP id z20mr2813298agb.1169756163382;
        Thu, 25 Jan 2007 12:16:03 -0800 (PST)
Received: from ?192.168.1.8? ( [83.249.100.34])
        by mx.google.com with ESMTP id c10sm10765341nfb.2007.01.25.12.16.01;
        Thu, 25 Jan 2007 12:16:02 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <7972DE03-9910-4329-B08A-F1DCD1620D92@genome.chop.edu>
References: <7972DE03-9910-4329-B08A-F1DCD1620D92@genome.chop.edu>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <12725297-5811-4852-97B0-40E8D85D30B1@gmail.com>
Content-Transfer-Encoding: 7bit
From: karl wettin <karl.wettin@gmail.com>
Subject: Re: SpellChecker::suggestSimilar() Question
Date: Thu, 25 Jan 2007 21:15:21 +0100
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org


25 jan 2007 kl. 20.43 skrev Ryan O'Hara:

> Is there anyway to sort the suggestions prior, so that grabbing  
> only one suggestion would give you the best suggestion, in this  
> case "genetics"?

Without having looked at the code for a long time, I think the  
problem is what the lucene scoring consider to be best. First the  
grams are searched, resulting in a number of hits. Then the edit- 
distance is calculated on each hit. "Genetics" is appearently the  
third most similar hit according to Lucene, but the best according to  
Levenshtein.

I.e. Lucene does not use edit-distance as similarity. You need to get  
a bunch of best hits in order to find the one with the smallest edit- 
distance.


Hope this helps.

-- 
karl

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25702-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 25 20:23:00 2007
Return-Path: <java-user-return-25702-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 13714 invoked from network); 25 Jan 2007 20:23:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Jan 2007 20:23:00 -0000
Received: (qmail 43932 invoked by uid 500); 25 Jan 2007 20:22:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43896 invoked by uid 500); 25 Jan 2007 20:22:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43885 invoked by uid 99); 25 Jan 2007 20:22:58 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Jan 2007 12:22:58 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of DORONC@il.ibm.com designates 195.212.29.151 as permitted sender)
Received: from [195.212.29.151] (HELO mtagate2.de.ibm.com) (195.212.29.151)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Jan 2007 12:22:47 -0800
Received: from d12nrmr1607.megacenter.de.ibm.com (d12nrmr1607.megacenter.de.ibm.com [9.149.167.49])
	by mtagate2.de.ibm.com (8.13.8/8.13.8) with ESMTP id l0PKMQ62187068
	for <java-user@lucene.apache.org>; Thu, 25 Jan 2007 20:22:26 GMT
Received: from d12av04.megacenter.de.ibm.com (d12av04.megacenter.de.ibm.com [9.149.165.229])
	by d12nrmr1607.megacenter.de.ibm.com (8.13.8/8.13.8/NCO v8.2) with ESMTP id l0PKMQxE2433098
	for <java-user@lucene.apache.org>; Thu, 25 Jan 2007 21:22:26 +0100
Received: from d12av04.megacenter.de.ibm.com (loopback [127.0.0.1])
	by d12av04.megacenter.de.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id l0PKMQMw020362
	for <java-user@lucene.apache.org>; Thu, 25 Jan 2007 21:22:26 +0100
Received: from d12mc102.megacenter.de.ibm.com (d12mc102.megacenter.de.ibm.com [9.149.167.114])
	by d12av04.megacenter.de.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id l0PKMPA6020354
	for <java-user@lucene.apache.org>; Thu, 25 Jan 2007 21:22:25 +0100
In-Reply-To: <954266.90448.qm@web60423.mail.yahoo.com>
Subject: Re: Building Lucene index for XML document
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 7.0 HF277 June 21, 2006
Message-ID: <OF79278D9E.6DD04DB1-ON8825726E.006F9211-8825726E.006FB899@il.ibm.com>
From: Doron Cohen <DORONC@il.ibm.com>
Date: Thu, 25 Jan 2007 12:20:17 -0800
X-MIMETrack: Serialize by Router on D12MC102/12/M/IBM(Release 7.0.2HF71 | November 3, 2006) at
 25/01/2007 22:22:24
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Maureen,

Some relevant info in the file formats doc -
http://lucene.apache.org/java/docs/fileformats.html

Regards,
Doron

maureen tanuwidjaja <autumn_musique@yahoo.com> wrote on 25/01/2007
01:31:25:

> btw Daniel,can please give me the reference to find the explanation
> about SegmentTermEnum/Field Infos if such one exist? I search but
> best can only find http://lucene.apache.
> org/java/docs/clover/org/apache/lucene/index/SegmentTermEnum.html
> which is the source code only...
>
>   Many thanks and Best regards ^^
>   Maureen
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25703-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 25 20:26:13 2007
Return-Path: <java-user-return-25703-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 15215 invoked from network); 25 Jan 2007 20:26:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Jan 2007 20:26:12 -0000
Received: (qmail 51948 invoked by uid 500); 25 Jan 2007 20:26:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 51717 invoked by uid 500); 25 Jan 2007 20:26:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 51706 invoked by uid 99); 25 Jan 2007 20:26:10 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Jan 2007 12:26:10 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of markrmiller@gmail.com designates 66.249.92.171 as permitted sender)
Received: from [66.249.92.171] (HELO ug-out-1314.google.com) (66.249.92.171)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Jan 2007 12:26:02 -0800
Received: by ug-out-1314.google.com with SMTP id k40so566069ugc
        for <java-user@lucene.apache.org>; Thu, 25 Jan 2007 12:25:39 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=Aqs29c/jkmX994KPsFhuXQDzelX1u1YbWGgwJhm1cUren7iVkhMzQQn012/sqE9LyX8D2QHXhrdWm1xkF8lOfG3EEjdwiobzqfrXDFdDFbVvSdsTqkOyozfx68t3dTEK8tjGpw08BO68i0d/smB+fyh0cQmo0PEMYKf+LmUOEgM=
Received: by 10.82.105.13 with SMTP id d13mr1518473buc.1169756739530;
        Thu, 25 Jan 2007 12:25:39 -0800 (PST)
Received: by 10.82.135.7 with HTTP; Thu, 25 Jan 2007 12:25:39 -0800 (PST)
Message-ID: <ab0709bf0701251225w207db6a5g5edd219a4f096bd3@mail.gmail.com>
Date: Thu, 25 Jan 2007 15:25:39 -0500
From: "Mark Miller" <markrmiller@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lock obtain timed out SimpleFSLock
In-Reply-To: <45B8BAE4.3050203@mikemccandless.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_36495_10900642.1169756739496"
References: <45B88290.10007@mikemccandless.com>
	 <173570.79013.qm@web60425.mail.yahoo.com>
	 <359a92830701250517j8735a87uc9f429e004bd9eca@mail.gmail.com>
	 <45B8BAE4.3050203@mikemccandless.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_36495_10900642.1169756739496
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

>
> But, locking should be fine even for this "hammering" use case (and if
> it's not, that's a bug, and I'd really like to know about it!).


I have hammered over 2.5 million  5-10k docs into an index this way  (a
realtime system that I had not yet added a special load call to) and had 0
problems. One indexwriter of course. It's not recommended  (utterly dog slow
and man did Hibernate add to the loading problem until I addressed batch
loading...) but it sure did work flawlessly.

------=_Part_36495_10900642.1169756739496--

From java-user-return-25704-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 25 21:29:53 2007
Return-Path: <java-user-return-25704-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38960 invoked from network); 25 Jan 2007 21:29:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Jan 2007 21:29:52 -0000
Received: (qmail 4291 invoked by uid 500); 25 Jan 2007 21:29:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4258 invoked by uid 500); 25 Jan 2007 21:29:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4247 invoked by uid 99); 25 Jan 2007 21:29:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Jan 2007 13:29:51 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of simon.willnauer@googlemail.com designates 64.233.184.237 as permitted sender)
Received: from [64.233.184.237] (HELO wr-out-0506.google.com) (64.233.184.237)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Jan 2007 13:29:42 -0800
Received: by wr-out-0506.google.com with SMTP id i3so554419wra
        for <java-user@lucene.apache.org>; Thu, 25 Jan 2007 13:29:21 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=googlemail.com; s=beta;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=CQbTNflwhRdE4FKJe3e28NY9ojCnOGib67W+7CHaeaf7eEv8CY7cvGZ/snsaG4CUBIxxPxXnW80rD1f4LSP40aGZl66AG9yTddsjuuhlyRW7/opxTAQmqDNZ5tNn7izoLxixGceX35cjDoJmns9px9wrYcv1gf8Pl00GEI8dqhk=
Received: by 10.82.169.4 with SMTP id r4mr1583875bue.1169760560032;
        Thu, 25 Jan 2007 13:29:20 -0800 (PST)
Received: by 10.82.150.5 with HTTP; Thu, 25 Jan 2007 13:29:19 -0800 (PST)
Message-ID: <f18c9dde0701251329uf2f1e45w726e010722839e01@mail.gmail.com>
Date: Thu, 25 Jan 2007 22:29:19 +0100
From: "Simon Willnauer" <simon.willnauer@googlemail.com>
Reply-To: simon.willnauer@gmail.com
To: java-user@lucene.apache.org
Subject: Re: Anyone have an XMLAnalyzer?
In-Reply-To: <pan.2007.01.25.20.03.29.303869@hayesinc.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <pan.2007.01.25.20.03.29.303869@hayesinc.com>
X-Virus-Checked: Checked by ClamAV on apache.org

It's just a google query away :)

http://www.google.com/search?hl=de&q=Lucene+XML+analyze&btnG=Google-Suche&meta=

best regards simon

On 1/25/07, Arturo Perez <aperez@hayesinc.com> wrote:
> Is there an analyzer that can work with XML?  Any suggestions for such?
>
> -arturo
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25705-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jan 25 22:19:40 2007
Return-Path: <java-user-return-25705-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 57881 invoked from network); 25 Jan 2007 22:19:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Jan 2007 22:19:38 -0000
Received: (qmail 83556 invoked by uid 500); 25 Jan 2007 22:19:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83522 invoked by uid 500); 25 Jan 2007 22:19:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83511 invoked by uid 99); 25 Jan 2007 22:19:38 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Jan 2007 14:19:38 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Jan 2007 14:19:28 -0800
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1HACw0-0006xj-8z
	for java-user@lucene.apache.org; Thu, 25 Jan 2007 14:19:08 -0800
Message-ID: <8642206.post@talk.nabble.com>
Date: Thu, 25 Jan 2007 14:19:08 -0800 (PST)
From: Doron Cohen <DORONC@il.ibm.com>
To: java-user@lucene.apache.org
Subject: Re: corrupt index: .fdx and stored norms
In-Reply-To: <452C1957.5030000@gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: DORONC@il.ibm.com
References: <d1b7bc060610101224h23a6b01bn672862a61df422e0@mail.gmail.com> <OF1922BB8D.BD0D92DA-ON88257203.00723068-88257203.0072ECBF@il.ibm.com> <OFBABD13E9.EF75B70B-ON88257203.0074A70C-88257203.0074BC89@il.ibm.com> <452C1957.5030000@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Hi Nick, 

Have you managed to solve/recreate this issue?

There has been a recent progress on index corruption issues:
http://issues.apache.org/jira/browse/LUCENE-140
http://issues.apache.org/jira/browse/LUCENE-784

In those cases an application created FSDirectory with create=false 
and created IndexWriter with create=true. Apparently this was 
not sufficient for starting from fresh, and the newly created index
was possibly using remaining files from an older index.

I cannot see a straight path where this would lead to the 
error in the line you pointed. 

It might add info to know, for your test application:
- is it deleting docs?
- FSDirectory/IndexWriter create=?
- is it modifying norms?

Regards,
Doron


Nick Puz wrote:
> 
>>>> I am working on the development of a product that is using Lucene. A
>>>> corrupt index was reported by testers and it is in an odd state.
>>>> The indexes are built in batches (to multiple ram indexes in parallel)
>>>> and then eventually merged into a disk index with
>>>> IndexWriter.addIndexes(Directory[]).
>>>> Somehow the index got corrupted, there were no indications of a crash
>>>> or errors in log. The failure in SegmentMerger.mergeNorms:
>>>>   private void mergeNorms() throws IOException {
>>>>     for (int i = 0; i < fieldInfos.size(); i++) {
>>>>       FieldInfo fi = fieldInfos.fieldInfo(i);
>>>>       if (fi.isIndexed && !fi.omitNorms) {
>>>>         IndexOutput output = directory.createOutput(segment + ".f" +
>> i);
>>>>         try {
>>>>           for (int j = 0; j < readers.size(); j++) {
>>>>             IndexReader reader = (IndexReader) readers.elementAt(j);
>>>>             int maxDoc = reader.maxDoc();
>>>>             byte[] input = new byte[maxDoc];
>>>>             reader.norms(fi.name, input, 0);  <==== ERROR HERE
>>>>             for (int k = 0; k < maxDoc; k++) {
>>>>               if (!reader.isDeleted(k)) {
>>>>                 output.writeByte(input[k]);
>>>>               }
>>>>             }
>>>>           }
>>>>         } finally {
>>>>           output.close();
>>>>         }
>>>>       }
>>>>     }
>>>>   }
>>>>
>>>> The problem is that the maxDoc() returned by the indexReader
>>>> (FieldsReader in this case) is larger then the size, in bytes, of the
>>>> norms file. then there is an error in IndexInput.read(byte[], int,
>>>> int) because there is not enough data in file to read.
>>>> Here is part of the directory listing (there are many stored fields of
>>>> the same size so omitting all but first 3):
>>>>
>>>> -rw-r--r--  1 icmadmin db2grp1        811 Sep 27 20:48 _a4.fnm
>>>> -rw-r--r--  1 icmadmin db2grp1    1451696 Sep 27 20:49 _a4.fdx
>>>> -rw-r--r--  1 icmadmin db2grp1   12736304 Sep 27 20:49 _a4.fdt
>>>> -rw-r--r--  1 icmadmin db2grp1 5648544509 Sep 27 21:30 _a4.prx
>>>> -rw-r--r--  1 icmadmin db2grp1 1695149231 Sep 27 21:30 _a4.frq
>>>> -rw-r--r--  1 icmadmin db2grp1   45688880 Sep 27 21:30 _a4.tis
>>>> -rw-r--r--  1 icmadmin db2grp1     673588 Sep 27 21:30 _a4.tii
>>>> -rw-r--r--  1 icmadmin db2grp1     181159 Sep 27 21:30 _a4.f2
>>>> -rw-r--r--  1 icmadmin db2grp1     181159 Sep 27 21:30 _a4.f1
>>>> -rw-r--r--  1 icmadmin db2grp1     181159 Sep 27 21:30 _a4.f0
>>>>
>>>> from looking at the code the sizeof(.fdx)/8 should equal sizeof(.f0)
>>>> but it doesn't in this case.
>>>>
> 

-- 
View this message in context: http://www.nabble.com/corrupt-index%3A-.fdx-and-stored-norms-tf2418902.html#a8642206
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25706-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 26 01:30:34 2007
Return-Path: <java-user-return-25706-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1083 invoked from network); 26 Jan 2007 01:30:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Jan 2007 01:30:33 -0000
Received: (qmail 46095 invoked by uid 500); 26 Jan 2007 01:30:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46070 invoked by uid 500); 26 Jan 2007 01:30:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46059 invoked by uid 99); 26 Jan 2007 01:30:32 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Jan 2007 17:30:32 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of jak-lucene-user@m.gmane.org designates 80.91.229.2 as permitted sender)
Received: from [80.91.229.2] (HELO ciao.gmane.org) (80.91.229.2)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Jan 2007 17:30:22 -0800
Received: from list by ciao.gmane.org with local (Exim 4.43)
	id 1HAFtt-0000eW-9I
	for java-user@lucene.apache.org; Fri, 26 Jan 2007 02:29:09 +0100
Received: from pool-71-242-54-86.phlapa.east.verizon.net ([71.242.54.86])
        by main.gmane.org with esmtp (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <java-user@lucene.apache.org>; Fri, 26 Jan 2007 02:29:09 +0100
Received: from aperez by pool-71-242-54-86.phlapa.east.verizon.net with local (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <java-user@lucene.apache.org>; Fri, 26 Jan 2007 02:29:09 +0100
X-Injected-Via-Gmane: http://gmane.org/
To: java-user@lucene.apache.org
From:  Arturo Prez <aperez@hayesinc.com>
Subject:  Re: Anyone have an XMLAnalyzer?
Date:  Thu, 25 Jan 2007 20:28:08 -0500
Organization:  Hayes, Inc.
Lines: 19
Message-ID:  <aperez-6A3984.20275725012007@sea.gmane.org>
References:  <pan.2007.01.25.20.03.29.303869@hayesinc.com> <f18c9dde0701251329uf2f1e45w726e010722839e01@mail.gmail.com>
X-Complaints-To: usenet@sea.gmane.org
X-Gmane-NNTP-Posting-Host: pool-71-242-54-86.phlapa.east.verizon.net
Mail-Copies-To: poster
User-Agent: MT-NewsWatcher/3.5.2 (PPC Mac OS X)
Sender: news <news@sea.gmane.org>
X-Virus-Checked: Checked by ClamAV on apache.org

In article 
<f18c9dde0701251329uf2f1e45w726e010722839e01@mail.gmail.com>,
 "Simon Willnauer" <simon.willnauer@googlemail.com> wrote:

> http://www.google.com/search?hl=de&q=Lucene+XML+analyze&btnG=Google-Suche&meta
> =

Yeah, I'd seen that.  I was hoping for something a bit more tightly 
integrated than Digester.  More specifically, I already parse my 
documents with SAX and save the indexable stuff. But I pass plaintext to 
the indexer and I have a problem with the highlighter against the XML.

What I'd like to do is insert markup XML into the document's XML and 
pass it through a style sheet.  But I can't pass XML directly into the 
index because of all the XML syntax.  My assumption was that a 
XMLAnalyzer would address the issue because the tokens would have the 
correct offsets etc.

-arturo


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25707-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 26 03:22:42 2007
Return-Path: <java-user-return-25707-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25968 invoked from network); 26 Jan 2007 03:22:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Jan 2007 03:22:42 -0000
Received: (qmail 37439 invoked by uid 500); 26 Jan 2007 03:22:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37412 invoked by uid 500); 26 Jan 2007 03:22:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37401 invoked by uid 99); 26 Jan 2007 03:22:42 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Jan 2007 19:22:42 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of sairaj.sunil@gmail.com designates 66.249.92.173 as permitted sender)
Received: from [66.249.92.173] (HELO ug-out-1314.google.com) (66.249.92.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Jan 2007 19:22:33 -0800
Received: by ug-out-1314.google.com with SMTP id k40so642697ugc
        for <java-user@lucene.apache.org>; Thu, 25 Jan 2007 19:22:12 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=a3wAVLaYFw6zKIjiZ6Euw6780sWq7/UqAjTVAuY7Fc/IB14oNkI080OQJdQ8P6RRgV29P0b+mCy8xMVe3Aa+iH8KbAMmeaCzGZ0FLUqr6Uu4KIbAd7kGUi1xJy0RYjasnJuhLp8TTjJhTbz2n9N1OxAdCMAuBwWW+dRjkP66H2g=
Received: by 10.82.183.19 with SMTP id g19mr1671545buf.1169781731741;
        Thu, 25 Jan 2007 19:22:11 -0800 (PST)
Received: by 10.82.157.16 with HTTP; Thu, 25 Jan 2007 19:22:11 -0800 (PST)
Message-ID: <fae460120701251922s75f4ac5cw818044e4a4c18af6@mail.gmail.com>
Date: Fri, 26 Jan 2007 08:52:11 +0530
From: "Sairaj Sunil" <sairaj.sunil@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene Indexing
In-Reply-To: <5a8b64620701241312u73562396od3adf2e30cdc38c5@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_60882_20981688.1169781731715"
References: <fae460120701240822t745e747r139a7749bbda3774@mail.gmail.com>
	 <5a8b64620701241312u73562396od3adf2e30cdc38c5@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_60882_20981688.1169781731715
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi
I was asking what exactly is the inverted indexing strategy used for storing
the index. Is it batch-based index/b-tree based/segment-based data structure
that is used as an index data structure.


On 1/25/07, Rajiv Roopan <rajiv.roopan@gmail.com> wrote:
>
>
> http://lucene.apache.org/java/docs/api/org/apache/lucene/search/Similarity.html
>
>
> On 1/24/07, Sairaj Sunil <sairaj.sunil@gmail.com> wrote:
> >
> > Hi all,
> > Can you tell me the exact indexing algorithm used by Lucene. or give
> some
> > links to the documents that describe the algorithm used by lucene
> > Thanks in advance
> > --
> > Sairaj Sunil
> >
> >
>
>


-- 
Sairaj Sunil

------=_Part_60882_20981688.1169781731715--

From java-user-return-25708-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 26 05:09:39 2007
Return-Path: <java-user-return-25708-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51856 invoked from network); 26 Jan 2007 05:09:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Jan 2007 05:09:39 -0000
Received: (qmail 24836 invoked by uid 500); 26 Jan 2007 05:09:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24799 invoked by uid 500); 26 Jan 2007 05:09:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24787 invoked by uid 99); 26 Jan 2007 05:09:38 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Jan 2007 21:09:38 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [216.239.128.26] (HELO smtp.omnis.com) (216.239.128.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Jan 2007 21:09:29 -0800
Received: from smtp-b.omnis.com (smtp-b.omnis.com [216.239.128.238])
	by smtp.omnis.com (Postfix) with ESMTP id BBE2C1B465
	for <java-user@lucene.apache.org>; Thu, 25 Jan 2007 21:09:08 -0800 (PST)
Received: from [192.168.6.223] (d-65-175-190-143.metrocast.net [65.175.190.143])
	(Authenticated sender: wataylor@as-st.com)
	by smtp-b.omnis.com (Postfix) with ESMTP id 357C41C0086A
	for <java-user@lucene.apache.org>; Thu, 25 Jan 2007 21:09:09 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v752.2)
Content-Transfer-Encoding: 7bit
Message-Id: <0920FF49-F321-488D-B779-3A55450456A9@as-st.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
To: java-user@lucene.apache.org
From: Bill Taylor <wataylor@as-st.com>
Subject: How many documents in the biggest Lucene index to date?
Date: Fri, 26 Jan 2007 00:45:43 -0500
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org

I have used Lucene to index a small collection - only a few hundred  
documents.  I have a potential client who wants to index a collection  
which will start at about a million documents and could easily grow  
to two million.

Has anyone used Lucene with an index that large?

Thank you very much.

Bill Taylor



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25709-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 26 05:09:46 2007
Return-Path: <java-user-return-25709-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51922 invoked from network); 26 Jan 2007 05:09:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Jan 2007 05:09:45 -0000
Received: (qmail 25664 invoked by uid 500); 26 Jan 2007 05:09:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25631 invoked by uid 500); 26 Jan 2007 05:09:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25613 invoked by uid 99); 26 Jan 2007 05:09:42 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Jan 2007 21:09:42 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Jan 2007 21:09:33 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id DF7F35B763; Thu, 25 Jan 2007 21:09:12 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id C792A7F403
	for <java-user@lucene.apache.org>; Thu, 25 Jan 2007 21:09:12 -0800 (PST)
Date: Thu, 25 Jan 2007 21:09:12 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Extending scoring to eliminate sorting on timestamp
In-Reply-To: <20070123193726.47487.qmail@web81706.mail.mud.yahoo.com>
Message-ID: <Pine.LNX.4.58.0701252059280.32243@hal.rescomp.berkeley.edu>
References: <20070123193726.47487.qmail@web81706.mail.mud.yahoo.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: For various reasons, we'd like to eliminate the sort step.

can you elaborate on what those reasons are?

FunctionQuery (in the solr code base, you'll find lots of discussing in
the archives of this list) can let you use a numeric field value in the
score calculation, but it still uses the FieldCache so if you are trying
to avoid that for space/time reasons it won't help.

you may also be interested in this patch...

  https://issues.apache.org/jira/browse/LUCENE-769

in the general case it should be slower then standard sorting, but if
you are dealing with an extremely large index and your result sets all
tend to be small, it may be faster (and it won't pay the initial
FieldCache setup time on frequently modified indexes)

:                    new SortField("timestamp",SortField.STRING,true)}));

why are you sorting timestamps as strings? ... if you sort them as ints,
your FieldCache will be a whole hell of a lot smaller (i'm guessing very
few documents have identicle timestamps, so your FieldCache should be at
least half as big if you sort on ints (and probably a lot more).


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25710-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 26 05:30:52 2007
Return-Path: <java-user-return-25710-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54597 invoked from network); 26 Jan 2007 05:30:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Jan 2007 05:30:51 -0000
Received: (qmail 44328 invoked by uid 500); 26 Jan 2007 05:30:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44298 invoked by uid 500); 26 Jan 2007 05:30:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44287 invoked by uid 99); 26 Jan 2007 05:30:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Jan 2007 21:30:51 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [209.73.178.145] (HELO web60417.mail.yahoo.com) (209.73.178.145)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 25 Jan 2007 21:30:42 -0800
Received: (qmail 41849 invoked by uid 60001); 26 Jan 2007 05:30:21 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=6DET/neofy+Qa3vwjYfSBPonfKs8xH1nbJLMuLXCRmMtup3w7dlMBxaWax7FYM1u4HMDUXhLzUt9qmpT1OmNVGRIokMw3h2amvlc+9v3DakVhvQWhdQKz8bbnWNvb65zNngVB59+aZBd6exy4PspX5TKrtn6TZ3rnCFywFPa3pk=;
X-YMail-OSG: nxhR2YIVM1n3l_Jxm82M.YWvBcRCvgS_ieuo9qRmg.oc4nMpafqyOYLjkg3QyCMejm6OZEJmE_4ulG2U9IZbiSF9y1g6lTOHcOY1t1qTp7_ki3ieaWoVsmicpgdeazPZSAjr.gujasZ.ZWJ1xDcQfQ2eP9NPBiE4jXOHgVuD8d2Znih9GgKh0CBWdQIln_8euUtS84p2
Received: from [155.69.175.60] by web60417.mail.yahoo.com via HTTP; Thu, 25 Jan 2007 21:30:21 PST
Date: Thu, 25 Jan 2007 21:30:21 -0800 (PST)
From: maureen tanuwidjaja <autumn_musique@yahoo.com>
Subject: Re: Building Lucene index for XML document
To: java-user@lucene.apache.org
In-Reply-To: <OF79278D9E.6DD04DB1-ON8825726E.006F9211-8825726E.006FB899@il.ibm.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-1670115499-1169789421=:41409"
Content-Transfer-Encoding: 8bit
Message-ID: <363021.41409.qm@web60417.mail.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

--0-1670115499-1169789421=:41409
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit

Thanks Doron =)
  
  Regards,
  Maureen

Doron Cohen <DORONC@il.ibm.com> wrote:  Hi Maureen,

Some relevant info in the file formats doc -
http://lucene.apache.org/java/docs/fileformats.html

Regards,
Doron

maureen tanuwidjaja  wrote on 25/01/2007
01:31:25:

> btw Daniel,can please give me the reference to find the explanation
> about SegmentTermEnum/Field Infos if such one exist? I search but
> best can only find http://lucene.apache.
> org/java/docs/clover/org/apache/lucene/index/SegmentTermEnum.html
> which is the source code only...
>
>   Many thanks and Best regards ^^
>   Maureen
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



 
---------------------------------
It's here! Your new message!
Get new email alerts with the free Yahoo! Toolbar.
--0-1670115499-1169789421=:41409--

From java-user-return-25711-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 26 08:14:04 2007
Return-Path: <java-user-return-25711-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82487 invoked from network); 26 Jan 2007 08:14:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Jan 2007 08:14:03 -0000
Received: (qmail 71037 invoked by uid 500); 26 Jan 2007 08:14:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71003 invoked by uid 500); 26 Jan 2007 08:14:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70992 invoked by uid 99); 26 Jan 2007 08:14:02 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Jan 2007 00:14:01 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of karl.wettin@gmail.com designates 64.233.182.190 as permitted sender)
Received: from [64.233.182.190] (HELO nf-out-0910.google.com) (64.233.182.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Jan 2007 00:13:52 -0800
Received: by nf-out-0910.google.com with SMTP id a27so1006254nfc
        for <java-user@lucene.apache.org>; Fri, 26 Jan 2007 00:13:31 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=oGIK691q83HJsm7z7sEw18wcp4OHzlFCGwy1kDjXHYPSl8lsm2PRLgPAb7X3Nqcb0mdcKBusvYjZY+6hpM55sBru/LtiFmYt/pvOQ9KYEDkb/NVAXaRQM4vgL+jtqcnxGXRftubza4hvBijWYL63fZRyXj/IPkIJjbCB0AGF0R0=
Received: by 10.49.65.15 with SMTP id s15mr5244329nfk.1169799210422;
        Fri, 26 Jan 2007 00:13:30 -0800 (PST)
Received: from ?192.168.1.4? ( [83.249.100.34])
        by mx.google.com with ESMTP id l21sm11980775nfc.2007.01.26.00.13.29;
        Fri, 26 Jan 2007 00:13:29 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <0920FF49-F321-488D-B779-3A55450456A9@as-st.com>
References: <0920FF49-F321-488D-B779-3A55450456A9@as-st.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <9809B8EE-6F1B-4D4C-9BAD-5EFD604D16A7@gmail.com>
Content-Transfer-Encoding: 7bit
From: karl wettin <karl.wettin@gmail.com>
Subject: Re: How many documents in the biggest Lucene index to date?
Date: Fri, 26 Jan 2007 09:12:47 +0100
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org


26 jan 2007 kl. 06.45 skrev Bill Taylor:

> I have used Lucene to index a small collection - only a few hundred  
> documents.  I have a potential client who wants to index a  
> collection which will start at about a million documents and could  
> easily grow to two million.
>

The maximum number of documents in an index is Integer.MAX_VALUE (2  
147 483 647), but it it possible to combine multiple indices.

> Has anyone used Lucene with an index that large?

I never went above the limit my self, but I'm sure sombody did.



-- 
karl

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25712-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 26 08:32:31 2007
Return-Path: <java-user-return-25712-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93011 invoked from network); 26 Jan 2007 08:32:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Jan 2007 08:32:29 -0000
Received: (qmail 88281 invoked by uid 500); 26 Jan 2007 08:32:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88246 invoked by uid 500); 26 Jan 2007 08:32:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88235 invoked by uid 99); 26 Jan 2007 08:32:29 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Jan 2007 00:32:29 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [69.44.16.11] (HELO getopt.org) (69.44.16.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Jan 2007 00:32:19 -0800
Received: from [192.168.0.253] (75-mo3-2.acn.waw.pl [62.121.105.75])
	(authenticated)
	by getopt.org (8.11.6/8.11.6) with ESMTP id l0Q8W0d27996
	for <java-user@lucene.apache.org>; Fri, 26 Jan 2007 02:32:00 -0600
Message-ID: <45B9BC81.2080203@getopt.org>
Date: Fri, 26 Jan 2007 09:32:01 +0100
From: Andrzej Bialecki <ab@getopt.org>
User-Agent: Thunderbird 1.5.0.9 (Windows/20061207)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: How many documents in the biggest Lucene index to date?
References: <0920FF49-F321-488D-B779-3A55450456A9@as-st.com>
In-Reply-To: <0920FF49-F321-488D-B779-3A55450456A9@as-st.com>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Bill Taylor wrote:
> I have used Lucene to index a small collection - only a few hundred 
> documents.  I have a potential client who wants to index a collection 
> which will start at about a million documents and could easily grow to 
> two million.
>
> Has anyone used Lucene with an index that large?

I'm working on a regular basis with indexes containing several million 
documents. Somewhere around 10 mln documents, depending on the hardware 
and the type of queries, you will need to consider splitting the index 
into parts distributed over several machines - but below that size you 
should be able to get sub-second responses to typical queries.

-- 
Best regards,
Andrzej Bialecki     <><
 ___. ___ ___ ___ _ _   __________________________________
[__ || __|__/|__||\/|  Information Retrieval, Semantic Web
___|||__||  \|  ||  |  Embedded Unix, System Integration
http://www.sigram.com  Contact: info at sigram dot com



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25713-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 26 09:35:23 2007
Return-Path: <java-user-return-25713-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32270 invoked from network); 26 Jan 2007 09:35:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Jan 2007 09:35:21 -0000
Received: (qmail 77042 invoked by uid 500); 26 Jan 2007 09:35:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76170 invoked by uid 500); 26 Jan 2007 09:35:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76159 invoked by uid 99); 26 Jan 2007 09:35:20 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Jan 2007 01:35:20 -0800
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=MSGID_MULTIPLE_AT
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [194.125.145.37] (HELO mercury.propylon.com) (194.125.145.37)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Jan 2007 01:35:10 -0800
Received: from propylon-sdsl.sdsl.esat.net ([193.120.101.26] helo=damienmc)
	by mercury.propylon.com with esmtp (Exim 4.50)
	id 1HANSH-0004id-18
	for java-user@lucene.apache.org; Fri, 26 Jan 2007 09:33:14 +0000
From: "Damien McCarthy" <damien.mccarthy@propylon.com>
To: <java-user@lucene.apache.org>
References: <fae460120701240822t745e747r139a7749bbda3774@mail.gmail.com>	 <5a8b64620701241312u73562396od3adf2e30cdc38c5@mail.gmail.com> <fae460120701251922s75f4ac5cw818044e4a4c18af6@mail.gmail.com>
In-Reply-To: <fae460120701251922s75f4ac5cw818044e4a4c18af6@mail.gmail.com>
Date: Fri, 26 Jan 2007 09:34:45 -0000
Message-ID: <001601c7412d$36dcc400$a4964c00$@mccarthy@propylon.com>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 12.0
Thread-Index: AcdA+QbkBetz62ONQhKbr0RY3d58WAAM/nOg
Content-Language: en-gb
x-cr-hashedpuzzle: AVyg A4Tv BZ1X B3u2 CEgP D2Cx EKg+ EOrg GkC1 HKe6 HhRA H5nN IA6/ IWuv I5TA KDbJ;1;agBhAHYAYQAtAHUAcwBlAHIAQABsAHUAYwBlAG4AZQAuAGEAcABhAGMAaABlAC4AbwByAGcA;Sosha1_v1;7;{7AEE6A3B-D464-490B-9804-BA79D55B1293};ZABhAG0AaQBlAG4ALgBtAGMAYwBhAHIAdABoAHkAQABwAHIAbwBwAHkAbABvAG4ALgBjAG8AbQA=;Fri, 26 Jan 2007 09:34:27 GMT;UgBFADoAIABMAHUAYwBlAG4AZQAgAEkAbgBkAGUAeABpAG4AZwA=
x-cr-puzzleid: {7AEE6A3B-D464-490B-9804-BA79D55B1293}
X-SA-Exim-Connect-IP: 193.120.101.26
X-SA-Exim-Mail-From: damien.mccarthy@propylon.com
Subject: RE: Lucene Indexing
X-Spam-Checker-Version: SpamAssassin 3.0.3 (2005-04-27) on 
	mercury.propylon.com
X-Spam-Level: 
X-SA-Exim-Version: 4.2 (built Thu, 03 Mar 2005 10:44:12 +0100)
X-SA-Exim-Scanned: Yes (on mercury.propylon.com)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=0.1 required=5.0 tests=AWL autolearn=failed 
	version=3.0.3

This document should contain the information you need :

http://lucene.sourceforge.net/talks/inktomi/

Damien.
-----Original Message-----
From: Sairaj Sunil [mailto:sairaj.sunil@gmail.com] 
Sent: 26 January 2007 03:22
To: java-user@lucene.apache.org
Subject: Re: Lucene Indexing

Hi
I was asking what exactly is the inverted indexing strategy used for storing
the index. Is it batch-based index/b-tree based/segment-based data structure
that is used as an index data structure.


On 1/25/07, Rajiv Roopan <rajiv.roopan@gmail.com> wrote:
>
>
>
http://lucene.apache.org/java/docs/api/org/apache/lucene/search/Similarity.h
tml
>
>
> On 1/24/07, Sairaj Sunil <sairaj.sunil@gmail.com> wrote:
> >
> > Hi all,
> > Can you tell me the exact indexing algorithm used by Lucene. or give
> some
> > links to the documents that describe the algorithm used by lucene
> > Thanks in advance
> > --
> > Sairaj Sunil
> >
> >
>
>


-- 
Sairaj Sunil


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25714-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 26 09:44:16 2007
Return-Path: <java-user-return-25714-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37717 invoked from network); 26 Jan 2007 09:44:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Jan 2007 09:44:15 -0000
Received: (qmail 88026 invoked by uid 500); 26 Jan 2007 09:44:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88003 invoked by uid 500); 26 Jan 2007 09:44:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87992 invoked by uid 99); 26 Jan 2007 09:44:14 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Jan 2007 01:44:14 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [217.12.10.215] (HELO web26004.mail.ukl.yahoo.com) (217.12.10.215)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 26 Jan 2007 01:44:04 -0800
Received: (qmail 35358 invoked by uid 60001); 26 Jan 2007 09:43:41 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=LD2q62VZnKnNrDmMaGnljVJOvlIWMWyJ9CrAfwtEx4Ttyu9JRe1eoe72uhNQDClD3npbi/lgo3k53dwIlfaZhi/i46lcsHhXF6I9zS6b06yMTGy70PrrlWgdWuB3RyTsU5YjWxcQToheGjfyzB0U4UD4sqUXfsKf+YVnrb3yQE8=;
X-YMail-OSG: mT6TOnQVM1nq_Oi4GncYsjJzC_ng6fIq.Spyqm5tlGwwKedF7ag_547.ih76dK_XROuXQ9bvbquLddyuIN.b00qlHXf9re8zuL5B2oqZKMqaa1E.1kgFfQpo2.p5a3oyhdOPhX0lBScxUDM0AH51y4qDOtAmwP2r
Received: from [193.36.230.96] by web26004.mail.ukl.yahoo.com via HTTP; Fri, 26 Jan 2007 09:43:41 GMT
X-Mailer: YahooMailRC/368.3 YahooMailWebService/0.6.132.7
Date: Fri, 26 Jan 2007 09:43:41 +0000 (GMT)
From: mark harwood <markharw00d@yahoo.co.uk>
Subject: Re: How many documents in the biggest Lucene index to date?
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable
Message-ID: <444022.34238.qm@web26004.mail.ukl.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

I'm aware of a single index with the following characteristics:=0A=0ASingle=
 index  size =3D 33.2GB=0ADocuments: 263 million=0ASearchable fields =3D 7 =
=0AQuery Response times: <1 second for a single term search=0AAnything from=
 5-20 seconds for more complex searches (e.g fuzzy matching on multiple fie=
lds)=0A=0AThis is an extreme example and we normally use a distributed arch=
itecture with multiple indexes/servers to deal with data on this scale (as =
Andrzej also suggests in his mail).=0A=0ACheers,=0AMark=0A=0A=0A----- Origi=
nal Message ----=0AFrom: Andrzej Bialecki <ab@getopt.org>=0ATo: java-user@l=
ucene.apache.org=0ASent: Friday, 26 January, 2007 8:32:01 AM=0ASubject: Re:=
 How many documents in the biggest Lucene index to date?=0A=0ABill Taylor w=
rote:=0A> I have used Lucene to index a small collection - only a few hundr=
ed =0A> documents.  I have a potential client who wants to index a collecti=
on =0A> which will start at about a million documents and could easily grow=
 to =0A> two million.=0A>=0A> Has anyone used Lucene with an index that lar=
ge?=0A=0AI'm working on a regular basis with indexes containing several mil=
lion =0Adocuments. Somewhere around 10 mln documents, depending on the hard=
ware =0Aand the type of queries, you will need to consider splitting the in=
dex =0Ainto parts distributed over several machines - but below that size y=
ou =0Ashould be able to get sub-second responses to typical queries.=0A=0A-=
- =0ABest regards,=0AAndrzej Bialecki     <><=0A ___. ___ ___ ___ _ _   ___=
_______________________________=0A[__ || __|__/|__||\/|  Information Retrie=
val, Semantic Web=0A___|||__||  \|  ||  |  Embedded Unix, System Integratio=
n=0Ahttp://www.sigram.com  Contact: info at sigram dot com=0A=0A=0A=0A-----=
----------------------------------------------------------------=0ATo unsub=
scribe, e-mail: java-user-unsubscribe@lucene.apache.org=0AFor additional co=
mmands, e-mail: java-user-help@lucene.apache.org=0A=0A=0A=0A=0A=0A=0A=09=09=
=0A___________________________________________________________ =0AAll New Y=
ahoo! Mail =96 Tired of unwanted email come-ons? Let our SpamGuard protect =
you. http://uk.docs.yahoo.com/nowyoucan.html

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25715-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 26 10:12:13 2007
Return-Path: <java-user-return-25715-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 49988 invoked from network); 26 Jan 2007 10:12:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Jan 2007 10:12:12 -0000
Received: (qmail 29662 invoked by uid 500); 26 Jan 2007 10:12:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29584 invoked by uid 500); 26 Jan 2007 10:12:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29572 invoked by uid 99); 26 Jan 2007 10:12:11 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Jan 2007 02:12:11 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of sairaj.sunil@gmail.com designates 64.233.182.191 as permitted sender)
Received: from [64.233.182.191] (HELO nf-out-0910.google.com) (64.233.182.191)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Jan 2007 02:12:02 -0800
Received: by nf-out-0910.google.com with SMTP id a27so1028182nfc
        for <java-user@lucene.apache.org>; Fri, 26 Jan 2007 02:11:41 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=L+Cfm4kR4O/q4aO96CkjdGgqvRDWUrJn8Jr4vhv/ZLc90IW6IiB225yL2fBqkAYcj0IRiiJwjYMLPz5YqFo6ldhITUVMYvrBeGPaQ21Xysqbp+EmXK9mlfhX1bnoiajaLVfPPCMmjYqJTIKKBlin51PmC7+4q4A5l46G7954DIQ=
Received: by 10.82.163.13 with SMTP id l13mr1670637bue.1169806300492;
        Fri, 26 Jan 2007 02:11:40 -0800 (PST)
Received: by 10.82.157.16 with HTTP; Fri, 26 Jan 2007 02:11:40 -0800 (PST)
Message-ID: <fae460120701260211o1f229086ob2f30bf8fa1b68dc@mail.gmail.com>
Date: Fri, 26 Jan 2007 15:41:40 +0530
From: "Sairaj Sunil" <sairaj.sunil@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene Indexing
In-Reply-To: <-6355305061485664655@unknownmsgid>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_67525_32522024.1169806300462"
References: <fae460120701240822t745e747r139a7749bbda3774@mail.gmail.com>
	 <5a8b64620701241312u73562396od3adf2e30cdc38c5@mail.gmail.com>
	 <fae460120701251922s75f4ac5cw818044e4a4c18af6@mail.gmail.com>
	 <-6355305061485664655@unknownmsgid>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_67525_32522024.1169806300462
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I went through that document. It mentions about the Lucene's Indexing
algorithm that it uses incremental algorithm. So, can i say that it uses a
combination of segment-based and b-tree based strategies. If i am wrong
please correct me.

On 1/26/07, Damien McCarthy <damien.mccarthy@propylon.com> wrote:
>
> This document should contain the information you need :
>
> http://lucene.sourceforge.net/talks/inktomi/
>
> Damien.
> -----Original Message-----
> From: Sairaj Sunil [mailto:sairaj.sunil@gmail.com]
> Sent: 26 January 2007 03:22
> To: java-user@lucene.apache.org
> Subject: Re: Lucene Indexing
>
> Hi
> I was asking what exactly is the inverted indexing strategy used for
> storing
> the index. Is it batch-based index/b-tree based/segment-based data
> structure
> that is used as an index data structure.
>
>
> On 1/25/07, Rajiv Roopan <rajiv.roopan@gmail.com> wrote:
> >
> >
> >
>
> http://lucene.apache.org/java/docs/api/org/apache/lucene/search/Similarity.h
> tml
> >
> >
> > On 1/24/07, Sairaj Sunil <sairaj.sunil@gmail.com> wrote:
> > >
> > > Hi all,
> > > Can you tell me the exact indexing algorithm used by Lucene. or give
> > some
> > > links to the documents that describe the algorithm used by lucene
> > > Thanks in advance
> > > --
> > > Sairaj Sunil
> > >
> > >
> >
> >
>
>
> --
> Sairaj Sunil
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
Sairaj Sunil
II Mtech(CS)
SSSIHL
Prashanthi Nilayam

------=_Part_67525_32522024.1169806300462--

From java-user-return-25716-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 26 11:49:48 2007
Return-Path: <java-user-return-25716-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81605 invoked from network); 26 Jan 2007 11:49:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Jan 2007 11:49:48 -0000
Received: (qmail 58387 invoked by uid 500); 26 Jan 2007 11:49:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58306 invoked by uid 500); 26 Jan 2007 11:49:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58236 invoked by uid 99); 26 Jan 2007 11:49:42 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Jan 2007 03:49:42 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [208.97.132.66] (HELO spunkymail-a10.g.dreamhost.com) (208.97.132.66)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Jan 2007 03:49:32 -0800
Received: from [192.168.0.2] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a10.g.dreamhost.com (Postfix) with ESMTP id 1A9B316326F
	for <java-user@lucene.apache.org>; Fri, 26 Jan 2007 03:49:10 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <fae460120701260211o1f229086ob2f30bf8fa1b68dc@mail.gmail.com>
References: <fae460120701240822t745e747r139a7749bbda3774@mail.gmail.com> <5a8b64620701241312u73562396od3adf2e30cdc38c5@mail.gmail.com> <fae460120701251922s75f4ac5cw818044e4a4c18af6@mail.gmail.com> <-6355305061485664655@unknownmsgid> <fae460120701260211o1f229086ob2f30bf8fa1b68dc@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <FBA05139-793B-4BB1-8654-9A7AD071BDB6@apache.org>
Content-Transfer-Encoding: 7bit
From: Grant Ingersoll <gsingers@apache.org>
Subject: Re: Lucene Indexing
Date: Fri, 26 Jan 2007 06:49:06 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org

I don't believe there is any b-tree strategy in Lucene.  I would say  
that it is segment based, I guess, in that it indexes documents in  
memory based on your merge factors and then flushes to disk, at then  
end you can choose to merge the segments together via optimize().  I  
find it to have a structure similar to that described in section 8.2  
of "Modern Information Retrieval" by Baeza-Yates, et. al with a fair  
number of improvements for storing terms, positions and frequency  
info, etc. in compact form.

References you might find useful:
http://lucene.apache.org/java/docs/fileformats.html

If you feel like helping w/ this part of the docs, I would love some  
help on https://issues.apache.org/jira/browse/LUCENE-765

Probably the best way to know at this point is to trace through the  
code.

-Grant

On Jan 26, 2007, at 5:11 AM, Sairaj Sunil wrote:

> I went through that document. It mentions about the Lucene's Indexing
> algorithm that it uses incremental algorithm. So, can i say that it  
> uses a
> combination of segment-based and b-tree based strategies. If i am  
> wrong
> please correct me.
>
> On 1/26/07, Damien McCarthy <damien.mccarthy@propylon.com> wrote:
>>
>> This document should contain the information you need :
>>
>> http://lucene.sourceforge.net/talks/inktomi/
>>
>> Damien.
>> -----Original Message-----
>> From: Sairaj Sunil [mailto:sairaj.sunil@gmail.com]
>> Sent: 26 January 2007 03:22
>> To: java-user@lucene.apache.org
>> Subject: Re: Lucene Indexing
>>
>> Hi
>> I was asking what exactly is the inverted indexing strategy used for
>> storing
>> the index. Is it batch-based index/b-tree based/segment-based data
>> structure
>> that is used as an index data structure.
>>
>>
>> On 1/25/07, Rajiv Roopan <rajiv.roopan@gmail.com> wrote:
>> >
>> >
>> >
>>
>> http://lucene.apache.org/java/docs/api/org/apache/lucene/search/ 
>> Similarity.h
>> tml
>> >
>> >
>> > On 1/24/07, Sairaj Sunil <sairaj.sunil@gmail.com> wrote:
>> > >
>> > > Hi all,
>> > > Can you tell me the exact indexing algorithm used by Lucene.  
>> or give
>> > some
>> > > links to the documents that describe the algorithm used by lucene
>> > > Thanks in advance
>> > > --
>> > > Sairaj Sunil
>> > >
>> > >
>> >
>> >
>>
>>
>> --
>> Sairaj Sunil
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
>
> -- 
> Sairaj Sunil
> II Mtech(CS)
> SSSIHL
> Prashanthi Nilayam

--------------------------
Grant Ingersoll
Center for Natural Language Processing
http://www.cnlp.org

Read the Lucene Java FAQ at http://wiki.apache.org/jakarta-lucene/ 
LuceneFAQ



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25717-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 26 16:04:00 2007
Return-Path: <java-user-return-25717-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61185 invoked from network); 26 Jan 2007 16:03:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Jan 2007 16:03:57 -0000
Received: (qmail 24625 invoked by uid 500); 26 Jan 2007 16:03:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24058 invoked by uid 500); 26 Jan 2007 16:03:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24044 invoked by uid 99); 26 Jan 2007 16:03:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Jan 2007 08:03:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [208.97.132.83] (HELO spunkymail-a12.g.dreamhost.com) (208.97.132.83)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Jan 2007 08:03:40 -0800
Received: from [192.168.0.2] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a12.g.dreamhost.com (Postfix) with ESMTP id 1D4AF7FB2
	for <java-user@lucene.apache.org>; Fri, 26 Jan 2007 08:03:16 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <0920FF49-F321-488D-B779-3A55450456A9@as-st.com>
References: <0920FF49-F321-488D-B779-3A55450456A9@as-st.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <B2016661-E4B7-434F-986C-12942FEC4C3F@apache.org>
Content-Transfer-Encoding: 7bit
From: Grant Ingersoll <gsingers@apache.org>
Subject: Re: How many documents in the biggest Lucene index to date?
Date: Fri, 26 Jan 2007 11:03:11 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org

I just indexed a collection w/ 15+ million docs in one index.  Index  
size is roughly 42 gb.

On Jan 26, 2007, at 12:45 AM, Bill Taylor wrote:

> I have used Lucene to index a small collection - only a few hundred  
> documents.  I have a potential client who wants to index a  
> collection which will start at about a million documents and could  
> easily grow to two million.
>
> Has anyone used Lucene with an index that large?
>
> Thank you very much.
>
> Bill Taylor
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

--------------------------
Grant Ingersoll
Center for Natural Language Processing
http://www.cnlp.org

Read the Lucene Java FAQ at http://wiki.apache.org/jakarta-lucene/ 
LuceneFAQ



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25718-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 26 16:33:19 2007
Return-Path: <java-user-return-25718-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70565 invoked from network); 26 Jan 2007 16:33:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Jan 2007 16:33:19 -0000
Received: (qmail 73294 invoked by uid 500); 26 Jan 2007 16:33:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73113 invoked by uid 500); 26 Jan 2007 16:33:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73102 invoked by uid 99); 26 Jan 2007 16:33:17 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Jan 2007 08:33:17 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [209.73.178.151] (HELO web60423.mail.yahoo.com) (209.73.178.151)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 26 Jan 2007 08:33:07 -0800
Received: (qmail 49580 invoked by uid 60001); 26 Jan 2007 16:32:45 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=dH98KWxZT513/4WItjRPof8GVoLhXvHc8kx5ul52V/6dmPts/7sfDfIvrA/C5UdhLaMek39AmVU7xjG+xLOjckrz9+tekUvTTzUNH33NKs1NN/HphQhnjwLf0wOOiB27Nc23ZhwyJnow+Z99o3SxQ841sb/6jQhiDneuJziDJAw=;
X-YMail-OSG: QMES1QEVM1mtKhLRI4xqpHBqbjDyMwB9tuK0mhu.qhyixSA730nw5jvwOKfrhVHZXM97BhgYapAlENZRV8gZonmjPTwBm6mo872RgxuH0xcRz58aqgLdWWuv27tL_0hdtaBaeARKVudHGqQi0Po51X5Qpw--
Received: from [155.69.175.60] by web60423.mail.yahoo.com via HTTP; Fri, 26 Jan 2007 08:32:45 PST
Date: Fri, 26 Jan 2007 08:32:45 -0800 (PST)
From: maureen tanuwidjaja <autumn_musique@yahoo.com>
Subject: Exception in thread "main" java.lang.OutOfMemoryError: Java heap space
To: java-user@lucene.apache.org
In-Reply-To: <363021.41409.qm@web60417.mail.yahoo.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-345977671-1169829165=:49055"
Content-Transfer-Encoding: 8bit
Message-ID: <698296.49055.qm@web60423.mail.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

--0-345977671-1169829165=:49055
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit

Hi Mike and Erick and all,
  
  I have fixed my code and yes,indexing is much faster than previously when I do such "hammering" with IndexWriter
  
  However,I am now encountering the error while indexing
  
  Exception in thread "main" java.lang.OutOfMemoryError: Java heap space
  
  This error never happens before..it doesnt even exist when I do such hammering with the IndexWriter
  
  Is it because the document I am going to index is too much?coz I am  indexing thousands of XML Documents and total size is about 1Giga...
  
  
 
---------------------------------
TV dinner still cooling?
Check out "Tonight's Picks" on Yahoo! TV.
--0-345977671-1169829165=:49055--

From java-user-return-25719-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 26 16:36:21 2007
Return-Path: <java-user-return-25719-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72263 invoked from network); 26 Jan 2007 16:36:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Jan 2007 16:36:20 -0000
Received: (qmail 80417 invoked by uid 500); 26 Jan 2007 16:36:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80381 invoked by uid 500); 26 Jan 2007 16:36:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80370 invoked by uid 99); 26 Jan 2007 16:36:19 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Jan 2007 08:36:19 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [62.152.87.202] (HELO mail2.protei.ru) (62.152.87.202)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Jan 2007 08:36:11 -0800
Received: from lab111.protei (lab111 [10.0.0.2])
	by mail2.protei.ru (Postfix) with ESMTP id 47CE1500C3A7
	for <java-user@lucene.apache.org>; Fri, 26 Jan 2007 19:35:48 +0300 (MSK)
Received: from pustovalov.protei (pustovalov.protei [192.168.100.165])
	by lab111.protei (Postfix) with ESMTP id B557D9C014CA
	for <java-user@lucene.apache.org>; Fri, 26 Jan 2007 19:35:48 +0300 (MSK)
To: java-user@lucene.apache.org
Subject: Re: Exception in thread "main" java.lang.OutOfMemoryError: Java heap space
From: =?utf-8?B?0J/Rg9GB0YLQvtCy0LDQu9C+0LIg0JzQuNGF0LDQuNC7?= <pustovalov@protei.ru>
Organization: RDC Protei
Content-Type: text/plain; format=flowed; delsp=yes; charset=utf-8
MIME-Version: 1.0
References: <698296.49055.qm@web60423.mail.yahoo.com>
Content-Transfer-Encoding: 8bit
Date: Fri, 26 Jan 2007 19:32:58 +0300
Message-ID: <op.tmrr88pbmj98ce@pustovalov.protei>
In-Reply-To: <698296.49055.qm@web60423.mail.yahoo.com>
User-Agent: Opera Mail/9.02 (Linux)
X-Virus-Checked: Checked by ClamAV on apache.org

try this : -XX:MaxPermSize=128m

On Fri, 26 Jan 2007 19:32:45 +0300, maureen tanuwidjaja  
<autumn_musique@yahoo.com> wrote:

> Hi Mike and Erick and all,
>  I have fixed my code and yes,indexing is much faster than previously  
> when I do such "hammering" with IndexWriter
>  However,I am now encountering the error while indexing
>  Exception in thread "main" java.lang.OutOfMemoryError: Java heap space
>  This error never happens before..it doesnt even exist when I do such  
> hammering with the IndexWriter
>  Is it because the document I am going to index is too much?coz I am   
> indexing thousands of XML Documents and total size is about 1Giga...
> ---------------------------------
> TV dinner still cooling?
> Check out "Tonight's Picks" on Yahoo! TV.



-- 
----====[]====----

 .

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25720-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 26 16:39:45 2007
Return-Path: <java-user-return-25720-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73349 invoked from network); 26 Jan 2007 16:39:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Jan 2007 16:39:44 -0000
Received: (qmail 85161 invoked by uid 500); 26 Jan 2007 16:39:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85126 invoked by uid 500); 26 Jan 2007 16:39:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85115 invoked by uid 99); 26 Jan 2007 16:39:43 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Jan 2007 08:39:43 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [209.73.178.153] (HELO web60425.mail.yahoo.com) (209.73.178.153)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 26 Jan 2007 08:39:34 -0800
Received: (qmail 96781 invoked by uid 60001); 26 Jan 2007 16:39:13 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=4BfIw+W8paGPwgaAz47TucF9HlEaoLrSr2OtDOsq53LiN8uazi5VjH/gN3OQG5MaSuQNTMlxyShgQivp7MGMU8OWOeCyhONXTSUpBjdAYBtpsHPS0Xur6oLYClgsWrknhmliReYLZBnWXHDIVrWRD5S79rkDDqyQP5GQE5BowYM=;
X-YMail-OSG: m3XQZzAVM1nmDRaEfmN_59Srl6RaXQyMEyDBvUs1Y.eH5x8dYw5wVYp1mGF2W98ZtJKRHbrsWSD1Fcd1JicDCAos8gBPUhivmsJAc8TzaEFQWGLdQN3nmniMRNG1WMRROv0rRJ3CIlYS4l.wid0LhImPdciXTxRYufq7qLYKymuPF4VTmy54Rij28nwHReWqdASFr5zG
Received: from [155.69.175.60] by web60425.mail.yahoo.com via HTTP; Fri, 26 Jan 2007 08:39:13 PST
Date: Fri, 26 Jan 2007 08:39:13 -0800 (PST)
From: maureen tanuwidjaja <autumn_musique@yahoo.com>
Subject: Re: Exception in thread "main" java.lang.OutOfMemoryError: Java heap space
To: java-user@lucene.apache.org
In-Reply-To: <op.tmrr88pbmj98ce@pustovalov.protei>
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-900460180-1169829553=:96037"
Content-Transfer-Encoding: 8bit
Message-ID: <788510.96037.qm@web60425.mail.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

--0-900460180-1169829553=:96037
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit


  
  
  Errrr...where shall I put that" -XX:MaxPermSize=128m"?
  
  
  Thanks Pustovalov
  
  Regards,
  Maureen
  

  <pustovalov@protei.ru> wrote:  try this : -XX:MaxPermSize=128m

On Fri, 26 Jan 2007 19:32:45 +0300, maureen tanuwidjaja  
 wrote:

> Hi Mike and Erick and all,
>  I have fixed my code and yes,indexing is much faster than previously  
> when I do such "hammering" with IndexWriter
>  However,I am now encountering the error while indexing
>  Exception in thread "main" java.lang.OutOfMemoryError: Java heap space
>  This error never happens before..it doesnt even exist when I do such  
> hammering with the IndexWriter
>  Is it because the document I am going to index is too much?coz I am   
> indexing thousands of XML Documents and total size is about 1Giga...
> ---------------------------------
> TV dinner still cooling?
> Check out "Tonight's Picks" on Yahoo! TV.



-- 
----====[]====----

 .

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



 
---------------------------------
Bored stiff? Loosen up...
Download and play hundreds of games for free on Yahoo! Games.
--0-900460180-1169829553=:96037--

From java-user-return-25721-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 26 16:42:56 2007
Return-Path: <java-user-return-25721-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75230 invoked from network); 26 Jan 2007 16:42:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Jan 2007 16:42:55 -0000
Received: (qmail 93418 invoked by uid 500); 26 Jan 2007 16:42:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93387 invoked by uid 500); 26 Jan 2007 16:42:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93376 invoked by uid 99); 26 Jan 2007 16:42:53 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Jan 2007 08:42:53 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [62.152.87.202] (HELO mail2.protei.ru) (62.152.87.202)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Jan 2007 08:42:45 -0800
Received: from lab111.protei (lab111 [10.0.0.2])
	by mail2.protei.ru (Postfix) with ESMTP id 1FF6D500C3AB
	for <java-user@lucene.apache.org>; Fri, 26 Jan 2007 19:42:24 +0300 (MSK)
Received: from pustovalov.protei (pustovalov.protei [192.168.100.165])
	by lab111.protei (Postfix) with ESMTP id 10BD99C014CA
	for <java-user@lucene.apache.org>; Fri, 26 Jan 2007 19:42:24 +0300 (MSK)
Date: Fri, 26 Jan 2007 19:39:34 +0300
To: java-user@lucene.apache.org
Subject: Re: Exception in thread "main" java.lang.OutOfMemoryError: Java heap space
From: =?utf-8?B?0J/Rg9GB0YLQvtCy0LDQu9C+0LIg0JzQuNGF0LDQuNC7?= <pustovalov@protei.ru>
Organization: RDC Protei
Content-Type: text/plain; format=flowed; delsp=yes; charset=utf-8
MIME-Version: 1.0
References: <788510.96037.qm@web60425.mail.yahoo.com>
Content-Transfer-Encoding: 8bit
Message-ID: <op.tmrsj8yimj98ce@pustovalov.protei>
In-Reply-To: <788510.96037.qm@web60425.mail.yahoo.com>
User-Agent: Opera Mail/9.02 (Linux)
X-Virus-Checked: Checked by ClamAV on apache.org

in your java command line,  of course :)

Example : java -Xms128m -Xmx1024m -server -Djava.awt.headless=true  
-XX:MaxPermSize=128m protei.Starter


On Fri, 26 Jan 2007 19:39:13 +0300, maureen tanuwidjaja  
<autumn_musique@yahoo.com> wrote:

>
>  Errrr...where shall I put that" -XX:MaxPermSize=128m"?
>  Thanks Pustovalov
>  Regards,
>   Maureen
>
>   <pustovalov@protei.ru> wrote:  try  
> this : -XX:MaxPermSize=128m
>
> On Fri, 26 Jan 2007 19:32:45 +0300, maureen tanuwidjaja
>  wrote:
>
>> Hi Mike and Erick and all,
>>  I have fixed my code and yes,indexing is much faster than previously
>> when I do such "hammering" with IndexWriter
>>  However,I am now encountering the error while indexing
>>  Exception in thread "main" java.lang.OutOfMemoryError: Java heap space
>>  This error never happens before..it doesnt even exist when I do such
>> hammering with the IndexWriter
>>  Is it because the document I am going to index is too much?coz I am
>> indexing thousands of XML Documents and total size is about 1Giga...
>> ---------------------------------
>> TV dinner still cooling?
>> Check out "Tonight's Picks" on Yahoo! TV.
>
>
>



-- 
----====[]====----

 .

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25722-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 26 16:46:41 2007
Return-Path: <java-user-return-25722-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77484 invoked from network); 26 Jan 2007 16:46:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Jan 2007 16:46:39 -0000
Received: (qmail 246 invoked by uid 500); 26 Jan 2007 16:46:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 210 invoked by uid 500); 26 Jan 2007 16:46:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 199 invoked by uid 99); 26 Jan 2007 16:46:37 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Jan 2007 08:46:37 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [209.73.178.156] (HELO web60413.mail.yahoo.com) (209.73.178.156)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 26 Jan 2007 08:46:28 -0800
Received: (qmail 4584 invoked by uid 60001); 26 Jan 2007 16:46:07 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=mPh1qYP4VFHvNcPnIeGInCTQtutSrljsbD8owb+s6neSXOlqddQ10zD9X4Rb+U9+PK9IxBFEKkEDtNWkpcNYXSlxgq3YLE400cvK5ShSC2c0cCCrkV/U0Q9bnLw2W7OjnA93oZ4AKsDHBEKS/oEAAGWsZAzsGAt3qjRWIgzySqo=;
X-YMail-OSG: cUZ3k9gVM1kFWMohbH11vw1T8PQlsjgb7nWo6PoJq12Hw3uRi6nBZPA0zInlzoDSZY6Bx9908gD4fiaLgR2Rn2qdt2sxpsrHRk0OwltngQ0q8yW.svHj6avF491GLe2pj.8lczCjKDBumsHloPVoCY9rFuj5mpOB1vt77smVpTmfhqEAG.v7RmOeerWO3A--
Received: from [155.69.175.60] by web60413.mail.yahoo.com via HTTP; Fri, 26 Jan 2007 08:46:06 PST
Date: Fri, 26 Jan 2007 08:46:06 -0800 (PST)
From: maureen tanuwidjaja <autumn_musique@yahoo.com>
Subject: Re: Exception in thread "main" java.lang.OutOfMemoryError: Java heap space
To: java-user@lucene.apache.org
In-Reply-To: <op.tmrsj8yimj98ce@pustovalov.protei>
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-391650987-1169829966=:3641"
Content-Transfer-Encoding: 8bit
Message-ID: <43993.3641.qm@web60413.mail.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

--0-391650987-1169829966=:3641
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit

oh thanks then:)

  <pustovalov@protei.ru> wrote:  in your java command line,  of course :)

Example : java -Xms128m -Xmx1024m -server -Djava.awt.headless=true  
-XX:MaxPermSize=128m protei.Starter


On Fri, 26 Jan 2007 19:39:13 +0300, maureen tanuwidjaja  
 wrote:

>
>  Errrr...where shall I put that" -XX:MaxPermSize=128m"?
>  Thanks Pustovalov
>  Regards,
>   Maureen
>
>   
 wrote:  try  
> this : -XX:MaxPermSize=128m
>
> On Fri, 26 Jan 2007 19:32:45 +0300, maureen tanuwidjaja
>  wrote:
>
>> Hi Mike and Erick and all,
>>  I have fixed my code and yes,indexing is much faster than previously
>> when I do such "hammering" with IndexWriter
>>  However,I am now encountering the error while indexing
>>  Exception in thread "main" java.lang.OutOfMemoryError: Java heap space
>>  This error never happens before..it doesnt even exist when I do such
>> hammering with the IndexWriter
>>  Is it because the document I am going to index is too much?coz I am
>> indexing thousands of XML Documents and total size is about 1Giga...
>> ---------------------------------
>> TV dinner still cooling?
>> Check out "Tonight's Picks" on Yahoo! TV.
>
>
>



-- 
----====[]====----

 .

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org




 
---------------------------------
Finding fabulous fares is fun.
Let Yahoo! FareChase search your favorite travel sites to find flight and hotel bargains.
--0-391650987-1169829966=:3641--

From java-user-return-25723-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 26 16:51:57 2007
Return-Path: <java-user-return-25723-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79072 invoked from network); 26 Jan 2007 16:51:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Jan 2007 16:51:42 -0000
Received: (qmail 9961 invoked by uid 500); 26 Jan 2007 16:51:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9933 invoked by uid 500); 26 Jan 2007 16:51:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9922 invoked by uid 99); 26 Jan 2007 16:51:41 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Jan 2007 08:51:41 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [62.152.87.202] (HELO mail2.protei.ru) (62.152.87.202)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Jan 2007 08:51:33 -0800
Received: from lab111.protei (lab111 [10.0.0.2])
	by mail2.protei.ru (Postfix) with ESMTP id 02F9A500C3AB
	for <java-user@lucene.apache.org>; Fri, 26 Jan 2007 19:51:12 +0300 (MSK)
Received: from pustovalov.protei (pustovalov.protei [192.168.100.165])
	by lab111.protei (Postfix) with ESMTP id EA8A59C014CA
	for <java-user@lucene.apache.org>; Fri, 26 Jan 2007 19:51:11 +0300 (MSK)
To: java-user@lucene.apache.org
Subject: Re: Exception in thread "main" java.lang.OutOfMemoryError: Java heap space
From: "Pustovalov Mike" <pustovalov@protei.ru>
Organization: RDC Protei
Content-Type: text/plain; format=flowed; delsp=yes; charset=utf-8
MIME-Version: 1.0
References: <43993.3641.qm@web60413.mail.yahoo.com>
Content-Transfer-Encoding: Quoted-Printable
Date: Fri, 26 Jan 2007 19:48:22 +0300
Message-ID: <op.tmrsywrxhy8ti5@pustovalov.protei>
In-Reply-To: <43993.3641.qm@web60413.mail.yahoo.com>
User-Agent: Opera Mail/9.02 (Linux)
X-Virus-Checked: Checked by ClamAV on apache.org

in my applications JVM throws [java.lang.OutOfMemoryError: Java heap  =

space] when too many  java classes has been loaded and/or when i use som=
e  =

byte code manipulation libraries ... (hibernate, asm, cglib for example)=
 -  =

JVM has no more memory for compile bytecode.

On Fri, 26 Jan 2007 19:46:06 +0300, maureen tanuwidjaja  =

<autumn_musique@yahoo.com> wrote:

> java.lang.OutOfMemoryError: Java heap space



-- =

----=3D=3D=3D=3D[]=3D=3D=3D=3D----

WBR, Pustovalov Mike.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25724-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 26 18:13:48 2007
Return-Path: <java-user-return-25724-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32910 invoked from network); 26 Jan 2007 18:13:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Jan 2007 18:13:46 -0000
Received: (qmail 82598 invoked by uid 500); 26 Jan 2007 18:13:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82576 invoked by uid 500); 26 Jan 2007 18:13:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82565 invoked by uid 99); 26 Jan 2007 18:13:44 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Jan 2007 10:13:44 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [68.142.199.170] (HELO web81706.mail.mud.yahoo.com) (68.142.199.170)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 26 Jan 2007 10:13:34 -0800
Received: (qmail 93643 invoked by uid 60001); 26 Jan 2007 18:13:13 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=FALDPLGyfKtfX2j6VVwfpoe5kAnybuWs7ooL8LnAmVjcsDaWChWyPDn6Prt2GGxOBQ7TNBfLowDPUd0tIby/xwxp23DZuCDAyoB1SPSoZqcN3ivinvhrLarZKc5shipy6m0vwGQAtzU0xjhaoA2y1IwEjhBnXfO6RdLB9vX/bkM=  ;
Message-ID: <20070126181313.93641.qmail@web81706.mail.mud.yahoo.com>
Received: from [66.201.45.201] by web81706.mail.mud.yahoo.com via HTTP; Fri, 26 Jan 2007 10:13:13 PST
Date: Fri, 26 Jan 2007 10:13:13 -0800 (PST)
From: Chiradeep Vittal <rayvittal-lists@yahoo.com>
Subject: Re: How many documents in the biggest Lucene index to date?
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=ascii
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Grant, =0AIs that on a single machine? If so, what kind of hardware specs d=
oes the machine have? I guess you're using a 64-bit JVM?=0A=0AA slightly un=
related question: if a query matches all the documents in the index, does t=
hat cause the entire index to get loaded into RAM ?=0A=0A=0A=0A----- Origin=
al Message ----=0AFrom: Grant Ingersoll <gsingers@apache.org>=0ATo: java-us=
er@lucene.apache.org=0ASent: Friday, January 26, 2007 8:03:11 AM=0ASubject:=
 Re: How many documents in the biggest Lucene index to date?=0A=0AI just in=
dexed a collection w/ 15+ million docs in one index.  Index  =0Asize is rou=
ghly 42 gb.=0A=0AOn Jan 26, 2007, at 12:45 AM, Bill Taylor wrote:=0A=0A> I =
have used Lucene to index a small collection - only a few hundred  =0A> doc=
uments.  I have a potential client who wants to index a  =0A> collection wh=
ich will start at about a million documents and could  =0A> easily grow to =
two million.=0A>=0A> Has anyone used Lucene with an index that large?=0A>=
=0A> Thank you very much.=0A>=0A> Bill Taylor=0A>=0A>=0A>=0A> -------------=
--------------------------------------------------------=0A> To unsubscribe=
, e-mail: java-user-unsubscribe@lucene.apache.org=0A> For additional comman=
ds, e-mail: java-user-help@lucene.apache.org=0A>=0A=0A---------------------=
-----=0AGrant Ingersoll=0ACenter for Natural Language Processing=0Ahttp://w=
ww.cnlp.org=0A=0ARead the Lucene Java FAQ at http://wiki.apache.org/jakarta=
-lucene/ =0ALuceneFAQ=0A=0A=0A=0A------------------------------------------=
---------------------------=0ATo unsubscribe, e-mail: java-user-unsubscribe=
@lucene.apache.org=0AFor additional commands, e-mail: java-user-help@lucene=
.apache.org=0A=0A=0A=0A

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25725-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 26 18:20:30 2007
Return-Path: <java-user-return-25725-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 34091 invoked from network); 26 Jan 2007 18:20:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Jan 2007 18:20:30 -0000
Received: (qmail 90809 invoked by uid 500); 26 Jan 2007 18:20:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90777 invoked by uid 500); 26 Jan 2007 18:20:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90766 invoked by uid 99); 26 Jan 2007 18:20:24 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Jan 2007 10:20:24 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [216.239.128.26] (HELO smtp.omnis.com) (216.239.128.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Jan 2007 10:20:15 -0800
Received: from smtp-b.omnis.com (smtp-b.omnis.com [216.239.128.238])
	by smtp.omnis.com (Postfix) with ESMTP id BF7AC1B8D6
	for <java-user@lucene.apache.org>; Fri, 26 Jan 2007 10:19:53 -0800 (PST)
Received: from [192.168.6.223] (d-65-175-190-143.metrocast.net [65.175.190.143])
	(Authenticated sender: wataylor@as-st.com)
	by smtp-b.omnis.com (Postfix) with ESMTP id 414BA1C00875
	for <java-user@lucene.apache.org>; Fri, 26 Jan 2007 10:19:54 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v752.2)
Content-Transfer-Encoding: 7bit
Message-Id: <AFF59E58-04E0-4736-90C5-1A0B62F3A41A@as-st.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
To: java-user@lucene.apache.org
From: Bill Taylor <wataylor@as-st.com>
Subject: Is the new version of the Lucene book available in any form?
Date: Fri, 26 Jan 2007 13:56:28 -0500
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org

I notice that the Lucene book offered by Amazon was published in  
2004.  I saw some mail on the subject of a new edition.

Is the new edition available in any form?

I promise to buy the new edition as soon as it comes out even if I  
get some of the material early.  I wrote a book which was published  
by the MIT Press; I know how long it takes to get a book out.

Failing that, how should I learn more about the internals of Lucene?   
My client has a large code base in C++.  The system has its own index  
which is not all that fast.  One way to improve performance would be  
to convert to the C version of Lucene.

Has anyone build a multi-million document index with the C version?   
Where should I go to start learning about it?

Thanks.

Bill Taylor



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25726-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 26 18:31:07 2007
Return-Path: <java-user-return-25726-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37337 invoked from network); 26 Jan 2007 18:31:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Jan 2007 18:31:06 -0000
Received: (qmail 4897 invoked by uid 500); 26 Jan 2007 18:31:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4864 invoked by uid 500); 26 Jan 2007 18:31:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4853 invoked by uid 99); 26 Jan 2007 18:31:05 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Jan 2007 10:31:05 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [68.142.201.235] (HELO web30412.mail.mud.yahoo.com) (68.142.201.235)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 26 Jan 2007 10:30:56 -0800
Received: (qmail 7468 invoked by uid 60001); 26 Jan 2007 18:30:34 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=mmJzW98iYez9ossbvyznr7fHK4uoOAJ/DUzlpgfejUcyB6yseFf54EJaOA/KPwkuzHJ/iN781R3D+i5udIR0s/XsJQquMTdm10m1/M97IttrI4bFdMxfDcbwVqz4Z/e/2UyYnuy00OxEopdDrzBgJg93y2ZyCtqJ+JuvMqvIpoo=;
X-YMail-OSG: e4kytCMVM1mTGUhxcxYMnyfkE5v78G2opQukTUdAJP19i97L31TllEy_9puUDwCXzKcuiyGHmjSDdF5vphsJ3EgEt4laNNgTjWKoHg--
Received: from [83.245.56.30] by web30412.mail.mud.yahoo.com via HTTP; Fri, 26 Jan 2007 10:30:34 PST
X-Mailer: YahooMailRC/368.3 YahooMailWebService/0.6.132.7
Date: Fri, 26 Jan 2007 10:30:34 -0800 (PST)
From: Paul Lynch <pablolynch@yahoo.com>
Subject: Problem with Custom Filter
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable
Message-ID: <363594.6769.qm@web30412.mail.mud.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,=0A=0AI am going mad trying to find out what I am doing wrong with my cu=
stom filter implementation (almost an exact copy of SpecialsFilter from LIA=
). I have put together a quick sample to illustrate my problem, if some kin=
d soul has 2 minutes to take a quick look and tell me where I am being so s=
tupid, I would really appreciate it:=0A=0APROBLEM: Filtered query returns 1=
 result when it should return 10=0A=0ATEST RIG: =0A=0AAdd the documents to =
the index, every 10 documents having the same "advertiserId":=0A  int idToA=
dd =3D 100000;=0A  for(int i=3D0;i<100;i++)=0A  {=0A   if(i>0 && i%10=3D=3D=
0) idToAdd++;=0A   Document doc =3D new Document();=0A   doc.add(new Field(=
"advertiserId", Integer.toString(idToAdd), Field.Store.YES, Field.Index.UN_=
TOKENIZED));=0A   doc.add(new Field("contents", "document number " + Intege=
r.toString(i) + " random string", Field.Store.YES, Field.Index.TOKENIZED));=
=0A   writer.addDocument(doc);=0A  }=0A=0AI have verified that the docs wer=
e created probably by browsing the index with Luke.=0A=0A   String[] advert=
iserIds =3D {"100003"};=0A   IFeaturedAdvertisersAccessor accessor =3D new =
FeaturedAdvertisersAccessor(advertiserIds);=0A   Filter filter =3D new Feat=
uredAdvertisersFilter(accessor);=0A   =0A   TermQuery tq =3D new TermQuery(=
new Term("contents", "document"));=0A   BooleanQuery bq =3D new BooleanQuer=
y();=0A   bq.add(tq, Occur.MUST);=0A   =0A   Hits hits =3D searcher.search(=
tq, filter);=0A   System.out.println("hits.length: " + hits.length());=0A=
=0Aresult "hits.length: 1"=0A=0ASource for FeaturedAdvertisersFilter:=0A=0A=
public class FeaturedAdvertisersFilter extends Filter=0A{=0A private IFeatu=
redAdvertisersAccessor accessor;=0A =0A public FeaturedAdvertisersFilter(IF=
eaturedAdvertisersAccessor accessor)=0A {=0A  this.accessor =3D accessor;=
=0A }=0A =0A public BitSet bits(IndexReader reader) throws IOException=0A {=
=0A  BitSet bits =3D new BitSet(reader.maxDoc());   =0A  String[] advertise=
rIds =3D accessor.advertiserIds();=0A  =0A  int[] docs =3D new int[1];=0A  =
int[] freqs =3D new int[1];=0A  =0A  for (int i=3D0; i<advertiserIds.length=
; i++)=0A  {=0A   String advertiserId =3D advertiserIds[i];=0A   if (advert=
iserId!=3Dnull)=0A   {=0A    TermDocs termDocs =3D reader.termDocs(new Term=
("advertiserId", advertiserId));=0A    int count =3D termDocs.read(docs, fr=
eqs);=0A    if (count =3D=3D 1)=0A    {=0A     bits.set(docs[0]);=0A    }=
=0A   }=0A  }=0A  =0A  return bits;=0A }=0A}=0A=0AAny help would be appreci=
ated, Regards,=0APaul

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25727-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 26 18:50:09 2007
Return-Path: <java-user-return-25727-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45141 invoked from network); 26 Jan 2007 18:50:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Jan 2007 18:50:08 -0000
Received: (qmail 32756 invoked by uid 500); 26 Jan 2007 18:50:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32733 invoked by uid 500); 26 Jan 2007 18:50:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32721 invoked by uid 99); 26 Jan 2007 18:50:08 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Jan 2007 10:50:07 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [68.142.199.170] (HELO web81706.mail.mud.yahoo.com) (68.142.199.170)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 26 Jan 2007 10:49:57 -0800
Received: (qmail 10497 invoked by uid 60001); 26 Jan 2007 18:49:37 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=A0yUQnWDY2EE3nYrMUeXYVz3JlsuvCjCpNpJN64GLhFCOXGiOJ10EcluXKox8ydM4yxWIkCmoPI8qNCAX+Iuj4kMRdc7C/rRc70piyMmHDuOwy8OfF+sfH+NKlwaImGZXrjvo7b7wR5sTFk80XUhrTkdkiTVdCuHrTUFQdHQ/vE=  ;
Message-ID: <20070126184937.10495.qmail@web81706.mail.mud.yahoo.com>
Received: from [66.201.45.201] by web81706.mail.mud.yahoo.com via HTTP; Fri, 26 Jan 2007 10:49:37 PST
Date: Fri, 26 Jan 2007 10:49:37 -0800 (PST)
From: Chiradeep Vittal <rayvittal-lists@yahoo.com>
Subject: Re: Extending scoring to eliminate sorting on timestamp
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=ascii
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks for the insight Chris. You are right-- I was trying to avoid the Fie=
ldCache hit. Because the index is updated frequently, we have to keep disca=
rding our IndexSearcher. =0AI used String because the timestamp is a Long a=
nd there wasn't any SortField.LONG (I guess I should have used SortField.CU=
STOM). In this case, what should the indexing call look like? Currently, I =
have:=0A    doc.add(new Field("timestamp",Long.toString(timestamp),Field.St=
ore.NO,Field.Index.UN_TOKENIZED));=0A=0A=0A=0AI have been looking at Functi=
onQuery in Solr, but I didn't realize it would involve the FieldCache again=
.=0A=0AThe other thing I was considering is to automatically limit the numb=
er of results (there is no way a user can grok 3 million results anyway) by=
 breaking down the range filter into a series of range filters and executin=
g multiple searches in series until the max number of results was returned.=
 Of course, the problem here is that it impacts the average case (when the =
number of results is reasonable). One way around this is to execute an init=
ial search just to figure out the number of hits (without sorting, without =
scoring) and then apply different strategies, but I'm not sure that the ini=
tial query is always going to be very very fast.=0A=0AThe patch you pointed=
 out looks very very promising.=0A=0A=0A----- Original Message ----=0AFrom:=
 Chris Hostetter <hossman_lucene@fucit.org>=0ATo: java-user@lucene.apache.o=
rg=0ASent: Thursday, January 25, 2007 9:09:12 PM=0ASubject: Re: Extending s=
coring to eliminate sorting on timestamp=0A=0A=0A: For various reasons, we'=
d like to eliminate the sort step.=0A=0Acan you elaborate on what those rea=
sons are?=0A=0AFunctionQuery (in the solr code base, you'll find lots of di=
scussing in=0Athe archives of this list) can let you use a numeric field va=
lue in the=0Ascore calculation, but it still uses the FieldCache so if you =
are trying=0Ato avoid that for space/time reasons it won't help.=0A=0Ayou m=
ay also be interested in this patch...=0A=0A  https://issues.apache.org/jir=
a/browse/LUCENE-769=0A=0Ain the general case it should be slower then stand=
ard sorting, but if=0Ayou are dealing with an extremely large index and you=
r result sets all=0Atend to be small, it may be faster (and it won't pay th=
e initial=0AFieldCache setup time on frequently modified indexes)=0A=0A:   =
                 new SortField("timestamp",SortField.STRING,true)}));=0A=0A=
why are you sorting timestamps as strings? ... if you sort them as ints,=0A=
your FieldCache will be a whole hell of a lot smaller (i'm guessing very=0A=
few documents have identicle timestamps, so your FieldCache should be at=0A=
least half as big if you sort on ints (and probably a lot more).=0A=0A=0A-H=
oss=0A=0A=0A---------------------------------------------------------------=
------=0ATo unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org=0A=
For additional commands, e-mail: java-user-help@lucene.apache.org=0A=0A=0A=
=0A

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25728-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 26 19:02:38 2007
Return-Path: <java-user-return-25728-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 50285 invoked from network); 26 Jan 2007 19:02:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Jan 2007 19:02:37 -0000
Received: (qmail 54612 invoked by uid 500); 26 Jan 2007 19:02:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54375 invoked by uid 500); 26 Jan 2007 19:02:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54364 invoked by uid 99); 26 Jan 2007 19:02:36 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Jan 2007 11:02:36 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 66.249.92.174 as permitted sender)
Received: from [66.249.92.174] (HELO ug-out-1314.google.com) (66.249.92.174)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Jan 2007 11:02:28 -0800
Received: by ug-out-1314.google.com with SMTP id k40so806184ugc
        for <java-user@lucene.apache.org>; Fri, 26 Jan 2007 11:02:06 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=eJux6iNAJEppOMIDs5g/qHpdVm73I5NZTewz5+88JCT+Ggl3FFno/hVJbUo2GiXbWb//rsJW4Z3eeiTDYhI3xAXi2ejtpTWrHi+a4KO2OVKY3BWWEkLeNE/RDZIEpfJFX6+bgYnM8PTxuYxZPPKUYX+jZtlZ3dDA+DatTqiQ2PE=
Received: by 10.82.152.16 with SMTP id z16mr2036178bud.1169838126260;
        Fri, 26 Jan 2007 11:02:06 -0800 (PST)
Received: by 10.82.162.20 with HTTP; Fri, 26 Jan 2007 11:02:06 -0800 (PST)
Message-ID: <359a92830701261102w6a58cd06x7754c094e6f5a23c@mail.gmail.com>
Date: Fri, 26 Jan 2007 14:02:06 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Is the new version of the Lucene book available in any form?
In-Reply-To: <AFF59E58-04E0-4736-90C5-1A0B62F3A41A@as-st.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_50178_6592013.1169838126227"
References: <AFF59E58-04E0-4736-90C5-1A0B62F3A41A@as-st.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_50178_6592013.1169838126227
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

The current LIA book, while written to the 1.4 code base is a very good
place to start. There will be some incompatibilities with the 2.0 codebase,
but they're relatively minor.

I guess I'm really recommending that you go ahead and spend the bucks on the
current version, it'll be money well spent if you can't get an updated
version promptly.

Haven't a clue about the other Lucene ports.

Erick

On 1/26/07, Bill Taylor <wataylor@as-st.com> wrote:
>
> I notice that the Lucene book offered by Amazon was published in
> 2004.  I saw some mail on the subject of a new edition.
>
> Is the new edition available in any form?
>
> I promise to buy the new edition as soon as it comes out even if I
> get some of the material early.  I wrote a book which was published
> by the MIT Press; I know how long it takes to get a book out.
>
> Failing that, how should I learn more about the internals of Lucene?
> My client has a large code base in C++.  The system has its own index
> which is not all that fast.  One way to improve performance would be
> to convert to the C version of Lucene.
>
> Has anyone build a multi-million document index with the C version?
> Where should I go to start learning about it?
>
> Thanks.
>
> Bill Taylor
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_50178_6592013.1169838126227--

From java-user-return-25729-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 26 19:15:12 2007
Return-Path: <java-user-return-25729-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53794 invoked from network); 26 Jan 2007 19:15:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Jan 2007 19:15:11 -0000
Received: (qmail 89324 invoked by uid 500); 26 Jan 2007 19:15:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89292 invoked by uid 500); 26 Jan 2007 19:15:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89281 invoked by uid 99); 26 Jan 2007 19:15:10 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Jan 2007 11:15:10 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 66.249.92.169 as permitted sender)
Received: from [66.249.92.169] (HELO ug-out-1314.google.com) (66.249.92.169)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Jan 2007 11:15:01 -0800
Received: by ug-out-1314.google.com with SMTP id k40so808994ugc
        for <java-user@lucene.apache.org>; Fri, 26 Jan 2007 11:14:40 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=sKHP3O5R3vKTeWTTfjTyJ2uuBI5xRAMVv3MxrixCCMDw5XDCn39GN+JAqOl56e6ZV2aRuVll3nJhyiVgpX0cX5GhgNMY9zQ9/SZIaiW4Sfq9vTmagpQ65Vw2g8g0s+VQt3KBtU17QnWRLAzgHOnpfirIMPKjN/BPgdC/ct9ep8k=
Received: by 10.82.179.9 with SMTP id b9mr2059356buf.1169838878709;
        Fri, 26 Jan 2007 11:14:38 -0800 (PST)
Received: by 10.82.162.20 with HTTP; Fri, 26 Jan 2007 11:14:38 -0800 (PST)
Message-ID: <359a92830701261114q6168031en93b16caf3dc76846@mail.gmail.com>
Date: Fri, 26 Jan 2007 14:14:38 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Problem with Custom Filter
In-Reply-To: <363594.6769.qm@web30412.mail.mud.yahoo.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_50382_4591069.1169838878614"
References: <363594.6769.qm@web30412.mail.mud.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_50382_4591069.1169838878614
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I think you're only setting one bit in your filter.

You're docs array is only one cell long, and your termDocs.read reads up to
the length of docs (exactly one in this case) entries. So, you're getting
only one doc ID. And setting it. Even if you made your array larger, you
would only set one because of the if (count == 1) clause. I'd recommend a
for loop for (idx = 0; idx < count; ++idx) { bits.set(doc[idx]); }

But I don't think you should be doing it this way in the first place unless
you're assured that you know what the upper limit of the number of matching
docs is, since I don't think there's any way to cause TermDocs.read to
return entries n through n+sizeofdocs. Try something like

termDocs.seek(new Term("advertiserId", advertiserId);
while (termDocs.next()) {
    bits.set(termDocs.doc());
}

Hope this helps
Erick

On 1/26/07, Paul Lynch <pablolynch@yahoo.com> wrote:
>
> Hi,
>
> I am going mad trying to find out what I am doing wrong with my custom
> filter implementation (almost an exact copy of SpecialsFilter from LIA). I
> have put together a quick sample to illustrate my problem, if some kind soul
> has 2 minutes to take a quick look and tell me where I am being so stupid, I
> would really appreciate it:
>
> PROBLEM: Filtered query returns 1 result when it should return 10
>
> TEST RIG:
>
> Add the documents to the index, every 10 documents having the same
> "advertiserId":
>   int idToAdd = 100000;
>   for(int i=0;i<100;i++)
>   {
>    if(i>0 && i%10==0) idToAdd++;
>    Document doc = new Document();
>    doc.add(new Field("advertiserId", Integer.toString(idToAdd),
> Field.Store.YES, Field.Index.UN_TOKENIZED));
>    doc.add(new Field("contents", "document number " + Integer.toString(i)
> + " random string", Field.Store.YES, Field.Index.TOKENIZED));
>    writer.addDocument(doc);
>   }
>
> I have verified that the docs were created probably by browsing the index
> with Luke.
>
>    String[] advertiserIds = {"100003"};
>    IFeaturedAdvertisersAccessor accessor = new
> FeaturedAdvertisersAccessor(advertiserIds);
>    Filter filter = new FeaturedAdvertisersFilter(accessor);
>
>    TermQuery tq = new TermQuery(new Term("contents", "document"));
>    BooleanQuery bq = new BooleanQuery();
>    bq.add(tq, Occur.MUST);
>
>    Hits hits = searcher.search(tq, filter);
>    System.out.println("hits.length: " + hits.length());
>
> result "hits.length: 1"
>
> Source for FeaturedAdvertisersFilter:
>
> public class FeaturedAdvertisersFilter extends Filter
> {
> private IFeaturedAdvertisersAccessor accessor;
>
> public FeaturedAdvertisersFilter(IFeaturedAdvertisersAccessor accessor)
> {
>   this.accessor = accessor;
> }
>
> public BitSet bits(IndexReader reader) throws IOException
> {
>   BitSet bits = new BitSet(reader.maxDoc());
>   String[] advertiserIds = accessor.advertiserIds();
>
>   int[] docs = new int[1];
>   int[] freqs = new int[1];
>
>   for (int i=0; i<advertiserIds.length; i++)
>   {
>    String advertiserId = advertiserIds[i];
>    if (advertiserId!=null)
>    {
>     TermDocs termDocs = reader.termDocs(new Term("advertiserId",
> advertiserId));
>     int count = termDocs.read(docs, freqs);
>     if (count == 1)
>     {
>      bits.set(docs[0]);
>     }
>    }
>   }
>
>   return bits;
> }
> }
>
> Any help would be appreciated, Regards,
> Paul
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_50382_4591069.1169838878614--

From java-user-return-25730-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 26 19:15:46 2007
Return-Path: <java-user-return-25730-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54021 invoked from network); 26 Jan 2007 19:15:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Jan 2007 19:15:43 -0000
Received: (qmail 92071 invoked by uid 500); 26 Jan 2007 19:15:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92048 invoked by uid 500); 26 Jan 2007 19:15:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92035 invoked by uid 99); 26 Jan 2007 19:15:35 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Jan 2007 11:15:35 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Jan 2007 11:15:26 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id E9E155B764; Fri, 26 Jan 2007 11:15:05 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id DFA2D7F403
	for <java-user@lucene.apache.org>; Fri, 26 Jan 2007 11:15:05 -0800 (PST)
Date: Fri, 26 Jan 2007 11:15:05 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Extending scoring to eliminate sorting on timestamp
In-Reply-To: <20070126184937.10495.qmail@web81706.mail.mud.yahoo.com>
Message-ID: <Pine.LNX.4.58.0701261104090.15914@hal.rescomp.berkeley.edu>
References: <20070126184937.10495.qmail@web81706.mail.mud.yahoo.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: I used String because the timestamp is a Long and there wasn't any
: SortField.LONG (I guess I should have used SortField.CUSTOM). In this
: case, what should the indexing call look like? Currently, I have:

:     doc.add(new Field("timestamp",Long.toString(timestamp),Field.Store.NO,Field.Index.UN_TOKENIZED));

for the record, what you've got there won't sort correctly as a string
anyway, the number 923456 will sort after the number 12345678 because as a
string it's lexigraphicaly larger ... you'd need to 0 pad the value, or
use something like NumberTools.

i never really noticed there was an int field cache, but no long field
cache ... either way, if you are tryingto avoid hte FieldCachebecause of
hte time ittakes to initialize and not hte memory it takes up, then long
support in FieldCachewouldnt' help you.

: The other thing I was considering is to automatically limit the number
: of results (there is no way a user can grok 3 million results anyway) by
: breaking down the range filter into a series of range filters and
: executing multiple searches in series until the max number of results

i'm not sure how that would help you unlessy ou did all of the sorting
external to Lucene (or used something like the patch i mentioned)

: case (when the number of results is reasonable). One way around this is
: to execute an initial search just to figure out the number of hits
: (without sorting, without scoring) and then apply different strategies,

if you try this use Sort.INDEXORDER .. short of writing your own
HitCollector i believe it's the best way to eliminate any extra work
Lucene might do for you to sort results.

: The patch you pointed out looks very very promising.

There's been some disagreement as to how usefull it is -- i don't know if
anyone has had time to do a thorough performnce analysys of it in
differnet sitautions.  if you try it out please comment in the issue with
your experiences 9good or bad)


----- Original Message ----
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Sent: Thursday, January 25, 2007 9:09:12 PM
Subject: Re: Extending scoring to eliminate sorting on timestamp


: For various reasons, we'd like to eliminate the sort step.

can you elaborate on what those reasons are?

FunctionQuery (in the solr code base, you'll find lots of discussing in
the archives of this list) can let you use a numeric field value in the
score calculation, but it still uses the FieldCache so if you are trying
to avoid that for space/time reasons it won't help.

you may also be interested in this patch...

  https://issues.apache.org/jira/browse/LUCENE-769

in the general case it should be slower then standard sorting, but if
you are dealing with an extremely large index and your result sets all
tend to be small, it may be faster (and it won't pay the initial
FieldCache setup time on frequently modified indexes)

:                    new SortField("timestamp",SortField.STRING,true)}));

why are you sorting timestamps as strings? ... if you sort them as ints,
your FieldCache will be a whole hell of a lot smaller (i'm guessing very
few documents have identicle timestamps, so your FieldCache should be at
least half as big if you sort on ints (and probably a lot more).


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org




:
: ---------------------------------------------------------------------
: To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
: For additional commands, e-mail: java-user-help@lucene.apache.org
:



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25731-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 26 19:22:43 2007
Return-Path: <java-user-return-25731-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56439 invoked from network); 26 Jan 2007 19:22:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Jan 2007 19:22:41 -0000
Received: (qmail 13179 invoked by uid 500); 26 Jan 2007 19:22:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13146 invoked by uid 500); 26 Jan 2007 19:22:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13135 invoked by uid 99); 26 Jan 2007 19:22:40 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Jan 2007 11:22:40 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [206.190.38.61] (HELO web50307.mail.yahoo.com) (206.190.38.61)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 26 Jan 2007 11:22:31 -0800
Received: (qmail 86775 invoked by uid 60001); 26 Jan 2007 19:22:09 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=e/Jus/8coSX3fVVyREj+t50cW7D3DCY0XTTQQSmHnSqfy6kVueNoKeBzvCyrOxvWpEh8gweXjJjQwXb/G8AVr24o+OHYDwLZCO38k5p0JVHTDnI25A8sqU9D7UwmAxiZ1xmlArol/s6TTKohL1yddI2bngOA4zlPLyBsXJvQ9PI=;
X-YMail-OSG: UqNv2ToVM1nIQMRpOlE0NebRhr9zbJmMu..YzlfBWSLi5NLifCPTxrio6UAu.rv.B1iZhqmj9L0.0TMgaC4iNlHlraLWQ2cjZl.LnhWrulXmUxrx7LpEh0qOMCJXfSaZlPKfhJH_tRNcp_U-
Received: from [58.63.153.27] by web50307.mail.yahoo.com via HTTP; Fri, 26 Jan 2007 11:22:09 PST
X-Mailer: YahooMailRC/368.3 YahooMailWebService/0.6.132.7
Date: Fri, 26 Jan 2007 11:22:09 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Is the new version of the Lucene book available in any form?
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable
Message-ID: <603870.86117.qm@web50307.mail.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,=0A=0AI believe CLucene (C++, not C) is getting a lot of exercise, but y=
ou should really ask about production usage on its list.=0ALIA2 will happen=
, but Lucene is undergoing a lot of changes, so Erik and I are going to wai=
t a little more for development to calm down (utopia?).=0A=0AOtis=0A=0A----=
- Original Message ----=0AFrom: Bill Taylor <wataylor@as-st.com>=0ATo: java=
-user@lucene.apache.org=0ASent: Friday, January 26, 2007 1:56:28 PM=0ASubje=
ct: Is the new version of the Lucene book available in any form?=0A=0AI not=
ice that the Lucene book offered by Amazon was published in  =0A2004.  I sa=
w some mail on the subject of a new edition.=0A=0AIs the new edition availa=
ble in any form?=0A=0AI promise to buy the new edition as soon as it comes =
out even if I  =0Aget some of the material early.  I wrote a book which was=
 published  =0Aby the MIT Press; I know how long it takes to get a book out=
.=0A=0AFailing that, how should I learn more about the internals of Lucene?=
   =0AMy client has a large code base in C++.  The system has its own index=
  =0Awhich is not all that fast.  One way to improve performance would be  =
=0Ato convert to the C version of Lucene.=0A=0AHas anyone build a multi-mil=
lion document index with the C version?   =0AWhere should I go to start lea=
rning about it?=0A=0AThanks.=0A=0ABill Taylor=0A=0A=0A=0A------------------=
---------------------------------------------------=0ATo unsubscribe, e-mai=
l: java-user-unsubscribe@lucene.apache.org=0AFor additional commands, e-mai=
l: java-user-help@lucene.apache.org=0A=0A=0A=0A

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25732-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 26 19:31:18 2007
Return-Path: <java-user-return-25732-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58689 invoked from network); 26 Jan 2007 19:31:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Jan 2007 19:31:17 -0000
Received: (qmail 43157 invoked by uid 500); 26 Jan 2007 19:31:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43122 invoked by uid 500); 26 Jan 2007 19:31:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43111 invoked by uid 99); 26 Jan 2007 19:31:16 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Jan 2007 11:31:16 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [206.190.38.56] (HELO web50302.mail.yahoo.com) (206.190.38.56)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 26 Jan 2007 11:31:05 -0800
Received: (qmail 29889 invoked by uid 60001); 26 Jan 2007 19:30:44 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=vlUgbbS0A3XjyyGyAhQpqTfI3+Q8dInp5QGwO16YbZu9TgtV0y9dbaO2Dn7NjqgNn5qM21QXbv/eMir+80j1eZHAQIhyEIk0fCKTUzgaoBSLtrHYSpwVu/aMIo5G+KZDPBDIDDg3eBMTRd6ZJ7wcl70uhfPZ8+CmMi4UpJ4MooE=;
X-YMail-OSG: hVWdipoVM1kBrLAJN6z0tx_zBqIo9zJV_9jOnJU8GOTgbTV4mKXMz2WaT6UH6YJs76W.GLVz_Buud0cxzm2Vh6J5GRnCZ0eKjjwkyIk3QUHe1m8GsVWxaJXQTunEGIwd_ZoITF0T_LjCOQJoZzJ_XY2U12wWKqfkZRRBZLxkzhw1t3xyX0WskO4uoIiU
Received: from [58.63.153.27] by web50302.mail.yahoo.com via HTTP; Fri, 26 Jan 2007 11:30:44 PST
X-Mailer: YahooMailRC/368.3 YahooMailWebService/0.6.132.7
Date: Fri, 26 Jan 2007 11:30:44 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: How many documents in the biggest Lucene index to date?
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable
Message-ID: <277329.29640.qm@web50302.mail.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

It really all depends....right Erik?=0AOn the hardware you are using, compl=
exity of queries, query concurrency, query latency you are willing to live =
with, the size of the index, etc.  A few million sounds small even for aver=
age/cheap hw.  I have several multi-million document indices that are const=
antly hammered over on Simpy.com and we use Lucene at Technorati to index "=
the blogosphere", so you can imagine those numbers.  To handle that much da=
ta things needs to be heavily distributed, of course.=0A=0AOtis=0A=0A----- =
Original Message ----=0AFrom: Bill Taylor <wataylor@as-st.com>=0ATo: java-u=
ser@lucene.apache.org=0ASent: Friday, January 26, 2007 12:45:43 AM=0ASubjec=
t: How many documents in the biggest Lucene index to date?=0A=0AI have used=
 Lucene to index a small collection - only a few hundred  =0Adocuments.  I =
have a potential client who wants to index a collection  =0Awhich will star=
t at about a million documents and could easily grow  =0Ato two million.=0A=
=0AHas anyone used Lucene with an index that large?=0A=0AThank you very muc=
h.=0A=0ABill Taylor=0A=0A=0A=0A--------------------------------------------=
-------------------------=0ATo unsubscribe, e-mail: java-user-unsubscribe@l=
ucene.apache.org=0AFor additional commands, e-mail: java-user-help@lucene.a=
pache.org=0A=0A=0A=0A

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25733-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 26 19:51:02 2007
Return-Path: <java-user-return-25733-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63630 invoked from network); 26 Jan 2007 19:51:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Jan 2007 19:51:01 -0000
Received: (qmail 81318 invoked by uid 500); 26 Jan 2007 19:50:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81288 invoked by uid 500); 26 Jan 2007 19:50:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81270 invoked by uid 99); 26 Jan 2007 19:50:49 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Jan 2007 11:50:49 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [206.190.38.59] (HELO web50305.mail.yahoo.com) (206.190.38.59)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 26 Jan 2007 11:50:39 -0800
Received: (qmail 90767 invoked by uid 60001); 26 Jan 2007 19:50:11 -0000
Message-ID: <20070126195010.90762.qmail@web50305.mail.yahoo.com>
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=cIIV8H3r0VViW9UGdw/iQQ+xucmHPlqgCYydfYwJ2t5RWK0SDYgAeVCoWd1inzuzIYy+0tE/d3r7ev+oxwPPVtaHSR3Zn8G2gaGSIEKvkfJBhgTlysH7xYC3/0XQrVRvDb6yzBvKglGQ2MG0ppVI2+Q8KDxc0e+qPurKX3SpFRQ=;
X-YMail-OSG: J6iNsncVM1k1o5Zfx6tr1e6eoBkrZcDzdBiHdW01m4fY08QeI09yMlpBEW0p513Z2rej6whtR.hf7SYaWaVctVR4i.KpdYsZ5rkLCs80ysnDTOt3IF44kmvU470AueULAgkPkZ9pWm_71Q--
Received: from [58.63.153.27] by web50305.mail.yahoo.com via HTTP; Fri, 26 Jan 2007 11:50:08 PST
X-Mailer: YahooMailRC/368.3 YahooMailWebService/0.6.132.7
Date: Fri, 26 Jan 2007 11:50:08 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: NO_NORMS and TOKENIZED?
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Funny, I was looking to do the same thing the other day and gave up thinkin=
g it wasn't possible, not being aware of setOmitNorms().  Yeah, a javadoc p=
atch would be welcome.=0A=0AOtis=0A=0A----- Original Message ----=0AFrom: N=
adav Har'El <nyh@math.technion.ac.il>=0ATo: java-user@lucene.apache.org=0AS=
ent: Tuesday, January 23, 2007 10:49:33 AM=0ASubject: Re: NO_NORMS and TOKE=
NIZED?=0A=0AOn Tue, Jan 23, 2007, Yonik Seeley wrote about "Re: NO_NORMS an=
d TOKENIZED?":=0A> >When adding a field to a document, Field.Index gives me=
 four options: NO,=0A> >NO_NORMS, TOKENIZED and UN_TOKENIZED.=0A>..=0A> >Wh=
at can I do if I want to index the field's value *with* an Analyzer, but=0A=
> >still disable the storing of norms (because the field length should not =
be=0A> >considered in scoring)?=0A>...=0A> I hadn't added a Field.Index opt=
ion at all, and Doug suggested=0A> NO_NORMS, probably because it's mostly h=
armless to new users who might=0A> disable length normalization without rea=
lizing the implications.=0A> =0A> For other fields, I prefer use of setOmit=
Norms()=0A=0AThanks! I wasn't aware of this method. It's exactly what I nee=
ded.=0A=0AI never thought of trying to modify the Field after construction.=
..=0APerhaps the NO_NORMS javadoc should refer to setOmitNorms()? (Or I sho=
uld=0Alearn to search the documentation better :-)).=0A=0A-- =0ANadav Har'E=
l                        |      Tuesday, Jan 23 2007, 4 Shevat 5767=0AIBM H=
aifa Research Lab              |-----------------------------------------=
=0A                                    |Today is the tomorrow you worried a=
bout=0Ahttp://nadav.harel.org.il           |yesterday, and now you know why=
.=0A=0A--------------------------------------------------------------------=
-=0ATo unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org=0AFor a=
dditional commands, e-mail: java-user-help@lucene.apache.org=0A=0A=0A=0A

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25734-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 26 20:36:55 2007
Return-Path: <java-user-return-25734-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82609 invoked from network); 26 Jan 2007 20:36:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Jan 2007 20:36:54 -0000
Received: (qmail 63197 invoked by uid 500); 26 Jan 2007 20:36:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63162 invoked by uid 500); 26 Jan 2007 20:36:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63151 invoked by uid 99); 26 Jan 2007 20:36:53 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Jan 2007 12:36:53 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of aconger5@brandeis.edu designates 129.64.99.163 as permitted sender)
Received: from [129.64.99.163] (HELO alba.unet.brandeis.edu) (129.64.99.163)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Jan 2007 12:36:44 -0800
Received: from ibmo7ikvz4d47o (c-65-96-5-38.hsd1.ma.comcast.net [65.96.5.38])
	(authenticated bits=0)
	by alba.unet.brandeis.edu (8.13.6/8.13.6) with ESMTP id l0QKaMx5032723
	(version=TLSv1/SSLv3 cipher=RC4-MD5 bits=128 verify=NOT)
	for <java-user@lucene.apache.org>; Fri, 26 Jan 2007 15:36:22 -0500
Message-ID: <017f01c74189$76f60c70$6701a8c0@ibmo7ikvz4d47o>
From: "Anne Conger" <aconger5@brandeis.edu>
To: <java-user@lucene.apache.org>
References: <20070126195010.90762.qmail@web50305.mail.yahoo.com>
Subject: Multiword Highlighting
Date: Fri, 26 Jan 2007 15:35:05 -0500
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2800.1807
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1896
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

I'm wondering what the best way is to do highlighting of multiword phrases.
For example, if a search is for "president kennedy", how can I make sure
that "president" is only highlighted if it is next to "kennedy" and
"president" in "president clinton" is not.
I haven't figured out where in the process the phrases are being split into
separate words.
Would restructuring the query that is passed to the scorer help with this?
It's currently a set of boolean queries with each phrase as a separate
query.  Or should the exact phrases be set up as WeightedTerms?

Thanks!

Anne


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25735-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 26 21:03:44 2007
Return-Path: <java-user-return-25735-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94621 invoked from network); 26 Jan 2007 21:03:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Jan 2007 21:03:43 -0000
Received: (qmail 5747 invoked by uid 500); 26 Jan 2007 21:03:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5424 invoked by uid 500); 26 Jan 2007 21:03:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5413 invoked by uid 99); 26 Jan 2007 21:03:42 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Jan 2007 13:03:42 -0800
X-ASF-Spam-Status: No, hits=3.4 required=10.0
	tests=FORGED_MUA_OUTLOOK,MSGID_FROM_MTA_HEADER
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [216.170.99.246] (HELO mail.rhoderunner.com) (216.170.99.246)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Jan 2007 13:03:32 -0800
Message-ID: <20832262.1111169845283973.JavaMail.root@dell.rhoderunner.com>
MIME-Version: 1.0
X-UserIsAuth: true
Received: from mism.r-effects.com ([209.166.180.139])
          by mail.rhoderunner.com (JAMES SMTP Server 2.3.0rc2) with SMTP ID 190
          for <java-user@lucene.apache.org>;
          Fri, 26 Jan 2007 16:01:23 -0500 (EST)
From: "spamsucks" <spamsucks@rhoderunner.com>
To: <java-user@lucene.apache.org>
Subject: Write my own crawler VS  use nutch?
Date: Fri, 26 Jan 2007 16:01:22 -0500
Content-Type: text/plain;
	format=flowed;
	charset="iso-8859-1";
	reply-type=original
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.2869
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2962
X-Virus-Checked: Checked by ClamAV on apache.org

I am successfully using lucene in our application to index 12 different 
types of objects located in a database, and their relationships to each 
other to provide some nice search functionality for our website.  We are 
building lots of lucene queries programmatically to filter based upon 
categories, regions, zip codes, scoring, long/lats...

My problem is that there is content that is not in the database which we 
have a lot of... (about 3000+ pages) that we need to also include in the 
search results.  It's a whole lot of jsp's.

As I see this, I can either
a) Migrate this application to nutch
b) Write a web crawler to crawl our site and inject the crawl results into 
our lucene index.

I am leaning towards option B (write our own crawler), since I think it 
would only take me a couple of days of write a simple crawler and I wouldn't 
have to change much else.

Can anyone think of any points/counterpoints for using Nutch vs. writing a 
crawler to extend our already used lucene framework?

Thanks.




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25736-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 26 21:51:51 2007
Return-Path: <java-user-return-25736-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 15250 invoked from network); 26 Jan 2007 21:51:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Jan 2007 21:51:51 -0000
Received: (qmail 85156 invoked by uid 500); 26 Jan 2007 21:51:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84597 invoked by uid 500); 26 Jan 2007 21:51:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 84586 invoked by uid 99); 26 Jan 2007 21:51:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Jan 2007 13:51:50 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [217.12.11.63] (HELO smtp009.mail.ukl.yahoo.com) (217.12.11.63)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 26 Jan 2007 13:51:40 -0800
Received: (qmail 53257 invoked from network); 26 Jan 2007 21:51:18 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=Received:X-YMail-OSG:Message-ID:Date:From:User-Agent:MIME-Version:To:Subject:References:In-Reply-To:Content-Type:Content-Transfer-Encoding;
  b=Ooskub55KtHLW/6obYNZpRmsFkZLLSaMaChWHn2V8VBF7YPxYTiw1G8EvbPhMTiNFJvKyywmWuXpN+sVlpF/RPiFLVYDn94WF5674LOr/AUTkVXpJeepgJW8ecrb5+D0HRUdm5STJRMpoeP2XlVuj0uFCR82Ft1cN2PGTAGAL0M=  ;
Received: from unknown (HELO ?127.0.0.1?) (markharw00d@194.106.34.5 with plain)
  by smtp009.mail.ukl.yahoo.com with SMTP; 26 Jan 2007 21:51:18 -0000
X-YMail-OSG: FY6c.WQVM1n3Rhx54f2du96mJqTZOlOS6RnRLgbWJUr1pOk7Wn1.MVf2kCV8BxnDvaC3OJaBNe1ZEgKRaeyMxugH0gySsH.7Q46dbwazxGBz2kU_uS0xR6iFy5DZ9zucVbNUeNOk14PMYYV6Mgjpl9EOwGKAVABQm7B3_kdVm8ZADp.qBK4cTauTrA--
Message-ID: <45BA77D1.3030005@yahoo.co.uk>
Date: Fri, 26 Jan 2007 21:51:13 +0000
From: markharw00d <markharw00d@yahoo.co.uk>
User-Agent: Thunderbird 1.5.0.9 (Windows/20061207)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Multiword Highlighting
References: <20070126195010.90762.qmail@web50305.mail.yahoo.com> <017f01c74189$76f60c70$6701a8c0@ibmo7ikvz4d47o>
In-Reply-To: <017f01c74189$76f60c70$6701a8c0@ibmo7ikvz4d47o>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

This is a deficiency in the highlighter functionality that has been 
discussed several times before. The summary is  -  not a trivial fix.

See here for background:

http://marc2.theaimsgroup.com/?l=lucene-user&m=114631181214303&w=1

http://www.gossamer-threads.com/lists/engine?do=post_view_printable;post=42014;list=lucene


Cheers,
Mark

Anne Conger wrote:
> Hi,
>
> I'm wondering what the best way is to do highlighting of multiword phrases.
> For example, if a search is for "president kennedy", how can I make sure
> that "president" is only highlighted if it is next to "kennedy" and
> "president" in "president clinton" is not.
> I haven't figured out where in the process the phrases are being split into
> separate words.
> Would restructuring the query that is passed to the scorer help with this?
> It's currently a set of boolean queries with each phrase as a separate
> query.  Or should the exact phrases be set up as WeightedTerms?
>
> Thanks!
>
> Anne
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>   



	
	
		
___________________________________________________________ 
All new Yahoo! Mail "The new Interface is stunning in its simplicity and ease of use." - PC Magazine 
http://uk.docs.yahoo.com/nowyoucan.html

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25737-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 26 21:56:00 2007
Return-Path: <java-user-return-25737-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 16468 invoked from network); 26 Jan 2007 21:55:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Jan 2007 21:55:59 -0000
Received: (qmail 95009 invoked by uid 500); 26 Jan 2007 21:55:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94978 invoked by uid 500); 26 Jan 2007 21:55:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94967 invoked by uid 99); 26 Jan 2007 21:55:58 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Jan 2007 13:55:58 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [68.142.200.109] (HELO web30406.mail.mud.yahoo.com) (68.142.200.109)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 26 Jan 2007 13:55:48 -0800
Received: (qmail 31048 invoked by uid 60001); 26 Jan 2007 21:55:27 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=4sFnrrRjV8PlTpJTuKAp6CjIQv6bqSTPHcKSerjpWvW1Lbvy3beKH4hyNr1cTSWyE4M0uHAINaPouFUHvcEsnkTZRs0sQeY99jZGCBuxZ39IM4A6yvEZeE0w4LXoqbmiejl9K+ZKNbk4fV7P8rl5gl65YWwb1NaRFAXbWYctfYc=;
X-YMail-OSG: UvGpWi4VM1nlQqT5KwGXvwFKt0LAY8y_brSS6d8pbCEv69uD9osyM.RfnxpQqfkeWXNFlI1hSdJOaUYQXvZWgIuBfe75oAOyY0DzQLwWVq2rcaJm1jHIjzgW93CEaL6mEo8mL9OHL5afJ1GKlGY6EE_8OBoBQFwSWraTIDfuu2rHqkGg4qr5Ie4nCeT6
Received: from [83.245.56.30] by web30406.mail.mud.yahoo.com via HTTP; Fri, 26 Jan 2007 13:55:27 PST
X-Mailer: YahooMailRC/368.3 YahooMailWebService/0.6.132.7
Date: Fri, 26 Jan 2007 13:55:27 -0800 (PST)
From: Paul Lynch <pablolynch@yahoo.com>
Subject: Re: Problem with Custom Filter
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable
Message-ID: <425834.29974.qm@web30406.mail.mud.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks for that Erick, it was a great help in clearing up how the mechanism=
 works. I have it working now, here is the changed bits method (I would app=
reciate any advice you/anyone might have particularly around efficiency - t=
hanks again):=0A =0A public BitSet bits(IndexReader reader) throws IOExcept=
ion=0A {=0A  BitSet bits =3D new BitSet(reader.maxDoc());=0A  String[] adve=
rtiserIds =3D accessor.advertiserIds();=0A  =0A  int[] docs =3D new int[rea=
der.maxDoc()];=0A  int[] freqs =3D new int[reader.maxDoc()];=0A  =0A  for (=
int i=3D0; i<advertiserIds.length; i++)=0A  {=0A   String advertiserId =3D =
advertiserIds[i];=0A   if (advertiserId!=3Dnull)=0A   {=0A    TermDocs term=
Docs =3D reader.termDocs(new Term("AdvertId", advertiserId));=0A    int cou=
nt =3D termDocs.read(docs, freqs);=0A    for(int ix=3D0;ix<count;ix++) bits=
.set(docs[ix]);=0A   }=0A  }=0A  =0A  return bits;=0A }=0A=0A----- Original=
 Message ----=0AFrom: Erick Erickson <erickerickson@gmail.com>=0ATo: java-u=
ser@lucene.apache.org=0ASent: Friday, January 26, 2007 7:14:38 PM=0ASubject=
: Re: Problem with Custom Filter=0A=0A=0AI think you're only setting one bi=
t in your filter.=0A=0AYou're docs array is only one cell long, and your te=
rmDocs.read reads up to=0Athe length of docs (exactly one in this case) ent=
ries. So, you're getting=0Aonly one doc ID. And setting it. Even if you mad=
e your array larger, you=0Awould only set one because of the if (count =3D=
=3D 1) clause. I'd recommend a=0Afor loop for (idx =3D 0; idx < count; ++id=
x) { bits.set(doc[idx]); }=0A=0ABut I don't think you should be doing it th=
is way in the first place unless=0Ayou're assured that you know what the up=
per limit of the number of matching=0Adocs is, since I don't think there's =
any way to cause TermDocs.read to=0Areturn entries n through n+sizeofdocs. =
Try something like=0A=0AtermDocs.seek(new Term("advertiserId", advertiserId=
);=0Awhile (termDocs.next()) {=0A    bits.set(termDocs.doc());=0A}=0A=0AHop=
e this helps=0AErick=0A=0AOn 1/26/07, Paul Lynch <pablolynch@yahoo.com> wro=
te:=0A>=0A> Hi,=0A>=0A> I am going mad trying to find out what I am doing w=
rong with my custom=0A> filter implementation (almost an exact copy of Spec=
ialsFilter from LIA). I=0A> have put together a quick sample to illustrate =
my problem, if some kind soul=0A> has 2 minutes to take a quick look and te=
ll me where I am being so stupid, I=0A> would really appreciate it:=0A>=0A>=
 PROBLEM: Filtered query returns 1 result when it should return 10=0A>=0A> =
TEST RIG:=0A>=0A> Add the documents to the index, every 10 documents having=
 the same=0A> "advertiserId":=0A>   int idToAdd =3D 100000;=0A>   for(int i=
=3D0;i<100;i++)=0A>   {=0A>    if(i>0 && i%10=3D=3D0) idToAdd++;=0A>    Doc=
ument doc =3D new Document();=0A>    doc.add(new Field("advertiserId", Inte=
ger.toString(idToAdd),=0A> Field.Store.YES, Field.Index.UN_TOKENIZED));=0A>=
    doc.add(new Field("contents", "document number " + Integer.toString(i)=
=0A> + " random string", Field.Store.YES, Field.Index.TOKENIZED));=0A>    w=
riter.addDocument(doc);=0A>   }=0A>=0A> I have verified that the docs were =
created probably by browsing the index=0A> with Luke.=0A>=0A>    String[] a=
dvertiserIds =3D {"100003"};=0A>    IFeaturedAdvertisersAccessor accessor =
=3D new=0A> FeaturedAdvertisersAccessor(advertiserIds);=0A>    Filter filte=
r =3D new FeaturedAdvertisersFilter(accessor);=0A>=0A>    TermQuery tq =3D =
new TermQuery(new Term("contents", "document"));=0A>    BooleanQuery bq =3D=
 new BooleanQuery();=0A>    bq.add(tq, Occur.MUST);=0A>=0A>    Hits hits =
=3D searcher.search(tq, filter);=0A>    System.out.println("hits.length: " =
+ hits.length());=0A>=0A> result "hits.length: 1"=0A>=0A> Source for Featur=
edAdvertisersFilter:=0A>=0A> public class FeaturedAdvertisersFilter extends=
 Filter=0A> {=0A> private IFeaturedAdvertisersAccessor accessor;=0A>=0A> pu=
blic FeaturedAdvertisersFilter(IFeaturedAdvertisersAccessor accessor)=0A> {=
=0A>   this.accessor =3D accessor;=0A> }=0A>=0A> public BitSet bits(IndexRe=
ader reader) throws IOException=0A> {=0A>   BitSet bits =3D new BitSet(read=
er.maxDoc());=0A>   String[] advertiserIds =3D accessor.advertiserIds();=0A=
>=0A>   int[] docs =3D new int[1];=0A>   int[] freqs =3D new int[1];=0A>=0A=
>   for (int i=3D0; i<advertiserIds.length; i++)=0A>   {=0A>    String adve=
rtiserId =3D advertiserIds[i];=0A>    if (advertiserId!=3Dnull)=0A>    {=0A=
>     TermDocs termDocs =3D reader.termDocs(new Term("advertiserId",=0A> ad=
vertiserId));=0A>     int count =3D termDocs.read(docs, freqs);=0A>     if =
(count =3D=3D 1)=0A>     {=0A>      bits.set(docs[0]);=0A>     }=0A>    }=
=0A>   }=0A>=0A>   return bits;=0A> }=0A> }=0A>=0A> Any help would be appre=
ciated, Regards,=0A> Paul=0A>=0A> -----------------------------------------=
----------------------------=0A> To unsubscribe, e-mail: java-user-unsubscr=
ibe@lucene.apache.org=0A> For additional commands, e-mail: java-user-help@l=
ucene.apache.org=0A>=0A>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25738-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 26 22:28:49 2007
Return-Path: <java-user-return-25738-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 23252 invoked from network); 26 Jan 2007 22:28:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Jan 2007 22:28:47 -0000
Received: (qmail 40450 invoked by uid 500); 26 Jan 2007 22:28:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40069 invoked by uid 500); 26 Jan 2007 22:28:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40052 invoked by uid 99); 26 Jan 2007 22:28:46 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Jan 2007 14:28:46 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Jan 2007 14:28:37 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id A0B445B766; Fri, 26 Jan 2007 14:28:16 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 9D4F17F403
	for <java-user@lucene.apache.org>; Fri, 26 Jan 2007 14:28:16 -0800 (PST)
Date: Fri, 26 Jan 2007 14:28:16 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Is the new version of the Lucene book available in any form?
In-Reply-To: <603870.86117.qm@web50307.mail.yahoo.com>
Message-ID: <Pine.LNX.4.58.0701261427080.27125@hal.rescomp.berkeley.edu>
References: <603870.86117.qm@web50307.mail.yahoo.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: LIA2 will happen, but Lucene is undergoing a lot of changes, so Erik and
: I are going to wait a little more for development to calm down
: (utopia?).

you're waiting for Lucene development to calm down? ... that could be a
long wait.


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25739-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 26 22:32:59 2007
Return-Path: <java-user-return-25739-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 24090 invoked from network); 26 Jan 2007 22:32:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Jan 2007 22:32:58 -0000
Received: (qmail 46359 invoked by uid 500); 26 Jan 2007 22:32:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46332 invoked by uid 500); 26 Jan 2007 22:32:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46321 invoked by uid 99); 26 Jan 2007 22:32:58 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Jan 2007 14:32:58 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Jan 2007 14:32:49 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 4B4035B764; Fri, 26 Jan 2007 14:32:29 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 4775F7F403
	for <java-user@lucene.apache.org>; Fri, 26 Jan 2007 14:32:29 -0800 (PST)
Date: Fri, 26 Jan 2007 14:32:29 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: What type of query best for OR with high score?
In-Reply-To: <pan.2007.01.25.20.02.06.151102@hayesinc.com>
Message-ID: <Pine.LNX.4.58.0701261430520.27125@hal.rescomp.berkeley.edu>
References: <pan.2007.01.25.20.02.06.151102@hayesinc.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


regular Lucene BooleanQueries should work fine for this ... but you may
want to customize your Similarity so that the idf and lengthNorms aren't a
factor .. you may want to take the tf out of hte picture too (if you care
more about matching lots of terms and less about matching one term lots of
times)

the Similarity javadocs have lots of info on this stuff, and there's lots
of past discussions baoutwritting custom Similarity classes.




-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25740-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jan 26 22:41:32 2007
Return-Path: <java-user-return-25740-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 27949 invoked from network); 26 Jan 2007 22:41:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Jan 2007 22:41:31 -0000
Received: (qmail 63398 invoked by uid 500); 26 Jan 2007 22:41:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63371 invoked by uid 500); 26 Jan 2007 22:41:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63355 invoked by uid 99); 26 Jan 2007 22:41:29 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Jan 2007 14:41:29 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [202.74.207.2] (HELO mail2.woosh.co.nz) (202.74.207.2)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Jan 2007 14:41:19 -0800
Received: from joostdell (202-74-196-254.ue.woosh.co.nz [202.74.196.254]) by woosh.co.nz
 (Rockliffe SMTPRA 6.1.22) with ESMTP id <B0068409072@mail2.woosh.co.nz> for <java-user@lucene.apache.org>;
 Sat, 27 Jan 2007 11:40:56 +1300
From: "Joost Schouten" <joost@jsportal.com>
To: <java-user@lucene.apache.org>
Subject: lucense index/document architecture
Date: Sat, 27 Jan 2007 11:40:51 +1300
Message-ID: <049601c7419b$08983e80$0202fea9@joostdell>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3028
Thread-Index: AcdBmwe8oAolGhJkSEyvFh8c4hjKdg==
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

I'm setting up lucene to work with our webapp to index a database. My db
holds files which can belong to a user or a company or both. I want the
option for my users to search across all content, but also search within the
files for one user or company. What is the best architecture approach for
this? Do you add a field to the document with the parentId's, do you make a
different index for each user/company (can be 1000's) or is there a
different solution all together?

Thank you,
Joost


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25741-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jan 27 00:30:35 2007
Return-Path: <java-user-return-25741-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 52857 invoked from network); 27 Jan 2007 00:30:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Jan 2007 00:30:34 -0000
Received: (qmail 73528 invoked by uid 500); 27 Jan 2007 00:30:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73499 invoked by uid 500); 27 Jan 2007 00:30:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73488 invoked by uid 99); 27 Jan 2007 00:30:35 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Jan 2007 16:30:34 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 66.249.92.175 as permitted sender)
Received: from [66.249.92.175] (HELO ug-out-1314.google.com) (66.249.92.175)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Jan 2007 16:30:26 -0800
Received: by ug-out-1314.google.com with SMTP id k40so872297ugc
        for <java-user@lucene.apache.org>; Fri, 26 Jan 2007 16:30:05 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=gAZuWSgcDuLq/+/f1SEfcPNIlT0aVg2FYr+/1lbYVo9zC4znsfR4jVzC9Rgsl/kw9DnLQoTlMlM7jz2+MJvE1AJ9/m+P7vAK4MfR1l5AaxvC4/rjGGRVf9MkLhDhbpcTfDgN18oD/Nx+imjxEzoHxPWOQIEBbK1OGqPG0y1MRIk=
Received: by 10.82.183.19 with SMTP id g19mr2295958buf.1169857804585;
        Fri, 26 Jan 2007 16:30:04 -0800 (PST)
Received: by 10.82.162.9 with HTTP; Fri, 26 Jan 2007 16:30:04 -0800 (PST)
Message-ID: <359a92830701261630n2e7daf2fk819ff8745b085f27@mail.gmail.com>
Date: Fri, 26 Jan 2007 19:30:04 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: lucense index/document architecture
In-Reply-To: <049601c7419b$08983e80$0202fea9@joostdell>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_53895_26601635.1169857804217"
References: <049601c7419b$08983e80$0202fea9@joostdell>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_53895_26601635.1169857804217
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

To steal a phrase from Mr. Hatcher... it depends <G>. I'd try keeping it all
in one index at the start until you get some clue how big the index will
eventually grow to and whether your searching is acceptable. Do you have any
idea how big the raw data you're going to ask the index to hold? 1M? 1G?,
1T?

But it's simple enough to do what you want, just include a field for each
document, let's say Company. Your queries can easily search all documents or
only those belonging to a single company by including an
"+company:companyyoucareabout". Or search all documents by leaving that
clause off.

Do be aware, when you're doing performance testing, that the first query,
particularly when sorting, takes significantly longer since Lucene will
build up some internal caches and you pay a penalty the first time through.
Various strategies exist for pre-warming the searcher up by firing some
canned queries at the search engine as the server comes up......

If you're a database guy, you might not appreciate one thing that was hard
for me to understand; all documents in an index do NOT have to have the same
fields. In fact, your index could theoretically have no two documents with
any field in common <G>.If you're used to thinking about static table
definitions in a database this can take a while to get used to.

Hope this helps
Erick

On 1/26/07, Joost Schouten <joost@jsportal.com> wrote:
>
> Hi,
>
> I'm setting up lucene to work with our webapp to index a database. My db
> holds files which can belong to a user or a company or both. I want the
> option for my users to search across all content, but also search within
> the
> files for one user or company. What is the best architecture approach for
> this? Do you add a field to the document with the parentId's, do you make
> a
> different index for each user/company (can be 1000's) or is there a
> different solution all together?
>
> Thank you,
> Joost
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_53895_26601635.1169857804217--

From java-user-return-25742-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jan 27 05:54:38 2007
Return-Path: <java-user-return-25742-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 16488 invoked from network); 27 Jan 2007 05:54:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Jan 2007 05:54:37 -0000
Received: (qmail 53715 invoked by uid 500); 27 Jan 2007 05:54:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53683 invoked by uid 500); 27 Jan 2007 05:54:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53672 invoked by uid 99); 27 Jan 2007 05:54:37 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Jan 2007 21:54:37 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of pvsaikrishna@gmail.com designates 66.249.92.169 as permitted sender)
Received: from [66.249.92.169] (HELO ug-out-1314.google.com) (66.249.92.169)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Jan 2007 21:54:29 -0800
Received: by ug-out-1314.google.com with SMTP id k40so897057ugc
        for <java-user@lucene.apache.org>; Fri, 26 Jan 2007 21:54:07 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=TzR6kW9GTjxFScz0JDRKSzA8sObhtRQHqKLzZD3Hb1Nv/kDnUHaB7Sb8Z5iELlFM8J/b7dfCe/Vw1VCjMDJWRbpX21OPfpPlcRz53IHe4XcpUfTnCKRqOVGcuXrP7lrZfF6OEzN79yB6RK8UxxPd43RJPs9zzFAQo9kycZ+6vXw=
Received: by 10.67.19.13 with SMTP id w13mr5430101ugi.1169877247608;
        Fri, 26 Jan 2007 21:54:07 -0800 (PST)
Received: by 10.67.102.14 with HTTP; Fri, 26 Jan 2007 21:54:07 -0800 (PST)
Message-ID: <171dbfa60701262154s73f2c344k4585f8b4e5400302@mail.gmail.com>
Date: Sat, 27 Jan 2007 11:24:07 +0530
From: "saikrishna venkata pendyala" <pvsaikrishna@gmail.com>
To: java-user@lucene.apache.org
Subject: Re : lucene document id's
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_61128_15318159.1169877247576"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_61128_15318159.1169877247576
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hai ,
      I was trying to store to document id's external.

      I have found that lucene generates document id's linearly starting
from 0 and are not changed until any document is deleted.
       but it did work for me.

      Was the above one correct ? if not who could I store document id's
externally.

      Also who to retrieve document knowing it's id.

------=_Part_61128_15318159.1169877247576--

From java-user-return-25743-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jan 27 07:05:17 2007
Return-Path: <java-user-return-25743-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 23257 invoked from network); 27 Jan 2007 07:05:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Jan 2007 07:05:16 -0000
Received: (qmail 85082 invoked by uid 500); 27 Jan 2007 07:05:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85046 invoked by uid 500); 27 Jan 2007 07:05:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85035 invoked by uid 99); 27 Jan 2007 07:05:16 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Jan 2007 23:05:16 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [206.190.38.60] (HELO web50306.mail.yahoo.com) (206.190.38.60)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 26 Jan 2007 23:05:07 -0800
Received: (qmail 47127 invoked by uid 60001); 27 Jan 2007 07:04:45 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=soDf/f/3hBKO3dZhs7n1n6AXtSi6cGs5xWIK1qNEOPsUcPEa7vWiQtTC1hOwoj1GGHtuBo1gG5Usay0Av5TNj6rI4+eizv6T5kSpag8BhvHChFSALnw1frTRitLER+ZGDDGZMawpEOquYRCFmf+S/Hzwf4EB9PmtFGACb2vOGC8=;
X-YMail-OSG: e0LJa68VM1kOU4gs62D_njcBpf6o9S.6ORCxk_4s53QxNPOMKVWUKSTv0ib9YVsTUm_bMcvlp.9RwrQSEZamgPN_nG2o6XGRyEYUYO.2DkU93CKK_TDAulQJZJbeKD9qO4LHwSg5xRmMn.thKvJDkGVmvDtQX9P6NHsFJXWCSlo0iyOyBhKFyLnxjfT7
Received: from [58.63.146.81] by web50306.mail.yahoo.com via HTTP; Fri, 26 Jan 2007 23:04:45 PST
X-Mailer: YahooMailRC/368.3 YahooMailWebService/0.6.132.7
Date: Fri, 26 Jan 2007 23:04:45 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: lucense index/document architecture
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable
Message-ID: <296568.46811.qm@web50306.mail.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

A single index with an id field sounds like a fine approach here.=0A=0AOtis=
=0A=0A----- Original Message ----=0AFrom: Joost Schouten <joost@jsportal.co=
m>=0ATo: java-user@lucene.apache.org=0ASent: Saturday, January 27, 2007 6:4=
0:51 AM=0ASubject: lucense index/document architecture=0A=0A=0AHi,=0A=0AI'm=
 setting up lucene to work with our webapp to index a database. My db=0Ahol=
ds files which can belong to a user or a company or both. I want the=0Aopti=
on for my users to search across all content, but also search within the=0A=
files for one user or company. What is the best architecture approach for=
=0Athis? Do you add a field to the document with the parentId's, do you mak=
e a=0Adifferent index for each user/company (can be 1000's) or is there a=
=0Adifferent solution all together?=0A=0AThank you,=0AJoost=0A=0A=0A-------=
--------------------------------------------------------------=0ATo unsubsc=
ribe, e-mail: java-user-unsubscribe@lucene.apache.org=0AFor additional comm=
ands, e-mail: java-user-help@lucene.apache.org

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25744-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jan 27 07:06:15 2007
Return-Path: <java-user-return-25744-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 23751 invoked from network); 27 Jan 2007 07:06:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Jan 2007 07:06:15 -0000
Received: (qmail 89499 invoked by uid 500); 27 Jan 2007 07:06:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89462 invoked by uid 500); 27 Jan 2007 07:06:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89451 invoked by uid 99); 27 Jan 2007 07:06:14 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Jan 2007 23:06:14 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [206.190.38.62] (HELO web50308.mail.yahoo.com) (206.190.38.62)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 26 Jan 2007 23:06:05 -0800
Received: (qmail 9250 invoked by uid 60001); 27 Jan 2007 07:05:44 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=MNAaxqiPwqbn7crv+xfGmS399OED7DVMuBqRI3gCnvOI0+mNPwvyrk4XZvYBhhGY3OJWwIinX065yiKtOZ9MUsVj6b56qgKjAcQ/offUw5lqKPYzfsGle37TK+REgoiBpq9qGv1RGiVr4KwyLgRVLVxGzADqHQcSHmAbFH9j+ZM=;
X-YMail-OSG: HORHFhMVM1mll0v.GY33hW.IyraweF.YiNeGeKJ.rJbDMScNfPJ_VgCJA5hpl8eWAEw2tJg6P4YSCBKCSn0jrQe.mlWyYWg.7jdyGDaOClkgKDtRtI9OoXkogFCHQnWhUI6Dzl79na6J7g--
Received: from [58.63.146.81] by web50308.mail.yahoo.com via HTTP; Fri, 26 Jan 2007 23:05:43 PST
X-Mailer: YahooMailRC/368.3 YahooMailWebService/0.6.132.7
Date: Fri, 26 Jan 2007 23:05:43 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Is the new version of the Lucene book available in any form?
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable
Message-ID: <894410.9237.qm@web50308.mail.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

We'll see, the blind men said.=0A=0AOtis=0A=0A----- Original Message ----=
=0AFrom: Chris Hostetter <hossman_lucene@fucit.org>=0ATo: java-user@lucene.=
apache.org=0ASent: Saturday, January 27, 2007 6:28:16 AM=0ASubject: Re: Is =
the new version of the Lucene book available in any form?=0A=0A=0A: LIA2 wi=
ll happen, but Lucene is undergoing a lot of changes, so Erik and=0A: I are=
 going to wait a little more for development to calm down=0A: (utopia?).=0A=
=0Ayou're waiting for Lucene development to calm down? ... that could be a=
=0Along wait.=0A=0A=0A-Hoss=0A=0A=0A---------------------------------------=
------------------------------=0ATo unsubscribe, e-mail: java-user-unsubscr=
ibe@lucene.apache.org=0AFor additional commands, e-mail: java-user-help@luc=
ene.apache.org

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25745-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jan 27 10:09:34 2007
Return-Path: <java-user-return-25745-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64928 invoked from network); 27 Jan 2007 10:09:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Jan 2007 10:09:33 -0000
Received: (qmail 64925 invoked by uid 500); 27 Jan 2007 10:09:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64882 invoked by uid 500); 27 Jan 2007 10:09:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64871 invoked by uid 99); 27 Jan 2007 10:09:32 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 27 Jan 2007 02:09:32 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [202.74.207.2] (HELO mail2.woosh.co.nz) (202.74.207.2)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 27 Jan 2007 02:09:23 -0800
Received: from joostdell (202-74-196-254.ue.woosh.co.nz [202.74.196.254]) by woosh.co.nz
 (Rockliffe SMTPRA 6.1.22) with ESMTP id <B0068441571@mail2.woosh.co.nz> for <java-user@lucene.apache.org>;
 Sat, 27 Jan 2007 23:09:00 +1300
From: "Joost Schouten" <joost@jsportal.com>
To: <java-user@lucene.apache.org>
References: <049601c7419b$08983e80$0202fea9@joostdell> <359a92830701261630n2e7daf2fk819ff8745b085f27@mail.gmail.com>
Subject: RE: lucense index/document architecture
Date: Sat, 27 Jan 2007 23:08:49 +1300
Message-ID: <04db01c741fb$2751d6a0$0202fea9@joostdell>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3028
Thread-Index: AcdBqmUdHoH8qmyVRGa6g+UEbSlxfgAUCSxQ
In-Reply-To: <359a92830701261630n2e7daf2fk819ff8745b085f27@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Erick, Otis,

Thank you for your help. I will work with a single index and parent fields.
It's hard to say exactly how much raw data I will index as this differs per
client. But I guess right now I'm more looking at 1G (contents of a
non-CLOB/BLOB DB). But one client is thinking of throwing their entire 100T
file system in it. Not quite sure how to handle that yet. Should I have a
different architecture with 100T compared to 1G?

Thanks,
Joost Schouten
Director
 
JS Portal
Dasstraat 21
2623CB Delft
the Netherlands
P: +31 6 160 160 14
E: joost@jsportal.com
W: www.jsportal.com 

-----Original Message-----
From: Erick Erickson [mailto:erickerickson@gmail.com] 
Sent: Saturday, January 27, 2007 1:30 PM
To: java-user@lucene.apache.org
Subject: Re: lucense index/document architecture

To steal a phrase from Mr. Hatcher... it depends <G>. I'd try keeping it all
in one index at the start until you get some clue how big the index will
eventually grow to and whether your searching is acceptable. Do you have any
idea how big the raw data you're going to ask the index to hold? 1M? 1G?,
1T?

But it's simple enough to do what you want, just include a field for each
document, let's say Company. Your queries can easily search all documents or
only those belonging to a single company by including an
"+company:companyyoucareabout". Or search all documents by leaving that
clause off.

Do be aware, when you're doing performance testing, that the first query,
particularly when sorting, takes significantly longer since Lucene will
build up some internal caches and you pay a penalty the first time through.
Various strategies exist for pre-warming the searcher up by firing some
canned queries at the search engine as the server comes up......

If you're a database guy, you might not appreciate one thing that was hard
for me to understand; all documents in an index do NOT have to have the same
fields. In fact, your index could theoretically have no two documents with
any field in common <G>.If you're used to thinking about static table
definitions in a database this can take a while to get used to.

Hope this helps
Erick

On 1/26/07, Joost Schouten <joost@jsportal.com> wrote:
>
> Hi,
>
> I'm setting up lucene to work with our webapp to index a database. My db
> holds files which can belong to a user or a company or both. I want the
> option for my users to search across all content, but also search within
> the
> files for one user or company. What is the best architecture approach for
> this? Do you add a field to the document with the parentId's, do you make
> a
> different index for each user/company (can be 1000's) or is there a
> different solution all together?
>
> Thank you,
> Joost
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25746-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jan 27 12:32:59 2007
Return-Path: <java-user-return-25746-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22890 invoked from network); 27 Jan 2007 12:32:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Jan 2007 12:32:58 -0000
Received: (qmail 59323 invoked by uid 500); 27 Jan 2007 12:32:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59300 invoked by uid 500); 27 Jan 2007 12:32:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59287 invoked by uid 99); 27 Jan 2007 12:32:57 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 27 Jan 2007 04:32:57 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of pvsaikrishna@gmail.com designates 66.249.92.174 as permitted sender)
Received: from [66.249.92.174] (HELO ug-out-1314.google.com) (66.249.92.174)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 27 Jan 2007 04:32:48 -0800
Received: by ug-out-1314.google.com with SMTP id k40so922397ugc
        for <java-user@lucene.apache.org>; Sat, 27 Jan 2007 04:32:27 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=Mnx3IIh5Z9/+xEyaqQmaj6Jjt8GVf7KZ9aTYZ4oS0YJabDxT87qG2X0YGQqJ+4kdAfiMfDxo4aH7Togm2dgwRdDLrLupXD5RxEz9wNVVU9GcUWAocFrNLVfgwuP8ayqXll9jKRNMrFmHQ8ZVdgqJ+C3bTztvssrSksLxEdVk4Qs=
Received: by 10.67.99.1 with SMTP id b1mr5759107ugm.1169901147110;
        Sat, 27 Jan 2007 04:32:27 -0800 (PST)
Received: by 10.67.102.14 with HTTP; Sat, 27 Jan 2007 04:32:27 -0800 (PST)
Message-ID: <171dbfa60701270432g468c92bcx6283795e6d58c85b@mail.gmail.com>
Date: Sat, 27 Jan 2007 18:02:27 +0530
From: "saikrishna venkata pendyala" <pvsaikrishna@gmail.com>
To: java-user@lucene.apache.org
Subject: Re : lucene doc id's
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_62914_18495664.1169901147079"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_62914_18495664.1169901147079
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hai ,
      I was trying to store to document id's external.

      I have found that lucene generates document id's linearly starting
from 0 and are not changed until any document is deleted.
       but it did work for me.

     How could I store document id's externally.

------=_Part_62914_18495664.1169901147079--

From java-user-return-25747-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jan 27 15:35:00 2007
Return-Path: <java-user-return-25747-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 66331 invoked from network); 27 Jan 2007 15:34:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Jan 2007 15:34:59 -0000
Received: (qmail 79741 invoked by uid 500); 27 Jan 2007 15:34:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79710 invoked by uid 500); 27 Jan 2007 15:34:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79699 invoked by uid 99); 27 Jan 2007 15:34:59 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 27 Jan 2007 07:34:59 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [206.190.39.214] (HELO web50312.mail.yahoo.com) (206.190.39.214)
    by apache.org (qpsmtpd/0.29) with SMTP; Sat, 27 Jan 2007 07:34:49 -0800
Received: (qmail 48691 invoked by uid 60001); 27 Jan 2007 15:34:24 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=1xw2pyxt6bvMRpBsd6tUDtRrsjL+57WO+tfxH8Q/eleLMQEU9Dpdw0D6ejCcxBUJ4lthRGgMNz1qZDVeqxNlxS0qMdc4Yec0Hol0iAEl1r+LFThwSBESZ4AfLz7JxQC8VZl1kxv+ykpQfm2/IvYmr96MUTdokXqp89VIg9uYs8w=;
X-YMail-OSG: X3EdcCcVM1khxypozqee6PLQ_ze6.gfuoJK97UjmbEdRzFfwa9v8x1jXb0g3LMg3HULvMhRYz3.g7qFwtSVg4S28gRpvaZbC6jkOrU.cWTU0j9ng0n9OdEaexZ4fFCnXrpv9SzxAVfm4ptTuSH862ikFO69FL9h4amFYSZsK4GgcQW5WLCUBs8ngZtFf
Received: from [58.63.146.81] by web50312.mail.yahoo.com via HTTP; Sat, 27 Jan 2007 07:34:23 PST
X-Mailer: YahooMailRC/368.3 YahooMailWebService/0.6.132.7
Date: Sat, 27 Jan 2007 07:34:23 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: lucense index/document architecture
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable
Message-ID: <921644.35292.qm@web50312.mail.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

100TB?  Ouch.  Yes, most certainly very different.  Again, how to split the=
 index and design the whole system depends on how this is going to be used,=
 how it's going to be changed, if it's going to be changed, how it's going =
to grow, etc.=0AI'd love to hear from you once you start working with 100TB=
 of data, and I'm sure others would, too.=0A=0AOtis=0A=0A----- Original Mes=
sage ----=0AFrom: Joost Schouten <joost@jsportal.com>=0ATo: java-user@lucen=
e.apache.org=0ASent: Saturday, January 27, 2007 6:08:49 PM=0ASubject: RE: l=
ucense index/document architecture=0A=0A=0AErick, Otis,=0A=0AThank you for =
your help. I will work with a single index and parent fields.=0AIt's hard t=
o say exactly how much raw data I will index as this differs per=0Aclient. =
But I guess right now I'm more looking at 1G (contents of a=0Anon-CLOB/BLOB=
 DB). But one client is thinking of throwing their entire 100T=0Afile syste=
m in it. Not quite sure how to handle that yet. Should I have a=0Adifferent=
 architecture with 100T compared to 1G?=0A=0AThanks,=0AJoost Schouten=0ADir=
ector=0A=0AJS Portal=0ADasstraat 21=0A2623CB Delft=0Athe Netherlands=0AP: +=
31 6 160 160 14=0AE: joost@jsportal.com=0AW: www.jsportal.com =0A=0A-----Or=
iginal Message-----=0AFrom: Erick Erickson [mailto:erickerickson@gmail.com]=
 =0ASent: Saturday, January 27, 2007 1:30 PM=0ATo: java-user@lucene.apache.=
org=0ASubject: Re: lucense index/document architecture=0A=0ATo steal a phra=
se from Mr. Hatcher... it depends <G>. I'd try keeping it all=0Ain one inde=
x at the start until you get some clue how big the index will=0Aeventually =
grow to and whether your searching is acceptable. Do you have any=0Aidea ho=
w big the raw data you're going to ask the index to hold? 1M? 1G?,=0A1T?=0A=
=0ABut it's simple enough to do what you want, just include a field for eac=
h=0Adocument, let's say Company. Your queries can easily search all documen=
ts or=0Aonly those belonging to a single company by including an=0A"+compan=
y:companyyoucareabout". Or search all documents by leaving that=0Aclause of=
f.=0A=0ADo be aware, when you're doing performance testing, that the first =
query,=0Aparticularly when sorting, takes significantly longer since Lucene=
 will=0Abuild up some internal caches and you pay a penalty the first time =
through.=0AVarious strategies exist for pre-warming the searcher up by firi=
ng some=0Acanned queries at the search engine as the server comes up......=
=0A=0AIf you're a database guy, you might not appreciate one thing that was=
 hard=0Afor me to understand; all documents in an index do NOT have to have=
 the same=0Afields. In fact, your index could theoretically have no two doc=
uments with=0Aany field in common <G>.If you're used to thinking about stat=
ic table=0Adefinitions in a database this can take a while to get used to.=
=0A=0AHope this helps=0AErick=0A=0AOn 1/26/07, Joost Schouten <joost@jsport=
al.com> wrote:=0A>=0A> Hi,=0A>=0A> I'm setting up lucene to work with our w=
ebapp to index a database. My db=0A> holds files which can belong to a user=
 or a company or both. I want the=0A> option for my users to search across =
all content, but also search within=0A> the=0A> files for one user or compa=
ny. What is the best architecture approach for=0A> this? Do you add a field=
 to the document with the parentId's, do you make=0A> a=0A> different index=
 for each user/company (can be 1000's) or is there a=0A> different solution=
 all together?=0A>=0A> Thank you,=0A> Joost=0A>=0A>=0A> -------------------=
--------------------------------------------------=0A> To unsubscribe, e-ma=
il: java-user-unsubscribe@lucene.apache.org=0A> For additional commands, e-=
mail: java-user-help@lucene.apache.org=0A>=0A>=0A=0A=0A--------------------=
-------------------------------------------------=0ATo unsubscribe, e-mail:=
 java-user-unsubscribe@lucene.apache.org=0AFor additional commands, e-mail:=
 java-user-help@lucene.apache.org

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25748-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jan 27 17:15:28 2007
Return-Path: <java-user-return-25748-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 87248 invoked from network); 27 Jan 2007 17:15:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Jan 2007 17:15:27 -0000
Received: (qmail 46937 invoked by uid 500); 27 Jan 2007 17:15:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46906 invoked by uid 500); 27 Jan 2007 17:15:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46895 invoked by uid 99); 27 Jan 2007 17:15:27 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 27 Jan 2007 09:15:27 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 64.233.182.191 as permitted sender)
Received: from [64.233.182.191] (HELO nf-out-0910.google.com) (64.233.182.191)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 27 Jan 2007 09:15:19 -0800
Received: by nf-out-0910.google.com with SMTP id a27so1366092nfc
        for <java-user@lucene.apache.org>; Sat, 27 Jan 2007 09:14:58 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=XO4zybWsoTMqOwthDq6IQpTD920e7gupuPeGf2rLR7aM4ZSZgnE1YkplA6bTn0LmeBEVvEpNowzyRPCUh8Ui8Re7zwDFgl8GIgxUkX3PX0TWEdXLxXhez/UbqbPn+eYgHrx9tJBcP9TwwW4C/v/JdZ6XPXj9YNSwhVKphv4yauY=
Received: by 10.82.139.17 with SMTP id m17mr2604465bud.1169918098297;
        Sat, 27 Jan 2007 09:14:58 -0800 (PST)
Received: by 10.82.162.9 with HTTP; Sat, 27 Jan 2007 09:14:57 -0800 (PST)
Message-ID: <359a92830701270914y732ee84asc4505e7cfa179beb@mail.gmail.com>
Date: Sat, 27 Jan 2007 12:14:57 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Re : lucene document id's
In-Reply-To: <171dbfa60701262154s73f2c344k4585f8b4e5400302@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_59270_5887359.1169918097894"
References: <171dbfa60701262154s73f2c344k4585f8b4e5400302@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_59270_5887359.1169918097894
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I believe you are correct about when document IDs change. That said, I'd
strongly recommend you spend some time trying think of a way to keep from
doing this, since it may lead to endless synchronization issues.

But if you must, you can retrieve a document with IndexReader.document(id);

On 1/27/07, saikrishna venkata pendyala <pvsaikrishna@gmail.com> wrote:
>
> Hai ,
>       I was trying to store to document id's external.
>
>       I have found that lucene generates document id's linearly starting
> from 0 and are not changed until any document is deleted.
>        but it did work for me.
>
>       Was the above one correct ? if not who could I store document id's
> externally.
>
>       Also who to retrieve document knowing it's id.
>
>

------=_Part_59270_5887359.1169918097894--

From java-user-return-25749-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jan 27 17:20:08 2007
Return-Path: <java-user-return-25749-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 87873 invoked from network); 27 Jan 2007 17:20:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Jan 2007 17:20:07 -0000
Received: (qmail 50827 invoked by uid 500); 27 Jan 2007 17:20:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49766 invoked by uid 500); 27 Jan 2007 17:20:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49755 invoked by uid 99); 27 Jan 2007 17:20:07 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 27 Jan 2007 09:20:07 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 66.249.92.168 as permitted sender)
Received: from [66.249.92.168] (HELO ug-out-1314.google.com) (66.249.92.168)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 27 Jan 2007 09:19:58 -0800
Received: by ug-out-1314.google.com with SMTP id k40so969024ugc
        for <java-user@lucene.apache.org>; Sat, 27 Jan 2007 09:19:36 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=mEZlaCGghzsWTmVRqBk7GRSSKhWCMM/lg91mwBcCEyDt4ez7gZ9Di59PeNCATPZKVO7nlxxsKBIRXUzcfylPrnTLrrv8adoo/71PlbtWqv+Np1A8rtY4od0cwtt10OpWEUmnqiQsWIQdK3OJ0btR1HmwZhod8S+24CVDux9NLy0=
Received: by 10.82.152.16 with SMTP id z16mr2601072bud.1169918376194;
        Sat, 27 Jan 2007 09:19:36 -0800 (PST)
Received: by 10.82.162.9 with HTTP; Sat, 27 Jan 2007 09:19:35 -0800 (PST)
Message-ID: <359a92830701270919ifac93c2lf3ced8f00362d1ab@mail.gmail.com>
Date: Sat, 27 Jan 2007 12:19:35 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: lucense index/document architecture
In-Reply-To: <04db01c741fb$2751d6a0$0202fea9@joostdell>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_59359_30677716.1169918375537"
References: <049601c7419b$08983e80$0202fea9@joostdell>
	 <359a92830701261630n2e7daf2fk819ff8745b085f27@mail.gmail.com>
	 <04db01c741fb$2751d6a0$0202fea9@joostdell>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_59359_30677716.1169918375537
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I put in 1TB as a number because I thought it would surely be bigger than
anything you intended to put in your database. And you reply with 100 times
that size <G>.....

 The index I'm working with now is 5GB, so I have no wisdom to offer you at
all about how to scale to 100TB. You should probably infer from Otis' reply
that we don't really know anybody who's tried off the top of our heads.

Good Luck!
Erick

On 1/27/07, Joost Schouten <joost@jsportal.com> wrote:
>
> Erick, Otis,
>
> Thank you for your help. I will work with a single index and parent
> fields.
> It's hard to say exactly how much raw data I will index as this differs
> per
> client. But I guess right now I'm more looking at 1G (contents of a
> non-CLOB/BLOB DB). But one client is thinking of throwing their entire
> 100T
> file system in it. Not quite sure how to handle that yet. Should I have a
> different architecture with 100T compared to 1G?
>
> Thanks,
> Joost Schouten
> Director
>
> JS Portal
> Dasstraat 21
> 2623CB Delft
> the Netherlands
> P: +31 6 160 160 14
> E: joost@jsportal.com
> W: www.jsportal.com
>
> -----Original Message-----
> From: Erick Erickson [mailto:erickerickson@gmail.com]
> Sent: Saturday, January 27, 2007 1:30 PM
> To: java-user@lucene.apache.org
> Subject: Re: lucense index/document architecture
>
> To steal a phrase from Mr. Hatcher... it depends <G>. I'd try keeping it
> all
> in one index at the start until you get some clue how big the index will
> eventually grow to and whether your searching is acceptable. Do you have
> any
> idea how big the raw data you're going to ask the index to hold? 1M? 1G?,
> 1T?
>
> But it's simple enough to do what you want, just include a field for each
> document, let's say Company. Your queries can easily search all documents
> or
> only those belonging to a single company by including an
> "+company:companyyoucareabout". Or search all documents by leaving that
> clause off.
>
> Do be aware, when you're doing performance testing, that the first query,
> particularly when sorting, takes significantly longer since Lucene will
> build up some internal caches and you pay a penalty the first time
> through.
> Various strategies exist for pre-warming the searcher up by firing some
> canned queries at the search engine as the server comes up......
>
> If you're a database guy, you might not appreciate one thing that was hard
> for me to understand; all documents in an index do NOT have to have the
> same
> fields. In fact, your index could theoretically have no two documents with
> any field in common <G>.If you're used to thinking about static table
> definitions in a database this can take a while to get used to.
>
> Hope this helps
> Erick
>
> On 1/26/07, Joost Schouten <joost@jsportal.com> wrote:
> >
> > Hi,
> >
> > I'm setting up lucene to work with our webapp to index a database. My db
> > holds files which can belong to a user or a company or both. I want the
> > option for my users to search across all content, but also search within
> > the
> > files for one user or company. What is the best architecture approach
> for
> > this? Do you add a field to the document with the parentId's, do you
> make
> > a
> > different index for each user/company (can be 1000's) or is there a
> > different solution all together?
> >
> > Thank you,
> > Joost
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_59359_30677716.1169918375537--

From java-user-return-25750-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jan 27 17:41:20 2007
Return-Path: <java-user-return-25750-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92377 invoked from network); 27 Jan 2007 17:41:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Jan 2007 17:41:19 -0000
Received: (qmail 63008 invoked by uid 500); 27 Jan 2007 17:41:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62858 invoked by uid 500); 27 Jan 2007 17:41:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62846 invoked by uid 99); 27 Jan 2007 17:41:19 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 27 Jan 2007 09:41:19 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [209.73.178.148] (HELO web60420.mail.yahoo.com) (209.73.178.148)
    by apache.org (qpsmtpd/0.29) with SMTP; Sat, 27 Jan 2007 09:41:09 -0800
Received: (qmail 45626 invoked by uid 60001); 27 Jan 2007 17:40:47 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=uQTo2/za8bIjJBXKctEYOiUT7GVnAPZxiiXktajShjtu9H/+QvbbUgXqhwZiWKyEoJEa5Ca33J4hyPeaAtLv1rKeeJ9fO64uxLoYs+kwURBbfPNcXnXk7/sTiC2IO003SBhq1lZs8V+qZVIy2UYV96IdwLQ5CfzFMIzJURkP9JI=;
X-YMail-OSG: uRrwVtQVM1lAG.85ADnSrqeRqnmN_n.PIyT22iDJyIKSvhN_im8ekNXtvVhQQ74NOIShuBlz90NYfhxkQhb4WLFSwjCwrW_xJh0gYAOFJoV3c9mFZYlpAsORNmMy7nH.RA--
Received: from [155.69.9.15] by web60420.mail.yahoo.com via HTTP; Sat, 27 Jan 2007 09:40:47 PST
Date: Sat, 27 Jan 2007 09:40:47 -0800 (PST)
From: maureen tanuwidjaja <autumn_musique@yahoo.com>
Subject: My program stops indexing after 10000th documents is indexed
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-1327396592-1169919647=:45622"
Content-Transfer-Encoding: 8bit
Message-ID: <579855.45622.qm@web60420.mail.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

--0-1327396592-1169919647=:45622
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit

Hi all,
  
  Is there any limitation of number of file that lucene can handle?
  I indexed a total of 30000 XML Documents,however it stops at 10000th documents.
  No warning,no error ,no exception as well.
  ....
  Indexing C:\sweetpea\wikipedia_xmlfiles\part-180000\491876.xml
  Indexing C:\sweetpea\wikipedia_xmlfiles\part-180000\491886.xml
  Indexing C:\sweetpea\wikipedia_xmlfiles\part-180000\491887.xml
  Indexing C:\sweetpea\wikipedia_xmlfiles\part-180000\491891.xml
  Indexing C:\sweetpea\wikipedia_xmlfiles\part-180000\491893.xml
  Indexing C:\sweetpea\wikipedia_xmlfiles\part-180000\491896.xml <--10000th doc
  --it idles here--
  
 At first I thought that it was the size of  10000th document is so big so that it took quite a long time to put  into the index.Then i found out  that the 10000th document has the  size of 6 KB only.Indexing process stops for about 1 hour,so that i  decide to terminate the progress.
  
  Is there anything to do with smt like setCompoundFiles etc?cause I dont include any in my program...
  
  Any suggestion pls?
  
  THanks and Best Regards,
  
  Maureen

 
---------------------------------
Any questions?  Get answers on any topic at Yahoo! Answers. Try it now.
--0-1327396592-1169919647=:45622--

From java-user-return-25751-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jan 27 19:21:03 2007
Return-Path: <java-user-return-25751-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 14872 invoked from network); 27 Jan 2007 19:21:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Jan 2007 19:21:02 -0000
Received: (qmail 68898 invoked by uid 500); 27 Jan 2007 19:21:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68870 invoked by uid 500); 27 Jan 2007 19:21:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68859 invoked by uid 99); 27 Jan 2007 19:21:03 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 27 Jan 2007 11:21:03 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of markrmiller@gmail.com designates 66.249.82.237 as permitted sender)
Received: from [66.249.82.237] (HELO wx-out-0506.google.com) (66.249.82.237)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 27 Jan 2007 11:20:53 -0800
Received: by wx-out-0506.google.com with SMTP id i29so1108858wxd
        for <java-user@lucene.apache.org>; Sat, 27 Jan 2007 11:20:32 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=HJlqBN9aVBOw0vfF3xhe1Y1allzTxYvnkuoWsD/uwGyDRqrVqtvAVCTlWyENB0QZUC710cOvBe8t3HFaKSDDLqSD90uiNQsIjx8WMq5vkDDV5o6Q1wUTt1hQP9V0LwE6Hhi5IWZmKb8++G+z7RleyzSHOqaEMpXHCOFtfqL5d1o=
Received: by 10.70.31.6 with SMTP id e6mr8752414wxe.1169925631058;
        Sat, 27 Jan 2007 11:20:31 -0800 (PST)
Received: from ?192.168.1.103? ( [67.86.221.9])
        by mx.google.com with ESMTP id 38sm11609001wrl.2007.01.27.11.20.29;
        Sat, 27 Jan 2007 11:20:29 -0800 (PST)
Message-ID: <45BBA5C6.1040106@gmail.com>
Date: Sat, 27 Jan 2007 14:19:34 -0500
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 1.5.0.9 (Windows/20061207)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Multiword Highlighting
References: <20070126195010.90762.qmail@web50305.mail.yahoo.com> <017f01c74189$76f60c70$6701a8c0@ibmo7ikvz4d47o> <45BA77D1.3030005@yahoo.co.uk>
In-Reply-To: <45BA77D1.3030005@yahoo.co.uk>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Isn't it semi trivial if you are not interested in the fragments (I 
swear it seems that most people are not)? Isn't it you that suggested 
turning the query into a SpanQuery, extracting the spans and then doing 
the highlighting after a rewrite? This seems somewhat trivial so what am 
I missing? I have started a simple implementation of this, but stopped 
short of combining the highlight spans (seems like a nasty n^2 problem 
that I don't know a good algorithm around - every new highlight has to 
be compared against every previous highlight for overlap : I am sure 
your the man to ask about this). I plan on getting back into this soon. 
Not trivial? Or do you just mean with the fragments...you seem to be 
deeply interested in fragments but a lot of people seem to just want to 
highlight the source text.

Any words of wisdom would be sorely appreciated.

- Mark

markharw00d wrote:
> This is a deficiency in the highlighter functionality that has been 
> discussed several times before. The summary is  -  not a trivial fix.
>
> See here for background:
>
> http://marc2.theaimsgroup.com/?l=lucene-user&m=114631181214303&w=1
>
> http://www.gossamer-threads.com/lists/engine?do=post_view_printable;post=42014;list=lucene 
>
>
>
> Cheers,
> Mark
>
> Anne Conger wrote:
>> Hi,
>>
>> I'm wondering what the best way is to do highlighting of multiword 
>> phrases.
>> For example, if a search is for "president kennedy", how can I make sure
>> that "president" is only highlighted if it is next to "kennedy" and
>> "president" in "president clinton" is not.
>> I haven't figured out where in the process the phrases are being 
>> split into
>> separate words.
>> Would restructuring the query that is passed to the scorer help with 
>> this?
>> It's currently a set of boolean queries with each phrase as a separate
>> query.  Or should the exact phrases be set up as WeightedTerms?
>>
>> Thanks!
>>
>> Anne
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>>   
>
>
>
>     
>     
>        
> ___________________________________________________________ All new 
> Yahoo! Mail "The new Interface is stunning in its simplicity and ease 
> of use." - PC Magazine http://uk.docs.yahoo.com/nowyoucan.html
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25752-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jan 27 19:54:25 2007
Return-Path: <java-user-return-25752-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22119 invoked from network); 27 Jan 2007 19:54:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Jan 2007 19:54:25 -0000
Received: (qmail 96857 invoked by uid 500); 27 Jan 2007 19:54:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96828 invoked by uid 500); 27 Jan 2007 19:54:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96817 invoked by uid 99); 27 Jan 2007 19:54:25 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 27 Jan 2007 11:54:25 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 27 Jan 2007 11:54:16 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id B75385B764; Sat, 27 Jan 2007 11:53:55 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id AFA9A7F403
	for <java-user@lucene.apache.org>; Sat, 27 Jan 2007 11:53:55 -0800 (PST)
Date: Sat, 27 Jan 2007 11:53:55 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: My program stops indexing after 10000th documents is indexed
In-Reply-To: <579855.45622.qm@web60420.mail.yahoo.com>
Message-ID: <Pine.LNX.4.58.0701271153140.3698@hal.rescomp.berkeley.edu>
References: <579855.45622.qm@web60420.mail.yahoo.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


did you try triggering a thread dump to see what it was doing at that
point?

depending on your merge factors and other IndexWriter settings it could
just be doing a relaly big merge.

: Date: Sat, 27 Jan 2007 09:40:47 -0800 (PST)
: From: maureen tanuwidjaja <autumn_musique@yahoo.com>
: Reply-To: java-user@lucene.apache.org
: To: java-user@lucene.apache.org
: Subject: My program stops indexing after 10000th documents is indexed
:
: Hi all,
:
:   Is there any limitation of number of file that lucene can handle?
:   I indexed a total of 30000 XML Documents,however it stops at 10000th documents.
:   No warning,no error ,no exception as well.
:   ....
:   Indexing C:\sweetpea\wikipedia_xmlfiles\part-180000\491876.xml
:   Indexing C:\sweetpea\wikipedia_xmlfiles\part-180000\491886.xml
:   Indexing C:\sweetpea\wikipedia_xmlfiles\part-180000\491887.xml
:   Indexing C:\sweetpea\wikipedia_xmlfiles\part-180000\491891.xml
:   Indexing C:\sweetpea\wikipedia_xmlfiles\part-180000\491893.xml
:   Indexing C:\sweetpea\wikipedia_xmlfiles\part-180000\491896.xml <--10000th doc
:   --it idles here--
:
:  At first I thought that it was the size of  10000th document is so big so that it took quite a long time to put  into the index.Then i found out  that the 10000th document has the  size of 6 KB only.Indexing process stops for about 1 hour,so that i  decide to terminate the progress.
:
:   Is there anything to do with smt like setCompoundFiles etc?cause I dont include any in my program...
:
:   Any suggestion pls?
:
:   THanks and Best Regards,
:
:   Maureen
:
:
: ---------------------------------
: Any questions?  Get answers on any topic at Yahoo! Answers. Try it now.



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25753-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jan 27 19:56:01 2007
Return-Path: <java-user-return-25753-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22256 invoked from network); 27 Jan 2007 19:56:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Jan 2007 19:56:00 -0000
Received: (qmail 98669 invoked by uid 500); 27 Jan 2007 19:56:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98637 invoked by uid 500); 27 Jan 2007 19:56:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98626 invoked by uid 99); 27 Jan 2007 19:56:00 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 27 Jan 2007 11:56:00 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of karl.wettin@gmail.com designates 66.249.92.174 as permitted sender)
Received: from [66.249.92.174] (HELO ug-out-1314.google.com) (66.249.92.174)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 27 Jan 2007 11:55:50 -0800
Received: by ug-out-1314.google.com with SMTP id k40so990600ugc
        for <java-user@lucene.apache.org>; Sat, 27 Jan 2007 11:55:29 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:mime-version:content-transfer-encoding:message-id:content-type:to:from:subject:date:x-mailer;
        b=T/EpOMLD0ps25tEo37mqrpMUt3pqQSPC6inAPCcxENM8jg18SHxbUR0G1iogj8YqnnTq7HVl7GGCaXUp/4F3K5+Fz4IAyr04DFd1ePY3v9KW7D7CHD0XP+/B1uTj1pdZJYgSMdzrTr8HgvBibCtZE339WGwWAzfbi+ePLS8RRAU=
Received: by 10.67.101.10 with SMTP id d10mr6206478ugm.1169927729133;
        Sat, 27 Jan 2007 11:55:29 -0800 (PST)
Received: from ?192.168.0.131? ( [83.249.127.91])
        by mx.google.com with ESMTP id 28sm5347291ugc.2007.01.27.11.55.23;
        Sat, 27 Jan 2007 11:55:28 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v752.3)
Content-Transfer-Encoding: 7bit
Message-Id: <7B748C87-FBFF-4512-A4A7-9EFF7DFFB6DC@gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
To: java-user@lucene.apache.org
From: karl wettin <karl.wettin@gmail.com>
Subject: IndexWriter.docCount
Date: Sat, 27 Jan 2007 20:54:18 +0100
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org

/** Returns the number of documents currently in this index. */
   public synchronized int docCount() {
     int count = ramSegmentInfos.size();
     for (int i = 0; i < segmentInfos.size(); i++) {
       SegmentInfo si = segmentInfos.info(i);
       count += si.docCount;
     }
     return count;
   }

I don't understand, what is it this method returns? Number of  
documents not flushed? Number of documents added with this writer in  
total? Something else?

-- 
karl

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25754-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jan 27 20:11:24 2007
Return-Path: <java-user-return-25754-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 23934 invoked from network); 27 Jan 2007 20:11:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Jan 2007 20:11:23 -0000
Received: (qmail 11451 invoked by uid 500); 27 Jan 2007 20:11:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11369 invoked by uid 500); 27 Jan 2007 20:11:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11358 invoked by uid 99); 27 Jan 2007 20:11:23 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 27 Jan 2007 12:11:23 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [202.74.207.2] (HELO mail2.woosh.co.nz) (202.74.207.2)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 27 Jan 2007 12:11:13 -0800
Received: from joostdell (202-74-196-254.ue.woosh.co.nz [202.74.196.254]) by woosh.co.nz
 (Rockliffe SMTPRA 6.1.22) with ESMTP id <B0068466333@mail2.woosh.co.nz> for <java-user@lucene.apache.org>;
 Sun, 28 Jan 2007 09:10:50 +1300
From: "Joost Schouten" <joost@jsportal.com>
To: <java-user@lucene.apache.org>
References: <921644.35292.qm@web50312.mail.yahoo.com>
Subject: RE: lucense index/document architecture
Date: Sun, 28 Jan 2007 09:10:42 +1300
Message-ID: <052901c7424f$3b0a9f70$0202fea9@joostdell>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3028
Thread-Index: AcdCKLjOF3GlCyTvSmKjFwu5UNpvAAAJm/gg
In-Reply-To: <921644.35292.qm@web50312.mail.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

I'll keep you posted ;-)

Joost Schouten
Director
 
JS Portal
Dasstraat 21
2623CB Delft
the Netherlands
P: +31 6 160 160 14
W: www.jsportal.com 

-----Original Message-----
From: Otis Gospodnetic [mailto:otis_gospodnetic@yahoo.com] 
Sent: Sunday, January 28, 2007 4:34 AM
To: java-user@lucene.apache.org
Subject: Re: lucense index/document architecture

100TB?  Ouch.  Yes, most certainly very different.  Again, how to split the
index and design the whole system depends on how this is going to be used,
how it's going to be changed, if it's going to be changed, how it's going to
grow, etc.
I'd love to hear from you once you start working with 100TB of data, and I'm
sure others would, too.

Otis

----- Original Message ----
From: Joost Schouten <joost@jsportal.com>
To: java-user@lucene.apache.org
Sent: Saturday, January 27, 2007 6:08:49 PM
Subject: RE: lucense index/document architecture


Erick, Otis,

Thank you for your help. I will work with a single index and parent fields.
It's hard to say exactly how much raw data I will index as this differs per
client. But I guess right now I'm more looking at 1G (contents of a
non-CLOB/BLOB DB). But one client is thinking of throwing their entire 100T
file system in it. Not quite sure how to handle that yet. Should I have a
different architecture with 100T compared to 1G?

Thanks,
Joost Schouten
Director

JS Portal
Dasstraat 21
2623CB Delft
the Netherlands
P: +31 6 160 160 14
E: joost@jsportal.com
W: www.jsportal.com 

-----Original Message-----
From: Erick Erickson [mailto:erickerickson@gmail.com] 
Sent: Saturday, January 27, 2007 1:30 PM
To: java-user@lucene.apache.org
Subject: Re: lucense index/document architecture

To steal a phrase from Mr. Hatcher... it depends <G>. I'd try keeping it all
in one index at the start until you get some clue how big the index will
eventually grow to and whether your searching is acceptable. Do you have any
idea how big the raw data you're going to ask the index to hold? 1M? 1G?,
1T?

But it's simple enough to do what you want, just include a field for each
document, let's say Company. Your queries can easily search all documents or
only those belonging to a single company by including an
"+company:companyyoucareabout". Or search all documents by leaving that
clause off.

Do be aware, when you're doing performance testing, that the first query,
particularly when sorting, takes significantly longer since Lucene will
build up some internal caches and you pay a penalty the first time through.
Various strategies exist for pre-warming the searcher up by firing some
canned queries at the search engine as the server comes up......

If you're a database guy, you might not appreciate one thing that was hard
for me to understand; all documents in an index do NOT have to have the same
fields. In fact, your index could theoretically have no two documents with
any field in common <G>.If you're used to thinking about static table
definitions in a database this can take a while to get used to.

Hope this helps
Erick

On 1/26/07, Joost Schouten <joost@jsportal.com> wrote:
>
> Hi,
>
> I'm setting up lucene to work with our webapp to index a database. My db
> holds files which can belong to a user or a company or both. I want the
> option for my users to search across all content, but also search within
> the
> files for one user or company. What is the best architecture approach for
> this? Do you add a field to the document with the parentId's, do you make
> a
> different index for each user/company (can be 1000's) or is there a
> different solution all together?
>
> Thank you,
> Joost
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25755-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jan 27 20:22:28 2007
Return-Path: <java-user-return-25755-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31468 invoked from network); 27 Jan 2007 20:22:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Jan 2007 20:22:27 -0000
Received: (qmail 22200 invoked by uid 500); 27 Jan 2007 20:22:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22164 invoked by uid 500); 27 Jan 2007 20:22:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 22153 invoked by uid 99); 27 Jan 2007 20:22:27 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 27 Jan 2007 12:22:27 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of DORONC@il.ibm.com designates 195.212.29.153 as permitted sender)
Received: from [195.212.29.153] (HELO mtagate4.de.ibm.com) (195.212.29.153)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 27 Jan 2007 12:22:16 -0800
Received: from d12nrmr1607.megacenter.de.ibm.com (d12nrmr1607.megacenter.de.ibm.com [9.149.167.49])
	by mtagate4.de.ibm.com (8.13.8/8.13.8) with ESMTP id l0RKLbiE083922
	for <java-user@lucene.apache.org>; Sat, 27 Jan 2007 20:21:42 GMT
Received: from d12av02.megacenter.de.ibm.com (d12av02.megacenter.de.ibm.com [9.149.165.228])
	by d12nrmr1607.megacenter.de.ibm.com (8.13.8/8.13.8/NCO v8.2) with ESMTP id l0RKLQiq913476
	for <java-user@lucene.apache.org>; Sat, 27 Jan 2007 21:21:26 +0100
Received: from d12av02.megacenter.de.ibm.com (loopback [127.0.0.1])
	by d12av02.megacenter.de.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id l0RKLQFT029314
	for <java-user@lucene.apache.org>; Sat, 27 Jan 2007 21:21:26 +0100
Received: from d12mc102.megacenter.de.ibm.com (d12mc102.megacenter.de.ibm.com [9.149.167.114])
	by d12av02.megacenter.de.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id l0RKLQnS029311
	for <java-user@lucene.apache.org>; Sat, 27 Jan 2007 21:21:26 +0100
In-Reply-To: <7B748C87-FBFF-4512-A4A7-9EFF7DFFB6DC@gmail.com>
Subject: Re: IndexWriter.docCount
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 7.0 HF277 June 21, 2006
Message-ID: <OF1BEF17E6.05B08A92-ON88257270.006DB101-88257270.006FA8B7@il.ibm.com>
From: Doron Cohen <DORONC@il.ibm.com>
Date: Sat, 27 Jan 2007 12:19:36 -0800
X-MIMETrack: Serialize by Router on D12MC102/12/M/IBM(Release 7.0.2HF71 | November 3, 2006) at
 27/01/2007 22:21:25
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Karl,

karl wettin <karl.wettin@gmail.com> wrote on 27/01/2007 11:54:18:

> /** Returns the number of documents currently in this index. */
>    public synchronized int docCount() {
>      int count = ramSegmentInfos.size();
>      for (int i = 0; i < segmentInfos.size(); i++) {
>        SegmentInfo si = segmentInfos.info(i);
>        count += si.docCount;
>      }
>      return count;
>    }
>
> I don't understand, what is it this method returns? Number of
> documents not flushed? Number of documents added with this writer in
> total? Something else?

"Something else" - it is the total number of documents in the index
(counting in also docs that were already deleted).

It is computed as sum of:
1) docs added to the index through this IndexWriter but not yet flushed:
      int count = ramSegmentInfos.size();
   (notice that each of the writer's ram segments has exactly one
document.)
(2) counts of all the other (non-ram) segments.

Do you see a problem in this method?

Regards,
Doron

>
> --
> karl


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25756-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jan 27 21:23:14 2007
Return-Path: <java-user-return-25756-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 43220 invoked from network); 27 Jan 2007 21:23:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Jan 2007 21:23:13 -0000
Received: (qmail 63968 invoked by uid 500); 27 Jan 2007 21:23:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63939 invoked by uid 500); 27 Jan 2007 21:23:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63928 invoked by uid 99); 27 Jan 2007 21:23:13 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 27 Jan 2007 13:23:13 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of mrs.nospam@gmail.com designates 64.233.182.189 as permitted sender)
Received: from [64.233.182.189] (HELO nf-out-0910.google.com) (64.233.182.189)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 27 Jan 2007 13:23:05 -0800
Received: by nf-out-0910.google.com with SMTP id a27so1407172nfc
        for <java-user@lucene.apache.org>; Sat, 27 Jan 2007 13:22:43 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=pXZSqGyWAYyDqKYvKF+DMTmK94Gxk6beuW9i0Y8rPIpDCjSdULpQjbBGqjJHjZ0b1ZJIy/vmANGn2lBgqjfPpv3k5dj2wSKordkMcj2a2T9k1TU4Wzb8xMn2eIfrBVhyHrruZx7BMq0zgYzVHbVD77uLFwHEa6ChGH4tLNXZVg8=
Received: by 10.49.75.2 with SMTP id c2mr7429657nfl.1169932963579;
        Sat, 27 Jan 2007 13:22:43 -0800 (PST)
Received: by 10.48.210.8 with HTTP; Sat, 27 Jan 2007 13:22:43 -0800 (PST)
Message-ID: <bd818c7b0701271322l6899c3e3u71006de77ab1798c@mail.gmail.com>
Date: Sat, 27 Jan 2007 16:22:43 -0500
From: "no spam" <mrs.nospam@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Announcement: Lucene powering Monster job search index (Beta)
In-Reply-To: <e994873a0611031056wc507d8ds213d0c8115b576bd@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_102004_23120914.1169932963483"
References: <1c36b0de0611030801u320dff57k1a470eb93c239441@mail.gmail.com>
	 <e994873a0611031056wc507d8ds213d0c8115b576bd@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_102004_23120914.1169932963483
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Isn't this extremely ineffecient to do the euclidean distance twice?
Perhaps not a huge deal if a small search result set.  I at times have
13,000 results that match my search terms of an index with 1.2 million docs.

Can't you do some simple radian math first to ensure it's way out of bounds,
then do the euclidian distance for the subset within bounds?  I'm currently
only doing the distance calc once (post hit collector). I don't have any
performance numbers with the double vs single distance calc.

I'm still working out the sort by radius myself.

Mark

On 11/3/06, Peter Keegan <peterlkeegan@gmail.com> wrote:
>
> Daniel,
> Yes, this is correct if you happen to be doing a radius search and sorting
> by mileage.
> Peter
>
>

------=_Part_102004_23120914.1169932963483--

From java-user-return-25757-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jan 27 21:51:06 2007
Return-Path: <java-user-return-25757-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47757 invoked from network); 27 Jan 2007 21:51:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Jan 2007 21:51:04 -0000
Received: (qmail 191 invoked by uid 500); 27 Jan 2007 21:51:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 161 invoked by uid 500); 27 Jan 2007 21:51:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 150 invoked by uid 99); 27 Jan 2007 21:51:05 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 27 Jan 2007 13:51:05 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of karl.wettin@gmail.com designates 66.249.92.175 as permitted sender)
Received: from [66.249.92.175] (HELO ug-out-1314.google.com) (66.249.92.175)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 27 Jan 2007 13:50:55 -0800
Received: by ug-out-1314.google.com with SMTP id k40so1005408ugc
        for <java-user@lucene.apache.org>; Sat, 27 Jan 2007 13:50:34 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=Ll+cBtOoPm86kQoMsU0i4BydLNkHX3vbVugJwxsYNEZjEqbP3SqtnGECxPzrOdQxVEjeP9ewg42LE4OeETvrfq4SDuiAOqjXTqh24ytkdPYwJftwKx1hWK6rhFL5+W5f8SjaHCXsJ66n3CAgQwI/uaTv93foRpdwfYb12OOVHDU=
Received: by 10.67.96.14 with SMTP id y14mr6366945ugl.1169934634211;
        Sat, 27 Jan 2007 13:50:34 -0800 (PST)
Received: from ?192.168.0.131? ( [83.249.127.91])
        by mx.google.com with ESMTP id x37sm5448483ugc.2007.01.27.13.50.25;
        Sat, 27 Jan 2007 13:50:32 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <OF1BEF17E6.05B08A92-ON88257270.006DB101-88257270.006FA8B7@il.ibm.com>
References: <OF1BEF17E6.05B08A92-ON88257270.006DB101-88257270.006FA8B7@il.ibm.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <898DFED3-46D1-4869-B72B-DED925F2A1C1@gmail.com>
Content-Transfer-Encoding: 7bit
From: karl wettin <karl.wettin@gmail.com>
Subject: Re: IndexWriter.docCount
Date: Sat, 27 Jan 2007 22:49:24 +0100
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org


27 jan 2007 kl. 21.19 skrev Doron Cohen:
> karl wettin <karl.wettin@gmail.com> wrote on 27/01/2007 11:54:18:
>
>> /** Returns the number of documents currently in this index. */
>>    public synchronized int docCount() {

>> I don't understand, what is it this method returns?

> "Something else" - it is the total number of documents in the index
> (counting in also docs that were already deleted).

Much clearer now, thanks.

Deleted as in still available in the segment and noted in the delted  
file, but not optimized and IllegalArgumentException thrown in case  
of IndexReader.document(n)? At least I think that is the way a  
Directory works?

I ask because you write that it withinin parantheses.

Does the consumers of this method really want to take the number of  
documents that is not accessible in account too, or is that just  
something that is done for optimization reasons?

> Do you see a problem in this method?

Luckely only in the IndexWriter of my alternate RAM index. :)


In essence, should I return
   index.getDocumentsByNumber().size() - index.getDeletedDocuments 
().size() + unflushedDocuments.size();
or
   index.getDocumentsByNumber().size() + unflushedDocuments.size();
?

-- 
karl

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25758-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jan 27 22:26:54 2007
Return-Path: <java-user-return-25758-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51683 invoked from network); 27 Jan 2007 22:26:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Jan 2007 22:26:53 -0000
Received: (qmail 27300 invoked by uid 500); 27 Jan 2007 22:26:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27272 invoked by uid 500); 27 Jan 2007 22:26:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27261 invoked by uid 99); 27 Jan 2007 22:26:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 27 Jan 2007 14:26:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [217.12.11.95] (HELO smtp006.mail.ukl.yahoo.com) (217.12.11.95)
    by apache.org (qpsmtpd/0.29) with SMTP; Sat, 27 Jan 2007 14:26:42 -0800
Received: (qmail 57699 invoked from network); 27 Jan 2007 22:26:21 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=Received:X-YMail-OSG:Message-ID:Date:From:User-Agent:MIME-Version:To:Subject:References:In-Reply-To:Content-Type:Content-Transfer-Encoding;
  b=XFeaFvANUCkwzSIZ+mkEUr/F1nf0GPGNrXv3sB6+P0F0eko20wNrvTeTvV9sa3VT6lCVCBPRnAIdJGWCSRdj3lA7Qgiy/m+RxMEkj7oWiGtD4BbU418j6QqbZkBdeDeg4PavBnhby3QlAEcYaEoaT2gxXKEGnE4oe234UMfmPSk=  ;
Received: from unknown (HELO ?127.0.0.1?) (markharw00d@194.106.34.5 with plain)
  by smtp006.mail.ukl.yahoo.com with SMTP; 27 Jan 2007 22:26:21 -0000
X-YMail-OSG: q5y0KnMVM1kZZlenji5BdyMmFC9_xLLXBPsziQeq5bewMN6n1sexJ8vyyH.41UWgvipLy44lUc1Wq1zuuYzK7ijBtjq7cdQrrGvK.JMd.FIvel4fMzKrMjgOacAiGR2o7IpngUwZ3Q9P5qJAvhQQEbRoRFc8ZXaHsN696rSz4auywepQdZBWU5g4mw--
Message-ID: <45BBD18A.4080108@yahoo.co.uk>
Date: Sat, 27 Jan 2007 22:26:18 +0000
From: markharw00d <markharw00d@yahoo.co.uk>
User-Agent: Thunderbird 1.5.0.9 (Windows/20061207)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Multiword Highlighting
References: <20070126195010.90762.qmail@web50305.mail.yahoo.com> <017f01c74189$76f60c70$6701a8c0@ibmo7ikvz4d47o> <45BA77D1.3030005@yahoo.co.uk> <45BBA5C6.1040106@gmail.com>
In-Reply-To: <45BBA5C6.1040106@gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

 >>Isn't it semi trivial if you are not interested in the fragments (I 
swear it seems that most people are not)? I

I haven't conducted a survey but it's the typical web search engine 
scenario - select only a small subset of the matching document content 
for display in SERPS. I would expect that to be a pretty commonplace 
requirement for which we should retain a solution.

Maybe a new highlighter with no attempt at summarising could more easily 
address phrase support for small pieces of content. It will always be 
hard to  faithfully represent all possible query match logic - 
especially if there are NOTs, ANDs and ORs mixed in with all the term 
proximity logic e.g. NotNear. Some compromise is required. I did suggest 
that spans maybe a better basis for highlighting than terms and pointed 
at some existing code to get you along this path - see here 
http://marc.theaimsgroup.com/?l=lucene-user&m=112496111224218&w=2

There are also a couple of other Highlighter packages contributed 
recently which I listed in my previous mail but I simply haven't had the 
time to look at in detail so they may be useful. Anyone had any 
experience of those?

 >> every new highlight has to be compared against every previous 
highlight for overlap
Yes, Analyzers that produce overlapping tokens are an added complication 
when implementing highlighting logic. I think we have a reasonable Junit 
test containing several of the more exotic analyzer scenarios which you 
could/should use for testing any other highlighter implementation.

Cheers,
Mark



Mark Miller wrote:
> Isn't it semi trivial if you are not interested in the fragments (I 
> swear it seems that most people are not)? Isn't it you that suggested 
> turning the query into a SpanQuery, extracting the spans and then 
> doing the highlighting after a rewrite? This seems somewhat trivial so 
> what am I missing? I have started a simple implementation of this, but 
> stopped short of combining the highlight spans (seems like a nasty n^2 
> problem that I don't know a good algorithm around - every new 
> highlight has to be compared against every previous highlight for 
> overlap : I am sure your the man to ask about this). I plan on getting 
> back into this soon. Not trivial? Or do you just mean with the 
> fragments...you seem to be deeply interested in fragments but a lot of 
> people seem to just want to highlight the source text.
>
> Any words of wisdom would be sorely appreciated.
>
> - Mark
>
> markharw00d wrote:
>> This is a deficiency in the highlighter functionality that has been 
>> discussed several times before. The summary is  -  not a trivial fix.
>>
>> See here for background:
>>
>> http://marc2.theaimsgroup.com/?l=lucene-user&m=114631181214303&w=1
>>
>> http://www.gossamer-threads.com/lists/engine?do=post_view_printable;post=42014;list=lucene 
>>
>>
>>
>> Cheers,
>> Mark
>>
>> Anne Conger wrote:
>>> Hi,
>>>
>>> I'm wondering what the best way is to do highlighting of multiword 
>>> phrases.
>>> For example, if a search is for "president kennedy", how can I make 
>>> sure
>>> that "president" is only highlighted if it is next to "kennedy" and
>>> "president" in "president clinton" is not.
>>> I haven't figured out where in the process the phrases are being 
>>> split into
>>> separate words.
>>> Would restructuring the query that is passed to the scorer help with 
>>> this?
>>> It's currently a set of boolean queries with each phrase as a separate
>>> query.  Or should the exact phrases be set up as WeightedTerms?
>>>
>>> Thanks!
>>>
>>> Anne
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>>
>>>   
>>
>>
>>
>>                
>> ___________________________________________________________ All new 
>> Yahoo! Mail "The new Interface is stunning in its simplicity and ease 
>> of use." - PC Magazine http://uk.docs.yahoo.com/nowyoucan.html
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>



	
	
		
___________________________________________________________ 
All new Yahoo! Mail "The new Interface is stunning in its simplicity and ease of use." - PC Magazine 
http://uk.docs.yahoo.com/nowyoucan.html

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25759-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jan 27 23:41:04 2007
Return-Path: <java-user-return-25759-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78847 invoked from network); 27 Jan 2007 23:41:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Jan 2007 23:41:03 -0000
Received: (qmail 94426 invoked by uid 500); 27 Jan 2007 23:41:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94400 invoked by uid 500); 27 Jan 2007 23:41:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94389 invoked by uid 99); 27 Jan 2007 23:41:01 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 27 Jan 2007 15:41:01 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of markrmiller@gmail.com designates 66.249.82.229 as permitted sender)
Received: from [66.249.82.229] (HELO wx-out-0506.google.com) (66.249.82.229)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 27 Jan 2007 15:40:52 -0800
Received: by wx-out-0506.google.com with SMTP id i29so1155406wxd
        for <java-user@lucene.apache.org>; Sat, 27 Jan 2007 15:40:31 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=McuMS316xEuufjtvv9y+AQHRc2/diGfzVrhOHaAfcyYrMhFpeKU+3DH9WTPdt6xEXxHu0CyuKOxiAN5qvmgHtD4a8PlVfXC4gk59P3DhWiXaLTuZ8szlw8jel2oOMAc3QvWN7lET5zE5OuQCJEMOzkMeIZTQ8jxf+DXg58LkiDA=
Received: by 10.70.59.17 with SMTP id h17mr9316891wxa.1169941230979;
        Sat, 27 Jan 2007 15:40:30 -0800 (PST)
Received: from ?192.168.1.103? ( [67.86.221.9])
        by mx.google.com with ESMTP id 13sm12115330wrl.2007.01.27.15.40.29;
        Sat, 27 Jan 2007 15:40:30 -0800 (PST)
Message-ID: <45BBE2B1.4030201@gmail.com>
Date: Sat, 27 Jan 2007 18:39:29 -0500
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 1.5.0.9 (Windows/20061207)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Multiword Highlighting
References: <20070126195010.90762.qmail@web50305.mail.yahoo.com> <017f01c74189$76f60c70$6701a8c0@ibmo7ikvz4d47o> <45BA77D1.3030005@yahoo.co.uk> <45BBA5C6.1040106@gmail.com> <45BBD18A.4080108@yahoo.co.uk>
In-Reply-To: <45BBD18A.4080108@yahoo.co.uk>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org



markharw00d wrote:
> >>Isn't it semi trivial if you are not interested in the fragments (I 
> swear it seems that most people are not)? I
>
> I haven't conducted a survey but it's the typical web search engine 
> scenario - select only a small subset of the matching document content 
> for display in SERPS. I would expect that to be a pretty commonplace 
> requirement for which we should retain a solution.
No doubt. I certainly am not suggesting you ditch fragments and I have 
no evidence more people just want to highlight a doc...it's just the 
impression that I get from the mailing list is that most people just 
want to highlight the returned doc...I am sure plenty of people need 
google style results too, but my experience with Lucene has not often 
been in the area of web search engines. I bet a lot of users would 
benefit from a highlighter that highlights actual hits and doesn't 
summarize though (both would be great). I wouln't claim to be an 
authority on any of this though...take my opinion for what its worth -- 
very little.
>
> Maybe a new highlighter with no attempt at summarising could more 
> easily address phrase support for small pieces of content. It will 
> always be hard to  faithfully represent all possible query match logic 
> - especially if there are NOTs, ANDs and ORs mixed in with all the 
> term proximity logic e.g. NotNear. Some compromise is required. I did 
> suggest that spans maybe a better basis for highlighting than terms 
> and pointed at some existing code to get you along this path - see 
> here http://marc.theaimsgroup.com/?l=lucene-user&m=112496111224218&w=2
I have some code that you wrote that seems to turn almost any query into 
a series of spans. Perhaps it is not as robust as my limited testing 
made it seem.
>
> There are also a couple of other Highlighter packages contributed 
> recently which I listed in my previous mail but I simply haven't had 
> the time to look at in detail so they may be useful. Anyone had any 
> experience of those?
Non of them seem to do full span highlighting...again based on my 
limited investigation.
>
> >> every new highlight has to be compared against every previous 
> highlight for overlap
> Yes, Analyzers that produce overlapping tokens are an added 
> complication when implementing highlighting logic. I think we have a 
> reasonable Junit test containing several of the more exotic analyzer 
> scenarios which you could/should use for testing any other highlighter 
> implementation.
thanks for the tip.

I appreciate your response Mark. I will continue to look at your span 
extractor...I thought that it alone was enough to what I wanted, but 
your comments seem to suggest maybe I'll need more. I hope not <g> If I 
do manage something I will be sure to post my results.


- Mark

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25760-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jan 28 00:08:49 2007
Return-Path: <java-user-return-25760-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82192 invoked from network); 28 Jan 2007 00:08:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Jan 2007 00:08:48 -0000
Received: (qmail 21001 invoked by uid 500); 28 Jan 2007 00:08:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20959 invoked by uid 500); 28 Jan 2007 00:08:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 20948 invoked by uid 99); 28 Jan 2007 00:08:49 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 27 Jan 2007 16:08:49 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of markrmiller@gmail.com designates 66.249.82.237 as permitted sender)
Received: from [66.249.82.237] (HELO wx-out-0506.google.com) (66.249.82.237)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 27 Jan 2007 16:08:39 -0800
Received: by wx-out-0506.google.com with SMTP id i29so1160059wxd
        for <java-user@lucene.apache.org>; Sat, 27 Jan 2007 16:08:19 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=RTk0Ig8gyK5XGBeexdqOPoNz/wkvt0m0AY9ZkKt/72v3a/oFyjN7XfY4wVZqOyQ9tFFfQjQsltk69HC7EgiLRVWQMbXzrP+/BFXTDYxJ2LBHkJJ3hDnSfUZ10fCTQNdp0sR1rcW8Md65GVjCLikgcLXOMtSLKiX2/j41pT90/hU=
Received: by 10.70.42.20 with SMTP id p20mr9430438wxp.1169942898826;
        Sat, 27 Jan 2007 16:08:18 -0800 (PST)
Received: from ?192.168.1.103? ( [67.86.221.9])
        by mx.google.com with ESMTP id 10sm8743358wrl.2007.01.27.16.08.16;
        Sat, 27 Jan 2007 16:08:17 -0800 (PST)
Message-ID: <45BBE932.8000904@gmail.com>
Date: Sat, 27 Jan 2007 19:07:14 -0500
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 1.5.0.9 (Windows/20061207)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Multiword Highlighting
References: <20070126195010.90762.qmail@web50305.mail.yahoo.com> <017f01c74189$76f60c70$6701a8c0@ibmo7ikvz4d47o> <45BA77D1.3030005@yahoo.co.uk> <45BBA5C6.1040106@gmail.com> <45BBD18A.4080108@yahoo.co.uk>
In-Reply-To: <45BBD18A.4080108@yahoo.co.uk>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org


>
> Maybe a new highlighter with no attempt at summarising could more 
> easily address phrase support for small pieces of content. It will 
> always be hard to  faithfully represent all possible query match logic 
> - especially if there are NOTs, ANDs and ORs mixed in with all the 
> term proximity logic e.g. NotNear. Some compromise is required. I did 
> suggest that spans maybe a better basis for highlighting than terms 
> and pointed at some existing code to get you along this path - see 
> here http://marc.theaimsgroup.com/?l=lucene-user&m=112496111224218&w=2
>
Had not explored the link yet. That is the code I found and am using. It 
will not extract spans in all cases then? I tried some basic tests and 
it seemed to work great...I implemented a simple highlighter that does 
not deal with highlighting overlap. I assume now that a complicated 
query will not properly be extracted then? I guess I have some testing 
to do.

- Mark

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25761-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jan 28 00:38:11 2007
Return-Path: <java-user-return-25761-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86869 invoked from network); 28 Jan 2007 00:38:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Jan 2007 00:38:10 -0000
Received: (qmail 34615 invoked by uid 500); 28 Jan 2007 00:38:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34582 invoked by uid 500); 28 Jan 2007 00:38:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34571 invoked by uid 99); 28 Jan 2007 00:38:10 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 27 Jan 2007 16:38:10 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [213.9.79.74] (HELO box7974.elkhouse.de) (213.9.79.74)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 27 Jan 2007 16:38:01 -0800
Received: from [192.168.0.135] (c202141.adsl.hansenet.de [::ffff:213.39.202.141])
  (AUTH: LOGIN kroepke@classdump.org)
  by box7974.elkhouse.de with esmtp; Sun, 28 Jan 2007 01:37:38 +0100
  id 02800FD1.45BBF052.00000898
In-Reply-To: <359a92830701270914y732ee84asc4505e7cfa179beb@mail.gmail.com>
References: <171dbfa60701262154s73f2c344k4585f8b4e5400302@mail.gmail.com> <359a92830701270914y732ee84asc4505e7cfa179beb@mail.gmail.com>
Mime-Version: 1.0 (Apple Message framework v752.3)
Content-Type: text/plain; charset=ISO-8859-1; delsp=yes; format=flowed
Message-Id: <D1DBF7F6-601B-4729-9F41-C99A09A1C033@classdump.org>
Content-Transfer-Encoding: quoted-printable
From: Kay Roepke <kroepke@classdump.org>
Subject: Re: Re : lucene document id's
Date: Sun, 28 Jan 2007 01:37:06 +0100
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org

Hi!

I promised karl that I'd share something on this topic, so here it =20
goes. It fits the subject, too ;)

On Jan 27, 2007, at 6:14 PM, Erick Erickson wrote:

> I believe you are correct about when document IDs change. That =20
> said, I'd
> strongly recommend you spend some time trying think of a way to =20
> keep from
> doing this, since it may lead to endless synchronization issues.

Not only that, but it will make a performance hog, too. There's the =20
potential chance that all doc ids change after only one delete and a =20
subsequent merge! It could invalidate your entire mapping table in =20
one go, forcing you to rebuild it from scratch.

And if you have IndexReaders that happen to have different versions =20
of the index open at the same time, it's not even doable in one =20
lookup table.

> But if you must, you can retrieve a document with =20
> IndexReader.document(id);
>
> On 1/27/07, saikrishna venkata pendyala <pvsaikrishna@gmail.com> =20
> wrote:
>>
>> Hai ,
>>       I was trying to store to document id's external.

I've recently had the need to do this, too.

Short story: Don't bother.

Slightly longer story: Don't bother. If you have to have a primary =20
key to quickly get at your document (because you are running into =20
performance troubles, e.g. with filter bitsets) turn the problem =20
around. Don't try to store Lucene's doc ids externally but rather =20
store the external primary key internally in Lucene. Not only as a =20
field, but in a separate structure. Be aware that you have to change =20
Lucene to add support for this.

>>       I have found that lucene generates document id's linearly =20
>> starting
>> from 0 and are not changed until any document is deleted.
>>        but it did work for me.

As long as you don't delete anything, this should hold true, yes. The =20=

"rearranging" happens implicitely when segment merges happen. Note =20
that the document id is actually a misnomer, and exposing it could be =20=

considered a misfeature (IMHO). It actually is the offset into the =20
index file.

>>       Was the above one correct ? if not who could I store =20
>> document id's
>> externally.

As I said, turn the problem around. Store the mapping information =20
alongside the index and write code that is able to map between your =20
primary key and Lucene document ids. You will have to augment the =20
SegmentMerger and a couple of other places to get to the information, =20=

of course, but it's not that hard to do. If you have a huge number of =20=

documents, you probably won't be able to hold the entire mapping =20
table in RAM, then it gets harder to do it efficiently. But if you =20
have enough RAM, use java.nio buffers! HashMaps and the like won't =20
scale a bit.

In the end it all comes down to the question: Why do you need this? =20
If you need to create huge filter sets, you probably have a valid =20
reason, if you simply want to retrieve a certain document, you =20
probably don't. In the latter case, store your external id (primary =20
key) as a field of each document and use a TermEnum to do the lookup. =20=

That's plenty fast for most applications, as I have found out, but it =20=

won't scale to big filter sets, esp. when you have a large number of =20
updates per second on the index, thus invalidating any filter caches =20
you might have.
If you have a rather static index and do not require subsecond =20
response times from Lucene, all of what I outlined earlier is =20
probably overkill.

But it is a good opportunity to learn things about Lucene you never =20
wanted to know ;)

Hope that helps a bit! I'm sorry that I can't share any code, but I'm =20=

not allowed to do so :(

cheers,
-k
--=20
Kay R=F6pke
http://classdump.org/





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25762-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jan 28 04:57:18 2007
Return-Path: <java-user-return-25762-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26689 invoked from network); 28 Jan 2007 04:57:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Jan 2007 04:57:17 -0000
Received: (qmail 56537 invoked by uid 500); 28 Jan 2007 04:57:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56509 invoked by uid 500); 28 Jan 2007 04:57:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56498 invoked by uid 99); 28 Jan 2007 04:57:18 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 27 Jan 2007 20:57:18 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of DORONC@il.ibm.com designates 195.212.29.154 as permitted sender)
Received: from [195.212.29.154] (HELO mtagate5.de.ibm.com) (195.212.29.154)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 27 Jan 2007 20:57:07 -0800
Received: from d12nrmr1607.megacenter.de.ibm.com (d12nrmr1607.megacenter.de.ibm.com [9.149.167.49])
	by mtagate5.de.ibm.com (8.13.8/8.13.8) with ESMTP id l0S4ujKT202336
	for <java-user@lucene.apache.org>; Sun, 28 Jan 2007 04:56:45 GMT
Received: from d12av02.megacenter.de.ibm.com (d12av02.megacenter.de.ibm.com [9.149.165.228])
	by d12nrmr1607.megacenter.de.ibm.com (8.13.8/8.13.8/NCO v8.2) with ESMTP id l0S4uiei913610
	for <java-user@lucene.apache.org>; Sun, 28 Jan 2007 05:56:44 +0100
Received: from d12av02.megacenter.de.ibm.com (loopback [127.0.0.1])
	by d12av02.megacenter.de.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id l0S4uiDc007133
	for <java-user@lucene.apache.org>; Sun, 28 Jan 2007 05:56:44 +0100
Received: from d12mc102.megacenter.de.ibm.com (d12mc102.megacenter.de.ibm.com [9.149.167.114])
	by d12av02.megacenter.de.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id l0S4uiTh007130
	for <java-user@lucene.apache.org>; Sun, 28 Jan 2007 05:56:44 +0100
In-Reply-To: <898DFED3-46D1-4869-B72B-DED925F2A1C1@gmail.com>
Subject: Re: IndexWriter.docCount
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 7.0 HF277 June 21, 2006
Message-ID: <OF1DB8EEEE.FE6F0CB9-ON88257271.00167B5B-88257271.001AFD69@il.ibm.com>
From: Doron Cohen <DORONC@il.ibm.com>
Date: Sat, 27 Jan 2007 20:54:48 -0800
X-MIMETrack: Serialize by Router on D12MC102/12/M/IBM(Release 7.0.2HF71 | November 3, 2006) at
 28/01/2007 06:56:44
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org

karl wettin <karl.wettin@gmail.com> wrote on 27/01/2007 13:49:24:

> Deleted as in still available in the segment and noted in the delted
> file, but not optimized and IllegalArgumentException thrown in case
> of IndexReader.document(n)? At least I think that is the way a
> Directory works?

Yes.. so it is a sum on maxDoc() of all the segments of the index,
both (1) committed and (2) yet in memory.

> Does the consumers of this method really want to take the number of
> documents that is not accessible in account too, or is that just
> something that is done for optimization reasons?

Actually this public method is not used anywhere in Lucene, except
for tests, and I don't know if it was added for any specific need,
or just anticipating someone would like to query on this.

>
> > Do you see a problem in this method?
>
> Luckely only in the IndexWriter of my alternate RAM index. :)
>
>
> In essence, should I return
>    index.getDocumentsByNumber().size() -
>    index.getDeletedDocuments().size() +
>    unflushedDocuments.size();
> or
>    index.getDocumentsByNumber().size() +
>    unflushedDocuments.size();
> ?
>

I guess it is the 2nd one - without subtracting the number of deleted
docs. (but I don't know what is getDocumentsByNumber() - nothing like
this in the trunk, nor in current patch for 550.)

Doron


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25763-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jan 28 06:02:27 2007
Return-Path: <java-user-return-25763-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31586 invoked from network); 28 Jan 2007 06:02:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Jan 2007 06:02:27 -0000
Received: (qmail 81068 invoked by uid 500); 28 Jan 2007 06:02:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81039 invoked by uid 500); 28 Jan 2007 06:02:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81028 invoked by uid 99); 28 Jan 2007 06:02:27 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 27 Jan 2007 22:02:27 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [206.190.38.61] (HELO web50307.mail.yahoo.com) (206.190.38.61)
    by apache.org (qpsmtpd/0.29) with SMTP; Sat, 27 Jan 2007 22:02:15 -0800
Received: (qmail 18738 invoked by uid 60001); 28 Jan 2007 06:01:54 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=GI1JUixV+awFfZtX0yYEdFRq5PA7ktp+HMJ6MhPLYkZno/pc4ioDKvOLRaW3el143Rg0J3LjtadnxIGCoTc7IUN1IxNpxlP7Mqa8C2FK+jHAwKyBQ7bP+8+2suZqANcPjozrwGg9GnDj1VvAzSUk3HIz0K++0SyiPLpC5unHVeQ=;
X-YMail-OSG: RJRetuMVM1mtxx_kwatbPGkXoKkDhCW8giDao3uqkPJWp1AVwjwWsUyV72NEl9PcPvSI2zi5_TDi8Tdk3sSrq1SPHmLv02QIrzNzrtjfEWY5Zx6lycYYSRMN9A9HTuMbzjkNUkdVYJ1fOB0-
Received: from [58.63.146.81] by web50307.mail.yahoo.com via HTTP; Sat, 27 Jan 2007 22:01:54 PST
X-Mailer: YahooMailRC/368.3 YahooMailWebService/0.6.132.7
Date: Sat, 27 Jan 2007 22:01:54 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Multiword Highlighting
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable
Message-ID: <574156.14791.qm@web50307.mail.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

For what it's worth Mark (Miller), there *is* a need for "just highlight th=
e query terms without trying to get excerpts" functionality - something a l=
a Google cache (different colours...mmm, nice).  I've had people ask me for=
 this before, and I know I could use this functionality, too.  Please contr=
ib to contrib/ if you end up working on this.=0A=0AOtis=0A--=0ASimpy -- htt=
p://www.simpy.com/ -- Tag.  Search.  Share.=0A=0A----- Original Message ---=
-=0AFrom: Mark Miller <markrmiller@gmail.com>=0ATo: java-user@lucene.apache=
.org=0ASent: Sunday, January 28, 2007 7:39:29 AM=0ASubject: Re: Multiword H=
ighlighting=0A=0A=0Amarkharw00d wrote:=0A> >>Isn't it semi trivial if you a=
re not interested in the fragments (I =0A> swear it seems that most people =
are not)? I=0A>=0A> I haven't conducted a survey but it's the typical web s=
earch engine =0A> scenario - select only a small subset of the matching doc=
ument content =0A> for display in SERPS. I would expect that to be a pretty=
 commonplace =0A> requirement for which we should retain a solution.=0ANo d=
oubt. I certainly am not suggesting you ditch fragments and I have =0Ano ev=
idence more people just want to highlight a doc...it's just the =0Aimpressi=
on that I get from the mailing list is that most people just =0Awant to hig=
hlight the returned doc...I am sure plenty of people need =0Agoogle style r=
esults too, but my experience with Lucene has not often =0Abeen in the area=
 of web search engines. I bet a lot of users would =0Abenefit from a highli=
ghter that highlights actual hits and doesn't =0Asummarize though (both wou=
ld be great). I wouln't claim to be an =0Aauthority on any of this though..=
.take my opinion for what its worth -- =0Avery little.=0A>=0A> Maybe a new =
highlighter with no attempt at summarising could more =0A> easily address p=
hrase support for small pieces of content. It will =0A> always be hard to  =
faithfully represent all possible query match logic =0A> - especially if th=
ere are NOTs, ANDs and ORs mixed in with all the =0A> term proximity logic =
e.g. NotNear. Some compromise is required. I did =0A> suggest that spans ma=
ybe a better basis for highlighting than terms =0A> and pointed at some exi=
sting code to get you along this path - see =0A> here http://marc.theaimsgr=
oup.com/?l=3Dlucene-user&m=3D112496111224218&w=3D2=0AI have some code that =
you wrote that seems to turn almost any query into =0Aa series of spans. Pe=
rhaps it is not as robust as my limited testing =0Amade it seem.=0A>=0A> Th=
ere are also a couple of other Highlighter packages contributed =0A> recent=
ly which I listed in my previous mail but I simply haven't had =0A> the tim=
e to look at in detail so they may be useful. Anyone had any =0A> experienc=
e of those?=0ANon of them seem to do full span highlighting...again based o=
n my =0Alimited investigation.=0A>=0A> >> every new highlight has to be com=
pared against every previous =0A> highlight for overlap=0A> Yes, Analyzers =
that produce overlapping tokens are an added =0A> complication when impleme=
nting highlighting logic. I think we have a =0A> reasonable Junit test cont=
aining several of the more exotic analyzer =0A> scenarios which you could/s=
hould use for testing any other highlighter =0A> implementation.=0Athanks f=
or the tip.=0A=0AI appreciate your response Mark. I will continue to look a=
t your span =0Aextractor...I thought that it alone was enough to what I wan=
ted, but =0Ayour comments seem to suggest maybe I'll need more. I hope not =
<g> If I =0Ado manage something I will be sure to post my results.=0A=0A=0A=
- Mark=0A=0A---------------------------------------------------------------=
------=0ATo unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org=0A=
For additional commands, e-mail: java-user-help@lucene.apache.org

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25764-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jan 28 10:31:26 2007
Return-Path: <java-user-return-25764-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73402 invoked from network); 28 Jan 2007 10:31:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Jan 2007 10:31:25 -0000
Received: (qmail 83025 invoked by uid 500); 28 Jan 2007 10:31:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82984 invoked by uid 500); 28 Jan 2007 10:31:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82973 invoked by uid 99); 28 Jan 2007 10:31:25 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 28 Jan 2007 02:31:25 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [209.73.178.151] (HELO web60423.mail.yahoo.com) (209.73.178.151)
    by apache.org (qpsmtpd/0.29) with SMTP; Sun, 28 Jan 2007 02:31:15 -0800
Received: (qmail 61184 invoked by uid 60001); 28 Jan 2007 10:30:54 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=IE/KLSN5/yHpLt3fcEnVisD11/SGgqbYVuMfh2MB9Q2J/HQb/U/7JKseUbzogrcMFenYGZXLH+TM7XTSl/KfXdcs9omd6rmFMuWTOHxeIZ5Uvc9y6aRErR9IuufHQCvjMJyiIjOGixbr0zfMU0du9iTXLu73Yc+tcX+Sk1uJCeY=;
Received: from [155.69.9.15] by web60423.mail.yahoo.com via HTTP; Sun, 28 Jan 2007 02:30:54 PST
Date: Sun, 28 Jan 2007 02:30:54 -0800 (PST)
From: maureen tanuwidjaja <autumn_musique@yahoo.com>
Subject: Indexwriter can't add the 10000th document to the index
To: java-user@lucene.apache.org
In-Reply-To: <Pine.LNX.4.58.0701271153140.3698@hal.rescomp.berkeley.edu>
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-627319446-1169980254=:60755"
Content-Transfer-Encoding: 8bit
Message-ID: <330464.60755.qm@web60423.mail.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

--0-627319446-1169980254=:60755
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit

I finally rerun the program and it stops at exactly the sampe  place.This time the exception came out.Writer cant add the 10000th  document to the index...
  
  Indexing C:\sweetpea\wikipedia_xmlfiles\part-180000\491886.xml
  Indexing C:\sweetpea\wikipedia_xmlfiles\part-180000\491887.xml
  Indexing C:\sweetpea\wikipedia_xmlfiles\part-180000\491891.xml
  Indexing C:\sweetpea\wikipedia_xmlfiles\part-180000\491893.xml
  Indexing C:\sweetpea\wikipedia_xmlfiles\part-180000\491896.xml
  java.lang.Exception: cannot add document to index
  
  
  And this is the code..
  
      public static void addDocToIndex(Document doc) throws Exception
      {
          try
          {
              writer.addDocument(doc);
              counter++;   
          }
          catch (Exception e)
          {
              throw new Exception("cannot add document to index");
          }
      }
  
  I already put -Xmx512m in Java VM argument,since previously it has exception of Exception in thread "main" java.lang.OutOfMemoryError: Java heap space 
  
  
  Maureen

Chris Hostetter <hossman_lucene@fucit.org> wrote:  
did you try triggering a thread dump to see what it was doing at that
point?

depending on your merge factors and other IndexWriter settings it could
just be doing a relaly big merge.

: Date: Sat, 27 Jan 2007 09:40:47 -0800 (PST)
: From: maureen tanuwidjaja 
: Reply-To: java-user@lucene.apache.org
: To: java-user@lucene.apache.org
: Subject: My program stops indexing after 10000th documents is indexed
:
: Hi all,
:
:   Is there any limitation of number of file that lucene can handle?
:   I indexed a total of 30000 XML Documents,however it stops at 10000th documents.
:   No warning,no error ,no exception as well.
:   ....
:   Indexing C:\sweetpea\wikipedia_xmlfiles\part-180000\491876.xml
:   Indexing C:\sweetpea\wikipedia_xmlfiles\part-180000\491886.xml
:   Indexing C:\sweetpea\wikipedia_xmlfiles\part-180000\491887.xml
:   Indexing C:\sweetpea\wikipedia_xmlfiles\part-180000\491891.xml
:   Indexing C:\sweetpea\wikipedia_xmlfiles\part-180000\491893.xml
:   Indexing C:\sweetpea\wikipedia_xmlfiles\part-180000\491896.xml <--10000th doc
:   --it idles here--
:
:  At first I thought that it was the size of 10000th document is so big  so that it took quite a long time to put into the index.Then i found  out that the 10000th document has the size of 6 KB only.Indexing  process stops for about 1 hour,so that i decide to terminate the  progress.
:
:   Is there anything to do with smt like setCompoundFiles etc?cause I dont include any in my program...
:
:   Any suggestion pls?
:
:   THanks and Best Regards,
:
:   Maureen
:
:
: ---------------------------------
: Any questions?  Get answers on any topic at Yahoo! Answers. Try it now.



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



 
---------------------------------
Cheap Talk? Check out Yahoo! Messenger's low PC-to-Phone call rates.
 
---------------------------------
Expecting? Get great news right away with email Auto-Check.
Try the Yahoo! Mail Beta.
--0-627319446-1169980254=:60755--

From java-user-return-25765-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jan 28 15:24:47 2007
Return-Path: <java-user-return-25765-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 29491 invoked from network); 28 Jan 2007 15:24:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Jan 2007 15:24:45 -0000
Received: (qmail 66576 invoked by uid 500); 28 Jan 2007 15:24:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66547 invoked by uid 500); 28 Jan 2007 15:24:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66536 invoked by uid 99); 28 Jan 2007 15:24:44 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 28 Jan 2007 07:24:44 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=HTML_00_10,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [209.191.86.201] (HELO web82514.mail.mud.yahoo.com) (209.191.86.201)
    by apache.org (qpsmtpd/0.29) with SMTP; Sun, 28 Jan 2007 07:24:34 -0800
Received: (qmail 83504 invoked by uid 60001); 28 Jan 2007 15:24:12 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=pacbell.net;
  h=X-YMail-OSG:Received:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=iSuzyGB+gKz7pDjWhreW0iScMmO0Tg9/9If7UnZMTytrVSzLxvd+isAdTrjLLKlRG1+ijNV33xLRVCiknX8elzYZhjHoxWsRIlBCn8VT12dqhJw80dpdFrTduI4Iw9WqM2+c636wWmmAHdIIt5TH6qVoK/nf0UkZ74QZZv99pg8=;
X-YMail-OSG: zDZVFPgVM1lWmUyXb7VH4GRa4YauqL8JJF4iAtRZuR0oTnL3
Received: from [71.146.24.250] by web82514.mail.mud.yahoo.com via HTTP; Sun, 28 Jan 2007 07:24:11 PST
Date: Sun, 28 Jan 2007 07:24:11 -0800 (PST)
From: Felix Litman <f_litman@pacbell.net>
Subject: search on colon ":" ending words
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-985544376-1169997851=:83195"
Content-Transfer-Encoding: 8bit
Message-ID: <973697.83195.qm@web82514.mail.mud.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

--0-985544376-1169997851=:83195
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit

Is there a simple way to turn off field-search syntax in the Lucene parser, and have Lucene recognize words ending in a colon ":" as search terms instead?

Such words are very common occurrences for our documents (or any plain text), but Lucene does not seem to find them. :-(

Thank you,
Felix

--0-985544376-1169997851=:83195--

From java-user-return-25766-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jan 28 15:54:17 2007
Return-Path: <java-user-return-25766-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 34136 invoked from network); 28 Jan 2007 15:54:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Jan 2007 15:54:17 -0000
Received: (qmail 89172 invoked by uid 500); 28 Jan 2007 15:54:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89014 invoked by uid 500); 28 Jan 2007 15:54:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89002 invoked by uid 99); 28 Jan 2007 15:54:17 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 28 Jan 2007 07:54:17 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 64.233.182.190 as permitted sender)
Received: from [64.233.182.190] (HELO nf-out-0910.google.com) (64.233.182.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 28 Jan 2007 07:54:08 -0800
Received: by nf-out-0910.google.com with SMTP id a27so1584832nfc
        for <java-user@lucene.apache.org>; Sun, 28 Jan 2007 07:53:46 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=L3iDM94HuoXHClZzUHIFpbHOqporJHMLoHeMEHlOm7rpDf4C6sMytx4EjveuqwO4lXQP7Rsyte5XUa+thnwCQNKDQOYUYeB01cdlF62gi1kwlMOkFf1HJHckaBy99TkYTPHU8E2YULjf2/tlfST3TPTi/WwkTMxQB+o9Zy9AKL4=
Received: by 10.82.182.8 with SMTP id e8mr2910174buf.1169999626312;
        Sun, 28 Jan 2007 07:53:46 -0800 (PST)
Received: by 10.82.162.9 with HTTP; Sun, 28 Jan 2007 07:53:46 -0800 (PST)
Message-ID: <359a92830701280753h23b9e8b6xceca789a36055fbd@mail.gmail.com>
Date: Sun, 28 Jan 2007 10:53:46 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: search on colon ":" ending words
In-Reply-To: <973697.83195.qm@web82514.mail.mud.yahoo.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_67588_9922919.1169999626254"
References: <973697.83195.qm@web82514.mail.mud.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_67588_9922919.1169999626254
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I've got to ask why you'd want to search on colons. Why not just index the
words without colons and search without them too? Let's say you index the
word "work:" Do you really want to have a search on "work" fail?

By and large, you're better off indexing and searching without
punctuation....

Best
Erick

On 1/28/07, Felix Litman <f_litman@pacbell.net> wrote:
>
> Is there a simple way to turn off field-search syntax in the Lucene
> parser, and have Lucene recognize words ending in a colon ":" as search
> terms instead?
>
> Such words are very common occurrences for our documents (or any plain
> text), but Lucene does not seem to find them. :-(
>
> Thank you,
> Felix
>
>

------=_Part_67588_9922919.1169999626254--

From java-user-return-25767-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jan 28 15:56:20 2007
Return-Path: <java-user-return-25767-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 34491 invoked from network); 28 Jan 2007 15:56:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Jan 2007 15:56:18 -0000
Received: (qmail 91331 invoked by uid 500); 28 Jan 2007 15:56:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91292 invoked by uid 500); 28 Jan 2007 15:56:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 91281 invoked by uid 99); 28 Jan 2007 15:56:18 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 28 Jan 2007 07:56:18 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 64.233.182.187 as permitted sender)
Received: from [64.233.182.187] (HELO nf-out-0910.google.com) (64.233.182.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 28 Jan 2007 07:56:10 -0800
Received: by nf-out-0910.google.com with SMTP id a27so1585184nfc
        for <java-user@lucene.apache.org>; Sun, 28 Jan 2007 07:55:48 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=IBziAB97/DHDgXr4hIECZOEthVFmeFJg18MEgap54evKpqeotywNtwBViOmcnSFQ+98LeLOJBHxuKdeM4Kr8LzDNNKMSMr+z7jHEk2EQDCI1ElHfLWB11kOtr/r93AAKlnY6/mJKZQKTCyuPUU7DauSxXANSEqNxVYPo83f6XBg=
Received: by 10.82.184.2 with SMTP id h2mr2903546buf.1169999747985;
        Sun, 28 Jan 2007 07:55:47 -0800 (PST)
Received: by 10.82.162.9 with HTTP; Sun, 28 Jan 2007 07:55:47 -0800 (PST)
Message-ID: <359a92830701280755s5370547fs228b5535bf02262c@mail.gmail.com>
Date: Sun, 28 Jan 2007 10:55:47 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: My program stops indexing after 10000th documents is indexed
In-Reply-To: <Pine.LNX.4.58.0701271153140.3698@hal.rescomp.berkeley.edu>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_67604_16388244.1169999747751"
References: <579855.45622.qm@web60420.mail.yahoo.com>
	 <Pine.LNX.4.58.0701271153140.3698@hal.rescomp.berkeley.edu>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_67604_16388244.1169999747751
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Maureen:

I lost the e-mail where you re-throw the exception. But you'd get a *lot*
more information if you'd print the stacktrace via
(catch Exception e) {
e.printStackTrace();
throw e;
}

And that would allow the folks who understand Lucene to give you a LOT more
help <G>...

Best
Erick

On 1/27/07, Chris Hostetter <hossman_lucene@fucit.org> wrote:
>
>
> did you try triggering a thread dump to see what it was doing at that
> point?
>
> depending on your merge factors and other IndexWriter settings it could
> just be doing a relaly big merge.
>
> : Date: Sat, 27 Jan 2007 09:40:47 -0800 (PST)
> : From: maureen tanuwidjaja <autumn_musique@yahoo.com>
> : Reply-To: java-user@lucene.apache.org
> : To: java-user@lucene.apache.org
> : Subject: My program stops indexing after 10000th documents is indexed
> :
> : Hi all,
> :
> :   Is there any limitation of number of file that lucene can handle?
> :   I indexed a total of 30000 XML Documents,however it stops at 10000th
> documents.
> :   No warning,no error ,no exception as well.
> :   ....
> :   Indexing C:\sweetpea\wikipedia_xmlfiles\part-180000\491876.xml
> :   Indexing C:\sweetpea\wikipedia_xmlfiles\part-180000\491886.xml
> :   Indexing C:\sweetpea\wikipedia_xmlfiles\part-180000\491887.xml
> :   Indexing C:\sweetpea\wikipedia_xmlfiles\part-180000\491891.xml
> :   Indexing C:\sweetpea\wikipedia_xmlfiles\part-180000\491893.xml
> :   Indexing C:\sweetpea\wikipedia_xmlfiles\part-180000\491896.xml
> <--10000th doc
> :   --it idles here--
> :
> :  At first I thought that it was the size of  10000th document is so big
> so that it took quite a long time to put  into the index.Then i found
> out  that the 10000th document has the  size of 6 KB only.Indexing process
> stops for about 1 hour,so that i  decide to terminate the progress.
> :
> :   Is there anything to do with smt like setCompoundFiles etc?cause I
> dont include any in my program...
> :
> :   Any suggestion pls?
> :
> :   THanks and Best Regards,
> :
> :   Maureen
> :
> :
> : ---------------------------------
> : Any questions?  Get answers on any topic at Yahoo! Answers. Try it now.
>
>
>
> -Hoss
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_67604_16388244.1169999747751--

From java-user-return-25768-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jan 28 17:58:20 2007
Return-Path: <java-user-return-25768-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56972 invoked from network); 28 Jan 2007 17:58:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Jan 2007 17:58:19 -0000
Received: (qmail 66703 invoked by uid 500); 28 Jan 2007 17:58:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66495 invoked by uid 500); 28 Jan 2007 17:58:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66482 invoked by uid 99); 28 Jan 2007 17:58:18 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 28 Jan 2007 09:58:18 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [209.73.178.154] (HELO web60411.mail.yahoo.com) (209.73.178.154)
    by apache.org (qpsmtpd/0.29) with SMTP; Sun, 28 Jan 2007 09:58:06 -0800
Received: (qmail 6769 invoked by uid 60001); 28 Jan 2007 17:57:44 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=hz72qwRV/WGk0EiYaMQsV6Y4oncDCvS1R5vieyNSUpt1J6HZv3nxgDxYb9MyxSRq0fqGvT0+vZsSul8pFdJxdmUJ/4Wef/qMZvKYQL8caoOxjN4NaRkt8Q/YMz6kuFk+udWVQTnn5QZd7DitVv3uI0fXLY+xYG71MPqywJdYB1E=  ;
Message-ID: <20070128175744.6767.qmail@web60411.mail.yahoo.com>
X-YMail-OSG: sENmiNgVM1nhBDS78qZZGhLVDkoz4PEIcJ6rcAr_2XgVDk.W1DWLquvB.TCy36_MmynShvUhwhIkNaqTjo0xJJ.n7ZPGCwxqiYgDqE1WHGfcOIS_L735Q3uIMus5Dw8xpCjkHUD.VauYn3D8RIrPuEmpJpgZWHtE2h_uD_c7Yfb7XpVqlC0Iiy1u1POkatZFCeZfzZeD
Received: from [155.69.9.15] by web60411.mail.yahoo.com via HTTP; Sun, 28 Jan 2007 09:57:44 PST
Date: Sun, 28 Jan 2007 09:57:44 -0800 (PST)
From: maureen tanuwidjaja <autumn_musique@yahoo.com>
Subject: Sorry, it is the 190,000th documents
To: java-user@lucene.apache.org
In-Reply-To: <359a92830701280755s5370547fs228b5535bf02262c@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-1770790177-1170007064=:4080"
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

--0-1770790177-1170007064=:4080
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit

Hi...
  
  I'm sorry,I just found out and realize that it is NOT the 10,000th  documents that raise the exception when IndexWriter.add(Document) is  called....but it is the 180,000+ 10,000 document,so the 190,000th  documents.
  
  Now I am running the program again and put the code to print the stacktrace if exception happens.(thanks for the advice Erick)
  
  OK.Basically what I am going to index is XML documents that consist of  22 folders where each folder contains  30,000  XML  Documents.Hence Total is 660,000 XML Documents...I was reading the  Lucene book and spot about the mergeFactor.I would like to know wheter  the mergeFactor plays important part in indexing these files... and  perhaps that this one that has a strong correlation regarding  exception? I run my program using the default Value of  mergeFactor,which is 10
  
  In case needed The PC used has the following spec:       Intel Pentium 4, 2.40 GHz CPU, 512  MB of RAM
  
  
  Is there any suggestion about the mergeFactor,maxMergeFactor value that I should use for my case?
  
  
  
  Thanks and Regards,
  Maureen
  
  
Erick Erickson <erickerickson@gmail.com> wrote:  Maureen:

I lost the e-mail where you re-throw the exception. But you'd get a *lot*
more information if you'd print the stacktrace via
(catch Exception e) {
e.printStackTrace();
throw e;
}

And that would allow the folks who understand Lucene to give you a LOT more
help ...

Best
Erick

On 1/27/07, Chris Hostetter  wrote:
>
>
> did you try triggering a thread dump to see what it was doing at that
> point?
>
> depending on your merge factors and other IndexWriter settings it could
> just be doing a relaly big merge.
>
> : Date: Sat, 27 Jan 2007 09:40:47 -0800 (PST)
> : From: maureen tanuwidjaja 
> : Reply-To: java-user@lucene.apache.org
> : To: java-user@lucene.apache.org
> : Subject: My program stops indexing after 10000th documents is indexed
> :
> : Hi all,
> :
> :   Is there any limitation of number of file that lucene can handle?
> :   I indexed a total of 30000 XML Documents,however it stops at 10000th
> documents.
> :   No warning,no error ,no exception as well.
> :   ....
> :   Indexing C:\sweetpea\wikipedia_xmlfiles\part-180000\491876.xml
> :   Indexing C:\sweetpea\wikipedia_xmlfiles\part-180000\491886.xml
> :   Indexing C:\sweetpea\wikipedia_xmlfiles\part-180000\491887.xml
> :   Indexing C:\sweetpea\wikipedia_xmlfiles\part-180000\491891.xml
> :   Indexing C:\sweetpea\wikipedia_xmlfiles\part-180000\491893.xml
> :   Indexing C:\sweetpea\wikipedia_xmlfiles\part-180000\491896.xml
> <--10000th doc
> :   --it idles here--
> :
> :  At first I thought that it was the size of  10000th document is so big
> so that it took quite a long time to put  into the index.Then i found
> out  that the 10000th document has the  size of 6 KB only.Indexing process
> stops for about 1 hour,so that i  decide to terminate the progress.
> :
> :   Is there anything to do with smt like setCompoundFiles etc?cause I
> dont include any in my program...
> :
> :   Any suggestion pls?
> :
> :   THanks and Best Regards,
> :
> :   Maureen
> :
> :
> : ---------------------------------
> : Any questions?  Get answers on any topic at Yahoo! Answers. Try it now.
>
>
>
> -Hoss
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


 
---------------------------------
No need to miss a message. Get email on-the-go 
with Yahoo! Mail for Mobile. Get started.
--0-1770790177-1170007064=:4080--

From java-user-return-25769-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jan 28 18:03:00 2007
Return-Path: <java-user-return-25769-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58127 invoked from network); 28 Jan 2007 18:02:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Jan 2007 18:02:56 -0000
Received: (qmail 70976 invoked by uid 500); 28 Jan 2007 18:02:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70948 invoked by uid 500); 28 Jan 2007 18:02:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70933 invoked by uid 99); 28 Jan 2007 18:02:54 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 28 Jan 2007 10:02:54 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [209.191.86.202] (HELO web82515.mail.mud.yahoo.com) (209.191.86.202)
    by apache.org (qpsmtpd/0.29) with SMTP; Sun, 28 Jan 2007 10:02:44 -0800
Received: (qmail 56397 invoked by uid 60001); 28 Jan 2007 18:02:22 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=pacbell.net;
  h=X-YMail-OSG:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=tPC+TtZRABwI6gyagB9fmoX3SkaKJQnT4r8y2LzIHnxZFrNkCQqaCfoMJ7IJ9lrcow4HMdBi6UApQ3SB6t98hRNY1czP/Oix+Ek5euIIIDkCJ/tEWsgpnG3VSiLdsRgog4ut/vHZdOsrmlofI1oZ1LsCPGLwWWqoSaWSRIQBD3Y=;
X-YMail-OSG: 73fiXd4VM1mF8c8k3HsCyWkZ78bIABPRvcelrrn0ZZeqwtJtEhy75dO9c2inE_14BzUjG.1XEFFiaQqmd6pvHWBp.g--
Received: from [71.146.24.250] by web82515.mail.mud.yahoo.com via HTTP; Sun, 28 Jan 2007 10:02:22 PST
Date: Sun, 28 Jan 2007 10:02:22 -0800 (PST)
From: Felix Litman <f_litman@pacbell.net>
Subject: Re: search on colon ":" ending words
To: java-user@lucene.apache.org
In-Reply-To: <359a92830701280753h23b9e8b6xceca789a36055fbd@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-1506787479-1170007342=:53608"
Content-Transfer-Encoding: 8bit
Message-ID: <627926.53608.qm@web82515.mail.mud.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

--0-1506787479-1170007342=:53608
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit

Yes, thank you. That would be a good solution.  But we are using Lucene's Standard Analyzer.  It seems to index words with colons ":" and other punctuation by default.  Is there a simple way to have the Analyzer not to index colons specifically and punctuation in general?

Erick Erickson <erickerickson@gmail.com> wrote: I've got to ask why you'd want to search on colons. Why not just index the
words without colons and search without them too? Let's say you index the
word "work:" Do you really want to have a search on "work" fail?

By and large, you're better off indexing and searching without
punctuation....

Best
Erick

On 1/28/07, Felix Litman  wrote:
>
> Is there a simple way to turn off field-search syntax in the Lucene
> parser, and have Lucene recognize words ending in a colon ":" as search
> terms instead?
>
> Such words are very common occurrences for our documents (or any plain
> text), but Lucene does not seem to find them. :-(
>
> Thank you,
> Felix
>
>


--0-1506787479-1170007342=:53608--

From java-user-return-25770-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jan 28 19:00:33 2007
Return-Path: <java-user-return-25770-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65849 invoked from network); 28 Jan 2007 19:00:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Jan 2007 19:00:32 -0000
Received: (qmail 3343 invoked by uid 500); 28 Jan 2007 19:00:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3314 invoked by uid 500); 28 Jan 2007 19:00:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3303 invoked by uid 99); 28 Jan 2007 19:00:32 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 28 Jan 2007 11:00:32 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of karl.wettin@gmail.com designates 66.249.92.170 as permitted sender)
Received: from [66.249.92.170] (HELO ug-out-1314.google.com) (66.249.92.170)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 28 Jan 2007 11:00:22 -0800
Received: by ug-out-1314.google.com with SMTP id k40so1108128ugc
        for <java-user@lucene.apache.org>; Sun, 28 Jan 2007 11:00:01 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=iFH2mbuNnBX3O/zfXPa9riNLmI88kAywTcjYs2T3nhPhjf/lpN/Qd+fNcGd7/taBCxyKlnSBu1y1vH2Ypz0PK3vbUvKfTeMCXuPS/ojNNDpdmvI9Y4Ld2smCASTss/kbjyYMuTOwBwXZheI74LCZ/XHLsux27n7LAV55Eb+smuc=
Received: by 10.67.117.2 with SMTP id u2mr7284411ugm.1170010801061;
        Sun, 28 Jan 2007 11:00:01 -0800 (PST)
Received: from ?192.168.1.3? ( [83.249.100.34])
        by mx.google.com with ESMTP id x26sm6302417ugc.2007.01.28.10.59.59;
        Sun, 28 Jan 2007 11:00:00 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <OF1DB8EEEE.FE6F0CB9-ON88257271.00167B5B-88257271.001AFD69@il.ibm.com>
References: <OF1DB8EEEE.FE6F0CB9-ON88257271.00167B5B-88257271.001AFD69@il.ibm.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <CC2262B0-816F-4E56-95C7-46F0E0AFFCE3@gmail.com>
Content-Transfer-Encoding: 7bit
From: karl wettin <karl.wettin@gmail.com>
Subject: Re: IndexWriter.docCount
Date: Sun, 28 Jan 2007 19:59:13 +0100
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org


28 jan 2007 kl. 05.54 skrev Doron Cohen:

> karl wettin <karl.wettin@gmail.com> wrote on 27/01/2007 13:49:24:
>>
>> In essence, should I return
>>    index.getDocumentsByNumber().size() -
>>    index.getDeletedDocuments().size() +
>>    unflushedDocuments.size();
>> or
>>    index.getDocumentsByNumber().size() +
>>    unflushedDocuments.size();
>> ?
>>
>
> I guess it is the 2nd one - without subtracting the number of deleted
> docs.

That is enough for me to settle. Thanks again.
(I linked to this thread from a comment)

> (but I don't know what is getDocumentsByNumber() - nothing like
> this in the trunk, nor in current patch for 550.)

If you still really want to find it, perhaps you were looking in the  
IndexWriter in the core rather than the  InstantiatedIndexWriter of  
contrib/instantiated?

-- 
karl

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25771-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jan 28 20:00:33 2007
Return-Path: <java-user-return-25771-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76805 invoked from network); 28 Jan 2007 20:00:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Jan 2007 20:00:32 -0000
Received: (qmail 48302 invoked by uid 500); 28 Jan 2007 20:00:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48269 invoked by uid 500); 28 Jan 2007 20:00:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48258 invoked by uid 99); 28 Jan 2007 20:00:31 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 28 Jan 2007 12:00:31 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of markrmiller@gmail.com designates 66.249.82.228 as permitted sender)
Received: from [66.249.82.228] (HELO wx-out-0506.google.com) (66.249.82.228)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 28 Jan 2007 12:00:22 -0800
Received: by wx-out-0506.google.com with SMTP id i29so1357294wxd
        for <java-user@lucene.apache.org>; Sun, 28 Jan 2007 12:00:01 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=dNgImxQ+JAMmQGGPWmh5EtKxMOVL25M+FiCJIops5HHHE+rycty6WfptFoWOpi/IgHrHIXj+Ck/ai7HwHXGCs3b0Weh+4WRes2ac+Y8JAH0hOJ5e2MXQMCTYl+3U0aNNinEZhTjp+6AXnJwHjCc4tKyfLypA/WUHD4MCLEJgJes=
Received: by 10.90.87.5 with SMTP id k5mr5781539agb.1170014401612;
        Sun, 28 Jan 2007 12:00:01 -0800 (PST)
Received: from ?192.168.1.103? ( [216.66.114.42])
        by mx.google.com with ESMTP id 33sm10312291wra.2007.01.28.11.59.59;
        Sun, 28 Jan 2007 12:00:00 -0800 (PST)
Message-ID: <45BD00A0.6020507@gmail.com>
Date: Sun, 28 Jan 2007 14:59:28 -0500
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 1.5.0.9 (Windows/20061207)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: search on colon ":" ending words
References: <627926.53608.qm@web82515.mail.mud.yahoo.com>
In-Reply-To: <627926.53608.qm@web82515.mail.mud.yahoo.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

StandardAnalyzer should not be indexing punctuation from my 
experience...instead something like old:fart would be indexed as old and 
fart. QueryParser will then generate a query of old within 1 of fart for 
the query old:fart. This is the case for all punctuation I have run 
into. Things like f.b.i are handled differently though. Its indexed as 
fbi...ie the dots are removed...thats part of the acronym handling. 
There are a couple other special handlers as well...but in general 
punctuation is ignored...except that QueryParser will look for the words 
broken by the punctuation next to each other.

-Mark

Felix Litman wrote:
> Yes, thank you. That would be a good solution.  But we are using Lucene's Standard Analyzer.  It seems to index words with colons ":" and other punctuation by default.  Is there a simple way to have the Analyzer not to index colons specifically and punctuation in general?
>
> Erick Erickson <erickerickson@gmail.com> wrote: I've got to ask why you'd want to search on colons. Why not just index the
> words without colons and search without them too? Let's say you index the
> word "work:" Do you really want to have a search on "work" fail?
>
> By and large, you're better off indexing and searching without
> punctuation....
>
> Best
> Erick
>
> On 1/28/07, Felix Litman  wrote:
>   
>> Is there a simple way to turn off field-search syntax in the Lucene
>> parser, and have Lucene recognize words ending in a colon ":" as search
>> terms instead?
>>
>> Such words are very common occurrences for our documents (or any plain
>> text), but Lucene does not seem to find them. :-(
>>
>> Thank you,
>> Felix
>>
>>
>>     
>
>
>   

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25772-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jan 28 20:18:54 2007
Return-Path: <java-user-return-25772-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79681 invoked from network); 28 Jan 2007 20:18:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Jan 2007 20:18:54 -0000
Received: (qmail 69036 invoked by uid 500); 28 Jan 2007 20:18:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68301 invoked by uid 500); 28 Jan 2007 20:18:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68290 invoked by uid 99); 28 Jan 2007 20:18:54 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 28 Jan 2007 12:18:54 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [217.12.11.34] (HELO smtp003.mail.ukl.yahoo.com) (217.12.11.34)
    by apache.org (qpsmtpd/0.29) with SMTP; Sun, 28 Jan 2007 12:18:44 -0800
Received: (qmail 34340 invoked from network); 28 Jan 2007 20:18:23 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=Received:X-YMail-OSG:Message-ID:Date:From:User-Agent:MIME-Version:To:Subject:References:In-Reply-To:Content-Type:Content-Transfer-Encoding;
  b=LXrRHI48THgLYW0wudpQYS3q3wN6dOB8BjvZmSc3TZYTRzVXfgdu/0mROtSJDF3vD5c6W8rAM6ywuDYtIpaQbt8ydsFsWxH12/icCqZnTUKD9HYYJJaXLs2f1+DBauEs6Z4NPGKs8mfXQ9BzPWF63xWdX3DxkaGT5+xYoK6SAm8=  ;
Received: from unknown (HELO ?127.0.0.1?) (markharw00d@194.106.34.5 with plain)
  by smtp003.mail.ukl.yahoo.com with SMTP; 28 Jan 2007 20:18:23 -0000
X-YMail-OSG: uwYhQFAVM1mhOAZrdgcjoEkHjVCDO7VpzmjJ02a.wsoIr8yRSEON0cjffFhOk5WyKRt212lrvRqoSJ2CJDXz6nq1Jk4MWczBiwF.lpmnp70dlTW_KRtH7NpoU7O515RBpYtshpAz3sZknEdWMnuGqBqj3oAHmEoeqOrj_uueaNQc23MhDxTPT4Oa6w--
Message-ID: <45BD050B.20600@yahoo.co.uk>
Date: Sun, 28 Jan 2007 20:18:19 +0000
From: markharw00d <markharw00d@yahoo.co.uk>
User-Agent: Thunderbird 1.5.0.9 (Windows/20061207)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Multiword Highlighting
References: <574156.14791.qm@web50307.mail.yahoo.com>
In-Reply-To: <574156.14791.qm@web50307.mail.yahoo.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

 >>For what it's worth Mark (Miller), there *is* a need for "just 
highlight the query terms without trying to get excerpts" functionality
 >>- something a la Google cache (different colours...mmm, nice).

FWIW, the existing highlighter doesn't *have* to fragment - just pass a 
NullFragmenter to the highlighter.
Ideally we'd have one implementation that tackles phrase support and 
preserves (optional) support for selecting fragments. I can see that to 
achieve this the existing highlighter design would need to change. 
Currently the highlighter identifies fragments first (typically using an 
implementation which arbitrarily chops text after 'n' words) and then 
selects which of these fragments have the highest density of 
high-scoring query terms. This logic would need to change to :
1) Use QuerySpansExtractor to identify all the *spans* in the document
2) Use a sliding window to select fragments, taking care to select 
fragments that wholly contain spans, rather than selecting only part of 
a span.
3) Mark up the hits.
Clearly, for people uninterested in selecting fragments, step 2 can be 
skipped.

Cheers
Mark


	
	
		
___________________________________________________________ 
All new Yahoo! Mail "The new Interface is stunning in its simplicity and ease of use." - PC Magazine 
http://uk.docs.yahoo.com/nowyoucan.html

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25773-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jan 28 20:27:45 2007
Return-Path: <java-user-return-25773-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 87090 invoked from network); 28 Jan 2007 20:27:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Jan 2007 20:27:44 -0000
Received: (qmail 81309 invoked by uid 500); 28 Jan 2007 20:27:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81278 invoked by uid 500); 28 Jan 2007 20:27:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81267 invoked by uid 99); 28 Jan 2007 20:27:43 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 28 Jan 2007 12:27:43 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of peterlkeegan@gmail.com designates 64.233.162.231 as permitted sender)
Received: from [64.233.162.231] (HELO nz-out-0506.google.com) (64.233.162.231)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 28 Jan 2007 12:27:34 -0800
Received: by nz-out-0506.google.com with SMTP id i1so1148680nzh
        for <java-user@lucene.apache.org>; Sun, 28 Jan 2007 12:27:13 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=ZmufJMpSkFoe4HHP7BWyzQmyVdzUhuz4bGkGZO7ixdg2naF/7LAukO60wF0m9IPWYVJ5FDfpJXl8qU4DlV0DEvtjWeLaXSQhRh7zgKYdCXbQYGn8s3wRkn1DhAe0w0kQgq+0t8liD9z0w2bqmq0bRlIKPCPxEU+Mbkvu0wUYrkM=
Received: by 10.64.242.5 with SMTP id p5mr8428784qbh.1170016033300;
        Sun, 28 Jan 2007 12:27:13 -0800 (PST)
Received: by 10.65.150.17 with HTTP; Sun, 28 Jan 2007 12:27:13 -0800 (PST)
Message-ID: <e994873a0701281227g3e9ddbd6r77bf32ff5b16b1d@mail.gmail.com>
Date: Sun, 28 Jan 2007 15:27:13 -0500
From: "Peter Keegan" <peterlkeegan@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Announcement: Lucene powering Monster job search index (Beta)
In-Reply-To: <bd818c7b0701271322l6899c3e3u71006de77ab1798c@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_61139_14675349.1170016033220"
References: <1c36b0de0611030801u320dff57k1a470eb93c239441@mail.gmail.com>
	 <e994873a0611031056wc507d8ds213d0c8115b576bd@mail.gmail.com>
	 <bd818c7b0701271322l6899c3e3u71006de77ab1798c@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_61139_14675349.1170016033220
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Correction:
We only do the euclidan computation during sorting. For filtering, a simple
bounding box is computed to approximate the radius, and 2 range comparisons
are made to exclude documents. Because these comparisons are done outside of
Lucene as integer comparisons, it is pretty fast. With 13000 results, the
seach time with distance sort is about 200 msec (compared to 30 ms for a
simple non-radius, date-sorted keyword search).

Peter

On 1/27/07, no spam <mrs.nospam@gmail.com> wrote:
>
> Isn't this extremely ineffecient to do the euclidean distance twice?
> Perhaps not a huge deal if a small search result set.  I at times have
> 13,000 results that match my search terms of an index with 1.2 million
> docs.
>
> Can't you do some simple radian math first to ensure it's way out of
> bounds,
> then do the euclidian distance for the subset within bounds?  I'm
> currently
> only doing the distance calc once (post hit collector). I don't have any
> performance numbers with the double vs single distance calc.
>
> I'm still working out the sort by radius myself.
>
> Mark
>
> On 11/3/06, Peter Keegan <peterlkeegan@gmail.com> wrote:
> >
> > Daniel,
> > Yes, this is correct if you happen to be doing a radius search and
> sorting
> > by mileage.
> > Peter
> >
> >
>
>

------=_Part_61139_14675349.1170016033220--

From java-user-return-25774-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jan 28 20:47:39 2007
Return-Path: <java-user-return-25774-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90365 invoked from network); 28 Jan 2007 20:47:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Jan 2007 20:47:38 -0000
Received: (qmail 9488 invoked by uid 500); 28 Jan 2007 20:47:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9453 invoked by uid 500); 28 Jan 2007 20:47:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9442 invoked by uid 99); 28 Jan 2007 20:47:38 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 28 Jan 2007 12:47:38 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [209.191.86.194] (HELO web82507.mail.mud.yahoo.com) (209.191.86.194)
    by apache.org (qpsmtpd/0.29) with SMTP; Sun, 28 Jan 2007 12:47:29 -0800
Received: (qmail 48979 invoked by uid 60001); 28 Jan 2007 20:47:08 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=pacbell.net;
  h=X-YMail-OSG:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=AO/zo1Z5mDAiQH+0WY5DmzfLWOsmqxRDKeGI4CKF17AVIyvMHT+KH5ShwUTFAfzY10CApleZ8cSCdX/XYImBAVl8BtTZQJTdNzsOcPhR9OrH/Dsh5TW5icjUrCfAEVMxA7VRQE56pt+OrjALzoNk1hKzFNhTBwMZhJYaQ1LK8Jo=;
X-YMail-OSG: gtc.XXsVM1nX97L.HhZar14KBQaLzN21iFiyKjVn0IqV_RJZYZwUsErIs8eKAUB7auQA9YTR6xwAL2Ht0n.eVdzsyA--
Received: from [71.146.6.234] by web82507.mail.mud.yahoo.com via HTTP; Sun, 28 Jan 2007 12:47:08 PST
Date: Sun, 28 Jan 2007 12:47:08 -0800 (PST)
From: Felix Litman <f_litman@pacbell.net>
Subject: Re: search on colon ":" ending words
To: java-user@lucene.apache.org
In-Reply-To: <359a92830701280753h23b9e8b6xceca789a36055fbd@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-1829529394-1170017228=:48682"
Content-Transfer-Encoding: 8bit
Message-ID: <179228.48682.qm@web82507.mail.mud.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

--0-1829529394-1170017228=:48682
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit

We want to be able to return a result regardless if users use a colon or not in the query.  So 'work:' and 'work' query should still return same result.

With the current parser if a user enters 'work:'  with a ":" , Lucene does not return anything :-(.   It seems to me the Lucene parser issue.... we are wondering if there is any simple way to make the Lucene parser ignore the ":" in the query?

any thoughts?

Erick Erickson <erickerickson@gmail.com> wrote: I've got to ask why you'd want to search on colons. Why not just index the
words without colons and search without them too? Let's say you index the
word "work:" Do you really want to have a search on "work" fail?

By and large, you're better off indexing and searching without
punctuation....

Best
Erick

On 1/28/07, Felix Litman  wrote:
>
> Is there a simple way to turn off field-search syntax in the Lucene
> parser, and have Lucene recognize words ending in a colon ":" as search
> terms instead?
>
> Such words are very common occurrences for our documents (or any plain
> text), but Lucene does not seem to find them. :-(
>
> Thank you,
> Felix
>
>


--0-1829529394-1170017228=:48682--

From java-user-return-25775-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jan 28 21:04:06 2007
Return-Path: <java-user-return-25775-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92733 invoked from network); 28 Jan 2007 21:04:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Jan 2007 21:04:06 -0000
Received: (qmail 21069 invoked by uid 500); 28 Jan 2007 21:04:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21036 invoked by uid 500); 28 Jan 2007 21:04:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21025 invoked by uid 99); 28 Jan 2007 21:04:06 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 28 Jan 2007 13:04:06 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 28 Jan 2007 13:03:57 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id DC13130EFC17; Sun, 28 Jan 2007 16:03:36 -0500 (EST)
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on javelina
X-Spam-Level: 
Received: from [10.0.1.3] (va-71-53-203-135.dhcp.embarqhsd.net [71.53.203.135])
	by ehatchersolutions.com (Postfix) with ESMTP id B339030EFC16
	for <java-user@lucene.apache.org>; Sun, 28 Jan 2007 16:03:33 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <179228.48682.qm@web82507.mail.mud.yahoo.com>
References: <179228.48682.qm@web82507.mail.mud.yahoo.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <6F8F6B15-5259-4E6A-AD5A-E824EA72B9CE@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: search on colon ":" ending words
Date: Sun, 28 Jan 2007 16:03:31 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=0.2 required=5.0 tests=AWL,BAYES_00,
	RCVD_IN_NJABL_DUL,RCVD_IN_SORBS_DUL autolearn=no version=3.1.1


On Jan 28, 2007, at 3:47 PM, Felix Litman wrote:
> We want to be able to return a result regardless if users use a  
> colon or not in the query.  So 'work:' and 'work' query should  
> still return same result.
>
> With the current parser if a user enters 'work:'  with a ":" ,  
> Lucene does not return anything :-(.   It seems to me the Lucene  
> parser issue.... we are wondering if there is any simple way to  
> make the Lucene parser ignore the ":" in the query?
>
> any thoughts?

What about preprocessing the query string and replace colons with a  
space?   Or perhaps escape colons with a backslash (I believe that  
works, but haven't confirmed it lately).

Would users ever need to use fielded selectors?  Or QueryParser  
syntax in general?  If not, then bypass QueryParser altogether and  
analyze the string yourself and build up a query clauses into a  
BooleanQuery.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25776-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jan 28 21:06:13 2007
Return-Path: <java-user-return-25776-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93001 invoked from network); 28 Jan 2007 21:06:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Jan 2007 21:06:12 -0000
Received: (qmail 23129 invoked by uid 500); 28 Jan 2007 21:06:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23096 invoked by uid 500); 28 Jan 2007 21:06:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23085 invoked by uid 99); 28 Jan 2007 21:06:13 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 28 Jan 2007 13:06:13 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [68.142.229.91] (HELO smtp114.sbc.mail.re2.yahoo.com) (68.142.229.91)
    by apache.org (qpsmtpd/0.29) with SMTP; Sun, 28 Jan 2007 13:06:02 -0800
Received: (qmail 23606 invoked from network); 28 Jan 2007 21:05:39 -0000
Received: from unknown (HELO ?10.1.1.2?) (mdc102254@sbcglobal.net@75.45.174.202 with plain)
  by smtp114.sbc.mail.re2.yahoo.com with SMTP; 28 Jan 2007 21:05:39 -0000
X-YMail-OSG: YNm3NWMVM1k6YGCGmRiMtTHlvetE5d1plxrrJl1g_SN6Jc2mtHEGvGmB5bmpe6cqvNdwYXA85IZAwVMn_2er1WMcZ8oszK4aMCsyF44gpq1g2xKeXG2fCIWi_9JhGkm1pY76yQw0xUCapM4-
Message-ID: <45BD1025.3000709@curtin.com>
Date: Sun, 28 Jan 2007 16:05:41 -0500
From: "Michael D. Curtin" <mike@curtin.com>
User-Agent: Thunderbird 1.5.0.9 (Windows/20061207)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: search on colon ":" ending words
References: <179228.48682.qm@web82507.mail.mud.yahoo.com>
In-Reply-To: <179228.48682.qm@web82507.mail.mud.yahoo.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Felix Litman wrote:
> We want to be able to return a result regardless if users use a colon or not in the query.  So 'work:' and 'work' query should still return same result.
> 
> With the current parser if a user enters 'work:'  with a ":" , Lucene does not return anything :-(.   It seems to me the Lucene parser issue.... we are wondering if there is any simple way to make the Lucene parser ignore the ":" in the query?

The StandardAnalyzer already strips out the colons from the indexed 
text, so all you need to do is get rid of them in the query.  Would

   String newquery = query.replace(query, ":", " ");

work?  It uses a space as the new text so that two query words that 
happened to be separated by the colon would still be separate words ...

--MDC

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25777-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jan 28 22:58:19 2007
Return-Path: <java-user-return-25777-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10752 invoked from network); 28 Jan 2007 22:58:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Jan 2007 22:58:18 -0000
Received: (qmail 16801 invoked by uid 500); 28 Jan 2007 22:58:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16774 invoked by uid 500); 28 Jan 2007 22:58:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16763 invoked by uid 99); 28 Jan 2007 22:58:18 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 28 Jan 2007 14:58:18 -0800
X-ASF-Spam-Status: No, hits=2.9 required=10.0
	tests=HTML_10_20,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [209.191.86.199] (HELO web82512.mail.mud.yahoo.com) (209.191.86.199)
    by apache.org (qpsmtpd/0.29) with SMTP; Sun, 28 Jan 2007 14:58:08 -0800
Received: (qmail 2835 invoked by uid 60001); 28 Jan 2007 22:57:46 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=pacbell.net;
  h=X-YMail-OSG:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=FimyzHfSrAKu/NNgbvj7TqKSGIu04tmO2s7IrNMBHSi6RIe7tV0/P2pbvjrn3EHkxnjnU8B58F0Zm9ifdAWndTK2mSjRIvp3GSKBU1cvr6yeOOM1fEN2Le477ezsWsrv2agg7NUHxf/a3lNo/Wan1IgoFL4Bhs3x4IRXiMMWX1Y=;
X-YMail-OSG: dOUxD8YVM1kr6lc6i4td5fP2ZcKD3ysd4WZdUUsp_JXgFDaiVrXCPzf0l7ZAbA9ZZw--
Received: from [71.159.216.236] by web82512.mail.mud.yahoo.com via HTTP; Sun, 28 Jan 2007 14:57:46 PST
Date: Sun, 28 Jan 2007 14:57:46 -0800 (PST)
From: Felix Litman <f_litman@pacbell.net>
Subject: Re: search on colon ":" ending words
To: java-user@lucene.apache.org
In-Reply-To: <45BD1025.3000709@curtin.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-2029328901-1170025066=:2810"
Content-Transfer-Encoding: 8bit
Message-ID: <422008.2810.qm@web82512.mail.mud.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

--0-2029328901-1170025066=:2810
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit


great suggestion and Eric's also earlier.  Thank you.
Felix

"Michael D. Curtin" <mike@curtin.com> wrote: Felix Litman wrote:
> We want to be able to return a result regardless if users use a colon or not in the query.  So 'work:' and 'work' query should still return same result.
> 
> With the current parser if a user enters 'work:'  with a ":" , Lucene does not return anything :-(.   It seems to me the Lucene parser issue.... we are wondering if there is any simple way to make the Lucene parser ignore the ":" in the query?

The StandardAnalyzer already strips out the colons from the indexed 
text, so all you need to do is get rid of them in the query.  Would

   String newquery = query.replace(query, ":", " ");

work?  It uses a space as the new text so that two query words that 
happened to be separated by the colon would still be separate words ...

--MDC

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



--0-2029328901-1170025066=:2810--

From java-user-return-25778-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 29 00:20:19 2007
Return-Path: <java-user-return-25778-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26182 invoked from network); 29 Jan 2007 00:20:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Jan 2007 00:20:18 -0000
Received: (qmail 62907 invoked by uid 500); 29 Jan 2007 00:20:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62868 invoked by uid 500); 29 Jan 2007 00:20:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62857 invoked by uid 99); 29 Jan 2007 00:20:19 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 28 Jan 2007 16:20:19 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of markrmiller@gmail.com designates 64.233.184.229 as permitted sender)
Received: from [64.233.184.229] (HELO wr-out-0506.google.com) (64.233.184.229)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 28 Jan 2007 16:20:09 -0800
Received: by wr-out-0506.google.com with SMTP id i3so833597wra
        for <java-user@lucene.apache.org>; Sun, 28 Jan 2007 16:19:48 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=MeM3sfF/ShOmReALR6ny1kE4/az736fu5gU2oLq3nzJ6SBX8OVFpRy7NAEUIqXrDknL6QovdQD2ipNOuYWGYfTng8sESAEzgmtGggwZAzMeiU1Q/O/H3NjpiVv84BrL3+rhBJAJCOXGWJFqKeYInAi/MFldpvc8mctvqIdTb8eY=
Received: by 10.90.90.3 with SMTP id n3mr5902584agb.1170029988072;
        Sun, 28 Jan 2007 16:19:48 -0800 (PST)
Received: from ?192.168.1.103? ( [216.66.114.42])
        by mx.google.com with ESMTP id 15sm14975812wrl.2007.01.28.16.19.46;
        Sun, 28 Jan 2007 16:19:47 -0800 (PST)
Message-ID: <45BD3D7B.90600@gmail.com>
Date: Sun, 28 Jan 2007 19:19:07 -0500
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 1.5.0.9 (Windows/20061207)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Multiword Highlighting
References: <574156.14791.qm@web50307.mail.yahoo.com> <45BD050B.20600@yahoo.co.uk>
In-Reply-To: <45BD050B.20600@yahoo.co.uk>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

I do use the NullFragmenter now. I have no interest in the fragments at 
the moment, just in showing hits on the source document. It would be 
great if I could just show the real hits though. The span approach seems 
to work fine for me. I have even tested the highlighting using my 
sentence and paragraph proximity search queries from my query parser. 
These use a modified NotSpan (I call it WithinSpan) within an unbound 
NearSpan. I did a few queries that combine that structure with wildcard 
and boolean queries...everything appeared to work grand -- I got all the 
correct highlights. I just have to combine the highlights (spans) and 
refine my code (and that color comment Otis made is something I am 
interested in well -- it would be great to have the words found in a 
single spanquery be the same color, or a similar shade).

- Mark

markharw00d wrote:
> >>For what it's worth Mark (Miller), there *is* a need for "just 
> highlight the query terms without trying to get excerpts" functionality
> >>- something a la Google cache (different colours...mmm, nice).
>
> FWIW, the existing highlighter doesn't *have* to fragment - just pass 
> a NullFragmenter to the highlighter.
> Ideally we'd have one implementation that tackles phrase support and 
> preserves (optional) support for selecting fragments. I can see that 
> to achieve this the existing highlighter design would need to change. 
> Currently the highlighter identifies fragments first (typically using 
> an implementation which arbitrarily chops text after 'n' words) and 
> then selects which of these fragments have the highest density of 
> high-scoring query terms. This logic would need to change to :
> 1) Use QuerySpansExtractor to identify all the *spans* in the document
> 2) Use a sliding window to select fragments, taking care to select 
> fragments that wholly contain spans, rather than selecting only part 
> of a span.
> 3) Mark up the hits.
> Clearly, for people uninterested in selecting fragments, step 2 can be 
> skipped.
>
> Cheers
> Mark
>
>
>     
>     
>        
> ___________________________________________________________ All new 
> Yahoo! Mail "The new Interface is stunning in its simplicity and ease 
> of use." - PC Magazine http://uk.docs.yahoo.com/nowyoucan.html
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25779-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 29 02:16:17 2007
Return-Path: <java-user-return-25779-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45010 invoked from network); 29 Jan 2007 02:16:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Jan 2007 02:16:15 -0000
Received: (qmail 48613 invoked by uid 500); 29 Jan 2007 02:16:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47653 invoked by uid 500); 29 Jan 2007 02:16:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47642 invoked by uid 99); 29 Jan 2007 02:16:14 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 28 Jan 2007 18:16:14 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [209.73.178.152] (HELO web60424.mail.yahoo.com) (209.73.178.152)
    by apache.org (qpsmtpd/0.29) with SMTP; Sun, 28 Jan 2007 18:16:03 -0800
Received: (qmail 28960 invoked by uid 60001); 29 Jan 2007 02:15:41 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=EtYPYPS8txl11sLYS/A6waxtfpWrVDVVOkXgroaWysK0J4uFfXswB0GneMFTgdTlQPGNOJiAFZJ2gzt2NWvI/XqJbpE9D/mXNQXT/ufCZHg7nn+jib+Cr3aLprcHz+4dKrU4mpC2z3wkPAJauACD3R/ddDy9DzFpqe+tzZZQIjI=;
X-YMail-OSG: .vQYY6AVM1miiWyyf04RVxXCPKwT5JG9qxCu.v2pkcHfMxlI2lYwLnWALZuKOXbDULTZK30IkdS_w4h6pERNZrZU.V9UukUEQxX8_xwsYIoaptz8xwIs_2nwE7vg.XUDBDRNVqUPj.H65p5KrZDtuPNZGw--
Received: from [155.69.9.15] by web60424.mail.yahoo.com via HTTP; Sun, 28 Jan 2007 18:15:41 PST
Date: Sun, 28 Jan 2007 18:15:41 -0800 (PST)
From: maureen tanuwidjaja <autumn_musique@yahoo.com>
Subject: printout of the stack trace while failing to indexing the 190,000th ocument
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-1528244292-1170036941=:27817"
Content-Transfer-Encoding: 8bit
Message-ID: <752938.27817.qm@web60424.mail.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

--0-1528244292-1170036941=:27817
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit

OK,This is the printout of the stack trace while failing to indexing the 190,000th ocument
  
  Indexing C:\sweetpea\wikipedia_xmlfiles\part-180000\491886.xml
  Indexing C:\sweetpea\wikipedia_xmlfiles\part-180000\491887.xml
  Indexing C:\sweetpea\wikipedia_xmlfiles\part-180000\491891.xml
  Indexing C:\sweetpea\wikipedia_xmlfiles\part-180000\491893.xml
  Indexing C:\sweetpea\wikipedia_xmlfiles\part-180000\491896.xml
  java.io.IOException: There is not enough space on the disk
      at java.io.RandomAccessFile.writeBytes(Native Method)
      at java.io.RandomAccessFile.write(Unknown Source)
      at org.apache.lucene.store.FSIndexOutput.flushBuffer(FSDirectory.java:583)
      at org.apache.lucene.store.BufferedIndexOutput.flush(BufferedIndexOutput.java:85)
      at org.apache.lucene.store.BufferedIndexOutput.writeBytes(BufferedIndexOutput.java:75)
      at org.apache.lucene.index.CompoundFileWriter.copyFile(CompoundFileWriter.java:212)
      at org.apache.lucene.index.CompoundFileWriter.close(CompoundFileWriter.java:169)
      at org.apache.lucene.index.SegmentMerger.createCompoundFile(SegmentMerger.java:153)
      at org.apache.lucene.index.IndexWriter.mergeSegments(IndexWriter.java:1447)
      at org.apache.lucene.index.IndexWriter.maybeMergeSegments(IndexWriter.java:1286)
      at org.apache.lucene.index.IndexWriter.flushRamSegments(IndexWriter.java:1232)
      at org.apache.lucene.index.IndexWriter.maybeFlushRamSegments(IndexWriter.java:1224)
      at org.apache.lucene.index.IndexWriter.addDocument(IndexWriter.java:652)
      at org.apache.lucene.index.IndexWriter.addDocument(IndexWriter.java:631)
      at edu.ntu.ce.maureen.index.DocumentIndexer.addDocToIndex(DocumentIndexer.java:39)
      at edu.ntu.ce.maureen.index.DOMTraversal.fileTraverse(DOMTraversal.java:123)
      at edu.ntu.ce.maureen.index.DOMTraversal.fileTraverse(DOMTraversal.java:106)
      at edu.ntu.ce.maureen.index.DOMTraversal.main(DOMTraversal.java:133)
  java.io.IOException: There is not enough space on the disk
  
  Can anyone help?
  
  Thanks and Regards,
  Maureen
  
 
---------------------------------
Never miss an email again!
Yahoo! Toolbar alerts you the instant new Mail arrives. Check it out.
--0-1528244292-1170036941=:27817--

From java-user-return-25780-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 29 04:04:39 2007
Return-Path: <java-user-return-25780-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75583 invoked from network); 29 Jan 2007 04:04:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Jan 2007 04:04:39 -0000
Received: (qmail 34824 invoked by uid 500); 29 Jan 2007 04:04:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34792 invoked by uid 500); 29 Jan 2007 04:04:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34781 invoked by uid 99); 29 Jan 2007 04:04:39 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 28 Jan 2007 20:04:39 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 28 Jan 2007 20:04:29 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 9C00C30EFC17; Sun, 28 Jan 2007 23:04:08 -0500 (EST)
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on javelina
X-Spam-Level: 
Received: from [10.0.1.3] (va-71-53-203-135.dhcp.embarqhsd.net [71.53.203.135])
	by ehatchersolutions.com (Postfix) with ESMTP id 0763B30EFC16
	for <java-user@lucene.apache.org>; Sun, 28 Jan 2007 23:03:59 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <277329.29640.qm@web50302.mail.yahoo.com>
References: <277329.29640.qm@web50302.mail.yahoo.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <E20A287C-8B57-47AD-92BB-A253B6FDF906@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: How many documents in the biggest Lucene index to date?
Date: Sun, 28 Jan 2007 23:03:57 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=0.2 required=5.0 tests=AWL,BAYES_00,
	RCVD_IN_NJABL_DUL,RCVD_IN_SORBS_DUL autolearn=no version=3.1.1


On Jan 26, 2007, at 2:30 PM, Otis Gospodnetic wrote:
> It really all depends....right Erik?

Ha!  Looks like I've earned a tag line around here, eh?!  :)

> On the hardware you are using, complexity of queries, query  
> concurrency, query latency you are willing to live with, the size  
> of the index, etc.  A few million sounds small even for average/ 
> cheap hw.  I have several multi-million document indices that are  
> constantly hammered over on Simpy.com and we use Lucene at  
> Technorati to index "the blogosphere", so you can imagine those  
> numbers.  To handle that much data things needs to be heavily  
> distributed, of course.

Admittedly I've not run indexes anywhere close to the numbers folks  
have already mentioned on this thread already.   I'm about to build  
my largest index to date, at ~3.7M documents.

	Erik


>
> Otis
>
> ----- Original Message ----
> From: Bill Taylor <wataylor@as-st.com>
> To: java-user@lucene.apache.org
> Sent: Friday, January 26, 2007 12:45:43 AM
> Subject: How many documents in the biggest Lucene index to date?
>
> I have used Lucene to index a small collection - only a few hundred
> documents.  I have a potential client who wants to index a collection
> which will start at about a million documents and could easily grow
> to two million.
>
> Has anyone used Lucene with an index that large?
>
> Thank you very much.
>
> Bill Taylor
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25781-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 29 04:05:27 2007
Return-Path: <java-user-return-25781-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75812 invoked from network); 29 Jan 2007 04:05:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Jan 2007 04:05:27 -0000
Received: (qmail 37096 invoked by uid 500); 29 Jan 2007 04:05:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37065 invoked by uid 500); 29 Jan 2007 04:05:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37054 invoked by uid 99); 29 Jan 2007 04:05:26 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 28 Jan 2007 20:05:26 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 28 Jan 2007 20:05:16 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 3BEDA30EFC17; Sun, 28 Jan 2007 23:04:56 -0500 (EST)
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on javelina
X-Spam-Level: 
Received: from [10.0.1.3] (va-71-53-203-135.dhcp.embarqhsd.net [71.53.203.135])
	by ehatchersolutions.com (Postfix) with ESMTP id 11B8330EFC16
	for <java-user@lucene.apache.org>; Sun, 28 Jan 2007 23:04:53 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <752938.27817.qm@web60424.mail.yahoo.com>
References: <752938.27817.qm@web60424.mail.yahoo.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <EF49E57C-12EF-43FD-800F-5365A3EC9E2C@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: printout of the stack trace while failing to indexing the 190,000th ocument
Date: Sun, 28 Jan 2007 23:04:47 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=0.2 required=5.0 tests=AWL,BAYES_00,
	RCVD_IN_NJABL_DUL,RCVD_IN_SORBS_DUL autolearn=no version=3.1.1


On Jan 28, 2007, at 9:15 PM, maureen tanuwidjaja wrote:
> OK,This is the printout of the stack trace while failing to  
> indexing the 190,000th ocument
>
>   java.io.IOException: There is not enough space on the disk
>
>   Can anyone help?

Ummm.... get more disk space?!

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25782-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 29 04:24:06 2007
Return-Path: <java-user-return-25782-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78163 invoked from network); 29 Jan 2007 04:24:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Jan 2007 04:24:05 -0000
Received: (qmail 52795 invoked by uid 500); 29 Jan 2007 04:24:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52762 invoked by uid 500); 29 Jan 2007 04:24:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52751 invoked by uid 99); 29 Jan 2007 04:24:05 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 28 Jan 2007 20:24:05 -0800
X-ASF-Spam-Status: No, hits=3.6 required=10.0
	tests=HTML_IMAGE_ONLY_12,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [209.73.178.151] (HELO web60423.mail.yahoo.com) (209.73.178.151)
    by apache.org (qpsmtpd/0.29) with SMTP; Sun, 28 Jan 2007 20:23:55 -0800
Received: (qmail 65549 invoked by uid 60001); 29 Jan 2007 04:23:34 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=ggynJl5Qg8aSZPvYy0w2oyXch6Ijt7zE7icKlDlw4duhUHl7c+qMgW/ydvHBqJ6vqyxKSp1STemp0FIn8pcgnMeSsKCtVPgbgbn+avv9O1SXDmV3eZnY+UPnv6At4x8aBNDFonAfvpchEvgmo3C8kdpgr7C6GDUibrk/hRkpkPU=;
X-YMail-OSG: L8nKEDsVM1nGVBR5_ygpmDSuUk9nTiWfbNVhmfGLz0wgdJYHMRw1MobfTMYXIKN2GMlzHVrk8CSRu7OlHqM0O1KHLIqRsrtHWMzVKUF7uxizF3zcUoAnv65QYO802dcK7k5PdvY54Ougi.YLp3KKzy174rBPXAekgJxeykDZ.MTs1g--
Received: from [155.69.3.236] by web60423.mail.yahoo.com via HTTP; Sun, 28 Jan 2007 20:23:34 PST
Date: Sun, 28 Jan 2007 20:23:34 -0800 (PST)
From: maureen tanuwidjaja <autumn_musique@yahoo.com>
Subject: Re: printout of the stack trace while failing to indexing the 190,000th ocument
To: java-user@lucene.apache.org
In-Reply-To: <EF49E57C-12EF-43FD-800F-5365A3EC9E2C@ehatchersolutions.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-525314344-1170044614=:65509"
Content-Transfer-Encoding: 8bit
Message-ID: <800937.65509.qm@web60423.mail.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

--0-525314344-1170044614=:65509
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit

I think so ...btw may I ask the opinion, will it be useful to optimize let say every 50,000-60,000 documents? I have total of 660,000 docs...

Erik Hatcher <erik@ehatchersolutions.com> wrote:  
On Jan 28, 2007, at 9:15 PM, maureen tanuwidjaja wrote:
> OK,This is the printout of the stack trace while failing to 
> indexing the 190,000th ocument
>
> java.io.IOException: There is not enough space on the disk
>
> Can anyone help?

Ummm.... get more disk space?!

Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



 
---------------------------------
Everyone is raving about the all-new Yahoo! Mail beta.
--0-525314344-1170044614=:65509--

From java-user-return-25783-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 29 04:28:00 2007
Return-Path: <java-user-return-25783-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78648 invoked from network); 29 Jan 2007 04:27:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Jan 2007 04:27:59 -0000
Received: (qmail 55561 invoked by uid 500); 29 Jan 2007 04:28:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55534 invoked by uid 500); 29 Jan 2007 04:28:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55523 invoked by uid 99); 29 Jan 2007 04:28:00 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 28 Jan 2007 20:28:00 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 28 Jan 2007 20:27:50 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 4888730EFC17; Sun, 28 Jan 2007 23:27:29 -0500 (EST)
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on javelina
X-Spam-Level: 
Received: from [10.0.1.3] (va-71-53-203-135.dhcp.embarqhsd.net [71.53.203.135])
	by ehatchersolutions.com (Postfix) with ESMTP id 5D5BC30EFC16
	for <java-user@lucene.apache.org>; Sun, 28 Jan 2007 23:27:27 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <AFF59E58-04E0-4736-90C5-1A0B62F3A41A@as-st.com>
References: <AFF59E58-04E0-4736-90C5-1A0B62F3A41A@as-st.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <0EAE038B-0A1C-468C-B9EB-262551200119@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Is the new version of the Lucene book available in any form?
Date: Sun, 28 Jan 2007 23:27:23 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=0.2 required=5.0 tests=AWL,BAYES_00,
	RCVD_IN_NJABL_DUL,RCVD_IN_SORBS_DUL autolearn=no version=3.1.1


On Jan 26, 2007, at 1:56 PM, Bill Taylor wrote:
> I notice that the Lucene book offered by Amazon was published in  
> 2004.  I saw some mail on the subject of a new edition.
>
> Is the new edition available in any form?
>
> I promise to buy the new edition as soon as it comes out even if I  
> get some of the material early.  I wrote a book which was published  
> by the MIT Press; I know how long it takes to get a book out.

This is a thread more suited to the Manning forum for LIA:  <http:// 
www.manning-sandbox.com/thread.jspa?forumID=152&threadID=17520>

In short, LIA2 will live, that much is for sure.

> Failing that, how should I learn more about the internals of Lucene?

Ask here.  Delve into the source code.  Study the unit tests.

>   My client has a large code base in C++.  The system has its own  
> index which is not all that fast.  One way to improve performance  
> would be to convert to the C version of Lucene.

Is HTTP communication viable for your situation?  If so, give Solr a  
shot.  C -> HTTP -> Solr -> Lucene and back won't be "not all that  
fast".  In fact, it'll be very fast.

	Erik




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25784-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 29 04:32:55 2007
Return-Path: <java-user-return-25784-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79387 invoked from network); 29 Jan 2007 04:32:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Jan 2007 04:32:54 -0000
Received: (qmail 61018 invoked by uid 500); 29 Jan 2007 04:32:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60795 invoked by uid 500); 29 Jan 2007 04:32:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60784 invoked by uid 99); 29 Jan 2007 04:32:55 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 28 Jan 2007 20:32:55 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 28 Jan 2007 20:32:45 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id D393630EFC16; Sun, 28 Jan 2007 23:32:24 -0500 (EST)
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on javelina
X-Spam-Level: 
Received: from [10.0.1.3] (va-71-53-203-135.dhcp.embarqhsd.net [71.53.203.135])
	by ehatchersolutions.com (Postfix) with ESMTP id 8409830EFC16
	for <java-user@lucene.apache.org>; Sun, 28 Jan 2007 23:32:17 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <Pine.LNX.4.58.0701261427080.27125@hal.rescomp.berkeley.edu>
References: <603870.86117.qm@web50307.mail.yahoo.com> <Pine.LNX.4.58.0701261427080.27125@hal.rescomp.berkeley.edu>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <9BFBA682-37C3-4405-BB40-6C8DAF20415E@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Is the new version of the Lucene book available in any form?
Date: Sun, 28 Jan 2007 23:32:16 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=0.2 required=5.0 tests=AWL,BAYES_00,
	RCVD_IN_NJABL_DUL,RCVD_IN_SORBS_DUL autolearn=no version=3.1.1


On Jan 26, 2007, at 5:28 PM, Chris Hostetter wrote:

>
> : LIA2 will happen, but Lucene is undergoing a lot of changes, so  
> Erik and
> : I are going to wait a little more for development to calm down
> : (utopia?).
>
> you're waiting for Lucene development to calm down? ... that could  
> be a
> long wait.

We're not exactly waiting.  I'm working night and day on Solr + Ruby  
(solrb and Flare) for various projects.

A book project, especially a 2nd edition, is an incredible  
undertaking and commitment.  It is an undertaking Otis and I plan on  
carving out time for in the near future, but predicting exactly when  
that will be is not worth speculating.  Rest assured that this list  
will be kept well informed of LIA2's progress.  java-user is the  
audience to which we most cater.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25785-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 29 04:40:45 2007
Return-Path: <java-user-return-25785-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81204 invoked from network); 29 Jan 2007 04:40:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Jan 2007 04:40:44 -0000
Received: (qmail 66898 invoked by uid 500); 29 Jan 2007 04:40:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66863 invoked by uid 500); 29 Jan 2007 04:40:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66852 invoked by uid 99); 29 Jan 2007 04:40:44 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 28 Jan 2007 20:40:44 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 28 Jan 2007 20:40:35 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id AEFF830EFC17; Sun, 28 Jan 2007 23:40:14 -0500 (EST)
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on javelina
X-Spam-Level: 
Received: from [10.0.1.3] (va-71-53-203-135.dhcp.embarqhsd.net [71.53.203.135])
	by ehatchersolutions.com (Postfix) with ESMTP id 0CA0E30EFC16
	for <java-user@lucene.apache.org>; Sun, 28 Jan 2007 23:40:11 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <800937.65509.qm@web60423.mail.yahoo.com>
References: <800937.65509.qm@web60423.mail.yahoo.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <B45E12FD-78AD-4553-BDBE-07FBEA2F8559@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: printout of the stack trace while failing to indexing the 190,000th ocument
Date: Sun, 28 Jan 2007 23:40:10 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=0.2 required=5.0 tests=AWL,BAYES_00,
	RCVD_IN_NJABL_DUL,RCVD_IN_SORBS_DUL autolearn=no version=3.1.1


On Jan 28, 2007, at 11:23 PM, maureen tanuwidjaja wrote:
> I think so ...btw may I ask the opinion, will it be useful to  
> optimize let say every 50,000-60,000 documents? I have total of  
> 660,000 docs...

Lucene automatically merges segments periodically during large  
indexing runs.  Look at the parameters available on IndexWriter, and  
research the best practices mentioned about those settings in this  
forum archives, the Lucene wiki, and other resources (such as  
articles and "Lucene in Action").  With sufficient disk space you'll  
be able to tune those settings to keep the index as unsegmented as  
you like as you index, and then optimize after the batch is completed  
again for good measure.

	Erik


>
> Erik Hatcher <erik@ehatchersolutions.com> wrote:
> On Jan 28, 2007, at 9:15 PM, maureen tanuwidjaja wrote:
>> OK,This is the printout of the stack trace while failing to
>> indexing the 190,000th ocument
>>
>> java.io.IOException: There is not enough space on the disk
>>
>> Can anyone help?
>
> Ummm.... get more disk space?!
>
> Erik
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>
> ---------------------------------
> Everyone is raving about the all-new Yahoo! Mail beta.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25786-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 29 09:17:00 2007
Return-Path: <java-user-return-25786-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45057 invoked from network); 29 Jan 2007 09:16:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Jan 2007 09:16:59 -0000
Received: (qmail 66806 invoked by uid 500); 29 Jan 2007 09:16:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66529 invoked by uid 500); 29 Jan 2007 09:16:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66518 invoked by uid 99); 29 Jan 2007 09:16:56 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Jan 2007 01:16:56 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,UNPARSEABLE_RELAY
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [136.173.162.228] (HELO SMTP35.europarl.europa.eu) (136.173.162.228)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Jan 2007 01:16:45 -0800
Received: from EMAILBRUSV42.ep.parl.union.eu (unverified) by SMTP35.europarl.europa.eu
 (European Parliament) with ESMTP id <T7d79c2c6a088ada2e41e90@SMTP35.europarl.europa.eu> for <java-user@lucene.apache.org>;
 Mon, 29 Jan 2007 10:15:19 +0100
Received: from epbrusex02.ep.parl.union.eu ([136.173.156.27]) by EMAILBRUSV42.ep.parl.union.eu with Microsoft SMTPSVC(6.0.3790.1830);
	 Mon, 29 Jan 2007 10:16:23 +0100
Received: from EPLUXSEX01.ep.parl.union.eu ([136.173.56.16]) by epbrusex02.ep.parl.union.eu with Microsoft SMTPSVC(5.0.2195.6713);
	 Mon, 29 Jan 2007 10:16:22 +0100
X-MimeOLE: Produced By Microsoft Exchange V6.0.6603.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C74386.24D7A520"
Subject: Index creation
Date: Mon, 29 Jan 2007 10:16:22 +0100
Message-ID: <CA7398CB8402E445AABF081C51E43ACB08F3D1@EPLUXSEX01.ep.parl.union.eu>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Index creation
Thread-Index: AcdDhiR4qEnur0/zT3SNeJCmTUI9gw==
From: "WATHELET Thomas" <thomas.wathelet@europarl.europa.eu>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 29 Jan 2007 09:16:22.0700 (UTC) FILETIME=[24E4C6C0:01C74386]
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01C74386.24D7A520
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

How could I optimize my index creation?
        // setUseCompoundFile(?);
        // setMaxBufferedDocs(?);
        // setMergeFactor(?);
=20
How could I reduce the disk access because I work with more than 1000000
documents?
Thanks

------_=_NextPart_001_01C74386.24D7A520--

From java-user-return-25787-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 29 09:44:03 2007
Return-Path: <java-user-return-25787-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56995 invoked from network); 29 Jan 2007 09:44:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Jan 2007 09:44:02 -0000
Received: (qmail 3313 invoked by uid 500); 29 Jan 2007 09:43:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3284 invoked by uid 500); 29 Jan 2007 09:43:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3262 invoked by uid 99); 29 Jan 2007 09:43:57 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Jan 2007 01:43:57 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,MIME_BOUND_NEXTPART
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [194.154.194.71] (HELO srs2na11.bgl.lu) (194.154.194.71)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 29 Jan 2007 01:43:48 -0800
Received: from spmwf02l.luinternal.fortis.bank (unverified) by srs2na12.domain
 (Content Technologies SMTPRS 4.2.10) with ESMTP id <T7d79e02fbd0aaf150a159@srs2na12.domain> for <java-user@lucene.apache.org>;
 Mon, 29 Jan 2007 10:47:27 +0100
Received: from SPMWB02L.luinternal.fortis.bank ([10.172.252.140]) by spmwf02l.luinternal.fortis.bank with Microsoft SMTPSVC(6.0.3790.0);
	 Mon, 29 Jan 2007 10:43:14 +0100
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/mixed;
	boundary="----=_NextPartTM-000-afbe64f1-631e-45b8-b622-275ab49abcad"
X-MimeOLE: Produced By Microsoft Exchange V6.5
Subject: Score
Date: Mon, 29 Jan 2007 10:43:14 +0100
Message-ID: <EBC8F228BDB35A4394D0BE53DA25248808A9A29C@SPMWB02L.luinternal.fortis.bank>
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
Thread-Topic: Score
Thread-Index: AcdDieVzMPhyY4OSRsaBmZfo59I+tg==
From: "DECAFFMEYER MATHIEU" <MATHIEU.DECAFFMAYER@fortis.lu>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 29 Jan 2007 09:43:14.0569 (UTC) FILETIME=[E5A47790:01C74389]
X-Virus-Checked: Checked by ClamAV on apache.org

------=_NextPartTM-000-afbe64f1-631e-45b8-b622-275ab49abcad
Content-Type: multipart/alternative; 
	boundary="----_=_NextPart_001_01C74389.E562067E"

------_=_NextPart_001_01C74389.E562067E
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Hi,

I have one index with one document with title "Logistics"

I have a second index with the same document with title "Logistics" and
other documents (some contains the word "Logistics" as well)

If I execute a search title:Logistics in the first index, I have 0.31
for the document with title "Logistics"
with the second index I have 1 as score for the document with title
"Logistics".

Why is there this difference ?

Thank u.


=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D
Internet communications are not secure and therefore Fortis Banque Luxembou=
rg S.A. does not accept legal responsibility for the contents of this messa=
ge. The information contained in this e-mail is confidential and may be leg=
ally privileged. It is intended solely for the addressee. If you are not th=
e intended recipient, any disclosure, copying, distribution or any action t=
aken or omitted to be taken in reliance on it, is prohibited and may be unl=
awful. Nothing in the message is capable or intended to create any legally =
binding obligations on either party and it is not intended to provide legal=
 advice.
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D


------_=_NextPart_001_01C74389.E562067E
Content-Type: text/html; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
<HEAD>
<META HTTP-EQUIV=3D"Content-Type" CONTENT=3D"text/html; charset=3Dus-ascii">
<META NAME=3D"Generator" CONTENT=3D"MS Exchange Server version 6.5.7651.52">
<TITLE>Score</TITLE>
</HEAD>
<BODY>
<!-- Converted from text/rtf format -->

<P><FONT SIZE=3D2 FACE=3D"Arial">Hi,</FONT>
</P>

<P><FONT SIZE=3D2 FACE=3D"Arial">I have one index with one document with ti=
tle &quot;Logistics&quot;</FONT>
</P>

<P><FONT SIZE=3D2 FACE=3D"Arial">I have a second index with the same docume=
nt with title &quot;Logistics&quot; and other documents (some contains the =
word &quot;Logistics&quot; as well)</FONT></P>

<P><FONT SIZE=3D2 FACE=3D"Arial">If I execute a search title:Logistics in t=
he first index, I have 0.31 for the document with title &quot;Logistics&quo=
t;</FONT>

<BR><FONT SIZE=3D2 FACE=3D"Arial">with the second index I have 1 as score f=
or the document with title &quot;Logistics&quot;.</FONT>
</P>

<P><FONT SIZE=3D2 FACE=3D"Arial">Why is there this difference ?</FONT>
</P>

<P><FONT SIZE=3D2 FACE=3D"Arial">Thank u.<B></B></FONT><B></B><B><SPAN LANG=
=3D"fr"></SPAN></B>
</P>

<CODE><FONT SIZE=3D3><BR>
<BR>
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D<BR>
Internet communications are not secure and therefore Fortis Banque Luxembou=
rg S.A. does not accept legal responsibility for the contents of this messa=
ge. The information contained in this e-mail is confidential and may be leg=
ally privileged. It is intended solely for the addressee. If you are not th=
e intended recipient, any disclosure, copying, distribution or any action t=
aken or omitted to be taken in reliance on it, is prohibited and may be unl=
awful. Nothing in the message is capable or intended to create any legally =
binding obligations on either party and it is not intended to provide legal=
 advice.<BR>
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D<BR>
</FONT></CODE>
</BODY>
</HTML>
------_=_NextPart_001_01C74389.E562067E--


------=_NextPartTM-000-afbe64f1-631e-45b8-b622-275ab49abcad
Content-Type: text/plain; charset=us-ascii

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org
------=_NextPartTM-000-afbe64f1-631e-45b8-b622-275ab49abcad--


From java-user-return-25788-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 29 09:50:48 2007
Return-Path: <java-user-return-25788-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59592 invoked from network); 29 Jan 2007 09:50:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Jan 2007 09:50:47 -0000
Received: (qmail 10945 invoked by uid 500); 29 Jan 2007 09:50:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10916 invoked by uid 500); 29 Jan 2007 09:50:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10905 invoked by uid 99); 29 Jan 2007 09:50:47 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Jan 2007 01:50:47 -0800
X-ASF-Spam-Status: No, hits=2.9 required=10.0
	tests=HTML_10_20,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of mskumar@gmail.com designates 64.233.166.177 as permitted sender)
Received: from [64.233.166.177] (HELO py-out-1112.google.com) (64.233.166.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Jan 2007 01:50:28 -0800
Received: by py-out-1112.google.com with SMTP id a25so784834pyi
        for <java-user@lucene.apache.org>; Mon, 29 Jan 2007 01:50:07 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=OGeNXSXiHMH7wyPO5+o7PmRAhv6Gm+4t4N+WZ4CB9GI0b0W4dyrmx9aUSRpN0gaD70rvWFcg8O4/phDyTCzflY5lVuQLn44dXHVbPE5QyiqZSIbIx65HkY2rigleGjuHdnXrwF35i+h4VZ7jh0Lg+n5zMpSwOk7b4K8fsEiPLZ4=
Received: by 10.35.40.10 with SMTP id s10mr12429665pyj.1170064206842;
        Mon, 29 Jan 2007 01:50:06 -0800 (PST)
Received: by 10.35.74.3 with HTTP; Mon, 29 Jan 2007 01:50:06 -0800 (PST)
Message-ID: <f514763f0701290150x24fa23f0t923a62f8088ecbfb@mail.gmail.com>
Date: Mon, 29 Jan 2007 15:20:06 +0530
From: Saravana <mskumar@gmail.com>
To: java-user@lucene.apache.org
Subject: lucene for syslogs
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_45526_22858720.1170064206808"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_45526_22858720.1170064206808
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi,

Did anybody use lucene to index syslogs? What is the maximum indexing rate
that we can get to store a 200 bytes document with 14 fields?

thanks,
MSK

-- 
Every day brings us a sea of opportunities

------=_Part_45526_22858720.1170064206808--

From java-user-return-25789-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 29 10:11:23 2007
Return-Path: <java-user-return-25789-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 66535 invoked from network); 29 Jan 2007 10:11:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Jan 2007 10:11:23 -0000
Received: (qmail 37680 invoked by uid 500); 29 Jan 2007 10:11:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37654 invoked by uid 500); 29 Jan 2007 10:11:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37643 invoked by uid 99); 29 Jan 2007 10:11:21 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Jan 2007 02:11:21 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Jan 2007 02:11:11 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 3013430EFC17; Mon, 29 Jan 2007 05:10:51 -0500 (EST)
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on javelina
X-Spam-Level: 
Received: from [10.0.1.3] (va-71-53-203-135.dhcp.embarqhsd.net [71.53.203.135])
	by ehatchersolutions.com (Postfix) with ESMTP id 6FF2C30EFC16
	for <java-user@lucene.apache.org>; Mon, 29 Jan 2007 05:10:36 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <EBC8F228BDB35A4394D0BE53DA25248808A9A29C@SPMWB02L.luinternal.fortis.bank>
References: <EBC8F228BDB35A4394D0BE53DA25248808A9A29C@SPMWB02L.luinternal.fortis.bank>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <005DA244-36E9-41AE-9AB2-CFDD9F14EB82@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Score
Date: Mon, 29 Jan 2007 05:10:34 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=0.2 required=5.0 tests=AWL,BAYES_00,
	RCVD_IN_NJABL_DUL,RCVD_IN_SORBS_DUL autolearn=no version=3.1.1

Look at the details provided by IndexSearcher.explain().  That'll  
tell you why.

	Erik


On Jan 29, 2007, at 4:43 AM, DECAFFMEYER MATHIEU wrote:

> Hi,
>
> I have one index with one document with title "Logistics"
>
> I have a second index with the same document with title "Logistics"  
> and other documents (some contains the word "Logistics" as well)
>
> If I execute a search title:Logistics in the first index, I have  
> 0.31 for the document with title "Logistics"
> with the second index I have 1 as score for the document with title  
> "Logistics".
>
> Why is there this difference ?
>
> Thank u.
>
>
>
> ============================================
> Internet communications are not secure and therefore Fortis Banque  
> Luxembourg S.A. does not accept legal responsibility for the  
> contents of this message. The information contained in this e-mail  
> is confidential and may be legally privileged. It is intended  
> solely for the addressee. If you are not the intended recipient,  
> any disclosure, copying, distribution or any action taken or  
> omitted to be taken in reliance on it, is prohibited and may be  
> unlawful. Nothing in the message is capable or intended to create  
> any legally binding obligations on either party and it is not  
> intended to provide legal advice.
> ============================================
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25790-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 29 11:09:34 2007
Return-Path: <java-user-return-25790-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78003 invoked from network); 29 Jan 2007 11:09:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Jan 2007 11:09:32 -0000
Received: (qmail 98292 invoked by uid 500); 29 Jan 2007 11:09:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98245 invoked by uid 500); 29 Jan 2007 11:09:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98220 invoked by uid 99); 29 Jan 2007 11:09:27 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Jan 2007 03:09:27 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,MIME_BOUND_NEXTPART
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [194.154.194.71] (HELO srs2na11.bgl.lu) (194.154.194.71)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 29 Jan 2007 03:09:18 -0800
Received: from spmwf02l.luinternal.fortis.bank (unverified) by srs2na12.domain
 (Content Technologies SMTPRS 4.2.10) with ESMTP id <T7d7a2e7a960aaf150a159@srs2na12.domain> for <java-user@lucene.apache.org>;
 Mon, 29 Jan 2007 12:12:58 +0100
Received: from SPMWB02L.luinternal.fortis.bank ([10.172.252.140]) by spmwf02l.luinternal.fortis.bank with Microsoft SMTPSVC(6.0.3790.0);
	 Mon, 29 Jan 2007 12:08:45 +0100
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/mixed;
	boundary="----=_NextPartTM-000-6560d6af-a30a-475d-b13b-bb840bcb5a6c"
X-MimeOLE: Produced By Microsoft Exchange V6.5
Subject: Merge Hits
Date: Mon, 29 Jan 2007 12:08:44 +0100
Message-ID: <EBC8F228BDB35A4394D0BE53DA25248808A9A2A2@SPMWB02L.luinternal.fortis.bank>
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
Thread-Topic: Merge Hits
Thread-Index: AcdDldePUex3vyRbRk2GiWR9z3/Pdw==
From: "DECAFFMEYER MATHIEU" <MATHIEU.DECAFFMAYER@fortis.lu>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 29 Jan 2007 11:08:45.0547 (UTC) FILETIME=[D7F193B0:01C74395]
X-Virus-Checked: Checked by ClamAV on apache.org

------=_NextPartTM-000-6560d6af-a30a-475d-b13b-bb840bcb5a6c
Content-Type: multipart/alternative; 
	boundary="----_=_NextPart_001_01C74395.D7662945"

------_=_NextPart_001_01C74395.D7662945
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Hi, I have a table of objects Hit,
I want to merge the different Hits objects of the table to have one Hits
object.

Is this possible ?

 Thank u for any help !

__________________________________




=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D
Internet communications are not secure and therefore Fortis Banque Luxembou=
rg S.A. does not accept legal responsibility for the contents of this messa=
ge. The information contained in this e-mail is confidential and may be leg=
ally privileged. It is intended solely for the addressee. If you are not th=
e intended recipient, any disclosure, copying, distribution or any action t=
aken or omitted to be taken in reliance on it, is prohibited and may be unl=
awful. Nothing in the message is capable or intended to create any legally =
binding obligations on either party and it is not intended to provide legal=
 advice.
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D


------_=_NextPart_001_01C74395.D7662945
Content-Type: text/html; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
<HEAD>
<META HTTP-EQUIV=3D"Content-Type" CONTENT=3D"text/html; charset=3Dus-ascii">
<META NAME=3D"Generator" CONTENT=3D"MS Exchange Server version 6.5.7651.52">
<TITLE>Merge Hits</TITLE>
</HEAD>
<BODY>
<!-- Converted from text/rtf format -->

<P><FONT SIZE=3D2 FACE=3D"Arial">Hi, I have a table of objects Hit,</FONT>

<BR><FONT SIZE=3D2 FACE=3D"Arial">I want to merge the different Hits object=
s of the table to have one Hits object.</FONT>
</P>

<P><FONT SIZE=3D2 FACE=3D"Arial">Is this possible ?</FONT>
</P>

<P><FONT SIZE=3D2 FACE=3D"Arial">&nbsp;Thank u for any help !</FONT>
</P>

<P><B><SPAN LANG=3D"fr"><WBR><WBR><WBR><WBR><WBR><WBR><WBR><WBR><WBR><WBR><=
WBR><WBR><WBR><WBR><WBR><WBR><FONT COLOR=3D"#006699" SIZE=3D1 FACE=3D"Verda=
na">__________________________________</FONT></SPAN></B>
</P>
<BR>

<CODE><FONT SIZE=3D3><BR>
<BR>
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D<BR>
Internet communications are not secure and therefore Fortis Banque Luxembou=
rg S.A. does not accept legal responsibility for the contents of this messa=
ge. The information contained in this e-mail is confidential and may be leg=
ally privileged. It is intended solely for the addressee. If you are not th=
e intended recipient, any disclosure, copying, distribution or any action t=
aken or omitted to be taken in reliance on it, is prohibited and may be unl=
awful. Nothing in the message is capable or intended to create any legally =
binding obligations on either party and it is not intended to provide legal=
 advice.<BR>
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D<BR>
</FONT></CODE>
</BODY>
</HTML>
------_=_NextPart_001_01C74395.D7662945--


------=_NextPartTM-000-6560d6af-a30a-475d-b13b-bb840bcb5a6c
Content-Type: text/plain; charset=us-ascii

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org
------=_NextPartTM-000-6560d6af-a30a-475d-b13b-bb840bcb5a6c--


From java-user-return-25791-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 29 11:16:04 2007
Return-Path: <java-user-return-25791-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80668 invoked from network); 29 Jan 2007 11:16:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Jan 2007 11:16:03 -0000
Received: (qmail 11315 invoked by uid 500); 29 Jan 2007 11:15:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11283 invoked by uid 500); 29 Jan 2007 11:15:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11271 invoked by uid 99); 29 Jan 2007 11:15:58 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Jan 2007 03:15:58 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [84.96.21.10] (HELO trinity.anyware-tech.com) (84.96.21.10)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Jan 2007 03:15:50 -0800
Received: from localhost (localhost [127.0.0.1])
	by trinity.anyware-tech.com (Postfix) with ESMTP id 5CB0A40A28F
	for <java-user@lucene.apache.org>; Mon, 29 Jan 2007 12:15:28 +0100 (CET)
Received: from trinity.anyware-tech.com ([127.0.0.1])
	by localhost (trinity.anyware-tech.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id 11663-01 for <java-user@lucene.apache.org>;
	Mon, 29 Jan 2007 12:15:02 +0100 (CET)
Received: from bumbo.anyware (bumbo.anyware [10.0.3.29])
	by trinity.anyware-tech.com (Postfix) with ESMTP id 427AC40A28D
	for <java-user@lucene.apache.org>; Mon, 29 Jan 2007 12:15:01 +0100 (CET)
From: Nicolas =?utf-8?q?Lalev=C3=A9e?= <nicolas.lalevee@anyware-tech.com>
Organization: Anyware Technologies
To: java-user@lucene.apache.org
Subject: Re: Merge Hits
Date: Mon, 29 Jan 2007 12:14:59 +0100
User-Agent: KMail/1.9.5
References: <EBC8F228BDB35A4394D0BE53DA25248808A9A2A2@SPMWB02L.luinternal.fortis.bank>
In-Reply-To: <EBC8F228BDB35A4394D0BE53DA25248808A9A2A2@SPMWB02L.luinternal.fortis.bank>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="utf-8"
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
Message-Id: <200701291215.00127.nicolas.lalevee@anyware-tech.com>
X-Virus-Scanned: Debian amavisd-new at anyware-tech.com
X-Virus-Checked: Checked by ClamAV on apache.org

Le Lundi 29 Janvier 2007 12:08, DECAFFMEYER MATHIEU a =C3=A9crit=C2=A0:
> Hi, I have a table of objects Hit,
> I want to merge the different Hits objects of the table to have one Hits
> object.
>
> Is this possible ?

The easiest way is to merge the queries which produces thoses different hit=
s.=20
You should look at BooleanQuery.

=2D-=20
Nicolas LALEV=C3=89E
Solutions & Technologies
ANYWARE TECHNOLOGIES
Tel : +33 (0)5 61 00 52 90
=46ax : +33 (0)5 61 00 51 46
http://www.anyware-tech.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25792-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 29 12:34:43 2007
Return-Path: <java-user-return-25792-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8424 invoked from network); 29 Jan 2007 12:34:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Jan 2007 12:34:42 -0000
Received: (qmail 2885 invoked by uid 500); 29 Jan 2007 12:34:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2864 invoked by uid 500); 29 Jan 2007 12:34:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2853 invoked by uid 99); 29 Jan 2007 12:34:38 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Jan 2007 04:34:38 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [194.154.194.71] (HELO srs2na11.bgl.lu) (194.154.194.71)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 29 Jan 2007 04:34:29 -0800
Received: from spmwf02l.luinternal.fortis.bank (unverified) by srs2na12.domain
 (Content Technologies SMTPRS 4.2.10) with ESMTP id <T7d7a7c654e0aaf150a159@srs2na12.domain> for <java-user@lucene.apache.org>;
 Mon, 29 Jan 2007 13:38:04 +0100
Received: from SPMWB02L.luinternal.fortis.bank ([10.172.252.140]) by spmwf02l.luinternal.fortis.bank with Microsoft SMTPSVC(6.0.3790.0);
	 Mon, 29 Jan 2007 13:33:50 +0100
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
X-MimeOLE: Produced By Microsoft Exchange V6.5
Subject: RE: Merge Hits
Date: Mon, 29 Jan 2007 13:33:49 +0100
Message-ID: <EBC8F228BDB35A4394D0BE53DA25248808A9A2A3@SPMWB02L.luinternal.fortis.bank>
In-Reply-To: <200701291215.00127.nicolas.lalevee@anyware-tech.com>
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
Thread-Topic: Merge Hits
Thread-Index: AcdDltmTvrVWVyB8Rq+21yam6XuiIAACp+cQ
From: "DECAFFMEYER MATHIEU" <MATHIEU.DECAFFMAYER@fortis.lu>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 29 Jan 2007 12:33:50.0728 (UTC) FILETIME=[BADE6080:01C743A1]
X-Virus-Checked: Checked by ClamAV on apache.org

=20
Thank u for your response,
Actually I want to merge the Hits to get a better score,
For example when user enter Hello
I want to merge :
title:Hello
headlines:Hello
summary:Hello
content:Hello

Then I will get a better score if the title is Hello,
What do u think of this ?

Thank u.

   =20

-----Original Message-----
From: Nicolas Lalev=E9e [mailto:nicolas.lalevee@anyware-tech.com]=20
Sent: Monday, January 29, 2007 12:15 PM
To: java-user@lucene.apache.org
Subject: Re: Merge Hits

*****  This message comes from the Internet Network *****

Le Lundi 29 Janvier 2007 12:08, DECAFFMEYER MATHIEU a =E9crit=A0:
> Hi, I have a table of objects Hit,
> I want to merge the different Hits objects of the table to have one Hits
> object.
>
> Is this possible ?

The easiest way is to merge the queries which produces thoses different hit=
s.=20
You should look at BooleanQuery.

--=20
Nicolas LALEV=C9E
Solutions & Technologies
ANYWARE TECHNOLOGIES
Tel : +33 (0)5 61 00 52 90
Fax : +33 (0)5 61 00 51 46
http://www.anyware-tech.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D
Internet communications are not secure and therefore Fortis Banque Luxembou=
rg S.A. does not accept legal responsibility for the contents of this messa=
ge. The information contained in this e-mail is confidential and may be leg=
ally privileged. It is intended solely for the addressee. If you are not th=
e intended recipient, any disclosure, copying, distribution or any action t=
aken or omitted to be taken in reliance on it, is prohibited and may be unl=
awful. Nothing in the message is capable or intended to create any legally =
binding obligations on either party and it is not intended to provide legal=
 advice.
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25793-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 29 13:03:13 2007
Return-Path: <java-user-return-25793-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 16401 invoked from network); 29 Jan 2007 13:03:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Jan 2007 13:03:12 -0000
Received: (qmail 39114 invoked by uid 500); 29 Jan 2007 13:03:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38682 invoked by uid 500); 29 Jan 2007 13:03:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38671 invoked by uid 99); 29 Jan 2007 13:03:11 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Jan 2007 05:03:11 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [84.96.21.10] (HELO trinity.anyware-tech.com) (84.96.21.10)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Jan 2007 05:03:03 -0800
Received: from localhost (localhost [127.0.0.1])
	by trinity.anyware-tech.com (Postfix) with ESMTP id B6C4840ADDC
	for <java-user@lucene.apache.org>; Mon, 29 Jan 2007 14:02:40 +0100 (CET)
Received: from trinity.anyware-tech.com ([127.0.0.1])
	by localhost (trinity.anyware-tech.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id 14673-01 for <java-user@lucene.apache.org>;
	Mon, 29 Jan 2007 14:02:34 +0100 (CET)
Received: from bumbo.anyware (bumbo.anyware [10.0.3.29])
	by trinity.anyware-tech.com (Postfix) with ESMTP id 0E94040AE60
	for <java-user@lucene.apache.org>; Mon, 29 Jan 2007 14:02:33 +0100 (CET)
From: Nicolas =?iso-8859-1?q?Lalev=E9e?= <nicolas.lalevee@anyware-tech.com>
Organization: Anyware Technologies
To: java-user@lucene.apache.org
Subject: Re: Merge Hits
Date: Mon, 29 Jan 2007 14:02:31 +0100
User-Agent: KMail/1.9.5
References: <EBC8F228BDB35A4394D0BE53DA25248808A9A2A3@SPMWB02L.luinternal.fortis.bank>
In-Reply-To: <EBC8F228BDB35A4394D0BE53DA25248808A9A2A3@SPMWB02L.luinternal.fortis.bank>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
Message-Id: <200701291402.31933.nicolas.lalevee@anyware-tech.com>
X-Virus-Scanned: Debian amavisd-new at anyware-tech.com
X-Virus-Checked: Checked by ClamAV on apache.org

Le Lundi 29 Janvier 2007 13:33, DECAFFMEYER MATHIEU a =E9crit=A0:
> Thank u for your response,
> Actually I want to merge the Hits to get a better score,
> For example when user enter Hello
> I want to merge :
> title:Hello
> headlines:Hello
> summary:Hello
> content:Hello
>
> Then I will get a better score if the title is Hello,
> What do u think of this ?

Just do a boolean query of every of these queries :
"title:Hello headlines:Hello summary:Hello content:Hello"
If you are making your queries in Java-Java, make you BooleanQuery's clause=
s=20
with an Occur.SHOULD.
=2D-=20
Nicolas LALEV=C9E
Solutions & Technologies
ANYWARE TECHNOLOGIES
Tel : +33 (0)5 61 00 52 90
=46ax : +33 (0)5 61 00 51 46
http://www.anyware-tech.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25794-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 29 13:15:40 2007
Return-Path: <java-user-return-25794-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20150 invoked from network); 29 Jan 2007 13:15:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Jan 2007 13:15:39 -0000
Received: (qmail 63375 invoked by uid 500); 29 Jan 2007 13:15:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63347 invoked by uid 500); 29 Jan 2007 13:15:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63336 invoked by uid 99); 29 Jan 2007 13:15:38 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Jan 2007 05:15:38 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [194.154.194.71] (HELO srs2na11.bgl.lu) (194.154.194.71)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 29 Jan 2007 05:15:30 -0800
Received: from spmwf02l.luinternal.fortis.bank (unverified) by srs2na12.domain
 (Content Technologies SMTPRS 4.2.10) with ESMTP id <T7d7aa1f3130aaf150a159@srs2na12.domain> for <java-user@lucene.apache.org>;
 Mon, 29 Jan 2007 14:19:05 +0100
Received: from SPMWB02L.luinternal.fortis.bank ([10.172.252.140]) by spmwf02l.luinternal.fortis.bank with Microsoft SMTPSVC(6.0.3790.0);
	 Mon, 29 Jan 2007 14:14:53 +0100
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
X-MimeOLE: Produced By Microsoft Exchange V6.5
Subject: RE: Merge Hits
Date: Mon, 29 Jan 2007 14:14:52 +0100
Message-ID: <EBC8F228BDB35A4394D0BE53DA25248808A9A2A4@SPMWB02L.luinternal.fortis.bank>
In-Reply-To: <200701291402.31933.nicolas.lalevee@anyware-tech.com>
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
Thread-Topic: Merge Hits
Thread-Index: AcdDpdT07bF5ho/kRPCIDcwTos+obwAAXV2Q
From: "DECAFFMEYER MATHIEU" <MATHIEU.DECAFFMAYER@fortis.lu>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 29 Jan 2007 13:14:53.0397 (UTC) FILETIME=[76BBD850:01C743A7]
X-Virus-Checked: Checked by ClamAV on apache.org

=20
I noticed it is not possible to define Occur.SHOULD in Lucene 1.4.3=20

   =20

-----Original Message-----
From: Nicolas Lalev=E9e [mailto:nicolas.lalevee@anyware-tech.com]=20
Sent: Monday, January 29, 2007 2:03 PM
To: java-user@lucene.apache.org
Subject: Re: Merge Hits

*****  This message comes from the Internet Network *****

Le Lundi 29 Janvier 2007 13:33, DECAFFMEYER MATHIEU a =E9crit=A0:
> Thank u for your response,
> Actually I want to merge the Hits to get a better score,
> For example when user enter Hello
> I want to merge :
> title:Hello
> headlines:Hello
> summary:Hello
> content:Hello
>
> Then I will get a better score if the title is Hello,
> What do u think of this ?

Just do a boolean query of every of these queries :
"title:Hello headlines:Hello summary:Hello content:Hello"
If you are making your queries in Java-Java, make you BooleanQuery's clause=
s=20
with an Occur.SHOULD.
--=20
Nicolas LALEV=C9E
Solutions & Technologies
ANYWARE TECHNOLOGIES
Tel : +33 (0)5 61 00 52 90
Fax : +33 (0)5 61 00 51 46
http://www.anyware-tech.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D
Internet communications are not secure and therefore Fortis Banque Luxembou=
rg S.A. does not accept legal responsibility for the contents of this messa=
ge. The information contained in this e-mail is confidential and may be leg=
ally privileged. It is intended solely for the addressee. If you are not th=
e intended recipient, any disclosure, copying, distribution or any action t=
aken or omitted to be taken in reliance on it, is prohibited and may be unl=
awful. Nothing in the message is capable or intended to create any legally =
binding obligations on either party and it is not intended to provide legal=
 advice.
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25795-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 29 13:22:15 2007
Return-Path: <java-user-return-25795-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 24527 invoked from network); 29 Jan 2007 13:22:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Jan 2007 13:22:13 -0000
Received: (qmail 82413 invoked by uid 500); 29 Jan 2007 13:22:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82383 invoked by uid 500); 29 Jan 2007 13:22:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82372 invoked by uid 99); 29 Jan 2007 13:22:12 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Jan 2007 05:22:12 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 64.233.182.184 as permitted sender)
Received: from [64.233.182.184] (HELO nf-out-0910.google.com) (64.233.182.184)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Jan 2007 05:22:03 -0800
Received: by nf-out-0910.google.com with SMTP id a27so1820603nfc
        for <java-user@lucene.apache.org>; Mon, 29 Jan 2007 05:21:42 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=aJA59EzUtKhVKgxfuBpl0sMINC3V3xx4t1qrPLQf+5R1KUabZQJm9BsG6AmwhR6JmMdcguat8pMwK6yjqexnysheMFr+nKmhiAytcAc6TQuNyrvXtNTRCNa78gKxXvnUWJLft/Gbns0b2c//movQktvVQQ4jteBNq7WFK+051k0=
Received: by 10.82.188.15 with SMTP id l15mr3312562buf.1170076901370;
        Mon, 29 Jan 2007 05:21:41 -0800 (PST)
Received: by 10.82.162.9 with HTTP; Mon, 29 Jan 2007 05:21:41 -0800 (PST)
Message-ID: <359a92830701290521q45663c90p9e43d00357afb8fd@mail.gmail.com>
Date: Mon, 29 Jan 2007 08:21:41 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: lucene for syslogs
In-Reply-To: <f514763f0701290150x24fa23f0t923a62f8088ecbfb@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_78110_31921278.1170076901207"
References: <f514763f0701290150x24fa23f0t923a62f8088ecbfb@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_78110_31921278.1170076901207
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

That depends (tm Erik Hatcher) <G>. The problem with such an open-ended
question is that there are so many unique variables that it's impossible to
answer in any meaningful way. For instance....

How much work is it to parse the log files?
What kind if hardware are you using?
Are you accessing things over a network? Is there network latency involved?
Can you index various parts in parallel?
How many document are we talking about? You've given no data on whether you
expect 100 document or 1,000,000,000,000,000 documents?
How fast is the data being added to your syslogs?
and on and on and on.

All you can do is set up a test to see. It shouldn't be very hard to, say,
create a small program that randomizes input and push it through the
indexing process and measure.

Best
Erick

On 1/29/07, Saravana <mskumar@gmail.com> wrote:
>
> Hi,
>
> Did anybody use lucene to index syslogs? What is the maximum indexing rate
> that we can get to store a 200 bytes document with 14 fields?
>
> thanks,
> MSK
>
> --
> Every day brings us a sea of opportunities
>
>

------=_Part_78110_31921278.1170076901207--

From java-user-return-25796-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 29 14:45:20 2007
Return-Path: <java-user-return-25796-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 57762 invoked from network); 29 Jan 2007 14:45:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Jan 2007 14:45:19 -0000
Received: (qmail 41351 invoked by uid 500); 29 Jan 2007 14:45:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41318 invoked by uid 500); 29 Jan 2007 14:45:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41307 invoked by uid 99); 29 Jan 2007 14:45:19 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Jan 2007 06:45:19 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [85.118.4.17] (HELO snorlax.uk.scalix.com) (85.118.4.17)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Jan 2007 06:45:10 -0800
Received: from snorlax.uk.scalix.com (localhost.localdomain [127.0.0.1])
	by snorlax.uk.scalix.com (8.12.11.20060308/8.12.11) with ESMTP id l0TEilDU028009
	for <java-user@lucene.apache.org>; Mon, 29 Jan 2007 14:44:47 GMT
Received: from [10.11.108.231] (snorlax.uk.scalix.com [10.11.108.216])
    by snorlax.uk.scalix.com (Scalix SMTP Relay 11.0.1.11)
    via ESMTP; Mon, 29 Jan 2007 14:44:47 +0000 (GMT)
Date: Mon, 29 Jan 2007 14:44:45 +0000
From: John Haxby <jch@scalix.com>
To: java-user@lucene.apache.org
Message-ID: <45BE085D.8050508@scalix.com>
Subject: Slightly off-topic: using openoffice for conversions
x-scalix-Hops: 1
User-Agent: Thunderbird 1.5.0.9 (X11/20061219)
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII";
	format="flowed"
Content-Disposition: inline
X-Spam-Checker-Version: SpamAssassin 3.1.7 (2006-10-05) on 
	snorlax.uk.scalix.com
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.6 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.1.7

Hello All,

In LIA, Erik and Otis mention using the openoffice.org API for 
converting from various formats to something that can be used for indexing.

Does anyone have any examples of doing this that they'd be willing to share?

jch

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25797-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 29 14:49:43 2007
Return-Path: <java-user-return-25797-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58660 invoked from network); 29 Jan 2007 14:49:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Jan 2007 14:49:42 -0000
Received: (qmail 47904 invoked by uid 500); 29 Jan 2007 14:49:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47866 invoked by uid 500); 29 Jan 2007 14:49:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47855 invoked by uid 99); 29 Jan 2007 14:49:42 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Jan 2007 06:49:42 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [217.12.11.96] (HELO smtp007.mail.ukl.yahoo.com) (217.12.11.96)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 29 Jan 2007 06:49:32 -0800
Received: (qmail 24485 invoked from network); 29 Jan 2007 14:49:10 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.fr;
  h=Received:X-YMail-OSG:From:To:Subject:Date:Message-ID:MIME-Version:Content-Type:X-Priority:X-MSMail-Priority:X-Mailer:X-MimeOLE:Importance;
  b=3MaIYVo22DYdShfrdgsE+CpM9GHHLD2wxucL/dBZcNmPzsik3+dFoSlv/CYeLYssUDtUmnOoi1loWDH6JknKzO1sCFUJcmaEg656fhekMtIMovLvQfeeAegrX0fmJjuFp4gndY6hOsAu+ObTIr5cn/dwwCZp9gtpwfFfxHICCxk=  ;
Received: from unknown (HELO platoon) (arnaudbuffet@82.236.230.109 with login)
  by smtp007.mail.ukl.yahoo.com with SMTP; 29 Jan 2007 14:49:10 -0000
X-YMail-OSG: 72fy12AVM1n2yZ4gJzWcuSpaQ814ot3VgkDCrvMvTdO7drmjSuJISjPx1BA2fE0ti9BdYovbqd8RoWj3i8HJPlPTDhH2X99hRBrvNwDt3kCKMYuHF3wFGnpbsQxJAlwuoGLa3rst0szrZ4rbsZPC3yTaW2haDHRp_.lAKUB9VHkSvSvWgwaOYOzrsg--
From: "arnaudbuffet" <arnaudbuffet@yahoo.fr>
To: <java-user@lucene.apache.org>
Subject: fiel type to store & seacrh
Date: Mon, 29 Jan 2007 15:49:13 +0100
Message-ID: <001601c743b4$a50d1220$1e00a8c0@platoon>
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_0017_01C743BD.06D17A20"
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook, Build 10.0.2627
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1441
Importance: Normal
X-Virus-Checked: Checked by ClamAV on apache.org

------=_NextPart_000_0017_01C743BD.06D17A20
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit

Hi ;
 
I recently upgrade Lucene into a java application to current release
2.0. 
 
As all know the way to write indexed data change with notion of
Field.Store and Field.Index into the lucene document.
 
Every thing I read seems confused . 
 
Is anyone help me quickly with better option to use to index data for
searching into by Query ? (With better size & performance optimization
too):
 
- Data like internal serial number, id of document witch are not used by
search: new Field(ID, "102154", Field.Store.YES,
Field.Index.UN_TOKENIZED) ?
 
- Data like attribute to document like author, year of publication witch
are not use for search: new Field(author, "Prat", Field.Store.YES,
Field.Index.NO)?
 
- Data like keywords or title witch are used by search Query: new
Field(KEYWORS, "book", Field.Store.YES, Field.Index.TOKENIZED)?
 
- Date like date witch are used by search Query with Range Filter: new
Field(DATE, "book", Field.Store.YES, Field.Index.TOKENIZED)?
 
- Data like comments or description witch are not used by the search: ?
new Field(ID, "102154", Field.Store.NO, Field.Index.NO)
 
 
ths for all
 
A
 
 
 
 
 

------=_NextPart_000_0017_01C743BD.06D17A20--


	

	
		
___________________________________________________________________________ 
Yahoo! Mail rinvente le mail ! Dcouvrez le nouveau Yahoo! Mail et son interface rvolutionnaire.
http://fr.mail.yahoo.com

From java-user-return-25798-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 29 15:11:07 2007
Return-Path: <java-user-return-25798-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63661 invoked from network); 29 Jan 2007 15:11:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Jan 2007 15:11:06 -0000
Received: (qmail 80422 invoked by uid 500); 29 Jan 2007 15:11:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80066 invoked by uid 500); 29 Jan 2007 15:11:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80055 invoked by uid 99); 29 Jan 2007 15:11:05 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Jan 2007 07:11:05 -0800
X-ASF-Spam-Status: No, hits=2.9 required=10.0
	tests=HTML_10_20,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of mskumar@gmail.com designates 64.233.162.235 as permitted sender)
Received: from [64.233.162.235] (HELO nz-out-0506.google.com) (64.233.162.235)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Jan 2007 07:10:56 -0800
Received: by nz-out-0506.google.com with SMTP id i1so1361221nzh
        for <java-user@lucene.apache.org>; Mon, 29 Jan 2007 07:10:35 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=pNYDrVZ+QwRO0xx0XZXhGYleUevFwOjCuha95sPJeHlRs9aiY3XxbEKOzd24LWXX3+G3YwqaqJ1WpIPlFoSBm8uJibHU8t+mKgSZcwjhDED7j8Ce2zYRq7/KeMUg4e0AyKoAStHb9qI1hFVOdyPb/qpFc8zDlPuRUu7rMMprVDc=
Received: by 10.35.62.1 with SMTP id p1mr12979780pyk.1170083435792;
        Mon, 29 Jan 2007 07:10:35 -0800 (PST)
Received: by 10.35.74.3 with HTTP; Mon, 29 Jan 2007 07:10:35 -0800 (PST)
Message-ID: <f514763f0701290710n3c66056er9826ac6404be9765@mail.gmail.com>
Date: Mon, 29 Jan 2007 20:40:35 +0530
From: Saravana <mskumar@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: lucene for syslogs
In-Reply-To: <359a92830701290521q45663c90p9e43d00357afb8fd@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_48742_9839704.1170083435756"
References: <f514763f0701290150x24fa23f0t923a62f8088ecbfb@mail.gmail.com>
	 <359a92830701290521q45663c90p9e43d00357afb8fd@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_48742_9839704.1170083435756
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi,

Thanks for your response. I am just adding **** inline with my answers.

How much work is it to parse the log files?
What kind if hardware are you using?
Are you accessing things over a network? Is there network latency involved?

******* I believe answers for the above questions will not affect lucene
indexing performance. I am starting with the assumption that I do have
key,value pairs of properties like Source,Severity,time and Message.

Can you index various parts in parallel?

****** Yes, But I need to test whether lucene allows us to index on the same
directory with multiple threads.

How many document are we talking about? You've given no data on whether you
expect 100 document or 1,000,000,000,000,000 documents?
How fast is the data being added to your syslogs?

***** its a sequential stream of data, I need to find the maximum possible
indexing rate for a given hardware. I am able to index 500 logs/sec with the
following configuration. I am running this java process alone in my machine.

Each log record size = 250 bytes
Number of fields = 14
1.8 GHz, 512 MB RAM, Mandrake Linux
MERGE_FACTOR=100
MAX_BUFFER_DOCS=250
And lucene takes 500 bytes to index/store each log record.

But I need to find the optimal indexing file size so that I can create new
indexing directory whenever I reach that optimal indexing file size.

Reason for my question is just to verify any body faced the same problem or
not. If yes, I wanted to get expert advice.

with regards,
MSK

On 1/29/07, Erick Erickson <erickerickson@gmail.com> wrote:
>
> That depends (tm Erik Hatcher) <G>. The problem with such an open-ended
> question is that there are so many unique variables that it's impossible
> to
> answer in any meaningful way. For instance....
>
> How much work is it to parse the log files?
> What kind if hardware are you using?
> Are you accessing things over a network? Is there network latency
> involved?
> Can you index various parts in parallel?
> How many document are we talking about? You've given no data on whether
> you
> expect 100 document or 1,000,000,000,000,000 documents?
> How fast is the data being added to your syslogs?
> and on and on and on.
>
> All you can do is set up a test to see. It shouldn't be very hard to, say,
> create a small program that randomizes input and push it through the
> indexing process and measure.
>
> Best
> Erick
>
> On 1/29/07, Saravana <mskumar@gmail.com> wrote:
> >
> > Hi,
> >
> > Did anybody use lucene to index syslogs? What is the maximum indexing
> rate
> > that we can get to store a 200 bytes document with 14 fields?
> >
> > thanks,
> > MSK
> >
> > --
> > Every day brings us a sea of opportunities
> >
> >
>
>

------=_Part_48742_9839704.1170083435756--

From java-user-return-25799-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 29 15:19:40 2007
Return-Path: <java-user-return-25799-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 66664 invoked from network); 29 Jan 2007 15:19:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Jan 2007 15:19:39 -0000
Received: (qmail 98287 invoked by uid 500); 29 Jan 2007 15:19:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98260 invoked by uid 500); 29 Jan 2007 15:19:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98249 invoked by uid 99); 29 Jan 2007 15:19:39 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Jan 2007 07:19:39 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [128.121.61.10] (HELO phizblip.com) (128.121.61.10)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Jan 2007 07:19:29 -0800
Received: from [10.0.11.108] (avaliable.octelecom.net [208.187.181.114] (may be forged))
	(authenticated bits=0)
	by phizblip.com (8.13.6.20060614/8.13.6) with ESMTP id l0TFJ7Yk086222
	for <java-user@lucene.apache.org>; Mon, 29 Jan 2007 08:19:08 -0700 (MST)
Message-ID: <45BE0F68.1030308@my-family.us>
Date: Mon, 29 Jan 2007 08:14:48 -0700
From: Shane <lucene-user@my-family.us>
User-Agent: Thunderbird 1.5.0.9 (X11/20061219)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Slightly off-topic: using openoffice for conversions
References: <45BE085D.8050508@scalix.com>
In-Reply-To: <45BE085D.8050508@scalix.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Not sure if this is what you are after, but there is a projet call 
File2XLIFF4j which converts a number of file formats to XLIFF (an XML 
structure) using OpenOffice.org.  And if I am not mistaken, Lucene has 
code available for indexing XML.  The project is located at 
http://file2xliff4j.sourceforge.net.

John Haxby wrote:
> Hello All,
>
> In LIA, Erik and Otis mention using the openoffice.org API for 
> converting from various formats to something that can be used for 
> indexing.
>
> Does anyone have any examples of doing this that they'd be willing to 
> share?
>
> jch
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25800-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 29 15:41:56 2007
Return-Path: <java-user-return-25800-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 74343 invoked from network); 29 Jan 2007 15:41:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Jan 2007 15:41:55 -0000
Received: (qmail 47755 invoked by uid 500); 29 Jan 2007 15:41:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47728 invoked by uid 500); 29 Jan 2007 15:41:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47717 invoked by uid 99); 29 Jan 2007 15:41:54 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Jan 2007 07:41:54 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of grant.ingersoll@gmail.com designates 66.249.82.236 as permitted sender)
Received: from [66.249.82.236] (HELO wx-out-0506.google.com) (66.249.82.236)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Jan 2007 07:41:42 -0800
Received: by wx-out-0506.google.com with SMTP id i29so1606619wxd
        for <java-user@lucene.apache.org>; Mon, 29 Jan 2007 07:41:22 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=R4gXDL3KBE62lkYOQS18TEkzWcmuOtKe0EaSsS0gajTx1RtoyWk5Lc9IFHqqj9EiTQoNgSeeu7p0IJKe06T4zUL6Fd0tl0Sjxg9qnXdyjc00FuPY0kYMUPN/HkKM4wJ6HXcIiBEzZv83JMsbkw4Qw+HdlF7/ZlPKIgkMHjIEaWA=
Received: by 10.90.105.20 with SMTP id d20mr6767925agc.1170085281400;
        Mon, 29 Jan 2007 07:41:21 -0800 (PST)
Received: from ?192.168.0.2? ( [74.229.189.244])
        by mx.google.com with ESMTP id 14sm17021048wrl.2007.01.29.07.41.19;
        Mon, 29 Jan 2007 07:41:19 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <20070126181313.93641.qmail@web81706.mail.mud.yahoo.com>
References: <20070126181313.93641.qmail@web81706.mail.mud.yahoo.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <D867BBF2-74D5-4528-B9C0-F95710F93969@gmail.com>
Content-Transfer-Encoding: 7bit
From: Grant Ingersoll <grant.ingersoll@gmail.com>
Subject: Re: How many documents in the biggest Lucene index to date?
Date: Mon, 29 Jan 2007 10:41:15 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org

It is a 64-bit JVM and a pretty good size machine, but I don't think  
I am anywhere near pushing the limits on it either, so don't read too  
much into my numbers other than as a raw statement of how many  
documents I've indexed.

When using the Hits API, documents aren't loaded until you ask for a  
specific document.  Even then, if you use the FieldSelector mechanism  
checked into trunk, you can choose to control which fields get  
loaded, which can help w/ memory issues.

-Grant

On Jan 26, 2007, at 1:13 PM, Chiradeep Vittal wrote:

> Grant,
> Is that on a single machine? If so, what kind of hardware specs  
> does the machine have? I guess you're using a 64-bit JVM?
>
> A slightly unrelated question: if a query matches all the documents  
> in the index, does that cause the entire index to get loaded into  
> RAM ?
>
>
>
> ----- Original Message ----
> From: Grant Ingersoll <gsingers@apache.org>
> To: java-user@lucene.apache.org
> Sent: Friday, January 26, 2007 8:03:11 AM
> Subject: Re: How many documents in the biggest Lucene index to date?
>
> I just indexed a collection w/ 15+ million docs in one index.  Index
> size is roughly 42 gb.
>
> On Jan 26, 2007, at 12:45 AM, Bill Taylor wrote:
>
>> I have used Lucene to index a small collection - only a few hundred
>> documents.  I have a potential client who wants to index a
>> collection which will start at about a million documents and could
>> easily grow to two million.
>>
>> Has anyone used Lucene with an index that large?
>>
>> Thank you very much.
>>
>> Bill Taylor
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
> --------------------------
> Grant Ingersoll
> Center for Natural Language Processing
> http://www.cnlp.org
>
> Read the Lucene Java FAQ at http://wiki.apache.org/jakarta-lucene/
> LuceneFAQ
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

------------------------------------------------------
Grant Ingersoll
http://www.grantingersoll.com/
http://www.paperoftheweek.com/



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25801-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 29 16:44:57 2007
Return-Path: <java-user-return-25801-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99015 invoked from network); 29 Jan 2007 16:44:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Jan 2007 16:44:56 -0000
Received: (qmail 91873 invoked by uid 500); 29 Jan 2007 16:44:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91846 invoked by uid 500); 29 Jan 2007 16:44:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 91835 invoked by uid 99); 29 Jan 2007 16:44:54 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Jan 2007 08:44:54 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [194.154.194.71] (HELO srs2na11.bgl.lu) (194.154.194.71)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 29 Jan 2007 08:44:45 -0800
Received: from spmwf02l.luinternal.fortis.bank (unverified) by srs2na12.domain
 (Content Technologies SMTPRS 4.2.10) with ESMTP id <T7d7b618ea60aaf150a159@srs2na12.domain> for <java-user@lucene.apache.org>;
 Mon, 29 Jan 2007 17:48:23 +0100
Received: from SPMWB02L.luinternal.fortis.bank ([10.172.252.140]) by spmwf02l.luinternal.fortis.bank with Microsoft SMTPSVC(6.0.3790.0);
	 Mon, 29 Jan 2007 17:44:10 +0100
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
X-MimeOLE: Produced By Microsoft Exchange V6.5
Subject: RE: Score
Date: Mon, 29 Jan 2007 17:44:05 +0100
Message-ID: <EBC8F228BDB35A4394D0BE53DA25248808A9A2A9@SPMWB02L.luinternal.fortis.bank>
In-Reply-To: <005DA244-36E9-41AE-9AB2-CFDD9F14EB82@ehatchersolutions.com>
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
Thread-Topic: Score
Thread-Index: AcdDjdOB2uNYaEmaTNCY2WcbsIe66AANnfqw
From: "DECAFFMEYER MATHIEU" <MATHIEU.DECAFFMAYER@fortis.lu>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 29 Jan 2007 16:44:10.0400 (UTC) FILETIME=[B34A7200:01C743C4]
X-Virus-Checked: Checked by ClamAV on apache.org

=20
I see this for the first index

0.3764683 =3D sum of:
  0.17716156 =3D weight(title:logistics in 0), product of:
    0.57735026 =3D queryWeight(title:logistics), product of:
      0.30685282 =3D idf(docFreq=3D1)
      1.8815218 =3D queryNorm
    0.30685282 =3D fieldWeight(title:logistics in 0), product of:
      1.0 =3D tf(termFreq(title:logistics)=3D1)
      0.30685282 =3D idf(docFreq=3D1)
      1.0 =3D fieldNorm(field=3Dtitle, doc=3D0)
  0.17716156 =3D weight(headlines:logistics in 0), product of:
    0.57735026 =3D queryWeight(headlines:logistics), product of:
      0.30685282 =3D idf(docFreq=3D1)
      1.8815218 =3D queryNorm
    0.30685282 =3D fieldWeight(headlines:logistics in 0), product of:
      1.0 =3D tf(termFreq(headlines:logistics)=3D1)
      0.30685282 =3D idf(docFreq=3D1)
      1.0 =3D fieldNorm(field=3Dheadlines, doc=3D0)
  0.022145195 =3D weight(content:logistics in 0), product of:
    0.57735026 =3D queryWeight(content:logistics), product of:
      0.30685282 =3D idf(docFreq=3D1)
      1.8815218 =3D queryNorm
    0.038356602 =3D fieldWeight(content:logistics in 0), product of:
      2.0 =3D tf(termFreq(content:logistics)=3D4)
      0.30685282 =3D idf(docFreq=3D1)
      0.0625 =3D fieldNorm(field=3Dcontent, doc=3D0)

---------------------------------

And this for the second index


6.5520535 =3D sum of:
  3.1639445 =3D weight(title:logistics in 36), product of:
    0.624172 =3D queryWeight(title:logistics), product of:
      5.069027 =3D idf(docFreq=3D1)
      0.12313447 =3D queryNorm
    5.069027 =3D fieldWeight(title:logistics in 36), product of:
      1.0 =3D tf(termFreq(title:logistics)=3D1)
      5.069027 =3D idf(docFreq=3D1)
      1.0 =3D fieldNorm(field=3Dtitle, doc=3D36)
  3.1639445 =3D weight(headlines:logistics in 36), product of:
    0.624172 =3D queryWeight(headlines:logistics), product of:
      5.069027 =3D idf(docFreq=3D1)
      0.12313447 =3D queryNorm
    5.069027 =3D fieldWeight(headlines:logistics in 36), product of:
      1.0 =3D tf(termFreq(headlines:logistics)=3D1)
      5.069027 =3D idf(docFreq=3D1)
      1.0 =3D fieldNorm(field=3Dheadlines, doc=3D36)
  0.22416428 =3D weight(content:logistics in 36), product of:
    0.4699136 =3D queryWeight(content:logistics), product of:
      3.8162637 =3D idf(docFreq=3D6)
      0.12313447 =3D queryNorm
    0.47703296 =3D fieldWeight(content:logistics in 36), product of:
      2.0 =3D tf(termFreq(content:logistics)=3D4)
      3.8162637 =3D idf(docFreq=3D6)
      0.0625 =3D fieldNorm(field=3Dcontent, doc=3D36)

   =20
Both are the same document but in different indexes,
the only difference is that the second idnex has more document than the
first one, the first one contains only that page.
I would like to have the same score as in the second index, because if
user enters title of document i want it to be 1 score.

Could u help me see what is wrong ?
Thank u.


-----Original Message-----
From: Erik Hatcher [mailto:erik@ehatchersolutions.com]=20
Sent: Monday, January 29, 2007 11:11 AM
To: java-user@lucene.apache.org
Subject: Re: Score

*****  This message comes from the Internet Network *****

Look at the details provided by IndexSearcher.explain().  That'll =20
tell you why.

	Erik


On Jan 29, 2007, at 4:43 AM, DECAFFMEYER MATHIEU wrote:

> Hi,
>
> I have one index with one document with title "Logistics"
>
> I have a second index with the same document with title "Logistics" =20
> and other documents (some contains the word "Logistics" as well)
>
> If I execute a search title:Logistics in the first index, I have =20
> 0.31 for the document with title "Logistics"
> with the second index I have 1 as score for the document with title =20
> "Logistics".
>
> Why is there this difference ?
>
> Thank u.
>
>
>
> =3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D
> Internet communications are not secure and therefore Fortis Banque =20
> Luxembourg S.A. does not accept legal responsibility for the =20
> contents of this message. The information contained in this e-mail =20
> is confidential and may be legally privileged. It is intended =20
> solely for the addressee. If you are not the intended recipient, =20
> any disclosure, copying, distribution or any action taken or =20
> omitted to be taken in reliance on it, is prohibited and may be =20
> unlawful. Nothing in the message is capable or intended to create =20
> any legally binding obligations on either party and it is not =20
> intended to provide legal advice.
> =3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D
Internet communications are not secure and therefore Fortis Banque Luxembou=
rg S.A. does not accept legal responsibility for the contents of this messa=
ge. The information contained in this e-mail is confidential and may be leg=
ally privileged. It is intended solely for the addressee. If you are not th=
e intended recipient, any disclosure, copying, distribution or any action t=
aken or omitted to be taken in reliance on it, is prohibited and may be unl=
awful. Nothing in the message is capable or intended to create any legally =
binding obligations on either party and it is not intended to provide legal=
 advice.
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25802-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 29 16:48:38 2007
Return-Path: <java-user-return-25802-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 114 invoked from network); 29 Jan 2007 16:48:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Jan 2007 16:48:37 -0000
Received: (qmail 1945 invoked by uid 500); 29 Jan 2007 16:48:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 1920 invoked by uid 500); 29 Jan 2007 16:48:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 1909 invoked by uid 99); 29 Jan 2007 16:48:35 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Jan 2007 08:48:35 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [206.190.39.202] (HELO web50311.mail.yahoo.com) (206.190.39.202)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 29 Jan 2007 08:48:24 -0800
Received: (qmail 34668 invoked by uid 60001); 29 Jan 2007 16:48:02 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=xcFJj1bhutqurBSxeA8pA3WjVISqLSppI2cad5ra09lrNsr8I9JODpUabRIk0yaHlXDjW++EMTQNBrZmL5xRTRR0yoCFHxyidkfraLuaif/Ct14LyvKudy6STcTIBBlXQsIaNltWb0ejjrs6y1iYDG0xFDtH6ltMsbaJd4svrT0=;
X-YMail-OSG: XbHI798VM1kjZv65ivIYO_NNOH9lPvsnK2MizJi2xFkgMZRLS.30lc4dua1uuJg1VQ--
Received: from [58.63.148.224] by web50311.mail.yahoo.com via HTTP; Mon, 29 Jan 2007 08:48:02 PST
X-Mailer: YahooMailRC/368.3 YahooMailWebService/0.6.132.7
Date: Mon, 29 Jan 2007 08:48:02 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Index creation
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable
Message-ID: <780061.33074.qm@web50311.mail.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

increase the mergeFactor (how much depends on what the limit of open file d=
escriptors is on your machine)=0Aincrease maxBufferedDocs (how much depend =
son how much RAM you've got and how big is your JVM heap)=0A=0AI covered th=
is in a Lucene article on onjava.com in 2003, I think.=0A=0AOtis=0A=0A-----=
 Original Message ----=0AFrom: WATHELET Thomas <thomas.wathelet@europarl.eu=
ropa.eu>=0ATo: java-user@lucene.apache.org=0ASent: Monday, January 29, 2007=
 4:16:22 AM=0ASubject: Index creation=0A=0AHow could I optimize my index cr=
eation?=0A        // setUseCompoundFile(?);=0A        // setMaxBufferedDocs=
(?);=0A        // setMergeFactor(?);=0A =0AHow could I reduce the disk acce=
ss because I work with more than 1000000=0Adocuments?=0AThanks=0A=0A=0A

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25803-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 29 18:34:32 2007
Return-Path: <java-user-return-25803-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42286 invoked from network); 29 Jan 2007 18:34:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Jan 2007 18:34:32 -0000
Received: (qmail 98337 invoked by uid 500); 29 Jan 2007 18:34:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98244 invoked by uid 500); 29 Jan 2007 18:34:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98228 invoked by uid 99); 29 Jan 2007 18:34:30 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Jan 2007 10:34:30 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Jan 2007 10:34:21 -0800
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1HBbKL-0007Bp-90
	for java-user@lucene.apache.org; Mon, 29 Jan 2007 10:34:01 -0800
Message-ID: <8694565.post@talk.nabble.com>
Date: Mon, 29 Jan 2007 10:34:01 -0800 (PST)
From: poeta simbolista <poetasimbolista@gmail.com>
To: java-user@lucene.apache.org
Subject: Problem with lucene.
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: poetasimbolista@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hi there, this is my very first post at this forum... please be considerate
:)

Well, i have a problem when sending a query such as:

+description:<

Once the query is parsed, it returns me the empty String, which means the
String "<" that i want to search for on the field description is ignored.
If i use normal words then it is taken. Do you know why this could be?
Thanks.
-- 
View this message in context: http://www.nabble.com/Problem-with-lucene.-tf3137405.html#a8694565
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25804-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 29 18:35:28 2007
Return-Path: <java-user-return-25804-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42688 invoked from network); 29 Jan 2007 18:35:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Jan 2007 18:35:27 -0000
Received: (qmail 1264 invoked by uid 500); 29 Jan 2007 18:35:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 1241 invoked by uid 500); 29 Jan 2007 18:35:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 1230 invoked by uid 99); 29 Jan 2007 18:35:27 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Jan 2007 10:35:27 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Jan 2007 10:35:18 -0800
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1HBbLG-0007Si-Ez
	for java-user@lucene.apache.org; Mon, 29 Jan 2007 10:34:58 -0800
Message-ID: <8694565.post@talk.nabble.com>
Date: Mon, 29 Jan 2007 10:34:01 -0800 (PST)
From: poeta simbolista <poetasimbolista@gmail.com>
To: java-user@lucene.apache.org
Subject: Problems with some characters
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: poetasimbolista@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hi there, this is my very first post at this forum... please be considerate
:)

Well, i have a problem when sending a query such as:

+description:<

Once the query is parsed, it returns me the empty String, which means the
String "<" that i want to search for on the field description is ignored.
If i use normal words then it is taken. Do you know why this could be? 

Thanks.
-- 
View this message in context: http://www.nabble.com/Problems-with-some-characters-tf3137405.html#a8694565
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25805-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 29 19:41:01 2007
Return-Path: <java-user-return-25805-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64962 invoked from network); 29 Jan 2007 19:41:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Jan 2007 19:41:00 -0000
Received: (qmail 19865 invoked by uid 500); 29 Jan 2007 19:40:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19834 invoked by uid 500); 29 Jan 2007 19:40:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19823 invoked by uid 99); 29 Jan 2007 19:40:59 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Jan 2007 11:40:59 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 66.249.92.174 as permitted sender)
Received: from [66.249.92.174] (HELO ug-out-1314.google.com) (66.249.92.174)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Jan 2007 11:40:50 -0800
Received: by ug-out-1314.google.com with SMTP id k40so1368778ugc
        for <java-user@lucene.apache.org>; Mon, 29 Jan 2007 11:40:28 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=NDijynzd/UK5LtBQtX1lDQO98niXYF/bdOCtm3Dybm4K7Xmiu17k9Kyvkc2Tp7DWloNivDfuhrth7XQf7wXzvQIfaf+p2j8DarZDk44Lk2bbys/lh61BfPRxpyfmMnDrXbQLi/DdhwZ1n7iGmLLFtLwBXmK4hXWU2CmXDn8clBM=
Received: by 10.82.169.4 with SMTP id r4mr3886081bue.1170099627468;
        Mon, 29 Jan 2007 11:40:27 -0800 (PST)
Received: by 10.82.162.9 with HTTP; Mon, 29 Jan 2007 11:40:26 -0800 (PST)
Message-ID: <359a92830701291140u56626345mc8b04b8d268fe27@mail.gmail.com>
Date: Mon, 29 Jan 2007 14:40:26 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Problem with lucene.
In-Reply-To: <8694565.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_86456_18343177.1170099626765"
References: <8694565.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_86456_18343177.1170099626765
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Sure, your problem is probably that the query goes through an analyzer and
its associated tokenizer. Probably something like StandardAnalyzer which
"massages" the input and strips out most non-alphabetic characters,....
except some. It tries to be smart about URLs, e-mail addresses, etc.

If you're new, I recommend you use WhitespaceAnalyzer until you get familiar
with what analyzers do for you. Be aware that WhitespaceAnalyzer does NOT
automatically lower-case your input, so "Which" won't match "which". It's
easy enough to make your own analyzer by subclassing of the standard ones.
The book "Lucene in Action " is valuable for this, although you should be
aware that it was written to the 1.4 codebase, so there are a few
differences.

It is important that the analyzer you use at *index* time is compatible with
the one you use at *query* time. Until you're more familiar with this, I
simply recommend you use the *same* analyzer at index time that you use at
search time. That'll give you more intuitive results. You'll want to refine
the use of analyzers later...

I also recommend that you get a copy of luke (google lucene luke). It will
allow you to examine your index, parse queries through the GUI, examine the
effects of different analyzers on input etc. It's a great tool and one
that'll make your life much easier.

Best
Erick


On 1/29/07, poeta simbolista <poetasimbolista@gmail.com> wrote:
>
>
> Hi there, this is my very first post at this forum... please be
> considerate
> :)
>
> Well, i have a problem when sending a query such as:
>
> +description:<
>
> Once the query is parsed, it returns me the empty String, which means the
> String "<" that i want to search for on the field description is ignored.
> If i use normal words then it is taken. Do you know why this could be?
> Thanks.
> --
> View this message in context:
> http://www.nabble.com/Problem-with-lucene.-tf3137405.html#a8694565
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_86456_18343177.1170099626765--

From java-user-return-25806-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 29 20:54:50 2007
Return-Path: <java-user-return-25806-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96460 invoked from network); 29 Jan 2007 20:54:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Jan 2007 20:54:49 -0000
Received: (qmail 42340 invoked by uid 500); 29 Jan 2007 20:54:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42302 invoked by uid 500); 29 Jan 2007 20:54:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42291 invoked by uid 99); 29 Jan 2007 20:54:47 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Jan 2007 12:54:46 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of soeren.pekrul@gmx.de designates 213.165.64.20 as permitted sender)
Received: from [213.165.64.20] (HELO mail.gmx.net) (213.165.64.20)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 29 Jan 2007 12:54:38 -0800
Received: (qmail invoked by alias); 29 Jan 2007 20:54:16 -0000
Received: from p548C681B.dip.t-dialin.net (EHLO [10.0.1.102]) [84.140.104.27]
  by mail.gmx.net (mp029) with SMTP; 29 Jan 2007 21:54:16 +0100
X-Authenticated: #3493418
Message-ID: <45BE5EAA.1040707@gmx.de>
Date: Mon, 29 Jan 2007 21:52:58 +0100
From: Soeren Pekrul <soeren.pekrul@gmx.de>
User-Agent: Mozilla Thunderbird 1.0.7 (Windows/20050923)
X-Accept-Language: de-DE, de, en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Score
References: <EBC8F228BDB35A4394D0BE53DA25248808A9A2A9@SPMWB02L.luinternal.fortis.bank>
In-Reply-To: <EBC8F228BDB35A4394D0BE53DA25248808A9A2A9@SPMWB02L.luinternal.fortis.bank>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 8bit
X-Y-GMX-Trusted: 0
X-Virus-Checked: Checked by ClamAV on apache.org

DECAFFMEYER MATHIEU wrote:
>  
> Both are the same document but in different indexes,
> the only difference is that the second idnex has more document than the
> first one, the first one contains only that page.
> I would like to have the same score as in the second index, 

Simple speaking, the score depends of the query, the matched document 
and the index. The influence of the index is represented by the idf 
(inverse document frequency).

Look at:
http://lucene.apache.org/java/docs/scoring.html
http://lucene.apache.org/java/docs/api/org/apache/lucene/search/Similarity.html

If you would like to get a score independent of the index you should 
override the idf function by sup-classing the Similarity class 
(DefaultSimilarity) and return always 1.

> because if
> user enters title of document i want it to be 1 score.

The score is not one (0.3764683). If it should to be one you can 
normalize the score.

I hope it helps.

Sren


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25807-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 29 22:16:15 2007
Return-Path: <java-user-return-25807-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22030 invoked from network); 29 Jan 2007 22:16:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Jan 2007 22:16:14 -0000
Received: (qmail 47469 invoked by uid 500); 29 Jan 2007 22:16:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47433 invoked by uid 500); 29 Jan 2007 22:16:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47422 invoked by uid 99); 29 Jan 2007 22:16:12 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Jan 2007 14:16:12 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [203.217.22.128] (HELO file1.syd.nuix.com.au) (203.217.22.128)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Jan 2007 14:16:04 -0800
Received: from [192.168.222.102] (demo1.syd.nuix.com.au [192.168.222.102])
	by file1.syd.nuix.com.au (Postfix) with ESMTP id 739D54A8145
	for <java-user@lucene.apache.org>; Tue, 30 Jan 2007 09:16:37 +1100 (EST)
Message-ID: <45BE7387.6040903@nuix.com>
Date: Tue, 30 Jan 2007 09:21:59 +1100
From: Daniel Noll <daniel@nuix.com>
Organization: NUIX Pty Limited
User-Agent: Thunderbird 3.0a1 (Windows/20061207)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: How many documents in the biggest Lucene index to date?
References: <0920FF49-F321-488D-B779-3A55450456A9@as-st.com> <9809B8EE-6F1B-4D4C-9BAD-5EFD604D16A7@gmail.com>
In-Reply-To: <9809B8EE-6F1B-4D4C-9BAD-5EFD604D16A7@gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

karl wettin wrote:
> The maximum number of documents in an index is Integer.MAX_VALUE (2 147 
> 483 647), but it it possible to combine multiple indices.

It's true that you can combine multiple indexes, but don't make 
assumptions that this lets you break the limitation.  MultiReader still 
extends from IndexReader, and IndexReader still uses ints for the 
document IDs so there's no way you'll be increasing the maximum number 
of documents even if you combine indexes.

Daniel


-- 
Daniel Noll

Nuix Pty Ltd
Suite 79, 89 Jones St, Ultimo NSW 2007, Australia    Ph: +61 2 9280 0699
Web: http://nuix.com/                               Fax: +61 2 9212 6902

This message is intended only for the named recipient. If you are not
the intended recipient you are notified that disclosing, copying,
distributing or taking any action in reliance on the contents of this
message or attachment is strictly prohibited.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25808-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 29 22:22:01 2007
Return-Path: <java-user-return-25808-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25721 invoked from network); 29 Jan 2007 22:22:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Jan 2007 22:22:00 -0000
Received: (qmail 61464 invoked by uid 500); 29 Jan 2007 22:22:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61438 invoked by uid 500); 29 Jan 2007 22:22:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61427 invoked by uid 99); 29 Jan 2007 22:22:00 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Jan 2007 14:22:00 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [203.217.22.128] (HELO file1.syd.nuix.com.au) (203.217.22.128)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Jan 2007 14:21:51 -0800
Received: from [192.168.222.102] (host102.syd.nuix.com.au [192.168.222.102])
	by file1.syd.nuix.com.au (Postfix) with ESMTP id ED4784A8145
	for <java-user@lucene.apache.org>; Tue, 30 Jan 2007 09:22:23 +1100 (EST)
Message-ID: <45BE74E2.5010203@nuix.com>
Date: Tue, 30 Jan 2007 09:27:46 +1100
From: Daniel Noll <daniel@nuix.com>
Organization: NUIX Pty Limited
User-Agent: Thunderbird 3.0a1 (Windows/20061207)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Merge Hits
References: <EBC8F228BDB35A4394D0BE53DA25248808A9A2A4@SPMWB02L.luinternal.fortis.bank>
In-Reply-To: <EBC8F228BDB35A4394D0BE53DA25248808A9A2A4@SPMWB02L.luinternal.fortis.bank>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

DECAFFMEYER MATHIEU wrote:
>  
> I noticed it is not possible to define Occur.SHOULD in Lucene 1.4.3 

It's still possible, it's just that the API is different.  ("should" = 
not prohibited, not required)

Daniel


-- 
Daniel Noll

Nuix Pty Ltd
Suite 79, 89 Jones St, Ultimo NSW 2007, Australia    Ph: +61 2 9280 0699
Web: http://nuix.com/                               Fax: +61 2 9212 6902

This message is intended only for the named recipient. If you are not
the intended recipient you are notified that disclosing, copying,
distributing or taking any action in reliance on the contents of this
message or attachment is strictly prohibited.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25809-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jan 29 23:00:31 2007
Return-Path: <java-user-return-25809-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40001 invoked from network); 29 Jan 2007 23:00:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Jan 2007 23:00:30 -0000
Received: (qmail 47954 invoked by uid 500); 29 Jan 2007 23:00:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47923 invoked by uid 500); 29 Jan 2007 23:00:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47912 invoked by uid 99); 29 Jan 2007 23:00:30 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Jan 2007 15:00:30 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Jan 2007 15:00:21 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id C6E0F5B773; Mon, 29 Jan 2007 15:00:00 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id C1AAB7F403
	for <java-user@lucene.apache.org>; Mon, 29 Jan 2007 15:00:00 -0800 (PST)
Date: Mon, 29 Jan 2007 15:00:00 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Score
In-Reply-To: <45BE5EAA.1040707@gmx.de>
Message-ID: <Pine.LNX.4.58.0701291456210.32152@hal.rescomp.berkeley.edu>
References: <EBC8F228BDB35A4394D0BE53DA25248808A9A2A9@SPMWB02L.luinternal.fortis.bank>
 <45BE5EAA.1040707@gmx.de>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=ISO-8859-1
Content-Transfer-Encoding: QUOTED-PRINTABLE
X-Virus-Checked: Checked by ClamAV on apache.org


Note also that the scores in an Explanation are the "raw" scores ... if
you use Hits, the scores are "partially normalized" meaning that if the
highest scoring document has a score greater then 1, all scores are
devided by the highest score.




: Date: Mon, 29 Jan 2007 21:52:58 +0100
: From: Soeren Pekrul <soeren.pekrul@gmx.de>
: Reply-To: java-user@lucene.apache.org
: To: java-user@lucene.apache.org
: Subject: Re: Score
:
: DECAFFMEYER MATHIEU wrote:
: >
: > Both are the same document but in different indexes,
: > the only difference is that the second idnex has more document than the
: > first one, the first one contains only that page.
: > I would like to have the same score as in the second index,
:
: Simple speaking, the score depends of the query, the matched document
: and the index. The influence of the index is represented by the idf
: (inverse document frequency).
:
: Look at:
: http://lucene.apache.org/java/docs/scoring.html
: http://lucene.apache.org/java/docs/api/org/apache/lucene/search/Similarit=
y.html
:
: If you would like to get a score independent of the index you should
: override the idf function by sup-classing the Similarity class
: (DefaultSimilarity) and return always 1.
:
: > because if
: > user enters title of document i want it to be 1 score.
:
: The score is not one (0.3764683). If it should to be one you can
: normalize the score.
:
: I hope it helps.
:
: S=F6ren
:
:
: ---------------------------------------------------------------------
: To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
: For additional commands, e-mail: java-user-help@lucene.apache.org
:



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25810-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 30 00:22:12 2007
Return-Path: <java-user-return-25810-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67565 invoked from network); 30 Jan 2007 00:22:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Jan 2007 00:22:11 -0000
Received: (qmail 76162 invoked by uid 500); 30 Jan 2007 00:22:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76130 invoked by uid 500); 30 Jan 2007 00:22:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76119 invoked by uid 99); 30 Jan 2007 00:22:11 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Jan 2007 16:22:11 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of karl.wettin@gmail.com designates 66.249.92.169 as permitted sender)
Received: from [66.249.92.169] (HELO ug-out-1314.google.com) (66.249.92.169)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Jan 2007 16:22:01 -0800
Received: by ug-out-1314.google.com with SMTP id k40so1433543ugc
        for <java-user@lucene.apache.org>; Mon, 29 Jan 2007 16:21:40 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=SLvcDFjYb7QL1p+Io9YQOxTrcU38itcBUHPPhOBJz9JUsBpwlXulXLDvEvEg3ndW9+WuNv8xEYHNjVD3gECsElouXj47W7M5bW6tIPJPtFqZUa/Y0X2IRS3XX1kY15hWzaeSYwZIPSzmRgh0bu4NEjQ1aR8e5VZByKT2QVzZen8=
Received: by 10.67.19.13 with SMTP id w13mr9367817ugi.1170116499749;
        Mon, 29 Jan 2007 16:21:39 -0800 (PST)
Received: from ?192.168.0.131? ( [83.249.127.91])
        by mx.google.com with ESMTP id 54sm9429159ugp.2007.01.29.16.21.37;
        Mon, 29 Jan 2007 16:21:38 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <45BE7387.6040903@nuix.com>
References: <0920FF49-F321-488D-B779-3A55450456A9@as-st.com> <9809B8EE-6F1B-4D4C-9BAD-5EFD604D16A7@gmail.com> <45BE7387.6040903@nuix.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <C49AE85F-2C02-4107-A1D9-555D80CD4223@gmail.com>
Content-Transfer-Encoding: 7bit
From: karl wettin <karl.wettin@gmail.com>
Subject: Re: How many documents in the biggest Lucene index to date?
Date: Tue, 30 Jan 2007 01:20:49 +0100
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org


29 jan 2007 kl. 23.21 skrev Daniel Noll:

> karl wettin wrote:
>> The maximum number of documents in an index is Integer.MAX_VALUE  
>> (2 147 483 647), but it it possible to combine multiple indices.
>
> It's true that you can combine multiple indexes, but don't make  
> assumptions that this lets you break the limitation.  MultiReader  
> still extends from IndexReader, and IndexReader still uses ints for  
> the document IDs so there's no way you'll be increasing the maximum  
> number of documents even if you combine indexes.

Must have thought of it as a MultiSearcher working rather than the  
MultiReader, sorry about that. Any year now I'll take a better look  
at scoring. I presume that is the problem with a MultiSearcher  
(unless some really silly similarity or so?).

I started digging in to MultiReader to understand whats going on, but  
mostly in a desperate attempt to save my face.

My first attempt was to mess with MultiReader.maxDoc, to make it  
start on Integer.MIN_VALUE rather than 0 to allow four billion rather  
than two billion documents. An immediate hack resulted in a lot of  
negative array sized and similar mess.

Then it hit me that perheps the integer limitation should be in the  
store (Directory) and not the IndexReader? If not now, perhaps in the  
future when everybody is running on 64bit JVMs. I don't think it will  
be a very expensive thing to implement. But did anyone need that yet?

Two billion documents is quite an amount, but it is not an insane and  
unthinkable number. I doubt that I'll hit something like that anytime  
soon, but it should not be that hard or expensive to refactor Lucene  
to support the 18 billion billion (18 followed by 19 zeros) documents  
a long can count to.

I'll stop trolling now. :)

-- 
karl

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25811-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 30 00:40:33 2007
Return-Path: <java-user-return-25811-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72401 invoked from network); 30 Jan 2007 00:40:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Jan 2007 00:40:32 -0000
Received: (qmail 3891 invoked by uid 500); 30 Jan 2007 00:40:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3464 invoked by uid 500); 30 Jan 2007 00:40:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3453 invoked by uid 99); 30 Jan 2007 00:40:31 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Jan 2007 16:40:31 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [209.191.86.188] (HELO web82501.mail.mud.yahoo.com) (209.191.86.188)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 29 Jan 2007 16:40:22 -0800
Received: (qmail 11440 invoked by uid 60001); 30 Jan 2007 00:39:57 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=pacbell.net;
  h=X-YMail-OSG:Received:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=jM0tEs+vB1sHRa7NvD79NNCb3PwHD3pse8fD60/T1mo5m6mtJcdUhWAS8inTRFX+ecrp+q8VDCTWQc8KADG4TfGYggG+p1/ej9K1/2B/B4hizZhGt6V60aKswdKe67piyjQuMInzE0t3jjzrX0Z0KyBhnN4flgDQzV/bgyfZlTQ=;
X-YMail-OSG: 4amdtwEVM1ljS0D4IgalFIZu.xvByUPuIh.nQseFpHhoAl1e
Received: from [71.146.17.178] by web82501.mail.mud.yahoo.com via HTTP; Mon, 29 Jan 2007 16:39:57 PST
Date: Mon, 29 Jan 2007 16:39:57 -0800 (PST)
From: Felix Litman <f_litman@pacbell.net>
Subject: "did you mean..." feature
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-1831617248-1170117597=:11427"
Content-Transfer-Encoding: 8bit
Message-ID: <423667.11427.qm@web82501.mail.mud.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

--0-1831617248-1170117597=:11427
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit

We are implementing the  "did you mean..."  on top of Lucene,  leveraging ideas of the "Did you mean Lucene?" article.   (Many thanks to Tom White for such a useful and clear  article...!)
   
  We are having some difficultiies getting good "did you means"  for multiword queries.
   
  Did anyone have success in getting "did you mean..." to work well for multiword queries?
   
  Any thoughts on the latest recommended approach?
   
  Thank you,
Felix

--0-1831617248-1170117597=:11427--

From java-user-return-25812-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 30 01:11:33 2007
Return-Path: <java-user-return-25812-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80172 invoked from network); 30 Jan 2007 01:11:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Jan 2007 01:11:32 -0000
Received: (qmail 34530 invoked by uid 500); 30 Jan 2007 01:11:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34505 invoked by uid 500); 30 Jan 2007 01:11:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34494 invoked by uid 99); 30 Jan 2007 01:11:31 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Jan 2007 17:11:31 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of karl.wettin@gmail.com designates 66.249.92.175 as permitted sender)
Received: from [66.249.92.175] (HELO ug-out-1314.google.com) (66.249.92.175)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Jan 2007 17:11:22 -0800
Received: by ug-out-1314.google.com with SMTP id k40so1442714ugc
        for <java-user@lucene.apache.org>; Mon, 29 Jan 2007 17:11:01 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=ODSM0bd4fcfcYrQP8KUBizhe9ltR4STr0M3cr95khKEWUPHChQWgRbu9YftFd6dY4nFk89jJIVka79Hm6IquGTAR7GvN9aaSZJubpFpsu2pnppOocRetpg84+GAxnr2FpqUHPVThn+RtZ4popzENryEIiyPjS/b/U9AKWZkWX+M=
Received: by 10.67.96.14 with SMTP id y14mr9412716ugl.1170119461180;
        Mon, 29 Jan 2007 17:11:01 -0800 (PST)
Received: from ?192.168.0.131? ( [83.249.127.91])
        by mx.google.com with ESMTP id j1sm9540420ugf.2007.01.29.17.11.00;
        Mon, 29 Jan 2007 17:11:00 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <423667.11427.qm@web82501.mail.mud.yahoo.com>
References: <423667.11427.qm@web82501.mail.mud.yahoo.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <51D6DB53-5A1C-408B-8ABD-B92A7D77B96A@gmail.com>
Content-Transfer-Encoding: 7bit
From: karl wettin <karl.wettin@gmail.com>
Subject: Re: "did you mean..." feature
Date: Tue, 30 Jan 2007 02:10:11 +0100
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org


30 jan 2007 kl. 01.39 skrev Felix Litman:

>   We are having some difficultiies getting good "did you means"   
> for multiword queries.

I recommend you to take a look at the spell checker in <http:// 
www.alias-i.com/lingpipe/>. Make sure to read the license agreement  
as it might not be free of charge for you.

I've posted <https://issues.apache.org/jira/browse/LUCENE-626>, an  
Adaptive, user query session analyzing spell checker. It learns from  
the misstakes and corrections users do, similar to how Google does it.

It will of course require a lot of people placing searches to work,  
but the longer it runs, the better. I've got one that has been  
running on a very busy place for 6 months now, and it is actually  
getting fairly good now.

I have many ideas about what one can do to make it better and learn  
faster.

-- 
karl

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25813-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 30 03:12:54 2007
Return-Path: <java-user-return-25813-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25904 invoked from network); 30 Jan 2007 03:12:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Jan 2007 03:12:53 -0000
Received: (qmail 72048 invoked by uid 500); 30 Jan 2007 03:12:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72020 invoked by uid 500); 30 Jan 2007 03:12:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72009 invoked by uid 99); 30 Jan 2007 03:12:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Jan 2007 19:12:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [203.217.22.128] (HELO file1.syd.nuix.com.au) (203.217.22.128)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Jan 2007 19:12:44 -0800
Received: from [192.168.222.102] (demo1.syd.nuix.com.au [192.168.222.102])
	by file1.syd.nuix.com.au (Postfix) with ESMTP id BEADF4A8145
	for <java-user@lucene.apache.org>; Tue, 30 Jan 2007 14:13:16 +1100 (EST)
Message-ID: <45BEB90F.6010407@nuix.com>
Date: Tue, 30 Jan 2007 14:18:39 +1100
From: Daniel Noll <daniel@nuix.com>
Organization: NUIX Pty Limited
User-Agent: Thunderbird 3.0a1 (Windows/20061207)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: How many documents in the biggest Lucene index to date?
References: <0920FF49-F321-488D-B779-3A55450456A9@as-st.com> <9809B8EE-6F1B-4D4C-9BAD-5EFD604D16A7@gmail.com> <45BE7387.6040903@nuix.com> <C49AE85F-2C02-4107-A1D9-555D80CD4223@gmail.com>
In-Reply-To: <C49AE85F-2C02-4107-A1D9-555D80CD4223@gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

karl wettin wrote:
> Then it hit me that perheps the integer limitation should be in the 
> store (Directory) and not the IndexReader? If not now, perhaps in the 
> future when everybody is running on 64bit JVMs. I don't think it will be 
> a very expensive thing to implement. But did anyone need that yet?

I don't know about it not being expensive to implement.  Keep in mind 
that even on a 64-bit JVM, you still can't use longs in array indexes. :-)

Mind you, an index which actually has Integer.MAX_VALUE documents would 
take an eternity to load. :-D

Daniel



-- 
Daniel Noll

Nuix Pty Ltd
Suite 79, 89 Jones St, Ultimo NSW 2007, Australia    Ph: +61 2 9280 0699
Web: http://nuix.com/                               Fax: +61 2 9212 6902

This message is intended only for the named recipient. If you are not
the intended recipient you are notified that disclosing, copying,
distributing or taking any action in reliance on the contents of this
message or attachment is strictly prohibited.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25814-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 30 08:39:57 2007
Return-Path: <java-user-return-25814-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65545 invoked from network); 30 Jan 2007 08:39:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Jan 2007 08:39:57 -0000
Received: (qmail 99486 invoked by uid 500); 30 Jan 2007 08:39:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 99454 invoked by uid 500); 30 Jan 2007 08:39:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 99443 invoked by uid 99); 30 Jan 2007 08:39:55 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Jan 2007 00:39:55 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [212.4.36.66] (HELO mail.agderweb.no) (212.4.36.66)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Jan 2007 00:39:44 -0800
Received: from localhost [212.4.54.150] by mail.agderweb.no with ESMTP
  (SMTPD-8.22) id AE450B1C; Tue, 30 Jan 2007 09:13:57 +0100
Date: Tue, 30 Jan 2007 09:39:07 +0100
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Subject: Splitting queries, or using two different parsers
Reply-To: aleksander.stensby@integrasco.no
From: "Aleksander M. Stensby" <aleksander.stensby@integrasco.no>
Organization: Integrasco A/S
Content-Type: text/plain; format=flowed; delsp=yes; charset=iso-8859-15
MIME-Version: 1.0
Content-Transfer-Encoding: 7bit
Message-ID: <op.tmykyuuooftp72@localhost>
User-Agent: Opera Mail/9.10 (Linux)
X-Antivirus: avast! (VPS 0708-1, 01/29/2007), Outbound message
X-Antivirus-Status: Clean
X-IMAIL-SPAM-DNSBL: (v6net,fe4501a80000a991,65.77.130.111)
X-IMAIL-SPAM-VALREVDNS: (fe4501a80000a991)
X-Declude-Sender: aleksander.stensby@integrasco.no [212.4.54.150]
X-Declude-Spoolname: Dfe4501a80000a991.smd
X-Virus-Checked: Checked by ClamAV on apache.org

Hey everyone! I have a question/problem I hope some of you guys can help  
me with.

I have this case where i have put my self in a bit of trouble... The thing  
is i have several fields indexed, one being "source" and one being  
"content" (which is the default field), among other fields that are not  
really that important.

The thing is, the content field and most of the other fields are parsed  
and tokenized using a StandardAnalyzer with English stop words. So, this  
field (and most of the others) are lowercased when indexed, and thus  
search on these fields should be performed in lower case (or the best  
thing would of course be to use the same analyzer.)

The problem occurs when we examine the source field, because here, the  
field is case-sensitive, and thus search on this field need to be kept  
case-sensitive aswell, and it should not me tokenized on characters such  
as "-.," etc.

Now. How do i solve this?

I want the user to be able to search using the regular lucene Query  
Syntax. I.e., an input query like:
"my Search ExPresssiON goes here" AND source:(Some-Source)
I tried one thing, and that was to split the input query-string, parse the  
occurance of "source:", and then use two different parsers on the two  
parts, then combining them into a new query. But the problem is that this  
involves many different scenarios, and also parsing failure if i parse it  
into:
"my Search ExPressiON goes here" AND
source:(Some-Source)
The first will fail since it is an open boolean query missing the last  
part.
Also, there is the problem with different writing styles, where sometimes  
the query can be complex like
<arg1> AND (source:Some-Source OR source:Some-Source OR ...) AND <arg2> OR  
<arg3> ...
etc..

It really gives me an head-ache. Any ideas how i could solve this problem  
in the best manner?
All answers are highly appreciated!

- Aleksander

-- 
Aleksander M. Stensby
Senior Software Developer
Integrasco A/S

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25815-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 30 08:44:03 2007
Return-Path: <java-user-return-25815-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67300 invoked from network); 30 Jan 2007 08:44:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Jan 2007 08:44:02 -0000
Received: (qmail 11093 invoked by uid 500); 30 Jan 2007 08:44:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11069 invoked by uid 500); 30 Jan 2007 08:44:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11058 invoked by uid 99); 30 Jan 2007 08:44:01 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Jan 2007 00:44:01 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [194.154.194.71] (HELO srs2na11.bgl.lu) (194.154.194.71)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 30 Jan 2007 00:43:52 -0800
Received: from spmwf02l.luinternal.fortis.bank (unverified) by srs2na12.domain
 (Content Technologies SMTPRS 4.2.10) with ESMTP id <T7d7ecfae740aaf150a159@srs2na12.domain> for <java-user@lucene.apache.org>;
 Tue, 30 Jan 2007 09:47:31 +0100
Received: from SPMWB02L.luinternal.fortis.bank ([10.172.252.140]) by spmwf02l.luinternal.fortis.bank with Microsoft SMTPSVC(6.0.3790.0);
	 Tue, 30 Jan 2007 09:43:06 +0100
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
X-MimeOLE: Produced By Microsoft Exchange V6.5
Subject: RE: Score
Date: Tue, 30 Jan 2007 09:43:18 +0100
Message-ID: <EBC8F228BDB35A4394D0BE53DA25248808A9A2AB@SPMWB02L.luinternal.fortis.bank>
In-Reply-To: <Pine.LNX.4.58.0701291456210.32152@hal.rescomp.berkeley.edu>
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
Thread-Topic: Score
Thread-Index: AcdD+Uj1d2E+sPJFTkSOGy1gpGos+AAUK3GQ
From: "DECAFFMEYER MATHIEU" <MATHIEU.DECAFFMAYER@fortis.lu>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 30 Jan 2007 08:43:06.0914 (UTC) FILETIME=[A9B9C020:01C7444A]
X-Virus-Checked: Checked by ClamAV on apache.org

=20
Yes it helps me understanding, thank u.
I make a BooleanQuery with the input of the user and include in the query
title:keywordofuser headlines:keywordofuser content:keywordofuser
I tried to Boost field title, then if keyword appear in the title, score gr=
ows like I want to, but if keyword occurs in content or headlines score dec=
rease more than before ...
I would like to have a score independent for each query in the BooleanQuery=
, sounds basic but I just can't achieve this.
Is this also possible to change ?
Thank u.

>>Soren
The score is not one (0.3764683). If it should to be one you can=20
normalize the score.
What do u mean by normalizing the score and how ?



   =20

-----Original Message-----
From: Chris Hostetter [mailto:hossman_lucene@fucit.org]=20
Sent: Tuesday, January 30, 2007 12:00 AM
To: java-user@lucene.apache.org
Subject: Re: Score

*****  This message comes from the Internet Network *****


Note also that the scores in an Explanation are the "raw" scores ... if
you use Hits, the scores are "partially normalized" meaning that if the
highest scoring document has a score greater then 1, all scores are
devided by the highest score.




: Date: Mon, 29 Jan 2007 21:52:58 +0100
: From: Soeren Pekrul <soeren.pekrul@gmx.de>
: Reply-To: java-user@lucene.apache.org
: To: java-user@lucene.apache.org
: Subject: Re: Score
:
: DECAFFMEYER MATHIEU wrote:
: >
: > Both are the same document but in different indexes,
: > the only difference is that the second idnex has more document than the
: > first one, the first one contains only that page.
: > I would like to have the same score as in the second index,
:
: Simple speaking, the score depends of the query, the matched document
: and the index. The influence of the index is represented by the idf
: (inverse document frequency).
:
: Look at:
: http://lucene.apache.org/java/docs/scoring.html
: http://lucene.apache.org/java/docs/api/org/apache/lucene/search/Similarit=
y.html
:
: If you would like to get a score independent of the index you should
: override the idf function by sup-classing the Similarity class
: (DefaultSimilarity) and return always 1.
:
: > because if
: > user enters title of document i want it to be 1 score.
:
: The score is not one (0.3764683). If it should to be one you can
: normalize the score.
:
: I hope it helps.
:
: S=F6ren
:
:
: ---------------------------------------------------------------------
: To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
: For additional commands, e-mail: java-user-help@lucene.apache.org
:



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D
Internet communications are not secure and therefore Fortis Banque Luxembou=
rg S.A. does not accept legal responsibility for the contents of this messa=
ge. The information contained in this e-mail is confidential and may be leg=
ally privileged. It is intended solely for the addressee. If you are not th=
e intended recipient, any disclosure, copying, distribution or any action t=
aken or omitted to be taken in reliance on it, is prohibited and may be unl=
awful. Nothing in the message is capable or intended to create any legally =
binding obligations on either party and it is not intended to provide legal=
 advice.
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25816-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 30 09:14:02 2007
Return-Path: <java-user-return-25816-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75800 invoked from network); 30 Jan 2007 09:14:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Jan 2007 09:14:01 -0000
Received: (qmail 52108 invoked by uid 500); 30 Jan 2007 09:14:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52075 invoked by uid 500); 30 Jan 2007 09:14:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52064 invoked by uid 99); 30 Jan 2007 09:14:00 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Jan 2007 01:14:00 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [212.4.36.66] (HELO mail.agderweb.no) (212.4.36.66)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Jan 2007 01:13:50 -0800
Received: from localhost [212.4.54.150] by mail.agderweb.no with ESMTP
  (SMTPD-8.22) id A641097C; Tue, 30 Jan 2007 09:48:01 +0100
Date: Tue, 30 Jan 2007 10:13:11 +0100
To: java-user@lucene.apache.org
Subject: Re: Splitting queries, or using two different parsers
Reply-To: aleksander.stensby@integrasco.no
From: "Aleksander M. Stensby" <aleksander.stensby@integrasco.no>
Organization: Integrasco A/S
Content-Type: text/plain; format=flowed; delsp=yes; charset=iso-8859-15
MIME-Version: 1.0
References: <op.tmykyuuooftp72@localhost>
Content-Transfer-Encoding: 7bit
Message-ID: <op.tmymj9n5oftp72@localhost>
In-Reply-To: <op.tmykyuuooftp72@localhost>
User-Agent: Opera Mail/9.10 (Linux)
X-Antivirus: avast! (VPS 0708-1, 01/29/2007), Outbound message
X-Antivirus-Status: Clean
X-IMAIL-SPAM-DNSBL: (v6net,064106dc0000ad6c,65.77.130.111)
X-IMAIL-SPAM-VALREVDNS: (064106dc0000ad6c)
X-Declude-Sender: aleksander.stensby@integrasco.no [212.4.54.150]
X-Declude-Spoolname: D064106dc0000ad6c.smd
X-Virus-Checked: Checked by ClamAV on apache.org

kk, i excuse myself for being so ignorant and not looking through the API  
thorougly:)
I found the PerFieldAnalyzerWrapper which i think will do the trick:)

So erhm.. just ignore this message:)

- Aleksander

On Tue, 30 Jan 2007 09:39:07 +0100, Aleksander M. Stensby  
<aleksander.stensby@integrasco.no> wrote:

> Hey everyone! I have a question/problem I hope some of you guys can help  
> me with.
>
> I have this case where i have put my self in a bit of trouble... The  
> thing is i have several fields indexed, one being "source" and one being  
> "content" (which is the default field), among other fields that are not  
> really that important.
>
> The thing is, the content field and most of the other fields are parsed  
> and tokenized using a StandardAnalyzer with English stop words. So, this  
> field (and most of the others) are lowercased when indexed, and thus  
> search on these fields should be performed in lower case (or the best  
> thing would of course be to use the same analyzer.)
>
> The problem occurs when we examine the source field, because here, the  
> field is case-sensitive, and thus search on this field need to be kept  
> case-sensitive aswell, and it should not me tokenized on characters such  
> as "-.," etc.
>
> Now. How do i solve this?
>
> I want the user to be able to search using the regular lucene Query  
> Syntax. I.e., an input query like:
> "my Search ExPresssiON goes here" AND source:(Some-Source)
> I tried one thing, and that was to split the input query-string, parse  
> the occurance of "source:", and then use two different parsers on the  
> two parts, then combining them into a new query. But the problem is that  
> this involves many different scenarios, and also parsing failure if i  
> parse it into:
> "my Search ExPressiON goes here" AND
> source:(Some-Source)
> The first will fail since it is an open boolean query missing the last  
> part.
> Also, there is the problem with different writing styles, where  
> sometimes the query can be complex like
> <arg1> AND (source:Some-Source OR source:Some-Source OR ...) AND <arg2>  
> OR <arg3> ...
> etc..
>
> It really gives me an head-ache. Any ideas how i could solve this  
> problem in the best manner?
> All answers are highly appreciated!
>
> - Aleksander
>



-- 
Aleksander M. Stensby
Software Developer
Integrasco A/S
aleksander.stensby@integrasco.no
Tlf.: +47 41 22 82 72

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25817-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 30 10:01:23 2007
Return-Path: <java-user-return-25817-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89041 invoked from network); 30 Jan 2007 10:01:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Jan 2007 10:01:22 -0000
Received: (qmail 10995 invoked by uid 500); 30 Jan 2007 10:01:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10945 invoked by uid 500); 30 Jan 2007 10:01:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10934 invoked by uid 99); 30 Jan 2007 10:01:21 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Jan 2007 02:01:21 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=UNPARSEABLE_RELAY
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [136.173.162.228] (HELO SMTP35.europarl.europa.eu) (136.173.162.228)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Jan 2007 02:01:10 -0800
Received: from EMAILBRUSV42.ep.parl.union.eu (unverified) by SMTP35.europarl.europa.eu
 (European Parliament) with ESMTP id <T7d7f11bb6388ada2e41e90@SMTP35.europarl.europa.eu> for <java-user@lucene.apache.org>;
 Tue, 30 Jan 2007 10:59:40 +0100
Received: from EPBRUSEX01.ep.parl.union.eu ([136.173.156.28]) by EMAILBRUSV42.ep.parl.union.eu with Microsoft SMTPSVC(6.0.3790.1830);
	 Tue, 30 Jan 2007 11:00:44 +0100
Received: from EPLUXSEX01.ep.parl.union.eu ([136.173.56.16]) by EPBRUSEX01.ep.parl.union.eu with Microsoft SMTPSVC(5.0.2195.6713);
	 Tue, 30 Jan 2007 11:00:44 +0100
X-MimeOLE: Produced By Microsoft Exchange V6.0.6603.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Index creation
Date: Tue, 30 Jan 2007 10:59:56 +0100
Message-ID: <CA7398CB8402E445AABF081C51E43ACB08F3D3@EPLUXSEX01.ep.parl.union.eu>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Index creation
Thread-Index: AcdDxVPw5wjd/pxjTxiaOQTLQZpfngAj62kw
From: "WATHELET Thomas" <thomas.wathelet@europarl.europa.eu>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 30 Jan 2007 10:00:44.0123 (UTC) FILETIME=[81A372B0:01C74455]
X-Virus-Checked: Checked by ClamAV on apache.org

Ok it's faster (maybee 4 times less) with RAMDirectory  and with a
MaxBufferedDocs to 10000 and a MergeFactor to 1000 and JVM heap to 1024.
Thanks

-----Original Message-----
From: Otis Gospodnetic [mailto:otis_gospodnetic@yahoo.com]=20
Sent: 29 January 2007 17:48
To: java-user@lucene.apache.org
Subject: Re: Index creation

increase the mergeFactor (how much depends on what the limit of open
file descriptors is on your machine)
increase maxBufferedDocs (how much depend son how much RAM you've got
and how big is your JVM heap)

I covered this in a Lucene article on onjava.com in 2003, I think.

Otis

----- Original Message ----
From: WATHELET Thomas <thomas.wathelet@europarl.europa.eu>
To: java-user@lucene.apache.org
Sent: Monday, January 29, 2007 4:16:22 AM
Subject: Index creation

How could I optimize my index creation?
        // setUseCompoundFile(?);
        // setMaxBufferedDocs(?);
        // setMergeFactor(?);
=20
How could I reduce the disk access because I work with more than 1000000
documents?
Thanks




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25818-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 30 11:23:11 2007
Return-Path: <java-user-return-25818-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 13649 invoked from network); 30 Jan 2007 11:23:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Jan 2007 11:23:11 -0000
Received: (qmail 92479 invoked by uid 500); 30 Jan 2007 11:23:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92442 invoked by uid 500); 30 Jan 2007 11:23:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92431 invoked by uid 99); 30 Jan 2007 11:23:11 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Jan 2007 03:23:11 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Jan 2007 03:23:01 -0800
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1HBr4S-0005tR-Ni
	for java-user@lucene.apache.org; Tue, 30 Jan 2007 03:22:40 -0800
Message-ID: <8707691.post@talk.nabble.com>
Date: Tue, 30 Jan 2007 03:22:40 -0800 (PST)
From: poeta simbolista <poetasimbolista@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Problem with lucene.
In-Reply-To: <359a92830701291140u56626345mc8b04b8d268fe27@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: poetasimbolista@gmail.com
References: <8694565.post@talk.nabble.com> <359a92830701291140u56626345mc8b04b8d268fe27@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org



Thanks for your reply.
I am working with an index which is created separately. It is created with a
StandardTokenizer.
I have read there should be used the same tokenizer which the index was
created with.
Anyway, I have tried other tokenizers while consulting, such as the
WhitespaceTokenizer, but the same results happen.
So, does it boil down to the tokenizer which the index was created with? 

Thanks a lot.
 Diego

Ps. Yes, I was using Luke which works great. But anyway, things like <* dont
work in any analyser -- don give me any results, although searching in the
db gives me loads -- and also i can get those results (via searching other
fields) on luke and i can see the text is there, the < and > are there.


Erick Erickson wrote:
> 
> Sure, your problem is probably that the query goes through an analyzer and
> its associated tokenizer. Probably something like StandardAnalyzer which
> "massages" the input and strips out most non-alphabetic characters,....
> except some. It tries to be smart about URLs, e-mail addresses, etc.
> 
> If you're new, I recommend you use WhitespaceAnalyzer until you get
> familiar
> with what analyzers do for you. Be aware that WhitespaceAnalyzer does NOT
> automatically lower-case your input, so "Which" won't match "which". It's
> easy enough to make your own analyzer by subclassing of the standard ones.
> The book "Lucene in Action " is valuable for this, although you should be
> aware that it was written to the 1.4 codebase, so there are a few
> differences.
> 
> It is important that the analyzer you use at *index* time is compatible
> with
> the one you use at *query* time. Until you're more familiar with this, I
> simply recommend you use the *same* analyzer at index time that you use at
> search time. That'll give you more intuitive results. You'll want to
> refine
> the use of analyzers later...
> 
> I also recommend that you get a copy of luke (google lucene luke). It will
> allow you to examine your index, parse queries through the GUI, examine
> the
> effects of different analyzers on input etc. It's a great tool and one
> that'll make your life much easier.
> 
> Best
> Erick
> 
> 
> On 1/29/07, poeta simbolista <poetasimbolista@gmail.com> wrote:
>>
>>
>> Hi there, this is my very first post at this forum... please be
>> considerate
>> :)
>>
>> Well, i have a problem when sending a query such as:
>>
>> +description:<
>>
>> Once the query is parsed, it returns me the empty String, which means the
>> String "<" that i want to search for on the field description is ignored.
>> If i use normal words then it is taken. Do you know why this could be?
>> Thanks.
>> --
>> View this message in context:
>> http://www.nabble.com/Problem-with-lucene.-tf3137405.html#a8694565
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
> 
> 

-- 
View this message in context: http://www.nabble.com/Problems-with-some-characters-tf3137405.html#a8707691
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25819-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 30 13:02:04 2007
Return-Path: <java-user-return-25819-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37827 invoked from network); 30 Jan 2007 13:02:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Jan 2007 13:02:03 -0000
Received: (qmail 18581 invoked by uid 500); 30 Jan 2007 13:02:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18508 invoked by uid 500); 30 Jan 2007 13:02:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18497 invoked by uid 99); 30 Jan 2007 13:02:01 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Jan 2007 05:02:01 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Jan 2007 05:01:52 -0800
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1HBsc7-0003ev-GP
	for java-user@lucene.apache.org; Tue, 30 Jan 2007 05:01:31 -0800
Message-ID: <8709041.post@talk.nabble.com>
Date: Tue, 30 Jan 2007 05:01:31 -0800 (PST)
From: poeta simbolista <poetasimbolista@gmail.com>
To: java-user@lucene.apache.org
Subject: Why this query is not correct?
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: poetasimbolista@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hi guys,
I have been through the docs and I can't see why the parser does not parse
this correctly:

description:*sql

is not correct:

Lexical error at line 1, column 16.  Encountered: "*" (42), after : ""

However, the following:

description: sql* 

is correct.
Any idea why you can't use wildcard there?
Cheers
 D
-- 
View this message in context: http://www.nabble.com/Why-this-query-is-not-correct--tf3142268.html#a8709041
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25820-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 30 13:57:18 2007
Return-Path: <java-user-return-25820-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56524 invoked from network); 30 Jan 2007 13:57:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Jan 2007 13:57:17 -0000
Received: (qmail 14380 invoked by uid 500); 30 Jan 2007 13:57:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14088 invoked by uid 500); 30 Jan 2007 13:57:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 14077 invoked by uid 99); 30 Jan 2007 13:57:15 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Jan 2007 05:57:15 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 66.249.92.175 as permitted sender)
Received: from [66.249.92.175] (HELO ug-out-1314.google.com) (66.249.92.175)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Jan 2007 05:57:06 -0800
Received: by ug-out-1314.google.com with SMTP id k40so1575920ugc
        for <java-user@lucene.apache.org>; Tue, 30 Jan 2007 05:56:45 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=ows3/Ry35ED/jSdP2EAkPohC4Re9f7sr0SHBM/ydiHlEYFsXNO/ni2rcR/h3QJCFJgggKFSayhjgVtvTlln2XSO6yDyvUovGuuENdbicBD5+UVwkDm4c6JBun1Gci7ynNQuC7TIpm9Ezsde6qg5xBrpt0OLScl2ZzWRnn+K2gNA=
Received: by 10.82.107.15 with SMTP id f15mr4384244buc.1170165404800;
        Tue, 30 Jan 2007 05:56:44 -0800 (PST)
Received: by 10.82.162.9 with HTTP; Tue, 30 Jan 2007 05:56:44 -0800 (PST)
Message-ID: <359a92830701300556m587dea44kcedb35b504ff32c0@mail.gmail.com>
Date: Tue, 30 Jan 2007 08:56:44 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org, aleksander.stensby@integrasco.no
Subject: Re: Splitting queries, or using two different parsers
In-Reply-To: <op.tmymj9n5oftp72@localhost>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_101707_3429832.1170165404502"
References: <op.tmykyuuooftp72@localhost> <op.tmymj9n5oftp72@localhost>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_101707_3429832.1170165404502
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Been there, done that <G>. If you only knew the number of times someone on
this list has come to my rescue by saying "Did you look at *****"?

But I thought I'd add that you can use the PerFieldAnalyzerWrapper at index
time too, which may help you keep things consistent between indexing time
and searching time....

Best
Erick

On 1/30/07, Aleksander M. Stensby <aleksander.stensby@integrasco.no> wrote:
>
> kk, i excuse myself for being so ignorant and not looking through the API
> thorougly:)
> I found the PerFieldAnalyzerWrapper which i think will do the trick:)
>
> So erhm.. just ignore this message:)
>
> - Aleksander
>
> On Tue, 30 Jan 2007 09:39:07 +0100, Aleksander M. Stensby
> <aleksander.stensby@integrasco.no> wrote:
>
> > Hey everyone! I have a question/problem I hope some of you guys can help
> > me with.
> >
> > I have this case where i have put my self in a bit of trouble... The
> > thing is i have several fields indexed, one being "source" and one being
> > "content" (which is the default field), among other fields that are not
> > really that important.
> >
> > The thing is, the content field and most of the other fields are parsed
> > and tokenized using a StandardAnalyzer with English stop words. So, this
> > field (and most of the others) are lowercased when indexed, and thus
> > search on these fields should be performed in lower case (or the best
> > thing would of course be to use the same analyzer.)
> >
> > The problem occurs when we examine the source field, because here, the
> > field is case-sensitive, and thus search on this field need to be kept
> > case-sensitive aswell, and it should not me tokenized on characters such
> > as "-.," etc.
> >
> > Now. How do i solve this?
> >
> > I want the user to be able to search using the regular lucene Query
> > Syntax. I.e., an input query like:
> > "my Search ExPresssiON goes here" AND source:(Some-Source)
> > I tried one thing, and that was to split the input query-string, parse
> > the occurance of "source:", and then use two different parsers on the
> > two parts, then combining them into a new query. But the problem is that
> > this involves many different scenarios, and also parsing failure if i
> > parse it into:
> > "my Search ExPressiON goes here" AND
> > source:(Some-Source)
> > The first will fail since it is an open boolean query missing the last
> > part.
> > Also, there is the problem with different writing styles, where
> > sometimes the query can be complex like
> > <arg1> AND (source:Some-Source OR source:Some-Source OR ...) AND <arg2>
> > OR <arg3> ...
> > etc..
> >
> > It really gives me an head-ache. Any ideas how i could solve this
> > problem in the best manner?
> > All answers are highly appreciated!
> >
> > - Aleksander
> >
>
>
>
> --
> Aleksander M. Stensby
> Software Developer
> Integrasco A/S
> aleksander.stensby@integrasco.no
> Tlf.: +47 41 22 82 72
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_101707_3429832.1170165404502--

From java-user-return-25821-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 30 14:03:05 2007
Return-Path: <java-user-return-25821-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58352 invoked from network); 30 Jan 2007 14:03:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Jan 2007 14:03:04 -0000
Received: (qmail 21470 invoked by uid 500); 30 Jan 2007 14:03:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21438 invoked by uid 500); 30 Jan 2007 14:03:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21427 invoked by uid 99); 30 Jan 2007 14:03:02 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Jan 2007 06:03:02 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 66.249.92.172 as permitted sender)
Received: from [66.249.92.172] (HELO ug-out-1314.google.com) (66.249.92.172)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Jan 2007 06:02:54 -0800
Received: by ug-out-1314.google.com with SMTP id k40so1577597ugc
        for <java-user@lucene.apache.org>; Tue, 30 Jan 2007 06:02:32 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=jbf0IwofqGDiXGAdUHR5WhLqBDl/i09zQ1QDjX+Njuab88Jhwseu0opn/WT3GBAmRfkA0RNYaHKsCPI/VZ/krd9DaQgQJFhgmfqpRuR58BonV2a2oVqAG/z+mXUNnHM06J7c2JRifDC6+mPJWbhCK35D/sbXfla97HRscNZA7YE=
Received: by 10.82.152.16 with SMTP id z16mr121904bud.1170165751466;
        Tue, 30 Jan 2007 06:02:31 -0800 (PST)
Received: by 10.82.162.9 with HTTP; Tue, 30 Jan 2007 06:02:31 -0800 (PST)
Message-ID: <359a92830701300602x634fbafdr6519ded94bf7014d@mail.gmail.com>
Date: Tue, 30 Jan 2007 09:02:31 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Problem with lucene.
In-Reply-To: <8707691.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_101839_8154972.1170165751385"
References: <8694565.post@talk.nabble.com>
	 <359a92830701291140u56626345mc8b04b8d268fe27@mail.gmail.com>
	 <8707691.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_101839_8154972.1170165751385
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Yes, surely the analyzer used at indexing time governs what's in the index
and thus what can be searched. I'd surmise that your index doesn't contain
any tokens with < or > if StandardAnalyzer was used, so no matter what
analyzer you use at query time, you won't be able to find tokens that aren't
in your index.

There is one exception. If the fields were indexed UN_TOKENIZED then no
tokenization occurs at index time. But that means that the input isn't
broken into words, so if you indexed "this is a sentence", you wouldn't
match unless you searched on "this is a sentence", stop words and all.

So, you have to go back and re-index with different analyzers if you really
need to search on tokens like < and >. You might get some benefit from
PerFieldAnalyzerWrapper, and you might have to index the same data in more
than one field, say dataTokenized and dataUnTokenized to get the behavior
you need....

Best
Erick

On 1/30/07, poeta simbolista <poetasimbolista@gmail.com> wrote:
>
>
>
> Thanks for your reply.
> I am working with an index which is created separately. It is created with
> a
> StandardTokenizer.
> I have read there should be used the same tokenizer which the index was
> created with.
> Anyway, I have tried other tokenizers while consulting, such as the
> WhitespaceTokenizer, but the same results happen.
> So, does it boil down to the tokenizer which the index was created with?
>
> Thanks a lot.
> Diego
>
> Ps. Yes, I was using Luke which works great. But anyway, things like <*
> dont
> work in any analyser -- don give me any results, although searching in the
> db gives me loads -- and also i can get those results (via searching other
> fields) on luke and i can see the text is there, the < and > are there.
>
>
> Erick Erickson wrote:
> >
> > Sure, your problem is probably that the query goes through an analyzer
> and
> > its associated tokenizer. Probably something like StandardAnalyzer which
> > "massages" the input and strips out most non-alphabetic characters,....
> > except some. It tries to be smart about URLs, e-mail addresses, etc.
> >
> > If you're new, I recommend you use WhitespaceAnalyzer until you get
> > familiar
> > with what analyzers do for you. Be aware that WhitespaceAnalyzer does
> NOT
> > automatically lower-case your input, so "Which" won't match "which".
> It's
> > easy enough to make your own analyzer by subclassing of the standard
> ones.
> > The book "Lucene in Action " is valuable for this, although you should
> be
> > aware that it was written to the 1.4 codebase, so there are a few
> > differences.
> >
> > It is important that the analyzer you use at *index* time is compatible
> > with
> > the one you use at *query* time. Until you're more familiar with this, I
> > simply recommend you use the *same* analyzer at index time that you use
> at
> > search time. That'll give you more intuitive results. You'll want to
> > refine
> > the use of analyzers later...
> >
> > I also recommend that you get a copy of luke (google lucene luke). It
> will
> > allow you to examine your index, parse queries through the GUI, examine
> > the
> > effects of different analyzers on input etc. It's a great tool and one
> > that'll make your life much easier.
> >
> > Best
> > Erick
> >
> >
> > On 1/29/07, poeta simbolista <poetasimbolista@gmail.com> wrote:
> >>
> >>
> >> Hi there, this is my very first post at this forum... please be
> >> considerate
> >> :)
> >>
> >> Well, i have a problem when sending a query such as:
> >>
> >> +description:<
> >>
> >> Once the query is parsed, it returns me the empty String, which means
> the
> >> String "<" that i want to search for on the field description is
> ignored.
> >> If i use normal words then it is taken. Do you know why this could be?
> >> Thanks.
> >> --
> >> View this message in context:
> >> http://www.nabble.com/Problem-with-lucene.-tf3137405.html#a8694565
> >> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
> >>
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >
> >
>
> --
> View this message in context:
> http://www.nabble.com/Problems-with-some-characters-tf3137405.html#a8707691
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_101839_8154972.1170165751385--

From java-user-return-25822-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 30 14:07:48 2007
Return-Path: <java-user-return-25822-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61309 invoked from network); 30 Jan 2007 14:07:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Jan 2007 14:07:47 -0000
Received: (qmail 34855 invoked by uid 500); 30 Jan 2007 14:07:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34673 invoked by uid 500); 30 Jan 2007 14:07:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34662 invoked by uid 99); 30 Jan 2007 14:07:46 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Jan 2007 06:07:46 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 66.249.92.170 as permitted sender)
Received: from [66.249.92.170] (HELO ug-out-1314.google.com) (66.249.92.170)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Jan 2007 06:07:37 -0800
Received: by ug-out-1314.google.com with SMTP id k40so1578777ugc
        for <java-user@lucene.apache.org>; Tue, 30 Jan 2007 06:07:15 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=TUwj0/9HU9y60W+QYlpegcHmcyg3/FDdZpS5ZGAAMt5nY/vO7S2tAL2DXBM/O3ps0iUyUwqnyIGva2fDU1061sNDcl2GPwYSfkaaJ8NPH5qZbYb1cA/WCq0yvtuYvvq+sX/mf7Qe480gFvHvUZMDktvgFudsvzJTJceDmFVOZsc=
Received: by 10.82.120.15 with SMTP id s15mr4379994buc.1170166035300;
        Tue, 30 Jan 2007 06:07:15 -0800 (PST)
Received: by 10.82.162.9 with HTTP; Tue, 30 Jan 2007 06:07:15 -0800 (PST)
Message-ID: <359a92830701300607k6bba8da5n304d1a657fbc7e3c@mail.gmail.com>
Date: Tue, 30 Jan 2007 09:07:15 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Why this query is not correct?
In-Reply-To: <8709041.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_101959_3592633.1170166035187"
References: <8709041.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_101959_3592633.1170166035187
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Because one of the restrictions of wildcards is that they cannot appear as
the first character in a search term if you use QueryParser. QueryParser
rejects it (as you've seen). This is a deliberate design decision since this
query will be humongous and most likely throw a TooManyClauses exception in
any corpus of any size.....

You can create a Filter by enumerating the terms yourself, think about
RegexTermEnum.

Best
Erick

On 1/30/07, poeta simbolista <poetasimbolista@gmail.com> wrote:
>
>
> Hi guys,
> I have been through the docs and I can't see why the parser does not parse
> this correctly:
>
> description:*sql
>
> is not correct:
>
> Lexical error at line 1, column 16.  Encountered: "*" (42), after : ""
>
> However, the following:
>
> description: sql*
>
> is correct.
> Any idea why you can't use wildcard there?
> Cheers
> D
> --
> View this message in context:
> http://www.nabble.com/Why-this-query-is-not-correct--tf3142268.html#a8709041
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_101959_3592633.1170166035187--

From java-user-return-25823-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 30 14:29:30 2007
Return-Path: <java-user-return-25823-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 74178 invoked from network); 30 Jan 2007 14:29:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Jan 2007 14:29:28 -0000
Received: (qmail 72011 invoked by uid 500); 30 Jan 2007 14:29:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71503 invoked by uid 500); 30 Jan 2007 14:29:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71492 invoked by uid 99); 30 Jan 2007 14:29:27 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Jan 2007 06:29:27 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [128.230.18.29] (HELO mailer.syr.edu) (128.230.18.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Jan 2007 06:29:18 -0800
Received: from [128.230.84.138] (syru84-138.syr.edu) by mailer.syr.edu (LSMTP for Windows NT v1.1b) with SMTP id <0.15E20BAB@mailer.syr.edu>; Tue, 30 Jan 2007 9:28:57 -0500
Message-ID: <45BF5629.50309@syr.edu>
Date: Tue, 30 Jan 2007 09:28:57 -0500
From: Steven Rowe <sarowe@syr.edu>
User-Agent: Mail/News 1.5.0.4-GroupWise-IMAP-fix (Windows/20060619)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Why this query is not correct?
References: <8709041.post@talk.nabble.com>
In-Reply-To: <8709041.post@talk.nabble.com>
X-Enigmail-Version: 0.94.1.2
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Check out QueryParser.setAllowLeadingWildcard():
<http://lucene.apache.org/java/docs/api/org/apache/lucene/queryParser/QueryParser.html#setAllowLeadingWildcard(boolean)>

(though AFAICT this feature is not in any released version of Lucene yet
- you'll have to use a nightly build).

poeta simbolista wrote:
> Hi guys,
> I have been through the docs and I can't see why the parser does not parse
> this correctly:
> 
> description:*sql
> 
> is not correct:
> 
> Lexical error at line 1, column 16.  Encountered: "*" (42), after : ""
> 
> However, the following:
> 
> description: sql* 
> 
> is correct.
> Any idea why you can't use wildcard there?
> Cheers
>  D


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25824-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 30 14:52:58 2007
Return-Path: <java-user-return-25824-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86695 invoked from network); 30 Jan 2007 14:52:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Jan 2007 14:52:58 -0000
Received: (qmail 7354 invoked by uid 500); 30 Jan 2007 14:52:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7316 invoked by uid 500); 30 Jan 2007 14:52:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7305 invoked by uid 99); 30 Jan 2007 14:52:57 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Jan 2007 06:52:57 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,UNPARSEABLE_RELAY
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [136.173.162.228] (HELO SMTP35.europarl.europa.eu) (136.173.162.228)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Jan 2007 06:52:47 -0800
Received: from EMAILBRUSV42.ep.parl.union.eu (unverified) by SMTP35.europarl.europa.eu
 (European Parliament) with ESMTP id <T7d801cc48888ada2e41e90@SMTP35.europarl.europa.eu> for <java-user@lucene.apache.org>;
 Tue, 30 Jan 2007 15:51:20 +0100
Received: from epbrusa23.ep.parl.union.eu ([136.173.156.20]) by EMAILBRUSV42.ep.parl.union.eu with Microsoft SMTPSVC(6.0.3790.1830);
	 Tue, 30 Jan 2007 15:52:25 +0100
Received: from EPLUXSEX01.ep.parl.union.eu ([136.173.56.16]) by epbrusa23.ep.parl.union.eu with Microsoft SMTPSVC(5.0.2195.6713);
	 Tue, 30 Jan 2007 15:52:24 +0100
X-MimeOLE: Produced By Microsoft Exchange V6.0.6603.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C7447E.1E5624C4"
Subject: RAMDirectory
Date: Tue, 30 Jan 2007 15:51:26 +0100
Message-ID: <CA7398CB8402E445AABF081C51E43ACB059ED4@EPLUXSEX01.ep.parl.union.eu>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: RAMDirectory
Thread-Index: AcdEfh5PX14Tg/tBSVqbTJ77gGfcEA==
From: "WATHELET Thomas" <thomas.wathelet@europarl.europa.eu>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 30 Jan 2007 14:52:24.0890 (UTC) FILETIME=[40E891A0:01C7447E]
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01C7447E.1E5624C4
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

I'm using RAMDirectory ....
If the number of documents to index is less than the maxBufferedDocs
properties nothing is write into my index.
ex:  RAMDirectory ramDir =3Dnew RAMDirectory ();
        this.indexWriter.addIndexes(new Directory[] { ramDir });
        ramWriter.close();
        indexWriter.close();
???
=20

------_=_NextPart_001_01C7447E.1E5624C4--

From java-user-return-25825-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 30 15:23:44 2007
Return-Path: <java-user-return-25825-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4066 invoked from network); 30 Jan 2007 15:23:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Jan 2007 15:23:44 -0000
Received: (qmail 81263 invoked by uid 500); 30 Jan 2007 15:23:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81228 invoked by uid 500); 30 Jan 2007 15:23:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81216 invoked by uid 99); 30 Jan 2007 15:23:43 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Jan 2007 07:23:43 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,UNPARSEABLE_RELAY
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [136.173.162.228] (HELO SMTP35.europarl.europa.eu) (136.173.162.228)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Jan 2007 07:23:33 -0800
Received: from EMAILBRUSV42.ep.parl.union.eu (unverified) by SMTP35.europarl.europa.eu
 (European Parliament) with ESMTP id <T7d8038f11e88ada2e41e90@SMTP35.europarl.europa.eu> for <java-user@lucene.apache.org>;
 Tue, 30 Jan 2007 16:22:07 +0100
Received: from EPBRUSEX01.ep.parl.union.eu ([136.173.156.28]) by EMAILBRUSV42.ep.parl.union.eu with Microsoft SMTPSVC(6.0.3790.1830);
	 Tue, 30 Jan 2007 16:23:11 +0100
Received: from EPLUXSEX01.ep.parl.union.eu ([136.173.56.16]) by EPBRUSEX01.ep.parl.union.eu with Microsoft SMTPSVC(5.0.2195.6713);
	 Tue, 30 Jan 2007 16:23:05 +0100
X-MimeOLE: Produced By Microsoft Exchange V6.0.6603.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C74482.824C8538"
Subject: RAMDirectory 2
Date: Tue, 30 Jan 2007 16:22:52 +0100
Message-ID: <CA7398CB8402E445AABF081C51E43ACB08F3D7@EPLUXSEX01.ep.parl.union.eu>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: RAMDirectory 2
Thread-Index: AcdEgoJMZPtfSnCOSmqnM0Oxq41K0Q==
From: "WATHELET Thomas" <thomas.wathelet@europarl.europa.eu>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 30 Jan 2007 15:23:05.0312 (UTC) FILETIME=[89E2AE00:01C74482]
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01C74482.824C8538
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

P.S. At one point I tried doing an in-memory index using the
RAMDirectory and then merging it with an on-disk index and it didn't
work.  The RAMDirectory never flushed to disk... leaving me with an
empty index.
Only when the number of documents is greather than the maxBufferedDocs
properties.
What I have to do?

------_=_NextPart_001_01C74482.824C8538--

From java-user-return-25826-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 30 16:18:55 2007
Return-Path: <java-user-return-25826-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33984 invoked from network); 30 Jan 2007 16:18:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Jan 2007 16:18:52 -0000
Received: (qmail 97301 invoked by uid 500); 30 Jan 2007 16:18:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97273 invoked by uid 500); 30 Jan 2007 16:18:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97262 invoked by uid 99); 30 Jan 2007 16:18:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Jan 2007 08:18:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [206.190.38.58] (HELO web50304.mail.yahoo.com) (206.190.38.58)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 30 Jan 2007 08:18:42 -0800
Received: (qmail 30536 invoked by uid 60001); 30 Jan 2007 16:18:20 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=e0ng7vLRXDUyBU1UNnyx3TZe2TrvudF0uEd6pzN5AVZa54XKM7nQvIHZDIJEpN7sKIxY5C+wkK5OqOFB008wnwg8NNs5MgWuC38+1tmUgCQWMw7YLpI2ELPxP4LVVIQ0n6YyrZwH0H0zKtScVje+M4vN5axZQVBy7cE6oZW/kTM=;
X-YMail-OSG: EZcWl7wVM1noEmo_Aw4bsM8MJ7TqczyoobfAtLqy0Ur9mgCxjIUIT3Vy6PHpI3SGQusuXeGy1jxqhg0w.VrgKvP3jDoNmdPLPsYo64FI6es2gOamOjv9dH5uW6DzvWpTXCzcxYMTu9x36w--
Received: from [58.63.150.241] by web50304.mail.yahoo.com via HTTP; Tue, 30 Jan 2007 08:18:19 PST
X-Mailer: YahooMailRC/368.3 YahooMailWebService/0.6.132.7
Date: Tue, 30 Jan 2007 08:18:19 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: RAMDirectory 2
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable
Message-ID: <358445.29471.qm@web50304.mail.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Sounds vaguely familiar... and I think this was fixed a while back.  Runnin=
g HEAD or at least 2.0.0?=0A=0AOtis=0A=0A----- Original Message ----=0AFrom=
: WATHELET Thomas <thomas.wathelet@europarl.europa.eu>=0ATo: java-user@luce=
ne.apache.org=0ASent: Tuesday, January 30, 2007 11:22:52 PM=0ASubject: RAMD=
irectory 2=0A=0A=0AP.S. At one point I tried doing an in-memory index using=
 the=0ARAMDirectory and then merging it with an on-disk index and it didn't=
=0Awork.  The RAMDirectory never flushed to disk... leaving me with an=0Aem=
pty index.=0AOnly when the number of documents is greather than the maxBuff=
eredDocs=0Aproperties.=0AWhat I have to do?

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25827-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 30 16:22:06 2007
Return-Path: <java-user-return-25827-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36186 invoked from network); 30 Jan 2007 16:22:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Jan 2007 16:22:05 -0000
Received: (qmail 4424 invoked by uid 500); 30 Jan 2007 16:22:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4386 invoked by uid 500); 30 Jan 2007 16:22:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4375 invoked by uid 99); 30 Jan 2007 16:22:04 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Jan 2007 08:22:04 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,UNPARSEABLE_RELAY
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of Xavier.To@axa-canada.com designates 206.47.141.39 as permitted sender)
Received: from [206.47.141.39] (HELO SSMTL104.axa-canada.com) (206.47.141.39)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Jan 2007 08:21:56 -0800
X-AuditID: 0a0102fb-00000fb800001174-5e-45bf709162c1 
Received: from SSMTL102 ([10.1.2.253]) by SSMTL104.axa-canada.com with Microsoft SMTPSVC(6.0.3790.1830);
	 Tue, 30 Jan 2007 11:21:37 -0500
Received: from  ([142.216.40.176]) by SSMTL102; Tue, 30 Jan 2007 11:21:33 -0500 (EST)
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1807
Content-Class: urn:content-classes:message
MIME-Version: 1.0
Content-Transfer-Encoding: 7bit
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C7448A.B148CA28"
Subject: Problem with a search engine
Importance: normal
Priority: normal
Date: Tue, 30 Jan 2007 11:21:27 -0500
Message-ID: <CB2E54B7A116DA4B9DE3E41123901D454F38B4@smmtl102.axa.ca>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Problem with a search engine
thread-index: AcdEipjRsTym0PbYQpW8/YTHuJ3R5w==
From: "To, Xavier" <Xavier.To@axa-canada.com>
To: <java-user@lucene.apache.org>
X-Brightmail-Tracker: AAAAAA==
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01C7448A.B148CA28
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

Hi, I recently started an internship and I've been asked to fix their
search engine so numbers are searched. At first, I thought it was the
Analyzer that wasn't working right, but we're using StandardAnalyzer and
the numbers are indexed (I checked with Lukeall). Then I thought they
are not tokenized during the search, but they are. They just seem to be
ignored for some reason. Did anyone experienced something similar ? If
so, how can I fix this ? It's probably something that would jump in my
face if it was alive, but I just can't see it. Can anyone help me ? It
would be very much appreciated.

=20
Xavier T=F4
Stagiaire
D=E9veloppement - Maintenance & =C9volution=20
AXA Canada Tech
2020, rue University, bureau 700
Montr=E9al(Qu=E9bec)H3A 2A5
T=E9l. :  (514) 282-6817, poste 2224
T=E9l=E9c. :  (514) 282-6017
Courriel : Xavier.To@axa-canada.com <mailto:Xavier.To@axa-canada.com>
  _____ =20

"Ce message est confidentiel, =E0 l'usage exclusif du destinataire
ci-dessus et son contenu ne repr=E9sente en aucun cas un engagement de =
la
part de AXA, sauf en cas de stipulation expresse et par =E9crit de la =
part
de AXA. Toute publication, utilisation ou diffusion, m=EAme partielle,
doit =EAtre autoris=E9e pr=E9alablement. Si vous n'=EAtes pas =
destinataire de ce
message, merci d'en avertir imm=E9diatement l'exp=E9diteur."

"This e-mail message is confidential, for the exclusive use of the
addressee and its contents shall not constitute a commitment by AXA,
except as otherwise specifically provided in writing by AXA. Any
unauthorized disclosure, use or dissemination, either whole or partial,
is prohibited. If you are not the intended recipient of the message,
please notify the sender immediately."

------_=_NextPart_001_01C7448A.B148CA28--

From java-user-return-25828-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 30 16:31:51 2007
Return-Path: <java-user-return-25828-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45828 invoked from network); 30 Jan 2007 16:31:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Jan 2007 16:31:50 -0000
Received: (qmail 29805 invoked by uid 500); 30 Jan 2007 16:31:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29781 invoked by uid 500); 30 Jan 2007 16:31:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29770 invoked by uid 99); 30 Jan 2007 16:31:49 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Jan 2007 08:31:49 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [206.190.39.202] (HELO web50311.mail.yahoo.com) (206.190.39.202)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 30 Jan 2007 08:31:39 -0800
Received: (qmail 28576 invoked by uid 60001); 30 Jan 2007 16:31:16 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=EoxCewSyYqLsa7XuBf0E3WRmrDHADl4KOt707YwTIEfoPdOR+K7I/3g9yQ6JN4bkP34u8kMGGh4O0LBwWIJw/UUwLrlzKeO9YjsoQvNFrJXEokDl8LVELkBQqVbp0mqH3WwJB5MK8mu/4MGdVdCGYeXc1nh+pmih/gn5JMjLB2c=;
Received: from [58.63.150.241] by web50311.mail.yahoo.com via HTTP; Tue, 30 Jan 2007 08:31:16 PST
X-Mailer: YahooMailRC/368.3 YahooMailWebService/0.6.132.7
Date: Tue, 30 Jan 2007 08:31:16 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Problem with a search engine
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable
Message-ID: <400656.27048.qm@web50311.mail.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hard to tell without seeing any code.  Perhaps numbers are being removed fr=
om the query string during search.=0AMake sure the same or at least "compat=
ible" Analyzer is used during both indexing and querying.=0AGrab the code f=
rom Lucene in Action .... hm, lucenebook.com may be down at the moment, but=
 that's where you can get the code normally.  The code includes some classe=
s that let you run a query string through a set of Analyzers and see how ea=
ch of them behaves and what it does to a query.=0A=0AOtis=0A=0A----- Origin=
al Message ----=0AFrom: "To, Xavier" <Xavier.To@axa-canada.com>=0ATo: java-=
user@lucene.apache.org=0ASent: Wednesday, January 31, 2007 12:21:27 AM=0ASu=
bject: Problem with a search engine=0A=0A=0AHi, I recently started an inter=
nship and I've been asked to fix their=0Asearch engine so numbers are searc=
hed. At first, I thought it was the=0AAnalyzer that wasn't working right, b=
ut we're using StandardAnalyzer and=0Athe numbers are indexed (I checked wi=
th Lukeall). Then I thought they=0Aare not tokenized during the search, but=
 they are. They just seem to be=0Aignored for some reason. Did anyone exper=
ienced something similar ? If=0Aso, how can I fix this ? It's probably some=
thing that would jump in my=0Aface if it was alive, but I just can't see it=
. Can anyone help me ? It=0Awould be very much appreciated.=0A=0A=0AXavier =
T=F4=0AStagiaire=0AD=E9veloppement - Maintenance & =C9volution =0AAXA Canad=
a Tech=0A2020, rue University, bureau 700=0AMontr=E9al(Qu=E9bec)H3A 2A5=0AT=
=E9l. :  (514) 282-6817, poste 2224=0AT=E9l=E9c. :  (514) 282-6017=0ACourri=
el : Xavier.To@axa-canada.com <mailto:Xavier.To@axa-canada.com>=0A  _____  =
=0A=0A"Ce message est confidentiel, =E0 l'usage exclusif du destinataire=0A=
ci-dessus et son contenu ne repr=E9sente en aucun cas un engagement de la=
=0Apart de AXA, sauf en cas de stipulation expresse et par =E9crit de la pa=
rt=0Ade AXA. Toute publication, utilisation ou diffusion, m=EAme partielle,=
=0Adoit =EAtre autoris=E9e pr=E9alablement. Si vous n'=EAtes pas destinatai=
re de ce=0Amessage, merci d'en avertir imm=E9diatement l'exp=E9diteur."=0A=
=0A"This e-mail message is confidential, for the exclusive use of the=0Aadd=
ressee and its contents shall not constitute a commitment by AXA,=0Aexcept =
as otherwise specifically provided in writing by AXA. Any=0Aunauthorized di=
sclosure, use or dissemination, either whole or partial,=0Ais prohibited. I=
f you are not the intended recipient of the message,=0Aplease notify the se=
nder immediately."

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25829-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 30 16:34:17 2007
Return-Path: <java-user-return-25829-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47273 invoked from network); 30 Jan 2007 16:34:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Jan 2007 16:34:17 -0000
Received: (qmail 36109 invoked by uid 500); 30 Jan 2007 16:34:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36071 invoked by uid 500); 30 Jan 2007 16:34:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 35938 invoked by uid 99); 30 Jan 2007 16:34:14 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Jan 2007 08:34:14 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=UNPARSEABLE_RELAY
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [136.173.162.228] (HELO SMTP35.europarl.europa.eu) (136.173.162.228)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Jan 2007 08:34:03 -0800
Received: from EMAILBRUSV42.ep.parl.union.eu (unverified) by SMTP35.europarl.europa.eu
 (European Parliament) with ESMTP id <T7d8079796288ada2e41e90@SMTP35.europarl.europa.eu> for <java-user@lucene.apache.org>;
 Tue, 30 Jan 2007 17:32:36 +0100
Received: from epluxsex03.ep.parl.union.eu ([136.173.56.21]) by EMAILBRUSV42.ep.parl.union.eu with Microsoft SMTPSVC(6.0.3790.1830);
	 Tue, 30 Jan 2007 17:33:40 +0100
Received: from EPLUXSEX01.ep.parl.union.eu ([136.173.56.16]) by epluxsex03.ep.parl.union.eu with Microsoft SMTPSVC(5.0.2195.6713);
	 Tue, 30 Jan 2007 17:33:40 +0100
X-MimeOLE: Produced By Microsoft Exchange V6.0.6603.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: RAMDirectory 2
Date: Tue, 30 Jan 2007 17:33:17 +0100
Message-ID: <CA7398CB8402E445AABF081C51E43ACB08F3DA@EPLUXSEX01.ep.parl.union.eu>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: RAMDirectory 2
Thread-Index: AcdEilK9I6h2U93VStGy90o7OjxrIgAAegeA
From: "WATHELET Thomas" <thomas.wathelet@europarl.europa.eu>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 30 Jan 2007 16:33:40.0142 (UTC) FILETIME=[660A74E0:01C7448C]
X-Virus-Checked: Checked by ClamAV on apache.org

I'm using now lucene-core-2.0.0.jar(26-05-2006) and I still have the
trouble...=20

-----Original Message-----
From: Otis Gospodnetic [mailto:otis_gospodnetic@yahoo.com]=20
Sent: 30 January 2007 17:18
To: java-user@lucene.apache.org
Subject: Re: RAMDirectory 2

Sounds vaguely familiar... and I think this was fixed a while back.
Running HEAD or at least 2.0.0?

Otis

----- Original Message ----
From: WATHELET Thomas <thomas.wathelet@europarl.europa.eu>
To: java-user@lucene.apache.org
Sent: Tuesday, January 30, 2007 11:22:52 PM
Subject: RAMDirectory 2


P.S. At one point I tried doing an in-memory index using the
RAMDirectory and then merging it with an on-disk index and it didn't
work.  The RAMDirectory never flushed to disk... leaving me with an
empty index.
Only when the number of documents is greather than the maxBufferedDocs
properties.
What I have to do?

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25830-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 30 19:49:29 2007
Return-Path: <java-user-return-25830-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 24594 invoked from network); 30 Jan 2007 19:49:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Jan 2007 19:49:11 -0000
Received: (qmail 82180 invoked by uid 500); 30 Jan 2007 19:49:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82143 invoked by uid 500); 30 Jan 2007 19:49:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82132 invoked by uid 99); 30 Jan 2007 19:49:09 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Jan 2007 11:49:09 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Jan 2007 11:49:01 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id D08DE5B773; Tue, 30 Jan 2007 11:48:40 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id CA43E7F403
	for <java-user@lucene.apache.org>; Tue, 30 Jan 2007 11:48:40 -0800 (PST)
Date: Tue, 30 Jan 2007 11:48:40 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: RE: Score
In-Reply-To: <EBC8F228BDB35A4394D0BE53DA25248808A9A2AB@SPMWB02L.luinternal.fortis.bank>
Message-ID: <Pine.LNX.4.58.0701301145440.18851@hal.rescomp.berkeley.edu>
References: <EBC8F228BDB35A4394D0BE53DA25248808A9A2AB@SPMWB02L.luinternal.fortis.bank>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: I make a BooleanQuery with the input of the user and include in the query
: title:keywordofuser headlines:keywordofuser content:keywordofuser
: I tried to Boost field title, then if keyword appear in the title, score grows like I want to, but if keyword occurs in content or headlines score decrease more than before ...
: I would like to have a score independent for each query in the BooleanQuery, sounds basic but I just can't achieve this.
: Is this also possible to change ?

it's really not clear to me what you are asking ... what do you mean
the score is decreased if the keyword appears in the content? ... how can
the score be independent of the sub queries? -- the subqueries are what
determine the score, there is nothing else.

Have you looked at the constructor for BooleanQuery and tried passing
"true" to disable the Coord factor? ... that eliminates the pnalty
documents get for only matching some of the clauses of a BooleanQuery --
which may be what you are describing (i'm really not sure)



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25831-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 30 19:56:34 2007
Return-Path: <java-user-return-25831-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 29042 invoked from network); 30 Jan 2007 19:56:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Jan 2007 19:56:32 -0000
Received: (qmail 93524 invoked by uid 500); 30 Jan 2007 19:56:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93221 invoked by uid 500); 30 Jan 2007 19:56:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93210 invoked by uid 99); 30 Jan 2007 19:56:32 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Jan 2007 11:56:32 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Jan 2007 11:56:23 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 1DE925B775; Tue, 30 Jan 2007 11:56:03 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 17D387F403
	for <java-user@lucene.apache.org>; Tue, 30 Jan 2007 11:56:03 -0800 (PST)
Date: Tue, 30 Jan 2007 11:56:03 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: RAMDirectory
In-Reply-To: <CA7398CB8402E445AABF081C51E43ACB059ED4@EPLUXSEX01.ep.parl.union.eu>
Message-ID: <Pine.LNX.4.58.0701301153000.18851@hal.rescomp.berkeley.edu>
References: <CA7398CB8402E445AABF081C51E43ACB059ED4@EPLUXSEX01.ep.parl.union.eu>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org

: I'm using RAMDirectory ....
: If the number of documents to index is less than the maxBufferedDocs
: properties nothing is write into my index.
: ex:  RAMDirectory ramDir =new RAMDirectory ();
:         this.indexWriter.addIndexes(new Directory[] { ramDir });
:         ramWriter.close();
:         indexWriter.close();

it's not really clear to me what that code is suppose to be doing what is
rawWriter? are you ever adding any docs to the ramDir? ... without seeing
any of these things happen (and in what order they happen) it's hard to
guess what might be going wrong.

if i had to guess i'd suppose that you are adding documents to your ramDir
using ramWriter, but you don't close your ramWriter untill after you pass
the ramDir to this.indexWriter.addIndexes.

a RamDirectory is just like an FSDirectory -- no "files" get written to
it until maxBufferedDocs is reached, or the writer is closed.


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25832-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 30 19:58:56 2007
Return-Path: <java-user-return-25832-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 29354 invoked from network); 30 Jan 2007 19:58:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Jan 2007 19:58:55 -0000
Received: (qmail 97785 invoked by uid 500); 30 Jan 2007 19:58:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97755 invoked by uid 500); 30 Jan 2007 19:58:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97744 invoked by uid 99); 30 Jan 2007 19:58:55 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Jan 2007 11:58:55 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of bharath.nott@gmail.com designates 64.233.184.237 as permitted sender)
Received: from [64.233.184.237] (HELO wr-out-0506.google.com) (64.233.184.237)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Jan 2007 11:58:45 -0800
Received: by wr-out-0506.google.com with SMTP id i4so1539957wra
        for <java-user@lucene.apache.org>; Tue, 30 Jan 2007 11:58:24 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:cc:in-reply-to:mime-version:content-type:references;
        b=K/a4w766mxg/2q9ClXW/f0b2NxqDUGiomDTud+fuCHNXkAe02jvav+Yh3/Ts9KuSAhp8obrfnfwalMXXhAkf6YIdfjucvnP0M/CEKpyhXBcoRfv/sxG+mu2UMSd8qCukp9sDjvwlgdFsxtnQknZbpz9J+l2NFy9hzxFVeUR+ZAk=
Received: by 10.90.86.10 with SMTP id j10mr9071155agb.1170187103837;
        Tue, 30 Jan 2007 11:58:23 -0800 (PST)
Received: by 10.90.93.2 with HTTP; Tue, 30 Jan 2007 11:58:23 -0800 (PST)
Message-ID: <ede880620701301158k7350f629x888a983e245bedf@mail.gmail.com>
Date: Tue, 30 Jan 2007 14:58:23 -0500
From: Nott <bharath.nott@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Score
Cc: hossman_lucene@fucit.org
In-Reply-To: <Pine.LNX.4.58.0701301145440.18851@hal.rescomp.berkeley.edu>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_10537_12017554.1170187103793"
References: <EBC8F228BDB35A4394D0BE53DA25248808A9A2AB@SPMWB02L.luinternal.fortis.bank>
	 <Pine.LNX.4.58.0701301145440.18851@hal.rescomp.berkeley.edu>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_10537_12017554.1170187103793
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi
Thanks for the response
To explain more clear  say I search on the Author field .

Consider by data resides as follows

Author                    title
Jess Hopkins          ABC
Jess howard            CCC
James Hopkins       ZZZ
Jess Hopkins          RRR

I want all documents that were created by say Jess Hopkins

My query goes like this
author: Jess Hopkins

I want the results to be returned for me in the following order
Author                    title
Jess Hopkins          ABC
Jess Hopkins          RRR
Jess howard            CCC
James Hopkins       ZZZ

But my result is in a different order
Author                    title
Jess howard            CCC
Jess Hopkins          RRR
James Hopkins       ZZZ
Jess Hopkins          ABC

It is not ordering based on the full text i give. It is taking each word and
ordering accordingly ? Is that some thing additional I should say to
retrieve the most matching  String first and the rest later ?


Bharath

On 1/30/07, Chris Hostetter <hossman_lucene@fucit.org> wrote:
>
>
> : I make a BooleanQuery with the input of the user and include in the
> query
> : title:keywordofuser headlines:keywordofuser content:keywordofuser
> : I tried to Boost field title, then if keyword appear in the title, score
> grows like I want to, but if keyword occurs in content or headlines score
> decrease more than before ...
> : I would like to have a score independent for each query in the
> BooleanQuery, sounds basic but I just can't achieve this.
> : Is this also possible to change ?
>
> it's really not clear to me what you are asking ... what do you mean
> the score is decreased if the keyword appears in the content? ... how can
> the score be independent of the sub queries? -- the subqueries are what
> determine the score, there is nothing else.
>
> Have you looked at the constructor for BooleanQuery and tried passing
> "true" to disable the Coord factor? ... that eliminates the pnalty
> documents get for only matching some of the clauses of a BooleanQuery --
> which may be what you are describing (i'm really not sure)
>
>
>
> -Hoss
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
~B

------=_Part_10537_12017554.1170187103793--

From java-user-return-25833-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jan 30 23:55:14 2007
Return-Path: <java-user-return-25833-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 14911 invoked from network); 30 Jan 2007 23:55:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Jan 2007 23:55:13 -0000
Received: (qmail 97095 invoked by uid 500); 30 Jan 2007 23:55:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96132 invoked by uid 500); 30 Jan 2007 23:55:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96114 invoked by uid 99); 30 Jan 2007 23:55:13 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Jan 2007 15:55:12 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [212.226.92.15] (HELO monkey.teamware.com) (212.226.92.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Jan 2007 15:55:04 -0800
Received: from nimitz (nimitz.teamw.com [10.142.128.10])
	by monkey.teamware.com (8.13.1/8.13.1) with ESMTP id l0UNscHk004034
	for <java-user@lucene.apache.org>; Wed, 31 Jan 2007 01:54:38 +0200
Received: from [10.142.3.11] ([10.142.3.11]) by nimitz with ESMTP
	 id m1v1ilod; 31 Jan 2007 01:54:00 +0200
Message-ID: <45BFDAAD.9070900@teamware.com>
Date: Wed, 31 Jan 2007 10:54:21 +1100
From: Antony Bowesman <adb@teamware.com>
Organization: Teamware Group
User-Agent: Thunderbird 1.5 (Windows/20051201)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Boost/Scoring question
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Greylist: Sender IP whitelisted, not delayed by milter-greylist-1.6 (monkey.teamware.com [212.226.92.15]); Wed, 31 Jan 2007 01:54:38 +0200 (EET)
X-TWG-MailScanner-Information: See www.mailscanner.info for information
X-TWG-MailScanner: Found to be clean
X-TWG-MailScanner-SpamCheck: not spam, SpamAssassin (score=0.001, required 5,
	autolearn=not spam, BAYES_50 0.00)
X-MailScanner-From: adb@teamware.com
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

In trying to understand scoring and boosting a bit better, I tried setting a 
boost of 0.0F for a field.  As it's used as a multiplier, I wanted to see how it 
affects score.

I added a single document with two fields, one with the default boost and 
another with a boost of 0.0F.  hits.score(0) = 0.10848885, but Explanation shows:

0.0 = match required

whereas if I increase the boost to 0.001, then I get a full explanation as normal.

In the words of LIA, can someone do some 'splainin'
Antony


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25834-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 31 00:04:07 2007
Return-Path: <java-user-return-25834-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 16494 invoked from network); 31 Jan 2007 00:04:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Jan 2007 00:04:06 -0000
Received: (qmail 12334 invoked by uid 500); 31 Jan 2007 00:04:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12304 invoked by uid 500); 31 Jan 2007 00:04:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12293 invoked by uid 99); 31 Jan 2007 00:04:05 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Jan 2007 16:04:05 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of ridabenjelloun@gmail.com designates 66.249.82.229 as permitted sender)
Received: from [66.249.82.229] (HELO wx-out-0506.google.com) (66.249.82.229)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Jan 2007 16:03:56 -0800
Received: by wx-out-0506.google.com with SMTP id i29so31587wxd
        for <java-user@lucene.apache.org>; Tue, 30 Jan 2007 16:03:35 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:references:x-google-sender-auth;
        b=lNH8GV4J7X6f6YQE4Fz94VlZrdDxd1VZGlCzKHbswJTQOr+FfGAhMK+WEDqWjI5V8vWmcwD92g0xtGaDcvLeuNJpmSRASHOAc809cFaQ5kZPgYOTR7LohCfBar7pL8Hayc/+2iDRkSP/WMGhyVqlTGDt42tK2BHyn/XttDCVIHc=
Received: by 10.70.50.18 with SMTP id x18mr113915wxx.1170201815164;
        Tue, 30 Jan 2007 16:03:35 -0800 (PST)
Received: by 10.70.125.9 with HTTP; Tue, 30 Jan 2007 16:03:35 -0800 (PST)
Message-ID: <79976ce70701301603h63671deegf17f525da8e63b36@mail.gmail.com>
Date: Tue, 30 Jan 2007 16:03:35 -0800
From: "Rida Benjelloun" <rida.benjelloun@doculibre.com>
Sender: ridabenjelloun@gmail.com
To: java-user@lucene.apache.org
Subject: Re: Anyone have an XMLAnalyzer?
In-Reply-To: <aperez-6A3984.20275725012007@sea.gmane.org>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_41957_7058104.1170201815130"
References: <pan.2007.01.25.20.03.29.303869@hayesinc.com>
	 <f18c9dde0701251329uf2f1e45w726e010722839e01@mail.gmail.com>
	 <aperez-6A3984.20275725012007@sea.gmane.org>
X-Google-Sender-Auth: dc9641d8602b598d
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_41957_7058104.1170201815130
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Hi,
You can use Lius to index XML document.
http://sourceforge.net/projects/lius/
http://www.doculibre.com/lius/doc-1.0_en.html

On 1/25/07, Arturo P=E9rez <aperez@hayesinc.com> wrote:
>
> In article
> <f18c9dde0701251329uf2f1e45w726e010722839e01@mail.gmail.com>,
> "Simon Willnauer" <simon.willnauer@googlemail.com> wrote:
>
> >
> http://www.google.com/search?hl=3Dde&q=3DLucene+XML+analyze&btnG=3DGoogle=
-Suche&meta
> > =3D
>
> Yeah, I'd seen that.  I was hoping for something a bit more tightly
> integrated than Digester.  More specifically, I already parse my
> documents with SAX and save the indexable stuff. But I pass plaintext to
> the indexer and I have a problem with the highlighter against the XML.
>
> What I'd like to do is insert markup XML into the document's XML and
> pass it through a style sheet.  But I can't pass XML directly into the
> index because of all the XML syntax.  My assumption was that a
> XMLAnalyzer would address the issue because the tokens would have the
> correct offsets etc.
>
> -arturo
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_41957_7058104.1170201815130--

From java-user-return-25835-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 31 00:24:03 2007
Return-Path: <java-user-return-25835-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21617 invoked from network); 31 Jan 2007 00:24:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Jan 2007 00:24:03 -0000
Received: (qmail 36198 invoked by uid 500); 31 Jan 2007 00:24:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36165 invoked by uid 500); 31 Jan 2007 00:24:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36153 invoked by uid 99); 31 Jan 2007 00:24:01 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Jan 2007 16:24:01 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Jan 2007 16:23:52 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 3794E5B773; Tue, 30 Jan 2007 16:23:31 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 16C7C7F403;
	Tue, 30 Jan 2007 16:23:31 -0800 (PST)
Date: Tue, 30 Jan 2007 16:23:31 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: Nott <bharath.nott@gmail.com>
Cc: Lucene Users <java-user@lucene.apache.org>
Subject: Re: Score
In-Reply-To: <ede880620701301158k7350f629x888a983e245bedf@mail.gmail.com>
Message-ID: <Pine.LNX.4.58.0701301621160.24685@hal.rescomp.berkeley.edu>
References: <EBC8F228BDB35A4394D0BE53DA25248808A9A2AB@SPMWB02L.luinternal.fortis.bank>
  <Pine.LNX.4.58.0701301145440.18851@hal.rescomp.berkeley.edu>
 <ede880620701301158k7350f629x888a983e245bedf@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org



1) did you look at the Explain output to seee what it's doing?
2) did you look atthe query.toString() of your Query object?

I suspect your query is being parsed as "Jess in the Author field, and
Hopkins in the defaultSearch field" - so the order you cited makes perfect
sense (assuming what you listed is everything in your index)


: Date: Tue, 30 Jan 2007 14:58:23 -0500
: From: Nott <bharath.nott@gmail.com>
: To: java-user@lucene.apache.org
: Cc: hossman_lucene@fucit.org
: Subject: Re: Score
:
: Hi
: Thanks for the response
: To explain more clear  say I search on the Author field .
:
: Consider by data resides as follows
:
: Author                    title
: Jess Hopkins          ABC
: Jess howard            CCC
: James Hopkins       ZZZ
: Jess Hopkins          RRR
:
: I want all documents that were created by say Jess Hopkins
:
: My query goes like this
: author: Jess Hopkins
:
: I want the results to be returned for me in the following order
: Author                    title
: Jess Hopkins          ABC
: Jess Hopkins          RRR
: Jess howard            CCC
: James Hopkins       ZZZ
:
: But my result is in a different order
: Author                    title
: Jess howard            CCC
: Jess Hopkins          RRR
: James Hopkins       ZZZ
: Jess Hopkins          ABC
:
: It is not ordering based on the full text i give. It is taking each word and
: ordering accordingly ? Is that some thing additional I should say to
: retrieve the most matching  String first and the rest later ?
:
:
: Bharath
:
: On 1/30/07, Chris Hostetter <hossman_lucene@fucit.org> wrote:
: >
: >
: > : I make a BooleanQuery with the input of the user and include in the
: > query
: > : title:keywordofuser headlines:keywordofuser content:keywordofuser
: > : I tried to Boost field title, then if keyword appear in the title, score
: > grows like I want to, but if keyword occurs in content or headlines score
: > decrease more than before ...
: > : I would like to have a score independent for each query in the
: > BooleanQuery, sounds basic but I just can't achieve this.
: > : Is this also possible to change ?
: >
: > it's really not clear to me what you are asking ... what do you mean
: > the score is decreased if the keyword appears in the content? ... how can
: > the score be independent of the sub queries? -- the subqueries are what
: > determine the score, there is nothing else.
: >
: > Have you looked at the constructor for BooleanQuery and tried passing
: > "true" to disable the Coord factor? ... that eliminates the pnalty
: > documents get for only matching some of the clauses of a BooleanQuery --
: > which may be what you are describing (i'm really not sure)
: >
: >
: >
: > -Hoss
: >
: >
: > ---------------------------------------------------------------------
: > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
: > For additional commands, e-mail: java-user-help@lucene.apache.org
: >
: >
:
:
: --
: ~B
:



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25836-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 31 00:28:01 2007
Return-Path: <java-user-return-25836-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 23022 invoked from network); 31 Jan 2007 00:28:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Jan 2007 00:27:59 -0000
Received: (qmail 44468 invoked by uid 500); 31 Jan 2007 00:27:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44441 invoked by uid 500); 31 Jan 2007 00:27:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44430 invoked by uid 99); 31 Jan 2007 00:27:58 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Jan 2007 16:27:58 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of ridabenjelloun@gmail.com designates 66.249.82.227 as permitted sender)
Received: from [66.249.82.227] (HELO wx-out-0506.google.com) (66.249.82.227)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Jan 2007 16:27:49 -0800
Received: by wx-out-0506.google.com with SMTP id i29so37165wxd
        for <java-user@lucene.apache.org>; Tue, 30 Jan 2007 16:27:28 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:sender:to:subject:mime-version:content-type:x-google-sender-auth;
        b=HKz011Owet2z7lb8gUTdo3HiI2p9ISlZmSm1g/SwmxI19ygtxvZJkqwIDS2lA1gBs95BdxNl6EnNu4X0rXmFy9Yp+xMTEilltvoWJAMgD9cnviE0ZYU5ZtC+EagMMVdC3ctBwAod3I9wP1nfjRpLeuVfZX+16gCpUYlR7Irqv/o=
Received: by 10.70.115.17 with SMTP id n17mr155867wxc.1170203248199;
        Tue, 30 Jan 2007 16:27:28 -0800 (PST)
Received: by 10.70.125.9 with HTTP; Tue, 30 Jan 2007 16:27:28 -0800 (PST)
Message-ID: <79976ce70701301627t2d876513hb138db6544d97074@mail.gmail.com>
Date: Tue, 30 Jan 2007 16:27:28 -0800
From: "Rida Benjelloun" <rida.benjelloun@doculibre.com>
Sender: ridabenjelloun@gmail.com
To: java-user@lucene.apache.org, java-dev@lucene.apache.org
Subject: Lius into apache incubator
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_42061_14735989.1170203248070"
X-Google-Sender-Auth: 83ad56acfae9dc97
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_42061_14735989.1170203248070
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi,
I would like to add Lius framework (http://sourceforge.net/projects/lius/)
to apache incubator. Is there some volontiers to do this job and to
contribute to the developement of this project.

Thanks.

Rida Benjelloun.

------=_Part_42061_14735989.1170203248070--

From java-user-return-25837-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 31 00:29:50 2007
Return-Path: <java-user-return-25837-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 23701 invoked from network); 31 Jan 2007 00:29:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Jan 2007 00:29:49 -0000
Received: (qmail 49948 invoked by uid 500); 31 Jan 2007 00:29:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49919 invoked by uid 500); 31 Jan 2007 00:29:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49908 invoked by uid 99); 31 Jan 2007 00:29:48 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Jan 2007 16:29:48 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Jan 2007 16:29:39 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 0ADCF5B775; Tue, 30 Jan 2007 16:29:18 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id F36537F403
	for <java-user@lucene.apache.org>; Tue, 30 Jan 2007 16:29:18 -0800 (PST)
Date: Tue, 30 Jan 2007 16:29:18 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: Lucene Users <java-user@lucene.apache.org>
Subject: Re: Boost/Scoring question
In-Reply-To: <45BFDAAD.9070900@teamware.com>
Message-ID: <Pine.LNX.4.58.0701301624020.24685@hal.rescomp.berkeley.edu>
References: <45BFDAAD.9070900@teamware.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: I added a single document with two fields, one with the default boost and
: another with a boost of 0.0F.  hits.score(0) = 0.10848885, but Explanation shows:
:
: 0.0 = match required

1) you can never compare the score from a Hits object with the score from
an Explanation.  Explanation has the raw score, Hits has the
psuedo-normalized score.

2) Explanation was notoriously kludgy and buggy when dealing with "non
matches" or BooleanQueries that had prohibited clauses, or clauses
which scored <= 0 prior to the resolution of LUCENE-451, LUCENE-557, and
LUCENE-605.  Regretably these changes are "post 2.0" so you'd have to use
the head to try them out.



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25838-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 31 00:51:17 2007
Return-Path: <java-user-return-25838-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 28279 invoked from network); 31 Jan 2007 00:51:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Jan 2007 00:51:16 -0000
Received: (qmail 78066 invoked by uid 500); 31 Jan 2007 00:51:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78039 invoked by uid 500); 31 Jan 2007 00:51:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78028 invoked by uid 99); 31 Jan 2007 00:51:15 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Jan 2007 16:51:15 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of mrs.nospam@gmail.com designates 64.233.182.188 as permitted sender)
Received: from [64.233.182.188] (HELO nf-out-0910.google.com) (64.233.182.188)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Jan 2007 16:51:06 -0800
Received: by nf-out-0910.google.com with SMTP id a27so360792nfc
        for <java-user@lucene.apache.org>; Tue, 30 Jan 2007 16:50:45 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=bC3Ay1RG8o41ygYFx5IH7UhB0ybQ2hxdQ8S1rcEeYeFNPlH7QxZEU7FlIA2mKgGLO0oVAXwp1BHKeul7Fd46EzeNBPtXTpNsHtcEiNiE7Vt+gZd5aNUTvX5Lmu5rABQqTHsG6ga5zrm0JeVmXxJ/OaugpFjrxtKNRrDYRzBtt6M=
Received: by 10.49.21.8 with SMTP id y8mr1698399nfi.1170204645385;
        Tue, 30 Jan 2007 16:50:45 -0800 (PST)
Received: by 10.48.210.8 with HTTP; Tue, 30 Jan 2007 16:50:45 -0800 (PST)
Message-ID: <bd818c7b0701301650if9701a5g67ceb3586c4ba69@mail.gmail.com>
Date: Tue, 30 Jan 2007 19:50:45 -0500
From: "no spam" <mrs.nospam@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Announcement: Lucene powering Monster job search index (Beta)
In-Reply-To: <e994873a0701281227g3e9ddbd6r77bf32ff5b16b1d@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_177406_15465573.1170204645323"
References: <1c36b0de0611030801u320dff57k1a470eb93c239441@mail.gmail.com>
	 <e994873a0611031056wc507d8ds213d0c8115b576bd@mail.gmail.com>
	 <bd818c7b0701271322l6899c3e3u71006de77ab1798c@mail.gmail.com>
	 <e994873a0701281227g3e9ddbd6r77bf32ff5b16b1d@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_177406_15465573.1170204645323
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

This is very similar to what I do.  I use a hit collector to gather the
results, then filter outside a bounding box, then calculate the euclidian
distance.

Last time I tried to check your search it was down.  We were talking the
other day at work how job search was lacking among the big boards.  I'm
excited to check out your new page.

Mark

On 1/28/07, Peter Keegan <peterlkeegan@gmail.com> wrote:
>
> Correction:
> We only do the euclidan computation during sorting. For filtering, a
> simple
> bounding box is computed to approximate the radius, and 2 range
> comparisons
> are made to exclude documents. Because these comparisons are done outside
> of
> Lucene as integer comparisons, it is pretty fast. With 13000 results, the
> seach time with distance sort is about 200 msec (compared to 30 ms for a
> simple non-radius, date-sorted keyword search).
>
> Peter
>
> On 1/27/07, no spam <mrs.nospam@gmail.com> wrote:
> >
> > Isn't this extremely ineffecient to do the euclidean distance twice?
> > Perhaps not a huge deal if a small search result set.  I at times have
> > 13,000 results that match my search terms of an index with 1.2 million
> > docs.
> >
> > Can't you do some simple radian math first to ensure it's way out of
> > bounds,
> > then do the euclidian distance for the subset within bounds?  I'm
> > currently
> > only doing the distance calc once (post hit collector). I don't have any
> > performance numbers with the double vs single distance calc.
> >
> > I'm still working out the sort by radius myself.
> >
> > Mark
> >
> > On 11/3/06, Peter Keegan <peterlkeegan@gmail.com> wrote:
> > >
> > > Daniel,
> > > Yes, this is correct if you happen to be doing a radius search and
> > sorting
> > > by mileage.
> > > Peter
> > >
> > >
> >
> >
>
>

------=_Part_177406_15465573.1170204645323--

From java-user-return-25839-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 31 01:18:50 2007
Return-Path: <java-user-return-25839-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35328 invoked from network); 31 Jan 2007 01:18:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Jan 2007 01:18:49 -0000
Received: (qmail 22500 invoked by uid 500); 31 Jan 2007 01:18:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22468 invoked by uid 500); 31 Jan 2007 01:18:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 22457 invoked by uid 99); 31 Jan 2007 01:18:47 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Jan 2007 17:18:47 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of peterlkeegan@gmail.com designates 209.85.132.241 as permitted sender)
Received: from [209.85.132.241] (HELO an-out-0708.google.com) (209.85.132.241)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Jan 2007 17:18:38 -0800
Received: by an-out-0708.google.com with SMTP id c3so38326ana
        for <java-user@lucene.apache.org>; Tue, 30 Jan 2007 17:18:17 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=Wa5l+OqAd8lODKX5dYnvFz47suEBSPEy/rZCCpGAYIL9RVXDbEuOA8gpAaqqm1RhmnSOWb4snzbKzispphY9VS0psloT3URE6H4aD1p3H9i0cXKRl6TrHtbQE3rtmRsLC96qXI1Z2ZvCopyNQgpOpXyyizIsUMRMka/FnjrAviU=
Received: by 10.65.176.3 with SMTP id d3mr269923qbp.1170206297096;
        Tue, 30 Jan 2007 17:18:17 -0800 (PST)
Received: by 10.65.150.17 with HTTP; Tue, 30 Jan 2007 17:18:16 -0800 (PST)
Message-ID: <e994873a0701301718k4399fa1eva16ffdc684d3b7b3@mail.gmail.com>
Date: Tue, 30 Jan 2007 20:18:16 -0500
From: "Peter Keegan" <peterlkeegan@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Announcement: Lucene powering Monster job search index (Beta)
In-Reply-To: <bd818c7b0701301650if9701a5g67ceb3586c4ba69@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_92782_15506054.1170206296812"
References: <1c36b0de0611030801u320dff57k1a470eb93c239441@mail.gmail.com>
	 <e994873a0611031056wc507d8ds213d0c8115b576bd@mail.gmail.com>
	 <bd818c7b0701271322l6899c3e3u71006de77ab1798c@mail.gmail.com>
	 <e994873a0701281227g3e9ddbd6r77bf32ff5b16b1d@mail.gmail.com>
	 <bd818c7b0701301650if9701a5g67ceb3586c4ba69@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_92782_15506054.1170206296812
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Mark,

I'm sorry to hear that you weren't able to get to the job search site today.
I heard of a problem, but I can assure you that it had nothing to do with
Lucene and our back end tiers. Can you tell me what you think is lacking for
job search among the big boards? There is clearly a lot of room for
improvement.
How is the performance of your distance search and sort?

Peter


On 1/30/07, no spam <mrs.nospam@gmail.com> wrote:
>
> This is very similar to what I do.  I use a hit collector to gather the
> results, then filter outside a bounding box, then calculate the euclidian
> distance.
>
> Last time I tried to check your search it was down.  We were talking the
> other day at work how job search was lacking among the big boards.  I'm
> excited to check out your new page.
>
> Mark
>
> On 1/28/07, Peter Keegan <peterlkeegan@gmail.com> wrote:
> >
> > Correction:
> > We only do the euclidan computation during sorting. For filtering, a
> > simple
> > bounding box is computed to approximate the radius, and 2 range
> > comparisons
> > are made to exclude documents. Because these comparisons are done
> outside
> > of
> > Lucene as integer comparisons, it is pretty fast. With 13000 results,
> the
> > seach time with distance sort is about 200 msec (compared to 30 ms for a
> > simple non-radius, date-sorted keyword search).
> >
> > Peter
> >
> > On 1/27/07, no spam <mrs.nospam@gmail.com> wrote:
> > >
> > > Isn't this extremely ineffecient to do the euclidean distance twice?
> > > Perhaps not a huge deal if a small search result set.  I at times have
> > > 13,000 results that match my search terms of an index with 1.2 million
> > > docs.
> > >
> > > Can't you do some simple radian math first to ensure it's way out of
> > > bounds,
> > > then do the euclidian distance for the subset within bounds?  I'm
> > > currently
> > > only doing the distance calc once (post hit collector). I don't have
> any
> > > performance numbers with the double vs single distance calc.
> > >
> > > I'm still working out the sort by radius myself.
> > >
> > > Mark
> > >
> > > On 11/3/06, Peter Keegan <peterlkeegan@gmail.com> wrote:
> > > >
> > > > Daniel,
> > > > Yes, this is correct if you happen to be doing a radius search and
> > > sorting
> > > > by mileage.
> > > > Peter
> > > >
> > > >
> > >
> > >
> >
> >
>
>

------=_Part_92782_15506054.1170206296812--

From java-user-return-25840-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 31 01:19:19 2007
Return-Path: <java-user-return-25840-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35400 invoked from network); 31 Jan 2007 01:19:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Jan 2007 01:19:18 -0000
Received: (qmail 24034 invoked by uid 500); 31 Jan 2007 01:19:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24011 invoked by uid 500); 31 Jan 2007 01:19:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24000 invoked by uid 99); 31 Jan 2007 01:19:16 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Jan 2007 17:19:16 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of janssen@parc.com designates 13.1.64.93 as permitted sender)
Received: from [13.1.64.93] (HELO alpha.xerox.com) (13.1.64.93)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Jan 2007 17:19:06 -0800
Received: from synergy1.parc.xerox.com ([13.1.101.60]) by alpha.xerox.com with SMTP id <388780(1)>; Tue, 30 Jan 2007 17:18:33 PST
Received: from parc.com ([127.0.0.1]) by synergy1.parc.xerox.com with SMTP id <58648>; Tue, 30 Jan 2007 17:18:27 PST
To: java-user@lucene.apache.org
Subject: using a document as a query?
Date: Tue, 30 Jan 2007 17:18:20 PST
From: Bill Janssen <janssen@parc.com>
Message-Id: <07Jan30.171827pst."58648"@synergy1.parc.xerox.com>
X-Virus-Checked: Checked by ClamAV on apache.org

I was thinking of trying something, and wondered if someone else
already had it working...

I'd like to take a document, and use it as a query to find other
documents in my index that 'match' it.  I'm talking about short
documents, like newspaper articles or email messages.  Seems to me
that there should be some TF*IDF tricks one could play here with the
index...

Anyone done something like this already?

Bill

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25841-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 31 01:38:54 2007
Return-Path: <java-user-return-25841-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 39077 invoked from network); 31 Jan 2007 01:38:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Jan 2007 01:38:54 -0000
Received: (qmail 46322 invoked by uid 500); 31 Jan 2007 01:38:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46293 invoked by uid 500); 31 Jan 2007 01:38:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46282 invoked by uid 99); 31 Jan 2007 01:38:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Jan 2007 17:38:52 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [212.226.92.15] (HELO monkey.teamware.com) (212.226.92.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Jan 2007 17:38:43 -0800
Received: from nimitz (nimitz.teamw.com [10.142.128.10])
	by monkey.teamware.com (8.13.1/8.13.1) with ESMTP id l0V1cGDj009608
	for <java-user@lucene.apache.org>; Wed, 31 Jan 2007 03:38:16 +0200
Received: from [10.142.3.11] ([10.142.3.11]) by nimitz with ESMTP
	 id m1v32egh; 31 Jan 2007 03:38:00 +0200
Message-ID: <45BFF305.60707@teamware.com>
Date: Wed, 31 Jan 2007 12:38:13 +1100
From: Antony Bowesman <adb@teamware.com>
Organization: Teamware Group
User-Agent: Thunderbird 1.5 (Windows/20051201)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Boost/Scoring question
References: <45BFDAAD.9070900@teamware.com> <Pine.LNX.4.58.0701301624020.24685@hal.rescomp.berkeley.edu>
In-Reply-To: <Pine.LNX.4.58.0701301624020.24685@hal.rescomp.berkeley.edu>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Greylist: Sender IP whitelisted, not delayed by milter-greylist-1.6 (monkey.teamware.com [212.226.92.15]); Wed, 31 Jan 2007 03:38:16 +0200 (EET)
X-TWG-MailScanner-Information: See www.mailscanner.info for information
X-TWG-MailScanner: Found to be clean
X-TWG-MailScanner-SpamCheck: not spam, SpamAssassin (score=0.001, required 5,
	autolearn=not spam, BAYES_50 0.00)
X-MailScanner-From: adb@teamware.com
X-Virus-Checked: Checked by ClamAV on apache.org

Chris Hostetter wrote:
> 1) you can never compare the score from a Hits object with the score from
> an Explanation.  Explanation has the raw score, Hits has the
> psuedo-normalized score.

Thanks for the comments.  Where I was trying to get to was whether a match on a 
field with boost of 0.0 can ever cause the normalised score to result in 0 if 
there is also a match on a field with a non zero boost.  I'm not sure I 
understand the scoring formula :(

I've played a bit more and found:

If I search for a document where the field boost is 0.0 then the document is not 
found I just search that field.  Is this expected???

I have a configurable framework, where the field schema can have the boost set 
and I am trying to understand whether to allow >=0.0 of just >0.0 and how Lucene 
behaves with 0.0.

I know a Filter would be better to remove a field's influence on score
during search, but I'd like to understand...

> 2) Explanation was notoriously kludgy and buggy when dealing with "non
> matches" or BooleanQueries that had prohibited clauses, or clauses
> which scored <= 0 prior to the resolution of LUCENE-451, LUCENE-557, and
> LUCENE-605.  Regretably these changes are "post 2.0" so you'd have to use
> the head to try them out.

OK, I hope to get to 2.1, which I'm eagerly awaiting, so will revisit 
explanations then.

Antony



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25842-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 31 02:36:10 2007
Return-Path: <java-user-return-25842-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65176 invoked from network); 31 Jan 2007 02:36:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Jan 2007 02:36:09 -0000
Received: (qmail 97093 invoked by uid 500); 31 Jan 2007 02:36:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97059 invoked by uid 500); 31 Jan 2007 02:36:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97047 invoked by uid 99); 31 Jan 2007 02:36:07 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Jan 2007 18:36:07 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [68.142.199.165] (HELO web81701.mail.mud.yahoo.com) (68.142.199.165)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 30 Jan 2007 18:35:57 -0800
Received: (qmail 53671 invoked by uid 60001); 31 Jan 2007 02:35:36 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=QuwoRp4GGPgPp4vXWWuiDfio3MMqbBXevZE5bmYjhVBr03zUpuz4hvRhvkHlQ9hW/00/PuikUd0RvyLJ1kRO26N8U6EIHASZnGmNtjgmtob/urgD0pk/P2GKtQVtnMzOPvedj/u7Q2O5rBj2FhPWflOqZvQGs5B7dleTRYluBQg=  ;
Message-ID: <20070131023536.53669.qmail@web81701.mail.mud.yahoo.com>
Received: from [66.201.45.201] by web81701.mail.mud.yahoo.com via HTTP; Tue, 30 Jan 2007 18:35:36 PST
Date: Tue, 30 Jan 2007 18:35:36 -0800 (PST)
From: Chiradeep Vittal <rayvittal-lists@yahoo.com>
Subject: Re: Extending scoring to eliminate sorting on timestamp
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=ascii
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Chris,=0A=0AThanks for all your invaluable comments. The killer was the fac=
t that the timestamp for each document was unique. For a search with millio=
ns of results, this resulted in allocation of millions of strings during th=
e sorting step (FieldCacheImpl.getStrings). With some loss of precision, I =
rounded down the timestamp to DateTools.MINUTE resolution in the indexing p=
hase (but I still store it as a string). The cool thing about this is that =
it limits the maximum number of strings for this field (525000 in a year). =
So getStrings never allocates more than 0.5 million strings. With this, the=
 sort is suitably fast (amazingly fast in fact, 13,000,000 documents sorted=
 in < 10 seconds on a middling hardware configuration). I don't need a 64-b=
it JVM either :). Beautiful.=0A=0AOf course, I can improve this by storing =
the modified timestamp as an integer...that's the next step.  =0A=0A=0A----=
- Original Message ----=0AFrom: Chris Hostetter <hossman_lucene@fucit.org>=
=0ATo: java-user@lucene.apache.org=0ASent: Friday, January 26, 2007 11:15:0=
5 AM=0ASubject: Re: Extending scoring to eliminate sorting on timestamp=0A=
=0A=0A: I used String because the timestamp is a Long and there wasn't any=
=0A: SortField.LONG (I guess I should have used SortField.CUSTOM). In this=
=0A: case, what should the indexing call look like? Currently, I have:=0A=
=0A:     doc.add(new Field("timestamp",Long.toString(timestamp),Field.Store=
.NO,Field.Index.UN_TOKENIZED));=0A=0Afor the record, what you've got there =
won't sort correctly as a string=0Aanyway, the number 923456 will sort afte=
r the number 12345678 because as a=0Astring it's lexigraphicaly larger ... =
you'd need to 0 pad the value, or=0Ause something like NumberTools.=0A=0Ai =
never really noticed there was an int field cache, but no long field=0Acach=
e ... either way, if you are tryingto avoid hte FieldCachebecause of=0Ahte =
time ittakes to initialize and not hte memory it takes up, then long=0Asupp=
ort in FieldCachewouldnt' help you.=0A=0A: The other thing I was considerin=
g is to automatically limit the number=0A: of results (there is no way a us=
er can grok 3 million results anyway) by=0A: breaking down the range filter=
 into a series of range filters and=0A: executing multiple searches in seri=
es until the max number of results=0A=0Ai'm not sure how that would help yo=
u unlessy ou did all of the sorting=0Aexternal to Lucene (or used something=
 like the patch i mentioned)=0A=0A: case (when the number of results is rea=
sonable). One way around this is=0A: to execute an initial search just to f=
igure out the number of hits=0A: (without sorting, without scoring) and the=
n apply different strategies,=0A=0Aif you try this use Sort.INDEXORDER .. s=
hort of writing your own=0AHitCollector i believe it's the best way to elim=
inate any extra work=0ALucene might do for you to sort results.=0A=0A: The =
patch you pointed out looks very very promising.=0A=0AThere's been some dis=
agreement as to how usefull it is -- i don't know if=0Aanyone has had time =
to do a thorough performnce analysys of it in=0Adiffernet sitautions.  if y=
ou try it out please comment in the issue with=0Ayour experiences 9good or =
bad)=0A=0A=0A----- Original Message ----=0AFrom: Chris Hostetter <hossman_l=
ucene@fucit.org>=0ATo: java-user@lucene.apache.org=0ASent: Thursday, Januar=
y 25, 2007 9:09:12 PM=0ASubject: Re: Extending scoring to eliminate sorting=
 on timestamp=0A=0A=0A: For various reasons, we'd like to eliminate the sor=
t step.=0A=0Acan you elaborate on what those reasons are?=0A=0AFunctionQuer=
y (in the solr code base, you'll find lots of discussing in=0Athe archives =
of this list) can let you use a numeric field value in the=0Ascore calculat=
ion, but it still uses the FieldCache so if you are trying=0Ato avoid that =
for space/time reasons it won't help.=0A=0Ayou may also be interested in th=
is patch...=0A=0A  https://issues.apache.org/jira/browse/LUCENE-769=0A=0Ain=
 the general case it should be slower then standard sorting, but if=0Ayou a=
re dealing with an extremely large index and your result sets all=0Atend to=
 be small, it may be faster (and it won't pay the initial=0AFieldCache setu=
p time on frequently modified indexes)=0A=0A:                    new SortFi=
eld("timestamp",SortField.STRING,true)}));=0A=0Awhy are you sorting timesta=
mps as strings? ... if you sort them as ints,=0Ayour FieldCache will be a w=
hole hell of a lot smaller (i'm guessing very=0Afew documents have identicl=
e timestamps, so your FieldCache should be at=0Aleast half as big if you so=
rt on ints (and probably a lot more).=0A=0A=0A-Hoss=0A=0A=0A---------------=
------------------------------------------------------=0ATo unsubscribe, e-=
mail: java-user-unsubscribe@lucene.apache.org=0AFor additional commands, e-=
mail: java-user-help@lucene.apache.org=0A=0A=0A=0A=0A:=0A: ----------------=
-----------------------------------------------------=0A: To unsubscribe, e=
-mail: java-user-unsubscribe@lucene.apache.org=0A: For additional commands,=
 e-mail: java-user-help@lucene.apache.org=0A:=0A=0A=0A=0A-Hoss=0A=0A=0A----=
-----------------------------------------------------------------=0ATo unsu=
bscribe, e-mail: java-user-unsubscribe@lucene.apache.org=0AFor additional c=
ommands, e-mail: java-user-help@lucene.apache.org=0A=0A=0A=0A

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25843-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 31 02:41:55 2007
Return-Path: <java-user-return-25843-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65845 invoked from network); 31 Jan 2007 02:41:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Jan 2007 02:41:55 -0000
Received: (qmail 2125 invoked by uid 500); 31 Jan 2007 02:41:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2031 invoked by uid 500); 31 Jan 2007 02:41:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2014 invoked by uid 99); 31 Jan 2007 02:41:53 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Jan 2007 18:41:53 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of karl.wettin@gmail.com designates 66.249.92.169 as permitted sender)
Received: from [66.249.92.169] (HELO ug-out-1314.google.com) (66.249.92.169)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Jan 2007 18:41:43 -0800
Received: by ug-out-1314.google.com with SMTP id k40so57731ugc
        for <java-user@lucene.apache.org>; Tue, 30 Jan 2007 18:41:22 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=T60X3AEoqTatFiBgUUr7szmbTeOmrn/BrFGgG5eFOV8mzIoa7r5akowLQWsj6DDrv6RJrIKOHbVgRaoUqXPQ3vGNsmkNMklYLg+zEHGbmGt6yhJrHsFuLUVK5m+MVzfFS6Ay3vSKpEVaJCoHV7h1NgZXuM0MH/qGUcR1CgcwnTE=
Received: by 10.66.242.20 with SMTP id p20mr312197ugh.1170211282550;
        Tue, 30 Jan 2007 18:41:22 -0800 (PST)
Received: from ?192.168.1.7? ( [83.249.100.34])
        by mx.google.com with ESMTP id 59sm285790ugf.2007.01.30.18.41.21;
        Tue, 30 Jan 2007 18:41:21 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <423667.11427.qm@web82501.mail.mud.yahoo.com>
References: <423667.11427.qm@web82501.mail.mud.yahoo.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <928D4D11-92DA-402B-AC1A-3FFA97E596FB@gmail.com>
Content-Transfer-Encoding: 7bit
From: karl wettin <karl.wettin@gmail.com>
Subject: Re: "did you mean..." feature
Date: Wed, 31 Jan 2007 03:40:30 +0100
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org

30 jan 2007 kl. 01.39 skrev Felix Litman:

> We are implementing the  "did you mean..."  on top of Lucene,   
> leveraging ideas of the "Did you mean Lucene?" article.   (Many  
> thanks to Tom White for such a useful and clear  article...!)
>
>   We are having some difficultiies getting good "did you means"   
> for multiword queries.
>
>   Did anyone have success in getting "did you mean..." to work well  
> for multiword queries?
>
>   Any thoughts on the latest recommended approach?
>
>   Thank you,
> Felix

There is now pretty good support for multiple words in <https:// 
issues.apache.org/jira/browse/LUCENE-626>.


     addDocument(indexWriter, field, "heroes of might and magic III  
complete");
     addDocument(indexWriter, field, "it might be the best game ever  
made");

     assertEquals("heroes of might and magic", suggester.didYouMean 
("hereos of magic and might"));
     assertEquals("heroes of might and magic", suggester.didYouMean 
("hereos of light and magic"));
     assertEquals("heroes might magic", suggester.didYouMean("magic  
light heros"));
     assertEquals("best game made", suggester.didYouMean("game best  
made"));
     assertEquals("game made", suggester.didYouMean("made game"));
     assertEquals("game made", suggester.didYouMean("made lame"));
     assertEquals(null, suggester.didYouMean("may game"));



-- 
karl

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25844-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 31 04:48:41 2007
Return-Path: <java-user-return-25844-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95079 invoked from network); 31 Jan 2007 04:48:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Jan 2007 04:48:21 -0000
Received: (qmail 50772 invoked by uid 500); 31 Jan 2007 04:48:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50310 invoked by uid 500); 31 Jan 2007 04:48:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50299 invoked by uid 99); 31 Jan 2007 04:48:21 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Jan 2007 20:48:20 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of karl.wettin@gmail.com designates 66.249.92.171 as permitted sender)
Received: from [66.249.92.171] (HELO ug-out-1314.google.com) (66.249.92.171)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Jan 2007 20:48:10 -0800
Received: by ug-out-1314.google.com with SMTP id k40so76662ugc
        for <java-user@lucene.apache.org>; Tue, 30 Jan 2007 20:47:49 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=EYhKiqeM+B8igm5mnIlOOnAIlrBcBUNd3/61b+QD271zMAbRLdcXxXjlxmu7oMiBM4toPPCgwyBXvSDnGKQaNtoTl3YyDsmOgLQBQAt4MQ6Hgf8GGprvMRDhtLHsVY319cGY0OkW+Ni2zmKb+SmWPzUmjucCVGEK74yEAkxUD4c=
Received: by 10.67.22.14 with SMTP id z14mr435718ugi.1170218869350;
        Tue, 30 Jan 2007 20:47:49 -0800 (PST)
Received: from ?192.168.1.7? ( [83.249.100.34])
        by mx.google.com with ESMTP id q1sm410571uge.2007.01.30.20.47.47;
        Tue, 30 Jan 2007 20:47:48 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <45BEB90F.6010407@nuix.com>
References: <0920FF49-F321-488D-B779-3A55450456A9@as-st.com> <9809B8EE-6F1B-4D4C-9BAD-5EFD604D16A7@gmail.com> <45BE7387.6040903@nuix.com> <C49AE85F-2C02-4107-A1D9-555D80CD4223@gmail.com> <45BEB90F.6010407@nuix.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <0451E68D-91F5-4089-8A3A-21ED66F41E96@gmail.com>
Content-Transfer-Encoding: 7bit
From: karl wettin <karl.wettin@gmail.com>
Subject: Re: How many documents in the biggest Lucene index to date?
Date: Wed, 31 Jan 2007 05:46:57 +0100
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org


30 jan 2007 kl. 04.18 skrev Daniel Noll:
> karl wettin wrote:
>> Then it hit me that perheps the integer limitation should be in  
>> the store (Directory) and not the IndexReader? If not now, perhaps  
>> in the future when everybody is running on 64bit JVMs. I don't  
>> think it will be a very expensive thing to implement. But did  
>> anyone need that yet?
>
> I don't know about it not being expensive to implement.  Keep in  
> mind that even on a 64-bit JVM, you still can't use longs in array  
> indexes. :-)

I think the big undertaking would be to refactor all of Lucene to use  
longs as document numbers.

But not in the store. There it would still be integers, and the  
MultiReader can keep track of Integer.MAX_VALUE stores.  
Integer.MAX_VALUE*Integer.MAX_VALUE = Long.MAX_VALUE. So there would  
not have to be any arrays around with a length greater than  
Integer.MAX_VALUE?

class SegmentReader extends IndexReader {

+  private int documentNumber(long n) throws IOException {
+    if (n > Integer.MAX_VALUE) {
+      throw new IOException("Max " + Integer.MAX_VALUE + " documents  
in a Segement!");
+    }
+    return (int)n;
+  }

-  protected void doDelete(int docNum) {
+  protected void doDelete(long longDocNum) {
+    int docNum = documentNumber(longDocNum);

    ...

But lets not do that right away now.

And as we are on the subject of things not to be implemented anytime  
soon, I would like a layer of JXTA (or so) via bluetooth for Lucene  
on J2ME for mining purposes.

I'm serious.

As always in the the future, people will walk around with a  
communicator in the pocket. It will keep track of all your movies,  
music, drink recipes, and all that other important stuff. And your  
preferences about them. And of course, lots of big brother related  
things too. About you and about other people that might be  
interesting for you to know what they have been doing. And how much  
you trust them. And how much you like them. With the use of neat  
technology the collective intelligence and karma of these devices  
will ensure that all of us get to listen to great music all the time,  
drink the things we will enjoy the most at the moment, only meet  
interesting people all the time, and all that. Most important, it  
will supprise us. It will be great, so remeber where you heard about  
it the first time!


-- 
karl

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25845-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 31 05:44:48 2007
Return-Path: <java-user-return-25845-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 6965 invoked from network); 31 Jan 2007 05:44:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Jan 2007 05:44:47 -0000
Received: (qmail 18330 invoked by uid 500); 31 Jan 2007 05:44:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18297 invoked by uid 500); 31 Jan 2007 05:44:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18285 invoked by uid 99); 31 Jan 2007 05:44:47 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Jan 2007 21:44:47 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [203.217.22.128] (HELO file1.syd.nuix.com.au) (203.217.22.128)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Jan 2007 21:44:39 -0800
Received: from [192.168.222.102] (demo1.syd.nuix.com.au [192.168.222.102])
	by file1.syd.nuix.com.au (Postfix) with ESMTP id 2F2E64A813D
	for <java-user@lucene.apache.org>; Wed, 31 Jan 2007 16:45:13 +1100 (EST)
Message-ID: <45C02E2E.9060401@nuix.com>
Date: Wed, 31 Jan 2007 16:50:38 +1100
From: Daniel Noll <daniel@nuix.com>
Organization: NUIX Pty Limited
User-Agent: Thunderbird 3.0a1 (Windows/20061207)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: How many documents in the biggest Lucene index to date?
References: <0920FF49-F321-488D-B779-3A55450456A9@as-st.com> <9809B8EE-6F1B-4D4C-9BAD-5EFD604D16A7@gmail.com> <45BE7387.6040903@nuix.com> <C49AE85F-2C02-4107-A1D9-555D80CD4223@gmail.com> <45BEB90F.6010407@nuix.com> <0451E68D-91F5-4089-8A3A-21ED66F41E96@gmail.com>
In-Reply-To: <0451E68D-91F5-4089-8A3A-21ED66F41E96@gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

karl wettin wrote:
> I think the big undertaking would be to refactor all of Lucene to use 
> longs as document numbers.
> 
> But not in the store. There it would still be integers, and the 
> MultiReader can keep track of Integer.MAX_VALUE stores. 
> Integer.MAX_VALUE*Integer.MAX_VALUE = Long.MAX_VALUE. So there would not 
> have to be any arrays around with a length greater than Integer.MAX_VALUE?
> 
> class SegmentReader extends IndexReader {
> 
> +  private int documentNumber(long n) throws IOException {
> +    if (n > Integer.MAX_VALUE) {
> +      throw new IOException("Max " + Integer.MAX_VALUE + " documents in 
> a Segement!");
> +    }
> +    return (int)n;
> +  }
> 
> -  protected void doDelete(int docNum) {
> +  protected void doDelete(long longDocNum) {
> +    int docNum = documentNumber(longDocNum);

Looks good to me.  And of course if someone *wanted* to make an 
alternative implementation of SegmentReader and the whole storage so 
that it can support longs internally, they would then be able to.

Daniel


-- 
Daniel Noll

Nuix Pty Ltd
Suite 79, 89 Jones St, Ultimo NSW 2007, Australia    Ph: +61 2 9280 0699
Web: http://nuix.com/                               Fax: +61 2 9212 6902

This message is intended only for the named recipient. If you are not
the intended recipient you are notified that disclosing, copying,
distributing or taking any action in reliance on the contents of this
message or attachment is strictly prohibited.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25846-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 31 07:13:50 2007
Return-Path: <java-user-return-25846-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36454 invoked from network); 31 Jan 2007 07:13:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Jan 2007 07:13:49 -0000
Received: (qmail 18669 invoked by uid 500); 31 Jan 2007 07:13:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18531 invoked by uid 500); 31 Jan 2007 07:13:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18518 invoked by uid 99); 31 Jan 2007 07:13:49 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Jan 2007 23:13:49 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [206.190.38.242] (HELO web50309.mail.yahoo.com) (206.190.38.242)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 30 Jan 2007 23:13:38 -0800
Received: (qmail 24253 invoked by uid 60001); 31 Jan 2007 07:13:15 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=gDfLhcYney7cSgyDgFiRzQ+Iywgu9huCT/p3Prc6nybbVDBW5TLj0qdeQFfM6okUKQC0fDWUrWilAsFfX/uobejG3vBLrC5aOT+sJfQF56Rsk2hNp/g1v4LW3kP9pp58BdZSZKFHUBX3RW4ZXZjCSHR44LjcOAa9kt3GObqQebk=;
X-YMail-OSG: iHPKbmgVM1mvJHZFvy_5wkreAlBdH6W4YXLyacSnhrqv_vAqGmExXtaD0Khs_ZxCZRd724aBmTWmtDNYgMXUK_AG4nFv.oFZVrkE0dOIb1ZouPMlO9tbHKw_GCL54DdG7eJNCFSbG5u.mco-
Received: from [58.63.144.33] by web50309.mail.yahoo.com via HTTP; Tue, 30 Jan 2007 23:13:15 PST
X-Mailer: YahooMailRC/368.3 YahooMailWebService/0.6.132.7
Date: Tue, 30 Jan 2007 23:13:15 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: using a document as a query?
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable
Message-ID: <238960.22704.qm@web50309.mail.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Yes, I believe Dave did something like that on searchmorph.org and somebody=
 else did this on some some with RFCs.  What's that called?  Query by examp=
le?  I think so, try define:Query By Example on Google.=0A=0ATake a look at=
 MoreLikeThis class in contrib/ too. :)=0A=0AOtis=0A=0A----- Original Messa=
ge ----=0AFrom: Bill Janssen <janssen@parc.com>=0ATo: java-user@lucene.apac=
he.org=0ASent: Tuesday, January 30, 2007 8:18:20 PM=0ASubject: using a docu=
ment as a query?=0A=0AI was thinking of trying something, and wondered if s=
omeone else=0Aalready had it working...=0A=0AI'd like to take a document, a=
nd use it as a query to find other=0Adocuments in my index that 'match' it.=
  I'm talking about short=0Adocuments, like newspaper articles or email mes=
sages.  Seems to me=0Athat there should be some TF*IDF tricks one could pla=
y here with the=0Aindex...=0A=0AAnyone done something like this already?=0A=
=0ABill=0A=0A--------------------------------------------------------------=
-------=0ATo unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org=
=0AFor additional commands, e-mail: java-user-help@lucene.apache.org=0A=0A=
=0A=0A

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25847-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 31 08:19:33 2007
Return-Path: <java-user-return-25847-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 57119 invoked from network); 31 Jan 2007 08:19:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Jan 2007 08:19:32 -0000
Received: (qmail 67902 invoked by uid 500); 31 Jan 2007 08:19:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67865 invoked by uid 500); 31 Jan 2007 08:19:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67854 invoked by uid 99); 31 Jan 2007 08:19:30 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 31 Jan 2007 00:19:30 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [212.190.206.154] (HELO srs2na11.bgl.lu) (212.190.206.154)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 31 Jan 2007 00:19:21 -0800
Received: from spmwf02l.luinternal.fortis.bank (unverified) by srs2na12.domain
 (Content Technologies SMTPRS 4.2.10) with ESMTP id <T7d83df7eb90aaf150a159@srs2na12.domain> for <java-user@lucene.apache.org>;
 Wed, 31 Jan 2007 09:22:54 +0100
Received: from SPMWB02L.luinternal.fortis.bank ([10.172.252.140]) by spmwf02l.luinternal.fortis.bank with Microsoft SMTPSVC(6.0.3790.0);
	 Wed, 31 Jan 2007 09:18:38 +0100
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
X-MimeOLE: Produced By Microsoft Exchange V6.5
Subject: RE: Score
Date: Wed, 31 Jan 2007 09:18:21 +0100
Message-ID: <EBC8F228BDB35A4394D0BE53DA25248808A9A2C5@SPMWB02L.luinternal.fortis.bank>
In-Reply-To: <Pine.LNX.4.58.0701301145440.18851@hal.rescomp.berkeley.edu>
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
Thread-Topic: Score
Thread-Index: AcdEp7FCPbDfKJUURFOMuGp80UM27gAaJFNg
From: "DECAFFMEYER MATHIEU" <MATHIEU.DECAFFMAYER@fortis.lu>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 31 Jan 2007 08:18:38.0142 (UTC) FILETIME=[68AEADE0:01C74510]
X-Virus-Checked: Checked by ClamAV on apache.org

>>Have you looked at the constructor for BooleanQuery and=20
>>tried passing "true" to disable the Coord factor?

Thanks Chris, this is exactly what I want,
but I am working with lucene 1.4.3 because I have to for some reasons,

Is there any equivalent ?!

Thank u.=20


__________________________________

   Mathieu Decaffmeyer
   Web Developer
   Fortis Banque Luxembourg
   IS Retail Banking - Web Content Management
   Mobile : 0032  479 / 69 . 42 . 96

   =20

-----Original Message-----
From: Chris Hostetter [mailto:hossman_lucene@fucit.org]=20
Sent: Tuesday, January 30, 2007 8:49 PM
To: java-user@lucene.apache.org
Subject: RE: Score

*****  This message comes from the Internet Network *****


: I make a BooleanQuery with the input of the user and include in the
query
: title:keywordofuser headlines:keywordofuser content:keywordofuser
: I tried to Boost field title, then if keyword appear in the title,
score grows like I want to, but if keyword occurs in content or
headlines score decrease more than before ...
: I would like to have a score independent for each query in the
BooleanQuery, sounds basic but I just can't achieve this.
: Is this also possible to change ?

it's really not clear to me what you are asking ... what do you mean
the score is decreased if the keyword appears in the content? ... how
can
the score be independent of the sub queries? -- the subqueries are what
determine the score, there is nothing else.

Have you looked at the constructor for BooleanQuery and tried passing
"true" to disable the Coord factor? ... that eliminates the pnalty
documents get for only matching some of the clauses of a BooleanQuery --
which may be what you are describing (i'm really not sure)



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D
Internet communications are not secure and therefore Fortis Banque Luxembou=
rg S.A. does not accept legal responsibility for the contents of this messa=
ge. The information contained in this e-mail is confidential and may be leg=
ally privileged. It is intended solely for the addressee. If you are not th=
e intended recipient, any disclosure, copying, distribution or any action t=
aken or omitted to be taken in reliance on it, is prohibited and may be unl=
awful. Nothing in the message is capable or intended to create any legally =
binding obligations on either party and it is not intended to provide legal=
 advice.
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25848-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 31 10:04:44 2007
Return-Path: <java-user-return-25848-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94592 invoked from network); 31 Jan 2007 10:04:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Jan 2007 10:04:43 -0000
Received: (qmail 92057 invoked by uid 500); 31 Jan 2007 10:04:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92022 invoked by uid 500); 31 Jan 2007 10:04:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92010 invoked by uid 99); 31 Jan 2007 10:04:40 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 31 Jan 2007 02:04:40 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,MIME_BOUND_NEXTPART
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [212.190.206.154] (HELO srs2na11.bgl.lu) (212.190.206.154)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 31 Jan 2007 02:04:31 -0800
Received: from spmwf02l.luinternal.fortis.bank (unverified) by srs2na12.domain
 (Content Technologies SMTPRS 4.2.10) with ESMTP id <T7d843fe81f0aaf150a159@srs2na12.domain> for <java-user@lucene.apache.org>;
 Wed, 31 Jan 2007 11:08:12 +0100
Received: from SPMWB02L.luinternal.fortis.bank ([10.172.252.140]) by spmwf02l.luinternal.fortis.bank with Microsoft SMTPSVC(6.0.3790.0);
	 Wed, 31 Jan 2007 11:03:58 +0100
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/mixed;
	boundary="----=_NextPartTM-000-52aa10a5-1ee2-45f7-ba8d-04f6597f651e"
X-MimeOLE: Produced By Microsoft Exchange V6.5
Subject: Boost
Date: Wed, 31 Jan 2007 11:03:57 +0100
Message-ID: <EBC8F228BDB35A4394D0BE53DA25248808A9A2C8@SPMWB02L.luinternal.fortis.bank>
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
Thread-Topic: Boost
Thread-Index: AcdFHx/s6JoGNST+QFOgan8VOJs65A==
From: "DECAFFMEYER MATHIEU" <MATHIEU.DECAFFMAYER@fortis.lu>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 31 Jan 2007 10:03:58.0547 (UTC) FILETIME=[1FEFF230:01C7451F]
X-Virus-Checked: Checked by ClamAV on apache.org

------=_NextPartTM-000-52aa10a5-1ee2-45f7-ba8d-04f6597f651e
Content-Type: multipart/alternative; 
	boundary="----_=_NextPart_001_01C7451F.1F267C4B"

------_=_NextPart_001_01C7451F.1F267C4B
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Just as a test I tried this :

Field contentField =3D=20
    new Field(
        "content", cleanedContent,=20
        Field.Store.NO,=20
        Field.Index.TOKENIZED);

contentField.setBoost(100);     =20
doc.add(contentField);

In my document I have the word "experience",
when I do a search on this word I keep having a score of a bit more than
0.

Why is my boost not working ?

Thank u.

__________________________________

   Mathieu Decaffmeyer


=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D
Internet communications are not secure and therefore Fortis Banque Luxembou=
rg S.A. does not accept legal responsibility for the contents of this messa=
ge. The information contained in this e-mail is confidential and may be leg=
ally privileged. It is intended solely for the addressee. If you are not th=
e intended recipient, any disclosure, copying, distribution or any action t=
aken or omitted to be taken in reliance on it, is prohibited and may be unl=
awful. Nothing in the message is capable or intended to create any legally =
binding obligations on either party and it is not intended to provide legal=
 advice.
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D


------_=_NextPart_001_01C7451F.1F267C4B
Content-Type: text/html; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
<HEAD>
<META HTTP-EQUIV=3D"Content-Type" CONTENT=3D"text/html; charset=3Dus-ascii">
<META NAME=3D"Generator" CONTENT=3D"MS Exchange Server version 6.5.7651.52">
<TITLE>Boost</TITLE>
</HEAD>
<BODY>
<!-- Converted from text/rtf format -->

<P><FONT SIZE=3D2 FACE=3D"Arial">Just as a test I tried this :</FONT>
</P>

<P><FONT COLOR=3D"#000000" SIZE=3D2 FACE=3D"Courier New">Field</FONT><FONT =
SIZE=3D2 FACE=3D"Courier New"> </FONT><FONT COLOR=3D"#000000" SIZE=3D2 FACE=
=3D"Courier New">contentField</FONT><FONT SIZE=3D2 FACE=3D"Courier New"> </=
FONT><FONT COLOR=3D"#000000" SIZE=3D2 FACE=3D"Courier New">=3D</FONT><FONT =
SIZE=3D2 FACE=3D"Courier New"> </FONT>

<BR><SPAN LANG=3D"fr-be"><FONT SIZE=3D2 FACE=3D"Courier New">&nbsp;&nbsp;&n=
bsp;<B></B></FONT><B></B></SPAN><B><SPAN LANG=3D"en-us"> <FONT COLOR=3D"#7F=
0055" SIZE=3D2 FACE=3D"Courier New">new</FONT></SPAN></B><SPAN LANG=3D"en-u=
s"><FONT SIZE=3D2 FACE=3D"Courier New"> </FONT><FONT COLOR=3D"#000000" SIZE=
=3D2 FACE=3D"Courier New">Field(</FONT></SPAN>

<BR><SPAN LANG=3D"fr-be"><FONT COLOR=3D"#000000" SIZE=3D2 FACE=3D"Courier N=
ew">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT></SPAN><SPAN LANG=3D"e=
n-us"> <FONT COLOR=3D"#2A00FF" SIZE=3D2 FACE=3D"Courier New">&quot;content&=
quot;</FONT><FONT COLOR=3D"#000000" SIZE=3D2 FACE=3D"Courier New">,</FONT><=
FONT SIZE=3D2 FACE=3D"Courier New"> </FONT><FONT COLOR=3D"#000000" SIZE=3D2=
 FACE=3D"Courier New">cleanedContent,</FONT><FONT SIZE=3D2 FACE=3D"Courier =
New"> </FONT></SPAN>

<BR><SPAN LANG=3D"fr-be"><FONT SIZE=3D2 FACE=3D"Courier New">&nbsp;&nbsp;&n=
bsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT></SPAN><SPAN LANG=3D"en-us"> <FONT COLOR=
=3D"#000000" SIZE=3D2 FACE=3D"Courier New">Field.Store.NO,</FONT><FONT SIZE=
=3D2 FACE=3D"Courier New"> </FONT></SPAN>

<BR><SPAN LANG=3D"fr-be"><FONT SIZE=3D2 FACE=3D"Courier New">&nbsp;&nbsp;&n=
bsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT></SPAN><SPAN LANG=3D"en-us"> <FONT COLOR=
=3D"#000000" SIZE=3D2 FACE=3D"Courier New">Field.Index.TOKENIZED);</FONT></=
SPAN>
</P>

<P><SPAN LANG=3D"en-us"><FONT COLOR=3D"#000000" SIZE=3D2 FACE=3D"Courier Ne=
w">contentField.setBoost(100);</FONT><FONT SIZE=3D2 FACE=3D"Courier New">&n=
bsp;&nbsp;&nbsp;&nbsp;&nbsp; </FONT></SPAN>

<BR><SPAN LANG=3D"en-us"><FONT COLOR=3D"#000000" SIZE=3D2 FACE=3D"Courier N=
ew">doc.add(contentField);</FONT></SPAN>
</P>

<P><SPAN LANG=3D"fr-be"><FONT COLOR=3D"#000000" SIZE=3D2 FACE=3D"Courier Ne=
w">In my document I have the word &quot;experience&quot;,</FONT></SPAN>

<BR><SPAN LANG=3D"fr-be"><FONT COLOR=3D"#000000" SIZE=3D2 FACE=3D"Courier N=
ew">when I do a search on this word I keep having a score of a bit more tha=
n 0.</FONT></SPAN>
</P>

<P><SPAN LANG=3D"fr-be"><FONT COLOR=3D"#000000" SIZE=3D2 FACE=3D"Courier Ne=
w">Why is my boost not working ?</FONT></SPAN>
</P>

<P><SPAN LANG=3D"fr-be"><FONT COLOR=3D"#000000" SIZE=3D2 FACE=3D"Courier Ne=
w">Thank u.</FONT></SPAN><SPAN LANG=3D"en-us"></SPAN>
</P>

<P><B><SPAN LANG=3D"fr"><WBR><WBR><WBR><WBR><WBR><WBR><WBR><WBR><WBR><WBR><=
WBR><WBR><WBR><WBR><WBR><WBR><FONT COLOR=3D"#006699" SIZE=3D1 FACE=3D"Verda=
na">__________________________________</FONT></SPAN></B>
</P>

<P><B><SPAN LANG=3D"fr"><FONT COLOR=3D"#006699" SIZE=3D1 FACE=3D"Verdana">&=
nbsp;&nbsp; Mathieu Decaffmeyer</FONT></SPAN></B><SPAN LANG=3D"fr"></SPAN><=
SPAN LANG=3D"en-us"></SPAN>
</P>

<CODE><FONT SIZE=3D3><BR>
<BR>
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D<BR>
Internet communications are not secure and therefore Fortis Banque Luxembou=
rg S.A. does not accept legal responsibility for the contents of this messa=
ge. The information contained in this e-mail is confidential and may be leg=
ally privileged. It is intended solely for the addressee. If you are not th=
e intended recipient, any disclosure, copying, distribution or any action t=
aken or omitted to be taken in reliance on it, is prohibited and may be unl=
awful. Nothing in the message is capable or intended to create any legally =
binding obligations on either party and it is not intended to provide legal=
 advice.<BR>
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D<BR>
</FONT></CODE>
</BODY>
</HTML>
------_=_NextPart_001_01C7451F.1F267C4B--


------=_NextPartTM-000-52aa10a5-1ee2-45f7-ba8d-04f6597f651e
Content-Type: text/plain; charset=us-ascii

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org
------=_NextPartTM-000-52aa10a5-1ee2-45f7-ba8d-04f6597f651e--


From java-user-return-25849-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 31 12:40:18 2007
Return-Path: <java-user-return-25849-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37459 invoked from network); 31 Jan 2007 12:40:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Jan 2007 12:40:17 -0000
Received: (qmail 93907 invoked by uid 500); 31 Jan 2007 12:40:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93869 invoked by uid 500); 31 Jan 2007 12:40:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93853 invoked by uid 99); 31 Jan 2007 12:40:15 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 31 Jan 2007 04:40:15 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,MIME_BOUND_NEXTPART
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [212.190.206.154] (HELO srs2na11.bgl.lu) (212.190.206.154)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 31 Jan 2007 04:40:06 -0800
Received: from spmwf02l.luinternal.fortis.bank (unverified) by srs2na12.domain
 (Content Technologies SMTPRS 4.2.10) with ESMTP id <T7d84ce4e390aaf150a159@srs2na12.domain> for <java-user@lucene.apache.org>;
 Wed, 31 Jan 2007 13:43:44 +0100
Received: from SPMWB02L.luinternal.fortis.bank ([10.172.252.140]) by spmwf02l.luinternal.fortis.bank with Microsoft SMTPSVC(6.0.3790.0);
	 Wed, 31 Jan 2007 13:39:30 +0100
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/mixed;
	boundary="----=_NextPartTM-000-9d749c7b-139c-4e9b-86ec-0098639ea0fd"
X-MimeOLE: Produced By Microsoft Exchange V6.5
Subject: RE: Boost
Date: Wed, 31 Jan 2007 13:39:28 +0100
Message-ID: <EBC8F228BDB35A4394D0BE53DA25248808A9A2D7@SPMWB02L.luinternal.fortis.bank>
In-Reply-To: <EBC8F228BDB35A4394D0BE53DA25248808A9A2C8@SPMWB02L.luinternal.fortis.bank>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Boost
Thread-Index: AcdFHx/s6JoGNST+QFOgan8VOJs65AAFavVQ
From: "DECAFFMEYER MATHIEU" <MATHIEU.DECAFFMAYER@fortis.lu>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 31 Jan 2007 12:39:30.0624 (UTC) FILETIME=[DA49E400:01C74534]
X-Virus-Checked: Checked by ClamAV on apache.org

------=_NextPartTM-000-9d749c7b-139c-4e9b-86ec-0098639ea0fd
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C74534.D94CB37B"

------_=_NextPart_001_01C74534.D94CB37B
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Sorry I have it working ...
=20
__________________________________=20

   Mathieu Decaffmeyer=20


=20

________________________________

From: DECAFFMEYER MATHIEU [mailto:MATHIEU.DECAFFMAYER@fortis.lu]=20
Sent: Wednesday, January 31, 2007 11:04 AM
To: java-user@lucene.apache.org
Subject: Boost


***** This message comes from the Internet Network *****



Just as a test I tried this :=20

Field contentField =3D=20
    new Field(=20
        "content", cleanedContent,=20
        Field.Store.NO,=20
        Field.Index.TOKENIZED);=20

contentField.setBoost(100);     =20
doc.add(contentField);=20

In my document I have the word "experience",=20
when I do a search on this word I keep having a score of a bit more than
0.=20

Why is my boost not working ?=20

Thank u.=20

__________________________________=20

   Mathieu Decaffmeyer=20



=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D
Internet communications are not secure and therefore Fortis Banque
Luxembourg S.A. does not accept legal responsibility for the contents of
this message. The information contained in this e-mail is confidential
and may be legally privileged. It is intended solely for the addressee.
If you are not the intended recipient, any disclosure, copying,
distribution or any action taken or omitted to be taken in reliance on
it, is prohibited and may be unlawful. Nothing in the message is capable
or intended to create any legally binding obligations on either party
and it is not intended to provide legal advice.
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D


------_=_NextPart_001_01C74534.D94CB37B
Content-Type: text/html;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML><HEAD><TITLE>Boost</TITLE>
<META http-equiv=3DContent-Type content=3D"text/html; =
charset=3Dus-ascii">
<META content=3D"MSHTML 6.00.2900.2802" name=3DGENERATOR></HEAD>
<BODY>
<DIV dir=3Dltr align=3Dleft><FONT face=3DArial size=3D2><SPAN=20
class=3D236063912-31012007><STRONG>Sorry I have it working=20
...</STRONG></SPAN></FONT></DIV>
<DIV>&nbsp;</DIV><!-- Converted from text/rtf format --><B><FONT =
face=3DVerdana=20
color=3D#006699 size=3D1>__________________________________</FONT></B>=20
<P><B><FONT face=3DVerdana color=3D#006699 size=3D1>&nbsp;&nbsp; Mathieu =

Decaffmeyer</B> <BR></P></FONT>
<DIV><EM><FONT face=3DVerdana size=3D1></FONT></EM>&nbsp;</DIV><BR>
<DIV class=3DOutlookMessageHeader lang=3Den-us dir=3Dltr align=3Dleft>
<HR tabIndex=3D-1>
<FONT face=3DTahoma size=3D2><B>From:</B> DECAFFMEYER MATHIEU=20
[mailto:MATHIEU.DECAFFMAYER@fortis.lu] <BR><B>Sent:</B> Wednesday, =
January 31,=20
2007 11:04 AM<BR><B>To:</B> =
java-user@lucene.apache.org<BR><B>Subject:</B>=20
Boost<BR></FONT><BR></DIV>
<DIV></DIV><CODE><FONT size=3D3>***** This message comes from the =
Internet Network=20
*****<BR><BR></FONT></CODE><!-- Converted from text/rtf format -->
<P><FONT face=3DArial size=3D2>Just as a test I tried this :</FONT> </P>
<P><FONT face=3D"Courier New" color=3D#000000 size=3D2>Field</FONT><FONT =

face=3D"Courier New" size=3D2> </FONT><FONT face=3D"Courier New" =
color=3D#000000=20
size=3D2>contentField</FONT><FONT face=3D"Courier New" size=3D2> =
</FONT><FONT=20
face=3D"Courier New" color=3D#000000 size=3D2>=3D</FONT><FONT =
face=3D"Courier New" size=3D2>=20
</FONT><BR><SPAN lang=3Dfr-be><FONT face=3D"Courier New"=20
size=3D2>&nbsp;&nbsp;&nbsp;<B></B></FONT><B></B></SPAN><B><SPAN =
lang=3Den-us> <FONT=20
face=3D"Courier New" color=3D#7f0055 size=3D2>new</FONT></SPAN></B><SPAN =

lang=3Den-us><FONT face=3D"Courier New" size=3D2> </FONT><FONT =
face=3D"Courier New"=20
color=3D#000000 size=3D2>Field(</FONT></SPAN> <BR><SPAN =
lang=3Dfr-be><FONT=20
face=3D"Courier New" color=3D#000000=20
size=3D2>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT></SPAN><SPAN =
lang=3Den-us>=20
<FONT face=3D"Courier New" color=3D#2a00ff =
size=3D2>"content"</FONT><FONT=20
face=3D"Courier New" color=3D#000000 size=3D2>,</FONT><FONT =
face=3D"Courier New" size=3D2>=20
</FONT><FONT face=3D"Courier New" color=3D#000000 =
size=3D2>cleanedContent,</FONT><FONT=20
face=3D"Courier New" size=3D2> </FONT></SPAN><BR><SPAN =
lang=3Dfr-be><FONT=20
face=3D"Courier New"=20
size=3D2>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT></SPAN><SPAN =
lang=3Den-us>=20
<FONT face=3D"Courier New" color=3D#000000 =
size=3D2>Field.Store.NO,</FONT><FONT=20
face=3D"Courier New" size=3D2> </FONT></SPAN><BR><SPAN =
lang=3Dfr-be><FONT=20
face=3D"Courier New"=20
size=3D2>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT></SPAN><SPAN =
lang=3Den-us>=20
<FONT face=3D"Courier New" color=3D#000000=20
size=3D2>Field.Index.TOKENIZED);</FONT></SPAN> </P>
<P><SPAN lang=3Den-us><FONT face=3D"Courier New" color=3D#000000=20
size=3D2>contentField.setBoost(100);</FONT><FONT face=3D"Courier New"=20
size=3D2>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </FONT></SPAN><BR><SPAN =
lang=3Den-us><FONT=20
face=3D"Courier New" color=3D#000000 =
size=3D2>doc.add(contentField);</FONT></SPAN>=20
</P>
<P><SPAN lang=3Dfr-be><FONT face=3D"Courier New" color=3D#000000 =
size=3D2>In my document=20
I have the word "experience",</FONT></SPAN> <BR><SPAN lang=3Dfr-be><FONT =

face=3D"Courier New" color=3D#000000 size=3D2>when I do a search on this =
word I keep=20
having a score of a bit more than 0.</FONT></SPAN> </P>
<P><SPAN lang=3Dfr-be><FONT face=3D"Courier New" color=3D#000000 =
size=3D2>Why is my=20
boost not working ?</FONT></SPAN> </P>
<P><SPAN lang=3Dfr-be><FONT face=3D"Courier New" color=3D#000000 =
size=3D2>Thank=20
u.</FONT></SPAN><SPAN lang=3Den-us></SPAN> </P>
<P><B><SPAN=20
lang=3Dfr><WBR><WBR><WBR><WBR><WBR><WBR><WBR><WBR><WBR><WBR><WBR><WBR><WB=
R><WBR><WBR><WBR><FONT=20
face=3DVerdana color=3D#006699=20
size=3D1>__________________________________</FONT></SPAN></B> </P>
<P><B><SPAN lang=3Dfr><FONT face=3DVerdana color=3D#006699 =
size=3D1>&nbsp;&nbsp; Mathieu=20
Decaffmeyer</FONT></SPAN></B><SPAN lang=3Dfr></SPAN><SPAN =
lang=3Den-us></SPAN>=20
</P><CODE><FONT=20
size=3D3><BR><BR>=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
<BR>Internet=20
communications are not secure and therefore Fortis Banque Luxembourg =
S.A. does=20
not accept legal responsibility for the contents of this message. The=20
information contained in this e-mail is confidential and may be legally=20
privileged. It is intended solely for the addressee. If you are not the =
intended=20
recipient, any disclosure, copying, distribution or any action taken or =
omitted=20
to be taken in reliance on it, is prohibited and may be unlawful. =
Nothing in the=20
message is capable or intended to create any legally binding obligations =
on=20
either party and it is not intended to provide legal=20
advice.<BR>=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D<BR>=
</FONT></CODE></BODY></HTML>

------_=_NextPart_001_01C74534.D94CB37B--


------=_NextPartTM-000-9d749c7b-139c-4e9b-86ec-0098639ea0fd
Content-Type: text/plain; charset=us-ascii

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org
------=_NextPartTM-000-9d749c7b-139c-4e9b-86ec-0098639ea0fd--


From java-user-return-25850-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 31 13:57:04 2007
Return-Path: <java-user-return-25850-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61324 invoked from network); 31 Jan 2007 13:57:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Jan 2007 13:57:03 -0000
Received: (qmail 43549 invoked by uid 500); 31 Jan 2007 13:57:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43517 invoked by uid 500); 31 Jan 2007 13:57:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43501 invoked by uid 99); 31 Jan 2007 13:57:01 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 31 Jan 2007 05:57:01 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of gui@prosoma.com.br designates 67.19.26.18 as permitted sender)
Received: from [67.19.26.18] (HELO diesel.infoage.com.br) (67.19.26.18)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 31 Jan 2007 05:56:52 -0800
Received: from [192.168.168.103] (201-42-165-179.dsl.telesp.net.br [201.42.165.179])
	by diesel.infoage.com.br (Postfix) with ESMTP id CC848474299
	for <java-user@lucene.apache.org>; Wed, 31 Jan 2007 11:52:38 -0200 (BRST)
Subject: Recreating an index
From: Guilherme Barile <gui@prosoma.com.br>
To: java-user@lucene.apache.org
Content-Type: text/plain
Date: Wed, 31 Jan 2007 11:56:27 -0200
Message-Id: <1170251787.6388.33.camel@gui>
Mime-Version: 1.0
X-Mailer: Evolution 2.8.1 
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hello, I have a system that uses lucene to index information contained
on text files, one register per line.
When I start up, I load the text file and create the index, after that,
a Timer starts up, and verifies the file's lastModified() attribute, if
that changed, I need to recreate the index.

The problem is, I can't just delete the old index and create a new one,
because people are querying it. The idea is to create a temporary index,
and when it's done, substitute the old index with the new one.

Any tips on doing that ?



Thanks a lot

gui


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25851-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 31 14:03:55 2007
Return-Path: <java-user-return-25851-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64777 invoked from network); 31 Jan 2007 14:03:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Jan 2007 14:03:54 -0000
Received: (qmail 59125 invoked by uid 500); 31 Jan 2007 14:03:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59092 invoked by uid 500); 31 Jan 2007 14:03:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59081 invoked by uid 99); 31 Jan 2007 14:03:54 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 31 Jan 2007 06:03:54 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [212.190.206.154] (HELO srs2na11.bgl.lu) (212.190.206.154)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 31 Jan 2007 06:03:45 -0800
Received: from spmwf02l.luinternal.fortis.bank (unverified) by srs2na12.domain
 (Content Technologies SMTPRS 4.2.10) with ESMTP id <T7d851aeedc0aaf150a159@srs2na12.domain> for <java-user@lucene.apache.org>;
 Wed, 31 Jan 2007 15:07:26 +0100
Received: from SPMWB02L.luinternal.fortis.bank ([10.172.252.140]) by spmwf02l.luinternal.fortis.bank with Microsoft SMTPSVC(6.0.3790.0);
	 Wed, 31 Jan 2007 15:03:08 +0100
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
X-MimeOLE: Produced By Microsoft Exchange V6.5
Subject: RE: Recreating an index
Date: Wed, 31 Jan 2007 15:03:22 +0100
Message-ID: <EBC8F228BDB35A4394D0BE53DA25248808A9A2DE@SPMWB02L.luinternal.fortis.bank>
In-Reply-To: <1170251787.6388.33.camel@gui>
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
Thread-Topic: Recreating an index
Thread-Index: AcdFP7Md6In2+Ba/TjybCDv6LBqJsgAADYeA
From: "DECAFFMEYER MATHIEU" <MATHIEU.DECAFFMAYER@fortis.lu>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 31 Jan 2007 14:03:08.0475 (UTC) FILETIME=[892930B0:01C74540]
X-Virus-Checked: Checked by ClamAV on apache.org

Hi, I have exactly the same question.
Correct me if I'm wrong :
it seems that I can do any I/O operations on the index while querying
because of the open IndexReader.

So if I had the same situation as gui (the poster of the thread), I can
just delete the old index while people query on it ?
Then build a new index and re-open an indexreader on it ?

Thanks.
__________________________________
Matt


   =20

-----Original Message-----
From: Guilherme Barile [mailto:gui@prosoma.com.br]=20
Sent: Wednesday, January 31, 2007 2:56 PM
To: java-user@lucene.apache.org
Subject: Recreating an index

*****  This message comes from the Internet Network *****

Hello, I have a system that uses lucene to index information contained
on text files, one register per line.
When I start up, I load the text file and create the index, after that,
a Timer starts up, and verifies the file's lastModified() attribute, if
that changed, I need to recreate the index.

The problem is, I can't just delete the old index and create a new one,
because people are querying it. The idea is to create a temporary index,
and when it's done, substitute the old index with the new one.

Any tips on doing that ?



Thanks a lot

gui


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D
Internet communications are not secure and therefore Fortis Banque Luxembou=
rg S.A. does not accept legal responsibility for the contents of this messa=
ge. The information contained in this e-mail is confidential and may be leg=
ally privileged. It is intended solely for the addressee. If you are not th=
e intended recipient, any disclosure, copying, distribution or any action t=
aken or omitted to be taken in reliance on it, is prohibited and may be unl=
awful. Nothing in the message is capable or intended to create any legally =
binding obligations on either party and it is not intended to provide legal=
 advice.
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25852-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 31 14:55:24 2007
Return-Path: <java-user-return-25852-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8562 invoked from network); 31 Jan 2007 14:55:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Jan 2007 14:55:13 -0000
Received: (qmail 72569 invoked by uid 500); 31 Jan 2007 14:55:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72540 invoked by uid 500); 31 Jan 2007 14:55:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72517 invoked by uid 99); 31 Jan 2007 14:55:13 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 31 Jan 2007 06:55:13 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [66.111.4.28] (HELO out4.smtp.messagingengine.com) (66.111.4.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 31 Jan 2007 06:55:03 -0800
Received: from out1.internal (unknown [10.202.2.149])
	by out1.messagingengine.com (Postfix) with ESMTP id 065039DE67
	for <java-user@lucene.apache.org>; Wed, 31 Jan 2007 09:54:42 -0500 (EST)
Received: from heartbeat1.messagingengine.com ([10.202.2.160])
  by out1.internal (MEProxy); Wed, 31 Jan 2007 09:54:42 -0500
X-Sasl-enc: MWajChjabQdYEIOQT5b1AwEIn8SiOMcNPafXm2Vh3O5k 1170255281
Received: from [10.17.4.90] (pool-71-162-112-251.bstnma.fios.verizon.net [71.162.112.251])
	by mail.messagingengine.com (Postfix) with ESMTP id B046622300
	for <java-user@lucene.apache.org>; Wed, 31 Jan 2007 09:54:41 -0500 (EST)
Message-ID: <45C0ADA3.5090202@mikemccandless.com>
Date: Wed, 31 Jan 2007 09:54:27 -0500
From: Michael McCandless <lucene@mikemccandless.com>
User-Agent: Thunderbird 1.5.0.9 (Windows/20061207)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Recreating an index
References: <EBC8F228BDB35A4394D0BE53DA25248808A9A2DE@SPMWB02L.luinternal.fortis.bank>
In-Reply-To: <EBC8F228BDB35A4394D0BE53DA25248808A9A2DE@SPMWB02L.luinternal.fortis.bank>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org



DECAFFMEYER MATHIEU wrote:
> Hi, I have exactly the same question.
> Correct me if I'm wrong :
> it seems that I can do any I/O operations on the index while querying
> because of the open IndexReader.
> 
> So if I had the same situation as gui (the poster of the thread), I can
> just delete the old index while people query on it ?
> Then build a new index and re-open an indexreader on it ?

Opening an index dir with "create=true" while readers are using it is
not well supported in Lucene currently.

I think it will work fine on UNIX ("delete on last close" file
semantics), but on Windows you will get access denied errors if
you try this.  The workaround is to make the new index in a new path
and then swap readers over to that new path at a "good time".

But some good news: this is now fixed in the trunk (not yet in any
release but will be in 2.1 once it's released).  We re-use the same
retry logic that's normally used by a writer when deleting files, to
avoid problems with access denied errors on Windows.

Also, beware the deadly LUCENE-140:

     http://issues.apache.org/jira/browse/LUCENE-140

which causes silent index corruption if you use the wrong "create =
true".  Both FSDirectory and IndexWriter take "create" (this was
confusing and is also fixed in trunk).  You should use both
FSDirectory's "create=true" and IndexWriter's "create=true" to prevent
that corruption.

Mike

> -----Original Message-----
> From: Guilherme Barile [mailto:gui@prosoma.com.br] 
> Sent: Wednesday, January 31, 2007 2:56 PM
> To: java-user@lucene.apache.org
> Subject: Recreating an index
> 
> *****  This message comes from the Internet Network *****
> 
> Hello, I have a system that uses lucene to index information contained
> on text files, one register per line.
> When I start up, I load the text file and create the index, after that,
> a Timer starts up, and verifies the file's lastModified() attribute, if
> that changed, I need to recreate the index.
> 
> The problem is, I can't just delete the old index and create a new one,
> because people are querying it. The idea is to create a temporary index,
> and when it's done, substitute the old index with the new one.
> 
> Any tips on doing that ?
> 
> 
> 
> Thanks a lot
> 
> gui
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 
> ============================================
> Internet communications are not secure and therefore Fortis Banque Luxembourg S.A. does not accept legal responsibility for the contents of this message. The information contained in this e-mail is confidential and may be legally privileged. It is intended solely for the addressee. If you are not the intended recipient, any disclosure, copying, distribution or any action taken or omitted to be taken in reliance on it, is prohibited and may be unlawful. Nothing in the message is capable or intended to create any legally binding obligations on either party and it is not intended to provide legal advice.
> ============================================
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25853-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 31 16:31:49 2007
Return-Path: <java-user-return-25853-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47398 invoked from network); 31 Jan 2007 16:31:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Jan 2007 16:31:34 -0000
Received: (qmail 18466 invoked by uid 500); 31 Jan 2007 16:31:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18383 invoked by uid 500); 31 Jan 2007 16:31:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18372 invoked by uid 99); 31 Jan 2007 16:31:32 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 31 Jan 2007 08:31:32 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of csahat@gmail.com designates 64.233.182.184 as permitted sender)
Received: from [64.233.182.184] (HELO nf-out-0910.google.com) (64.233.182.184)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 31 Jan 2007 08:31:23 -0800
Received: by nf-out-0910.google.com with SMTP id a27so559947nfc
        for <java-user@lucene.apache.org>; Wed, 31 Jan 2007 08:31:02 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=sFkpA7YnyZyJjx6/IcwLQwQxrXMsfeSKNJtUj0lAWfwPRsZy516s5KDvTdY/N3rUF5m4yGkiCWL4McLym/jNnJ8h74CrfI/0Rt6Wp5Crl94tycDNt1tVBN52iDvD6Ggxy3vZcdyQMR8gJRsUCo92mxOXSudeEwij5SSpOstDl0o=
Received: by 10.82.169.4 with SMTP id r4mr241600bue.1170261062208;
        Wed, 31 Jan 2007 08:31:02 -0800 (PST)
Received: by 10.82.174.13 with HTTP; Wed, 31 Jan 2007 08:31:02 -0800 (PST)
Message-ID: <2e64e87b0701310831o431ed525g4822295093bf31d5@mail.gmail.com>
Date: Wed, 31 Jan 2007 17:31:02 +0100
From: csahat <csahat@gmail.com>
To: java-user@lucene.apache.org
Subject: Counting terms' hits from phrase
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_8634_2135287.1170261062188"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_8634_2135287.1170261062188
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi all,

   What I want to do is like this :


   Search for :  C++ Java Phyton


   And then the result will be displayed like this :


   document1.txt     C++(20 hits)    Java(15 hits)         Phyton(4 hits)
   document2.txt     C++(19 hits)    Java(14 hits)         Phyton(3 hits)
    document3.txt     C++(16 hits)    Java(3 hits)           Phyton(2 hits)


    I used IndexSearcher to search, but it seems IndexSearcher
can only display the score.
I think I have to use IndexReader, with TermVector, but I don't know
how to do that.

   If a phrase composed of 3 terms, should I crawl through all the
documents 3 times using IndexReader, just to do that ?
Or can I just do 1 time crawl, and can count all the terms' hits ?
And is Lucene capable to separate my phrase into terms, so
I don't have to write another code to separate the terms from phrase ?

   Any help would be appreciated.

Thanks

------=_Part_8634_2135287.1170261062188--

From java-user-return-25854-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 31 16:59:38 2007
Return-Path: <java-user-return-25854-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 55625 invoked from network); 31 Jan 2007 16:59:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Jan 2007 16:59:37 -0000
Received: (qmail 71967 invoked by uid 500); 31 Jan 2007 16:59:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71925 invoked by uid 500); 31 Jan 2007 16:59:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71914 invoked by uid 99); 31 Jan 2007 16:59:36 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 31 Jan 2007 08:59:36 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of janssen@parc.com designates 13.1.64.93 as permitted sender)
Received: from [13.1.64.93] (HELO alpha.xerox.com) (13.1.64.93)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 31 Jan 2007 08:59:26 -0800
Received: from synergy1.parc.xerox.com ([13.1.101.60]) by alpha.xerox.com with SMTP id <224441(2)>; Wed, 31 Jan 2007 08:58:53 PST
Received: from parc.com ([127.0.0.1]) by synergy1.parc.xerox.com with SMTP id <58648>; Wed, 31 Jan 2007 08:58:48 PST
To: java-user@lucene.apache.org
Subject: Re: using a document as a query? 
In-reply-to: <238960.22704.qm@web50309.mail.yahoo.com> 
References: <238960.22704.qm@web50309.mail.yahoo.com>
Comments: In-reply-to Otis Gospodnetic <otis_gospodnetic@yahoo.com>
    message dated "Tue, 30 Jan 2007 23:13:15 -0800."
Date: Wed, 31 Jan 2007 08:58:38 PST
From: Bill Janssen <janssen@parc.com>
Message-Id: <07Jan31.085848pst."58648"@synergy1.parc.xerox.com>
X-Virus-Checked: Checked by ClamAV on apache.org

MoreLikeThis is just what I wanted.  Thanks.

Bill

> Yes, I believe Dave did something like that on searchmorph.org and somebody=
>  else did this on some some with RFCs.  What's that called?  Query by examp=
> le?  I think so, try define:Query By Example on Google.
> 
> Take a look at=
>  MoreLikeThis class in contrib/ too. :)
> 
> Otis

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25855-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 31 23:53:21 2007
Return-Path: <java-user-return-25855-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26740 invoked from network); 31 Jan 2007 23:53:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Jan 2007 23:53:20 -0000
Received: (qmail 1570 invoked by uid 500); 31 Jan 2007 23:53:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 1547 invoked by uid 500); 31 Jan 2007 23:53:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 1535 invoked by uid 99); 31 Jan 2007 23:53:19 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 31 Jan 2007 15:53:19 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 31 Jan 2007 15:53:11 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id CFD205B771; Wed, 31 Jan 2007 15:52:50 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id CACCD7F403
	for <java-user@lucene.apache.org>; Wed, 31 Jan 2007 15:52:50 -0800 (PST)
Date: Wed, 31 Jan 2007 15:52:50 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Boost/Scoring question
In-Reply-To: <45BFF305.60707@teamware.com>
Message-ID: <Pine.LNX.4.58.0701311543150.16454@hal.rescomp.berkeley.edu>
References: <45BFDAAD.9070900@teamware.com> <Pine.LNX.4.58.0701301624020.24685@hal.rescomp.berkeley.edu>
 <45BFF305.60707@teamware.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: Thanks for the comments.  Where I was trying to get to was whether a match on a
: field with boost of 0.0 can ever cause the normalised score to result in 0 if
: there is also a match on a field with a non zero boost.  I'm not sure I
: understand the scoring formula :(

well .. it gets more complicated ... last time i checked, using the Hits
API, even if something matches, but matches with score <= 0, then it's not
included in the results (it is registered as a match when using
HitCollector)

so you could theoretically have a query where the raw score is *negative*
but a document matches.

: If I search for a document where the field boost is 0.0 then the document is not
: found I just search that field.  Is this expected???

you mean you search on:       A^0    and get no results even though
documents contain A, and if you search on:       +A^0  B^1     you see
those documents?

that would be that odd part of the Hits behavior i was describing above --
it's all there to try and meet the expecations of people that scores will
be between 0 and 1 (and in simple cases most people using Hits care about,
scores shouldn't be negative, so assume negative scores are non-matches)

: I have a configurable framework, where the field schema can have the boost set
: and I am trying to understand whether to allow >=0.0 of just >0.0 and how Lucene
: behaves with 0.0.

if you plan on using Hits, i would suggest requiring that boosts be >0 ..
if you want to start dealing with raw scores, then boosts can definitely
be 0.


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25856-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jan 31 23:54:23 2007
Return-Path: <java-user-return-25856-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26956 invoked from network); 31 Jan 2007 23:54:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Jan 2007 23:54:22 -0000
Received: (qmail 3573 invoked by uid 500); 31 Jan 2007 23:54:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3531 invoked by uid 500); 31 Jan 2007 23:54:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3520 invoked by uid 99); 31 Jan 2007 23:54:22 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 31 Jan 2007 15:54:22 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 31 Jan 2007 15:54:14 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id C157F5B771; Wed, 31 Jan 2007 15:53:53 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id BF5CB7F403
	for <java-user@lucene.apache.org>; Wed, 31 Jan 2007 15:53:53 -0800 (PST)
Date: Wed, 31 Jan 2007 15:53:53 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: RE: Score
In-Reply-To: <EBC8F228BDB35A4394D0BE53DA25248808A9A2C5@SPMWB02L.luinternal.fortis.bank>
Message-ID: <Pine.LNX.4.58.0701311553130.16454@hal.rescomp.berkeley.edu>
References: <EBC8F228BDB35A4394D0BE53DA25248808A9A2C5@SPMWB02L.luinternal.fortis.bank>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: >>Have you looked at the constructor for BooleanQuery and
: >>tried passing "true" to disable the Coord factor?
:
: Thanks Chris, this is exactly what I want,
: but I am working with lucene 1.4.3 because I have to for some reasons,
:
: Is there any equivalent ?!

if you look atteh source for it, it's fairly trivial ... you should be
able to putthe same logic into a simple little helper function you use
when making BooleanQueries.




-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-25857-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Feb 01 00:50:32 2007
Return-Path: <java-user-return-25857-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 41257 invoked from network); 1 Feb 2007 00:50:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Feb 2007 00:50:29 -0000
Received: (qmail 78286 invoked by uid 500); 1 Feb 2007 00:50:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78254 invoked by uid 500); 1 Feb 2007 00:50:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78206 invoked by uid 99); 1 Feb 2007 00:50:21 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 31 Jan 2007 16:50:21 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of karl.wettin@gmail.com designates 66.249.92.170 as permitted sender)
Received: from [66.249.92.170] (HELO ug-out-1314.google.com) (66.249.92.170)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 31 Jan 2007 16:50:10 -0800
Received: by ug-out-1314.google.com with SMTP id k40so336050ugc
        for <java-user@lucene.apache.org>; Wed, 31 Jan 2007 16:49:49 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:in-reply-to:references:mime-version:content-type:message-id:cc:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=l5C3hLbRV+8dUiOdiDmkuy+08cJ5UfrDdOzILJc3/Bzrg3rZ77aIjMRMzLV2hWTfHiVFRrdhrIam4j6aGDVLg12unm2DkrEa1rbahalmKV1YbeWTT5a7GfpHL080ELTFjAonLG+XlqCU0eTFD6YVB3Fg2soIyueM++mc1NWs0WI=
Received: by 10.67.29.12 with SMTP id g12mr1860832ugj.1170290988887;
        Wed, 31 Jan 2007 16:49:48 -0800 (PST)
Received: from ?192.168.1.7? ( [83.249.100.34])
        by mx.google.com with ESMTP id 13sm1836586ugb.2007.01.31.16.49.47;
        Wed, 31 Jan 2007 16:49:48 -0800 (PST)
In-Reply-To: <1170242713.45c07c99a4dfb@webmail.fh-konstanz.de>
References: <1170242713.45c07c99a4dfb@webmail.fh-konstanz.de>
Mime-Version: 1.0 (Apple Message framework v752.3)
Content-Type: text/plain; charset=ISO-8859-1; delsp=yes; format=flowed
Message-Id: <6C51D67D-4831-486C-8EDA-84CD9BBF3A22@gmail.com>
Cc: java-dev@lucene.apache.org
Content-Transfer-Encoding: quoted-printable
From: karl wettin <karl.wettin@gmail.com>
Subject: Re: Field methods and usage
Date: Thu, 1 Feb 2007 01:48:55 +0100
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org

31 jan 2007 kl. 12.25 skrev Christoph P=E4chter:
>
> I was wondering, if there is anywhere a table (similar to Table 1.2 =20=

> An overview
> of different field types, their characteristics, and their usage in =20=

> Lucene in
> Action), listing the possible methods and their usage.

Implementations will differ, for example:

>
> Store   |TermVector              |Index          |reasonable |Usage
> YES     |NO                      |NO             |1          |URLs
>                                                              |=20
> telephone number

You never have to store anything in the index, perhaps that =20
information is persistent somewhere else?

If you use a term vector or not depends very little on what kind of =20
information you store in there, it is up to what analysis you plan to =20=

include the documents in. Highlighting? More like this? Neural networks?

Some are more than happy with one large token. Other people might =20
want to tokenize the exact same information.

An URL in [protocol://host:port/path], a phone number in country-, =20
area, and district parts.

It really up to each and every implementer to decide what settings is =20=

best for them.

Also, a Lucene index is not made up of static rows and columns the =20
way a relational database is. The spoon does not exists. You can bend =20=

it any way you want. Documents in a corpus can share field that share =20=

names but not settings. Perhaps you only want to index phone numbers =20
in a specific area code.

--=20
karl=

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


